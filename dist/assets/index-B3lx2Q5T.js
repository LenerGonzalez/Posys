var Ece=Object.defineProperty;var Sce=(t,e,r)=>e in t?Ece(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Rn=(t,e,r)=>Sce(t,typeof e!="symbol"?e+"":e,r);function Ice(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Crt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ef(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xz={exports:{}},eI={},vz={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=Symbol.for("react.element"),Bce=Symbol.for("react.portal"),Tce=Symbol.for("react.fragment"),Pce=Symbol.for("react.strict_mode"),jce=Symbol.for("react.profiler"),kce=Symbol.for("react.provider"),Fce=Symbol.for("react.context"),Oce=Symbol.for("react.forward_ref"),Dce=Symbol.for("react.suspense"),Rce=Symbol.for("react.memo"),Mce=Symbol.for("react.lazy"),nM=Symbol.iterator;function Lce(t){return t===null||typeof t!="object"?null:(t=nM&&t[nM]||t["@@iterator"],typeof t=="function"?t:null)}var yz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bz=Object.assign,wz={};function uv(t,e,r){this.props=t,this.context=e,this.refs=wz,this.updater=r||yz}uv.prototype.isReactComponent={};uv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nz(){}Nz.prototype=uv.prototype;function lF(t,e,r){this.props=t,this.context=e,this.refs=wz,this.updater=r||yz}var cF=lF.prototype=new Nz;cF.constructor=lF;bz(cF,uv.prototype);cF.isPureReactComponent=!0;var aM=Array.isArray,_z=Object.prototype.hasOwnProperty,uF={current:null},Cz={key:!0,ref:!0,__self:!0,__source:!0};function Ez(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)_z.call(e,n)&&!Cz.hasOwnProperty(n)&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:yb,type:t,key:s,ref:i,props:a,_owner:uF.current}}function Uce(t,e){return{$$typeof:yb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dF(t){return typeof t=="object"&&t!==null&&t.$$typeof===yb}function Qce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var sM=/\/+/g;function K5(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qce(""+t.key):e.toString(36)}function K_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case yb:case Bce:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+K5(i,0):n,aM(a)?(r="",t!=null&&(r=t.replace(sM,"$&/")+"/"),K_(a,e,r,"",function(u){return u})):a!=null&&(dF(a)&&(a=Uce(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(sM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",aM(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+K5(s,o);i+=K_(s,e,r,c,a)}else if(c=Lce(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+K5(s,o++),i+=K_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Kw(t,e,r){if(t==null)return t;var n=[],a=0;return K_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Vce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sl={current:null},G_={transition:null},Hce={ReactCurrentDispatcher:Sl,ReactCurrentBatchConfig:G_,ReactCurrentOwner:uF};function Sz(){throw Error("act(...) is not supported in production builds of React.")}An.Children={map:Kw,forEach:function(t,e,r){Kw(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Kw(t,function(){e++}),e},toArray:function(t){return Kw(t,function(e){return e})||[]},only:function(t){if(!dF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};An.Component=uv;An.Fragment=Tce;An.Profiler=jce;An.PureComponent=lF;An.StrictMode=Pce;An.Suspense=Dce;An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hce;An.act=Sz;An.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=bz({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=uF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)_z.call(e,c)&&!Cz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:yb,type:t.type,key:a,ref:s,props:n,_owner:i}};An.createContext=function(t){return t={$$typeof:Fce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kce,_context:t},t.Consumer=t};An.createElement=Ez;An.createFactory=function(t){var e=Ez.bind(null,t);return e.type=t,e};An.createRef=function(){return{current:null}};An.forwardRef=function(t){return{$$typeof:Oce,render:t}};An.isValidElement=dF;An.lazy=function(t){return{$$typeof:Mce,_payload:{_status:-1,_result:t},_init:Vce}};An.memo=function(t,e){return{$$typeof:Rce,type:t,compare:e===void 0?null:e}};An.startTransition=function(t){var e=G_.transition;G_.transition={};try{t()}finally{G_.transition=e}};An.unstable_act=Sz;An.useCallback=function(t,e){return Sl.current.useCallback(t,e)};An.useContext=function(t){return Sl.current.useContext(t)};An.useDebugValue=function(){};An.useDeferredValue=function(t){return Sl.current.useDeferredValue(t)};An.useEffect=function(t,e){return Sl.current.useEffect(t,e)};An.useId=function(){return Sl.current.useId()};An.useImperativeHandle=function(t,e,r){return Sl.current.useImperativeHandle(t,e,r)};An.useInsertionEffect=function(t,e){return Sl.current.useInsertionEffect(t,e)};An.useLayoutEffect=function(t,e){return Sl.current.useLayoutEffect(t,e)};An.useMemo=function(t,e){return Sl.current.useMemo(t,e)};An.useReducer=function(t,e,r){return Sl.current.useReducer(t,e,r)};An.useRef=function(t){return Sl.current.useRef(t)};An.useState=function(t){return Sl.current.useState(t)};An.useSyncExternalStore=function(t,e,r){return Sl.current.useSyncExternalStore(t,e,r)};An.useTransition=function(){return Sl.current.useTransition()};An.version="18.3.1";vz.exports=An;var v=vz.exports;const xo=Ef(v),$ce=Ice({__proto__:null,default:xo},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kce=v,Gce=Symbol.for("react.element"),zce=Symbol.for("react.fragment"),qce=Object.prototype.hasOwnProperty,Wce=Kce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xce={key:!0,ref:!0,__self:!0,__source:!0};function Iz(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)qce.call(e,n)&&!Xce.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Gce,type:t,key:s,ref:i,props:a,_owner:Wce.current}}eI.Fragment=zce;eI.jsx=Iz;eI.jsxs=Iz;xz.exports=eI;var l=xz.exports,jT={},Bz={exports:{}},Fc={},Tz={exports:{}},Pz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(de,X){var pe=de.length;de.push(X);e:for(;0<pe;){var Se=pe-1>>>1,k=de[Se];if(0<a(k,X))de[Se]=X,de[pe]=k,pe=Se;else break e}}function r(de){return de.length===0?null:de[0]}function n(de){if(de.length===0)return null;var X=de[0],pe=de.pop();if(pe!==X){de[0]=pe;e:for(var Se=0,k=de.length,F=k>>>1;Se<F;){var V=2*(Se+1)-1,M=de[V],L=V+1,q=de[L];if(0>a(M,pe))L<k&&0>a(q,M)?(de[Se]=q,de[L]=pe,Se=L):(de[Se]=M,de[V]=pe,Se=V);else if(L<k&&0>a(q,pe))de[Se]=q,de[L]=pe,Se=L;else break e}}return X}function a(de,X){var pe=de.sortIndex-X.sortIndex;return pe!==0?pe:de.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,A=null,h=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(de){for(var X=r(u);X!==null;){if(X.callback===null)n(u);else if(X.startTime<=de)n(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=r(u)}}function w(de){if(p=!1,b(de),!m)if(r(c)!==null)m=!0,ee(I);else{var X=r(u);X!==null&&ce(w,X.startTime-de)}}function I(de,X){m=!1,p&&(p=!1,x(E),E=-1),f=!0;var pe=h;try{for(b(X),A=r(c);A!==null&&(!(A.expirationTime>X)||de&&!B());){var Se=A.callback;if(typeof Se=="function"){A.callback=null,h=A.priorityLevel;var k=Se(A.expirationTime<=X);X=t.unstable_now(),typeof k=="function"?A.callback=k:A===r(c)&&n(c),b(X)}else n(c);A=r(c)}if(A!==null)var F=!0;else{var V=r(u);V!==null&&ce(w,V.startTime-X),F=!1}return F}finally{A=null,h=pe,f=!1}}var T=!1,C=null,E=-1,S=5,O=-1;function B(){return!(t.unstable_now()-O<S)}function P(){if(C!==null){var de=t.unstable_now();O=de;var X=!0;try{X=C(!0,de)}finally{X?D():(T=!1,C=null)}}else T=!1}var D;if(typeof y=="function")D=function(){y(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Ae=W.port2;W.port1.onmessage=P,D=function(){Ae.postMessage(null)}}else D=function(){g(P,0)};function ee(de){C=de,T||(T=!0,D())}function ce(de,X){E=g(function(){de(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,ee(I))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(de){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var pe=h;h=X;try{return de()}finally{h=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,X){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var pe=h;h=de;try{return X()}finally{h=pe}},t.unstable_scheduleCallback=function(de,X,pe){var Se=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Se+pe:Se):pe=Se,de){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=pe+k,de={id:d++,callback:X,priorityLevel:de,startTime:pe,expirationTime:k,sortIndex:-1},pe>Se?(de.sortIndex=pe,e(u,de),r(c)===null&&de===r(u)&&(p?(x(E),E=-1):p=!0,ce(w,pe-Se))):(de.sortIndex=k,e(c,de),m||f||(m=!0,ee(I))),de},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(de){var X=h;return function(){var pe=h;h=X;try{return de.apply(this,arguments)}finally{h=pe}}}})(Pz);Tz.exports=Pz;var Yce=Tz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jce=v,Bc=Yce;function tr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jz=new Set,r2={};function kp(t,e){kx(t,e),kx(t+"Capture",e)}function kx(t,e){for(r2[t]=e,t=0;t<e.length;t++)jz.add(e[t])}var cf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kT=Object.prototype.hasOwnProperty,Zce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iM={},oM={};function eue(t){return kT.call(oM,t)?!0:kT.call(iM,t)?!1:Zce.test(t)?oM[t]=!0:(iM[t]=!0,!1)}function tue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rue(t,e,r,n){if(e===null||typeof e>"u"||tue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Il(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Eo[t]=new Il(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Eo[e]=new Il(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Eo[t]=new Il(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Eo[t]=new Il(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Eo[t]=new Il(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Eo[t]=new Il(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Eo[t]=new Il(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Eo[t]=new Il(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Eo[t]=new Il(t,5,!1,t.toLowerCase(),null,!1,!1)});var AF=/[\-:]([a-z])/g;function fF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AF,fF);Eo[e]=new Il(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AF,fF);Eo[e]=new Il(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AF,fF);Eo[e]=new Il(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Eo[t]=new Il(t,1,!1,t.toLowerCase(),null,!1,!1)});Eo.xlinkHref=new Il("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Eo[t]=new Il(t,1,!1,t.toLowerCase(),null,!0,!0)});function hF(t,e,r,n){var a=Eo.hasOwnProperty(e)?Eo[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rue(e,r,a,n)&&(r=null),n||a===null?eue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Sf=Jce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gw=Symbol.for("react.element"),Wg=Symbol.for("react.portal"),Xg=Symbol.for("react.fragment"),mF=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),kz=Symbol.for("react.provider"),Fz=Symbol.for("react.context"),pF=Symbol.for("react.forward_ref"),OT=Symbol.for("react.suspense"),DT=Symbol.for("react.suspense_list"),gF=Symbol.for("react.memo"),wh=Symbol.for("react.lazy"),Oz=Symbol.for("react.offscreen"),lM=Symbol.iterator;function l1(t){return t===null||typeof t!="object"?null:(t=lM&&t[lM]||t["@@iterator"],typeof t=="function"?t:null)}var hs=Object.assign,G5;function z1(t){if(G5===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);G5=e&&e[1]||""}return`
`+G5+t}var z5=!1;function q5(t,e){if(!t||z5)return"";z5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==s[o]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{z5=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?z1(t):""}function nue(t){switch(t.tag){case 5:return z1(t.type);case 16:return z1("Lazy");case 13:return z1("Suspense");case 19:return z1("SuspenseList");case 0:case 2:case 15:return t=q5(t.type,!1),t;case 11:return t=q5(t.type.render,!1),t;case 1:return t=q5(t.type,!0),t;default:return""}}function RT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xg:return"Fragment";case Wg:return"Portal";case FT:return"Profiler";case mF:return"StrictMode";case OT:return"Suspense";case DT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fz:return(t.displayName||"Context")+".Consumer";case kz:return(t._context.displayName||"Context")+".Provider";case pF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gF:return e=t.displayName||null,e!==null?e:RT(t.type)||"Memo";case wh:e=t._payload,t=t._init;try{return RT(t(e))}catch{}}return null}function aue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RT(e);case 8:return e===mF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function A0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sue(t){var e=Dz(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zw(t){t._valueTracker||(t._valueTracker=sue(t))}function Rz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Dz(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function MT(t,e){var r=e.checked;return hs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=A0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mz(t,e){e=e.checked,e!=null&&hF(t,"checked",e,!1)}function LT(t,e){Mz(t,e);var r=A0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?UT(t,e.type,r):e.hasOwnProperty("defaultValue")&&UT(t,e.type,A0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uM(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function UT(t,e,r){(e!=="number"||kC(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var q1=Array.isArray;function px(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+A0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function QT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tr(91));return hs({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(tr(92));if(q1(r)){if(1<r.length)throw Error(tr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:A0(r)}}function Lz(t,e){var r=A0(e.value),n=A0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function AM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qw,Qz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qw=qw||document.createElement("div"),qw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function n2(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iue=["Webkit","ms","Moz","O"];Object.keys(vy).forEach(function(t){iue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vy[e]=vy[t]})});function Vz(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vy.hasOwnProperty(t)&&vy[t]?(""+e).trim():e+"px"}function Hz(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Vz(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var oue=hs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HT(t,e){if(e){if(oue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tr(62))}}function $T(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KT=null;function xF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var GT=null,gx=null,xx=null;function fM(t){if(t=Nb(t)){if(typeof GT!="function")throw Error(tr(280));var e=t.stateNode;e&&(e=sI(e),GT(t.stateNode,t.type,e))}}function $z(t){gx?xx?xx.push(t):xx=[t]:gx=t}function Kz(){if(gx){var t=gx,e=xx;if(xx=gx=null,fM(t),e)for(t=0;t<e.length;t++)fM(e[t])}}function Gz(t,e){return t(e)}function zz(){}var W5=!1;function qz(t,e,r){if(W5)return t(e,r);W5=!0;try{return Gz(t,e,r)}finally{W5=!1,(gx!==null||xx!==null)&&(zz(),Kz())}}function a2(t,e){var r=t.stateNode;if(r===null)return null;var n=sI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(tr(231,e,typeof r));return r}var zT=!1;if(cf)try{var c1={};Object.defineProperty(c1,"passive",{get:function(){zT=!0}}),window.addEventListener("test",c1,c1),window.removeEventListener("test",c1,c1)}catch{zT=!1}function lue(t,e,r,n,a,s,i,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var yy=!1,FC=null,OC=!1,qT=null,cue={onError:function(t){yy=!0,FC=t}};function uue(t,e,r,n,a,s,i,o,c){yy=!1,FC=null,lue.apply(cue,arguments)}function due(t,e,r,n,a,s,i,o,c){if(uue.apply(this,arguments),yy){if(yy){var u=FC;yy=!1,FC=null}else throw Error(tr(198));OC||(OC=!0,qT=u)}}function Fp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Wz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hM(t){if(Fp(t)!==t)throw Error(tr(188))}function Aue(t){var e=t.alternate;if(!e){if(e=Fp(t),e===null)throw Error(tr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return hM(a),t;if(s===n)return hM(a),e;s=s.sibling}throw Error(tr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=s;break}if(o===n){i=!0,n=a,r=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===r){i=!0,r=s,n=a;break}if(o===n){i=!0,n=s,r=a;break}o=o.sibling}if(!i)throw Error(tr(189))}}if(r.alternate!==n)throw Error(tr(190))}if(r.tag!==3)throw Error(tr(188));return r.stateNode.current===r?t:e}function Xz(t){return t=Aue(t),t!==null?Yz(t):null}function Yz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yz(t);if(e!==null)return e;t=t.sibling}return null}var Jz=Bc.unstable_scheduleCallback,mM=Bc.unstable_cancelCallback,fue=Bc.unstable_shouldYield,hue=Bc.unstable_requestPaint,Us=Bc.unstable_now,mue=Bc.unstable_getCurrentPriorityLevel,vF=Bc.unstable_ImmediatePriority,Zz=Bc.unstable_UserBlockingPriority,DC=Bc.unstable_NormalPriority,pue=Bc.unstable_LowPriority,eq=Bc.unstable_IdlePriority,tI=null,Jd=null;function gue(t){if(Jd&&typeof Jd.onCommitFiberRoot=="function")try{Jd.onCommitFiberRoot(tI,t,void 0,(t.current.flags&128)===128)}catch{}}var ad=Math.clz32?Math.clz32:yue,xue=Math.log,vue=Math.LN2;function yue(t){return t>>>=0,t===0?32:31-(xue(t)/vue|0)|0}var Ww=64,Xw=4194304;function W1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function RC(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=W1(o):(s&=i,s!==0&&(n=W1(s)))}else i=r&~a,i!==0?n=W1(i):s!==0&&(n=W1(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ad(e),a=1<<r,n|=t[r],e&=~a;return n}function bue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wue(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-ad(s),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=bue(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function WT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tq(){var t=Ww;return Ww<<=1,!(Ww&4194240)&&(Ww=64),t}function X5(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function bb(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ad(e),t[e]=r}function Nue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-ad(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function yF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ad(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var na=0;function rq(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nq,bF,aq,sq,iq,XT=!1,Yw=[],qh=null,Wh=null,Xh=null,s2=new Map,i2=new Map,Ih=[],_ue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pM(t,e){switch(t){case"focusin":case"focusout":qh=null;break;case"dragenter":case"dragleave":Wh=null;break;case"mouseover":case"mouseout":Xh=null;break;case"pointerover":case"pointerout":s2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i2.delete(e.pointerId)}}function u1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Nb(e),e!==null&&bF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Cue(t,e,r,n,a){switch(e){case"focusin":return qh=u1(qh,t,e,r,n,a),!0;case"dragenter":return Wh=u1(Wh,t,e,r,n,a),!0;case"mouseover":return Xh=u1(Xh,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return s2.set(s,u1(s2.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,i2.set(s,u1(i2.get(s)||null,t,e,r,n,a)),!0}return!1}function oq(t){var e=Em(t.target);if(e!==null){var r=Fp(e);if(r!==null){if(e=r.tag,e===13){if(e=Wz(r),e!==null){t.blockedOn=e,iq(t.priority,function(){aq(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function z_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=YT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);KT=n,r.target.dispatchEvent(n),KT=null}else return e=Nb(r),e!==null&&bF(e),t.blockedOn=r,!1;e.shift()}return!0}function gM(t,e,r){z_(t)&&r.delete(e)}function Eue(){XT=!1,qh!==null&&z_(qh)&&(qh=null),Wh!==null&&z_(Wh)&&(Wh=null),Xh!==null&&z_(Xh)&&(Xh=null),s2.forEach(gM),i2.forEach(gM)}function d1(t,e){t.blockedOn===e&&(t.blockedOn=null,XT||(XT=!0,Bc.unstable_scheduleCallback(Bc.unstable_NormalPriority,Eue)))}function o2(t){function e(a){return d1(a,t)}if(0<Yw.length){d1(Yw[0],t);for(var r=1;r<Yw.length;r++){var n=Yw[r];n.blockedOn===t&&(n.blockedOn=null)}}for(qh!==null&&d1(qh,t),Wh!==null&&d1(Wh,t),Xh!==null&&d1(Xh,t),s2.forEach(e),i2.forEach(e),r=0;r<Ih.length;r++)n=Ih[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ih.length&&(r=Ih[0],r.blockedOn===null);)oq(r),r.blockedOn===null&&Ih.shift()}var vx=Sf.ReactCurrentBatchConfig,MC=!0;function Sue(t,e,r,n){var a=na,s=vx.transition;vx.transition=null;try{na=1,wF(t,e,r,n)}finally{na=a,vx.transition=s}}function Iue(t,e,r,n){var a=na,s=vx.transition;vx.transition=null;try{na=4,wF(t,e,r,n)}finally{na=a,vx.transition=s}}function wF(t,e,r,n){if(MC){var a=YT(t,e,r,n);if(a===null)i3(t,e,n,LC,r),pM(t,n);else if(Cue(a,t,e,r,n))n.stopPropagation();else if(pM(t,n),e&4&&-1<_ue.indexOf(t)){for(;a!==null;){var s=Nb(a);if(s!==null&&nq(s),s=YT(t,e,r,n),s===null&&i3(t,e,n,LC,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else i3(t,e,n,null,r)}}var LC=null;function YT(t,e,r,n){if(LC=null,t=xF(n),t=Em(t),t!==null)if(e=Fp(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Wz(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return LC=t,null}function lq(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mue()){case vF:return 1;case Zz:return 4;case DC:case pue:return 16;case eq:return 536870912;default:return 16}default:return 16}}var Mh=null,NF=null,q_=null;function cq(){if(q_)return q_;var t,e=NF,r=e.length,n,a="value"in Mh?Mh.value:Mh.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return q_=a.slice(t,1<n?1-n:void 0)}function W_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jw(){return!0}function xM(){return!1}function Oc(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jw:xM,this.isPropagationStopped=xM,this}return hs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jw)},persist:function(){},isPersistent:Jw}),e}var dv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_F=Oc(dv),wb=hs({},dv,{view:0,detail:0}),Bue=Oc(wb),Y5,J5,A1,rI=hs({},wb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==A1&&(A1&&t.type==="mousemove"?(Y5=t.screenX-A1.screenX,J5=t.screenY-A1.screenY):J5=Y5=0,A1=t),Y5)},movementY:function(t){return"movementY"in t?t.movementY:J5}}),vM=Oc(rI),Tue=hs({},rI,{dataTransfer:0}),Pue=Oc(Tue),jue=hs({},wb,{relatedTarget:0}),Z5=Oc(jue),kue=hs({},dv,{animationName:0,elapsedTime:0,pseudoElement:0}),Fue=Oc(kue),Oue=hs({},dv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Due=Oc(Oue),Rue=hs({},dv,{data:0}),yM=Oc(Rue),Mue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Que(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uue[t])?!!e[t]:!1}function CF(){return Que}var Vue=hs({},wb,{key:function(t){if(t.key){var e=Mue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=W_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CF,charCode:function(t){return t.type==="keypress"?W_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hue=Oc(Vue),$ue=hs({},rI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bM=Oc($ue),Kue=hs({},wb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CF}),Gue=Oc(Kue),zue=hs({},dv,{propertyName:0,elapsedTime:0,pseudoElement:0}),que=Oc(zue),Wue=hs({},rI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xue=Oc(Wue),Yue=[9,13,27,32],EF=cf&&"CompositionEvent"in window,by=null;cf&&"documentMode"in document&&(by=document.documentMode);var Jue=cf&&"TextEvent"in window&&!by,uq=cf&&(!EF||by&&8<by&&11>=by),wM=" ",NM=!1;function dq(t,e){switch(t){case"keyup":return Yue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aq(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yg=!1;function Zue(t,e){switch(t){case"compositionend":return Aq(e);case"keypress":return e.which!==32?null:(NM=!0,wM);case"textInput":return t=e.data,t===wM&&NM?null:t;default:return null}}function ede(t,e){if(Yg)return t==="compositionend"||!EF&&dq(t,e)?(t=cq(),q_=NF=Mh=null,Yg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uq&&e.locale!=="ko"?null:e.data;default:return null}}var tde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _M(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tde[t.type]:e==="textarea"}function fq(t,e,r,n){$z(n),e=UC(e,"onChange"),0<e.length&&(r=new _F("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var wy=null,l2=null;function rde(t){_q(t,0)}function nI(t){var e=ex(t);if(Rz(e))return t}function nde(t,e){if(t==="change")return e}var hq=!1;if(cf){var e3;if(cf){var t3="oninput"in document;if(!t3){var CM=document.createElement("div");CM.setAttribute("oninput","return;"),t3=typeof CM.oninput=="function"}e3=t3}else e3=!1;hq=e3&&(!document.documentMode||9<document.documentMode)}function EM(){wy&&(wy.detachEvent("onpropertychange",mq),l2=wy=null)}function mq(t){if(t.propertyName==="value"&&nI(l2)){var e=[];fq(e,l2,t,xF(t)),qz(rde,e)}}function ade(t,e,r){t==="focusin"?(EM(),wy=e,l2=r,wy.attachEvent("onpropertychange",mq)):t==="focusout"&&EM()}function sde(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nI(l2)}function ide(t,e){if(t==="click")return nI(e)}function ode(t,e){if(t==="input"||t==="change")return nI(e)}function lde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dd=typeof Object.is=="function"?Object.is:lde;function c2(t,e){if(dd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!kT.call(e,a)||!dd(t[a],e[a]))return!1}return!0}function SM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function IM(t,e){var r=SM(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=SM(r)}}function pq(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pq(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gq(){for(var t=window,e=kC();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kC(t.document)}return e}function SF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cde(t){var e=gq(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&pq(r.ownerDocument.documentElement,r)){if(n!==null&&SF(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=IM(r,s);var i=IM(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ude=cf&&"documentMode"in document&&11>=document.documentMode,Jg=null,JT=null,Ny=null,ZT=!1;function BM(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ZT||Jg==null||Jg!==kC(n)||(n=Jg,"selectionStart"in n&&SF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ny&&c2(Ny,n)||(Ny=n,n=UC(JT,"onSelect"),0<n.length&&(e=new _F("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Jg)))}function Zw(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Zg={animationend:Zw("Animation","AnimationEnd"),animationiteration:Zw("Animation","AnimationIteration"),animationstart:Zw("Animation","AnimationStart"),transitionend:Zw("Transition","TransitionEnd")},r3={},xq={};cf&&(xq=document.createElement("div").style,"AnimationEvent"in window||(delete Zg.animationend.animation,delete Zg.animationiteration.animation,delete Zg.animationstart.animation),"TransitionEvent"in window||delete Zg.transitionend.transition);function aI(t){if(r3[t])return r3[t];if(!Zg[t])return t;var e=Zg[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in xq)return r3[t]=e[r];return t}var vq=aI("animationend"),yq=aI("animationiteration"),bq=aI("animationstart"),wq=aI("transitionend"),Nq=new Map,TM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function T0(t,e){Nq.set(t,e),kp(e,[t])}for(var n3=0;n3<TM.length;n3++){var a3=TM[n3],dde=a3.toLowerCase(),Ade=a3[0].toUpperCase()+a3.slice(1);T0(dde,"on"+Ade)}T0(vq,"onAnimationEnd");T0(yq,"onAnimationIteration");T0(bq,"onAnimationStart");T0("dblclick","onDoubleClick");T0("focusin","onFocus");T0("focusout","onBlur");T0(wq,"onTransitionEnd");kx("onMouseEnter",["mouseout","mouseover"]);kx("onMouseLeave",["mouseout","mouseover"]);kx("onPointerEnter",["pointerout","pointerover"]);kx("onPointerLeave",["pointerout","pointerover"]);kp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kp("onBeforeInput",["compositionend","keypress","textInput","paste"]);kp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var X1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fde=new Set("cancel close invalid load scroll toggle".split(" ").concat(X1));function PM(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,due(n,e,void 0,t),t.currentTarget=null}function _q(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&a.isPropagationStopped())break e;PM(a,o,u),s=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&a.isPropagationStopped())break e;PM(a,o,u),s=c}}}if(OC)throw t=qT,OC=!1,qT=null,t}function ka(t,e){var r=e[aP];r===void 0&&(r=e[aP]=new Set);var n=t+"__bubble";r.has(n)||(Cq(e,t,2,!1),r.add(n))}function s3(t,e,r){var n=0;e&&(n|=4),Cq(r,t,n,e)}var eN="_reactListening"+Math.random().toString(36).slice(2);function u2(t){if(!t[eN]){t[eN]=!0,jz.forEach(function(r){r!=="selectionchange"&&(fde.has(r)||s3(r,!1,t),s3(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eN]||(e[eN]=!0,s3("selectionchange",!1,e))}}function Cq(t,e,r,n){switch(lq(e)){case 1:var a=Sue;break;case 4:a=Iue;break;default:a=wF}r=a.bind(null,e,r,t),a=void 0,!zT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function i3(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Em(o),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}o=o.parentNode}}n=n.return}qz(function(){var u=s,d=xF(r),A=[];e:{var h=Nq.get(t);if(h!==void 0){var f=_F,m=t;switch(t){case"keypress":if(W_(r)===0)break e;case"keydown":case"keyup":f=Hue;break;case"focusin":m="focus",f=Z5;break;case"focusout":m="blur",f=Z5;break;case"beforeblur":case"afterblur":f=Z5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=vM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Pue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Gue;break;case vq:case yq:case bq:f=Fue;break;case wq:f=que;break;case"scroll":f=Bue;break;case"wheel":f=Xue;break;case"copy":case"cut":case"paste":f=Due;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=bM}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=a2(y,x),w!=null&&p.push(d2(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new f(h,m,null,r,d),A.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==KT&&(m=r.relatedTarget||r.fromElement)&&(Em(m)||m[uf]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=u,m=m?Em(m):null,m!==null&&(g=Fp(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=vM,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=bM,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=f==null?h:ex(f),b=m==null?h:ex(m),h=new p(w,y+"leave",f,r,d),h.target=g,h.relatedTarget=b,w=null,Em(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,f&&m)t:{for(p=f,x=m,y=0,b=p;b;b=cg(b))y++;for(b=0,w=x;w;w=cg(w))b++;for(;0<y-b;)p=cg(p),y--;for(;0<b-y;)x=cg(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=cg(p),x=cg(x)}p=null}else p=null;f!==null&&jM(A,h,f,p,!1),m!==null&&g!==null&&jM(A,g,m,p,!0)}}e:{if(h=u?ex(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=nde;else if(_M(h))if(hq)I=ode;else{I=sde;var T=ade}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=ide);if(I&&(I=I(t,u))){fq(A,I,r,d);break e}T&&T(t,h,u),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&UT(h,"number",h.value)}switch(T=u?ex(u):window,t){case"focusin":(_M(T)||T.contentEditable==="true")&&(Jg=T,JT=u,Ny=null);break;case"focusout":Ny=JT=Jg=null;break;case"mousedown":ZT=!0;break;case"contextmenu":case"mouseup":case"dragend":ZT=!1,BM(A,r,d);break;case"selectionchange":if(ude)break;case"keydown":case"keyup":BM(A,r,d)}var C;if(EF)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Yg?dq(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(uq&&r.locale!=="ko"&&(Yg||E!=="onCompositionStart"?E==="onCompositionEnd"&&Yg&&(C=cq()):(Mh=d,NF="value"in Mh?Mh.value:Mh.textContent,Yg=!0)),T=UC(u,E),0<T.length&&(E=new yM(E,t,null,r,d),A.push({event:E,listeners:T}),C?E.data=C:(C=Aq(r),C!==null&&(E.data=C)))),(C=Jue?Zue(t,r):ede(t,r))&&(u=UC(u,"onBeforeInput"),0<u.length&&(d=new yM("onBeforeInput","beforeinput",null,r,d),A.push({event:d,listeners:u}),d.data=C))}_q(A,e)})}function d2(t,e,r){return{instance:t,listener:e,currentTarget:r}}function UC(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=a2(t,r),s!=null&&n.unshift(d2(t,s,a)),s=a2(t,e),s!=null&&n.push(d2(t,s,a))),t=t.return}return n}function cg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jM(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=a2(r,s),c!=null&&i.unshift(d2(r,c,o))):a||(c=a2(r,s),c!=null&&i.push(d2(r,c,o)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var hde=/\r\n?/g,mde=/\u0000|\uFFFD/g;function kM(t){return(typeof t=="string"?t:""+t).replace(hde,`
`).replace(mde,"")}function tN(t,e,r){if(e=kM(e),kM(t)!==e&&r)throw Error(tr(425))}function QC(){}var eP=null,tP=null;function rP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nP=typeof setTimeout=="function"?setTimeout:void 0,pde=typeof clearTimeout=="function"?clearTimeout:void 0,FM=typeof Promise=="function"?Promise:void 0,gde=typeof queueMicrotask=="function"?queueMicrotask:typeof FM<"u"?function(t){return FM.resolve(null).then(t).catch(xde)}:nP;function xde(t){setTimeout(function(){throw t})}function o3(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),o2(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);o2(e)}function Yh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function OM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Av=Math.random().toString(36).slice(2),$d="__reactFiber$"+Av,A2="__reactProps$"+Av,uf="__reactContainer$"+Av,aP="__reactEvents$"+Av,vde="__reactListeners$"+Av,yde="__reactHandles$"+Av;function Em(t){var e=t[$d];if(e)return e;for(var r=t.parentNode;r;){if(e=r[uf]||r[$d]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=OM(t);t!==null;){if(r=t[$d])return r;t=OM(t)}return e}t=r,r=t.parentNode}return null}function Nb(t){return t=t[$d]||t[uf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ex(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tr(33))}function sI(t){return t[A2]||null}var sP=[],tx=-1;function P0(t){return{current:t}}function La(t){0>tx||(t.current=sP[tx],sP[tx]=null,tx--)}function Ea(t,e){tx++,sP[tx]=t.current,t.current=e}var f0={},Zo=P0(f0),Kl=P0(!1),tp=f0;function Fx(t,e){var r=t.type.contextTypes;if(!r)return f0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Gl(t){return t=t.childContextTypes,t!=null}function VC(){La(Kl),La(Zo)}function DM(t,e,r){if(Zo.current!==f0)throw Error(tr(168));Ea(Zo,e),Ea(Kl,r)}function Eq(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(tr(108,aue(t)||"Unknown",a));return hs({},r,n)}function HC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||f0,tp=Zo.current,Ea(Zo,t),Ea(Kl,Kl.current),!0}function RM(t,e,r){var n=t.stateNode;if(!n)throw Error(tr(169));r?(t=Eq(t,e,tp),n.__reactInternalMemoizedMergedChildContext=t,La(Kl),La(Zo),Ea(Zo,t)):La(Kl),Ea(Kl,r)}var RA=null,iI=!1,l3=!1;function Sq(t){RA===null?RA=[t]:RA.push(t)}function bde(t){iI=!0,Sq(t)}function j0(){if(!l3&&RA!==null){l3=!0;var t=0,e=na;try{var r=RA;for(na=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}RA=null,iI=!1}catch(a){throw RA!==null&&(RA=RA.slice(t+1)),Jz(vF,j0),a}finally{na=e,l3=!1}}return null}var rx=[],nx=0,$C=null,KC=0,du=[],Au=0,rp=null,VA=1,HA="";function cm(t,e){rx[nx++]=KC,rx[nx++]=$C,$C=t,KC=e}function Iq(t,e,r){du[Au++]=VA,du[Au++]=HA,du[Au++]=rp,rp=t;var n=VA;t=HA;var a=32-ad(n)-1;n&=~(1<<a),r+=1;var s=32-ad(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,VA=1<<32-ad(e)+a|r<<a|n,HA=s+t}else VA=1<<s|r<<a|n,HA=t}function IF(t){t.return!==null&&(cm(t,1),Iq(t,1,0))}function BF(t){for(;t===$C;)$C=rx[--nx],rx[nx]=null,KC=rx[--nx],rx[nx]=null;for(;t===rp;)rp=du[--Au],du[Au]=null,HA=du[--Au],du[Au]=null,VA=du[--Au],du[Au]=null}var Sc=null,Nc=null,qa=!1,Xu=null;function Bq(t,e){var r=hu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function MM(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sc=t,Nc=Yh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sc=t,Nc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=rp!==null?{id:VA,overflow:HA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Sc=t,Nc=null,!0):!1;default:return!1}}function iP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oP(t){if(qa){var e=Nc;if(e){var r=e;if(!MM(t,e)){if(iP(t))throw Error(tr(418));e=Yh(r.nextSibling);var n=Sc;e&&MM(t,e)?Bq(n,r):(t.flags=t.flags&-4097|2,qa=!1,Sc=t)}}else{if(iP(t))throw Error(tr(418));t.flags=t.flags&-4097|2,qa=!1,Sc=t}}}function LM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sc=t}function rN(t){if(t!==Sc)return!1;if(!qa)return LM(t),qa=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rP(t.type,t.memoizedProps)),e&&(e=Nc)){if(iP(t))throw Tq(),Error(tr(418));for(;e;)Bq(t,e),e=Yh(e.nextSibling)}if(LM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Nc=Yh(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Nc=null}}else Nc=Sc?Yh(t.stateNode.nextSibling):null;return!0}function Tq(){for(var t=Nc;t;)t=Yh(t.nextSibling)}function Ox(){Nc=Sc=null,qa=!1}function TF(t){Xu===null?Xu=[t]:Xu.push(t)}var wde=Sf.ReactCurrentBatchConfig;function f1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tr(309));var n=r.stateNode}if(!n)throw Error(tr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=a.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(tr(284));if(!r._owner)throw Error(tr(290,t))}return t}function nN(t,e){throw t=Object.prototype.toString.call(e),Error(tr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UM(t){var e=t._init;return e(t._payload)}function Pq(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=t0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,y,b,w){return y===null||y.tag!==6?(y=m3(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var I=b.type;return I===Xg?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wh&&UM(I)===y.type)?(w=a(y,b.props),w.ref=f1(x,y,b),w.return=x,w):(w=rC(b.type,b.key,b.props,null,x.mode,w),w.ref=f1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=p3(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,I){return y===null||y.tag!==7?(y=Mm(b,x.mode,w,I),y.return=x,y):(y=a(y,b),y.return=x,y)}function A(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=m3(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gw:return b=rC(y.type,y.key,y.props,null,x.mode,b),b.ref=f1(x,null,y),b.return=x,b;case Wg:return y=p3(y,x.mode,b),y.return=x,y;case wh:var w=y._init;return A(x,w(y._payload),b)}if(q1(y)||l1(y))return y=Mm(y,x.mode,b,null),y.return=x,y;nN(x,y)}return null}function h(x,y,b,w){var I=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return I!==null?null:o(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gw:return b.key===I?c(x,y,b,w):null;case Wg:return b.key===I?u(x,y,b,w):null;case wh:return I=b._init,h(x,y,I(b._payload),w)}if(q1(b)||l1(b))return I!==null?null:d(x,y,b,w,null);nN(x,b)}return null}function f(x,y,b,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,o(y,x,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gw:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,I);case Wg:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,I);case wh:var T=w._init;return f(x,y,b,T(w._payload),I)}if(q1(w)||l1(w))return x=x.get(b)||null,d(y,x,w,I,null);nN(y,w)}return null}function m(x,y,b,w){for(var I=null,T=null,C=y,E=y=0,S=null;C!==null&&E<b.length;E++){C.index>E?(S=C,C=null):S=C.sibling;var O=h(x,C,b[E],w);if(O===null){C===null&&(C=S);break}t&&C&&O.alternate===null&&e(x,C),y=s(O,y,E),T===null?I=O:T.sibling=O,T=O,C=S}if(E===b.length)return r(x,C),qa&&cm(x,E),I;if(C===null){for(;E<b.length;E++)C=A(x,b[E],w),C!==null&&(y=s(C,y,E),T===null?I=C:T.sibling=C,T=C);return qa&&cm(x,E),I}for(C=n(x,C);E<b.length;E++)S=f(C,x,E,b[E],w),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?E:S.key),y=s(S,y,E),T===null?I=S:T.sibling=S,T=S);return t&&C.forEach(function(B){return e(x,B)}),qa&&cm(x,E),I}function p(x,y,b,w){var I=l1(b);if(typeof I!="function")throw Error(tr(150));if(b=I.call(b),b==null)throw Error(tr(151));for(var T=I=null,C=y,E=y=0,S=null,O=b.next();C!==null&&!O.done;E++,O=b.next()){C.index>E?(S=C,C=null):S=C.sibling;var B=h(x,C,O.value,w);if(B===null){C===null&&(C=S);break}t&&C&&B.alternate===null&&e(x,C),y=s(B,y,E),T===null?I=B:T.sibling=B,T=B,C=S}if(O.done)return r(x,C),qa&&cm(x,E),I;if(C===null){for(;!O.done;E++,O=b.next())O=A(x,O.value,w),O!==null&&(y=s(O,y,E),T===null?I=O:T.sibling=O,T=O);return qa&&cm(x,E),I}for(C=n(x,C);!O.done;E++,O=b.next())O=f(C,x,E,O.value,w),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?E:O.key),y=s(O,y,E),T===null?I=O:T.sibling=O,T=O);return t&&C.forEach(function(P){return e(x,P)}),qa&&cm(x,E),I}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Xg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gw:e:{for(var I=b.key,T=y;T!==null;){if(T.key===I){if(I=b.type,I===Xg){if(T.tag===7){r(x,T.sibling),y=a(T,b.props.children),y.return=x,x=y;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wh&&UM(I)===T.type){r(x,T.sibling),y=a(T,b.props),y.ref=f1(x,T,b),y.return=x,x=y;break e}r(x,T);break}else e(x,T);T=T.sibling}b.type===Xg?(y=Mm(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=rC(b.type,b.key,b.props,null,x.mode,w),w.ref=f1(x,y,b),w.return=x,x=w)}return i(x);case Wg:e:{for(T=b.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=p3(b,x.mode,w),y.return=x,x=y}return i(x);case wh:return T=b._init,g(x,y,T(b._payload),w)}if(q1(b))return m(x,y,b,w);if(l1(b))return p(x,y,b,w);nN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=m3(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var Dx=Pq(!0),jq=Pq(!1),GC=P0(null),zC=null,ax=null,PF=null;function jF(){PF=ax=zC=null}function kF(t){var e=GC.current;La(GC),t._currentValue=e}function lP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function yx(t,e){zC=t,PF=ax=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vl=!0),t.firstContext=null)}function _u(t){var e=t._currentValue;if(PF!==t)if(t={context:t,memoizedValue:e,next:null},ax===null){if(zC===null)throw Error(tr(308));ax=t,zC.dependencies={lanes:0,firstContext:t}}else ax=ax.next=t;return e}var Sm=null;function FF(t){Sm===null?Sm=[t]:Sm.push(t)}function kq(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,FF(e)):(r.next=a.next,a.next=r),e.interleaved=r,df(t,n)}function df(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Nh=!1;function OF(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function YA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jh(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Sn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,df(t,r)}return a=n.interleaved,a===null?(e.next=e,FF(n)):(e.next=a.next,a.next=e),n.interleaved=e,df(t,r)}function X_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,yF(t,r)}}function QM(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function qC(t,e,r,n){var a=t.updateQueue;Nh=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var A=a.baseState;i=0,d=u=c=null,o=s;do{var h=o.lane,f=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,p=o;switch(h=e,f=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){A=m.call(f,A,h);break e}A=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,A,h):m,h==null)break e;A=hs({},A,h);break e;case 2:Nh=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=f,c=A):d=d.next=f,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=A),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);ap|=i,t.lanes=i,t.memoizedState=A}}function VM(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(tr(191,a));a.call(n)}}}var _b={},Zd=P0(_b),f2=P0(_b),h2=P0(_b);function Im(t){if(t===_b)throw Error(tr(174));return t}function DF(t,e){switch(Ea(h2,e),Ea(f2,t),Ea(Zd,_b),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VT(e,t)}La(Zd),Ea(Zd,e)}function Rx(){La(Zd),La(f2),La(h2)}function Oq(t){Im(h2.current);var e=Im(Zd.current),r=VT(e,t.type);e!==r&&(Ea(f2,t),Ea(Zd,r))}function RF(t){f2.current===t&&(La(Zd),La(f2))}var us=P0(0);function WC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var c3=[];function MF(){for(var t=0;t<c3.length;t++)c3[t]._workInProgressVersionPrimary=null;c3.length=0}var Y_=Sf.ReactCurrentDispatcher,u3=Sf.ReactCurrentBatchConfig,np=0,fs=null,fi=null,Hi=null,XC=!1,_y=!1,m2=0,Nde=0;function Po(){throw Error(tr(321))}function LF(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!dd(t[r],e[r]))return!1;return!0}function UF(t,e,r,n,a,s){if(np=s,fs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Y_.current=t===null||t.memoizedState===null?Sde:Ide,t=r(n,a),_y){s=0;do{if(_y=!1,m2=0,25<=s)throw Error(tr(301));s+=1,Hi=fi=null,e.updateQueue=null,Y_.current=Bde,t=r(n,a)}while(_y)}if(Y_.current=YC,e=fi!==null&&fi.next!==null,np=0,Hi=fi=fs=null,XC=!1,e)throw Error(tr(300));return t}function QF(){var t=m2!==0;return m2=0,t}function Hd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hi===null?fs.memoizedState=Hi=t:Hi=Hi.next=t,Hi}function Cu(){if(fi===null){var t=fs.alternate;t=t!==null?t.memoizedState:null}else t=fi.next;var e=Hi===null?fs.memoizedState:Hi.next;if(e!==null)Hi=e,fi=t;else{if(t===null)throw Error(tr(310));fi=t,t={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Hi===null?fs.memoizedState=Hi=t:Hi=Hi.next=t}return Hi}function p2(t,e){return typeof e=="function"?e(t):e}function d3(t){var e=Cu(),r=e.queue;if(r===null)throw Error(tr(311));r.lastRenderedReducer=t;var n=fi,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var o=i=null,c=null,u=s;do{var d=u.lane;if((np&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=A,i=n):c=c.next=A,fs.lanes|=d,ap|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=o,dd(n,e.memoizedState)||(Vl=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,fs.lanes|=s,ap|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function A3(t){var e=Cu(),r=e.queue;if(r===null)throw Error(tr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);dd(s,e.memoizedState)||(Vl=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Dq(){}function Rq(t,e){var r=fs,n=Cu(),a=e(),s=!dd(n.memoizedState,a);if(s&&(n.memoizedState=a,Vl=!0),n=n.queue,VF(Uq.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Hi!==null&&Hi.memoizedState.tag&1){if(r.flags|=2048,g2(9,Lq.bind(null,r,n,a,e),void 0,null),zi===null)throw Error(tr(349));np&30||Mq(r,e,a)}return a}function Mq(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=fs.updateQueue,e===null?(e={lastEffect:null,stores:null},fs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Lq(t,e,r,n){e.value=r,e.getSnapshot=n,Qq(e)&&Vq(t)}function Uq(t,e,r){return r(function(){Qq(e)&&Vq(t)})}function Qq(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!dd(t,r)}catch{return!0}}function Vq(t){var e=df(t,1);e!==null&&sd(e,t,1,-1)}function HM(t){var e=Hd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p2,lastRenderedState:t},e.queue=t,t=t.dispatch=Ede.bind(null,fs,t),[e.memoizedState,t]}function g2(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=fs.updateQueue,e===null?(e={lastEffect:null,stores:null},fs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Hq(){return Cu().memoizedState}function J_(t,e,r,n){var a=Hd();fs.flags|=t,a.memoizedState=g2(1|e,r,void 0,n===void 0?null:n)}function oI(t,e,r,n){var a=Cu();n=n===void 0?null:n;var s=void 0;if(fi!==null){var i=fi.memoizedState;if(s=i.destroy,n!==null&&LF(n,i.deps)){a.memoizedState=g2(e,r,s,n);return}}fs.flags|=t,a.memoizedState=g2(1|e,r,s,n)}function $M(t,e){return J_(8390656,8,t,e)}function VF(t,e){return oI(2048,8,t,e)}function $q(t,e){return oI(4,2,t,e)}function Kq(t,e){return oI(4,4,t,e)}function Gq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zq(t,e,r){return r=r!=null?r.concat([t]):null,oI(4,4,Gq.bind(null,e,t),r)}function HF(){}function qq(t,e){var r=Cu();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LF(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Wq(t,e){var r=Cu();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LF(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Xq(t,e,r){return np&21?(dd(r,e)||(r=tq(),fs.lanes|=r,ap|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vl=!0),t.memoizedState=r)}function _de(t,e){var r=na;na=r!==0&&4>r?r:4,t(!0);var n=u3.transition;u3.transition={};try{t(!1),e()}finally{na=r,u3.transition=n}}function Yq(){return Cu().memoizedState}function Cde(t,e,r){var n=e0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jq(t))Zq(e,r);else if(r=kq(t,e,r,n),r!==null){var a=wl();sd(r,t,n,a),eW(r,e,n)}}function Ede(t,e,r){var n=e0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jq(t))Zq(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,dd(o,i)){var c=e.interleaved;c===null?(a.next=a,FF(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=kq(t,e,a,n),r!==null&&(a=wl(),sd(r,t,n,a),eW(r,e,n))}}function Jq(t){var e=t.alternate;return t===fs||e!==null&&e===fs}function Zq(t,e){_y=XC=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function eW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,yF(t,r)}}var YC={readContext:_u,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useInsertionEffect:Po,useLayoutEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useMutableSource:Po,useSyncExternalStore:Po,useId:Po,unstable_isNewReconciler:!1},Sde={readContext:_u,useCallback:function(t,e){return Hd().memoizedState=[t,e===void 0?null:e],t},useContext:_u,useEffect:$M,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,J_(4194308,4,Gq.bind(null,e,t),r)},useLayoutEffect:function(t,e){return J_(4194308,4,t,e)},useInsertionEffect:function(t,e){return J_(4,2,t,e)},useMemo:function(t,e){var r=Hd();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Hd();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Cde.bind(null,fs,t),[n.memoizedState,t]},useRef:function(t){var e=Hd();return t={current:t},e.memoizedState=t},useState:HM,useDebugValue:HF,useDeferredValue:function(t){return Hd().memoizedState=t},useTransition:function(){var t=HM(!1),e=t[0];return t=_de.bind(null,t[1]),Hd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=fs,a=Hd();if(qa){if(r===void 0)throw Error(tr(407));r=r()}else{if(r=e(),zi===null)throw Error(tr(349));np&30||Mq(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,$M(Uq.bind(null,n,s,t),[t]),n.flags|=2048,g2(9,Lq.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Hd(),e=zi.identifierPrefix;if(qa){var r=HA,n=VA;r=(n&~(1<<32-ad(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=m2++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Nde++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ide={readContext:_u,useCallback:qq,useContext:_u,useEffect:VF,useImperativeHandle:zq,useInsertionEffect:$q,useLayoutEffect:Kq,useMemo:Wq,useReducer:d3,useRef:Hq,useState:function(){return d3(p2)},useDebugValue:HF,useDeferredValue:function(t){var e=Cu();return Xq(e,fi.memoizedState,t)},useTransition:function(){var t=d3(p2)[0],e=Cu().memoizedState;return[t,e]},useMutableSource:Dq,useSyncExternalStore:Rq,useId:Yq,unstable_isNewReconciler:!1},Bde={readContext:_u,useCallback:qq,useContext:_u,useEffect:VF,useImperativeHandle:zq,useInsertionEffect:$q,useLayoutEffect:Kq,useMemo:Wq,useReducer:A3,useRef:Hq,useState:function(){return A3(p2)},useDebugValue:HF,useDeferredValue:function(t){var e=Cu();return fi===null?e.memoizedState=t:Xq(e,fi.memoizedState,t)},useTransition:function(){var t=A3(p2)[0],e=Cu().memoizedState;return[t,e]},useMutableSource:Dq,useSyncExternalStore:Rq,useId:Yq,unstable_isNewReconciler:!1};function zu(t,e){if(t&&t.defaultProps){e=hs({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:hs({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var lI={isMounted:function(t){return(t=t._reactInternals)?Fp(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=wl(),a=e0(t),s=YA(n,a);s.payload=e,r!=null&&(s.callback=r),e=Jh(t,s,a),e!==null&&(sd(e,t,a,n),X_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=wl(),a=e0(t),s=YA(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Jh(t,s,a),e!==null&&(sd(e,t,a,n),X_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wl(),n=e0(t),a=YA(r,n);a.tag=2,e!=null&&(a.callback=e),e=Jh(t,a,n),e!==null&&(sd(e,t,n,r),X_(e,t,n))}};function KM(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!c2(r,n)||!c2(a,s):!0}function tW(t,e,r){var n=!1,a=f0,s=e.contextType;return typeof s=="object"&&s!==null?s=_u(s):(a=Gl(e)?tp:Zo.current,n=e.contextTypes,s=(n=n!=null)?Fx(t,a):f0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function GM(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&lI.enqueueReplaceState(e,e.state,null)}function uP(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},OF(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=_u(s):(s=Gl(e)?tp:Zo.current,a.context=Fx(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cP(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&lI.enqueueReplaceState(a,a.state,null),qC(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Mx(t,e){try{var r="",n=e;do r+=nue(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function f3(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function dP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Tde=typeof WeakMap=="function"?WeakMap:Map;function rW(t,e,r){r=YA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ZC||(ZC=!0,bP=n),dP(t,e)},r}function nW(t,e,r){r=YA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){dP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){dP(t,e),typeof n!="function"&&(Zh===null?Zh=new Set([this]):Zh.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function zM(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Tde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=$de.bind(null,t,e,r),e.then(t,t))}function qM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WM(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=YA(-1,1),e.tag=2,Jh(r,e,1))),r.lanes|=1),t)}var Pde=Sf.ReactCurrentOwner,Vl=!1;function pl(t,e,r,n){e.child=t===null?jq(e,null,r,n):Dx(e,t.child,r,n)}function XM(t,e,r,n,a){r=r.render;var s=e.ref;return yx(e,a),n=UF(t,e,r,n,s,a),r=QF(),t!==null&&!Vl?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Af(t,e,a)):(qa&&r&&IF(e),e.flags|=1,pl(t,e,n,a),e.child)}function YM(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!YF(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,aW(t,e,s,n,a)):(t=rC(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:c2,r(i,n)&&t.ref===e.ref)return Af(t,e,a)}return e.flags|=1,t=t0(s,n),t.ref=e.ref,t.return=e,e.child=t}function aW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(c2(s,n)&&t.ref===e.ref)if(Vl=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Vl=!0);else return e.lanes=t.lanes,Af(t,e,a)}return AP(t,e,r,n,a)}function sW(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(ix,pc),pc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ea(ix,pc),pc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ea(ix,pc),pc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ea(ix,pc),pc|=n;return pl(t,e,a,r),e.child}function iW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function AP(t,e,r,n,a){var s=Gl(r)?tp:Zo.current;return s=Fx(e,s),yx(e,a),r=UF(t,e,r,n,s,a),n=QF(),t!==null&&!Vl?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Af(t,e,a)):(qa&&n&&IF(e),e.flags|=1,pl(t,e,r,a),e.child)}function JM(t,e,r,n,a){if(Gl(r)){var s=!0;HC(e)}else s=!1;if(yx(e,a),e.stateNode===null)Z_(t,e),tW(e,r,n),uP(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=_u(u):(u=Gl(r)?tp:Zo.current,u=Fx(e,u));var d=r.getDerivedStateFromProps,A=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";A||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==u)&&GM(e,i,n,u),Nh=!1;var h=e.memoizedState;i.state=h,qC(e,n,i,a),c=e.memoizedState,o!==n||h!==c||Kl.current||Nh?(typeof d=="function"&&(cP(e,r,d,n),c=e.memoizedState),(o=Nh||KM(e,r,o,n,h,c,u))?(A||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Fq(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:zu(e.type,o),i.props=u,A=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=_u(c):(c=Gl(r)?tp:Zo.current,c=Fx(e,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==A||h!==c)&&GM(e,i,n,c),Nh=!1,h=e.memoizedState,i.state=h,qC(e,n,i,a);var m=e.memoizedState;o!==A||h!==m||Kl.current||Nh?(typeof f=="function"&&(cP(e,r,f,n),m=e.memoizedState),(u=Nh||KM(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return fP(t,e,r,n,s,a)}function fP(t,e,r,n,a,s){iW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&RM(e,r,!1),Af(t,e,s);n=e.stateNode,Pde.current=e;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Dx(e,t.child,null,s),e.child=Dx(e,null,o,s)):pl(t,e,o,s),e.memoizedState=n.state,a&&RM(e,r,!0),e.child}function oW(t){var e=t.stateNode;e.pendingContext?DM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&DM(t,e.context,!1),DF(t,e.containerInfo)}function ZM(t,e,r,n,a){return Ox(),TF(a),e.flags|=256,pl(t,e,r,n),e.child}var hP={dehydrated:null,treeContext:null,retryLane:0};function mP(t){return{baseLanes:t,cachePool:null,transitions:null}}function lW(t,e,r){var n=e.pendingProps,a=us.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ea(us,a&1),t===null)return oP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=dI(i,n,0,null),t=Mm(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mP(r),e.memoizedState=hP,t):$F(e,i));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return jde(t,e,i,n,o,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=t0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?s=t0(o,s):(s=Mm(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?mP(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=hP,n}return s=t.child,t=s.sibling,n=t0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function $F(t,e){return e=dI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function aN(t,e,r,n){return n!==null&&TF(n),Dx(e,t.child,null,r),t=$F(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jde(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=f3(Error(tr(422))),aN(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=dI({mode:"visible",children:n.children},a,0,null),s=Mm(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Dx(e,t.child,null,i),e.child.memoizedState=mP(i),e.memoizedState=hP,s);if(!(e.mode&1))return aN(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(tr(419)),n=f3(s,n,void 0),aN(t,e,i,n)}if(o=(i&t.childLanes)!==0,Vl||o){if(n=zi,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,df(t,a),sd(n,t,a,-1))}return XF(),n=f3(Error(tr(421))),aN(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Kde.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Nc=Yh(a.nextSibling),Sc=e,qa=!0,Xu=null,t!==null&&(du[Au++]=VA,du[Au++]=HA,du[Au++]=rp,VA=t.id,HA=t.overflow,rp=e),e=$F(e,n.children),e.flags|=4096,e)}function eL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lP(t.return,e,r)}function h3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function cW(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(pl(t,e,n.children,r),n=us.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eL(t,r,e);else if(t.tag===19)eL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ea(us,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&WC(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),h3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&WC(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}h3(e,!0,r,null,s);break;case"together":h3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Z_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Af(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ap|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(tr(153));if(e.child!==null){for(t=e.child,r=t0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=t0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function kde(t,e,r){switch(e.tag){case 3:oW(e),Ox();break;case 5:Oq(e);break;case 1:Gl(e.type)&&HC(e);break;case 4:DF(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ea(GC,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ea(us,us.current&1),e.flags|=128,null):r&e.child.childLanes?lW(t,e,r):(Ea(us,us.current&1),t=Af(t,e,r),t!==null?t.sibling:null);Ea(us,us.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return cW(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(us,us.current),n)break;return null;case 22:case 23:return e.lanes=0,sW(t,e,r)}return Af(t,e,r)}var uW,pP,dW,AW;uW=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pP=function(){};dW=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Im(Zd.current);var s=null;switch(r){case"input":a=MT(t,a),n=MT(t,n),s=[];break;case"select":a=hs({},a,{value:void 0}),n=hs({},n,{value:void 0}),s=[];break;case"textarea":a=QT(t,a),n=QT(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=QC)}HT(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(r2.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(r2.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ka("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};AW=function(t,e,r,n){r!==n&&(e.flags|=4)};function h1(t,e){if(!qa)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function jo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Fde(t,e,r){var n=e.pendingProps;switch(BF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jo(e),null;case 1:return Gl(e.type)&&VC(),jo(e),null;case 3:return n=e.stateNode,Rx(),La(Kl),La(Zo),MF(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(rN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xu!==null&&(_P(Xu),Xu=null))),pP(t,e),jo(e),null;case 5:RF(e);var a=Im(h2.current);if(r=e.type,t!==null&&e.stateNode!=null)dW(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(tr(166));return jo(e),null}if(t=Im(Zd.current),rN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[$d]=e,n[A2]=s,t=(e.mode&1)!==0,r){case"dialog":ka("cancel",n),ka("close",n);break;case"iframe":case"object":case"embed":ka("load",n);break;case"video":case"audio":for(a=0;a<X1.length;a++)ka(X1[a],n);break;case"source":ka("error",n);break;case"img":case"image":case"link":ka("error",n),ka("load",n);break;case"details":ka("toggle",n);break;case"input":cM(n,s),ka("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ka("invalid",n);break;case"textarea":dM(n,s),ka("invalid",n)}HT(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&tN(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&tN(n.textContent,o,t),a=["children",""+o]):r2.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ka("scroll",n)}switch(r){case"input":zw(n),uM(n,s,!0);break;case"textarea":zw(n),AM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=QC)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uz(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[$d]=e,t[A2]=n,uW(t,e,!1,!1),e.stateNode=t;e:{switch(i=$T(r,n),r){case"dialog":ka("cancel",t),ka("close",t),a=n;break;case"iframe":case"object":case"embed":ka("load",t),a=n;break;case"video":case"audio":for(a=0;a<X1.length;a++)ka(X1[a],t);a=n;break;case"source":ka("error",t),a=n;break;case"img":case"image":case"link":ka("error",t),ka("load",t),a=n;break;case"details":ka("toggle",t),a=n;break;case"input":cM(t,n),a=MT(t,n),ka("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=hs({},n,{value:void 0}),ka("invalid",t);break;case"textarea":dM(t,n),a=QT(t,n),ka("invalid",t);break;default:a=n}HT(r,a),o=a;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?Hz(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qz(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&n2(t,c):typeof c=="number"&&n2(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(r2.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ka("scroll",t):c!=null&&hF(t,s,c,i))}switch(r){case"input":zw(t),uM(t,n,!1);break;case"textarea":zw(t),AM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+A0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?px(t,!!n.multiple,s,!1):n.defaultValue!=null&&px(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=QC)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jo(e),null;case 6:if(t&&e.stateNode!=null)AW(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(tr(166));if(r=Im(h2.current),Im(Zd.current),rN(e)){if(n=e.stateNode,r=e.memoizedProps,n[$d]=e,(s=n.nodeValue!==r)&&(t=Sc,t!==null))switch(t.tag){case 3:tN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$d]=e,e.stateNode=n}return jo(e),null;case 13:if(La(us),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qa&&Nc!==null&&e.mode&1&&!(e.flags&128))Tq(),Ox(),e.flags|=98560,s=!1;else if(s=rN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(tr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tr(317));s[$d]=e}else Ox(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jo(e),s=!1}else Xu!==null&&(_P(Xu),Xu=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||us.current&1?wi===0&&(wi=3):XF())),e.updateQueue!==null&&(e.flags|=4),jo(e),null);case 4:return Rx(),pP(t,e),t===null&&u2(e.stateNode.containerInfo),jo(e),null;case 10:return kF(e.type._context),jo(e),null;case 17:return Gl(e.type)&&VC(),jo(e),null;case 19:if(La(us),s=e.memoizedState,s===null)return jo(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)h1(s,!1);else{if(wi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=WC(t),i!==null){for(e.flags|=128,h1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ea(us,us.current&1|2),e.child}t=t.sibling}s.tail!==null&&Us()>Lx&&(e.flags|=128,n=!0,h1(s,!1),e.lanes=4194304)}else{if(!n)if(t=WC(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),h1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!qa)return jo(e),null}else 2*Us()-s.renderingStartTime>Lx&&r!==1073741824&&(e.flags|=128,n=!0,h1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Us(),e.sibling=null,r=us.current,Ea(us,n?r&1|2:r&1),e):(jo(e),null);case 22:case 23:return WF(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pc&1073741824&&(jo(e),e.subtreeFlags&6&&(e.flags|=8192)):jo(e),null;case 24:return null;case 25:return null}throw Error(tr(156,e.tag))}function Ode(t,e){switch(BF(e),e.tag){case 1:return Gl(e.type)&&VC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rx(),La(Kl),La(Zo),MF(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return RF(e),null;case 13:if(La(us),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(tr(340));Ox()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return La(us),null;case 4:return Rx(),null;case 10:return kF(e.type._context),null;case 22:case 23:return WF(),null;case 24:return null;default:return null}}var sN=!1,zo=!1,Dde=typeof WeakSet=="function"?WeakSet:Set,xr=null;function sx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){_s(t,e,n)}else r.current=null}function gP(t,e,r){try{r()}catch(n){_s(t,e,n)}}var tL=!1;function Rde(t,e){if(eP=MC,t=gq(),SF(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,u=0,d=0,A=t,h=null;t:for(;;){for(var f;A!==r||a!==0&&A.nodeType!==3||(o=i+a),A!==s||n!==0&&A.nodeType!==3||(c=i+n),A.nodeType===3&&(i+=A.nodeValue.length),(f=A.firstChild)!==null;)h=A,A=f;for(;;){if(A===t)break t;if(h===r&&++u===a&&(o=i),h===s&&++d===n&&(c=i),(f=A.nextSibling)!==null)break;A=h,h=A.parentNode}A=f}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(tP={focusedElem:t,selectionRange:r},MC=!1,xr=e;xr!==null;)if(e=xr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xr=t;else for(;xr!==null;){e=xr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:zu(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tr(163))}}catch(w){_s(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,xr=t;break}xr=e.return}return m=tL,tL=!1,m}function Cy(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&gP(e,r,s)}a=a.next}while(a!==n)}}function cI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function fW(t){var e=t.alternate;e!==null&&(t.alternate=null,fW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$d],delete e[A2],delete e[aP],delete e[vde],delete e[yde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hW(t){return t.tag===5||t.tag===3||t.tag===4}function rL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=QC));else if(n!==4&&(t=t.child,t!==null))for(vP(t,e,r),t=t.sibling;t!==null;)vP(t,e,r),t=t.sibling}function yP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yP(t,e,r),t=t.sibling;t!==null;)yP(t,e,r),t=t.sibling}var Ao=null,qu=!1;function ih(t,e,r){for(r=r.child;r!==null;)mW(t,e,r),r=r.sibling}function mW(t,e,r){if(Jd&&typeof Jd.onCommitFiberUnmount=="function")try{Jd.onCommitFiberUnmount(tI,r)}catch{}switch(r.tag){case 5:zo||sx(r,e);case 6:var n=Ao,a=qu;Ao=null,ih(t,e,r),Ao=n,qu=a,Ao!==null&&(qu?(t=Ao,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ao.removeChild(r.stateNode));break;case 18:Ao!==null&&(qu?(t=Ao,r=r.stateNode,t.nodeType===8?o3(t.parentNode,r):t.nodeType===1&&o3(t,r),o2(t)):o3(Ao,r.stateNode));break;case 4:n=Ao,a=qu,Ao=r.stateNode.containerInfo,qu=!0,ih(t,e,r),Ao=n,qu=a;break;case 0:case 11:case 14:case 15:if(!zo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&gP(r,e,i),a=a.next}while(a!==n)}ih(t,e,r);break;case 1:if(!zo&&(sx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){_s(r,e,o)}ih(t,e,r);break;case 21:ih(t,e,r);break;case 22:r.mode&1?(zo=(n=zo)||r.memoizedState!==null,ih(t,e,r),zo=n):ih(t,e,r);break;default:ih(t,e,r)}}function nL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Dde),e.forEach(function(n){var a=Gde.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Uu(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ao=o.stateNode,qu=!1;break e;case 3:Ao=o.stateNode.containerInfo,qu=!0;break e;case 4:Ao=o.stateNode.containerInfo,qu=!0;break e}o=o.return}if(Ao===null)throw Error(tr(160));mW(s,i,a),Ao=null,qu=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){_s(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pW(e,t),e=e.sibling}function pW(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Uu(e,t),kd(t),n&4){try{Cy(3,t,t.return),cI(3,t)}catch(p){_s(t,t.return,p)}try{Cy(5,t,t.return)}catch(p){_s(t,t.return,p)}}break;case 1:Uu(e,t),kd(t),n&512&&r!==null&&sx(r,r.return);break;case 5:if(Uu(e,t),kd(t),n&512&&r!==null&&sx(r,r.return),t.flags&32){var a=t.stateNode;try{n2(a,"")}catch(p){_s(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Mz(a,s),$T(o,i);var u=$T(o,s);for(i=0;i<c.length;i+=2){var d=c[i],A=c[i+1];d==="style"?Hz(a,A):d==="dangerouslySetInnerHTML"?Qz(a,A):d==="children"?n2(a,A):hF(a,d,A,u)}switch(o){case"input":LT(a,s);break;case"textarea":Lz(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?px(a,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?px(a,!!s.multiple,s.defaultValue,!0):px(a,!!s.multiple,s.multiple?[]:"",!1))}a[A2]=s}catch(p){_s(t,t.return,p)}}break;case 6:if(Uu(e,t),kd(t),n&4){if(t.stateNode===null)throw Error(tr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){_s(t,t.return,p)}}break;case 3:if(Uu(e,t),kd(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{o2(e.containerInfo)}catch(p){_s(t,t.return,p)}break;case 4:Uu(e,t),kd(t);break;case 13:Uu(e,t),kd(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(zF=Us())),n&4&&nL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(zo=(u=zo)||d,Uu(e,t),zo=u):Uu(e,t),kd(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(xr=t,d=t.child;d!==null;){for(A=xr=d;xr!==null;){switch(h=xr,f=h.child,h.tag){case 0:case 11:case 14:case 15:Cy(4,h,h.return);break;case 1:sx(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){_s(n,r,p)}}break;case 5:sx(h,h.return);break;case 22:if(h.memoizedState!==null){sL(A);continue}}f!==null?(f.return=h,xr=f):sL(A)}d=d.sibling}e:for(d=null,A=t;;){if(A.tag===5){if(d===null){d=A;try{a=A.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=A.stateNode,c=A.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Vz("display",i))}catch(p){_s(t,t.return,p)}}}else if(A.tag===6){if(d===null)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(p){_s(t,t.return,p)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Uu(e,t),kd(t),n&4&&nL(t);break;case 21:break;default:Uu(e,t),kd(t)}}function kd(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(hW(r)){var n=r;break e}r=r.return}throw Error(tr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(n2(a,""),n.flags&=-33);var s=rL(t);yP(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=rL(t);vP(t,o,i);break;default:throw Error(tr(161))}}catch(c){_s(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Mde(t,e,r){xr=t,gW(t)}function gW(t,e,r){for(var n=(t.mode&1)!==0;xr!==null;){var a=xr,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||sN;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||zo;o=sN;var u=zo;if(sN=i,(zo=c)&&!u)for(xr=a;xr!==null;)i=xr,c=i.child,i.tag===22&&i.memoizedState!==null?iL(a):c!==null?(c.return=i,xr=c):iL(a);for(;s!==null;)xr=s,gW(s),s=s.sibling;xr=a,sN=o,zo=u}aL(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,xr=s):aL(t)}}function aL(t){for(;xr!==null;){var e=xr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zo||cI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zo)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:zu(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&VM(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}VM(e,i,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var A=d.dehydrated;A!==null&&o2(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tr(163))}zo||e.flags&512&&xP(e)}catch(h){_s(e,e.return,h)}}if(e===t){xr=null;break}if(r=e.sibling,r!==null){r.return=e.return,xr=r;break}xr=e.return}}function sL(t){for(;xr!==null;){var e=xr;if(e===t){xr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xr=r;break}xr=e.return}}function iL(t){for(;xr!==null;){var e=xr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{cI(4,e)}catch(c){_s(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){_s(e,a,c)}}var s=e.return;try{xP(e)}catch(c){_s(e,s,c)}break;case 5:var i=e.return;try{xP(e)}catch(c){_s(e,i,c)}}}catch(c){_s(e,e.return,c)}if(e===t){xr=null;break}var o=e.sibling;if(o!==null){o.return=e.return,xr=o;break}xr=e.return}}var Lde=Math.ceil,JC=Sf.ReactCurrentDispatcher,KF=Sf.ReactCurrentOwner,yu=Sf.ReactCurrentBatchConfig,Sn=0,zi=null,Zs=null,Co=0,pc=0,ix=P0(0),wi=0,x2=null,ap=0,uI=0,GF=0,Ey=null,Ul=null,zF=0,Lx=1/0,DA=null,ZC=!1,bP=null,Zh=null,iN=!1,Lh=null,eE=0,Sy=0,wP=null,eC=-1,tC=0;function wl(){return Sn&6?Us():eC!==-1?eC:eC=Us()}function e0(t){return t.mode&1?Sn&2&&Co!==0?Co&-Co:wde.transition!==null?(tC===0&&(tC=tq()),tC):(t=na,t!==0||(t=window.event,t=t===void 0?16:lq(t.type)),t):1}function sd(t,e,r,n){if(50<Sy)throw Sy=0,wP=null,Error(tr(185));bb(t,r,n),(!(Sn&2)||t!==zi)&&(t===zi&&(!(Sn&2)&&(uI|=r),wi===4&&Bh(t,Co)),zl(t,n),r===1&&Sn===0&&!(e.mode&1)&&(Lx=Us()+500,iI&&j0()))}function zl(t,e){var r=t.callbackNode;wue(t,e);var n=RC(t,t===zi?Co:0);if(n===0)r!==null&&mM(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&mM(r),e===1)t.tag===0?bde(oL.bind(null,t)):Sq(oL.bind(null,t)),gde(function(){!(Sn&6)&&j0()}),r=null;else{switch(rq(n)){case 1:r=vF;break;case 4:r=Zz;break;case 16:r=DC;break;case 536870912:r=eq;break;default:r=DC}r=CW(r,xW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function xW(t,e){if(eC=-1,tC=0,Sn&6)throw Error(tr(327));var r=t.callbackNode;if(bx()&&t.callbackNode!==r)return null;var n=RC(t,t===zi?Co:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=tE(t,n);else{e=n;var a=Sn;Sn|=2;var s=yW();(zi!==t||Co!==e)&&(DA=null,Lx=Us()+500,Rm(t,e));do try{Vde();break}catch(o){vW(t,o)}while(!0);jF(),JC.current=s,Sn=a,Zs!==null?e=0:(zi=null,Co=0,e=wi)}if(e!==0){if(e===2&&(a=WT(t),a!==0&&(n=a,e=NP(t,a))),e===1)throw r=x2,Rm(t,0),Bh(t,n),zl(t,Us()),r;if(e===6)Bh(t,n);else{if(a=t.current.alternate,!(n&30)&&!Ude(a)&&(e=tE(t,n),e===2&&(s=WT(t),s!==0&&(n=s,e=NP(t,s))),e===1))throw r=x2,Rm(t,0),Bh(t,n),zl(t,Us()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(tr(345));case 2:um(t,Ul,DA);break;case 3:if(Bh(t,n),(n&130023424)===n&&(e=zF+500-Us(),10<e)){if(RC(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){wl(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=nP(um.bind(null,t,Ul,DA),e);break}um(t,Ul,DA);break;case 4:if(Bh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-ad(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=Us()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lde(n/1960))-n,10<n){t.timeoutHandle=nP(um.bind(null,t,Ul,DA),n);break}um(t,Ul,DA);break;case 5:um(t,Ul,DA);break;default:throw Error(tr(329))}}}return zl(t,Us()),t.callbackNode===r?xW.bind(null,t):null}function NP(t,e){var r=Ey;return t.current.memoizedState.isDehydrated&&(Rm(t,e).flags|=256),t=tE(t,e),t!==2&&(e=Ul,Ul=r,e!==null&&_P(e)),t}function _P(t){Ul===null?Ul=t:Ul.push.apply(Ul,t)}function Ude(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!dd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bh(t,e){for(e&=~GF,e&=~uI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ad(e),n=1<<r;t[r]=-1,e&=~n}}function oL(t){if(Sn&6)throw Error(tr(327));bx();var e=RC(t,0);if(!(e&1))return zl(t,Us()),null;var r=tE(t,e);if(t.tag!==0&&r===2){var n=WT(t);n!==0&&(e=n,r=NP(t,n))}if(r===1)throw r=x2,Rm(t,0),Bh(t,e),zl(t,Us()),r;if(r===6)throw Error(tr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,um(t,Ul,DA),zl(t,Us()),null}function qF(t,e){var r=Sn;Sn|=1;try{return t(e)}finally{Sn=r,Sn===0&&(Lx=Us()+500,iI&&j0())}}function sp(t){Lh!==null&&Lh.tag===0&&!(Sn&6)&&bx();var e=Sn;Sn|=1;var r=yu.transition,n=na;try{if(yu.transition=null,na=1,t)return t()}finally{na=n,yu.transition=r,Sn=e,!(Sn&6)&&j0()}}function WF(){pc=ix.current,La(ix)}function Rm(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,pde(r)),Zs!==null)for(r=Zs.return;r!==null;){var n=r;switch(BF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&VC();break;case 3:Rx(),La(Kl),La(Zo),MF();break;case 5:RF(n);break;case 4:Rx();break;case 13:La(us);break;case 19:La(us);break;case 10:kF(n.type._context);break;case 22:case 23:WF()}r=r.return}if(zi=t,Zs=t=t0(t.current,null),Co=pc=e,wi=0,x2=null,GF=uI=ap=0,Ul=Ey=null,Sm!==null){for(e=0;e<Sm.length;e++)if(r=Sm[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}Sm=null}return t}function vW(t,e){do{var r=Zs;try{if(jF(),Y_.current=YC,XC){for(var n=fs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}XC=!1}if(np=0,Hi=fi=fs=null,_y=!1,m2=0,KF.current=null,r===null||r.return===null){wi=1,x2=e,Zs=null;break}e:{var s=t,i=r.return,o=r,c=e;if(e=Co,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,A=d.tag;if(!(d.mode&1)&&(A===0||A===11||A===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=qM(i);if(f!==null){f.flags&=-257,WM(f,i,o,s,e),f.mode&1&&zM(s,u,e),e=f,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){zM(s,u,e),XF();break e}c=Error(tr(426))}}else if(qa&&o.mode&1){var g=qM(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),WM(g,i,o,s,e),TF(Mx(c,o));break e}}s=c=Mx(c,o),wi!==4&&(wi=2),Ey===null?Ey=[s]:Ey.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=rW(s,c,e);QM(s,x);break e;case 1:o=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zh===null||!Zh.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=nW(s,o,e);QM(s,w);break e}}s=s.return}while(s!==null)}wW(r)}catch(I){e=I,Zs===r&&r!==null&&(Zs=r=r.return);continue}break}while(!0)}function yW(){var t=JC.current;return JC.current=YC,t===null?YC:t}function XF(){(wi===0||wi===3||wi===2)&&(wi=4),zi===null||!(ap&268435455)&&!(uI&268435455)||Bh(zi,Co)}function tE(t,e){var r=Sn;Sn|=2;var n=yW();(zi!==t||Co!==e)&&(DA=null,Rm(t,e));do try{Qde();break}catch(a){vW(t,a)}while(!0);if(jF(),Sn=r,JC.current=n,Zs!==null)throw Error(tr(261));return zi=null,Co=0,wi}function Qde(){for(;Zs!==null;)bW(Zs)}function Vde(){for(;Zs!==null&&!fue();)bW(Zs)}function bW(t){var e=_W(t.alternate,t,pc);t.memoizedProps=t.pendingProps,e===null?wW(t):Zs=e,KF.current=null}function wW(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ode(r,e),r!==null){r.flags&=32767,Zs=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wi=6,Zs=null;return}}else if(r=Fde(r,e,pc),r!==null){Zs=r;return}if(e=e.sibling,e!==null){Zs=e;return}Zs=e=t}while(e!==null);wi===0&&(wi=5)}function um(t,e,r){var n=na,a=yu.transition;try{yu.transition=null,na=1,Hde(t,e,r,n)}finally{yu.transition=a,na=n}return null}function Hde(t,e,r,n){do bx();while(Lh!==null);if(Sn&6)throw Error(tr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(tr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Nue(t,s),t===zi&&(Zs=zi=null,Co=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||iN||(iN=!0,CW(DC,function(){return bx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=yu.transition,yu.transition=null;var i=na;na=1;var o=Sn;Sn|=4,KF.current=null,Rde(t,r),pW(r,t),cde(tP),MC=!!eP,tP=eP=null,t.current=r,Mde(r),hue(),Sn=o,na=i,yu.transition=s}else t.current=r;if(iN&&(iN=!1,Lh=t,eE=a),s=t.pendingLanes,s===0&&(Zh=null),gue(r.stateNode),zl(t,Us()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ZC)throw ZC=!1,t=bP,bP=null,t;return eE&1&&t.tag!==0&&bx(),s=t.pendingLanes,s&1?t===wP?Sy++:(Sy=0,wP=t):Sy=0,j0(),null}function bx(){if(Lh!==null){var t=rq(eE),e=yu.transition,r=na;try{if(yu.transition=null,na=16>t?16:t,Lh===null)var n=!1;else{if(t=Lh,Lh=null,eE=0,Sn&6)throw Error(tr(331));var a=Sn;for(Sn|=4,xr=t.current;xr!==null;){var s=xr,i=s.child;if(xr.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(xr=u;xr!==null;){var d=xr;switch(d.tag){case 0:case 11:case 15:Cy(8,d,s)}var A=d.child;if(A!==null)A.return=d,xr=A;else for(;xr!==null;){d=xr;var h=d.sibling,f=d.return;if(fW(d),d===u){xr=null;break}if(h!==null){h.return=f,xr=h;break}xr=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}xr=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,xr=i;else e:for(;xr!==null;){if(s=xr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cy(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,xr=x;break e}xr=s.return}}var y=t.current;for(xr=y;xr!==null;){i=xr;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,xr=b;else e:for(i=y;xr!==null;){if(o=xr,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:cI(9,o)}}catch(I){_s(o,o.return,I)}if(o===i){xr=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,xr=w;break e}xr=o.return}}if(Sn=a,j0(),Jd&&typeof Jd.onPostCommitFiberRoot=="function")try{Jd.onPostCommitFiberRoot(tI,t)}catch{}n=!0}return n}finally{na=r,yu.transition=e}}return!1}function lL(t,e,r){e=Mx(r,e),e=rW(t,e,1),t=Jh(t,e,1),e=wl(),t!==null&&(bb(t,1,e),zl(t,e))}function _s(t,e,r){if(t.tag===3)lL(t,t,r);else for(;e!==null;){if(e.tag===3){lL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zh===null||!Zh.has(n))){t=Mx(r,t),t=nW(e,t,1),e=Jh(e,t,1),t=wl(),e!==null&&(bb(e,1,t),zl(e,t));break}}e=e.return}}function $de(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=wl(),t.pingedLanes|=t.suspendedLanes&r,zi===t&&(Co&r)===r&&(wi===4||wi===3&&(Co&130023424)===Co&&500>Us()-zF?Rm(t,0):GF|=r),zl(t,e)}function NW(t,e){e===0&&(t.mode&1?(e=Xw,Xw<<=1,!(Xw&130023424)&&(Xw=4194304)):e=1);var r=wl();t=df(t,e),t!==null&&(bb(t,e,r),zl(t,r))}function Kde(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),NW(t,r)}function Gde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(tr(314))}n!==null&&n.delete(e),NW(t,r)}var _W;_W=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kl.current)Vl=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Vl=!1,kde(t,e,r);Vl=!!(t.flags&131072)}else Vl=!1,qa&&e.flags&1048576&&Iq(e,KC,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Z_(t,e),t=e.pendingProps;var a=Fx(e,Zo.current);yx(e,r),a=UF(null,e,n,t,a,r);var s=QF();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gl(n)?(s=!0,HC(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,OF(e),a.updater=lI,e.stateNode=a,a._reactInternals=e,uP(e,n,t,r),e=fP(null,e,n,!0,s,r)):(e.tag=0,qa&&s&&IF(e),pl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Z_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=qde(n),t=zu(n,t),a){case 0:e=AP(null,e,n,t,r);break e;case 1:e=JM(null,e,n,t,r);break e;case 11:e=XM(null,e,n,t,r);break e;case 14:e=YM(null,e,n,zu(n.type,t),r);break e}throw Error(tr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:zu(n,a),AP(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:zu(n,a),JM(t,e,n,a,r);case 3:e:{if(oW(e),t===null)throw Error(tr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,Fq(t,e),qC(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Mx(Error(tr(423)),e),e=ZM(t,e,n,r,a);break e}else if(n!==a){a=Mx(Error(tr(424)),e),e=ZM(t,e,n,r,a);break e}else for(Nc=Yh(e.stateNode.containerInfo.firstChild),Sc=e,qa=!0,Xu=null,r=jq(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ox(),n===a){e=Af(t,e,r);break e}pl(t,e,n,r)}e=e.child}return e;case 5:return Oq(e),t===null&&oP(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,rP(n,a)?i=null:s!==null&&rP(n,s)&&(e.flags|=32),iW(t,e),pl(t,e,i,r),e.child;case 6:return t===null&&oP(e),null;case 13:return lW(t,e,r);case 4:return DF(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Dx(e,null,n,r):pl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:zu(n,a),XM(t,e,n,a,r);case 7:return pl(t,e,e.pendingProps,r),e.child;case 8:return pl(t,e,e.pendingProps.children,r),e.child;case 12:return pl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,Ea(GC,n._currentValue),n._currentValue=i,s!==null)if(dd(s.value,i)){if(s.children===a.children&&!Kl.current){e=Af(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=YA(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),lP(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(tr(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),lP(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}pl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,yx(e,r),a=_u(a),n=n(a),e.flags|=1,pl(t,e,n,r),e.child;case 14:return n=e.type,a=zu(n,e.pendingProps),a=zu(n.type,a),YM(t,e,n,a,r);case 15:return aW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:zu(n,a),Z_(t,e),e.tag=1,Gl(n)?(t=!0,HC(e)):t=!1,yx(e,r),tW(e,n,a),uP(e,n,a,r),fP(null,e,n,!0,t,r);case 19:return cW(t,e,r);case 22:return sW(t,e,r)}throw Error(tr(156,e.tag))};function CW(t,e){return Jz(t,e)}function zde(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hu(t,e,r,n){return new zde(t,e,r,n)}function YF(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qde(t){if(typeof t=="function")return YF(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pF)return 11;if(t===gF)return 14}return 2}function t0(t,e){var r=t.alternate;return r===null?(r=hu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function rC(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")YF(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Xg:return Mm(r.children,a,s,e);case mF:i=8,a|=8;break;case FT:return t=hu(12,r,e,a|2),t.elementType=FT,t.lanes=s,t;case OT:return t=hu(13,r,e,a),t.elementType=OT,t.lanes=s,t;case DT:return t=hu(19,r,e,a),t.elementType=DT,t.lanes=s,t;case Oz:return dI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kz:i=10;break e;case Fz:i=9;break e;case pF:i=11;break e;case gF:i=14;break e;case wh:i=16,n=null;break e}throw Error(tr(130,t==null?t:typeof t,""))}return e=hu(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Mm(t,e,r,n){return t=hu(7,t,n,e),t.lanes=r,t}function dI(t,e,r,n){return t=hu(22,t,n,e),t.elementType=Oz,t.lanes=r,t.stateNode={isHidden:!1},t}function m3(t,e,r){return t=hu(6,t,null,e),t.lanes=r,t}function p3(t,e,r){return e=hu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wde(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=X5(0),this.expirationTimes=X5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X5(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function JF(t,e,r,n,a,s,i,o,c){return t=new Wde(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},OF(s),t}function Xde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function EW(t){if(!t)return f0;t=t._reactInternals;e:{if(Fp(t)!==t||t.tag!==1)throw Error(tr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tr(171))}if(t.tag===1){var r=t.type;if(Gl(r))return Eq(t,r,e)}return e}function SW(t,e,r,n,a,s,i,o,c){return t=JF(r,n,!0,t,a,s,i,o,c),t.context=EW(null),r=t.current,n=wl(),a=e0(r),s=YA(n,a),s.callback=e??null,Jh(r,s,a),t.current.lanes=a,bb(t,a,n),zl(t,n),t}function AI(t,e,r,n){var a=e.current,s=wl(),i=e0(a);return r=EW(r),e.context===null?e.context=r:e.pendingContext=r,e=YA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Jh(a,e,i),t!==null&&(sd(t,a,i,s),X_(t,a,i)),i}function rE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ZF(t,e){cL(t,e),(t=t.alternate)&&cL(t,e)}function Yde(){return null}var IW=typeof reportError=="function"?reportError:function(t){console.error(t)};function eO(t){this._internalRoot=t}fI.prototype.render=eO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(tr(409));AI(t,e,null,null)};fI.prototype.unmount=eO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sp(function(){AI(null,t,null,null)}),e[uf]=null}};function fI(t){this._internalRoot=t}fI.prototype.unstable_scheduleHydration=function(t){if(t){var e=sq();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ih.length&&e!==0&&e<Ih[r].priority;r++);Ih.splice(r,0,t),r===0&&oq(t)}};function tO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uL(){}function Jde(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=rE(i);s.call(u)}}var i=SW(e,n,t,0,null,!1,!1,"",uL);return t._reactRootContainer=i,t[uf]=i.current,u2(t.nodeType===8?t.parentNode:t),sp(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=rE(c);o.call(u)}}var c=JF(t,0,!1,null,null,!1,!1,"",uL);return t._reactRootContainer=c,t[uf]=c.current,u2(t.nodeType===8?t.parentNode:t),sp(function(){AI(e,c,r,n)}),c}function mI(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var o=a;a=function(){var c=rE(i);o.call(c)}}AI(e,i,t,a)}else i=Jde(r,e,t,a,n);return rE(i)}nq=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=W1(e.pendingLanes);r!==0&&(yF(e,r|1),zl(e,Us()),!(Sn&6)&&(Lx=Us()+500,j0()))}break;case 13:sp(function(){var n=df(t,1);if(n!==null){var a=wl();sd(n,t,1,a)}}),ZF(t,1)}};bF=function(t){if(t.tag===13){var e=df(t,134217728);if(e!==null){var r=wl();sd(e,t,134217728,r)}ZF(t,134217728)}};aq=function(t){if(t.tag===13){var e=e0(t),r=df(t,e);if(r!==null){var n=wl();sd(r,t,e,n)}ZF(t,e)}};sq=function(){return na};iq=function(t,e){var r=na;try{return na=t,e()}finally{na=r}};GT=function(t,e,r){switch(e){case"input":if(LT(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=sI(n);if(!a)throw Error(tr(90));Rz(n),LT(n,a)}}}break;case"textarea":Lz(t,r);break;case"select":e=r.value,e!=null&&px(t,!!r.multiple,e,!1)}};Gz=qF;zz=sp;var Zde={usingClientEntryPoint:!1,Events:[Nb,ex,sI,$z,Kz,qF]},m1={findFiberByHostInstance:Em,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eAe={bundleType:m1.bundleType,version:m1.version,rendererPackageName:m1.rendererPackageName,rendererConfig:m1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xz(t),t===null?null:t.stateNode},findFiberByHostInstance:m1.findFiberByHostInstance||Yde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oN.isDisabled&&oN.supportsFiber)try{tI=oN.inject(eAe),Jd=oN}catch{}}Fc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zde;Fc.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tO(e))throw Error(tr(200));return Xde(t,e,null,r)};Fc.createRoot=function(t,e){if(!tO(t))throw Error(tr(299));var r=!1,n="",a=IW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=JF(t,1,!1,null,null,r,!1,n,a),t[uf]=e.current,u2(t.nodeType===8?t.parentNode:t),new eO(e)};Fc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(tr(188)):(t=Object.keys(t).join(","),Error(tr(268,t)));return t=Xz(e),t=t===null?null:t.stateNode,t};Fc.flushSync=function(t){return sp(t)};Fc.hydrate=function(t,e,r){if(!hI(e))throw Error(tr(200));return mI(null,t,e,!0,r)};Fc.hydrateRoot=function(t,e,r){if(!tO(t))throw Error(tr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=IW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=SW(e,null,t,1,r??null,a,!1,s,i),t[uf]=e.current,u2(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new fI(e)};Fc.render=function(t,e,r){if(!hI(e))throw Error(tr(200));return mI(null,t,e,!1,r)};Fc.unmountComponentAtNode=function(t){if(!hI(t))throw Error(tr(40));return t._reactRootContainer?(sp(function(){mI(null,null,t,!1,function(){t._reactRootContainer=null,t[uf]=null})}),!0):!1};Fc.unstable_batchedUpdates=qF;Fc.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!hI(r))throw Error(tr(200));if(t==null||t._reactInternals===void 0)throw Error(tr(38));return mI(t,e,r,!1,n)};Fc.version="18.3.1-next-f1338f8080-20240426";function BW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BW)}catch(t){console.error(t)}}BW(),Bz.exports=Fc;var id=Bz.exports,dL=id;jT.createRoot=dL.createRoot,jT.hydrateRoot=dL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var AL="popstate";function tAe(t={}){function e(n,a){let{pathname:s,search:i,hash:o}=n.location;return CP("",{pathname:s,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:v2(a)}return nAe(e,r,null,t)}function Za(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ad(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rAe(){return Math.random().toString(36).substring(2,10)}function fL(t,e){return{usr:t.state,key:t.key,idx:e}}function CP(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fv(e):e,state:r,key:e&&e.key||n||rAe()}}function v2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function fv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function nAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,o="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function A(){o="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:o,location:p.location,delta:x})}function h(g,x){o="PUSH";let y=CP(p.location,g,x);u=d()+1;let b=fL(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(w)}s&&c&&c({action:o,location:p.location,delta:1})}function f(g,x){o="REPLACE";let y=CP(p.location,g,x);u=d();let b=fL(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:o,location:p.location,delta:0})}function m(g){return aAe(g)}let p={get action(){return o},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(AL,A),c=g,()=>{a.removeEventListener(AL,A),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:f,go(g){return i.go(g)}};return p}function aAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Za(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:v2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function TW(t,e,r="/"){return sAe(t,e,r,!1)}function sAe(t,e,r,n){let a=typeof e=="string"?fv(e):e,s=ff(a.pathname||"/",r);if(s==null)return null;let i=PW(t);iAe(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=gAe(s);o=mAe(i[c],u,n)}return o}function PW(t,e=[],r=[],n="",a=!1){let s=(i,o,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Za(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let A=JA([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(Za(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),PW(i.children,e,h,A,c)),!(i.path==null&&!i.index)&&e.push({path:A,score:fAe(A,i.index),routesMeta:h})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of jW(i.path))s(i,o,!0,u)}),e}function jW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=jW(n.join("/")),o=[];return o.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function iAe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:hAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var oAe=/^:[\w-]+$/,lAe=3,cAe=2,uAe=1,dAe=10,AAe=-2,hL=t=>t==="*";function fAe(t,e){let r=t.split("/"),n=r.length;return r.some(hL)&&(n+=AAe),e&&(n+=cAe),r.filter(a=>!hL(a)).reduce((a,s)=>a+(oAe.test(s)?lAe:s===""?uAe:dAe),n)}function hAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function mAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",A=nE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!A&&u&&r&&!n[n.length-1].route.index&&(A=nE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!A)return null;Object.assign(a,A.params),i.push({params:a,pathname:JA([s,A.pathname]),pathnameBase:bAe(JA([s,A.pathnameBase])),route:h}),A.pathnameBase!=="/"&&(s=JA([s,A.pathnameBase]))}return i}function nE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=pAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:A},h)=>{if(d==="*"){let m=o[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const f=o[h];return A&&!f?u[d]=void 0:u[d]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function pAe(t,e=!1,r=!0){Ad(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function gAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ad(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ff(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function xAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?fv(t):t;return{pathname:r?r.startsWith("/")?r:vAe(r,e):e,search:wAe(n),hash:NAe(a)}}function vAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function g3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function rO(t){let e=yAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function nO(t,e,r,n=!1){let a;typeof t=="string"?a=fv(t):(a={...t},Za(!a.pathname||!a.pathname.includes("?"),g3("?","pathname","search",a)),Za(!a.pathname||!a.pathname.includes("#"),g3("#","pathname","hash",a)),Za(!a.search||!a.search.includes("#"),g3("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,o;if(i==null)o=r;else{let A=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),A-=1;a.pathname=h.join("/")}o=A>=0?e[A]:"/"}let c=xAe(a,o),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var JA=t=>t.join("/").replace(/\/\/+/g,"/"),bAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _Ae(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kW=["POST","PUT","PATCH","DELETE"];new Set(kW);var CAe=["GET",...kW];new Set(CAe);var hv=v.createContext(null);hv.displayName="DataRouter";var pI=v.createContext(null);pI.displayName="DataRouterState";v.createContext(!1);var FW=v.createContext({isTransitioning:!1});FW.displayName="ViewTransition";var EAe=v.createContext(new Map);EAe.displayName="Fetchers";var SAe=v.createContext(null);SAe.displayName="Await";var gd=v.createContext(null);gd.displayName="Navigation";var Cb=v.createContext(null);Cb.displayName="Location";var xd=v.createContext({outlet:null,matches:[],isDataRoute:!1});xd.displayName="Route";var aO=v.createContext(null);aO.displayName="RouteError";function IAe(t,{relative:e}={}){Za(mv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(gd),{hash:a,pathname:s,search:i}=Sb(t,{relative:e}),o=s;return r!=="/"&&(o=s==="/"?r:JA([r,s])),n.createHref({pathname:o,search:i,hash:a})}function mv(){return v.useContext(Cb)!=null}function k0(){return Za(mv(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Cb).location}var OW="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DW(t){v.useContext(gd).static||v.useLayoutEffect(t)}function Eb(){let{isDataRoute:t}=v.useContext(xd);return t?HAe():BAe()}function BAe(){Za(mv(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(hv),{basename:e,navigator:r}=v.useContext(gd),{matches:n}=v.useContext(xd),{pathname:a}=k0(),s=JSON.stringify(rO(n)),i=v.useRef(!1);return DW(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(Ad(i.current,OW),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=nO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:JA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var TAe=v.createContext(null);function PAe(t){let e=v.useContext(xd).outlet;return e&&v.createElement(TAe.Provider,{value:t},e)}function Sb(t,{relative:e}={}){let{matches:r}=v.useContext(xd),{pathname:n}=k0(),a=JSON.stringify(rO(r));return v.useMemo(()=>nO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function jAe(t,e){return RW(t,e)}function RW(t,e,r,n){var x;Za(mv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(gd),{matches:s}=v.useContext(xd),i=s[s.length-1],o=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";MW(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let A=k0(),h;if(e){let y=typeof e=="string"?fv(e):e;Za(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=A;let f=h.pathname||"/",m=f;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=TW(t,{pathname:m});Ad(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Ad(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=RAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:JA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:JA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(Cb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function kAe(){let t=VAe(),e=_Ae(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var FAe=v.createElement(kAe,null),OAe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(xd.Provider,{value:this.props.routeContext},v.createElement(aO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DAe({routeContext:t,match:e,children:r}){let n=v.useContext(hv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(xd.Provider,{value:t},r)}function RAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Za(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,o=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:d,errors:A}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!A||A[u.route.id]===void 0);if(u.route.lazy||h){i=!0,o>=0?a=a.slice(0,o+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let A,h=!1,f=null,m=null;r&&(A=s&&u.route.id?s[u.route.id]:void 0,f=u.route.errorElement||FAe,i&&(o<0&&d===0?(MW("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):o===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return A?x=f:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(DAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(OAe,{location:r.location,revalidation:r.revalidation,component:f,error:A,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function sO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MAe(t){let e=v.useContext(hv);return Za(e,sO(t)),e}function LAe(t){let e=v.useContext(pI);return Za(e,sO(t)),e}function UAe(t){let e=v.useContext(xd);return Za(e,sO(t)),e}function iO(t){let e=UAe(t),r=e.matches[e.matches.length-1];return Za(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function QAe(){return iO("useRouteId")}function VAe(){var n;let t=v.useContext(aO),e=LAe("useRouteError"),r=iO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function HAe(){let{router:t}=MAe("useNavigate"),e=iO("useNavigate"),r=v.useRef(!1);return DW(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{Ad(r.current,OW),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var mL={};function MW(t,e,r){!e&&!mL[t]&&(mL[t]=!0,Ad(!1,r))}v.memo($Ae);function $Ae({routes:t,future:e,state:r}){return RW(t,void 0,r,e)}function dm({to:t,replace:e,state:r,relative:n}){Za(mv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(gd);Ad(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(xd),{pathname:i}=k0(),o=Eb(),c=nO(t,rO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{o(JSON.parse(u),{replace:e,state:r,relative:n})},[o,u,n,e,r]),null}function LW(t){return PAe(t.context)}function zr(t){Za(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Za(!mv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),o=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=fv(r));let{pathname:c="/",search:u="",hash:d="",state:A=null,key:h="default"}=r,f=v.useMemo(()=>{let m=ff(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:A,key:h},navigationType:n}},[i,c,u,d,A,h,n]);return Ad(f!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:v.createElement(gd.Provider,{value:o},v.createElement(Cb.Provider,{children:e,value:f}))}function GAe({children:t,location:e}){return jAe(EP(t),e)}function EP(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,EP(n.props.children,s));return}Za(n.type===zr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Za(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=EP(n.props.children,s)),r.push(i)}),r}var nC="get",aC="application/x-www-form-urlencoded";function gI(t){return t!=null&&typeof t.tagName=="string"}function zAe(t){return gI(t)&&t.tagName.toLowerCase()==="button"}function qAe(t){return gI(t)&&t.tagName.toLowerCase()==="form"}function WAe(t){return gI(t)&&t.tagName.toLowerCase()==="input"}function XAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YAe(t,e){return t.button===0&&(!e||e==="_self")&&!XAe(t)}var lN=null;function JAe(){if(lN===null)try{new FormData(document.createElement("form"),0),lN=!1}catch{lN=!0}return lN}var ZAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x3(t){return t!=null&&!ZAe.has(t)?(Ad(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${aC}"`),null):t}function efe(t,e){let r,n,a,s,i;if(qAe(t)){let o=t.getAttribute("action");n=o?ff(o,e):null,r=t.getAttribute("method")||nC,a=x3(t.getAttribute("enctype"))||aC,s=new FormData(t)}else if(zAe(t)||WAe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(n=c?ff(c,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||nC,a=x3(t.getAttribute("formenctype"))||x3(o.getAttribute("enctype"))||aC,s=new FormData(o,t),!JAe()){let{name:u,type:d,value:A}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,A)}}else{if(gI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=nC,n=null,a=aC,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tfe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&ff(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function rfe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nfe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function afe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await rfe(s,r);return i.links?i.links():[]}return[]}));return lfe(n.flat(1).filter(nfe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function pL(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||o(c,u)):s==="data"?e.filter((c,u)=>{var A;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=r[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function sfe(t,e,{includeHydrateFallback:r}={}){return ife(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function ife(t){return[...new Set(t)]}function ofe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function lfe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(ofe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function UW(){let t=v.useContext(hv);return oO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function cfe(){let t=v.useContext(pI);return oO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var lO=v.createContext(void 0);lO.displayName="FrameworkContext";function QW(){let t=v.useContext(lO);return oO(t,"You must render this element inside a <HydratedRouter> element"),t}function ufe(t,e){let r=v.useContext(lO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:A}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let f=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:p1(o,f),onBlur:p1(c,m),onMouseEnter:p1(u,f),onMouseLeave:p1(d,m),onTouchStart:p1(A,f)}]:[!1,h,{}]}function p1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function dfe({page:t,...e}){let{router:r}=UW(),n=v.useMemo(()=>TW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(ffe,{page:t,matches:n,...e}):null}function Afe(t){let{manifest:e,routeModules:r}=QW(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return afe(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function ffe({page:t,matches:e,...r}){let n=k0(),{manifest:a,routeModules:s}=QW(),{basename:i}=UW(),{loaderData:o,matches:c}=cfe(),u=v.useMemo(()=>pL(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>pL(t,e,c,a,n,"assets"),[t,e,c,a,n]),A=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in o&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=tfe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,o,n,a,u,e,t,s]),h=v.useMemo(()=>sfe(d,a),[d,a]),f=Afe(d);return v.createElement(v.Fragment,null,A.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),f.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function hfe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var VW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VW&&(window.__reactRouterVersion="7.8.1")}catch{}function mfe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=tAe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),o=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(o),[a,o]),v.createElement(KAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var HW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$W=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:A,...h},f){let{basename:m}=v.useContext(gd),p=typeof u=="string"&&HW.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,VW))try{let S=new URL(window.location.href),O=u.startsWith("//")?new URL(S.protocol+u):new URL(u),B=ff(O.pathname,m);O.origin===S.origin&&B!=null?u=B+O.search+O.hash:x=!0}catch{Ad(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=IAe(u,{relative:a}),[b,w,I]=ufe(n,h),T=xfe(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:A});function C(S){e&&e(S),S.defaultPrevented||T(S)}let E=v.createElement("a",{...h,...I,href:g||y,onClick:x||s?e:C,ref:hfe(f,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,E,v.createElement(dfe,{page:y})):E});$W.displayName="Link";var qr=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:o,children:c,...u},d){let A=Sb(i,{relative:u.relative}),h=k0(),f=v.useContext(pI),{navigator:m,basename:p}=v.useContext(gd),g=f!=null&&Nfe(A)&&o===!0,x=m.encodeLocation?m.encodeLocation(A).pathname:A.pathname,y=h.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=ff(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let I=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",T=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:I,isPending:T,isTransitioning:g},E=I?e:void 0,S;typeof n=="function"?S=n(C):S=[n,I?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(C):s;return v.createElement($W,{...u,"aria-current":E,className:S,ref:d,style:O,to:i,viewTransition:o},typeof c=="function"?c(C):c)});qr.displayName="NavLink";var pfe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=nC,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:A,...h},f)=>{let m=bfe(),p=wfe(o,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&HW.test(o),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,I=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:I,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:A})};return v.createElement("form",{ref:f,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});pfe.displayName="Form";function gfe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KW(t){let e=v.useContext(hv);return Za(e,gfe(t)),e}function xfe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let o=Eb(),c=k0(),u=Sb(t,{relative:s});return v.useCallback(d=>{if(YAe(d,e)){d.preventDefault();let A=r!==void 0?r:v2(c)===v2(u);o(t,{replace:A,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,o,u,r,n,e,t,a,s,i])}var vfe=0,yfe=()=>`__${String(++vfe)}__`;function bfe(){let{router:t}=KW("useSubmit"),{basename:e}=v.useContext(gd),r=QAe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:o,formData:c,body:u}=efe(n,e);if(a.navigate===!1){let d=a.fetcherKey||yfe();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function wfe(t,{relative:e}={}){let{basename:r}=v.useContext(gd),n=v.useContext(xd);Za(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Sb(t||".",{relative:e})},i=k0();if(t==null){s.search=i.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(A=>A).forEach(A=>o.append("index",A));let d=o.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:JA([r,s.pathname])),v2(s)}function Nfe(t,{relative:e}={}){let r=v.useContext(FW);Za(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=KW("useViewTransitionState"),a=Sb(t,{relative:e});if(!r.isTransitioning)return!1;let s=ff(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ff(r.nextLocation.pathname,n)||r.nextLocation.pathname;return nE(a.pathname,i)!=null||nE(a.pathname,s)!=null}var gL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},_fe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],o=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},zW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,A=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,f=u&63;c||(f=64,i||(h=64)),n.push(r[d],r[A],r[h],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_fe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const A=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||o==null||u==null||A==null)throw new Cfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const f=o<<4&240|u>>2;if(n.push(f),A!==64){const m=u<<6&192|A;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Cfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Efe=function(t){const e=GW(t);return zW.encodeByteArray(e,!0)},aE=function(t){return Efe(t).replace(/\./g,"")},qW=function(t){try{return zW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sfe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ife=()=>Sfe().__FIREBASE_DEFAULTS__,Bfe=()=>{if(typeof process>"u"||typeof gL>"u")return;const t=gL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Tfe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qW(t[1]);return e&&JSON.parse(e)},xI=()=>{try{return Ife()||Bfe()||Tfe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WW=t=>{var e,r;return(r=(e=xI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Pfe=t=>{const e=WW(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},XW=()=>{var t;return(t=xI())===null||t===void 0?void 0:t.config},YW=t=>{var e;return(e=xI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kfe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[aE(JSON.stringify(r)),aE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ffe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ci())}function Ofe(){var t;const e=(t=xI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Dfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rfe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Mfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lfe(){const t=Ci();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JW(){return!Ofe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZW(){try{return typeof indexedDB=="object"}catch{return!1}}function Ufe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qfe="FirebaseError";class If extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Qfe,Object.setPrototypeOf(this,If.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ib.prototype.create)}}class Ib{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?Vfe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new If(a,o,n)}}function Vfe(t,e){return t.replace(Hfe,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const Hfe=/\{\$([^}]+)}/g;function $fe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sE(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(xL(s)&&xL(i)){if(!sE(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function xL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Y1(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function J1(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Kfe(t,e){const r=new Gfe(t,e);return r.subscribe.bind(r)}class Gfe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");zfe(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=v3),a.error===void 0&&(a.error=v3),a.complete===void 0&&(a.complete=v3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zfe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function v3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t){return t&&t._delegate?t._delegate:t}class ip{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qfe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new jfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xfe(e))try{this.getOrInitializeService({instanceIdentifier:Am})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Am){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Am){return this.instances.has(e)}getOptions(e=Am){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Wfe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Am){return this.component?this.component.multipleInstances?e:Am:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Wfe(t){return t===Am?void 0:t}function Xfe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yfe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new qfe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gn||(gn={}));const Jfe={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},Zfe=gn.INFO,ehe={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},the=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=ehe[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let cO=class{constructor(e){this.name=e,this._logLevel=Zfe,this._logHandler=the,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...e),this._logHandler(this,gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...e),this._logHandler(this,gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...e),this._logHandler(this,gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...e),this._logHandler(this,gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...e),this._logHandler(this,gn.ERROR,...e)}};const rhe=(t,e)=>e.some(r=>t instanceof r);let vL,yL;function nhe(){return vL||(vL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ahe(){return yL||(yL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eX=new WeakMap,SP=new WeakMap,tX=new WeakMap,y3=new WeakMap,uO=new WeakMap;function she(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(r0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&eX.set(r,t)}).catch(()=>{}),uO.set(e,t),e}function ihe(t){if(SP.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});SP.set(t,e)}let IP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return SP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return r0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ohe(t){IP=t(IP)}function lhe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(b3(this),e,...r);return tX.set(n,e.sort?e.sort():[e]),r0(n)}:ahe().includes(t)?function(...e){return t.apply(b3(this),e),r0(eX.get(this))}:function(...e){return r0(t.apply(b3(this),e))}}function che(t){return typeof t=="function"?lhe(t):(t instanceof IDBTransaction&&ihe(t),rhe(t,nhe())?new Proxy(t,IP):t)}function r0(t){if(t instanceof IDBRequest)return she(t);if(y3.has(t))return y3.get(t);const e=che(t);return e!==t&&(y3.set(t,e),uO.set(e,t)),e}const b3=t=>uO.get(t);function uhe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=r0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(r0(i.result),c.oldVersion,c.newVersion,r0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const dhe=["get","getKey","getAll","getAllKeys","count"],Ahe=["put","add","delete","clear"],w3=new Map;function bL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w3.get(e))return w3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=Ahe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||dhe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return w3.set(e,s),s}ohe(t=>({...t,get:(e,r,n)=>bL(e,r)||t.get(e,r,n),has:(e,r)=>!!bL(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(hhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function hhe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const BP="@firebase/app",wL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new cO("@firebase/app"),mhe="@firebase/app-compat",phe="@firebase/analytics-compat",ghe="@firebase/analytics",xhe="@firebase/app-check-compat",vhe="@firebase/app-check",yhe="@firebase/auth",bhe="@firebase/auth-compat",whe="@firebase/database",Nhe="@firebase/data-connect",_he="@firebase/database-compat",Che="@firebase/functions",Ehe="@firebase/functions-compat",She="@firebase/installations",Ihe="@firebase/installations-compat",Bhe="@firebase/messaging",The="@firebase/messaging-compat",Phe="@firebase/performance",jhe="@firebase/performance-compat",khe="@firebase/remote-config",Fhe="@firebase/remote-config-compat",Ohe="@firebase/storage",Dhe="@firebase/storage-compat",Rhe="@firebase/firestore",Mhe="@firebase/vertexai-preview",Lhe="@firebase/firestore-compat",Uhe="firebase",Qhe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="[DEFAULT]",Vhe={[BP]:"fire-core",[mhe]:"fire-core-compat",[ghe]:"fire-analytics",[phe]:"fire-analytics-compat",[vhe]:"fire-app-check",[xhe]:"fire-app-check-compat",[yhe]:"fire-auth",[bhe]:"fire-auth-compat",[whe]:"fire-rtdb",[Nhe]:"fire-data-connect",[_he]:"fire-rtdb-compat",[Che]:"fire-fn",[Ehe]:"fire-fn-compat",[She]:"fire-iid",[Ihe]:"fire-iid-compat",[Bhe]:"fire-fcm",[The]:"fire-fcm-compat",[Phe]:"fire-perf",[jhe]:"fire-perf-compat",[khe]:"fire-rc",[Fhe]:"fire-rc-compat",[Ohe]:"fire-gcs",[Dhe]:"fire-gcs-compat",[Rhe]:"fire-fst",[Lhe]:"fire-fst-compat",[Mhe]:"fire-vertex","fire-js":"fire-js",[Uhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map,PP=new Map,jP=new Map;function NL(t,e){try{t.container.addComponent(e)}catch(r){hf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Qx(t){const e=t.name;if(jP.has(e))return hf.debug(`There were multiple attempts to register component ${e}.`),!1;jP.set(e,t);for(const r of Ux.values())NL(r,t);for(const r of PP.values())NL(r,t);return!0}function dO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Kd(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},n0=new Ib("app","Firebase",Hhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $he{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ip("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw n0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=Qhe;function AO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:TP,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw n0.create("bad-app-name",{appName:String(a)});if(r||(r=XW()),!r)throw n0.create("no-options");const s=Ux.get(a);if(s){if(sE(r,s.options)&&sE(n,s.config))return s;throw n0.create("duplicate-app",{appName:a})}const i=new Yfe(a);for(const c of jP.values())i.addComponent(c);const o=new $he(r,n,i);return Ux.set(a,o),o}function fO(t=TP){const e=Ux.get(t);if(!e&&t===TP&&XW())return AO();if(!e)throw n0.create("no-app",{appName:t});return e}async function Khe(t){let e=!1;const r=t.name;Ux.has(r)?(e=!0,Ux.delete(r)):PP.has(r)&&t.decRefCount()<=0&&(PP.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function a0(t,e,r){var n;let a=(n=Vhe[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${a}" with version "${e}":`];s&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hf.warn(o.join(" "));return}Qx(new ip(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ghe="firebase-heartbeat-database",zhe=1,y2="firebase-heartbeat-store";let N3=null;function rX(){return N3||(N3=uhe(Ghe,zhe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(y2)}catch(r){console.warn(r)}}}}).catch(t=>{throw n0.create("idb-open",{originalErrorMessage:t.message})})),N3}async function qhe(t){try{const r=(await rX()).transaction(y2),n=await r.objectStore(y2).get(nX(t));return await r.done,n}catch(e){if(e instanceof If)hf.warn(e.message);else{const r=n0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hf.warn(r.message)}}}async function _L(t,e){try{const n=(await rX()).transaction(y2,"readwrite");await n.objectStore(y2).put(e,nX(t)),await n.done}catch(r){if(r instanceof If)hf.warn(r.message);else{const n=n0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});hf.warn(n.message)}}}function nX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe=1024,Xhe=30*24*60*60*1e3;class Yhe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Zhe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=CL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=Xhe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){hf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=CL(),{heartbeatsToSend:n,unsentEntries:a}=Jhe(this._heartbeatsCache.heartbeats),s=aE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return hf.warn(r),""}}}function CL(){return new Date().toISOString().substring(0,10)}function Jhe(t,e=Whe){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),EL(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),EL(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Zhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZW()?Ufe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await qhe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return _L(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return _L(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function EL(t){return aE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0e(t){Qx(new ip("platform-logger",e=>new fhe(e),"PRIVATE")),Qx(new ip("heartbeat",e=>new Yhe(e),"PRIVATE")),a0(BP,wL,t),a0(BP,wL,"esm2017"),a0("fire-js","")}e0e("");function hO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function aX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t0e=aX,sX=new Ib("auth","Firebase",aX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new cO("@firebase/auth");function r0e(t,...e){iE.logLevel<=gn.WARN&&iE.warn(`Auth (${pv}): ${t}`,...e)}function sC(t,...e){iE.logLevel<=gn.ERROR&&iE.error(`Auth (${pv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,...e){throw mO(t,...e)}function eA(t,...e){return mO(t,...e)}function iX(t,e,r){const n=Object.assign(Object.assign({},t0e()),{[e]:r});return new Ib("auth","Firebase",n).create(e,{appName:t.name})}function ZA(t){return iX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return sX.create(t,...e)}function Qr(t,e,...r){if(!t)throw mO(e,...r)}function $A(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sC(e),new Error(e)}function mf(t,e){t||$A(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function n0e(){return SL()==="http:"||SL()==="https:"}function SL(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n0e()||Rfe()||"connection"in navigator)?navigator.onLine:!0}function s0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,r){this.shortDelay=e,this.longDelay=r,mf(r>e,"Short delay should be less than long delay!"),this.isMobile=Ffe()||Mfe()}get(){return a0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e){mf(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$A("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$A("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$A("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e=new Tb(3e4,6e4);function F0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function O0(t,e,r,n,a={}){return lX(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=Bb(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return Dfe()||(u.referrerPolicy="no-referrer"),oX.fetch()(cX(t,t.config.apiHost,r,o),u)})}async function lX(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},i0e),e);try{const a=new c0e(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw cN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw cN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw cN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw iX(t,d,u);fd(t,d)}}catch(a){if(a instanceof If)throw a;fd(t,"network-request-failed",{message:String(a)})}}async function Pb(t,e,r,n,a={}){const s=await O0(t,e,r,n,a);return"mfaPendingCredential"in s&&fd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cX(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?pO(t.config,a):`${t.config.apiScheme}://${a}`}function l0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c0e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(eA(this.auth,"network-request-failed")),o0e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=eA(t,e,n);return a.customData._tokenResponse=r,a}function IL(t){return t!==void 0&&t.enterprise!==void 0}class u0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return l0e(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function d0e(t,e){return O0(t,"GET","/v2/recaptchaConfig",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0e(t,e){return O0(t,"POST","/v1/accounts:delete",e)}async function uX(t,e){return O0(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function f0e(t,e=!1){const r=ms(t),n=await r.getIdToken(e),a=gO(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Iy(_3(a.auth_time)),issuedAtTime:Iy(_3(a.iat)),expirationTime:Iy(_3(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _3(t){return Number(t)*1e3}function gO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return sC("JWT malformed, contained fewer than 3 sections"),null;try{const a=qW(r);return a?JSON.parse(a):(sC("Failed to decode base64 JWT payload"),null)}catch(a){return sC("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function BL(t){const e=gO(t);return Qr(e,"internal-error"),Qr(typeof e.exp<"u","internal-error"),Qr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof If&&h0e(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function h0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iy(this.lastLoginAt),this.creationTime=Iy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await b2(t,uX(r,{idToken:n}));Qr(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dX(s.providerUserInfo):[],o=g0e(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new FP(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,A)}async function p0e(t){const e=ms(t);await oE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g0e(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function dX(t){return t.map(e=>{var{providerId:r}=e,n=hO(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0e(t,e){const r=await lX(t,{},async()=>{const n=Bb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=cX(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",oX.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function v0e(t,e){return O0(t,"POST","/v2/accounts:revokeToken",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qr(e.idToken,"internal-error"),Qr(typeof e.idToken<"u","internal-error"),Qr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Qr(e.length!==0,"internal-error");const r=BL(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await x0e(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new wx;return n&&(Qr(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wx,this.toJSON())}_performRefresh(){return $A("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e){Qr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class KA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=hO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new m0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await b2(this,this.stsTokenManager.getToken(this.auth,e));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return f0e(this,e)}reload(){return p0e(this)}_assign(e){this!==e&&(Qr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new KA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await oE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kd(this.auth.app))return Promise.reject(ZA(this.auth));const e=await this.getIdToken();return await b2(this,A0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,o,c,u,d;const A=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,f=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(o=r.tenantId)!==null&&o!==void 0?o:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:I,providerData:T,stsTokenManager:C}=r;Qr(b&&C,e,"internal-error");const E=wx.fromJSON(this.name,C);Qr(typeof b=="string",e,"internal-error"),oh(A,e.name),oh(h,e.name),Qr(typeof w=="boolean",e,"internal-error"),Qr(typeof I=="boolean",e,"internal-error"),oh(f,e.name),oh(m,e.name),oh(p,e.name),oh(g,e.name),oh(x,e.name),oh(y,e.name);const S=new KA({uid:b,auth:e,email:h,emailVerified:w,displayName:A,isAnonymous:I,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:y});return T&&Array.isArray(T)&&(S.providerData=T.map(O=>Object.assign({},O))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,r,n=!1){const a=new wx;a.updateFromServerResponse(r);const s=new KA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await oE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?dX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new wx;o.updateFromIdToken(n);const c=new KA({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new FP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Map;function GA(t){mf(t instanceof Function,"Expected a class definition");let e=TL.get(t);return e?(mf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}AX.type="NONE";const PL=AX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e,r){return`firebase:${t}:${e}:${r}`}class Nx{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=iC(this.userKey,a.apiKey,s),this.fullPersistenceKey=iC("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?KA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Nx(GA(PL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||GA(PL);const i=iC(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){const A=KA._fromJSON(e,d);u!==s&&(o=A),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Nx(s,e,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Nx(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xX(e))return"Blackberry";if(vX(e))return"Webos";if(hX(e))return"Safari";if((e.includes("chrome/")||mX(e))&&!e.includes("edge/"))return"Chrome";if(gX(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fX(t=Ci()){return/firefox\//i.test(t)}function hX(t=Ci()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mX(t=Ci()){return/crios\//i.test(t)}function pX(t=Ci()){return/iemobile/i.test(t)}function gX(t=Ci()){return/android/i.test(t)}function xX(t=Ci()){return/blackberry/i.test(t)}function vX(t=Ci()){return/webos/i.test(t)}function xO(t=Ci()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function y0e(t=Ci()){var e;return xO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function b0e(){return Lfe()&&document.documentMode===10}function yX(t=Ci()){return xO(t)||gX(t)||vX(t)||xX(t)||/windows phone/i.test(t)||pX(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t,e=[]){let r;switch(t){case"Browser":r=jL(Ci());break;case"Worker":r=`${jL(Ci())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${pv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,o)=>{try{const c=e(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0e(t,e={}){return O0(t,"GET","/v2/passwordPolicy",F0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0e=6;class C0e{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:_0e,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0e{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kL(this),this.idTokenSubscription=new kL(this),this.beforeStateQueue=new w0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=GA(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Nx.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await uX(this,{idToken:e}),n=await KA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Kd(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await oE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kd(this.app))return Promise.reject(ZA(this));const r=e?ms(e):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Qr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kd(this.app)?Promise.reject(ZA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kd(this.app)?Promise.reject(ZA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(GA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N0e(this),r=new C0e(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ib("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await v0e(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&GA(e)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await Nx.create(this,[GA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&r0e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Op(t){return ms(t)}class kL{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kfe(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S0e(t){vI=t}function wX(t){return vI.loadJS(t)}function I0e(){return vI.recaptchaEnterpriseScript}function B0e(){return vI.gapiScript}function T0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const P0e="recaptcha-enterprise",j0e="NO_RECAPTCHA";class k0e{constructor(e){this.type=P0e,this.auth=Op(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{d0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new u0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;IL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(j0e)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&IL(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=I0e();c.length!==0&&(c+=o),wX(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function FL(t,e,r,n=!1){const a=new k0e(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function OP(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await FL(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await FL(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0e(t,e){const r=dO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(sE(s,e??{}))return a;fd(a,"already-initialized")}return r.initialize({options:e})}function O0e(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(GA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function D0e(t,e,r){const n=Op(t);Qr(n._canInitEmulator,n,"emulator-config-failed"),Qr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=NX(e),{host:i,port:o}=R0e(e),c=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),M0e()}function NX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function R0e(t){const e=NX(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:OL(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:OL(i)}}}function OL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function M0e(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return $A("not implemented")}_getIdTokenResponse(e){return $A("not implemented")}_linkToIdToken(e,r){return $A("not implemented")}_getReauthenticationResolver(e){return $A("not implemented")}}async function L0e(t,e){return O0(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0e(t,e){return Pb(t,"POST","/v1/accounts:signInWithPassword",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0e(t,e){return Pb(t,"POST","/v1/accounts:signInWithEmailLink",F0(t,e))}async function V0e(t,e){return Pb(t,"POST","/v1/accounts:signInWithEmailLink",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2 extends vO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new w2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new w2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OP(e,r,"signInWithPassword",U0e);case"emailLink":return Q0e(e,{email:this._email,oobCode:this._password});default:fd(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OP(e,n,"signUpPassword",L0e);case"emailLink":return V0e(e,{idToken:r,email:this._email,oobCode:this._password});default:fd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(t,e){return Pb(t,"POST","/v1/accounts:signInWithIdp",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0e="http://localhost";class op extends vO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new op(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):fd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=hO(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new op(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return _x(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,_x(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,_x(e,r)}buildRequest(){const e={requestUri:H0e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Bb(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K0e(t){const e=Y1(J1(t)).link,r=e?Y1(J1(e)).deep_link_id:null,n=Y1(J1(t)).deep_link_id;return(n?Y1(J1(n)).link:null)||n||r||e||t}class yO{constructor(e){var r,n,a,s,i,o;const c=Y1(J1(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,A=$0e((a=c.mode)!==null&&a!==void 0?a:null);Qr(u&&d&&A,"argument-error"),this.apiKey=u,this.operation=A,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=K0e(e);try{return new yO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.providerId=gv.PROVIDER_ID}static credential(e,r){return w2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=yO.parseLink(r);return Qr(n,"argument-error"),w2._fromEmailAndCode(e,n.code,n.tenantId)}}gv.PROVIDER_ID="password";gv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends _X{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends jb{constructor(){super("facebook.com")}static credential(e){return op._fromParams({providerId:Th.PROVIDER_ID,signInMethod:Th.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Th.credentialFromTaggedObject(e)}static credentialFromError(e){return Th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Th.credential(e.oauthAccessToken)}catch{return null}}}Th.FACEBOOK_SIGN_IN_METHOD="facebook.com";Th.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends jb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return op._fromParams({providerId:Ph.PROVIDER_ID,signInMethod:Ph.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ph.credentialFromTaggedObject(e)}static credentialFromError(e){return Ph.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ph.credential(r,n)}catch{return null}}}Ph.GOOGLE_SIGN_IN_METHOD="google.com";Ph.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends jb{constructor(){super("github.com")}static credential(e){return op._fromParams({providerId:jh.PROVIDER_ID,signInMethod:jh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jh.credentialFromTaggedObject(e)}static credentialFromError(e){return jh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jh.credential(e.oauthAccessToken)}catch{return null}}}jh.GITHUB_SIGN_IN_METHOD="github.com";jh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends jb{constructor(){super("twitter.com")}static credential(e,r){return op._fromParams({providerId:kh.PROVIDER_ID,signInMethod:kh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return kh.credentialFromTaggedObject(e)}static credentialFromError(e){return kh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return kh.credential(r,n)}catch{return null}}}kh.TWITTER_SIGN_IN_METHOD="twitter.com";kh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0e(t,e){return Pb(t,"POST","/v1/accounts:signUp",F0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await KA._fromIdTokenResponse(e,n,a),i=DL(n);return new lp({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=DL(n);return new lp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function DL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends If{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,lE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new lE(e,r,n,a)}}function CX(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lE._fromErrorAndOperation(t,s,e,n):s})}async function z0e(t,e,r=!1){const n=await b2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return lp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0e(t,e,r=!1){const{auth:n}=t;if(Kd(n.app))return Promise.reject(ZA(n));const a="reauthenticate";try{const s=await b2(t,CX(n,a,e,t),r);Qr(s.idToken,n,"internal-error");const i=gO(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(t.uid===o,n,"user-mismatch"),lp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EX(t,e,r=!1){if(Kd(t.app))return Promise.reject(ZA(t));const n="signIn",a=await CX(t,n,e),s=await lp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function W0e(t,e){return EX(Op(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SX(t){const e=Op(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function X0e(t,e,r){if(Kd(t.app))return Promise.reject(ZA(t));const n=Op(t),i=await OP(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G0e).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&SX(t),c}),o=await lp._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(o.user),o}function Y0e(t,e,r){return Kd(t.app)?Promise.reject(ZA(t)):W0e(ms(t),gv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&SX(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0e(t,e){return ms(t).setPersistence(e)}function Z0e(t,e,r,n){return ms(t).onIdTokenChanged(e,r,n)}function eme(t,e,r){return ms(t).beforeAuthStateChanged(e,r)}function IX(t,e,r,n){return ms(t).onAuthStateChanged(e,r,n)}function yI(t){return ms(t).signOut()}const cE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(cE,"1"),this.storage.removeItem(cE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tme=1e3,rme=10;class TX extends BX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);b0e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,rme):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},tme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}TX.type="LOCAL";const PX=TX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX extends BX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}jX.type="SESSION";const kX=jX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new bI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await nme(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ame{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=bO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(A){const h=A;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){return window}function sme(t){tA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(){return typeof tA().WorkerGlobalScope<"u"&&typeof tA().importScripts=="function"}async function ime(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ome(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lme(){return FX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX="firebaseLocalStorageDb",cme=1,uE="firebaseLocalStorage",DX="fbase_key";class kb{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function wI(t,e){return t.transaction([uE],e?"readwrite":"readonly").objectStore(uE)}function ume(){const t=indexedDB.deleteDatabase(OX);return new kb(t).toPromise()}function DP(){const t=indexedDB.open(OX,cme);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(uE,{keyPath:DX})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(uE)?e(n):(n.close(),await ume(),e(await DP()))})})}async function RL(t,e,r){const n=wI(t,!0).put({[DX]:e,value:r});return new kb(n).toPromise()}async function dme(t,e){const r=wI(t,!1).get(e),n=await new kb(r).toPromise();return n===void 0?null:n.value}function ML(t,e){const r=wI(t,!0).delete(e);return new kb(r).toPromise()}const Ame=800,fme=3;class RX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await DP(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>fme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bI._getInstance(lme()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await ime(),!this.activeServiceWorker)return;this.sender=new ame(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ome()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await DP();return await RL(e,cE,"1"),await ML(e,cE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>RL(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>dme(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>ML(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=wI(a,!1).getAll();return new kb(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ame)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RX.type="LOCAL";const hme=RX;new Tb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mme(t,e){return e?GA(e):(Qr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO extends vO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _x(e,this._buildIdpRequest())}_linkToIdToken(e,r){return _x(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return _x(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function pme(t){return EX(t.auth,new wO(t),t.bypassAuthState)}function gme(t){const{auth:e,user:r}=t;return Qr(r,e,"internal-error"),q0e(r,new wO(t),t.bypassAuthState)}async function xme(t){const{auth:e,user:r}=t;return Qr(r,e,"internal-error"),z0e(r,new wO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pme;case"linkViaPopup":case"linkViaRedirect":return xme;case"reauthViaPopup":case"reauthViaRedirect":return gme;default:fd(this.auth,"internal-error")}}resolve(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme=new Tb(2e3,1e4);class ox extends MX{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,ox.currentPopupAction&&ox.currentPopupAction.cancel(),ox.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qr(e,this.auth,"internal-error"),e}async onExecution(){mf(this.filter.length===1,"Popup operations only handle one event");const e=bO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(eA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(eA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ox.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(eA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vme.get())};e()}}ox.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme="pendingRedirect",oC=new Map;class bme extends MX{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=oC.get(this.auth._key());if(!e){try{const n=await wme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}oC.set(this.auth._key(),e)}return this.bypassAuthState||oC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wme(t,e){const r=Cme(e),n=_me(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Nme(t,e){oC.set(t._key(),e)}function _me(t){return GA(t._redirectPersistence)}function Cme(t){return iC(yme,t.config.apiKey,t.name)}async function Eme(t,e,r=!1){if(Kd(t.app))return Promise.reject(ZA(t));const n=Op(t),a=mme(n,e),i=await new bme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sme=10*60*1e3;class Ime{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bme(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!LX(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(eA(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sme&&this.cachedEventUids.clear(),this.cachedEventUids.has(LL(e))}saveEventToCache(e){this.cachedEventUids.add(LL(e)),this.lastProcessedEventTime=Date.now()}}function LL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LX({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Bme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LX(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tme(t,e={}){return O0(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jme=/^https?/;async function kme(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Tme(t);for(const r of e)try{if(Fme(r))return}catch{}fd(t,"unauthorized-domain")}function Fme(t){const e=kP(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!jme.test(r))return!1;if(Pme.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ome=new Tb(3e4,6e4);function UL(){const t=tA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Dme(t){return new Promise((e,r)=>{var n,a,s;function i(){UL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UL(),r(eA(t,"network-request-failed"))},timeout:Ome.get()})}if(!((a=(n=tA().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=tA().gapi)===null||s===void 0)&&s.load)i();else{const o=T0e("iframefcb");return tA()[o]=()=>{gapi.load?i():r(eA(t,"network-request-failed"))},wX(`${B0e()}?onload=${o}`).catch(c=>r(c))}}).catch(e=>{throw lC=null,e})}let lC=null;function Rme(t){return lC=lC||Dme(t),lC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme=new Tb(5e3,15e3),Lme="__/auth/iframe",Ume="emulator/auth/iframe",Qme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hme(t){const e=t.config;Qr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?pO(e,Ume):`https://${t.config.authDomain}/${Lme}`,n={apiKey:e.apiKey,appName:t.name,v:pv},a=Vme.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Bb(n).slice(1)}`}async function $me(t){const e=await Rme(t),r=tA().gapi;return Qr(r,t,"internal-error"),e.open({where:document.body,url:Hme(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qme,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=eA(t,"network-request-failed"),o=tA().setTimeout(()=>{s(i)},Mme.get());function c(){tA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gme=500,zme=600,qme="_blank",Wme="http://localhost";class QL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xme(t,e,r,n=Gme,a=zme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},Kme),{width:n.toString(),height:a.toString(),top:s,left:i}),u=Ci().toLowerCase();r&&(o=mX(u)?qme:r),fX(u)&&(e=e||Wme,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(y0e(u)&&o!=="_self")return Yme(e||"",o),new QL(null);const A=window.open(e||"",o,d);Qr(A,t,"popup-blocked");try{A.focus()}catch{}return new QL(A)}function Yme(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme="__/auth/handler",Zme="emulator/auth/handler",epe=encodeURIComponent("fac");async function VL(t,e,r,n,a,s){Qr(t.config.authDomain,t,"auth-domain-config-required"),Qr(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:pv,eventId:a};if(e instanceof _X){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",$fe(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,A]of Object.entries({}))i[d]=A}if(e instanceof jb){const d=e.getScopes().filter(A=>A!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await t._getAppCheckToken(),u=c?`#${epe}=${encodeURIComponent(c)}`:"";return`${tpe(t)}?${Bb(o).slice(1)}${u}`}function tpe({config:t}){return t.emulator?pO(t,Zme):`https://${t.authDomain}/${Jme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="webStorageSupport";class rpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kX,this._completeRedirectFn=Eme,this._overrideRedirectResult=Nme}async _openPopup(e,r,n,a){var s;mf((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await VL(e,r,n,kP(),a);return Xme(e,i,bO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await VL(e,r,n,kP(),a);return sme(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(mf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await $me(e),n=new Ime(e);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(C3,{type:C3},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[C3];i!==void 0&&r(!!i),fd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=kme(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return yX()||hX()||xO()}}const npe=rpe;var HL="@firebase/auth",$L="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ape{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function spe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ipe(t){Qx(new ip("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bX(t)},u=new E0e(n,a,s,c);return O0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Qx(new ip("auth-internal",e=>{const r=Op(e.getProvider("auth").getImmediate());return(n=>new ape(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),a0(HL,$L,spe(t)),a0(HL,$L,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ope=5*60,lpe=YW("authIdTokenMaxAge")||ope;let KL=null;const cpe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>lpe)return;const a=r==null?void 0:r.token;KL!==a&&(KL=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function UX(t=fO()){const e=dO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=F0e(t,{popupRedirectResolver:npe,persistence:[hme,PX,kX]}),n=YW("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=cpe(s.toString());eme(r,i,()=>i(r.currentUser)),Z0e(r,o=>i(o))}}const a=WW("auth");return a&&D0e(r,`http://${a}`),r}function upe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}S0e({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=eA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",upe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ipe("Browser");var dpe="firebase",Ape="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */a0(dpe,Ape,"app");var GL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lm,QX;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function S(){}S.prototype=E.prototype,C.D=E.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(O,B,P){for(var D=Array(arguments.length-2),W=2;W<arguments.length;W++)D[W-2]=arguments[W];return E.prototype[B].apply(O,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,E,S){S||(S=0);var O=Array(16);if(typeof E=="string")for(var B=0;16>B;++B)O[B]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(B=0;16>B;++B)O[B]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=C.g[0],S=C.g[1],B=C.g[2];var P=C.g[3],D=E+(P^S&(B^P))+O[0]+3614090360&4294967295;E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[1]+3905402710&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[2]+606105819&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[3]+3250441966&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[4]+4118548399&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[5]+1200080426&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[6]+2821735955&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[7]+4249261313&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[8]+1770035416&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[9]+2336552879&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[10]+4294925233&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[11]+2304563134&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[12]+1804603682&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[13]+4254626195&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[14]+2792965006&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[15]+1236535329&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(B^P&(S^B))+O[1]+4129170786&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[6]+3225465664&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[11]+643717713&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[0]+3921069994&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[5]+3593408605&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[10]+38016083&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[15]+3634488961&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[4]+3889429448&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[9]+568446438&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[14]+3275163606&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[3]+4107603335&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[8]+1163531501&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[13]+2850285829&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[2]+4243563512&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[7]+1735328473&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[12]+2368359562&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(S^B^P)+O[5]+4294588738&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[8]+2272392833&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[11]+1839030562&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[14]+4259657740&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[1]+2763975236&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[4]+1272893353&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[7]+4139469664&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[10]+3200236656&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[13]+681279174&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[0]+3936430074&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[3]+3572445317&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[6]+76029189&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[9]+3654602809&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[12]+3873151461&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[15]+530742520&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[2]+3299628645&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(B^(S|~P))+O[0]+4096336452&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[7]+1126891415&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[14]+2878612391&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[5]+4237533241&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[12]+1700485571&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[3]+2399980690&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[10]+4293915773&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[1]+2240044497&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[8]+1873313359&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[15]+4264355552&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[6]+2734768916&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[13]+1309151649&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[4]+4149444226&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[11]+3174756917&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[2]+718787259&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+B&4294967295,C.g[3]=C.g[3]+P&4294967295}n.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var S=E-this.blockSize,O=this.B,B=this.h,P=0;P<E;){if(B==0)for(;P<=S;)a(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<E;)if(O[B++]=C.charCodeAt(P++),B==this.blockSize){a(this,O),B=0;break}}else for(;P<E;)if(O[B++]=C[P++],B==this.blockSize){a(this,O),B=0;break}}this.h=B,this.o+=E},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var S=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=S&255,S/=256;for(this.u(C),C=Array(16),E=S=0;4>E;++E)for(var O=0;32>O;O+=8)C[S++]=this.g[E]>>>O&255;return C};function s(C,E){var S=o;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=E(C)}function i(C,E){this.h=E;for(var S=[],O=!0,B=C.length-1;0<=B;B--){var P=C[B]|0;O&&P==E||(S[B]=P,O=!1)}this.g=S}var o={};function c(C){return-128<=C&&128>C?s(C,function(E){return new i([E|0],0>E?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return g(u(-C));for(var E=[],S=1,O=0;C>=S;O++)E[O]=C/S|0,S*=4294967296;return new i(E,0)}function d(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return g(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),O=A,B=0;B<C.length;B+=8){var P=Math.min(8,C.length-B),D=parseInt(C.substring(B,B+P),E);8>P?(P=u(Math.pow(E,P)),O=O.j(P).add(u(D))):(O=O.j(S),O=O.add(u(D)))}return O}var A=c(0),h=c(1),f=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var C=0,E=1,S=0;S<this.g.length;S++){var O=this.i(S);C+=(0<=O?O:4294967296+O)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(p(this))return"-"+g(this).toString(C);for(var E=u(Math.pow(C,6)),S=this,O="";;){var B=w(S,E).g;S=x(S,B.j(E));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=B,m(S))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function p(C){return C.h==-1}t.l=function(C){return C=x(this,C),p(C)?-1:m(C)?0:1};function g(C){for(var E=C.g.length,S=[],O=0;O<E;O++)S[O]=~C.g[O];return new i(S,~C.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0,B=0;B<=E;B++){var P=O+(this.i(B)&65535)+(C.i(B)&65535),D=(P>>>16)+(this.i(B)>>>16)+(C.i(B)>>>16);O=D>>>16,P&=65535,D&=65535,S[B]=D<<16|P}return new i(S,S[S.length-1]&-2147483648?-1:0)};function x(C,E){return C.add(g(E))}t.j=function(C){if(m(this)||m(C))return A;if(p(this))return p(C)?g(this).j(g(C)):g(g(this).j(C));if(p(C))return g(this.j(g(C)));if(0>this.l(f)&&0>C.l(f))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,S=[],O=0;O<2*E;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(var B=0;B<C.g.length;B++){var P=this.i(O)>>>16,D=this.i(O)&65535,W=C.i(B)>>>16,Ae=C.i(B)&65535;S[2*O+2*B]+=D*Ae,y(S,2*O+2*B),S[2*O+2*B+1]+=P*Ae,y(S,2*O+2*B+1),S[2*O+2*B+1]+=D*W,y(S,2*O+2*B+1),S[2*O+2*B+2]+=P*W,y(S,2*O+2*B+2)}for(O=0;O<E;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=E;O<2*E;O++)S[O]=0;return new i(S,0)};function y(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function b(C,E){this.g=C,this.h=E}function w(C,E){if(m(E))throw Error("division by zero");if(m(C))return new b(A,A);if(p(C))return E=w(g(C),E),new b(g(E.g),g(E.h));if(p(E))return E=w(C,g(E)),new b(g(E.g),E.h);if(30<C.g.length){if(p(C)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var S=h,O=E;0>=O.l(C);)S=I(S),O=I(O);var B=T(S,1),P=T(O,1);for(O=T(O,2),S=T(S,2);!m(O);){var D=P.add(O);0>=D.l(C)&&(B=B.add(S),P=D),O=T(O,1),S=T(S,1)}return E=x(C,B.j(E)),new b(B,E)}for(B=A;0<=C.l(E);){for(S=Math.max(1,Math.floor(C.m()/E.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=u(S),D=P.j(E);p(D)||0<D.l(C);)S-=O,P=u(S),D=P.j(E);m(P)&&(P=h),B=B.add(P),C=x(C,D)}return new b(B,C)}t.A=function(C){return w(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)&C.i(O);return new i(S,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)|C.i(O);return new i(S,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)^C.i(O);return new i(S,this.h^C.h)};function I(C){for(var E=C.g.length+1,S=[],O=0;O<E;O++)S[O]=C.i(O)<<1|C.i(O-1)>>>31;return new i(S,C.h)}function T(C,E){var S=E>>5;E%=32;for(var O=C.g.length-S,B=[],P=0;P<O;P++)B[P]=0<E?C.i(P+S)>>>E|C.i(P+S+1)<<32-E:C.i(P+S);return new i(B,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,QX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Lm=i}).apply(typeof GL<"u"?GL:typeof self<"u"?self:typeof window<"u"?window:{});var uN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VX,Z1,HX,cC,RP,$X,KX,GX;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,G,oe){return _==Array.prototype||_==Object.prototype||(_[G]=oe.value),_};function r(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof uN=="object"&&uN];for(var G=0;G<_.length;++G){var oe=_[G];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var n=r(this);function a(_,G){if(G)e:{var oe=n;_=_.split(".");for(var De=0;De<_.length-1;De++){var bt=_[De];if(!(bt in oe))break e;oe=oe[bt]}_=_[_.length-1],De=oe[_],G=G(De),G!=De&&G!=null&&e(oe,_,{configurable:!0,writable:!0,value:G})}}function s(_,G){_ instanceof String&&(_+="");var oe=0,De=!1,bt={next:function(){if(!De&&oe<_.length){var Pt=oe++;return{value:G(Pt,_[Pt]),done:!1}}return De=!0,{done:!0,value:void 0}}};return bt[Symbol.iterator]=function(){return bt},bt}a("Array.prototype.values",function(_){return _||function(){return s(this,function(G,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(_){var G=typeof _;return G=G!="object"?G:_?Array.isArray(_)?"array":G:"null",G=="array"||G=="object"&&typeof _.length=="number"}function u(_){var G=typeof _;return G=="object"&&_!=null||G=="function"}function d(_,G,oe){return _.call.apply(_.bind,arguments)}function A(_,G,oe){if(!_)throw Error();if(2<arguments.length){var De=Array.prototype.slice.call(arguments,2);return function(){var bt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(bt,De),_.apply(G,bt)}}return function(){return _.apply(G,arguments)}}function h(_,G,oe){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:A,h.apply(null,arguments)}function f(_,G){var oe=Array.prototype.slice.call(arguments,1);return function(){var De=oe.slice();return De.push.apply(De,arguments),_.apply(this,De)}}function m(_,G){function oe(){}oe.prototype=G.prototype,_.aa=G.prototype,_.prototype=new oe,_.prototype.constructor=_,_.Qb=function(De,bt,Pt){for(var rr=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)rr[vn-2]=arguments[vn];return G.prototype[bt].apply(De,rr)}}function p(_){const G=_.length;if(0<G){const oe=Array(G);for(let De=0;De<G;De++)oe[De]=_[De];return oe}return[]}function g(_,G){for(let oe=1;oe<arguments.length;oe++){const De=arguments[oe];if(c(De)){const bt=_.length||0,Pt=De.length||0;_.length=bt+Pt;for(let rr=0;rr<Pt;rr++)_[bt+rr]=De[rr]}else _.push(De)}}class x{constructor(G,oe){this.i=G,this.j=oe,this.h=0,this.g=null}get(){let G;return 0<this.h?(this.h--,G=this.g,this.g=G.next,G.next=null):G=this.i(),G}}function y(_){return/^[\s\xa0]*$/.test(_)}function b(){var _=o.navigator;return _&&(_=_.userAgent)?_:""}function w(_){return w[" "](_),_}w[" "]=function(){};var I=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(_,G,oe){for(const De in _)G.call(oe,_[De],De,_)}function C(_,G){for(const oe in _)G.call(void 0,_[oe],oe,_)}function E(_){const G={};for(const oe in _)G[oe]=_[oe];return G}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(_,G){let oe,De;for(let bt=1;bt<arguments.length;bt++){De=arguments[bt];for(oe in De)_[oe]=De[oe];for(let Pt=0;Pt<S.length;Pt++)oe=S[Pt],Object.prototype.hasOwnProperty.call(De,oe)&&(_[oe]=De[oe])}}function B(_){var G=1;_=_.split(":");const oe=[];for(;0<G&&_.length;)oe.push(_.shift()),G--;return _.length&&oe.push(_.join(":")),oe}function P(_){o.setTimeout(()=>{throw _},0)}function D(){var _=X;let G=null;return _.g&&(G=_.g,_.g=_.g.next,_.g||(_.h=null),G.next=null),G}class W{constructor(){this.h=this.g=null}add(G,oe){const De=Ae.get();De.set(G,oe),this.h?this.h.next=De:this.g=De,this.h=De}}var Ae=new x(()=>new ee,_=>_.reset());class ee{constructor(){this.next=this.g=this.h=null}set(G,oe){this.h=G,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,de=!1,X=new W,pe=()=>{const _=o.Promise.resolve(void 0);ce=()=>{_.then(Se)}};var Se=()=>{for(var _;_=D();){try{_.h.call(_.g)}catch(oe){P(oe)}var G=Ae;G.j(_),100>G.h&&(G.h++,_.next=G.g,G.g=_)}de=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(_,G){this.type=_,this.g=this.target=G,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var _=!1,G=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const oe=()=>{};o.addEventListener("test",oe,G),o.removeEventListener("test",oe,G)}catch{}return _}();function M(_,G){if(F.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var oe=this.type=_.type,De=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=G,G=_.relatedTarget){if(I){e:{try{w(G.nodeName);var bt=!0;break e}catch{}bt=!1}bt||(G=null)}}else oe=="mouseover"?G=_.fromElement:oe=="mouseout"&&(G=_.toElement);this.relatedTarget=G,De?(this.clientX=De.clientX!==void 0?De.clientX:De.pageX,this.clientY=De.clientY!==void 0?De.clientY:De.pageY,this.screenX=De.screenX||0,this.screenY=De.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:L[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&M.aa.h.call(this)}}m(M,F);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),R=0;function K(_,G,oe,De,bt){this.listener=_,this.proxy=null,this.src=G,this.type=oe,this.capture=!!De,this.ha=bt,this.key=++R,this.da=this.fa=!1}function Z(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,G,oe,De,bt){var Pt=_.toString();_=this.g[Pt],_||(_=this.g[Pt]=[],this.h++);var rr=ye(_,G,De,bt);return-1<rr?(G=_[rr],oe||(G.fa=!1)):(G=new K(G,this.src,Pt,!!De,bt),G.fa=oe,_.push(G)),G};function Q(_,G){var oe=G.type;if(oe in _.g){var De=_.g[oe],bt=Array.prototype.indexOf.call(De,G,void 0),Pt;(Pt=0<=bt)&&Array.prototype.splice.call(De,bt,1),Pt&&(Z(G),_.g[oe].length==0&&(delete _.g[oe],_.h--))}}function ye(_,G,oe,De){for(var bt=0;bt<_.length;++bt){var Pt=_[bt];if(!Pt.da&&Pt.listener==G&&Pt.capture==!!oe&&Pt.ha==De)return bt}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),z={};function le(_,G,oe,De,bt){if(Array.isArray(G)){for(var Pt=0;Pt<G.length;Pt++)le(_,G[Pt],oe,De,bt);return null}return oe=Ct(oe),_&&_[q]?_.K(G,oe,u(De)?!!De.capture:!1,bt):je(_,G,oe,!1,De,bt)}function je(_,G,oe,De,bt,Pt){if(!G)throw Error("Invalid event type");var rr=u(bt)?!!bt.capture:!!bt,vn=ct(_);if(vn||(_[Y]=vn=new te(_)),oe=vn.add(G,oe,De,rr,Pt),oe.proxy)return oe;if(De=ue(),oe.proxy=De,De.src=_,De.listener=oe,_.addEventListener)V||(bt=rr),bt===void 0&&(bt=!1),_.addEventListener(G.toString(),De,bt);else if(_.attachEvent)_.attachEvent(nt(G.toString()),De);else if(_.addListener&&_.removeListener)_.addListener(De);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function ue(){function _(oe){return G.call(_.src,_.listener,oe)}const G=mt;return _}function Pe(_,G,oe,De,bt){if(Array.isArray(G))for(var Pt=0;Pt<G.length;Pt++)Pe(_,G[Pt],oe,De,bt);else De=u(De)?!!De.capture:!!De,oe=Ct(oe),_&&_[q]?(_=_.i,G=String(G).toString(),G in _.g&&(Pt=_.g[G],oe=ye(Pt,oe,De,bt),-1<oe&&(Z(Pt[oe]),Array.prototype.splice.call(Pt,oe,1),Pt.length==0&&(delete _.g[G],_.h--)))):_&&(_=ct(_))&&(G=_.g[G.toString()],_=-1,G&&(_=ye(G,oe,De,bt)),(oe=-1<_?G[_]:null)&&Ye(oe))}function Ye(_){if(typeof _!="number"&&_&&!_.da){var G=_.src;if(G&&G[q])Q(G.i,_);else{var oe=_.type,De=_.proxy;G.removeEventListener?G.removeEventListener(oe,De,_.capture):G.detachEvent?G.detachEvent(nt(oe),De):G.addListener&&G.removeListener&&G.removeListener(De),(oe=ct(G))?(Q(oe,_),oe.h==0&&(oe.src=null,G[Y]=null)):Z(_)}}}function nt(_){return _ in z?z[_]:z[_]="on"+_}function mt(_,G){if(_.da)_=!0;else{G=new M(G,this);var oe=_.listener,De=_.ha||_.src;_.fa&&Ye(_),_=oe.call(De,G)}return _}function ct(_){return _=_[Y],_ instanceof te?_:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(_){return typeof _=="function"?_:(_[ft]||(_[ft]=function(G){return _.handleEvent(G)}),_[ft])}function At(){k.call(this),this.i=new te(this),this.M=this,this.F=null}m(At,k),At.prototype[q]=!0,At.prototype.removeEventListener=function(_,G,oe,De){Pe(this,_,G,oe,De)};function He(_,G){var oe,De=_.F;if(De)for(oe=[];De;De=De.F)oe.push(De);if(_=_.M,De=G.type||G,typeof G=="string")G=new F(G,_);else if(G instanceof F)G.target=G.target||_;else{var bt=G;G=new F(De,_),O(G,bt)}if(bt=!0,oe)for(var Pt=oe.length-1;0<=Pt;Pt--){var rr=G.g=oe[Pt];bt=it(rr,De,!0,G)&&bt}if(rr=G.g=_,bt=it(rr,De,!0,G)&&bt,bt=it(rr,De,!1,G)&&bt,oe)for(Pt=0;Pt<oe.length;Pt++)rr=G.g=oe[Pt],bt=it(rr,De,!1,G)&&bt}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var _=this.i,G;for(G in _.g){for(var oe=_.g[G],De=0;De<oe.length;De++)Z(oe[De]);delete _.g[G],_.h--}}this.F=null},At.prototype.K=function(_,G,oe,De){return this.i.add(String(_),G,!1,oe,De)},At.prototype.L=function(_,G,oe,De){return this.i.add(String(_),G,!0,oe,De)};function it(_,G,oe,De){if(G=_.i.g[String(G)],!G)return!0;G=G.concat();for(var bt=!0,Pt=0;Pt<G.length;++Pt){var rr=G[Pt];if(rr&&!rr.da&&rr.capture==oe){var vn=rr.listener,ss=rr.ha||rr.src;rr.fa&&Q(_.i,rr),bt=vn.call(ss,De)!==!1&&bt}}return bt&&!De.defaultPrevented}function we(_,G,oe){if(typeof _=="function")oe&&(_=h(_,oe));else if(_&&typeof _.handleEvent=="function")_=h(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(G)?-1:o.setTimeout(_,G||0)}function re(_){_.g=we(()=>{_.g=null,_.i&&(_.i=!1,re(_))},_.l);const G=_.h;_.h=null,_.m.apply(null,G)}class ne extends k{constructor(G,oe){super(),this.m=G,this.l=oe,this.h=null,this.i=!1,this.g=null}j(G){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(_){k.call(this),this.h=_,this.g={}}m(Ue,k);var Ke=[];function et(_){T(_.g,function(G,oe){this.g.hasOwnProperty(oe)&&Ye(G)},_),_.g={}}Ue.prototype.N=function(){Ue.aa.N.call(this),et(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,he=o.JSON.parse,_e=class{stringify(_){return o.JSON.stringify(_,void 0)}parse(_){return o.JSON.parse(_,void 0)}};function be(){}be.prototype.h=null;function Qe(_){return _.h||(_.h=_.i())}function $e(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function st(){F.call(this,"d")}m(st,F);function yt(){F.call(this,"c")}m(yt,F);var Dt={},nr=null;function Ce(){return nr=nr||new At}Dt.La="serverreachability";function dt(_){F.call(this,Dt.La,_)}m(dt,F);function gt(_){const G=Ce();He(G,new dt(G))}Dt.STAT_EVENT="statevent";function Ne(_,G){F.call(this,Dt.STAT_EVENT,_),this.stat=G}m(Ne,F);function at(_){const G=Ce();He(G,new Ne(G,_))}Dt.Ma="timingevent";function wt(_,G){F.call(this,Dt.Ma,_),this.size=G}m(wt,F);function kt(_,G){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){_()},G)}function Lt(){this.g=!0}Lt.prototype.xa=function(){this.g=!1};function qt(_,G,oe,De,bt,Pt){_.info(function(){if(_.g)if(Pt)for(var rr="",vn=Pt.split("&"),ss=0;ss<vn.length;ss++){var ln=vn[ss].split("=");if(1<ln.length){var Tn=ln[0];ln=ln[1];var ba=Tn.split("_");rr=2<=ba.length&&ba[1]=="type"?rr+(Tn+"="+ln+"&"):rr+(Tn+"=redacted&")}}else rr=null;else rr=Pt;return"XMLHTTP REQ ("+De+") [attempt "+bt+"]: "+G+`
`+oe+`
`+rr})}function _t(_,G,oe,De,bt,Pt,rr){_.info(function(){return"XMLHTTP RESP ("+De+") [ attempt "+bt+"]: "+G+`
`+oe+`
`+Pt+" "+rr})}function ie(_,G,oe,De){_.info(function(){return"XMLHTTP TEXT ("+G+"): "+me(_,oe)+(De?" "+De:"")})}function se(_,G){_.info(function(){return"TIMEOUT: "+G})}Lt.prototype.info=function(){};function me(_,G){if(!_.g)return G;if(!G)return null;try{var oe=JSON.parse(G);if(oe){for(_=0;_<oe.length;_++)if(Array.isArray(oe[_])){var De=oe[_];if(!(2>De.length)){var bt=De[1];if(Array.isArray(bt)&&!(1>bt.length)){var Pt=bt[0];if(Pt!="noop"&&Pt!="stop"&&Pt!="close")for(var rr=1;rr<bt.length;rr++)bt[rr]=""}}}}return ke(oe)}catch{return G}}var fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Re;function ae(){}m(ae,be),ae.prototype.g=function(){return new XMLHttpRequest},ae.prototype.i=function(){return{}},Re=new ae;function Me(_,G,oe,De){this.j=_,this.i=G,this.l=oe,this.R=De||1,this.U=new Ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var Le={},Ie={};function rt(_,G,oe){_.L=1,_.v=xA(ni(G)),_.m=oe,_.P=!0,Ze(_,null)}function Ze(_,G){_.F=Date.now(),lt(_),_.A=ni(_.v);var oe=_.A,De=_.R;Array.isArray(De)||(De=[String(De)]),ng(oe.i,"t",De),_.C=0,oe=_.j.J,_.h=new xe,_.g=xs(_.j,oe?G:null,!_.m),0<_.O&&(_.M=new ne(h(_.Y,_,_.g),_.O)),G=_.U,oe=_.g,De=_.ca;var bt="readystatechange";Array.isArray(bt)||(bt&&(Ke[0]=bt.toString()),bt=Ke);for(var Pt=0;Pt<bt.length;Pt++){var rr=le(oe,bt[Pt],De||G.handleEvent,!1,G.h||G);if(!rr)break;G.g[rr.key]=rr}G=_.H?E(_.H):{},_.m?(_.u||(_.u="POST"),G["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,G)):(_.u="GET",_.g.ea(_.A,_.u,null,G)),gt(),qt(_.i,_.u,_.A,_.l,_.R,_.m)}Me.prototype.ca=function(_){_=_.target;const G=this.M;G&&al(_)==3?G.j():this.Y(_)},Me.prototype.Y=function(_){try{if(_==this.g)e:{const ba=al(this.g);var G=this.g.Ba();const nc=this.g.Z();if(!(3>ba)&&(ba!=3||this.g&&(this.h.h||this.g.oa()||W0(this.g)))){this.J||ba!=4||G==7||(G==8||0>=nc?gt(3):gt(2)),Wt(this);var oe=this.g.Z();this.X=oe;t:if(tt(this)){var De=W0(this.g);_="";var bt=De.length,Pt=al(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),er(this);var rr="";break t}this.h.i=new o.TextDecoder}for(G=0;G<bt;G++)this.h.h=!0,_+=this.h.i.decode(De[G],{stream:!(Pt&&G==bt-1)});De.length=0,this.h.g+=_,this.C=0,rr=this.h.g}else rr=this.g.oa();if(this.o=oe==200,_t(this.i,this.u,this.A,this.l,this.R,ba,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var vn,ss=this.g;if((vn=ss.g?ss.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(vn)){var ln=vn;break t}}ln=null}if(oe=ln)ie(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,oe);else{this.o=!1,this.s=3,at(12),Tr(this),er(this);break e}}if(this.P){oe=!0;let Bo;for(;!this.J&&this.C<rr.length;)if(Bo=Xe(this,rr),Bo==Ie){ba==4&&(this.s=4,at(14),oe=!1),ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Bo==Le){this.s=4,at(15),ie(this.i,this.l,rr,"[Invalid Chunk]"),oe=!1;break}else ie(this.i,this.l,Bo,null),va(this,Bo);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ba!=4||rr.length!=0||this.h.h||(this.s=1,at(16),oe=!1),this.o=this.o&&oe,!oe)ie(this.i,this.l,rr,"[Invalid Chunked Response]"),Tr(this),er(this);else if(0<rr.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+rr.length),pr(Tn),Tn.M=!0,at(11))}}else ie(this.i,this.l,rr,null),va(this,rr);ba==4&&Tr(this),this.o&&!this.J&&(ba==4?Kr(this.j,this):(this.o=!1,lt(this)))}else sg(this.g),oe==400&&0<rr.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Tr(this),er(this)}}}catch{}finally{}};function tt(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Xe(_,G){var oe=_.C,De=G.indexOf(`
`,oe);return De==-1?Ie:(oe=Number(G.substring(oe,De)),isNaN(oe)?Le:(De+=1,De+oe>G.length?Ie:(G=G.slice(De,De+oe),_.C=De+oe,G)))}Me.prototype.cancel=function(){this.J=!0,Tr(this)};function lt(_){_.S=Date.now()+_.I,xt(_,_.I)}function xt(_,G){if(_.B!=null)throw Error("WatchDog timer not null");_.B=kt(h(_.ba,_),G)}function Wt(_){_.B&&(o.clearTimeout(_.B),_.B=null)}Me.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(se(this.i,this.A),this.L!=2&&(gt(),at(17)),Tr(this),this.s=2,er(this)):xt(this,this.S-_)};function er(_){_.j.G==0||_.J||Kr(_.j,_)}function Tr(_){Wt(_);var G=_.M;G&&typeof G.ma=="function"&&G.ma(),_.M=null,et(_.U),_.g&&(G=_.g,_.g=null,G.abort(),G.ma())}function va(_,G){try{var oe=_.j;if(oe.G!=0&&(oe.g==_||Ta(oe.h,_))){if(!_.K&&Ta(oe.h,_)&&oe.G==3){try{var De=oe.Da.g.parse(G)}catch{De=null}if(Array.isArray(De)&&De.length==3){var bt=De;if(bt[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<_.F)Rr(oe),$c(oe);else break e;$t(oe),at(18)}}else oe.za=bt[1],0<oe.za-oe.T&&37500>bt[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=kt(h(oe.Za,oe),6e3));if(1>=ec(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Dn(oe,11)}else if((_.K||oe.g==_)&&Rr(oe),!y(G))for(bt=oe.Da.g.parse(G),G=0;G<bt.length;G++){let ln=bt[G];if(oe.T=ln[0],ln=ln[1],oe.G==2)if(ln[0]=="c"){oe.K=ln[1],oe.ia=ln[2];const Tn=ln[3];Tn!=null&&(oe.la=Tn,oe.j.info("VER="+oe.la));const ba=ln[4];ba!=null&&(oe.Aa=ba,oe.j.info("SVER="+oe.Aa));const nc=ln[5];nc!=null&&typeof nc=="number"&&0<nc&&(De=1.5*nc,oe.L=De,oe.j.info("backChannelRequestTimeoutMs_="+De)),De=oe;const Bo=_.g;if(Bo){const eo=Bo.g?Bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var Pt=De.h;Pt.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(Pt.j=Pt.l,Pt.g=new Set,Pt.h&&(tc(Pt,Pt.h),Pt.h=null))}if(De.D){const Du=Bo.g?Bo.g.getResponseHeader("X-HTTP-Session-Id"):null;Du&&(De.ya=Du,fn(De.I,De.D,Du))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-_.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),De=oe;var rr=_;if(De.qa=$n(De,De.J?De.ia:null,De.W),rr.K){Uf(De.h,rr);var vn=rr,ss=De.L;ss&&(vn.I=ss),vn.B&&(Wt(vn),lt(vn)),De.g=rr}else Ut(De);0<oe.i.length&&U(oe)}else ln[0]!="stop"&&ln[0]!="close"||Dn(oe,7);else oe.G==3&&(ln[0]=="stop"||ln[0]=="close"?ln[0]=="stop"?Dn(oe,7):Gf(oe):ln[0]!="noop"&&oe.l&&oe.l.ta(ln),oe.v=0)}}gt(4)}catch{}}var sa=class{constructor(_,G){this.g=_,this.map=G}};function nl(_){this.l=_||10,o.PerformanceNavigationTiming?(_=o.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bs(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function ec(_){return _.h?1:_.g?_.g.size:0}function Ta(_,G){return _.h?_.h==G:_.g?_.g.has(G):!1}function tc(_,G){_.g?_.g.add(G):_.h=G}function Uf(_,G){_.h&&_.h==G?_.h=null:_.g&&_.g.has(G)&&_.g.delete(G)}nl.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function ya(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let G=_.i;for(const oe of _.g.values())G=G.concat(oe.D);return G}return p(_.i)}function Cd(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var G=[],oe=_.length,De=0;De<oe;De++)G.push(_[De]);return G}G=[],oe=0;for(De in _)G[oe++]=_[De];return G}function Mc(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var G=[];_=_.length;for(var oe=0;oe<_;oe++)G.push(oe);return G}G=[],oe=0;for(const De in _)G[oe++]=De;return G}}}function pA(_,G){if(_.forEach&&typeof _.forEach=="function")_.forEach(G,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,G,void 0);else for(var oe=Mc(_),De=Cd(_),bt=De.length,Pt=0;Pt<bt;Pt++)G.call(void 0,De[Pt],oe&&oe[Pt],_)}var K0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tl(_,G){if(_){_=_.split("&");for(var oe=0;oe<_.length;oe++){var De=_[oe].indexOf("="),bt=null;if(0<=De){var Pt=_[oe].substring(0,De);bt=_[oe].substring(De+1)}else Pt=_[oe];G(Pt,bt?decodeURIComponent(bt.replace(/\+/g," ")):"")}}}function da(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof da){this.h=_.h,gA(this,_.j),this.o=_.o,this.g=_.g,Qf(this,_.s),this.l=_.l;var G=_.i,oe=new Zi;oe.i=G.i,G.g&&(oe.g=new Map(G.g),oe.h=G.h),eg(this,oe),this.m=_.m}else _&&(G=String(_).match(K0))?(this.h=!1,gA(this,G[1]||"",!0),this.o=Ed(G[2]||""),this.g=Ed(G[3]||"",!0),Qf(this,G[4]),this.l=Ed(G[5]||"",!0),eg(this,G[6]||"",!0),this.m=Ed(G[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}da.prototype.toString=function(){var _=[],G=this.j;G&&_.push(Lc(G,tg,!0),":");var oe=this.g;return(oe||G=="file")&&(_.push("//"),(G=this.o)&&_.push(Lc(G,tg,!0),"@"),_.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&_.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&_.push("/"),_.push(Lc(oe,oe.charAt(0)=="/"?Hv:Vv,!0))),(oe=this.i.toString())&&_.push("?",oe),(oe=this.m)&&_.push("#",Lc(oe,rg)),_.join("")};function ni(_){return new da(_)}function gA(_,G,oe){_.j=oe?Ed(G,!0):G,_.j&&(_.j=_.j.replace(/:$/,""))}function Qf(_,G){if(G){if(G=Number(G),isNaN(G)||0>G)throw Error("Bad port number "+G);_.s=G}else _.s=null}function eg(_,G,oe){G instanceof Zi?(_.i=G,$v(_.i,_.h)):(oe||(G=Lc(G,G0)),_.i=new Zi(G,_.h))}function fn(_,G,oe){_.i.set(G,oe)}function xA(_){return fn(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Ed(_,G){return _?G?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Lc(_,G,oe){return typeof _=="string"?(_=encodeURI(_).replace(G,vA),oe&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function vA(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var tg=/[#\/\?@]/g,Vv=/[#\?:]/g,Hv=/[#\?]/g,G0=/[#\?@]/g,rg=/#/g;function Zi(_,G){this.h=this.g=null,this.i=_||null,this.j=!!G}function Uc(_){_.g||(_.g=new Map,_.h=0,_.i&&Tl(_.i,function(G,oe){_.add(decodeURIComponent(G.replace(/\+/g," ")),oe)}))}t=Zi.prototype,t.add=function(_,G){Uc(this),this.i=null,_=Dr(this,_);var oe=this.g.get(_);return oe||this.g.set(_,oe=[]),oe.push(G),this.h+=1,this};function Sd(_,G){Uc(_),G=Dr(_,G),_.g.has(G)&&(_.i=null,_.h-=_.g.get(G).length,_.g.delete(G))}function Vf(_,G){return Uc(_),G=Dr(_,G),_.g.has(G)}t.forEach=function(_,G){Uc(this),this.g.forEach(function(oe,De){oe.forEach(function(bt){_.call(G,bt,De,this)},this)},this)},t.na=function(){Uc(this);const _=Array.from(this.g.values()),G=Array.from(this.g.keys()),oe=[];for(let De=0;De<G.length;De++){const bt=_[De];for(let Pt=0;Pt<bt.length;Pt++)oe.push(G[De])}return oe},t.V=function(_){Uc(this);let G=[];if(typeof _=="string")Vf(this,_)&&(G=G.concat(this.g.get(Dr(this,_))));else{_=Array.from(this.g.values());for(let oe=0;oe<_.length;oe++)G=G.concat(_[oe])}return G},t.set=function(_,G){return Uc(this),this.i=null,_=Dr(this,_),Vf(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[G]),this.h+=1,this},t.get=function(_,G){return _?(_=this.V(_),0<_.length?String(_[0]):G):G};function ng(_,G,oe){Sd(_,G),0<oe.length&&(_.i=null,_.g.set(Dr(_,G),p(oe)),_.h+=oe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],G=Array.from(this.g.keys());for(var oe=0;oe<G.length;oe++){var De=G[oe];const Pt=encodeURIComponent(String(De)),rr=this.V(De);for(De=0;De<rr.length;De++){var bt=Pt;rr[De]!==""&&(bt+="="+encodeURIComponent(String(rr[De]))),_.push(bt)}}return this.i=_.join("&")};function Dr(_,G){return G=String(G),_.j&&(G=G.toLowerCase()),G}function $v(_,G){G&&!_.j&&(Uc(_),_.i=null,_.g.forEach(function(oe,De){var bt=De.toLowerCase();De!=bt&&(Sd(this,De),ng(this,bt,oe))},_)),_.j=G}function Kv(_,G){const oe=new Lt;if(o.Image){const De=new Image;De.onload=f(ji,oe,"TestLoadImage: loaded",!0,G,De),De.onerror=f(ji,oe,"TestLoadImage: error",!1,G,De),De.onabort=f(ji,oe,"TestLoadImage: abort",!1,G,De),De.ontimeout=f(ji,oe,"TestLoadImage: timeout",!1,G,De),o.setTimeout(function(){De.ontimeout&&De.ontimeout()},1e4),De.src=_}else G(!1)}function Gv(_,G){const oe=new Lt,De=new AbortController,bt=setTimeout(()=>{De.abort(),ji(oe,"TestPingServer: timeout",!1,G)},1e4);fetch(_,{signal:De.signal}).then(Pt=>{clearTimeout(bt),Pt.ok?ji(oe,"TestPingServer: ok",!0,G):ji(oe,"TestPingServer: server error",!1,G)}).catch(()=>{clearTimeout(bt),ji(oe,"TestPingServer: error",!1,G)})}function ji(_,G,oe,De,bt){try{bt&&(bt.onload=null,bt.onerror=null,bt.onabort=null,bt.ontimeout=null),De(oe)}catch{}}function Fu(){this.g=new _e}function zv(_,G,oe){const De=oe||"";try{pA(_,function(bt,Pt){let rr=bt;u(bt)&&(rr=ke(bt)),G.push(De+Pt+"="+encodeURIComponent(rr))})}catch(bt){throw G.push(De+"type="+encodeURIComponent("_badmap")),bt}}function Hf(_){this.l=_.Ub||null,this.j=_.eb||!1}m(Hf,be),Hf.prototype.g=function(){return new Ou(this.l,this.j)},Hf.prototype.i=function(_){return function(){return _}}({});function Ou(_,G){At.call(this),this.D=_,this.o=G,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ou,At),t=Ou.prototype,t.open=function(_,G){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=G,this.readyState=1,yA(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const G={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(G.body=_),(this.D||o).fetch(new Request(this.A,G)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rc(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,yA(this)),this.g&&(this.readyState=3,yA(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$f(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function $f(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var G=_.value?_.value:new Uint8Array(0);(G=this.v.decode(G,{stream:!_.done}))&&(this.response=this.responseText+=G)}_.done?rc(this):yA(this),this.readyState==3&&$f(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,rc(this))},t.Qa=function(_){this.g&&(this.response=_,rc(this))},t.ga=function(){this.g&&rc(this)};function rc(_){_.readyState=4,_.l=null,_.j=null,_.v=null,yA(_)}t.setRequestHeader=function(_,G){this.u.append(_,G)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],G=this.h.entries();for(var oe=G.next();!oe.done;)oe=oe.value,_.push(oe[0]+": "+oe[1]),oe=G.next();return _.join(`\r
`)};function yA(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Qc(_){let G="";return T(_,function(oe,De){G+=De,G+=":",G+=oe,G+=`\r
`}),G}function z0(_,G,oe){e:{for(De in oe){var De=!1;break e}De=!0}De||(oe=Qc(oe),typeof _=="string"?oe!=null&&encodeURIComponent(String(oe)):fn(_,G,oe))}function ia(_){At.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ia,At);var q0=/^https?$/i,ag=["POST","PUT"];t=ia.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,G,oe,De){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);G=G?G.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?Qe(this.o):Qe(Re),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(G,String(_),!0),this.B=!1}catch(Pt){Vc(this,Pt);return}if(_=oe||"",oe=new Map(this.headers),De)if(Object.getPrototypeOf(De)===Object.prototype)for(var bt in De)oe.set(bt,De[bt]);else if(typeof De.keys=="function"&&typeof De.get=="function")for(const Pt of De.keys())oe.set(Pt,De.get(Pt));else throw Error("Unknown input type for opt_headers: "+String(De));De=Array.from(oe.keys()).find(Pt=>Pt.toLowerCase()=="content-type"),bt=o.FormData&&_ instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ag,G,void 0))||De||bt||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pt,rr]of oe)this.g.setRequestHeader(Pt,rr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bd(this),this.u=!0,this.g.send(_),this.u=!1}catch(Pt){Vc(this,Pt)}};function Vc(_,G){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=G,_.m=5,Kf(_),Id(_)}function Kf(_){_.A||(_.A=!0,He(_,"complete"),He(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,He(this,"complete"),He(this,"abort"),Id(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Id(this,!0)),ia.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bA(this):this.bb())},t.bb=function(){bA(this)};function bA(_){if(_.h&&typeof i<"u"&&(!_.v[1]||al(_)!=4||_.Z()!=2)){if(_.u&&al(_)==4)we(_.Ea,0,_);else if(He(_,"readystatechange"),al(_)==4){_.h=!1;try{const rr=_.Z();e:switch(rr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var G=!0;break e;default:G=!1}var oe;if(!(oe=G)){var De;if(De=rr===0){var bt=String(_.D).match(K0)[1]||null;!bt&&o.self&&o.self.location&&(bt=o.self.location.protocol.slice(0,-1)),De=!q0.test(bt?bt.toLowerCase():"")}oe=De}if(oe)He(_,"complete"),He(_,"success");else{_.m=6;try{var Pt=2<al(_)?_.g.statusText:""}catch{Pt=""}_.l=Pt+" ["+_.Z()+"]",Kf(_)}}finally{Id(_)}}}}function Id(_,G){if(_.g){Bd(_);const oe=_.g,De=_.v[0]?()=>{}:null;_.g=null,_.v=null,G||He(_,"ready");try{oe.onreadystatechange=De}catch{}}}function Bd(_){_.I&&(o.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function al(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<al(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var G=this.g.responseText;return _&&G.indexOf(_)==0&&(G=G.substring(_.length)),he(G)}};function W0(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function sg(_){const G={};_=(_.g&&2<=al(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let De=0;De<_.length;De++){if(y(_[De]))continue;var oe=B(_[De]);const bt=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const Pt=G[bt]||[];G[bt]=Pt,Pt.push(oe)}C(G,function(De){return De.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sl(_,G,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[_]||G}function Hc(_){this.Aa=0,this.i=[],this.j=new Lt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sl("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sl("baseRetryDelayMs",5e3,_),this.cb=sl("retryDelaySeedMs",1e4,_),this.Wa=sl("forwardChannelMaxRetries",2,_),this.wa=sl("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(_&&_.concurrentRequestLimit),this.Da=new Fu,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hc.prototype,t.la=8,t.G=1,t.connect=function(_,G,oe,De){at(0),this.W=_,this.H=G||{},oe&&De!==void 0&&(this.H.OSID=oe,this.H.OAID=De),this.F=this.X,this.I=$n(this,null,this.W),U(this)};function Gf(_){if(X0(_),_.G==3){var G=_.U++,oe=ni(_.I);if(fn(oe,"SID",_.K),fn(oe,"RID",G),fn(oe,"TYPE","terminate"),ot(_,oe),G=new Me(_,_.j,G),G.L=2,G.v=xA(ni(oe)),oe=!1,o.navigator&&o.navigator.sendBeacon)try{oe=o.navigator.sendBeacon(G.v.toString(),"")}catch{}!oe&&o.Image&&(new Image().src=G.v,oe=!0),oe||(G.g=xs(G.j,null),G.g.ea(G.v)),G.F=Date.now(),lt(G)}rs(_)}function $c(_){_.g&&(pr(_),_.g.cancel(),_.g=null)}function X0(_){$c(_),_.u&&(o.clearTimeout(_.u),_.u=null),Rr(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&o.clearTimeout(_.s),_.s=null)}function U(_){if(!Bs(_.h)&&!_.s){_.s=!0;var G=_.Ga;ce||pe(),de||(ce(),de=!0),X.add(G,_),_.B=0}}function ge(_,G){return ec(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=G.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=kt(h(_.Ga,_,G),hn(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const bt=new Me(this,this.j,_);let Pt=this.o;if(this.S&&(Pt?(Pt=E(Pt),O(Pt,this.S)):Pt=this.S),this.m!==null||this.O||(bt.H=Pt,Pt=null),this.P)e:{for(var G=0,oe=0;oe<this.i.length;oe++){t:{var De=this.i[oe];if("__data__"in De.map&&(De=De.map.__data__,typeof De=="string")){De=De.length;break t}De=void 0}if(De===void 0)break;if(G+=De,4096<G){G=oe;break e}if(G===4096||oe===this.i.length-1){G=oe+1;break e}}G=1e3}else G=1e3;G=vt(this,bt,G),oe=ni(this.I),fn(oe,"RID",_),fn(oe,"CVER",22),this.D&&fn(oe,"X-HTTP-Session-Id",this.D),ot(this,oe),Pt&&(this.O?G="headers="+encodeURIComponent(String(Qc(Pt)))+"&"+G:this.m&&z0(oe,this.m,Pt)),tc(this.h,bt),this.Ua&&fn(oe,"TYPE","init"),this.P?(fn(oe,"$req",G),fn(oe,"SID","null"),bt.T=!0,rt(bt,oe,null)):rt(bt,oe,G),this.G=2}}else this.G==3&&(_?ze(this,_):this.i.length==0||Bs(this.h)||ze(this))};function ze(_,G){var oe;G?oe=G.l:oe=_.U++;const De=ni(_.I);fn(De,"SID",_.K),fn(De,"RID",oe),fn(De,"AID",_.T),ot(_,De),_.m&&_.o&&z0(De,_.m,_.o),oe=new Me(_,_.j,oe,_.B+1),_.m===null&&(oe.H=_.o),G&&(_.i=G.D.concat(_.i)),G=vt(_,oe,1e3),oe.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),tc(_.h,oe),rt(oe,De,G)}function ot(_,G){_.H&&T(_.H,function(oe,De){fn(G,De,oe)}),_.l&&pA({},function(oe,De){fn(G,De,oe)})}function vt(_,G,oe){oe=Math.min(_.i.length,oe);var De=_.l?h(_.l.Na,_.l,_):null;e:{var bt=_.i;let Pt=-1;for(;;){const rr=["count="+oe];Pt==-1?0<oe?(Pt=bt[0].g,rr.push("ofs="+Pt)):Pt=0:rr.push("ofs="+Pt);let vn=!0;for(let ss=0;ss<oe;ss++){let ln=bt[ss].g;const Tn=bt[ss].map;if(ln-=Pt,0>ln)Pt=Math.max(0,bt[ss].g-100),vn=!1;else try{zv(Tn,rr,"req"+ln+"_")}catch{De&&De(Tn)}}if(vn){De=rr.join("&");break e}}}return _=_.i.splice(0,oe),G.D=_,De}function Ut(_){if(!_.g&&!_.u){_.Y=1;var G=_.Fa;ce||pe(),de||(ce(),de=!0),X.add(G,_),_.v=0}}function $t(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=kt(h(_.Fa,_),hn(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Nr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=kt(h(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),$c(this),Nr(this))};function pr(_){_.A!=null&&(o.clearTimeout(_.A),_.A=null)}function Nr(_){_.g=new Me(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var G=ni(_.qa);fn(G,"RID","rpc"),fn(G,"SID",_.K),fn(G,"AID",_.T),fn(G,"CI",_.F?"0":"1"),!_.F&&_.ja&&fn(G,"TO",_.ja),fn(G,"TYPE","xmlhttp"),ot(_,G),_.m&&_.o&&z0(G,_.m,_.o),_.L&&(_.g.I=_.L);var oe=_.g;_=_.ia,oe.L=1,oe.v=xA(ni(G)),oe.m=null,oe.P=!0,Ze(oe,_)}t.Za=function(){this.C!=null&&(this.C=null,$c(this),$t(this),at(19))};function Rr(_){_.C!=null&&(o.clearTimeout(_.C),_.C=null)}function Kr(_,G){var oe=null;if(_.g==G){Rr(_),pr(_),_.g=null;var De=2}else if(Ta(_.h,G))oe=G.D,Uf(_.h,G),De=1;else return;if(_.G!=0){if(G.o)if(De==1){oe=G.m?G.m.length:0,G=Date.now()-G.F;var bt=_.B;De=Ce(),He(De,new wt(De,oe)),U(_)}else Ut(_);else if(bt=G.s,bt==3||bt==0&&0<G.X||!(De==1&&ge(_,G)||De==2&&$t(_)))switch(oe&&0<oe.length&&(G=_.h,G.i=G.i.concat(oe)),bt){case 1:Dn(_,5);break;case 4:Dn(_,10);break;case 3:Dn(_,6);break;default:Dn(_,2)}}}function hn(_,G){let oe=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(oe*=2),oe*G}function Dn(_,G){if(_.j.info("Error code "+G),G==2){var oe=h(_.fb,_),De=_.Xa;const bt=!De;De=new da(De||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gA(De,"https"),xA(De),bt?Kv(De.toString(),oe):Gv(De.toString(),oe)}else at(2);_.G=0,_.l&&_.l.sa(G),rs(_),X0(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function rs(_){if(_.G=0,_.ka=[],_.l){const G=ya(_.h);(G.length!=0||_.i.length!=0)&&(g(_.ka,G),g(_.ka,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.ra()}}function $n(_,G,oe){var De=oe instanceof da?ni(oe):new da(oe);if(De.g!="")G&&(De.g=G+"."+De.g),Qf(De,De.s);else{var bt=o.location;De=bt.protocol,G=G?G+"."+bt.hostname:bt.hostname,bt=+bt.port;var Pt=new da(null);De&&gA(Pt,De),G&&(Pt.g=G),bt&&Qf(Pt,bt),oe&&(Pt.l=oe),De=Pt}return oe=_.D,G=_.ya,oe&&G&&fn(De,oe,G),fn(De,"VER",_.la),ot(_,De),De}function xs(_,G,oe){if(G&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return G=_.Ca&&!_.pa?new ia(new Hf({eb:oe})):new ia(_.pa),G.Ha(_.J),G}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ns(){}t=ns.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vs(){}vs.prototype.g=function(_,G){return new as(_,G)};function as(_,G){At.call(this),this.g=new Hc(G),this.l=_,this.h=G&&G.messageUrlParams||null,_=G&&G.messageHeaders||null,G&&G.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=G&&G.initMessageHeaders||null,G&&G.messageContentType&&(_?_["X-WebChannel-Content-Type"]=G.messageContentType:_={"X-WebChannel-Content-Type":G.messageContentType}),G&&G.va&&(_?_["X-WebChannel-Client-Profile"]=G.va:_={"X-WebChannel-Client-Profile":G.va}),this.g.S=_,(_=G&&G.Sb)&&!y(_)&&(this.g.m=_),this.v=G&&G.supportsCrossDomainXhr||!1,this.u=G&&G.sendRawJson||!1,(G=G&&G.httpSessionIdParam)&&!y(G)&&(this.g.D=G,_=this.h,_!==null&&G in _&&(_=this.h,G in _&&delete _[G])),this.j=new Gc(this)}m(as,At),as.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},as.prototype.close=function(){Gf(this.g)},as.prototype.o=function(_){var G=this.g;if(typeof _=="string"){var oe={};oe.__data__=_,_=oe}else this.u&&(oe={},oe.__data__=ke(_),_=oe);G.i.push(new sa(G.Ya++,_)),G.G==3&&U(G)},as.prototype.N=function(){this.g.l=null,delete this.j,Gf(this.g),delete this.g,as.aa.N.call(this)};function Pl(_){st.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var G=_.__sm__;if(G){e:{for(const oe in G){_=oe;break e}_=void 0}(this.i=_)&&(_=this.i,G=G!==null&&_ in G?G[_]:void 0),this.data=G}else this.data=_}m(Pl,st);function Kc(){yt.call(this),this.status=1}m(Kc,yt);function Gc(_){this.g=_}m(Gc,ns),Gc.prototype.ua=function(){He(this.g,"a")},Gc.prototype.ta=function(_){He(this.g,new Pl(_))},Gc.prototype.sa=function(_){He(this.g,new Kc)},Gc.prototype.ra=function(){He(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,as.prototype.send=as.prototype.o,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,GX=function(){return new vs},KX=function(){return Ce()},$X=Dt,RP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,cC=fe,Te.COMPLETE="complete",HX=Te,$e.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",At.prototype.listen=At.prototype.K,Z1=$e,ia.prototype.listenOnce=ia.prototype.L,ia.prototype.getLastError=ia.prototype.Ka,ia.prototype.getLastErrorCode=ia.prototype.Ba,ia.prototype.getStatus=ia.prototype.Z,ia.prototype.getResponseJson=ia.prototype.Oa,ia.prototype.getResponseText=ia.prototype.oa,ia.prototype.send=ia.prototype.ea,ia.prototype.setWithCredentials=ia.prototype.Ha,VX=ia}).apply(typeof uN<"u"?uN:typeof self<"u"?self:typeof window<"u"?window:{});const zL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new cO("@firebase/firestore");function Mg(){return cp.logLevel}function Jt(t,...e){if(cp.logLevel<=gn.DEBUG){const r=e.map(NO);cp.debug(`Firestore (${xv}): ${t}`,...r)}}function yl(t,...e){if(cp.logLevel<=gn.ERROR){const r=e.map(NO);cp.error(`Firestore (${xv}): ${t}`,...r)}}function h0(t,...e){if(cp.logLevel<=gn.WARN){const r=e.map(NO);cp.warn(`Firestore (${xv}): ${t}`,...r)}}function NO(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t="Unexpected state"){const e=`FIRESTORE (${xv}) INTERNAL ASSERTION FAILED: `+t;throw yl(e),new Error(e)}function Sr(t,e){t||wr()}function $r(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ar extends If{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(mo.UNAUTHENTICATED))}shutdown(){}}class fpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class hpe{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Sr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new od;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new od,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new od)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Sr(typeof n.accessToken=="string"),new zX(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Sr(e===null||typeof e=="string"),new mo(e)}}class mpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ppe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new mpe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gpe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Sr(this.o===void 0);const n=s=>{s.error!=null&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Jt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Sr(typeof r.token=="string"),this.R=r.token,new gpe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=vpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function Yr(t,e){return t<e?-1:t>e?1:0}function Vx(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function WX(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ar(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ar(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ar(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ar(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Xt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yr(this.nanoseconds,e.nanoseconds):Yr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pr(e)}static min(){return new Pr(new Xt(0,0))}static max(){return new Pr(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,r,n){r===void 0?r=0:r>e.length&&wr(),n===void 0?n=e.length-r:n>e.length-r&&wr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return N2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof N2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class kn extends N2{construct(e,r,n){return new kn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ar(Mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new kn(r)}static emptyPath(){return new kn([])}}const ype=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xa extends N2{construct(e,r,n){return new Xa(e,r,n)}static isValidIdentifier(e){return ype.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xa(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new ar(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new ar(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ar(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new ar(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xa(r)}static emptyPath(){return new Xa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.path=e}static fromPath(e){return new ur(kn.fromString(e))}static fromName(e){return new ur(kn.fromString(e).popFirst(5))}static empty(){return new ur(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return kn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ur(new kn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function MP(t){return t.fields.find(e=>e.kind===2)}function fm(t){return t.fields.filter(e=>e.kind!==2)}dE.UNKNOWN_ID=-1;class uC{constructor(e,r){this.fieldPath=e,this.kind=r}}class _2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new _2(0,Tc.min())}}function bpe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Pr.fromTimestamp(n===1e9?new Xt(r+1,0):new Xt(r,n));return new Tc(a,ur.empty(),e)}function XX(t){return new Tc(t.readTime,t.key,-1)}class Tc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Tc(Pr.min(),ur.empty(),-1)}static max(){return new Tc(Pr.max(),ur.empty(),-1)}}function CO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ur.comparator(t.documentKey,e.documentKey),r!==0?r:Yr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){if(t.code!==Mt.FAILED_PRECONDITION||t.message!==YX)throw t;Jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Bt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Bt?r:Bt.resolve(r)}catch(r){return Bt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Bt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Bt.reject(r)}static resolve(e){return new Bt((r,n)=>{r(e)})}static reject(e){return new Bt((r,n)=>{n(e)})}static waitFor(e){return new Bt((r,n)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=Bt.resolve(!1);for(const n of e)r=r.next(a=>a?Bt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Bt((n,a)=>{const s=e.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new Bt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new od,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new By(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=EO(n.target.error);this.V.reject(new By(e,a))}}static open(e,r,n,a){try{return new NI(r,e.transaction(a,n))}catch(s){throw new By(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Jt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Npe(r)}}class s0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,s0.S(Ci())===12.2&&yl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Jt("SimpleDb","Removing database:",e),ym(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ZW())return!1;if(s0.v())return!0;const e=Ci(),r=s0.S(e),n=0<r&&r<10,a=ZX(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Jt("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new By(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new ar(Mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new ar(Mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new By(e,i))},a.onupgradeneeded=s=>{Jt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{Jt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=NI.open(this.db,e,s?"readonly":"readwrite",n),c=a(o).next(u=>(o.g(),u)).catch(u=>(o.abort(u),Bt.reject(u))).toPromise();return c.catch(()=>{}),await o.m,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&i<3;if(Jt("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZX(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class wpe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ym(this.B.delete())}}class By extends ar{constructor(e,r){super(Mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function D0(t){return t.name==="IndexedDbTransactionError"}class Npe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Jt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Jt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ym(n)}add(e){return Jt("SimpleDb","ADD",this.store.name,e,e),ym(this.store.add(e))}get(e){return ym(this.store.get(e)).next(r=>(r===void 0&&(r=null),Jt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Jt("SimpleDb","DELETE",this.store.name,e),ym(this.store.delete(e))}count(){return Jt("SimpleDb","COUNT",this.store.name),ym(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Bt((i,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(o,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Bt((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){Jt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Bt((n,a)=>{r.onerror=s=>{const i=EO(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():n()}):n()}})}W(e,r){const n=[];return new Bt((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void a();const c=new wpe(o),u=r(o.primaryKey,o.value,c);if(u instanceof Bt){const d=u.catch(A=>(c.done(),Bt.reject(A)));n.push(d)}c.isDone?a():c.K===null?o.continue():o.continue(c.K)}}).next(()=>Bt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ym(t){return new Bt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=EO(n.target.error);r(a)}})}let qL=!1;function EO(t){const e=s0.S(Ci());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ar("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qL||(qL=!0,setTimeout(()=>{throw n},0)),n}}return t}class _pe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Jt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Jt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){D0(r)?Jt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Dp(r)}await this.X(6e4)})}}class Cpe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Bt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return Jt("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(o=>{a-=o,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(o=>(Jt("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=XX(s);CO(i,n)>0&&(n=i)}),new Tc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mu.oe=-1;function Fb(t){return t==null}function C2(t){return t===0&&1/t==-1/0}function Epe(t){return typeof t=="number"&&Number.isInteger(t)&&!C2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=WL(e)),e=Spe(t.get(r),e);return WL(e)}function Spe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function WL(t){return t+""}function Gd(t){const e=t.length;if(Sr(e>=2),e===2)return Sr(t.charAt(0)===""&&t.charAt(1)===""),kn.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&wr(),t.charAt(i+1)){case"":const o=t.substring(s,i);let c;a.length===0?c=o:(a+=o,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:wr()}s=i+2}return new kn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,e){return[t,Nl(e)]}function eY(t,e,r){return[t,Nl(e),r]}const Ipe={},Bpe=["prefixPath","collectionGroup","readTime","documentId"],Tpe=["prefixPath","collectionGroup","documentId"],Ppe=["collectionGroup","readTime","prefixPath","documentId"],jpe=["canonicalId","targetId"],kpe=["targetId","path"],Fpe=["path","targetId"],Ope=["collectionId","parent"],Dpe=["indexId","uid"],Rpe=["uid","sequenceNumber"],Mpe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lpe=["indexId","uid","orderedDocumentKey"],Upe=["userId","collectionPath","documentId"],Qpe=["userId","collectionPath","largestBatchId"],Vpe=["userId","collectionGroup","largestBatchId"],tY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hpe=[...tY,"documentOverlays"],rY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nY=rY,SO=[...nY,"indexConfiguration","indexState","indexEntries"],$pe=SO,Kpe=[...SO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP extends JX{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Si(t,e){const r=$r(t);return s0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Rp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function aY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r){this.comparator=e,this.root=r||po.EMPTY}insert(e,r){return new es(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,po.BLACK,null,null))}remove(e){return new es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,po.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dN(this.root,e,this.comparator,!1)}getReverseIterator(){return new dN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dN(this.root,e,this.comparator,!0)}}class dN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class po{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??po.RED,this.left=a??po.EMPTY,this.right=s??po.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new po(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return po.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return po.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wr();const e=this.left.check();if(e!==this.right.check())throw wr();return e+(this.isRed()?0:1)}}po.EMPTY=null,po.RED=!0,po.BLACK=!1;po.EMPTY=new class{constructor(){this.size=0}get key(){throw wr()}get value(){throw wr()}get color(){throw wr()}get left(){throw wr()}get right(){throw wr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new po(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e,this.data=new es(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new JL(this.data.getIterator())}getIteratorFrom(e){return new JL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ua(this.comparator);return r.data=e,r}}class JL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ug(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.fields=e,e.sort(Xa.comparator)}static empty(){return new Hl([])}unionWith(e){let r=new ua(Xa.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Hl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Vx(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sY("Invalid base64 string: "+s):s}}(e);return new Ks(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new Ks(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const Gpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pf(t){if(Sr(!!t),typeof t=="string"){let e=0;const r=Gpe.exec(t);if(Sr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:za(t.seconds),nanos:za(t.nanos)}}function za(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function m0(t){return typeof t=="string"?Ks.fromBase64String(t):Ks.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function BO(t){const e=t.mapValue.fields.__previous_value__;return IO(e)?BO(e):e}function E2(t){const e=pf(t.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{constructor(e,r,n,a,s,i,o,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class p0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new p0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof p0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AC={nullValue:"NULL_VALUE"};function up(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?IO(t)?4:iY(t)?9007199254740991:_I(t)?10:11:wr()}function nA(t,e){if(t===e)return!0;const r=up(t);if(r!==up(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return E2(t).isEqual(E2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=pf(a.timestampValue),o=pf(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return m0(a.bytesValue).isEqual(m0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return za(a.geoPointValue.latitude)===za(s.geoPointValue.latitude)&&za(a.geoPointValue.longitude)===za(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return za(a.integerValue)===za(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=za(a.doubleValue),o=za(s.doubleValue);return i===o?C2(i)===C2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Vx(t.arrayValue.values||[],e.arrayValue.values||[],nA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(YL(i)!==YL(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!nA(i[c],o[c])))return!1;return!0}(t,e);default:return wr()}}function S2(t,e){return(t.values||[]).find(r=>nA(r,e))!==void 0}function g0(t,e){if(t===e)return 0;const r=up(t),n=up(e);if(r!==n)return Yr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Yr(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=za(s.integerValue||s.doubleValue),c=za(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return ZL(t.timestampValue,e.timestampValue);case 4:return ZL(E2(t),E2(e));case 5:return Yr(t.stringValue,e.stringValue);case 6:return function(s,i){const o=m0(s),c=m0(i);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Yr(o[u],c[u]);if(d!==0)return d}return Yr(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Yr(za(s.latitude),za(i.latitude));return o!==0?o:Yr(za(s.longitude),za(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,c,u,d;const A=s.fields||{},h=i.fields||{},f=(o=A.value)===null||o===void 0?void 0:o.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=Yr(((u=f==null?void 0:f.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:eU(f,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Uh.mapValue&&i===Uh.mapValue)return 0;if(s===Uh.mapValue)return 1;if(i===Uh.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let A=0;A<c.length&&A<d.length;++A){const h=Yr(c[A],d[A]);if(h!==0)return h;const f=g0(o[c[A]],u[d[A]]);if(f!==0)return f}return Yr(c.length,d.length)}(t.mapValue,e.mapValue);default:throw wr()}}function ZL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Yr(t,e);const r=pf(t),n=pf(e),a=Yr(r.seconds,n.seconds);return a!==0?a:Yr(r.nanos,n.nanos)}function eU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=g0(r[a],n[a]);if(s)return s}return Yr(r.length,n.length)}function Hx(t){return UP(t)}function UP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=pf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return m0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ur.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=UP(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${UP(r.fields[i])}`;return a+"}"}(t.mapValue):wr()}function I2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function QP(t){return!!t&&"integerValue"in t}function B2(t){return!!t&&"arrayValue"in t}function tU(t){return!!t&&"nullValue"in t}function rU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fC(t){return!!t&&"mapValue"in t}function _I(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Ty(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ty(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ty(t.arrayValue.values[r]);return e}return Object.assign({},t)}function iY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const oY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qpe(t){return"nullValue"in t?AC:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?I2(p0.empty(),ur.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?_I(t)?oY:{mapValue:{}}:wr()}function Wpe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?I2(p0.empty(),ur.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?oY:"mapValue"in t?_I(t)?{mapValue:{}}:Uh:wr()}function nU(t,e){const r=g0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function aU(t,e){const r=g0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.value=e}static empty(){return new yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!fC(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ty(r)}setAll(e){let r=Xa.emptyPath(),n={},a=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Ty(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());fC(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return nA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];fC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Rp(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new yo(Ty(this.value))}}function lY(t){const e=[];return Rp(t.fields,(r,n)=>{const a=new Xa([r]);if(fC(n)){const s=lY(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new Hl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,r,n,a,s,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Wa(e,0,Pr.min(),Pr.min(),Pr.min(),yo.empty(),0)}static newFoundDocument(e,r,n,a){return new Wa(e,1,r,Pr.min(),n,a,0)}static newNoDocument(e,r){return new Wa(e,2,r,Pr.min(),Pr.min(),yo.empty(),0)}static newUnknownDocument(e,r){return new Wa(e,3,r,Pr.min(),Pr.min(),yo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Pr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,r){this.position=e,this.inclusive=r}}function sU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=ur.comparator(ur.fromName(i.referenceValue),r.key):n=g0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function iU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!nA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,r="asc"){this.field=e,this.dir=r}}function Xpe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{}class xn extends cY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Ype(e,r,n):r==="array-contains"?new ege(e,n):r==="in"?new mY(e,n):r==="not-in"?new tge(e,n):r==="array-contains-any"?new rge(e,n):new xn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Jpe(e,n):new Zpe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(g0(r,this.value)):r!==null&&up(this.value)===up(r)&&this.matchesComparison(g0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends cY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new ta(e,r)}matches(e){return Kx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kx(t){return t.op==="and"}function VP(t){return t.op==="or"}function TO(t){return uY(t)&&Kx(t)}function uY(t){for(const e of t.filters)if(e instanceof ta)return!1;return!0}function HP(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+Hx(t.value);if(TO(t))return t.filters.map(e=>HP(e)).join(",");{const e=t.filters.map(r=>HP(r)).join(",");return`${t.op}(${e})`}}function dY(t,e){return t instanceof xn?function(n,a){return a instanceof xn&&n.op===a.op&&n.field.isEqual(a.field)&&nA(n.value,a.value)}(t,e):t instanceof ta?function(n,a){return a instanceof ta&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&dY(i,a.filters[o]),!0):!1}(t,e):void wr()}function AY(t,e){const r=t.filters.concat(e);return ta.create(r,t.op)}function fY(t){return t instanceof xn?function(r){return`${r.field.canonicalString()} ${r.op} ${Hx(r.value)}`}(t):t instanceof ta?function(r){return r.op.toString()+" {"+r.getFilters().map(fY).join(" ,")+"}"}(t):"Filter"}class Ype extends xn{constructor(e,r,n){super(e,r,n),this.key=ur.fromName(n.referenceValue)}matches(e){const r=ur.comparator(e.key,this.key);return this.matchesComparison(r)}}class Jpe extends xn{constructor(e,r){super(e,"in",r),this.keys=hY("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Zpe extends xn{constructor(e,r){super(e,"not-in",r),this.keys=hY("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function hY(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ur.fromName(n.referenceValue))}class ege extends xn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return B2(r)&&S2(r.arrayValue,this.value)}}class mY extends xn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&S2(this.value.arrayValue,r)}}class tge extends xn{constructor(e,r){super(e,"not-in",r)}matches(e){if(S2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!S2(this.value.arrayValue,r)}}class rge extends xn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!B2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>S2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nge{constructor(e,r=null,n=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function $P(t,e=null,r=[],n=[],a=null,s=null,i=null){return new nge(t,e,r,n,a,s,i)}function dp(t){const e=$r(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>HP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Fb(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Hx(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Hx(n)).join(",")),e.ue=r}return e.ue}function Ob(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Xpe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!dY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iU(t.startAt,e.startAt)&&iU(t.endAt,e.endAt)}function AE(t){return ur.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fE(t,e){return t.filters.filter(r=>r instanceof xn&&r.field.isEqual(e))}function oU(t,e,r){let n=AC,a=!0;for(const s of fE(t,e)){let i=AC,o=!0;switch(s.op){case"<":case"<=":i=qpe(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,o=!1;break;case"!=":case"not-in":i=AC}nU({value:n,inclusive:a},{value:i,inclusive:o})<0&&(n=i,a=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];nU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function lU(t,e,r){let n=Uh,a=!0;for(const s of fE(t,e)){let i=Uh,o=!0;switch(s.op){case">=":case">":i=Wpe(s.value),o=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,o=!1;break;case"!=":case"not-in":i=Uh}aU({value:n,inclusive:a},{value:i,inclusive:o})>0&&(n=i,a=o)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];aU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function age(t,e,r,n,a,s,i,o){return new vv(t,e,r,n,a,s,i,o)}function Db(t){return new vv(t)}function cU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pY(t){return t.collectionGroup!==null}function Py(t){const e=$r(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new ua(Xa.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new T2(s,n))}),r.has(Xa.keyField().canonicalString())||e.ce.push(new T2(Xa.keyField(),n))}return e.ce}function bu(t){const e=$r(t);return e.le||(e.le=sge(e,Py(t))),e.le}function sge(t,e){if(t.limitType==="F")return $P(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new T2(a.field,s)});const r=t.endAt?new $x(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new $x(t.startAt.position,t.startAt.inclusive):null;return $P(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function KP(t,e){const r=t.filters.concat([e]);return new vv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function hE(t,e,r){return new vv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function CI(t,e){return Ob(bu(t),bu(e))&&t.limitType===e.limitType}function gY(t){return`${dp(bu(t))}|lt:${t.limitType}`}function Lg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>fY(a)).join(", ")}]`),Fb(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Hx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Hx(a)).join(",")),`Target(${n})`}(bu(t))}; limitType=${t.limitType})`}function Rb(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ur.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Py(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=sU(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,Py(n),a)||n.endAt&&!function(i,o,c){const u=sU(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,Py(n),a))}(t,e)}function ige(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xY(t){return(e,r)=>{let n=!1;for(const a of Py(t)){const s=oge(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function oge(t,e,r){const n=t.field.isKeyField()?ur.comparator(e.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?g0(c,u):wr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Rp(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return aY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lge=new es(ur.comparator);function _c(){return lge}const vY=new es(ur.comparator);function ey(...t){let e=vY;for(const r of t)e=e.insert(r.key,r);return e}function yY(t){let e=vY;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function zd(){return jy()}function bY(){return jy()}function jy(){return new R0(t=>t.toString(),(t,e)=>t.isEqual(e))}const cge=new es(ur.comparator),uge=new ua(ur.comparator);function sn(...t){let e=uge;for(const r of t)e=e.add(r);return e}const dge=new ua(Yr);function Age(){return dge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:C2(e)?"-0":e}}function wY(t){return{integerValue:""+t}}function fge(t,e){return Epe(e)?wY(e):PO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this._=void 0}}function hge(t,e,r){return t instanceof P2?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&IO(s)&&(s=BO(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Gx?_Y(t,e):t instanceof zx?CY(t,e):function(a,s){const i=NY(a,s),o=uU(i)+uU(a.Pe);return QP(i)&&QP(a.Pe)?wY(o):PO(a.serializer,o)}(t,e)}function mge(t,e,r){return t instanceof Gx?_Y(t,e):t instanceof zx?CY(t,e):r}function NY(t,e){return t instanceof j2?function(n){return QP(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class P2 extends EI{}class Gx extends EI{constructor(e){super(),this.elements=e}}function _Y(t,e){const r=EY(e);for(const n of t.elements)r.some(a=>nA(a,n))||r.push(n);return{arrayValue:{values:r}}}class zx extends EI{constructor(e){super(),this.elements=e}}function CY(t,e){let r=EY(e);for(const n of t.elements)r=r.filter(a=>!nA(a,n));return{arrayValue:{values:r}}}class j2 extends EI{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function uU(t){return za(t.integerValue||t.doubleValue)}function EY(t){return B2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pge{constructor(e,r){this.field=e,this.transform=r}}function gge(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Gx&&a instanceof Gx||n instanceof zx&&a instanceof zx?Vx(n.elements,a.elements,nA):n instanceof j2&&a instanceof j2?nA(n.Pe,a.Pe):n instanceof P2&&a instanceof P2}(t.transform,e.transform)}class xge{constructor(e,r){this.version=e,this.transformResults=r}}class Ya{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ya}static exists(e){return new Ya(void 0,e)}static updateTime(e){return new Ya(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hC(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class SI{}function SY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bv(t.key,Ya.none()):new yv(t.key,t.data,Ya.none());{const r=t.data,n=yo.empty();let a=new ua(Xa.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Bf(t.key,n,new Hl(a.toArray()),Ya.none())}}function vge(t,e,r){t instanceof yv?function(a,s,i){const o=a.value.clone(),c=AU(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Bf?function(a,s,i){if(!hC(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=AU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(IY(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function ky(t,e,r,n){return t instanceof yv?function(s,i,o,c){if(!hC(s.precondition,i))return o;const u=s.value.clone(),d=fU(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Bf?function(s,i,o,c){if(!hC(s.precondition,i))return o;const u=fU(s.fieldTransforms,c,i),d=i.data;return d.setAll(IY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(t,e,r,n):function(s,i,o){return hC(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function yge(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=NY(n.transform,a||null);s!=null&&(r===null&&(r=yo.empty()),r.set(n.field,s))}return r||null}function dU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Vx(n,a,(s,i)=>gge(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yv extends SI{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bf extends SI{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IY(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function AU(t,e,r){const n=new Map;Sr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);n.set(s.field,mge(i,o,r[a]))}return n}function fU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,hge(s,i,e))}return n}class bv extends SI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jO extends SI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&vge(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ky(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ky(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=bY();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=SY(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Pr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),sn())}isEqual(e){return this.batchId===e.batchId&&Vx(this.mutations,e.mutations,(r,n)=>dU(r,n))&&Vx(this.baseMutations,e.baseMutations,(r,n)=>dU(r,n))}}class FO{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Sr(e.mutations.length===n.length);let a=function(){return cge}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new FO(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs,wn;function BY(t){switch(t){default:return wr();case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0}}function TY(t){if(t===void 0)return yl("GRPC error has no .code"),Mt.UNKNOWN;switch(t){case qs.OK:return Mt.OK;case qs.CANCELLED:return Mt.CANCELLED;case qs.UNKNOWN:return Mt.UNKNOWN;case qs.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case qs.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case qs.INTERNAL:return Mt.INTERNAL;case qs.UNAVAILABLE:return Mt.UNAVAILABLE;case qs.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case qs.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case qs.NOT_FOUND:return Mt.NOT_FOUND;case qs.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case qs.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case qs.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case qs.ABORTED:return Mt.ABORTED;case qs.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case qs.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case qs.DATA_LOSS:return Mt.DATA_LOSS;default:return wr()}}(wn=qs||(qs={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nge=new Lm([4294967295,4294967295],0);function hU(t){const e=wge().encode(t),r=new QX;return r.update(e),new Uint8Array(r.digest())}function mU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lm([r,n],0),new Lm([a,s],0)]}class DO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ty(`Invalid padding: ${r}`);if(n<0)throw new ty(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ty(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ty(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Lm.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Lm.fromNumber(n)));return a.compare(Nge)===1&&(a=new Lm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=hU(e),[n,a]=mU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new DO(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const r=hU(e),[n,a]=mU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ty extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Mb.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new II(Pr.min(),a,new es(Yr),_c(),sn())}}class Mb{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Mb(n,r,sn(),sn(),sn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class PY{constructor(e,r){this.targetId=e,this.me=r}}class jY{constructor(e,r,n=Ks.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class pU{constructor(){this.fe=0,this.ge=xU(),this.pe=Ks.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=sn(),r=sn(),n=sn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:wr()}}),new Mb(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=xU()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Sr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _ge{constructor(e){this.Le=e,this.Be=new Map,this.ke=_c(),this.qe=gU(),this.Qe=new es(Yr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(AE(s))if(n===0){const i=new ur(s.path);this.Ue(r,i,Wa.newNoDocument(i,Pr.min()))}else Sr(n===1);else{const i=this.Ye(r);if(i!==n){const o=this.Ze(e),c=o?this.Xe(o,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=m0(n).toUint8Array()}catch(c){if(c instanceof sY)return h0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new DO(i,a,s)}catch(c){return h0(c instanceof ty?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const o=this.Je(i);if(o){if(s.current&&AE(o.target)){const c=new ur(o.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,Wa.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=sn();this.qe.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new II(e,r,this.Qe,this.ke,n);return this.ke=_c(),this.qe=gU(),this.Qe=new es(Yr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new pU,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new ua(Yr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Jt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pU),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function gU(){return new es(ur.comparator)}function xU(){return new es(ur.comparator)}const Cge={asc:"ASCENDING",desc:"DESCENDING"},Ege={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sge={and:"AND",or:"OR"};class Ige{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function GP(t,e){return t.useProto3Json||Fb(e)?e:{value:e}}function qx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bge(t,e){return qx(t,e.toTimestamp())}function qi(t){return Sr(!!t),Pr.fromTimestamp(function(r){const n=pf(r);return new Xt(n.seconds,n.nanos)}(t))}function RO(t,e){return zP(t,e).canonicalString()}function zP(t,e){const r=function(a){return new kn(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function FY(t){const e=kn.fromString(t);return Sr(HY(e)),e}function k2(t,e){return RO(t.databaseId,e.path)}function ef(t,e){const r=FY(e);if(r.get(1)!==t.databaseId.projectId)throw new ar(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ar(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ur(RY(r))}function OY(t,e){return RO(t.databaseId,e)}function DY(t){const e=FY(t);return e.length===4?kn.emptyPath():RY(e)}function qP(t){return new kn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RY(t){return Sr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vU(t,e,r){return{name:k2(t,e),fields:r.value.mapValue.fields}}function Tge(t,e,r){const n=ef(t,e.name),a=qi(e.updateTime),s=e.createTime?qi(e.createTime):Pr.min(),i=new yo({mapValue:{fields:e.fields}}),o=Wa.newFoundDocument(n,a,s,i);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function Pge(t,e){return"found"in e?function(n,a){Sr(!!a.found),a.found.name,a.found.updateTime;const s=ef(n,a.found.name),i=qi(a.found.updateTime),o=a.found.createTime?qi(a.found.createTime):Pr.min(),c=new yo({mapValue:{fields:a.found.fields}});return Wa.newFoundDocument(s,i,o,c)}(t,e):"missing"in e?function(n,a){Sr(!!a.missing),Sr(!!a.readTime);const s=ef(n,a.missing),i=qi(a.readTime);return Wa.newNoDocument(s,i)}(t,e):wr()}function jge(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:wr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Sr(d===void 0||typeof d=="string"),Ks.fromBase64String(d||"")):(Sr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ks.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?Mt.UNKNOWN:TY(u.code);return new ar(d,u.message||"")}(i);r=new jY(n,a,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ef(t,n.document.name),s=qi(n.document.updateTime),i=n.document.createTime?qi(n.document.createTime):Pr.min(),o=new yo({mapValue:{fields:n.document.fields}}),c=Wa.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new mC(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ef(t,n.document),s=n.readTime?qi(n.readTime):Pr.min(),i=Wa.newNoDocument(a,s),o=n.removedTargetIds||[];r=new mC([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ef(t,n.document),s=n.removedTargetIds||[];r=new mC([],s,a,null)}else{if(!("filter"in e))return wr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new bge(a,s),o=n.targetId;r=new PY(o,i)}}return r}function F2(t,e){let r;if(e instanceof yv)r={update:vU(t,e.key,e.value)};else if(e instanceof bv)r={delete:k2(t,e.key)};else if(e instanceof Bf)r={update:vU(t,e.key,e.data),updateMask:Mge(e.fieldMask)};else{if(!(e instanceof jO))return wr();r={verify:k2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof P2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Gx)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof j2)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw wr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Bge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:wr()}(t,e.precondition)),r}function WP(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Ya.updateTime(qi(s.updateTime)):s.exists!==void 0?Ya.exists(s.exists):Ya.none()}(e.currentDocument):Ya.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,o){let c=null;if("setToServerValue"in o)Sr(o.setToServerValue==="REQUEST_TIME"),c=new P2;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];c=new Gx(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];c=new zx(d)}else"increment"in o?c=new j2(i,o.increment):wr();const u=Xa.fromServerFormat(o.fieldPath);return new pge(u,c)}(t,a)):[];if(e.update){e.update.name;const a=ef(t,e.update.name),s=new yo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new Hl(u.map(d=>Xa.fromServerFormat(d)))}(e.updateMask);return new Bf(a,s,i,r,n)}return new yv(a,s,r,n)}if(e.delete){const a=ef(t,e.delete);return new bv(a,r)}if(e.verify){const a=ef(t,e.verify);return new jO(a,r)}return wr()}function kge(t,e){return t&&t.length>0?(Sr(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?qi(a.updateTime):qi(s);return i.isEqual(Pr.min())&&(i=qi(s)),new xge(i,a.transformResults||[])}(r,e))):[]}function MY(t,e){return{documents:[OY(t,e.path)]}}function LY(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=OY(t,a);const s=function(u){if(u.length!==0)return VY(ta.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Ug(h.field),direction:Oge(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=GP(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function UY(t){let e=DY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Sr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(A){const h=QY(A);return h instanceof ta&&TO(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(A){return A.map(h=>function(m){return new T2(Qg(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(A){let h;return h=typeof A=="object"?A.value:A,Fb(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(A){const h=!!A.before,f=A.values||[];return new $x(f,h)}(r.startAt));let u=null;return r.endAt&&(u=function(A){const h=!A.before,f=A.values||[];return new $x(f,h)}(r.endAt)),age(e,a,i,s,o,"F",c,u)}function Fge(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function QY(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Qg(r.unaryFilter.field);return xn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Qg(r.unaryFilter.field);return xn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qg(r.unaryFilter.field);return xn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qg(r.unaryFilter.field);return xn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wr()}}(t):t.fieldFilter!==void 0?function(r){return xn.create(Qg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ta.create(r.compositeFilter.filters.map(n=>QY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return wr()}}(r.compositeFilter.op))}(t):wr()}function Oge(t){return Cge[t]}function Dge(t){return Ege[t]}function Rge(t){return Sge[t]}function Ug(t){return{fieldPath:t.canonicalString()}}function Qg(t){return Xa.fromServerFormat(t.fieldPath)}function VY(t){return t instanceof xn?function(r){if(r.op==="=="){if(rU(r.value))return{unaryFilter:{field:Ug(r.field),op:"IS_NAN"}};if(tU(r.value))return{unaryFilter:{field:Ug(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(rU(r.value))return{unaryFilter:{field:Ug(r.field),op:"IS_NOT_NAN"}};if(tU(r.value))return{unaryFilter:{field:Ug(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ug(r.field),op:Dge(r.op),value:r.value}}}(t):t instanceof ta?function(r){const n=r.getFilters().map(a=>VY(a));return n.length===1?n[0]:{compositeFilter:{op:Rge(r.op),filters:n}}}(t):wr()}function Mge(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function HY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,r,n,a,s=Pr.min(),i=Pr.min(),o=Ks.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new zA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new zA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e){this.ct=e}}function Lge(t,e){let r;if(e.document)r=Tge(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ur.fromSegments(e.noDocument.path),a=fp(e.noDocument.readTime);r=Wa.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return wr();{const n=ur.fromSegments(e.unknownDocument.path),a=fp(e.unknownDocument.version);r=Wa.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new Xt(a[0],a[1]);return Pr.fromTimestamp(s)}(e.readTime)),r}function yU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:mE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:k2(s,i.key),fields:i.data.value.mapValue.fields,updateTime:qx(s,i.version.toTimestamp()),createTime:qx(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ap(e.version)};else{if(!e.isUnknownDocument())return wr();n.unknownDocument={path:r.path.toArray(),version:Ap(e.version)}}return n}function mE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ap(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fp(t){const e=new Xt(t.seconds,t.nanoseconds);return Pr.fromTimestamp(e)}function bm(t,e){const r=(e.baseMutations||[]).map(s=>WP(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>WP(t.ct,s)),a=Xt.fromMillis(e.localWriteTimeMs);return new kO(e.batchId,a,r,n)}function ry(t){const e=fp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?fp(t.lastLimboFreeSnapshotVersion):Pr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Sr(s.documents.length===1),bu(Db(DY(s.documents[0])))}(t.query):function(s){return bu(UY(s))}(t.query),new zA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ks.fromBase64String(t.resumeToken))}function KY(t,e){const r=Ap(e.snapshotVersion),n=Ap(e.lastLimboFreeSnapshotVersion);let a;a=AE(e.target)?MY(t.ct,e.target):LY(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function GY(t){const e=UY({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hE(e,e.limit,"L"):e}function E3(t,e){return new OO(e.largestBatchId,WP(t.ct,e.overlayMutation))}function bU(t,e){const r=e.path.lastSegment();return[t,Nl(e.path.popLast()),r]}function wU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ap(n.readTime),documentKey:Nl(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uge{getBundleMetadata(e,r){return NU(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:fp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return NU(e).put(function(a){return{bundleId:a.id,createTime:Ap(qi(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return _U(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:GY(s.bundledQuery),readTime:fp(s.readTime)}}(n)})}saveNamedQuery(e,r){return _U(e).put(function(a){return{name:a.name,readTime:Ap(qi(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function NU(t){return Si(t,"bundles")}function _U(t){return Si(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new BI(e,n)}getOverlay(e,r){return g1(e).get(bU(this.userId,r)).next(n=>n?E3(this.serializer,n):null)}getOverlays(e,r){const n=zd();return Bt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const o=new OO(r,i);a.push(this.ht(e,o))}),Bt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(Nl(i.getCollectionPath())));const s=[];return a.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(g1(e).j("collectionPathOverlayIndex",o))}),Bt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=zd(),s=Nl(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return g1(e).U("collectionPathOverlayIndex",i).next(o=>{for(const c of o){const u=E3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=zd();let i;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return g1(e).J({index:"collectionGroupOverlayIndex",range:o},(c,u,d)=>{const A=E3(this.serializer,u);s.size()<a||A.largestBatchId===i?(s.set(A.getKey(),A),i=A.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return g1(e).put(function(a,s,i){const[o,c,u]=bU(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:F2(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function g1(t){return Si(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qge{Pt(e){return Si(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Ks.fromUint8Array(n):Ks.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(za(e.integerValue));else if("doubleValue"in e){const n=za(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),C2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=pf(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(m0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?iY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):_I(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):wr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",o=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(za(o)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),ur.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}wm.vt=new wm;function Vge(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function CU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=Vge(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class Hge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=CU(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=CU(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class $ge{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Kge{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class x1{constructor(){this.jt=new Hge,this.Ht=new $ge(this.jt),this.Jt=new Kge(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Nm(this.indexId,this.documentKey,this.arrayValue,n)}}function lh(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=EU(t.arrayValue,e.arrayValue),r!==0?r:(r=EU(t.directionalValue,e.directionalValue),r!==0?r:ur.comparator(t.documentKey,e.documentKey)))}function EU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.Xt=new ua((r,n)=>Xa.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Sr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=MP(e);if(r!==void 0&&!this.sn(r))return!1;const n=fm(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!a.has(o.field.canonicalString())){const c=n[s];if(!this.on(o,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const o=n[s];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new ua(Xa.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new uC(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new uC(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new uC(n.field,n.dir==="asc"?0:1)));return new dE(dE.UNKNOWN_ID,this.collectionId,r,_2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t){var e,r;if(Sr(t instanceof xn||t instanceof ta),t instanceof xn){if(t instanceof mY){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>xn.create(t.field,"==",s)))||[];return ta.create(a,"or")}return t}const n=t.filters.map(a=>zY(a));return ta.create(n,t.op)}function Gge(t){if(t.getFilters().length===0)return[];const e=JP(zY(t));return Sr(qY(e)),XP(e)||YP(e)?[e]:e.getFilters()}function XP(t){return t instanceof xn}function YP(t){return t instanceof ta&&TO(t)}function qY(t){return XP(t)||YP(t)||function(r){if(r instanceof ta&&VP(r)){for(const n of r.getFilters())if(!XP(n)&&!YP(n))return!1;return!0}return!1}(t)}function JP(t){if(Sr(t instanceof xn||t instanceof ta),t instanceof xn)return t;if(t.filters.length===1)return JP(t.filters[0]);const e=t.filters.map(n=>JP(n));let r=ta.create(e,t.op);return r=pE(r),qY(r)?r:(Sr(r instanceof ta),Sr(Kx(r)),Sr(r.filters.length>1),r.filters.reduce((n,a)=>MO(n,a)))}function MO(t,e){let r;return Sr(t instanceof xn||t instanceof ta),Sr(e instanceof xn||e instanceof ta),r=t instanceof xn?e instanceof xn?function(a,s){return ta.create([a,s],"and")}(t,e):IU(t,e):e instanceof xn?IU(e,t):function(a,s){if(Sr(a.filters.length>0&&s.filters.length>0),Kx(a)&&Kx(s))return AY(a,s.getFilters());const i=VP(a)?a:s,o=VP(a)?s:a,c=i.filters.map(u=>MO(u,o));return ta.create(c,"or")}(t,e),pE(r)}function IU(t,e){if(Kx(e))return AY(e,t.getFilters());{const r=e.filters.map(n=>MO(t,n));return ta.create(r,"or")}}function pE(t){if(Sr(t instanceof xn||t instanceof ta),t instanceof xn)return t;const e=t.getFilters();if(e.length===1)return pE(e[0]);if(uY(t))return t;const r=e.map(a=>pE(a)),n=[];return r.forEach(a=>{a instanceof xn?n.push(a):a instanceof ta&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:ta.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(){this.un=new LO}addToCollectionParentIndex(e,r){return this.un.add(r),Bt.resolve()}getCollectionParents(e,r){return Bt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Bt.resolve()}deleteFieldIndex(e,r){return Bt.resolve()}deleteAllFieldIndexes(e){return Bt.resolve()}createTargetIndexes(e,r){return Bt.resolve()}getDocumentsMatchingTarget(e,r){return Bt.resolve(null)}getIndexType(e,r){return Bt.resolve(0)}getFieldIndexes(e,r){return Bt.resolve([])}getNextCollectionGroupToUpdate(e){return Bt.resolve(null)}getMinOffset(e,r){return Bt.resolve(Tc.min())}getMinOffsetFromCollectionGroup(e,r){return Bt.resolve(Tc.min())}updateCollectionGroup(e,r,n){return Bt.resolve()}updateIndexEntries(e,r){return Bt.resolve()}}class LO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new ua(kn.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new ua(kn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new Uint8Array(0);class qge{constructor(e,r){this.databaseId=r,this.cn=new LO,this.ln=new R0(n=>dp(n),(n,a)=>Ob(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Nl(a)};return BU(e).put(s)}return Bt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[WX(r),""],!1,!0);return BU(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(Gd(i.parent))}return n})}addFieldIndex(e,r){const n=v1(e),a=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=Ag(e);return s.next(o=>{i.put(wU(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=v1(e),a=Ag(e),s=dg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=v1(e),n=dg(e),a=Ag(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Bt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new SU(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=dg(e);let a=!0;const s=new Map;return Bt.forEach(this.hn(r),i=>this.Pn(e,i).next(o=>{a&&(a=!!o),s.set(i,o)})).next(()=>{if(a){let i=sn();const o=[];return Bt.forEach(s,(c,u)=>{Jt("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${dp(r)}`);const d=function(b,w){const I=MP(w);if(I===void 0)return null;for(const T of fE(b,I.fieldPath))switch(T.op){case"array-contains-any":return T.value.arrayValue.values||[];case"array-contains":return[T.value]}return null}(u,c),A=function(b,w){const I=new Map;for(const T of fm(w))for(const C of fE(b,T.fieldPath))switch(C.op){case"==":case"in":I.set(T.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return I.set(T.fieldPath.canonicalString(),C.value),Array.from(I.values())}return null}(u,c),h=function(b,w){const I=[];let T=!0;for(const C of fm(w)){const E=C.kind===0?oU(b,C.fieldPath,b.startAt):lU(b,C.fieldPath,b.startAt);I.push(E.value),T&&(T=E.inclusive)}return new $x(I,T)}(u,c),f=function(b,w){const I=[];let T=!0;for(const C of fm(w)){const E=C.kind===0?lU(b,C.fieldPath,b.endAt):oU(b,C.fieldPath,b.endAt);I.push(E.value),T&&(T=E.inclusive)}return new $x(I,T)}(u,c),m=this.In(c,u,h),p=this.In(c,u,f),g=this.Tn(c,u,A),x=this.En(c.indexId,d,m,h.inclusive,p,f.inclusive,g);return Bt.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const I=ur.fromSegments(w.documentKey);i.has(I)||(i=i.add(I),o.push(I))})}))}).next(()=>o)}return Bt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Gge(ta.create(e.filters,"and")).map(n=>$P(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,o){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let A=0;A<c;++A){const h=r?this.dn(r[A/u]):AN,f=this.An(e,h,n[A%u],a),m=this.Rn(e,h,s[A%u],i),p=o.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(f,m,p))}return d}An(e,r,n,a){const s=new Nm(e,ur.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Nm(e,ur.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new SU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const o of s)n.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return Bt.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new ua(Xa.comparator),d=!1;for(const A of c.filters)for(const h of A.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const A of c.orderBy)A.field.isKeyField()||(u=u.add(A.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new x1;for(const a of fm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);wm.vt.It(s,i)}return n.zt()}dn(e){const r=new x1;return wm.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new x1;return wm.vt.It(I2(this.databaseId,r),n.Yt(function(s){const i=fm(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new x1);let s=0;for(const i of fm(e)){const o=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&B2(o))a=this.gn(a,i,o);else{const u=c.Yt(i.kind);wm.vt.It(o,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const o of a){const c=new x1;c.seed(o.zt()),wm.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof xn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=v1(e),a=Ag(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return Bt.forEach(s,o=>a.get([o.indexId,this.uid]).next(c=>{i.push(function(d,A){const h=A?new _2(A.sequenceNumber,new Tc(fp(A.readTime),new ur(Gd(A.documentKey)),A.largestBatchId)):_2.empty(),f=d.fields.map(([m,p])=>new uC(Xa.fromServerFormat(m),p));return new dE(d.indexId,d.collectionGroup,f,h)}(o,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Yr(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=v1(e),s=Ag(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Bt.forEach(o,c=>s.put(wU(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return Bt.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?Bt.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(o=>(n.set(a.collectionGroup,o),Bt.forEach(o,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Bt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return dg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return dg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=dg(e);let s=new ua(lh);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,o)=>{s=s.add(new Nm(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,r){let n=new ua(lh);const a=this.Vn(r,e);if(a==null)return n;const s=MP(r);if(s!=null){const i=e.data.field(s.fieldPath);if(B2(i))for(const o of i.arrayValue.values||[])n=n.add(new Nm(r.indexId,e.key,this.dn(o),a))}else n=n.add(new Nm(r.indexId,e.key,AN,a));return n}bn(e,r,n,a,s){Jt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,A,h){const f=c.getIterator(),m=u.getIterator();let p=ug(f),g=ug(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(A(g),g=ug(m)):y?(h(p),p=ug(f)):(p=ug(f),g=ug(m))}}(a,s,lh,o=>{i.push(this.Dn(e,r,n,o))},o=>{i.push(this.vn(e,r,n,o))}),Bt.waitFor(i)}yn(e){let r=1;return Ag(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,o)=>lh(i,o)).filter((i,o,c)=>!o||lh(i,c[o-1])!==0);const a=[];a.push(e);for(const i of n){const o=lh(i,e),c=lh(i,r);if(o===0)a[0]=e.Zt();else if(o>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const o=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,AN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,AN,[]];s.push(IDBKeyRange.bound(o,c))}return s}Cn(e,r){return lh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(TU)}getMinOffset(e,r){return Bt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||wr())).next(TU)}}function BU(t){return Si(t,"collectionParents")}function dg(t){return Si(t,"indexEntries")}function v1(t){return Si(t,"indexConfiguration")}function Ag(t){return Si(t,"indexState")}function TU(t){Sr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;CO(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Tc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ml{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ml(e,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let o=0;const c=n.J({range:i},(d,A,h)=>(o++,h.delete()));s.push(c.next(()=>{Sr(o===1)}));const u=[];for(const d of r.mutations){const A=eY(e,d.key.path,r.batchId);s.push(a.delete(A)),u.push(d.key)}return Bt.waitFor(s).next(()=>u)}function gE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw wr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml.DEFAULT_COLLECTION_PERCENTILE=10,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ml.DEFAULT=new Ml(41943040,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ml.DISABLED=new Ml(-1,0,0);class TI{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Sr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new TI(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Vg(e),i=ch(e);return i.add({}).next(o=>{Sr(typeof o=="number");const c=new kO(o,r,n,a),u=function(f,m,p){const g=p.baseMutations.map(y=>F2(f.ct,y)),x=p.mutations.map(y=>F2(f.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let A=new ua((h,f)=>Yr(h.canonicalString(),f.canonicalString()));for(const h of a){const f=eY(this.userId,h.key.path,o);A=A.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(f,Ipe))}return A.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[o]=c.keys()}),Bt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return ch(e).get(r).next(n=>n?(Sr(n.userId===this.userId),bm(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Bt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return ch(e).J({index:"userMutationsIndex",range:a},(i,o,c)=>{o.userId===this.userId&&(Sr(o.batchId>=n),s=bm(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ch(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).U("userMutationsIndex",r).next(n=>n.map(a=>bm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=dC(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Vg(e).J({range:a},(i,o,c)=>{const[u,d,A]=i,h=Gd(d);if(u===this.userId&&r.path.isEqual(h))return ch(e).get(A).next(f=>{if(!f)throw wr();Sr(f.userId===this.userId),s.push(bm(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ua(Yr);const a=[];return r.forEach(s=>{const i=dC(this.userId,s.path),o=IDBKeyRange.lowerBound(i),c=Vg(e).J({range:o},(u,d,A)=>{const[h,f,m]=u,p=Gd(f);h===this.userId&&s.path.isEqual(p)?n=n.add(m):A.done()});a.push(c)}),Bt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=dC(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new ua(Yr);return Vg(e).J({range:i},(c,u,d)=>{const[A,h,f]=c,m=Gd(h);A===this.userId&&n.isPrefixOf(m)?m.length===a&&(o=o.add(f)):d.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(ch(e).get(s).next(i=>{if(i===null)throw wr();Sr(i.userId===this.userId),n.push(bm(this.serializer,i))}))}),Bt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return WY(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Bt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Bt.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return Vg(e).J({range:n},(s,i,o)=>{if(s[0]===this.userId){const c=Gd(s[1]);a.push(c)}else o.done()}).next(()=>{Sr(a.length===0)})})}containsKey(e,r){return XY(e,this.userId,r)}Nn(e){return YY(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XY(t,e,r){const n=dC(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Vg(t).J({range:s,H:!0},(o,c,u)=>{const[d,A,h]=o;d===e&&A===a&&(i=!0),u.done()}).next(()=>i)}function ch(t){return Si(t,"mutations")}function Vg(t){return Si(t,"documentMutations")}function YY(t){return Si(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hp(0)}static kn(){return new hp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new hp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Pr.fromTimestamp(new Xt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>fg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Sr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return fg(e).J((i,o)=>{const c=ry(o);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Bt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return fg(e).J((n,a)=>{const s=ry(a);r(s)})}qn(e){return jU(e).get("targetGlobalKey").next(r=>(Sr(r!==null),r))}Qn(e,r){return jU(e).put("targetGlobalKey",r)}Kn(e,r){return fg(e).put(KY(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=dp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return fg(e).J({range:a,index:"queryTargetsIndex"},(i,o,c)=>{const u=ry(o);Ob(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=Fh(e);return r.forEach(i=>{const o=Nl(i.path);a.push(s.put({targetId:n,path:o})),a.push(this.referenceDelegate.addReference(e,n,i))}),Bt.waitFor(a)}removeMatchingKeys(e,r,n){const a=Fh(e);return Bt.forEach(r,s=>{const i=Nl(s.path);return Bt.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=Fh(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=Fh(e);let s=sn();return a.J({range:n,H:!0},(i,o,c)=>{const u=Gd(i[1]),d=new ur(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Nl(r.path),a=IDBKeyRange.bound([n],[WX(n)],!1,!0);let s=0;return Fh(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,o],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return fg(e).get(r).next(n=>n?ry(n):null)}}function fg(t){return Si(t,"targets")}function jU(t){return Si(t,"targetGlobal")}function Fh(t){return Si(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU([t,e],[r,n]){const a=Yr(t,r);return a===0?Yr(e,n):a}class Xge{constructor(e){this.Un=e,this.buffer=new ua(kU),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();kU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Yge{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Jt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){D0(r)?Jt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Dp(r)}await this.Hn(3e5)})}}class Jge{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Bt.resolve(mu.oe);const n=new Xge(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Jt("LruGarbageCollector","Garbage collection skipped; disabled"),Bt.resolve(PU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PU):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,i=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(n=A,o=Date.now(),this.removeTargets(e,n,r))).next(A=>(s=A,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(A=>(u=Date.now(),Mg()<=gn.DEBUG&&Jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${A} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Bt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:A})))}}function Zge(t,e){return new Jge(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(e,r){this.db=e,this.garbageCollector=Zge(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return fN(e,n)}removeReference(e,r,n){return fN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return fN(e,r)}nr(e,r){return function(a,s){let i=!1;return YY(a).Y(o=>XY(a,o,s).next(c=>(c&&(i=!0),Bt.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,o)=>{if(o<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Pr.min()),Fh(e).delete(function(A){return[0,Nl(A.path)]}(i))))});a.push(c)}}).next(()=>Bt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return fN(e,r)}tr(e,r){const n=Fh(e);let a,s=mu.oe;return n.J({index:"documentTargetsIndex"},([i,o],{path:c,sequenceNumber:u})=>{i===0?(s!==mu.oe&&r(new ur(Gd(a)),s),s=u,a=c):s=mu.oe}).next(()=>{s!==mu.oe&&r(new ur(Gd(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fN(t,e){return Fh(t).put(function(n,a){return{targetId:0,path:Nl(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(){this.changes=new R0(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Wa.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Bt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class txe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return tm(e).put(n)}removeEntry(e,r,n){return tm(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],mE(i),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Wa.newInvalidDocument(r);return tm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(y1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Wa.newInvalidDocument(r)};return tm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(y1(r))},(a,s)=>{n={document:this.ir(r,s),size:gE(s)}}).next(()=>n)}getEntries(e,r){let n=_c();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=_c(),a=new es(ur.comparator);return this._r(e,r,(s,i)=>{const o=this.ir(s,i);n=n.insert(s,o),a=a.insert(s,gE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Bt.resolve();let a=new ua(DU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(y1(a.first()),y1(a.last())),i=a.getIterator();let o=i.getNext();return tm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const A=ur.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&DU(o,A)<0;)n(o,null),o=i.getNext();o&&o.isEqual(A)&&(n(o,u),o=i.hasNext()?i.getNext():null),o?d.$(y1(o)):d.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,o=[i.popLast().toArray(),i.lastSegment(),mE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tm(e).U(IDBKeyRange.bound(o,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=_c();for(const A of u){const h=this.ir(ur.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);h.isFoundDocument()&&(Rb(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=_c();const i=OU(r,n),o=OU(r,Tc.max());return tm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(c,u,d)=>{const A=this.ir(ur.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(A.key,A),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new rxe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return FU(e).get("remoteDocumentGlobalKey").next(r=>(Sr(!!r),r))}rr(e,r){return FU(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Lge(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Pr.min())))return n}return Wa.newInvalidDocument(e)}}function ZY(t){return new txe(t)}class rxe extends JY{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new R0(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new ua((s,i)=>Yr(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const c=yU(this.cr.serializer,i);a=a.add(s.path.popLast());const u=gE(c);n+=u-o.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=o.size,this.trackRemovals){const c=yU(this.cr.serializer,i.convertToNoDocument(Pr.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Bt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function FU(t){return Si(t,"remoteDocumentGlobal")}function tm(t){return Si(t,"remoteDocumentsV14")}function y1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OU(t,e){const r=e.documentKey.path.toArray();return[t,mE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function DU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Yr(r[s],n[s]),a)return a;return a=Yr(r.length,n.length),a||(a=Yr(r[r.length-2],n[n.length-2]),a||Yr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&ky(n.mutation,a,Hl.empty(),Xt.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,sn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=sn()){const a=zd();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=ey();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=zd();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,sn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,a){let s=_c();const i=jy(),o=function(){return jy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Bf)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),ky(d.mutation,u,d.mutation.getFieldMask(),Xt.now())):i.set(u.key,Hl.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var A;return o.set(u,new nxe(d,(A=i.get(u))!==null&&A!==void 0?A:null))}),o))}recalculateAndSaveOverlays(e,r){const n=jy();let a=new es((i,o)=>i-o),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Hl.empty();d=o.applyToLocalView(u,d),n.set(c,d);const A=(a.get(o.batchId)||sn()).add(c);a=a.insert(o.batchId,A)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,A=bY();d.forEach(h=>{if(!s.has(h)){const f=SY(r.get(h),n.get(h));f!==null&&A.set(h,f),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,A))}return Bt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return ur.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):pY(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Bt.resolve(zd());let o=-1,c=s;return i.next(u=>Bt.forEach(u,(d,A)=>(o<A.largestBatchId&&(o=A.largestBatchId),s.get(d)?Bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,sn())).next(d=>({batchId:o,changes:yY(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ur(r)).next(n=>{let a=ey();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=ey();return this.indexManager.getCollectionParents(e,s).next(o=>Bt.forEach(o,c=>{const u=function(A,h){return new vv(h,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((A,h)=>{i=i.insert(A,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Wa.newInvalidDocument(d)))});let o=ey();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&ky(d.mutation,u,Hl.empty(),Xt.now()),Rb(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class axe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Bt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:qi(a.createTime)}}(r)),Bt.resolve()}getNamedQuery(e,r){return Bt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:GY(a.bundledQuery),readTime:qi(a.readTime)}}(r)),Bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{constructor(){this.overlays=new es(ur.comparator),this.Ir=new Map}getOverlay(e,r){return Bt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=zd();return Bt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Bt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Bt.resolve()}getOverlaysForCollection(e,r,n){const a=zd(),s=r.length+1,i=new ur(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Bt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new es((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=zd(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=zd(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Bt.resolve(o)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new OO(r,n));let s=this.Ir.get(r);s===void 0&&(s=sn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixe{constructor(){this.sessionToken=Ks.EMPTY_BYTE_STRING}getSessionToken(e){return Bt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(){this.Tr=new ua(Ui.Er),this.dr=new ua(Ui.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Ui(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Ui(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ur(new kn([])),n=new Ui(r,e),a=new Ui(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ur(new kn([])),n=new Ui(r,e),a=new Ui(r,e+1);let s=sn();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new Ui(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ui{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ur.comparator(e.key,r.key)||Yr(e.wr,r.wr)}static Ar(e,r){return Yr(e.wr,r.wr)||ur.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new ua(Ui.Er)}checkEmpty(e){return Bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new kO(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.br=this.br.add(new Ui(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Bt.resolve(i)}lookupMutationBatch(e,r){return Bt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Bt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ui(r,0),a=new Ui(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const o=this.Dr(i.wr);s.push(o)}),Bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ua(Yr);return r.forEach(a=>{const s=new Ui(a,0),i=new Ui(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],o=>{n=n.add(o.wr)})}),Bt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;ur.isDocumentKey(s)||(s=s.child(""));const i=new Ui(new ur(s),0);let o=new ua(Yr);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.wr)),!0)},i),Bt.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Sr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Bt.forEach(r.mutations,a=>{const s=new Ui(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Ui(r,0),a=this.br.firstAfterOrEqual(n);return Bt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(e){this.Mr=e,this.docs=function(){return new es(ur.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Bt.resolve(n?n.document.mutableCopy():Wa.newInvalidDocument(r))}getEntries(e,r){let n=_c();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Wa.newInvalidDocument(a))}),Bt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=_c();const i=r.path,o=new ur(i.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||CO(XX(d),n)<=0||(a.has(d.key)||Rb(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Bt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){wr()}Or(e,r){return Bt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new cxe(this)}getSize(e){return Bt.resolve(this.size)}}class cxe extends JY{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Bt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uxe{constructor(e){this.persistence=e,this.Nr=new R0(r=>dp(r),Ob),this.lastRemoteSnapshotVersion=Pr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new UO,this.targetCount=0,this.kr=hp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Bt.resolve()}getLastRemoteSnapshotVersion(e){return Bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Bt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Bt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new hp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Bt.resolve()}updateTargetData(e,r){return this.Kn(r),Bt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Bt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),Bt.waitFor(s).next(()=>a)}getTargetCount(e){return Bt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Bt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Bt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),Bt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Bt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Bt.resolve(n)}containsKey(e,r){return Bt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new mu(0),this.Kr=!1,this.Kr=!0,this.$r=new ixe,this.referenceDelegate=e(this),this.Ur=new uxe(this),this.indexManager=new zge,this.remoteDocumentCache=function(a){return new lxe(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new $Y(r),this.Gr=new axe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new sxe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new oxe(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Jt("MemoryPersistence","Starting transaction:",e);const a=new dxe(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Bt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class dxe extends JX{constructor(e){super(),this.currentSequenceNumber=e}}class PI{constructor(e){this.persistence=e,this.Jr=new UO,this.Yr=null}static Zr(e){return new PI(e)}get Xr(){if(this.Yr)return this.Yr;throw wr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Bt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Bt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Bt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bt.forEach(this.Xr,n=>{const a=ur.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,Pr.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Bt.or([()=>Bt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(e){this.serializer=e}O(e,r,n,a){const s=new NI("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XL,{unique:!0}),c.createObjectStore("documentMutations")}(e),RU(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=Bt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),RU(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pr.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XL,{unique:!0});const A=u.store("mutations"),h=d.map(f=>A.put(f));return Bt.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Upe});u.createIndex("collectionPathOverlayIndex",Qpe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Vpe,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Bpe});u.createIndex("documentKeyIndex",Tpe),u.createIndex("collectionGroupIndex",Ppe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Dpe}).createIndex("sequenceNumberIndex",Rpe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Mpe}).createIndex("documentKeyIndex",Lpe,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=gE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Bt.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(o=>Bt.forEach(o,c=>{Sr(c.userId===s.userId);const u=bm(this.serializer,c);return WY(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,o)=>{const c=new kn(i),u=function(A){return[0,Nl(A)]}(c);s.push(r.get(u).next(d=>d?Bt.resolve():(A=>r.put({targetId:0,path:Nl(A),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Bt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Ope});const n=r.store("collectionParents"),a=new LO,s=i=>{if(a.add(i)){const o=i.lastSegment(),c=i.popLast();return n.put({collectionId:o,parent:Nl(c)})}};return r.store("remoteDocuments").J({H:!0},(i,o)=>{const c=new kn(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,o,c],u)=>{const d=Gd(o);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=ry(a),i=KY(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const o=r.store("remoteDocumentsV14"),c=function(A){return A.document?new ur(kn.fromString(A.document.name).popFirst(5)):A.noDocument?ur.fromSegments(A.noDocument.path):A.unknownDocument?ur.fromSegments(A.unknownDocument.path):wr()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(o.put(u))}).next(()=>Bt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=ZY(this.serializer),s=new tJ(PI.Zr,this.serializer.ct);return n.U().next(i=>{const o=new Map;return i.forEach(c=>{var u;let d=(u=o.get(c.userId))!==null&&u!==void 0?u:sn();bm(this.serializer,c).keys().forEach(A=>d=d.add(A)),o.set(c.userId,d)}),Bt.forEach(o,(c,u)=>{const d=new mo(u),A=BI.lt(this.serializer,d),h=s.getIndexManager(d),f=TI.lt(d,this.serializer,h,s.referenceDelegate);return new eJ(a,f,A,h).recalculateAndSaveOverlaysForDocumentKeys(new LP(r,mu.oe),c).next()})})}}function RU(t){t.createObjectStore("targetDocuments",{keyPath:kpe}).createIndex("documentTargetsIndex",Fpe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jpe,{unique:!0}),t.createObjectStore("targetGlobal")}const S3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QO{constructor(e,r,n,a,s,i,o,c,u,d,A=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=o,this.ci=u,this.li=d,this.hi=A,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!QO.D())throw new ar(Mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new exe(this,a),this.Ai=r+"main",this.serializer=new $Y(c),this.Ri=new s0(this.Ai,this.hi,new Axe(this.serializer)),this.$r=new Qge,this.Ur=new Wge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZY(this.serializer),this.Gr=new Uge,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&yl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ar(Mt.FAILED_PRECONDITION,S3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new mu(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(D0(e))return Jt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Jt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return b1(e).get("owner").next(r=>Bt.resolve(this.vi(r)))}Ci(e){return hN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Si(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(o=>s.indexOf(o)===-1);return Bt.forEach(i,o=>n.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Bt.resolve(!0):b1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ar(Mt.FAILED_PRECONDITION,S3);return!1}}return!(!this.networkEnabled||!this.inForeground)||hN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,o=this.networkEnabled===a.networkEnabled;if(s||i&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Jt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new LP(e,mu.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>hN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return TI.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qge(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return BI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Jt("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Kpe:c===16?$pe:c===15?SO:c===14?nY:c===13?rY:c===12?Hpe:c===11?tY:void wr()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,o=>(i=new LP(o,this.Qr?this.Qr.next():mu.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw yl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ar(Mt.FAILED_PRECONDITION,YX);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return b1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ar(Mt.FAILED_PRECONDITION,S3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return b1(e).put("owner",r)}static D(){return s0.D()}bi(e){const r=b1(e);return r.get("owner").next(n=>this.vi(n)?(Jt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Bt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(yl(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;JW()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Jt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return yl("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){yl("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function b1(t){return Si(t,"owner")}function hN(t){return Si(t,"clientMetadata")}function fxe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=sn(),a=sn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new VO(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JW()?8:ZX(Ci())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new hxe;return this.Xi(e,r,i).next(o=>{if(s.result=o,this.zi)return this.es(e,r,i,o.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Mg()<=gn.DEBUG&&Jt("QueryEngine","SDK will not create cache indexes for query:",Lg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Bt.resolve()):(Mg()<=gn.DEBUG&&Jt("QueryEngine","Query:",Lg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Mg()<=gn.DEBUG&&Jt("QueryEngine","The SDK decides to create cache indexes for query:",Lg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bu(r))):Bt.resolve())}Yi(e,r){if(cU(r))return Bt.resolve(null);let n=bu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=hE(r,null,"F"),n=bu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=sn(...s);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,o);return this.ns(r,u,i,c.readTime)?this.Yi(e,hE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return cU(r)||a.isEqual(Pr.min())?Bt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?Bt.resolve(null):(Mg()<=gn.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lg(r)),this.rs(e,i,r,bpe(a,-1)).next(o=>o))})}ts(e,r){let n=new ua(xY(e));return r.forEach((a,s)=>{Rb(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Mg()<=gn.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",Lg(r)),this.Ji.getDocumentsMatchingQuery(e,r,Tc.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new es(Yr),this._s=new R0(s=>dp(s),Ob),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function nJ(t,e,r,n){return new mxe(t,e,r,n)}async function aJ(t,e){const r=$r(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=sn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:o}))})})}function pxe(t,e){const r=$r(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const A=u.batch,h=A.keys();let f=Bt.resolve();return h.forEach(m=>{f=f.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Sr(g!==null),p.version.compareTo(g)<0&&(A.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(c,A))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=sn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function sJ(t){const e=$r(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function gxe(t,e){const r=$r(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const o=[];e.targetChanges.forEach((d,A)=>{const h=a.get(A);if(!h)return;o.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,A).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,A)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(A)!==null?f=f.withResumeToken(Ks.EMPTY_BYTE_STRING,Pr.min()).withLastLimboFreeSnapshotVersion(Pr.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,n)),a=a.insert(A,f),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,f,d)&&o.push(r.Ur.updateTargetData(s,f))});let c=_c(),u=sn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(xxe(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Pr.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(A=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Bt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function xxe(t,e,r){let n=sn(),a=sn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=_c();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Pr.min())?(e.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(o,c)):Jt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function vxe(t,e){const r=$r(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function yxe(t,e){const r=$r(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Bt.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new zA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function ZP(t,e,r){const n=$r(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!D0(i))throw i;Jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function MU(t,e,r){const n=$r(t);let a=Pr.min(),s=sn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const A=$r(c),h=A._s.get(d);return h!==void 0?Bt.resolve(A.os.get(h)):A.Ur.getTargetData(u,d)}(n,i,bu(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:Pr.min(),r?s:sn())).next(o=>(bxe(n,ige(e),o),{documents:o,Ts:s})))}function bxe(t,e,r){let n=t.us.get(e)||Pr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class LU{constructor(){this.activeTargetIds=Age()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iJ{constructor(){this.so=new LU,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wxe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mN=null;function I3(){return mN===null?mN=function(){return 268435456+Math.round(2147483648*Math.random())}():mN++,"0x"+mN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _xe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="WebChannelConnection";class Cxe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const o=I3(),c=this.xo(r,n.toUriEncodedString());Jt("RestConnection",`Sending RPC '${r}' ${o}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(Jt("RestConnection",`Received RPC '${r}' ${o}: `,d),d),d=>{throw h0("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,o){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=Nxe[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=I3();return new Promise((i,o)=>{const c=new VX;c.setWithCredentials(!0),c.listenOnce(HX.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cC.NO_ERROR:const d=c.getResponseJson();Jt(ko,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case cC.TIMEOUT:Jt(ko,`RPC '${e}' ${s} timed out`),o(new ar(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case cC.HTTP_ERROR:const A=c.getStatus();if(Jt(ko,`RPC '${e}' ${s} failed with status:`,A,"response text:",c.getResponseText()),A>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(x)>=0?x:Mt.UNKNOWN}(f.status);o(new ar(m,f.message))}else o(new ar(Mt.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new ar(Mt.UNAVAILABLE,"Connection failed."));break;default:wr()}}finally{Jt(ko,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);Jt(ko,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=I3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=GX(),o=KX(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");Jt(ko,`Creating RPC '${e}' stream ${a}: ${d}`,c);const A=i.createWebChannel(d,c);let h=!1,f=!1;const m=new _xe({Io:g=>{f?Jt(ko,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(Jt(ko,`Opening RPC '${e}' stream ${a} transport.`),A.open(),h=!0),Jt(ko,`RPC '${e}' stream ${a} sending:`,g),A.send(g))},To:()=>A.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(A,Z1.EventType.OPEN,()=>{f||(Jt(ko,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(A,Z1.EventType.CLOSE,()=>{f||(f=!0,Jt(ko,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(A,Z1.EventType.ERROR,g=>{f||(f=!0,h0(ko,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new ar(Mt.UNAVAILABLE,"The operation could not be completed")))}),p(A,Z1.EventType.MESSAGE,g=>{var x;if(!f){const y=g.data[0];Sr(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){Jt(ko,`RPC '${e}' stream ${a} received error:`,w);const I=w.status;let T=function(S){const O=qs[S];if(O!==void 0)return TY(O)}(I),C=w.message;T===void 0&&(T=Mt.INTERNAL,C="Unknown error status: "+I+" with message "+w.message),f=!0,m.So(new ar(T,C)),A.close()}else Jt(ko,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(o,$X.STAT_EVENT,g=>{g.stat===RP.PROXY?Jt(ko,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===RP.NOPROXY&&Jt(ko,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Exe(){return typeof window<"u"?window:null}function pC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){return new Ige(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Jt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(e,r,n,a,s,i,o,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new HO(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Mt.RESOURCE_EXHAUSTED?(yl(r.toString()),yl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new ar(Mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sxe extends oJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=jge(this.serializer,e),n=function(s){if(!("targetChange"in s))return Pr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Pr.min():i.readTime?qi(i.readTime):Pr.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=qP(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=AE(c)?{documents:MY(s,c)}:{query:LY(s,c)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=kY(s,i.resumeToken);const u=GP(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Pr.min())>0){o.readTime=qx(s,i.snapshotVersion.toTimestamp());const u=GP(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=Fge(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=qP(this.serializer),r.removeTarget=e,this.a_(r)}}class Ixe extends oJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Sr(!!e.streamToken),this.lastStreamToken=e.streamToken,Sr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Sr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=kge(e.writeResults,e.commitTime),n=qi(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=qP(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>F2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxe extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ar(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,zP(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ar(Mt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,zP(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ar(Mt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Txe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yl(r),this.D_=!1):Jt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pxe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{Mp(this)&&(Jt("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=$r(c);u.L_.add(4),await Lb(u),u.q_.set("Unknown"),u.L_.delete(4),await kI(u)}(this))})}),this.q_=new Txe(n,a)}}async function kI(t){if(Mp(t))for(const e of t.B_)await e(!0)}async function Lb(t){for(const e of t.B_)await e(!1)}function lJ(t,e){const r=$r(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),zO(r)?GO(r):wv(r).r_()&&KO(r,e))}function $O(t,e){const r=$r(t),n=wv(r);r.N_.delete(e),n.r_()&&cJ(r,e),r.N_.size===0&&(n.r_()?n.o_():Mp(r)&&r.q_.set("Unknown"))}function KO(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}wv(t).A_(e)}function cJ(t,e){t.Q_.xe(e),wv(t).R_(e)}function GO(t){t.Q_=new _ge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wv(t).start(),t.q_.v_()}function zO(t){return Mp(t)&&!wv(t).n_()&&t.N_.size>0}function Mp(t){return $r(t).L_.size===0}function uJ(t){t.Q_=void 0}async function jxe(t){t.q_.set("Online")}async function kxe(t){t.N_.forEach((e,r)=>{KO(t,e)})}async function Fxe(t,e){uJ(t),zO(t)?(t.q_.M_(e),GO(t)):t.q_.set("Unknown")}async function Oxe(t,e,r){if(t.q_.set("Online"),e instanceof jY&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.N_.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.N_.delete(o),a.Q_.removeTarget(o))}(t,e)}catch(n){Jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xE(t,n)}else if(e instanceof mC?t.Q_.Ke(e):e instanceof PY?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Pr.min()))try{const n=await sJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Q_.rt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Ks.EMPTY_BYTE_STRING,d.snapshotVersion)),cJ(s,c);const A=new zA(d.target,c,u,d.sequenceNumber);KO(s,A)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Jt("RemoteStore","Failed to raise snapshot:",n),await xE(t,n)}}async function xE(t,e,r){if(!D0(e))throw e;t.L_.add(1),await Lb(t),t.q_.set("Offline"),r||(r=()=>sJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Jt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await kI(t)})}function dJ(t,e){return e().catch(r=>xE(t,r,e))}async function Ub(t){const e=$r(t),r=x0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Dxe(e);)try{const a=await vxe(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Rxe(e,a)}catch(a){await xE(e,a)}AJ(e)&&fJ(e)}function Dxe(t){return Mp(t)&&t.O_.length<10}function Rxe(t,e){t.O_.push(e);const r=x0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function AJ(t){return Mp(t)&&!x0(t).n_()&&t.O_.length>0}function fJ(t){x0(t).start()}async function Mxe(t){x0(t).p_()}async function Lxe(t){const e=x0(t);for(const r of t.O_)e.m_(r.mutations)}async function Uxe(t,e,r){const n=t.O_.shift(),a=FO.from(n,e,r);await dJ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Ub(t)}async function Qxe(t,e){e&&x0(t).V_&&await async function(n,a){if(function(i){return BY(i)&&i!==Mt.ABORTED}(a.code)){const s=n.O_.shift();x0(n).s_(),await dJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Ub(n)}}(t,e),AJ(t)&&fJ(t)}async function QU(t,e){const r=$r(t);r.asyncQueue.verifyOperationInProgress(),Jt("RemoteStore","RemoteStore received new credentials");const n=Mp(r);r.L_.add(3),await Lb(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await kI(r)}async function Vxe(t,e){const r=$r(t);e?(r.L_.delete(2),await kI(r)):e||(r.L_.add(2),await Lb(r),r.q_.set("Unknown"))}function wv(t){return t.K_||(t.K_=function(r,n,a){const s=$r(r);return s.w_(),new Sxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:jxe.bind(null,t),Ro:kxe.bind(null,t),mo:Fxe.bind(null,t),d_:Oxe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),zO(t)?GO(t):t.q_.set("Unknown")):(await t.K_.stop(),uJ(t))})),t.K_}function x0(t){return t.U_||(t.U_=function(r,n,a){const s=$r(r);return s.w_(),new Ixe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Mxe.bind(null,t),mo:Qxe.bind(null,t),f_:Lxe.bind(null,t),g_:Uxe.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ub(t)):(await t.U_.stop(),t.O_.length>0&&(Jt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new od,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,o=new qO(e,r,i,a,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ar(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WO(t,e){if(yl("AsyncQueue",`${e}: ${t}`),D0(t))return new ar(Mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ur.comparator(r.key,n.key):(r,n)=>ur.comparator(r.key,n.key),this.keyedMap=ey(),this.sortedSet=new es(this.comparator)}static emptySet(e){return new Cx(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Cx)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Cx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.W_=new es(ur.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Wx{constructor(e,r,n,a,s,i,o,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Wx(e,r,Cx.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&CI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hxe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $xe{constructor(){this.queries=HU(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=$r(r),s=a.queries;a.queries=HU(),s.forEach((i,o)=>{for(const c of o.j_)c.onError(n)})})(this,new ar(Mt.ABORTED,"Firestore shutting down"))}}function HU(){return new R0(t=>gY(t),CI)}async function XO(t,e){const r=$r(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new Hxe,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=WO(i,`Initialization of query '${Lg(e.query)}' failed`);return void e.onError(o)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&JO(r)}async function YO(t,e){const r=$r(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Kxe(t,e){const r=$r(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.j_)o.X_(a)&&(n=!0);i.z_=a}}n&&JO(r)}function Gxe(t,e,r){const n=$r(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function JO(t){t.Y_.forEach(e=>{e.next()})}var ej,$U;($U=ej||(ej={})).ea="default",$U.Cache="cache";class ZO{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Wx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Wx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ej.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e){this.key=e}}class mJ{constructor(e){this.key=e}}class zxe{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=sn(),this.mutatedKeys=sn(),this.Aa=xY(e),this.Ra=new Cx(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new VU,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,A)=>{const h=a.get(d),f=Rb(this.query,A)?A:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;h&&f?h.data.isEqual(f.data)?m!==p&&(n.track({type:3,doc:f}),g=!0):this.ga(h,f)||(n.track({type:2,doc:f}),g=!0,(c&&this.Aa(f,c)>0||u&&this.Aa(f,u)<0)&&(o=!0)):!h&&f?(n.track({type:0,doc:f}),g=!0):h&&!f&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(o=!0)),g&&(f?(i=i.add(f),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:o,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,A)=>function(f,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wr()}};return p(f)-p(m)}(d.type,A.type)||this.Aa(d.doc,A.doc)),this.pa(n),a=a!=null&&a;const o=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new Wx(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new VU,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=sn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new mJ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new hJ(n))}),r}ba(e){this.Ta=e.Ts,this.da=sn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Wx.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qxe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Wxe{constructor(e){this.key=e,this.va=!1}}class Xxe{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new R0(o=>gY(o),CI),this.Ma=new Map,this.xa=new Set,this.Oa=new es(ur.comparator),this.Na=new Map,this.La=new UO,this.Ba={},this.ka=new Map,this.qa=hp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Yxe(t,e,r=!0){const n=bJ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await pJ(n,e,r,!0),a}async function Jxe(t,e){const r=bJ(t);await pJ(r,e,!0,!1)}async function pJ(t,e,r,n){const a=await yxe(t.localStore,bu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await Zxe(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&lJ(t.remoteStore,a),o}async function Zxe(t,e,r,n,a){t.Ka=(A,h,f)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await MU(p.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,b)));const w=y&&y.targetChanges.get(g.targetId),I=y&&y.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,p.isPrimaryClient,w,I);return GU(p,g.targetId,T.wa),T.snapshot}(t,A,h,f);const s=await MU(t.localStore,e,!0),i=new zxe(e,s.Ts),o=i.ma(s.documents),c=Mb.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(o,t.isPrimaryClient,c);GU(t,r,u.wa);const d=new qxe(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function eve(t,e,r){const n=$r(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!CI(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await ZP(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&$O(n.remoteStore,a.targetId),tj(n,a.targetId)}).catch(Dp)):(tj(n,a.targetId),await ZP(n.localStore,a.targetId,!0))}async function tve(t,e){const r=$r(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$O(r.remoteStore,n.targetId))}async function rve(t,e,r){const n=wJ(t);try{const a=await function(i,o){const c=$r(i),u=Xt.now(),d=o.reduce((f,m)=>f.add(m.key),sn());let A,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=_c(),p=sn();return c.cs.getEntries(f,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(g=>{A=g;const x=[];for(const y of o){const b=yge(y,A.get(y.key).overlayedDocument);b!=null&&x.push(new Bf(y.key,b,lY(b.value.mapValue),Ya.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,x,o)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(A,p);return c.documentOverlayCache.saveOverlays(f,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:yY(A)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new es(Yr)),u=u.insert(o,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await Qb(n,a.changes),await Ub(n.remoteStore)}catch(a){const s=WO(a,"Failed to persist write");r.reject(s)}}async function gJ(t,e){const r=$r(t);try{const n=await gxe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Sr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Sr(i.va):a.removedDocuments.size>0&&(Sr(i.va),i.va=!1))}),await Qb(r,n,e)}catch(n){await Dp(n)}}function KU(t,e,r){const n=$r(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const o=i.view.Z_(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=$r(i);c.onlineState=o;let u=!1;c.queries.forEach((d,A)=>{for(const h of A.j_)h.Z_(o)&&(u=!0)}),u&&JO(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function nve(t,e,r){const n=$r(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new es(ur.comparator);i=i.insert(s,Wa.newNoDocument(s,Pr.min()));const o=sn().add(s),c=new II(Pr.min(),new Map,new es(Yr),i,o);await gJ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),e6(n)}else await ZP(n.localStore,e,!1).then(()=>tj(n,e,r)).catch(Dp)}async function ave(t,e){const r=$r(t),n=e.batch.batchId;try{const a=await pxe(r.localStore,e);vJ(r,n,null),xJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Qb(r,a)}catch(a){await Dp(a)}}async function sve(t,e,r){const n=$r(t);try{const a=await function(i,o){const c=$r(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(A=>(Sr(A!==null),d=A.keys(),c.mutationQueue.removeMutationBatch(u,A))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);vJ(n,e,r),xJ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Qb(n,a)}catch(a){await Dp(a)}}function xJ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function vJ(t,e,r){const n=$r(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function tj(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||yJ(t,n)})}function yJ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&($O(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),e6(t))}function GU(t,e,r){for(const n of r)n instanceof hJ?(t.La.addReference(n.key,e),ive(t,n)):n instanceof mJ?(Jt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||yJ(t,n.key)):wr()}function ive(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Jt("SyncEngine","New document in limbo: "+r),t.xa.add(n),e6(t))}function e6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ur(kn.fromString(e)),n=t.qa.next();t.Na.set(n,new Wxe(r)),t.Oa=t.Oa.insert(r,n),lJ(t.remoteStore,new zA(bu(Db(r.path)),n,"TargetPurposeLimboResolution",mu.oe))}}async function Qb(t,e,r){const n=$r(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((o,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const A=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,A?"current":"not-current")}if(u){a.push(u);const A=VO.Wi(c.targetId,u);s.push(A)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=$r(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Bt.forEach(u,h=>Bt.forEach(h.$i,f=>d.persistence.referenceDelegate.addReference(A,h.targetId,f)).next(()=>Bt.forEach(h.Ui,f=>d.persistence.referenceDelegate.removeReference(A,h.targetId,f)))))}catch(A){if(!D0(A))throw A;Jt("LocalStore","Failed to update sequence numbers: "+A)}for(const A of u){const h=A.targetId;if(!A.fromCache){const f=d.os.get(h),m=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function ove(t,e){const r=$r(t);if(!r.currentUser.isEqual(e)){Jt("SyncEngine","User change. New user:",e.toKey());const n=await aJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new ar(Mt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Qb(r,n.hs)}}function lve(t,e){const r=$r(t),n=r.Na.get(e);if(n&&n.va)return sn().add(n.key);{let a=sn();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const o=r.Fa.get(i);a=a.unionWith(o.view.Va)}return a}}function bJ(t){const e=$r(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nve.bind(null,e),e.Ca.d_=Kxe.bind(null,e.eventManager),e.Ca.$a=Gxe.bind(null,e.eventManager),e}function wJ(t){const e=$r(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ave.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sve.bind(null,e),e}class O2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jI(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return nJ(this.persistence,new rJ,e.initialUser,this.serializer)}Ga(e){return new tJ(PI.Zr,this.serializer)}Wa(e){return new iJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}O2.provider={build:()=>new O2};class cve extends O2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await wJ(this.Ja.syncEngine),await Ub(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return nJ(this.persistence,new rJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Yge(n,e.asyncQueue,r)}Ha(e,r){const n=new Cpe(r,this.persistence);return new _pe(e.asyncQueue,n)}Ga(e){const r=fxe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ml.withCacheSize(this.cacheSizeBytes):Ml.DEFAULT;return new QO(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Exe(),pC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new iJ}}class vE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>KU(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=ove.bind(null,this.syncEngine),await Vxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $xe}()}createDatastore(e){const r=jI(e.databaseInfo.databaseId),n=function(s){return new Cxe(s)}(e.databaseInfo);return function(s,i,o,c){return new Bxe(s,i,o,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,o){return new Pxe(n,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>KU(this.syncEngine,r,0),function(){return UU.D()?new UU:new wxe}())}createSyncEngine(e,r){return function(a,s,i,o,c,u,d){const A=new Xxe(a,s,i,o,c,u);return d&&(A.Qa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=$r(a);Jt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Lb(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}vE.provider={build:()=>new vE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ar(Mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=$r(a),o={documents:s.map(A=>k2(i.serializer,A))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,kn.emptyPath(),o,s.length),u=new Map;c.forEach(A=>{const h=Pge(i.serializer,A);u.set(h.key.toString(),h)});const d=[];return s.forEach(A=>{const h=u.get(A.toString());Sr(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new bv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=ur.fromPath(n);this.mutations.push(new jO(a,this.precondition(a)))}),await async function(n,a){const s=$r(n),i={writes:a.map(o=>F2(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,kn.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw wr();r=Pr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ar(Mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Pr.min())?Ya.exists(!1):Ya.updateTime(r):Ya.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Pr.min()))throw new ar(Mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ya.updateTime(r)}return Ya.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dve{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new HO(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new uve(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Fb(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!BY(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=mo.UNAUTHENTICATED,this.clientId=_O.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Jt("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Jt("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new od;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=WO(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function B3(t,e){t.asyncQueue.verifyOperationInProgress(),Jt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await aJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await fve(t);Jt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>QU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>QU(e.remoteStore,a)),t._onlineComponents=e}async function fve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Jt("FirestoreClient","Using user provided OfflineComponentProvider");try{await B3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Mt.FAILED_PRECONDITION||a.code===Mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;h0("Error using user provided cache. Falling back to memory cache: "+r),await B3(t,new O2)}}else Jt("FirestoreClient","Using default OfflineComponentProvider"),await B3(t,new O2);return t._offlineComponents}async function r6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Jt("FirestoreClient","Using user provided OnlineComponentProvider"),await zU(t,t._uninitializedComponentsProvider._online)):(Jt("FirestoreClient","Using default OnlineComponentProvider"),await zU(t,new vE))),t._onlineComponents}function hve(t){return r6(t).then(e=>e.syncEngine)}function mve(t){return r6(t).then(e=>e.datastore)}async function yE(t){const e=await r6(t),r=e.eventManager;return r.onListen=Yxe.bind(null,e.syncEngine),r.onUnlisten=eve.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Jxe.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=tve.bind(null,e.syncEngine),r}function pve(t,e,r={}){const n=new od;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new t6({next:h=>{d.Za(),i.enqueueAndForget(()=>YO(s,A));const f=h.docs.has(o);!f&&h.fromCache?u.reject(new ar(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new ar(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new ZO(Db(o.path),d,{includeMetadataChanges:!0,_a:!0});return XO(s,A)}(await yE(t),t.asyncQueue,e,r,n)),n.promise}function gve(t,e,r={}){const n=new od;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new t6({next:h=>{d.Za(),i.enqueueAndForget(()=>YO(s,A)),h.fromCache&&c.source==="server"?u.reject(new ar(Mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new ZO(o,d,{includeMetadataChanges:!0,_a:!0});return XO(s,A)}(await yE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(t,e,r){if(!r)throw new ar(Mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CJ(t,e,r,n){if(e===!0&&n===!0)throw new ar(Mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function WU(t){if(!ur.isDocumentKey(t))throw new ar(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XU(t){if(ur.isDocumentKey(t))throw new ar(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wr()}function Wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ar(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=FI(t);throw new ar(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ar(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ar(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NJ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ar(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ar(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ar(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OI{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YU({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ar(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ar(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YU(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qX;switch(n.type){case"firstParty":return new ppe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ar(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=qU.get(r);n&&(Jt("ComponentProvider","Removing Datastore"),qU.delete(r),n.terminate())}(this),Promise.resolve()}}function EJ(t,e,r,n={}){var a;const s=(t=Wi(t,OI))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&h0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let o,c;if(typeof n.mockUserToken=="string")o=n.mockUserToken,c=mo.MOCK_USER;else{o=kfe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new ar(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new mo(u)}t._authCredentials=new fpe(new zX(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cA(this.firestore,e,this._query)}}class Xi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xi(this.firestore,e,this._key)}}class tf extends cA{constructor(e,r,n){super(e,r,Db(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xi(this.firestore,null,new ur(e))}withConverter(e){return new tf(this.firestore,e,this._path)}}function ht(t,e,...r){if(t=ms(t),_J("collection","path",e),t instanceof OI){const n=kn.fromString(e,...r);return XU(n),new tf(t,null,n)}{if(!(t instanceof Xi||t instanceof tf))throw new ar(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(kn.fromString(e,...r));return XU(n),new tf(t.firestore,null,n)}}function Ht(t,e,...r){if(t=ms(t),arguments.length===1&&(e=_O.newId()),_J("doc","path",e),t instanceof OI){const n=kn.fromString(e,...r);return WU(n),new Xi(t,null,new ur(n))}{if(!(t instanceof Xi||t instanceof tf))throw new ar(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(kn.fromString(e,...r));return WU(n),new Xi(t.firestore,t instanceof tf?t.converter:null,new ur(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new HO(this,"async_queue_retry"),this.Vu=()=>{const n=pC();n&&Jt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=pC();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=pC();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new od;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!D0(e))throw e;Jt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(n);throw yl("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=qO.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&wr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function ZU(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pc extends OI{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new JU,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JU(e),this._firestoreClient=void 0,await e}}}function SJ(t,e){const r=typeof t=="object"?t:fO(),n=typeof t=="string"?t:"(default)",a=dO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=Pfe("firestore");s&&EJ(a,...s)}return a}function Lp(t){if(t._terminated)throw new ar(Mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IJ(t),t._firestoreClient}function IJ(t){var e,r,n;const a=t._freezeSettings(),s=function(o,c,u,d){return new zpe(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NJ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Ave(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}function BJ(t,e){h0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return xve(t,vE.provider,{build:n=>new cve(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function xve(t,e,r){if((t=Wi(t,Pc))._firestoreClient||t._terminated)throw new ar(Mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ar(Mt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},IJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new v0(Ks.fromBase64String(e))}catch(r){throw new ar(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new v0(Ks.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ar(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ar(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ar(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yr(this._lat,e._lat)||Yr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vve=/^__.*__$/;class yve{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Bf(e,this.data,this.fieldMask,r,this.fieldTransforms):new yv(e,this.data,r,this.fieldTransforms)}}class TJ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Bf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function PJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wr()}}class n6{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bE(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PJ(this.Cu)&&vve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bve{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||jI(e)}Qu(e,r,n,a=!1){return new n6({Cu:e,methodName:r,qu:n,path:Xa.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nv(t){const e=t._freezeSettings(),r=jI(t._databaseId);return new bve(t._databaseId,!!e.ignoreUndefinedProperties,r)}function LI(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);i6("Data must be an object, but it was:",i,n);const o=jJ(n,i);let c,u;if(s.merge)c=new Hl(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const A of s.mergeFields){const h=rj(e,A,r);if(!i.contains(h))throw new ar(Mt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);FJ(d,h)||d.push(h)}c=new Hl(d),u=i.fieldTransforms.filter(A=>c.covers(A.field))}else c=null,u=i.fieldTransforms;return new yve(new yo(o),c,u)}class UI extends DI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof UI}}function a6(t,e,r,n){const a=t.Qu(1,e,r);i6("Data must be an object, but it was:",a,n);const s=[],i=yo.empty();Rp(n,(c,u)=>{const d=o6(e,c,r);u=ms(u);const A=a.Nu(d);if(u instanceof UI)s.push(d);else{const h=Vb(u,A);h!=null&&(s.push(d),i.set(d,h))}});const o=new Hl(s);return new TJ(i,o,a.fieldTransforms)}function s6(t,e,r,n,a,s){const i=t.Qu(1,e,r),o=[rj(e,n,r)],c=[a];if(s.length%2!=0)throw new ar(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(rj(e,s[h])),c.push(s[h+1]);const u=[],d=yo.empty();for(let h=o.length-1;h>=0;--h)if(!FJ(u,o[h])){const f=o[h];let m=c[h];m=ms(m);const p=i.Nu(f);if(m instanceof UI)u.push(f);else{const g=Vb(m,p);g!=null&&(u.push(f),d.set(f,g))}}const A=new Hl(u);return new TJ(d,A,i.fieldTransforms)}function wve(t,e,r,n=!1){return Vb(r,t.Qu(n?4:3,e))}function Vb(t,e){if(kJ(t=ms(t)))return i6("Unsupported field value:",e,t),jJ(t,e);if(t instanceof DI)return function(n,a){if(!PJ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=Vb(o,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=ms(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return fge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Xt.fromDate(n);return{timestampValue:qx(a.serializer,s)}}if(n instanceof Xt){const s=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:qx(a.serializer,s)}}if(n instanceof RI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof v0)return{bytesValue:kY(a.serializer,n._byteString)};if(n instanceof Xi){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof MI)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return PO(o.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${FI(n)}`)}(t,e)}function jJ(t,e){const r={};return aY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rp(t,(n,a)=>{const s=Vb(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function kJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof RI||t instanceof v0||t instanceof Xi||t instanceof DI||t instanceof MI)}function i6(t,e,r){if(!kJ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=FI(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function rj(t,e,r){if((e=ms(e))instanceof Up)return e._internalPath;if(typeof e=="string")return o6(t,e);throw bE("Field path arguments must be of type string or ",t,!1,void 0,r)}const Nve=new RegExp("[~\\*/\\[\\]]");function o6(t,e,r){if(e.search(Nve)>=0)throw bE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Up(...e.split("."))._internalPath}catch{throw bE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function bE(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new ar(Mt.INVALID_ARGUMENT,o+t+c)}function FJ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _ve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(QI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class _ve extends wE{data(){return super.data()}}function QI(t,e){return typeof e=="string"?o6(t,e):e instanceof Up?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ar(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l6{}class VI extends l6{}function Kt(t,e,...r){let n=[];e instanceof l6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof HI).length,o=s.filter(c=>c instanceof Hb).length;if(i>1||i>0&&o>0)throw new ar(Mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Hb extends VI{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Hb(e,r,n)}_apply(e){const r=this._parse(e);return RJ(e._query,r),new cA(e.firestore,e.converter,KP(e._query,r))}_parse(e){const r=Nv(e.firestore);return function(s,i,o,c,u,d,A){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ar(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){t7(A,d);const f=[];for(const m of A)f.push(e7(c,s,m));h={arrayValue:{values:f}}}else h=e7(c,s,A)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||t7(A,d),h=wve(o,i,A,d==="in"||d==="not-in");return xn.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Zt(t,e,r){const n=e,a=QI("where",t);return Hb._create(a,n,r)}class HI extends l6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new HI(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ta.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)RJ(i,c),i=KP(i,c)}(e._query,r),new cA(e.firestore,e.converter,KP(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $I extends VI{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new $I(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new ar(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ar(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new T2(s,i)}(e._query,this._field,this._direction);return new cA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new vv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Gr(t,e="asc"){const r=e,n=QI("orderBy",t);return $I._create(n,r)}class KI extends VI{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new KI(e,r,n)}_apply(e){return new cA(e.firestore,e.converter,hE(e._query,this._limit,this._limitType))}}function DJ(t){return KI._create("limit",t,"F")}function e7(t,e,r){if(typeof(r=ms(r))=="string"){if(r==="")throw new ar(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pY(e)&&r.indexOf("/")!==-1)throw new ar(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(kn.fromString(r));if(!ur.isDocumentKey(n))throw new ar(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return I2(t,new ur(n))}if(r instanceof Xi)return I2(t,r._key);throw new ar(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${FI(r)}.`)}function t7(t,e){if(!Array.isArray(t)||t.length===0)throw new ar(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RJ(t,e){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ar(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ar(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class c6{convertValue(e,r="none"){switch(up(e)){case 0:return null;case 1:return e.booleanValue;case 2:return za(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(m0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Rp(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>za(i.doubleValue));return new MI(s)}convertGeoPoint(e){return new RI(za(e.latitude),za(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=BO(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(E2(e));default:return null}}convertTimestamp(e){const r=pf(e);return new Xt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=kn.fromString(e);Sr(HY(n));const a=new p0(n.get(1),n.get(3)),s=new ur(n.popFirst(5));return a.isEqual(r)||yl(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Cve extends c6{constructor(e){super(),this.firestore=e}convertBytes(e){return new v0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zI extends wE{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(QI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Fy extends zI{data(e={}){return super.data(e)}}class u6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Bm(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Fy(this._firestore,this._userDataWriter,n.key,n,new Bm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ar(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new Fy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Bm(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new Fy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new Bm(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Eve(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Eve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t){t=Wi(t,Xi);const e=Wi(t.firestore,Pc);return pve(Lp(e),t._key).then(r=>LJ(e,t,r))}class qI extends c6{constructor(e){super(),this.firestore=e}convertBytes(e){return new v0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function jt(t){t=Wi(t,cA);const e=Wi(t.firestore,Pc),r=Lp(e),n=new qI(e);return OJ(t._query),gve(r,t._query).then(a=>new u6(e,n,t,a))}function MJ(t,e,r){t=Wi(t,Xi);const n=Wi(t.firestore,Pc),a=GI(t.converter,e,r);return _v(n,[LI(Nv(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Ya.none())])}function Hr(t,e,r,...n){t=Wi(t,Xi);const a=Wi(t.firestore,Pc),s=Nv(a);let i;return i=typeof(e=ms(e))=="string"||e instanceof Up?s6(s,"updateDoc",t._key,e,r,n):a6(s,"updateDoc",t._key,e),_v(a,[i.toMutation(t._key,Ya.exists(!0))])}function _n(t){return _v(Wi(t.firestore,Pc),[new bv(t._key,Ya.none())])}function on(t,e){const r=Wi(t.firestore,Pc),n=Ht(t),a=GI(t.converter,e);return _v(r,[LI(Nv(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Ya.exists(!1))]).then(()=>n)}function y0(t,...e){var r,n,a;t=ms(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ZU(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ZU(e[i])){const A=e[i];e[i]=(r=A.next)===null||r===void 0?void 0:r.bind(A),e[i+1]=(n=A.error)===null||n===void 0?void 0:n.bind(A),e[i+2]=(a=A.complete)===null||a===void 0?void 0:a.bind(A)}let c,u,d;if(t instanceof Xi)u=Wi(t.firestore,Pc),d=Db(t._key.path),c={next:A=>{e[i]&&e[i](LJ(u,t,A))},error:e[i+1],complete:e[i+2]};else{const A=Wi(t,cA);u=Wi(A.firestore,Pc),d=A._query;const h=new qI(u);c={next:f=>{e[i]&&e[i](new u6(u,h,A,f))},error:e[i+1],complete:e[i+2]},OJ(t._query)}return function(h,f,m,p){const g=new t6(p),x=new ZO(f,g,m);return h.asyncQueue.enqueueAndForget(async()=>XO(await yE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>YO(await yE(h),x))}}(Lp(u),d,o,c)}function _v(t,e){return function(n,a){const s=new od;return n.asyncQueue.enqueueAndForget(async()=>rve(await hve(n),a,s)),s.promise}(Lp(t),e)}function LJ(t,e,r){const n=r.docs.get(e._key),a=new qI(t);return new zI(t,a,e._key,n,new Bm(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sve={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Nv(e)}set(e,r,n){this._verifyNotCommitted();const a=Oh(e,this._firestore),s=GI(a.converter,r,n),i=LI(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,Ya.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=Oh(e,this._firestore);let i;return i=typeof(r=ms(r))=="string"||r instanceof Up?s6(this._dataReader,"WriteBatch.update",s._key,r,n,a):a6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Ya.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Oh(e,this._firestore);return this._mutations=this._mutations.concat(new bv(r._key,Ya.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ar(Mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oh(t,e){if((t=ms(t)).firestore!==e)throw new ar(Mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Nv(r)}get(r){const n=Oh(r,this._firestore),a=new Cve(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return wr();const i=s[0];if(i.isFoundDocument())return new wE(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new wE(this._firestore,a,n._key,null,n.converter);throw wr()})}set(r,n,a){const s=Oh(r,this._firestore),i=GI(s.converter,n,a),o=LI(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,o),this}update(r,n,a,...s){const i=Oh(r,this._firestore);let o;return o=typeof(n=ms(n))=="string"||n instanceof Up?s6(this._dataReader,"Transaction.update",i._key,n,a,s):a6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(r){const n=Oh(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Oh(e,this._firestore),n=new qI(this._firestore);return super.get(e).then(a=>new zI(this._firestore,n,r._key,a._document,new Bm(!1,!1),r.converter))}}function Ni(t,e,r){t=Wi(t,Pc);const n=Object.assign(Object.assign({},Sve),r);return function(s){if(s.maxAttempts<1)throw new ar(Mt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,o){const c=new od;return s.asyncQueue.enqueueAndForget(async()=>{const u=await mve(s);new dve(s.asyncQueue,u,o,i,c).au()}),c.promise}(Lp(t),a=>e(new QJ(t,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){return Lp(t=Wi(t,Pc)),new UJ(t,e=>_v(t,e))}(function(e,r=!0){(function(a){xv=a})(pv),Qx(new ip("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Pc(new hpe(n.getProvider("auth-internal")),new xpe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ar(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new p0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),a0(zL,"4.7.3",e),a0(zL,"4.7.3","esm2017")})();const Ive=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:c6,Bytes:v0,CollectionReference:tf,DocumentReference:Xi,DocumentSnapshot:zI,FieldPath:Up,FieldValue:DI,Firestore:Pc,FirestoreError:ar,GeoPoint:RI,Query:cA,QueryCompositeFilterConstraint:HI,QueryConstraint:VI,QueryDocumentSnapshot:Fy,QueryFieldFilterConstraint:Hb,QueryLimitConstraint:KI,QueryOrderByConstraint:$I,QuerySnapshot:u6,SnapshotMetadata:Bm,Timestamp:Xt,Transaction:QJ,VectorValue:MI,WriteBatch:UJ,_AutoId:_O,_ByteString:Ks,_DatabaseId:p0,_DocumentKey:ur,_EmptyAuthCredentialsProvider:qX,_FieldPath:Xa,_cast:Wi,_logWarn:h0,_validateIsNotUsedTogether:CJ,addDoc:on,collection:ht,connectFirestoreEmulator:EJ,deleteDoc:_n,doc:Ht,enableIndexedDbPersistence:BJ,ensureFirestoreConfigured:Lp,executeWrite:_v,getDoc:So,getDocs:jt,getFirestore:SJ,limit:DJ,onSnapshot:y0,orderBy:Gr,query:Kt,runTransaction:Ni,setDoc:MJ,updateDoc:Hr,where:Zt,writeBatch:M0},Symbol.toStringTag,{value:"Module"})),Bve={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},VJ=AO(Bve),Fe=SJ(VJ),mp=UX(VJ);BJ(Fe).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Tve(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,o]=v.useState(""),[c,u]=v.useState(!1),d=Eb(),A=f=>{if(localStorage.setItem("role",f),f==="admin")return d("/admin");if(f==="vendedor_pollo")return d("/admin/salesV2");if(f==="vendedor_ropa")return d("/admin/salesClothes");if(f==="vendedor_dulces")return d("/admin/salesCandies")},h=async f=>{if(f.preventDefault(),o(""),!t.trim()){o("Ingresa el correo.");return}if(r.length<6){o("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),await J0e(mp,PX);const m=await Y0e(mp,t,r),p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await So(Ht(Fe,"users",p));if(!g.exists()){o("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data(),y=x.role||"",b=x.name||"";if(!["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].includes(y)){o("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),b&&localStorage.setItem("user_name",b),A(y)}catch(m){const p=String((m==null?void 0:m.code)||"");o(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas.":p==="auth/user-not-found"?"Usuario no encontrado.":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(m==null?void 0:m.message)||"Error al iniciar sesin.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen grid place-items-center ",children:l.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),l.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),l.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:f=>e(f.target.value),autoComplete:"username"}),l.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:f=>n(f.target.value),minLength:6,autoComplete:"current-password"}),l.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(f=>!f),children:a?"Ocultar":"Mostrar"})]}),l.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),l.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&l.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function rn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=IX(mp,async o=>{if(o){const c=Ht(Fe,"users",o.uid),u=await So(c);if(u.exists()){const d=u.data().role;s(e.includes(d))}}n(!1)});return()=>i()},[e]),r?l.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:l.jsx(dm,{to:"/"})}function Pve({role:t}){const e="/admin",r=({isActive:q})=>`block rounded px-3 py-2 text-sm ${q?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=Eb(),[a,s]=v.useState(!1),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[d,A]=v.useState(!1),[h,f]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(!1),[y,b]=v.useState(!1),[w,I]=v.useState(!1),[T,C]=v.useState(!1),[E,S]=v.useState(!1),[O,B]=v.useState(!1),[P,D]=v.useState(!1),[W,Ae]=v.useState(!1),[ee,ce]=v.useState(!1),[de,X]=v.useState(!1),pe=async()=>{await yI(mp),n("/")},Se=({open:q,onClick:R,children:K})=>l.jsxs("button",{type:"button",onClick:R,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[l.jsx("span",{children:K}),l.jsx("span",{className:"text-xs",children:q?"":""})]}),k=({open:q,onClick:R,title:K})=>l.jsxs("button",{type:"button",onClick:R,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[l.jsx("span",{className:"text-blue-500 font-medium ",children:K}),l.jsx("span",{className:"text-xs",children:q?"":""})]}),F=t==="admin",V=t==="vendedor_pollo"||t==="vendedor",M=t==="vendedor_ropa",L=t==="vendedor_dulces";return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("aside",{className:`${a?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[l.jsx("button",{onClick:()=>s(!a),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":a?"Expandir men":"Colapsar men",children:a?l.jsx("span",{title:"Expandir men",children:"Menu "}):l.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!a&&l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"space-y-1",children:[F&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[l.jsx(Se,{open:i,onClick:()=>o(q=>!q),children:"Pollos Bea"}),i&&l.jsxs("div",{className:"pb-2",children:[l.jsx(k,{open:c,onClick:()=>u(q=>!q),title:"Inventarios"}),c&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(qr,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),l.jsx(qr,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),l.jsx(k,{open:d,onClick:()=>A(q=>!q),title:"Finanzas"}),d&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(qr,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),l.jsx(qr,{to:`${e}/billing`,className:r,children:"Facturacion"}),l.jsx(qr,{to:`${e}/expenses`,className:r,children:"Gastos"}),l.jsx(qr,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(qr,{to:`${e}/bills`,className:r,children:"Cierre"}),l.jsx(qr,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),l.jsx(k,{open:h,onClick:()=>f(q=>!q),title:"Productos"}),h&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[l.jsx(Se,{open:m,onClick:()=>p(q=>!q),children:"Gonper"}),m&&l.jsx("div",{className:"pb-2",children:g&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/notebooksInventory`,className:r,children:"Productos y Precios"})})})]}),l.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[l.jsx(Se,{open:O,onClick:()=>B(q=>!q),children:"CandyShop"}),O&&l.jsxs("div",{className:"pb-2",children:[l.jsx(k,{open:W,onClick:()=>Ae(q=>!q),title:"Vendedores"}),W&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),W&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/productsVendorsCandies`,className:r,children:"Sub ordenes"})}),W&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/productsPricesCandies`,className:r,children:"Precios Venta"})}),l.jsx(k,{open:P,onClick:()=>D(q=>!q),title:"Inventario"}),P&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/mainordersCandies`,className:r,children:"Ordenes Maestras"})}),P&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/inventoryMainOrderCandies`,className:r,children:"Lista de Ordenes"})}),P&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/inventoryCandies`,className:r,children:"Lista Productos"})}),P&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/productsCandies`,className:r,children:"Productos"})}),l.jsx(k,{open:ee,onClick:()=>ce(q=>!q),title:"Finanzas"}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/datacenter`,className:r,children:"Data Center"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/cashDeliveries`,className:r,children:"Entregas Cash"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/transactionCandies`,className:r,children:"Transacciones"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierres"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/reporteCierresCandies`,className:r,children:"Reporte Cierres"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/billingsCandies`,className:r,children:"Facturas"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/consolidatedVendors`,className:r,children:"Consolidado Vendedores"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/dashboardCandies`,className:r,children:"Dashboard"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/customersCandies`,className:r,children:"Clientes"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/vendorsCandies`,className:r,children:"Vendedores"})}),ee&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/expensesCandies`,className:r,children:"Gastos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[l.jsx(Se,{open:de,onClick:()=>X(q=>!q),children:"Operaciones Otras"}),de&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(qr,{to:`${e}/users`,className:r,children:"Usuarios"}),l.jsx(qr,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),l.jsx(qr,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),V&&l.jsxs("div",{className:"border rounded",children:[l.jsx(Se,{open:d,onClick:()=>A(q=>!q),children:"Finanzas (Pollo)"}),d&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(qr,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(qr,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),L&&l.jsxs("div",{className:"border rounded",children:[l.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),l.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/transactionCandies`,className:r,children:"Ventas del dia"})}),l.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierre de Ventas"})}),l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/productsVendorsCandies`,className:r,children:"Pedidos"})}),l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/customersCandies`,className:r,children:"Clientes"})})]}),M&&l.jsxs("div",{className:"border rounded",children:[l.jsx(Se,{open:m,onClick:()=>p(q=>!q),children:"Operaciones Ropa"}),m&&l.jsxs("div",{className:"pb-2",children:[l.jsx(k,{open:T,onClick:()=>C(q=>!q),title:"Ventas"}),T&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(qr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),l.jsx(qr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),l.jsx(k,{open:y,onClick:()=>b(q=>!q),title:"Productos"}),y&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),l.jsx(k,{open:w,onClick:()=>I(q=>!q),title:"Clientes"}),w&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(qr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),l.jsx("button",{onClick:pe,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"})]})]}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx(LW,{})})]})}function T3(...t){return t.filter(Boolean).join(" ")}function jve({role:t}){const e=Eb(),r="/admin",n=t==="admin",a=t==="vendedor_pollo",s=t==="vendedor_dulces",[i,o]=v.useState(()=>a?"POLLO":s?"DULCES":"POLLO"),c=v.useMemo(()=>n?i==="POLLO"?[{key:"dash",label:"Dashboard",to:`${r}/financialDashboard`},{key:"inv",label:"Inventario",to:`${r}/batches`},{key:"invPag",label:"Factura",to:`${r}/paidBatches`},{key:"gastos",label:"Gastos",to:`${r}/expenses`}]:[{key:"dc",label:"Data",to:`${r}/datacenter`},{key:"maes",label:"Inventario",to:`${r}/mainordersCandies`},{key:"ord",label:"Rutas",to:`${r}/productsVendorsCandies`},{key:"cli",label:"Cuentas",to:`${r}/customersCandies`},{key:"trx",label:"Ventas",to:`${r}/transactionCandies`},{key:"cier",label:"Cierres",to:`${r}/cierreVentasCandies`},{key:"cash",label:"Cash",to:`${r}/cashDeliveries`},{key:"items",label:"Items",to:`${r}/productsCandies`}]:a?[{key:"venta",label:"Venta",to:`${r}/salesV2`},{key:"inv",label:"Inventario",to:`${r}/batches`},{key:"cierre",label:"Cierre",to:`${r}/bills`}]:s?[{key:"venta",label:"Vender",to:`${r}/salesCandies`},{key:"precios",label:"Precios",to:`${r}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${r}/productsVendorsCandies`},{key:"cli",label:"Cuentas",to:`${r}/customersCandies`},{key:"trx",label:"Ventas",to:`${r}/transactionCandies`},{key:"cier",label:"Cierre",to:`${r}/cierreVentasCandies`}]:[{key:"home",label:"Inicio",to:`${r}`}],[n,a,s,i]);v.useEffect(()=>{n&&c.length&&e(c[0].to,{replace:!0})},[i]);const u=async()=>{await yI(mp),e("/")},d=({isActive:A})=>T3("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",A?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100");return l.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[l.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:l.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[n?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("POLLO"),className:T3("px-3 py-2 rounded-2xl text-sm font-semibold",i==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Pollos Bea"}),l.jsx("button",{type:"button",onClick:()=>o("DULCES"),className:T3("px-3 py-2 rounded-2xl text-sm font-semibold",i==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"CandyShop"})]}):l.jsx("div",{className:"text-sm font-semibold text-gray-800",children:a?"Pollos Bea":s?"CandyShop":"Posys"}),l.jsx("div",{className:"ml-auto flex items-center gap-2",children:l.jsx("button",{onClick:u,className:"px-3 py-2 rounded-2xl bg-red-500 text-white text-sm font-semibold shadow hover:bg-red-600",children:"Cerrar"})})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto px-3 pt-3 pb-[calc(92px+env(safe-area-inset-bottom))]",children:l.jsx(LW,{})}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:l.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:c.map(A=>l.jsx(qr,{to:A.to,className:d,children:A.label},A.key))})})]})}const HJ=6048e5,kve=864e5,r7=Symbol.for("constructDateFrom");function hd(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&r7 in t?t[r7](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bl(t,e){return hd(e||t,t)}function Fve(t,e,r){const n=Bl(t,r==null?void 0:r.in);return isNaN(e)?hd(t,NaN):(n.setDate(n.getDate()+e),n)}function Ove(t,e,r){const n=Bl(t,r==null?void 0:r.in);if(isNaN(e))return hd(t,NaN);const a=n.getDate(),s=hd(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Dve={};function WI(){return Dve}function D2(t,e){var o,c,u,d;const r=WI(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Bl(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function NE(t,e){return D2(t,{...e,weekStartsOn:1})}function $J(t,e){const r=Bl(t,e==null?void 0:e.in),n=r.getFullYear(),a=hd(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=NE(a),i=hd(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=NE(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function n7(t){const e=Bl(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Rve(t,...e){const r=hd.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function a7(t,e){const r=Bl(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Mve(t,e,r){const[n,a]=Rve(r==null?void 0:r.in,t,e),s=a7(n),i=a7(a),o=+s-n7(s),c=+i-n7(i);return Math.round((o-c)/kve)}function Lve(t,e){const r=$J(t,e),n=hd(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),NE(n)}function Uve(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Qve(t){return!(!Uve(t)&&typeof t!="number"||isNaN(+Bl(t)))}function vd(t,e){const r=Bl(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function yd(t,e){const r=Bl(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Vve(t,e){const r=Bl(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Hve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$ve=(t,e,r)=>{let n;const a=Hve[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function P3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Kve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qve={date:P3({formats:Kve,defaultWidth:"full"}),time:P3({formats:Gve,defaultWidth:"full"}),dateTime:P3({formats:zve,defaultWidth:"full"})},Wve={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xve=(t,e,r,n)=>Wve[t];function w1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[o]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const Yve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jve={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},r1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},n1e=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},a1e={ordinalNumber:n1e,era:w1({values:Yve,defaultWidth:"wide"}),quarter:w1({values:Jve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:w1({values:Zve,defaultWidth:"wide"}),day:w1({values:e1e,defaultWidth:"wide"}),dayPeriod:w1({values:t1e,defaultWidth:"wide",formattingValues:r1e,defaultFormattingWidth:"wide"})};function N1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?i1e(o,A=>A.test(i)):s1e(o,A=>A.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function s1e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function i1e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function o1e(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const o=e.slice(a.length);return{value:i,rest:o}}}const l1e=/^(\d+)(th|st|nd|rd)?/i,c1e=/\d+/i,u1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},d1e={any:[/^b/i,/^(a|c)/i]},A1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f1e={any:[/1/i,/2/i,/3/i,/4/i]},h1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},m1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},g1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},v1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y1e={ordinalNumber:o1e({matchPattern:l1e,parsePattern:c1e,valueCallback:t=>parseInt(t,10)}),era:N1({matchPatterns:u1e,defaultMatchWidth:"wide",parsePatterns:d1e,defaultParseWidth:"any"}),quarter:N1({matchPatterns:A1e,defaultMatchWidth:"wide",parsePatterns:f1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:N1({matchPatterns:h1e,defaultMatchWidth:"wide",parsePatterns:m1e,defaultParseWidth:"any"}),day:N1({matchPatterns:p1e,defaultMatchWidth:"wide",parsePatterns:g1e,defaultParseWidth:"any"}),dayPeriod:N1({matchPatterns:x1e,defaultMatchWidth:"any",parsePatterns:v1e,defaultParseWidth:"any"})},b1e={code:"en-US",formatDistance:$ve,formatLong:qve,formatRelative:Xve,localize:a1e,match:y1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w1e(t,e){const r=Bl(t,e==null?void 0:e.in);return Mve(r,Vve(r))+1}function N1e(t,e){const r=Bl(t,e==null?void 0:e.in),n=+NE(r)-+Lve(r);return Math.round(n/HJ)+1}function KJ(t,e){var d,A,h,f;const r=Bl(t,e==null?void 0:e.in),n=r.getFullYear(),a=WI(),s=(e==null?void 0:e.firstWeekContainsDate)??((A=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(h=a.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=hd((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const o=D2(i,e),c=hd((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=D2(c,e);return+r>=+o?n+1:+r>=+u?n:n-1}function _1e(t,e){var o,c,u,d;const r=WI(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=KJ(t,e),s=hd((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),D2(s,e)}function C1e(t,e){const r=Bl(t,e==null?void 0:e.in),n=+D2(r,e)-+_1e(r,e);return Math.round(n/HJ)+1}function Yn(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const uh={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Yn(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Yn(r+1,2)},d(t,e){return Yn(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Yn(t.getHours()%12||12,e.length)},H(t,e){return Yn(t.getHours(),e.length)},m(t,e){return Yn(t.getMinutes(),e.length)},s(t,e){return Yn(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Yn(a,e.length)}},hg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},s7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return uh.y(t,e)},Y:function(t,e,r,n){const a=KJ(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return Yn(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Yn(s,e.length)},R:function(t,e){const r=$J(t);return Yn(r,e.length)},u:function(t,e){const r=t.getFullYear();return Yn(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Yn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Yn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return uh.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Yn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=C1e(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Yn(a,e.length)},I:function(t,e,r){const n=N1e(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Yn(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):uh.d(t,e)},D:function(t,e,r){const n=w1e(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Yn(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Yn(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Yn(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Yn(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=hg.noon:n===0?a=hg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=hg.evening:n>=12?a=hg.afternoon:n>=4?a=hg.morning:a=hg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return uh.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):uh.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Yn(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Yn(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):uh.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):uh.s(t,e)},S:function(t,e){return uh.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return o7(n);case"XXXX":case"XX":return hm(n);case"XXXXX":case"XXX":default:return hm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return o7(n);case"xxxx":case"xx":return hm(n);case"xxxxx":case"xxx":default:return hm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+i7(n,":");case"OOOO":default:return"GMT"+hm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+i7(n,":");case"zzzz":default:return"GMT"+hm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Yn(n,e.length)},T:function(t,e,r){return Yn(+t,e.length)}};function i7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Yn(s,2)}function o7(t,e){return t%60===0?(t>0?"-":"+")+Yn(Math.abs(t)/60,2):hm(t,e)}function hm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Yn(Math.trunc(n/60),2),s=Yn(n%60,2);return r+a+e+s}const l7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},E1e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return l7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",l7(n,e)).replace("{{time}}",GJ(a,e))},S1e={p:GJ,P:E1e},I1e=/^D+$/,B1e=/^Y+$/,T1e=["D","DD","YY","YYYY"];function P1e(t){return I1e.test(t)}function j1e(t){return B1e.test(t)}function k1e(t,e,r){const n=F1e(t,e,r);if(console.warn(n),T1e.includes(t))throw new RangeError(n)}function F1e(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D1e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,R1e=/^'([^]*?)'?$/,M1e=/''/g,L1e=/[a-zA-Z]/;function dr(t,e,r){var d,A,h,f;const n=WI(),a=n.locale??b1e,s=n.firstWeekContainsDate??((A=(d=n.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??1,i=n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,o=Bl(t,r==null?void 0:r.in);if(!Qve(o))throw new RangeError("Invalid time value");let c=e.match(D1e).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=S1e[p];return g(m,a.formatLong)}return m}).join("").match(O1e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:U1e(m)};if(s7[p])return{isToken:!0,value:m};if(p.match(L1e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(j1e(p)||P1e(p))&&k1e(p,e,String(t));const g=s7[p[0]];return g(o,p,a.localize,u)}).join("")}function U1e(t){const e=t.match(R1e);return e?e[1].replace(M1e,"'"):t}function zJ(t,e,r){return Fve(t,-14,r)}function Q1e(t,e,r){return Ove(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nj=function(t,e){return nj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},nj(t,e)};function bd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nj(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var aj=function(){return aj=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},aj.apply(this,arguments)};function hl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(t,[])).next())})}function Vo(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function pN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var gf=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),XI=function(t,e){return gf.fromClientRect(t,e.getBoundingClientRect())},V1e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new gf(0,0,n,a)},YI=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Ms=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},c7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gN=0;gN<c7.length;gN++)H1e[c7.charCodeAt(gN)]=gN;var u7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ny=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xN=0;xN<u7.length;xN++)ny[u7.charCodeAt(xN)]=xN;var $1e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ny[t.charCodeAt(n)],i=ny[t.charCodeAt(n+1)],o=ny[t.charCodeAt(n+2)],c=ny[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},K1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},G1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Um=5,d6=11,j3=2,z1e=d6-Um,qJ=65536>>Um,q1e=1<<Um,k3=q1e-1,W1e=1024>>Um,X1e=qJ+W1e,Y1e=X1e,J1e=32,Z1e=Y1e+J1e,eye=65536>>d6,tye=1<<z1e,rye=tye-1,d7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},nye=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},aye=function(t,e){var r=$1e(t),n=Array.isArray(r)?G1e(r):new Uint32Array(r),a=Array.isArray(r)?K1e(r):new Uint16Array(r),s=24,i=d7(a,s/2,n[4]/2),o=n[5]===2?d7(a,(s+n[4])/2):nye(n,Math.ceil((s+n[4])/4));return new sye(n[0],n[1],n[2],n[3],i,o)},sye=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Um],r=(r<<j3)+(e&k3),this.data[r];if(e<=65535)return r=this.index[qJ+(e-55296>>Um)],r=(r<<j3)+(e&k3),this.data[r];if(e<this.highStart)return r=Z1e-eye+(e>>d6),r=this.index[r],r+=e>>Um&rye,r=this.index[r],r=(r<<j3)+(e&k3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),A7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vN=0;vN<A7.length;vN++)iye[A7.charCodeAt(vN)]=vN;var oye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",f7=50,lye=1,WJ=2,XJ=3,cye=4,uye=5,h7=7,YJ=8,m7=9,Qh=10,sj=11,p7=12,ij=13,dye=14,ay=15,oj=16,yN=17,_1=18,Aye=19,g7=20,lj=21,C1=22,F3=23,mg=24,mc=25,sy=26,iy=27,pg=28,fye=29,_m=30,hye=31,bN=32,wN=33,cj=34,uj=35,dj=36,R2=37,Aj=38,gC=39,xC=40,O3=41,JJ=42,mye=43,pye=[9001,65288],ZJ="!",pn="",NN="",fj=aye(oye),SA=[_m,dj],hj=[lye,WJ,XJ,uye],eZ=[Qh,YJ],x7=[iy,sy],gye=hj.concat(eZ),v7=[Aj,gC,xC,cj,uj],xye=[ay,ij],vye=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var o=fj.get(s);if(o>f7?(a.push(!0),o-=f7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(oj);if(o===cye||o===sj){if(i===0)return n.push(i),r.push(_m);var c=r[i-1];return gye.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(_m))}if(n.push(i),o===hye)return r.push(e==="strict"?lj:R2);if(o===JJ||o===fye)return r.push(_m);if(o===mye)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(R2):r.push(_m);r.push(o)}),[n,r,a]},D3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==Qh)break}if(a===Qh)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==Qh)break}if(o!==Qh)break}return!1},y7=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Qh)r--;else return n}return 0},yye=function(t,e,r,n,a){if(r[n]===0)return pn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return pn;var i=s-1,o=s+1,c=e[s],u=i>=0?e[i]:0,d=e[o];if(c===WJ&&d===XJ)return pn;if(hj.indexOf(c)!==-1)return ZJ;if(hj.indexOf(d)!==-1||eZ.indexOf(d)!==-1)return pn;if(y7(s,e)===YJ)return NN;if(fj.get(t[s])===sj||(c===bN||c===wN)&&fj.get(t[o])===sj||c===h7||d===h7||c===m7||[Qh,ij,ay].indexOf(c)===-1&&d===m7||[yN,_1,Aye,mg,pg].indexOf(d)!==-1||y7(s,e)===C1||D3(F3,C1,s,e)||D3([yN,_1],lj,s,e)||D3(p7,p7,s,e))return pn;if(c===Qh)return NN;if(c===F3||d===F3)return pn;if(d===oj||c===oj)return NN;if([ij,ay,lj].indexOf(d)!==-1||c===dye||u===dj&&xye.indexOf(c)!==-1||c===pg&&d===dj||d===g7||SA.indexOf(d)!==-1&&c===mc||SA.indexOf(c)!==-1&&d===mc||c===iy&&[R2,bN,wN].indexOf(d)!==-1||[R2,bN,wN].indexOf(c)!==-1&&d===sy||SA.indexOf(c)!==-1&&x7.indexOf(d)!==-1||x7.indexOf(c)!==-1&&SA.indexOf(d)!==-1||[iy,sy].indexOf(c)!==-1&&(d===mc||[C1,ay].indexOf(d)!==-1&&e[o+1]===mc)||[C1,ay].indexOf(c)!==-1&&d===mc||c===mc&&[mc,pg,mg].indexOf(d)!==-1)return pn;if([mc,pg,mg,yN,_1].indexOf(d)!==-1)for(var A=s;A>=0;){var h=e[A];if(h===mc)return pn;if([pg,mg].indexOf(h)!==-1)A--;else break}if([iy,sy].indexOf(d)!==-1)for(var A=[yN,_1].indexOf(c)!==-1?i:s;A>=0;){var h=e[A];if(h===mc)return pn;if([pg,mg].indexOf(h)!==-1)A--;else break}if(Aj===c&&[Aj,gC,cj,uj].indexOf(d)!==-1||[gC,cj].indexOf(c)!==-1&&[gC,xC].indexOf(d)!==-1||[xC,uj].indexOf(c)!==-1&&d===xC||v7.indexOf(c)!==-1&&[g7,sy].indexOf(d)!==-1||v7.indexOf(d)!==-1&&c===iy||SA.indexOf(c)!==-1&&SA.indexOf(d)!==-1||c===mg&&SA.indexOf(d)!==-1||SA.concat(mc).indexOf(c)!==-1&&d===C1&&pye.indexOf(t[o])===-1||SA.concat(mc).indexOf(d)!==-1&&c===_1)return pn;if(c===O3&&d===O3){for(var f=r[s],m=1;f>0&&(f--,e[f]===O3);)m++;if(m%2!==0)return pn}return c===bN&&d===wN?pn:NN},bye=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=vye(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[mc,_m,JJ].indexOf(o)!==-1?R2:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,c){return o&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},wye=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===ZJ,this.start=n,this.end=a}return t.prototype.slice=function(){return Ms.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Nye=function(t,e){var r=YI(t),n=bye(r,e),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=pn;u<o&&(d=yye(r,s,a,++u,i))===pn;);if(d!==pn||u===o){var A=new wye(r,d,c,u);return c=u,{value:A,done:!1}}return{done:!0,value:null}}}},_ye=1,Cye=2,$b=4,b7=8,_E=10,w7=47,Oy=92,Eye=9,Sye=32,_N=34,E1=61,Iye=35,Bye=36,Tye=37,CN=39,EN=40,S1=41,Pye=95,Ll=45,jye=33,kye=60,Fye=62,Oye=64,Dye=91,Rye=93,Mye=61,Lye=123,SN=63,Uye=125,N7=124,Qye=126,Vye=128,_7=65533,R3=42,Tm=43,Hye=44,$ye=58,Kye=59,M2=46,Gye=0,zye=8,qye=11,Wye=14,Xye=31,Yye=127,Fd=-1,tZ=48,rZ=97,nZ=101,Jye=102,Zye=117,e2e=122,aZ=65,sZ=69,iZ=70,t2e=85,r2e=90,Ko=function(t){return t>=tZ&&t<=57},n2e=function(t){return t>=55296&&t<=57343},gg=function(t){return Ko(t)||t>=aZ&&t<=iZ||t>=rZ&&t<=Jye},a2e=function(t){return t>=rZ&&t<=e2e},s2e=function(t){return t>=aZ&&t<=r2e},i2e=function(t){return a2e(t)||s2e(t)},o2e=function(t){return t>=Vye},IN=function(t){return t===_E||t===Eye||t===Sye},CE=function(t){return i2e(t)||o2e(t)||t===Pye},C7=function(t){return CE(t)||Ko(t)||t===Ll},l2e=function(t){return t>=Gye&&t<=zye||t===qye||t>=Wye&&t<=Xye||t===Yye},_h=function(t,e){return t!==Oy?!1:e!==_E},BN=function(t,e,r){return t===Ll?CE(e)||_h(e,r):CE(t)?!0:!!(t===Oy&&_h(t,e))},M3=function(t,e,r){return t===Tm||t===Ll?Ko(e)?!0:e===M2&&Ko(r):Ko(t===M2?e:t)},c2e=function(t){var e=0,r=1;(t[e]===Tm||t[e]===Ll)&&(t[e]===Ll&&(r=-1),e++);for(var n=[];Ko(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Ms.apply(void 0,n),10):0;t[e]===M2&&e++;for(var s=[];Ko(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Ms.apply(void 0,s),10):0;(t[e]===sZ||t[e]===nZ)&&e++;var c=1;(t[e]===Tm||t[e]===Ll)&&(t[e]===Ll&&(c=-1),e++);for(var u=[];Ko(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Ms.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},u2e={type:2},d2e={type:3},A2e={type:4},f2e={type:13},h2e={type:8},m2e={type:21},p2e={type:9},g2e={type:10},x2e={type:11},v2e={type:12},y2e={type:14},TN={type:23},b2e={type:1},w2e={type:25},N2e={type:24},_2e={type:26},C2e={type:27},E2e={type:28},S2e={type:29},I2e={type:31},mj={type:32},oZ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(YI(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==mj;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case _N:return this.consumeStringToken(_N);case Iye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(C7(r)||_h(n,a)){var s=BN(r,n,a)?Cye:_ye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Bye:if(this.peekCodePoint(0)===E1)return this.consumeCodePoint(),f2e;break;case CN:return this.consumeStringToken(CN);case EN:return u2e;case S1:return d2e;case R3:if(this.peekCodePoint(0)===E1)return this.consumeCodePoint(),y2e;break;case Tm:if(M3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Hye:return A2e;case Ll:var o=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(M3(o,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(BN(o,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Ll&&u===Fye)return this.consumeCodePoint(),this.consumeCodePoint(),N2e;break;case M2:if(M3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case w7:if(this.peekCodePoint(0)===R3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===R3&&(d=this.consumeCodePoint(),d===w7))return this.consumeToken();if(d===Fd)return this.consumeToken()}break;case $ye:return _2e;case Kye:return C2e;case kye:if(this.peekCodePoint(0)===jye&&this.peekCodePoint(1)===Ll&&this.peekCodePoint(2)===Ll)return this.consumeCodePoint(),this.consumeCodePoint(),w2e;break;case Oye:var A=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(BN(A,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case Dye:return E2e;case Oy:if(_h(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Rye:return S2e;case Mye:if(this.peekCodePoint(0)===E1)return this.consumeCodePoint(),h2e;break;case Lye:return x2e;case Uye:return v2e;case Zye:case t2e:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Tm&&(gg(p)||p===SN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case N7:if(this.peekCodePoint(0)===E1)return this.consumeCodePoint(),p2e;if(this.peekCodePoint(0)===N7)return this.consumeCodePoint(),m2e;break;case Qye:if(this.peekCodePoint(0)===E1)return this.consumeCodePoint(),g2e;break;case Fd:return mj}return IN(e)?(this.consumeWhiteSpace(),I2e):Ko(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):CE(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ms(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();gg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===SN&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ms.apply(void 0,e.map(function(c){return c===SN?tZ:c})),16),s=parseInt(Ms.apply(void 0,e.map(function(c){return c===SN?iZ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Ms.apply(void 0,e),16);if(this.peekCodePoint(0)===Ll&&gg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];gg(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Ms.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===EN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===EN?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fd)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===CN||r===_N){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fd||this.peekCodePoint(0)===S1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),TN)}for(;;){var a=this.consumeCodePoint();if(a===Fd||a===S1)return{type:22,value:Ms.apply(void 0,e)};if(IN(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fd||this.peekCodePoint(0)===S1?(this.consumeCodePoint(),{type:22,value:Ms.apply(void 0,e)}):(this.consumeBadUrlRemnants(),TN);if(a===_N||a===CN||a===EN||l2e(a))return this.consumeBadUrlRemnants(),TN;if(a===Oy)if(_h(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),TN;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;IN(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===S1||e===Fd)return;_h(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Ms.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===Fd||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===_E)return this._value.splice(0,n),b2e;if(a===Oy){var s=this._value[n+1];s!==Fd&&s!==void 0&&(s===_E?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):_h(a,s)&&(r+=this.consumeStringSlice(n),r+=Ms(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=$b,n=this.peekCodePoint(0);for((n===Tm||n===Ll)&&e.push(this.consumeCodePoint());Ko(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===M2&&Ko(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=b7;Ko(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===sZ||n===nZ)&&((a===Tm||a===Ll)&&Ko(s)||Ko(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=b7;Ko(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[c2e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(BN(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Tye?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(gg(e)){for(var r=Ms(e);gg(this.peekCodePoint(0))&&r.length<6;)r+=Ms(this.consumeCodePoint());IN(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||n2e(n)||n>1114111?_7:n}return e===Fd?_7:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(C7(r))e+=Ms(r);else if(_h(r,this.peekCodePoint(0)))e+=Ms(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),lZ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new oZ;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||T2e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?mj:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Kb=function(t){return t.type===15},Cv=function(t){return t.type===17},la=function(t){return t.type===20},B2e=function(t){return t.type===0},pj=function(t,e){return la(t)&&t.value===e},cZ=function(t){return t.type!==31},Xx=function(t){return t.type!==31&&t.type!==4},uA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},T2e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},b0=function(t){return t.type===17||t.type===15},Js=function(t){return t.type===16||b0(t)},uZ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},wo={type:17,number:0,flags:$b},A6={type:16,number:50,flags:$b},Vh={type:16,number:100,flags:$b},oy=function(t,e,r){var n=t[0],a=t[1];return[Ca(n,e),Ca(typeof a<"u"?a:n,r)]},Ca=function(t,e){if(t.type===16)return t.number/100*e;if(Kb(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},dZ="deg",AZ="grad",fZ="rad",hZ="turn",JI={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case dZ:return Math.PI*e.number/180;case AZ:return Math.PI/200*e.number;case fZ:return e.number;case hZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},mZ=function(t){return t.type===15&&(t.unit===dZ||t.unit===AZ||t.unit===fZ||t.unit===hZ)},pZ=function(t){var e=t.filter(la).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wo,wo];case"to top":case"bottom":return pu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wo,Vh];case"to right":case"left":return pu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vh,Vh];case"to bottom":case"top":return pu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vh,wo];case"to left":case"right":return pu(270)}return 0},pu=function(t){return Math.PI*t/180},i0={name:"color",parse:function(t,e){if(e.type===18){var r=P2e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Hh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Hh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Hh(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Hh(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=rf[e.value.toUpperCase()];if(typeof o<"u")return o}return rf.TRANSPARENT}},o0=function(t){return(255&t)===0},Oi=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Hh=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},E7=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},S7=function(t,e){var r=e.filter(Xx);if(r.length===3){var n=r.map(E7),a=n[0],s=n[1],i=n[2];return Hh(a,s,i,1)}if(r.length===4){var o=r.map(E7),a=o[0],s=o[1],i=o[2],c=o[3];return Hh(a,s,i,c)}return 0};function L3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var I7=function(t,e){var r=e.filter(Xx),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?pu(n.number):JI.parse(t,n))/(Math.PI*2),c=Js(a)?a.number/100:0,u=Js(s)?s.number/100:0,d=typeof i<"u"&&Js(i)?Ca(i,1):1;if(c===0)return Hh(u*255,u*255,u*255,1);var A=u<=.5?u*(c+1):u+c-u*c,h=u*2-A,f=L3(h,A,o+1/3),m=L3(h,A,o),p=L3(h,A,o-1/3);return Hh(f*255,m*255,p*255,d)},P2e={hsl:I7,hsla:I7,rgb:S7,rgba:S7},Dy=function(t,e){return i0.parse(t,lZ.create(e).parseComponentValue())},rf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},j2e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(la(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},k2e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ZI=function(t,e){var r=i0.parse(t,e[0]),n=e[1];return n&&Js(n)?{color:r,stop:n}:{color:r,stop:null}},B7=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=wo),n.stop===null&&(n.stop=Vh);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var c=Ca(o,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var A=i-u,h=a[u-1],f=(d-h)/(A+1),m=1;m<=A;m++)a[u+m-1]=f*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},F2e=function(t,e,r){var n=e/2,a=r/2,s=Ca(t[0],e)-n,i=a-Ca(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},O2e=function(t,e,r){var n=typeof t=="number"?t:F2e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},Gu=function(t,e){return Math.sqrt(t*t+e*e)},T7=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=Gu(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},D2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(Gu(e,r),Gu(e,r-a),Gu(e-n,r),Gu(e-n,r-a));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=T7(n,a,e,r,!0),u=c[0],d=c[1];s=Gu(u-e,(d-r)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(Gu(e,r),Gu(e,r-a),Gu(e-n,r),Gu(e-n,r-a));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),A=T7(n,a,e,r,!1),u=A[0],d=A[1];s=Gu(u-e,(d-r)/o),i=o*s}break}return Array.isArray(t.size)&&(s=Ca(t.size[0],n),i=t.size.length===2?Ca(t.size[1],a):s),[s,i]},R2e=function(t,e){var r=pu(180),n=[];return uA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=pZ(a);return}else if(mZ(i)){r=JI.parse(t,i);return}}var o=ZI(t,a);n.push(o)}),{angle:r,stops:n,type:1}},PN=function(t,e){var r=pu(180),n=[];return uA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=pZ(a);return}else if(mZ(i)){r=(JI.parse(t,i)+pu(270))%pu(360);return}}var o=ZI(t,a);n.push(o)}),{angle:r,stops:n,type:1}},M2e=function(t,e){var r=pu(180),n=[],a=1,s=0,i=3,o=[];return uA(e).forEach(function(c,u){var d=c[0];if(u===0){if(la(d)&&d.value==="linear"){a=1;return}else if(la(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var A=i0.parse(t,d.values[0]);n.push({stop:wo,color:A})}else if(d.name==="to"){var A=i0.parse(t,d.values[0]);n.push({stop:Vh,color:A})}else if(d.name==="color-stop"){var h=d.values.filter(Xx);if(h.length===2){var A=i0.parse(t,h[1]),f=h[0];Cv(f)&&n.push({stop:{type:16,number:f.number*100,flags:f.flags},color:A})}}}}),a===1?{angle:(r+pu(180))%pu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},gZ="closest-side",xZ="farthest-side",vZ="closest-corner",yZ="farthest-corner",bZ="circle",wZ="ellipse",NZ="cover",_Z="contain",L2e=function(t,e){var r=0,n=3,a=[],s=[];return uA(e).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(A,h){if(u)if(la(h))switch(h.value){case"center":return s.push(A6),A;case"top":case"left":return s.push(wo),A;case"right":case"bottom":return s.push(Vh),A}else(Js(h)||b0(h))&&s.push(h);else if(la(h))switch(h.value){case bZ:return r=0,!1;case wZ:return r=1,!1;case"at":return u=!0,!1;case gZ:return n=0,!1;case NZ:case xZ:return n=1,!1;case _Z:case vZ:return n=2,!1;case yZ:return n=3,!1}else if(b0(h)||Js(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return A},c)}if(c){var d=ZI(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},jN=function(t,e){var r=0,n=3,a=[],s=[];return uA(e).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,A){if(la(A))switch(A.value){case"center":return s.push(A6),!1;case"top":case"left":return s.push(wo),!1;case"right":case"bottom":return s.push(Vh),!1}else if(Js(A)||b0(A))return s.push(A),!1;return d},c):o===1&&(c=i.reduce(function(d,A){if(la(A))switch(A.value){case bZ:return r=0,!1;case wZ:return r=1,!1;case _Z:case gZ:return n=0,!1;case xZ:return n=1,!1;case vZ:return n=2,!1;case NZ:case yZ:return n=3,!1}else if(b0(A)||Js(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return d},c)),c){var u=ZI(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},U2e=function(t){return t.type===1},Q2e=function(t){return t.type===2},f6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=CZ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function V2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!CZ[t.name])}var CZ={"linear-gradient":R2e,"-moz-linear-gradient":PN,"-ms-linear-gradient":PN,"-o-linear-gradient":PN,"-webkit-linear-gradient":PN,"radial-gradient":L2e,"-moz-radial-gradient":jN,"-ms-radial-gradient":jN,"-o-radial-gradient":jN,"-webkit-radial-gradient":jN,"-webkit-gradient":M2e},H2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Xx(n)&&V2e(n)}).map(function(n){return f6.parse(t,n)})}},$2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(la(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},K2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return uA(e).map(function(r){return r.filter(Js)}).map(uZ)}},G2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return uA(e).map(function(r){return r.filter(la).map(function(n){return n.value}).join(" ")}).map(z2e)}},z2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ex;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Ex||(Ex={}));var q2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return uA(e).map(function(r){return r.filter(W2e)})}},W2e=function(t){return la(t)||Js(t)},e4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},X2e=e4("top"),Y2e=e4("right"),J2e=e4("bottom"),Z2e=e4("left"),t4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return uZ(r.filter(Js))}}},ebe=t4("top-left"),tbe=t4("top-right"),rbe=t4("bottom-right"),nbe=t4("bottom-left"),r4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},abe=r4("top"),sbe=r4("right"),ibe=r4("bottom"),obe=r4("left"),n4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Kb(r)?r.number:0}}},lbe=n4("top"),cbe=n4("right"),ube=n4("bottom"),dbe=n4("left"),Abe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fbe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},hbe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(la).reduce(function(r,n){return r|mbe(n.value)},0)}},mbe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pbe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gbe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},EE;(function(t){t.NORMAL="normal",t.STRICT="strict"})(EE||(EE={}));var xbe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return EE.STRICT;case"normal":default:return EE.NORMAL}}},vbe={name:"line-height",initialValue:"normal",prefix:!1,type:4},P7=function(t,e){return la(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Js(t)?Ca(t,e):e},ybe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:f6.parse(t,e)}},bbe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},gj={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},a4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},wbe=a4("top"),Nbe=a4("right"),_be=a4("bottom"),Cbe=a4("left"),Ebe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(la).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Sbe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},s4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ibe=s4("top"),Bbe=s4("right"),Tbe=s4("bottom"),Pbe=s4("left"),jbe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kbe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Fbe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&pj(e[0],"none")?[]:uA(e).map(function(r){for(var n={color:rf.TRANSPARENT,offsetX:wo,offsetY:wo,blur:wo},a=0,s=0;s<r.length;s++){var i=r[s];b0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=i0.parse(t,i)}return n})}},Obe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Dbe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Lbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Rbe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Mbe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,o]:null},Lbe={matrix:Rbe,matrix3d:Mbe},j7={type:16,number:50,flags:$b},Ube=[j7,j7],Qbe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Js);return r.length!==2?Ube:[r[0],r[1]]}},Vbe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ry;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ry||(Ry={}));var Hbe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ry.BREAK_ALL;case"keep-all":return Ry.KEEP_ALL;case"normal":default:return Ry.NORMAL}}},$be={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Cv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},EZ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Kbe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Cv(e)?e.number:1}},Gbe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zbe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(la).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},qbe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Wbe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Xbe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Cv(e))return e.number;if(la(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Ybe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(la).map(function(r){return r.value})}},Jbe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},xi=function(t,e){return(t&e)!==0},Zbe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},ewe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(cZ),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&Cv(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},twe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(cZ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(la(s)&&s.value!=="none"){var o=i&&Cv(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},rwe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Kb).map(function(r){return EZ.parse(t,r)})}},nwe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(B2e);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},k7=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},awe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&pj(e[0],"none")?[]:uA(e).map(function(r){for(var n={color:255,offsetX:wo,offsetY:wo,blur:wo,spread:wo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];pj(i,"inset")?n.inset=!0:b0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=i0.parse(t,i)}return n})}},swe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(la).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},iwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},owe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Kb(e)?e.number:0}},lwe=function(){function t(e,r){var n,a;this.animationDuration=mr(e,rwe,r.animationDuration),this.backgroundClip=mr(e,j2e,r.backgroundClip),this.backgroundColor=mr(e,k2e,r.backgroundColor),this.backgroundImage=mr(e,H2e,r.backgroundImage),this.backgroundOrigin=mr(e,$2e,r.backgroundOrigin),this.backgroundPosition=mr(e,K2e,r.backgroundPosition),this.backgroundRepeat=mr(e,G2e,r.backgroundRepeat),this.backgroundSize=mr(e,q2e,r.backgroundSize),this.borderTopColor=mr(e,X2e,r.borderTopColor),this.borderRightColor=mr(e,Y2e,r.borderRightColor),this.borderBottomColor=mr(e,J2e,r.borderBottomColor),this.borderLeftColor=mr(e,Z2e,r.borderLeftColor),this.borderTopLeftRadius=mr(e,ebe,r.borderTopLeftRadius),this.borderTopRightRadius=mr(e,tbe,r.borderTopRightRadius),this.borderBottomRightRadius=mr(e,rbe,r.borderBottomRightRadius),this.borderBottomLeftRadius=mr(e,nbe,r.borderBottomLeftRadius),this.borderTopStyle=mr(e,abe,r.borderTopStyle),this.borderRightStyle=mr(e,sbe,r.borderRightStyle),this.borderBottomStyle=mr(e,ibe,r.borderBottomStyle),this.borderLeftStyle=mr(e,obe,r.borderLeftStyle),this.borderTopWidth=mr(e,lbe,r.borderTopWidth),this.borderRightWidth=mr(e,cbe,r.borderRightWidth),this.borderBottomWidth=mr(e,ube,r.borderBottomWidth),this.borderLeftWidth=mr(e,dbe,r.borderLeftWidth),this.boxShadow=mr(e,awe,r.boxShadow),this.color=mr(e,Abe,r.color),this.direction=mr(e,fbe,r.direction),this.display=mr(e,hbe,r.display),this.float=mr(e,pbe,r.cssFloat),this.fontFamily=mr(e,qbe,r.fontFamily),this.fontSize=mr(e,Wbe,r.fontSize),this.fontStyle=mr(e,Jbe,r.fontStyle),this.fontVariant=mr(e,Ybe,r.fontVariant),this.fontWeight=mr(e,Xbe,r.fontWeight),this.letterSpacing=mr(e,gbe,r.letterSpacing),this.lineBreak=mr(e,xbe,r.lineBreak),this.lineHeight=mr(e,vbe,r.lineHeight),this.listStyleImage=mr(e,ybe,r.listStyleImage),this.listStylePosition=mr(e,bbe,r.listStylePosition),this.listStyleType=mr(e,gj,r.listStyleType),this.marginTop=mr(e,wbe,r.marginTop),this.marginRight=mr(e,Nbe,r.marginRight),this.marginBottom=mr(e,_be,r.marginBottom),this.marginLeft=mr(e,Cbe,r.marginLeft),this.opacity=mr(e,Kbe,r.opacity);var s=mr(e,Ebe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=mr(e,Sbe,r.overflowWrap),this.paddingTop=mr(e,Ibe,r.paddingTop),this.paddingRight=mr(e,Bbe,r.paddingRight),this.paddingBottom=mr(e,Tbe,r.paddingBottom),this.paddingLeft=mr(e,Pbe,r.paddingLeft),this.paintOrder=mr(e,swe,r.paintOrder),this.position=mr(e,kbe,r.position),this.textAlign=mr(e,jbe,r.textAlign),this.textDecorationColor=mr(e,Gbe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=mr(e,zbe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=mr(e,Fbe,r.textShadow),this.textTransform=mr(e,Obe,r.textTransform),this.transform=mr(e,Dbe,r.transform),this.transformOrigin=mr(e,Qbe,r.transformOrigin),this.visibility=mr(e,Vbe,r.visibility),this.webkitTextStrokeColor=mr(e,iwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=mr(e,owe,r.webkitTextStrokeWidth),this.wordBreak=mr(e,Hbe,r.wordBreak),this.zIndex=mr(e,$be,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return o0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return xi(this.display,4)||xi(this.display,33554432)||xi(this.display,268435456)||xi(this.display,536870912)||xi(this.display,67108864)||xi(this.display,134217728)},t}(),cwe=function(){function t(e,r){this.content=mr(e,Zbe,r.content),this.quotes=mr(e,nwe,r.quotes)}return t}(),F7=function(){function t(e,r){this.counterIncrement=mr(e,ewe,r.counterIncrement),this.counterReset=mr(e,twe,r.counterReset)}return t}(),mr=function(t,e,r){var n=new oZ,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new lZ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,la(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return JI.parse(t,s.parseComponentValue());case"color":return i0.parse(t,s.parseComponentValue());case"image":return f6.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return b0(o)?o:wo;case"length-percentage":var c=s.parseComponentValue();return Js(c)?c:wo;case"time":return EZ.parse(t,s.parseComponentValue())}break}},uwe="data-html2canvas-debug",dwe=function(t){var e=t.getAttribute(uwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xj=function(t,e){var r=dwe(t);return r===1||e===r},dA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,xj(r,3))debugger;this.styles=new lwe(e,window.getComputedStyle(r,null)),bj(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=XI(this.context,r),xj(r,4)&&(this.flags|=16)}return t}(),Awe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",O7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ly=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var kN=0;kN<O7.length;kN++)ly[O7.charCodeAt(kN)]=kN;var fwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ly[t.charCodeAt(n)],i=ly[t.charCodeAt(n+1)],o=ly[t.charCodeAt(n+2)],c=ly[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},hwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},mwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Qm=5,h6=11,U3=2,pwe=h6-Qm,SZ=65536>>Qm,gwe=1<<Qm,Q3=gwe-1,xwe=1024>>Qm,vwe=SZ+xwe,ywe=vwe,bwe=32,wwe=ywe+bwe,Nwe=65536>>h6,_we=1<<pwe,Cwe=_we-1,D7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Ewe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Swe=function(t,e){var r=fwe(t),n=Array.isArray(r)?mwe(r):new Uint32Array(r),a=Array.isArray(r)?hwe(r):new Uint16Array(r),s=24,i=D7(a,s/2,n[4]/2),o=n[5]===2?D7(a,(s+n[4])/2):Ewe(n,Math.ceil((s+n[4])/4));return new Iwe(n[0],n[1],n[2],n[3],i,o)},Iwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Qm],r=(r<<U3)+(e&Q3),this.data[r];if(e<=65535)return r=this.index[SZ+(e-55296>>Qm)],r=(r<<U3)+(e&Q3),this.data[r];if(e<this.highStart)return r=wwe-Nwe+(e>>h6),r=this.index[r],r+=e>>Qm&Cwe,r=this.index[r],r=(r<<U3)+(e&Q3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),R7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var FN=0;FN<R7.length;FN++)Bwe[R7.charCodeAt(FN)]=FN;var Twe=1,V3=2,H3=3,M7=4,L7=5,Pwe=7,U7=8,$3=9,K3=10,Q7=11,V7=12,H7=13,$7=14,G3=15,jwe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},kwe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Fwe=Swe(Awe),lu="",z3="",Owe=function(t){return Fwe.get(t)},Dwe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===V3&&i===H3)return lu;if(s===V3||s===H3||s===M7||i===V3||i===H3||i===M7)return z3;if(s===U7&&[U7,$3,Q7,V7].indexOf(i)!==-1||(s===Q7||s===$3)&&(i===$3||i===K3)||(s===V7||s===K3)&&i===K3||i===H7||i===L7||i===Pwe||s===Twe)return lu;if(s===H7&&i===$7){for(;a===L7;)a=e[--n];if(a===$7)return lu}if(s===G3&&i===G3){for(var o=0;a===G3;)o++,a=e[--n];if(o%2===0)return lu}return z3},Rwe=function(t){var e=jwe(t),r=e.length,n=0,a=0,s=e.map(Owe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=lu;n<r&&(i=Dwe(e,s,++n))===lu;);if(i!==lu||n===r){var o=kwe.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},Mwe=function(t){for(var e=Rwe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Lwe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},Uwe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=YI(n.data).map(function(c){return Ms(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var A=d.x>i.x||d.y>i.y;return i=d,u===0?!0:A});return t.body.removeChild(e),o},Qwe=function(){return typeof new Image().crossOrigin<"u"},Vwe=function(){return typeof new XMLHttpRequest().responseType=="string"},Hwe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},K7=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$we=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=vj(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),G7(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",K7(c)?G7(vj(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),K7(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},vj=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},G7=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ho={get SUPPORT_RANGE_BOUNDS(){var t=Lwe(document);return Object.defineProperty(ho,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ho.SUPPORT_RANGE_BOUNDS&&Uwe(document);return Object.defineProperty(ho,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Hwe(document);return Object.defineProperty(ho,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$we(document):Promise.resolve(!1);return Object.defineProperty(ho,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Qwe();return Object.defineProperty(ho,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Vwe();return Object.defineProperty(ho,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ho,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ho,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},My=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Kwe=function(t,e,r,n){var a=qwe(e,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ho.SUPPORT_RANGE_BOUNDS){var c=z7(n,i,o.length).getClientRects();if(c.length>1){var u=m6(o),d=0;u.forEach(function(h){s.push(new My(h,gf.fromDOMRectList(t,z7(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new My(o,gf.fromDOMRectList(t,c)))}else{var A=n.splitText(o.length);s.push(new My(o,Gwe(t,n))),n=A}else ho.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},Gwe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=XI(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return gf.EMPTY},z7=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},m6=function(t){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Mwe(t)},zwe=function(t,e){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Xwe(t,e)},qwe=function(t,e){return e.letterSpacing!==0?m6(t):zwe(t,e)},Wwe=[32,160,4961,65792,65793,4153,4241],Xwe=function(t,e){for(var r=Nye(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=YI(i),c="";o.forEach(function(u){Wwe.indexOf(u)===-1?c+=Ms(u):(c.length&&n.push(c),n.push(Ms(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Ywe=function(){function t(e,r,n){this.text=Jwe(r.data,n.textTransform),this.textBounds=Kwe(e,this.text,n,r)}return t}(),Jwe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Zwe,eNe);case 2:return t.toUpperCase();default:return t}},Zwe=/(^|\s|:|-|\(|\))([a-z])/g,eNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},IZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(dA),BZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(dA),TZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=XI(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(dA),PZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(dA),yj=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(dA),tNe=[{type:15,flags:0,unit:"px",number:3}],rNe=[{type:16,flags:0,number:50}],nNe=function(t){return t.width>t.height?new gf(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new gf(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},aNe=function(t){var e=t.type===sNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},SE="checkbox",IE="radio",sNe="password",q7=707406591,p6=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=aNe(n),(a.type===SE||a.type===IE)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=nNe(a.bounds)),a.type){case SE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=tNe;break;case IE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=rNe;break}return a}return e}(dA),jZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(dA),kZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(dA),FZ=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=DZ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Dy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):rf.TRANSPARENT,i=n.contentWindow.document.body?Dy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):rf.TRANSPARENT;a.backgroundColor=o0(s)?o0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(dA),iNe=["OL","UL","MENU"],vC=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,RZ(a)&&a.data.trim().length>0)r.textNodes.push(new Ywe(t,a,r.styles));else if(lx(a))if(QZ(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return vC(t,o,r,n)});else{var i=OZ(t,a);i.styles.isVisible()&&(oNe(a,i,n)?i.flags|=4:lNe(i.styles)&&(i.flags|=2),iNe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?vC(t,a.shadowRoot,i,n):!BE(a)&&!MZ(a)&&!TE(a)&&vC(t,a,i,n))}},OZ=function(t,e){return wj(e)?new IZ(t,e):LZ(e)?new BZ(t,e):MZ(e)?new TZ(t,e):cNe(e)?new PZ(t,e):uNe(e)?new yj(t,e):dNe(e)?new p6(t,e):TE(e)?new jZ(t,e):BE(e)?new kZ(t,e):UZ(e)?new FZ(t,e):new dA(t,e)},DZ=function(t,e){var r=OZ(t,e);return r.flags|=4,vC(t,e,r,r),r},oNe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||g6(t)&&r.styles.isTransparent()},lNe=function(t){return t.isPositioned()||t.isFloating()},RZ=function(t){return t.nodeType===Node.TEXT_NODE},lx=function(t){return t.nodeType===Node.ELEMENT_NODE},bj=function(t){return lx(t)&&typeof t.style<"u"&&!yC(t)},yC=function(t){return typeof t.className=="object"},cNe=function(t){return t.tagName==="LI"},uNe=function(t){return t.tagName==="OL"},dNe=function(t){return t.tagName==="INPUT"},ANe=function(t){return t.tagName==="HTML"},MZ=function(t){return t.tagName==="svg"},g6=function(t){return t.tagName==="BODY"},LZ=function(t){return t.tagName==="CANVAS"},W7=function(t){return t.tagName==="VIDEO"},wj=function(t){return t.tagName==="IMG"},UZ=function(t){return t.tagName==="IFRAME"},X7=function(t){return t.tagName==="STYLE"},fNe=function(t){return t.tagName==="SCRIPT"},BE=function(t){return t.tagName==="TEXTAREA"},TE=function(t){return t.tagName==="SELECT"},QZ=function(t){return t.tagName==="SLOT"},Y7=function(t){return t.tagName.indexOf("-")>0},hNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},t}(),J7={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Z7={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xg=function(t,e,r,n,a,s){return t<e||t>r?L2(t,a,s.length>0):n.integers.reduce(function(i,o,c){for(;t>=o;)t-=o,i+=n.values[c];return i},"")+s},VZ=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Fs=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(VZ(Math.abs(t),s,n,function(i){return Ms(Math.floor(i%s)+e)})+a)},rm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return VZ(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},Hg=1,vh=2,yh=4,cy=8,IA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return L2(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&xi(s,Hg)&&o!==""?o=e[u]+o:u>1||u===1&&c===0||u===1&&c===1&&xi(s,vh)||u===1&&c===1&&xi(s,yh)&&t>100||u===1&&c>1&&xi(s,cy)?o=e[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},e9="",t9="",r9="",q3="",L2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Fs(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return rm(t,"",a);case 6:return xg(t,1,3999,J7,3,n).toLowerCase();case 7:return xg(t,1,3999,J7,3,n);case 8:return Fs(t,945,969,!1,n);case 9:return Fs(t,97,122,!1,n);case 10:return Fs(t,65,90,!1,n);case 11:return Fs(t,1632,1641,!0,n);case 12:case 49:return xg(t,1,9999,Z7,3,n);case 35:return xg(t,1,9999,Z7,3,n).toLowerCase();case 13:return Fs(t,2534,2543,!0,n);case 14:case 30:return Fs(t,6112,6121,!0,n);case 15:return rm(t,"",a);case 16:return rm(t,"",a);case 17:case 48:return IA(t,"",e9,"",a,vh|yh|cy);case 47:return IA(t,"",t9,"",a,Hg|vh|yh|cy);case 42:return IA(t,"",e9,"",a,vh|yh|cy);case 41:return IA(t,"",t9,"",a,Hg|vh|yh|cy);case 26:return IA(t,"","",r9,a,0);case 25:return IA(t,"","",r9,a,Hg|vh|yh);case 31:return IA(t,"","",q3,s,Hg|vh|yh);case 33:return IA(t,"","",q3,s,0);case 32:return IA(t,"","",q3,s,Hg|vh|yh);case 18:return Fs(t,2406,2415,!0,n);case 20:return xg(t,1,19999,pNe,3,n);case 21:return Fs(t,2790,2799,!0,n);case 22:return Fs(t,2662,2671,!0,n);case 22:return xg(t,1,10999,mNe,3,n);case 23:return rm(t,"");case 24:return rm(t,"");case 27:return Fs(t,3302,3311,!0,n);case 28:return rm(t,"",a);case 29:return rm(t,"",a);case 34:return Fs(t,3792,3801,!0,n);case 37:return Fs(t,6160,6169,!0,n);case 38:return Fs(t,4160,4169,!0,n);case 39:return Fs(t,2918,2927,!0,n);case 40:return Fs(t,1776,1785,!0,n);case 43:return Fs(t,3046,3055,!0,n);case 44:return Fs(t,3174,3183,!0,n);case 45:return Fs(t,3664,3673,!0,n);case 46:return Fs(t,3872,3881,!0,n);case 3:default:return Fs(t,48,57,!0,n)}},HZ="data-html2canvas-ignore",n9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new hNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=gNe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=yNe(a).then(function(){return hl(n,void 0,void 0,function(){var d,A;return Vo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(_Ne),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,vNe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,A)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(wNe(document.doctype)+"<html></html>"),NNe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(xj(e,2))debugger;if(LZ(e))return this.createCanvasClone(e);if(W7(e))return this.createVideoClone(e);if(X7(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return wj(r)&&(wj(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Y7(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return W3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!lx(r)||!fNe(r)&&!r.hasAttribute(HZ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!lx(r)||!X7(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(lx(s)&&QZ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(RZ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lx(e)&&(bj(e)||yC(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&bj(a)&&(this.clonedReferenceElement=a),g6(a)&&SNe(a);var c=this.counters.parse(new F7(this.context,s)),u=this.resolvePseudoContent(e,a,i,Ly.BEFORE);Y7(e)&&(r=!0),W7(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,o,Ly.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||yC(e))&&!UZ(e)||r)&&W3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(BE(e)||TE(e))&&(BE(a)||TE(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new F7(this.context,n));var c=new cwe(this.context,n),u=o.createElement("html2canvaspseudoelement");W3(n,u),c.content.forEach(function(A){if(A.type===0)u.appendChild(o.createTextNode(A.value));else if(A.type===22){var h=o.createElement("img");h.src=A.value,h.style.opacity="1",u.appendChild(h)}else if(A.type===18){if(A.name==="attr"){var f=A.values.filter(la);f.length&&u.appendChild(o.createTextNode(e.getAttribute(f[0].value)||""))}else if(A.name==="counter"){var m=A.values.filter(Xx),p=m[0],g=m[1];if(p&&la(p)){var x=s.counters.getCounterValue(p.value),y=g&&la(g)?gj.parse(s.context,g.value):3;u.appendChild(o.createTextNode(L2(x,y,!1)))}}else if(A.name==="counters"){var b=A.values.filter(Xx),p=b[0],w=b[1],g=b[2];if(p&&la(p)){var I=s.counters.getCounterValues(p.value),T=g&&la(g)?gj.parse(s.context,g.value):3,C=w&&w.type===0?w.value:"",E=I.map(function(B){return L2(B,T,!1)}).join(C);u.appendChild(o.createTextNode(E))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(o.createTextNode(k7(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(k7(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(A.value))}}),u.className=Nj+" "+_j;var d=a===Ly.BEFORE?" "+Nj:" "+_j;return yC(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ly;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ly||(Ly={}));var gNe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(HZ,"true"),t.body.appendChild(r),r},xNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},vNe=function(t){return Promise.all([].slice.call(t.images,0).map(xNe))},yNe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},bNe=["all","d","content"],W3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);bNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},wNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},NNe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},_Ne=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},CNe=":before",ENe=":after",Nj="___html2canvas___pseudoelement_before",_j="___html2canvas___pseudoelement_after",a9=`{
    content: "" !important;
    display: none !important;
}`,SNe=function(t){INe(t,"."+Nj+CNe+a9+`
         .`+_j+ENe+a9)},INe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},$Z=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),BNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Y3(e)||kNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return hl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Vo(this,function(o){switch(o.label){case 0:return r=$Z.isSameOrigin(e),n=!X3(e)&&this._options.useCORS===!0&&ho.SUPPORT_CORS_IMAGES&&!r,a=!X3(e)&&!r&&!Y3(e)&&typeof this._options.proxy=="string"&&ho.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!X3(e)&&!Y3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(FNe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=ho.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(h){return i(h)},!1),A.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),TNe=/^data:image\/svg\+xml/i,PNe=/^data:image\/.*;base64,/i,jNe=/^data:image\/.*/i,kNe=function(t){return ho.SUPPORT_SVG_DRAWING||!ONe(t)},X3=function(t){return jNe.test(t)},FNe=function(t){return PNe.test(t)},Y3=function(t){return t.substr(0,4)==="blob"},ONe=function(t){return t.substr(-3).toLowerCase()==="svg"||TNe.test(t)},fr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),vg=function(t,e,r){return new fr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},ON=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=vg(this.start,this.startControl,e),a=vg(this.startControl,this.endControl,e),s=vg(this.endControl,this.end,e),i=vg(n,a,e),o=vg(a,s,e),c=vg(i,o,e);return r?new t(this.start,n,i,c):new t(c,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),fu=function(t){return t.type===1},DNe=function(){function t(e){var r=e.styles,n=e.bounds,a=oy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=oy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=oy(r.borderBottomRightRadius,n.width,n.height),A=d[0],h=d[1],f=oy(r.borderBottomLeftRadius,n.width,n.height),m=f[0],p=f[1],g=[];g.push((s+c)/n.width),g.push((m+A)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,A/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-A,I=n.height-p,T=r.borderTopWidth,C=r.borderRightWidth,E=r.borderBottomWidth,S=r.borderLeftWidth,O=Ca(r.paddingTop,e.bounds.width),B=Ca(r.paddingRight,e.bounds.width),P=Ca(r.paddingBottom,e.bounds.width),D=Ca(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ha(n.left+S/3,n.top+T/3,s-S/3,i-T/3,Hn.TOP_LEFT):new fr(n.left+S/3,n.top+T/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ha(n.left+y,n.top+T/3,c-C/3,u-T/3,Hn.TOP_RIGHT):new fr(n.left+n.width-C/3,n.top+T/3),this.bottomRightBorderDoubleOuterBox=A>0||h>0?Ha(n.left+w,n.top+b,A-C/3,h-E/3,Hn.BOTTOM_RIGHT):new fr(n.left+n.width-C/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?Ha(n.left+S/3,n.top+I,m-S/3,p-E/3,Hn.BOTTOM_LEFT):new fr(n.left+S/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ha(n.left+S*2/3,n.top+T*2/3,s-S*2/3,i-T*2/3,Hn.TOP_LEFT):new fr(n.left+S*2/3,n.top+T*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ha(n.left+y,n.top+T*2/3,c-C*2/3,u-T*2/3,Hn.TOP_RIGHT):new fr(n.left+n.width-C*2/3,n.top+T*2/3),this.bottomRightBorderDoubleInnerBox=A>0||h>0?Ha(n.left+w,n.top+b,A-C*2/3,h-E*2/3,Hn.BOTTOM_RIGHT):new fr(n.left+n.width-C*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?Ha(n.left+S*2/3,n.top+I,m-S*2/3,p-E*2/3,Hn.BOTTOM_LEFT):new fr(n.left+S*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=s>0||i>0?Ha(n.left+S/2,n.top+T/2,s-S/2,i-T/2,Hn.TOP_LEFT):new fr(n.left+S/2,n.top+T/2),this.topRightBorderStroke=s>0||i>0?Ha(n.left+y,n.top+T/2,c-C/2,u-T/2,Hn.TOP_RIGHT):new fr(n.left+n.width-C/2,n.top+T/2),this.bottomRightBorderStroke=A>0||h>0?Ha(n.left+w,n.top+b,A-C/2,h-E/2,Hn.BOTTOM_RIGHT):new fr(n.left+n.width-C/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=m>0||p>0?Ha(n.left+S/2,n.top+I,m-S/2,p-E/2,Hn.BOTTOM_LEFT):new fr(n.left+S/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||i>0?Ha(n.left,n.top,s,i,Hn.TOP_LEFT):new fr(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ha(n.left+y,n.top,c,u,Hn.TOP_RIGHT):new fr(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||h>0?Ha(n.left+w,n.top+b,A,h,Hn.BOTTOM_RIGHT):new fr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?Ha(n.left,n.top+I,m,p,Hn.BOTTOM_LEFT):new fr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Ha(n.left+S,n.top+T,Math.max(0,s-S),Math.max(0,i-T),Hn.TOP_LEFT):new fr(n.left+S,n.top+T),this.topRightPaddingBox=c>0||u>0?Ha(n.left+Math.min(y,n.width-C),n.top+T,y>n.width+C?0:Math.max(0,c-C),Math.max(0,u-T),Hn.TOP_RIGHT):new fr(n.left+n.width-C,n.top+T),this.bottomRightPaddingBox=A>0||h>0?Ha(n.left+Math.min(w,n.width-S),n.top+Math.min(b,n.height-E),Math.max(0,A-C),Math.max(0,h-E),Hn.BOTTOM_RIGHT):new fr(n.left+n.width-C,n.top+n.height-E),this.bottomLeftPaddingBox=m>0||p>0?Ha(n.left+S,n.top+Math.min(I,n.height-E),Math.max(0,m-S),Math.max(0,p-E),Hn.BOTTOM_LEFT):new fr(n.left+S,n.top+n.height-E),this.topLeftContentBox=s>0||i>0?Ha(n.left+S+D,n.top+T+O,Math.max(0,s-(S+D)),Math.max(0,i-(T+O)),Hn.TOP_LEFT):new fr(n.left+S+D,n.top+T+O),this.topRightContentBox=c>0||u>0?Ha(n.left+Math.min(y,n.width+S+D),n.top+T+O,y>n.width+S+D?0:c-S+D,u-(T+O),Hn.TOP_RIGHT):new fr(n.left+n.width-(C+B),n.top+T+O),this.bottomRightContentBox=A>0||h>0?Ha(n.left+Math.min(w,n.width-(S+D)),n.top+Math.min(b,n.height+T+O),Math.max(0,A-(C+B)),h-(E+P),Hn.BOTTOM_RIGHT):new fr(n.left+n.width-(C+B),n.top+n.height-(E+P)),this.bottomLeftContentBox=m>0||p>0?Ha(n.left+S+D,n.top+I,Math.max(0,m-(S+D)),p-(E+P),Hn.BOTTOM_LEFT):new fr(n.left+S+D,n.top+n.height-(E+P))}return t}(),Hn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Hn||(Hn={}));var Ha=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=t+r,u=e+n;switch(a){case Hn.TOP_LEFT:return new ON(new fr(t,u),new fr(t,u-o),new fr(c-i,e),new fr(c,e));case Hn.TOP_RIGHT:return new ON(new fr(t,e),new fr(t+i,e),new fr(c,u-o),new fr(c,u));case Hn.BOTTOM_RIGHT:return new ON(new fr(c,e),new fr(c,e+o),new fr(t+i,u),new fr(t,u));case Hn.BOTTOM_LEFT:default:return new ON(new fr(c,u),new fr(c-i,u),new fr(t,e+o),new fr(t,e))}},PE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},RNe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},jE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},MNe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),DN=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),UNe=function(t){return t.type===0},KZ=function(t){return t.type===1},QNe=function(t){return t.type===2},s9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},VNe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},GZ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),zZ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new DNe(this.container),this.container.styles.opacity<1&&this.effects.push(new LNe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new MNe(n,a,s))}if(this.container.styles.overflowX!==0){var i=PE(this.curves),o=jE(this.curves);s9(i,o)?this.effects.push(new DN(i,6)):(this.effects.push(new DN(i,2)),this.effects.push(new DN(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!KZ(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=PE(n.curves),o=jE(n.curves);s9(i,o)||a.unshift(new DN(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return xi(c.target,e)})},t}(),Cj=function(t,e,r,n){t.container.elements.forEach(function(a){var s=xi(a.flags,4),i=xi(a.flags,2),o=new zZ(a,t);xi(a.styles.display,2048)&&n.push(o);var c=xi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new GZ(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var h=0;u.negativeZIndex.some(function(m,p){return A>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(A>0){var f=0;u.positiveZIndex.some(function(m,p){return A>=m.element.container.styles.zIndex.order?(f=p+1,!1):f>0}),u.positiveZIndex.splice(f,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);Cj(o,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),Cj(o,e,r,c);xi(a.flags,8)&&qZ(a,c)})},qZ=function(t,e){for(var r=t instanceof yj?t.start:1,n=t instanceof yj?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof PZ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=L2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},HNe=function(t){var e=new zZ(t,null),r=new GZ(e),n=[];return Cj(e,r,r,n),qZ(e.container,n),r},i9=function(t,e){switch(e){case 0:return gu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return gu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return gu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return gu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$Ne=function(t,e){switch(e){case 0:return gu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return gu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return gu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return gu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},KNe=function(t,e){switch(e){case 0:return gu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return gu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return gu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return gu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},GNe=function(t,e){switch(e){case 0:return RN(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return RN(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return RN(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return RN(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},RN=function(t,e){var r=[];return fu(t)?r.push(t.subdivide(.5,!1)):r.push(t),fu(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},gu=function(t,e,r,n){var a=[];return fu(t)?a.push(t.subdivide(.5,!1)):a.push(t),fu(r)?a.push(r.subdivide(.5,!0)):a.push(r),fu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),fu(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},WZ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},kE=function(t){var e=t.styles,r=t.bounds,n=Ca(e.paddingLeft,r.width),a=Ca(e.paddingRight,r.width),s=Ca(e.paddingTop,r.width),i=Ca(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},zNe=function(t,e){return t===0?e.bounds:t===2?kE(e):WZ(e)},qNe=function(t,e){return t===0?e.bounds:t===2?kE(e):WZ(e)},J3=function(t,e,r){var n=zNe($g(t.styles.backgroundOrigin,e),t),a=qNe($g(t.styles.backgroundClip,e),t),s=WNe($g(t.styles.backgroundSize,e),r,n),i=s[0],o=s[1],c=oy($g(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=XNe($g(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),A=Math.round(n.top+c[1]);return[u,d,A,i,o]},yg=function(t){return la(t)&&t.value===Ex.AUTO},MN=function(t){return typeof t=="number"},WNe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Js(i)&&o&&Js(o))return[Ca(i,r.width),Ca(o,r.height)];var c=MN(s);if(la(i)&&(i.value===Ex.CONTAIN||i.value===Ex.COVER)){if(MN(s)){var u=r.width/r.height;return u<s!=(i.value===Ex.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=MN(n),A=MN(a),h=d||A;if(yg(i)&&(!o||yg(o))){if(d&&A)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var f=d?n:a*s,m=A?a:n/s;return[f,m]}var p=d?n:r.width,g=A?a:r.height;return[p,g]}if(c){var x=0,y=0;return Js(i)?x=Ca(i,r.width):Js(o)&&(y=Ca(o,r.height)),yg(i)?x=y*s:(!o||yg(o))&&(y=x/s),[x,y]}var b=null,w=null;if(Js(i)?b=Ca(i,r.width):o&&Js(o)&&(w=Ca(o,r.height)),b!==null&&(!o||yg(o))&&(w=d&&A?b/n*a:r.height),w!==null&&yg(i)&&(b=d&&A?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},$g=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},XNe=function(t,e,r,n,a){var s=e[0],i=e[1],o=r[0],c=r[1];switch(t){case 2:return[new fr(Math.round(n.left),Math.round(n.top+i)),new fr(Math.round(n.left+n.width),Math.round(n.top+i)),new fr(Math.round(n.left+n.width),Math.round(c+n.top+i)),new fr(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new fr(Math.round(n.left+s),Math.round(n.top)),new fr(Math.round(n.left+s+o),Math.round(n.top)),new fr(Math.round(n.left+s+o),Math.round(n.height+n.top)),new fr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new fr(Math.round(n.left+s),Math.round(n.top+i)),new fr(Math.round(n.left+s+o),Math.round(n.top+i)),new fr(Math.round(n.left+s+o),Math.round(n.top+i+c)),new fr(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new fr(Math.round(a.left),Math.round(a.top)),new fr(Math.round(a.left+a.width),Math.round(a.top)),new fr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new fr(Math.round(a.left),Math.round(a.height+a.top))]}},YNe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o9="Hidden Text",JNe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=YNe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(o9)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(o9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),XZ=function(){function t(e,r){this.context=e,this.options=r}return t}(),ZNe=1e4,e_e=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new JNe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),QNe(r)&&(this.ctx.globalAlpha=r.opacity),UNe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),KZ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return hl(this,void 0,void 0,function(){var n;return Vo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return hl(this,void 0,void 0,function(){return Vo(this,function(n){switch(n.label){case 0:if(xi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=m6(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=s_e(r.fontFamily).join(", "),s=Kb(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return hl(this,void 0,void 0,function(){var a,s,i,o,c,u,d,A,h=this;return Vo(this,function(f){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,A=n.paintOrder,r.textBounds.forEach(function(m){A.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=Oi(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=Oi(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Oi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=Oi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=kE(r),i=jE(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,o,c,y,y,u,d,A,h,w,f,m,I,p,g,x,y,b,w,I;return Vo(this,function(T){switch(T.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,T.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:T.sent(),T.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof IZ))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=T.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof BZ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof TZ))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=T.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof FZ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=T.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),T.label=14;case 14:if(n instanceof p6&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===SE?n.checked&&(this.ctx.save(),this.path([new fr(n.bounds.left+A*.39363,n.bounds.top+A*.79),new fr(n.bounds.left+A*.16,n.bounds.top+A*.5549),new fr(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new fr(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new fr(n.bounds.left+A*.72983,n.bounds.top+A*.23),new fr(n.bounds.left+A*.84,n.bounds.top+A*.34085),new fr(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=Oi(q7),this.ctx.fill(),this.ctx.restore()):n.type===IE&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Oi(q7),this.ctx.fill(),this.ctx.restore())),t_e(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],f=h[1],m=this.fontMetrics.getMetrics(w,f).baseline,this.ctx.font=w,this.ctx.fillStyle=Oi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=n_e(n.styles.textAlign),I=kE(n),p=0,n.styles.textAlign){case 1:p+=I.width/2;break;case 2:p+=I.width;break}g=I.add(p,0,0,-I.height/2+1),this.ctx.save(),this.path([new fr(I.left,I.top),new fr(I.left+I.width,I.top),new fr(I.left+I.width,I.top+I.height),new fr(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new My(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!xi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=T.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Oi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new gf(n.bounds.left,n.bounds.top+Ca(n.styles.paddingTop,n.bounds.width),n.bounds.width,P7(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new My(r.listValue,I),s.letterSpacing,P7(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return hl(this,void 0,void 0,function(){var n,a,x,s,i,x,o,c,x,u,d,x,A,h,x,f,m,x,p,g,x;return Vo(this,function(y){switch(y.label){case 0:if(xi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,y.label=11;case 11:return o<c.length?(x=c[o],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:A=0,h=r.inlineLevel,y.label=19;case 19:return A<h.length?(x=h[A],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return A++,[3,19];case 22:f=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return f<m.length?(x=m[f],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return f++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=fu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),fu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,o,c;return Vo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var A,h,f,O,ee,ce,D,W,E,m,O,ee,ce,D,W,p,g,x,y,b,w,I,T,C,E,S,O,B,P,D,W,Ae,ee,ce,de,X,pe,Se,k,F,V,M;return Vo(this,function(L){switch(L.label){case 0:if(d.type!==0)return[3,5];A=void 0,h=d.url,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return A=L.sent(),[3,4];case 3:return L.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return A&&(f=J3(r,n,[A.width,A.height,A.width/A.height]),O=f[0],ee=f[1],ce=f[2],D=f[3],W=f[4],E=s.ctx.createPattern(s.resizeImage(A,D,W),"repeat"),s.renderRepeat(O,E,ee,ce)),[3,6];case 5:U2e(d)?(m=J3(r,n,[null,null,null]),O=m[0],ee=m[1],ce=m[2],D=m[3],W=m[4],p=O2e(d.angle,D,W),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],I=document.createElement("canvas"),I.width=D,I.height=W,T=I.getContext("2d"),C=T.createLinearGradient(x,b,y,w),B7(d.stops,g).forEach(function(q){return C.addColorStop(q.stop,Oi(q.color))}),T.fillStyle=C,T.fillRect(0,0,D,W),D>0&&W>0&&(E=s.ctx.createPattern(I,"repeat"),s.renderRepeat(O,E,ee,ce))):Q2e(d)&&(S=J3(r,n,[null,null,null]),O=S[0],B=S[1],P=S[2],D=S[3],W=S[4],Ae=d.position.length===0?[A6]:d.position,ee=Ca(Ae[0],D),ce=Ca(Ae[Ae.length-1],W),de=D2e(d,ee,ce,D,W),X=de[0],pe=de[1],X>0&&pe>0&&(Se=s.ctx.createRadialGradient(B+ee,P+ce,0,B+ee,P+ce,X),B7(d.stops,X*2).forEach(function(q){return Se.addColorStop(q.stop,Oi(q.color))}),s.path(O),s.ctx.fillStyle=Se,X!==pe?(k=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,V=pe/X,M=1/V,s.ctx.save(),s.ctx.translate(k,F),s.ctx.transform(1,0,0,V,0,0),s.ctx.translate(-k,-F),s.ctx.fillRect(B,M*(P-F)+F,D,W*M),s.ctx.restore()):s.ctx.fill())),L.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return hl(this,void 0,void 0,function(){return Vo(this,function(s){return this.path(i9(a,n)),this.ctx.fillStyle=Oi(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return hl(this,void 0,void 0,function(){var i,o;return Vo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=$Ne(s,a),this.path(i),this.ctx.fillStyle=Oi(r),this.ctx.fill(),o=KNe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,A=this;return Vo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!o0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=r_e($g(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),o0(n.backgroundColor)||(this.ctx.fillStyle=Oi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(f){A.ctx.save();var m=PE(r.curves),p=f.inset?0:ZNe,g=VNe(m,-p+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(A.path(m),A.ctx.clip(),A.mask(g)):(A.mask(m),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=f.offsetX.number+p,A.ctx.shadowOffsetY=f.offsetY.number,A.ctx.shadowColor=Oi(f.color),A.ctx.shadowBlur=f.blur.number,A.ctx.fillStyle=f.inset?Oi(f.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!o0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return hl(this,void 0,void 0,function(){var o,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,I,T;return Vo(this,function(C){return this.ctx.save(),o=GNe(s,a),c=i9(s,a),i===2&&(this.path(c),this.ctx.clip()),fu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),fu(c[1])?(A=c[1].end.x,h=c[1].end.y):(A=c[1].x,h=c[1].y),a===0||a===2?f=Math.abs(u-A):f=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,f<=m*2?g=!1:f<=m*2+p?(x=f/(2*m+p),m*=x,p*=x):(y=Math.floor((f+p)/(m+p)),b=(f-y*m)/(y-1),w=(f-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Oi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(fu(c[0])&&(I=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new fr(I.end.x,I.end.y),new fr(T.start.x,T.start.y)]),this.ctx.stroke()),fu(c[1])&&(I=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new fr(I.end.x,I.end.y),new fr(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return hl(this,void 0,void 0,function(){var n;return Vo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Oi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=HNe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(XZ),t_e=function(t){return t instanceof kZ||t instanceof jZ?!0:t instanceof p6&&t.type!==IE&&t.type!==SE},r_e=function(t,e){switch(t){case 0:return PE(e);case 2:return RNe(e);case 1:default:return jE(e)}},n_e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},a_e=["-apple-system","system-ui"],s_e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return a_e.indexOf(e)===-1}):t},i_e=function(t){bd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return hl(this,void 0,void 0,function(){var n,a;return Vo(this,function(s){switch(s.label){case 0:return n=vj(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,o_e(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Oi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(XZ),o_e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},l_e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,pN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,pN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,pN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,pN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),c_e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new l_e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new BNe(this,e)}return t.instanceCount=1,t}(),L0=function(t,e){return e===void 0&&(e={}),u_e(t,e)};typeof window<"u"&&$Z.setContext(window);var u_e=function(t,e){return hl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,A,h,f,m,p,g,x,y,b,w,I,C,T,C,E,S,O,B,P,D,W,Ae,ee,ce,de,X,pe,Se,k,F,V;return Vo(this,function(M){switch(M.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=aj({logging:(B=e.logging)!==null&&B!==void 0?B:!0,cache:e.cache},a),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(W=e.scrollX)!==null&&W!==void 0?W:n.pageXOffset,scrollY:(Ae=e.scrollY)!==null&&Ae!==void 0?Ae:n.pageYOffset},o=new gf(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new c_e(s,o),u=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,d={allowTaint:(ce=e.allowTaint)!==null&&ce!==void 0?ce:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),A=new n9(c,t,d),h=A.clonedReferenceElement,h?[4,A.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=M.sent(),m=g6(h)||ANe(h)?V1e(h.ownerDocument):XI(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=d_e(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(X=(de=e.scale)!==null&&de!==void 0?de:n.devicePixelRatio)!==null&&X!==void 0?X:1,x:((pe=e.x)!==null&&pe!==void 0?pe:0)+x,y:((Se=e.y)!==null&&Se!==void 0?Se:0)+y,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(p),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new i_e(c,w),[4,C.render(h)]):[3,3];case 2:return I=M.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=DZ(c,h),b===T.styles.backgroundColor&&(T.styles.backgroundColor=rf.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),C=new e_e(c,w),[4,C.render(T)];case 4:I=M.sent(),M.label=5;case 5:return(!((V=e.removeContainer)!==null&&V!==void 0)||V)&&(n9.destroy(f)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,I]}})})},d_e=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?Dy(t,getComputedStyle(n.documentElement).backgroundColor):rf.TRANSPARENT,s=n.body?Dy(t,getComputedStyle(n.body).backgroundColor):rf.TRANSPARENT,i=typeof r=="string"?Dy(t,r):r===null?rf.TRANSPARENT:4294967295;return e===n.documentElement?o0(a)?o0(s)?i:s:a:i};const x6=Object.freeze(Object.defineProperty({__proto__:null,default:L0},Symbol.toStringTag,{value:"Module"})),A_e="modulepreload",f_e=function(t){return"/"+t},l9={},nf=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=f_e(c),c in l9)return;l9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const A=document.createElement("link");if(A.rel=u?"stylesheet":A_e,u||(A.as="script"),A.crossOrigin="",A.href=c,o&&A.setAttribute("nonce",o),document.head.appendChild(A),u)return new Promise((h,f)=>{A.addEventListener("load",h),A.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function ea(t){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(t)}var md=Uint8Array,Cc=Uint16Array,v6=Int32Array,y6=new md([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),b6=new md([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c9=new md([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YZ=function(t,e){for(var r=new Cc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new v6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},JZ=YZ(y6,2),h_e=JZ.b,Ej=JZ.r;h_e[28]=258,Ej[258]=28;var m_e=YZ(b6,0),u9=m_e.r,Sj=new Cc(32768);for(var Ma=0;Ma<32768;++Ma){var dh=(Ma&43690)>>1|(Ma&21845)<<1;dh=(dh&52428)>>2|(dh&13107)<<2,dh=(dh&61680)>>4|(dh&3855)<<4,Sj[Ma]=((dh&65280)>>8|(dh&255)<<8)>>1}var Uy=function(t,e,r){for(var n=t.length,a=0,s=new Cc(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Cc(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Cc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],A=i[t[a]-1]++<<d,h=A|(1<<d)-1;A<=h;++A)o[Sj[A]>>c]=u}else for(o=new Cc(n),a=0;a<n;++a)t[a]&&(o[a]=Sj[i[t[a]-1]++]>>15-t[a]);return o},pp=new md(288);for(var Ma=0;Ma<144;++Ma)pp[Ma]=8;for(var Ma=144;Ma<256;++Ma)pp[Ma]=9;for(var Ma=256;Ma<280;++Ma)pp[Ma]=7;for(var Ma=280;Ma<288;++Ma)pp[Ma]=8;var FE=new md(32);for(var Ma=0;Ma<32;++Ma)FE[Ma]=5;var p_e=Uy(pp,9,0),g_e=Uy(FE,5,0),ZZ=function(t){return(t+7)/8|0},x_e=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new md(t.subarray(e,r))},BA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},I1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Z3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:tee,l:0};if(a==1){var i=new md(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(I,T){return I.f-T.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,A=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[A].f?u++:A++],c=r[u!=d&&r[u].f<r[A].f?u++:A++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var f=new Cc(h+1),m=Ij(r[d-1],f,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(T,C){return f[C.s]-f[T.s]||T.f-C.f});n<a;++n){var y=s[n].s;if(f[y]>e)p+=x-(1<<m-f[y]),f[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;f[b]<e?p-=1<<e-f[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;f[w]==e&&(--f[w],++p)}m=e}return{t:new md(f),l:m}},Ij=function(t,e,r){return t.s==-1?Math.max(Ij(t.l,e,r+1),Ij(t.r,e,r+1)):e[t.s]=r},d9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Cc(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:r.subarray(0,n),n:e}},B1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},eee=function(t,e,r){var n=r.length,a=ZZ(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},A9=function(t,e,r,n,a,s,i,o,c,u,d){BA(e,d++,r),++a[256];for(var A=Z3(a,15),h=A.t,f=A.l,m=Z3(s,15),p=m.t,g=m.l,x=d9(h),y=x.c,b=x.n,w=d9(p),I=w.c,T=w.n,C=new Cc(19),E=0;E<y.length;++E)++C[y[E]&31];for(var E=0;E<I.length;++E)++C[I[E]&31];for(var S=Z3(C,7),O=S.t,B=S.l,P=19;P>4&&!O[c9[P-1]];--P);var D=u+5<<3,W=B1(a,pp)+B1(s,FE)+i,Ae=B1(a,h)+B1(s,p)+i+14+3*P+B1(C,O)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&D<=W&&D<=Ae)return eee(e,d,t.subarray(c,c+u));var ee,ce,de,X;if(BA(e,d,1+(Ae<W)),d+=2,Ae<W){ee=Uy(h,f,0),ce=h,de=Uy(p,g,0),X=p;var pe=Uy(O,B,0);BA(e,d,b-257),BA(e,d+5,T-1),BA(e,d+10,P-4),d+=14;for(var E=0;E<P;++E)BA(e,d+3*E,O[c9[E]]);d+=3*P;for(var Se=[y,I],k=0;k<2;++k)for(var F=Se[k],E=0;E<F.length;++E){var V=F[E]&31;BA(e,d,pe[V]),d+=O[V],V>15&&(BA(e,d,F[E]>>5&127),d+=F[E]>>12)}}else ee=p_e,ce=pp,de=g_e,X=FE;for(var E=0;E<o;++E){var M=n[E];if(M>255){var V=M>>18&31;I1(e,d,ee[V+257]),d+=ce[V+257],V>7&&(BA(e,d,M>>23&31),d+=y6[V]);var L=M&31;I1(e,d,de[L]),d+=X[L],L>3&&(I1(e,d,M>>5&8191),d+=b6[L])}else I1(e,d,ee[M]),d+=ce[M]}return I1(e,d,ee[256]),d+ce[256]},v_e=new v6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tee=new md(0),y_e=function(t,e,r,n,a,s){var i=s.z||t.length,o=new md(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var A=v_e[e-1],h=A>>13,f=A&8191,m=(1<<r)-1,p=s.p||new Cc(32768),g=s.h||new Cc(m+1),x=Math.ceil(r/3),y=2*x,b=function(Y){return(t[Y]^t[Y+1]<<x^t[Y+2]<<y)&m},w=new v6(25e3),I=new Cc(288),T=new Cc(32),C=0,E=0,S=s.i||0,O=0,B=s.w||0,P=0;S+2<i;++S){var D=b(S),W=S&32767,Ae=g[D];if(p[W]=Ae,g[D]=W,B<=S){var ee=i-S;if((C>7e3||O>24576)&&(ee>423||!u)){d=A9(t,c,0,w,I,T,E,O,P,S-P,d),O=C=E=0,P=S;for(var ce=0;ce<286;++ce)I[ce]=0;for(var ce=0;ce<30;++ce)T[ce]=0}var de=2,X=0,pe=f,Se=W-Ae&32767;if(ee>2&&D==b(S-Se))for(var k=Math.min(h,ee)-1,F=Math.min(32767,S),V=Math.min(258,ee);Se<=F&&--pe&&W!=Ae;){if(t[S+de]==t[S+de-Se]){for(var M=0;M<V&&t[S+M]==t[S+M-Se];++M);if(M>de){if(de=M,X=Se,M>k)break;for(var L=Math.min(Se,M-2),q=0,ce=0;ce<L;++ce){var R=S-Se+ce&32767,K=p[R],Z=R-K&32767;Z>q&&(q=Z,Ae=R)}}}W=Ae,Ae=p[W],Se+=W-Ae&32767}if(X){w[O++]=268435456|Ej[de]<<18|u9[X];var te=Ej[de]&31,Q=u9[X]&31;E+=y6[te]+b6[Q],++I[257+te],++T[Q],B=S+de,++C}else w[O++]=t[S],++I[t[S]]}}for(S=Math.max(S,B);S<i;++S)w[O++]=t[S],++I[t[S]];d=A9(t,c,u,w,I,T,E,O,P,S-P,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=S,s.w=B)}else{for(var S=s.w||0;S<i+u;S+=65535){var ye=S+65535;ye>=i&&(c[d/8|0]=u,ye=i),d=eee(c,d+1,t.subarray(S,ye))}s.i=i}return x_e(o,0,n+ZZ(d)+a)},ree=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},b_e=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new md(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return y_e(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},nee=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},w_e=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=ree();a.p(e.dictionary),nee(t,2,a.d())}};function Bj(t,e){e||(e={});var r=ree();r.p(t);var n=b_e(t,e,e.dictionary?6:2,4);return w_e(n,e),nee(n,n.length-4,r.d()),n}var N_e=typeof TextDecoder<"u"&&new TextDecoder,__e=0;try{N_e.decode(tee,{stream:!0}),__e=1}catch{}function C_e(t){if(Array.isArray(t))return t}function E_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,o=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return o}}function f9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function S_e(t,e){if(t){if(typeof t=="string")return f9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f9(t,e):void 0}}function I_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h9(t,e){return C_e(t)||E_e(t,e)||S_e(t,e)||I_e()}function m9(t,e="utf8"){return new TextDecoder(e).decode(t)}const B_e=new TextEncoder;function T_e(t){return B_e.encode(t)}const P_e=1024*8,j_e=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),eB={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class w6{constructor(e=P_e,r={}){Rn(this,"buffer");Rn(this,"byteLength");Rn(this,"byteOffset");Rn(this,"length");Rn(this,"offset");Rn(this,"lastWrittenByte");Rn(this,"littleEndian");Rn(this,"_data");Rn(this,"_mark");Rn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof w6)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=eB[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===j_e&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+n));o.reverse();const c=new eB[r](o.buffer);return this.offset+=n,c.reverse(),c}const i=new eB[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return m9(this.readBytes(e))}decodeText(e=1,r="utf8"){return m9(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(T_e(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ev(t){let e=t.length;for(;--e>=0;)t[e]=0}const k_e=3,F_e=258,aee=29,O_e=256,D_e=O_e+1+aee,see=30,R_e=512,M_e=new Array((D_e+2)*2);Ev(M_e);const L_e=new Array(see*2);Ev(L_e);const U_e=new Array(R_e);Ev(U_e);const Q_e=new Array(F_e-k_e+1);Ev(Q_e);const V_e=new Array(aee);Ev(V_e);const H_e=new Array(see);Ev(H_e);const $_e=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var Tj=$_e;const K_e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},G_e=new Uint32Array(K_e()),z_e=(t,e,r,n)=>{const a=G_e,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var Od=z_e,Pj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const q_e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var W_e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)q_e(r,n)&&(t[n]=r[n])}}return t},X_e=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},oee={assign:W_e,flattenChunks:X_e};let lee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lee=!1}const U2=new Uint8Array(256);for(let t=0;t<256;t++)U2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;U2[254]=U2[254]=1;var Y_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,o=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),s=0,a=0;s<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const J_e=(t,e)=>{if(e<65534&&t.subarray&&lee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var Z_e=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let o=U2[i];if(o>4){s[a++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<r;)i=i<<6|t[n++]&63,o--;if(o>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return J_e(s,a)},eCe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+U2[t[r]]>e?r:e},jj={string2buf:Y_e,buf2string:Z_e,utf8border:eCe};function tCe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rCe=tCe;const LN=16209,nCe=16191;var aCe=function(e,r){let n,a,s,i,o,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S,O;const B=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),s=e.next_out,O=e.output,i=s-(r-e.avail_out),o=s+(e.avail_out-257),c=B.dmax,u=B.wsize,d=B.whave,A=B.wnext,h=B.window,f=B.hold,m=B.bits,p=B.lencode,g=B.distcode,x=(1<<B.lenbits)-1,y=(1<<B.distbits)-1;e:do{m<15&&(f+=S[n++]<<m,m+=8,f+=S[n++]<<m,m+=8),b=p[f&x];t:for(;;){if(w=b>>>24,f>>>=w,m-=w,w=b>>>16&255,w===0)O[s++]=b&65535;else if(w&16){I=b&65535,w&=15,w&&(m<w&&(f+=S[n++]<<m,m+=8),I+=f&(1<<w)-1,f>>>=w,m-=w),m<15&&(f+=S[n++]<<m,m+=8,f+=S[n++]<<m,m+=8),b=g[f&y];r:for(;;){if(w=b>>>24,f>>>=w,m-=w,w=b>>>16&255,w&16){if(T=b&65535,w&=15,m<w&&(f+=S[n++]<<m,m+=8,m<w&&(f+=S[n++]<<m,m+=8)),T+=f&(1<<w)-1,T>c){e.msg="invalid distance too far back",B.mode=LN;break e}if(f>>>=w,m-=w,w=s-i,T>w){if(w=T-w,w>d&&B.sane){e.msg="invalid distance too far back",B.mode=LN;break e}if(C=0,E=h,A===0){if(C+=u-w,w<I){I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}}else if(A<w){if(C+=u+A-w,w-=A,w<I){I-=w;do O[s++]=h[C++];while(--w);if(C=0,A<I){w=A,I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}}}else if(C+=A-w,w<I){I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}for(;I>2;)O[s++]=E[C++],O[s++]=E[C++],O[s++]=E[C++],I-=3;I&&(O[s++]=E[C++],I>1&&(O[s++]=E[C++]))}else{C=s-T;do O[s++]=O[C++],O[s++]=O[C++],O[s++]=O[C++],I-=3;while(I>2);I&&(O[s++]=O[C++],I>1&&(O[s++]=O[C++]))}}else if(w&64){e.msg="invalid distance code",B.mode=LN;break e}else{b=g[(b&65535)+(f&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){B.mode=nCe;break e}else{e.msg="invalid literal/length code",B.mode=LN;break e}else{b=p[(b&65535)+(f&(1<<w)-1)];continue t}break}}while(n<a&&s<o);I=m>>3,n-=I,m-=I<<3,f&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<o?257+(o-s):257-(s-o),B.hold=f,B.bits=m};const bg=15,p9=852,g9=592,x9=0,tB=1,v9=2,sCe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iCe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),oCe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lCe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),cCe=(t,e,r,n,a,s,i,o)=>{const c=o.bits;let u=0,d=0,A=0,h=0,f=0,m=0,p=0,g=0,x=0,y=0,b,w,I,T,C,E=null,S;const O=new Uint16Array(bg+1),B=new Uint16Array(bg+1);let P=null,D,W,Ae;for(u=0;u<=bg;u++)O[u]=0;for(d=0;d<n;d++)O[e[r+d]]++;for(f=c,h=bg;h>=1&&O[h]===0;h--);if(f>h&&(f=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,o.bits=1,0;for(A=1;A<h&&O[A]===0;A++);for(f<A&&(f=A),g=1,u=1;u<=bg;u++)if(g<<=1,g-=O[u],g<0)return-1;if(g>0&&(t===x9||h!==1))return-1;for(B[1]=0,u=1;u<bg;u++)B[u+1]=B[u]+O[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[B[e[r+d]]++]=d);if(t===x9?(E=P=i,S=20):t===tB?(E=sCe,P=iCe,S=257):(E=oCe,P=lCe,S=0),y=0,d=0,u=A,C=s,m=f,p=0,I=-1,x=1<<f,T=x-1,t===tB&&x>p9||t===v9&&x>g9)return 1;for(;;){D=u-p,i[d]+1<S?(W=0,Ae=i[d]):i[d]>=S?(W=P[i[d]-S],Ae=E[i[d]-S]):(W=96,Ae=0),b=1<<u-p,w=1<<m,A=w;do w-=b,a[C+(y>>p)+w]=D<<24|W<<16|Ae|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--O[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>f&&(y&T)!==I){for(p===0&&(p=f),C+=A,m=u-p,g=1<<m;m+p<h&&(g-=O[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===tB&&x>p9||t===v9&&x>g9)return 1;I=y&T,a[I]=f<<24|m<<16|C-s|0}}return y!==0&&(a[C+y]=u-p<<24|64<<16|0),o.bits=f,0};var Qy=cCe;const uCe=0,cee=1,uee=2,{Z_FINISH:y9,Z_BLOCK:dCe,Z_TREES:UN,Z_OK:gp,Z_STREAM_END:ACe,Z_NEED_DICT:fCe,Z_STREAM_ERROR:Eu,Z_DATA_ERROR:dee,Z_MEM_ERROR:Aee,Z_BUF_ERROR:hCe,Z_DEFLATED:b9}=iee,i4=16180,w9=16181,N9=16182,_9=16183,C9=16184,E9=16185,S9=16186,I9=16187,B9=16188,T9=16189,OE=16190,TA=16191,rB=16192,P9=16193,nB=16194,j9=16195,k9=16196,F9=16197,O9=16198,QN=16199,VN=16200,D9=16201,R9=16202,M9=16203,L9=16204,U9=16205,aB=16206,Q9=16207,V9=16208,$a=16209,fee=16210,hee=16211,mCe=852,pCe=592,gCe=15,xCe=gCe,H9=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function vCe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<i4||e.mode>hee?1:0},mee=t=>{if(Qp(t))return Eu;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=i4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(mCe),e.distcode=e.distdyn=new Int32Array(pCe),e.sane=1,e.back=-1,gp},pee=t=>{if(Qp(t))return Eu;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,mee(t)},gee=(t,e)=>{let r;if(Qp(t))return Eu;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Eu:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,pee(t))},xee=(t,e)=>{if(!t)return Eu;const r=new vCe;t.state=r,r.strm=t,r.window=null,r.mode=i4;const n=gee(t,e);return n!==gp&&(t.state=null),n},yCe=t=>xee(t,xCe);let $9=!0,sB,iB;const bCe=t=>{if($9){sB=new Int32Array(512),iB=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Qy(cee,t.lens,0,288,sB,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Qy(uee,t.lens,0,32,iB,0,t.work,{bits:5}),$9=!1}t.lencode=sB,t.lenbits=9,t.distcode=iB,t.distbits=5},vee=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},wCe=(t,e)=>{let r,n,a,s,i,o,c,u,d,A,h,f,m,p,g=0,x,y,b,w,I,T,C,E;const S=new Uint8Array(4);let O,B;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qp(t)||!t.output||!t.input&&t.avail_in!==0)return Eu;r=t.state,r.mode===TA&&(r.mode=rB),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,d=r.bits,A=o,h=c,E=gp;e:for(;;)switch(r.mode){case i4:if(r.wrap===0){r.mode=rB;break}for(;d<16;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,S[0]=u&255,S[1]=u>>>8&255,r.check=Od(r.check,S,2,0),u=0,d=0,r.mode=w9;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=$a;break}if((u&15)!==b9){t.msg="unknown compression method",r.mode=$a;break}if(u>>>=4,d-=4,C=(u&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){t.msg="invalid window size",r.mode=$a;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?T9:TA,u=0,d=0;break;case w9:for(;d<16;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==b9){t.msg="unknown compression method",r.mode=$a;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=$a;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Od(r.check,S,2,0)),u=0,d=0,r.mode=N9;case N9:for(;d<32;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=Od(r.check,S,4,0)),u=0,d=0,r.mode=_9;case _9:for(;d<16;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Od(r.check,S,2,0)),u=0,d=0,r.mode=C9;case C9:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Od(r.check,S,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=E9;case E9:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),C)),r.flags&512&&r.wrap&4&&(r.check=Od(r.check,n,f,s)),o-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=S9;case S9:if(r.flags&2048){if(o===0)break e;f=0;do C=n[s+f++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Od(r.check,n,f,s)),o-=f,s+=f,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=I9;case I9:if(r.flags&4096){if(o===0)break e;f=0;do C=n[s+f++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Od(r.check,n,f,s)),o-=f,s+=f,C)break e}else r.head&&(r.head.comment=null);r.mode=B9;case B9:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=$a;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=TA;break;case T9:for(;d<32;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}t.adler=r.check=H9(u),u=0,d=0,r.mode=OE;case OE:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=d,fCe;t.adler=r.check=1,r.mode=TA;case TA:if(e===dCe||e===UN)break e;case rB:if(r.last){u>>>=d&7,d-=d&7,r.mode=aB;break}for(;d<3;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=P9;break;case 1:if(bCe(r),r.mode=QN,e===UN){u>>>=2,d-=2;break e}break;case 2:r.mode=k9;break;case 3:t.msg="invalid block type",r.mode=$a}u>>>=2,d-=2;break;case P9:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=$a;break}if(r.length=u&65535,u=0,d=0,r.mode=nB,e===UN)break e;case nB:r.mode=j9;case j9:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;a.set(n.subarray(s,s+f),i),o-=f,s+=f,c-=f,i+=f,r.length-=f;break}r.mode=TA;break;case k9:for(;d<14;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=$a;break}r.have=0,r.mode=F9;case F9:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.lens[P[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},E=Qy(uCe,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid code lengths set",r.mode=$a;break}r.have=0,r.mode=O9;case O9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(B=x+2;d<B;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=$a;break}C=r.lens[r.have-1],f=3+(u&3),u>>>=2,d-=2}else if(b===17){for(B=x+3;d<B;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,f=3+(u&7),u>>>=3,d-=3}else{for(B=x+7;d<B;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,f=11+(u&127),u>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=$a;break}for(;f--;)r.lens[r.have++]=C}}if(r.mode===$a)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=$a;break}if(r.lenbits=9,O={bits:r.lenbits},E=Qy(cee,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid literal/lengths set",r.mode=$a;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},E=Qy(uee,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,E){t.msg="invalid distances set",r.mode=$a;break}if(r.mode=QN,e===UN)break e;case QN:r.mode=VN;case VN:if(o>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=d,aCe(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,d=r.bits,r.mode===TA&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,I=y,T=b;g=r.lencode[T+((u&(1<<w+I)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=U9;break}if(y&32){r.back=-1,r.mode=TA;break}if(y&64){t.msg="invalid literal/length code",r.mode=$a;break}r.extra=y&15,r.mode=D9;case D9:if(r.extra){for(B=r.extra;d<B;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=R9;case R9:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,I=y,T=b;g=r.distcode[T+((u&(1<<w+I)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=$a;break}r.offset=b,r.extra=y&15,r.mode=M9;case M9:if(r.extra){for(B=r.extra;d<B;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=$a;break}r.mode=L9;case L9:if(c===0)break e;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=$a;break}f>r.wnext?(f-=r.wnext,m=r.wsize-f):m=r.wnext-f,f>r.length&&(f=r.length),p=r.window}else p=a,m=i-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do a[i++]=p[m++];while(--f);r.length===0&&(r.mode=VN);break;case U9:if(c===0)break e;a[i++]=r.length,c--,r.mode=VN;break;case aB:if(r.wrap){for(;d<32;){if(o===0)break e;o--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Od(r.check,a,h,i-h):Tj(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:H9(u))!==r.check){t.msg="incorrect data check",r.mode=$a;break}u=0,d=0}r.mode=Q9;case Q9:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=$a;break}u=0,d=0}r.mode=V9;case V9:E=ACe;break e;case $a:E=dee;break e;case fee:return Aee;case hee:default:return Eu}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<$a&&(r.mode<aB||e!==y9))&&vee(t,t.output,t.next_out,h-t.avail_out),A-=t.avail_in,h-=t.avail_out,t.total_in+=A,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Od(r.check,a,h,t.next_out-h):Tj(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===TA?128:0)+(r.mode===QN||r.mode===nB?256:0),(A===0&&h===0||e===y9)&&E===gp&&(E=hCe),E},NCe=t=>{if(Qp(t))return Eu;let e=t.state;return e.window&&(e.window=null),t.state=null,gp},_Ce=(t,e)=>{if(Qp(t))return Eu;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,gp):Eu},CCe=(t,e)=>{const r=e.length;let n,a,s;return Qp(t)||(n=t.state,n.wrap!==0&&n.mode!==OE)?Eu:n.mode===OE&&(a=1,a=Tj(a,e,r,0),a!==n.check)?dee:(s=vee(t,e,r,r),s?(n.mode=fee,Aee):(n.havedict=1,gp))};var ECe=pee,SCe=gee,ICe=mee,BCe=yCe,TCe=xee,PCe=wCe,jCe=NCe,kCe=_Ce,FCe=CCe,OCe="pako inflate (from Nodeca project)",MA={inflateReset:ECe,inflateReset2:SCe,inflateResetKeep:ICe,inflateInit:BCe,inflateInit2:TCe,inflate:PCe,inflateEnd:jCe,inflateGetHeader:kCe,inflateSetDictionary:FCe,inflateInfo:OCe};function DCe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RCe=DCe;const yee=Object.prototype.toString,{Z_NO_FLUSH:MCe,Z_FINISH:LCe,Z_OK:Q2,Z_STREAM_END:oB,Z_NEED_DICT:lB,Z_STREAM_ERROR:UCe,Z_DATA_ERROR:K9,Z_MEM_ERROR:QCe}=iee;function Gb(t){this.options=oee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rCe,this.strm.avail_out=0;let r=MA.inflateInit2(this.strm,e.windowBits);if(r!==Q2)throw new Error(Pj[r]);if(this.header=new RCe,MA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=jj.string2buf(e.dictionary):yee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=MA.inflateSetDictionary(this.strm,e.dictionary),r!==Q2)))throw new Error(Pj[r])}Gb.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,o;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?LCe:MCe,yee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=MA.inflate(r,i),s===lB&&a&&(s=MA.inflateSetDictionary(r,a),s===Q2?s=MA.inflate(r,i):s===K9&&(s=lB));r.avail_in>0&&s===oB&&r.state.wrap>0&&t[r.next_in]!==0;)MA.inflateReset(r),s=MA.inflate(r,i);switch(s){case UCe:case K9:case lB:case QCe:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===oB))if(this.options.to==="string"){let c=jj.utf8border(r.output,r.next_out),u=r.next_out-c,d=jj.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Q2&&o===0)){if(s===oB)return s=MA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Gb.prototype.onData=function(t){this.chunks.push(t)};Gb.prototype.onEnd=function(t){t===Q2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function VCe(t,e){const r=new Gb(e);if(r.push(t),r.err)throw r.msg||Pj[r.err];return r.result}var HCe=Gb,$Ce=VCe,KCe={Inflate:HCe,inflate:$Ce};const{Inflate:GCe,inflate:zCe}=KCe;var G9=GCe,qCe=zCe;const bee=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;bee[t]=e}const z9=4294967295;function WCe(t,e,r){let n=t;for(let a=0;a<r;a++)n=bee[(n^e[a])&255]^n>>>8;return n}function XCe(t,e){return(WCe(z9,t,e)^z9)>>>0}function q9(t,e,r){const n=t.readUint32(),a=XCe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function wee(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Nee(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function _ee(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Cee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Eee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+YCe(e[s-a],r[s],r[s-a])&255}}function YCe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function JCe(t,e,r,n,a,s){switch(t){case 0:wee(e,r,a);break;case 1:Nee(e,r,a,s);break;case 2:_ee(e,r,n,a);break;case 3:Cee(e,r,n,a,s);break;case 4:Eee(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const ZCe=new Uint16Array([255]),eEe=new Uint8Array(ZCe.buffer),tEe=eEe[0]===255;function rEe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*a,c=new Uint8Array(n*r*o);let u=0;for(let d=0;d<7;d++){const A=i[d],h=Math.ceil((r-A.x)/A.xStep),f=Math.ceil((n-A.y)/A.yStep);if(h<=0||f<=0)continue;const m=h*o,p=new Uint8Array(m);for(let g=0;g<f;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);JCe(x,y,b,p,m,o),p.set(b);for(let w=0;w<h;w++){const I=A.x+w*A.xStep,T=A.y+g*A.yStep;if(!(I>=r||T>=n))for(let C=0;C<o;C++)c[(T*r+I)*o+C]=b[w*o+C]}}}if(s===16){const d=new Uint16Array(c.buffer);if(tEe)for(let A=0;A<d.length;A++)d[A]=nEe(d[A]);return d}else return c}function nEe(t){return(t&255)<<8|t>>8&255}const aEe=new Uint16Array([255]),sEe=new Uint8Array(aEe.buffer),iEe=sEe[0]===255,oEe=new Uint8Array(0);function W9(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,o=Math.ceil(s/8*a*r),c=new Uint8Array(n*o);let u=oEe,d=0,A,h;for(let f=0;f<n;f++){switch(A=e.subarray(d+1,d+1+o),h=c.subarray(f*o,(f+1)*o),e[d]){case 0:wee(A,h,o);break;case 1:Nee(A,h,o,i);break;case 2:_ee(A,h,u,o);break;case 3:Cee(A,h,u,o,i);break;case 4:Eee(A,h,u,o,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=o+1}if(s===16){const f=new Uint16Array(c.buffer);if(iEe)for(let m=0;m<f.length;m++)f[m]=lEe(f[m]);return f}else return c}function lEe(t){return(t&255)<<8|t>>8&255}const bC=Uint8Array.of(137,80,78,71,13,10,26,10);function X9(t){if(!cEe(t.readBytes(bC.length)))throw new Error("wrong PNG signature")}function cEe(t){if(t.length<bC.length)return!1;for(let e=0;e<bC.length;e++)if(t[e]!==bC[e])return!1;return!0}const uEe="tEXt",dEe=0,See=new TextDecoder("latin1");function AEe(t){if(hEe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const fEe=/^[\u0000-\u00FF]*$/;function hEe(t){if(!fEe.test(t))throw new Error("invalid latin1 text")}function mEe(t,e,r){const n=Iee(e);t[n]=pEe(e,r-n.length-1)}function Iee(t){for(t.mark();t.readByte()!==dEe;);const e=t.offset;t.reset();const r=See.decode(t.readBytes(e-t.offset-1));return t.skip(1),AEe(r),r}function pEe(t,e){return See.decode(t.readBytes(e))}const Ac={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},cB={UNKNOWN:-1,DEFLATE:0},Y9={UNKNOWN:-1,ADAPTIVE:0},uB={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},HN={NONE:0,BACKGROUND:1,PREVIOUS:2},dB={SOURCE:0,OVER:1};class gEe extends w6{constructor(r,n={}){super(r);Rn(this,"_checkCrc");Rn(this,"_inflator");Rn(this,"_png");Rn(this,"_apng");Rn(this,"_end");Rn(this,"_hasPalette");Rn(this,"_palette");Rn(this,"_hasTransparency");Rn(this,"_transparency");Rn(this,"_compressionMethod");Rn(this,"_filterMethod");Rn(this,"_interlaceMethod");Rn(this,"_colorType");Rn(this,"_isAnimated");Rn(this,"_numberOfFrames");Rn(this,"_numberOfPlays");Rn(this,"_frames");Rn(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new G9,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=cB.UNKNOWN,this._filterMethod=Y9.UNKNOWN,this._interlaceMethod=uB.UNKNOWN,this._colorType=Ac.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(X9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(X9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case uEe:mEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?q9(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?q9(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=xEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Ac.GREYSCALE:a=1;break;case Ac.TRUECOLOUR:a=3;break;case Ac.INDEXED_COLOUR:a=1;break;case Ac.GREYSCALE_ALPHA:a=2;break;case Ac.TRUECOLOUR_ALPHA:a=4;break;case Ac.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==cB.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ac.GREYSCALE:case Ac.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ac.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ac.UNKNOWN:case Ac.GREYSCALE_ALPHA:case Ac.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Iee(this),a=this.readUint8();if(a!==cB.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:qCe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=W9({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case HN.NONE:break;case HN.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const o=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case HN.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,o)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,u=(i*n.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case dB.SOURCE:for(let i=0;i<n.height;i++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=s(i,o);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case dB.OVER:for(let i=0;i<n.height;i++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:u}=s(i,o);for(let d=0;d<this._png.channels;d++){const A=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],f=Math.floor(A*h+(1-A)*r.data[c+d]);r.data[c+d]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Y9.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===uB.NO_INTERLACE)this._png.data=W9({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===uB.ADAM7)this._png.data=rEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:HN.NONE,blendOp:dB.SOURCE,data:r}),this._inflator=new G9,this._writingDataChunks=!1}}function xEe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var J9;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(J9||(J9={}));function vEe(t,e){return new gEe(t,e).decode()}var Vr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function AB(){Vr.console&&typeof Vr.console.log=="function"&&Vr.console.log.apply(Vr.console,arguments)}var pa={log:AB,warn:function(t){Vr.console&&(typeof Vr.console.warn=="function"?Vr.console.warn.apply(Vr.console,arguments):AB.call(null,arguments))},error:function(t){Vr.console&&(typeof Vr.console.error=="function"?Vr.console.error.apply(Vr.console,arguments):AB(t))}};function fB(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){mm(n.response,e,r)},n.onerror=function(){pa.error("could not download file")},n.send()}function Z9(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function $N(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var mm=Vr.saveAs||((typeof window>"u"?"undefined":ea(window))!=="object"||window!==Vr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Vr.URL||Vr.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?Z9(a.href)?fB(t,e,r):$N(a,a.target="_blank"):$N(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){$N(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Z9(t))fB(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){$N(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ea(s)!=="object"&&(pa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return fB(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(Vr.HTMLElement)||Vr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ea(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var c=Vr.URL||Vr.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Bee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}var wC=Vr.atob.bind(Vr),eQ=Vr.btoa.bind(Vr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hB(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Fo(r,n,a,s,e[0],7,-680876936),s=Fo(s,r,n,a,e[1],12,-389564586),a=Fo(a,s,r,n,e[2],17,606105819),n=Fo(n,a,s,r,e[3],22,-1044525330),r=Fo(r,n,a,s,e[4],7,-176418897),s=Fo(s,r,n,a,e[5],12,1200080426),a=Fo(a,s,r,n,e[6],17,-1473231341),n=Fo(n,a,s,r,e[7],22,-45705983),r=Fo(r,n,a,s,e[8],7,1770035416),s=Fo(s,r,n,a,e[9],12,-1958414417),a=Fo(a,s,r,n,e[10],17,-42063),n=Fo(n,a,s,r,e[11],22,-1990404162),r=Fo(r,n,a,s,e[12],7,1804603682),s=Fo(s,r,n,a,e[13],12,-40341101),a=Fo(a,s,r,n,e[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Oo(s,r,n,a,e[6],9,-1069501632),a=Oo(a,s,r,n,e[11],14,643717713),n=Oo(n,a,s,r,e[0],20,-373897302),r=Oo(r,n,a,s,e[5],5,-701558691),s=Oo(s,r,n,a,e[10],9,38016083),a=Oo(a,s,r,n,e[15],14,-660478335),n=Oo(n,a,s,r,e[4],20,-405537848),r=Oo(r,n,a,s,e[9],5,568446438),s=Oo(s,r,n,a,e[14],9,-1019803690),a=Oo(a,s,r,n,e[3],14,-187363961),n=Oo(n,a,s,r,e[8],20,1163531501),r=Oo(r,n,a,s,e[13],5,-1444681467),s=Oo(s,r,n,a,e[2],9,-51403784),a=Oo(a,s,r,n,e[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Do(s,r,n,a,e[8],11,-2022574463),a=Do(a,s,r,n,e[11],16,1839030562),n=Do(n,a,s,r,e[14],23,-35309556),r=Do(r,n,a,s,e[1],4,-1530992060),s=Do(s,r,n,a,e[4],11,1272893353),a=Do(a,s,r,n,e[7],16,-155497632),n=Do(n,a,s,r,e[10],23,-1094730640),r=Do(r,n,a,s,e[13],4,681279174),s=Do(s,r,n,a,e[0],11,-358537222),a=Do(a,s,r,n,e[3],16,-722521979),n=Do(n,a,s,r,e[6],23,76029189),r=Do(r,n,a,s,e[9],4,-640364487),s=Do(s,r,n,a,e[12],11,-421815835),a=Do(a,s,r,n,e[15],16,530742520),r=Ro(r,n=Do(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ro(s,r,n,a,e[7],10,1126891415),a=Ro(a,s,r,n,e[14],15,-1416354905),n=Ro(n,a,s,r,e[5],21,-57434055),r=Ro(r,n,a,s,e[12],6,1700485571),s=Ro(s,r,n,a,e[3],10,-1894986606),a=Ro(a,s,r,n,e[10],15,-1051523),n=Ro(n,a,s,r,e[1],21,-2054922799),r=Ro(r,n,a,s,e[8],6,1873313359),s=Ro(s,r,n,a,e[15],10,-30611744),a=Ro(a,s,r,n,e[6],15,-1560198380),n=Ro(n,a,s,r,e[13],21,1309151649),r=Ro(r,n,a,s,e[4],6,-145523070),s=Ro(s,r,n,a,e[11],10,-1120210379),a=Ro(a,s,r,n,e[2],15,718787259),n=Ro(n,a,s,r,e[9],21,-343485551),t[0]=$h(r,t[0]),t[1]=$h(n,t[1]),t[2]=$h(a,t[2]),t[3]=$h(s,t[3])}function o4(t,e,r,n,a,s){return e=$h($h(e,t),$h(n,s)),$h(e<<a|e>>>32-a,r)}function Fo(t,e,r,n,a,s,i){return o4(e&r|~e&n,t,e,a,s,i)}function Oo(t,e,r,n,a,s,i){return o4(e&n|r&~n,t,e,a,s,i)}function Do(t,e,r,n,a,s,i){return o4(e^r^n,t,e,a,s,i)}function Ro(t,e,r,n,a,s,i){return o4(r^(e|~n),t,e,a,s,i)}function Tee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)hB(n,yEe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(hB(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,hB(n,a),n}function yEe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var tQ="0123456789abcdef".split("");function bEe(t){for(var e="",r=0;r<4;r++)e+=tQ[t>>8*r+4&15]+tQ[t>>8*r&15];return e}function wEe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function kj(t){return Tee(t).map(wEe).join("")}var NEe=function(t){for(var e=0;e<t.length;e++)t[e]=bEe(t[e]);return t.join("")}(Tee("hello"))!="5d41402abc4b2a76b9719d911017c592";function $h(t,e){if(NEe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Fj(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=t,n=o}else o=n;var A=e.length,h=0,f=0,m="";for(c=0;c<A;c++)f=(f+(d=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=d,i=o[(o[h]+o[f])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var rQ={print:4,modify:8,copy:16,"annot-forms":32};function Kg(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(rQ.perm!==void 0)throw new Error("Invalid permission: "+o);a+=rQ[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=kj(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Fj(this.encryptionKey,this.padding)}function Gg(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function nQ(t){if(ea(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(o){Vr.console&&pa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function V2(t){if(!(this instanceof V2))return new V2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Pee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Dh(t,e,r,n,a){if(!(this instanceof Dh))return new Dh(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Pee.call(this,n,a)}function Pm(t,e,r,n,a){if(!(this instanceof Pm))return new Pm(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Pee.call(this,n,a)}function gr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ea(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var A=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=nQ;var m="1.3",p=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(U){m=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var x=f.__private__.getPageFormat=function(U){return g[U]};a=a||"a4";var y="compat",b="advanced",w=y;function I(){this.saveGraphicsState(),z(new Ne(re,0,0,-re,0,$c()*re).toString()+" cm"),this.setFontSize(this.getFontSize()/re),u="n",w=b}function T(){this.restoreGraphicsState(),u="S",w=y}var C=f.__private__.combineFontStyleAndFontWeight=function(U,ge){if(U=="bold"&&ge=="normal"||U=="bold"&&ge==400||U=="normal"&&ge=="italic"||U=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(U=ge==400||ge==="normal"?U==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||U!=="normal"?(ge==700?"bold":ge)+""+U:"bold"),U};f.advancedAPI=function(U){var ge=w===y;return ge&&I.call(this),typeof U!="function"||(U(this),ge&&T.call(this)),this},f.compatAPI=function(U){var ge=w===b;return ge&&T.call(this),typeof U!="function"||(U(this),ge&&I.call(this)),this},f.isAdvancedAPI=function(){return w===b};var E,S=function(U){if(w!==b)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=f.roundToPrecision=f.__private__.roundToPrecision=function(U,ge){var ze=e||ge;if(isNaN(U)||isNaN(ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(ze).replace(/0+$/,"")};E=f.hpf=f.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,16)};var B=f.f2=f.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return O(U,2)},P=f.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return O(U,3)},D=f.scale=f.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?U*re:w===b?U:void 0},W=function(U){return D(function(ge){return w===y?$c()-ge:w===b?ge:void 0}(U))};f.__private__.setPrecision=f.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var Ae,ee="00000000000000000000000000000000",ce=f.__private__.getFileId=function(){return ee},de=f.__private__.setFileId=function(U){return ee=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(da=new Kg(d.userPermissions,d.userPassword,d.ownerPassword,ee)),ee};f.setFileId=function(U){return de(U),this},f.getFileId=function(){return ce()};var X=f.__private__.convertDateToPDFDate=function(U){var ge=U.getTimezoneOffset(),ze=ge<0?"+":"-",ot=Math.floor(Math.abs(ge/60)),vt=Math.abs(ge%60),Ut=[ze,V(ot),"'",V(vt),"'"].join("");return["D:",U.getFullYear(),V(U.getMonth()+1),V(U.getDate()),V(U.getHours()),V(U.getMinutes()),V(U.getSeconds()),Ut].join("")},pe=f.__private__.convertPDFDateToDate=function(U){var ge=parseInt(U.substr(2,4),10),ze=parseInt(U.substr(6,2),10)-1,ot=parseInt(U.substr(8,2),10),vt=parseInt(U.substr(10,2),10),Ut=parseInt(U.substr(12,2),10),$t=parseInt(U.substr(14,2),10);return new Date(ge,ze,ot,vt,Ut,$t,0)},Se=f.__private__.setCreationDate=function(U){var ge;if(U===void 0&&(U=new Date),U instanceof Date)ge=X(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=U}return Ae=ge},k=f.__private__.getCreationDate=function(U){var ge=Ae;return U==="jsDate"&&(ge=pe(Ae)),ge};f.setCreationDate=function(U){return Se(U),this},f.getCreationDate=function(U){return k(U)};var F,V=f.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},M=f.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},L=0,q=[],R=[],K=0,Z=[],te=[],Q=!1,ye=R;f.__private__.setCustomOutputDestination=function(U){Q=!0,ye=U};var Y=function(U){Q||(ye=U)};f.__private__.resetCustomOutputDestination=function(){Q=!1,ye=R};var z=f.__private__.out=function(U){return U=U.toString(),K+=U.length+1,ye.push(U),ye},le=f.__private__.write=function(U){return z(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},je=f.__private__.getArrayBuffer=function(U){for(var ge=U.length,ze=new ArrayBuffer(ge),ot=new Uint8Array(ze);ge--;)ot[ge]=U.charCodeAt(ge);return ze},ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ue};var Pe=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(U){return Pe=w===b?U/re:U,this};var Ye,nt=f.__private__.getFontSize=f.getFontSize=function(){return w===y?Pe:Pe*re},mt=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(U){return mt=U,this},f.__private__.getR2L=f.getR2L=function(){return mt};var ct,ft=f.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))Ye=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');Ye=U}else Ye=parseInt(U,10)};f.__private__.getZoomMode=function(){return Ye};var Ct,At=f.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');ct=U};f.__private__.getPageMode=function(){return ct};var He=f.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');Ct=U};f.__private__.getLayoutMode=function(){return Ct},f.__private__.setDisplayMode=f.setDisplayMode=function(U,ge,ze){return ft(U),He(ge),At(ze),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(U){if(Object.keys(it).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[U]},f.__private__.getDocumentProperties=function(){return it},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(U){for(var ge in it)it.hasOwnProperty(ge)&&U[ge]&&(it[ge]=U[ge]);return this},f.__private__.setDocumentProperty=function(U,ge){if(Object.keys(it).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[U]=ge};var we,re,ne,Ue,Ke,et={},ke={},he=[],_e={},be={},Qe={},$e={},Je=null,st=0,yt=[],Dt=new nQ(f),nr=t.hotfixes||[],Ce={},dt={},gt=[],Ne=function U(ge,ze,ot,vt,Ut,$t){if(!(this instanceof U))return new U(ge,ze,ot,vt,Ut,$t);isNaN(ge)&&(ge=1),isNaN(ze)&&(ze=0),isNaN(ot)&&(ot=0),isNaN(vt)&&(vt=1),isNaN(Ut)&&(Ut=0),isNaN($t)&&($t=0),this._matrix=[ge,ze,ot,vt,Ut,$t]};Object.defineProperty(Ne.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Ne.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Ne.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Ne.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Ne.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Ne.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Ne.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Ne.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Ne.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Ne.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Ne.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Ne.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Ne.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ne.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ne.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ne.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ne.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(U)},Ne.prototype.multiply=function(U){var ge=U.sx*this.sx+U.shy*this.shx,ze=U.sx*this.shy+U.shy*this.sy,ot=U.shx*this.sx+U.sy*this.shx,vt=U.shx*this.shy+U.sy*this.sy,Ut=U.tx*this.sx+U.ty*this.shx+this.tx,$t=U.tx*this.shy+U.ty*this.sy+this.ty;return new Ne(ge,ze,ot,vt,Ut,$t)},Ne.prototype.decompose=function(){var U=this.sx,ge=this.shy,ze=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty,$t=Math.sqrt(U*U+ge*ge),pr=(U/=$t)*ze+(ge/=$t)*ot;ze-=U*pr,ot-=ge*pr;var Nr=Math.sqrt(ze*ze+ot*ot);return pr/=Nr,U*(ot/=Nr)<ge*(ze/=Nr)&&(U=-U,ge=-ge,pr=-pr,$t=-$t),{scale:new Ne($t,0,0,Nr,0,0),translate:new Ne(1,0,0,1,vt,Ut),rotate:new Ne(U,ge,-ge,U,0,0),skew:new Ne(1,0,pr,1,0,0)}},Ne.prototype.toString=function(U){return this.join(" ")},Ne.prototype.inversed=function(){var U=this.sx,ge=this.shy,ze=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty,$t=1/(U*ot-ge*ze),pr=ot*$t,Nr=-ge*$t,Rr=-ze*$t,Kr=U*$t;return new Ne(pr,Nr,Rr,Kr,-pr*vt-Rr*Ut,-Nr*vt-Kr*Ut)},Ne.prototype.applyToPoint=function(U){var ge=U.x*this.sx+U.y*this.shx+this.tx,ze=U.x*this.shy+U.y*this.sy+this.ty;return new Vc(ge,ze)},Ne.prototype.applyToRectangle=function(U){var ge=this.applyToPoint(U),ze=this.applyToPoint(new Vc(U.x+U.w,U.y+U.h));return new Kf(ge.x,ge.y,ze.x-ge.x,ze.y-ge.y)},Ne.prototype.clone=function(){var U=this.sx,ge=this.shy,ze=this.shx,ot=this.sy,vt=this.tx,Ut=this.ty;return new Ne(U,ge,ze,ot,vt,Ut)},f.Matrix=Ne;var at=f.matrixMult=function(U,ge){return ge.multiply(U)},wt=new Ne(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=wt;var kt=function(U,ge){if(!be[U]){var ze=(ge instanceof Dh?"Sh":"P")+(Object.keys(_e).length+1).toString(10);ge.id=ze,be[U]=ze,_e[ze]=ge,Dt.publish("addPattern",ge)}};f.ShadingPattern=Dh,f.TilingPattern=Pm,f.addShadingPattern=function(U,ge){return S("addShadingPattern()"),kt(U,ge),this},f.beginTilingPattern=function(U){S("beginTilingPattern()"),Id(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},f.endTilingPattern=function(U,ge){S("endTilingPattern()"),ge.stream=te[F].join(`
`),kt(U,ge),Dt.publish("endTilingPattern",ge),gt.pop().restore()};var Lt,qt=f.__private__.newObject=function(){var U=_t();return ie(U,!0),U},_t=f.__private__.newObjectDeferred=function(){return L++,q[L]=function(){return K},L},ie=function(U,ge){return ge=typeof ge=="boolean"&&ge,q[U]=K,ge&&z(U+" 0 obj"),U},se=f.__private__.newAdditionalObject=function(){var U={objId:_t(),content:""};return Z.push(U),U},me=_t(),fe=_t(),Te=f.__private__.decodeColorString=function(U){var ge=U.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length!==5||ge[4]!=="k"&&ge[4]!=="K"||(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var ze=parseFloat(ge[0]);ge=[ze,ze,ze,"r"]}for(var ot="#",vt=0;vt<3;vt++)ot+=("0"+Math.floor(255*parseFloat(ge[vt])).toString(16)).slice(-2);return ot},Re=f.__private__.encodeColorString=function(U){var ge;typeof U=="string"&&(U={ch1:U});var ze=U.ch1,ot=U.ch2,vt=U.ch3,Ut=U.ch4,$t=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ze=="string"&&ze.charAt(0)!=="#"){var pr=new Bee(ze);if(pr.ok)ze=pr.toHex();else if(!/^\d*\.?\d*$/.test(ze))throw new Error('Invalid color "'+ze+'" passed to jsPDF.encodeColorString.')}if(typeof ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ze)&&(ze="#"+ze[1]+ze[1]+ze[2]+ze[2]+ze[3]+ze[3]),typeof ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ze)){var Nr=parseInt(ze.substr(1),16);ze=Nr>>16&255,ot=Nr>>8&255,vt=255&Nr}if(ot===void 0||Ut===void 0&&ze===ot&&ot===vt)ge=typeof ze=="string"?ze+" "+$t[0]:U.precision===2?B(ze/255)+" "+$t[0]:P(ze/255)+" "+$t[0];else if(Ut===void 0||ea(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return["1.","1.","1.",$t[1]].join(" ");ge=typeof ze=="string"?[ze,ot,vt,$t[1]].join(" "):U.precision===2?[B(ze/255),B(ot/255),B(vt/255),$t[1]].join(" "):[P(ze/255),P(ot/255),P(vt/255),$t[1]].join(" ")}else ge=typeof ze=="string"?[ze,ot,vt,Ut,$t[2]].join(" "):U.precision===2?[B(ze),B(ot),B(vt),B(Ut),$t[2]].join(" "):[P(ze),P(ot),P(vt),P(Ut),$t[2]].join(" ");return ge},ae=f.__private__.getFilters=function(){return i},Me=f.__private__.putStream=function(U){var ge=(U=U||{}).data||"",ze=U.filters||ae(),ot=U.alreadyAppliedFilters||[],vt=U.addLength1||!1,Ut=ge.length,$t=U.objectId,pr=function(xs){return xs};if(d!==null&&$t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(pr=da.encryptor($t,0));var Nr={};ze===!0&&(ze=["FlateEncode"]);var Rr=U.additionalKeyValues||[],Kr=(Nr=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(ge,ze):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(Nr.data.length!==0&&(Rr.push({key:"Length",value:Nr.data.length}),vt===!0&&Rr.push({key:"Length1",value:Ut})),Kr.length!=0)if(Kr.split("/").length-1==1)Rr.push({key:"Filter",value:Kr});else{Rr.push({key:"Filter",value:"["+Kr+"]"});for(var hn=0;hn<Rr.length;hn+=1)if(Rr[hn].key==="DecodeParms"){for(var Dn=[],rs=0;rs<Nr.reverseChain.split("/").length-1;rs+=1)Dn.push("null");Dn.push(Rr[hn].value),Rr[hn].value="["+Dn.join(" ")+"]"}}z("<<");for(var $n=0;$n<Rr.length;$n++)z("/"+Rr[$n].key+" "+Rr[$n].value);z(">>"),Nr.data.length!==0&&(z("stream"),z(pr(Nr.data)),z("endstream"))},xe=f.__private__.putPage=function(U){var ge=U.number,ze=U.data,ot=U.objId,vt=U.contentsObjId;ie(ot,!0),z("<</Type /Page"),z("/Parent "+U.rootDictionaryObjId+" 0 R"),z("/Resources "+U.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(E(U.mediaBox.bottomLeftX))+" "+parseFloat(E(U.mediaBox.bottomLeftY))+" "+E(U.mediaBox.topRightX)+" "+E(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&z("/CropBox ["+E(U.cropBox.bottomLeftX)+" "+E(U.cropBox.bottomLeftY)+" "+E(U.cropBox.topRightX)+" "+E(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&z("/BleedBox ["+E(U.bleedBox.bottomLeftX)+" "+E(U.bleedBox.bottomLeftY)+" "+E(U.bleedBox.topRightX)+" "+E(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&z("/TrimBox ["+E(U.trimBox.bottomLeftX)+" "+E(U.trimBox.bottomLeftY)+" "+E(U.trimBox.topRightX)+" "+E(U.trimBox.topRightY)+"]"),U.artBox!==null&&z("/ArtBox ["+E(U.artBox.bottomLeftX)+" "+E(U.artBox.bottomLeftY)+" "+E(U.artBox.topRightX)+" "+E(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&z("/UserUnit "+U.userUnit),Dt.publish("putPage",{objId:ot,pageContext:yt[ge],pageNumber:ge,page:ze}),z("/Contents "+vt+" 0 R"),z(">>"),z("endobj");var Ut=ze.join(`
`);return w===b&&(Ut+=`
Q`),ie(vt,!0),Me({data:Ut,filters:ae(),objectId:vt}),z("endobj"),ot},Le=f.__private__.putPages=function(){var U,ge,ze=[];for(U=1;U<=st;U++)yt[U].objId=_t(),yt[U].contentsObjId=_t();for(U=1;U<=st;U++)ze.push(xe({number:U,data:te[U],objId:yt[U].objId,contentsObjId:yt[U].contentsObjId,mediaBox:yt[U].mediaBox,cropBox:yt[U].cropBox,bleedBox:yt[U].bleedBox,trimBox:yt[U].trimBox,artBox:yt[U].artBox,userUnit:yt[U].userUnit,rootDictionaryObjId:me,resourceDictionaryObjId:fe}));ie(me,!0),z("<</Type /Pages");var ot="/Kids [";for(ge=0;ge<st;ge++)ot+=ze[ge]+" 0 R ";z(ot+"]"),z("/Count "+st),z(">>"),z("endobj"),Dt.publish("postPutPages")},Ie=function(U){Dt.publish("putFont",{font:U,out:z,newObject:qt,putStream:Me}),U.isAlreadyPutted!==!0&&(U.objectNumber=qt(),z("<<"),z("/Type /Font"),z("/BaseFont /"+Gg(U.postScriptName)),z("/Subtype /Type1"),typeof U.encoding=="string"&&z("/Encoding /"+U.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},rt=function(U){U.objectNumber=qt();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[E(U.x),E(U.y),E(U.x+U.width),E(U.y+U.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var ze=U.pages[1].join(`
`);Me({data:ze,additionalKeyValues:ge,objectId:U.objectNumber}),z("endobj")},Ze=function(U,ge){ge||(ge=21);var ze=qt(),ot=function($t,pr){var Nr,Rr=[],Kr=1/(pr-1);for(Nr=0;Nr<1;Nr+=Kr)Rr.push(Nr);if(Rr.push(1),$t[0].offset!=0){var hn={offset:0,color:$t[0].color};$t.unshift(hn)}if($t[$t.length-1].offset!=1){var Dn={offset:1,color:$t[$t.length-1].color};$t.push(Dn)}for(var rs="",$n=0,xs=0;xs<Rr.length;xs++){for(Nr=Rr[xs];Nr>$t[$n+1].offset;)$n++;var ns=$t[$n].offset,vs=(Nr-ns)/($t[$n+1].offset-ns),as=$t[$n].color,Pl=$t[$n+1].color;rs+=M(Math.round((1-vs)*as[0]+vs*Pl[0]).toString(16))+M(Math.round((1-vs)*as[1]+vs*Pl[1]).toString(16))+M(Math.round((1-vs)*as[2]+vs*Pl[2]).toString(16))}return rs.trim()}(U.colors,ge),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+ge+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me({data:ot,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ze}),z("endobj"),U.objectNumber=qt(),z("<< /ShadingType "+U.type),z("/ColorSpace /DeviceRGB");var Ut="/Coords ["+E(parseFloat(U.coords[0]))+" "+E(parseFloat(U.coords[1]))+" ";U.type===2?Ut+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3])):Ut+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3]))+" "+E(parseFloat(U.coords[4]))+" "+E(parseFloat(U.coords[5])),z(Ut+="]"),U.matrix&&z("/Matrix ["+U.matrix.toString()+"]"),z("/Function "+ze+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},tt=function(U,ge){var ze=_t(),ot=qt();ge.push({resourcesOid:ze,objectOid:ot}),U.objectNumber=ot;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+U.boundingBox.map(E).join(" ")+"]"}),vt.push({key:"XStep",value:E(U.xStep)}),vt.push({key:"YStep",value:E(U.yStep)}),vt.push({key:"Resources",value:ze+" 0 R"}),U.matrix&&vt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),Me({data:U.stream,additionalKeyValues:vt,objectId:U.objectNumber}),z("endobj")},Xe=function(U){for(var ge in U.objectNumber=qt(),z("<<"),U)switch(ge){case"opacity":z("/ca "+B(U[ge]));break;case"stroke-opacity":z("/CA "+B(U[ge]))}z(">>"),z("endobj")},lt=function(U){ie(U.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ge in z("/Font <<"),et)et.hasOwnProperty(ge)&&(A===!1||A===!0&&h.hasOwnProperty(ge))&&z("/"+ge+" "+et[ge].objectNumber+" 0 R");z(">>")}(),function(){if(Object.keys(_e).length>0){for(var ge in z("/Shading <<"),_e)_e.hasOwnProperty(ge)&&_e[ge]instanceof Dh&&_e[ge].objectNumber>=0&&z("/"+ge+" "+_e[ge].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),z(">>")}}(),function(ge){if(Object.keys(_e).length>0){for(var ze in z("/Pattern <<"),_e)_e.hasOwnProperty(ze)&&_e[ze]instanceof f.TilingPattern&&_e[ze].objectNumber>=0&&_e[ze].objectNumber<ge&&z("/"+ze+" "+_e[ze].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),z(">>")}}(U.objectOid),function(){if(Object.keys(Qe).length>0){var ge;for(ge in z("/ExtGState <<"),Qe)Qe.hasOwnProperty(ge)&&Qe[ge].objectNumber>=0&&z("/"+ge+" "+Qe[ge].objectNumber+" 0 R");Dt.publish("putGStateDict"),z(">>")}}(),function(){for(var ge in z("/XObject <<"),Ce)Ce.hasOwnProperty(ge)&&Ce[ge].objectNumber>=0&&z("/"+ge+" "+Ce[ge].objectNumber+" 0 R");Dt.publish("putXobjectDict"),z(">>")}(),z(">>"),z("endobj")},xt=function(U){ke[U.fontName]=ke[U.fontName]||{},ke[U.fontName][U.fontStyle]=U.id},Wt=function(U,ge,ze,ot,vt){var Ut={id:"F"+(Object.keys(et).length+1).toString(10),postScriptName:U,fontName:ge,fontStyle:ze,encoding:ot,isStandardFont:vt||!1,metadata:{}};return Dt.publish("addFont",{font:Ut,instance:this}),et[Ut.id]=Ut,xt(Ut),Ut.id},er=f.__private__.pdfEscape=f.pdfEscape=function(U,ge){return function(ze,ot){var vt,Ut,$t,pr,Nr,Rr,Kr,hn,Dn;if($t=(ot=ot||{}).sourceEncoding||"Unicode",Nr=ot.outputEncoding,(ot.autoencode||Nr)&&et[we].metadata&&et[we].metadata[$t]&&et[we].metadata[$t].encoding&&(pr=et[we].metadata[$t].encoding,!Nr&&et[we].encoding&&(Nr=et[we].encoding),!Nr&&pr.codePages&&(Nr=pr.codePages[0]),typeof Nr=="string"&&(Nr=pr[Nr]),Nr)){for(Kr=!1,Rr=[],vt=0,Ut=ze.length;vt<Ut;vt++)(hn=Nr[ze.charCodeAt(vt)])?Rr.push(String.fromCharCode(hn)):Rr.push(ze[vt]),Rr[vt].charCodeAt(0)>>8&&(Kr=!0);ze=Rr.join("")}for(vt=ze.length;Kr===void 0&&vt!==0;)ze.charCodeAt(vt-1)>>8&&(Kr=!0),vt--;if(!Kr)return ze;for(Rr=ot.noBOM?[]:[254,255],vt=0,Ut=ze.length;vt<Ut;vt++){if((Dn=(hn=ze.charCodeAt(vt))>>8)>>8)throw new Error("Character at position "+vt+" of string '"+ze+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rr.push(Dn),Rr.push(hn-(Dn<<8))}return String.fromCharCode.apply(void 0,Rr)}(U,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tr=f.__private__.beginPage=function(U){te[++st]=[],yt[st]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},nl(st),Y(te[F])},va=function(U,ge){var ze,ot,vt;switch(r=ge||r,typeof U=="string"&&(ze=x(U.toLowerCase()),Array.isArray(ze)&&(ot=ze[0],vt=ze[1])),Array.isArray(U)&&(ot=U[0]*re,vt=U[1]*re),isNaN(ot)&&(ot=a[0],vt=a[1]),(ot>14400||vt>14400)&&(pa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),vt=Math.min(14400,vt)),a=[ot,vt],r.substr(0,1)){case"l":vt>ot&&(a=[vt,ot]);break;case"p":ot>vt&&(a=[vt,ot])}Tr(a),Dr(Vf),z(Ou),ia!==0&&z(ia+" J"),q0!==0&&z(q0+" j"),Dt.publish("addPage",{pageNumber:st})},sa=function(U){U>0&&U<=st&&(te.splice(U,1),yt.splice(U,1),st--,F>st&&(F=st),this.setPage(F))},nl=function(U){U>0&&U<=st&&(F=U)},Bs=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return te.length-1},ec=function(U,ge,ze){var ot,vt=void 0;return ze=ze||{},U=U!==void 0?U:et[we].fontName,ge=ge!==void 0?ge:et[we].fontStyle,ot=U.toLowerCase(),ke[ot]!==void 0&&ke[ot][ge]!==void 0?vt=ke[ot][ge]:ke[U]!==void 0&&ke[U][ge]!==void 0?vt=ke[U][ge]:ze.disableWarning===!1&&pa.warn("Unable to look up font label for font '"+U+"', '"+ge+"'. Refer to getFontList() for available fonts."),vt||ze.noFallback||(vt=ke.times[ge])==null&&(vt=ke.times.normal),vt},Ta=f.__private__.putInfo=function(){var U=qt(),ge=function(ot){return ot};for(var ze in d!==null&&(ge=da.encryptor(U,0)),z("<<"),z("/Producer ("+er(ge("jsPDF "+gr.version))+")"),it)it.hasOwnProperty(ze)&&it[ze]&&z("/"+ze.substr(0,1).toUpperCase()+ze.substr(1)+" ("+er(ge(it[ze]))+")");z("/CreationDate ("+er(ge(Ae))+")"),z(">>"),z("endobj")},tc=f.__private__.putCatalog=function(U){var ge=(U=U||{}).rootDictionaryObjId||me;switch(qt(),z("<<"),z("/Type /Catalog"),z("/Pages "+ge+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ze=""+Ye;ze.substr(ze.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&z("/OpenAction [3 0 R /XYZ null null "+B(Ye)+"]")}switch(Ct||(Ct="continuous"),Ct){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}ct&&z("/PageMode /"+ct),Dt.publish("putCatalog"),z(">>"),z("endobj")},Uf=f.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(L+1)),z("/Root "+L+" 0 R"),z("/Info "+(L-1)+" 0 R"),d!==null&&z("/Encrypt "+da.oid+" 0 R"),z("/ID [ <"+ee+"> <"+ee+"> ]"),z(">>")},ya=f.__private__.putHeader=function(){z("%PDF-"+m),z("%")},Cd=f.__private__.putXRef=function(){var U="0000000000";z("xref"),z("0 "+(L+1)),z("0000000000 65535 f ");for(var ge=1;ge<=L;ge++)typeof q[ge]=="function"?z((U+q[ge]()).slice(-10)+" 00000 n "):q[ge]!==void 0?z((U+q[ge]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},Mc=f.__private__.buildDocument=function(){var U;L=0,K=0,R=[],q=[],Z=[],me=_t(),fe=_t(),Y(R),Dt.publish("buildDocument"),ya(),Le(),function(){Dt.publish("putAdditionalObjects");for(var ze=0;ze<Z.length;ze++){var ot=Z[ze];ie(ot.objId,!0),z(ot.content),z("endobj")}Dt.publish("postPutAdditionalObjects")}(),U=[],function(){for(var ze in et)et.hasOwnProperty(ze)&&(A===!1||A===!0&&h.hasOwnProperty(ze))&&Ie(et[ze])}(),function(){var ze;for(ze in Qe)Qe.hasOwnProperty(ze)&&Xe(Qe[ze])}(),function(){for(var ze in Ce)Ce.hasOwnProperty(ze)&&rt(Ce[ze])}(),function(ze){var ot;for(ot in _e)_e.hasOwnProperty(ot)&&(_e[ot]instanceof Dh?Ze(_e[ot]):_e[ot]instanceof Pm&&tt(_e[ot],ze))}(U),Dt.publish("putResources"),U.forEach(lt),lt({resourcesOid:fe,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources"),d!==null&&(da.oid=qt(),z("<<"),z("/Filter /Standard"),z("/V "+da.v),z("/R "+da.r),z("/U <"+da.toHexString(da.U)+">"),z("/O <"+da.toHexString(da.O)+">"),z("/P "+da.P),z(">>"),z("endobj")),Ta(),tc();var ge=K;return Cd(),Uf(),z("startxref"),z(""+ge),z("%%EOF"),Y(te[F]),R.join(`
`)},pA=f.__private__.getBlob=function(U){return new Blob([je(U)],{type:"application/pdf"})},K0=f.output=f.__private__.output=(Lt=function(U,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",U){case void 0:return Mc();case"save":f.save(ge.filename);break;case"arraybuffer":return je(Mc());case"blob":return pA(Mc());case"bloburi":case"bloburl":if(Vr.URL!==void 0&&typeof Vr.URL.createObjectURL=="function")return Vr.URL&&Vr.URL.createObjectURL(pA(Mc()))||void 0;pa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ze="",ot=Mc();try{ze=eQ(ot)}catch{ze=eQ(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+ge.filename+";base64,"+ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(vt=ge.pdfObjectUrl,Ut="");var $t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",pr=Vr.open();return pr!==null&&pr.document.write($t),pr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var Nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',Rr=Vr.open();if(Rr!==null){Rr.document.write(Nr);var Kr=this;Rr.document.documentElement.querySelector("#pdfViewer").onload=function(){Rr.document.title=ge.filename,Rr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kr.output("bloburl"))}}return Rr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',Dn=Vr.open();if(Dn!==null&&(Dn.document.write(hn),Dn.document.title=ge.filename),Dn||typeof safari>"u")return Dn;break;case"datauri":case"dataurl":return Vr.document.location.href=this.output("datauristring",ge);default:return null}},Lt.foo=function(){try{return Lt.apply(this,arguments)}catch(ze){var U=ze.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ge="Error in function "+U.split(`
`)[0].split("<")[0]+": "+ze.message;if(!Vr.console)throw new Error(ge);Vr.console.error(ge,ze),Vr.alert&&alert(ge)}},Lt.foo.bar=Lt,Lt.foo),Tl=function(U){return Array.isArray(nr)===!0&&nr.indexOf(U)>-1};switch(n){case"pt":re=1;break;case"mm":re=72/25.4;break;case"cm":re=72/2.54;break;case"in":re=72;break;case"px":re=Tl("px_scaling")==1?.75:96/72;break;case"pc":case"em":re=12;break;case"ex":re=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);re=n}var da=null;Se(),de();var ni=f.__private__.getPageInfo=f.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yt[U].objId,pageNumber:U,pageContext:yt[U]}},gA=f.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in yt)if(yt[ge].objId===U)break;return ni(ge)},Qf=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:yt[F].objId,pageNumber:F,pageContext:yt[F]}};f.addPage=function(){return va.apply(this,arguments),this},f.setPage=function(){return nl.apply(this,arguments),Y.call(this,te[F]),this},f.insertPage=function(U){return this.addPage(),this.movePage(F,U),this},f.movePage=function(U,ge){var ze,ot;if(U>ge){ze=te[U],ot=yt[U];for(var vt=U;vt>ge;vt--)te[vt]=te[vt-1],yt[vt]=yt[vt-1];te[ge]=ze,yt[ge]=ot,this.setPage(ge)}else if(U<ge){ze=te[U],ot=yt[U];for(var Ut=U;Ut<ge;Ut++)te[Ut]=te[Ut+1],yt[Ut]=yt[Ut+1];te[ge]=ze,yt[ge]=ot,this.setPage(ge)}return this},f.deletePage=function(){return sa.apply(this,arguments),this},f.__private__.text=f.text=function(U,ge,ze,ot,vt){var Ut,$t,pr,Nr,Rr,Kr,hn,Dn,rs,$n=(ot=ot||{}).scope||this;if(typeof U=="number"&&typeof ge=="number"&&(typeof ze=="string"||Array.isArray(ze))){var xs=ze;ze=ge,ge=U,U=xs}if(arguments[3]instanceof Ne==0?(pr=arguments[4],Nr=arguments[5],ea(hn=arguments[3])==="object"&&hn!==null||(typeof pr=="string"&&(Nr=pr,pr=null),typeof hn=="string"&&(Nr=hn,hn=null),typeof hn=="number"&&(pr=hn,hn=null),ot={flags:hn,angle:pr,align:Nr})):(S("The transform parameter of text() with a Matrix value"),rs=vt),isNaN(ge)||isNaN(ze)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return $n;var ns,vs="",as=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:Sd,Pl=$n.internal.scaleFactor;function Kc(Qn){return Qn=Qn.split("	").join(Array(ot.TabLen||9).join(" ")),er(Qn,hn)}function Gc(Qn){for(var Aa,Ps=Qn.concat(),ai=[],NA=Ps.length;NA--;)typeof(Aa=Ps.shift())=="string"?ai.push(Aa):Array.isArray(Qn)&&(Aa.length===1||Aa[1]===void 0&&Aa[2]===void 0)?ai.push(Aa[0]):ai.push([Aa[0],Aa[1],Aa[2]]);return ai}function _(Qn,Aa){var Ps;if(typeof Qn=="string")Ps=Aa(Qn)[0];else if(Array.isArray(Qn)){for(var ai,NA,t1=Qn.concat(),og=[],Iw=t1.length;Iw--;)typeof(ai=t1.shift())=="string"?og.push(Aa(ai)[0]):Array.isArray(ai)&&typeof ai[0]=="string"&&(NA=Aa(ai[0],ai[1],ai[2]),og.push([NA[0],NA[1],NA[2]]));Ps=og}return Ps}var G=!1,oe=!0;if(typeof U=="string")G=!0;else if(Array.isArray(U)){var De=U.concat();$t=[];for(var bt,Pt=De.length;Pt--;)(typeof(bt=De.shift())!="string"||Array.isArray(bt)&&typeof bt[0]!="string")&&(oe=!1);G=oe}if(G===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var rr=Pe/$n.internal.scaleFactor,vn=rr*(as-1);switch(ot.baseline){case"bottom":ze-=vn;break;case"top":ze+=rr-vn;break;case"hanging":ze+=rr-2*vn;break;case"middle":ze+=rr/2-vn}if((Kr=ot.maxWidth||0)>0&&(typeof U=="string"?U=$n.splitTextToSize(U,Kr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Qn,Aa){return Qn.concat($n.splitTextToSize(Aa,Kr))},[]))),Ut={text:U,x:ge,y:ze,options:ot,mutex:{pdfEscape:er,activeFontKey:we,fonts:et,activeFontSize:Pe}},Dt.publish("preProcessText",Ut),U=Ut.text,pr=(ot=Ut.options).angle,rs instanceof Ne==0&&pr&&typeof pr=="number"){pr*=Math.PI/180,ot.rotationDirection===0&&(pr=-pr),w===b&&(pr=-pr);var ss=Math.cos(pr),ln=Math.sin(pr);rs=new Ne(ss,ln,-ln,ss,0,0)}else pr&&pr instanceof Ne&&(rs=pr);w!==b||rs||(rs=wt),(Rr=ot.charSpace||Qc)!==void 0&&(vs+=E(D(Rr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dn=ot.horizontalScale)!==void 0&&(vs+=E(100*Dn)+` Tz
`),ot.lang;var Tn=-1,ba=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,nc=$n.internal.getCurrentPageInfo().pageContext;switch(ba){case 0:case!1:case"fill":Tn=0;break;case 1:case!0:case"stroke":Tn=1;break;case 2:case"fillThenStroke":Tn=2;break;case 3:case"invisible":Tn=3;break;case 4:case"fillAndAddForClipping":Tn=4;break;case 5:case"strokeAndAddPathForClipping":Tn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Tn=6;break;case 7:case"addToPathForClipping":Tn=7}var Bo=nc.usedRenderingMode!==void 0?nc.usedRenderingMode:-1;Tn!==-1?vs+=Tn+` Tr
`:Bo!==-1&&(vs+=`0 Tr
`),Tn!==-1&&(nc.usedRenderingMode=Tn),Nr=ot.align||"left";var eo,Du=Pe*as,qv=$n.internal.pageSize.getWidth(),Wv=et[we];Rr=ot.charSpace||Qc,Kr=ot.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var zf=[],Y0=function(Qn){return $n.getStringUnitWidth(Qn,{font:Wv,charSpace:Rr,fontSize:Pe,doKerning:!1})*Pe/Pl};if(Object.prototype.toString.call(U)==="[object Array]"){var ac;$t=Gc(U),Nr!=="left"&&(eo=$t.map(Y0));var sc,qf=0;if(Nr==="right"){ge-=eo[0],U=[],Pt=$t.length;for(var wA=0;wA<Pt;wA++)wA===0?(sc=ji(ge),ac=Fu(ze)):(sc=D(qf-eo[wA]),ac=-Du),U.push([$t[wA],sc,ac]),qf=eo[wA]}else if(Nr==="center"){ge-=eo[0]/2,U=[],Pt=$t.length;for(var Wf=0;Wf<Pt;Wf++)Wf===0?(sc=ji(ge),ac=Fu(ze)):(sc=D((qf-eo[Wf])/2),ac=-Du),U.push([$t[Wf],sc,ac]),qf=eo[Wf]}else if(Nr==="left"){U=[],Pt=$t.length;for(var Xv=0;Xv<Pt;Xv++)U.push($t[Xv])}else if(Nr==="justify"&&Wv.encoding==="Identity-H"){U=[],Pt=$t.length,Kr=Kr!==0?Kr:qv;for(var ig=0,Ts=0;Ts<Pt;Ts++)if(ac=Ts===0?Fu(ze):-Du,sc=Ts===0?ji(ge):ig,Ts<Pt-1){var Sw=D((Kr-eo[Ts])/($t[Ts].split(" ").length-1)),Td=$t[Ts].split(" ");U.push([Td[0]+" ",sc,ac]),ig=0;for(var Pd=1;Pd<Td.length;Pd++){var Yv=(Y0(Td[Pd-1]+" "+Td[Pd])-Y0(Td[Pd]))*Pl+Sw;Pd==Td.length-1?U.push([Td[Pd],Yv,0]):U.push([Td[Pd]+" ",Yv,0]),ig-=Yv}}else U.push([$t[Ts],sc,ac]);U.push(["",ig,0])}else{if(Nr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Pt=$t.length,Kr=Kr!==0?Kr:qv,Ts=0;Ts<Pt;Ts++){ac=Ts===0?Fu(ze):-Du,sc=Ts===0?ji(ge):0;var Jv=$t[Ts].split(" ").length-1,Zv=Jv>0?(Kr-eo[Ts])/Jv:0;Ts<Pt-1?zf.push(E(D(Zv))):zf.push(0),U.push([$t[Ts],sc,ac])}}}(typeof ot.R2L=="boolean"?ot.R2L:mt)===!0&&(U=_(U,function(Qn,Aa,Ps){return[Qn.split("").reverse().join(""),Aa,Ps]})),Ut={text:U,x:ge,y:ze,options:ot,mutex:{pdfEscape:er,activeFontKey:we,fonts:et,activeFontSize:Pe}},Dt.publish("postProcessText",Ut),U=Ut.text,ns=Ut.mutex.isHex||!1;var e1=et[we].encoding;e1!=="WinAnsiEncoding"&&e1!=="StandardEncoding"||(U=_(U,function(Qn,Aa,Ps){return[Kc(Qn),Aa,Ps]})),$t=Gc(U),U=[];for(var Xf,Yf,Jf,J0=Array.isArray($t[0])?1:0,Zf="",Z0=function(Qn,Aa,Ps){var ai="";return Ps instanceof Ne?(Ps=typeof ot.angle=="number"?at(Ps,new Ne(1,0,0,1,Qn,Aa)):at(new Ne(1,0,0,1,Qn,Aa),Ps),w===b&&(Ps=at(new Ne(1,0,0,-1,0,0),Ps)),ai=Ps.join(" ")+` Tm
`):ai=E(Qn)+" "+E(Aa)+` Td
`,ai},zc=0;zc<$t.length;zc++){switch(Zf="",J0){case 1:Jf=(ns?"<":"(")+$t[zc][0]+(ns?">":")"),Xf=parseFloat($t[zc][1]),Yf=parseFloat($t[zc][2]);break;case 0:Jf=(ns?"<":"(")+$t[zc]+(ns?">":")"),Xf=ji(ge),Yf=Fu(ze)}zf!==void 0&&zf[zc]!==void 0&&(Zf=zf[zc]+` Tw
`),zc===0?U.push(Zf+Z0(Xf,Yf,rs)+Jf):J0===0?U.push(Zf+Jf):J0===1&&U.push(Zf+Z0(Xf,Yf,rs)+Jf)}U=J0===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var jd=`BT
/`;return jd+=we+" "+Pe+` Tf
`,jd+=E(Pe*as)+` TL
`,jd+=rc+`
`,jd+=vs,jd+=U,z(jd+="ET"),h[we]=!0,$n};var eg=f.__private__.clip=f.clip=function(U){return z(U==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return eg("evenodd")},f.__private__.discardPath=f.discardPath=function(){return z("n"),this};var fn=f.__private__.isValidStyle=function(U){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ge=!0),ge};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(U){return fn(U)&&(u=U),this};var xA=f.__private__.getStyle=f.getStyle=function(U){var ge=u;switch(U){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=U}return ge},Ed=f.close=function(){return z("h"),this};f.stroke=function(){return z("S"),this},f.fill=function(U){return Lc("f",U),this},f.fillEvenOdd=function(U){return Lc("f*",U),this},f.fillStroke=function(U){return Lc("B",U),this},f.fillStrokeEvenOdd=function(U){return Lc("B*",U),this};var Lc=function(U,ge){ea(ge)==="object"?Vv(ge,U):z(U)},vA=function(U){U===null||w===b&&U===void 0||(U=xA(U),z(U))};function tg(U,ge,ze,ot,vt){var Ut=new Pm(ge||this.boundingBox,ze||this.xStep,ot||this.yStep,this.gState,vt||this.matrix);Ut.stream=this.stream;var $t=U+"$$"+this.cloneIndex+++"$$";return kt($t,Ut),Ut}var Vv=function(U,ge){var ze=be[U.key],ot=_e[ze];if(ot instanceof Dh)z("q"),z(Hv(ge)),ot.gState&&f.setGState(ot.gState),z(U.matrix.toString()+" cm"),z("/"+ze+" sh"),z("Q");else if(ot instanceof Pm){var vt=new Ne(1,0,0,-1,0,$c());U.matrix&&(vt=vt.multiply(U.matrix||wt),ze=tg.call(ot,U.key,U.boundingBox,U.xStep,U.yStep,vt).id),z("q"),z("/Pattern cs"),z("/"+ze+" scn"),ot.gState&&f.setGState(ot.gState),z(ge),z("Q")}},Hv=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},G0=f.moveTo=function(U,ge){return z(E(D(U))+" "+E(W(ge))+" m"),this},rg=f.lineTo=function(U,ge){return z(E(D(U))+" "+E(W(ge))+" l"),this},Zi=f.curveTo=function(U,ge,ze,ot,vt,Ut){return z([E(D(U)),E(W(ge)),E(D(ze)),E(W(ot)),E(D(vt)),E(W(Ut)),"c"].join(" ")),this};f.__private__.line=f.line=function(U,ge,ze,ot,vt){if(isNaN(U)||isNaN(ge)||isNaN(ze)||isNaN(ot)||!fn(vt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[ze-U,ot-ge]],U,ge,[1,1],vt||"S"):this.lines([[ze-U,ot-ge]],U,ge,[1,1]).stroke()},f.__private__.lines=f.lines=function(U,ge,ze,ot,vt,Ut){var $t,pr,Nr,Rr,Kr,hn,Dn,rs,$n,xs,ns,vs;if(typeof U=="number"&&(vs=ze,ze=ge,ge=U,U=vs),ot=ot||[1,1],Ut=Ut||!1,isNaN(ge)||isNaN(ze)||!Array.isArray(U)||!Array.isArray(ot)||!fn(vt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(G0(ge,ze),$t=ot[0],pr=ot[1],Rr=U.length,xs=ge,ns=ze,Nr=0;Nr<Rr;Nr++)(Kr=U[Nr]).length===2?(xs=Kr[0]*$t+xs,ns=Kr[1]*pr+ns,rg(xs,ns)):(hn=Kr[0]*$t+xs,Dn=Kr[1]*pr+ns,rs=Kr[2]*$t+xs,$n=Kr[3]*pr+ns,xs=Kr[4]*$t+xs,ns=Kr[5]*pr+ns,Zi(hn,Dn,rs,$n,xs,ns));return Ut&&Ed(),vA(vt),this},f.path=function(U){for(var ge=0;ge<U.length;ge++){var ze=U[ge],ot=ze.c;switch(ze.op){case"m":G0(ot[0],ot[1]);break;case"l":rg(ot[0],ot[1]);break;case"c":Zi.apply(this,ot);break;case"h":Ed()}}return this},f.__private__.rect=f.rect=function(U,ge,ze,ot,vt){if(isNaN(U)||isNaN(ge)||isNaN(ze)||isNaN(ot)||!fn(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(ot=-ot),z([E(D(U)),E(W(ge)),E(D(ze)),E(D(ot)),"re"].join(" ")),vA(vt),this},f.__private__.triangle=f.triangle=function(U,ge,ze,ot,vt,Ut,$t){if(isNaN(U)||isNaN(ge)||isNaN(ze)||isNaN(ot)||isNaN(vt)||isNaN(Ut)||!fn($t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ze-U,ot-ge],[vt-ze,Ut-ot],[U-vt,ge-Ut]],U,ge,[1,1],$t,!0),this},f.__private__.roundedRect=f.roundedRect=function(U,ge,ze,ot,vt,Ut,$t){if(isNaN(U)||isNaN(ge)||isNaN(ze)||isNaN(ot)||isNaN(vt)||isNaN(Ut)||!fn($t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pr=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*ze),Ut=Math.min(Ut,.5*ot),this.lines([[ze-2*vt,0],[vt*pr,0,vt,Ut-Ut*pr,vt,Ut],[0,ot-2*Ut],[0,Ut*pr,-vt*pr,Ut,-vt,Ut],[2*vt-ze,0],[-vt*pr,0,-vt,-Ut*pr,-vt,-Ut],[0,2*Ut-ot],[0,-Ut*pr,vt*pr,-Ut,vt,-Ut]],U+vt,ge,[1,1],$t,!0),this},f.__private__.ellipse=f.ellipse=function(U,ge,ze,ot,vt){if(isNaN(U)||isNaN(ge)||isNaN(ze)||isNaN(ot)||!fn(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*ze,$t=4/3*(Math.SQRT2-1)*ot;return G0(U+ze,ge),Zi(U+ze,ge-$t,U+Ut,ge-ot,U,ge-ot),Zi(U-Ut,ge-ot,U-ze,ge-$t,U-ze,ge),Zi(U-ze,ge+$t,U-Ut,ge+ot,U,ge+ot),Zi(U+Ut,ge+ot,U+ze,ge+$t,U+ze,ge),vA(vt),this},f.__private__.circle=f.circle=function(U,ge,ze,ot){if(isNaN(U)||isNaN(ge)||isNaN(ze)||!fn(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ge,ze,ze,ot)},f.setFont=function(U,ge,ze){return ze&&(ge=C(ge,ze)),we=ec(U,ge,{disableWarning:!1}),this};var Uc=f.__private__.getFont=f.getFont=function(){return et[ec.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var U,ge,ze={};for(U in ke)if(ke.hasOwnProperty(U))for(ge in ze[U]=[],ke[U])ke[U].hasOwnProperty(ge)&&ze[U].push(ge);return ze},f.addFont=function(U,ge,ze,ot,vt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(ze=C(ze,ot)),Wt.call(this,U,ge,ze,vt=vt||"Identity-H")};var Sd,Vf=t.lineWidth||.200025,ng=f.__private__.getLineWidth=f.getLineWidth=function(){return Vf},Dr=f.__private__.setLineWidth=f.setLineWidth=function(U){return Vf=U,z(E(D(U))+" w"),this};f.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(U,ge){if(U=U||[],ge=ge||0,isNaN(ge)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(ze){return E(D(ze))}).join(" "),ge=E(D(ge)),z("["+U+"] "+ge+" d"),this};var $v=f.__private__.getLineHeight=f.getLineHeight=function(){return Pe*Sd};f.__private__.getLineHeight=f.getLineHeight=function(){return Pe*Sd};var Kv=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Sd=U),this},Gv=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Sd};Kv(t.lineHeight);var ji=f.__private__.getHorizontalCoordinate=function(U){return D(U)},Fu=f.__private__.getVerticalCoordinate=function(U){return w===b?U:yt[F].mediaBox.topRightY-yt[F].mediaBox.bottomLeftY-D(U)},zv=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(U){return E(ji(U))},Hf=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(U){return E(Fu(U))},Ou=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Te(Ou)},f.__private__.setStrokeColor=f.setDrawColor=function(U,ge,ze,ot){return Ou=Re({ch1:U,ch2:ge,ch3:ze,ch4:ot,pdfColorType:"draw",precision:2}),z(Ou),this};var $f=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Te($f)},f.__private__.setFillColor=f.setFillColor=function(U,ge,ze,ot){return $f=Re({ch1:U,ch2:ge,ch3:ze,ch4:ot,pdfColorType:"fill",precision:2}),z($f),this};var rc=t.textColor||"0 g",yA=f.__private__.getTextColor=f.getTextColor=function(){return Te(rc)};f.__private__.setTextColor=f.setTextColor=function(U,ge,ze,ot){return rc=Re({ch1:U,ch2:ge,ch3:ze,ch4:ot,pdfColorType:"text",precision:3}),this};var Qc=t.charSpace,z0=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Qc||0)};f.__private__.setCharSpace=f.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qc=U,this};var ia=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(U){var ge=f.CapJoinStyles[U];if(ge===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ia=ge,z(ge+" J"),this};var q0=0;f.__private__.setLineJoin=f.setLineJoin=function(U){var ge=f.CapJoinStyles[U];if(ge===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return q0=ge,z(ge+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(E(D(U))+" M"),this},f.GState=V2,f.setGState=function(U){(U=typeof U=="string"?Qe[$e[U]]:ag(null,U)).equals(Je)||(z("/"+U.id+" gs"),Je=U)};var ag=function(U,ge){if(!U||!$e[U]){var ze=!1;for(var ot in Qe)if(Qe.hasOwnProperty(ot)&&Qe[ot].equals(ge)){ze=!0;break}if(ze)ge=Qe[ot];else{var vt="GS"+(Object.keys(Qe).length+1).toString(10);Qe[vt]=ge,ge.id=vt}return U&&($e[U]=ge.id),Dt.publish("addGState",ge),ge}};f.addGState=function(U,ge){return ag(U,ge),this},f.saveGraphicsState=function(){return z("q"),he.push({key:we,size:Pe,color:rc}),this},f.restoreGraphicsState=function(){z("Q");var U=he.pop();return we=U.key,Pe=U.size,rc=U.color,Je=null,this},f.setCurrentTransformationMatrix=function(U){return z(U.toString()+" cm"),this},f.comment=function(U){return z("#"+U),this};var Vc=function(U,ge){var ze=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ze},set:function(Ut){isNaN(Ut)||(ze=parseFloat(Ut))}});var ot=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(Ut){isNaN(Ut)||(ot=parseFloat(Ut))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function(Ut){vt=Ut.toString()}}),this},Kf=function(U,ge,ze,ot){Vc.call(this,U,ge),this.type="rect";var vt=ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function($t){isNaN($t)||(vt=parseFloat($t))}});var Ut=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function($t){isNaN($t)||(Ut=parseFloat($t))}}),this},bA=function(){this.page=st,this.currentPage=F,this.pages=te.slice(0),this.pagesContext=yt.slice(0),this.x=ne,this.y=Ue,this.matrix=Ke,this.width=al(F),this.height=sg(F),this.outputDestination=ye,this.id="",this.objectNumber=-1};bA.prototype.restore=function(){st=this.page,F=this.currentPage,yt=this.pagesContext,te=this.pages,ne=this.x,Ue=this.y,Ke=this.matrix,W0(F,this.width),sl(F,this.height),ye=this.outputDestination};var Id=function(U,ge,ze,ot,vt){gt.push(new bA),st=F=0,te=[],ne=U,Ue=ge,Ke=vt,Tr([ze,ot])};for(var Bd in f.beginFormObject=function(U,ge,ze,ot,vt){return Id(U,ge,ze,ot,vt),this},f.endFormObject=function(U){return function(ge){if(dt[ge])gt.pop().restore();else{var ze=new bA,ot="Xo"+(Object.keys(Ce).length+1).toString(10);ze.id=ot,dt[ge]=ot,Ce[ot]=ze,Dt.publish("addFormObject",ze),gt.pop().restore()}}(U),this},f.doFormObject=function(U,ge){var ze=Ce[dt[U]];return z("q"),z(ge.toString()+" cm"),z("/"+ze.id+" Do"),z("Q"),this},f.getFormObject=function(U){var ge=Ce[dt[U]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},f.save=function(U,ge){return U=U||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?(mm(pA(Mc()),U),typeof mm.unload=="function"&&Vr.setTimeout&&setTimeout(mm.unload,911),this):new Promise(function(ze,ot){try{var vt=mm(pA(Mc()),U);typeof mm.unload=="function"&&Vr.setTimeout&&setTimeout(mm.unload,911),ze(vt)}catch(Ut){ot(Ut.message)}})},gr.API)gr.API.hasOwnProperty(Bd)&&(Bd==="events"&&gr.API.events.length?function(U,ge){var ze,ot,vt;for(vt=ge.length-1;vt!==-1;vt--)ze=ge[vt][0],ot=ge[vt][1],U.subscribe.apply(U,[ze].concat(typeof ot=="function"?[ot]:ot))}(Dt,gr.API.events):f[Bd]=gr.API[Bd]);function al(U){return yt[U].mediaBox.topRightX-yt[U].mediaBox.bottomLeftX}function W0(U,ge){yt[U].mediaBox.topRightX=ge+yt[U].mediaBox.bottomLeftX}function sg(U){return yt[U].mediaBox.topRightY-yt[U].mediaBox.bottomLeftY}function sl(U,ge){yt[U].mediaBox.topRightY=ge+yt[U].mediaBox.bottomLeftY}var Hc=f.getPageWidth=function(U){return al(U=U||F)/re},Gf=f.setPageWidth=function(U,ge){W0(U,ge*re)},$c=f.getPageHeight=function(U){return sg(U=U||F)/re},X0=f.setPageHeight=function(U,ge){sl(U,ge*re)};return f.internal={pdfEscape:er,getStyle:xA,getFont:Uc,getFontSize:nt,getCharSpace:z0,getTextColor:yA,getLineHeight:$v,getLineHeightFactor:Gv,getLineWidth:ng,write:le,getHorizontalCoordinate:ji,getVerticalCoordinate:Fu,getCoordinateString:zv,getVerticalCoordinateString:Hf,collections:{},newObject:qt,newAdditionalObject:se,newObjectDeferred:_t,newObjectDeferredBegin:ie,getFilters:ae,putStream:Me,events:Dt,scaleFactor:re,pageSize:{getWidth:function(){return Hc(F)},setWidth:function(U){Gf(F,U)},getHeight:function(){return $c(F)},setHeight:function(U){X0(F,U)}},encryptionOptions:d,encryption:da,getEncryptor:function(U){return d!==null?da.encryptor(U,0):function(ge){return ge}},output:K0,getNumberOfPages:Bs,get pages(){return te},out:z,f2:B,f3:P,getPageInfo:ni,getPageInfoByObjId:gA,getCurrentPageInfo:Qf,getPDFVersion:p,Point:Vc,Rectangle:Kf,Matrix:Ne,hasHotfix:Tl},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Hc(F)},set:function(U){Gf(F,U)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return $c(F)},set:function(U){X0(F,U)},enumerable:!0,configurable:!0}),(function(U){for(var ge=0,ze=ue.length;ge<ze;ge++){var ot=Wt.call(this,U[ge][0],U[ge][1],U[ge][2],ue[ge][3],!0);A===!1&&(h[ot]=!0);var vt=U[ge][0].split("-");xt({id:ot,fontName:vt[0],fontStyle:vt[1]||""})}Dt.publish("addFonts",{fonts:et,dictionary:ke})}).call(f,ue),we="F1",va(a,r),Dt.publish("initialized"),f}Kg.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Kg.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kg.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Kg.prototype.processOwnerPassword=function(t,e){return Fj(kj(e).substr(0,5),t)},Kg.prototype.encryptor=function(t,e){var r=kj(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Fj(r,n)}},V2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ea(t)!==ea(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},gr.API={events:[]},gr.version="3.0.4";var ws=gr.API,N6=1,Vp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(t){return t.toFixed(2)},Ah=function(t){return t.toFixed(5)};ws.__acroform__={};var Xl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},aQ=function(t){return t*N6},Ud=function(t){var e=new kee,r=br.internal.getHeight(t)||0,n=br.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Wr(n)),Number(Wr(r))],e},_Ee=ws.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},CEe=ws.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},EEe=ws.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Qs=ws.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return EEe(t,e-1)},Vs=ws.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _Ee(t,e-1)},Hs=ws.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return CEe(t,e-1)},SEe=ws.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Wr(c.lowerLeft_X)),Number(Wr(c.lowerLeft_Y)),Number(Wr(c.upperRight_X)),Number(Wr(c.upperRight_Y))]},IEe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Oj(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Wr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ud(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Oj=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(B){return B.split(`
`)}):a.map(function(B){return[B]});var s=r,i=br.internal.getHeight(t)||0;i=i<0?-i:i;var o=br.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(B,P,D){if(B+1<a.length){var W=P+" "+a[B+1][0];return KN(W,t,D).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,A=KN("3",t,s).height,h=t.multiline?i-s:(i-A)/2,f=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+KN(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((A+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var I=parseInt(b),T=c(I,x,s),C=b>=a.length-1;if(T&&!C){x+=" ",g=0;continue}if(T||C){if(C)p=I;else if(t.multiline&&(A+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(A+2)*(y+2)+2>i)continue e;p=I}}for(var E="",S=m;S<=p;S++){var O=a[S];if(t.multiline){if(S===p){E+=O[g]+" ",g=(g+1)%O.length;continue}if(S===m){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=KN(E,t,s).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}e+=Wr(u)+" "+Wr(f)+` Td
`,e+="("+Vp(E)+`) Tj
`,e+=-Wr(u)+` 0 Td
`,f=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},KN=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},BEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TEe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},PEe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(BEe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");N6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Fee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&TEe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=SEe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=br.createDefaultAppearanceStream(o),ea(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=IEe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var A="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var f=o.appearanceStreamContent[h];if(A+="/"+h+" ",A+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var m=f[i];typeof m=="function"&&(m=m.call(a,o)),A+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(a,o)),A+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);A+=">>"}c.push({key:"AP",value:`<<
`+A+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),ea(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},jee=ws.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),ea(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Vp(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mB=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Vp(n(t))+")"},qd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qd.prototype.toString=function(){return this.objId+" 0 R"},qd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},qd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:jee(a,this.objId,this.scope)}):a instanceof qd?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var kee=function(){qd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Xl(kee,qd);var Fee=function(){qd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Vp(r(t))+")"}},set:function(r){t=r}})};Xl(Fee,qd);var wd=function t(){qd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qs(e,3)},set:function(x){x?this.F=Vs(e,3):this.F=Hs(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof DE)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Vp(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/N6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof DE||this instanceof l0))return mB(A,this.objId,this.scope)},set:function(x){x=x.toString(),A=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof hi==0?mB(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof hi==0?x.substr(0,1)==="("?wg(x.substr(1,x.length-2)):wg(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi==1?wg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof hi==1?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof hi==0?mB(f,this.objId,this.scope):f},set:function(x){x=x.toString(),f=this instanceof hi==0?x.substr(0,1)==="("?wg(x.substr(1,x.length-2)):wg(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi==1?wg(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof hi==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,1)},set:function(x){x?this.Ff=Vs(this.Ff,1):this.Ff=Hs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,2)},set:function(x){x?this.Ff=Vs(this.Ff,2):this.Ff=Hs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,3)},set:function(x){x?this.Ff=Vs(this.Ff,3):this.Ff=Hs(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Xl(wd,qd);var Vm=function(){wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,18)},set:function(r){r?this.Ff=Vs(this.Ff,18):this.Ff=Hs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Vs(this.Ff,19):this.Ff=Hs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,20)},set:function(r){r?(this.Ff=Vs(this.Ff,20),e.sort()):this.Ff=Hs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,22)},set:function(r){r?this.Ff=Vs(this.Ff,22):this.Ff=Hs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(r){r?this.Ff=Vs(this.Ff,23):this.Ff=Hs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,27)},set:function(r){r?this.Ff=Vs(this.Ff,27):this.Ff=Hs(this.Ff,27)}}),this.hasAppearanceStream=!1};Xl(Vm,wd);var Hm=function(){Vm.call(this),this.fontName="helvetica",this.combo=!1};Xl(Hm,Vm);var $m=function(){Hm.call(this),this.combo=!0};Xl($m,Hm);var Vy=function(){$m.call(this),this.edit=!0};Xl(Vy,$m);var hi=function(){wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,15)},set:function(r){r?this.Ff=Vs(this.Ff,15):this.Ff=Hs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,16)},set:function(r){r?this.Ff=Vs(this.Ff,16):this.Ff=Hs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,17)},set:function(r){r?this.Ff=Vs(this.Ff,17):this.Ff=Hs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(r){r?this.Ff=Vs(this.Ff,26):this.Ff=Hs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Vp(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ea(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Xl(hi,wd);var Hy=function(){hi.call(this),this.pushButton=!0};Xl(Hy,hi);var Km=function(){hi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xl(Km,hi);var DE=function(){var t,e;wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Vp(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ea(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=br.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xl(DE,wd),Km.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Km.prototype.createOption=function(t){var e=new DE;return e.Parent=this,e.optionName=t,this.Kids.push(e),jEe.call(this.scope,e),e};var $y=function(){hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=br.CheckBox.createAppearanceStream()};Xl($y,hi);var l0=function(){wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,13)},set:function(e){e?this.Ff=Vs(this.Ff,13):this.Ff=Hs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,21)},set:function(e){e?this.Ff=Vs(this.Ff,21):this.Ff=Hs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(e){e?this.Ff=Vs(this.Ff,23):this.Ff=Hs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,24)},set:function(e){e?this.Ff=Vs(this.Ff,24):this.Ff=Hs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,25)},set:function(e){e?this.Ff=Vs(this.Ff,25):this.Ff=Hs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(e){e?this.Ff=Vs(this.Ff,26):this.Ff=Hs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xl(l0,wd);var Ky=function(){l0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,14)},set:function(t){t?this.Ff=Vs(this.Ff,14):this.Ff=Hs(this.Ff,14)}}),this.password=!0};Xl(Ky,l0);var br={CheckBox:{createAppearanceStream:function(){return{N:{On:br.CheckBox.YesNormal},D:{On:br.CheckBox.YesPushDown,Off:br.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Oj(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Wr(br.internal.getWidth(t))+" "+Wr(br.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Wr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ud(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=br.internal.getHeight(t),i=br.internal.getWidth(t),o=Oj(t,t.caption);return a.push("1 g"),a.push("0 0 "+Wr(i)+" "+Wr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Wr(i-1)+" "+Wr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Wr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(br.internal.getWidth(t))+" "+Wr(br.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:br.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=br.RadioButton.Circle.YesNormal,e.D[t]=br.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ud(t);e.scope=t.scope;var r=[],n=br.internal.getWidth(t)<=br.internal.getHeight(t)?br.internal.getWidth(t)/4:br.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=br.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ah(br.internal.getWidth(t)/2)+" "+Ah(br.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=[],n=br.internal.getWidth(t)<=br.internal.getHeight(t)?br.internal.getWidth(t)/4:br.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*br.internal.Bezier_C).toFixed(5)),i=Number((n*br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ah(br.internal.getWidth(t)/2)+" "+Ah(br.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ah(br.internal.getWidth(t)/2)+" "+Ah(br.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=[],n=br.internal.getWidth(t)<=br.internal.getHeight(t)?br.internal.getWidth(t)/4:br.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ah(br.internal.getWidth(t)/2)+" "+Ah(br.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:br.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=br.RadioButton.Cross.YesNormal,e.D[t]=br.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ud(t);e.scope=t.scope;var r=[],n=br.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Wr(br.internal.getWidth(t)-2)+" "+Wr(br.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(n.x1.x)+" "+Wr(n.x1.y)+" m"),r.push(Wr(n.x2.x)+" "+Wr(n.x2.y)+" l"),r.push(Wr(n.x4.x)+" "+Wr(n.x4.y)+" m"),r.push(Wr(n.x3.x)+" "+Wr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=br.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Wr(br.internal.getWidth(t))+" "+Wr(br.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Wr(br.internal.getWidth(t)-2)+" "+Wr(br.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),n.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),n.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),n.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ud(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(br.internal.getWidth(t))+" "+Wr(br.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};br.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=br.internal.getWidth(t),r=br.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},br.internal.getWidth=function(t){var e=0;return ea(t)==="object"&&(e=aQ(t.Rect[2])),e},br.internal.getHeight=function(t){var e=0;return ea(t)==="object"&&(e=aQ(t.Rect[3])),e};var jEe=ws.addField=function(t){if(PEe(this,t),!(t instanceof wd))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ws.AcroFormChoiceField=Vm,ws.AcroFormListBox=Hm,ws.AcroFormComboBox=$m,ws.AcroFormEditBox=Vy,ws.AcroFormButton=hi,ws.AcroFormPushButton=Hy,ws.AcroFormRadioButton=Km,ws.AcroFormCheckBox=$y,ws.AcroFormTextField=l0,ws.AcroFormPasswordField=Ky,ws.AcroFormAppearance=br,ws.AcroForm={ChoiceField:Vm,ListBox:Hm,ComboBox:$m,EditBox:Vy,Button:hi,PushButton:Hy,RadioButton:Km,CheckBox:$y,TextField:l0,PasswordField:Ky,Appearance:br},gr.AcroForm={ChoiceField:Vm,ListBox:Hm,ComboBox:$m,EditBox:Vy,Button:hi,PushButton:Hy,RadioButton:Km,CheckBox:$y,TextField:l0,PasswordField:Ky,Appearance:br};var kEe=gr.AcroForm;function Oee(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(B,P){var D,W,Ae,ee,ce,de=r;if((P=P||r)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(T(B))for(ce in n)for(Ae=n[ce],D=0;D<Ae.length;D+=1){for(ee=!0,W=0;W<Ae[D].length;W+=1)if(Ae[D][W]!==void 0&&Ae[D][W]!==B[W]){ee=!1;break}if(ee===!0){de=ce;break}}else for(ce in n)for(Ae=n[ce],D=0;D<Ae.length;D+=1){for(ee=!0,W=0;W<Ae[D].length;W+=1)if(Ae[D][W]!==void 0&&Ae[D][W]!==B.charCodeAt(W)){ee=!1;break}if(ee===!0){de=ce;break}}return de===r&&P!==r&&(de=P),de},s=function B(P){for(var D=this.internal.write,W=this.internal.putStream,Ae=(0,this.internal.getFilters)();Ae.indexOf("FlateEncode")!==-1;)Ae.splice(Ae.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:P.width}),ee.push({key:"Height",value:P.height}),P.colorSpace===x.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===x.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var ce="",de=0,X=P.transparency.length;de<X;de++)ce+=P.transparency[de]+" "+P.transparency[de]+" ";ee.push({key:"Mask",value:"["+ce+"]"})}P.sMask!==void 0&&ee.push({key:"SMask",value:P.objectId+1+" 0 R"});var pe=P.filter!==void 0?["/"+P.filter]:void 0;if(W({data:P.data,additionalKeyValues:ee,alreadyAppliedFilters:pe,objectId:P.objectId}),D("endobj"),"sMask"in P&&P.sMask!==void 0){var Se,k=(Se=P.sMaskBitsPerComponent)!==null&&Se!==void 0?Se:P.bitsPerComponent,F={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:P.sMask};"filter"in P&&(F.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(P.width),F.filter=P.filter),B.call(this,F)}if(P.colorSpace===x.INDEXED){var V=this.internal.newObject();W({data:E(new Uint8Array(P.palette)),objectId:V}),D("endobj")}},i=function(){var B=this.internal.collections[e+"images"];for(var P in B)s.call(this,B[P])},o=function(){var B,P=this.internal.collections[e+"images"],D=this.internal.write;for(var W in P)D("/I"+(B=P[W]).index,B.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var B=this.internal.collections[e+"images"];return c.call(this),B},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},A=function(B){return typeof t["process"+B.toUpperCase()]=="function"},h=function(B){return ea(B)==="object"&&B.nodeType===1},f=function(B,P){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var D=""+B.getAttribute("src");if(D.indexOf("data:image/")===0)return wC(unescape(D).split("base64,").pop());var W=t.loadFile(D,!0);if(W!==void 0)return W}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var Ae;switch(P){case"PNG":Ae="image/png";break;case"WEBP":Ae="image/webp";break;default:Ae="image/jpeg"}return wC(B.toDataURL(Ae,1).split("base64,").pop())}},m=function(B){var P=this.internal.collections[e+"images"];if(P){for(var D in P)if(B===P[D].alias)return P[D]}},p=function(B,P,D){return B||P||(B=-96,P=-96),B<0&&(B=-1*D.width*72/B/this.internal.scaleFactor),P<0&&(P=-1*D.height*72/P/this.internal.scaleFactor),B===0&&(B=P*D.width/D.height),P===0&&(P=B*D.height/D.width),[B,P]},g=function(B,P,D,W,Ae,ee){var ce=p.call(this,D,W,Ae),de=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,pe=u.call(this);if(D=ce[0],W=ce[1],pe[Ae.index]=Ae,ee){ee*=Math.PI/180;var Se=Math.cos(ee),k=Math.sin(ee),F=function(M){return M.toFixed(4)},V=[F(Se),F(k),F(-1*k),F(Se),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,de(B),X(P+W),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([de(D),"0","0",de(W),"0","0","cm"].join(" "))):this.internal.write([de(D),"0","0",de(W),de(B),X(P+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ae.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(B){var P,D,W=0;if(typeof B=="string")for(D=B.length,P=0;P<D;P++)W=(W<<5)-W+B.charCodeAt(P),W|=0;else if(T(B))for(D=B.byteLength/2,P=0;P<D;P++)W=(W<<5)-W+B[P],W|=0;return W},w=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var P=!0;return B.length===0&&(P=!1),B.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(P=!1),P},I=t.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var P=B.indexOf(",");return P<0?null:B.substring(0,P).trim().endsWith("base64")?B.substring(P+1):null};t.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},C=t.__addimage__.binaryStringToUint8Array=function(B){for(var P=B.length,D=new Uint8Array(P),W=0;W<P;W++)D[W]=B.charCodeAt(W);return D},E=t.__addimage__.arrayBufferToBinaryString=function(B){for(var P="",D=T(B)?B:new Uint8Array(B),W=0;W<D.length;W+=8192)P+=String.fromCharCode.apply(null,D.subarray(W,W+8192));return P};t.addImage=function(){var B,P,D,W,Ae,ee,ce,de,X;if(typeof arguments[1]=="number"?(P=r,D=arguments[1],W=arguments[2],Ae=arguments[3],ee=arguments[4],ce=arguments[5],de=arguments[6],X=arguments[7]):(P=arguments[1],D=arguments[2],W=arguments[3],Ae=arguments[4],ee=arguments[5],ce=arguments[6],de=arguments[7],X=arguments[8]),ea(B=arguments[0])==="object"&&!h(B)&&"imageData"in B){var pe=B;B=pe.imageData,P=pe.format||P||r,D=pe.x||D||0,W=pe.y||W||0,Ae=pe.w||pe.width||Ae,ee=pe.h||pe.height||ee,ce=pe.alias||ce,de=pe.compression||de,X=pe.rotation||pe.angle||X}var Se=this.internal.getFilters();if(de===void 0&&Se.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(D)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=S.call(this,B,P,ce,de);return g.call(this,D,W,Ae,ee,k,X),this};var S=function(B,P,D,W){var Ae,ee,ce;if(typeof B=="string"&&a(B)===r){B=unescape(B);var de=O(B,!1);(de!==""||(de=t.loadFile(B,!0))!==void 0)&&(B=de)}if(h(B)&&(B=f(B,P)),P=a(B,P),!A(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((ce=D)==null||ce.length===0)&&(D=function(X){return typeof X=="string"||T(X)?b(X):T(X.data)?b(X.data):null}(B)),(Ae=m.call(this,D))||(B instanceof Uint8Array||P==="RGBA"||(ee=B,B=C(B)),Ae=this["process"+P.toUpperCase()](B,d.call(this),D,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:y.NONE}(W),ee)),!Ae)throw new Error("An unknown error occurred whilst processing the image.");return Ae},O=t.__addimage__.convertBase64ToBinaryString=function(B,P){P=typeof P!="boolean"||P;var D,W="";if(typeof B=="string"){var Ae;D=(Ae=I(B))!==null&&Ae!==void 0?Ae:B;try{W=wC(D)}catch(ee){if(P)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};t.getImageProperties=function(B){var P,D,W="";if(h(B)&&(B=f(B)),typeof B=="string"&&a(B)===r&&((W=O(B,!1))===""&&(W=t.loadFile(B)||""),B=W),D=a(B),!A(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(B instanceof Uint8Array||(B=C(B)),!(P=this["process"+D.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=D,P}})(gr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,A=0;A<u.length&&!d;A++)switch((n=u[A]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+f(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var I=this.annotations._nameMap[n.options.name];n.options.pageNumber=I.page,n.options.top=I.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var T=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+T+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(gr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},o=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},A=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&o(g)||o(p)&&!i(g)||o(p)&&c(g)||o(p)&&o(g)?0:d(p)&&i(g)&&!o(g)&&i(x)&&u(x)?3:o(p)||!i(x)?1:2:-1},f=function(p){var g=0,x=0,y=0,b="",w="",I="",T=(p=p||"").split("\\s+"),C=[];for(g=0;g<T.length;g+=1){for(C.push(""),x=0;x<T[g].length;x+=1)b=T[g][x],w=T[g][x-1],I=T[g][x+1],i(b)?(y=h(b,w,I),C[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):C[g]+=b;C[g]=A(C[g])}return C.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([f(g[y][0]),g[y][1],g[y][2]]):x.push([f(g[y])]);p=x}else p=f(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(gr.API),gr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),A=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,f=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)f<(p=this.getStringUnitWidth(c[y],{font:A})*d)&&(f=p);return f!==0&&(m=c.length),{w:f/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,A=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=A.top,f&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,A,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var f,m,p,g,x=[],y=[],b=[],w={},I={},T=[],C=[],E=(h=h||{}).autoSize||!1,S=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,B=h.margins||Object.assign({width:this.getPageWidth()},e),P=typeof h.padding=="number"?h.padding:3,D=h.headerBackgroundColor||"#c8c8c8",W=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=W,this.setFontSize(O),A==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(A)&&ea(A[0])==="object")for(x=A.map(function(pe){return pe.name}),y=A.map(function(pe){return pe.prompt||pe.name||""}),b=A.map(function(pe){return pe.align||"left"}),f=0;f<A.length;f+=1)I[A[f].name]=.7499990551181103*A[f].width;else Array.isArray(A)&&typeof A[0]=="string"&&(y=x=A,b=x.map(function(){return"left"}));if(E||Array.isArray(A)&&typeof A[0]=="string")for(f=0;f<x.length;f+=1){for(w[g=x[f]]=d.map(function(pe){return pe[g]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(y[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)T.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[g]=Math.max.apply(null,T)+P+P,T=[]}if(S){var Ae={};for(f=0;f<x.length;f+=1)Ae[x[f]]={},Ae[x[f]].text=y[f],Ae[x[f]].align=b[f];var ee=o.call(this,Ae,I);C=x.map(function(pe){return new s(c,u,I[pe],ee,Ae[pe].text,void 0,Ae[pe].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ce=A.reduce(function(pe,Se){return pe[Se.name]=Se.align,pe},{});for(f=0;f<d.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:d[f]},this);var de=o.call(this,d[f],I);for(p=0;p<x.length;p+=1){var X=d[f][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:p,data:X},this),i.call(this,new s(c,u,I[x[p]],de,X,f+2,ce[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(f){var m=c[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*A/h+d+d},this).reduce(function(f,m){return Math.max(f,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(gr.API);var Dee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ree=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Dj=Oee(Ree),Mee=[100,200,300,400,500,600,700,800,900],FEe=Oee(Mee);function pB(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Dee[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Dj[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function sQ(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var OEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},iQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function oQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function lQ(t){return t.trimLeft()}function DEe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function REe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var GN,cQ,uQ,Ng,zN,dQ,AQ,fQ,gB=["times"];function hQ(t,e,r,n,a){var s=4,i=pQ;switch(a){case gr.API.image_compression.FAST:s=1,i=mQ;break;case gr.API.image_compression.MEDIUM:s=6,i=gQ;break;case gr.API.image_compression.SLOW:s=9,i=xQ}t=function(c,u,d,A){for(var h,f=c.length/u,m=new Uint8Array(c.length+f),p=[MEe,mQ,pQ,gQ,xQ],g=0;g<f;g+=1){var x=g*u,y=c.subarray(x,x+u);if(A)m.set(A(y,d,h),x+g);else{for(var b=p.length,w=[],I=0;I<b;I+=1)w[I]=p[I](y,d,h);var T=UEe(w.concat());m.set(w[T],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var o=Bj(t,{level:s});return gr.API.__addimage__.arrayBufferToBinaryString(o)}function MEe(t){var e=Array.apply([],t);return e.unshift(0),e}function mQ(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function pQ(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function gQ(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,o=r&&r[s]||0;a[s+1]=t[s]+256-(i+o>>>1)&255}return a}function xQ(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=LEe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function LEe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function UEe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function xB(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return Lee(t,a)>>s&i}function vQ(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),o=(1<<n)-1,c=(e&o)<<i;(function(u,d,A){if(d+1<u.byteLength)u.setUint16(d,A,!1);else{var h=A>>8&255;u.setUint8(d,h)}})(t,s,Lee(t,s)&~(o<<i)&65535|c)}function Lee(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function QEe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var o=null,c=null;s&&(o=e,c=i,e+=3*i);var u=!0,d=[],A=0,h=null,f=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];A=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),f=p>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],I=w>>6&1,T=1<<1+(7&w),C=o,E=c,S=!1;w>>7&&(S=!0,C=e,E=T,e+=3*T);var O=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}d.push({x:g,y:x,width:y,height:b,has_local_palette:S,palette_offset:C,palette_size:E,data_offset:O,data_length:e-O,transparent_index:h,interlaced:!!I,delay:A,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(P){if(P<0||P>=d.length)throw new Error("Frame index out of range.");return d[P]},this.decodeAndBlitFrameBGRA=function(P,D){var W=this.frameInfo(P),Ae=W.width*W.height,ee=new Uint8Array(Ae);yQ(t,W.data_offset,ee,Ae);var ce=W.palette_offset,de=W.transparent_index;de===null&&(de=256);var X=W.width,pe=r-X,Se=X,k=4*(W.y*r+W.x),F=4*((W.y+W.height)*r+W.x),V=k,M=4*pe;W.interlaced===!0&&(M+=4*r*7);for(var L=8,q=0,R=ee.length;q<R;++q){var K=ee[q];if(Se===0&&(Se=X,(V+=M)>=F&&(M=4*pe+4*r*(L-1),V=k+(X+pe)*(L<<1),L>>=1)),K===de)V+=4;else{var Z=t[ce+3*K],te=t[ce+3*K+1],Q=t[ce+3*K+2];D[V++]=Q,D[V++]=te,D[V++]=Z,D[V++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(P,D){var W=this.frameInfo(P),Ae=W.width*W.height,ee=new Uint8Array(Ae);yQ(t,W.data_offset,ee,Ae);var ce=W.palette_offset,de=W.transparent_index;de===null&&(de=256);var X=W.width,pe=r-X,Se=X,k=4*(W.y*r+W.x),F=4*((W.y+W.height)*r+W.x),V=k,M=4*pe;W.interlaced===!0&&(M+=4*r*7);for(var L=8,q=0,R=ee.length;q<R;++q){var K=ee[q];if(Se===0&&(Se=X,(V+=M)>=F&&(M=4*pe+4*r*(L-1),V=k+(X+pe)*(L<<1),L>>=1)),K===de)V+=4;else{var Z=t[ce+3*K],te=t[ce+3*K+1],Q=t[ce+3*K+2];D[V++]=Z,D[V++]=te,D[V++]=Q,D[V++]=255}--Se}}}function yQ(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,A=0,h=0,f=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&f!==0;)A|=t[e++]<<d,d+=8,f===1?f=t[e++]:--f;if(d<c)break;var g=A&u;if(A>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<o?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void pa.log("Warning, gif stream longer than expected.");r[h++]=w;var I=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--I]=255&b,b>>=8;p!==null&&o<4096&&(m[o++]=p<<8|w,o>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else o=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&pa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vB(t){var e,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),A=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),I=new Array(256),T=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(k,F){for(var V=0,M=0,L=new Array,q=1;q<=16;q++){for(var R=1;R<=k[q];R++)L[F[M]]=[],L[F[M]][0]=V,L[F[M]][1]=q,M++,V++;V*=2}return L}function ce(k){for(var F=k[0],V=k[1]-1;V>=0;)F&1<<V&&(g|=1<<x),V--,--x<0&&(g==255?(de(255),de(0)):de(g),x=7,g=0)}function de(k){p.push(k)}function X(k){de(k>>8&255),de(255&k)}function pe(k,F,V,M,L){for(var q,R=L[0],K=L[240],Z=function(Pe,Ye){var nt,mt,ct,ft,Ct,At,He,it,we,re,ne=0;for(we=0;we<8;++we){nt=Pe[ne],mt=Pe[ne+1],ct=Pe[ne+2],ft=Pe[ne+3],Ct=Pe[ne+4],At=Pe[ne+5],He=Pe[ne+6];var Ue=nt+(it=Pe[ne+7]),Ke=nt-it,et=mt+He,ke=mt-He,he=ct+At,_e=ct-At,be=ft+Ct,Qe=ft-Ct,$e=Ue+be,Je=Ue-be,st=et+he,yt=et-he;Pe[ne]=$e+st,Pe[ne+4]=$e-st;var Dt=.707106781*(yt+Je);Pe[ne+2]=Je+Dt,Pe[ne+6]=Je-Dt;var nr=.382683433*(($e=Qe+_e)-(yt=ke+Ke)),Ce=.5411961*$e+nr,dt=1.306562965*yt+nr,gt=.707106781*(st=_e+ke),Ne=Ke+gt,at=Ke-gt;Pe[ne+5]=at+Ce,Pe[ne+3]=at-Ce,Pe[ne+1]=Ne+dt,Pe[ne+7]=Ne-dt,ne+=8}for(ne=0,we=0;we<8;++we){nt=Pe[ne],mt=Pe[ne+8],ct=Pe[ne+16],ft=Pe[ne+24],Ct=Pe[ne+32],At=Pe[ne+40],He=Pe[ne+48];var wt=nt+(it=Pe[ne+56]),kt=nt-it,Lt=mt+He,qt=mt-He,_t=ct+At,ie=ct-At,se=ft+Ct,me=ft-Ct,fe=wt+se,Te=wt-se,Re=Lt+_t,ae=Lt-_t;Pe[ne]=fe+Re,Pe[ne+32]=fe-Re;var Me=.707106781*(ae+Te);Pe[ne+16]=Te+Me,Pe[ne+48]=Te-Me;var xe=.382683433*((fe=me+ie)-(ae=qt+kt)),Le=.5411961*fe+xe,Ie=1.306562965*ae+xe,rt=.707106781*(Re=ie+qt),Ze=kt+rt,tt=kt-rt;Pe[ne+40]=tt+Le,Pe[ne+24]=tt-Le,Pe[ne+8]=Ze+Ie,Pe[ne+56]=Ze-Ie,ne++}for(we=0;we<64;++we)re=Pe[we]*Ye[we],f[we]=re>0?re+.5|0:re-.5|0;return f}(k,F),te=0;te<64;++te)m[C[te]]=Z[te];var Q=m[0]-V;V=m[0],Q==0?ce(M[0]):(ce(M[h[q=32767+Q]]),ce(A[q]));for(var ye=63;ye>0&&m[ye]==0;)ye--;if(ye==0)return ce(R),V;for(var Y,z=1;z<=ye;){for(var le=z;m[z]==0&&z<=ye;)++z;var je=z-le;if(je>=16){Y=je>>4;for(var ue=1;ue<=Y;++ue)ce(K);je&=15}q=32767+m[z],ce(L[(je<<4)+h[q]]),ce(A[q]),z++}return ye!=63&&ce(R),V}function Se(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(F){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var L=i((V[M]*F+50)/100);L=Math.min(Math.max(L,1),255),o[C[M]]=L}for(var q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var K=i((q[R]*F+50)/100);K=Math.min(Math.max(K,1),255),c[C[R]]=K}for(var Z=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],te=0,Q=0;Q<8;Q++)for(var ye=0;ye<8;ye++)u[te]=1/(o[C[te]]*Z[Q]*Z[ye]*8),d[te]=1/(c[C[te]]*Z[Q]*Z[ye]*8),te++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,F){F&&Se(F),p=new Array,g=0,x=7,X(65496),X(65504),X(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),X(1),X(1),de(0),de(0),function(){X(65499),X(132),de(0);for(var mt=0;mt<64;mt++)de(o[mt]);de(1);for(var ct=0;ct<64;ct++)de(c[ct])}(),function(mt,ct){X(65472),X(17),de(8),X(ct),X(mt),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)}(k.width,k.height),function(){X(65476),X(418),de(0);for(var mt=0;mt<16;mt++)de(E[mt+1]);for(var ct=0;ct<=11;ct++)de(S[ct]);de(16);for(var ft=0;ft<16;ft++)de(O[ft+1]);for(var Ct=0;Ct<=161;Ct++)de(B[Ct]);de(1);for(var At=0;At<16;At++)de(P[At+1]);for(var He=0;He<=11;He++)de(D[He]);de(17);for(var it=0;it<16;it++)de(W[it+1]);for(var we=0;we<=161;we++)de(Ae[we])}(),X(65498),X(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var V=0,M=0,L=0;g=0,x=7,this.encode.displayName="_encode_";for(var q,R,K,Z,te,Q,ye,Y,z,le=k.data,je=k.width,ue=k.height,Pe=4*je,Ye=0;Ye<ue;){for(q=0;q<Pe;){for(te=Pe*Ye+q,ye=-1,Y=0,z=0;z<64;z++)Q=te+(Y=z>>3)*Pe+(ye=4*(7&z)),Ye+Y>=ue&&(Q-=Pe*(Ye+1+Y-ue)),q+ye>=Pe&&(Q-=q+ye-Pe+4),R=le[Q++],K=le[Q++],Z=le[Q++],y[z]=(T[R]+T[K+256|0]+T[Z+512|0]>>16)-128,b[z]=(T[R+768|0]+T[K+1024|0]+T[Z+1280|0]>>16)-128,w[z]=(T[R+1280|0]+T[K+1536|0]+T[Z+1792|0]>>16)-128;V=pe(y,u,V,e,n),M=pe(b,d,M,r,a),L=pe(w,d,L,r,a),q+=32}Ye+=8}if(x>=0){var nt=[];nt[1]=x+1,nt[0]=(1<<x+1)-1,ce(nt)}return X(65497),new Uint8Array(p)},t=t||50,function(){for(var k=String.fromCharCode,F=0;F<256;F++)I[F]=k(F)}(),e=ee(E,S),r=ee(P,D),n=ee(O,B),a=ee(W,Ae),function(){for(var k=1,F=2,V=1;V<=15;V++){for(var M=k;M<F;M++)h[32767+M]=V,A[32767+M]=[],A[32767+M][1]=V,A[32767+M][0]=M;for(var L=-(F-1);L<=-k;L++)h[32767+L]=V,A[32767+L]=[],A[32767+L][1]=V,A[32767+L][0]=F-1+L;k<<=1,F<<=1}}(),function(){for(var k=0;k<256;k++)T[k]=19595*k,T[k+256|0]=38470*k,T[k+512|0]=7471*k+32768,T[k+768|0]=-11059*k,T[k+1024|0]=-21709*k,T[k+1280|0]=32768*k+8421375,T[k+1536|0]=-27439*k,T[k+1792|0]=-5329*k}(),Se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bQ(t){function e(S){if(!S)throw Error("assert :P")}function r(S,O,B){for(var P=0;4>P;P++)if(S[O+P]!=B.charCodeAt(P))return!0;return!1}function n(S,O,B,P,D){for(var W=0;W<D;W++)S[O+W]=B[P+W]}function a(S,O,B,P){for(var D=0;D<P;D++)S[O+D]=B}function s(S){return new Int32Array(S)}function i(S,O){for(var B=[],P=0;P<S;P++)B.push(new O);return B}function o(S,O){var B=[];return function P(D,W,Ae){for(var ee=Ae[W],ce=0;ce<ee&&(D.push(Ae.length>W+1?[]:new O),!(Ae.length<W+1));ce++)P(D[ce],W+1,Ae)}(B,0,S),B}var c=function(){var S=this;function O(N,j){for(var H=1<<j-1>>>0;N&H;)H>>>=1;return H?(N&H-1)+H:N}function B(N,j,H,J,ve){e(!(J%H));do N[j+(J-=H)]=ve;while(0<J)}function P(N,j,H,J,ve){if(e(2328>=ve),512>=ve)var Ee=s(512);else if((Ee=s(ve))==null)return 0;return function(Be,Oe,Ve,qe,ut,It){var We,pt,Nt=Oe,Rt=1<<Ve,St=s(16),Qt=s(16);for(e(ut!=0),e(qe!=null),e(Be!=null),e(0<Ve),pt=0;pt<ut;++pt){if(15<qe[pt])return 0;++St[qe[pt]]}if(St[0]==ut)return 0;for(Qt[1]=0,We=1;15>We;++We){if(St[We]>1<<We)return 0;Qt[We+1]=Qt[We]+St[We]}for(pt=0;pt<ut;++pt)We=qe[pt],0<qe[pt]&&(It[Qt[We]++]=pt);if(Qt[15]==1)return(qe=new D).g=0,qe.value=It[0],B(Be,Nt,1,Rt,qe),Rt;var Vt,Yt=-1,zt=Rt-1,Br=0,yr=1,Zr=1,Cr=1<<Ve;for(pt=0,We=1,ut=2;We<=Ve;++We,ut<<=1){if(yr+=Zr<<=1,0>(Zr-=St[We]))return 0;for(;0<St[We];--St[We])(qe=new D).g=We,qe.value=It[pt++],B(Be,Nt+Br,ut,Cr,qe),Br=O(Br,We)}for(We=Ve+1,ut=2;15>=We;++We,ut<<=1){if(yr+=Zr<<=1,0>(Zr-=St[We]))return 0;for(;0<St[We];--St[We]){if(qe=new D,(Br&zt)!=Yt){for(Nt+=Cr,Vt=1<<(Yt=We)-Ve;15>Yt&&!(0>=(Vt-=St[Yt]));)++Yt,Vt<<=1;Rt+=Cr=1<<(Vt=Yt-Ve),Be[Oe+(Yt=Br&zt)].g=Vt+Ve,Be[Oe+Yt].value=Nt-Oe-Yt}qe.g=We-Ve,qe.value=It[pt++],B(Be,Nt+(Br>>Ve),ut,Cr,qe),Br=O(Br,We)}}return yr!=2*Qt[15]-1?0:Rt}(N,j,H,J,ve,Ee)}function D(){this.value=this.g=0}function W(){this.value=this.g=0}function Ae(){this.G=i(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Y0,W)}function ee(N,j,H,J){e(N!=null),e(j!=null),e(2147483648>J),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=j,N.pa=H,N.Jd=j,N.Yc=H+J,N.Zc=4<=J?H+J-4+1:H,R(N)}function ce(N,j){for(var H=0;0<j--;)H|=Z(N,128)<<j;return H}function de(N,j){var H=ce(N,j);return K(N)?-H:H}function X(N,j,H,J){var ve,Ee=0;for(e(N!=null),e(j!=null),e(4294967288>J),N.Sb=J,N.Ra=0,N.u=0,N.h=0,4<J&&(J=4),ve=0;ve<J;++ve)Ee+=j[H+ve]<<8*ve;N.Ra=Ee,N.bb=J,N.oa=j,N.pa=H}function pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<qf-8>>>0,++N.bb,N.u-=8;M(N)&&(N.h=1,N.u=0)}function Se(N,j){if(e(0<=j),!N.h&&j<=sc){var H=V(N)&ac[j];return N.u+=j,pe(N),H}return N.h=1,N.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(N){return N.Ra>>>(N.u&qf-1)>>>0}function M(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>qf}function L(N,j){N.u=j,N.h=M(N)}function q(N){N.u>=wA&&(e(N.u>=wA),pe(N))}function R(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function K(N){return ce(N,1)}function Z(N,j){var H=N.Ca;0>N.b&&R(N);var J=N.b,ve=H*j>>>8,Ee=(N.I>>>J>ve)+0;for(Ee?(H-=ve,N.I-=ve+1<<J>>>0):H=ve+1,J=H,ve=0;256<=J;)ve+=8,J>>=8;return J=7^ve+Wf[J],N.b-=J,N.Ca=(H<<J)-1,Ee}function te(N,j,H){N[j+0]=H>>24&255,N[j+1]=H>>16&255,N[j+2]=H>>8&255,N[j+3]=255&H}function Q(N,j){return N[j+0]|N[j+1]<<8}function ye(N,j){return Q(N,j)|N[j+2]<<16}function Y(N,j){return Q(N,j)|Q(N,j+2)<<16}function z(N,j){var H=1<<j;return e(N!=null),e(0<j),N.X=s(H),N.X==null?0:(N.Mb=32-j,N.Xa=j,1)}function le(N,j){e(N!=null),e(j!=null),e(N.Xa==j.Xa),n(j.X,0,N.X,0,1<<j.Xa)}function je(){this.X=[],this.Xa=this.Mb=0}function ue(N,j,H,J){e(H!=null),e(J!=null);var ve=H[0],Ee=J[0];return ve==0&&(ve=(N*Ee+j/2)/j),Ee==0&&(Ee=(j*ve+N/2)/N),0>=ve||0>=Ee?0:(H[0]=ve,J[0]=Ee,1)}function Pe(N,j){return N+(1<<j)-1>>>j}function Ye(N,j){return((4278255360&N)+(4278255360&j)>>>0&4278255360)+((16711935&N)+(16711935&j)>>>0&16711935)>>>0}function nt(N,j){S[j]=function(H,J,ve,Ee,Be,Oe,Ve){var qe;for(qe=0;qe<Be;++qe){var ut=S[N](Oe[Ve+qe-1],ve,Ee+qe);Oe[Ve+qe]=Ye(H[J+qe],ut)}}}function mt(){this.ud=this.hd=this.jd=0}function ct(N,j){return((4278124286&(N^j))>>>1)+(N&j)>>>0}function ft(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Ct(N,j){return ft(N+(N-j+.5>>1))}function At(N,j,H){return Math.abs(j-H)-Math.abs(N-H)}function He(N,j,H,J,ve,Ee,Be){for(J=Ee[Be-1],H=0;H<ve;++H)Ee[Be+H]=J=Ye(N[j+H],J)}function it(N,j,H,J,ve){var Ee;for(Ee=0;Ee<H;++Ee){var Be=N[j+Ee],Oe=Be>>8&255,Ve=16711935&(Ve=(Ve=16711935&Be)+((Oe<<16)+Oe));J[ve+Ee]=(4278255360&Be)+Ve>>>0}}function we(N,j){j.jd=255&N,j.hd=N>>8&255,j.ud=N>>16&255}function re(N,j,H,J,ve,Ee){var Be;for(Be=0;Be<J;++Be){var Oe=j[H+Be],Ve=Oe>>>8,qe=Oe,ut=255&(ut=(ut=Oe>>>16)+((N.jd<<24>>24)*(Ve<<24>>24)>>>5));qe=255&(qe=(qe+=(N.hd<<24>>24)*(Ve<<24>>24)>>>5)+((N.ud<<24>>24)*(ut<<24>>24)>>>5)),ve[Ee+Be]=(4278255360&Oe)+(ut<<16)+qe}}function ne(N,j,H,J,ve){S[j]=function(Ee,Be,Oe,Ve,qe,ut,It,We,pt){for(Ve=It;Ve<We;++Ve)for(It=0;It<pt;++It)qe[ut++]=ve(Oe[J(Ee[Be++])])},S[N]=function(Ee,Be,Oe,Ve,qe,ut,It){var We=8>>Ee.b,pt=Ee.Ea,Nt=Ee.K[0],Rt=Ee.w;if(8>We)for(Ee=(1<<Ee.b)-1,Rt=(1<<We)-1;Be<Oe;++Be){var St,Qt=0;for(St=0;St<pt;++St)St&Ee||(Qt=J(Ve[qe++])),ut[It++]=ve(Nt[Qt&Rt]),Qt>>=We}else S["VP8LMapColor"+H](Ve,qe,Nt,Rt,ut,It,Be,Oe,pt)}}function Ue(N,j,H,J,ve){for(H=j+H;j<H;){var Ee=N[j++];J[ve++]=Ee>>16&255,J[ve++]=Ee>>8&255,J[ve++]=255&Ee}}function Ke(N,j,H,J,ve){for(H=j+H;j<H;){var Ee=N[j++];J[ve++]=Ee>>16&255,J[ve++]=Ee>>8&255,J[ve++]=255&Ee,J[ve++]=Ee>>24&255}}function et(N,j,H,J,ve){for(H=j+H;j<H;){var Ee=(Be=N[j++])>>16&240|Be>>12&15,Be=240&Be|Be>>28&15;J[ve++]=Ee,J[ve++]=Be}}function ke(N,j,H,J,ve){for(H=j+H;j<H;){var Ee=(Be=N[j++])>>16&248|Be>>13&7,Be=Be>>5&224|Be>>3&31;J[ve++]=Ee,J[ve++]=Be}}function he(N,j,H,J,ve){for(H=j+H;j<H;){var Ee=N[j++];J[ve++]=255&Ee,J[ve++]=Ee>>8&255,J[ve++]=Ee>>16&255}}function _e(N,j,H,J,ve,Ee){if(Ee==0)for(H=j+H;j<H;)te(J,((Ee=N[j++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),ve+=32;else n(J,ve,N,j,H)}function be(N,j){S[j][0]=S[N+"0"],S[j][1]=S[N+"1"],S[j][2]=S[N+"2"],S[j][3]=S[N+"3"],S[j][4]=S[N+"4"],S[j][5]=S[N+"5"],S[j][6]=S[N+"6"],S[j][7]=S[N+"7"],S[j][8]=S[N+"8"],S[j][9]=S[N+"9"],S[j][10]=S[N+"10"],S[j][11]=S[N+"11"],S[j][12]=S[N+"12"],S[j][13]=S[N+"13"],S[j][14]=S[N+"0"],S[j][15]=S[N+"0"]}function Qe(N){return N==P5||N==j5||N==Fw||N==k5}function $e(){this.eb=[],this.size=this.A=this.fb=0}function Je(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new $e,this.f.kb=new Je,this.sd=null}function yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nr(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Ce(N,j){var H=N.T,J=j.ba.f.RGBA,ve=J.eb,Ee=J.fb+N.ka*J.A,Be=Wc[j.ba.S],Oe=N.y,Ve=N.O,qe=N.f,ut=N.N,It=N.ea,We=N.W,pt=j.cc,Nt=j.dc,Rt=j.Mc,St=j.Nc,Qt=N.ka,Vt=N.ka+N.T,Yt=N.U,zt=Yt+1>>1;for(Qt==0?Be(Oe,Ve,null,null,qe,ut,It,We,qe,ut,It,We,ve,Ee,null,null,Yt):(Be(j.ec,j.fc,Oe,Ve,pt,Nt,Rt,St,qe,ut,It,We,ve,Ee-J.A,ve,Ee,Yt),++H);Qt+2<Vt;Qt+=2)pt=qe,Nt=ut,Rt=It,St=We,ut+=N.Rc,We+=N.Rc,Ee+=2*J.A,Be(Oe,(Ve+=2*N.fa)-N.fa,Oe,Ve,pt,Nt,Rt,St,qe,ut,It,We,ve,Ee-J.A,ve,Ee,Yt);return Ve+=N.fa,N.j+Vt<N.o?(n(j.ec,j.fc,Oe,Ve,Yt),n(j.cc,j.dc,qe,ut,zt),n(j.Mc,j.Nc,It,We,zt),H--):1&Vt||Be(Oe,Ve,null,null,qe,ut,It,We,qe,ut,It,We,ve,Ee+J.A,null,null,Yt),H}function dt(N,j,H){var J=N.F,ve=[N.J];if(J!=null){var Ee=N.U,Be=j.ba.S,Oe=Be==kw||Be==Fw;j=j.ba.f.RGBA;var Ve=[0],qe=N.ka;Ve[0]=N.T,N.Kb&&(qe==0?--Ve[0]:(--qe,ve[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ve[0]=N.o-N.j-qe));var ut=j.eb;qe=j.fb+qe*j.A,N=SR(J,ve[0],N.width,Ee,Ve,ut,qe+(Oe?0:3),j.A),e(H==Ve),N&&Qe(Be)&&r1(ut,qe,Oe,Ee,Ve,j.A)}return 0}function gt(N){var j=N.ma,H=j.ba.S,J=11>H,ve=H==Pw||H==jw||H==kw||H==T5||H==12||Qe(H);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!qv(j.Oa,N,ve?11:12))return 0;if(ve&&Qe(H)&&Gc(),N.da)alert("todo:use_scaling");else{if(J){if(j.Ib=nr,N.Kb){if(H=N.U+1>>1,j.memory=s(N.U+2*H),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+N.U,j.Mc=j.cc,j.Nc=j.dc+H,j.Ib=Ce,Gc()}}else alert("todo:EmitYUV");ve&&(j.Jb=dt,J&&Pl())}if(J&&!HR){for(N=0;256>N;++N)oce[N]=89858*(N-128)+Dw>>Ow,uce[N]=-22014*(N-128)+Dw,cce[N]=-45773*(N-128),lce[N]=113618*(N-128)+Dw>>Ow;for(N=a1;N<D5;++N)j=76283*(N-16)+Dw>>Ow,dce[N-a1]=Ta(j,255),Ace[N-a1]=Ta(j+8>>4,15);HR=1}return 1}function Ne(N){var j=N.ma,H=N.U,J=N.T;return e(!(1&N.ka)),0>=H||0>=J?0:(H=j.Ib(N,j),j.Jb!=null&&j.Jb(N,j,H),j.Dc+=H,1)}function at(N){N.ma.memory=null}function wt(N,j,H,J){return Se(N,8)!=47?0:(j[0]=Se(N,14)+1,H[0]=Se(N,14)+1,J[0]=Se(N,1),Se(N,3)!=0?0:!N.h)}function kt(N,j){if(4>N)return N+1;var H=N-2>>1;return(2+(1&N)<<H)+Se(j,H)+1}function Lt(N,j){return 120<j?j-120:1<=(H=((H=zle[j-1])>>4)*N+(8-(15&H)))?H:1;var H}function qt(N,j,H){var J=V(H),ve=N[j+=255&J].g-8;return 0<ve&&(L(H,H.u+8),J=V(H),j+=N[j].value,j+=J&(1<<ve)-1),L(H,H.u+N[j].g),N[j].value}function _t(N,j,H){return H.g+=N.g,H.value+=N.value<<j>>>0,e(8>=H.g),N.g}function ie(N,j,H){var J=N.xc;return e((j=J==0?0:N.vc[N.md*(H>>J)+(j>>J)])<N.Wb),N.Ya[j]}function se(N,j,H,J){var ve=N.ab,Ee=N.c*j,Be=N.C;j=Be+j;var Oe=H,Ve=J;for(J=N.Ta,H=N.Ua;0<ve--;){var qe=N.gc[ve],ut=Be,It=j,We=Oe,pt=Ve,Nt=(Ve=J,Oe=H,qe.Ea);switch(e(ut<It),e(It<=qe.nc),qe.hc){case 2:Ts(We,pt,(It-ut)*Nt,Ve,Oe);break;case 0:var Rt=ut,St=It,Qt=Ve,Vt=Oe,Yt=(Cr=qe).Ea;Rt==0&&(Xv(We,pt,null,null,1,Qt,Vt),He(We,pt+1,0,0,Yt-1,Qt,Vt+1),pt+=Yt,Vt+=Yt,++Rt);for(var zt=1<<Cr.b,Br=zt-1,yr=Pe(Yt,Cr.b),Zr=Cr.K,Cr=Cr.w+(Rt>>Cr.b)*yr;Rt<St;){var yn=Zr,si=Cr,en=1;for(ig(We,pt,Qt,Vt-Yt,1,Qt,Vt);en<Yt;){var Er=(en&~Br)+zt;Er>Yt&&(Er=Yt),(0,Jv[yn[si++]>>8&15])(We,pt+ +en,Qt,Vt+en-Yt,Er-en,Qt,Vt+en),en=Er}pt+=Yt,Vt+=Yt,++Rt&Br||(Cr+=yr)}It!=qe.nc&&n(Ve,Oe-Nt,Ve,Oe+(It-ut-1)*Nt,Nt);break;case 1:for(Nt=We,St=pt,Yt=(We=qe.Ea)-(Vt=We&~(Qt=(pt=1<<qe.b)-1)),Rt=Pe(We,qe.b),zt=qe.K,qe=qe.w+(ut>>qe.b)*Rt;ut<It;){for(Br=zt,yr=qe,Zr=new mt,Cr=St+Vt,yn=St+We;St<Cr;)we(Br[yr++],Zr),Zv(Zr,Nt,St,pt,Ve,Oe),St+=pt,Oe+=pt;St<yn&&(we(Br[yr++],Zr),Zv(Zr,Nt,St,Yt,Ve,Oe),St+=Yt,Oe+=Yt),++ut&Qt||(qe+=Rt)}break;case 3:if(We==Ve&&pt==Oe&&0<qe.b){for(St=Ve,We=Nt=Oe+(It-ut)*Nt-(Vt=(It-ut)*Pe(qe.Ea,qe.b)),pt=Ve,Qt=Oe,Rt=[],Vt=(Yt=Vt)-1;0<=Vt;--Vt)Rt[Vt]=pt[Qt+Vt];for(Vt=Yt-1;0<=Vt;--Vt)St[We+Vt]=Rt[Vt];Sw(qe,ut,It,Ve,Nt,Ve,Oe)}else Sw(qe,ut,It,We,pt,Ve,Oe)}Oe=J,Ve=H}Ve!=H&&n(J,H,Oe,Ve,Ee)}function me(N,j){var H=N.V,J=N.Ba+N.c*N.C,ve=j-N.C;if(e(j<=N.l.o),e(16>=ve),0<ve){var Ee=N.l,Be=N.Ta,Oe=N.Ua,Ve=Ee.width;if(se(N,ve,H,J),ve=Oe=[Oe],e((H=N.C)<(J=j)),e(Ee.v<Ee.va),J>Ee.o&&(J=Ee.o),H<Ee.j){var qe=Ee.j-H;H=Ee.j,ve[0]+=qe*Ve}if(H>=J?H=0:(ve[0]+=4*Ee.v,Ee.ka=H-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=J-H,H=1),H){if(Oe=Oe[0],11>(H=N.ca).S){var ut=H.f.RGBA,It=(J=H.S,ve=Ee.U,Ee=Ee.T,qe=ut.eb,ut.A),We=Ee;for(ut=ut.fb+N.Ma*ut.A;0<We--;){var pt=Be,Nt=Oe,Rt=ve,St=qe,Qt=ut;switch(J){case Tw:e1(pt,Nt,Rt,St,Qt);break;case Pw:Xf(pt,Nt,Rt,St,Qt);break;case P5:Xf(pt,Nt,Rt,St,Qt),r1(St,Qt,0,Rt,1,0);break;case FR:J0(pt,Nt,Rt,St,Qt);break;case jw:_e(pt,Nt,Rt,St,Qt,1);break;case j5:_e(pt,Nt,Rt,St,Qt,1),r1(St,Qt,0,Rt,1,0);break;case kw:_e(pt,Nt,Rt,St,Qt,0);break;case Fw:_e(pt,Nt,Rt,St,Qt,0),r1(St,Qt,1,Rt,1,0);break;case T5:Yf(pt,Nt,Rt,St,Qt);break;case k5:Yf(pt,Nt,Rt,St,Qt),ER(St,Qt,Rt,1,0);break;case OR:Jf(pt,Nt,Rt,St,Qt);break;default:e(0)}Oe+=Ve,ut+=It}N.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=H.height)}}N.C=j,e(N.C<=N.i)}function fe(N){var j;if(0<N.ua)return 0;for(j=0;j<N.Wb;++j){var H=N.Ya[j].G,J=N.Ya[j].H;if(0<H[1][J[1]+0].g||0<H[2][J[2]+0].g||0<H[3][J[3]+0].g)return 0}return 1}function Te(N,j,H,J,ve,Ee){if(N.Z!=0){var Be=N.qd,Oe=N.rd;for(e(th[N.Z]!=null);j<H;++j)th[N.Z](Be,Oe,J,ve,J,ve,Ee),Be=J,Oe=ve,ve+=Ee;N.qd=Be,N.rd=Oe}}function Re(N,j){var H=N.l.ma,J=H.Z==0||H.Z==1?N.l.j:N.C;if(J=N.C<J?J:N.C,e(j<=N.l.o),j>J){var ve=N.l.width,Ee=H.ca,Be=H.tb+ve*J,Oe=N.V,Ve=N.Ba+N.c*J,qe=N.gc;e(N.ab==1),e(qe[0].hc==3),Pd(qe[0],J,j,Oe,Ve,Ee,Be),Te(H,J,j,Ee,Be,ve)}N.C=N.Ma=j}function ae(N,j,H,J,ve,Ee,Be){var Oe=N.$/J,Ve=N.$%J,qe=N.m,ut=N.s,It=H+N.$,We=It;ve=H+J*ve;var pt=H+J*Ee,Nt=280+ut.ua,Rt=N.Pb?Oe:16777216,St=0<ut.ua?ut.Wa:null,Qt=ut.wc,Vt=It<pt?ie(ut,Ve,Oe):null;e(N.C<Ee),e(pt<=ve);var Yt=!1;e:for(;;){for(;Yt||It<pt;){var zt=0;if(Oe>=Rt){var Br=It-H;e((Rt=N).Pb),Rt.wd=Rt.m,Rt.xd=Br,0<Rt.s.ua&&le(Rt.s.Wa,Rt.s.vb),Rt=Oe+Wle}if(Ve&Qt||(Vt=ie(ut,Ve,Oe)),e(Vt!=null),Vt.Qb&&(j[It]=Vt.qb,Yt=!0),!Yt)if(q(qe),Vt.jc){zt=qe,Br=j;var yr=It,Zr=Vt.pd[V(zt)&Y0-1];e(Vt.jc),256>Zr.g?(L(zt,zt.u+Zr.g),Br[yr]=Zr.value,zt=0):(L(zt,zt.u+Zr.g-256),e(256<=Zr.value),zt=Zr.value),zt==0&&(Yt=!0)}else zt=qt(Vt.G[0],Vt.H[0],qe);if(qe.h)break;if(Yt||256>zt){if(!Yt)if(Vt.nd)j[It]=(Vt.qb|zt<<8)>>>0;else{if(q(qe),Yt=qt(Vt.G[1],Vt.H[1],qe),q(qe),Br=qt(Vt.G[2],Vt.H[2],qe),yr=qt(Vt.G[3],Vt.H[3],qe),qe.h)break;j[It]=(yr<<24|Yt<<16|zt<<8|Br)>>>0}if(Yt=!1,++It,++Ve>=J&&(Ve=0,++Oe,Be!=null&&Oe<=Ee&&!(Oe%16)&&Be(N,Oe),St!=null))for(;We<It;)zt=j[We++],St.X[(506832829*zt&4294967295)>>>St.Mb]=zt}else if(280>zt){if(zt=kt(zt-256,qe),Br=qt(Vt.G[4],Vt.H[4],qe),q(qe),Br=Lt(J,Br=kt(Br,qe)),qe.h)break;if(It-H<Br||ve-It<zt)break e;for(yr=0;yr<zt;++yr)j[It+yr]=j[It+yr-Br];for(It+=zt,Ve+=zt;Ve>=J;)Ve-=J,++Oe,Be!=null&&Oe<=Ee&&!(Oe%16)&&Be(N,Oe);if(e(It<=ve),Ve&Qt&&(Vt=ie(ut,Ve,Oe)),St!=null)for(;We<It;)zt=j[We++],St.X[(506832829*zt&4294967295)>>>St.Mb]=zt}else{if(!(zt<Nt))break e;for(Yt=zt-280,e(St!=null);We<It;)zt=j[We++],St.X[(506832829*zt&4294967295)>>>St.Mb]=zt;zt=It,e(!(Yt>>>(Br=St).Xa)),j[zt]=Br.X[Yt],Yt=!0}Yt||e(qe.h==M(qe))}if(N.Pb&&qe.h&&It<ve)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&le(N.s.vb,N.s.Wa);else{if(qe.h)break e;Be!=null&&Be(N,Oe>Ee?Ee:Oe),N.a=0,N.$=It-H}return 1}return N.a=3,0}function Me(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var j=N.Wa;j!=null&&(j.X=null),N.vb=null,e(N!=null)}function xe(){var N=new Rr;return N==null?null:(N.a=0,N.xb=MR,be("Predictor","VP8LPredictors"),be("Predictor","VP8LPredictors_C"),be("PredictorAdd","VP8LPredictorsAdd"),be("PredictorAdd","VP8LPredictorsAdd_C"),Ts=it,Zv=re,e1=Ue,Xf=Ke,Yf=et,Jf=ke,J0=he,S.VP8LMapColor32b=Td,S.VP8LMapColor8b=Yv,N)}function Le(N,j,H,J,ve){var Ee=1,Be=[N],Oe=[j],Ve=J.m,qe=J.s,ut=null,It=0;e:for(;;){if(H)for(;Ee&&Se(Ve,1);){var We=Be,pt=Oe,Nt=J,Rt=1,St=Nt.m,Qt=Nt.gc[Nt.ab],Vt=Se(St,2);if(Nt.Oc&1<<Vt)Ee=0;else{switch(Nt.Oc|=1<<Vt,Qt.hc=Vt,Qt.Ea=We[0],Qt.nc=pt[0],Qt.K=[null],++Nt.ab,e(4>=Nt.ab),Vt){case 0:case 1:Qt.b=Se(St,3)+2,Rt=Le(Pe(Qt.Ea,Qt.b),Pe(Qt.nc,Qt.b),0,Nt,Qt.K),Qt.K=Qt.K[0];break;case 3:var Yt,zt=Se(St,8)+1,Br=16<zt?0:4<zt?1:2<zt?2:3;if(We[0]=Pe(Qt.Ea,Br),Qt.b=Br,Yt=Rt=Le(zt,1,0,Nt,Qt.K)){var yr,Zr=zt,Cr=Qt,yn=1<<(8>>Cr.b),si=s(yn);if(si==null)Yt=0;else{var en=Cr.K[0],Er=Cr.w;for(si[0]=Cr.K[0][0],yr=1;yr<1*Zr;++yr)si[yr]=Ye(en[Er+yr],si[yr-1]);for(;yr<4*yn;++yr)si[yr]=0;Cr.K[0]=null,Cr.K[0]=si,Yt=1}}Rt=Yt;break;case 2:break;default:e(0)}Ee=Rt}}if(Be=Be[0],Oe=Oe[0],Ee&&Se(Ve,1)&&!(Ee=1<=(It=Se(Ve,4))&&11>=It)){J.a=3;break e}var cr;if(cr=Ee)t:{var js,Xr,bn,Pa=J,to=Be,il=Oe,ys=It,To=H,ol=Pa.m,ii=Pa.s,Cn=[null],Kn=1,bs=0,Gn=qle[ys];r:for(;;){if(To&&Se(ol,1)){var ro=Se(ol,3)+2,Mu=Pe(to,ro),ks=Pe(il,ro),jl=Mu*ks;if(!Le(Mu,ks,0,Pa,Cn))break r;for(Cn=Cn[0],ii.xc=ro,js=0;js<jl;++js){var fa=Cn[js]>>8&65535;Cn[js]=fa,fa>=Kn&&(Kn=fa+1)}}if(ol.h)break r;for(Xr=0;5>Xr;++Xr){var oi=DR[Xr];!Xr&&0<ys&&(oi+=1<<ys),bs<oi&&(bs=oi)}var oc=i(Kn*Gn,D),ll=Kn,lc=i(ll,Ae);if(lc==null)var cc=null;else e(65536>=ll),cc=lc;var kl=s(bs);if(cc==null||kl==null||oc==null){Pa.a=1;break r}var uc=oc;for(js=bn=0;js<Kn;++js){var wa=cc[js],dc=wa.G,Lu=wa.H,em=0,CA=1,no=0;for(Xr=0;5>Xr;++Xr){oi=DR[Xr],dc[Xr]=uc,Lu[Xr]=bn,!Xr&&0<ys&&(oi+=1<<ys);a:{var Mw,R5=oi,Lw=Pa,s1=kl,mce=uc,pce=bn,M5=0,rh=Lw.m,gce=Se(rh,1);if(a(s1,0,0,R5),gce){var xce=Se(rh,1)+1,vce=Se(rh,1),GR=Se(rh,vce==0?1:8);s1[GR]=1,xce==2&&(s1[GR=Se(rh,8)]=1);var Uw=1}else{var zR=s(19),qR=Se(rh,4)+4;if(19<qR){Lw.a=3;var Qw=0;break a}for(Mw=0;Mw<qR;++Mw)zR[Gle[Mw]]=Se(rh,3);var L5=void 0,i1=void 0,WR=Lw,yce=zR,Vw=R5,XR=s1,U5=0,nh=WR.m,YR=8,JR=i(128,D);n:for(;P(JR,0,7,yce,19);){if(Se(nh,1)){var bce=2+2*Se(nh,3);if((L5=2+Se(nh,bce))>Vw)break n}else L5=Vw;for(i1=0;i1<Vw&&L5--;){q(nh);var ZR=JR[0+(127&V(nh))];L(nh,nh.u+ZR.g);var lg=ZR.value;if(16>lg)XR[i1++]=lg,lg!=0&&(YR=lg);else{var wce=lg==16,eM=lg-16,Nce=$le[eM],tM=Se(nh,Hle[eM])+Nce;if(i1+tM>Vw)break n;for(var _ce=wce?YR:0;0<tM--;)XR[i1++]=_ce}}U5=1;break n}U5||(WR.a=3),Uw=U5}(Uw=Uw&&!rh.h)&&(M5=P(mce,pce,8,s1,R5)),Uw&&M5!=0?Qw=M5:(Lw.a=3,Qw=0)}if(Qw==0)break r;if(CA&&Kle[Xr]==1&&(CA=uc[bn].g==0),em+=uc[bn].g,bn+=Qw,3>=Xr){var o1,Q5=kl[0];for(o1=1;o1<oi;++o1)kl[o1]>Q5&&(Q5=kl[o1]);no+=Q5}}if(wa.nd=CA,wa.Qb=0,CA&&(wa.qb=(dc[3][Lu[3]+0].value<<24|dc[1][Lu[1]+0].value<<16|dc[2][Lu[2]+0].value)>>>0,em==0&&256>dc[0][Lu[0]+0].value&&(wa.Qb=1,wa.qb+=dc[0][Lu[0]+0].value<<8)),wa.jc=!wa.Qb&&6>no,wa.jc){var Hw,EA=wa;for(Hw=0;Hw<Y0;++Hw){var ah=Hw,sh=EA.pd[ah],$w=EA.G[0][EA.H[0]+ah];256<=$w.value?(sh.g=$w.g+256,sh.value=$w.value):(sh.g=0,sh.value=0,ah>>=_t($w,8,sh),ah>>=_t(EA.G[1][EA.H[1]+ah],16,sh),ah>>=_t(EA.G[2][EA.H[2]+ah],0,sh),_t(EA.G[3][EA.H[3]+ah],24,sh))}}}ii.vc=Cn,ii.Wb=Kn,ii.Ya=cc,ii.yc=oc,cr=1;break t}cr=0}if(!(Ee=cr)){J.a=3;break e}if(0<It){if(qe.ua=1<<It,!z(qe.Wa,It)){J.a=1,Ee=0;break e}}else qe.ua=0;var V5=J,rM=Be,Cce=Oe,H5=V5.s,$5=H5.xc;if(V5.c=rM,V5.i=Cce,H5.md=Pe(rM,$5),H5.wc=$5==0?-1:(1<<$5)-1,H){J.xb=rce;break e}if((ut=s(Be*Oe))==null){J.a=1,Ee=0;break e}Ee=(Ee=ae(J,ut,0,Be,Oe,Oe,null))&&!Ve.h;break e}return Ee?(ve!=null?ve[0]=ut:(e(ut==null),e(H)),J.$=0,H||Me(qe)):Me(qe),Ee}function Ie(N,j){var H=N.c*N.i,J=H+j+16*j;return e(N.c<=j),N.V=s(J),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+H+j,1)}function rt(N,j){var H=N.C,J=j-H,ve=N.V,Ee=N.Ba+N.c*H;for(e(j<=N.l.o);0<J;){var Be=16<J?16:J,Oe=N.l.ma,Ve=N.l.width,qe=Ve*Be,ut=Oe.ca,It=Oe.tb+Ve*H,We=N.Ta,pt=N.Ua;se(N,Be,ve,Ee),IR(We,pt,ut,It,qe),Te(Oe,H,H+Be,ut,It,Ve),J-=Be,ve+=Be*N.c,H+=Be}e(H==j),N.C=N.Ma=j}function Ze(){this.ub=this.yd=this.td=this.Rb=0}function tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xe(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function lt(){this.Yb=function(){var N=[];return function j(H,J,ve){for(var Ee=ve[J],Be=0;Be<Ee&&(H.push(ve.length>J+1?[]:0),!(ve.length<J+1));Be++)j(H[Be],J+1,ve)}(N,0,[3,11]),N}()}function xt(){this.jb=s(3),this.Wc=o([4,8],lt),this.Xc=o([4,17],lt)}function Wt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function er(){this.ld=this.La=this.dd=this.tc=0}function Tr(){this.Na=this.la=0}function va(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sa(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function nl(){this.uc=this.M=this.Nb=0,this.wa=Array(new er),this.Y=0,this.ya=Array(new sa),this.aa=0,this.l=new tc}function Bs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ec(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new Ze,this.Kc=new tt,this.ed=new Wt,this.Qa=new Xe,this.Ic=this.$c=this.Aa=0,this.D=new nl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,k),this.ia=0,this.pb=i(4,va),this.Pa=new xt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bs),this.Hd=0,this.rb=Array(new Tr),this.sb=0,this.wa=Array(new er),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sa),this.L=this.aa=0,this.gd=o([4,2],er),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ta(N,j){return 0>N?0:N>j?j:N}function tc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uf(){var N=new ec;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,n1||(n1=pA)),N}function ya(N,j,H){return N.a==0&&(N.a=j,N.sc=H,N.cb=0),0}function Cd(N,j,H){return 3<=H&&N[j+0]==157&&N[j+1]==1&&N[j+2]==42}function Mc(N,j){if(N==null)return 0;if(N.a=0,N.sc="OK",j==null)return ya(N,2,"null VP8Io passed to VP8GetHeaders()");var H=j.data,J=j.w,ve=j.ha;if(4>ve)return ya(N,7,"Truncated header.");var Ee=H[J+0]|H[J+1]<<8|H[J+2]<<16,Be=N.Od;if(Be.Rb=!(1&Ee),Be.td=Ee>>1&7,Be.yd=Ee>>4&1,Be.ub=Ee>>5,3<Be.td)return ya(N,3,"Incorrect keyframe parameters.");if(!Be.yd)return ya(N,4,"Frame not displayable.");J+=3,ve-=3;var Oe=N.Kc;if(Be.Rb){if(7>ve)return ya(N,7,"cannot parse picture header");if(!Cd(H,J,ve))return ya(N,3,"Bad code word");Oe.c=16383&(H[J+4]<<8|H[J+3]),Oe.Td=H[J+4]>>6,Oe.i=16383&(H[J+6]<<8|H[J+5]),Oe.Ud=H[J+6]>>6,J+=7,ve-=7,N.za=Oe.c+15>>4,N.Ub=Oe.i+15>>4,j.width=Oe.c,j.height=Oe.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,a((Ee=N.Pa).jb,0,255,Ee.jb.length),e((Ee=N.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,a(Ee.Zb,0,0,Ee.Zb.length),a(Ee.Lb,0,0,Ee.Lb)}if(Be.ub>ve)return ya(N,7,"bad partition length");ee(Ee=N.m,H,J,Be.ub),J+=Be.ub,ve-=Be.ub,Be.Rb&&(Oe.Ld=K(Ee),Oe.Kd=K(Ee)),Oe=N.Qa;var Ve,qe=N.Pa;if(e(Ee!=null),e(Oe!=null),Oe.Cb=K(Ee),Oe.Cb){if(Oe.Bb=K(Ee),K(Ee)){for(Oe.Fb=K(Ee),Ve=0;4>Ve;++Ve)Oe.Zb[Ve]=K(Ee)?de(Ee,7):0;for(Ve=0;4>Ve;++Ve)Oe.Lb[Ve]=K(Ee)?de(Ee,6):0}if(Oe.Bb)for(Ve=0;3>Ve;++Ve)qe.jb[Ve]=K(Ee)?ce(Ee,8):255}else Oe.Bb=0;if(Ee.Ka)return ya(N,3,"cannot parse segment header");if((Oe=N.ed).zd=K(Ee),Oe.Tb=ce(Ee,6),Oe.wb=ce(Ee,3),Oe.Pc=K(Ee),Oe.Pc&&K(Ee)){for(qe=0;4>qe;++qe)K(Ee)&&(Oe.vd[qe]=de(Ee,6));for(qe=0;4>qe;++qe)K(Ee)&&(Oe.od[qe]=de(Ee,6))}if(N.L=Oe.Tb==0?0:Oe.zd?1:2,Ee.Ka)return ya(N,3,"cannot parse filter header");var ut=ve;if(ve=Ve=J,J=Ve+ut,Oe=ut,N.Xb=(1<<ce(N.m,2))-1,ut<3*(qe=N.Xb))H=7;else{for(Ve+=3*qe,Oe-=3*qe,ut=0;ut<qe;++ut){var It=H[ve+0]|H[ve+1]<<8|H[ve+2]<<16;It>Oe&&(It=Oe),ee(N.Jc[+ut],H,Ve,It),Ve+=It,Oe-=It,ve+=3}ee(N.Jc[+qe],H,Ve,Oe),H=Ve<J?0:5}if(H!=0)return ya(N,H,"cannot parse partitions");for(H=ce(Ve=N.m,7),ve=K(Ve)?de(Ve,4):0,J=K(Ve)?de(Ve,4):0,Oe=K(Ve)?de(Ve,4):0,qe=K(Ve)?de(Ve,4):0,Ve=K(Ve)?de(Ve,4):0,ut=N.Qa,It=0;4>It;++It){if(ut.Cb){var We=ut.Zb[It];ut.Fb||(We+=H)}else{if(0<It){N.pb[It]=N.pb[0];continue}We=H}var pt=N.pb[It];pt.Sc[0]=F5[Ta(We+ve,127)],pt.Sc[1]=O5[Ta(We+0,127)],pt.Eb[0]=2*F5[Ta(We+J,127)],pt.Eb[1]=101581*O5[Ta(We+Oe,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=F5[Ta(We+qe,117)],pt.Qc[1]=O5[Ta(We+Ve,127)],pt.lc=We+Ve}if(!Be.Rb)return ya(N,4,"Not a key frame.");for(K(Ee),Be=N.Pa,H=0;4>H;++H){for(ve=0;8>ve;++ve)for(J=0;3>J;++J)for(Oe=0;11>Oe;++Oe)qe=Z(Ee,ece[H][ve][J][Oe])?ce(Ee,8):Jle[H][ve][J][Oe],Be.Wc[H][ve].Yb[J][Oe]=qe;for(ve=0;17>ve;++ve)Be.Xc[H][ve]=Be.Wc[H][tce[ve]]}return N.kc=K(Ee),N.kc&&(N.Bd=ce(Ee,8)),N.cb=1}function pA(N,j,H,J,ve,Ee,Be){var Oe=j[ve].Yb[H];for(H=0;16>ve;++ve){if(!Z(N,Oe[H+0]))return ve;for(;!Z(N,Oe[H+1]);)if(Oe=j[++ve].Yb[0],H=0,ve==16)return 16;var Ve=j[ve+1].Yb;if(Z(N,Oe[H+2])){var qe=N,ut=0;if(Z(qe,(We=Oe)[(It=H)+3]))if(Z(qe,We[It+6])){for(Oe=0,It=2*(ut=Z(qe,We[It+8]))+(We=Z(qe,We[It+9+ut])),ut=0,We=Xle[It];We[Oe];++Oe)ut+=ut+Z(qe,We[Oe]);ut+=3+(8<<It)}else Z(qe,We[It+7])?(ut=7+2*Z(qe,165),ut+=Z(qe,145)):ut=5+Z(qe,159);else ut=Z(qe,We[It+4])?3+Z(qe,We[It+5]):2;Oe=Ve[2]}else ut=1,Oe=Ve[1];Ve=Be+Yle[ve],0>(qe=N).b&&R(qe);var It,We=qe.b,pt=(It=qe.Ca>>1)-(qe.I>>We)>>31;--qe.b,qe.Ca+=pt,qe.Ca|=1,qe.I-=(It+1&pt)<<We,Ee[Ve]=((ut^pt)-pt)*J[(0<ve)+0]}return 16}function K0(N){var j=N.rb[N.sb-1];j.la=0,j.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Tl(N,j,H,J,ve){ve=N[j+H+32*J]+(ve>>3),N[j+H+32*J]=-256&ve?0>ve?0:255:ve}function da(N,j,H,J,ve,Ee){Tl(N,j,0,H,J+ve),Tl(N,j,1,H,J+Ee),Tl(N,j,2,H,J-Ee),Tl(N,j,3,H,J-ve)}function ni(N){return(20091*N>>16)+N}function gA(N,j,H,J){var ve,Ee=0,Be=s(16);for(ve=0;4>ve;++ve){var Oe=N[j+0]+N[j+8],Ve=N[j+0]-N[j+8],qe=(35468*N[j+4]>>16)-ni(N[j+12]),ut=ni(N[j+4])+(35468*N[j+12]>>16);Be[Ee+0]=Oe+ut,Be[Ee+1]=Ve+qe,Be[Ee+2]=Ve-qe,Be[Ee+3]=Oe-ut,Ee+=4,j++}for(ve=Ee=0;4>ve;++ve)Oe=(N=Be[Ee+0]+4)+Be[Ee+8],Ve=N-Be[Ee+8],qe=(35468*Be[Ee+4]>>16)-ni(Be[Ee+12]),Tl(H,J,0,0,Oe+(ut=ni(Be[Ee+4])+(35468*Be[Ee+12]>>16))),Tl(H,J,1,0,Ve+qe),Tl(H,J,2,0,Ve-qe),Tl(H,J,3,0,Oe-ut),Ee++,J+=32}function Qf(N,j,H,J){var ve=N[j+0]+4,Ee=35468*N[j+4]>>16,Be=ni(N[j+4]),Oe=35468*N[j+1]>>16;da(H,J,0,ve+Be,N=ni(N[j+1]),Oe),da(H,J,1,ve+Ee,N,Oe),da(H,J,2,ve-Ee,N,Oe),da(H,J,3,ve-Be,N,Oe)}function eg(N,j,H,J,ve){gA(N,j,H,J),ve&&gA(N,j+16,H,J+4)}function fn(N,j,H,J){Z0(N,j+0,H,J,1),Z0(N,j+32,H,J+128,1)}function xA(N,j,H,J){var ve;for(N=N[j+0]+4,ve=0;4>ve;++ve)for(j=0;4>j;++j)Tl(H,J,j,ve,N)}function Ed(N,j,H,J){N[j+0]&&Qn(N,j+0,H,J),N[j+16]&&Qn(N,j+16,H,J+4),N[j+32]&&Qn(N,j+32,H,J+128),N[j+48]&&Qn(N,j+48,H,J+128+4)}function Lc(N,j,H,J){var ve,Ee=s(16);for(ve=0;4>ve;++ve){var Be=N[j+0+ve]+N[j+12+ve],Oe=N[j+4+ve]+N[j+8+ve],Ve=N[j+4+ve]-N[j+8+ve],qe=N[j+0+ve]-N[j+12+ve];Ee[0+ve]=Be+Oe,Ee[8+ve]=Be-Oe,Ee[4+ve]=qe+Ve,Ee[12+ve]=qe-Ve}for(ve=0;4>ve;++ve)Be=(N=Ee[0+4*ve]+3)+Ee[3+4*ve],Oe=Ee[1+4*ve]+Ee[2+4*ve],Ve=Ee[1+4*ve]-Ee[2+4*ve],qe=N-Ee[3+4*ve],H[J+0]=Be+Oe>>3,H[J+16]=qe+Ve>>3,H[J+32]=Be-Oe>>3,H[J+48]=qe-Ve>>3,J+=64}function vA(N,j,H){var J,ve=j-32,Ee=ic,Be=255-N[ve-1];for(J=0;J<H;++J){var Oe,Ve=Ee,qe=Be+N[j-1];for(Oe=0;Oe<H;++Oe)N[j+Oe]=Ve[qe+N[ve+Oe]];j+=32}}function tg(N,j){vA(N,j,4)}function Vv(N,j){vA(N,j,8)}function Hv(N,j){vA(N,j,16)}function G0(N,j){var H;for(H=0;16>H;++H)n(N,j+32*H,N,j-32,16)}function rg(N,j){var H;for(H=16;0<H;--H)a(N,j,N[j-1],16),j+=32}function Zi(N,j,H){var J;for(J=0;16>J;++J)a(j,H+32*J,N,16)}function Uc(N,j){var H,J=16;for(H=0;16>H;++H)J+=N[j-1+32*H]+N[j+H-32];Zi(J>>5,N,j)}function Sd(N,j){var H,J=8;for(H=0;16>H;++H)J+=N[j-1+32*H];Zi(J>>4,N,j)}function Vf(N,j){var H,J=8;for(H=0;16>H;++H)J+=N[j+H-32];Zi(J>>4,N,j)}function ng(N,j){Zi(128,N,j)}function Dr(N,j,H){return N+2*j+H+2>>2}function $v(N,j){var H,J=j-32;for(J=new Uint8Array([Dr(N[J-1],N[J+0],N[J+1]),Dr(N[J+0],N[J+1],N[J+2]),Dr(N[J+1],N[J+2],N[J+3]),Dr(N[J+2],N[J+3],N[J+4])]),H=0;4>H;++H)n(N,j+32*H,J,0,J.length)}function Kv(N,j){var H=N[j-1],J=N[j-1+32],ve=N[j-1+64],Ee=N[j-1+96];te(N,j+0,16843009*Dr(N[j-1-32],H,J)),te(N,j+32,16843009*Dr(H,J,ve)),te(N,j+64,16843009*Dr(J,ve,Ee)),te(N,j+96,16843009*Dr(ve,Ee,Ee))}function Gv(N,j){var H,J=4;for(H=0;4>H;++H)J+=N[j+H-32]+N[j-1+32*H];for(J>>=3,H=0;4>H;++H)a(N,j+32*H,J,4)}function ji(N,j){var H=N[j-1+0],J=N[j-1+32],ve=N[j-1+64],Ee=N[j-1-32],Be=N[j+0-32],Oe=N[j+1-32],Ve=N[j+2-32],qe=N[j+3-32];N[j+0+96]=Dr(J,ve,N[j-1+96]),N[j+1+96]=N[j+0+64]=Dr(H,J,ve),N[j+2+96]=N[j+1+64]=N[j+0+32]=Dr(Ee,H,J),N[j+3+96]=N[j+2+64]=N[j+1+32]=N[j+0+0]=Dr(Be,Ee,H),N[j+3+64]=N[j+2+32]=N[j+1+0]=Dr(Oe,Be,Ee),N[j+3+32]=N[j+2+0]=Dr(Ve,Oe,Be),N[j+3+0]=Dr(qe,Ve,Oe)}function Fu(N,j){var H=N[j+1-32],J=N[j+2-32],ve=N[j+3-32],Ee=N[j+4-32],Be=N[j+5-32],Oe=N[j+6-32],Ve=N[j+7-32];N[j+0+0]=Dr(N[j+0-32],H,J),N[j+1+0]=N[j+0+32]=Dr(H,J,ve),N[j+2+0]=N[j+1+32]=N[j+0+64]=Dr(J,ve,Ee),N[j+3+0]=N[j+2+32]=N[j+1+64]=N[j+0+96]=Dr(ve,Ee,Be),N[j+3+32]=N[j+2+64]=N[j+1+96]=Dr(Ee,Be,Oe),N[j+3+64]=N[j+2+96]=Dr(Be,Oe,Ve),N[j+3+96]=Dr(Oe,Ve,Ve)}function zv(N,j){var H=N[j-1+0],J=N[j-1+32],ve=N[j-1+64],Ee=N[j-1-32],Be=N[j+0-32],Oe=N[j+1-32],Ve=N[j+2-32],qe=N[j+3-32];N[j+0+0]=N[j+1+64]=Ee+Be+1>>1,N[j+1+0]=N[j+2+64]=Be+Oe+1>>1,N[j+2+0]=N[j+3+64]=Oe+Ve+1>>1,N[j+3+0]=Ve+qe+1>>1,N[j+0+96]=Dr(ve,J,H),N[j+0+64]=Dr(J,H,Ee),N[j+0+32]=N[j+1+96]=Dr(H,Ee,Be),N[j+1+32]=N[j+2+96]=Dr(Ee,Be,Oe),N[j+2+32]=N[j+3+96]=Dr(Be,Oe,Ve),N[j+3+32]=Dr(Oe,Ve,qe)}function Hf(N,j){var H=N[j+0-32],J=N[j+1-32],ve=N[j+2-32],Ee=N[j+3-32],Be=N[j+4-32],Oe=N[j+5-32],Ve=N[j+6-32],qe=N[j+7-32];N[j+0+0]=H+J+1>>1,N[j+1+0]=N[j+0+64]=J+ve+1>>1,N[j+2+0]=N[j+1+64]=ve+Ee+1>>1,N[j+3+0]=N[j+2+64]=Ee+Be+1>>1,N[j+0+32]=Dr(H,J,ve),N[j+1+32]=N[j+0+96]=Dr(J,ve,Ee),N[j+2+32]=N[j+1+96]=Dr(ve,Ee,Be),N[j+3+32]=N[j+2+96]=Dr(Ee,Be,Oe),N[j+3+64]=Dr(Be,Oe,Ve),N[j+3+96]=Dr(Oe,Ve,qe)}function Ou(N,j){var H=N[j-1+0],J=N[j-1+32],ve=N[j-1+64],Ee=N[j-1+96];N[j+0+0]=H+J+1>>1,N[j+2+0]=N[j+0+32]=J+ve+1>>1,N[j+2+32]=N[j+0+64]=ve+Ee+1>>1,N[j+1+0]=Dr(H,J,ve),N[j+3+0]=N[j+1+32]=Dr(J,ve,Ee),N[j+3+32]=N[j+1+64]=Dr(ve,Ee,Ee),N[j+3+64]=N[j+2+64]=N[j+0+96]=N[j+1+96]=N[j+2+96]=N[j+3+96]=Ee}function $f(N,j){var H=N[j-1+0],J=N[j-1+32],ve=N[j-1+64],Ee=N[j-1+96],Be=N[j-1-32],Oe=N[j+0-32],Ve=N[j+1-32],qe=N[j+2-32];N[j+0+0]=N[j+2+32]=H+Be+1>>1,N[j+0+32]=N[j+2+64]=J+H+1>>1,N[j+0+64]=N[j+2+96]=ve+J+1>>1,N[j+0+96]=Ee+ve+1>>1,N[j+3+0]=Dr(Oe,Ve,qe),N[j+2+0]=Dr(Be,Oe,Ve),N[j+1+0]=N[j+3+32]=Dr(H,Be,Oe),N[j+1+32]=N[j+3+64]=Dr(J,H,Be),N[j+1+64]=N[j+3+96]=Dr(ve,J,H),N[j+1+96]=Dr(Ee,ve,J)}function rc(N,j){var H;for(H=0;8>H;++H)n(N,j+32*H,N,j-32,8)}function yA(N,j){var H;for(H=0;8>H;++H)a(N,j,N[j-1],8),j+=32}function Qc(N,j,H){var J;for(J=0;8>J;++J)a(j,H+32*J,N,8)}function z0(N,j){var H,J=8;for(H=0;8>H;++H)J+=N[j+H-32]+N[j-1+32*H];Qc(J>>4,N,j)}function ia(N,j){var H,J=4;for(H=0;8>H;++H)J+=N[j+H-32];Qc(J>>3,N,j)}function q0(N,j){var H,J=4;for(H=0;8>H;++H)J+=N[j-1+32*H];Qc(J>>3,N,j)}function ag(N,j){Qc(128,N,j)}function Vc(N,j,H){var J=N[j-H],ve=N[j+0],Ee=3*(ve-J)+B5[1020+N[j-2*H]-N[j+H]],Be=Bw[112+(Ee+4>>3)];N[j-H]=ic[255+J+Bw[112+(Ee+3>>3)]],N[j+0]=ic[255+ve-Be]}function Kf(N,j,H,J){var ve=N[j+0],Ee=N[j+H];return qc[255+N[j-2*H]-N[j-H]]>J||qc[255+Ee-ve]>J}function bA(N,j,H,J){return 4*qc[255+N[j-H]-N[j+0]]+qc[255+N[j-2*H]-N[j+H]]<=J}function Id(N,j,H,J,ve){var Ee=N[j-3*H],Be=N[j-2*H],Oe=N[j-H],Ve=N[j+0],qe=N[j+H],ut=N[j+2*H],It=N[j+3*H];return 4*qc[255+Oe-Ve]+qc[255+Be-qe]>J?0:qc[255+N[j-4*H]-Ee]<=ve&&qc[255+Ee-Be]<=ve&&qc[255+Be-Oe]<=ve&&qc[255+It-ut]<=ve&&qc[255+ut-qe]<=ve&&qc[255+qe-Ve]<=ve}function Bd(N,j,H,J){var ve=2*J+1;for(J=0;16>J;++J)bA(N,j+J,H,ve)&&Vc(N,j+J,H)}function al(N,j,H,J){var ve=2*J+1;for(J=0;16>J;++J)bA(N,j+J*H,1,ve)&&Vc(N,j+J*H,1)}function W0(N,j,H,J){var ve;for(ve=3;0<ve;--ve)Bd(N,j+=4*H,H,J)}function sg(N,j,H,J){var ve;for(ve=3;0<ve;--ve)al(N,j+=4,H,J)}function sl(N,j,H,J,ve,Ee,Be,Oe){for(Ee=2*Ee+1;0<ve--;){if(Id(N,j,H,Ee,Be))if(Kf(N,j,H,Oe))Vc(N,j,H);else{var Ve=N,qe=j,ut=H,It=Ve[qe-2*ut],We=Ve[qe-ut],pt=Ve[qe+0],Nt=Ve[qe+ut],Rt=Ve[qe+2*ut],St=27*(Vt=B5[1020+3*(pt-We)+B5[1020+It-Nt]])+63>>7,Qt=18*Vt+63>>7,Vt=9*Vt+63>>7;Ve[qe-3*ut]=ic[255+Ve[qe-3*ut]+Vt],Ve[qe-2*ut]=ic[255+It+Qt],Ve[qe-ut]=ic[255+We+St],Ve[qe+0]=ic[255+pt-St],Ve[qe+ut]=ic[255+Nt-Qt],Ve[qe+2*ut]=ic[255+Rt-Vt]}j+=J}}function Hc(N,j,H,J,ve,Ee,Be,Oe){for(Ee=2*Ee+1;0<ve--;){if(Id(N,j,H,Ee,Be))if(Kf(N,j,H,Oe))Vc(N,j,H);else{var Ve=N,qe=j,ut=H,It=Ve[qe-ut],We=Ve[qe+0],pt=Ve[qe+ut],Nt=Bw[112+(4+(Rt=3*(We-It))>>3)],Rt=Bw[112+(Rt+3>>3)],St=Nt+1>>1;Ve[qe-2*ut]=ic[255+Ve[qe-2*ut]+St],Ve[qe-ut]=ic[255+It+Rt],Ve[qe+0]=ic[255+We-Nt],Ve[qe+ut]=ic[255+pt-St]}j+=J}}function Gf(N,j,H,J,ve,Ee){sl(N,j,H,1,16,J,ve,Ee)}function $c(N,j,H,J,ve,Ee){sl(N,j,1,H,16,J,ve,Ee)}function X0(N,j,H,J,ve,Ee){var Be;for(Be=3;0<Be;--Be)Hc(N,j+=4*H,H,1,16,J,ve,Ee)}function U(N,j,H,J,ve,Ee){var Be;for(Be=3;0<Be;--Be)Hc(N,j+=4,1,H,16,J,ve,Ee)}function ge(N,j,H,J,ve,Ee,Be,Oe){sl(N,j,ve,1,8,Ee,Be,Oe),sl(H,J,ve,1,8,Ee,Be,Oe)}function ze(N,j,H,J,ve,Ee,Be,Oe){sl(N,j,1,ve,8,Ee,Be,Oe),sl(H,J,1,ve,8,Ee,Be,Oe)}function ot(N,j,H,J,ve,Ee,Be,Oe){Hc(N,j+4*ve,ve,1,8,Ee,Be,Oe),Hc(H,J+4*ve,ve,1,8,Ee,Be,Oe)}function vt(N,j,H,J,ve,Ee,Be,Oe){Hc(N,j+4,1,ve,8,Ee,Be,Oe),Hc(H,J+4,1,ve,8,Ee,Be,Oe)}function Ut(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $t(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nr(){this.ua=0,this.Wa=new je,this.vb=new je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ae,this.yc=new D}function Rr(){this.xb=this.a=0,this.l=new tc,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nr,this.ab=0,this.gc=i(4,pr),this.Oc=0}function Kr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(N,j,H,J,ve,Ee,Be){for(N=N==null?0:N[j+0],j=0;j<Be;++j)ve[Ee+j]=N+H[J+j]&255,N=ve[Ee+j]}function Dn(N,j,H,J,ve,Ee,Be){var Oe;if(N==null)hn(null,null,H,J,ve,Ee,Be);else for(Oe=0;Oe<Be;++Oe)ve[Ee+Oe]=N[j+Oe]+H[J+Oe]&255}function rs(N,j,H,J,ve,Ee,Be){if(N==null)hn(null,null,H,J,ve,Ee,Be);else{var Oe,Ve=N[j+0],qe=Ve,ut=Ve;for(Oe=0;Oe<Be;++Oe)qe=ut+(Ve=N[j+Oe])-qe,ut=H[J+Oe]+(-256&qe?0>qe?0:255:qe)&255,qe=Ve,ve[Ee+Oe]=ut}}function $n(N,j,H,J){var ve=j.width,Ee=j.o;if(e(N!=null&&j!=null),0>H||0>=J||H+J>Ee)return null;if(!N.Cc){if(N.ga==null){var Be;if(N.ga=new Kr,(Be=N.ga==null)||(Be=j.width*j.o,e(N.Gb.length==0),N.Gb=s(Be),N.Uc=0,N.Gb==null?Be=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Be=1),Be=!Be),!Be){Be=N.ga;var Oe=N.Fa,Ve=N.P,qe=N.qc,ut=N.mb,It=N.nb,We=Ve+1,pt=qe-1,Nt=Be.l;if(e(Oe!=null&&ut!=null&&j!=null),th[0]=null,th[1]=hn,th[2]=Dn,th[3]=rs,Be.ca=ut,Be.tb=It,Be.c=j.width,Be.i=j.height,e(0<Be.c&&0<Be.i),1>=qe)j=0;else if(Be.$a=3&Oe[Ve+0],Be.Z=Oe[Ve+0]>>2&3,Be.Lc=Oe[Ve+0]>>4&3,Ve=Oe[Ve+0]>>6&3,0>Be.$a||1<Be.$a||4<=Be.Z||1<Be.Lc||Ve)j=0;else if(Nt.put=Ne,Nt.ac=gt,Nt.bc=at,Nt.ma=Be,Nt.width=j.width,Nt.height=j.height,Nt.Da=j.Da,Nt.v=j.v,Nt.va=j.va,Nt.j=j.j,Nt.o=j.o,Be.$a)e:{e(Be.$a==1),j=xe();t:for(;;){if(j==null){j=0;break e}if(e(Be!=null),Be.mc=j,j.c=Be.c,j.i=Be.i,j.l=Be.l,j.l.ma=Be,j.l.width=Be.c,j.l.height=Be.i,j.a=0,X(j.m,Oe,We,pt),!Le(Be.c,Be.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&fe(j.s)?(Be.ic=1,Oe=j.c*j.i,j.Ta=null,j.Ua=0,j.V=s(Oe),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(Be.ic=0,j=Ie(j,Be.c)),!j))break t;j=1;break e}Be.mc=null,j=0}else j=pt>=Be.c*Be.i;Be=!j}if(Be)return null;N.ga.Lc!=1?N.Ga=0:J=Ee-H}e(N.ga!=null),e(H+J<=Ee);e:{if(j=(Oe=N.ga).c,Ee=Oe.l.o,Oe.$a==0){if(We=N.rc,pt=N.Vc,Nt=N.Fa,Ve=N.P+1+H*j,qe=N.mb,ut=N.nb+H*j,e(Ve<=N.P+N.qc),Oe.Z!=0)for(e(th[Oe.Z]!=null),Be=0;Be<J;++Be)th[Oe.Z](We,pt,Nt,Ve,qe,ut,j),We=qe,pt=ut,ut+=j,Ve+=j;else for(Be=0;Be<J;++Be)n(qe,ut,Nt,Ve,j),We=qe,pt=ut,ut+=j,Ve+=j;N.rc=We,N.Vc=pt}else{if(e(Oe.mc!=null),j=H+J,e((Be=Oe.mc)!=null),e(j<=Be.i),Be.C>=j)j=1;else if(Oe.ic||Pl(),Oe.ic){Oe=Be.V,We=Be.Ba,pt=Be.c;var Rt=Be.i,St=(Nt=1,Ve=Be.$/pt,qe=Be.$%pt,ut=Be.m,It=Be.s,Be.$),Qt=pt*Rt,Vt=pt*j,Yt=It.wc,zt=St<Vt?ie(It,qe,Ve):null;e(St<=Qt),e(j<=Rt),e(fe(It));t:for(;;){for(;!ut.h&&St<Vt;){if(qe&Yt||(zt=ie(It,qe,Ve)),e(zt!=null),q(ut),256>(Rt=qt(zt.G[0],zt.H[0],ut)))Oe[We+St]=Rt,++St,++qe>=pt&&(qe=0,++Ve<=j&&!(Ve%16)&&Re(Be,Ve));else{if(!(280>Rt)){Nt=0;break t}Rt=kt(Rt-256,ut);var Br,yr=qt(zt.G[4],zt.H[4],ut);if(q(ut),!(St>=(yr=Lt(pt,yr=kt(yr,ut)))&&Qt-St>=Rt)){Nt=0;break t}for(Br=0;Br<Rt;++Br)Oe[We+St+Br]=Oe[We+St+Br-yr];for(St+=Rt,qe+=Rt;qe>=pt;)qe-=pt,++Ve<=j&&!(Ve%16)&&Re(Be,Ve);St<Vt&&qe&Yt&&(zt=ie(It,qe,Ve))}e(ut.h==M(ut))}Re(Be,Ve>j?j:Ve);break t}!Nt||ut.h&&St<Qt?(Nt=0,Be.a=ut.h?5:3):Be.$=St,j=Nt}else j=ae(Be,Be.V,Be.Ba,Be.c,Be.i,j,rt);if(!j){J=0;break e}}H+J>=Ee&&(N.Cc=1),J=1}if(!J)return null;if(N.Cc&&((J=N.ga)!=null&&(J.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+H*ve}function xs(N,j,H,J,ve,Ee){for(;0<ve--;){var Be,Oe=N,Ve=j+(H?1:0),qe=N,ut=j+(H?0:3);for(Be=0;Be<J;++Be){var It=qe[ut+4*Be];It!=255&&(It*=32897,Oe[Ve+4*Be+0]=Oe[Ve+4*Be+0]*It>>23,Oe[Ve+4*Be+1]=Oe[Ve+4*Be+1]*It>>23,Oe[Ve+4*Be+2]=Oe[Ve+4*Be+2]*It>>23)}j+=Ee}}function ns(N,j,H,J,ve){for(;0<J--;){var Ee;for(Ee=0;Ee<H;++Ee){var Be=N[j+2*Ee+0],Oe=15&(qe=N[j+2*Ee+1]),Ve=4369*Oe,qe=(240&qe|qe>>4)*Ve>>16;N[j+2*Ee+0]=(240&Be|Be>>4)*Ve>>16&240|(15&Be|Be<<4)*Ve>>16>>4&15,N[j+2*Ee+1]=240&qe|Oe}j+=ve}}function vs(N,j,H,J,ve,Ee,Be,Oe){var Ve,qe,ut=255;for(qe=0;qe<ve;++qe){for(Ve=0;Ve<J;++Ve){var It=N[j+Ve];Ee[Be+4*Ve]=It,ut&=It}j+=H,Be+=Oe}return ut!=255}function as(N,j,H,J,ve){var Ee;for(Ee=0;Ee<ve;++Ee)H[J+Ee]=N[j+Ee]>>8}function Pl(){r1=xs,ER=ns,SR=vs,IR=as}function Kc(N,j,H){S[N]=function(J,ve,Ee,Be,Oe,Ve,qe,ut,It,We,pt,Nt,Rt,St,Qt,Vt,Yt){var zt,Br=Yt-1>>1,yr=Oe[Ve+0]|qe[ut+0]<<16,Zr=It[We+0]|pt[Nt+0]<<16;e(J!=null);var Cr=3*yr+Zr+131074>>2;for(j(J[ve+0],255&Cr,Cr>>16,Rt,St),Ee!=null&&(Cr=3*Zr+yr+131074>>2,j(Ee[Be+0],255&Cr,Cr>>16,Qt,Vt)),zt=1;zt<=Br;++zt){var yn=Oe[Ve+zt]|qe[ut+zt]<<16,si=It[We+zt]|pt[Nt+zt]<<16,en=yr+yn+Zr+si+524296,Er=en+2*(yn+Zr)>>3;Cr=Er+yr>>1,yr=(en=en+2*(yr+si)>>3)+yn>>1,j(J[ve+2*zt-1],255&Cr,Cr>>16,Rt,St+(2*zt-1)*H),j(J[ve+2*zt-0],255&yr,yr>>16,Rt,St+(2*zt-0)*H),Ee!=null&&(Cr=en+Zr>>1,yr=Er+si>>1,j(Ee[Be+2*zt-1],255&Cr,Cr>>16,Qt,Vt+(2*zt-1)*H),j(Ee[Be+2*zt+0],255&yr,yr>>16,Qt,Vt+(2*zt+0)*H)),yr=yn,Zr=si}1&Yt||(Cr=3*yr+Zr+131074>>2,j(J[ve+Yt-1],255&Cr,Cr>>16,Rt,St+(Yt-1)*H),Ee!=null&&(Cr=3*Zr+yr+131074>>2,j(Ee[Be+Yt-1],255&Cr,Cr>>16,Qt,Vt+(Yt-1)*H)))}}function Gc(){Wc[Tw]=nce,Wc[Pw]=LR,Wc[FR]=ace,Wc[jw]=UR,Wc[kw]=QR,Wc[T5]=VR,Wc[OR]=sce,Wc[P5]=LR,Wc[j5]=UR,Wc[Fw]=QR,Wc[k5]=VR}function _(N){return N&-16384?0>N?0:255:N>>ice}function G(N,j){return _((19077*N>>8)+(26149*j>>8)-14234)}function oe(N,j,H){return _((19077*N>>8)-(6419*j>>8)-(13320*H>>8)+8708)}function De(N,j){return _((19077*N>>8)+(33050*j>>8)-17685)}function bt(N,j,H,J,ve){J[ve+0]=G(N,H),J[ve+1]=oe(N,j,H),J[ve+2]=De(N,j)}function Pt(N,j,H,J,ve){J[ve+0]=De(N,j),J[ve+1]=oe(N,j,H),J[ve+2]=G(N,H)}function rr(N,j,H,J,ve){var Ee=oe(N,j,H);j=Ee<<3&224|De(N,j)>>3,J[ve+0]=248&G(N,H)|Ee>>5,J[ve+1]=j}function vn(N,j,H,J,ve){var Ee=240&De(N,j)|15;J[ve+0]=240&G(N,H)|oe(N,j,H)>>4,J[ve+1]=Ee}function ss(N,j,H,J,ve){J[ve+0]=255,bt(N,j,H,J,ve+1)}function ln(N,j,H,J,ve){Pt(N,j,H,J,ve),J[ve+3]=255}function Tn(N,j,H,J,ve){bt(N,j,H,J,ve),J[ve+3]=255}function ba(N,j,H){S[N]=function(J,ve,Ee,Be,Oe,Ve,qe,ut,It){for(var We=ut+(-2&It)*H;ut!=We;)j(J[ve+0],Ee[Be+0],Oe[Ve+0],qe,ut),j(J[ve+1],Ee[Be+0],Oe[Ve+0],qe,ut+H),ve+=2,++Be,++Ve,ut+=2*H;1&It&&j(J[ve+0],Ee[Be+0],Oe[Ve+0],qe,ut)}}function nc(N,j,H){return H==0?N==0?j==0?6:5:j==0?4:0:H}function Bo(N,j,H,J,ve){switch(N>>>30){case 3:Z0(j,H,J,ve,0);break;case 2:zc(j,H,J,ve);break;case 1:Qn(j,H,J,ve)}}function eo(N,j){var H,J,ve=j.M,Ee=j.Nb,Be=N.oc,Oe=N.pc+40,Ve=N.oc,qe=N.pc+584,ut=N.oc,It=N.pc+600;for(H=0;16>H;++H)Be[Oe+32*H-1]=129;for(H=0;8>H;++H)Ve[qe+32*H-1]=129,ut[It+32*H-1]=129;for(0<ve?Be[Oe-1-32]=Ve[qe-1-32]=ut[It-1-32]=129:(a(Be,Oe-32-1,127,21),a(Ve,qe-32-1,127,9),a(ut,It-32-1,127,9)),J=0;J<N.za;++J){var We=j.ya[j.aa+J];if(0<J){for(H=-1;16>H;++H)n(Be,Oe+32*H-4,Be,Oe+32*H+12,4);for(H=-1;8>H;++H)n(Ve,qe+32*H-4,Ve,qe+32*H+4,4),n(ut,It+32*H-4,ut,It+32*H+4,4)}var pt=N.Gd,Nt=N.Hd+J,Rt=We.ad,St=We.Hc;if(0<ve&&(n(Be,Oe-32,pt[Nt].y,0,16),n(Ve,qe-32,pt[Nt].f,0,8),n(ut,It-32,pt[Nt].ea,0,8)),We.Za){var Qt=Be,Vt=Oe-32+16;for(0<ve&&(J>=N.za-1?a(Qt,Vt,pt[Nt].y[15],4):n(Qt,Vt,pt[Nt+1].y,0,4)),H=0;4>H;H++)Qt[Vt+128+H]=Qt[Vt+256+H]=Qt[Vt+384+H]=Qt[Vt+0+H];for(H=0;16>H;++H,St<<=2)Qt=Be,Vt=Oe+$R[H],Ru[We.Ob[H]](Qt,Vt),Bo(St,Rt,16*+H,Qt,Vt)}else if(Qt=nc(J,ve,We.Ob[0]),eh[Qt](Be,Oe),St!=0)for(H=0;16>H;++H,St<<=2)Bo(St,Rt,16*+H,Be,Oe+$R[H]);for(H=We.Gc,Qt=nc(J,ve,We.Dd),_A[Qt](Ve,qe),_A[Qt](ut,It),St=Rt,Qt=Ve,Vt=qe,255&(We=0|H)&&(170&We?jd(St,256,Qt,Vt):Aa(St,256,Qt,Vt)),We=ut,St=It,255&(H>>=8)&&(170&H?jd(Rt,320,We,St):Aa(Rt,320,We,St)),ve<N.Ub-1&&(n(pt[Nt].y,0,Be,Oe+480,16),n(pt[Nt].f,0,Ve,qe+224,8),n(pt[Nt].ea,0,ut,It+224,8)),H=8*Ee*N.B,pt=N.sa,Nt=N.ta+16*J+16*Ee*N.R,Rt=N.qa,We=N.ra+8*J+H,St=N.Ha,Qt=N.Ia+8*J+H,H=0;16>H;++H)n(pt,Nt+H*N.R,Be,Oe+32*H,16);for(H=0;8>H;++H)n(Rt,We+H*N.B,Ve,qe+32*H,8),n(St,Qt+H*N.B,ut,It+32*H,8)}}function Du(N,j,H,J,ve,Ee,Be,Oe,Ve){var qe=[0],ut=[0],It=0,We=Ve!=null?Ve.kd:0,pt=Ve??new $t;if(N==null||12>H)return 7;pt.data=N,pt.w=j,pt.ha=H,j=[j],H=[H],pt.gb=[pt.gb];e:{var Nt=j,Rt=H,St=pt.gb;if(e(N!=null),e(Rt!=null),e(St!=null),St[0]=0,12<=Rt[0]&&!r(N,Nt[0],"RIFF")){if(r(N,Nt[0]+8,"WEBP")){St=3;break e}var Qt=Y(N,Nt[0]+4);if(12>Qt||4294967286<Qt){St=3;break e}if(We&&Qt>Rt[0]-8){St=7;break e}St[0]=Qt,Nt[0]+=12,Rt[0]-=12}St=0}if(St!=0)return St;for(Qt=0<pt.gb[0],H=H[0];;){e:{var Vt=N;Rt=j,St=H;var Yt=qe,zt=ut,Br=Nt=[0];if((Cr=It=[It])[0]=0,8>St[0])St=7;else{if(!r(Vt,Rt[0],"VP8X")){if(Y(Vt,Rt[0]+4)!=10){St=3;break e}if(18>St[0]){St=7;break e}var yr=Y(Vt,Rt[0]+8),Zr=1+ye(Vt,Rt[0]+12);if(2147483648<=Zr*(Vt=1+ye(Vt,Rt[0]+15))){St=3;break e}Br!=null&&(Br[0]=yr),Yt!=null&&(Yt[0]=Zr),zt!=null&&(zt[0]=Vt),Rt[0]+=18,St[0]-=18,Cr[0]=1}St=0}}if(It=It[0],Nt=Nt[0],St!=0)return St;if(Rt=!!(2&Nt),!Qt&&It)return 3;if(Ee!=null&&(Ee[0]=!!(16&Nt)),Be!=null&&(Be[0]=Rt),Oe!=null&&(Oe[0]=0),Be=qe[0],Nt=ut[0],It&&Rt&&Ve==null){St=0;break}if(4>H){St=7;break}if(Qt&&It||!Qt&&!It&&!r(N,j[0],"ALPH")){H=[H],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{yr=N,St=j,Qt=H;var Cr=pt.gb;Yt=pt.na,zt=pt.P,Br=pt.Sa,Zr=22,e(yr!=null),e(Qt!=null),Vt=St[0];var yn=Qt[0];for(e(Yt!=null),e(Br!=null),Yt[0]=null,zt[0]=null,Br[0]=0;;){if(St[0]=Vt,Qt[0]=yn,8>yn){St=7;break e}var si=Y(yr,Vt+4);if(4294967286<si){St=3;break e}var en=8+si+1&-2;if(Zr+=en,0<Cr&&Zr>Cr){St=3;break e}if(!r(yr,Vt,"VP8 ")||!r(yr,Vt,"VP8L")){St=0;break e}if(yn[0]<en){St=7;break e}r(yr,Vt,"ALPH")||(Yt[0]=yr,zt[0]=Vt+8,Br[0]=si),Vt+=en,yn-=en}}if(H=H[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],St!=0)break}H=[H],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(Cr=N,St=j,Qt=H,Yt=pt.gb[0],zt=pt.Ja,Br=pt.xa,yr=St[0],Vt=!r(Cr,yr,"VP8 "),Zr=!r(Cr,yr,"VP8L"),e(Cr!=null),e(Qt!=null),e(zt!=null),e(Br!=null),8>Qt[0])St=7;else{if(Vt||Zr){if(Cr=Y(Cr,yr+4),12<=Yt&&Cr>Yt-12){St=3;break e}if(We&&Cr>Qt[0]-8){St=7;break e}zt[0]=Cr,St[0]+=8,Qt[0]-=8,Br[0]=Zr}else Br[0]=5<=Qt[0]&&Cr[yr+0]==47&&!(Cr[yr+4]>>5),zt[0]=Qt[0];St=0}if(H=H[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],j=j[0],St!=0)break;if(4294967286<pt.Ja)return 3;if(Oe==null||Rt||(Oe[0]=pt.xa?2:1),Be=[Be],Nt=[Nt],pt.xa){if(5>H){St=7;break}Oe=Be,We=Nt,Rt=Ee,N==null||5>H?N=0:5<=H&&N[j+0]==47&&!(N[j+4]>>5)?(Qt=[0],Cr=[0],Yt=[0],X(zt=new F,N,j,H),wt(zt,Qt,Cr,Yt)?(Oe!=null&&(Oe[0]=Qt[0]),We!=null&&(We[0]=Cr[0]),Rt!=null&&(Rt[0]=Yt[0]),N=1):N=0):N=0}else{if(10>H){St=7;break}Oe=Nt,N==null||10>H||!Cd(N,j+3,H-3)?N=0:(We=N[j+0]|N[j+1]<<8|N[j+2]<<16,Rt=16383&(N[j+7]<<8|N[j+6]),N=16383&(N[j+9]<<8|N[j+8]),1&We||3<(We>>1&7)||!(We>>4&1)||We>>5>=pt.Ja||!Rt||!N?N=0:(Be&&(Be[0]=Rt),Oe&&(Oe[0]=N),N=1))}if(!N||(Be=Be[0],Nt=Nt[0],It&&(qe[0]!=Be||ut[0]!=Nt)))return 3;Ve!=null&&(Ve[0]=pt,Ve.offset=j-Ve.w,e(4294967286>j-Ve.w),e(Ve.offset==Ve.ha-H));break}return St==0||St==7&&It&&Ve==null?(Ee!=null&&(Ee[0]|=pt.na!=null&&0<pt.na.length),J!=null&&(J[0]=Be),ve!=null&&(ve[0]=Nt),0):St}function qv(N,j,H){var J=j.width,ve=j.height,Ee=0,Be=0,Oe=J,Ve=ve;if(j.Da=N!=null&&0<N.Da,j.Da&&(Oe=N.cd,Ve=N.bd,Ee=N.v,Be=N.j,11>H||(Ee&=-2,Be&=-2),0>Ee||0>Be||0>=Oe||0>=Ve||Ee+Oe>J||Be+Ve>ve))return 0;if(j.v=Ee,j.j=Be,j.va=Ee+Oe,j.o=Be+Ve,j.U=Oe,j.T=Ve,j.da=N!=null&&0<N.da,j.da){if(!ue(Oe,Ve,H=[N.ib],Ee=[N.hb]))return 0;j.ib=H[0],j.hb=Ee[0]}return j.ob=N!=null&&N.ob,j.Kb=N==null||!N.Sd,j.da&&(j.ob=j.ib<3*J/4&&j.hb<3*ve/4,j.Kb=0),1}function Wv(N){if(N==null)return 2;if(11>N.S){var j=N.f.RGBA;j.fb+=(N.height-1)*j.A,j.A=-j.A}else j=N.f.kb,N=N.height,j.O+=(N-1)*j.fa,j.fa=-j.fa,j.N+=(N-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(N-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(N-1)*j.lb,j.lb=-j.lb);return 0}function zf(N,j,H,J){if(J==null||0>=N||0>=j)return 2;if(H!=null){if(H.Da){var ve=H.cd,Ee=H.bd,Be=-2&H.v,Oe=-2&H.j;if(0>Be||0>Oe||0>=ve||0>=Ee||Be+ve>N||Oe+Ee>j)return 2;N=ve,j=Ee}if(H.da){if(!ue(N,j,ve=[H.ib],Ee=[H.hb]))return 2;N=ve[0],j=Ee[0]}}J.width=N,J.height=j;e:{var Ve=J.width,qe=J.height;if(N=J.S,0>=Ve||0>=qe||!(N>=Tw&&13>N))N=2;else{if(0>=J.Rd&&J.sd==null){Be=Ee=ve=j=0;var ut=(Oe=Ve*KR[N])*qe;if(11>N||(Ee=(qe+1)/2*(j=(Ve+1)/2),N==12&&(Be=(ve=Ve)*qe)),(qe=s(ut+2*Ee+Be))==null){N=1;break e}J.sd=qe,11>N?((Ve=J.f.RGBA).eb=qe,Ve.fb=0,Ve.A=Oe,Ve.size=ut):((Ve=J.f.kb).y=qe,Ve.O=0,Ve.fa=Oe,Ve.Fd=ut,Ve.f=qe,Ve.N=0+ut,Ve.Ab=j,Ve.Cd=Ee,Ve.ea=qe,Ve.W=0+ut+Ee,Ve.Db=j,Ve.Ed=Ee,N==12&&(Ve.F=qe,Ve.J=0+ut+2*Ee),Ve.Tc=Be,Ve.lb=ve)}if(j=1,ve=J.S,Ee=J.width,Be=J.height,ve>=Tw&&13>ve)if(11>ve)N=J.f.RGBA,j&=(Oe=Math.abs(N.A))*(Be-1)+Ee<=N.size,j&=Oe>=Ee*KR[ve],j&=N.eb!=null;else{N=J.f.kb,Oe=(Ee+1)/2,ut=(Be+1)/2,Ve=Math.abs(N.fa),qe=Math.abs(N.Ab);var It=Math.abs(N.Db),We=Math.abs(N.lb),pt=We*(Be-1)+Ee;j&=Ve*(Be-1)+Ee<=N.Fd,j&=qe*(ut-1)+Oe<=N.Cd,j=(j&=It*(ut-1)+Oe<=N.Ed)&Ve>=Ee&qe>=Oe&It>=Oe,j&=N.y!=null,j&=N.f!=null,j&=N.ea!=null,ve==12&&(j&=We>=Ee,j&=pt<=N.Tc,j&=N.F!=null)}else j=0;N=j?0:2}}return N!=0||H!=null&&H.fd&&(N=Wv(J)),N}var Y0=64,ac=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sc=24,qf=32,wA=8,Wf=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(N){return N},S.Predictor2=function(N,j,H){return j[H+0]},S.Predictor3=function(N,j,H){return j[H+1]},S.Predictor4=function(N,j,H){return j[H-1]},S.Predictor5=function(N,j,H){return ct(ct(N,j[H+1]),j[H+0])},S.Predictor6=function(N,j,H){return ct(N,j[H-1])},S.Predictor7=function(N,j,H){return ct(N,j[H+0])},S.Predictor8=function(N,j,H){return ct(j[H-1],j[H+0])},S.Predictor9=function(N,j,H){return ct(j[H+0],j[H+1])},S.Predictor10=function(N,j,H){return ct(ct(N,j[H-1]),ct(j[H+0],j[H+1]))},S.Predictor11=function(N,j,H){var J=j[H+0];return 0>=At(J>>24&255,N>>24&255,(j=j[H-1])>>24&255)+At(J>>16&255,N>>16&255,j>>16&255)+At(J>>8&255,N>>8&255,j>>8&255)+At(255&J,255&N,255&j)?J:N},S.Predictor12=function(N,j,H){var J=j[H+0];return(ft((N>>24&255)+(J>>24&255)-((j=j[H-1])>>24&255))<<24|ft((N>>16&255)+(J>>16&255)-(j>>16&255))<<16|ft((N>>8&255)+(J>>8&255)-(j>>8&255))<<8|ft((255&N)+(255&J)-(255&j)))>>>0},S.Predictor13=function(N,j,H){var J=j[H-1];return(Ct((N=ct(N,j[H+0]))>>24&255,J>>24&255)<<24|Ct(N>>16&255,J>>16&255)<<16|Ct(N>>8&255,J>>8&255)<<8|Ct(255&N,255&J))>>>0};var Xv=S.PredictorAdd0;S.PredictorAdd1=He,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var ig=S.PredictorAdd2;ne("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),ne("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Ts,Sw=S.ColorIndexInverseTransform,Td=S.MapARGB,Pd=S.VP8LColorIndexInverseTransformAlpha,Yv=S.MapAlpha,Jv=S.VP8LPredictorsAdd=[];Jv.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Zv,e1,Xf,Yf,Jf,J0,Zf,Z0,zc,jd,Qn,Aa,Ps,ai,NA,t1,og,Iw,yR,bR,wR,NR,_R,CR,r1,ER,SR,IR,BR=s(511),TR=s(2041),PR=s(225),jR=s(767),kR=0,B5=TR,Bw=PR,ic=jR,qc=BR,Tw=0,Pw=1,FR=2,jw=3,kw=4,T5=5,OR=6,P5=7,j5=8,Fw=9,k5=10,Hle=[2,3,7],$le=[3,3,11],DR=[280,256,256,256,40],Kle=[0,1,1,1,0],Gle=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zle=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qle=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wle=8,F5=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],O5=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],n1=null,Xle=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yle=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],RR=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jle=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zle=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ece=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tce=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],eh=[],Ru=[],_A=[],rce=1,MR=2,th=[],Wc=[];Kc("UpsampleRgbLinePair",bt,3),Kc("UpsampleBgrLinePair",Pt,3),Kc("UpsampleRgbaLinePair",Tn,4),Kc("UpsampleBgraLinePair",ln,4),Kc("UpsampleArgbLinePair",ss,4),Kc("UpsampleRgba4444LinePair",vn,2),Kc("UpsampleRgb565LinePair",rr,2);var nce=S.UpsampleRgbLinePair,ace=S.UpsampleBgrLinePair,LR=S.UpsampleRgbaLinePair,UR=S.UpsampleBgraLinePair,QR=S.UpsampleArgbLinePair,VR=S.UpsampleRgba4444LinePair,sce=S.UpsampleRgb565LinePair,Ow=16,Dw=1<<Ow-1,a1=-227,D5=482,ice=6,HR=0,oce=s(256),lce=s(256),cce=s(256),uce=s(256),dce=s(D5-a1),Ace=s(D5-a1);ba("YuvToRgbRow",bt,3),ba("YuvToBgrRow",Pt,3),ba("YuvToRgbaRow",Tn,4),ba("YuvToBgraRow",ln,4),ba("YuvToArgbRow",ss,4),ba("YuvToRgba4444Row",vn,2),ba("YuvToRgb565Row",rr,2);var $R=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Rw=[0,2,8],fce=[8,7,6,4,4,2,2,2,1,1,1,1],hce=1;this.WebPDecodeRGBA=function(N,j,H,J,ve){var Ee=Pw,Be=new Ut,Oe=new st;Be.ba=Oe,Oe.S=Ee,Oe.width=[Oe.width],Oe.height=[Oe.height];var Ve=Oe.width,qe=Oe.height,ut=new yt;if(ut==null||N==null)var It=2;else e(ut!=null),It=Du(N,j,H,ut.width,ut.height,ut.Pd,ut.Qd,ut.format,null);if(It!=0?Ve=0:(Ve!=null&&(Ve[0]=ut.width[0]),qe!=null&&(qe[0]=ut.height[0]),Ve=1),Ve){Oe.width=Oe.width[0],Oe.height=Oe.height[0],J!=null&&(J[0]=Oe.width),ve!=null&&(ve[0]=Oe.height);e:{if(J=new tc,(ve=new $t).data=N,ve.w=j,ve.ha=H,ve.kd=1,j=[0],e(ve!=null),((N=Du(ve.data,ve.w,ve.ha,null,null,null,j,null,ve))==0||N==7)&&j[0]&&(N=4),(j=N)==0){if(e(Be!=null),J.data=ve.data,J.w=ve.w+ve.offset,J.ha=ve.ha-ve.offset,J.put=Ne,J.ac=gt,J.bc=at,J.ma=Be,ve.xa){if((N=xe())==null){Be=1;break e}if(function(We,pt){var Nt=[0],Rt=[0],St=[0];t:for(;;){if(We==null)return 0;if(pt==null)return We.a=2,0;if(We.l=pt,We.a=0,X(We.m,pt.data,pt.w,pt.ha),!wt(We.m,Nt,Rt,St)){We.a=3;break t}if(We.xb=MR,pt.width=Nt[0],pt.height=Rt[0],!Le(Nt[0],Rt[0],1,We,null))break t;return 1}return e(We.a!=0),0}(N,J)){if(J=(j=zf(J.width,J.height,Be.Oa,Be.ba))==0){t:{J=N;r:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((H=J.l)!=null),e((ve=H.ma)!=null),J.xb!=0){if(J.ca=ve.ba,J.tb=ve.tb,e(J.ca!=null),!qv(ve.Oa,H,jw)){J.a=2;break r}if(!Ie(J,H.width)||H.da)break r;if((H.da||Qe(J.ca.S))&&Pl(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&Pl()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!z(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!ae(J,J.V,J.Ba,J.c,J.i,H.o,me))break r;ve.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(j=N.a)}else j=N.a}else{if((N=new Uf)==null){Be=1;break e}if(N.Fa=ve.na,N.P=ve.P,N.qc=ve.Sa,Mc(N,J)){if((j=zf(J.width,J.height,Be.Oa,Be.ba))==0){if(N.Aa=0,H=Be.Oa,e((ve=N)!=null),H!=null){if(0<(Ve=0>(Ve=H.Md)?0:100<Ve?255:255*Ve/100)){for(qe=ut=0;4>qe;++qe)12>(It=ve.pb[qe]).lc&&(It.ia=Ve*fce[0>It.lc?0:It.lc]>>3),ut|=It.ia;ut&&(alert("todo:VP8InitRandom"),ve.ia=1)}ve.Ga=H.Id,100<ve.Ga?ve.Ga=100:0>ve.Ga&&(ve.Ga=0)}(function(We,pt){if(We==null)return 0;if(pt==null)return ya(We,2,"NULL VP8Io parameter in VP8Decode().");if(!We.cb&&!Mc(We,pt))return 0;if(e(We.cb),pt.ac==null||pt.ac(pt)){pt.ob&&(We.L=0);var Nt=Rw[We.L];if(We.L==2?(We.yb=0,We.zb=0):(We.yb=pt.v-Nt>>4,We.zb=pt.j-Nt>>4,0>We.yb&&(We.yb=0),0>We.zb&&(We.zb=0)),We.Va=pt.o+15+Nt>>4,We.Hb=pt.va+15+Nt>>4,We.Hb>We.za&&(We.Hb=We.za),We.Va>We.Ub&&(We.Va=We.Ub),0<We.L){var Rt=We.ed;for(Nt=0;4>Nt;++Nt){var St;if(We.Qa.Cb){var Qt=We.Qa.Lb[Nt];We.Qa.Fb||(Qt+=Rt.Tb)}else Qt=Rt.Tb;for(St=0;1>=St;++St){var Vt=We.gd[Nt][St],Yt=Qt;if(Rt.Pc&&(Yt+=Rt.vd[0],St&&(Yt+=Rt.od[0])),0<(Yt=0>Yt?0:63<Yt?63:Yt)){var zt=Yt;0<Rt.wb&&(zt=4<Rt.wb?zt>>2:zt>>1)>9-Rt.wb&&(zt=9-Rt.wb),1>zt&&(zt=1),Vt.dd=zt,Vt.tc=2*Yt+zt,Vt.ld=40<=Yt?2:15<=Yt?1:0}else Vt.tc=0;Vt.La=St}}}Nt=0}else ya(We,6,"Frame setup failed"),Nt=We.a;if(Nt=Nt==0){if(Nt){We.$c=0,0<We.Aa||(We.Ic=hce);t:{Nt=We.Ic,Rt=4*(zt=We.za);var Br=32*zt,yr=zt+1,Zr=0<We.L?zt*(0<We.Aa?2:1):0,Cr=(We.Aa==2?2:1)*zt;if((Vt=Rt+832+(St=3*(16*Nt+Rw[We.L])/2*Br)+(Qt=We.Fa!=null&&0<We.Fa.length?We.Kc.c*We.Kc.i:0))!=Vt)Nt=0;else{if(Vt>We.Vb){if(We.Vb=0,We.Ec=s(Vt),We.Fc=0,We.Ec==null){Nt=ya(We,1,"no memory during frame initialization.");break t}We.Vb=Vt}Vt=We.Ec,Yt=We.Fc,We.Ac=Vt,We.Bc=Yt,Yt+=Rt,We.Gd=i(Br,Bs),We.Hd=0,We.rb=i(yr+1,Tr),We.sb=1,We.wa=Zr?i(Zr,er):null,We.Y=0,We.D.Nb=0,We.D.wa=We.wa,We.D.Y=We.Y,0<We.Aa&&(We.D.Y+=zt),e(!0),We.oc=Vt,We.pc=Yt,Yt+=832,We.ya=i(Cr,sa),We.aa=0,We.D.ya=We.ya,We.D.aa=We.aa,We.Aa==2&&(We.D.aa+=zt),We.R=16*zt,We.B=8*zt,zt=(Br=Rw[We.L])*We.R,Br=Br/2*We.B,We.sa=Vt,We.ta=Yt+zt,We.qa=We.sa,We.ra=We.ta+16*Nt*We.R+Br,We.Ha=We.qa,We.Ia=We.ra+8*Nt*We.B+Br,We.$c=0,Yt+=St,We.mb=Qt?Vt:null,We.nb=Qt?Yt:null,e(Yt+Qt<=We.Fc+We.Vb),K0(We),a(We.Ac,We.Bc,0,Rt),Nt=1}}if(Nt){if(pt.ka=0,pt.y=We.sa,pt.O=We.ta,pt.f=We.qa,pt.N=We.ra,pt.ea=We.Ha,pt.Vd=We.Ia,pt.fa=We.R,pt.Rc=We.B,pt.F=null,pt.J=0,!kR){for(Nt=-255;255>=Nt;++Nt)BR[255+Nt]=0>Nt?-Nt:Nt;for(Nt=-1020;1020>=Nt;++Nt)TR[1020+Nt]=-128>Nt?-128:127<Nt?127:Nt;for(Nt=-112;112>=Nt;++Nt)PR[112+Nt]=-16>Nt?-16:15<Nt?15:Nt;for(Nt=-255;510>=Nt;++Nt)jR[255+Nt]=0>Nt?0:255<Nt?255:Nt;kR=1}Zf=Lc,Z0=eg,jd=fn,Qn=xA,Aa=Ed,zc=Qf,Ps=Gf,ai=$c,NA=ge,t1=ze,og=X0,Iw=U,yR=ot,bR=vt,wR=Bd,NR=al,_R=W0,CR=sg,Ru[0]=Gv,Ru[1]=tg,Ru[2]=$v,Ru[3]=Kv,Ru[4]=ji,Ru[5]=zv,Ru[6]=Fu,Ru[7]=Hf,Ru[8]=$f,Ru[9]=Ou,eh[0]=Uc,eh[1]=Hv,eh[2]=G0,eh[3]=rg,eh[4]=Sd,eh[5]=Vf,eh[6]=ng,_A[0]=z0,_A[1]=Vv,_A[2]=rc,_A[3]=yA,_A[4]=q0,_A[5]=ia,_A[6]=ag,Nt=1}else Nt=0}Nt&&(Nt=function(yn,si){for(yn.M=0;yn.M<yn.Va;++yn.M){var en,Er=yn.Jc[yn.M&yn.Xb],cr=yn.m,js=yn;for(en=0;en<js.za;++en){var Xr=cr,bn=js,Pa=bn.Ac,to=bn.Bc+4*en,il=bn.zc,ys=bn.ya[bn.aa+en];if(bn.Qa.Bb?ys.$b=Z(Xr,bn.Pa.jb[0])?2+Z(Xr,bn.Pa.jb[2]):Z(Xr,bn.Pa.jb[1]):ys.$b=0,bn.kc&&(ys.Ad=Z(Xr,bn.Bd)),ys.Za=!Z(Xr,145)+0,ys.Za){var To=ys.Ob,ol=0;for(bn=0;4>bn;++bn){var ii,Cn=il[0+bn];for(ii=0;4>ii;++ii){Cn=Zle[Pa[to+ii]][Cn];for(var Kn=RR[Z(Xr,Cn[0])];0<Kn;)Kn=RR[2*Kn+Z(Xr,Cn[Kn])];Cn=-Kn,Pa[to+ii]=Cn}n(To,ol,Pa,to,4),ol+=4,il[0+bn]=Cn}}else Cn=Z(Xr,156)?Z(Xr,128)?1:3:Z(Xr,163)?2:0,ys.Ob[0]=Cn,a(Pa,to,Cn,4),a(il,0,Cn,4);ys.Dd=Z(Xr,142)?Z(Xr,114)?Z(Xr,183)?1:3:2:0}if(js.m.Ka)return ya(yn,7,"Premature end-of-partition0 encountered.");for(;yn.ja<yn.za;++yn.ja){if(js=Er,Xr=(cr=yn).rb[cr.sb-1],Pa=cr.rb[cr.sb+cr.ja],en=cr.ya[cr.aa+cr.ja],to=cr.kc?en.Ad:0)Xr.la=Pa.la=0,en.Za||(Xr.Na=Pa.Na=0),en.Hc=0,en.Gc=0,en.ia=0;else{var bs,Gn;if(Xr=Pa,Pa=js,to=cr.Pa.Xc,il=cr.ya[cr.aa+cr.ja],ys=cr.pb[il.$b],bn=il.ad,To=0,ol=cr.rb[cr.sb-1],Cn=ii=0,a(bn,To,0,384),il.Za)var ro=0,Mu=to[3];else{Kn=s(16);var ks=Xr.Na+ol.Na;if(ks=n1(Pa,to[1],ks,ys.Eb,0,Kn,0),Xr.Na=ol.Na=(0<ks)+0,1<ks)Zf(Kn,0,bn,To);else{var jl=Kn[0]+3>>3;for(Kn=0;256>Kn;Kn+=16)bn[To+Kn]=jl}ro=1,Mu=to[0]}var fa=15&Xr.la,oi=15&ol.la;for(Kn=0;4>Kn;++Kn){var oc=1&oi;for(jl=Gn=0;4>jl;++jl)fa=fa>>1|(oc=(ks=n1(Pa,Mu,ks=oc+(1&fa),ys.Sc,ro,bn,To))>ro)<<7,Gn=Gn<<2|(3<ks?3:1<ks?2:bn[To+0]!=0),To+=16;fa>>=4,oi=oi>>1|oc<<7,ii=(ii<<8|Gn)>>>0}for(Mu=fa,ro=oi>>4,bs=0;4>bs;bs+=2){for(Gn=0,fa=Xr.la>>4+bs,oi=ol.la>>4+bs,Kn=0;2>Kn;++Kn){for(oc=1&oi,jl=0;2>jl;++jl)ks=oc+(1&fa),fa=fa>>1|(oc=0<(ks=n1(Pa,to[2],ks,ys.Qc,0,bn,To)))<<3,Gn=Gn<<2|(3<ks?3:1<ks?2:bn[To+0]!=0),To+=16;fa>>=2,oi=oi>>1|oc<<5}Cn|=Gn<<4*bs,Mu|=fa<<4<<bs,ro|=(240&oi)<<bs}Xr.la=Mu,ol.la=ro,il.Hc=ii,il.Gc=Cn,il.ia=43690&Cn?0:ys.ia,to=!(ii|Cn)}if(0<cr.L&&(cr.wa[cr.Y+cr.ja]=cr.gd[en.$b][en.Za],cr.wa[cr.Y+cr.ja].La|=!to),js.Ka)return ya(yn,7,"Premature end-of-file encountered.")}if(K0(yn),cr=si,js=1,en=(Er=yn).D,Xr=0<Er.L&&Er.M>=Er.zb&&Er.M<=Er.Va,Er.Aa==0)t:{if(en.M=Er.M,en.uc=Xr,eo(Er,en),js=1,en=(Gn=Er.D).Nb,Xr=(Cn=Rw[Er.L])*Er.R,Pa=Cn/2*Er.B,Kn=16*en*Er.R,jl=8*en*Er.B,to=Er.sa,il=Er.ta-Xr+Kn,ys=Er.qa,bn=Er.ra-Pa+jl,To=Er.Ha,ol=Er.Ia-Pa+jl,oi=(fa=Gn.M)==0,ii=fa>=Er.Va-1,Er.Aa==2&&eo(Er,Gn),Gn.uc)for(oc=(ks=Er).D.M,e(ks.D.uc),Gn=ks.yb;Gn<ks.Hb;++Gn){ro=Gn,Mu=oc;var ll=(lc=(no=ks).D).Nb;bs=no.R;var lc=lc.wa[lc.Y+ro],cc=no.sa,kl=no.ta+16*ll*bs+16*ro,uc=lc.dd,wa=lc.tc;if(wa!=0)if(e(3<=wa),no.L==1)0<ro&&NR(cc,kl,bs,wa+4),lc.La&&CR(cc,kl,bs,wa),0<Mu&&wR(cc,kl,bs,wa+4),lc.La&&_R(cc,kl,bs,wa);else{var dc=no.B,Lu=no.qa,em=no.ra+8*ll*dc+8*ro,CA=no.Ha,no=no.Ia+8*ll*dc+8*ro;ll=lc.ld,0<ro&&(ai(cc,kl,bs,wa+4,uc,ll),t1(Lu,em,CA,no,dc,wa+4,uc,ll)),lc.La&&(Iw(cc,kl,bs,wa,uc,ll),bR(Lu,em,CA,no,dc,wa,uc,ll)),0<Mu&&(Ps(cc,kl,bs,wa+4,uc,ll),NA(Lu,em,CA,no,dc,wa+4,uc,ll)),lc.La&&(og(cc,kl,bs,wa,uc,ll),yR(Lu,em,CA,no,dc,wa,uc,ll))}}if(Er.ia&&alert("todo:DitherRow"),cr.put!=null){if(Gn=16*fa,fa=16*(fa+1),oi?(cr.y=Er.sa,cr.O=Er.ta+Kn,cr.f=Er.qa,cr.N=Er.ra+jl,cr.ea=Er.Ha,cr.W=Er.Ia+jl):(Gn-=Cn,cr.y=to,cr.O=il,cr.f=ys,cr.N=bn,cr.ea=To,cr.W=ol),ii||(fa-=Cn),fa>cr.o&&(fa=cr.o),cr.F=null,cr.J=null,Er.Fa!=null&&0<Er.Fa.length&&Gn<fa&&(cr.J=$n(Er,cr,Gn,fa-Gn),cr.F=Er.mb,cr.F==null&&cr.F.length==0)){js=ya(Er,3,"Could not decode alpha data.");break t}Gn<cr.j&&(Cn=cr.j-Gn,Gn=cr.j,e(!(1&Cn)),cr.O+=Er.R*Cn,cr.N+=Er.B*(Cn>>1),cr.W+=Er.B*(Cn>>1),cr.F!=null&&(cr.J+=cr.width*Cn)),Gn<fa&&(cr.O+=cr.v,cr.N+=cr.v>>1,cr.W+=cr.v>>1,cr.F!=null&&(cr.J+=cr.v),cr.ka=Gn-cr.j,cr.U=cr.va-cr.v,cr.T=fa-Gn,js=cr.put(cr))}en+1!=Er.Ic||ii||(n(Er.sa,Er.ta-Xr,to,il+16*Er.R,Xr),n(Er.qa,Er.ra-Pa,ys,bn+8*Er.B,Pa),n(Er.Ha,Er.Ia-Pa,To,ol+8*Er.B,Pa))}if(!js)return ya(yn,6,"Output aborted.")}return 1}(We,pt)),pt.bc!=null&&pt.bc(pt),Nt&=1}return Nt?(We.cb=0,Nt):0})(N,J)||(j=N.a)}}else j=N.a}j==0&&Be.Oa!=null&&Be.Oa.fd&&(j=Wv(Be.ba))}Be=j}Ee=Be!=0?null:11>Ee?Oe.f.RGBA.eb:Oe.f.kb.y}else Ee=null;return Ee};var KR=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,O){for(var B="",P=0;P<4;P++)B+=String.fromCharCode(S[O++]);return B}function d(S,O){return S[O+0]|S[O+1]<<8}function A(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16)>>>0}function h(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16|S[O+3]<<24)>>>0}new c;var f=[0],m=[0],p=[],g=new c,x=t,y=function(S,O){var B={},P=0,D=!1,W=0,Ae=0;if(B.frames=[],!function(k,F){for(var V=0;V<4;V++)if(k[F+V]!="RIFF".charCodeAt(V))return!0;return!1}(S,O)){for(h(S,O+=4),O+=8;O<S.length;){var ee=u(S,O),ce=h(S,O+=4);O+=4;var de=ce+(1&ce);switch(ee){case"VP8 ":case"VP8L":B.frames[P]===void 0&&(B.frames[P]={}),(Se=B.frames[P]).src_off=D?Ae:O-8,Se.src_size=W+ce+8,P++,D&&(D=!1,W=0,Ae=0);break;case"VP8X":(Se=B.header={}).feature_flags=S[O];var X=O+4;Se.canvas_width=1+A(S,X),X+=3,Se.canvas_height=1+A(S,X),X+=3;break;case"ALPH":D=!0,W=de+8,Ae=O-8;break;case"ANIM":(Se=B.header).bgcolor=h(S,O),X=O+4,Se.loop_count=d(S,X),X+=2;break;case"ANMF":var pe,Se;(Se=B.frames[P]={}).offset_x=2*A(S,O),O+=3,Se.offset_y=2*A(S,O),O+=3,Se.width=1+A(S,O),O+=3,Se.height=1+A(S,O),O+=3,Se.duration=A(S,O),O+=3,pe=S[O++],Se.dispose=1&pe,Se.blend=pe>>1&1}ee!="ANMF"&&(O+=de)}return B}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,f=[b.canvas_height],m=[b.canvas_width];for(var I=0;I<w.length&&w[I].blend!=0;I++);}var T=w[0],C=g.WebPDecodeRGBA(x,T.src_off,T.src_size,m,f);T.rgba=C,T.imgwidth=m[0],T.imgheight=f[0];for(var E=0;E<m[0]*f[0]*4;E++)p[E]=C[E];return this.width=m,this.height=f,this.data=p,this}(function(t){var e,r,n,a,s,i,o,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new i,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new i,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new A(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var A=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=k;Object.defineProperty(this,"pdf",{get:function(){return F}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(z){V=!!z}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(z){M=!!z}});var L=0;Object.defineProperty(this,"posX",{get:function(){return L},set:function(z){isNaN(z)||(L=z)}});var q=0;Object.defineProperty(this,"posY",{get:function(){return q},set:function(z){isNaN(z)||(q=z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(z){var le;typeof z=="number"?le=[z,z,z,z]:((le=new Array(4))[0]=z[0],le[1]=z.length>=2?z[1]:le[0],le[2]=z.length>=3?z[2]:le[0],le[3]=z.length>=4?z[3]:le[1]),u.margin=le}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(z){R=z}});var K=0;Object.defineProperty(this,"lastBreak",{get:function(){return K},set:function(z){K=z}});var Z=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Z},set:function(z){Z=z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(z){z instanceof d&&(u=z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(z){u.path=z}});var te=[];Object.defineProperty(this,"ctxStack",{get:function(){return te},set:function(z){te=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var le;le=h(z),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var le=h(z);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var Q=null,ye=null,Y=null;Object.defineProperty(this,"fontFaces",{get:function(){return Y},set:function(z){Q=null,ye=null,Y=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var le;if(this.ctx.font=z,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(z))!==null){var je=le[1];le[2];var ue=le[3],Pe=le[4];le[5];var Ye=le[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(nt==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var mt=function(ne){var Ue,Ke,et=[],ke=ne.trim();if(ke==="")return gB;if(ke in iQ)return[iQ[ke]];for(;ke!=="";){switch(Ke=null,Ue=(ke=lQ(ke)).charAt(0)){case'"':case"'":Ke=DEe(ke.substring(1),Ue);break;default:Ke=REe(ke)}if(Ke===null||(et.push(Ke[0]),(ke=lQ(Ke[1]))!==""&&ke.charAt(0)!==","))return gB;ke=ke.replace(/^,/,"")}return et}(Ye);if(this.fontFaces){var ct=function(ne,Ue){var Ke=ne.getFontList(),et=JSON.stringify(Ke);if(Q===null||ye!==et){var ke=function(he){var _e=[];return Object.keys(he).forEach(function(be){he[be].forEach(function(Qe){var $e=null;switch(Qe){case"bold":$e={family:be,weight:"bold"};break;case"italic":$e={family:be,style:"italic"};break;case"bolditalic":$e={family:be,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:be}}$e!==null&&($e.ref={name:be,style:Qe},_e.push($e))})}),_e}(Ke);Q=function(he){for(var _e={},be=0;be<he.length;++be){var Qe=pB(he[be]),$e=Qe.family,Je=Qe.stretch,st=Qe.style,yt=Qe.weight;_e[$e]=_e[$e]||{},_e[$e][Je]=_e[$e][Je]||{},_e[$e][Je][st]=_e[$e][Je][st]||{},_e[$e][Je][st][yt]=Qe}return _e}(ke.concat(Ue)),ye=et}return Q}(this.pdf,this.fontFaces),ft=mt.map(function(ne){return{family:ne,stretch:"normal",weight:ue,style:je}}),Ct=function(ne,Ue,Ke){for(var et=(Ke=Ke||{}).defaultFontFamily||"times",ke=Object.assign({},OEe,Ke.genericFontFamilies||{}),he=null,_e=null,be=0;be<Ue.length;++be)if(ke[(he=pB(Ue[be])).family]&&(he.family=ke[he.family]),ne.hasOwnProperty(he.family)){_e=ne[he.family];break}if(!(_e=_e||ne[et]))throw new Error("Could not find a font-family for the rule '"+oQ(he)+"' and default family '"+et+"'.");if(_e=function(Qe,$e){if($e[Qe])return $e[Qe];var Je=Dj[Qe],st=Je<=Dj.normal?-1:1,yt=sQ($e,Ree,Je,st);if(!yt)throw new Error("Could not find a matching font-stretch value for "+Qe);return yt}(he.stretch,_e),_e=function(Qe,$e){if($e[Qe])return $e[Qe];for(var Je=Dee[Qe],st=0;st<Je.length;++st)if($e[Je[st]])return $e[Je[st]];throw new Error("Could not find a matching font-style for "+Qe)}(he.style,_e),!(_e=function(Qe,$e){if($e[Qe])return $e[Qe];if(Qe===400&&$e[500])return $e[500];if(Qe===500&&$e[400])return $e[400];var Je=FEe[Qe],st=sQ($e,Mee,Je,Qe<400?-1:1);if(!st)throw new Error("Could not find a matching font-weight for value "+Qe);return st}(he.weight,_e)))throw new Error("Failed to resolve a font for the rule '"+oQ(he)+"'.");return _e}(ct,ft);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var At="";(ue==="bold"||parseInt(ue,10)>=700||je==="bold")&&(At="bold"),je==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var He="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},we=0;we<mt.length;we++){if(this.pdf.internal.getFont(mt[we],At,{noFallback:!0,disableWarning:!0})!==void 0){He=mt[we];break}if(At==="bolditalic"&&this.pdf.internal.getFont(mt[we],"bold",{noFallback:!0,disableWarning:!0})!==void 0)He=mt[we],At="bold";else if(this.pdf.internal.getFont(mt[we],"normal",{noFallback:!0,disableWarning:!0})!==void 0){He=mt[we],At="normal";break}}if(He===""){for(var re=0;re<mt.length;re++)if(it[mt[re]]){He=it[mt[re]];break}}He=He===""?"Times":He,this.pdf.setFont(He,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=!!z}})};A.prototype.setLineDash=function(k){this.lineDash=k},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){w.call(this,"fill",!1)},A.prototype.stroke=function(){w.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(k,F){if(isNaN(k)||isNaN(F))throw pa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new i(k,F)},A.prototype.closePath=function(){var k=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&ea(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){k=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(k.x,k.y)},A.prototype.lineTo=function(k,F){if(isNaN(k)||isNaN(F))throw pa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new i(V.x,V.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},A.prototype.quadraticCurveTo=function(k,F,V,M){if(isNaN(V)||isNaN(M)||isNaN(k)||isNaN(F))throw pa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var L=this.ctx.transform.applyToPoint(new i(V,M)),q=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"qct",x1:q.x,y1:q.y,x:L.x,y:L.y}),this.ctx.lastPoint=new i(L.x,L.y)},A.prototype.bezierCurveTo=function(k,F,V,M,L,q){if(isNaN(L)||isNaN(q)||isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M))throw pa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new i(L,q)),K=this.ctx.transform.applyToPoint(new i(k,F)),Z=this.ctx.transform.applyToPoint(new i(V,M));this.path.push({type:"bct",x1:K.x,y1:K.y,x2:Z.x,y2:Z.y,x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},A.prototype.arc=function(k,F,V,M,L,q){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M)||isNaN(L))throw pa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(q=!!q,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new i(k,F));k=R.x,F=R.y;var K=this.ctx.transform.applyToPoint(new i(0,V)),Z=this.ctx.transform.applyToPoint(new i(0,0));V=Math.sqrt(Math.pow(K.x-Z.x,2)+Math.pow(K.y-Z.y,2))}Math.abs(L-M)>=2*Math.PI&&(M=0,L=2*Math.PI),this.path.push({type:"arc",x:k,y:F,radius:V,startAngle:M,endAngle:L,counterclockwise:q})},A.prototype.arcTo=function(k,F,V,M,L){throw new Error("arcTo not implemented.")},A.prototype.rect=function(k,F,V,M){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M))throw pa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,F),this.lineTo(k+V,F),this.lineTo(k+V,F+M),this.lineTo(k,F+M),this.lineTo(k,F),this.lineTo(k+V,F),this.lineTo(k,F)},A.prototype.fillRect=function(k,F,V,M){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M))throw pa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var L={};this.lineCap!=="butt"&&(L.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(L.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,F,V,M),this.fill(),L.hasOwnProperty("lineCap")&&(this.lineCap=L.lineCap),L.hasOwnProperty("lineJoin")&&(this.lineJoin=L.lineJoin)}},A.prototype.strokeRect=function(k,F,V,M){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M))throw pa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(k,F,V,M),this.stroke())},A.prototype.clearRect=function(k,F,V,M){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M))throw pa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,F,V,M))},A.prototype.save=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},A.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(F),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(k){var F,V,M,L;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))F=0,V=0,M=0,L=0;else{var q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(q!==null)F=parseInt(q[1]),V=parseInt(q[2]),M=parseInt(q[3]),L=1;else if((q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)F=parseInt(q[1]),V=parseInt(q[2]),M=parseInt(q[3]),L=parseFloat(q[4]);else{if(L=1,typeof k=="string"&&k.charAt(0)!=="#"){var R=new Bee(k);k=R.ok?R.toHex():"#000000"}k.length===4?(F=k.substring(1,2),F+=F,V=k.substring(2,3),V+=V,M=k.substring(3,4),M+=M):(F=k.substring(1,3),V=k.substring(3,5),M=k.substring(5,7)),F=parseInt(F,16),V=parseInt(V,16),M=parseInt(M,16)}}return{r:F,g:V,b:M,a:L,style:k}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(k,F,V,M){if(isNaN(F)||isNaN(V)||typeof k!="string")throw pa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!f.call(this)){var L=de(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;P.call(this,{text:k,x:F,y:V,scale:q,angle:L,align:this.textAlign,maxWidth:M})}},A.prototype.strokeText=function(k,F,V,M){if(isNaN(F)||isNaN(V)||typeof k!="string")throw pa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){M=isNaN(M)?void 0:M;var L=de(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;P.call(this,{text:k,x:F,y:V,scale:q,renderingMode:"stroke",angle:L,align:this.textAlign,maxWidth:M})}},A.prototype.measureText=function(k){if(typeof k!="string")throw pa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,V=this.pdf.internal.scaleFactor,M=F.internal.getFontSize(),L=F.getStringUnitWidth(k)*M/F.internal.scaleFactor;return new function(q){var R=(q=q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return R}}),this}({width:L*=Math.round(96*V/72*1e4)/1e4})},A.prototype.scale=function(k,F){if(isNaN(k)||isNaN(F))throw pa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(k,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},A.prototype.rotate=function(k){if(isNaN(k))throw pa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},A.prototype.translate=function(k,F){if(isNaN(k)||isNaN(F))throw pa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,k,F);this.ctx.transform=this.ctx.transform.multiply(V)},A.prototype.transform=function(k,F,V,M,L,q){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(M)||isNaN(L)||isNaN(q))throw pa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new c(k,F,V,M,L,q);this.ctx.transform=this.ctx.transform.multiply(R)},A.prototype.setTransform=function(k,F,V,M,L,q){k=isNaN(k)?1:k,F=isNaN(F)?0:F,V=isNaN(V)?0:V,M=isNaN(M)?1:M,L=isNaN(L)?0:L,q=isNaN(q)?0:q,this.ctx.transform=new c(k,F,V,M,L,q)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(k,F,V,M,L,q,R,K,Z){var te=this.pdf.getImageProperties(k),Q=1,ye=1,Y=1,z=1;M!==void 0&&K!==void 0&&(Y=K/M,z=Z/L,Q=te.width/M*K/M,ye=te.height/L*Z/L),q===void 0&&(q=F,R=V,F=0,V=0),M!==void 0&&K===void 0&&(K=M,Z=L),M===void 0&&K===void 0&&(K=te.width,Z=te.height);var le=this.ctx.transform.decompose(),je=de(le.rotate.shx),ue=new c,Pe=(ue=(ue=(ue=ue.multiply(le.translate)).multiply(le.skew)).multiply(le.scale)).applyToRectangle(new o(q-F*Y,R-V*z,M*Q,L*ye));if(this.autoPaging){for(var Ye,nt=g.call(this,Pe),mt=[],ct=0;ct<nt.length;ct+=1)mt.indexOf(nt[ct])===-1&&mt.push(nt[ct]);b(mt);for(var ft=mt[0],Ct=mt[mt.length-1],At=ft;At<Ct+1;At++){this.pdf.setPage(At);var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=At===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ne=At===1?0:we+(At-2)*re;if(this.ctx.clip_path.length!==0){var Ue=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Ye,this.posX+this.margin[3],-ne+it+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=Ue}var Ke=JSON.parse(JSON.stringify(Pe));Ke=y([Ke],this.posX+this.margin[3],-ne+it+this.ctx.prevPageLastElemOffset)[0];var et=(At>ft||At<Ct)&&p.call(this);et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,re,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,je),et&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,je)};var g=function(k,F,V){var M=[];F=F||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var L=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":M.push(Math.floor((k.y+L)/V)+1);break;case"arc":M.push(Math.floor((k.y+L-k.radius)/V)+1),M.push(Math.floor((k.y+L+k.radius)/V)+1);break;case"qct":var q=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);M.push(Math.floor((q.y+L)/V)+1),M.push(Math.floor((q.y+q.h+L)/V)+1);break;case"bct":var R=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);M.push(Math.floor((R.y+L)/V)+1),M.push(Math.floor((R.y+R.h+L)/V)+1);break;case"rect":M.push(Math.floor((k.y+L)/V)+1),M.push(Math.floor((k.y+k.h+L)/V)+1)}for(var K=0;K<M.length;K+=1)for(;this.pdf.internal.getNumberOfPages()<M[K];)x.call(this);return M},x=function(){var k=this.fillStyle,F=this.strokeStyle,V=this.font,M=this.lineCap,L=this.lineWidth,q=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=F,this.font=V,this.lineCap=M,this.lineWidth=L,this.lineJoin=q},y=function(k,F,V){for(var M=0;M<k.length;M++)switch(k[M].type){case"bct":k[M].x2+=F,k[M].y2+=V;case"qct":k[M].x1+=F,k[M].y1+=V;default:k[M].x+=F,k[M].y+=V}return k},b=function(k){return k.sort(function(F,V){return F-V})},w=function(k,F){var V=this.fillStyle,M=this.strokeStyle,L=this.lineCap,q=this.lineWidth,R=Math.abs(q*this.ctx.transform.scaleX),K=this.lineJoin;if(this.autoPaging){for(var Z,te,Q=JSON.parse(JSON.stringify(this.path)),ye=JSON.parse(JSON.stringify(this.path)),Y=[],z=0;z<ye.length;z++)if(ye[z].x!==void 0)for(var le=g.call(this,ye[z]),je=0;je<le.length;je+=1)Y.indexOf(le[je])===-1&&Y.push(le[je]);for(var ue=0;ue<Y.length;ue++)for(;this.pdf.internal.getNumberOfPages()<Y[ue];)x.call(this);b(Y);for(var Pe=Y[0],Ye=Y[Y.length-1],nt=Pe;nt<Ye+1;nt++){this.pdf.setPage(nt),this.fillStyle=V,this.strokeStyle=M,this.lineCap=L,this.lineWidth=R,this.lineJoin=K;var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=nt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=nt===1?0:ft+(nt-2)*Ct;if(this.ctx.clip_path.length!==0){var He=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Z,this.posX+this.margin[3],-At+ct+this.ctx.prevPageLastElemOffset),I.call(this,k,!0),this.path=He}if(te=JSON.parse(JSON.stringify(Q)),this.path=y(te,this.posX+this.margin[3],-At+ct+this.ctx.prevPageLastElemOffset),F===!1||nt===0){var it=(nt>Pe||nt<Ye)&&p.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ct,null).clip().discardPath()),I.call(this,k,F),it&&this.pdf.restoreGraphicsState()}this.lineWidth=q}this.path=Q}else this.lineWidth=R,I.call(this,k,F),this.lineWidth=q},I=function(k,F){if((k!=="stroke"||F||!m.call(this))&&(k==="stroke"||F||!f.call(this))){for(var V,M,L=[],q=this.path,R=0;R<q.length;R++){var K=q[R];switch(K.type){case"begin":L.push({begin:!0});break;case"close":L.push({close:!0});break;case"mt":L.push({start:K,deltas:[],abs:[]});break;case"lt":var Z=L.length;if(q[R-1]&&!isNaN(q[R-1].x)&&(V=[K.x-q[R-1].x,K.y-q[R-1].y],Z>0)){for(;Z>=0;Z--)if(L[Z-1].close!==!0&&L[Z-1].begin!==!0){L[Z-1].deltas.push(V),L[Z-1].abs.push(K);break}}break;case"bct":V=[K.x1-q[R-1].x,K.y1-q[R-1].y,K.x2-q[R-1].x,K.y2-q[R-1].y,K.x-q[R-1].x,K.y-q[R-1].y],L[L.length-1].deltas.push(V);break;case"qct":var te=q[R-1].x+2/3*(K.x1-q[R-1].x),Q=q[R-1].y+2/3*(K.y1-q[R-1].y),ye=K.x+2/3*(K.x1-K.x),Y=K.y+2/3*(K.y1-K.y),z=K.x,le=K.y;V=[te-q[R-1].x,Q-q[R-1].y,ye-q[R-1].x,Y-q[R-1].y,z-q[R-1].x,le-q[R-1].y],L[L.length-1].deltas.push(V);break;case"arc":L.push({deltas:[],abs:[],arc:!0}),Array.isArray(L[L.length-1].abs)&&L[L.length-1].abs.push(K)}}M=F?null:k==="stroke"?"stroke":"fill";for(var je=!1,ue=0;ue<L.length;ue++)if(L[ue].arc)for(var Pe=L[ue].abs,Ye=0;Ye<Pe.length;Ye++){var nt=Pe[Ye];nt.type==="arc"?E.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,F,!je):D.call(this,nt.x,nt.y),je=!0}else if(L[ue].close===!0)this.pdf.internal.out("h"),je=!1;else if(L[ue].begin!==!0){var mt=L[ue].start.x,ct=L[ue].start.y;W.call(this,L[ue].deltas,mt,ct),je=!0}M&&S.call(this,M),F&&O.call(this)}},T=function(k){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-V;case"top":return k+F-V;case"hanging":return k+F-2*V;case"middle":return k+F/2-V;default:return k}},C=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(F,V){this.colorStops.push([F,V])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,F,V,M,L,q,R,K,Z){for(var te=ee.call(this,V,M,L,q),Q=0;Q<te.length;Q++){var ye=te[Q];Q===0&&(Z?B.call(this,ye.x1+k,ye.y1+F):D.call(this,ye.x1+k,ye.y1+F)),Ae.call(this,k,F,ye.x2,ye.y2,ye.x3,ye.y3,ye.x4,ye.y4)}K?O.call(this):S.call(this,R)},S=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(k,F){this.pdf.internal.out(r(k)+" "+n(F)+" m")},P=function(k){var F;switch(k.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var V,M,L,q=this.pdf.getTextDimensions(k.text),R=T.call(this,k.y),K=C.call(this,R)-q.h,Z=this.ctx.transform.applyToPoint(new i(k.x,R));if(this.autoPaging){var te=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(te.translate)).multiply(te.skew)).multiply(te.scale);for(var ye=this.ctx.transform.applyToRectangle(new o(k.x,R,q.w,q.h)),Y=Q.applyToRectangle(new o(k.x,K,q.w,q.h)),z=g.call(this,Y),le=[],je=0;je<z.length;je+=1)le.indexOf(z[je])===-1&&le.push(z[je]);b(le);for(var ue=le[0],Pe=le[le.length-1],Ye=ue;Ye<Pe+1;Ye++){this.pdf.setPage(Ye);var nt=Ye===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],ft=ct-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],At=Ct-this.margin[3],He=Ye===1?0:mt+(Ye-2)*ft;if(this.ctx.clip_path.length!==0){var it=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(V,this.posX+this.margin[3],-1*He+nt),I.call(this,"fill",!0),this.path=it}var we=y([JSON.parse(JSON.stringify(Y))],this.posX+this.margin[3],-He+nt+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),L=this.lineWidth,this.lineWidth=L*k.scale);var re=this.autoPaging!=="text";if(re||we.y+we.h<=ct){if(re||we.y>=nt&&we.x<=Ct){var ne=re?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Ct-we.x)[0],Ue=y([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-He+nt+this.ctx.prevPageLastElemOffset)[0],Ke=re&&(Ye>ue||Ye<Pe)&&p.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,ft,null).clip().discardPath()),this.pdf.text(ne,Ue.x,Ue.y,{angle:k.angle,align:F,renderingMode:k.renderingMode}),Ke&&this.pdf.restoreGraphicsState()}}else we.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-we.y);k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=L)}}else k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),L=this.lineWidth,this.lineWidth=L*k.scale),this.pdf.text(k.text,Z.x+this.posX,Z.y+this.posY,{angle:k.angle,align:F,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=L)},D=function(k,F,V,M){V=V||0,M=M||0,this.pdf.internal.out(r(k+V)+" "+n(F+M)+" l")},W=function(k,F,V){return this.pdf.lines(k,F,V,null,null)},Ae=function(k,F,V,M,L,q,R,K){this.pdf.internal.out([e(a(V+k)),e(s(M+F)),e(a(L+k)),e(s(q+F)),e(a(R+k)),e(s(K+F)),"c"].join(" "))},ee=function(k,F,V,M){for(var L=2*Math.PI,q=Math.PI/2;F>V;)F-=L;var R=Math.abs(V-F);R<L&&M&&(R=L-R);for(var K=[],Z=M?-1:1,te=F;R>1e-5;){var Q=te+Z*Math.min(R,q);K.push(ce.call(this,k,te,Q)),R-=Math.abs(Q-te),te=Q}return K},ce=function(k,F,V){var M=(V-F)/2,L=k*Math.cos(M),q=k*Math.sin(M),R=L,K=-q,Z=R*R+K*K,te=Z+R*L+K*q,Q=4/3*(Math.sqrt(2*Z*te)-te)/(R*q-K*L),ye=R-Q*K,Y=K+Q*R,z=ye,le=-Y,je=M+F,ue=Math.cos(je),Pe=Math.sin(je);return{x1:k*Math.cos(F),y1:k*Math.sin(F),x2:ye*ue-Y*Pe,y2:ye*Pe+Y*ue,x3:z*ue-le*Pe,y3:z*Pe+le*ue,x4:k*Math.cos(V),y4:k*Math.sin(V)}},de=function(k){return 180*k/Math.PI},X=function(k,F,V,M,L,q){var R=k+.5*(V-k),K=F+.5*(M-F),Z=L+.5*(V-L),te=q+.5*(M-q),Q=Math.min(k,L,R,Z),ye=Math.max(k,L,R,Z),Y=Math.min(F,q,K,te),z=Math.max(F,q,K,te);return new o(Q,Y,ye-Q,z-Y)},pe=function(k,F,V,M,L,q,R,K){var Z,te,Q,ye,Y,z,le,je,ue,Pe,Ye,nt,mt,ct,ft=V-k,Ct=M-F,At=L-V,He=q-M,it=R-L,we=K-q;for(te=0;te<41;te++)ue=(le=(Q=k+(Z=te/40)*ft)+Z*((Y=V+Z*At)-Q))+Z*(Y+Z*(L+Z*it-Y)-le),Pe=(je=(ye=F+Z*Ct)+Z*((z=M+Z*He)-ye))+Z*(z+Z*(q+Z*we-z)-je),te==0?(Ye=ue,nt=Pe,mt=ue,ct=Pe):(Ye=Math.min(Ye,ue),nt=Math.min(nt,Pe),mt=Math.max(mt,ue),ct=Math.max(ct,Pe));return new o(Math.round(Ye),Math.round(nt),Math.round(mt-Ye),Math.round(ct-nt))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,F,V=(k=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:F}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(gr.API),function(t){var e=function(i){var o,c,u,d,A,h,f,m,p,g;for(c=[],u=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(A=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(A=((A=((A=((A=(A-(g=A%85))/85)-(p=A%85))/85)-(m=A%85))/85)-(f=A%85))/85)%85,c.push(h+33,f+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var o,c,u,d,A,h=String,f="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,A=(i+=o="uuuuu"[g](i[f]%5||5))[f];A>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,o[f]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var o=new Uint8Array(i.length),c=i.length;c--;)o[c]=i.charCodeAt(c);return(o=Bj(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,o){var c=0,u=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(gr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var A=new XMLHttpRequest,h=0,f=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(A.open("GET",c,!u),A.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(A.onload=function(){A.status===200?d(f(this.responseText)):d(void 0)}),A.send(null),u&&A.status===200)return f(A.responseText)}(a,s,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(gr.API),function(t){function e(){return(Vr.html2canvas?Promise.resolve(Vr.html2canvas):nf(()=>Promise.resolve().then(()=>x6),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Vr.DOMPurify?Promise.resolve(Vr.DOMPurify):nf(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=ea(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var u=document.createElement(o);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function o(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),A=c.firstChild;A;A=A.nextSibling)u!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||d.appendChild(o(A,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function o(c){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,c){return o.__proto__=c||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var m=d[f],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},i.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(o,c){return this.then(function(){var u=o in i.template.prop?this.prop[o]:this.opt[o];return c?c(u):u})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,c,u,d){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,c,u,d){return this.setProgress(o?this.progress.val+o:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,c){var u=this;return this.thenCore(o,c,function(d,A){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,A).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(o,c,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),c&&(c=c.bind(d));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(A,o,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},i.prototype.thenList=function(o){var c=this;return o.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return i.convert(c,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,gr.getPageSize=function(o,c,u){if(ea(o)==="object"){var d=o;o=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var A,h=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(f.hasOwnProperty(h))p=f[h][1]/A,g=f[h][0]/A;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",g>p&&(m=g,g=p,p=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:A,orientation:o}},t.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(pB):null;var u=new i(c);return c.worker?u:u.from(o).doCallback()}}(gr.API),gr.API.addJS=function(t){return uQ=t,this.internal.events.subscribe("postPutResources",function(){GN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(GN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+uQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){GN!==void 0&&cQ!==void 0&&this.internal.out("/Names <</JavaScript "+GN+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var A=r.internal.newObject();d.push(A);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(gr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(A){for(var h,f=256*A.charCodeAt(4)+A.charCodeAt(5),m=A.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=f,e.indexOf(A.charCodeAt(g+1))!==-1){h=256*A.charCodeAt(g+5)+A.charCodeAt(g+6),p={width:256*A.charCodeAt(g+7)+A.charCodeAt(g+8),height:h,numcomponents:A.charCodeAt(g+9)};break}f=256*A.charCodeAt(g+2)+A.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(gr.API),gr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=vEe(t,{checkCrc:!0}),i=s.width,o=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(E){for(var S=E.width,O=E.height,B=E.data,P=E.palette,D=E.depth,W=!1,Ae=[],ee=[],ce=void 0,de=!1,X=0,pe=0;pe<P.length;pe++){var Se=h9(P[pe],4),k=Se[0],F=Se[1],V=Se[2],M=Se[3];Ae.push(k,F,V),M!=null&&(M===0?(X++,ee.length<1&&ee.push(pe)):M<255&&(de=!0))}if(de||X>1){W=!0,ee=void 0;var L=S*O;ce=new Uint8Array(L);for(var q=new DataView(B.buffer),R=0;R<L;R++){var K=xB(q,R,D),Z=h9(P[K],4)[3];ce[R]=Z}}else X===0&&(ee=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:B,alphaBytes:ce,needSMask:W,palette:Ae,mask:ee}}(s):c===2||c===4?function(E){for(var S=E.data,O=E.width,B=E.height,P=E.channels,D=E.depth,W=P===2?"DeviceGray":"DeviceRGB",Ae=P-1,ee=O*B,ce=Ae,de=ee*ce,X=1*ee,pe=Math.ceil(de*D/8),Se=Math.ceil(X*D/8),k=new Uint8Array(pe),F=new Uint8Array(Se),V=new DataView(S.buffer),M=new DataView(k.buffer),L=new DataView(F.buffer),q=!1,R=0;R<ee;R++){for(var K=R*P,Z=0;Z<ce;Z++)vQ(M,xB(V,K+Z,D),R*ce+Z,D);var te=xB(V,K+ce,D);te<(1<<D)-1&&(q=!0),vQ(L,te,1*R,D)}return{colorSpace:W,colorsPerPixel:Ae,sMaskBitsPerComponent:q?D:void 0,colorBytes:k,alphaBytes:F,needSMask:q}}(s):function(E){var S=E.data,O=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?function(B){for(var P=B.length,D=new Uint8Array(2*P),W=new DataView(D.buffer,D.byteOffset,D.byteLength),Ae=0;Ae<P;Ae++)W.setUint16(2*Ae,B[Ae],!1);return D}(S):S,needSMask:!1}}(s);var A,h,f,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,I=m.palette,T=m.mask,C=null;return n!==gr.API.image_compression.NONE&&typeof Bj=="function"?(C=function(E){var S;switch(E){case gr.API.image_compression.FAST:S=11;break;case gr.API.image_compression.MEDIUM:S=13;break;case gr.API.image_compression.SLOW:S=14;break;default:S=12}return S}(n),A=this.decode.FLATE_DECODE,h="/Predictor ".concat(C," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=hQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(f=hQ(b,Math.ceil(i*x/8),1,x,n))):(A=void 0,h=void 0,t=y,w&&(f=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:A,decodeParameters:h,transparency:T,palette:I,sMask:f,predictor:C,width:i,height:o,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new QEe(e),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new vB(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(gr.API),Qu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){pa.log("bit decode error:"+r)}},Qu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Qu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Qu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Qu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},Qu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Qu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Qu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Qu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Qu(e,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new vB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(gr.API),bQ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new bQ(e),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new vB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(gr.API),gr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],A=n[u+1],h=n[u+2],f=n[u+3];s[o++]=d,s[o++]=A,s[o++]=h,i[c++]=f}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ng=gr.API,zN=Ng.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,A=e.doKerning!==!1,h=0,f=t.length,m=0,p=o[0]||c,g=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=A&&ea(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((o[n]||p)/c+h)),m=n;return g},dQ=Ng.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Ng.processArabic&&(t=Ng.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:zN.apply(this,arguments).reduce(function(s,i){return s+i},0)},AQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<r;)o+=e[s],s++;a.push(t.slice(0,s));var c=s;for(o=0;s!==i;)o+e[s]>n&&(a.push(t.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},fQ=function(t,e,r){r||(r={});var n,a,s,i,o,c,u,d=[],A=[d],h=r.textIndent||0,f=0,m=0,p=t.split(" "),g=zN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(I,T){return(T&&I.length?`
`:"")+I})):y.push(w[0])}),p=y,c=dQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+f+(m=(a=zN.apply(this,[n,r])).reduce(function(w,I){return w+I},0))>e||b){if(m>e){for(o=AQ.apply(this,[n,a,e-(h+f),e]),d.push(o.shift()),d=[o.pop()];o.length;)A.push([o.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,I){return w+I},0)}else d=[n];A.push(d),h=m+c,f=g}else d.push(n),h+=f+m,f=g}return u=c?function(w,I){return(I?x:"")+w.join(" ")}:function(w){return w.join(" ")},A.map(u)},Ng.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var A=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return A.metadata[h]?{widths:A.metadata[h].widths||{0:1},kerning:A.metadata[h].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(fQ.apply(this,[n[o],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,m,p,g,x=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof f=="number")f<0?(p=i(f).slice(3),g="-"):(p=i(f).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(ea(f)!=="object")throw new Error("Don't know what to do with value type "+ea(f)+".");p=o(f)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,p,g,x={},y=1,b=x,w=[],I="",T="",C=h.length-1,E=1;E<C;E+=1)(g=h[E])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(I+=n[g],p=parseInt(I,16)*y,y=1,I=""):I+=g:n.hasOwnProperty(g)?(T+=n[g],b[p]=parseInt(T,16)*y,y=1,p=void 0,T=""):T+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},A={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,m=A.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(gr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(wC(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(gr),gr.API.addSvgAsImage=function(t,e,r,n,a,s,i,o){if(isNaN(e)||isNaN(r))throw pa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw pa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(Vr.canvg?Promise.resolve(Vr.canvg):nf(()=>import("./index.es-BSXLzXr-.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,o)})},gr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},gr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,A=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(A=0;A<f;A+=1)r[o[A]].value=r[o[A]].defaultValue,r[o[A]].explicitSet=!1}if(ea(t)==="object"){for(a in t)if(s=t[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(gr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],A=0,h=s.length;A<h;++A){if(o=i.metadata.characterToGlyph(s.charCodeAt(A)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(A),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,A,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],A=0,h=(o=Object.keys(s).sort(function(f,m){return f-m})).length;A<h;A++)i=o[A],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var A=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var p=u();d({data:f,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Gg(o.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Gg(o.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(A)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Gg(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var A=o.metadata.rawData,h="",f=0;f<A.length;f++)h+=String.fromCharCode(A[f]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Gg(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Gg(o.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},A=s.mutex||{},h=A.pdfEscape,f=A.activeFontKey,m=A.fonts,p=f,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:A};for(y=o,p=f,Array.isArray(o)&&(y=o[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),A.isHex=!0,{text:w,x:c,y:u,options:d,mutex:A}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(gr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(gr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,A=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(B){var P=B.charCodeAt(),D=P>>8,W=p[D];return W!==void 0?A[256*W+(255&P)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},I=function(B){for(var P,D=0;D<B.length;D++){if((P=w(B.charAt(D)))==="L")return!1;if(P==="R")return!0}return!1},T=function(B,P,D,W){var Ae,ee,ce,de,X=P[W];switch(X){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(X="AN");break;case"AL":y=!0,X="R";break;case"WS":case"BN":X="N";break;case"CS":W<1||W+1>=P.length||(Ae=D[W-1])!=="EN"&&Ae!=="AN"||(ee=P[W+1])!=="EN"&&ee!=="AN"?X="N":y&&(ee="AN"),X=ee===Ae?ee:"N";break;case"ES":X=(Ae=W>0?D[W-1]:"B")==="EN"&&W+1<P.length&&P[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&D[W-1]==="EN"){X="EN";break}if(y){X="N";break}for(ce=W+1,de=P.length;ce<de&&P[ce]==="ET";)ce++;X=ce<de&&P[ce]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(de=P.length,ce=W+1;ce<de&&P[ce]==="NSM";)ce++;if(ce<de){var pe=B[W],Se=pe>=1425&&pe<=2303||pe===64286;if(Ae=P[ce],Se&&(Ae==="R"||Ae==="AL")){X="R";break}}}X=W<1||(Ae=P[W-1])==="B"?"N":D[W-1];break;case"B":y=!1,a=!0,X=b;break;case"S":s=!0,X="N"}return X},C=function(B,P,D){var W=B.split("");return D&&E(W,D,{hiLevel:b}),W.reverse(),P&&P.reverse(),W.join("")},E=function(B,P,D){var W,Ae,ee,ce,de,X=-1,pe=B.length,Se=0,k=[],F=b?f:h,V=[];for(y=!1,a=!1,s=!1,Ae=0;Ae<pe;Ae++)V[Ae]=w(B[Ae]);for(ee=0;ee<pe;ee++){if(de=Se,k[ee]=T(B,V,k,ee),W=240&(Se=F[de][m[k[ee]]]),Se&=15,P[ee]=ce=F[Se][5],W>0)if(W===16){for(Ae=X;Ae<ee;Ae++)P[Ae]=1;X=-1}else X=-1;if(F[Se][6])X===-1&&(X=ee);else if(X>-1){for(Ae=X;Ae<ee;Ae++)P[Ae]=ce;X=-1}V[ee]==="B"&&(P[ee]=0),D.hiLevel|=ce}s&&function(M,L,q){for(var R=0;R<q;R++)if(M[R]==="S"){L[R]=b;for(var K=R-1;K>=0&&M[K]==="WS";K--)L[K]=b}}(V,P,pe)},S=function(B,P,D,W,Ae){if(!(Ae.hiLevel<B)){if(B===1&&b===1&&!a)return P.reverse(),void(D&&D.reverse());for(var ee,ce,de,X,pe=P.length,Se=0;Se<pe;){if(W[Se]>=B){for(de=Se+1;de<pe&&W[de]>=B;)de++;for(X=Se,ce=de-1;X<ce;X++,ce--)ee=P[X],P[X]=P[ce],P[ce]=ee,D&&(ee=D[X],D[X]=D[ce],D[ce]=ee);Se=de}Se++}}},O=function(B,P,D){var W=B.split(""),Ae={hiLevel:b};return D||(D=[]),E(W,D,Ae),function(ee,ce,de){if(de.hiLevel!==0&&d)for(var X,pe=0;pe<ee.length;pe++)ce[pe]===1&&(X=g.indexOf(ee[pe]))>=0&&(ee[pe]=g[X+1])}(W,D,Ae),S(2,W,P,D,Ae),S(1,W,P,D,Ae),W.join("")};return this.__bidiEngine__.doBidiReorder=function(B,P,D){if(function(Ae,ee){if(ee)for(var ce=0;ce<Ae.length;ce++)ee[ce]=ce;o===void 0&&(o=I(Ae)),u===void 0&&(u=I(Ae))}(B,P),i||!c||u)if(i&&c&&o^u)b=o?1:0,B=C(B,P,D);else if(!i&&c&&u)b=o?1:0,B=O(B,P,D),B=C(B,P);else if(!i||o||c||u){if(i&&!c&&o^u)B=C(B,P),o?(b=0,B=O(B,P,D)):(b=1,B=O(B,P,D),B=C(B,P));else if(i&&o&&!c&&u)b=1,B=O(B,P,D),B=C(B,P);else if(!i&&!c&&o^u){var W=d;o?(b=1,B=O(B,P,D),b=0,d=!1,B=O(B,P,D),d=W):(b=0,B=O(B,P,D),B=C(B,P),b=1,d=!1,B=O(B,P,D),d=W,B=C(B,P))}}else b=0,B=O(B,P,D);else b=o?1:0,B=O(B,P,D);return B},this.__bidiEngine__.setOptions=function(B){B&&(i=B.isInputVisual,c=B.isOutputVisual,o=B.isInputRtl,u=B.isOutputRtl,d=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new w0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new rSe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new VEe(this.contents),this.head=new $Ee(this),this.name=new WEe(this),this.cmap=new Uee(this),this.toUnicode={},this.hhea=new KEe(this),this.maxp=new XEe(this),this.hmtx=new YEe(this),this.post=new zEe(this),this.os2=new GEe(this),this.loca=new tSe(this),this.glyf=new JEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Nd,w0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,o,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),VEe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,o,c,u,d,A,h,f,m,p;for(p in f=Object.keys(r).length,c=Math.log(2),A=16*Math.floor(Math.log(f)/c),i=Math.floor(A/c),d=16*f-A,(a=new w0).writeInt(this.scalarType),a.writeShort(f),a.writeShort(A),a.writeShort(i),a.writeShort(d),s=16*f,u=a.pos+s,o=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(o=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=Qee.call(r);r.length%4;)r.push(0);for(s=new w0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),HEe={}.hasOwnProperty,AA=function(t,e){for(var r in e)HEe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nd=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var $Ee=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new w0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),wQ=function(){function t(e,r){var n,a,s,i,o,c,u,d,A,h,f,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),A=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),e.pos+=2,p=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),u=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),d=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),a=(this.length-e.pos+this.offset)/2,o=function(){var w,I;for(I=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)I.push(e.readUInt16());return I}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=A}return t.encode=function(e,r){var n,a,s,i,o,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S,O,B,P,D,W,Ae,ee,ce,de,X,pe,Se,k,F,V,M,L,q,R,K,Z,te,Q;switch(W=new w0,i=Object.keys(e).sort(function(ye,Y){return ye-Y}),r){case"macroman":for(p=0,g=function(){var ye=[];for(m=0;m<256;++m)ye.push(0);return ye}(),y={0:0},s={},Ae=0,X=i.length;Ae<X;Ae++)y[K=e[a=i[Ae]]]==null&&(y[K]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(g),{charMap:s,subtable:W.data,maxGlyphID:p+1};case"unicode":for(P=[],A=[],b=0,y={},n={},x=u=null,ee=0,pe=i.length;ee<pe;ee++)y[I=e[a=i[ee]]]==null&&(y[I]=++b),n[a]={old:I,new:y[I]},o=y[I]-a,x!=null&&o===u||(x&&A.push(x),P.push(a),u=o),x=a;for(x&&A.push(x),A.push(65535),P.push(65535),O=2*(S=P.length),E=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,C=2*S-E,c=[],T=[],f=[],m=ce=0,Se=P.length;ce<Se;m=++ce){if(B=P[m],d=A[m],B===65535){c.push(0),T.push(0);break}if(B-(D=n[B].new)>=32768)for(c.push(0),T.push(2*(f.length+S-m)),a=de=B;B<=d?de<=d:de>=d;a=B<=d?++de:--de)f.push(n[a].new);else c.push(D-B),T.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*S+2*f.length),W.writeUInt16(0),W.writeUInt16(O),W.writeUInt16(E),W.writeUInt16(h),W.writeUInt16(C),q=0,k=A.length;q<k;q++)a=A[q],W.writeUInt16(a);for(W.writeUInt16(0),R=0,F=P.length;R<F;R++)a=P[R],W.writeUInt16(a);for(Z=0,V=c.length;Z<V;Z++)o=c[Z],W.writeUInt16(o);for(te=0,M=T.length;te<M;te++)w=T[te],W.writeUInt16(w);for(Q=0,L=f.length;Q<L;Q++)p=f[Q],W.writeUInt16(p);return{charMap:n,subtable:W.data,maxGlyphID:b+1}}},t}(),Uee=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new wQ(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=wQ.encode(e,r),(a=new w0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),KEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),GEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),zEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,o,c;for(c=[],s=i=0,o=this.file.maxp.numGlyphs;0<=o?i<o:i>o;s=0<=o?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),qEe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},WEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,o,c,u,d,A,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(c={},s=d=0,A=n.length;d<A;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new qEe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),XEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),YEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,o,c;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,A,h;for(h=[],u=0,d=(A=this.metrics).length;u<d;u++)s=A[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Qee=[].slice,JEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,o,c,u,d,A;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(o=new w0(r.read(a))).readShort(),u=o.readShort(),A=o.readShort(),c=o.readShort(),d=o.readShort(),this.cache[e]=i===-1?new eSe(o,u,A,c,d):new ZEe(o,i,u,A,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,o,c;for(i=[],s=[],o=0,c=r.length;o<c;o++)a=e[r[o]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),ZEe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),eSe=function(){function t(e,r,n,a,s){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new w0(Qee.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),tSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return AA(t,Nd),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var o=this.offsets[i],c=this.offsets[i+1]-o;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),rSe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,o,c;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,o,c,u,d,A,h,f,m,p,g,x;for(a in n=Uee.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},x=n.charMap)f[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in f||(f[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(f),A=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=A.length;y<b;y++)o=A[y],w.push(d[o]);return w}(),s=this.font.glyf.encode(i,p,f),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();gr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const Rj=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:kEe,AcroFormAppearance:br,AcroFormButton:hi,AcroFormCheckBox:$y,AcroFormChoiceField:Vm,AcroFormComboBox:$m,AcroFormEditBox:Vy,AcroFormListBox:Hm,AcroFormPasswordField:Ky,AcroFormPushButton:Hy,AcroFormRadioButton:Km,AcroFormTextField:l0,GState:V2,ShadingPattern:Dh,TilingPattern:Pm,default:gr,jsPDF:gr},Symbol.toStringTag,{value:"Module"}));async function NQ(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Xt.now()};return on(ht(Fe,"inventory_batches"),e)}async function Vee(t,e){await Hr(Ht(Fe,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Xt.now()})}async function nSe(t,e){const r=Kt(ht(Fe,"batch_allocations"),Zt("saleDate",">=",t),Zt("saleDate","<=",e)),n=await jt(r),a={};return n.forEach(s=>{const i=s.data(),o=i.batchId;a[o]||(a[o]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[o].quantity+=Number(i.quantity||0),a[o].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function aSe(t){const e=Ht(Fe,"salesV2",t),r=await So(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const o of n.items)if(Array.isArray(o==null?void 0:o.allocations))for(const c of o.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const o of n.allocations){const c=String((o==null?void 0:o.batchId)||"").trim(),u=Number((o==null?void 0:o.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Ni(Fe,async o=>{o.delete(e)}),{restored:0};const s=new Map;for(const o of a)s.set(o.batchId,Number((s.get(o.batchId)||0)+o.qty));let i=0;return await Ni(Fe,async o=>{const c=Array.from(s.entries()),u=c.map(([A])=>Ht(Fe,"inventory_batches",A)),d=await Promise.all(u.map(A=>o.get(A)));c.forEach(([A,h],f)=>{const m=d[f];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));o.update(u[f],{remaining:x}),i+=Number(h||0)}),o.delete(e)}),{restored:i}}function Yl(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const tu=t=>Math.round((Number(t)||0)*100)/100,qN=t=>Math.round((Number(t)||0)*1e3)/1e3,T1=t=>Number(t??0).toFixed(2),yB=t=>Number(t??0).toFixed(3),_Q=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?dr(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((a,s)=>{const i=Number((a==null?void 0:a.qty)??0),o=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*i-Number((a==null?void 0:a.discount)||0));return{id:`${e}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:i,amount:tu(o),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:t.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function sSe({role:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(null),[o,c]=v.useState(!0),[u,d]=v.useState(""),[A,h]=v.useState("ALL"),[f,m]=v.useState(null),[p,g]=v.useState(0),[x,y]=v.useState(0),[b,w]=v.useState(""),[I,T]=v.useState(0),[C,E]=v.useState("0"),S=dr(new Date,"yyyy-MM-dd"),O=v.useRef(null),{refreshKey:B}=Yl();v.useEffect(()=>{const L=Kt(ht(Fe,"salesV2"),Zt("date","==",S)),q=y0(L,R=>{const K=[];R.forEach(Z=>{const te=_Q(Z.data(),Z.id);K.push(...te)}),r(K),c(!1)});return()=>q()},[S,B]),v.useEffect(()=>{const L=Kt(ht(Fe,"salesV2"),Zt("status","==","FLOTANTE")),q=y0(L,R=>{const K=[];R.forEach(Z=>{const te=_Q(Z.data(),Z.id);K.push(...te)}),a(K)});return()=>q()},[B]),v.useEffect(()=>{(async()=>{const q=Kt(ht(Fe,"daily_closures"),Zt("date","==",S)),R=await jt(q);if(R.empty)i(null);else{const K=R.docs[0];i({id:K.id,...K.data()})}})()},[S,B]);const P=xo.useMemo(()=>{if(A==="FLOTANTE"){const L=[...e,...n],q=new Map;for(const R of L)R.status==="FLOTANTE"&&q.set(R.id,R);return Array.from(q.values())}if(A==="ALL"){const L=[...e,...n],q=new Map;for(const R of L)q.set(R.id,R);return Array.from(q.values())}return e.filter(L=>L.status==="PROCESADA")},[A,e,n]);tu(P.reduce((L,q)=>L+(q.amountSuggested||0),0));const D=tu(P.reduce((L,q)=>L+(q.amount||0),0)),W=qN(P.reduce((L,q)=>L+(q.quantity||0),0)),Ae=tu(P.reduce((L,q)=>L+Number(q.cogsAmount??0),0)),ee=tu(D-Ae),ce={};P.forEach(L=>{const q=L.productName||"(sin nombre)";ce[q]||(ce[q]={totalQuantity:0,totalAmount:0}),ce[q].totalQuantity=qN(ce[q].totalQuantity+(L.quantity||0)),ce[q].totalAmount=tu(ce[q].totalAmount+(L.amount||0))});const de=Object.entries(ce).map(([L,q])=>({productName:L,totalQuantity:q.totalQuantity,totalAmount:q.totalAmount})),X=async()=>{try{const L=P.filter(ye=>ye.status==="FLOTANTE"),q=L.length>0?L:e.filter(ye=>ye.status!=="PROCESADA");if(q.length===0){d("No hay ventas para procesar.");return}const R={totalCharged:tu(q.reduce((ye,Y)=>ye+(Y.amount||0),0)),totalSuggested:tu(q.reduce((ye,Y)=>ye+(Y.amountSuggested||0),0)),totalUnits:qN(q.reduce((ye,Y)=>ye+(Y.quantity||0),0)),totalCOGS:tu(q.reduce((ye,Y)=>ye+Number(Y.cogsAmount??0),0))},K=tu(R.totalCharged-R.totalSuggested),Z=tu(R.totalCharged-R.totalCOGS),te=await on(ht(Fe,"daily_closures"),{date:S,createdAt:Xt.now(),totalCharged:R.totalCharged,totalSuggested:R.totalSuggested,totalDifference:K,totalUnits:R.totalUnits,totalCOGS:R.totalCOGS,grossProfit:Z,products:q.map(ye=>({productName:ye.productName,quantity:ye.quantity,amount:ye.amount})),salesV2:q.map(ye=>({id:ye.id,productName:ye.productName,quantity:ye.quantity,amount:ye.amount,amountSuggested:ye.amountSuggested,userEmail:ye.userEmail,clientName:ye.clientName,amountReceived:ye.amountReceived,change:ye.change,status:ye.status,cogsAmount:ye.cogsAmount??0,avgUnitCost:ye.avgUnitCost??null,allocations:ye.allocations??[],date:ye.date})),productSummary:Object.entries(q.reduce((ye,Y)=>{const z=Y.productName||"(sin nombre)";return ye[z]||(ye[z]={totalQuantity:0,totalAmount:0}),ye[z].totalQuantity=qN(ye[z].totalQuantity+(Y.quantity||0)),ye[z].totalAmount=tu(ye[z].totalAmount+(Y.amount||0)),ye},{})).map(([ye,Y])=>({productName:ye,totalQuantity:Y.totalQuantity,totalAmount:Y.totalAmount}))}),Q=M0(Fe);q.forEach(ye=>{Q.update(Ht(Fe,"salesV2",ye.id.split("#")[0]),{status:"PROCESADA",closureId:te.id,closureDate:S})}),await Q.commit(),d(` Cierre guardado. Ventas procesadas: ${q.length}.`)}catch(L){console.error(L),d(" Error al guardar el cierre.")}},pe=async L=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Hr(Ht(Fe,"salesV2",L.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(q){console.error(q),d(" No se pudo revertir la venta.")}},Se=L=>{m(L),g(L.quantity),y(L.amount),w(L.clientName),T(L.amountReceived),E(L.change)},k=async()=>{if(f)try{await Hr(Ht(Fe,"salesV2",f.id.split("#")[0]),{quantity:p,amount:x,amountCharged:x,clientName:b,amountReceived:I,change:C}),m(null),d(" Venta actualizada.")}catch(L){console.error(L),d(" No se pudo actualizar la venta.")}},F=async L=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:q}=await aSe(L.split("#")[0]);d(` Venta eliminada. Stock restaurado: ${Number(q).toFixed(2)}.`)}catch(q){console.error(q),d(" No se pudo eliminar la venta.")}},V=async()=>{if(O.current){O.current.classList.add("force-pdf-colors");try{const q=(await L0(O.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),R=new gr;R.addImage(q,"PNG",10,10,190,0),R.save(`cierre_${S}.pdf`)}finally{O.current.classList.remove("force-pdf-colors")}}},M=!t||t==="admin";return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",S]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:L=>h(L.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:O,children:[l.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[P.map(L=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${L.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:L.status})}),l.jsx("td",{className:"border p-1",children:L.productName}),l.jsx("td",{className:"border p-1",children:yB(L.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",T1(L.amount)]}),l.jsx("td",{className:"border p-1",children:L.date}),l.jsx("td",{className:"border p-1",children:L.userEmail}),l.jsx("td",{className:"border p-1",children:L.status==="FLOTANTE"?l.jsxs("div",{className:"flex gap-2 justify-center",children:[M&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Se(L),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>F(L.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!M&&l.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):L.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:M?l.jsx("button",{onClick:()=>pe(L.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},L.id)),P.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[l.jsxs("div",{children:[" ","Total Libras/Unidades: ",l.jsx("strong",{children:yB(W)})]}),l.jsxs("div",{children:[" ","Total cobrado: ",l.jsxs("strong",{children:["C$",T1(D)]})]})]}),(Ae>0||ee!==D)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",l.jsxs("strong",{children:["C$",T1(Ae)]})]}),l.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",T1(ee)]})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsxs("tbody",{children:[de.map(L=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:L.productName}),l.jsx("td",{className:"border p-1",children:yB(L.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",T1(L.totalAmount)]})]},L.productName)),de.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:X,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),l.jsx("button",{onClick:V,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&l.jsx("p",{className:"mt-2 text-sm",children:u}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[f.productName,"  ",f.userEmail]}),l.jsx("label",{className:"text-sm",children:"Cantidad"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:p,onChange:L=>g(parseFloat(L.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:x,onChange:L=>y(parseFloat(L.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:L=>w(L.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:L=>T(parseFloat(L.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:C,onChange:L=>E(L.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>m(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:k,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Xc=t=>Number(t??0).toFixed(2),_g=t=>Number(t??0).toFixed(3);function iSe(){var y,b,w,I;const t=async T=>{if(!window.confirm(`Eliminar el cierre del ${T.date}?`))return;const C=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(C){const E=await jt(Kt(ht(Fe,"salesV2"),Zt("closureId","==",T.id)));if(!E.empty){const S=M0(Fe);E.forEach(O=>{S.update(Ht(Fe,"salesV2",O.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await S.commit()}}await _n(Ht(Fe,"daily_closures",T.id)),(u==null?void 0:u.id)===T.id&&d(null),await m(),h(` Cierre eliminado${C?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(dr(zJ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(dr(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[o,c]=v.useState([]),[u,d]=v.useState(null),[A,h]=v.useState(""),f=v.useRef(null),m=async()=>{try{i(!0);const T=Kt(ht(Fe,"daily_closures"),Zt("date",">=",e),Zt("date","<=",n)),C=await jt(T),E=[];C.forEach(S=>E.push({id:S.id,...S.data()})),E.sort((S,O)=>S.date<O.date?1:S.date>O.date?-1:0),c(E)}catch(T){console.error(T),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async T=>{T.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const T=Number(u.totalUnits??0),C=Number(u.totalSuggested??0),E=Number(u.totalCharged??0),S=Number(u.totalDifference??(isFinite(E-C)?E-C:0)),O=Number(u.totalCOGS??0),B=Number(u.grossProfit??(isFinite(E-O)?E-O:0));return{units:T,sug:C,chg:E,diff:S,cogs:O,profit:B}},[u]),x=async()=>{if(!f.current||!u)return;const T=f.current;T.classList.add("force-pdf-colors");try{const[{default:C},{jsPDF:E}]=await Promise.all([nf(()=>Promise.resolve().then(()=>x6),void 0),nf(()=>Promise.resolve().then(()=>Rj),void 0)]),O=(await C(T,{backgroundColor:"#ffffff",onclone:D=>{const W=D.defaultView;D.body.querySelectorAll("*").forEach(ee=>{const ce=W.getComputedStyle(ee);ce.color&&(ee.style.color=ce.color),ce.backgroundColor&&ce.backgroundColor!=="rgba(0, 0, 0, 0)"&&(ee.style.backgroundColor=ce.backgroundColor),ce.borderColor&&(ee.style.borderColor=ce.borderColor)})}})).toDataURL("image/png"),{jsPDF:B}=await nf(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>Rj);return{jsPDF:D}},void 0),P=new B;P.addImage(O,"PNG",10,10,190,0),P.save(`cierre_${u.date}.pdf`)}finally{T.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),l.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:T=>r(T.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:T=>a(T.target.value)})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?l.jsx("p",{children:"Cargando..."}):o.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Monto de venta"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsx("tbody",{children:o.map(T=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:T.date}),l.jsx("td",{className:"border p-1",children:_g(T.totalUnits)}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.totalCharged)]}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.totalCOGS)]}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.grossProfit??Number(T.totalCharged??0)-Number(T.totalCOGS??0))]}),l.jsx("td",{className:"border p-1",children:l.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(T),children:"Ver detalle"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(T),children:"Eliminar"})]})})]},T.id))})]}),u&&l.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),l.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:f,className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:l.jsxs("div",{children:["Total Libras/Unidades: ",l.jsx("strong",{children:_g(g.units)})]})}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{children:["Monto al costo:"," ",l.jsxs("strong",{children:["C$",Xc(g.cogs)]})]}),l.jsxs("div",{children:["Ganancia sin gastos:"," ",l.jsxs("strong",{children:["C$",Xc(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto de ventas"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),l.jsx("tbody",{children:u.salesV2.map((T,C)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:T.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:_g(T.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.amount)]}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.cogsAmount)]}),l.jsx("td",{className:"border p-1",children:T.date??""}),l.jsx("td",{className:"border p-1",children:T.userEmail??""})]},C))})]})]}):(b=u.sales)!=null&&b.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Paga con"}),l.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),l.jsx("tbody",{children:u.sales.map((T,C)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:T.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:_g(T.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.amount)]}),l.jsx("td",{className:"border p-1",children:T.userEmail??""}),l.jsx("td",{className:"border p-1",children:T.clientName??""}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.amountReceived)]}),l.jsx("td",{className:"border p-1",children:typeof T.change=="number"?Xc(T.change):T.change??"0"})]},C))})]})]}):(w=u.products)!=null&&w.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"})]})}),l.jsx("tbody",{children:u.products.map((T,C)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:T.productName}),l.jsx("td",{className:"border p-1",children:_g(T.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.amount)]})]},C))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(I=u.productSummary)!=null&&I.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsx("tbody",{children:u.productSummary.map((T,C)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:T.productName}),l.jsx("td",{className:"border p-1",children:_g(T.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Xc(T.totalAmount)]})]},C))})]})]}):null]})]}),A&&l.jsx("p",{className:"mt-3 text-sm",children:A})]})}function oSe(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,o]=v.useState(!1),[c,u]=v.useState("vendedor_pollo"),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,I]=v.useState("vendedor_pollo"),[T,C]=v.useState(""),[E,S]=v.useState(!1),[O,B]=v.useState([]),P=F=>!F||F==="vendedor"?"vendedor_pollo":F==="admin"||F==="vendedor_pollo"||F==="vendedor_ropa"||F==="vendedor_dulces"?F:"vendedor_pollo",D=async()=>{x(!0);const F=await jt(ht(Fe,"users")),V=[];F.forEach(M=>{const L=M.data();V.push({id:M.id,email:L.email??"",name:L.name??"",role:P(L.role),sellerCandyId:L.sellerCandyId??""})}),p(V),x(!1)},W=async()=>{try{const F=await jt(ht(Fe,"sellers_candies")),V=[];F.forEach(M=>{const L=M.data();V.push({id:M.id,name:L.name??"(sin nombre)",branchLabel:L.branch??"",commissionPercent:Number(L.commissionPercent??0)})}),B(V)}catch(F){console.error("Error cargando sellers_candies:",F)}};v.useEffect(()=>{D(),W()},[]);const Ae=()=>{e(""),n(""),s(""),u("vendedor_pollo"),f("")},ee=async F=>{if(F.preventDefault(),A(""),a.length<4){A(" La contrasea debe tener al menos 4 caracteres.");return}if(!t.trim()){A(" El nombre es obligatorio.");return}try{const V=fO(),M=AO(V.options,"Secondary"),L=UX(M),q=await X0e(L,r,a),R=P(c),K=R==="vendedor_dulces"&&h||"";await MJ(Ht(ht(Fe,"users"),q.user.uid),{email:r,name:t.trim(),role:R,sellerCandyId:K}),await yI(L),await Khe(M),p(Z=>[{id:q.user.uid,email:r,name:t.trim(),role:R,sellerCandyId:K},...Z]),A(" Usuario creado correctamente."),Ae(),S(!1)}catch(V){console.error(V),A(" Error al crear el usuario: "+V.message)}},ce=F=>{b(F.id),I(P(F.role)),C(F.sellerCandyId||"")},de=()=>{b(null),I("vendedor_pollo"),C("")},X=async()=>{if(!y)return;const F=Ht(Fe,"users",y),V=P(w),M=V==="vendedor_dulces"&&T||"";await Hr(F,{role:V,sellerCandyId:M}),p(L=>L.map(q=>q.id===y?{...q,role:V,sellerCandyId:M}:q)),de()},pe=async F=>{confirm("Eliminar este usuario del listado?")&&(await _n(Ht(Fe,"users",F)),p(M=>M.filter(L=>L.id!==F)))},Se=F=>{const V=F==="admin"?"admin":F==="vendedor_ropa"?"vendedor_ropa":F==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",M=V==="admin"?"bg-blue-100 text-blue-700":V==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":V==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M}`,children:V})},k=F=>`${F.name}  ${F.branchLabel||"Sin sucursal"}  ${F.commissionPercent.toFixed(2)}%`;return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),l.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>S(!0),type:"button",children:"Crear usuario"})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Email"}),l.jsx("th",{className:"p-2 border",children:"Rol"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:g?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(F=>{const V=y===F.id,M=(V?w:F.role)==="vendedor_dulces";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:F.name||""}),l.jsx("td",{className:"p-2 border",children:F.email}),l.jsx("td",{className:"p-2 border",children:V?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:L=>I(L.target.value),children:[l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),l.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),l.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]}),w==="vendedor_dulces"&&l.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:T,onChange:L=>C(L.target.value),children:[l.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),O.map(L=>l.jsx("option",{value:L.id,children:k(L)},L.id))]})]}):l.jsxs(l.Fragment,{children:[Se(F.role),M&&F.sellerCandyId&&l.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),l.jsx("td",{className:"p-2 border space-x-2",children:V?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:X,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:de,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ce(F),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>pe(F.id),children:"Eliminar"})]})})]},F.id)})})]})}),d&&l.jsx("p",{className:"text-sm mt-2",children:d}),E&&l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:F=>e(F.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:F=>n(F.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-1 relative",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),l.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:F=>s(F.target.value),required:!0}),l.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>o(F=>!F),children:i?"":""})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:F=>u(F.target.value),children:[l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),l.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),l.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]})]}),c==="vendedor_dulces"&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),l.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:F=>f(F.target.value),children:[l.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),O.map(F=>l.jsx("option",{value:F.id,children:k(F)},F.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),d&&l.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const lSe=t=>`C$${(Number(t)||0).toFixed(2)}`;function cSe(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(""),[i,o]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState([]),[h,f]=v.useState(!0),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(""),[T,C]=v.useState(""),[E,S]=v.useState(0),[O,B]=v.useState(!1),P=async()=>{f(!0);const pe=await jt(ht(Fe,"products")),Se=[];pe.forEach(k=>{const F=k.data();Se.push({id:k.id,name:F.name??"",price:Number(F.price??0),category:F.category??"",measurement:F.measurement??"",active:F.active!==!1})}),A(Se),f(!1)};v.useEffect(()=>{P()},[]);const D=async pe=>{if(pe.preventDefault(),s(""),!t||r<=0||!c){s(" Completa nombre, precio vlido y unidad de medida");return}try{const Se={name:t,price:parseFloat(r.toFixed(2)),category:i,measurement:c,active:!0},k=await on(ht(Fe,"products"),Se);A(F=>[{id:k.id,...Se},...F]),s(" Producto registrado con exito."),e(""),n(0),u(""),o(""),B(!1)}catch(Se){s(" Error: "+Se.message)}},W=pe=>{x(pe.id),b(pe.name),I(pe.category),C(pe.measurement),S(pe.price)},Ae=()=>{x(null),b(""),I(""),C(""),S(0)},ee=async()=>{if(!g)return;const pe=Ht(Fe,"products",g);await Hr(pe,{name:y,category:w,measurement:T,price:parseFloat((E||0).toFixed(2))}),A(Se=>Se.map(k=>k.id===g?{...k,name:y,category:w,measurement:T,price:parseFloat((E||0).toFixed(2))}:k)),Ae()},ce=async pe=>{const Se=Ht(Fe,"products",pe.id),k=pe.active===!1;await Hr(Se,{active:k}),A(F=>F.map(V=>V.id===pe.id?{...V,active:k}:V))},de=async pe=>{const Se=Kt(ht(Fe,"inventory_batches"),Zt("productId","==",pe),DJ(1));if(!(await jt(Se)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await _n(Ht(Fe,"products",pe)),A(V=>V.filter(M=>M.id!==pe)))},X=m?d:d.filter(pe=>pe.active!==!1);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{s(""),B(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),O&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>B(!1)}),l.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>B(!1),children:"Cerrar"})]}),l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),l.jsxs("select",{value:i,onChange:pe=>o(pe.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:pe=>e(pe.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),l.jsxs("select",{value:c,onChange:pe=>u(pe.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:pe=>n(parseFloat(pe.target.value)),onFocus:pe=>pe.target.value==="0"?n(NaN):null})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),a&&l.jsx("p",{className:"text-sm mt-2",children:a})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:pe=>p(pe.target.checked)}),"Mostrar inactivos"]})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Precio"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:h?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):X.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):X.map(pe=>{const Se=g===pe.id,k=pe.active!==!1;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Se?l.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:F=>b(F.target.value)}):pe.name}),l.jsx("td",{className:"p-2 border",children:Se?l.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:F=>I(F.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]}):pe.category}),l.jsx("td",{className:"p-2 border",children:Se?l.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:F=>C(F.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]}):pe.measurement}),l.jsx("td",{className:"p-2 border",children:Se?l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:F=>S(parseFloat(F.target.value))}):lSe(pe.price)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:k?"Activo":"Inactivo"})}),l.jsx("td",{className:"p-2 border space-x-2",children:Se?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ee,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ae,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>W(pe),children:"Editar"}),l.jsx("button",{className:`px-2 py-1 rounded ${k?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>ce(pe),children:k?"Desactivar":"Activar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>de(pe.id),children:"Eliminar"})]})})]},pe.id)})})]})})]})}const io=[];for(let t=0;t<256;++t)io.push((t+256).toString(16).slice(1));function uSe(t,e=0){return(io[t[e+0]]+io[t[e+1]]+io[t[e+2]]+io[t[e+3]]+"-"+io[t[e+4]]+io[t[e+5]]+"-"+io[t[e+6]]+io[t[e+7]]+"-"+io[t[e+8]]+io[t[e+9]]+"-"+io[t[e+10]]+io[t[e+11]]+io[t[e+12]]+io[t[e+13]]+io[t[e+14]]+io[t[e+15]]).toLowerCase()}let bB;const dSe=new Uint8Array(16);function ASe(){if(!bB){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bB=crypto.getRandomValues.bind(crypto)}return bB(dSe)}const fSe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CQ={randomUUID:fSe};function hSe(t,e,r){var a;if(CQ.randomUUID&&!t)return CQ.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??ASe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,uSe(n)}async function mSe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=ht(t,"inventory_batches"),s=Kt(a,Zt("productName","==",e)),c=(await jt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const A=u.data.date??"",h=d.data.date??"";if(A!==h)return A<h?-1:1;const f=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return f-m}).map(u=>Ht(t,"inventory_batches",u.id));return Ni(t,async u=>{let d=Number(r);const A=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),I=Number(b.remaining??w??0),T=Number(b.purchasePrice??0);if(I<=0)continue;const C=Math.min(I,d),E=Number((I-C).toFixed(3));u.update(x,{remaining:E}),A.push({batchId:x.id,qty:C,unitCost:T,lineCost:Number((C*T).toFixed(2))}),d=Number((d-C).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const f=Number(A.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=A.reduce((g,x)=>g+x.qty,0),p=m>0?Number((f/m).toFixed(4)):0;return{allocations:A,avgUnitCost:p,cogsAmount:f}})}const Hee=3,pSe=.5*10**-Hee;function cs(t){const e=Number(t??0);return Number(e.toFixed(Hee))}function wB(t,e){return cs((t??0)+(e??0))}function WN(t,e){return cs(t)+pSe>=cs(e)}async function gSe(t,e){const r=await jt(ht(Fe,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await Hr(Ht(Fe,"inventory_batches",s.id),{productId:e}),a++)}return a}function EQ({user:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(""),[o,c]=v.useState(dr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(""),[A,h]=v.useState([]),[f,m]=v.useState(0),[p,g]=v.useState(0),[x,y]=v.useState("0"),[b,w]=v.useState(""),[I,T]=v.useState(!1),[C,E]=v.useState({}),S=M=>Math.round(M*100)/100,O=M=>cs(M).toFixed(3),B=M=>{const L=Number(M.specialPrice||0);return L>0?L:Number(M.price||0)},P=async M=>{if(!M)return 0;const L=Kt(ht(Fe,"inventory_batches"),Zt("productId","==",M)),q=await jt(L);let R=0;return q.forEach(K=>{const Z=K.data();R=wB(R,Number(Z.remaining||0))}),cs(R)},D=async M=>{if(!M)return 0;const L=await jt(ht(Fe,"inventory_batches"));let q=0;return L.forEach(R=>{const K=R.data();(K.productName||"").trim().toLowerCase()===M.trim().toLowerCase()&&(q=wB(q,Number(K.remaining||0)))}),cs(q)};v.useEffect(()=>{(async()=>{const M=await jt(ht(Fe,"products")),L=[];M.forEach(q=>{const R=q.data();(R==null?void 0:R.active)!==!1&&L.push({id:q.id,productName:R.name??R.productName??"(sin nombre)",price:Number(R.price??0),measurement:R.measurement??"(sin unidad)",category:R.category??"(sin categora)"})}),r(L)})()},[]),v.useEffect(()=>{(async()=>{const M=await jt(ht(Fe,"inventory_batches")),L={};M.forEach(q=>{const R=q.data(),K=R.productId,Z=Number(R.remaining||0);K&&(L[K]=wB(L[K]||0,Z))}),Object.keys(L).forEach(q=>L[q]=cs(L[q])),E(L)})()},[]),v.useEffect(()=>{(async()=>{const M=await jt(ht(Fe,"users")),L=[];M.forEach(q=>{const R=q.data();L.push({id:q.id,email:R.email??"(sin email)",role:R.role??"USER"})}),a(L)})()},[]);const W=async()=>{if(!s)return;const M=e.find(q=>q.id===s);if(!M)return;if(A.some(q=>q.productId===M.id)){i("");return}const L=await P(M.id);h(q=>[...q,{productId:M.id,productName:M.productName,measurement:M.measurement,price:Number(M.price||0),specialPrice:0,stock:L,qty:0,discount:0}]),i("")},Ae=M=>{h(L=>L.filter(q=>q.productId!==M))},ee=async(M,L)=>{h(q=>q.map(R=>{if(R.productId!==M)return R;const K=(R.measurement||"").toLowerCase()!=="lb",Z=L===""?0:Number(L),te=K?Math.max(0,Math.round(Z)):cs(Z);return{...R,qty:te}}))},ce=(M,L)=>{h(q=>q.map(R=>{if(R.productId!==M)return R;const K=(L||"").replace(",","."),Z=K.trim()===""?0:Number(K),te=Number.isFinite(Z)?Math.max(0,S(Z)):0;return{...R,specialPrice:te}}))},de=(M,L)=>{h(q=>q.map(R=>{if(R.productId!==M)return R;const K=Math.max(0,Math.floor(Number(L||0)));return{...R,discount:K}}))},X=v.useMemo(()=>{let M=0;for(const L of A){const q=B(L),R=Number(q||0)*Number(L.qty||0),K=Math.max(0,R-Math.max(0,Number(L.discount||0)));M+=K}return S(M)},[A]);v.useEffect(()=>{m(X)},[X]),v.useEffect(()=>{const M=Number(p)||0,L=Number(f)||0;y((M-L).toFixed(2))},[p,f]);const pe=M=>{M.key===","&&(M.preventDefault(),M.target.value+=".")},Se=async()=>{if(A.length===0)return"Agrega al menos un producto.";for(const M of A){if(!M.qty||M.qty<=0)return`Cantidad invlida para "${M.productName}".`;const L=await P(M.productId);if(!WN(L,M.qty)){const q=await D(M.productName);if(WN(q,0)&&!WN(L,0)){const R=await gSe(M.productName,M.productId),K=await P(M.productId);if(!WN(K,M.qty))return`Stock insuficiente tras corregir ${R} lote(s) para "${M.productName}".`}else return`Stock insuficiente para "${M.productName}". Disponible: ${L}`}}return null},k=async M=>{var q,R;M.preventDefault(),w("");const L=await Se();if(L){w(" "+L);return}try{T(!0);const K=[];for(const Q of A){const ye=Q.qty,{allocations:Y,avgUnitCost:z,cogsAmount:le}=await mSe(Fe,Q.productName,ye,!1),je=B(Q),ue=Number(je||0)*Number(ye||0),Pe=Math.max(0,Number(Q.discount||0)),Ye=Math.max(0,ue-Pe);K.push({productId:Q.productId,productName:Q.productName,measurement:Q.measurement,unitPrice:Number(je||0),regularPrice:Number(Q.price||0),specialPrice:Number(Q.specialPrice||0)>0?Number(Q.specialPrice):null,qty:ye,discount:Pe,lineTotal:S(ue),lineFinal:S(Ye),allocations:Y,avgUnitCost:z,cogsAmount:le})}const Z=K.reduce((Q,ye)=>Q+ye.lineFinal,0),te=K.reduce((Q,ye)=>Q+Number(ye.qty||0),0);await on(ht(Fe,"salesV2"),{id:hSe(),quantity:te,amount:Z,amountCharged:Z,amountReceived:Number(p)||0,change:x,clientName:u.trim(),timestamp:Xt.now(),date:o,userEmail:((q=n[0])==null?void 0:q.email)??"sin usuario",vendor:((R=n[0])==null?void 0:R.role)??"sin usuario",status:"FLOTANTE",items:K,itemsTotal:Z}),w(" Venta registrada y asignada a inventario (FIFO)."),h([]),i(""),m(0),g(0),y("0"),d(""),c(dr(new Date,"yyyy-MM-dd"))}catch(K){console.error(K),w(` ${(K==null?void 0:K.message)||"Error al registrar la venta."}`)}finally{T(!1)}},F=v.useMemo(()=>new Set(A.map(M=>M.productId)),[A]),V=v.useMemo(()=>e.filter(M=>(C[M.id]||0)>0),[e,C]);return l.jsxs("div",{className:"relative",children:[l.jsxs("form",{onSubmit:k,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:s,onChange:M=>i(M.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),V.map(M=>l.jsxs("option",{value:M.id,disabled:F.has(M.id),title:F.has(M.id)?"Ya est en la lista":`Disponible: ${O(C[M.id]||0)}`,children:[M.productName,"  ",M.measurement,"  C$ ",M.price," (disp:"," ",O(C[M.id]||0),")"]},M.id))]}),l.jsx("button",{type:"button",onClick:W,disabled:!s||F.has(s),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:o,onChange:M=>c(M.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),l.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:u,onChange:M=>d(M.target.value),placeholder:"Opcional"})]})]}),l.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:l.jsxs("table",{className:"min-w-full text-sm r",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"text-center",children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:""})]})}),l.jsx("tbody",{children:A.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):A.map(M=>{const L=B(M),q=Number(L||0)*Number(M.qty||0),R=Math.max(0,q-Math.max(0,Number(M.discount||0))),K=(M.measurement||"").toLowerCase()!=="lb",Z=cs(Number(M.stock)-Number(M.qty||0));return l.jsxs("tr",{className:"text-center",children:[l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[M.productName,"  ",M.measurement]}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(M.price).toFixed(2)]}),l.jsxs("td",{className:"p-2 border",children:[l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:M.specialPrice===0?"":M.specialPrice,onKeyDown:pe,onChange:te=>ce(M.productId,te.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),l.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",S(L).toFixed(2)]})]}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:Z.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:K?1:.01,inputMode:K?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:M.qty===0?"":M.qty,onKeyDown:pe,onChange:te=>ee(M.productId,te.target.value),placeholder:"0",title:"Cantidad"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:M.discount===0?"":M.discount,onChange:te=>de(M.productId,te.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(R).toFixed(2)]}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>Ae(M.productId),title:"Quitar",children:""})})]},M.productId)})})]})}),l.jsxs("div",{className:"space-y-1 ",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${f.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:p===0?"":p,onChange:M=>g(Number(M.target.value||0))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x}`,readOnly:!0})]})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:A.length===0||I,children:I?"Guardando...":"Guardar venta"}),b&&l.jsx("p",{className:`text-sm mt-2 ${b.startsWith("")?"text-green-600":b.startsWith("")?"text-yellow-600":"text-red-600"}`,children:b})]}),I&&l.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var $ee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SQ=xo.createContext&&xo.createContext($ee),xSe=["attr","size","title"];function vSe(t,e){if(t==null)return{};var r=ySe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ySe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function RE(){return RE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RE.apply(this,arguments)}function IQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ME(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IQ(Object(r),!0).forEach(function(n){bSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bSe(t,e,r){return e=wSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wSe(t){var e=NSe(t,"string");return typeof e=="symbol"?e:e+""}function NSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kee(t){return t&&t.map((e,r)=>xo.createElement(e.tag,ME({key:r},e.attr),Kee(e.child)))}function _Se(t){return e=>xo.createElement(CSe,RE({attr:ME({},t.attr)},e),Kee(t.child))}function CSe(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=vSe(t,xSe),o=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),xo.createElement("svg",RE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:ME(ME({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&xo.createElement("title",null,s),t.children)};return SQ!==void 0?xo.createElement(SQ.Consumer,null,r=>e(r)):e($ee)}function ESe(t){return _Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Dc({onClick:t,loading:e,className:r=""}){return l.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[l.jsx(ESe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const ki=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function NB(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function SSe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[o,c]=v.useState(!0),[u,d]=v.useState(""),{refreshKey:A,refresh:h}=Yl(),f=t==="admin",[m,p]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[g,x]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[y,b]=v.useState(""),[w,I]=v.useState(!1),[T,C]=v.useState(""),[E,S]=v.useState(dr(new Date,"yyyy-MM-dd")),[O,B]=v.useState("lb"),[P,D]=v.useState(""),[W,Ae]=v.useState(0),[ee,ce]=v.useState(0),[de,X]=v.useState(0),[pe,Se]=v.useState([]),[k,F]=v.useState(null),[V,M]=v.useState([]),[L,q]=v.useState(!1),[R,K]=v.useState(null),[Z,te]=v.useState(!1),[Q,ye]=v.useState(null),Y=ne=>{const Ue=(ne||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ue)||Ue==="lb"};v.useEffect(()=>{(async()=>{c(!0),d("");const ne=await jt(ht(Fe,"products")),Ue=[];ne.forEach(he=>{const _e=he.data();_e.active===!0&&Ue.push({id:he.id,name:_e.name??_e.productName??"(sin nombre)",category:_e.category??"(sin categora)",measurement:_e.measurement??"lb",price:Number(_e.price??0)})}),a(Ue);const Ke=Kt(ht(Fe,"inventory_batches"),Gr("date","desc")),et=await jt(Ke),ke=[];et.forEach(he=>{const _e=he.data(),be=cs(Number(_e.quantity||0)),Qe=Number(_e.purchasePrice||0),$e=Number(_e.salePrice||0),Je=Number((be*Qe).toFixed(2)),st=Number((be*$e).toFixed(2));ke.push({id:he.id,productId:_e.productId,productName:_e.productName,category:_e.category,unit:_e.unit,quantity:be,remaining:cs(Number(_e.remaining||0)),purchasePrice:Qe,salePrice:$e,invoiceTotal:_e.invoiceTotal!=null?Number(_e.invoiceTotal):Je,expectedTotal:_e.expectedTotal!=null?Number(_e.expectedTotal):st,date:_e.date,createdAt:_e.createdAt,status:_e.status,notes:_e.notes,paidAmount:Number(_e.paidAmount||0),paidAt:_e.paidAt,batchGroupId:_e.batchGroupId,orderName:_e.orderName})}),i(ke),c(!1)})()},[A]);const z=v.useMemo(()=>s.filter(ne=>!(m&&ne.date<m||g&&ne.date>g||y&&ne.productId!==y)),[s,m,g,y]),le=v.useMemo(()=>{const ne=z.reduce((Qe,$e)=>Qe+Number($e.invoiceTotal||0),0),Ue=z.reduce((Qe,$e)=>Qe+Number($e.expectedTotal||0),0);let Ke=0,et=0,ke=0,he=0;for(const Qe of z)Y(Qe.unit)?(Ke+=Qe.quantity,et+=Qe.remaining):(ke+=Qe.quantity,he+=Qe.remaining);const _e=z.reduce((Qe,$e)=>Qe+$e.quantity,0),be=z.reduce((Qe,$e)=>Qe+$e.remaining,0);return{lbsIng:Ke,lbsRem:et,udsIng:ke,udsRem:he,qty:_e,rem:be,totalFacturado:ne,totalEsperado:Ue}},[z]),je=v.useMemo(()=>{var Ke,et;const ne=new Map;for(const ke of z){const he=ke.batchGroupId&&String(ke.batchGroupId).trim()||ke.id;ne.has(he)||ne.set(he,[]),ne.get(he).push(ke)}const Ue=[];for(const[ke,he]of ne.entries()){const _e=[...he].sort((gt,Ne)=>{var kt,Lt;const at=((kt=gt.createdAt)==null?void 0:kt.seconds)??0;return(((Lt=Ne.createdAt)==null?void 0:Lt.seconds)??0)-at}),be=((Ke=_e[0])==null?void 0:Ke.date)||"",Qe=String(((et=_e[0])==null?void 0:et.orderName)||"").trim()||`Pedido ${be||""}`.trim()||"Pedido",$e=new Set(_e.map(gt=>String(gt.category||"").trim()).filter(Boolean)),Je=$e.size===1?Array.from($e)[0].toUpperCase():"MIXTO",st=_e.some(gt=>gt.status==="PENDIENTE")?"PENDIENTE":"PAGADO",yt=cs(_e.reduce((gt,Ne)=>gt+(Y(Ne.unit)?Number(Ne.quantity||0):0),0)),Dt=cs(_e.reduce((gt,Ne)=>gt+(Y(Ne.unit)?Number(Ne.remaining||0):0),0)),nr=Number(_e.reduce((gt,Ne)=>gt+Number(Ne.invoiceTotal||0),0).toFixed(2)),Ce=Number(_e.reduce((gt,Ne)=>gt+Number(Ne.expectedTotal||0),0).toFixed(2)),dt=Number((Ce-nr).toFixed(2));Ue.push({groupId:ke,orderName:Qe,date:be,typeLabel:Je,status:st,lbsIn:yt,lbsRem:Dt,totalFacturado:nr,totalEsperado:Ce,utilidadBruta:dt,items:_e})}return Ue.sort((ke,he)=>ke.date===he.date?ke.groupId<he.groupId?1:-1:ke.date<he.date?1:-1),Ue},[z]),ue=v.useMemo(()=>{const ne=String(O||"").toLowerCase().trim();return n.filter(Ke=>String(Ke.measurement||"").toLowerCase().trim()===ne).sort((Ke,et)=>Ke.name.localeCompare(et.name,"es"))},[n,O]);v.useEffect(()=>{const ne=n.find(Ue=>Ue.id===P);ne&&X(Number(ne.price||0))},[P,n,A]);const Pe=()=>{d("");const ne=n.find(be=>be.id===P);if(!ne)return d("Selecciona un producto.");if(W<=0||ee<=0)return d("Completa libras a ingresar y precio proveedor.");const Ue=cs(W),Ke=ne.measurement,et=Number((Ue*Number(ee||0)).toFixed(2)),ke=Number((Ue*Number(de||0)).toFixed(2)),he=Number((ke-et).toFixed(2)),_e=pe.findIndex(be=>be.productId===ne.id);_e>=0?Se(be=>be.map((Qe,$e)=>$e!==_e?Qe:{...Qe,quantity:Ue,remaining:Ue,purchasePrice:Number(ee||0),salePrice:Number(de||0),invoiceTotal:et,expectedTotal:ke,utilidadBruta:he})):Se(be=>[...be,{tempId:NB("IT"),productId:ne.id,productName:ne.name,category:ne.category,unit:Ke,quantity:Ue,remaining:Ue,purchasePrice:Number(ee||0),salePrice:Number(de||0),invoiceTotal:et,expectedTotal:ke,utilidadBruta:he}]),D(""),Ae(0),ce(0),X(0)},Ye=ne=>{Se(Ue=>Ue.filter(Ke=>Ke.tempId!==ne))},nt=(ne,Ue,Ke)=>{Se(et=>et.map(ke=>{if(ke.tempId!==ne)return ke;const he={...ke};return Ue==="quantity"&&(he.quantity=cs(Math.max(0,Ke)),k||(he.remaining=he.quantity)),Ue==="purchasePrice"&&(he.purchasePrice=Math.max(0,Number(Ke||0))),Ue==="salePrice"&&(he.salePrice=Math.max(0,Number(Ke||0))),he.invoiceTotal=Number((he.quantity*he.purchasePrice).toFixed(2)),he.expectedTotal=Number((he.quantity*he.salePrice).toFixed(2)),he.utilidadBruta=Number((he.expectedTotal-he.invoiceTotal).toFixed(2)),he}))},mt=v.useMemo(()=>{const ne=cs(pe.reduce((he,_e)=>he+(Y(_e.unit)?Number(_e.quantity||0):0),0)),Ue=cs(pe.reduce((he,_e)=>he+(Y(_e.unit)?Number(_e.remaining||0):0),0)),Ke=Number(pe.reduce((he,_e)=>he+Number(_e.invoiceTotal||0),0).toFixed(2)),et=Number(pe.reduce((he,_e)=>he+Number(_e.expectedTotal||0),0).toFixed(2)),ke=Number((et-Ke).toFixed(2));return{lbsIn:ne,lbsRem:Ue,totalFacturado:Ke,totalEsperado:et,utilidadBruta:ke}},[pe]),ct=()=>{F(null),M([]),C(""),S(dr(new Date,"yyyy-MM-dd")),B("lb"),D(""),Ae(0),ce(0),X(0),Se([])},ft=async()=>{if(d(""),!pe.length)return d("Agrega al menos un producto al pedido.");const ne=E||dr(new Date,"yyyy-MM-dd"),Ue=String(T||"").trim()||`Pedido ${ne}`,Ke=k||NB("BATCH");try{if(!k){for(const _e of pe)await NQ({productId:_e.productId,productName:_e.productName,category:_e.category,unit:_e.unit,quantity:cs(_e.quantity),purchasePrice:Number(_e.purchasePrice||0),salePrice:Number(_e.salePrice||0),invoiceTotal:Number(_e.invoiceTotal||0),expectedTotal:Number(_e.expectedTotal||0),date:ne,notes:"",batchGroupId:Ke,orderName:Ue});d(" Pedido creado"),I(!1),ct(),h();return}const et=V,ke=new Map;for(const _e of et)ke.set(_e.productId,_e);const he=new Set(pe.map(_e=>_e.productId));for(const _e of pe){const be=ke.get(_e.productId),Qe=cs(_e.quantity);if(be){const $e=cs(be.quantity-be.remaining),Je=Math.max(0,cs(Qe-$e));await Hr(Ht(Fe,"inventory_batches",be.id),{date:ne,orderName:Ue,batchGroupId:Ke,quantity:Qe,purchasePrice:Number(_e.purchasePrice||0),salePrice:Number(_e.salePrice||0),invoiceTotal:Number(_e.invoiceTotal||0),expectedTotal:Number(_e.expectedTotal||0),remaining:Je})}else await NQ({productId:_e.productId,productName:_e.productName,category:_e.category,unit:_e.unit,quantity:Qe,purchasePrice:Number(_e.purchasePrice||0),salePrice:Number(_e.salePrice||0),invoiceTotal:Number(_e.invoiceTotal||0),expectedTotal:Number(_e.expectedTotal||0),date:ne,notes:"",batchGroupId:Ke,orderName:Ue})}for(const _e of et)he.has(_e.productId)||await _n(Ht(Fe,"inventory_batches",_e.id));d(" Pedido actualizado"),I(!1),ct(),h()}catch(et){console.error(et),d(" Error al guardar pedido")}},Ct=ne=>{K(ne),q(!0)},At=ne=>{F(ne.groupId),M(ne.items),C(ne.orderName),S(ne.date||dr(new Date,"yyyy-MM-dd"));const Ue=ne.items.map(Ke=>{const et=Number(Ke.invoiceTotal||0),ke=Number(Ke.expectedTotal||0);return{tempId:NB("IT"),productId:Ke.productId,productName:Ke.productName,category:Ke.category,unit:Ke.unit,quantity:cs(Ke.quantity),remaining:cs(Ke.remaining),purchasePrice:Number(Ke.purchasePrice||0),salePrice:Number(Ke.salePrice||0),invoiceTotal:et,expectedTotal:ke,utilidadBruta:Number((ke-et).toFixed(2))}});Se(Ue),I(!0)},He=async ne=>{if(confirm(`Eliminar el pedido "${ne.orderName}" del ${ne.date}?`))try{for(const Ke of ne.items)await _n(Ht(Fe,"inventory_batches",Ke.id));d(" Pedido eliminado"),h()}catch(Ke){console.error(Ke),d(" Error al eliminar pedido")}},it=ne=>{ye(ne),te(!0)},we=async()=>{if(Q)try{for(const ne of Q.items){if(ne.status!=="PENDIENTE")continue;await Vee(ne.id),await Hr(Ht(Fe,"inventory_batches",ne.id),{remaining:0});const Ue={date:ne.date,productName:ne.productName,quantity:ne.quantity,amount:Number((ne.expectedTotal??ne.salePrice*ne.quantity).toFixed(2)),allocations:[{batchId:ne.id,qty:ne.quantity,unitCost:ne.purchasePrice,lineCost:Number((ne.purchasePrice*ne.quantity).toFixed(2))}],avgUnitCost:ne.purchasePrice,measurement:ne.unit,createdAt:Xt.now(),autoGeneratedFromInventory:!0};await on(ht(Fe,"salesV2"),Ue)}d(" Pedido pagado y reflejado como venta"),h()}catch(ne){console.error(ne),d(" Error al pagar pedido")}finally{te(!1),ye(null)}},re=()=>{te(!1),ye(null)};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),f&&l.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{ct(),I(!0)},children:"Crear Lote"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:ne=>p(ne.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:ne=>x(ne.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:ne=>b(ne.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),n.map(ne=>l.jsxs("option",{value:ne.id,children:[ne.name,"  ",ne.category]},ne.id))]})]}),l.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{p(""),x(""),b("")},children:"Quitar filtro"}),l.jsx("div",{className:"ml-auto",children:l.jsx(Dc,{onClick:()=>h(),loading:o})})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",le.lbsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",le.lbsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",le.udsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",le.udsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",le.totalEsperado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",le.totalFacturado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(le.totalEsperado-le.totalFacturado).toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",z.length.toLocaleString()]})]})}),l.jsx("div",{className:"md:hidden space-y-3",children:o?l.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):je.length===0?l.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):je.map(ne=>l.jsxs("div",{className:"bg-white border rounded-2xl p-4 shadow",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-semibold text-lg",children:ne.date}),l.jsx("div",{className:"text-xs text-gray-500 truncate",children:ne.orderName})]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${ne.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ne.status})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),l.jsx("div",{className:"font-semibold",children:ne.typeLabel})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),l.jsx("div",{className:"font-semibold",children:ki(ne.utilidadBruta)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),l.jsx("div",{className:"font-semibold",children:ne.lbsIn.toFixed(3)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),l.jsx("div",{className:"font-semibold",children:ne.lbsRem.toFixed(3)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[l.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[l.jsx("span",{children:"Total facturado"}),l.jsx("span",{children:"Total esperado"})]}),l.jsxs("div",{className:"flex justify-between font-semibold",children:[l.jsx("span",{children:ki(ne.totalFacturado)}),l.jsx("span",{children:ki(ne.totalEsperado)})]})]})]}),l.jsxs("div",{className:"mt-3 flex gap-2",children:[l.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>Ct(ne),children:"Ver detalle"}),f?l.jsxs(l.Fragment,{children:[ne.status==="PENDIENTE"&&l.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>it(ne),children:"Pagar"}),l.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>At(ne),children:"Editar"}),l.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>He(ne),children:"Borrar"})]}):null]})]},ne.groupId))}),l.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),l.jsx("th",{className:"p-2 border",children:"Libras restantes"}),l.jsx("th",{className:"p-2 border",children:"Total Facturado"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):je.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):je.map(ne=>l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsxs("td",{className:"p-2 border",children:[l.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>Ct(ne),title:ne.orderName,children:ne.date}),l.jsx("div",{className:"text-[11px] text-gray-500",children:ne.orderName})]}),l.jsx("td",{className:"p-2 border",children:ne.typeLabel}),l.jsx("td",{className:"p-2 border",children:ne.lbsIn.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:ne.lbsRem.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:ki(ne.totalFacturado)}),l.jsx("td",{className:"p-2 border",children:ki(ne.totalEsperado)}),l.jsx("td",{className:"p-2 border",children:ki(ne.utilidadBruta)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ne.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ne.status})}),l.jsx("td",{className:"p-2 border",children:f?l.jsxs("div",{className:"flex gap-2 justify-center",children:[ne.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>it(ne),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>At(ne),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>He(ne),children:"Borrar"})]}):l.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},ne.groupId))})]})}),u&&l.jsx("p",{className:"mt-2 text-sm",children:u}),w&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:k?"Editar pedido":"Crear pedido"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),type:"button",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),l.jsx("input",{className:"w-full border p-2 rounded",value:T,onChange:ne=>C(ne.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:E,onChange:ne=>S(ne.target.value)})]})]}),l.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:ne=>{B(ne.target.value),D(""),Ae(0),ce(0),X(0)},children:[l.jsx("option",{value:"lb",children:"lb"}),l.jsx("option",{value:"unidad",children:"unidad"}),l.jsx("option",{value:"kg",children:"kg"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:ne=>D(ne.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),ue.map(ne=>l.jsxs("option",{value:ne.id,children:[ne.name,"  ",ne.category,"  ",ne.measurement]},ne.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:W===0?"":W,onChange:ne=>{const Ue=ne.target.value.replace(",","."),Ke=parseFloat(Ue),et=Number.isFinite(Ke)?parseFloat(Ke.toFixed(3)):0;Ae(Math.max(0,et))},disabled:!P})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:ne=>{const Ue=ne.target.value.replace(",","."),Ke=parseFloat(Ue),et=Number.isFinite(Ke)?parseFloat(Ke.toFixed(2)):0;ce(Math.max(0,et))},disabled:!P})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:de===0?"":de,onChange:ne=>{const Ue=ne.target.value.replace(",","."),Ke=parseFloat(Ue),et=Number.isFinite(Ke)?parseFloat(Ke.toFixed(2)):0;X(Math.max(0,et))},disabled:!P})]})]}),l.jsx("div",{className:"flex justify-end mt-3",children:l.jsx("button",{type:"button",onClick:Pe,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),l.jsx("th",{className:"p-2 border",children:"Libras restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total facturado"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:pe.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):pe.map(ne=>l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsxs("td",{className:"p-2 border text-left",children:[ne.productName,l.jsxs("div",{className:"text-[11px] text-gray-500",children:[ne.category,"  ",ne.unit]})]}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ne.quantity,onChange:Ue=>{const Ke=Ue.target.value.replace(",","."),et=parseFloat(Ke),ke=Number.isFinite(et)?parseFloat(et.toFixed(3)):0;nt(ne.tempId,"quantity",ke)}})}),l.jsx("td",{className:"p-2 border",children:Number(ne.remaining||0).toFixed(3)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ne.purchasePrice,onChange:Ue=>{const Ke=Ue.target.value.replace(",","."),et=parseFloat(Ke),ke=Number.isFinite(et)?parseFloat(et.toFixed(2)):0;nt(ne.tempId,"purchasePrice",ke)}})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ne.salePrice,onChange:Ue=>{const Ke=Ue.target.value.replace(",","."),et=parseFloat(Ke),ke=Number.isFinite(et)?parseFloat(et.toFixed(2)):0;nt(ne.tempId,"salePrice",ke)}})}),l.jsx("td",{className:"p-2 border",children:ki(ne.invoiceTotal)}),l.jsx("td",{className:"p-2 border",children:ki(ne.expectedTotal)}),l.jsx("td",{className:"p-2 border",children:ki(ne.utilidadBruta)}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ye(ne.tempId),children:"Quitar"})})]},ne.tempId))})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),l.jsx("div",{className:"text-lg font-semibold",children:mt.lbsIn.toFixed(3)}),l.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),l.jsx("div",{className:"text-lg font-semibold",children:mt.lbsRem.toFixed(3)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),l.jsx("div",{className:"text-lg font-semibold",children:ki(mt.totalFacturado)}),l.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),l.jsx("div",{className:"text-lg font-semibold",children:ki(mt.totalEsperado)}),l.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),l.jsx("div",{className:"text-lg font-semibold",children:ki(mt.utilidadBruta)})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cancelar"}),l.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:ft,disabled:pe.length===0,children:k?"Editar pedido":"Crear pedido"})]})]})]}),document.body),L&&R&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{q(!1),K(null)}}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("strong",{children:R.orderName})," "," ",R.date]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{q(!1),K(null)},type:"button",children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:R.items.map(ne=>{const Ue=Number(ne.invoiceTotal||0),Ke=Number(ne.expectedTotal||0);return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border text-left",children:ne.productName}),l.jsx("td",{className:"p-2 border",children:(ne.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:ne.quantity.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:ne.remaining.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:ki(ne.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:ki(ne.salePrice)}),l.jsx("td",{className:"p-2 border",children:ki(Ue)}),l.jsx("td",{className:"p-2 border",children:ki(Ke)}),l.jsx("td",{className:"p-2 border",children:ki(Ke-Ue)}),l.jsx("td",{className:"p-2 border",children:ne.status})]},ne.id)})})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),l.jsx("div",{className:"text-lg font-semibold",children:R.lbsIn.toFixed(3)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),l.jsx("div",{className:"text-lg font-semibold",children:R.lbsRem.toFixed(3)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),l.jsx("div",{className:"text-lg font-semibold",children:ki(R.utilidadBruta)})]})]})]})]}),document.body),Z&&Q&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:re}),l.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[l.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),l.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",l.jsx("br",{}),l.jsx("strong",{children:Q.orderName})," "," ",Q.date,l.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx("button",{onClick:we,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),l.jsx("button",{onClick:re,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const PA=t=>`C$${(Number(t)||0).toFixed(2)}`;function ISe(){const t=Q1e(new Date),[e,r]=v.useState(dr(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[o,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=dr(yd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=dr(vd(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),A=async()=>{i(!0);try{const g=await nSe(d.from,d.to),x=[];for(const y of g){const b=Ht(Fe,"inventory_batches",y.batchId),w=await So(b);if(!w.exists())continue;const I=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:I.status??"PENDIENTE",purchasePrice:Number(I.purchasePrice||0),salePrice:Number(I.salePrice||0),supplier:I.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{A()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await Vee(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},f=v.useMemo(()=>{const g=n.reduce((w,I)=>w+I.soldQty,0),x=n.reduce((w,I)=>w+I.soldAmount,0),y=n.reduce((w,I)=>w+I.soldQty*I.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([nf(()=>Promise.resolve().then(()=>x6),void 0),nf(()=>Promise.resolve().then(()=>Rj),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),I=new y("p","mm","a4"),T=190,C=I.getImageProperties(w),E=T,S=C.height*E/C.width;I.addImage(w,"PNG",10,10,E,S),I.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),l.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[l.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),l.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),l.jsx("button",{onClick:A,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),l.jsxs("div",{ref:u,children:[l.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",f.q]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",PA(f.amt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",PA(f.cogs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",PA(f.profit)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Vendido"}),l.jsx("th",{className:"p-2 border",children:"Monto vendido"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:g.batchDate}),l.jsx("td",{className:"p-2 border",children:g.productName}),l.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),l.jsx("td",{className:"p-2 border",children:g.soldQty}),l.jsx("td",{className:"p-2 border",children:PA(g.soldAmount)}),l.jsx("td",{className:"p-2 border",children:PA(x)}),l.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:PA(y)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),l.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),l.jsx("th",{className:"p-2 border",children:"Ingreso"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),l.jsx("tbody",{children:m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:g.productName}),l.jsx("td",{className:"p-2 border",children:g.qty}),l.jsx("td",{className:"p-2 border",children:PA(g.revenue)}),l.jsx("td",{className:"p-2 border",children:PA(g.cogs)}),l.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:PA(g.profit)})]},g.productName))})]})})]}),o&&l.jsx("p",{className:"mt-2 text-sm",children:o})]})}const cl=t=>`C$${Number(t??0).toFixed(2)}`,BSe=()=>dr(new Date,"yyyy-MM-dd"),Cg=t=>Number(t||0).toFixed(3);function TSe(){const[t,e]=v.useState(()=>{const B=new Date,P=new Date(B.getFullYear(),B.getMonth(),1);return dr(P,"yyyy-MM-dd")}),[r,n]=v.useState(BSe()),[a,s]=v.useState(!0),[i,o]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:A}=Yl(),[h,f]=v.useState({}),[m,p]=v.useState({});v.useEffect(()=>{(async()=>{s(!0);const P=Kt(ht(Fe,"salesV2"),Zt("date",">=",t),Zt("date","<=",r)),D=await jt(P),W=[];D.forEach(de=>{const X=de.data(),pe=X.date??"";if(Array.isArray(X.items)&&X.items.length>0){X.items.forEach((Se,k)=>{const F=String(Se.productName??"(sin nombre)"),V=Number(Se.qty??0),M=Number(Se.lineFinal??0)||Math.max(0,Number(Se.unitPrice||0)*V-Number(Se.discount||0));W.push({id:`${de.id}#${k}`,date:pe,productName:F,quantity:V,amount:M,allocations:Array.isArray(Se.allocations)?Se.allocations:X.allocations,avgUnitCost:Number(Se.avgUnitCost??X.avgUnitCost??0),measurement:Se.measurement??X.measurement??""})});return}W.push({id:de.id,date:pe,productName:X.productName??"(sin nombre)",quantity:Number(X.quantity??0),amount:Number(X.amount??X.amountCharged??0),allocations:Array.isArray(X.allocations)?X.allocations:[],avgUnitCost:Number(X.avgUnitCost??0),measurement:X.measurement??""})}),o(W);const Ae=Kt(ht(Fe,"expenses"),Zt("date",">=",t),Zt("date","<=",r)),ee=await jt(Ae),ce=[];ee.forEach(de=>{const X=de.data();ce.push({id:de.id,date:X.date??"",category:X.category??"(sin categora)",description:X.description??"",amount:Number(X.amount??0),status:X.status??"PAGADO",createdAt:X.createdAt})}),u(ce),s(!1)})()},[t,r,d]);const g=v.useMemo(()=>{const B=i.reduce((ee,ce)=>ee+(ce.amount||0),0);let P=0;i.forEach(ee=>{var ce;(ce=ee.allocations)!=null&&ce.length?P+=ee.allocations.reduce((de,X)=>de+Number(X.lineCost||0),0):ee.avgUnitCost&&ee.quantity&&(P+=Number(ee.avgUnitCost)*Number(ee.quantity))});const D=B-P,W=c.reduce((ee,ce)=>ee+(ce.amount||0),0),Ae=D-W;return{revenue:B,cogsReal:P,grossProfit:D,expensesSum:W,netProfit:Ae}},[i,c]),x=B=>String(B??"").toLowerCase().trim(),y=B=>Number(B.qty??B.quantity??0),b=B=>["lb","lbs","libra","libras"].includes(x(B)),w=B=>["unidad","unidades","ud","uds","pieza","piezas"].includes(x(B)),I=v.useMemo(()=>i.reduce((B,P)=>b(P.measurement)?B+y(P):B,0),[i]),T=v.useMemo(()=>i.reduce((B,P)=>w(P.measurement)?B+y(P):B,0),[i]),C=v.useMemo(()=>{var P;const B=new Map;for(const D of i){const W=D.productName||"(sin nombre)";B.has(W)||B.set(W,{productName:W,units:0,revenue:0,cogs:0,profit:0,firstDate:D.date||"",lastDate:D.date||""});const Ae=B.get(W);Ae.units+=Number(D.quantity||0),Ae.revenue+=Number(D.amount||0),(!Ae.firstDate||D.date<(Ae.firstDate||D.date))&&(Ae.firstDate=D.date),(!Ae.lastDate||D.date>(Ae.lastDate||D.date))&&(Ae.lastDate=D.date);let ee=0;(P=D.allocations)!=null&&P.length?ee=D.allocations.reduce((ce,de)=>ce+Number(de.lineCost||0),0):D.avgUnitCost&&(ee=Number(D.avgUnitCost)*Number(D.quantity||0)),Ae.cogs+=ee,Ae.profit=Ae.revenue-Ae.cogs}return Array.from(B.values()).sort((D,W)=>D.productName.localeCompare(W.productName))},[i]),E=v.useMemo(()=>[...C].sort((B,P)=>P.units-B.units).slice(0,3).map((B,P)=>({idx:P+1,name:B.productName,units:B.units})),[C]),S=B=>f(P=>({...P,[B]:!P[B]})),O=B=>p(P=>({...P,[B]:!P[B]}));return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),l.jsx(Dc,{onClick:A,loading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:B=>e(B.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:B=>n(B.target.value)})]})]}),a?l.jsx("p",{children:"Cargando"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[l.jsx(P1,{title:"Ventas",value:cl(g.revenue)}),l.jsx(P1,{title:"Costo",value:cl(g.cogsReal)}),l.jsx(P1,{title:"Ganancia Bruta",value:cl(g.grossProfit),positive:!0}),l.jsx(P1,{title:"Gastos",value:cl(g.expensesSum)}),l.jsx(P1,{title:"Ganancia Neta",value:cl(g.netProfit),positive:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[l.jsx(BQ,{title:"Libras Vendidas",value:Cg(I)}),l.jsx(BQ,{title:"Unidades Vendidas",value:Cg(T)}),l.jsx(PSe,{title:"Productos ms vendidos",items:E.map(B=>({key:`${B.idx}`,label:`${B.idx}. ${B.name}`,value:`(${Cg(B.units)})`}))})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Fechas"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Ingreso"}),l.jsx("th",{className:"border p-2",children:"Costo"}),l.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),l.jsxs("tbody",{children:[C.map(B=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:B.productName}),l.jsx("td",{className:"border p-1",children:B.firstDate&&B.lastDate?B.firstDate===B.lastDate?B.firstDate:`${B.firstDate}  ${B.lastDate}`:""}),l.jsx("td",{className:"border p-1",children:Cg(B.units)}),l.jsx("td",{className:"border p-1",children:cl(B.revenue)}),l.jsx("td",{className:"border p-1",children:cl(B.cogs)}),l.jsx("td",{className:`border p-1 ${B.profit>=0?"text-green-700":"text-red-700"}`,children:cl(B.profit)})]},B.productName)),C.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),l.jsx("div",{className:"md:hidden space-y-2 mb-6",children:C.length===0?l.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):C.map(B=>{const P=!!h[B.productName],D=B.firstDate&&B.lastDate?B.firstDate===B.lastDate?B.firstDate:`${B.firstDate}  ${B.lastDate}`:"";return l.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[l.jsxs("button",{type:"button",onClick:()=>S(B.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:B.productName}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",l.jsx("b",{children:Cg(B.units)}),"  Utilidad:"," ",l.jsx("b",{className:B.profit>=0?"text-green-700":"text-red-700",children:cl(B.profit)})]})]}),l.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:P?"":""})]}),P&&l.jsx("div",{className:"px-3 pb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(Dd,{label:"Fechas",value:D}),l.jsx(Dd,{label:"Total",value:Cg(B.units)}),l.jsx(Dd,{label:"Ingreso",value:cl(B.revenue)}),l.jsx(Dd,{label:"Costo",value:cl(B.cogs)}),l.jsx(Dd,{label:"Utilidad",value:cl(B.profit),valueClass:B.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},B.productName)})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"})]})}),l.jsxs("tbody",{children:[c.map(B=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:B.date}),l.jsx("td",{className:"border p-1",children:B.category}),l.jsx("td",{className:"border p-1",children:B.description}),l.jsx("td",{className:"border p-1",children:cl(B.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})})]},B.id)),c.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),l.jsx("div",{className:"md:hidden space-y-2",children:c.length===0?l.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(B=>{const P=!!m[B.id],D=B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return l.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[l.jsxs("button",{type:"button",onClick:()=>O(B.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"font-semibold truncate",children:B.category}),l.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${D}`,children:B.status})]}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[B.date,"  ",l.jsx("b",{children:cl(B.amount)})]})]}),l.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:P?"":""})]}),P&&l.jsx("div",{className:"px-3 pb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx(Dd,{label:"Fecha",value:B.date}),l.jsx(Dd,{label:"Categora",value:B.category}),l.jsx(Dd,{label:"Descripcin",value:B.description||""}),l.jsx(Dd,{label:"Monto",value:cl(B.amount)}),l.jsx(Dd,{label:"Estado",value:B.status||""})]})})]},B.id)})})]})]})}function P1({title:t,value:e,positive:r}){return l.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[l.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),l.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function BQ({title:t,value:e}){return l.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[l.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),l.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function PSe({title:t,items:e}){return l.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[l.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),l.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?l.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>l.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Dd({label:t,value:e,valueClass:r}){return l.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:t}),l.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const _B=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],j1=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function jSe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[i,o]=v.useState(dr(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,I]=v.useState(!0),[T,C]=v.useState(""),[E,S]=v.useState(null),[O,B]=v.useState(""),[P,D]=v.useState(""),[W,Ae]=v.useState(""),[ee,ce]=v.useState(0),[de,X]=v.useState("PENDIENTE"),[pe,Se]=v.useState("");v.useEffect(()=>{(async()=>{I(!0),C("");try{const te=Kt(ht(Fe,"expenses"),Gr("date","desc")),Q=await jt(te),ye=[];Q.forEach(Y=>{const z=Y.data();ye.push({id:Y.id,date:z.date||dr(new Date,"yyyy-MM-dd"),category:z.category||"",description:z.description||"",amount:Number(z.amount||0),status:z.status||"PENDIENTE",notes:z.notes||"",createdAt:z.createdAt??Xt.now()})}),b(ye)}catch(te){console.error(te),C(" Error al cargar gastos")}finally{I(!1)}})()},[t]);const k=v.useMemo(()=>y.filter(te=>!(r&&te.date<r||a&&te.date>a)),[y,r,a]),F=v.useMemo(()=>{const te=k.reduce((Y,z)=>Y+(z.amount||0),0),Q=k.filter(Y=>Y.status==="PAGADO").reduce((Y,z)=>Y+(z.amount||0),0),ye=te-Q;return{total:te,pagado:Q,pendiente:ye}},[k]),V=()=>{o(dr(new Date,"yyyy-MM-dd")),u(""),A(""),f(0),p("PENDIENTE"),x("")},M=async te=>{if(te.preventDefault(),C(""),!c)return C("Selecciona una categora.");if(!d.trim())return C("Ingresa una descripcin.");if(!h||h<=0)return C("Ingresa un monto vlido.");try{const Q={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:Xt.now()},ye=await on(ht(Fe,"expenses"),Q);b(Y=>[{id:ye.id,...Q},...Y]),V(),C(" Gasto registrado")}catch(Q){console.error(Q),C(" Error al guardar gasto")}},L=te=>{C(""),S(te.id),B(te.date),D(te.category||""),Ae(te.description||""),ce(Number(te.amount||0)),X(te.status||"PENDIENTE"),Se(te.notes||"")},q=()=>{S(null),B(""),D(""),Ae(""),ce(0),X("PENDIENTE"),Se("")},R=async()=>{if(E){if(!P)return C("Selecciona una categora.");if(!W.trim())return C("Ingresa una descripcin.");if(!ee||ee<=0)return C("Ingresa un monto vlido.");try{const te={date:O,category:P,description:W.trim(),amount:Number(Number(ee||0).toFixed(2)),status:de,notes:pe||""};await Hr(Ht(Fe,"expenses",E),te),b(Q=>Q.map(ye=>ye.id===E?{...ye,...te}:ye)),q(),C(" Gasto actualizado")}catch(te){console.error(te),C(" Error al actualizar gasto")}}},K=async te=>{if(confirm(`Eliminar el gasto "${te.description}"?`))try{await _n(Ht(Fe,"expenses",te.id)),b(ye=>ye.filter(Y=>Y.id!==te.id)),C(" Gasto borrado")}catch(ye){console.error(ye),C(" Error al borrar gasto")}},Z=te=>te==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return l.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),l.jsx(Dc,{onClick:e,loading:w})]}),l.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:te=>n(te.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:te=>s(te.target.value)})]})]}),l.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",j1(F.total)]}),l.jsxs("div",{children:["Pagado: ",j1(F.pagado)]}),l.jsxs("div",{children:["Pendiente: ",j1(F.pendiente)]})]})]}),l.jsxs("form",{onSubmit:M,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:te=>o(te.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:te=>u(te.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),_B.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:te=>A(te.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:te=>{const Q=String(te.target.value||"").replace(",","."),ye=parseFloat(Q);f(Number.isFinite(ye)?Math.max(0,ye):0)},placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:te=>p(te.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:te=>x(te.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),l.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),l.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:V,children:"Limpiar"})]})]}),l.jsx("div",{className:"block md:hidden space-y-3",children:w?l.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):k.length===0?l.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):k.map(te=>{const Q=E===te.id;return l.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-semibold",children:te.description}),l.jsxs("div",{className:"text-xs text-gray-500",children:[te.category||"","  ",te.date]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-bold",children:j1(te.amount)}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z(te.status)}`,children:te.status})]})]}),l.jsx("div",{className:"mt-2 text-xs text-gray-600",children:te.notes?te.notes:""}),Q?l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:ye=>B(ye.target.value)}),l.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:ye=>D(ye.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),_B.map(ye=>l.jsx("option",{value:ye,children:ye},ye))]}),l.jsx("input",{className:"w-full border p-2 rounded",value:W,onChange:ye=>Ae(ye.target.value)}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ye=>{const Y=String(ye.target.value||"").replace(",","."),z=parseFloat(Y);ce(Number.isFinite(z)?Math.max(0,z):0)}}),l.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:ye=>X(ye.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:pe,onChange:ye=>Se(ye.target.value),maxLength:500}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:q,children:"Cancelar"})]})]}):l.jsxs("div",{className:"mt-3 flex gap-2",children:[l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(te),children:"Editar"}),l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>K(te),children:"Borrar"})]})]},te.id)})}),l.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):k.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):k.map(te=>{const Q=E===te.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Q?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:O,onChange:ye=>B(ye.target.value)}):te.date}),l.jsx("td",{className:"p-2 border",children:Q?l.jsxs("select",{className:"w-full border p-1 rounded",value:P,onChange:ye=>D(ye.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),_B.map(ye=>l.jsx("option",{value:ye,children:ye},ye))]}):te.category||""}),l.jsx("td",{className:"p-2 border",children:Q?l.jsx("input",{className:"w-full border p-1 rounded",value:W,onChange:ye=>Ae(ye.target.value)}):l.jsx("span",{title:te.description,children:te.description.length>45?te.description.slice(0,45)+"":te.description})}),l.jsx("td",{className:"p-2 border",children:Q?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ye=>{const Y=String(ye.target.value||"").replace(",","."),z=parseFloat(Y);ce(Number.isFinite(z)?Math.max(0,z):0)}}):j1(te.amount)}),l.jsx("td",{className:"p-2 border",children:Q?l.jsxs("select",{className:"w-full border p-1 rounded",value:de,onChange:ye=>X(ye.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z(te.status)}`,children:te.status})}),l.jsx("td",{className:"p-2 border",children:Q?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:pe,onChange:ye=>Se(ye.target.value),maxLength:500}):l.jsx("span",{title:te.notes||"",children:(te.notes||"").length>45?(te.notes||"").slice(0,45)+"":te.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:Q?l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:q,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(te),children:"Editar"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>K(te),children:"Borrar"})]})})})]},te.id)})})]})}),T&&l.jsx("p",{className:"mt-2 text-sm",children:T})]})}function LE(t){return(t||"").trim().toLowerCase()}async function Gee(){const t=await jt(ht(Fe,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=LE(n.name??n.productName);a&&e.set(a,r.id)}),e}async function kSe(t=!1){const e=await Gee(),r=await jt(ht(Fe,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=LE(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const o=e.get(i);if(!o){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===o){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:o,status:"alreadyOk"});continue}t||await Hr(Ht(Fe,"inventory_batches",a.id),{productId:o}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function FSe(t,e=!1){const r=LE(t),a=(await Gee()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await jt(ht(Fe,"inventory_batches"));let i=0;for(const o of s.docs){const c=o.data();LE(c.productName)===r&&c.productId!==a&&(e||await Hr(Ht(Fe,"inventory_batches",o.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function OSe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await kSe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),o=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await FSe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return l.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",l.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),l.jsx("hr",{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),l.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),l.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&l.jsx("p",{className:"text-sm",children:r})]})}const ja=t=>`C$ ${Number(t??0).toFixed(2)}`,nm=t=>Number(t??0).toFixed(3);async function DSe(t){const e=new Set;for(const n of t)for(const a of n.batches||[]){const s=(a.batchId||a.id||"").trim();if(!s)continue;(a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)&&e.add(s)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const a=await So(Ht(Fe,"inventory_batches",n));if(a.exists()){const s=a.data();r.set(n,Number(s.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(a=>{if((a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)){const s=(a.batchId||a.id||"").trim(),i=s?r.get(s):void 0;if(i!==void 0)return{...a,purchasePrice:i}}return a})}))}function CB(t){var p,g;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],a=Number(((p=t.totals)==null?void 0:p.lbs)??t.totalLbs??0),s=Number(((g=t.totals)==null?void 0:g.units)??t.totalUnits??0);let i=0,o=0;for(const x of e){const y=Number(x.quantity??0);let b=x.expectedTotal!==void 0&&x.expectedTotal!==null?Number(x.expectedTotal):y*Number(x.salePrice??0);isFinite(b)||(b=0);let w=y*Number(x.purchasePrice??Number.NaN);isFinite(w)||(w=x.invoiceTotal!==void 0&&x.invoiceTotal!==null?Number(x.invoiceTotal):0),i+=b,o+=w}const c=r.reduce((x,y)=>x+Number(y.amount||0),0),u=n.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=n.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,f=i-o,m=i-c-A+h;return{lbs:a,units:s,expectedSum:i,invoicedSum:o,expenses:c,debits:A,credits:h,grossProfit:f,finalAmount:m}}function RSe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null);v.useEffect(()=>{(async()=>{n(!0);const d=Kt(ht(Fe,"invoices"),Gr("date","desc")),A=await jt(d),h=[];A.forEach(m=>{const p=m.data();h.push({id:m.id,...p,batches:p.batches||[],expenses:p.expenses||[],adjustments:p.adjustments||[],totals:p.totals||{lbs:p.totalLbs||0,units:p.totalUnits||0,amount:p.totalAmount||0,expenses:p.totalExpenses||0,finalAmount:p.finalAmount||0,invoiceTotal:p.invoiceTotal||0},totalDebits:p.totalDebits||0,totalCredits:p.totalCredits||0})});const f=await DSe(h);e(f),n(!1)})()},[]);const o=async d=>{const A=d.status==="PAGADA"?"PENDIENTE":"PAGADA";await Hr(Ht(Fe,"invoices",d.id),{status:A}),e(h=>h.map(f=>f.id===d.id?{...f,status:A}:f)),(a==null?void 0:a.id)===d.id&&s({...d,status:A})},c=async d=>{if(window.confirm(`Eliminar factura del ${d.date}?`))try{const A=Ht(Fe,"invoices",d.id),h=await So(A),f=h.exists()?h.data():null,m=M0(Fe),p=(f==null?void 0:f.batches)||[];for(const g of p){const x=g.batchId||g.id;if(!x)continue;const y=Ht(Fe,"inventory_batches",x);m.update(y,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}m.delete(A),await m.commit(),e(g=>g.filter(x=>x.id!==d.id)),(a==null?void 0:a.id)===d.id&&s(null)}catch(A){console.error(A),alert("No se pudo eliminar la factura por completo.")}},u=async()=>{if(!i.current||!a)return;const d=i.current,A=await L0(d,{backgroundColor:"#ffffff",onclone:g=>{const x=g.body;x.style.background="#ffffff",x.querySelectorAll("*").forEach(y=>{const b=g.defaultView.getComputedStyle(y);b.boxShadow&&b.boxShadow!=="none"&&(y.style.boxShadow="none")})},scale:2}),h=A.toDataURL("image/png"),f=new gr("p","mm","a4"),m=f.internal.pageSize.getWidth(),p=A.height*m/A.width;f.addImage(h,"PNG",0,0,m,p),f.save(`factura_${a.number||a.date}.pdf`)};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:l.jsxs("table",{className:"min-w-full w-full- text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"N factura"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Libras"}),l.jsx("th",{className:"p-2 border",children:"Unidades"}),l.jsx("th",{className:"p-2 border",children:"Facturado"}),l.jsx("th",{className:"p-2 border",children:"Ventas"}),l.jsx("th",{className:"p-2 border",children:"Gastos"}),l.jsx("th",{className:"p-2 border",children:"Dbitos"}),l.jsx("th",{className:"p-2 border",children:"Crditos"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(d=>{const A=CB(d);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:d.date}),l.jsx("td",{className:"p-2 border",children:d.number||""}),l.jsx("td",{className:"p-2 border",children:d.description||""}),l.jsx("td",{className:"p-2 border",children:nm(A.lbs)}),l.jsx("td",{className:"p-2 border",children:nm(A.units)}),l.jsx("td",{className:"p-2 border",children:ja(A.invoicedSum)}),l.jsx("td",{className:"p-2 border",children:ja(A.expectedSum)}),l.jsx("td",{className:"p-2 border",children:ja(A.expenses)}),l.jsx("td",{className:"p-2 border",children:ja(A.debits)}),l.jsx("td",{className:"p-2 border",children:ja(A.credits)}),l.jsx("td",{className:"p-2 border",children:ja(A.finalAmount)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:d.status})}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(d),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(d),children:d.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>c(d),children:"Eliminar"})]})})]},d.id)})})]})}),a&&l.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),l.jsx("button",{onClick:u,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const d=CB(a);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras:"})," ",nm(d.lbs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",nm(d.units)]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",ja(d.invoicedSum)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",ja(d.expectedSum)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",ja(d.grossProfit)]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",ja(d.expenses)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",ja(d.debits)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",ja(d.credits)]})]})]})})(),l.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),l.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total facturado"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),l.jsx("tbody",{children:(a.batches||[]).map((d,A)=>{const h=Number(d.quantity??0),f=d.expectedTotal!==void 0&&d.expectedTotal!==null?Number(d.expectedTotal):h*Number(d.salePrice??0);let m=h*Number(d.purchasePrice??Number.NaN);isFinite(m)||(m=d.invoiceTotal!==void 0&&d.invoiceTotal!==null?Number(d.invoiceTotal):0);const p=f-m;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:d.productName||"(sin nombre)"}),l.jsx("td",{className:"p-2 border",children:(d.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:nm(d.quantity)}),l.jsx("td",{className:"p-2 border",children:ja(d.salePrice)}),l.jsx("td",{className:"p-2 border",children:ja(m)}),l.jsx("td",{className:"p-2 border",children:ja(f)}),l.jsx("td",{className:"p-2 border",children:ja(p)})]},A)})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((d,A)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:d.date}),l.jsx("td",{className:"p-2 border",children:d.description}),l.jsx("td",{className:"p-2 border",children:ja(d.amount)})]},A)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),l.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),l.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((d,A)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:d.description}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.type})}),l.jsx("td",{className:"p-2 border",children:ja(d.amount)}),l.jsx("td",{className:"p-2 border",children:a.date})]},A)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const d=CB(a);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:nm(d.lbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:nm(d.units)})]})]}),l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsxs("div",{children:["Total facturado (costo):"," ",l.jsx("strong",{children:ja(d.invoicedSum)})]}),l.jsxs("div",{children:["Total esperado (ventas):"," ",l.jsx("strong",{children:ja(d.expectedSum)})]}),l.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",l.jsx("strong",{children:ja(d.grossProfit)})]})]}),l.jsxs("div",{className:"space-y-1 text-right",children:[l.jsxs("div",{children:["Gastos: ",l.jsx("strong",{children:ja(d.expenses)})]}),l.jsxs("div",{children:["Dbitos: ",l.jsx("strong",{children:ja(d.debits)})]}),l.jsxs("div",{children:["Crditos: ",l.jsx("strong",{children:ja(d.credits)})]})]}),l.jsx("div",{className:"md:col-span-3 mt-3",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[l.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),l.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:ja(d.finalAmount)})]})})]})})()]})]})}const fc=t=>`C$${Number(t||0).toFixed(2)}`,Eg=t=>Number(t||0).toFixed(3),MSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),EB=()=>{const t=new Date;return dr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},XN=()=>dr(new Date,"yyyy-MM-dd");function LSe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(EB()),[i,o]=v.useState(XN()),[c,u]=v.useState(""),d=v.useMemo(()=>{const re=new Map;return n.forEach(ne=>re.set(ne.productId,{id:ne.productId,name:ne.productName})),Array.from(re.values()).sort((ne,Ue)=>ne.name.localeCompare(Ue.name))},[n]),A=v.useMemo(()=>n.filter(re=>!(a&&re.date<a||i&&re.date>i||c&&re.productId!==c)),[n,a,i,c]),[h,f]=v.useState(XN()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(re=>{const ne=re.filter(Ue=>A.some(Ke=>Ke.id===Ue));return ne.length===0&&A.length>0?A.map(Ue=>Ue.id):ne})},[A]);const[w,I]=v.useState([]),[T,C]=v.useState([]),[E,S]=v.useState(!1),[O,B]=v.useState(EB()),[P,D]=v.useState(XN());v.useEffect(()=>{(async()=>{try{S(!0);const re=Kt(ht(Fe,"expenses"),Gr("date","desc")),ne=await jt(re),Ue=[];ne.forEach(Ke=>{const et=Ke.data();Ue.push({id:Ke.id,date:et.date,description:et.description,amount:Number(et.amount||0)})}),I(Ue)}catch(re){console.error(re)}finally{S(!1)}})()},[]);const W=v.useMemo(()=>w.filter(re=>!(!re.date||O&&re.date<O||P&&re.date>P)),[w,O,P]),[Ae,ee]=v.useState([]),[ce,de]=v.useState(!1),[X,pe]=v.useState(""),[Se,k]=v.useState("DEBITO"),[F,V]=v.useState(""),M=()=>{const re=Number(F);!X.trim()||!isFinite(re)||re<=0||(ee(ne=>[...ne,{id:`${Date.now()}_${ne.length+1}`,description:X.trim(),type:Se,amount:Number(re.toFixed(2))}]),pe(""),V(""))},[L,q]=v.useState(null),[R,K]=v.useState(""),[Z,te]=v.useState("DEBITO"),[Q,ye]=v.useState(""),Y=re=>{q(re.id),K(re.description),te(re.type),ye(re.amount.toFixed(2))},z=()=>{q(null),K(""),te("DEBITO"),ye("")},le=()=>{if(!L)return;const re=Number(Q);!isFinite(re)||re<=0||(ee(ne=>ne.map(Ue=>Ue.id===L?{...Ue,description:R.trim(),type:Z,amount:Number(re.toFixed(2))}:Ue)),z())},je=re=>{ee(ne=>ne.filter(Ue=>Ue.id!==re)),L===re&&z()},ue=(re,ne)=>{b(Ue=>ne?[...new Set([...Ue,re])]:Ue.filter(Ke=>Ke!==re))},Pe=re=>{b(re?A.map(ne=>ne.id):[])},Ye=(re,ne)=>{C(Ue=>ne?[...new Set([...Ue,re])]:Ue.filter(Ke=>Ke!==re))},nt=v.useMemo(()=>A.filter(re=>y.includes(re.id)),[A,y]),mt=v.useMemo(()=>Ae.filter(re=>re.type==="DEBITO").reduce((re,ne)=>re+ne.amount,0),[Ae]),ct=v.useMemo(()=>Ae.filter(re=>re.type==="CREDITO").reduce((re,ne)=>re+ne.amount,0),[Ae]),ft=v.useMemo(()=>{let re=0,ne=0,Ue=0,Ke=0;for(const he of nt){MSe(he.unit)?re+=Number(he.quantity||0):ne+=Number(he.quantity||0);const _e=he.expectedTotal??Number((Number(he.quantity||0)*Number(he.salePrice||0)).toFixed(2)),be=he.invoiceTotal!==void 0&&he.invoiceTotal!==null?Number(he.invoiceTotal):Number((Number(he.quantity||0)*Number(he.purchasePrice||0)).toFixed(2));Ue+=Number(_e||0),Ke+=Number(be||0)}const et=W.filter(he=>T.includes(he.id)).reduce((he,_e)=>he+Number(_e.amount||0),0),ke=Ue-et-mt+ct;return{totalLbs:re,totalUnits:ne,totalExpected:Number(Ue.toFixed(2)),totalInvoiced:Number(Ke.toFixed(2)),totalGastos:Number(et.toFixed(2)),debits:Number(mt.toFixed(2)),credits:Number(ct.toFixed(2)),finalAmount:Number(ke.toFixed(2)),grossProfit:Number((Ue-Ke).toFixed(2))}},[nt,W,T,mt,ct]),[Ct,At]=v.useState(!1),[He,it]=v.useState(""),we=async()=>{if(it(""),nt.length===0){it("Selecciona al menos 1 lote pagado.");return}try{At(!0);const re={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:Xt.now(),totalLbs:Number(Eg(ft.totalLbs)),totalUnits:Number(Eg(ft.totalUnits)),totalAmount:ft.totalExpected,invoiceTotal:ft.totalInvoiced,totalExpenses:ft.totalGastos,totalDebits:ft.debits,totalCredits:ft.credits,finalAmount:ft.finalAmount,batches:nt.map(ne=>{var Ue;return{id:ne.id,productId:ne.productId,productName:ne.productName,unit:ne.unit,quantity:Number(Eg(ne.quantity)),salePrice:Number(Number(ne.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ne.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ne.quantity||0)*Number(ne.salePrice||0)).toFixed(2)),invoiceTotal:ne.invoiceTotal!==void 0&&ne.invoiceTotal!==null?Number(ne.invoiceTotal):Number((Number(ne.quantity||0)*Number(ne.purchasePrice||0)).toFixed(2)),batchDate:ne.date,paidAt:(Ue=ne.paidAt)!=null&&Ue.toDate?dr(ne.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:W.filter(ne=>T.includes(ne.id)).map(ne=>({id:ne.id,date:ne.date||null,description:ne.description||"",amount:Number(Number(ne.amount||0).toFixed(2))})),adjustments:Ae.map(ne=>({id:ne.id,description:ne.description,type:ne.type,amount:Number(ne.amount.toFixed(2))}))};await on(ht(Fe,"invoices"),re),it(" Factura creada."),r()}catch(re){console.error(re),it(` Error al crear factura: ${(re==null?void 0:re.message)||"desconocido"}`)}finally{At(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[l.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),l.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:re=>f(re.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:re=>p(re.target.value),placeholder:"FAC-001"})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:re=>x(re.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:l.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:re=>s(re.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:re=>o(re.target.value)})]}),l.jsxs("div",{className:"min-w-[220px]",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:re=>u(re.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),d.map(re=>l.jsx("option",{value:re.id,children:re.name},re.id))]})]}),l.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(EB()),o(XN()),u("")},children:"Quitar filtro"})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:A.length>0&&y.length===A.length,onChange:re=>Pe(re.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),A.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):l.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha lote"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total facturado"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),l.jsx("tbody",{children:A.map(re=>{var ke;const ne=y.includes(re.id),Ue=re.expectedTotal??Number((Number(re.quantity||0)*Number(re.salePrice||0)).toFixed(2)),Ke=re.invoiceTotal!==void 0&&re.invoiceTotal!==null?Number(re.invoiceTotal):Number((Number(re.quantity||0)*Number(re.purchasePrice||0)).toFixed(2)),et=Ue-Ke;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:ne,onChange:he=>ue(re.id,he.target.checked)})}),l.jsx("td",{className:"p-2 border",children:re.date}),l.jsx("td",{className:"p-2 border",children:re.productName}),l.jsx("td",{className:"p-2 border",children:(re.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Eg(re.quantity)}),l.jsx("td",{className:"p-2 border",children:fc(re.salePrice)}),l.jsx("td",{className:"p-2 border",children:fc(Ke)}),l.jsx("td",{className:"p-2 border",children:fc(Ue)}),l.jsx("td",{className:"p-2 border",children:fc(et)}),l.jsx("td",{className:"p-2 border",children:(ke=re.paidAt)!=null&&ke.toDate?dr(re.paidAt.toDate(),"yyyy-MM-dd"):""})]},re.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),l.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:O,onChange:re=>B(re.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:P,onChange:re=>D(re.target.value)})]})]})]}),W.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:W.map(re=>{const ne=T.includes(re.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:ne,onChange:Ue=>Ye(re.id,Ue.target.checked)})}),l.jsx("td",{className:"p-2 border",children:re.date||""}),l.jsx("td",{className:"p-2 border",children:re.description||""}),l.jsx("td",{className:"p-2 border",children:fc(Number(re.amount||0))})]},re.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),l.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>de(!0),children:"Crear Cargo"})]}),Ae.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):l.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:Ae.map(re=>{const ne=L===re.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ne?l.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:R,onChange:Ue=>K(Ue.target.value)}):l.jsx("span",{title:re.description,children:re.description.length>60?`${re.description.slice(0,60)}`:re.description})}),l.jsx("td",{className:"p-2 border",children:ne?l.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Z,onChange:Ue=>te(Ue.target.value),children:[l.jsx("option",{value:"DEBITO",children:"Dbito"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${re.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:re.type})}),l.jsx("td",{className:"p-2 border",children:ne?l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Q,onChange:Ue=>ye(Ue.target.value)}):fc(re.amount)}),l.jsx("td",{className:"p-2 border",children:ne?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:le,children:"Guardar"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:z,children:"Cancelar"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>je(re.id),children:"Eliminar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>Y(re),children:"Editar"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>je(re.id),children:"Eliminar"})]})})]},re.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:Eg(ft.totalLbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Eg(ft.totalUnits)})]})]}),l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsxs("div",{children:["Total facturado (costo):"," ",l.jsx("strong",{children:fc(ft.totalInvoiced)})]}),l.jsxs("div",{children:["Total esperado (ventas):"," ",l.jsx("strong",{children:fc(ft.totalExpected)})]}),l.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",l.jsx("strong",{children:fc(ft.grossProfit)})]})]}),l.jsxs("div",{className:"space-y-1 text-right",children:[l.jsxs("div",{children:["Gastos: ",l.jsx("strong",{children:fc(ft.totalGastos)})]}),l.jsxs("div",{children:["Dbitos: ",l.jsx("strong",{children:fc(ft.debits)})]}),l.jsxs("div",{children:["Crditos: ",l.jsx("strong",{children:fc(ft.credits)})]})]}),l.jsx("div",{className:"md:col-span-3 mt-3",children:l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",l.jsx("span",{className:"text-blue-700",children:fc(ft.finalAmount)})]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",disabled:Ct,onClick:we,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ct?"Creando":"Crear factura"}),l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),He&&l.jsx("span",{className:"text-sm ml-2",children:He})]}),Ct&&l.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[l.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),ce&&l.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),l.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>de(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),l.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:X,onChange:re=>pe(re.target.value),placeholder:"Detalle del cargo"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),l.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Se,onChange:re=>k(re.target.value),children:[l.jsx("option",{value:"DEBITO",children:"Dbito"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:re=>V(re.target.value),placeholder:"0.00"})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Agregar"})})]})]})})]})}const jA=t=>`C$ ${Number(t||0).toFixed(2)}`,fh=t=>Number(t||0).toFixed(3),USe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function QSe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,o]=v.useState(null),[c,u]=v.useState(dr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,A]=v.useState(dr(new Date,"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=Yl();v.useEffect(()=>{(async()=>{n(!0);const C=Kt(ht(Fe,"inventory_batches"),Zt("status","==","PAGADO"),Gr("date","desc")),E=await jt(C),S=[];E.forEach(O=>{const B=O.data(),P=Number(B.quantity||0),D=Number(B.remaining||0),W=Number(B.purchasePrice||0),Ae=Number(B.salePrice||0),ee=Number((P*W).toFixed(2)),ce=Number((P*Ae).toFixed(2));S.push({id:O.id,productId:B.productId,productName:B.productName,category:B.category,unit:B.unit,quantity:P,remaining:D,purchasePrice:W,salePrice:Ae,invoiceTotal:B.invoiceTotal!=null?Number(B.invoiceTotal):ee,expectedTotal:B.expectedTotal!=null?Number(B.expectedTotal):ce,date:B.date,status:B.status,paidAt:B.paidAt})}),e(S),n(!1)})()},[g]);const y=v.useMemo(()=>t.filter(C=>!(c&&C.date<c||d&&C.date>d||h&&C.productId!==h)),[t,c,d,h]),b=v.useMemo(()=>{let C=0,E=0,S=0,O=0,B=0,P=0;for(const D of y)USe(D.unit)?(C+=D.quantity,E+=D.remaining):(S+=D.quantity,O+=D.remaining),B+=Number(D.expectedTotal||0),P+=Number(D.invoiceTotal||0);return{lbsIng:C,lbsRem:E,udsIng:S,udsRem:O,totalEsperado:B,totalFact:P,gross:B-P}},[y]),w=C=>{o(C),s(!0)},I=async()=>{if(i)try{const C=Ht(Fe,"inventory_batches",i.id);await Hr(C,{status:"PENDIENTE",remaining:i.quantity});const E=ht(Fe,"salesV2"),S=await jt(Kt(E,Zt("batchId","==",i.id))),O=await jt(Kt(E,Zt("productName","==",i.productName),Zt("date","==",i.date))),B=[...S.docs,...O.docs];for(const P of B)await _n(Ht(Fe,"salesV2",P.id));s(!1),o(null),x()}catch(C){console.error("Error al marcar pendiente:",C)}},T=v.useMemo(()=>{const C=new Map;return t.forEach(E=>C.set(E.productId,{id:E.productId,name:E.productName})),Array.from(C.values()).sort((E,S)=>E.name.localeCompare(S.name))},[t]);return l.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),l.jsx(Dc,{onClick:x,loading:r})]}),l.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:C=>u(C.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:C=>A(C.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:C=>f(C.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),T.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]})]}),l.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f("")},children:"Quitar filtro"})]}),l.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",fh(b.lbsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",fh(b.udsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",jA(b.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",fh(b.lbsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",fh(b.udsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",jA(b.totalFact)]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",jA(b.gross)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",y.length.toLocaleString()]})]})}),l.jsx("div",{className:"block md:hidden space-y-3",children:r?l.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):y.length===0?l.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):y.map(C=>{var E;return l.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:C.productName}),l.jsxs("div",{className:"text-xs text-gray-500",children:[(C.category||"").toUpperCase(),"  ",C.date," "," ",(C.unit||"").toUpperCase()]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-bold",children:jA(C.expectedTotal||0)}),l.jsx("div",{className:"text-[11px] text-gray-500",children:"Esperado"})]})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),l.jsx("div",{className:"font-semibold",children:fh(C.quantity)})]}),l.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),l.jsx("div",{className:"font-semibold",children:fh(C.remaining)})]}),l.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),l.jsx("div",{className:"font-semibold",children:jA(C.invoiceTotal||0)})]}),l.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),l.jsx("div",{className:"font-semibold",children:(E=C.paidAt)!=null&&E.toDate?dr(C.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(C),children:"Marcar PENDIENTE"})})]},C.id)})}),l.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):y.map(C=>{var E;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.date}),l.jsx("td",{className:"p-2 border",children:(C.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:C.productName}),l.jsx("td",{className:"p-2 border",children:(C.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:fh(C.quantity)}),l.jsx("td",{className:"p-2 border",children:fh(C.remaining)}),l.jsx("td",{className:"p-2 border",children:jA(C.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:jA(C.salePrice)}),l.jsx("td",{className:"p-2 border",children:jA(C.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:jA(C.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:(E=C.paidAt)!=null&&E.toDate?dr(C.paidAt.toDate(),"yyyy-MM-dd"):""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(C),children:"Marcar PENDIENTE"})})]},C.id)})})]})}),m&&l.jsx(LSe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&l.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),l.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",l.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const Fi=t=>`C$ ${(Number(t)||0).toFixed(2)}`,VSe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function YN(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function HSe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function $Se(t){const e="ROP",r=YN(t.subcat).slice(0,3)||"GEN",n=HSe(t.gender),a=YN(t.color).slice(0,3)||"COL",s=YN(t.size)||"TLL",i=YN(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${o}`}const k1=/^[A-Za-z0-9._-]{0,32}$/;function KSe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,o]=v.useState(""),[c,u]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(dr(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,I]=v.useState(0),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(0),[P,D]=v.useState(""),[W,Ae]=v.useState(""),[ee,ce]=v.useState(""),[de,X]=v.useState(""),[pe,Se]=v.useState(""),[k,F]=v.useState(""),[V,M]=v.useState(""),[L,q]=v.useState(!1),[R,K]=v.useState(""),[Z,te]=v.useState("Camisa"),[Q,ye]=v.useState(null),[Y,z]=v.useState(""),[le,je]=v.useState(0),[ue,Pe]=v.useState(0),[Ye,nt]=v.useState(0),[mt,ct]=v.useState(0),[ft,Ct]=v.useState(0),[At,He]=v.useState(""),[it,we]=v.useState(""),[re,ne]=v.useState(""),[Ue,Ke]=v.useState(""),[et,ke]=v.useState(""),[he,_e]=v.useState(""),[be,Qe]=v.useState(""),[$e,Je]=v.useState(null),[st,yt]=v.useState({x:0,y:0}),[Dt,nr]=v.useState(!1);v.useEffect(()=>{const se=()=>Je(null),me=fe=>fe.key==="Escape"&&Je(null);return document.addEventListener("click",se),document.addEventListener("keydown",me),()=>{document.removeEventListener("click",se),document.removeEventListener("keydown",me)}},[]);const Ce=(se,me,fe=192,Te=160)=>{let ae=se;se+fe+8>window.innerWidth&&(ae=se-fe),ae=Math.max(8,Math.min(ae,window.innerWidth-fe-8));let Me=me;return me+Te+8>window.innerHeight&&(Me=window.innerHeight-Te-8),Me=Math.max(8,Math.min(Me,window.innerHeight-Te-8)),{x:ae,y:Me}},dt=(se,me)=>{se.stopPropagation();const fe=se.currentTarget.getBoundingClientRect(),Te=fe.right,Re=fe.bottom,ae=Ce(Te,Re);yt(ae),Je(Me=>Me===me?null:me)};v.useEffect(()=>{const se=()=>Je(null),me=fe=>{fe.key==="Escape"&&Je(null)};return document.addEventListener("click",se),document.addEventListener("keydown",me),()=>{document.removeEventListener("click",se),document.removeEventListener("keydown",me)}},[]),v.useEffect(()=>{if(!$e)return;const se=()=>Je(null);return window.addEventListener("scroll",se,!0),window.addEventListener("resize",se),()=>{window.removeEventListener("scroll",se,!0),window.removeEventListener("resize",se)}},[$e]),v.useEffect(()=>{(async()=>{const se=await jt(ht(Fe,"products_clothes")),me=[];se.forEach(ae=>{const Me=ae.data();me.push({id:ae.id,name:Me.name??"(sin nombre)",category:Me.category??"(sin categora)",measurement:Me.measurement??"unidad",price:Number(Me.price??0),sku:Me.sku||"",size:Me.size||"",color:Me.color||"",gender:Me.gender||"",brand:Me.brand||""})}),e(me);const fe=Kt(ht(Fe,"inventory_clothes_batches"),Gr("date","desc")),Te=await jt(fe),Re=[];Te.forEach(ae=>{const Me=ae.data();Re.push({id:ae.id,productId:Me.productId,productName:Me.productName,category:Me.category,unit:Me.unit,quantity:Number(Me.quantity||0),remaining:Number(Me.remaining??Me.quantity??0),purchasePrice:Number(Me.purchasePrice||0),salePrice:Number(Me.salePrice||0),invoiceTotal:Number(Me.invoiceTotal??Number(Me.quantity||0)*Number(Me.purchasePrice||0)),expectedTotal:Number(Me.expectedTotal??Number(Me.quantity||0)*Number(Me.salePrice||0)),date:Me.date,createdAt:Me.createdAt,status:Me.status,notes:Me.notes||"",sku:Me.sku||"",size:Me.size||"",color:Me.color||"",gender:Me.gender||"",brand:Me.brand||"",clientCode:Me.clientCode||""})}),n(Re),s(!1)})()},[]),v.useEffect(()=>{const se=t.find(me=>me.id===m);se&&(C(Number(se.price||0)),se.sku&&Ae(se.sku),se.size&&ce(me=>me||se.size),se.color&&X(me=>me||se.color),se.gender&&Se(me=>me||se.gender),se.brand&&F(me=>me||se.brand))},[m,t]),v.useEffect(()=>{S(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{B(Math.floor(y*T*100)/100)},[y,T]),v.useEffect(()=>{const se=t.find(Te=>Te.id===m);if(se!=null&&se.sku){Ae(se.sku);return}const me=L&&Z?Z:(se==null?void 0:se.category)||"";if(!me&&!pe&&!de&&!ee&&!k){Ae("");return}const fe=$Se({subcat:me,gender:pe||"",color:de||"",size:ee||"",brand:k||""});Ae(fe)},[L,Z,m,pe,de,ee,k,t]);const gt=v.useMemo(()=>r.filter(se=>!(c&&se.date<c||d&&se.date>d||h&&se.productId!==h)),[r,c,d,h]),Ne=v.useMemo(()=>{const se=gt.reduce((Re,ae)=>Re+(ae.invoiceTotal||0),0),me=gt.reduce((Re,ae)=>Re+(ae.expectedTotal||0),0),fe=gt.reduce((Re,ae)=>Re+ae.quantity,0),Te=gt.reduce((Re,ae)=>Re+ae.remaining,0);return{udsIng:fe,udsRem:Te,totalFacturado:se,totalEsperado:me}},[gt]),at=async se=>{se.preventDefault(),o("");const me=!!m&&!L,fe=t.find(Me=>Me.id===m),Te=me?(fe==null?void 0:fe.name)||"":R||"",Re=me?(fe==null?void 0:fe.category)||"":Z||"General",ae=me&&(fe==null?void 0:fe.measurement)||"unidad";if(!Te||y<=0||w<=0){o("Completa nombre/cantidad/costo.");return}if(V&&!k1.test(V)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const Me=await on(ht(Fe,"inventory_clothes_batches"),{productId:me?fe.id:"",productName:Te,category:Re,unit:ae,quantity:y,remaining:y,purchasePrice:w,salePrice:T,invoiceTotal:E,expectedTotal:O,date:g,createdAt:Xt.now(),status:"PENDIENTE",notes:P||"",sku:W||"",size:ee||"",color:de||"",gender:pe||"",brand:k||"",clientCode:V||""});n(xe=>[{id:Me.id,productId:me?fe.id:"",productName:Te,category:Re,unit:ae,quantity:y,remaining:y,purchasePrice:w,salePrice:T,invoiceTotal:E,expectedTotal:O,date:g,createdAt:Xt.now(),status:"PENDIENTE",notes:P||"",sku:W||"",size:ee||"",color:de||"",gender:pe||"",brand:k||"",clientCode:V||""},...xe]),o(" Lote de ropa creado"),p(""),x(dr(new Date,"yyyy-MM-dd")),b(0),I(0),C(0),S(0),B(0),D(""),Ae(""),ce(""),X(""),Se(""),F(""),M(""),q(!1),K(""),te("Camisa")}catch(Me){console.error(Me),o(" Error al crear lote")}},wt=async se=>{confirm(`Marcar PAGADO el lote del ${se.date} (${se.productName})?`)&&(await Hr(Ht(Fe,"inventory_clothes_batches",se.id),{status:"PAGADO"}),n(fe=>fe.map(Te=>Te.id===se.id?{...Te,status:"PAGADO"}:Te)))},kt=se=>{ye(se.id),z(se.date),je(se.quantity),Pe(se.purchasePrice),nt(se.salePrice),ct(Number((se.quantity*se.purchasePrice).toFixed(2))),Ct(Number((se.quantity*se.salePrice).toFixed(2))),He(se.notes||""),we(se.sku||""),ne(se.size||""),Ke(se.color||""),ke(se.gender||""),_e(se.brand||""),Qe(se.clientCode||"")},Lt=()=>{ye(null),z(""),je(0),Pe(0),nt(0),ct(0),Ct(0),He(""),we(""),ne(""),Ke(""),ke(""),_e(""),Qe("")};v.useEffect(()=>{Q&&ct(Math.floor(le*ue*100)/100)},[Q,le,ue]),v.useEffect(()=>{Q&&Ct(Math.floor(le*Ye*100)/100)},[Q,le,Ye]);const qt=async()=>{if(!Q)return;const se=r.find(Re=>Re.id===Q);if(!se)return;const me=Math.max(0,se.quantity-se.remaining),fe=Math.max(0,le-me);if(be&&!k1.test(be)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Te=Ht(Fe,"inventory_clothes_batches",Q);await Hr(Te,{date:Y,quantity:le,purchasePrice:ue,salePrice:Ye,invoiceTotal:mt,expectedTotal:ft,notes:At,remaining:fe,sku:it,size:re,color:Ue,gender:et||"",brand:he||"",clientCode:be||""}),n(Re=>Re.map(ae=>ae.id===Q?{...ae,date:Y,quantity:le,purchasePrice:ue,salePrice:Ye,invoiceTotal:mt,expectedTotal:ft,notes:At,remaining:fe,sku:it,size:re,color:Ue,gender:et||"",brand:he||"",clientCode:be||""}:ae)),Lt(),o(" Lote actualizado")},_t=async se=>{confirm(`Eliminar el lote del ${se.date} (${se.productName})?`)&&(await _n(Ht(Fe,"inventory_clothes_batches",se.id)),n(fe=>fe.filter(Te=>Te.id!==se.id)),o(" Lote eliminado"))},ie=()=>{const se=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),me=ae=>(ae||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fe=gt.map(ae=>`
      <tr>
        <td>${ae.date}</td>
        <td>${(ae.category||"").toUpperCase()}</td>
        <td>${me(ae.productName)}</td>
        <td>${me(ae.sku||"")}</td>
        <td>${me(ae.size||"")}</td>
        <td>${me(ae.color||"")}</td>
        <td>${me(ae.clientCode||"")}</td>
        <td>${me(ae.gender||"")}</td>
        <td>${(ae.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${ae.quantity.toFixed(0)}</td>
        <td style="text-align:right">${ae.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Fi(ae.purchasePrice)}</td>
        <td style="text-align:right">${Fi(ae.salePrice)}</td>
        <td style="text-align:right">${Fi(ae.invoiceTotal||0)}</td>
        <td style="text-align:right">${Fi(ae.expectedTotal||0)}</td>
        <td>${me((ae.notes||"").slice(0,120))}</td>
        <td>${ae.status}</td>
      </tr>`).join(""),Te=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${se}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Ne.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Ne.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Fi(Ne.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Fi(Ne.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Fi(Number((Ne.totalEsperado-Ne.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${fe||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Re=window.open("","_blank");Re&&(Re.document.open(),Re.document.write(Te),Re.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>nr(!0),type:"button",children:"Crear Inventario"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:se=>u(se.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:se=>A(se.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:se=>f(se.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(se=>l.jsxs("option",{value:se.id,children:[se.name,"  ",se.category]},se.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ie,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ne.udsIng.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ne.udsRem.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Fi(Ne.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Fi(Ne.totalFacturado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Fi(Number((Ne.totalEsperado-Ne.totalFacturado).toFixed(2)))]})]})}),l.jsx("div",{className:"bg-white rounded shadow border",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),l.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:a?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):gt.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):gt.map(se=>{const me=Q===se.id;return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 md:p-3 border align-top",children:me?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Y,onChange:fe=>z(fe.target.value)}):se.date}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(se.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:l.jsx("span",{className:"block truncate",title:se.productName,children:se.productName})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:me?l.jsx("input",{className:"w-full border p-1 rounded",value:it,onChange:fe=>we(fe.target.value)}):l.jsx("span",{className:"block truncate",title:se.sku||"",children:se.sku||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:me?l.jsx("input",{className:"w-full border p-1 rounded",value:re,onChange:fe=>ne(fe.target.value)}):se.size||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:me?l.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:fe=>Ke(fe.target.value)}):se.color||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:me?l.jsx("input",{className:"w-full border p-1 rounded",value:be,onChange:fe=>{const Te=fe.target.value;k1.test(Te)&&Qe(Te)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):l.jsx("span",{className:"block truncate",title:se.clientCode||"",children:se.clientCode||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:me?l.jsx("select",{className:"w-full border p-1 rounded",value:et,onChange:fe=>ke(fe.target.value),children:VSe.map(fe=>l.jsx("option",{value:fe,children:fe||""},fe))}):se.gender||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(se.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:me?l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(le)?"":le,onChange:fe=>je(Math.max(0,parseInt(fe.target.value||"0",10)))}):se.quantity.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:me?se.remaining:se.remaining.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:me?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(ue)?"":ue,onChange:fe=>Pe(Math.max(0,parseFloat(fe.target.value||"0")))}):Fi(se.purchasePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:me?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Ye)?"":Ye,onChange:fe=>nt(Math.max(0,parseFloat(fe.target.value||"0")))}):Fi(se.salePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Fi(me?mt:se.invoiceTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Fi(me?ft:se.expectedTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:me?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:At,onChange:fe=>He(fe.target.value),maxLength:500}):l.jsx("span",{className:"block truncate",title:se.notes||"",children:se.notes||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${se.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:me?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):l.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:fe=>dt(fe,se.id),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},se.id)})})]})})}),$e&&id.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:()=>Je(null),className:"fixed inset-0 z-[60]"}),l.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:st.x,top:st.y},onClick:se=>se.stopPropagation(),role:"menu","aria-orientation":"vertical",children:l.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const se=gt.find(me=>me.id===$e);return(se==null?void 0:se.status)==="PENDIENTE"?l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Je(null),wt(se)},children:" Pagar"}):null})(),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const se=gt.find(me=>me.id===$e);se&&(Je(null),kt(se))},children:" Editar"}),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const se=gt.find(me=>me.id===$e);se&&(Je(null),_t(se))},children:" Borrar"})]})})]}),document.body),Dt&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>nr(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>nr(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:at,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:se=>p(se.target.value),children:[l.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(se=>l.jsxs("option",{value:se.id,children:[se.name,"  ",se.category,"  ",se.sku?`SKU: ${se.sku}`:""]},se.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:se=>x(se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:se=>b(Math.max(0,parseInt(se.target.value||"0",10))),placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:se=>I(Math.max(0,parseFloat(se.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:T===0?"":T,onChange:se=>C(Math.max(0,parseFloat(se.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ee,readOnly:!0,onChange:se=>ce(se.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:de,readOnly:!0,onChange:se=>X(se.target.value),placeholder:"Negro, Azul, Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0,onChange:se=>Se(se.target.value),placeholder:"Masculino, Femenino, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:se=>F(se.target.value),placeholder:"Shein, Usado, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:V,onChange:se=>{const me=se.target.value;k1.test(me)&&M(me)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!k1.test(V)&&V.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:P,onChange:se=>D(se.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[P.length,"/500"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Fi(E),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Fi(O),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>nr(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&l.jsx("p",{className:"mt-2 text-sm",children:i})]})}const GSe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],zSe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],qSe=["XS","S","M","L","XL","2XL"],WSe=["2","4","6","8","10","12","14"],XSe=["26","28","30","32","34","36","38"],YSe=["Shein","Usado","Otro"],JSe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function JN(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function ZSe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function eIe(t){const e="ROP",r=JN(t.subcat).slice(0,3)||"GEN",n=ZSe(t.gender),a=JN(t.color).slice(0,3)||"COL",s=JN(t.size)||"TLL",i=JN(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const tIe=/^[A-Za-z0-9._-]{0,32}$/;function rIe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,o]=v.useState(""),[c,u]=v.useState("Shein"),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,I]=v.useState("0"),[T,C]=v.useState(""),[E,S]=v.useState(""),O=v.useMemo(()=>{const M=Number(w||0),L=Number(y||0);return Math.floor(M*L*100)/100},[w,y]),[B,P]=v.useState([]),[D,W]=v.useState(!0),[Ae,ee]=v.useState(""),{refreshKey:ce,refresh:de}=Yl(),[X,pe]=v.useState(!1),Se=v.useMemo(()=>r.toLowerCase()==="jean"?XSe:d==="NINO"||d==="NINA"?WSe:qSe,[r,d]);v.useEffect(()=>{p(eIe({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{W(!0);const M=Kt(ht(Fe,"products_clothes"),Gr("createdAt","desc")),L=await jt(M),q=[];L.forEach(R=>{const K=R.data();q.push({id:R.id,name:K.name??"(sin nombre)",category:K.category??"",measurement:K.measurement??"unidad",sku:K.sku??"",size:K.size||"",color:K.color||"",brand:K.brand||"",gender:K.gender||"",clientCode:K.clientCode||"",notes:K.notes||"",createdAt:K.createdAt??Xt.now()})}),P(q),W(!1)})()},[ce]);const k=()=>{e(""),n("Camisa"),s(""),o(""),u("Shein"),A(""),f(""),x(""),b(""),I("0"),C(""),S("")},F=async M=>{if(M.preventDefault(),ee(""),!t.trim()){ee("Ingresa el nombre del producto.");return}if(h&&!tIe.test(h)){ee("Cdigo del cliente invlido");return}const L=Number(w||0),q=Number(y||0);if(L<0){ee("La cantidad de piezas debe ser 0 o mayor.");return}if(q<0){ee("El precio de venta no puede ser negativo.");return}try{const R=await on(ht(Fe,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:Xt.now(),price:q||0});if(P(K=>[{id:R.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:Xt.now()},...K]),L>0){const K=new Date().toISOString().slice(0,10),Z=T||K;await on(ht(Fe,"inventory_clothes_batches"),{productId:R.id,productName:t.trim(),category:r,unit:"unidad",quantity:L,remaining:L,purchasePrice:0,salePrice:q||0,invoiceTotal:0,expectedTotal:O||0,date:Z,createdAt:Xt.now(),status:"PENDIENTE",notes:E||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}ee(L>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),k()}catch(R){console.error(R),ee(" Error al crear producto")}},V=async M=>{confirm(`Eliminar el producto "${M.name}"?`)&&(await _n(Ht(Fe,"products_clothes",M.id)),P(q=>q.filter(R=>R.id!==M.id)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Dc,{onClick:de,loading:D}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{pe(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),X&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),l.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:M=>e(M.target.value),placeholder:"Ej: Blusa floral"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),l.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:M=>n(M.target.value),children:GSe.map(M=>l.jsx("option",{value:M,children:M},M))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),l.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:M=>A(M.target.value),children:JSe.map(M=>l.jsx("option",{value:M,children:M||""},M))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value),children:[l.jsx("option",{value:"",children:""}),Se.map(M=>l.jsx("option",{value:M,children:M},M))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:M=>o(M.target.value),children:[l.jsx("option",{value:"",children:""}),zSe.map(M=>l.jsx("option",{value:M,children:M},M))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),l.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:M=>u(M.target.value),children:YSe.map(M=>l.jsx("option",{value:M,children:M},M))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),l.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:M=>f(M.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:M=>b(M.target.value),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),l.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:M=>I(M.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),l.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:T,onChange:M=>C(M.target.value)})]}),l.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(O)?"":O.toFixed(2)]})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[l.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),l.jsx("button",{type:"button",onClick:()=>pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Subcat."}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Talla"}),l.jsx("th",{className:"p-2 border",children:"Color"}),l.jsx("th",{className:"p-2 border",children:"Marca"}),l.jsx("th",{className:"p-2 border",children:"Gnero"}),l.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:D?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):B.map(M=>{var L;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(L=M.createdAt)!=null&&L.toDate?M.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:M.category}),l.jsx("td",{className:"p-2 border",children:M.name}),l.jsx("td",{className:"p-2 border",children:M.sku}),l.jsx("td",{className:"p-2 border",children:M.size||""}),l.jsx("td",{className:"p-2 border",children:M.color||""}),l.jsx("td",{className:"p-2 border",children:M.brand||""}),l.jsx("td",{className:"p-2 border",children:M.gender||""}),l.jsx("td",{className:"p-2 border",children:M.clientCode||""}),l.jsx("td",{className:"p-2 border",children:M.notes||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>V(M),children:"Borrar"})})]},M.id)})})]})}),Ae&&l.jsx("p",{className:"mt-2 text-sm",children:Ae})]})}async function nIe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",e)),u=(await jt(i)).docs.map(A=>({id:A.id,data:A.data()})).sort((A,h)=>{var x,y;const f=String(A.data.date||""),m=String(h.data.date||"");if(f!==m)return f<m?-1:1;const p=((x=A.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(A=>Ht(Fe,"inventory_clothes_batches",A.id)),d=[];return await Ni(Fe,async A=>{const h=await Promise.all(u.map(m=>A.get(m)));let f=s;for(let m=0;m<u.length&&f>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,f),I=Math.max(0,b-w);A.update(p,{remaining:I}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),f-=w}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} unidades.`);if(a)for(const m of d)await on(ht(Fe,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:Xt.now()})}),{allocations:d}}async function Mj(t){const e=Ht(Fe,"sales_clothes",t),r=await So(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const o={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const A=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];o[d]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];o[u]=d.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),A=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):o[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:A.length?A:void 0})}}else{const o=n.item||{},c=String(o.productId||n.productId||""),u=Math.max(0,Math.floor(Number(o.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(o.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Ni(Fe,async o=>{o.delete(e)}),{restored:0}):a.every(o=>Array.isArray(o.allocations)&&o.allocations.length>0)?(await Ni(Fe,async c=>{const u=[];for(const A of a)for(const h of A.allocations||[])u.push({ref:Ht(Fe,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(A=>c.get(A.ref)));for(let A=0;A<u.length;A++){const h=d[A];if(!h.exists())continue;const f=h.data(),m=Math.max(0,Math.floor(Number(f.remaining||0)));c.update(u[A].ref,{remaining:m+u[A].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,A)=>d+A.qty,0),0)}):(await Ni(Fe,async o=>{const c={};for(const f of a){if(!f.productId||f.qty<=0)continue;const m=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",f.productId)),g=(await jt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[f.productId]=g}const u=[];for(const f of a){if(!f.productId||f.qty<=0)continue;if(Array.isArray(f.allocations)&&f.allocations.length>0){for(const g of f.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[f.productId]||[];let p=f.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,f.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const f of u)d[f.id]=(d[f.id]||0)+Math.max(0,Math.floor(Number(f.addBack||0)));const A=Object.keys(d).map(f=>Ht(Fe,"inventory_clothes_batches",f)),h=await Promise.all(A.map(f=>o.get(f)));for(let f=0;f<A.length;f++){const m=h[f];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[A[f].id]||0)));o.update(A[f],{remaining:g+x})}o.delete(e)}),{restored:a.reduce((o,c)=>o+c.qty,0)})}const TQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],kA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function ZN(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function PQ(t){const e=Kt(ht(Fe,"ar_movements"),Zt("ref.saleId","==",t)),r=await jt(e);await Promise.all(r.docs.map(n=>_n(Ht(Fe,"ar_movements",n.id))))}function aIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,o]=v.useState([]),c=async Ne=>{e(!0),n(!0),s(Ne),o([]);try{const wt=(await jt(Kt(ht(Fe,"sales_clothes"),Zt("__name__","==",Ne)))).docs[0],kt=wt==null?void 0:wt.data(),qt=(Array.isArray(kt==null?void 0:kt.items)?kt.items:kt!=null&&kt.item?[kt.item]:[]).map(_t=>({productName:String(_t.productName||""),qty:Number(_t.qty||0),unitPrice:Number(_t.unitPrice||0),discount:Number(_t.discount||0),total:Number(_t.total||0)}));o(qt)}catch(at){console.error(at)}finally{n(!1)}},[u,d]=v.useState(""),[A,h]=v.useState("+505 "),[f,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[I,T]=v.useState([]),[C,E]=v.useState(!0),[S,O]=v.useState(""),[B,P]=v.useState(null),[D,W]=v.useState(""),[Ae,ee]=v.useState("+505 "),[ce,de]=v.useState(""),[X,pe]=v.useState(""),[Se,k]=v.useState("ACTIVO"),[F,V]=v.useState(0),[M,L]=v.useState(!1),[q,R]=v.useState(null),[K,Z]=v.useState(!1),[te,Q]=v.useState([]),[ye,Y]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[z,le]=v.useState(!1),[je,ue]=v.useState(0),[Pe,Ye]=v.useState(new Date().toISOString().slice(0,10)),[nt,mt]=v.useState(""),[ct,ft]=v.useState(!1),[Ct,At]=v.useState(null),[He,it]=v.useState(""),[we,re]=v.useState(0),[ne,Ue]=v.useState(""),[Ke,et]=v.useState(!1);v.useEffect(()=>{(async()=>{const Ne=Kt(ht(Fe,"customers_clothes"),Gr("createdAt","desc")),at=await jt(Ne),wt=[];at.forEach(kt=>{const Lt=kt.data();wt.push({id:kt.id,name:Lt.name??"",phone:Lt.phone??"+505 ",place:Lt.place??"",notes:Lt.notes??"",status:Lt.status??"ACTIVO",creditLimit:Number(Lt.creditLimit??0),createdAt:Lt.createdAt??Xt.now(),balance:0})});for(const kt of wt)try{const Lt=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",kt.id)),qt=await jt(Lt);let _t=0;qt.forEach(ie=>_t+=Number(ie.data().amount||0)),kt.balance=_t}catch{kt.balance=0}T(wt),E(!1)})()},[]);const ke=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},he=async Ne=>{if(Ne.preventDefault(),O(""),!u.trim()){O("Ingresa el nombre.");return}const at=ZN(A);if(at.length<6){O("Telfono incompleto.");return}try{const wt=await on(ht(Fe,"customers_clothes"),{name:u.trim(),phone:at,place:f||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:Xt.now()});T(kt=>[{id:wt.id,name:u.trim(),phone:at,place:f||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:Xt.now(),balance:0},...kt]),ke(),et(!1),O(" Cliente creado")}catch(wt){console.error(wt),O(" Error al crear cliente")}},_e=Ne=>{P(Ne.id),W(Ne.name),ee(Ne.phone||"+505 "),de(Ne.place||""),pe(Ne.notes||""),k(Ne.status||"ACTIVO"),V(Number(Ne.creditLimit||0))},be=()=>{P(null),W(""),ee("+505 "),de(""),pe(""),k("ACTIVO"),V(0)},Qe=async()=>{if(!B)return;const Ne=ZN(Ae);if(!D.trim()){O("Ingresa el nombre.");return}try{await Hr(Ht(Fe,"customers_clothes",B),{name:D.trim(),phone:Ne,place:ce||"",notes:X||"",status:Se,creditLimit:Number(F||0)}),T(at=>at.map(wt=>wt.id===B?{...wt,name:D.trim(),phone:Ne,place:ce||"",notes:X||"",status:Se,creditLimit:Number(F||0)}:wt)),be(),O(" Cliente actualizado")}catch(at){console.error(at),O(" Error al actualizar")}},$e=async Ne=>{if(confirm(`Eliminar al cliente "${Ne.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const wt=Kt(ht(Fe,"sales_clothes"),Zt("customerId","==",Ne.id)),kt=await jt(wt);for(const _t of kt.docs){const ie=_t.id;try{await Mj(ie)}catch(se){console.warn("restoreSaleAndDeleteClothes error",se);try{await _n(Ht(Fe,"sales_clothes",ie))}catch{}}await PQ(ie)}const Lt=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",Ne.id)),qt=await jt(Lt);await Promise.all(qt.docs.map(_t=>_n(Ht(Fe,"ar_movements",_t.id)))),await _n(Ht(Fe,"customers_clothes",Ne.id)),T(_t=>_t.filter(ie=>ie.id!==Ne.id)),O(" Cliente eliminado y prendas devueltas al inventario")}catch(wt){console.error(wt),O(" No se pudo eliminar el cliente.")}finally{E(!1)}},Je=async Ne=>{R(Ne),Q([]),Y({saldoActual:0,totalAbonado:0,totalCargos:0}),L(!0),le(!1),ue(0),Ye(new Date().toISOString().slice(0,10)),mt(""),At(null),Z(!0);try{const at=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",Ne.id)),wt=await jt(at),kt=[];wt.forEach(Lt=>{var _t,ie;const qt=Lt.data();kt.push({id:Lt.id,date:qt.date??((ie=(_t=qt.createdAt)==null?void 0:_t.toDate)!=null&&ie.call(_t)?qt.createdAt.toDate().toISOString().slice(0,10):""),type:qt.type??"CARGO",amount:Number(qt.amount||0),ref:qt.ref||{},comment:qt.comment||"",createdAt:qt.createdAt})}),kt.sort((Lt,qt)=>{var se,me;if(Lt.date!==qt.date)return Lt.date.localeCompare(qt.date);const _t=((se=Lt.createdAt)==null?void 0:se.seconds)||0,ie=((me=qt.createdAt)==null?void 0:me.seconds)||0;return _t-ie}),Q(kt),st(kt)}catch(at){console.error(at),O(" No se pudo cargar el estado de cuenta")}finally{Z(!1)}},st=Ne=>{const at=Ne.reduce((Lt,qt)=>Lt+(Number(qt.amount)||0),0),wt=Ne.filter(Lt=>Number(Lt.amount)<0).reduce((Lt,qt)=>Lt+Math.abs(Number(qt.amount)||0),0),kt=Ne.filter(Lt=>Number(Lt.amount)>0).reduce((Lt,qt)=>Lt+Number(qt.amount)||0,0);Y({saldoActual:at,totalAbonado:wt,totalCargos:kt})},yt=async()=>{if(!q)return;O("");const Ne=Number(je||0);if(!(Ne>0)){O("Ingresa un monto de abono mayor a 0.");return}const at=parseFloat(Ne.toFixed(2));if(!Pe){O("Selecciona la fecha del abono.");return}try{ft(!0);const wt={customerId:q.id,type:"ABONO",amount:-at,date:Pe,comment:nt||"",createdAt:Xt.now()},Lt={id:(await on(ht(Fe,"ar_movements"),wt)).id,date:Pe,type:"ABONO",amount:-at,comment:nt||"",createdAt:Xt.now()},qt=[...te,Lt].sort((_t,ie)=>{var fe,Te;if(_t.date!==ie.date)return _t.date.localeCompare(ie.date);const se=((fe=_t.createdAt)==null?void 0:fe.seconds)||0,me=((Te=ie.createdAt)==null?void 0:Te.seconds)||0;return se-me});Q(qt),st(qt),T(_t=>_t.map(ie=>ie.id===q.id?{...ie,balance:(ie.balance||0)-at}:ie)),R(_t=>_t&&{..._t,balance:(_t.balance||0)-at}),ue(0),mt(""),Ye(new Date().toISOString().slice(0,10)),le(!1),O(" Abono registrado")}catch(wt){console.error(wt),O(" Error al registrar el abono")}finally{ft(!1)}},Dt=Ne=>{At(Ne.id),it(Ne.date||new Date().toISOString().slice(0,10)),re(Math.abs(Number(Ne.amount||0))),Ue(Ne.comment||"")},nr=()=>{At(null),it(""),re(0),Ue("")},Ce=async()=>{if(!Ct)return;const Ne=te.findIndex(Lt=>Lt.id===Ct);if(Ne===-1)return;const at=te[Ne],wt=Number(we||0);if(!(wt>0)){O("El monto debe ser mayor a 0.");return}const kt=at.type==="ABONO"?-parseFloat(wt.toFixed(2)):+parseFloat(wt.toFixed(2));try{await Hr(Ht(Fe,"ar_movements",Ct),{date:He,amount:kt,comment:ne||""});const Lt=[...te];Lt[Ne]={...at,date:He,amount:kt,comment:ne||""},Lt.sort((_t,ie)=>{var fe,Te;if(_t.date!==ie.date)return _t.date.localeCompare(ie.date);const se=((fe=_t.createdAt)==null?void 0:fe.seconds)||0,me=((Te=ie.createdAt)==null?void 0:Te.seconds)||0;return se-me}),Q(Lt),st(Lt);const qt=Lt.reduce((_t,ie)=>_t+(Number(ie.amount)||0),0);T(_t=>_t.map(ie=>ie.id===(q==null?void 0:q.id)?{...ie,balance:qt}:ie)),R(_t=>_t&&{..._t,balance:qt}),nr(),O(" Movimiento actualizado")}catch(Lt){console.error(Lt),O(" Error al actualizar movimiento")}},dt=async Ne=>{var wt,kt;if(confirm(`Eliminar este movimiento (${Ne.type==="ABONO"?"Abono":"Compra"}) del ${Ne.date}?${Ne.type==="CARGO"&&((wt=Ne.ref)!=null&&wt.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),Ne.type==="CARGO"&&((kt=Ne.ref)!=null&&kt.saleId)){try{await Mj(Ne.ref.saleId)}catch(_t){console.warn("restoreSaleAndDeleteClothes error",_t),E(!1),O(" No se pudo devolver inventario de la venta.");return}await PQ(Ne.ref.saleId)}else await _n(Ht(Fe,"ar_movements",Ne.id));const Lt=te.filter(_t=>{var ie,se;return Ne.type==="CARGO"&&((ie=Ne.ref)!=null&&ie.saleId)?((se=_t.ref)==null?void 0:se.saleId)!==Ne.ref.saleId:_t.id!==Ne.id});Q(Lt),st(Lt);const qt=Lt.reduce((_t,ie)=>_t+(Number(ie.amount)||0),0);T(_t=>_t.map(ie=>ie.id===(q==null?void 0:q.id)?{...ie,balance:qt}:ie)),R(_t=>_t&&{..._t,balance:qt}),O(" Movimiento eliminado")}catch(Lt){console.error(Lt),O(" Error al eliminar movimiento")}finally{E(!1)}},gt=v.useMemo(()=>[...I].sort((Ne,at)=>{var wt,kt;return Ne.status!==at.status?Ne.status==="BLOQUEADO"?1:-1:(((wt=at.createdAt)==null?void 0:wt.seconds)||0)-(((kt=Ne.createdAt)==null?void 0:kt.seconds)||0)}),[I]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>et(!0),type:"button",children:"Crear Cliente"})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Telfono"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Lmite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:C?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):gt.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):gt.map(Ne=>{var wt;const at=B===Ne.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(wt=Ne.createdAt)!=null&&wt.toDate?Ne.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:at?l.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:kt=>W(kt.target.value)}):Ne.name}),l.jsx("td",{className:"p-2 border",children:at?l.jsx("input",{className:"w-full border p-1 rounded",value:Ae,onChange:kt=>ee(ZN(kt.target.value))}):Ne.phone}),l.jsx("td",{className:"p-2 border",children:at?l.jsxs("select",{className:"w-full border p-1 rounded",value:ce,onChange:kt=>de(kt.target.value),children:[l.jsx("option",{value:"",children:""}),TQ.map(kt=>l.jsx("option",{value:kt,children:kt},kt))]}):Ne.place||""}),l.jsx("td",{className:"p-2 border",children:at?l.jsxs("select",{className:"w-full border p-1 rounded",value:Se,onChange:kt=>k(kt.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Ne.status})}),l.jsx("td",{className:"p-2 border",children:at?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:kt=>V(Math.max(0,Number(kt.target.value||0)))}):kA(Ne.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:kA(Ne.balance||0)}),l.jsx("td",{className:"p-2 border",children:at?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:X,onChange:kt=>pe(kt.target.value),maxLength:500}):l.jsx("span",{title:Ne.notes||"",children:(Ne.notes||"").length>40?(Ne.notes||"").slice(0,40)+"":Ne.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:at?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Qe,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:be,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_e(Ne),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>$e(Ne),children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Je(Ne),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Ne.id)})})]})}),S&&l.jsx("p",{className:"mt-2 text-sm",children:S}),Ke&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>et(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>et(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:he,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:Ne=>d(Ne.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:Ne=>h(ZN(Ne.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:Ne=>m(Ne.target.value),children:[l.jsx("option",{value:"",children:""}),TQ.map(Ne=>l.jsx("option",{value:Ne,children:Ne},Ne))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:Ne=>y(Ne.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Ne=>w(Math.max(0,Number(Ne.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:Ne=>g(Ne.target.value),maxLength:500,placeholder:"Notas del cliente"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>et(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),M&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(q==null?void 0:q.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{ue(0),Ye(new Date().toISOString().slice(0,10)),mt(""),le(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>L(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:kA(ye.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:kA(ye.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:kA(ye.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:K?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):te.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):te.map(Ne=>{var wt,kt;const at=Ct===Ne.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:at?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:He,onChange:Lt=>it(Lt.target.value)}):Ne.date||""}),l.jsx("td",{className:"p-2 border",children:Ne.amount>=0?(wt=Ne.ref)!=null&&wt.saleId?l.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(Ne.ref.saleId),children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(kt=Ne.ref)!=null&&kt.saleId?`Venta #${Ne.ref.saleId}`:""}),l.jsx("td",{className:"p-2 border",children:at?l.jsx("input",{className:"w-full border p-1 rounded",value:ne,onChange:Lt=>Ue(Lt.target.value),placeholder:"Comentario"}):l.jsx("span",{title:Ne.comment||"",children:(Ne.comment||"").length>40?(Ne.comment||"").slice(0,40)+"":Ne.comment||""})}),l.jsx("td",{className:"p-2 border font-semibold",children:at?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(we)?"":we,onChange:Lt=>{const qt=Number(Lt.target.value||0),_t=Number.isFinite(qt)?Math.max(0,parseFloat(qt.toFixed(2))):0;re(_t)},placeholder:"0.00",title:Ne.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):kA(Ne.amount)}),l.jsx("td",{className:"p-2 border",children:at?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ce,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:nr,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Dt(Ne),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>dt(Ne),children:"Borrar"})]})})]},Ne.id)})})]})})]})}),z&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(q==null?void 0:q.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Pe,onChange:Ne=>Ye(Ne.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:je===0?"":je,onChange:Ne=>{const at=Number(Ne.target.value||0),wt=Number.isFinite(at)?Math.max(0,parseFloat(at.toFixed(2))):0;ue(wt)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:nt,onChange:Ne=>mt(Ne.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[nt.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>le(!1),disabled:ct,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:yt,disabled:ct,children:ct?"Guardando...":"Guardar abono"})]})]})}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((Ne,at)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:Ne.productName}),l.jsx("td",{className:"p-2 border text-right",children:Ne.qty}),l.jsx("td",{className:"p-2 border text-right",children:kA(Ne.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:kA(Ne.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:kA(Ne.total)})]},at))})]})})]})})]})}const Sg=t=>`C$ ${(Number(t)||0).toFixed(2)}`,sIe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function iIe(t){if(!t)return 0;const e=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",t)),r=await jt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const o=i.data(),c=String(o.date||"0000-00-00"),u=Number(o.salePrice||0),d=o.createdAt,A=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=A,s=u):c===n&&A>a&&(a=A,s=u)}),Number(s||0)}async function jQ(t){if(!t)return 0;const e=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",t)),r=await jt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function kQ(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function oIe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState({}),[i,o]=v.useState("CONTADO"),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(new Date().toISOString().slice(0,10)),[m,p]=v.useState(""),[g,x]=v.useState([]),y=v.useMemo(()=>g.reduce((Y,z)=>Y+(z.qty||0),0),[g]),b=v.useMemo(()=>{const Y=g.reduce((z,le)=>{const je=Math.max(0,(Number(le.unitPrice)||0)*(le.qty||0)-(Number(le.discount)||0));return z+je},0);return Math.floor(Y*100)/100},[g]),[w,I]=v.useState(0),[T,C]=v.useState(""),[E,S]=v.useState(!1),[O,B]=v.useState(!1),[P,D]=v.useState(""),[W,Ae]=v.useState("+505 "),[ee,ce]=v.useState(""),[de,X]=v.useState(""),[pe,Se]=v.useState("ACTIVO"),[k,F]=v.useState(0),V=()=>{D(""),Ae("+505 "),ce(""),X(""),Se("ACTIVO"),F(0)};v.useEffect(()=>{(async()=>{const Y=Kt(ht(Fe,"customers_clothes"),Gr("createdAt","desc")),z=await jt(Y),le=[];z.forEach(ct=>{const ft=ct.data();le.push({id:ct.id,name:ft.name??"",phone:ft.phone??"+505 ",place:ft.place??"",status:ft.status??"ACTIVO",creditLimit:Number(ft.creditLimit??0),balance:0})});for(const ct of le)try{const ft=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",ct.id)),Ct=await jt(ft);let At=0;Ct.forEach(He=>At+=Number(He.data().amount||0)),ct.balance=At}catch{ct.balance=0}e(le);const je=Kt(ht(Fe,"products_clothes"),Gr("createdAt","desc")),ue=await jt(je),Pe=[];ue.forEach(ct=>{const ft=ct.data();Pe.push({id:ct.id,name:ft.name??"(sin nombre)",sku:ft.sku??""})}),n(Pe);const Ye=Kt(ht(Fe,"inventory_clothes_batches"),Zt("remaining",">",0)),nt=await jt(Ye),mt={};nt.forEach(ct=>{const ft=ct.data(),Ct=ft.productId||"",At=Number(ft.remaining||0);Ct&&(mt[Ct]=(mt[Ct]||0)+At)}),s(mt)})()},[]);const M=v.useMemo(()=>t.find(Y=>Y.id===c),[t,c]),L=(M==null?void 0:M.balance)||0,q=i==="CREDITO"?L+Math.max(0,Number(b||0))-Math.max(0,Number(w||0)):0,R=async Y=>{if(!Y)return;if(g.some(Pe=>Pe.productId===Y)){p("");return}const z=r.find(Pe=>Pe.id===Y);if(!z){p("");return}let le=await iIe(Y);le||(le=Number((z==null?void 0:z.price)||0));const je=await jQ(Y),ue={productId:Y,productName:z.name||"",sku:z.sku||"",unitPrice:Number(le)||0,available:Number(je)||0,qty:0,discount:0};x(Pe=>[...Pe,ue]),p("")},K=(Y,z)=>{x(le=>le.map(je=>{if(je.productId!==Y)return je;if(z==="")return{...je,qty:0};const ue=Math.max(0,Math.floor(Number(z)));return{...je,qty:ue}}))},Z=(Y,z)=>{x(le=>le.map(je=>{if(je.productId!==Y)return je;if(z==="")return{...je,discount:0};const ue=Math.max(0,Math.floor(Number(z)));return{...je,discount:ue}}))},te=Y=>x(z=>z.filter(le=>le.productId!==Y)),Q=async()=>{if(!h)return"Selecciona la fecha.";if(g.length===0)return"Agrega al menos un producto.";const Y=g.filter(z=>(z.qty||0)>0);if(Y.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(b>0))return"El total debe ser mayor a cero.";if(i==="CONTADO"){if(!d.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!c)return"Selecciona un cliente (crdito).";if(w<0)return"El pago inicial no puede ser negativo.";if(w>b)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const z of Y){const le=await jQ(z.productId);if(z.qty>le)return`Inventario insuficiente para "${z.productName}". Disponible: ${le} unidades.`;const je=(Number(z.unitPrice)||0)*(z.qty||0),ue=Number(z.discount)||0;if(!Number.isInteger(ue)||ue<0)return`El descuento en "${z.productName}" debe ser entero y  0.`;if(ue>je)return`El descuento en "${z.productName}" no puede exceder C$ ${je.toFixed(2)}.`}return null},ye=async Y=>{Y.preventDefault(),C("");const z=await Q();if(z){C(" "+z);return}try{S(!0);const le=g.filter(Ye=>(Ye.qty||0)>0).map(Ye=>{const nt=(Number(Ye.unitPrice)||0)*(Ye.qty||0),mt=Math.max(0,Math.floor(Number(Ye.discount)||0)),ct=Math.max(0,nt-mt);return{productId:Ye.productId,productName:Ye.productName,sku:Ye.sku||"",qty:Ye.qty,unitPrice:Number(Ye.unitPrice)||0,discount:mt,total:Math.floor(ct*100)/100}}),je={type:i,date:h,createdAt:Xt.now(),itemsTotal:Number(b)||0,total:Number(b)||0,quantity:Number(y)||0,items:le};i==="CONTADO"?je.customerName=d.trim():(je.customerId=c,je.downPayment=Number(w)||0);const ue=await on(ht(Fe,"sales_clothes"),je);if(i==="CREDITO"&&c){const Ye={customerId:c,date:h,createdAt:Xt.now(),ref:{saleId:ue.id}};await on(ht(Fe,"ar_movements"),{...Ye,type:"CARGO",amount:Number(b)||0}),Number(w)>0&&await on(ht(Fe,"ar_movements"),{...Ye,type:"ABONO",amount:-Number(w)})}const Pe={};for(const Ye of le)if(Ye.qty>0){const{allocations:nt}=await nIe({productId:Ye.productId,quantity:Ye.qty,saleDate:h,saleId:ue.id});Pe[Ye.productId]={productId:Ye.productId,allocations:nt}}await Hr(Ht(Fe,"sales_clothes",ue.id),{allocationsByItem:Pe}),o("CONTADO"),u(""),A(""),f(new Date().toISOString().slice(0,10)),x([]),I(0),i==="CREDITO"&&c&&e(Ye=>Ye.map(nt=>nt.id===c?{...nt,balance:(nt.balance||0)+(Number(b)||0)-(Number(w)||0)}:nt)),C(" Venta registrada"),(async()=>{const Ye=Kt(ht(Fe,"inventory_clothes_batches"),Zt("remaining",">",0)),nt=await jt(Ye),mt={};nt.forEach(ct=>{const ft=ct.data(),Ct=ft.productId||"",At=Number(ft.remaining||0);Ct&&(mt[Ct]=(mt[Ct]||0)+At)}),s(mt)})()}catch(le){console.error(le),C(" Error al guardar la venta")}finally{S(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),l.jsxs("form",{onSubmit:ye,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:Y=>o(Y.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:d,onChange:Y=>A(Y.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border p-2 rounded",value:c,onChange:Y=>u(Y.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(Y=>l.jsxs("option",{value:Y.status==="ACTIVO"?Y.id:"",disabled:Y.status==="BLOQUEADO",children:[Y.name," | ",Y.phone," | Saldo: ",Sg(Y.balance||0)]},Y.id))]}),l.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>B(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:Sg(L)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:Y=>I(Math.max(0,Number(Y.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:Sg(q)})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:h,onChange:Y=>f(Y.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:async Y=>{const z=Y.target.value;p(z),await R(z)},children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(Y=>{const z=g.some(ue=>ue.productId===Y.id),le=a[Y.id]||0,je=z||le<=0;return l.jsxs("option",{value:je?"":Y.id,disabled:je,children:[Y.name," ",Y.sku?` ${Y.sku}`:""," ",le>0?`(disp: ${le})`:"(sin stock)",z?" (seleccionado)":""]},Y.id)})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("div",{className:"border rounded overflow-hidden",children:[l.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[l.jsx("div",{className:"col-span-4",children:"Producto"}),l.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),l.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),l.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),l.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),l.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),l.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),g.length===0?l.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):g.map(Y=>{const z=Math.max(0,(Y.available||0)-(Y.qty||0)),le=(Number(Y.unitPrice)||0)*(Y.qty||0),je=Math.max(0,le-(Number(Y.discount)||0));return l.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[l.jsx("div",{className:"col-span-4",children:l.jsxs("div",{className:"font-medium",children:[Y.productName,Y.sku?`  ${Y.sku}`:""]})}),l.jsx("div",{className:"col-span-2 text-right",children:Sg(Y.unitPrice)}),l.jsx("div",{className:"col-span-2 text-right",children:z}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y.qty)||Y.qty===0?"":Y.qty,onChange:ue=>K(Y.productId,ue.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y.discount)||Y.discount===0?"":Y.discount,onChange:ue=>Z(Y.productId,ue.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),l.jsx("div",{className:"col-span-1 text-right",children:Sg(je)}),l.jsx("div",{className:"col-span-1 text-center",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>te(Y.productId),title:"Quitar producto",children:""})})]},Y.productId)})]}),g.length>0&&l.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),l.jsx("span",{className:"font-semibold",children:y})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total: "}),l.jsx("span",{className:"font-semibold",children:Sg(b)})]})]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:E,children:E?"Guardando...":"Registrar venta"})})]}),T&&l.jsx("p",{className:"mt-2 text-sm",children:T}),O&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:P,onChange:Y=>D(Y.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:W,onChange:Y=>Ae(kQ(Y.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:ee,onChange:Y=>ce(Y.target.value),children:[l.jsx("option",{value:"",children:""}),sIe.map(Y=>l.jsx("option",{value:Y,children:Y},Y))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:Y=>Se(Y.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:Y=>F(Math.max(0,Number(Y.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:de,onChange:Y=>X(Y.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{V(),B(!1)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(C(""),!P.trim()){C("Ingresa el nombre del nuevo cliente.");return}const Y=kQ(W);try{const z=await on(ht(Fe,"customers_clothes"),{name:P.trim(),phone:Y,place:ee||"",notes:de||"",status:pe,creditLimit:Number(k||0),createdAt:Xt.now()}),le={id:z.id,name:P.trim(),phone:Y,place:ee||"",status:pe,creditLimit:Number(k||0),balance:0};e(je=>[le,...je]),u(z.id),V(),B(!1),C(" Cliente creado")}catch(z){console.error(z),C(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),E&&l.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[l.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const li=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function NC(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?dr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function lIe(t,e){const r=NC(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function cIe(t,e,r,n){const a={};for(const o of t)a[o.productId]||(a[o.productId]={productName:o.productName,lots:[]}),a[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(a))a[o].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((o,c)=>o.date.localeCompare(c.date));let i=0;for(const o of s)for(const c of o.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const h=Math.min(A.qtyLeft,d);o.date>=r&&o.date<=n&&(i+=h*A.cost),A.qtyLeft-=h,d-=h}}return i}function uIe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[i,o]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(!1),[E,S]=v.useState(null),[O,B]=v.useState([]),[P,D]=v.useState(!1),[W,Ae]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),I("");try{const k=await jt(ht(Fe,"sales_clothes")),F=[],V=[];k.forEach(Y=>{const z=Y.data(),le=lIe(z,Y.id);le&&(le.date<=a&&F.push(le),le.date>=r&&le.date<=a&&V.push(le))}),u(F),o(V);const M=await jt(ht(Fe,"inventory_clothes_batches")),L=[];M.forEach(Y=>{const z=Y.data(),le=NC(z);!le||le>a||L.push({id:Y.id,productId:z.productId,productName:z.productName||"",date:le,quantity:Number(z.quantity||0),remaining:Number(z.remaining||0),purchasePrice:Number(z.purchasePrice||0)})}),A(L);const q=await jt(ht(Fe,"expenses_clothes")),R=[];q.forEach(Y=>{const z=Y.data(),le=NC(z);le&&le>=r&&le<=a&&R.push({id:Y.id,date:le,category:z.category||"",description:z.description||"",amount:Number(z.amount||0),status:z.status||""})}),f(R);const K=await jt(ht(Fe,"ar_movements")),Z=[],te={};K.forEach(Y=>{const z=Y.data(),le=NC(z);if(!le)return;const je=z.customerId,ue=Number(z.amount||0);je&&(te[je]=(te[je]||0)+ue),z.type==="ABONO"&&le>=r&&le<=a&&Z.push({id:Y.id,customerId:je,type:"ABONO",amount:ue,date:le})}),p(Z);const Q=await jt(ht(Fe,"customers_clothes")),ye=[];Q.forEach(Y=>{const z=Y.data();ye.push({id:Y.id,name:z.name||"",balance:te[Y.id]||0})}),x(ye)}catch(k){console.error(k),I(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const ee=v.useMemo(()=>{try{return cIe(d,c,r,a)}catch(k){return console.error(k),0}},[d,c,r,a]),ce=v.useMemo(()=>{const k=i.reduce((te,Q)=>te+(Q.total||0),0),F=h.reduce((te,Q)=>te+(Q.amount||0),0),V=k-ee,M=V-F,L=m.reduce((te,Q)=>te+Math.abs(Q.amount||0),0),q=g.filter(te=>(te.balance||0)>0),R=q.reduce((te,Q)=>te+(Q.balance||0),0);let K=0,Z=0;for(const te of i){const Q=(te.items||[]).reduce((ye,Y)=>ye+(Number(Y.qty)||0),0);te.type==="CONTADO"?K+=Q:Z+=Q}return{ventasTotales:k,costoMercaderia:ee,gastosPeriodo:F,gananciaAntes:V,gananciaDespues:M,abonosRecibidos:L,saldosPendientes:R,clientesConSaldo:q.length,prendasCash:K,prendasCredito:Z}},[i,h,m,g,ee]),de=v.useMemo(()=>{const k={};for(const F of i){if(F.type!=="CREDITO"||!F.customerId)continue;const V=(F.items||[]).reduce((M,L)=>M+(Number(L.qty)||0),0);k[F.customerId]=(k[F.customerId]||0)+V}return g.filter(F=>(F.balance||0)>0).map(F=>({customerId:F.id,name:F.name,prendasCredito:k[F.id]||0,saldo:F.balance||0})).sort((F,V)=>V.saldo-F.saldo)},[g,i]),X=v.useMemo(()=>{const k={};return g.forEach(F=>k[F.id]=F.name),k},[g]),pe=v.useMemo(()=>[...i].sort((k,F)=>F.date.localeCompare(k.date)).map(k=>{var M;const F=(k.items||[]).reduce((L,q)=>L+(Number(q.qty)||0),0);let V="Cash";return k.type==="CREDITO"&&k.customerId?V=X[k.customerId]||"":k.type==="CONTADO"&&(V=((M=k.customerName)==null?void 0:M.trim())||"Cash"),{id:k.id,date:k.date,type:k.type==="CREDITO"?"Crdito":"Cash",customer:V,piezas:F,total:Number(k.total||0)}}),[i,X]),Se=async k=>{C(!0),S({id:k.customerId,name:k.name}),B([]),D(!0),Ae({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const F=[];let V=0,M=0,L=0;for(const Z of i)if(!(Z.type!=="CREDITO"||Z.customerId!==k.customerId))for(const te of Z.items||[]){const Q=Number(te.qty||0),ye=Number(te.unitPrice||0),Y=Q*ye,z=Math.max(0,Number(te.discount||0)),le=Math.max(0,Y-z);F.push({saleId:Z.id,date:Z.date,productName:te.productName,sku:te.sku||"",qty:Q,unitPrice:ye,lineTotal:Y,discount:z,lineFinal:le}),V+=Y,M+=z,L+=le}let q=0;for(const Z of m)Z.customerId===k.customerId&&(q+=Math.abs(Z.amount||0));const R=g.find(Z=>Z.id===k.customerId),K=(R==null?void 0:R.balance)||0;B(F),Ae({totalBruto:V,totalDescuento:M,totalFiado:L,saldoActual:K,abonadoPeriodo:q})}catch(F){console.error(F),I(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(Dc,{onClick:e,loading:y})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:k=>n(k.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:k=>s(k.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:li(ce.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(ce.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:li(ce.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),l.jsx("div",{className:"text-xl font-semibold",children:li(ce.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:li(ce.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:li(ce.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:li(ce.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:ce.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:ce.prendasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),l.jsx("div",{className:"text-xl font-semibold",children:ce.prendasCredito})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):de.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):de.map(k=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:k.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Se({customerId:k.customerId,name:k.name}),title:"Ver piezas fiadas del periodo",children:k.prendasCredito})}),l.jsx("td",{className:"p-2 border font-semibold",children:li(k.saldo)})]},k.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):pe.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):pe.map(k=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:k.date}),l.jsx("td",{className:"p-2 border",children:k.customer}),l.jsx("td",{className:"p-2 border",children:k.type}),l.jsx("td",{className:"p-2 border",children:k.piezas}),l.jsx("td",{className:"p-2 border",children:li(k.total)})]},k.id))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((k,F)=>k.date.localeCompare(F.date)).map(k=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:k.date}),l.jsx("td",{className:"p-2 border",children:k.category||""}),l.jsx("td",{className:"p-2 border",children:k.description?l.jsx("span",{title:k.description,children:k.description.length>40?k.description.slice(0,40)+"":k.description}):""}),l.jsx("td",{className:"p-2 border",children:li(k.amount)}),l.jsx("td",{className:"p-2 border",children:k.status||""})]},k.id))})]})}),w&&l.jsx("p",{className:"mt-2 text-sm",children:w}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>C(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(W.totalBruto)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(W.totalDescuento)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(W.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:li(W.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:li(W.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Pieza"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Cant."}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"})," ",l.jsx("th",{className:"p-2 border",children:"Descuento"})," ",l.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),l.jsx("tbody",{children:P?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):O.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):O.sort((k,F)=>k.date.localeCompare(F.date)).map((k,F)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:k.date}),l.jsx("td",{className:"p-2 border",children:k.productName}),l.jsx("td",{className:"p-2 border",children:k.sku||""}),l.jsx("td",{className:"p-2 border",children:k.qty}),l.jsx("td",{className:"p-2 border",children:li(k.unitPrice)}),l.jsx("td",{className:"p-2 border",children:li(k.lineTotal)}),l.jsx("td",{className:"p-2 border",children:li(k.discount)}),l.jsx("td",{className:"p-2 border",children:li(k.lineFinal)})]},`${k.saleId}-${F}`))})]})})]})})]})}const FQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],e_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function dIe(){const[t,e]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(dr(new Date,"yyyy-MM-dd")),[i,o]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[h,f]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState(""),[W,Ae]=v.useState(0),[ee,ce]=v.useState("PENDIENTE"),[de,X]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Kt(ht(Fe,"expenses_clothes"),Gr("date","desc")),K=await jt(R),Z=[];K.forEach(te=>{const Q=te.data();Z.push({id:te.id,date:Q.date||dr(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??Xt.now()})}),x(Z)}catch(R){console.error(R),I(" Error al cargar gastos")}finally{b(!1)}})()},[]);const pe=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=pe.reduce((te,Q)=>te+(Q.amount||0),0),K=pe.filter(te=>te.status==="PAGADO").reduce((te,Q)=>te+(Q.amount||0),0),Z=R-K;return{total:R,pagado:K,pendiente:Z}},[pe]),k=()=>{s(dr(new Date,"yyyy-MM-dd")),o(""),u(""),A(0),f("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),I(""),!i){I("Selecciona una categora.");return}if(!c.trim()){I("Ingresa una descripcin.");return}if(!d||d<=0){I("Ingresa un monto vlido.");return}try{const K=await on(ht(Fe,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:Xt.now()});x(Z=>[{id:K.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:Xt.now()},...Z]),k(),I(" Gasto registrado")}catch(K){console.error(K),I(" Error al guardar gasto")}},V=R=>{C(R.id),S(R.date),B(R.category||""),D(R.description||""),Ae(Number(R.amount||0)),ce(R.status||"PENDIENTE"),X(R.notes||"")},M=()=>{C(null),S(""),B(""),D(""),Ae(0),ce("PENDIENTE"),X("")},L=async()=>{if(T){if(!O){I("Selecciona una categora.");return}if(!P.trim()){I("Ingresa una descripcin.");return}if(!W||W<=0){I("Ingresa un monto vlido.");return}try{await Hr(Ht(Fe,"expenses_clothes",T),{date:E,category:O,description:P.trim(),amount:Number(W.toFixed(2)),status:ee,notes:de||""}),x(R=>R.map(K=>K.id===T?{...K,date:E,category:O,description:P.trim(),amount:Number(W.toFixed(2)),status:ee,notes:de||""}:K)),M(),I(" Gasto actualizado")}catch(R){console.error(R),I(" Error al actualizar gasto")}}},q=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await _n(Ht(Fe,"expenses_clothes",R.id)),x(Z=>Z.filter(te=>te.id!==R.id)),I(" Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",e_(Se.total)]}),l.jsxs("div",{children:["Pagado: ",e_(Se.pagado)]}),l.jsxs("div",{children:["Pendiente: ",e_(Se.pendiente)]})]})]}),l.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>o(R.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),FQ.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>A(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>f(R.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):pe.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):pe.slice().sort((R,K)=>R.date.localeCompare(K.date)).map(R=>{const K=T===R.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:Z=>S(Z.target.value)}):R.date}),l.jsx("td",{className:"p-2 border",children:K?l.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:Z=>B(Z.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),FQ.map(Z=>l.jsx("option",{value:Z,children:Z},Z))]}):R.category||""}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{className:"w-full border p-1 rounded",value:P,onChange:Z=>D(Z.target.value)}):l.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:Z=>Ae(Math.max(0,Number(Z.target.value||0)))}):e_(R.amount)}),l.jsx("td",{className:"p-2 border",children:K?l.jsxs("select",{className:"w-full border p-1 rounded",value:ee,onChange:Z=>ce(Z.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:de,onChange:Z=>X(Z.target.value),maxLength:500}):l.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:K?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:L,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(R),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>q(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&l.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Vu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function AIe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?dr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function fIe(t,e){const r=AIe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function hIe(t,e){if(e<=0)return;const r=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",t)),n=await jt(r),a=[];n.forEach(i=>{const o=i.data();a.push({id:i.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),a.sort((i,o)=>i.date.localeCompare(o.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const o=Math.min(i.remaining,s);s-=o,await Hr(Ht(Fe,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-o).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function mIe(t,e){if(e<=0)return;const r=Kt(ht(Fe,"inventory_clothes_batches"),Zt("productId","==",t)),n=await jt(r),a=[];n.forEach(i=>{const o=i.data();a.push({id:i.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),a.sort((i,o)=>i.date.localeCompare(o.date));let s=e;for(const i of a){if(s<=0)break;const o=Math.max(0,i.quantity-i.remaining);if(o<=0)continue;const c=Math.min(o,s);s-=c,await Hr(Ht(Fe,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function zee(t){const e=Kt(ht(Fe,"ar_movements"),Zt("ref.saleId","==",t)),r=await jt(e);await Promise.all(r.docs.map(n=>_n(Ht(Fe,"ar_movements",n.id))))}async function pIe(t,e,r){if(await zee(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Xt.now(),ref:{saleId:t.id}},{addDoc:a}=await nf(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>Ive);return{addDoc:i}},void 0);await a(ht(Fe,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(ht(Fe,"ar_movements"),{...n,type:"ABONO",amount:-s})}function gIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,o]=v.useState([]),c=async Y=>{e(!0),n(!0),s(Y),o([]);try{const le=(await jt(Kt(ht(Fe,"sales_clothes"),Zt("__name__","==",Y)))).docs[0],je=le==null?void 0:le.data(),Pe=(Array.isArray(je==null?void 0:je.items)?je.items:je!=null&&je.item?[je.item]:[]).map(Ye=>({productName:String(Ye.productName||""),qty:Number(Ye.qty||0),unitPrice:Number(Ye.unitPrice||0),discount:Number(Ye.discount||0),total:Number(Ye.total||0)}));o(Pe)}catch(z){console.error(z)}finally{n(!1)}},[u,d]=v.useState(dr(new Date,"yyyy-MM-01")),[A,h]=v.useState(dr(new Date,"yyyy-MM-dd")),[f,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[I,T]=v.useState(""),[C,E]=v.useState(""),[S,O]=v.useState(null),[B,P]=v.useState(!1),[D,W]=v.useState(null),[Ae,ee]=v.useState(0),ce=15,[de,X]=v.useState(1),pe=v.useMemo(()=>{const Y={};return f.forEach(z=>Y[z.id]=z.name),Y},[f]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const Y=await jt(ht(Fe,"customers_clothes")),z=[];Y.forEach(ue=>z.push({id:ue.id,name:ue.data().name||""})),m(z);const le=await jt(Kt(ht(Fe,"sales_clothes"),Gr("createdAt","desc"))),je=[];le.forEach(ue=>{const Pe=fIe(ue.data(),ue.id);Pe&&Pe.date>=u&&Pe.date<=A&&je.push(Pe)}),g(je.sort((ue,Pe)=>Pe.date.localeCompare(ue.date))),X(1)}catch(Y){console.error(Y),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,A]);const Se=v.useMemo(()=>p.filter(Y=>!(I&&Y.customerId!==I||C&&Y.type!==C)),[p,I,C]),k=v.useMemo(()=>{let Y=0,z=0,le=0,je=0;for(const ue of Se)ue.type==="CONTADO"?(Y+=ue.item.qty,le+=ue.total):(z+=ue.item.qty,je+=ue.total);return{piezasCash:Y,piezasCredito:z,montoCash:le,montoCredito:je}},[Se]),F=Math.max(1,Math.ceil(Se.length/ce)),V=v.useMemo(()=>{const Y=(de-1)*ce;return Se.slice(Y,Y+ce)},[Se,de]),M=Y=>{O(null),W(Y),ee(Y.item.qty||0),P(!0)},L=async Y=>{if(O(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Mj(Y.id),await zee(Y.id),g(z=>z.filter(le=>le.id!==Y.id)),w(" Venta eliminada")}catch(z){console.error(z),w(" No se pudo eliminar la venta.")}finally{y(!1)}},q=async()=>{if(!D)return;const Y=Number(D.item.qty||0),z=Math.max(1,Math.floor(Number(Ae)||0));if(z===Y){P(!1);return}const le=Number(D.item.unitPrice||0),je=Number((le*z).toFixed(2));try{y(!0);const ue=z-Y;ue>0?await hIe(D.item.productId,ue):ue<0&&await mIe(D.item.productId,-ue);const Pe=Ht(Fe,"sales_clothes",D.id);await Hr(Pe,{quantity:z,total:je,itemsTotal:je,"item.qty":z,"item.total":je,updatedAt:Xt.now()});const Ye=Math.min(Number(D.downPayment||0),je);await pIe(D,je,Ye),g(nt=>nt.map(mt=>mt.id===D.id?{...mt,quantity:z,total:je,item:{...mt.item,qty:z,total:je},downPayment:Ye}:mt)),w(" Venta actualizada"),P(!1)}catch(ue){console.error(ue),w(" No se pudo actualizar la venta.")}finally{y(!1)}},R=()=>{const Y=`Reporte de transacciones (Ropa)  ${u} a ${A}`,z=Pe=>(Pe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),le=Se.map(Pe=>{const Ye=Pe.customerName||(Pe.customerId?pe[Pe.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Pe.date}</td>
          <td>${z(Ye)}</td>
          <td>${Pe.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Pe.item.qty}</td>
          <td style="text-align:right">${Vu(Pe.total)}</td>
        </tr>`}).join(""),je=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${z(Y)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${z(Y)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${k.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${k.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Vu(k.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Vu(k.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${le||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ue=window.open("","_blank");ue&&(ue.document.open(),ue.document.write(je),ue.document.close())},K=()=>X(1),Z=()=>X(Y=>Math.max(1,Y-1)),te=()=>X(Y=>Math.min(F,Y+1)),Q=()=>X(F),ye=()=>{const Y=[];if(F<=7)for(let le=1;le<=F;le++)Y.push(le);else{const le=Math.max(1,de-2),je=Math.min(F,de+2);Y.push(1),le>2&&Y.push(-1);for(let ue=le;ue<=je;ue++)ue!==1&&ue!==F&&Y.push(ue);je<F-1&&Y.push(-2),Y.push(F)}return l.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:K,disabled:de===1,children:" Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Z,disabled:de===1,children:" Anterior"}),Y.map((le,je)=>typeof le=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${le===de?"bg-blue-600 text-white":""}`,onClick:()=>X(le),children:le},je):l.jsx("span",{className:"px-2",children:""},je)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:de===F,children:"Siguiente "}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:de===F,children:"ltimo "})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",de," de ",F,"  ",Se.length," transaccin(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Y=>{d(Y.target.value),X(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:Y=>{h(Y.target.value),X(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:I,onChange:Y=>{T(Y.target.value),X(1)},children:[l.jsx("option",{value:"",children:"Todos"}),f.map(Y=>l.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:C,onChange:Y=>{E(Y.target.value),X(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:k.piezasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:k.piezasCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:Vu(k.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:Vu(k.montoCredito)})]})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:x?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):V.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):V.map(Y=>{const z=Y.customerName||(Y.customerId?pe[Y.customerId]:"")||"Nombre cliente";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Y.date}),l.jsx("td",{className:"p-2 border",children:z}),l.jsx("td",{className:"p-2 border",children:Y.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(Y.id),children:Y.item.qty})}),l.jsx("td",{className:"p-2 border",children:Vu(Y.total)}),l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>O(le=>le===Y.id?null:Y.id),title:"Acciones",children:""}),S===Y.id&&l.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>M(Y),children:"Editar"}),l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>L(Y),children:"Eliminar"})]})]})]},Y.id)})})]}),ye()]}),b&&l.jsx("p",{className:"mt-2 text-sm",children:b}),B&&D&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),l.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:Ae,onChange:Y=>ee(Math.max(1,Math.floor(Number(Y.target.value||0))))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),l.jsx("div",{className:"text-lg font-semibold",children:Vu(D.item.unitPrice)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),l.jsx("div",{className:"text-lg font-semibold",children:Vu(Number(D.item.unitPrice)*Number(Ae||0))})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{P(!1),W(null)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:q,children:"Guardar cambios"})]})]})}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((Y,z)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:Y.productName}),l.jsx("td",{className:"p-2 border text-right",children:Y.qty}),l.jsx("td",{className:"p-2 border text-right",children:Vu(Y.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:Vu(Y.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:Vu(Y.total)})]},z))})]})})]})})]})}function xIe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function vIe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var yIe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bIe=function(t){yIe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),xIe(s,a.prototype),vIe(s),s}return e}(Error),wIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jl=function(t){wIe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(bIe),NIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ls=function(t){NIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Jl),_Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Or=function(t){_Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Jl),qee=function(){function t(e){if(this.binarizer=e,e===null)throw new Or("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),CIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ei=function(t){CIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Jl),EIe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Sa=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),SIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_6=function(t){SIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Jl),IIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OQ=function(t){IIe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(_6),BIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yi=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new Or("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new OQ(r);if(n>e)throw new OQ(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=BIe(e),i=s.next();!i.done;i=s.next()){var o=i.value;a=31*a+o}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Sa.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,o=n(r,e[i]);if(o>0)a=i+1;else if(o<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),cn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ki=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Sa.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var o=a*32+cn.numberOfTrailingZeros(s);return o>r?r:o},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var o=a*32+cn.numberOfTrailingZeros(s);return o>r?r:o},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Or;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var o=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<o);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Or;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,o=a;o<=s;o++){var c=o>a?0:e&31,u=o<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[o]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Or("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Or("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,o=0;o<8;o++)this.get(e)&&(i|=1<<7-o),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var o=n*32-this.size,c=e[0]>>>o,s=1;s<n;s++){var u=e[s];c|=u<<32-o,e[s-1]=c,c=u>>>o}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&yi.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+yi.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Lj;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Lj||(Lj={}));const Ia=Lj;var TIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lr=function(t){TIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Jl),PIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qn;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(qn||(qn={}));var vi=function(){function t(e,r,n){for(var a,s,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var A=c[u];t.VALUES_TO_ECI.set(A,this)}try{for(var h=PIe(i),f=h.next();!f.done;f=h.next()){var m=f.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new lr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new lr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new lr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(qn.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(qn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(qn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(qn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(qn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(qn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(qn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(qn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(qn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(qn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(qn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(qn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(qn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(qn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(qn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(qn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(qn.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(qn.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(qn.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(qn.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(qn.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(qn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(qn.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(qn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(qn.Big5,28,"Big5"),t.GB18030=new t(qn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(qn.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),jIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_C=function(t){jIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Jl),wu=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof vi?e:vi.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var o=e[s].toString(16);o.length<2&&(o="0"+o),a+="%"+o}return decodeURIComponent(a)}if(n.equals(vi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new _C("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(vi.UTF8)||e.equals(vi.ISO8859_1)||e.equals(vi.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Nn=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return wu.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Ia.CHARACTER_SET)!==void 0)return r.get(Ia.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,o=0,c=0,u=0,d=0,A=0,h=0,f=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(o>0?w&128?o--:i=!1:w&128&&(w&64?(o++,w&32?(o++,w&16?(o++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(A>0?w<64||w===127||w>252?s=!1:A--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,f++,f>p&&(p=f)):w>127?(A++,f=0,m++,m>g&&(g=m)):(f=0,m=0))}return i&&o>0&&(i=!1),s&&A>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(o,c,u,d,A,h){if(o==="%%")return"%";if(r[++a]!==void 0){o=d?parseInt(d.substr(1)):void 0;var f=A?parseInt(A.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(o);break;case"p":m=parseFloat(r[a]).toPrecision(o);break;case"e":m=parseFloat(r[a]).toExponential(o);break;case"x":m=parseInt(r[a]).toString(f||16);break;case"d":m=parseFloat(parseInt(r[a],f||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(f);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return wu.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=vi.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=vi.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=vi.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),nn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Nn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),aA=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new Or("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],o=0;o<n;o++)i[o]&&a.set(o,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new Or("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,o=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(o===-1)o=s-i;else if(s-i!==o)throw new Or("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new Or("illegal character encountered: "+e.substring(u));if(s>i){if(o===-1)o=s-i;else if(s-i!==o)throw new Or("row lengths do not match");c++}for(var d=new t(o,c),A=0;A<s;A++)a[A]&&d.set(Math.floor(A%o),Math.floor(A/o));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Or("input matrix dimensions do not match");for(var r=new Ki(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var o=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[o+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new Or("Left and top must be nonnegative");if(a<1||n<1)throw new Or("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new Or("The region must fit inside the matrix");for(var o=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*o,A=e;A<s;A++)c[d+Math.floor(A/32)]|=1<<(A&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Ki(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Sa.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Ki(e),a=new Ki(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,o=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var A=a[u*n+d];if(A!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(A<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>o){for(var h=31;!(A>>>h);)h--;d*32+h>o&&(o=d*32+h)}}}return o<s||c<i?null:Int32Array.from([s,i,o-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],o=0;!(i<<31-o&4294967295);)o++;return s+=o,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],o=31;!(i>>>o);)o--;return s+=o,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&yi.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+yi.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new nn,s=0,i=this.height;s<i;s++){for(var o=0,c=this.width;o<c;o++)a.append(this.get(o,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),kIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ft=function(t){kIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Jl),FIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OIe=function(t){FIe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Ki(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),o=this.buckets,c=0;c<s;c++)o[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(o);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,A=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(A*4-d-h)/2<u&&n.set(c),d=A,A=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new aA(n,a);this.initArrays(n);for(var i=this.buckets,o=1;o<5;o++)for(var c=Math.floor(a*o/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),A=Math.floor(n/5);A<d;A++){var h=u[A]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var f=e.estimateBlackPoint(i),m=r.getMatrix(),o=0;o<a;o++)for(var p=o*n,A=0;A<n;A++){var h=m[p+A]&255;h<f&&s.set(A,o)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,o=0;o<n;o++)r[o]>i&&(s=o,i=r[o]),r[o]>a&&(a=r[o]);for(var c=0,u=0,o=0;o<n;o++){var d=o-s,A=r[o]*d*d;A>u&&(c=o,u=A)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new Ft;for(var f=c-1,m=-1,o=c-1;o>s;o--){var p=o-s,A=p*p*(c-o)*(a-r[o]);A>m&&(f=o,m=A)}return f<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(EIe),DIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wee=function(t){DIe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var o=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&o++;var c=e.calculateBlackPoints(s,i,o,n,a),u=new aA(n,a);e.calculateThresholdForBlock(s,i,o,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,o,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,A=0;A<a;A++){var h=A<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var f=e.cap(A,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=o[f+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,o){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&o.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var o=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var A=d<<e.BLOCK_SIZE_POWER;A>o&&(A=o);for(var h=0;h<n;h++){var f=h<<e.BLOCK_SIZE_POWER;f>c&&(f=c);for(var m=0,p=255,g=0,x=0,y=A*s+f;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var I=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(I=p/2,d>0&&h>0)){var T=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<T&&(I=T)}u[d][h]=I}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(OIe),zb=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new _C("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new _C("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new _C("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new nn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,o=void 0;i<64?o="#":i<128?o="+":i<192?o=".":o=" ",r.append(o)}r.append(`
`)}return r.toString()},t}(),RIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l4=function(t){RIe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(zb),MIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LIe=function(t){MIe(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var o=0,c=0,u=r.length;o<u;o+=4,c++){var d=void 0,A=r[o+3];if(A===0)d=255;else{var h=r[o],f=r[o+1],m=r[o+2];d=306*h+601*f+117*m+512>>10}i[c]=d}else for(var o=0,c=0,p=r.length;o<p;o+=4,c++){var d=void 0,A=r[o+3];if(A===0)d=255;else{var h=r[o],f=r[o+1],m=r[o+2];d=306*h+601*f+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Or("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*o),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*o);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new l4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(zb),UIe=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),ul=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})},dl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},QIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sv=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return ul(this,void 0,void 0,function(){var e,r,n,a,s,i,o,c,u,d,A,h;return dl(this,function(f){switch(f.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),r=[];try{for(n=QIe(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(o=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:o,label:c,kind:i,groupId:u},r.push(d))}catch(m){A={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(A)throw A.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return ul(this,void 0,void 0,function(){var e;return dl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new UIe(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return ul(this,void 0,void 0,function(){var r;return dl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return ul(this,void 0,void 0,function(){return dl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ul(this,void 0,void 0,function(){var n,a;return dl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ul(this,void 0,void 0,function(){var n;return dl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ul(this,void 0,void 0,function(){var n,a;return dl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return ul(this,void 0,void 0,function(){return dl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ul(this,void 0,void 0,function(){var a,s;return dl(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ul(this,void 0,void 0,function(){var a;return dl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return ul(this,void 0,void 0,function(){var a;return dl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return ul(this,void 0,void 0,function(){var n;return dl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return ul(this,void 0,void 0,function(){return dl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ls("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ls("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ls("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ls("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ls("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ls("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ls("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ls("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ls("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ls("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return ul(this,void 0,void 0,function(){return dl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return ul(this,void 0,void 0,function(){return dl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,o){if(a._stopAsyncDecode){o(new Ft("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof Ft,d=h instanceof ei||h instanceof lr,A=d&&n;if(u||A)return setTimeout(s,a._timeBetweenDecodingAttempts,i,o);o(h)}};return new Promise(function(i,o){return s(i,o)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof ei||c instanceof lr,o=c instanceof Ft;(i||o)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new LIe(n,r),s=new Wee(a);return new qee(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),tl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Sa.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Sa.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Sa.arraycopy(r,0,n,0,r.length),Sa.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Uj;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Uj||(Uj={}));const Fr=Uj;var Qj;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Qj||(Qj={}));const No=Qj;var c4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),uy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Or;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),c0=function(){function t(e,r){if(r.length===0)throw new Or;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Sa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=uy.addOrSubtract(n,i)}return n}n=r[0];for(var o=r.length,c=this.field,a=1;a<o;a++)n=uy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Or("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Sa.arraycopy(n,0,s,0,i);for(var o=i;o<n.length;o++)s[o]=uy.addOrSubtract(r[o-i],n[o]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Or("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),o=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=uy.addOrSubtract(i[c+d],o.multiply(u,a[d]));return new t(o,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Or;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,o=0;o<a;o++)s[o]=i.multiply(n[o],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Or("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Or("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var o=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(o,c),d=r.buildMonomial(o,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),VIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xee=function(t){VIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Jl),HIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ql=function(t){HIe(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),o=1,c=0;c<n;c++)i[c]=o,o*=2,o>=n&&(o^=r,o&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new c0(s,Int32Array.from([0])),s.one=new c0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Or;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new c0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Xee;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+cn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(uy),$Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t_=function(t){$Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Jl),KIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qb=function(t){KIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Jl),u4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new c0(n,e),s=new Int32Array(r),i=!0,o=0;o<r;o++){var c=a.evaluateAt(n.exp(o+n.getGeneratorBase()));s[s.length-1-o]=c,c!==0&&(i=!1)}if(!i)for(var u=new c0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),A=d[0],h=d[1],f=this.findErrorLocations(A),m=this.findErrorMagnitudes(h,f),o=0;o<f.length;o++){var p=e.length-1-n.log(f[o]);if(p<0)throw new t_("Bad error location");e[p]=Ql.addOrSubtract(e[p],m[o])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,o=r,c=s.getZero(),u=s.getOne();o.getDegree()>=(n/2|0);){var d=i,A=c;if(i=o,c=u,i.isZero())throw new t_("r_{i-1} was zero");o=d;for(var h=s.getZero(),f=i.getCoefficient(i.getDegree()),m=s.inverse(f);o.getDegree()>=i.getDegree()&&!o.isZero();){var p=o.getDegree()-i.getDegree(),g=s.multiply(o.getCoefficient(o.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),o=o.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(A),o.getDegree()>=i.getDegree())throw new qb("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new t_("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=o.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new t_("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var o=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],o),A=d&1?d&-2:d|1;c=s.multiply(c,A)}a[i]=s.multiply(e.evaluateAt(o),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],o))}return a},t}(),oo;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(oo||(oo={}));var DQ=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),o=new c4(s,i,null,null);return o.setNumBits(a.length),o},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=oo.UPPER,a=oo.UPPER,s="",i=0;i<r;)if(a===oo.BINARY){if(r-i<5)break;var o=t.readCode(e,i,5);if(i+=5,o===0){if(r-i<11)break;o=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<o;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=Nn.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===oo.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var A=t.getCharacter(a,u);A.startsWith("CTRL_")?(n=a,a=t.getTable(A.charAt(5)),A.charAt(6)==="L"&&(n=a)):(s+=A,a=n)}return s},t.getTable=function(e){switch(e){case"L":return oo.LOWER;case"P":return oo.PUNCT;case"M":return oo.MIXED;case"D":return oo.DIGIT;case"B":return oo.BINARY;case"U":default:return oo.UPPER}},t.getCharacter=function(e,r){switch(e){case oo.UPPER:return t.UPPER_TABLE[r];case oo.LOWER:return t.LOWER_TABLE[r];case oo.MIXED:return t.MIXED_TABLE[r];case oo.PUNCT:return t.PUNCT_TABLE[r];case oo.DIGIT:return t.DIGIT_TABLE[r];default:throw new qb("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=Ql.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Ql.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Ql.AZTEC_DATA_10):(n=12,r=Ql.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new lr;for(var i=e.length%n,o=new Int32Array(s),c=0;c<s;c++,i+=n)o[c]=t.readCode(e,i,n);try{var u=new u4(r);u.decode(o,s-a)}catch(g){throw new lr(g)}for(var d=(1<<n)-1,A=0,c=0;c<a;c++){var h=o[c];if(h===0||h===d)throw new lr;(h===1||h===d-1)&&A++}for(var f=new Array(a*n-A),m=0,c=0;c<a;c++){var h=o[c];if(h===1||h===d-1)f.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)f[m++]=(h&1<<p)!==0}return f},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var o=0;o<s.length;o++)s[o]=o;else for(var c=a+1+2*cn.truncDivision(cn.truncDivision(a,2)-1,15),u=a/2,d=cn.truncDivision(c,2),o=0;o<u;o++){var A=o+cn.truncDivision(o,15);s[u-o-1]=d-A-1,s[u+o]=d+A+1}for(var o=0,h=0;o<n;o++){for(var f=(n-o)*4+(r?9:12),m=o*2,p=a-1-m,g=0;g<f;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*f+x+y]=e.get(s[m+g],s[p-y]),i[h+4*f+x+y]=e.get(s[p-y],s[p-g]),i[h+6*f+x+y]=e.get(s[p-g],s[m+y]);h+=f*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),jn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Vj=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),_r=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Vj.floatToIntBits(this.x)+Vj.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,o;if(n>=r&&n>=a?(i=e[0],s=e[1],o=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],o=e[2]):(i=e[2],s=e[0],o=e[1]),this.crossProductZ(s,i,o)<0){var c=s;s=o,o=c}e[0]=s,e[1]=i,e[2]=o},t.distance=function(e,r){return jn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),C6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),GIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zIe=function(t){GIe(e,t);function e(r,n,a,s,i){var o=t.call(this,r,n)||this;return o.compact=a,o.nbDatablocks=s,o.nbLayers=i,o}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(C6),Hj=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Ft}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,o=!1,c=!1,u=!1,d=!1,A=!1,h=this.width,f=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<f;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=f){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!A)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,A=!0):A||n--;if(n<0){s=!0;break}i&&(o=!0)}if(!s&&o){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Ft;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(e,n+w,e+w,n);if(I==null)throw new Ft;for(var T=null,w=1;T===null&&w<y;w++)T=this.getBlackPointOnSegment(r,n+w,r-w,n);if(T==null)throw new Ft;for(var C=null,w=1;C===null&&w<y;w++)C=this.getBlackPointOnSegment(r,a-w,r-w,a);if(C==null)throw new Ft;return this.centerEdges(C,b,T,I)}else throw new Ft},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=jn.round(jn.distance(e,r,n,a)),i=(n-e)/s,o=(a-r)/s,c=this.image,u=0;u<s;u++){var d=jn.round(e+u*i),A=jn.round(r+u*o);if(c.get(d,A))return new _r(d,A)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),o=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),A=a.getX(),h=a.getY(),f=t.CORR;return s<this.width/2?[new _r(A-f,h+f),new _r(o+f,c+f),new _r(u-f,d-f),new _r(s+f,i-f)]:[new _r(A+f,h+f),new _r(o+f,c-f),new _r(u-f,d+f),new _r(s-f,i-f)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var o=e;o<=r;o++)if(s.get(n,o))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),RQ=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var o=Math.floor(r[i]),c=Math.floor(r[i+1]);if(o<-1||o>n||c<-1||c>a)throw new Ft;s=!1,o===-1?(r[i]=0,s=!0):o===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var o=Math.floor(r[i]),c=Math.floor(r[i+1]);if(o<-1||o>n||c<-1||c>a)throw new Ft;s=!1,o===-1?(r[i]=0,s=!0):o===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),Yee=function(){function t(e,r,n,a,s,i,o,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=o,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,o,c,u,d,A,h,f,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,o,c),y=t.squareToQuadrilateral(u,d,A,h,f,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,o=this.a22,c=this.a23,u=this.a31,d=this.a32,A=this.a33,h=0;h<r;h+=2){var f=e[h],m=e[h+1],p=s*f+c*m+A;e[h]=(n*f+i*m+u)/p,e[h+1]=(a*f+o*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,o=this.a22,c=this.a23,u=this.a31,d=this.a32,A=this.a33,h=e.length,f=0;f<h;f++){var m=e[f],p=r[f],g=s*m+c*p+A;e[f]=(n*m+i*p+u)/g,r[f]=(a*m+o*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,o,c){var u=e-n+s-o,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var A=n-s,h=o-s,f=a-i,m=c-i,p=A*m-h*f,g=(u*m-h*d)/p,x=(A*d-u*f)/p;return new t(n-e+g*n,o-e+x*o,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,o,c){return t.squareToQuadrilateral(e,r,n,a,s,i,o,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),qIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WIe=function(t){qIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,o,c,u,d,A,h,f,m,p,g,x,y,b,w){var I=Yee.quadrilateralToQuadrilateral(s,i,o,c,u,d,A,h,f,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,I)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Ft;for(var i=new aA(n,a),o=new Float32Array(2*n),c=0;c<a;c++){for(var u=o.length,d=c+.5,A=0;A<u;A+=2)o[A]=A/2+.5,o[A+1]=d;s.transformPoints(o),RQ.checkAndNudgePoints(r,o);try{for(var A=0;A<u;A+=2)r.get(Math.floor(o[A]),Math.floor(o[A+1]))&&i.set(A/2,c)}catch{throw new Ft}}return i},e}(RQ),E6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new WIe,t}(),Fl=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new _r(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),XIe=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new zIe(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Ft;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var o=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,o){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(cn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Ft},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),o=n-1;o>=0;--o)i[o]=e&15,e>>=4;try{var c=new u4(Ql.AZTEC_PARAM);c.decode(i,s)}catch{throw new Ft}for(var u=0,o=0;o<a;o++)u=(u<<4)+i[o];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var A=this.distancePoint(d,o)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(A<.75||A>1.25||!this.isWhiteOrBlackRectangle(o,c,u,d))break}r=o,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Ft;this.compact=this.nbCenterLayers===5;var h=new _r(r.getX()+.5,r.getY()-.5),f=new _r(n.getX()+.5,n.getY()+.5),m=new _r(a.getX()-.5,a.getY()+.5),p=new _r(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,f,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Hj(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new Fl(i+7,o-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Fl(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Fl(i-7,o+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Fl(i-7,o-7),!1,-1,-1).toResultPoint()}var c=jn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=jn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Hj(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Fl(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Fl(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Fl(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Fl(c-7,u-7),!1,-1,-1).toResultPoint()}return c=jn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=jn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Fl(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=E6.getInstance(),o=this.getDimension(),c=o/2-this.nbCenterLayers,u=o/2+this.nbCenterLayers;return i.sampleGrid(e,o,o,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,o=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,A=0;A<n;A++)this.image.get(jn.round(o+A*u),jn.round(c+A*d))&&(a|=1<<n-A-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Fl(e.getX()-s,e.getY()+s),r=new Fl(r.getX()-s,r.getY()-s),n=new Fl(n.getX()+s,n.getY()-s),a=new Fl(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var o=this.getColor(e,r);return o!==i||(o=this.getColor(r,n),o!==i)?!1:(o=this.getColor(n,a),o===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,o=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),A=0;A<d;A++)o+=a,c+=s,this.image.get(jn.round(o),jn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new Fl(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new _r(o+a*s,c+a*i),d=new _r(o-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var A=new _r(o+a*s,c+a*i),h=new _r(o-a*s,c-a*i),f=[u,A,d,h];return f},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=jn.round(e.getX()),n=jn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return jn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return jn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(cn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),UE=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new XIe(e.getBlackMatrix()),s=null,i=null;try{var o=a.detectMirror(!1);s=o.getPoints(),this.reportFoundResultPoints(r,s),i=new DQ().decode(o)}catch(A){n=A}if(i==null)try{var o=a.detectMirror(!0);s=o.getPoints(),this.reportFoundResultPoints(r,s),i=new DQ().decode(o)}catch(A){throw n??A}var c=new tl(i.getText(),i.getRawBytes(),i.getNumBits(),s,Fr.AZTEC,Sa.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata(No.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata(No.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Ia.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),YIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){YIe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new UE,r)||this}return e})(Sv);var _i=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Ia.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),o=270;i!==null&&i.get(No.ORIENTATION)===!0&&(o=o+i.get(No.ORIENTATION)%360),s.putMetadata(No.ORIENTATION,o);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new _r(u-c[d].getY()-1,c[d].getX());return s}else throw new Ft}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Ki(n),i=r&&r.get(Ia.TRY_HARDER)===!0,o=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var A=Math.trunc((d+1)/2),h=(d&1)===0,f=u+o*(h?A:-A);if(f<0||f>=a)break;try{s=e.getBlackRow(f,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Ia.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(T,C){return b.set(C,T)}),b.delete(Ia.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(f,s,r);if(y===1){w.putMetadata(No.ORIENTATION,180);var I=w.getResultPoints();I!==null&&(I[0]=new _r(n-I[0].getX()-1,I[0].getY()),I[1]=new _r(n-I[1].getX()-1,I[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Ft},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new Ft;for(var o=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==o)n[c]++;else{if(++c===a)break;n[c]=1,o=!o}u++}if(!(c===a||c===a-1&&u===i))throw new Ft},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Ft;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,o=0;o<a;o++)s+=e[o],i+=r[o];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var A=e[d],h=r[d]*c,f=A>h?A-h:h-A;if(f>n)return Number.POSITIVE_INFINITY;u+=f}return u/s},t}(),JIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MQ=function(t){JIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),o=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var A=e.MAX_AVG_VARIANCE,h=-1,f=e.CODE_START_A;f<=e.CODE_START_C;f++){var m=_i.patternMatchVariance(i,e.CODE_PATTERNS[f],e.MAX_INDIVIDUAL_VARIANCE);m<A&&(A=m,h=f)}if(h>=0&&r.isRange(Math.max(0,o-(d-o)/2),o,!1))return Int32Array.from([o,d,h]);o+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new Ft},e.decodeCode=function(r,n,a){_i.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,o=0;o<e.CODE_PATTERNS.length;o++){var c=e.CODE_PATTERNS[o],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=o)}if(i>=0)return i;throw new Ft},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Ia.ASSUME_GS1)===!0,i=e.findStartPattern(n),o=i[2],c=0,u=new Uint8Array(20);u[c++]=o;var d;switch(o){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new lr}for(var A=!1,h=!1,f="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=o,w=0,I=!0,T=!1,C=!1;!A;){var E=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(I=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(ce,de){return ce+de},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new lr}switch(d){case e.CODE_CODE_A:if(y<64)C===T?f+=String.fromCharCode(32+y):f+=String.fromCharCode(32+y+128),C=!1;else if(y<96)C===T?f+=String.fromCharCode(y-64):f+=String.fromCharCode(y+64),C=!1;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!T&&C?(T=!0,C=!1):T&&C?(T=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:A=!0;break}break;case e.CODE_CODE_B:if(y<96)C===T?f+=String.fromCharCode(32+y):f+=String.fromCharCode(32+y+128),C=!1;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!T&&C?(T=!0,C=!1):T&&C?(T=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:A=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(f+="0"),f+=y;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:A=!0;break}break}E&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Ft;if(b-=w*x,b%103!==x)throw new ei;var O=f.length;if(O===0)throw new Ft;O>0&&I&&(d===e.CODE_CODE_C?f=f.substring(0,O-2):f=f.substring(0,O-1));for(var B=(i[1]+i[0])/2,P=m+S/2,D=u.length,W=new Uint8Array(D),Ae=0;Ae<D;Ae++)W[Ae]=u[Ae];var ee=[new _r(B,r),new _r(P,r)];return new tl(f,W,0,ee,Fr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(_i),ZIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LQ=function(t){ZIe(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,o,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),A=n.getNextSet(d[1]),h=n.getSize(),f,m;do{e.recordPattern(n,A,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Ft;f=e.patternToChar(p),this.decodeRowResult+=f,m=A;try{for(var g=(s=void 0,SB(u)),x=g.next();!x.done;x=g.next()){var y=x.value;A+=y}}catch(D){s={error:D}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}A=n.getNextSet(A)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=SB(u),I=w.next();!I.done;I=w.next()){var y=I.value;b+=y}}catch(D){o={error:D}}finally{try{I&&!I.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}var T=A-m-b;if(A!==h&&T*2<b)throw new Ft;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,E=0,S=0;S<C;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(E%43))throw new ei;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new Ft;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var B=(d[1]+d[0])/2,P=m+b/2;return new tl(O,null,0,[new _r(B,r),new _r(P,r)],Fr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,o=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,o-Math.floor((d-o)/2)),o,!1))return[o,d];o+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new Ft},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,o;do{var c=2147483647;try{for(var u=(n=void 0,SB(r)),d=u.next();!d.done;d=u.next()){var A=d.value;A<c&&A>i&&(c=A)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,o=0;for(var h=0,f=0,m=0;m<s;m++){var A=r[m];A>i&&(f|=1<<s-1-m,o++,h+=A)}if(o===3){for(var m=0;m<s&&o>0;m++){var A=r[m];if(A>i&&(o--,A*2>=h))return-1}return f}}while(o>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Ft},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var o=r.charAt(s+1),c="\0";switch(i){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new lr;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new lr;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new lr;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new lr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(_i),e4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UQ=function(t){e4e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,o,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),A=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var f,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new Ft;f=this.patternToChar(p),this.decodeRowResult+=f,m=d;try{for(var g=(s=void 0,IB(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(S){s={error:S}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=IB(h),I=w.next();!I.done;I=w.next()){var y=I.value;b+=y}}catch(S){o={error:S}}finally{try{I&&!I.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}if(d===A||!n.get(d))throw new Ft;if(this.decodeRowResult.length<2)throw new Ft;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var T=this.decodeExtended(this.decodeRowResult),C=(u[1]+u[0])/2,E=m+b/2;return new tl(T,null,0,[new _r(C,r),new _r(E,r)],Fr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,o=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==o)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,o=!o}throw new Ft},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=IB(r),o=i.next();!o.done;o=i.next()){var c=o.value;s+=c}}catch(m){n={error:m}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,A=0;A<d;A++){var h=Math.round(r[A]*9/s);if(h<1||h>4)return-1;if(A&1)u<<=h;else for(var f=0;f<h;f++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Ft},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new lr;var o=r.charAt(s+1),c="\0";switch(i){case"d":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new lr;break;case"a":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new lr;break;case"b":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o>="X"&&o<="Z")c="";else throw new lr;break;case"c":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new lr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,o=n-1;o>=0;o--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(o)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new ei},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(_i),t4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QQ=function(t){t4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,o=this.decodeStart(n),c=this.decodeEnd(n),u=new nn;e.decodeMiddle(n,o[1],c[0],u);var d=u.toString(),A=null;a!=null&&(A=a.get(Ia.ALLOWED_LENGTHS)),A==null&&(A=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,f=!1,m=0;try{for(var p=r4e(A),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){f=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!f&&h>m&&(f=!0),!f)throw new lr;var y=[new _r(o[1],r),new _r(c[0],r)],b=new tl(d,null,0,y,Fr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),o.fill(0),c.fill(0);n<a;){_i.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;o[u]=i[d],c[u]=i[d+1]}var A=e.decodeDigit(o);s.append(A.toString()),A=this.decodeDigit(c),s.append(A.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Ft},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Ft;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof Ft&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),o=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var A=n;A<o;A++)if(r.get(A)!==c)i[u]++;else{if(u===s-1){if(_i.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,A];d+=i[0]+i[1],Sa.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new Ft},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var o=e.PATTERNS[i],c=_i.patternMatchVariance(r,o,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new Ft},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(_i),n4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yx=function(t){n4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var o=a[0];s=a[1];var c=o-(s-o);c>=0&&(n=r.isRange(c,o,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new lr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new lr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var o=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,A=a,h=n;h<o;h++)if(r.get(h)!==A)i[c]++;else{if(c===d-1){if(_i.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var f=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=f[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,A=!A}throw new Ft},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,o=-1,c=s.length,u=0;u<c;u++){var d=s[u],A=_i.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);A<i&&(i=A,o=u)}if(o>=0)return o;throw new Ft},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(_i),a4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s4e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),o=t.parseExtensionString(i),c=[new _r((n[0]+n[1])/2,e),new _r(s,e)],u=new tl(i,null,0,c,Fr.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=e.getSize(),c=r[1],u=0,d=0;d<5&&c<o;d++){var A=Yx.decodeDigit(e,i,c,Yx.L_AND_G_PATTERNS);n+=String.fromCharCode(48+A%10);try{for(var h=(a=void 0,a4e(i)),f=h.next();!f.done;f=h.next()){var m=f.value;c+=m}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}A>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Ft;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Ft;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Ft},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[No.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),i4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o4e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),o=t.parseExtensionString(i),c=[new _r((n[0]+n[1])/2,e),new _r(s,e)],u=new tl(i,null,0,c,Fr.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=e.getSize(),c=r[1],u=0,d=0;d<2&&c<o;d++){var A=Yx.decodeDigit(e,i,c,Yx.L_AND_G_PATTERNS);n+=String.fromCharCode(48+A%10);try{for(var h=(a=void 0,i4e(i)),f=h.next();!f.done;f=h.next()){var m=f.value;c+=m}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}A>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Ft;if(parseInt(n.toString())%4!==u)throw new Ft;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[No.ISSUE_NUMBER,parseInt(e)]])},t}(),l4e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Yx.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new s4e;return s.decodeRow(e,r,a)}catch{var i=new o4e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),c4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mi=function(t){c4e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get(Ia.NEED_RESULT_POINT_CALLBACK);if(i!=null){var o=new _r((s[0]+s[1])/2,r);i.foundPossibleResultPoint(o)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var A=new _r(u,r);i.foundPossibleResultPoint(A)}var h=e.decodeEnd(n,u);if(i!=null){var f=new _r((h[0]+h[1])/2,r);i.foundPossibleResultPoint(f)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Ft;var g=d.toString();if(g.length<8)throw new lr;if(!e.checkChecksum(g))throw new ei;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new _r(x,r),new _r(y,r)],I=new tl(g,null,0,w,b,new Date().getTime()),T=0;try{var C=l4e.decodeRow(r,n,h[1]);I.putMetadata(No.UPC_EAN_EXTENSION,C.getText()),I.putAllMetadata(C.getResultMetadata()),I.addResultPoints(C.getResultPoints()),T=C.getText().length}catch{}var E=a==null?null:a.get(Ia.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var O in E)if(T.toString()===O){S=!0;break}if(!S)throw new Ft}return b===Fr.EAN_13||Fr.UPC_A,I},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new lr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new lr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Yx),u4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$j=function(t){u4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,o,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),A=n[1],h=0,f=0;f<6&&A<d;f++){var m=mi.decodeDigit(r,u,A,mi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,VQ(u)),g=p.next();!g.done;g=p.next()){var x=g.value;A+=x}}catch(I){s={error:I}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-f)}a=e.determineFirstDigit(a,h);var y=mi.findGuardPattern(r,A,!0,mi.MIDDLE_PATTERN,new Int32Array(mi.MIDDLE_PATTERN.length).fill(0));A=y[1];for(var f=0;f<6&&A<d;f++){var m=mi.decodeDigit(r,u,A,mi.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(o=void 0,VQ(u)),w=b.next();!w.done;w=b.next()){var x=w.value;A+=x}}catch(C){o={error:C}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(o)throw o.error}}}return{rowOffset:A,resultString:a}},e.prototype.getBarcodeFormat=function(){return Fr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Ft},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(mi),d4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$Q=function(t){d4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,o,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),A=n[1],h=0;h<4&&A<d;h++){var f=mi.decodeDigit(r,u,A,mi.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var m=(s=void 0,HQ(u)),p=m.next();!p.done;p=m.next()){var g=p.value;A+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=mi.findGuardPattern(r,A,!0,mi.MIDDLE_PATTERN,new Int32Array(mi.MIDDLE_PATTERN.length).fill(0));A=x[1];for(var h=0;h<4&&A<d;h++){var f=mi.decodeDigit(r,u,A,mi.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var y=(o=void 0,HQ(u)),b=y.next();!b.done;b=y.next()){var g=b.value;A+=g}}catch(T){o={error:T}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(o)throw o.error}}}return{rowOffset:A,resultString:a}},e.prototype.getBarcodeFormat=function(){return Fr.EAN_8},e}(mi),A4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KQ=function(t){A4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new $j,r}return e.prototype.getBarcodeFormat=function(){return Fr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new tl(n.substring(1),null,null,r.getResultPoints(),Fr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Ft},e.prototype.reset=function(){this.ean13Reader.reset()},e}(mi),f4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GQ=function(t){f4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,o=this.decodeMiddleCounters.map(function(g){return g});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=r.getSize(),u=n[1],d=0,A=0;A<6&&u<c;A++){var h=e.decodeDigit(r,o,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var f=(s=void 0,h4e(o)),m=f.next();!m.done;m=f.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-A)}return e.determineNumSysAndCheckDigit(new nn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return mi.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Ft.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Fr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new nn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(mi),m4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BB=function(t){m4e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Ia.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(Fr.EAN_13)>-1&&s.push(new $j),a.indexOf(Fr.UPC_A)>-1&&s.push(new KQ),a.indexOf(Fr.EAN_8)>-1&&s.push(new $Q),a.indexOf(Fr.UPC_E)>-1&&s.push(new GQ)),s.length===0&&(s.push(new $j),s.push(new KQ),s.push(new $Q),s.push(new GQ)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var o=zQ(this.readers),c=o.next();!c.done;c=o.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),A=d.getBarcodeFormat()===Fr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(Ia.POSSIBLE_FORMATS),f=h==null||h.includes(Fr.UPC_A);if(A&&f){var m=d.getRawBytes(),p=new tl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Fr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}throw new Ft},e.prototype.reset=function(){var r,n;try{for(var a=zQ(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(_i),p4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g4e=function(t){p4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Ft;var i=this.codaBarDecodeRow(s.row);if(!i)throw new Ft;return new tl(i,null,0,[new _r(s.left,r),new _r(s.right,r)],Fr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],o=n[0],c=1,u=1;u<n.length;u++)n[u]===o?c++:(o=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var o=n.join("");return this.validCodaBarString(o)?o:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(_i),x4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pm=function(t){x4e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(_i.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Ft},e.count=function(r){return jn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],o=s/i;if(o>=e.MIN_FINDER_PATTERN_RATIO&&o<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=v4e(r),A=d.next();!A.done;A=d.next()){var h=A.value;h>u&&(u=h),h<c&&(c=h)}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(_i),QE=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Jee=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new _r(n,s)),this.resultPoints.push(new _r(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),y4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var o=y4e(e),c=o.next();!c.done;c=o.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}for(var d=0,A=0,h=e.length,f=0;f<h-1;f++){var m=void 0;for(m=1,A|=1<<f;m<e[f];m++,A&=~(1<<f)){var p=t.combins(i-m-1,h-f-2);if(n&&A===0&&i-m-(h-f-1)>=h-f-1&&(p-=t.combins(i-m-(h-f),h-f-2)),h-f-1>1){for(var g=0,x=i-m-(h-f-2);x>r;x--)g+=t.combins(i-m-x-1,h-f-3);p-=g*(h-1-f)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,o=e;o>n;o--)s*=o,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),b4e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Ki(n),s=0,i=e[0],o=i.getRightChar().getValue(),c=11;c>=0;--c)o&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),A=11;A>=0;--A)d&1<<A&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),A=11;A>=0;--A)h&1<<A&&a.set(s),s++}return a},t}(),am=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),S6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),w4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hu=function(t){w4e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(S6),N4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sm=function(t){N4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(S6),_4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ig=function(t){_4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new lr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(S6),r_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C4e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,o,c,u;if(!e)return null;if(e.length<2)throw new Ft;var d=e.substring(0,2);try{for(var A=r_(t.TWO_DIGIT_DATA_LENGTH),h=A.next();!h.done;h=A.next()){var f=h.value;if(f[0]===d)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,f[2],e):t.processFixedAI(2,f[1],e)}}catch(T){r={error:T}}finally{try{h&&!h.done&&(n=A.return)&&n.call(A)}finally{if(r)throw r.error}}if(e.length<3)throw new Ft;var m=e.substring(0,3);try{for(var p=r_(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var f=g.value;if(f[0]===m)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,f[2],e):t.processFixedAI(3,f[1],e)}}catch(T){a={error:T}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=r_(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var f=y.value;if(f[0]===m)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new Ft;var b=e.substring(0,4);try{for(var w=r_(t.FOUR_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var f=I.value;if(f[0]===b)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(T){c={error:T}}finally{try{I&&!I.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Ft},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Ft;var a=n.substring(0,e);if(n.length<e+r)throw new Ft;var s=n.substring(e,e+r),i=n.substring(e+r),o="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?o:o+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),o=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),CC=function(){function t(e){this.buffer=new nn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=C4e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Ig(this.information.getSize(),Ig.FNC1,Ig.FNC1):new Ig(this.information.getSize(),r-1,Ig.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Ig(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new sm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new sm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new sm(this.current.getPosition(),this.buffer.toString()):r=new sm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new am(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new sm(this.current.getPosition(),this.buffer.toString());return new am(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new am(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new sm(this.current.getPosition(),this.buffer.toString());return new am(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new am(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new sm(this.current.getPosition(),this.buffer.toString());return new am(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new am(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Hu(e+5,Hu.FNC1);if(r>=5&&r<15)return new Hu(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Hu(e+7,""+(n+1));if(n>=90&&n<116)return new Hu(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new lr}return new Hu(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Hu(e+5,Hu.FNC1);if(r>=5&&r<15)return new Hu(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Hu(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new qb("Decoding invalid alphanumeric value: "+n)}return new Hu(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Zee=function(){function t(e){this.information=e,this.generalDecoder=new CC(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),E4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yu=function(t){E4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Zee),S4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I4e=function(t){S4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new nn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Yu),B4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T4e=function(t){B4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new nn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Zee),P4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EC=function(t){P4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),o=1e5,c=0;c<5;++c)i/o===0&&r.append("0"),o/=10;r.append(i)},e}(Yu),j4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ete=function(t){j4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+EC.GTIN_SIZE+e.WEIGHT_SIZE)throw new Ft;var r=new nn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+EC.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(EC),k4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F4e=function(t){k4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(ete),O4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D4e=function(t){O4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(ete),R4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M4e=function(t){R4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Yu.GTIN_SIZE)throw new Ft;var r=new nn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yu.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Yu.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Yu),L4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U4e=function(t){L4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Yu.GTIN_SIZE)throw new Ft;var r=new nn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yu.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yu.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Yu.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Yu),Q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hh=function(t){Q4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Ft;var r=new nn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var o=a;o/10===0&&r.append("0"),r.append(o),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(EC);function V4e(t){try{if(t.get(1))return new I4e(t);if(!t.get(2))return new T4e(t);var e=CC.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new F4e(t);case 5:return new D4e(t)}var r=CC.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new M4e(t);case 13:return new U4e(t)}var n=CC.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new hh(t,"310","11");case 57:return new hh(t,"320","11");case 58:return new hh(t,"310","13");case 59:return new hh(t,"320","13");case 60:return new hh(t,"310","15");case 61:return new hh(t,"320","15");case 62:return new hh(t,"310","17");case 63:return new hh(t,"320","17")}}catch(a){throw console.log(a),new qb("unknown decoder: "+t)}}var qQ=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),H4e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),$4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K4e=function(t){$4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(o){if(o instanceof Ft){if(!this.pairs.length)throw new Ft;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Ft},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var o=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,mh(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(o.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var A=new Array(r);A.push(o);try{return this.checkRows(A,i+1)}catch(h){console.log(h)}}}throw new Ft},e.isValidSequence=function(r){var n,a;try{for(var s=mh(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var o=i.value;if(!(r.length>o.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==o[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var o=this.rows[a];if(o.getRowNumber()>r){i=o.isEquivalent(this.pairs);break}s=o.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new H4e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,o,c,u;try{for(var d=mh(n),A=d.next();!A.done;A=d.next()){var h=A.value;if(h.getPairs().length!==r.length){var f=!0;try{for(var m=(i=void 0,mh(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,mh(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(qQ.equals(g,w)){x=!0;break}}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(f=!1)}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,o,c,u;try{for(var d=mh(n),A=d.next();!A.done;A=d.next()){var h=A.value,f=!0;try{for(var m=(i=void 0,mh(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,mh(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){f=!1;break}}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(f)return!0}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=b4e.buildBitArray(r),a=V4e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),o=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],o[0],o[1]];return new tl(s,null,null,c,Fr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,o=1;o<this.pairs.size();++o){var c=this.pairs.get(o);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,o=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):o=!1;while(o);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Ft;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(A){d=null,console.log(A)}return new qQ(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),o;if(a>=0)o=a;else if(this.isEmptyPair(n))o=0;else{var c=n[n.length-1];o=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;o<i&&(d=!r.get(o),!!d);)o++;for(var A=0,h=o,f=o;f<i;f++)if(r.get(f)!==d)s[A]++;else{if(A===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=f;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,A--}else A++;s[A]=1,d=!d}throw new Ft},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,o;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,o=this.startEnd[1]}else i=this.startEnd[0],o=r.getNextUnset(this.startEnd[1]+1),s=o-this.startEnd[1];var u=this.getDecodeFinderCounters();Sa.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Jee(d,[i,o],i,o,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var A=17,h=jn.sum(new Int32Array(i))/A,f=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-f)/f>.3)throw new Ft;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new Ft;b=1}else if(b>8){if(y>8.7)throw new Ft;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(A);for(var I=4*n.getValue()+(a?0:2)+(s?0:1)-1,T=0,C=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[I][2*c];C+=m[c]*E}T+=m[c]}for(var S=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[I][2*c+1];S+=p[c]*E}var O=C+S;if(T&1||T>13||T<4)throw new Ft;var B=(13-T)/2,P=e.SYMBOL_WIDEST[B],D=9-P,W=cx.getRSSvalue(m,P,!0),Ae=cx.getRSSvalue(p,D,!1),ee=e.EVEN_TOTAL_SUBSET[B],ce=e.GSUM[B],de=W*ee+Ae+ce;return new QE(de,O)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=jn.sum(new Int32Array(this.getOddCounts())),a=jn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var o=!1,c=!1;a>13?c=!0:a<4&&(o=!0);var u=n+a-r,d=(n&1)===1,A=(a&1)===0;if(u===1)if(d){if(A)throw new Ft;i=!0}else{if(!A)throw new Ft;c=!0}else if(u===-1)if(d){if(A)throw new Ft;s=!0}else{if(!A)throw new Ft;o=!0}else if(u===0){if(d){if(!A)throw new Ft;n<a?(s=!0,c=!0):(i=!0,o=!0)}else if(A)throw new Ft}else throw new Ft;if(s){if(i)throw new Ft;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new Ft;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(pm),G4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z4e=function(t){G4e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(QE),q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WQ=function(t){q4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,o,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var A=TB(this.possibleLeftPairs),h=A.next();!h.done;h=A.next()){var f=h.value;if(f.getCount()>1)try{for(var m=(o=void 0,TB(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(f,g))return e.constructResult(f,g)}}catch(x){o={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(o)throw o.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}throw new Ft},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var o=TB(r),c=o.next();!c.done;c=o.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new nn,o=13-s.length;o>0;o--)i.append("0");i.append(s);for(var c=0,o=0;o<13;o++){var u=i.charAt(o).charCodeAt(0)-48;c+=o&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),A=n.getFinderPattern().getResultPoints();return new tl(i.toString(),null,0,[d[0],d[1],A[0],A[1]],Fr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),o=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get(Ia.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new _r(u,a))}var d=this.decodeDataCharacter(r,o,!0),A=this.decodeDataCharacter(r,o,!1);return new z4e(1597*d.getValue()+A.getValue(),d.getChecksumPortion()+4*A.getChecksumPortion(),o)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)_i.recordPatternInReverse(r,n.getStartEnd()[0],s);else{_i.recordPattern(r,n.getStartEnd()[1]+1,s);for(var o=0,c=s.length-1;o<c;o++,c--){var u=s[o];s[o]=s[c],s[c]=u}}for(var d=a?16:15,A=jn.sum(new Int32Array(s))/d,h=this.getOddCounts(),f=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),o=0;o<s.length;o++){var g=s[o]/A,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(o/2);o&1?(f[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,o=h.length-1;o>=0;o--)w*=9,w+=h[o],b+=h[o];for(var I=0,T=0,o=f.length-1;o>=0;o--)I*=9,I+=f[o],T+=f[o];var C=w+3*I;if(a){if(b&1||b>12||b<4)throw new Ft;var E=(12-b)/2,S=e.OUTSIDE_ODD_WIDEST[E],O=9-S,B=cx.getRSSvalue(h,S,!1),P=cx.getRSSvalue(f,O,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],W=e.OUTSIDE_GSUM[E];return new QE(B*D+P+W,C)}else{if(T&1||T>10||T<4)throw new Ft;var E=(10-T)/2,S=e.INSIDE_ODD_WIDEST[E],O=9-S,B=cx.getRSSvalue(h,S,!0),P=cx.getRSSvalue(f,O,!1),Ae=e.INSIDE_ODD_TOTAL_SUBSET[E],W=e.INSIDE_GSUM[E];return new QE(P*Ae+B+W,C)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,o=0;o<s&&(i=!r.get(o),n!==i);)o++;for(var c=0,u=o,d=o;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(pm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new Ft},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),o=s[0]-1;o>=0&&i!==r.get(o);)o--;o++;var c=s[0]-o,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Sa.arraycopy(u,0,d,1,u.length-1),d[0]=c;var A=this.parseFinderValue(d,e.FINDER_PATTERNS),h=o,f=s[1];return a&&(h=r.getSize()-1-h,f=r.getSize()-1-f),new Jee(A,[o,s[1]],h,f,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=jn.sum(new Int32Array(this.getOddCounts())),s=jn.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,c=!1,u=!1;r?(a>12?o=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?o=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,A=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(A){if(h)throw new Ft;o=!0}else{if(!h)throw new Ft;u=!0}else if(d===-1)if(A){if(h)throw new Ft;i=!0}else{if(!h)throw new Ft;c=!0}else if(d===0){if(A){if(!h)throw new Ft;a<s?(i=!0,u=!0):(o=!0,c=!0)}else if(h)throw new Ft}else throw new Ft;if(i){if(o)throw new Ft;pm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&pm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Ft;pm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&pm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(pm),W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ux=function(t){W4e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Ia.POSSIBLE_FORMATS):null,s=r&&r.get(Ia.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(Ia.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Fr.EAN_13)||a.includes(Fr.UPC_A)||a.includes(Fr.EAN_8)||a.includes(Fr.UPC_E))&&n.readers.push(new BB(r)),a.includes(Fr.CODE_39)&&n.readers.push(new LQ(s,i)),a.includes(Fr.CODE_93)&&n.readers.push(new UQ),a.includes(Fr.CODE_128)&&n.readers.push(new MQ),a.includes(Fr.ITF)&&n.readers.push(new QQ),a.includes(Fr.CODABAR)&&n.readers.push(new g4e),a.includes(Fr.RSS_14)&&n.readers.push(new WQ),a.includes(Fr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new K4e))),n.readers.length===0&&(n.readers.push(new BB(r)),n.readers.push(new LQ),n.readers.push(new UQ),n.readers.push(new BB(r)),n.readers.push(new MQ),n.readers.push(new QQ),n.readers.push(new WQ)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Ft},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(_i),X4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){X4e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new ux(n),r,n)||this}return e})(Sv);var XQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vn=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Mn=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Y4e=function(){function t(e,r,n,a,s,i){var o,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),A=i.getECBlocks();try{for(var h=XQ(A),f=h.next();!f.done;f=h.next()){var m=f.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(o)throw o.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new lr;try{for(var s=XQ(t.VERSIONS),i=s.next();!i.done;i=s.next()){var o=i.value;if(o.symbolSizeRows===e&&o.symbolSizeColumns===r)return o}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new lr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Vn(5,new Mn(1,3))),new t(2,12,12,10,10,new Vn(7,new Mn(1,5))),new t(3,14,14,12,12,new Vn(10,new Mn(1,8))),new t(4,16,16,14,14,new Vn(12,new Mn(1,12))),new t(5,18,18,16,16,new Vn(14,new Mn(1,18))),new t(6,20,20,18,18,new Vn(18,new Mn(1,22))),new t(7,22,22,20,20,new Vn(20,new Mn(1,30))),new t(8,24,24,22,22,new Vn(24,new Mn(1,36))),new t(9,26,26,24,24,new Vn(28,new Mn(1,44))),new t(10,32,32,14,14,new Vn(36,new Mn(1,62))),new t(11,36,36,16,16,new Vn(42,new Mn(1,86))),new t(12,40,40,18,18,new Vn(48,new Mn(1,114))),new t(13,44,44,20,20,new Vn(56,new Mn(1,144))),new t(14,48,48,22,22,new Vn(68,new Mn(1,174))),new t(15,52,52,24,24,new Vn(42,new Mn(2,102))),new t(16,64,64,14,14,new Vn(56,new Mn(2,140))),new t(17,72,72,16,16,new Vn(36,new Mn(4,92))),new t(18,80,80,18,18,new Vn(48,new Mn(4,114))),new t(19,88,88,20,20,new Vn(56,new Mn(4,144))),new t(20,96,96,22,22,new Vn(68,new Mn(4,174))),new t(21,104,104,24,24,new Vn(56,new Mn(6,136))),new t(22,120,120,18,18,new Vn(68,new Mn(6,175))),new t(23,132,132,20,20,new Vn(62,new Mn(8,163))),new t(24,144,144,22,22,new Vn(62,new Mn(8,156),new Mn(2,155))),new t(25,8,18,6,16,new Vn(7,new Mn(1,5))),new t(26,8,32,6,14,new Vn(11,new Mn(1,10))),new t(27,12,26,10,24,new Vn(14,new Mn(1,16))),new t(28,12,36,10,16,new Vn(18,new Mn(1,22))),new t(29,16,36,14,16,new Vn(24,new Mn(1,32))),new t(30,16,48,14,22,new Vn(28,new Mn(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),J4e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new lr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new aA(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return Y4e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),o=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!o)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,o=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new lr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Or("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,o=n/s|0,c=i*a,u=o*s,d=new aA(u,c),A=0;A<i;++A)for(var h=A*a,f=0;f<o;++f)for(var m=f*s,p=0;p<a;++p)for(var g=A*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=f*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),YQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z4e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,o=r.getECBlocks(),c=0,u=o.getECBlocks();try{for(var d=YQ(u),A=d.next();!A.done;A=d.next()){var h=A.value;c+=h.getCount()}}catch(W){n={error:W}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var f=new Array(c),m=0;try{for(var p=YQ(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=o.getECCodewords()+y;f[m++]=new t(y,new Uint8Array(b))}}catch(W){s={error:W}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=f[0].codewords.length,I=w-o.getECCodewords(),T=I-1,C=0,x=0;x<T;x++)for(var E=0;E<m;E++)f[E].codewords[x]=e[C++];for(var S=r.getVersionNumber()===24,O=S?8:m,E=0;E<O;E++)f[E].codewords[I-1]=e[C++];for(var B=f[0].codewords.length,x=I;x<B;x++)for(var E=0;E<m;E++){var P=S?(E+8)%m:E,D=S&&P>7?x-1:x;f[P].codewords[D]=e[C++]}if(C!==e.length)throw new Or;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),tte=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Or(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,o=e<i?e:i,c=i-o,u=255>>8-o<<c;r=(s[a]&u)>>c,e-=o,n+=o,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),ui;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(ui||(ui={}));var e5e=function(){function t(){}return t.decode=function(e){var r=new tte(e),n=new nn,a=new nn,s=new Array,i=ui.ASCII_ENCODE;do if(i===ui.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case ui.C40_ENCODE:this.decodeC40Segment(r,n);break;case ui.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case ui.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case ui.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case ui.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new lr}i=ui.ASCII_ENCODE}while(i!==ui.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new c4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new lr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),ui.ASCII_ENCODE;if(s===129)return ui.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return ui.C40_ENCODE;case 231:return ui.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return ui.ANSIX12_ENCODE;case 239:return ui.TEXT_ENCODE;case 240:return ui.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new lr;break}}while(e.available()>0);return ui.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var o=0;o<3;o++){var c=a[o];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new lr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new lr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new lr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var o=0;o<3;o++){var c=a[o];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new lr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new lr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new lr;break;default:throw new lr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new lr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new lr;for(var o=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new lr;o[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(o);try{r.append(wu.decode(o,Nn.ISO88591))}catch(u){throw new qb("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),t5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r5e=function(){function t(){this.rsDecoder=new u4(Ql.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new J4e(e),s=a.getVersion(),i=a.readCodewords(),o=Z4e.getDataBlocks(i,s),c=0;try{for(var u=t5e(o),d=u.next();!d.done;d=u.next()){var A=d.value;c+=A.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),f=o.length,m=0;m<f;m++){var p=o[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*f+m]=g[y]}return e5e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new ei}for(var a=0;a<r;a++)e[a]=n[a]},t}(),n5e=function(){function t(e){this.image=e,this.rectangleDetector=new Hj(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Ft;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],o=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(o&1)===1&&(o+=1),(c&1)===1&&(c+=1),4*o<7*c&&4*c<7*o&&(o=c=Math.max(o,c));var u=t.sampleGrid(this.image,n,a,s,i,o,c);return new C6(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new _r(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new _r(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),o=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,A=[s,r,n,a];return d>o&&(d=o,A[0]=r,A[1]=n,A[2]=a,A[3]=s),d>c&&(d=c,A[0]=n,A[1]=a,A[2]=s,A[3]=r),d>u&&(A[0]=a,A[1]=s,A[2]=r,A[3]=n),A},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),o=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(o,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),o=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(o+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),o=this.transitionsBetween(u,s);var d=new _r(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),A=new _r(s.getX()+(r.getX()-n.getX())/(o+1),s.getY()+(r.getY()-n.getY())/(o+1));if(!this.isValid(d))return this.isValid(A)?A:null;if(!this.isValid(A))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),f=this.transitionsBetween(c,A)+this.transitionsBetween(u,A);return h>f?d:A},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,o=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,o*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,o=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(o&1)===1&&(o+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,A=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,A),n=t.moveAway(n,d,A),a=t.moveAway(a,d,A),s=t.moveAway(s,d,A);var h,f;return c=t.shiftPoint(r,n,o*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,o*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,o*4),u=t.shiftPoint(u,n,i*4),f=t.shiftPoint(s,a,o*4),f=t.shiftPoint(f,r,i*4),[c,h,u,f]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,o){var c=E6.getInstance();return c.sampleGrid(e,i,o,.5,.5,i-.5,.5,i-.5,o-.5,.5,o-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),o=Math.abs(i-a)>Math.abs(s-n);if(o){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),A=-u/2,h=a<i?1:-1,f=n<s?1:-1,m=0,p=this.image.get(o?a:n,o?n:a),g=n,x=a;g!==s;g+=f){var y=this.image.get(o?x:g,o?g:x);if(y!==p&&(m++,p=y),A+=d,A>0){if(x===i)break;x+=h,A-=u}}return m},t}(),VE=function(){function t(){this.decoder=new r5e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Ia.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new n5e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var o=n.getRawBytes(),c=new tl(n.getText(),o,8*o.length,a,Fr.DATA_MATRIX,Sa.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(No.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(No.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Ft;var a=this.moduleSize(r,e),s=r[1],i=n[1],o=r[0],c=n[0],u=(c-o+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new Ft;var A=a/2;s+=A,o+=A;for(var h=new aA(u,d),f=0;f<d;f++)for(var m=s+f*a,p=0;p<u;p++)e.get(o+p*a,m)&&h.set(p,f);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Ft;var i=a-e[0];if(i===0)throw new Ft;return i},t.NO_POINTS=[],t}(),a5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){a5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new VE,r)||this}return e})(Sv);var dx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(dx||(dx={}));var s5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ls(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Or;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(dx.L,"L",1),t.M=new t(dx.M,"M",0),t.Q=new t(dx.Q,"Q",3),t.H=new t(dx.H,"H",2),t}(),i5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rte=function(){function t(e){this.errorCorrectionLevel=s5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return cn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var o=i5e(t.FORMAT_INFO_DECODE_LOOKUP),c=o.next();!c.done;c=o.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var A=t.numBitsDiffering(e,d);A<s&&(i=u[1],s=A),e!==r&&(A=t.numBitsDiffering(r,d),A<s&&(i=u[1],s=A))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),o5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Et=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=o5e(a),i=s.next();!i.done;i=s.next()){var o=i.value;n+=o.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ge=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),l5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gm=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var o=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=l5e(u),A=d.next();!A.done;A=d.next()){var h=A.value;o+=h.getCount()*(h.getDataCodewords()+c)}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new lr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new lr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Or;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=rte.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new aA(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Et(7,new Ge(1,19)),new Et(10,new Ge(1,16)),new Et(13,new Ge(1,13)),new Et(17,new Ge(1,9))),new t(2,Int32Array.from([6,18]),new Et(10,new Ge(1,34)),new Et(16,new Ge(1,28)),new Et(22,new Ge(1,22)),new Et(28,new Ge(1,16))),new t(3,Int32Array.from([6,22]),new Et(15,new Ge(1,55)),new Et(26,new Ge(1,44)),new Et(18,new Ge(2,17)),new Et(22,new Ge(2,13))),new t(4,Int32Array.from([6,26]),new Et(20,new Ge(1,80)),new Et(18,new Ge(2,32)),new Et(26,new Ge(2,24)),new Et(16,new Ge(4,9))),new t(5,Int32Array.from([6,30]),new Et(26,new Ge(1,108)),new Et(24,new Ge(2,43)),new Et(18,new Ge(2,15),new Ge(2,16)),new Et(22,new Ge(2,11),new Ge(2,12))),new t(6,Int32Array.from([6,34]),new Et(18,new Ge(2,68)),new Et(16,new Ge(4,27)),new Et(24,new Ge(4,19)),new Et(28,new Ge(4,15))),new t(7,Int32Array.from([6,22,38]),new Et(20,new Ge(2,78)),new Et(18,new Ge(4,31)),new Et(18,new Ge(2,14),new Ge(4,15)),new Et(26,new Ge(4,13),new Ge(1,14))),new t(8,Int32Array.from([6,24,42]),new Et(24,new Ge(2,97)),new Et(22,new Ge(2,38),new Ge(2,39)),new Et(22,new Ge(4,18),new Ge(2,19)),new Et(26,new Ge(4,14),new Ge(2,15))),new t(9,Int32Array.from([6,26,46]),new Et(30,new Ge(2,116)),new Et(22,new Ge(3,36),new Ge(2,37)),new Et(20,new Ge(4,16),new Ge(4,17)),new Et(24,new Ge(4,12),new Ge(4,13))),new t(10,Int32Array.from([6,28,50]),new Et(18,new Ge(2,68),new Ge(2,69)),new Et(26,new Ge(4,43),new Ge(1,44)),new Et(24,new Ge(6,19),new Ge(2,20)),new Et(28,new Ge(6,15),new Ge(2,16))),new t(11,Int32Array.from([6,30,54]),new Et(20,new Ge(4,81)),new Et(30,new Ge(1,50),new Ge(4,51)),new Et(28,new Ge(4,22),new Ge(4,23)),new Et(24,new Ge(3,12),new Ge(8,13))),new t(12,Int32Array.from([6,32,58]),new Et(24,new Ge(2,92),new Ge(2,93)),new Et(22,new Ge(6,36),new Ge(2,37)),new Et(26,new Ge(4,20),new Ge(6,21)),new Et(28,new Ge(7,14),new Ge(4,15))),new t(13,Int32Array.from([6,34,62]),new Et(26,new Ge(4,107)),new Et(22,new Ge(8,37),new Ge(1,38)),new Et(24,new Ge(8,20),new Ge(4,21)),new Et(22,new Ge(12,11),new Ge(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Et(30,new Ge(3,115),new Ge(1,116)),new Et(24,new Ge(4,40),new Ge(5,41)),new Et(20,new Ge(11,16),new Ge(5,17)),new Et(24,new Ge(11,12),new Ge(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Et(22,new Ge(5,87),new Ge(1,88)),new Et(24,new Ge(5,41),new Ge(5,42)),new Et(30,new Ge(5,24),new Ge(7,25)),new Et(24,new Ge(11,12),new Ge(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Et(24,new Ge(5,98),new Ge(1,99)),new Et(28,new Ge(7,45),new Ge(3,46)),new Et(24,new Ge(15,19),new Ge(2,20)),new Et(30,new Ge(3,15),new Ge(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Et(28,new Ge(1,107),new Ge(5,108)),new Et(28,new Ge(10,46),new Ge(1,47)),new Et(28,new Ge(1,22),new Ge(15,23)),new Et(28,new Ge(2,14),new Ge(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Et(30,new Ge(5,120),new Ge(1,121)),new Et(26,new Ge(9,43),new Ge(4,44)),new Et(28,new Ge(17,22),new Ge(1,23)),new Et(28,new Ge(2,14),new Ge(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Et(28,new Ge(3,113),new Ge(4,114)),new Et(26,new Ge(3,44),new Ge(11,45)),new Et(26,new Ge(17,21),new Ge(4,22)),new Et(26,new Ge(9,13),new Ge(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Et(28,new Ge(3,107),new Ge(5,108)),new Et(26,new Ge(3,41),new Ge(13,42)),new Et(30,new Ge(15,24),new Ge(5,25)),new Et(28,new Ge(15,15),new Ge(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Et(28,new Ge(4,116),new Ge(4,117)),new Et(26,new Ge(17,42)),new Et(28,new Ge(17,22),new Ge(6,23)),new Et(30,new Ge(19,16),new Ge(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Et(28,new Ge(2,111),new Ge(7,112)),new Et(28,new Ge(17,46)),new Et(30,new Ge(7,24),new Ge(16,25)),new Et(24,new Ge(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Et(30,new Ge(4,121),new Ge(5,122)),new Et(28,new Ge(4,47),new Ge(14,48)),new Et(30,new Ge(11,24),new Ge(14,25)),new Et(30,new Ge(16,15),new Ge(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Et(30,new Ge(6,117),new Ge(4,118)),new Et(28,new Ge(6,45),new Ge(14,46)),new Et(30,new Ge(11,24),new Ge(16,25)),new Et(30,new Ge(30,16),new Ge(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Et(26,new Ge(8,106),new Ge(4,107)),new Et(28,new Ge(8,47),new Ge(13,48)),new Et(30,new Ge(7,24),new Ge(22,25)),new Et(30,new Ge(22,15),new Ge(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Et(28,new Ge(10,114),new Ge(2,115)),new Et(28,new Ge(19,46),new Ge(4,47)),new Et(28,new Ge(28,22),new Ge(6,23)),new Et(30,new Ge(33,16),new Ge(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Et(30,new Ge(8,122),new Ge(4,123)),new Et(28,new Ge(22,45),new Ge(3,46)),new Et(30,new Ge(8,23),new Ge(26,24)),new Et(30,new Ge(12,15),new Ge(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Et(30,new Ge(3,117),new Ge(10,118)),new Et(28,new Ge(3,45),new Ge(23,46)),new Et(30,new Ge(4,24),new Ge(31,25)),new Et(30,new Ge(11,15),new Ge(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Et(30,new Ge(7,116),new Ge(7,117)),new Et(28,new Ge(21,45),new Ge(7,46)),new Et(30,new Ge(1,23),new Ge(37,24)),new Et(30,new Ge(19,15),new Ge(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Et(30,new Ge(5,115),new Ge(10,116)),new Et(28,new Ge(19,47),new Ge(10,48)),new Et(30,new Ge(15,24),new Ge(25,25)),new Et(30,new Ge(23,15),new Ge(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Et(30,new Ge(13,115),new Ge(3,116)),new Et(28,new Ge(2,46),new Ge(29,47)),new Et(30,new Ge(42,24),new Ge(1,25)),new Et(30,new Ge(23,15),new Ge(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Et(30,new Ge(17,115)),new Et(28,new Ge(10,46),new Ge(23,47)),new Et(30,new Ge(10,24),new Ge(35,25)),new Et(30,new Ge(19,15),new Ge(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Et(30,new Ge(17,115),new Ge(1,116)),new Et(28,new Ge(14,46),new Ge(21,47)),new Et(30,new Ge(29,24),new Ge(19,25)),new Et(30,new Ge(11,15),new Ge(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Et(30,new Ge(13,115),new Ge(6,116)),new Et(28,new Ge(14,46),new Ge(23,47)),new Et(30,new Ge(44,24),new Ge(7,25)),new Et(30,new Ge(59,16),new Ge(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Et(30,new Ge(12,121),new Ge(7,122)),new Et(28,new Ge(12,47),new Ge(26,48)),new Et(30,new Ge(39,24),new Ge(14,25)),new Et(30,new Ge(22,15),new Ge(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Et(30,new Ge(6,121),new Ge(14,122)),new Et(28,new Ge(6,47),new Ge(34,48)),new Et(30,new Ge(46,24),new Ge(10,25)),new Et(30,new Ge(2,15),new Ge(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Et(30,new Ge(17,122),new Ge(4,123)),new Et(28,new Ge(29,46),new Ge(14,47)),new Et(30,new Ge(49,24),new Ge(10,25)),new Et(30,new Ge(24,15),new Ge(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Et(30,new Ge(4,122),new Ge(18,123)),new Et(28,new Ge(13,46),new Ge(32,47)),new Et(30,new Ge(48,24),new Ge(14,25)),new Et(30,new Ge(42,15),new Ge(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Et(30,new Ge(20,117),new Ge(4,118)),new Et(28,new Ge(40,47),new Ge(7,48)),new Et(30,new Ge(43,24),new Ge(22,25)),new Et(30,new Ge(10,15),new Ge(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Et(30,new Ge(19,118),new Ge(6,119)),new Et(28,new Ge(18,47),new Ge(31,48)),new Et(30,new Ge(34,24),new Ge(34,25)),new Et(30,new Ge(20,15),new Ge(61,16)))],t}(),Di;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Di||(Di={}));var JQ=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Di.DATA_MASK_000,new t(Di.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Di.DATA_MASK_001,new t(Di.DATA_MASK_001,function(e,r){return(e&1)===0})],[Di.DATA_MASK_010,new t(Di.DATA_MASK_010,function(e,r){return r%3===0})],[Di.DATA_MASK_011,new t(Di.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Di.DATA_MASK_100,new t(Di.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Di.DATA_MASK_101,new t(Di.DATA_MASK_101,function(e,r){return e*r%6===0})],[Di.DATA_MASK_110,new t(Di.DATA_MASK_110,function(e,r){return e*r%6<3})],[Di.DATA_MASK_111,new t(Di.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),c5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new lr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=rte.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new lr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Gm.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var o=Gm.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(o=Gm.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new lr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=JQ.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,o=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,A=a-1;A>0;A-=2){A===6&&A--;for(var h=0;h<a;h++)for(var f=i?a-1-h:h,m=0;m<2;m++)s.get(A-m,f)||(d++,u<<=1,this.bitMatrix.get(A-m,f)&&(u|=1),d===8&&(o[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new lr;return o},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=JQ.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),ZQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,o;if(e.length!==r.getTotalCodewords())throw new Or;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var A=ZQ(d),h=A.next();!h.done;h=A.next()){var f=h.value;u+=f.getCount()}}catch(D){a={error:D}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=ZQ(d),x=g.next();!x.done;x=g.next())for(var f=x.value,y=0;y<f.getCount();y++){var b=f.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){i={error:D}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}for(var I=m[0].codewords.length,T=m.length-1;T>=0;){var C=m[T].codewords.length;if(C===I)break;T--}T++;for(var E=I-c.getECCodewordsPerBlock(),S=0,y=0;y<E;y++)for(var O=0;O<p;O++)m[O].codewords[y]=e[S++];for(var O=T;O<p;O++)m[O].codewords[E]=e[S++];for(var B=m[0].codewords.length,y=E;y<B;y++)for(var O=0;O<p;O++){var P=O<T?y:y+1;m[O].codewords[P]=e[S++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),iu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(iu||(iu={}));var Oa=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Or;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(iu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(iu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(iu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(iu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(iu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(iu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(iu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(iu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(iu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(iu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),d5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new tte(e),i=new nn,o=new Array,c=-1,u=-1;try{var d=null,A=!1,h=void 0;do{if(s.available()<4)h=Oa.TERMINATOR;else{var f=s.readBits(4);h=Oa.forBits(f)}switch(h){case Oa.TERMINATOR:break;case Oa.FNC1_FIRST_POSITION:case Oa.FNC1_SECOND_POSITION:A=!0;break;case Oa.STRUCTURED_APPEND:if(s.available()<16)throw new lr;c=s.readBits(8),u=s.readBits(8);break;case Oa.ECI:var m=t.parseECIValue(s);if(d=vi.getCharacterSetECIByValue(m),d===null)throw new lr;break;case Oa.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case Oa.NUMERIC:t.decodeNumericSegment(s,i,x);break;case Oa.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,A);break;case Oa.BYTE:t.decodeByteSegment(s,i,x,d,o,a);break;case Oa.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new lr}break}}while(h!==Oa.TERMINATOR)}catch{throw new lr}return new c4(e,i.toString(),o.length===0?null:o,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new lr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),o=i/96<<8&4294967295|i%96;o<959?o+=41377:o+=42657,a[s]=o>>8&255,a[s+1]=o&255,s+=2,n--}try{r.append(wu.decode(a,Nn.GB2312))}catch(c){throw new lr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new lr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),o=i/192<<8&4294967295|i%192;o<7936?o+=33088:o+=49472,a[s]=o>>8,a[s+1]=o,s+=2,n--}try{r.append(wu.decode(a,Nn.SHIFT_JIS))}catch(c){throw new lr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new lr;for(var o=new Uint8Array(n),c=0;c<n;c++)o[c]=e.readBits(8);var u;a===null?u=Nn.guessEncoding(o,i):u=a.getName();try{r.append(wu.decode(o,u))}catch(d){throw new lr(d)}s.push(o)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new lr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new lr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new lr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var o=s;o<r.length();o++)r.charAt(o)==="%"&&(o<r.length()-1&&r.charAt(o+1)==="%"?r.deleteCharAt(o+1):r.setCharAt(o,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new lr;var a=e.readBits(10);if(a>=1e3)throw new lr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new lr;var s=e.readBits(7);if(s>=100)throw new lr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new lr;var i=e.readBits(4);if(i>=10)throw new lr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new lr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),nte=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),eV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A5e=function(){function t(){this.rsDecoder=new u4(Ql.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(aA.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new c5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new nte(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,o=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=u5e.getDataBlocks(u,o,c),A=0;try{for(var h=eV(d),f=h.next();!f.done;f=h.next()){var m=f.value;A+=m.getNumDataCodewords()}}catch(T){n={error:T}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(A),g=0;try{for(var x=eV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var I=0;I<w;I++)p[g++]=b[I]}}catch(T){s={error:T}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return d5e.decode(p,o,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new ei}for(var a=0;a<r;a++)e[a]=n[a]},t}(),f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h5e=function(t){f5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,o=(this.estimatedModuleSize+a)/2;return new e(s,i,o)},e}(_r),m5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p5e=function(){function t(e,r,n,a,s,i,o){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),o=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!o.get(d,u);)d++;for(var A=0;d<a;){if(o.get(d,u))if(A===1)i[1]++;else if(A===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,A=1}else i[++A]++;else A===1&&A++,i[A]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Ft},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var c=e;c>=0&&s.get(r,c)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&o[1]<=n;)o[1]++,c++;if(c===i||o[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&o[2]<=n;)o[2]++,c++;if(o[2]>n)return NaN;var u=o[0]+o[1]+o[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],o=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,o,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=m5e(this.possibleCenters),A=d.next();!A.done;A=d.next()){var h=A.value;if(h.aboutEquals(u,c,o))return h.combineEstimate(c,o,u)}}catch(m){a={error:m}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var f=new h5e(o,c,u);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t}(),g5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x5e=function(t){g5e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,o=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,o,c,s)},e}(_r),v5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),F1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y5e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Ia.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ia.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),o=Math.floor(3*s/(4*t.MAX_MODULES));(o<t.MIN_SKIP||r)&&(o=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=o-1;d<s&&!c;d+=o){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var A=0,h=0;h<i;h++)if(a.get(h,d))(A&1)===1&&A++,u[A]++;else if(A&1)u[A]++;else if(A===4)if(t.foundPatternCross(u)){var f=this.handlePossibleCenter(u,d,h,n);if(f===!0)if(o=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-o,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,A=3;continue}A=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,A=3;else u[++A]++;if(t.foundPatternCross(u)){var f=this.handlePossibleCenter(u,d,i,n);f===!0&&(o=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return _r.orderBestPatterns(p),new v5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,o=this.image;e>=i&&r>=i&&o.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!o.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&o.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=o.getHeight(),u=o.getWidth();for(i=1;e+i<c&&r+i<u&&o.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!o.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&o.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),o=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)o[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&o[3]<n;)o[3]++,c++;if(c===i||o[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&o[4]<n;)o[4]++,c++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),o=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)o[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&o[1]<=n;)o[1]++,c--;if(c<0||o[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&o[0]<=n;)o[0]++,c--;if(o[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)o[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&o[3]<n;)o[3]++,c++;if(c===i||o[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&o[4]<n;)o[4]++,c++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(o)?t.centerFromEnd(o,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),o=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(o)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(o),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(o),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,A=0,h=d.length;A<h;A++){var f=d[A];if(f.aboutEquals(c,o,i)){d[A]=f.combineEstimate(o,i,c),u=!0;break}}if(!u){var m=new x5e(i,o,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=F1(this.possibleCenters),i=s.next();!i.done;i=s.next()){var o=i.value;if(o.getCount()>=t.CENTER_QUORUM)if(a==null)a=o;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-o.getX())-Math.abs(a.getY()-o.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,o=this.possibleCenters.length;try{for(var c=F1(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var A=i/o,h=0;try{for(var f=F1(this.possibleCenters),m=f.next();!m.done;m=f.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-A)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Ft;var i=this.possibleCenters,o;if(s>3){var c=0,u=0;try{for(var d=F1(this.possibleCenters),A=d.next();!A.done;A=d.next()){var h=A.value,f=h.getEstimatedModuleSize();c+=f,u+=f*f}}catch(I){e={error:I}}finally{try{A&&!A.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}o=c/s;var m=Math.sqrt(u/s-o*o);i.sort(function(I,T){var C=Math.abs(T.getEstimatedModuleSize()-o),E=Math.abs(I.getEstimatedModuleSize()-o);return C<E?-1:C>E?1:0});for(var p=Math.max(.2*o,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-o)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=F1(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(T){n={error:T}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}o=c/i.length,i.sort(function(T,C){if(C.getCount()===T.getCount()){var E=Math.abs(C.getEstimatedModuleSize()-o),S=Math.abs(T.getEstimatedModuleSize()-o);return E<S?1:E>S?-1:0}else return C.getCount()-T.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),b5e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ia.NEED_RESULT_POINT_CALLBACK);var r=new y5e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Ft("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),o=Gm.getProvisionalVersionForDimension(i),c=o.getDimensionForVersion()-7,u=null;if(o.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),A=n.getY()-r.getY()+a.getY(),h=1-3/c,f=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(A-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,f,m,p);break}catch(b){if(!(b instanceof Ft))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new C6(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,o,c,u,d;return a!==null?(o=a.getX(),c=a.getY(),u=i-3,d=u):(o=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),Yee.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),o,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=E6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=jn.round(_r.distance(e,r)/a),i=jn.round(_r.distance(e,n)/a),o=Math.floor((s+i)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new Ft("Dimensions could be not found.")}return o},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,o=e-(n-e);o<0?(i=e/(e-o),o=0):o>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),o=Math.floor(e+(o-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,o,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var o=Math.abs(n-e),c=Math.abs(a-r),u=-o/2,d=e<n?1:-1,A=r<a?1:-1,h=0,f=n+d,m=e,p=r;m!==f;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return jn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=A,u-=o}}return h===2?jn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),o=Math.min(this.image.getWidth()-1,r+s);if(o-i<e*3)throw new Ft("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Ft("Alignment bottom exceeds estimated module size.");var d=new p5e(this.image,i,c,o-i,u-c,e,this.resultPointCallback);return d.find()},t}(),HE=function(){function t(){this.decoder=new A5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Ia.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new b5e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof nte&&n.getOther().applyMirroredCorrection(a);var o=new tl(n.getText(),n.getRawBytes(),void 0,a,Fr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&o.putMetadata(No.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&o.putMetadata(No.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(o.putMetadata(No.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(No.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Ft;var a=this.moduleSize(r,e),s=r[1],i=n[1],o=r[0],c=n[0];if(o>=c||s>=i)throw new Ft;if(i-s!==c-o&&(c=o+(i-s),c>=e.getWidth()))throw new Ft;var u=Math.round((c-o+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new Ft;if(d!==u)throw new Ft;var A=Math.floor(a/2);s+=A,o+=A;var h=o+Math.floor((u-1)*a)-c;if(h>0){if(h>A)throw new Ft;o-=h}var f=s+Math.floor((d-1)*a)-i;if(f>0){if(f>A)throw new Ft;s-=f}for(var m=new aA(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(o+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],o=!0,c=0;s<a&&i<n;){if(o!==r.get(s,i)){if(++c===5)break;o=!o}s++,i++}if(s===a||i===n)throw new Ft;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),w5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},En=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return jn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=w5e(e),o=i.next();!o.done;o=i.next()){var c=o.value;a[s++]=c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=yi.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),N5e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),_5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C5e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new N5e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,o=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,o);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,o=0;try{for(var d=(n=void 0,_5e(s)),A=d.next();!A.done;A=d.next()){var h=A.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(o=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(o=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var o=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var A=t.findGuardPattern(e,s,--a,n,!1,i,u);if(A!=null)d=A;else{a++;break}}o[0]=new _r(d[0],a),o[1]=new _r(d[1],a),c=!0;break}}var h=a+1;if(c){for(var f=0,A=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,A[0],h,n,!1,i,u);if(d!=null&&Math.abs(A[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(A[1]-d[1])<t.MAX_PATTERN_DRIFT)A=d,f=0;else{if(f>t.SKIPPED_ROW_COUNT_MAX)break;f++}}h-=f+1,o[2]=new _r(A[0],h),o[3]=new _r(A[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&yi.fill(o,null),o},t.findGuardPattern=function(e,r,n,a,s,i,o){yi.fillWithin(o,0,o.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,A=0,h=i.length,f=s;d<a;d++){var m=e.get(d,n);if(m!==f)o[A]++;else{if(A===h-1){if(t.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=o[0]+o[1],Sa.arraycopy(o,2,o,0,A-1),o[A-1]=0,o[A]=0,A--}else A++;o[A]=1,f=!f}}return A===h-1&&t.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,o=0;o<a;o++)s+=e[o],i+=r[o];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var A=e[d],h=r[d]*c,f=A>h?A-h:h-A;if(f>n)return 1/0;u+=f}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),E5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jm=function(){function t(e,r){if(r.length===0)throw new Or;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Sa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=E5e(this.coefficients),i=s.next();!i.done;i=s.next()){var o=i.value;a=this.field.add(a,o)}}catch(A){r={error:A}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Or("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Sa.arraycopy(n,0,s,0,i);for(var o=i;o<n.length;o++)s[o]=this.field.add(r[o-i],n[o]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Or("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Or("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),o=0;o<n;o++)for(var c=r[o],u=0;u<s;u++)i[o+u]=this.field.add(i[o+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Or;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new nn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),S5e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Or;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Xee;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),I5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B5e=function(t){I5e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new jm(a,new Int32Array([0])),a.one=new jm(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Or;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new jm(this,a)},e.PDF417_GF=new e(En.NUMBER_OF_CODEWORDS,3),e}(S5e),T5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P5e=function(){function t(){this.field=B5e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new jm(this.field,e),o=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));o[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var A=this.field.getOne();if(n!=null)try{for(var h=T5e(n),f=h.next();!f.done;f=h.next()){var m=f.value,p=this.field.exp(e.length-1-m),g=new jm(this.field,new Int32Array([this.field.subtract(0,p),1]));A=A.multiply(g)}}catch(E){a={error:E}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new jm(this.field,o),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],I=this.findErrorLocations(b),T=this.findErrorMagnitudes(w,b,I),u=0;u<I.length;u++){var C=e.length-1-this.field.log(I[u]);if(C<0)throw ei.getChecksumInstance();e[C]=this.field.subtract(e[C],T[u])}return I.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,o=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=o;if(s=i,o=c,s.isZero())throw ei.getChecksumInstance();i=u;for(var A=this.field.getZero(),h=s.getCoefficient(s.getDegree()),f=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),f);A=A.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=A.multiply(o).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw ei.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw ei.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var o=new jm(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),A=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(o.evaluateAt(d));u[i]=this.field.multiply(A,h)}return u},t}(),Kj=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,o=a==null||s==null;if(i&&o)throw new Ft;i?(r=new _r(0,a.getY()),n=new _r(0,s.getY())):o&&(a=new _r(e.getWidth()-1,r.getY()),s=new _r(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,o=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new _r(c.getX(),u);n?a=d:i=d}if(r>0){var A=n?this.bottomLeft:this.bottomRight,h=Math.trunc(A.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var f=new _r(A.getX(),h);n?s=f:o=f}return new t(this.image,a,s,i,o)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),j5e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),I6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,o,c,u,d,A){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,f;switch(A){case"s":f=r[n];break;case"c":f=r[n][0];break;case"f":f=parseFloat(r[n]).toFixed(i);break;case"p":f=parseFloat(r[n]).toPrecision(i);break;case"e":f=parseFloat(r[n]).toExponential(i);break;case"x":f=parseInt(r[n]).toString(h||16);break;case"d":f=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}f=typeof f=="object"?JSON.stringify(f):(+f).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";f.length<m;)f=o!==void 0?f+p:p+f;return f}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),k5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ate=function(){function t(e){this.boundingBox=new Kj(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new I6,a=0;try{for(var s=k5e(this.codewords),i=s.next();!i.done;i=s.next()){var o=i.value;if(o==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,o.getRowNumber(),o.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),F5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(o){i={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},dy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(A,h){var f={getKey:function(){return A},getValue:function(){return h}};f.getValue()>n?(n=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===n&&a.push(f.getKey())};try{for(var i=F5e(this.values.entries()),o=i.next();!o.done;o=i.next()){var c=O5e(o.value,2),u=c[0],d=c[1];s(u,d)}}catch(A){e={error:A}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return En.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),D5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tV=function(t){D5e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=PB(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,A=0,h=o;h<c;h++)if(n[h]!=null){var f=n[h],m=f.getRowNumber()-u;if(m===0)A++;else if(m===1)d=Math.max(d,A),A=1,u=f.getRowNumber();else if(m<0||f.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=f.getRowNumber(),A=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=PB(this.getCodewords()),o=i.next();!o.done;o=i.next()){var c=o.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<o;d++)if(c[d]!=null){var A=c[d];A.setRowNumberAsRowIndicatorColumn();var h=A.getRowNumber()-u;h===0||(h===1?u=A.getRowNumber():A.getRowNumber()>=r.getRowCount()?c[d]=null:u=A.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new dy,i=new dy,o=new dy,c=new dy;try{for(var u=PB(a),d=u.next();!d.done;d=u.next()){var A=d.value;if(A!=null){A.setRowNumberAsRowIndicatorColumn();var h=A.getValue()%30,f=A.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),o.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||o.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<En.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>En.MAX_ROWS_IN_BARCODE)return null;var m=new j5e(s.getValue()[0],i.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,o=s.getRowNumber();if(o>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(ate),R5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M5e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=En.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(s=t.adjustRowNumberIfValid(a,s,o),o.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(s=t.adjustRowNumberIfValid(a,s,o),o.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],o=this.detectionResultColumns[e-1].getCodewords(),c=o;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=o[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=o[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=o[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=o[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=o[r+2],u[13]=c[r+2]);try{for(var d=R5e(u),A=d.next();!A.done;A=d.next()){var h=A.value;if(t.adjustRowNumber(i,h))return}}catch(f){a={error:f}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new I6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),L5e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),U5e=function(){function t(){}return t.initialize=function(){for(var e=0;e<En.SYMBOL_TABLE.length;e++)for(var r=En.SYMBOL_TABLE[e],n=r&1,a=0;a<En.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(En.BARS_IN_MODULE)),t.RATIOS_TABLE[e][En.BARS_IN_MODULE-a-1]=Math.fround(s/En.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=jn.sum(e),n=new Int32Array(En.BARS_IN_MODULE),a=0,s=0,i=0;i<En.MODULES_IN_CODEWORD;i++){var o=r/(2*En.MODULES_IN_CODEWORD)+i*r/En.MODULES_IN_CODEWORD;s+e[a]<=o&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return En.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=jn.sum(e),n=new Array(En.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Vj.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var o=0;o<t.RATIOS_TABLE.length;o++){for(var c=0,u=t.RATIOS_TABLE[o],d=0;d<En.BARS_IN_MODULE;d++){var A=Math.fround(u[d]-n[d]);if(c+=Math.fround(A*A),c>=s)break}c<s&&(s=c,i=En.SYMBOL_TABLE[o])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(En.SYMBOL_TABLE.length).map(function(e){return new Array(En.BARS_IN_MODULE)}),t}(),Q5e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),rV=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),V5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H5e=function(t){V5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Jl),$5e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new H5e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new _6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),K5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G5e=function(t){K5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Jl),z5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q5e=function(t){z5e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Or("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new G5e;a=cn.MAX_VALUE}this.buf=yi.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new _6;this.ensureCapacity(this.count+a),Sa.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return yi.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}($5e),oa;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(oa||(oa={}));function ste(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var n_;function Ch(t){if(typeof n_>"u"&&(n_=ste()),n_===null)throw new Error("BigInt is not supported!");return n_(t)}function W5e(){var t=[];t[0]=Ch(1);var e=Ch(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var X5e=function(){function t(){}return t.decode=function(e,r){var n=new nn(""),a=vi.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],o=new Q5e;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:vi.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,o);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new lr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw lr.getFormatInstance()}if(n.length()===0)throw lr.getFormatInstance();var c=new c4(null,n.toString(),null,r);return c.setOther(o),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw lr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(cn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new nn;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var o=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new nn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new nn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new nn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var A=new nn;r=t.numericCompaction(e,r+1,A),n.setSegmentCount(cn.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new nn;r=t.numericCompaction(e,r+1,h),n.setTimestamp(rV.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new nn;r=t.numericCompaction(e,r+1,f),n.setChecksum(cn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new nn;r=t.numericCompaction(e,r+1,m),n.setFileSize(rV.parseLong(m.toString()));break;default:throw lr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw lr.getFormatInstance()}if(o!==-1){var p=r-o;n.isLastSegment()&&p--,n.setOptionalData(yi.copyOfRange(e,o,o+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,o=!1;r<e[0]&&!o;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,o=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=oa.ALPHA,i=oa.ALPHA,o=0;o<n;){var c=e[o],u="";switch(s){case oa.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=oa.LOWER;break;case t.ML:s=oa.MIXED;break;case t.PS:i=s,s=oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break;case oa.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=oa.ALPHA_SHIFT;break;case t.ML:s=oa.MIXED;break;case t.PS:i=s,s=oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break;case oa.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=oa.PUNCT;break;case 26:u=" ";break;case t.LL:s=oa.LOWER;break;case t.AL:s=oa.ALPHA;break;case t.PS:i=s,s=oa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break;case oa.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=oa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break;case oa.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break;case oa.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=oa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[o]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=oa.ALPHA;break}break}u!==""&&a.append(u),o++}},t.byteCompaction=function(e,r,n,a,s){var i=new q5e,o=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),A=r[a++];a<r[0]&&!u;)switch(d[o++]=A,c=900*c+A,A=r[a++],A){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(o%5===0&&o>0){for(var h=0;h<6;++h)i.write(Number(Ch(c)>>Ch(8*(5-h))));c=0,o=0}break}a===r[0]&&A<t.TEXT_COMPACTION_MODE_LATCH&&(d[o++]=A);for(var f=0;f<o;f++)i.write(d[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)o++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(o%5===0&&o>0){for(var h=0;h<6;++h)i.write(Number(Ch(c)>>Ch(8*(5-h))));c=0,o=0}}break}return s.append(wu.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var o=e[r++];if(r===e[0]&&(s=!0),o<t.TEXT_COMPACTION_MODE_LATCH)i[a]=o,a++;else switch(o){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||o===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Ch(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*Ch(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new lr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ste()?W5e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),O1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y5e=function(){function t(){}return t.decode=function(e,r,n,a,s,i,o){for(var c=new Kj(e,r,n,a,s),u=null,d=null,A,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,o)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,o)),A=t.merge(u,d),A==null)throw Ft.getNotFoundInstance();var f=A.getBoundingBox();if(h&&f!=null&&(f.getMinY()<c.getMinY()||f.getMaxY()>c.getMaxY()))c=f;else break}A.setBoundingBox(c);var m=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,u),A.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(A.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new tV(c,x===0):y=new ate(c),A.setDetectionResultColumn(x,y);for(var b=-1,w=b,I=c.getMinY();I<=c.getMaxY();I++){if(b=t.getStartColumn(A,x,I,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var T=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,I,i,o);T!=null&&(y.setCodeword(I,T),w=b,i=Math.min(i,T.getWidth()),o=Math.max(o,T.getWidth()))}}}return t.createDecoderResult(A)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Kj.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new M5e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var o=O1(a),c=o.next();!c.done;c=o.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),A=0;i>0&&d[A]==null;A++)i--;for(var h=0,A=a.length-1;A>=0&&(h+=s-a[A],!(a[A]>0));A--);for(var A=d.length-1;h>0&&d[A]==null;A--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=O1(e),i=s.next();!i.done;i=s.next()){var o=i.value;a=Math.max(a,o)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var o=new tV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),A=Math.trunc(Math.trunc(n.getY()));A<=r.getMaxY()&&A>=r.getMinY();A+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,A,s,i);h!=null&&(o.setCodeword(A,h),a?d=h.getStartX():d=h.getEndX())}return o},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>En.MAX_CODEWORDS_IN_BARCODE)throw Ft.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,o=0;o<e.getBarcodeRowCount();o++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[o][c+1].getValue(),d=o*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var A=new Array(s.length),h=0;h<A.length;h++)A[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,En.toIntArray(n),En.toIntArray(i),A)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),o=100;o-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof ei;if(!u)throw d}if(i.length===0)throw ei.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw ei.getChecksumInstance()}throw ei.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),o=0;o<i.length;o++)for(var c=0;c<i[o].length;c++)i[o][c]=new dy;var u=0;try{for(var d=O1(e.getDetectionResultColumns()),A=d.next();!A.done;A=d.next()){var h=A.value;if(h!=null)try{for(var f=(a=void 0,O1(h.getCodewords())),m=f.next();!m.done;m=f.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{A&&!A.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,o=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-o)&&(c=e.getDetectionResultColumn(r-o).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-o)&&(c=e.getDetectionResultColumn(r-o).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-o);){r-=o;try{for(var d=(s=void 0,O1(e.getDetectionResultColumn(r).getCodewords())),A=d.next();!A.done;A=d.next()){var h=A.value;if(h!=null)return(a?h.getEndX():h.getStartX())+o*u*(h.getEndX()-h.getStartX())}}catch(f){s={error:f}}finally{try{A&&!A.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,o,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,A=jn.sum(u);if(a)d=s+A;else{for(var h=0;h<u.length/2;h++){var f=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=f}d=s,s=d-A}if(!t.checkCodewordSkew(A,o,c))return null;var m=U5e.getDecodedValue(u),p=En.getCodeword(m);return p===-1?null:new L5e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var o=s,c=new Int32Array(8),u=0,d=a?1:-1,A=a;(a?o<n:o>=r)&&u<c.length;)e.get(o,i)===A?(c[u]++,o+=d):(u++,A=!A);return u===c.length||o===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var o=s,c=a?-1:1,u=0;u<2;u++){for(;(a?o>=r:o<n)&&a===e.get(o,i);){if(Math.abs(s-o)>t.CODEWORD_SKEW_SIZE)return s;o+=c}c=-c,a=!a}return o},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw lr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=X5e.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw ei.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw lr.getFormatInstance();var n=e[0];if(n>e.length)throw lr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw lr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new I6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new P5e,t}(),J5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$E=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Ft.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof lr||n instanceof ei?Ft.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,o=C5e.detectMultiple(e,r,n);try{for(var c=J5e(o.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,A=Y5e.decode(o.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new tl(A.getText(),A.getRawBytes(),void 0,d,Fr.PDF_417);h.putMetadata(No.ERROR_CORRECTION_LEVEL,A.getECLevel());var f=A.getOther();f!=null&&h.putMetadata(No.PDF417_EXTRA_METADATA,f),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?cn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Z5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nV=function(t){Z5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Jl),aV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ite=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Ia.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ia.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===Fr.UPC_A||i===Fr.UPC_E||i===Fr.EAN_13||i===Fr.EAN_8||i===Fr.CODABAR||i===Fr.CODE_39||i===Fr.CODE_93||i===Fr.CODE_128||i===Fr.ITF||i===Fr.RSS_14||i===Fr.RSS_EXPANDED});s&&!r&&a.push(new ux(e)),n.includes(Fr.QR_CODE)&&a.push(new HE),n.includes(Fr.DATA_MATRIX)&&a.push(new VE),n.includes(Fr.AZTEC)&&a.push(new UE),n.includes(Fr.PDF_417)&&a.push(new $E),s&&r&&a.push(new ux(e))}a.length===0&&(r||a.push(new ux(e)),a.push(new HE),a.push(new VE),a.push(new UE),a.push(new $E),r&&a.push(new ux(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=aV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new nV("No readers where selected, nothing can be read.");try{for(var a=aV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(o){if(o instanceof nV)continue}}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Ft("No MultiFormat Readers were able to detect the code.")},t}(),e3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){e3e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new ite;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Sv);var t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new $E,r)||this}return e})(Sv);var r3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){r3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new HE,r)||this}return e})(Sv);var Gj;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Gj||(Gj={}));const a_=Gj;var ote=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new c0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new c0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Or("No error correction bytes");var n=e.length-r;if(n<=0)throw new Or("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Sa.arraycopy(e,0,s,0,n);var i=new c0(this.field,s);i=i.multiplyByMonomial(r,1);for(var o=i.divide(a)[1],c=o.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Sa.arraycopy(c,0,e,n+u,c.length)},t}(),Ay=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var o=n[i],c=0;c<a-1;c++){var u=o[c];u===o[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var o=0;o<a;o++){var c=n[i];o+6<a&&c[o]===1&&c[o+1]===0&&c[o+2]===1&&c[o+3]===1&&c[o+4]===1&&c[o+5]===0&&c[o+6]===1&&(t.isWhiteHorizontal(c,o-4,o)||t.isWhiteHorizontal(c,o+7,o+11))&&r++,i+6<s&&n[i][o]===1&&n[i+1][o]===0&&n[i+2][o]===1&&n[i+3][o]===1&&n[i+4][o]===1&&n[i+5][o]===0&&n[i+6][o]===1&&(t.isWhiteVertical(n,o,i-4,i)||t.isWhiteVertical(n,o,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var o=n[i],c=0;c<a;c++)o[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new Or("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),o=0;o<a;o++){for(var c=0,u=-1,d=0;d<s;d++){var A=r?i[o][d]:i[d][o];A===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=A)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),n3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a3e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=n3e(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;yi.fill(i,e)}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],o=0,c=this.width;o<c;++o)if(s[o]!==i[o])return!1;return!0},t.prototype.toString=function(){for(var e=new nn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),zj=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new nn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fa=function(t){s3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Jl),sV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Ki;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var o=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,o),s<8){var A=n.getWidth()-s-1,h=8;n.setBoolean(A,h,o)}else{var A=8,h=n.getHeight()-7+(s-8);n.setBoolean(A,h,o)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Ki;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var o=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,o),r.setBoolean(r.getHeight()-11+i,s,o)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,o=n.getHeight()-1;i>0;){for(i===6&&(i-=1);o>=0&&o<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,o))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Ay.getDataMaskBit(r,u,o)&&(d=!d),n.setBoolean(u,o,d)}}o+=s}s=-s,o+=s,i-=2}if(a!==e.getSize())throw new Fa("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-cn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Or("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!zj.isValidMaskPattern(r))throw new Fa("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new Ki;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new Fa("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Fa("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Fa;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new Fa;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new Fa;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var o=a[s];if(o>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,o))&&t.embedPositionAdjustmentPattern(u-2,o-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),i3e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),iV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Ay.applyMaskPenaltyRule1(e)+Ay.applyMaskPenaltyRule2(e)+Ay.applyMaskPenaltyRule3(e)+Ay.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(a_.CHARACTER_SET)!==void 0;s&&(a=n.get(a_.CHARACTER_SET).toString());var i=this.chooseMode(e,a),o=new Ki;if(i===Oa.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=vi.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,o)}this.appendModeInfo(i,o);var u=new Ki;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(a_.QR_VERSION)!==void 0){var A=Number.parseInt(n.get(a_.QR_VERSION).toString(),10);d=Gm.getVersionForNumber(A);var h=this.calculateBitsNeeded(i,o,u,d);if(!this.willFit(h,d,r))throw new Fa("Data too big for requested version")}else d=this.recommendVersion(r,i,o,u);var f=new Ki;f.appendBitArray(o);var m=i===Oa.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,f),f.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,f);var x=this.interleaveWithECBytes(f,d.getTotalCodewords(),g,p.getNumBlocks()),y=new zj;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new a3e(b,b),I=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(I),sV.buildMatrix(x,r,d,I,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Gm.getVersionForNumber(1)),i=this.chooseVersion(s,e),o=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(o,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),vi.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Oa.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var o=e.charAt(s);if(t.isDigit(o))n=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)a=!0;else return Oa.BYTE}return a?Oa.ALPHANUMERIC:n?Oa.NUMERIC:Oa.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=wu.encode(e,vi.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,o=0;o<zj.NUM_MASK_PATTERNS;o++){sV.buildMatrix(e,r,n,o,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=o)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Gm.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new Fa("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),o=a-i,c=(e+7)/8;return o>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Fa("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new Fa("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new Fa("Block ID too large");var o=e%n,c=n-o,u=Math.floor(e/n),d=u+1,A=Math.floor(r/n),h=A+1,f=u-A,m=d-h;if(f!==m)throw new Fa("EC bytes mismatch");if(n!==c+o)throw new Fa("RS blocks mismatch");if(e!==(A+f)*c+(h+m)*o)throw new Fa("Total bytes mismatch");a<c?(s[0]=A,i[0]=f):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,o,c;if(e.getSizeInBytes()!==n)throw new Fa("Number of bits and data bytes does not match");for(var u=0,d=0,A=0,h=new Array,f=0;f<a;++f){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,f,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new i3e(x,y)),d=Math.max(d,g),A=Math.max(A,y.length),u+=m[0]}if(n!==u)throw new Fa("Data bytes does not match offset");for(var b=new Ki,f=0;f<d;++f)try{for(var w=(s=void 0,iV(h)),I=w.next();!I.done;I=w.next()){var T=I.value,x=T.getDataBytes();f<x.length&&b.appendBits(x[f],8)}}catch(O){s={error:O}}finally{try{I&&!I.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var f=0;f<A;++f)try{for(var C=(o=void 0,iV(h)),E=C.next();!E.done;E=C.next()){var T=E.value,y=T.getErrorCorrectionBytes();f<y.length&&b.appendBits(y[f],8)}}catch(O){o={error:O}}finally{try{E&&!E.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}if(r!==b.getSizeInBytes())throw new Fa("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new ote(Ql.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Fa(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Oa.NUMERIC:t.appendNumericBytes(e,n);break;case Oa.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Oa.BYTE:t.append8BitBytes(e,n,a);break;case Oa.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Fa("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),o=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+o,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new Fa;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new Fa;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=wu.encode(e,n)}catch(c){throw new Fa(c)}for(var s=0,i=a.length;s!==i;s++){var o=a[s];r.appendBits(o,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=wu.encode(e,vi.SJIS)}catch(A){throw new Fa(A)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,o=n[s+1]&255,c=i<<8&4294967295|o,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new Fa("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Oa.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=vi.UTF8.getName(),t})();var o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){o3e(e,t);function e(r,n,a,s,i,o,c,u){var d=t.call(this,o,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+o>n||i+c>a)throw new Or("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(o,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Or("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Sa.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Sa.arraycopy(this.yuvData,i,s,0,a),s;for(var o=0;o<n;o++){var c=o*r;Sa.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,o=0;o<n;o++){for(var c=o*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var o=i+r/2,c=i,u=i+r-1;c<o;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new l4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(zb);var l3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){l3e(e,t);function e(r,n,a,s,i,o,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=o,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,A=new Uint8ClampedArray(d),h=0;h<d;h++){var f=r[h],m=f>>16&255,p=f>>7&510,g=f&255;A[h]=(m+p+g)/4&255}u.luminances=A}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),o===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new Or("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Or("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Sa.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Sa.arraycopy(this.luminances,i,s,0,a),s;for(var o=0;o<n;o++){var c=o*r;Sa.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new l4(this)},e})(zb);var c3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u3e=function(t){c3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(vi),d3e=function(){function t(){}return t.ISO_8859_1=vi.ISO8859_1,t}(),qj,A3e=301,f3e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=A3e);return{LOG:t,ALOG:e}};qj=f3e([],[]),qj.LOG;qj.ALOG;var oV;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(oV||(oV={}));var lV=129,lte=230,h3e=231,m3e=235,p3e=236,g3e=237,x3e=238,v3e=239,y3e=240,jB=254,b3e=254,cV="[)>05",uV="[)>06",dV="",Wn=0,co=1,fl=2,di=3,Li=4,Qo=5,w3e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Wn},t.prototype.encode=function(e){var r=Ju.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Ju.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Qo:e.writeCodeword(h3e),e.signalEncoderChange(Qo);return;case co:e.writeCodeword(lte),e.signalEncoderChange(co);return;case di:e.writeCodeword(x3e),e.signalEncoderChange(di);break;case fl:e.writeCodeword(v3e),e.signalEncoderChange(fl);break;case Li:e.writeCodeword(y3e),e.signalEncoderChange(Li);break;default:throw new Error("Illegal mode: "+a)}else Ju.isExtendedASCII(n)?(e.writeCodeword(m3e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ju.isDigit(e)&&Ju.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),N3e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Qo},t.prototype.encode=function(e){var r=new nn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Ju.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Wn);break}}var s=r.length()-1,i=1,o=e.getCodewordCount()+s+i;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Nn.getCharAt(s));else if(s<=1555)r.setCharAt(0,Nn.getCharAt(Math.floor(s/250)+249)),r.insert(1,Nn.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),B6=function(){function t(){}return t.prototype.getEncodingMode=function(){return co},t.prototype.encodeMaximal=function(e){for(var r=new nn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var o=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+o+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(lte),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new nn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new nn;for(r.length()%3===2&&o!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||o!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Ju.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Wn);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var o=e.getCurrentChar();return a=this.encodeChar(o,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(jB)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(jB),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(jB)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Wn)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new nn;return s.append(n),s.append(a),s.toString()},t}(),_3e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Li},t.prototype.encode=function(e){for(var r=new nn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=Ju.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Wn);break}}}r.append(Nn.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,o=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+o.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(o)}finally{e.signalEncoderChange(Wn)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Nn.getCharAt(e-64)):Ju.illegalCharacter(Nn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,o=(n<<18)+(a<<12)+(s<<6)+i,c=o>>16&255,u=o>>8&255,d=o&255,A=new nn;return A.append(c),r>=2&&A.append(u),r>=3&&A.append(d),A.toString()},t}(),C3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Un=function(){function t(e,r,n,a,s,i,o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=o,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,o;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=E3e(I3e),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(A){i={error:A}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),S3e=function(t){C3e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Un),I3e=[new Un(!1,3,5,8,8,1),new Un(!1,5,7,10,10,1),new Un(!0,5,7,16,6,1),new Un(!1,8,10,12,12,1),new Un(!0,10,11,14,6,2),new Un(!1,12,12,14,14,1),new Un(!0,16,14,24,10,1),new Un(!1,18,14,16,16,1),new Un(!1,22,18,18,18,1),new Un(!0,22,18,16,10,2),new Un(!1,30,20,20,20,1),new Un(!0,32,24,16,14,2),new Un(!1,36,24,22,22,1),new Un(!1,44,28,24,24,1),new Un(!0,49,28,22,14,2),new Un(!1,62,36,14,14,4),new Un(!1,86,42,16,16,4),new Un(!1,114,48,18,18,4),new Un(!1,144,56,20,20,4),new Un(!1,174,68,22,22,4),new Un(!1,204,84,24,24,4,102,42),new Un(!1,280,112,14,14,16,140,56),new Un(!1,368,144,16,16,16,92,36),new Un(!1,456,192,18,18,16,114,48),new Un(!1,576,224,20,20,16,144,56),new Un(!1,696,272,22,22,16,174,68),new Un(!1,816,336,24,24,16,136,56),new Un(!1,1050,408,18,18,36,175,68),new Un(!1,1304,496,20,20,36,163,62),new S3e],B3e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(o){return o.charCodeAt(0)}),n=new nn,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new nn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Un.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P3e=function(t){T3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return di},e.prototype.encode=function(r){for(var n=new nn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=Ju.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(Wn);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Ju.illegalCharacter(Nn.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(b3e),r.getNewEncoding()<0&&r.signalEncoderChange(Wn)},e}(B6),j3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k3e=function(t){j3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return fl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(B6),Ju=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=lV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new B6,o=[new w3e,i,new k3e,new P3e,new _3e,new N3e],c=new B3e(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(cV)&&e.endsWith(dV)?(c.writeCodeword(p3e),c.setSkipAtEnd(2),c.pos+=cV.length):e.startsWith(uV)&&e.endsWith(dV)&&(c.writeCodeword(g3e),c.setSkipAtEnd(2),c.pos+=uV.length);var u=Wn;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)o[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var A=c.getSymbolInfo().getDataCapacity();d<A&&u!==Wn&&u!==Qo&&u!==Li&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<A&&h.append(lV);h.length()<A;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===di&&a===di){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return Wn}else if(n===Li&&a===Li){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return Wn}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Wn?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),o=[];;){if(r+s===e.length){yi.fill(i,0),yi.fill(o,0);var c=this.findMinimums(a,o,cn.MAX_VALUE,i),u=this.getMinimumCount(i);if(o[Wn]===c)return Wn;if(u===1){if(i[Qo]>0)return Qo;if(i[Li]>0)return Li;if(i[fl]>0)return fl;if(i[di]>0)return di}return co}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Wn]+=.5:this.isExtendedASCII(d)?(a[Wn]=Math.ceil(a[Wn]),a[Wn]+=2):(a[Wn]=Math.ceil(a[Wn]),a[Wn]++),this.isNativeC40(d)?a[co]+=2/3:this.isExtendedASCII(d)?a[co]+=8/3:a[co]+=4/3,this.isNativeText(d)?a[fl]+=2/3:this.isExtendedASCII(d)?a[fl]+=8/3:a[fl]+=4/3,this.isNativeX12(d)?a[di]+=2/3:this.isExtendedASCII(d)?a[di]+=13/3:a[di]+=10/3,this.isNativeEDIFACT(d)?a[Li]+=3/4:this.isExtendedASCII(d)?a[Li]+=17/4:a[Li]+=13/4,this.isSpecialB256(d)?a[Qo]+=4:a[Qo]++,s>=4){if(yi.fill(i,0),yi.fill(o,0),this.findMinimums(a,o,cn.MAX_VALUE,i),o[Wn]<this.min(o[Qo],o[co],o[fl],o[di],o[Li]))return Wn;if(o[Qo]<o[Wn]||o[Qo]+1<this.min(o[co],o[fl],o[di],o[Li]))return Qo;if(o[Li]+1<this.min(o[Qo],o[co],o[fl],o[di],o[Wn]))return Li;if(o[fl]+1<this.min(o[Qo],o[co],o[Li],o[di],o[Wn]))return fl;if(o[di]+1<this.min(o[Qo],o[co],o[Li],o[fl],o[Wn]))return di;if(o[co]+1<this.min(o[Wn],o[Qo],o[Li],o[fl])){if(o[co]<o[di])return co;if(o[co]===o[di]){for(var A=r+s+1;A<e.length;){var h=e.charCodeAt(A);if(this.isX12TermSep(h))return di;if(!this.isNativeX12(h))break;A++}return co}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,yi.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=cn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),kB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AV=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return wu.encode(e,this.charset)!=null}catch{return!1}},t}(),F3e=function(){function t(e,r,n){var a,s,i,o,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new AV(u3e.forName(S))}),this.encoders=[];var d=[];d.push(new AV(d3e.ISO_8859_1));for(var A=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var f=!1;try{for(var m=(a=void 0,kB(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){f=!0;break}}}catch(S){a={error:S}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!f)try{for(var b=(i=void 0,kB(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),f=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}f||(A=!0)}if(d.length===1&&!A)this.encoders=[d[0]];else{this.encoders=[];var I=0;try{for(var T=kB(d),C=T.next();!C.done;C=T.next()){var g=C.value;this.encoders[I++]=g}}catch(S){c={error:S}}finally{try{C&&!C.done&&(u=T.return)&&u.call(T)}finally{if(c)throw c.error}}}var E=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return wu.encode(Nn.getCharAt(e),this.encoders[r].name)},t}(),O3e=3,D3e=function(){function t(e,r,n){this.fnc1=n;var a=new F3e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new nn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var o=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(o===i||r.canEncode(o,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(o===i||r.canEncode(o,d))&&this.addEdge(n,a+1,new fV(o,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new fV[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var o=0;o<r.length();o++)s[i][o]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][o],n);for(var o=0;o<r.length();o++)s[i-1][o]=null}for(var c=-1,u=cn.MAX_VALUE,o=0;o<r.length();o++)if(s[a][o]!=null){var d=s[a][o];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=o)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var A=[],h=s[a][c];h!=null;){if(h.isFNC1())A.unshift(1e3);else for(var f=r.encode(h.c,h.encoderIndex),i=f.length-1;i>=0;i--)A.unshift(f[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&A.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=A[i];return p},t}(),fV=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,o=a===null?0:a.encoderIndex;o!==n&&(i+=O3e),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),R3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var hV;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(hV||(hV={}));(function(t){R3e(e,t);function e(r,n,a,s,i){var o=t.call(this,r,n,a)||this;return o.shape=s,o.macroId=i,o}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(D3e);var M3e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),mV=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),L3e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),U3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T6=function(t){U3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+cn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(L3e),Q3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V3e=function(t){Q3e(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(T6);function H3e(t,e,r){return new V3e(t,e,r)}function D1(t,e,r){return new T6(t,e,r)}var $3e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],u0=0,KE=1,xu=2,cte=3,Wd=4,K3e=new T6(null,0,0),FB=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],G3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function z3e(t){var e,r;try{for(var n=G3e(t),a=n.next();!a.done;a=n.next()){var s=a.value;yi.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[u0][Wd]=0,t[KE][Wd]=0,t[KE][u0]=28,t[cte][Wd]=0,t[xu][Wd]=0,t[xu][u0]=15,t}var ute=z3e(yi.createInt32Array(6,6)),q3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W3e=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=FB[this.mode][e];a=D1(a,s&65535,s>>16),n+=s>>16}var i=e===xu?4:5;return a=D1(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===xu?4:5;return n=D1(n,ute[this.mode][e],a),n=D1(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Wd||this.mode===xu){var s=FB[n][u0];r=D1(r,s&65535,s>>16),a+=s>>16,n=u0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new t(r,n,this.binaryShiftByteCount+1,a+i);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=H3e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(FB[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new Ki;try{for(var o=q3e(a),c=o.next();!c.done;c=o.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return Nn.format("%s bits=%d bytes=%d",$3e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(K3e,u0,0,0),t}();function X3e(t){var e=Nn.getCharCode(" "),r=Nn.getCharCode("."),n=Nn.getCharCode(",");t[u0][e]=1;for(var a=Nn.getCharCode("Z"),s=Nn.getCharCode("A"),i=s;i<=a;i++)t[u0][i]=i-s+2;t[KE][e]=1;for(var o=Nn.getCharCode("z"),c=Nn.getCharCode("a"),i=c;i<=o;i++)t[KE][i]=i-c+2;t[xu][e]=1;for(var u=Nn.getCharCode("9"),d=Nn.getCharCode("0"),i=d;i<=u;i++)t[xu][i]=i-d+2;t[xu][n]=12,t[xu][r]=13;for(var A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<A.length;h++)t[cte][Nn.getCharCode(A[h])]=h;for(var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<f.length;h++)Nn.getCharCode(f[h])>0&&(t[Wd][Nn.getCharCode(f[h])]=h);return t}var OB=X3e(yi.createInt32Array(5,256)),s_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y3e=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Nn.getCharCode(" "),r=Nn.getCharCode(`
`),n=mV.singletonList(W3e.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Nn.getCharCode("\r"):s=i===r?2:0;break;case Nn.getCharCode("."):s=i===e?3:0;break;case Nn.getCharCode(","):s=i===e?4:0;break;case Nn.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var o=mV.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return o.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=s_(e),o=i.next();!o.done;o=i.next()){var c=o.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=OB[e.getMode()][a]>0,i=null,o=0;o<=Wd;o++){var c=OB[o][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||o===e.getMode()||o===xu){var u=i.latchAndAppend(o,c);n.push(u)}if(!s&&ute[e.getMode()][o]>=0){var d=i.shiftAndAppend(o,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||OB[e.getMode()][a]===0){var A=e.addBinaryShiftChar(r);n.push(A)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var o=s_(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(Wd,n)),e.getMode()!==Wd&&a.push(s.shiftAndAppend(Wd,n)),n===3||n===4){var i=s.latchAndAppend(xu,16-n).latchAndAppend(xu,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(o)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var o=s_(e),c=o.next();!c.done;c=o.next()){var u=c.value,d=!0,A=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,s_(i)),f=h.next();!f.done;f=h.next()){var m=f.value,p=A(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t}(),J3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new Y3e(e).encode(),s=cn.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,o,c,u,d,A;if(n!==t.DEFAULT_AZTEC_LAYERS){if(o=n<0,c=Math.abs(n),c>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Or(Nn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,o),d=t.WORD_SIZE[c];var h=u-u%d;if(A=t.stuffBits(a,d),A.getSize()+s>h)throw new Or("Data to large for user specified layer");if(o&&A.getSize()>d*64)throw new Or("Data to large for user specified layer")}else{d=0,A=null;for(var f=0;;f++){if(f>t.MAX_NB_BITS)throw new Or("Data too large for an Aztec code");if(o=f<=3,c=o?f+1:f,u=t.totalBitsInLayer(c,o),!(i>u)){(A==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],A=t.stuffBits(a,d));var h=u-u%d;if(!(o&&A.getSize()>d*64)&&A.getSize()+s<=h)break}}}var m=t.generateCheckWords(A,u,d),p=A.getSize()/d,g=t.generateModeMessage(o,c,p),x=(o?11:14)+c*4,y=new Int32Array(x),b;if(o){b=x;for(var f=0;f<y.length;f++)y[f]=f}else{b=x+1+2*cn.truncDivision(cn.truncDivision(x,2)-1,15);for(var w=cn.truncDivision(x,2),I=cn.truncDivision(b,2),f=0;f<w;f++){var T=f+cn.truncDivision(f,15);y[w-f-1]=I-T-1,y[w+f]=I+T+1}}for(var C=new aA(b),f=0,E=0;f<c;f++){for(var S=(c-f)*4+(o?9:12),O=0;O<S;O++)for(var B=O*2,P=0;P<2;P++)m.get(E+B+P)&&C.set(y[f*2+P],y[f*2+O]),m.get(E+S*2+B+P)&&C.set(y[f*2+O],y[x-1-f*2-P]),m.get(E+S*4+B+P)&&C.set(y[x-1-f*2-P],y[x-1-f*2-O]),m.get(E+S*6+B+P)&&C.set(y[x-1-f*2-O],y[f*2+P]);E+=S*8}if(t.drawModeMessage(C,o,b,g),o)t.drawBullsEye(C,cn.truncDivision(b,2),5);else{t.drawBullsEye(C,cn.truncDivision(b,2),7);for(var f=0,O=0;f<cn.truncDivision(x,2)-1;f+=15,O+=16)for(var P=cn.truncDivision(b,2)&1;P<b;P+=2)C.set(cn.truncDivision(b,2)-O,P),C.set(cn.truncDivision(b,2)+O,P),C.set(P,cn.truncDivision(b,2)-O),C.set(P,cn.truncDivision(b,2)+O)}var D=new M3e;return D.setCompact(o),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(C),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Ki;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=cn.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var o=s-3+i;a.get(i)&&e.set(o,s-5),a.get(i+7)&&e.set(s+5,o),a.get(20-i)&&e.set(o,s+5),a.get(27-i)&&e.set(s-5,o)}else for(var i=0;i<10;i++){var o=s-5+i+cn.truncDivision(i,5);a.get(i)&&e.set(o,s-7),a.get(i+10)&&e.set(s+7,o),a.get(29-i)&&e.set(o,s+7),a.get(39-i)&&e.set(s-7,o)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,o=new ote(t.getGF(n)),c=cn.truncDivision(r,n),u=t.bitsToWords(e,n,c);o.encode(u,c-i);var d=r%n,A=new Ki;A.appendBits(0,d);try{for(var h=J3e(Array.from(u)),f=h.next();!f.done;f=h.next()){var m=f.value;A.appendBits(m,n)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return A},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var o=0,c=0;c<r;c++)o|=e.get(s*r+c)?1<<r-c-1:0;a[s]=o}return a},t.getGF=function(e){switch(e){case 4:return Ql.AZTEC_PARAM;case 6:return Ql.AZTEC_DATA_6;case 8:return Ql.AZTEC_DATA_8;case 10:return Ql.AZTEC_DATA_10;case 12:return Ql.AZTEC_DATA_12;default:throw new Or("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Ki,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var o=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(o|=1<<r-1-c);(o&s)===s?(n.appendBits(o&s,r),i--):o&s?n.appendBits(o,r):(n.appendBits(o|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var Z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eBe=function(t){Z3e(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,o=0,c=r.length;i<c;i+=4,o++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var A=r[i],h=r[i+1],f=r[i+2];u=306*A+601*h+117*f+512>>10}s[o]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Or("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new l4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=o,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(o/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(zb);function dte(){return typeof navigator<"u"}function tBe(){return dte()&&!!navigator.mediaDevices}function rBe(){return!!(tBe()&&navigator.mediaDevices.enumerateDevices)}var Ax=function(){return Ax=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ax.apply(this,arguments)},is=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})},os=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},DB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nBe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Iv=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Ax(Ax({},nBe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ia.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return is(this,void 0,void 0,function(){return os(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=DB(a),i=s.next();!i.done;i=s.next()){var o=i.value;if(t.mediaStreamIsTorchCompatibleTrack(o))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ls("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ls("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new eBe(e),n=new Wee(r);return new qee(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Ls("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return is(this,void 0,void 0,function(){var e,r,n,a,s,i,o,c,u,d,A,h;return os(this,function(f){switch(f.label){case 0:if(!dte())throw new Error("Can't enumerate devices, navigator is not present.");if(!rBe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),r=[];try{for(n=DB(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(o=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:o,label:c,kind:i,groupId:u},r.push(d))}catch(m){A={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(A)throw A.error}}return[2,r]}})})},t.findDeviceById=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return is(this,void 0,void 0,function(){var n;return os(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var o=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(o),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),is(this,void 0,void 0,function(){var a;return os(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Ls("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:if(!e)throw new Ls("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:if(!e)throw new Ls("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return is(this,void 0,void 0,function(){var a,s;return os(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return is(this,void 0,void 0,function(){var a,s,i,o,c,u,d,A,h,f=this;return os(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},o=this.scan(s,n,i),c=e.getVideoTracks(),u=Ax(Ax({},o),{stop:function(){o.stop()},streamVideoConstraintsApply:function(p,g){return is(this,void 0,void 0,function(){var x,y,b,w,I,T,C;return os(this,function(E){switch(E.label){case 0:x=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),y=DB(x),b=y.next(),E.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:E.sent(),E.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return I=E.sent(),T={error:I},[3,8];case 7:try{b&&!b.done&&(C=y.return)&&C.call(y)}finally{if(T)throw T.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(A=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return is(f,void 0,void 0,function(){return os(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(A,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return is(f,void 0,void 0,function(){return os(this,function(p){switch(p.label){case 0:return o.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return is(this,void 0,void 0,function(){var a,s;return os(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return is(this,void 0,void 0,function(){var n,a;return os(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ls("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return is(this,void 0,void 0,function(){var n,a,s,i;return os(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ls("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return o.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return is(this,void 0,void 0,function(){var n;return os(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return is(this,void 0,void 0,function(){var n,a,s;return os(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return is(this,void 0,void 0,function(){var n,a;return os(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return is(this,void 0,void 0,function(){var r,n;return os(this,function(a){switch(a.label){case 0:if(!e)throw new Ls("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return is(this,void 0,void 0,function(){var r,n;return os(this,function(a){switch(a.label){case 0:if(!e)throw new Ls("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,o){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof Ft&&r||u instanceof ei&&n||u instanceof lr&&a)return;d.stop(),o(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var o=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),o(),n&&n()},A={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var f=a.decodeFromCanvas(s);r(f,void 0,A),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,A);var m=x instanceof ei,p=x instanceof lr,g=x instanceof Ft;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}o(),n&&n(x)}};return h(),A},t.prototype._decodeOnLoadImage=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return is(this,void 0,void 0,function(){var r;return os(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),aBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){aBe(e,t);function e(r,n){return t.call(this,new UE,r,n)||this}return e})(Iv);var sBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){sBe(e,t);function e(r,n){return t.call(this,new ux(r),r,n)||this}return e})(Iv);var iBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){iBe(e,t);function e(r,n){return t.call(this,new VE,r,n)||this}return e})(Iv);var oBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GE=function(t){oBe(e,t);function e(r,n){var a=this,s=new ite;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Ia.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Iv),lBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){lBe(e,t);function e(r,n){return t.call(this,new $E,r,n)||this}return e})(Iv);var cBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){cBe(e,t);function e(r,n){return t.call(this,new HE,r,n)||this}return e})(Iv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var zE={};zE.version="0.18.5";var Ate=1252,uBe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],P6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},j6=function(t){uBe.indexOf(t)!=-1&&(Ate=P6[0]=t)};function dBe(){j6(1252)}var rd=function(t){j6(t)};function k6(){rd(1200),dBe()}function pV(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function ABe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function fte(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var fy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?ABe(t.slice(2)):e==254&&r==255?fte(t.slice(2)):e==65279?t.slice(1):t},i_=function(e){return String.fromCharCode(e)},gV=function(e){return String.fromCharCode(e)},H2,Kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),e+=Kh.charAt(s)+Kh.charAt(i)+Kh.charAt(o)+Kh.charAt(c);return e}function jc(t){var e="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Kh.indexOf(t.charAt(u++)),i=Kh.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),o=Kh.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=Kh.indexOf(t.charAt(u++)),a=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var an=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Tf=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function N0(t){return an?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function xV(t){return an?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var yc=function(e){return an?Tf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function d4(t){if(typeof ArrayBuffer>"u")return yc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function U0(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function fBe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function F6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return F6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var $i=an?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Tf(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function hBe(t){for(var e=[],r=0,n=t.length+250,a=N0(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=N0(65535),n=65530)}return e.push(a.slice(0,r)),$i(e)}var _l=/\u0000/g,hy=/[\u0001-\u0006]/g;function Sx(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function nd(t,e){var r=""+t;return r.length>=e?r:Cs("0",e-r.length)+r}function O6(t,e){var r=""+t;return r.length>=e?r:Cs(" ",e-r.length)+r}function qE(t,e){var r=""+t;return r.length>=e?r:r+Cs(" ",e-r.length)}function mBe(t,e){var r=""+Math.round(t);return r.length>=e?r:Cs("0",e-r.length)+r}function pBe(t,e){var r=""+t;return r.length>=e?r:Cs("0",e-r.length)+r}var vV=Math.pow(2,32);function Bg(t,e){if(t>vV||t<-vV)return mBe(t,e);var r=Math.round(t);return pBe(r,e)}function WE(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var yV=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],RB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gBe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Mr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},bV={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xBe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function XE(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,o=0,c=1,u=0,d=0,A=Math.floor(a);u<e&&(A=Math.floor(a),o=A*i+s,d=A*u+c,!(a-A<5e-8));)a=1/(a-A),s=i,i=o,c=u,u=d;if(d>e&&(u>e?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function km(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],o={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=_Be(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var hte=new Date(1899,11,31,0,0,0),vBe=hte.getTime(),yBe=new Date(1900,2,1,0,0,0);function mte(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=yBe&&(r+=24*60*60*1e3),(r-(vBe+(t.getTimezoneOffset()-hte.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function D6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function bBe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function wBe(t){var e=t<0?12:11,r=D6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function NBe(t){var e=D6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function K2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=wBe(t):e===10?r=t.toFixed(10).substr(0,12):r=NBe(t),D6(bBe(r.toUpperCase()))}function xp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):K2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Su(14,mte(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function _Be(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function CBe(t,e,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return RB[r.m-1][1];case 5:return RB[r.m-1][0];default:return RB[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return yV[r.q][0];default:return yV[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?nd(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=nd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?nd(c,u):"";return d}function Gh(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var pte=/%/g;function EBe(t,e,r){var n=e.replace(pte,""),a=e.length-n.length;return af(t,n,r*Math.pow(10,2*a))+Cs("%",a)}function SBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return af(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function gte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+gte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var xte=/# (\?+)( ?)\/( ?)(\d+)/;function IBe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Cs(" ",t[1].length+1+t[4].length):O6(i,t[1].length)+t[2]+"/"+t[3]+nd(o,t[4].length))}function BBe(t,e,r){return r+(e===0?"":""+e)+Cs(" ",t[1].length+2+t[4].length)}var vte=/^#*0*\.([0#]+)/,yte=/\).*[0#]/,bte=/\(###\) ###\\?-####/;function gl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function wV(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function NV(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function TBe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function PBe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ru(t,e,r){if(t.charCodeAt(0)===40&&!e.match(yte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ru("n",n,r):"("+ru("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return SBe(t,e,r);if(e.indexOf("%")!==-1)return EBe(t,e,r);if(e.indexOf("E")!==-1)return gte(e,r);if(e.charCodeAt(0)===36)return"$"+ru(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Bg(c,e.length);if(e.match(/^[#?]+$/))return a=Bg(r,0),a==="0"&&(a=""),a.length>e.length?a:gl(e.substr(0,e.length-a.length))+a;if(s=e.match(xte))return IBe(s,c,u);if(e.match(/^#+0+$/))return u+Bg(c,e.length-e.indexOf("0"));if(s=e.match(vte))return a=wV(r,s[1].length).replace(/^([^\.]+)$/,"$1."+gl(s[1])).replace(/\.$/,"."+gl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Cs("0",gl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+wV(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Gh(Bg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ru(t,e,-r):Gh(""+(Math.floor(r)+TBe(r,s[1].length)))+"."+nd(NV(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ru(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Sx(ru(t,e.replace(/[\\-]/g,""),r)),i=0,Sx(Sx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(bte))return a=ru(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=XE(c,Math.pow(10,i)-1,!1),a=""+u,d=af("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=qE(o[2],i),d.length<s[4].length&&(d=gl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=XE(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?O6(o[1],i)+s[2]+"/"+s[3]+qE(o[2],i):Cs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Bg(r,0),e.length<=a.length?a:gl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=e.indexOf(".")-i,h=e.length-a.length-A;return gl(e.substr(0,A)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=NV(r,s[1].length),r<0?"-"+ru(t,e,-r):Gh(PBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?nd(0,3-m.length):"")+m})+"."+nd(i,s[1].length);switch(e){case"###,##0.00":return ru(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=Gh(Bg(c,0));return f!=="0"?u+f:"";case"###,###.00":return ru(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ru(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function jBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return af(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function kBe(t,e,r){var n=e.replace(pte,""),a=e.length-n.length;return af(t,n,r*Math.pow(10,2*a))+Cs("%",a)}function wte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+wte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Qd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(yte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Qd("n",n,r):"("+Qd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return jBe(t,e,r);if(e.indexOf("%")!==-1)return kBe(t,e,r);if(e.indexOf("E")!==-1)return wte(e,r);if(e.charCodeAt(0)===36)return"$"+Qd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+nd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:gl(e.substr(0,e.length-a.length))+a;if(s=e.match(xte))return BBe(s,c,u);if(e.match(/^#+0+$/))return u+nd(c,e.length-e.indexOf("0"));if(s=e.match(vte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+gl(s[1])).replace(/\.$/,"."+gl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Cs("0",gl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Gh(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Qd(t,e,-r):Gh(""+r)+"."+Cs("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Qd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Sx(Qd(t,e.replace(/[\\-]/g,""),r)),i=0,Sx(Sx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(bte))return a=Qd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=XE(c,Math.pow(10,i)-1,!1),a=""+u,d=af("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=qE(o[2],i),d.length<s[4].length&&(d=gl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=XE(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?O6(o[1],i)+s[2]+"/"+s[3]+qE(o[2],i):Cs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:gl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=e.indexOf(".")-i,h=e.length-a.length-A;return gl(e.substr(0,A)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Qd(t,e,-r):Gh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?nd(0,3-m.length):"")+m})+"."+nd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=Gh(""+c);return f!=="0"?u+f:"";default:if(e.match(/\.[0#?]*$/))return Qd(t,e.slice(0,e.lastIndexOf(".")),r)+gl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function af(t,e,r){return(r|0)===r?Qd(t,e,r):ru(t,e,r)}function FBe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Nte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Bv(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":WE(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Nte))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function OBe(t,e,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,A,h="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!WE(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(A=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(A);a[a.length]={t:"t",v:s},++i;break;case"\\":var f=t.charAt(++i),m=f==="("||f===")"?f:"t";a[a.length]={t:m,v:f},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=km(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=km(e,r),u==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var p={t:o,v:o};if(u==null&&(u=km(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Nte)){if(u==null&&(u=km(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Bv(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=CBe(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((o=a[w].t)==="?"||o==="D"||(o===" "||o==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=xp(e,r);break}var I="",T,C;if(b.length>0){b.charCodeAt(0)==40?(T=e<0&&b.charCodeAt(0)===45?-e:e,C=af("n",b,T)):(T=e<0&&n>1?-e:e,C=af("n",b,T),T<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),w=C.length-1;var E=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){E=i;break}var S=a.length;if(E===a.length&&C.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=C.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=C.substr(0,w+1),w=-1),a[i].t="t",S=i);w>=0&&S<a.length&&(a[S].v=C.substr(0,w+1)+a[S].v)}else if(E!==a.length&&C.indexOf("E")===-1){for(w=C.indexOf(".")-1,i=E;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")-1:a[i].v.length-1,I=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(I=C.charAt(w--)+I);a[i].v=I,a[i].t="t",S=i}for(w>=0&&S<a.length&&(a[S].v=C.substr(0,w+1)+a[S].v),w=C.indexOf(".")+1,i=E;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==E)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")+1:0,I=a[i].v.substr(0,d);d<a[i].v.length;++d)w<C.length&&(I+=C.charAt(w++));a[i].v=I,a[i].t="t",S=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(T=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=af(a[i].t,a[i].v,T),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var _V=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function CV(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function DBe(t,e){var r=FBe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(_V),o=r[1].match(_V);return CV(e,i)?[n,r[0]]:CV(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Su(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mr)[t],n==null&&(n=r.table&&r.table[bV[t]]||Mr[bV[t]]),n==null&&(n=xBe[t]||"General");break}if(WE(n,0))return xp(e,r);e instanceof Date&&(e=mte(e,r.date1904));var a=DBe(n,e);if(WE(a[1]))return xp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return OBe(a[1],e,r,a[0])}function sf(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Mr[r]==null){e<0&&(e=r);continue}if(Mr[r]==t){e=r;break}}e<0&&(e=391)}return Mr[e]=t,e}function A4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&sf(t[e],e)}function Tv(){Mr=gBe()}var RBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_te=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function MBe(t){var e=typeof t=="number"?Mr[t]:t;return e=e.replace(_te,"(\\d+)"),new RegExp("^"+e+"$")}function LBe(t,e,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(e.match(_te)||[]).forEach(function(A,h){var f=parseInt(r[h+1],10);switch(A.toLowerCase().charAt(0)){case"y":n=f;break;case"d":s=f;break;case"h":i=f;break;case"s":c=f;break;case"m":i>=0?o=f:a=f;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var UBe=function(){var t={};t.version="1.2.0";function e(){for(var C=0,E=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,E[S]=C;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(C){var E=0,S=0,O=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)B[O]=C[O];for(O=0;O!=256;++O)for(S=C[O],E=256+O;E<4096;E+=256)S=B[E]=S>>>8^C[S&255];var P=[];for(O=1;O!=16;++O)P[O-1]=typeof Int32Array<"u"?B.subarray(O*256,O*256+256):B.slice(O*256,O*256+256);return P}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],A=a[6],h=a[7],f=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(C,E){for(var S=E^-1,O=0,B=C.length;O<B;)S=S>>>8^r[(S^C.charCodeAt(O++))&255];return~S}function I(C,E){for(var S=E^-1,O=C.length-15,B=0;B<O;)S=b[C[B++]^S&255]^y[C[B++]^S>>8&255]^x[C[B++]^S>>16&255]^g[C[B++]^S>>>24]^p[C[B++]]^m[C[B++]]^f[C[B++]]^h[C[B++]]^A[C[B++]]^d[C[B++]]^u[C[B++]]^c[C[B++]]^o[C[B++]]^i[C[B++]]^s[C[B++]]^r[C[B++]];for(O+=15;B<O;)S=S>>>8^r[(S^C[B++])&255];return~S}function T(C,E){for(var S=E^-1,O=0,B=C.length,P=0,D=0;O<B;)P=C.charCodeAt(O++),P<128?S=S>>>8^r[(S^P)&255]:P<2048?(S=S>>>8^r[(S^(192|P>>6&31))&255],S=S>>>8^r[(S^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,D=C.charCodeAt(O++)&1023,S=S>>>8^r[(S^(240|P>>8&7))&255],S=S>>>8^r[(S^(128|P>>2&63))&255],S=S>>>8^r[(S^(128|D>>6&15|(P&3)<<4))&255],S=S>>>8^r[(S^(128|D&63))&255]):(S=S>>>8^r[(S^(224|P>>12&15))&255],S=S>>>8^r[(S^(128|P>>6&63))&255],S=S>>>8^r[(S^(128|P&63))&255]);return~S}return t.table=r,t.bstr=w,t.buf=I,t.str=T,t}(),kr=function(){var e={};e.version="1.2.1";function r(ie,se){for(var me=ie.split("/"),fe=se.split("/"),Te=0,Re=0,ae=Math.min(me.length,fe.length);Te<ae;++Te){if(Re=me[Te].length-fe[Te].length)return Re;if(me[Te]!=fe[Te])return me[Te]<fe[Te]?-1:1}return me.length-fe.length}function n(ie){if(ie.charAt(ie.length-1)=="/")return ie.slice(0,-1).indexOf("/")===-1?ie:n(ie.slice(0,-1));var se=ie.lastIndexOf("/");return se===-1?ie:ie.slice(0,se+1)}function a(ie){if(ie.charAt(ie.length-1)=="/")return a(ie.slice(0,-1));var se=ie.lastIndexOf("/");return se===-1?ie:ie.slice(se+1)}function s(ie,se){typeof se=="string"&&(se=new Date(se));var me=se.getHours();me=me<<6|se.getMinutes(),me=me<<5|se.getSeconds()>>>1,ie.write_shift(2,me);var fe=se.getFullYear()-1980;fe=fe<<4|se.getMonth()+1,fe=fe<<5|se.getDate(),ie.write_shift(2,fe)}function i(ie){var se=ie.read_shift(2)&65535,me=ie.read_shift(2)&65535,fe=new Date,Te=me&31;me>>>=5;var Re=me&15;me>>>=4,fe.setMilliseconds(0),fe.setFullYear(me+1980),fe.setMonth(Re-1),fe.setDate(Te);var ae=se&31;se>>>=5;var Me=se&63;return se>>>=6,fe.setHours(se),fe.setMinutes(Me),fe.setSeconds(ae<<1),fe}function o(ie){vo(ie,0);for(var se={},me=0;ie.l<=ie.length-4;){var fe=ie.read_shift(2),Te=ie.read_shift(2),Re=ie.l+Te,ae={};switch(fe){case 21589:me=ie.read_shift(1),me&1&&(ae.mtime=ie.read_shift(4)),Te>5&&(me&2&&(ae.atime=ie.read_shift(4)),me&4&&(ae.ctime=ie.read_shift(4))),ae.mtime&&(ae.mt=new Date(ae.mtime*1e3));break}ie.l=Re,se[fe]=ae}return se}var c;function u(){return c||(c={})}function d(ie,se){if(ie[0]==80&&ie[1]==75)return $e(ie,se);if((ie[0]|32)==109&&(ie[1]|32)==105)return Ne(ie,se);if(ie.length<512)throw new Error("CFB file size "+ie.length+" < 512");var me=3,fe=512,Te=0,Re=0,ae=0,Me=0,xe=0,Le=[],Ie=ie.slice(0,512);vo(Ie,0);var rt=A(Ie);switch(me=rt[0],me){case 3:fe=512;break;case 4:fe=4096;break;case 0:if(rt[1]==0)return $e(ie,se);default:throw new Error("Major Version: Expected 3 or 4 saw "+me)}fe!==512&&(Ie=ie.slice(0,fe),vo(Ie,28));var Ze=ie.slice(0,fe);h(Ie,me);var tt=Ie.read_shift(4,"i");if(me===3&&tt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+tt);Ie.l+=4,ae=Ie.read_shift(4,"i"),Ie.l+=4,Ie.chk("00100000","Mini Stream Cutoff Size: "),Me=Ie.read_shift(4,"i"),Te=Ie.read_shift(4,"i"),xe=Ie.read_shift(4,"i"),Re=Ie.read_shift(4,"i");for(var Xe=-1,lt=0;lt<109&&(Xe=Ie.read_shift(4,"i"),!(Xe<0));++lt)Le[lt]=Xe;var xt=f(ie,fe);g(xe,Re,xt,fe,Le);var Wt=y(xt,ae,Le,fe);Wt[ae].name="!Directory",Te>0&&Me!==D&&(Wt[Me].name="!MiniFAT"),Wt[Le[0]].name="!FAT",Wt.fat_addrs=Le,Wt.ssz=fe;var er={},Tr=[],va=[],sa=[];b(ae,Wt,xt,Tr,Te,er,va,Me),m(va,sa,Tr),Tr.shift();var nl={FileIndex:va,FullPaths:sa};return se&&se.raw&&(nl.raw={header:Ze,sectors:xt}),nl}function A(ie){if(ie[ie.l]==80&&ie[ie.l+1]==75)return[0,0];ie.chk(W,"Header Signature: "),ie.l+=16;var se=ie.read_shift(2,"u");return[ie.read_shift(2,"u"),se]}function h(ie,se){var me=9;switch(ie.l+=2,me=ie.read_shift(2)){case 9:if(se!=3)throw new Error("Sector Shift: Expected 9 saw "+me);break;case 12:if(se!=4)throw new Error("Sector Shift: Expected 12 saw "+me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+me)}ie.chk("0600","Mini Sector Shift: "),ie.chk("000000000000","Reserved: ")}function f(ie,se){for(var me=Math.ceil(ie.length/se)-1,fe=[],Te=1;Te<me;++Te)fe[Te-1]=ie.slice(Te*se,(Te+1)*se);return fe[me-1]=ie.slice(me*se),fe}function m(ie,se,me){for(var fe=0,Te=0,Re=0,ae=0,Me=0,xe=me.length,Le=[],Ie=[];fe<xe;++fe)Le[fe]=Ie[fe]=fe,se[fe]=me[fe];for(;Me<Ie.length;++Me)fe=Ie[Me],Te=ie[fe].L,Re=ie[fe].R,ae=ie[fe].C,Le[fe]===fe&&(Te!==-1&&Le[Te]!==Te&&(Le[fe]=Le[Te]),Re!==-1&&Le[Re]!==Re&&(Le[fe]=Le[Re])),ae!==-1&&(Le[ae]=fe),Te!==-1&&fe!=Le[fe]&&(Le[Te]=Le[fe],Ie.lastIndexOf(Te)<Me&&Ie.push(Te)),Re!==-1&&fe!=Le[fe]&&(Le[Re]=Le[fe],Ie.lastIndexOf(Re)<Me&&Ie.push(Re));for(fe=1;fe<xe;++fe)Le[fe]===fe&&(Re!==-1&&Le[Re]!==Re?Le[fe]=Le[Re]:Te!==-1&&Le[Te]!==Te&&(Le[fe]=Le[Te]));for(fe=1;fe<xe;++fe)if(ie[fe].type!==0){if(Me=fe,Me!=Le[Me])do Me=Le[Me],se[fe]=se[Me]+"/"+se[fe];while(Me!==0&&Le[Me]!==-1&&Me!=Le[Me]);Le[fe]=-1}for(se[0]+="/",fe=1;fe<xe;++fe)ie[fe].type!==2&&(se[fe]+="/")}function p(ie,se,me){for(var fe=ie.start,Te=ie.size,Re=[],ae=fe;me&&Te>0&&ae>=0;)Re.push(se.slice(ae*P,ae*P+P)),Te-=P,ae=Cm(me,ae*4);return Re.length===0?Ot(0):$i(Re).slice(0,ie.size)}function g(ie,se,me,fe,Te){var Re=D;if(ie===D){if(se!==0)throw new Error("DIFAT chain shorter than expected")}else if(ie!==-1){var ae=me[ie],Me=(fe>>>2)-1;if(!ae)return;for(var xe=0;xe<Me&&(Re=Cm(ae,xe*4))!==D;++xe)Te.push(Re);g(Cm(ae,fe-4),se-1,me,fe,Te)}}function x(ie,se,me,fe,Te){var Re=[],ae=[];Te||(Te=[]);var Me=fe-1,xe=0,Le=0;for(xe=se;xe>=0;){Te[xe]=!0,Re[Re.length]=xe,ae.push(ie[xe]);var Ie=me[Math.floor(xe*4/fe)];if(Le=xe*4&Me,fe<4+Le)throw new Error("FAT boundary crossed: "+xe+" 4 "+fe);if(!ie[Ie])break;xe=Cm(ie[Ie],Le)}return{nodes:Re,data:RV([ae])}}function y(ie,se,me,fe){var Te=ie.length,Re=[],ae=[],Me=[],xe=[],Le=fe-1,Ie=0,rt=0,Ze=0,tt=0;for(Ie=0;Ie<Te;++Ie)if(Me=[],Ze=Ie+se,Ze>=Te&&(Ze-=Te),!ae[Ze]){xe=[];var Xe=[];for(rt=Ze;rt>=0;){Xe[rt]=!0,ae[rt]=!0,Me[Me.length]=rt,xe.push(ie[rt]);var lt=me[Math.floor(rt*4/fe)];if(tt=rt*4&Le,fe<4+tt)throw new Error("FAT boundary crossed: "+rt+" 4 "+fe);if(!ie[lt]||(rt=Cm(ie[lt],tt),Xe[rt]))break}Re[Ze]={nodes:Me,data:RV([xe])}}return Re}function b(ie,se,me,fe,Te,Re,ae,Me){for(var xe=0,Le=fe.length?2:0,Ie=se[ie].data,rt=0,Ze=0,tt;rt<Ie.length;rt+=128){var Xe=Ie.slice(rt,rt+128);vo(Xe,64),Ze=Xe.read_shift(2),tt=H6(Xe,0,Ze-Le),fe.push(tt);var lt={name:tt,type:Xe.read_shift(1),color:Xe.read_shift(1),L:Xe.read_shift(4,"i"),R:Xe.read_shift(4,"i"),C:Xe.read_shift(4,"i"),clsid:Xe.read_shift(16),state:Xe.read_shift(4,"i"),start:0,size:0},xt=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);xt!==0&&(lt.ct=w(Xe,Xe.l-8));var Wt=Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2)+Xe.read_shift(2);Wt!==0&&(lt.mt=w(Xe,Xe.l-8)),lt.start=Xe.read_shift(4,"i"),lt.size=Xe.read_shift(4,"i"),lt.size<0&&lt.start<0&&(lt.size=lt.type=0,lt.start=D,lt.name=""),lt.type===5?(xe=lt.start,Te>0&&xe!==D&&(se[xe].name="!StreamData")):lt.size>=4096?(lt.storage="fat",se[lt.start]===void 0&&(se[lt.start]=x(me,lt.start,se.fat_addrs,se.ssz)),se[lt.start].name=lt.name,lt.content=se[lt.start].data.slice(0,lt.size)):(lt.storage="minifat",lt.size<0?lt.size=0:xe!==D&&lt.start!==D&&se[xe]&&(lt.content=p(lt,se[xe].data,(se[Me]||{}).data))),lt.content&&vo(lt.content,0),Re[tt]=lt,ae.push(lt)}}function w(ie,se){return new Date((vc(ie,se+4)/1e7*Math.pow(2,32)+vc(ie,se)/1e7-11644473600)*1e3)}function I(ie,se){return u(),d(c.readFileSync(ie),se)}function T(ie,se){var me=se&&se.type;switch(me||an&&Buffer.isBuffer(ie)&&(me="buffer"),me||"base64"){case"file":return I(ie,se);case"base64":return d(yc(jc(ie)),se);case"binary":return d(yc(ie),se)}return d(ie,se)}function C(ie,se){var me=se||{},fe=me.root||"Root Entry";if(ie.FullPaths||(ie.FullPaths=[]),ie.FileIndex||(ie.FileIndex=[]),ie.FullPaths.length!==ie.FileIndex.length)throw new Error("inconsistent CFB structure");ie.FullPaths.length===0&&(ie.FullPaths[0]=fe+"/",ie.FileIndex[0]={name:fe,type:5}),me.CLSID&&(ie.FileIndex[0].clsid=me.CLSID),E(ie)}function E(ie){var se="Sh33tJ5";if(!kr.find(ie,"/"+se)){var me=Ot(4);me[0]=55,me[1]=me[3]=50,me[2]=54,ie.FileIndex.push({name:se,type:2,content:me,size:4,L:69,R:69,C:69}),ie.FullPaths.push(ie.FullPaths[0]+se),S(ie)}}function S(ie,se){C(ie);for(var me=!1,fe=!1,Te=ie.FullPaths.length-1;Te>=0;--Te){var Re=ie.FileIndex[Te];switch(Re.type){case 0:fe?me=!0:(ie.FileIndex.pop(),ie.FullPaths.pop());break;case 1:case 2:case 5:fe=!0,isNaN(Re.R*Re.L*Re.C)&&(me=!0),Re.R>-1&&Re.L>-1&&Re.R==Re.L&&(me=!0);break;default:me=!0;break}}if(!(!me&&!se)){var ae=new Date(1987,1,19),Me=0,xe=Object.create?Object.create(null):{},Le=[];for(Te=0;Te<ie.FullPaths.length;++Te)xe[ie.FullPaths[Te]]=!0,ie.FileIndex[Te].type!==0&&Le.push([ie.FullPaths[Te],ie.FileIndex[Te]]);for(Te=0;Te<Le.length;++Te){var Ie=n(Le[Te][0]);fe=xe[Ie],fe||(Le.push([Ie,{name:a(Ie).replace("/",""),type:1,clsid:ee,ct:ae,mt:ae,content:null}]),xe[Ie]=!0)}for(Le.sort(function(tt,Xe){return r(tt[0],Xe[0])}),ie.FullPaths=[],ie.FileIndex=[],Te=0;Te<Le.length;++Te)ie.FullPaths[Te]=Le[Te][0],ie.FileIndex[Te]=Le[Te][1];for(Te=0;Te<Le.length;++Te){var rt=ie.FileIndex[Te],Ze=ie.FullPaths[Te];if(rt.name=a(Ze).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||ee,Te===0)rt.C=Le.length>1?1:-1,rt.size=0,rt.type=5;else if(Ze.slice(-1)=="/"){for(Me=Te+1;Me<Le.length&&n(ie.FullPaths[Me])!=Ze;++Me);for(rt.C=Me>=Le.length?-1:Me,Me=Te+1;Me<Le.length&&n(ie.FullPaths[Me])!=n(Ze);++Me);rt.R=Me>=Le.length?-1:Me,rt.type=1}else n(ie.FullPaths[Te+1]||"")==n(Ze)&&(rt.R=Te+1),rt.type=2}}}function O(ie,se){var me=se||{};if(me.fileType=="mad")return at(ie,me);switch(S(ie),me.fileType){case"zip":return st(ie,me)}var fe=function(tt){for(var Xe=0,lt=0,xt=0;xt<tt.FileIndex.length;++xt){var Wt=tt.FileIndex[xt];if(Wt.content){var er=Wt.content.length;er>0&&(er<4096?Xe+=er+63>>6:lt+=er+511>>9)}}for(var Tr=tt.FullPaths.length+3>>2,va=Xe+7>>3,sa=Xe+127>>7,nl=va+lt+Tr+sa,Bs=nl+127>>7,ec=Bs<=109?0:Math.ceil((Bs-109)/127);nl+Bs+ec+127>>7>Bs;)ec=++Bs<=109?0:Math.ceil((Bs-109)/127);var Ta=[1,ec,Bs,sa,Tr,lt,Xe,0];return tt.FileIndex[0].size=Xe<<6,Ta[7]=(tt.FileIndex[0].start=Ta[0]+Ta[1]+Ta[2]+Ta[3]+Ta[4]+Ta[5])+(Ta[6]+7>>3),Ta}(ie),Te=Ot(fe[7]<<9),Re=0,ae=0;{for(Re=0;Re<8;++Re)Te.write_shift(1,Ae[Re]);for(Re=0;Re<8;++Re)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Re=0;Re<3;++Re)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,fe[2]),Te.write_shift(4,fe[0]+fe[1]+fe[2]+fe[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,fe[3]?fe[0]+fe[1]+fe[2]-1:D),Te.write_shift(4,fe[3]),Te.write_shift(-4,fe[1]?fe[0]-1:D),Te.write_shift(4,fe[1]),Re=0;Re<109;++Re)Te.write_shift(-4,Re<fe[2]?fe[1]+Re:-1)}if(fe[1])for(ae=0;ae<fe[1];++ae){for(;Re<236+ae*127;++Re)Te.write_shift(-4,Re<fe[2]?fe[1]+Re:-1);Te.write_shift(-4,ae===fe[1]-1?D:ae+1)}var Me=function(tt){for(ae+=tt;Re<ae-1;++Re)Te.write_shift(-4,Re+1);tt&&(++Re,Te.write_shift(-4,D))};for(ae=Re=0,ae+=fe[1];Re<ae;++Re)Te.write_shift(-4,ce.DIFSECT);for(ae+=fe[2];Re<ae;++Re)Te.write_shift(-4,ce.FATSECT);Me(fe[3]),Me(fe[4]);for(var xe=0,Le=0,Ie=ie.FileIndex[0];xe<ie.FileIndex.length;++xe)Ie=ie.FileIndex[xe],Ie.content&&(Le=Ie.content.length,!(Le<4096)&&(Ie.start=ae,Me(Le+511>>9)));for(Me(fe[6]+7>>3);Te.l&511;)Te.write_shift(-4,ce.ENDOFCHAIN);for(ae=Re=0,xe=0;xe<ie.FileIndex.length;++xe)Ie=ie.FileIndex[xe],Ie.content&&(Le=Ie.content.length,!(!Le||Le>=4096)&&(Ie.start=ae,Me(Le+63>>6)));for(;Te.l&511;)Te.write_shift(-4,ce.ENDOFCHAIN);for(Re=0;Re<fe[4]<<2;++Re){var rt=ie.FullPaths[Re];if(!rt||rt.length===0){for(xe=0;xe<17;++xe)Te.write_shift(4,0);for(xe=0;xe<3;++xe)Te.write_shift(4,-1);for(xe=0;xe<12;++xe)Te.write_shift(4,0);continue}Ie=ie.FileIndex[Re],Re===0&&(Ie.start=Ie.size?Ie.start-1:D);var Ze=Re===0&&me.root||Ie.name;if(Le=2*(Ze.length+1),Te.write_shift(64,Ze,"utf16le"),Te.write_shift(2,Le),Te.write_shift(1,Ie.type),Te.write_shift(1,Ie.color),Te.write_shift(-4,Ie.L),Te.write_shift(-4,Ie.R),Te.write_shift(-4,Ie.C),Ie.clsid)Te.write_shift(16,Ie.clsid,"hex");else for(xe=0;xe<4;++xe)Te.write_shift(4,0);Te.write_shift(4,Ie.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Ie.start),Te.write_shift(4,Ie.size),Te.write_shift(4,0)}for(Re=1;Re<ie.FileIndex.length;++Re)if(Ie=ie.FileIndex[Re],Ie.size>=4096)if(Te.l=Ie.start+1<<9,an&&Buffer.isBuffer(Ie.content))Ie.content.copy(Te,Te.l,0,Ie.size),Te.l+=Ie.size+511&-512;else{for(xe=0;xe<Ie.size;++xe)Te.write_shift(1,Ie.content[xe]);for(;xe&511;++xe)Te.write_shift(1,0)}for(Re=1;Re<ie.FileIndex.length;++Re)if(Ie=ie.FileIndex[Re],Ie.size>0&&Ie.size<4096)if(an&&Buffer.isBuffer(Ie.content))Ie.content.copy(Te,Te.l,0,Ie.size),Te.l+=Ie.size+63&-64;else{for(xe=0;xe<Ie.size;++xe)Te.write_shift(1,Ie.content[xe]);for(;xe&63;++xe)Te.write_shift(1,0)}if(an)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function B(ie,se){var me=ie.FullPaths.map(function(xe){return xe.toUpperCase()}),fe=me.map(function(xe){var Le=xe.split("/");return Le[Le.length-(xe.slice(-1)=="/"?2:1)]}),Te=!1;se.charCodeAt(0)===47?(Te=!0,se=me[0].slice(0,-1)+se):Te=se.indexOf("/")!==-1;var Re=se.toUpperCase(),ae=Te===!0?me.indexOf(Re):fe.indexOf(Re);if(ae!==-1)return ie.FileIndex[ae];var Me=!Re.match(hy);for(Re=Re.replace(_l,""),Me&&(Re=Re.replace(hy,"!")),ae=0;ae<me.length;++ae)if((Me?me[ae].replace(hy,"!"):me[ae]).replace(_l,"")==Re||(Me?fe[ae].replace(hy,"!"):fe[ae]).replace(_l,"")==Re)return ie.FileIndex[ae];return null}var P=64,D=-2,W="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",ce={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function de(ie,se,me){u();var fe=O(ie,me);c.writeFileSync(se,fe)}function X(ie){for(var se=new Array(ie.length),me=0;me<ie.length;++me)se[me]=String.fromCharCode(ie[me]);return se.join("")}function pe(ie,se){var me=O(ie,se);switch(se&&se.type||"buffer"){case"file":return u(),c.writeFileSync(se.filename,me),me;case"binary":return typeof me=="string"?me:X(me);case"base64":return $2(typeof me=="string"?me:X(me));case"buffer":if(an)return Buffer.isBuffer(me)?me:Tf(me);case"array":return typeof me=="string"?yc(me):me}return me}var Se;function k(ie){try{var se=ie.InflateRaw,me=new se;if(me._processChunk(new Uint8Array([3,0]),me._finishFlushFlag),me.bytesRead)Se=ie;else throw new Error("zlib does not expose bytesRead")}catch(fe){console.error("cannot use native zlib: "+(fe.message||fe))}}function F(ie,se){if(!Se)return be(ie,se);var me=Se.InflateRaw,fe=new me,Te=fe._processChunk(ie.slice(ie.l),fe._finishFlushFlag);return ie.l+=fe.bytesRead,Te}function V(ie){return Se?Se.deflateRawSync(ie):re(ie)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function R(ie){var se=(ie<<1|ie<<11)&139536|(ie<<5|ie<<15)&558144;return(se>>16|se>>8|se)&255}for(var K=typeof Uint8Array<"u",Z=K?new Uint8Array(256):[],te=0;te<256;++te)Z[te]=R(te);function Q(ie,se){var me=Z[ie&255];return se<=8?me>>>8-se:(me=me<<8|Z[ie>>8&255],se<=16?me>>>16-se:(me=me<<8|Z[ie>>16&255],me>>>24-se))}function ye(ie,se){var me=se&7,fe=se>>>3;return(ie[fe]|(me<=6?0:ie[fe+1]<<8))>>>me&3}function Y(ie,se){var me=se&7,fe=se>>>3;return(ie[fe]|(me<=5?0:ie[fe+1]<<8))>>>me&7}function z(ie,se){var me=se&7,fe=se>>>3;return(ie[fe]|(me<=4?0:ie[fe+1]<<8))>>>me&15}function le(ie,se){var me=se&7,fe=se>>>3;return(ie[fe]|(me<=3?0:ie[fe+1]<<8))>>>me&31}function je(ie,se){var me=se&7,fe=se>>>3;return(ie[fe]|(me<=1?0:ie[fe+1]<<8))>>>me&127}function ue(ie,se,me){var fe=se&7,Te=se>>>3,Re=(1<<me)-1,ae=ie[Te]>>>fe;return me<8-fe||(ae|=ie[Te+1]<<8-fe,me<16-fe)||(ae|=ie[Te+2]<<16-fe,me<24-fe)||(ae|=ie[Te+3]<<24-fe),ae&Re}function Pe(ie,se,me){var fe=se&7,Te=se>>>3;return fe<=5?ie[Te]|=(me&7)<<fe:(ie[Te]|=me<<fe&255,ie[Te+1]=(me&7)>>8-fe),se+3}function Ye(ie,se,me){var fe=se&7,Te=se>>>3;return me=(me&1)<<fe,ie[Te]|=me,se+1}function nt(ie,se,me){var fe=se&7,Te=se>>>3;return me<<=fe,ie[Te]|=me&255,me>>>=8,ie[Te+1]=me,se+8}function mt(ie,se,me){var fe=se&7,Te=se>>>3;return me<<=fe,ie[Te]|=me&255,me>>>=8,ie[Te+1]=me&255,ie[Te+2]=me>>>8,se+16}function ct(ie,se){var me=ie.length,fe=2*me>se?2*me:se+5,Te=0;if(me>=se)return ie;if(an){var Re=xV(fe);if(ie.copy)ie.copy(Re);else for(;Te<ie.length;++Te)Re[Te]=ie[Te];return Re}else if(K){var ae=new Uint8Array(fe);if(ae.set)ae.set(ie);else for(;Te<me;++Te)ae[Te]=ie[Te];return ae}return ie.length=fe,ie}function ft(ie){for(var se=new Array(ie),me=0;me<ie;++me)se[me]=0;return se}function Ct(ie,se,me){var fe=1,Te=0,Re=0,ae=0,Me=0,xe=ie.length,Le=K?new Uint16Array(32):ft(32);for(Re=0;Re<32;++Re)Le[Re]=0;for(Re=xe;Re<me;++Re)ie[Re]=0;xe=ie.length;var Ie=K?new Uint16Array(xe):ft(xe);for(Re=0;Re<xe;++Re)Le[Te=ie[Re]]++,fe<Te&&(fe=Te),Ie[Re]=0;for(Le[0]=0,Re=1;Re<=fe;++Re)Le[Re+16]=Me=Me+Le[Re-1]<<1;for(Re=0;Re<xe;++Re)Me=ie[Re],Me!=0&&(Ie[Re]=Le[Me+16]++);var rt=0;for(Re=0;Re<xe;++Re)if(rt=ie[Re],rt!=0)for(Me=Q(Ie[Re],fe)>>fe-rt,ae=(1<<fe+4-rt)-1;ae>=0;--ae)se[Me|ae<<rt]=rt&15|Re<<4;return fe}var At=K?new Uint16Array(512):ft(512),He=K?new Uint16Array(32):ft(32);if(!K){for(var it=0;it<512;++it)At[it]=0;for(it=0;it<32;++it)He[it]=0}(function(){for(var ie=[],se=0;se<32;se++)ie.push(5);Ct(ie,He,32);var me=[];for(se=0;se<=143;se++)me.push(8);for(;se<=255;se++)me.push(9);for(;se<=279;se++)me.push(7);for(;se<=287;se++)me.push(8);Ct(me,At,288)})();var we=function(){for(var se=K?new Uint8Array(32768):[],me=0,fe=0;me<q.length-1;++me)for(;fe<q[me+1];++fe)se[fe]=me;for(;fe<32768;++fe)se[fe]=29;var Te=K?new Uint8Array(259):[];for(me=0,fe=0;me<L.length-1;++me)for(;fe<L[me+1];++fe)Te[fe]=me;function Re(Me,xe){for(var Le=0;Le<Me.length;){var Ie=Math.min(65535,Me.length-Le),rt=Le+Ie==Me.length;for(xe.write_shift(1,+rt),xe.write_shift(2,Ie),xe.write_shift(2,~Ie&65535);Ie-- >0;)xe[xe.l++]=Me[Le++]}return xe.l}function ae(Me,xe){for(var Le=0,Ie=0,rt=K?new Uint16Array(32768):[];Ie<Me.length;){var Ze=Math.min(65535,Me.length-Ie);if(Ze<10){for(Le=Pe(xe,Le,+(Ie+Ze==Me.length)),Le&7&&(Le+=8-(Le&7)),xe.l=Le/8|0,xe.write_shift(2,Ze),xe.write_shift(2,~Ze&65535);Ze-- >0;)xe[xe.l++]=Me[Ie++];Le=xe.l*8;continue}Le=Pe(xe,Le,+(Ie+Ze==Me.length)+2);for(var tt=0;Ze-- >0;){var Xe=Me[Ie];tt=(tt<<5^Xe)&32767;var lt=-1,xt=0;if((lt=rt[tt])&&(lt|=Ie&-32768,lt>Ie&&(lt-=32768),lt<Ie))for(;Me[lt+xt]==Me[Ie+xt]&&xt<250;)++xt;if(xt>2){Xe=Te[xt],Xe<=22?Le=nt(xe,Le,Z[Xe+1]>>1)-1:(nt(xe,Le,3),Le+=5,nt(xe,Le,Z[Xe-23]>>5),Le+=3);var Wt=Xe<8?0:Xe-4>>2;Wt>0&&(mt(xe,Le,xt-L[Xe]),Le+=Wt),Xe=se[Ie-lt],Le=nt(xe,Le,Z[Xe]>>3),Le-=3;var er=Xe<4?0:Xe-2>>1;er>0&&(mt(xe,Le,Ie-lt-q[Xe]),Le+=er);for(var Tr=0;Tr<xt;++Tr)rt[tt]=Ie&32767,tt=(tt<<5^Me[Ie])&32767,++Ie;Ze-=xt-1}else Xe<=143?Xe=Xe+48:Le=Ye(xe,Le,1),Le=nt(xe,Le,Z[Xe]),rt[tt]=Ie&32767,++Ie}Le=nt(xe,Le,0)-1}return xe.l=(Le+7)/8|0,xe.l}return function(xe,Le){return xe.length<8?Re(xe,Le):ae(xe,Le)}}();function re(ie){var se=Ot(50+Math.floor(ie.length*1.1)),me=we(ie,se);return se.slice(0,me)}var ne=K?new Uint16Array(32768):ft(32768),Ue=K?new Uint16Array(32768):ft(32768),Ke=K?new Uint16Array(128):ft(128),et=1,ke=1;function he(ie,se){var me=le(ie,se)+257;se+=5;var fe=le(ie,se)+1;se+=5;var Te=z(ie,se)+4;se+=4;for(var Re=0,ae=K?new Uint8Array(19):ft(19),Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],xe=1,Le=K?new Uint8Array(8):ft(8),Ie=K?new Uint8Array(8):ft(8),rt=ae.length,Ze=0;Ze<Te;++Ze)ae[M[Ze]]=Re=Y(ie,se),xe<Re&&(xe=Re),Le[Re]++,se+=3;var tt=0;for(Le[0]=0,Ze=1;Ze<=xe;++Ze)Ie[Ze]=tt=tt+Le[Ze-1]<<1;for(Ze=0;Ze<rt;++Ze)(tt=ae[Ze])!=0&&(Me[Ze]=Ie[tt]++);var Xe=0;for(Ze=0;Ze<rt;++Ze)if(Xe=ae[Ze],Xe!=0){tt=Z[Me[Ze]]>>8-Xe;for(var lt=(1<<7-Xe)-1;lt>=0;--lt)Ke[tt|lt<<Xe]=Xe&7|Ze<<3}var xt=[];for(xe=1;xt.length<me+fe;)switch(tt=Ke[je(ie,se)],se+=tt&7,tt>>>=3){case 16:for(Re=3+ye(ie,se),se+=2,tt=xt[xt.length-1];Re-- >0;)xt.push(tt);break;case 17:for(Re=3+Y(ie,se),se+=3;Re-- >0;)xt.push(0);break;case 18:for(Re=11+je(ie,se),se+=7;Re-- >0;)xt.push(0);break;default:xt.push(tt),xe<tt&&(xe=tt);break}var Wt=xt.slice(0,me),er=xt.slice(me);for(Ze=me;Ze<286;++Ze)Wt[Ze]=0;for(Ze=fe;Ze<30;++Ze)er[Ze]=0;return et=Ct(Wt,ne,286),ke=Ct(er,Ue,30),se}function _e(ie,se){if(ie[0]==3&&!(ie[1]&3))return[N0(se),2];for(var me=0,fe=0,Te=xV(se||1<<18),Re=0,ae=Te.length>>>0,Me=0,xe=0;!(fe&1);){if(fe=Y(ie,me),me+=3,fe>>>1)fe>>1==1?(Me=9,xe=5):(me=he(ie,me),Me=et,xe=ke);else{me&7&&(me+=8-(me&7));var Le=ie[me>>>3]|ie[(me>>>3)+1]<<8;if(me+=32,Le>0)for(!se&&ae<Re+Le&&(Te=ct(Te,Re+Le),ae=Te.length);Le-- >0;)Te[Re++]=ie[me>>>3],me+=8;continue}for(;;){!se&&ae<Re+32767&&(Te=ct(Te,Re+32767),ae=Te.length);var Ie=ue(ie,me,Me),rt=fe>>>1==1?At[Ie]:ne[Ie];if(me+=rt&15,rt>>>=4,!(rt>>>8&255))Te[Re++]=rt;else{if(rt==256)break;rt-=257;var Ze=rt<8?0:rt-4>>2;Ze>5&&(Ze=0);var tt=Re+L[rt];Ze>0&&(tt+=ue(ie,me,Ze),me+=Ze),Ie=ue(ie,me,xe),rt=fe>>>1==1?He[Ie]:Ue[Ie],me+=rt&15,rt>>>=4;var Xe=rt<4?0:rt-2>>1,lt=q[rt];for(Xe>0&&(lt+=ue(ie,me,Xe),me+=Xe),!se&&ae<tt&&(Te=ct(Te,tt+100),ae=Te.length);Re<tt;)Te[Re]=Te[Re-lt],++Re}}}return se?[Te,me+7>>>3]:[Te.slice(0,Re),me+7>>>3]}function be(ie,se){var me=ie.slice(ie.l||0),fe=_e(me,se);return ie.l+=fe[1],fe[0]}function Qe(ie,se){if(ie)typeof console<"u"&&console.error(se);else throw new Error(se)}function $e(ie,se){var me=ie;vo(me,0);var fe=[],Te=[],Re={FileIndex:fe,FullPaths:Te};C(Re,{root:se.root});for(var ae=me.length-4;(me[ae]!=80||me[ae+1]!=75||me[ae+2]!=5||me[ae+3]!=6)&&ae>=0;)--ae;me.l=ae+4,me.l+=4;var Me=me.read_shift(2);me.l+=6;var xe=me.read_shift(4);for(me.l=xe,ae=0;ae<Me;++ae){me.l+=20;var Le=me.read_shift(4),Ie=me.read_shift(4),rt=me.read_shift(2),Ze=me.read_shift(2),tt=me.read_shift(2);me.l+=8;var Xe=me.read_shift(4),lt=o(me.slice(me.l+rt,me.l+rt+Ze));me.l+=rt+Ze+tt;var xt=me.l;me.l=Xe+4,Je(me,Le,Ie,Re,lt),me.l=xt}return Re}function Je(ie,se,me,fe,Te){ie.l+=2;var Re=ie.read_shift(2),ae=ie.read_shift(2),Me=i(ie);if(Re&8257)throw new Error("Unsupported ZIP encryption");for(var xe=ie.read_shift(4),Le=ie.read_shift(4),Ie=ie.read_shift(4),rt=ie.read_shift(2),Ze=ie.read_shift(2),tt="",Xe=0;Xe<rt;++Xe)tt+=String.fromCharCode(ie[ie.l++]);if(Ze){var lt=o(ie.slice(ie.l,ie.l+Ze));(lt[21589]||{}).mt&&(Me=lt[21589].mt),((Te||{})[21589]||{}).mt&&(Me=Te[21589].mt)}ie.l+=Ze;var xt=ie.slice(ie.l,ie.l+Le);switch(ae){case 8:xt=F(ie,Ie);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ae)}var Wt=!1;Re&8&&(xe=ie.read_shift(4),xe==134695760&&(xe=ie.read_shift(4),Wt=!0),Le=ie.read_shift(4),Ie=ie.read_shift(4)),Le!=se&&Qe(Wt,"Bad compressed size: "+se+" != "+Le),Ie!=me&&Qe(Wt,"Bad uncompressed size: "+me+" != "+Ie),kt(fe,tt,xt,{unsafe:!0,mt:Me})}function st(ie,se){var me=se||{},fe=[],Te=[],Re=Ot(1),ae=me.compression?8:0,Me=0,xe=0,Le=0,Ie=0,rt=0,Ze=ie.FullPaths[0],tt=Ze,Xe=ie.FileIndex[0],lt=[],xt=0;for(xe=1;xe<ie.FullPaths.length;++xe)if(tt=ie.FullPaths[xe].slice(Ze.length),Xe=ie.FileIndex[xe],!(!Xe.size||!Xe.content||tt=="Sh33tJ5")){var Wt=Ie,er=Ot(tt.length);for(Le=0;Le<tt.length;++Le)er.write_shift(1,tt.charCodeAt(Le)&127);er=er.slice(0,er.l),lt[rt]=UBe.buf(Xe.content,0);var Tr=Xe.content;ae==8&&(Tr=V(Tr)),Re=Ot(30),Re.write_shift(4,67324752),Re.write_shift(2,20),Re.write_shift(2,Me),Re.write_shift(2,ae),Xe.mt?s(Re,Xe.mt):Re.write_shift(4,0),Re.write_shift(-4,lt[rt]),Re.write_shift(4,Tr.length),Re.write_shift(4,Xe.content.length),Re.write_shift(2,er.length),Re.write_shift(2,0),Ie+=Re.length,fe.push(Re),Ie+=er.length,fe.push(er),Ie+=Tr.length,fe.push(Tr),Re=Ot(46),Re.write_shift(4,33639248),Re.write_shift(2,0),Re.write_shift(2,20),Re.write_shift(2,Me),Re.write_shift(2,ae),Re.write_shift(4,0),Re.write_shift(-4,lt[rt]),Re.write_shift(4,Tr.length),Re.write_shift(4,Xe.content.length),Re.write_shift(2,er.length),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(4,0),Re.write_shift(4,Wt),xt+=Re.l,Te.push(Re),xt+=er.length,Te.push(er),++rt}return Re=Ot(22),Re.write_shift(4,101010256),Re.write_shift(2,0),Re.write_shift(2,0),Re.write_shift(2,rt),Re.write_shift(2,rt),Re.write_shift(4,xt),Re.write_shift(4,Ie),Re.write_shift(2,0),$i([$i(fe),$i(Te),Re])}var yt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(ie,se){if(ie.ctype)return ie.ctype;var me=ie.name||"",fe=me.match(/\.([^\.]+)$/);return fe&&yt[fe[1]]||se&&(fe=(me=se).match(/[\.\\]([^\.\\])+$/),fe&&yt[fe[1]])?yt[fe[1]]:"application/octet-stream"}function nr(ie){for(var se=$2(ie),me=[],fe=0;fe<se.length;fe+=76)me.push(se.slice(fe,fe+76));return me.join(`\r
`)+`\r
`}function Ce(ie){var se=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Le){var Ie=Le.charCodeAt(0).toString(16).toUpperCase();return"="+(Ie.length==1?"0"+Ie:Ie)});se=se.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),se.charAt(0)==`
`&&(se="=0D"+se.slice(1)),se=se.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var me=[],fe=se.split(`\r
`),Te=0;Te<fe.length;++Te){var Re=fe[Te];if(Re.length==0){me.push("");continue}for(var ae=0;ae<Re.length;){var Me=76,xe=Re.slice(ae,ae+Me);xe.charAt(Me-1)=="="?Me--:xe.charAt(Me-2)=="="?Me-=2:xe.charAt(Me-3)=="="&&(Me-=3),xe=Re.slice(ae,ae+Me),ae+=Me,ae<Re.length&&(xe+="="),me.push(xe)}}return me.join(`\r
`)}function dt(ie){for(var se=[],me=0;me<ie.length;++me){for(var fe=ie[me];me<=ie.length&&fe.charAt(fe.length-1)=="=";)fe=fe.slice(0,fe.length-1)+ie[++me];se.push(fe)}for(var Te=0;Te<se.length;++Te)se[Te]=se[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Re){return String.fromCharCode(parseInt(Re.slice(1),16))});return yc(se.join(`\r
`))}function gt(ie,se,me){for(var fe="",Te="",Re="",ae,Me=0;Me<10;++Me){var xe=se[Me];if(!xe||xe.match(/^\s*$/))break;var Le=xe.match(/^(.*?):\s*([^\s].*)$/);if(Le)switch(Le[1].toLowerCase()){case"content-location":fe=Le[2].trim();break;case"content-type":Re=Le[2].trim();break;case"content-transfer-encoding":Te=Le[2].trim();break}}switch(++Me,Te.toLowerCase()){case"base64":ae=yc(jc(se.slice(Me).join("")));break;case"quoted-printable":ae=dt(se.slice(Me));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Ie=kt(ie,fe.slice(me.length),ae,{unsafe:!0});Re&&(Ie.ctype=Re)}function Ne(ie,se){if(X(ie.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var me=se&&se.root||"",fe=(an&&Buffer.isBuffer(ie)?ie.toString("binary"):X(ie)).split(`\r
`),Te=0,Re="";for(Te=0;Te<fe.length;++Te)if(Re=fe[Te],!!/^Content-Location:/i.test(Re)&&(Re=Re.slice(Re.indexOf("file")),me||(me=Re.slice(0,Re.lastIndexOf("/")+1)),Re.slice(0,me.length)!=me))for(;me.length>0&&(me=me.slice(0,me.length-1),me=me.slice(0,me.lastIndexOf("/")+1),Re.slice(0,me.length)!=me););var ae=(fe[1]||"").match(/boundary="(.*?)"/);if(!ae)throw new Error("MAD cannot find boundary");var Me="--"+(ae[1]||""),xe=[],Le=[],Ie={FileIndex:xe,FullPaths:Le};C(Ie);var rt,Ze=0;for(Te=0;Te<fe.length;++Te){var tt=fe[Te];tt!==Me&&tt!==Me+"--"||(Ze++&&gt(Ie,fe.slice(rt,Te),me),rt=Te)}return Ie}function at(ie,se){var me=se||{},fe=me.boundary||"SheetJS";fe="------="+fe;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+fe.slice(2)+'"',"","",""],Re=ie.FullPaths[0],ae=Re,Me=ie.FileIndex[0],xe=1;xe<ie.FullPaths.length;++xe)if(ae=ie.FullPaths[xe].slice(Re.length),Me=ie.FileIndex[xe],!(!Me.size||!Me.content||ae=="Sh33tJ5")){ae=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(xt){return"_x"+xt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(xt){return"_u"+xt.charCodeAt(0).toString(16)+"_"});for(var Le=Me.content,Ie=an&&Buffer.isBuffer(Le)?Le.toString("binary"):X(Le),rt=0,Ze=Math.min(1024,Ie.length),tt=0,Xe=0;Xe<=Ze;++Xe)(tt=Ie.charCodeAt(Xe))>=32&&tt<128&&++rt;var lt=rt>=Ze*4/5;Te.push(fe),Te.push("Content-Location: "+(me.root||"file:///C:/SheetJS/")+ae),Te.push("Content-Transfer-Encoding: "+(lt?"quoted-printable":"base64")),Te.push("Content-Type: "+Dt(Me,ae)),Te.push(""),Te.push(lt?Ce(Ie):nr(Ie))}return Te.push(fe+`--\r
`),Te.join(`\r
`)}function wt(ie){var se={};return C(se,ie),se}function kt(ie,se,me,fe){var Te=fe&&fe.unsafe;Te||C(ie);var Re=!Te&&kr.find(ie,se);if(!Re){var ae=ie.FullPaths[0];se.slice(0,ae.length)==ae?ae=se:(ae.slice(-1)!="/"&&(ae+="/"),ae=(ae+se).replace("//","/")),Re={name:a(se),type:2},ie.FileIndex.push(Re),ie.FullPaths.push(ae),Te||kr.utils.cfb_gc(ie)}return Re.content=me,Re.size=me?me.length:0,fe&&(fe.CLSID&&(Re.clsid=fe.CLSID),fe.mt&&(Re.mt=fe.mt),fe.ct&&(Re.ct=fe.ct)),Re}function Lt(ie,se){C(ie);var me=kr.find(ie,se);if(me){for(var fe=0;fe<ie.FileIndex.length;++fe)if(ie.FileIndex[fe]==me)return ie.FileIndex.splice(fe,1),ie.FullPaths.splice(fe,1),!0}return!1}function qt(ie,se,me){C(ie);var fe=kr.find(ie,se);if(fe){for(var Te=0;Te<ie.FileIndex.length;++Te)if(ie.FileIndex[Te]==fe)return ie.FileIndex[Te].name=a(me),ie.FullPaths[Te]=me,!0}return!1}function _t(ie){S(ie,!0)}return e.find=B,e.read=T,e.parse=d,e.write=pe,e.writeFile=de,e.utils={cfb_new:wt,cfb_add:kt,cfb_del:Lt,cfb_mov:qt,cfb_gc:_t,ReadShift:Gy,CheckField:Gte,prep_blob:vo,bconcat:$i,use_zlib:k,_deflateRaw:re,_inflateRaw:be,consts:ce},e}();function QBe(t){return typeof t=="string"?d4(t):Array.isArray(t)?fBe(t):t}function Wb(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=d4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Xd(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([QBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=U0(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function VBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Is(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function EV(t,e){for(var r=[],n=Is(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function f4(t){for(var e=[],r=Is(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function h4(t){for(var e=[],r=Is(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function HBe(t){for(var e=[],r=Is(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var YE=new Date(1899,11,30,0,0,0);function Ei(t,e){var r=t.getTime(),n=YE.getTime()+(t.getTimezoneOffset()-YE.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Cte=new Date,$Be=YE.getTime()+(Cte.getTimezoneOffset()-YE.getTimezoneOffset())*6e4,SV=Cte.getTimezoneOffset();function m4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+$Be),e.getTimezoneOffset()!==SV&&e.setTime(e.getTime()+(e.getTimezoneOffset()-SV)*6e4),e}function KBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var IV=new Date("2017-02-19T19:06:09.000Z"),Ete=isNaN(IV.getFullYear())?new Date("2/19/17"):IV,GBe=Ete.getFullYear()==2017;function Qa(t,e){var r=new Date(t);if(GBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Ete.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function vp(t,e){if(an&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Xd(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Xd(fte(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Xd(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Xd(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Va(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Va(t[r]));return e}function Cs(t,e){for(var r="";r.length<e;)r+=t;return r}function ld(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var zBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jx(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&zBe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var qBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function Ste(t){return t?t.content&&t.type?vp(t.content,!0):t.data?fy(t.data):t.asNodeBuffer&&an?fy(t.asNodeBuffer().toString("binary")):t.asBinary?fy(t.asBinary()):t._data&&t._data.getContent?fy(vp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Ite(t){if(!t)return null;if(t.data)return pV(t.data);if(t.asNodeBuffer&&an)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?pV(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function WBe(t){return t&&t.name.slice(-4)===".bin"?Ite(t):Ste(t)}function cu(t,e){for(var r=t.FullPaths||Is(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function R6(t,e){var r=cu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ws(t,e,r){if(!r)return WBe(R6(t,e));if(!e)return null;try{return Ws(t,e)}catch{return null}}function bc(t,e,r){if(!r)return Ste(R6(t,e));if(!e)return null;try{return bc(t,e)}catch{return null}}function XBe(t,e,r){return Ite(R6(t,e))}function BV(t){for(var e=t.FullPaths||Is(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function tn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return an?n=Tf(r):n=hBe(r),kr.utils.cfb_add(t,e,n)}kr.utils.cfb_add(t,e,r)}else t.file(e,r)}function M6(){return kr.utils.cfb_new()}function Bte(t,e){switch(e.type){case"base64":return kr.read(t,{type:"base64"});case"binary":return kr.read(t,{type:"binary"});case"buffer":case"array":return kr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function my(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Gs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,YBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,TV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,JBe=/<[^>]*>/g,rl=Gs.match(TV)?TV:JBe,ZBe=/<\w*:/,eTe=/<(\/?)\w+:/;function Ur(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(YBe),o=0,c="",u=0,d="",A="",h=1;if(i)for(u=0;u!=i.length;++u){for(A=i[u],s=0;s!=A.length&&A.charCodeAt(s)!==61;++s);for(d=A.slice(0,s).trim();A.charCodeAt(s+1)==32;)++s;for(h=(a=A.charCodeAt(s+1))==34||a==39?1:0,c=A.slice(s+1+h,A.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var f=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[f]&&d.slice(o-3,o)=="ext")continue;n[f]=c,n[f.toLowerCase()]=c}}return n}function fA(t){return t.replace(eTe,"<$1")}var Tte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},L6=f4(Tte),In=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,c){return Tte[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),U6=/[&<>'"]/g,tTe=/[\u0000-\u0008\u000b-\u001f]/g;function ra(t){var e=t+"";return e.replace(U6,function(r){return L6[r]}).replace(tTe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function PV(t){return ra(t).replace(/ /g,"_x0020_")}var Pte=/[\u0000-\u001f]/g;function Q6(t){var e=t+"";return e.replace(U6,function(r){return L6[r]}).replace(/\n/g,"<br/>").replace(Pte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function rTe(t){var e=t+"";return e.replace(U6,function(r){return L6[r]}).replace(Pte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var jV=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function nTe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ra(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function MB(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function kV(t){var e=N0(2*t.length),r,n,a=1,s=0,i=0,o;for(n=0;n<t.length;n+=a)a=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function FV(t){return Tf(t,"binary").toString("utf8")}var o_="foo bar baz",ca=an&&(FV(o_)==MB(o_)&&FV||kV(o_)==MB(o_)&&kV)||MB,Xd=an?function(t){return Tf(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},G2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),jte=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),aTe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),sTe=/<\/?(?:vt:)?variant>/g,iTe=/<(?:vt:)([^>]*)>([\s\S]*)</;function OV(t,e){var r=Ur(t),n=t.match(aTe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(sTe,"").match(iTe);i&&a.push({v:ca(i[2]),t:i[1]})}),a}var kte=/(^\s|\s$|\n)/;function bo(t,e){return"<"+t+(e.match(kte)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function z2(t){return Is(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function ir(t,e,r){return"<"+t+(r!=null?z2(r):"")+(e!=null?(e.match(kte)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Wj(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function oTe(t,e){switch(typeof t){case"string":var r=ir("vt:lpwstr",ra(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ir((t|0)==t?"vt:i4":"vt:r8",ra(String(t)));case"boolean":return ir("vt:bool",t?"true":"false")}if(t instanceof Date)return ir("vt:filetime",Wj(t));throw new Error("Unable to serialize "+t)}function V6(t){if(an&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ca(U0(F6(t)));throw new Error("Bad input format: expected Buffer or string")}var q2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Hp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],xc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function lTe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function cTe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var DV=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},RV=an?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Tf(e)})):DV(t)}:DV,MV=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(qA(t,a)));return n.join("").replace(_l,"")},H6=an?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(_l,""):MV(t,e,r)}:MV,LV=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Fte=an?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):LV(t,e,r)}:LV,UV=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(zg(t,a)));return n.join("")},Xb=an?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):UV(e,r,n)}:UV,Ote=function(t,e){var r=vc(t,e);return r>0?Xb(t,e+4,e+4+r-1):""},Dte=Ote,Rte=function(t,e){var r=vc(t,e);return r>0?Xb(t,e+4,e+4+r-1):""},Mte=Rte,Lte=function(t,e){var r=2*vc(t,e);return r>0?Xb(t,e+4,e+4+r-1):""},Ute=Lte,Qte=function(e,r){var n=vc(e,r);return n>0?H6(e,r+4,r+4+n):""},Vte=Qte,Hte=function(t,e){var r=vc(t,e);return r>0?Xb(t,e+4,e+4+r):""},$te=Hte,Kte=function(t,e){return lTe(t,e)},JE=Kte,$6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};an&&(Dte=function(e,r){if(!Buffer.isBuffer(e))return Ote(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Mte=function(e,r){if(!Buffer.isBuffer(e))return Rte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Ute=function(e,r){if(!Buffer.isBuffer(e))return Lte(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Vte=function(e,r){if(!Buffer.isBuffer(e))return Qte(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},$te=function(e,r){if(!Buffer.isBuffer(e))return Hte(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},JE=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Kte(e,r)},$6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var zg=function(t,e){return t[e]},qA=function(t,e){return t[e+1]*256+t[e]},uTe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},vc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Cm=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},dTe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Gy(t,e){var r="",n,a,s=[],i,o,c,u;switch(e){case"dbcs":if(u=this.l,an&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(qA(this,u)),u+=2;t*=2;break;case"utf8":r=Xb(this,this.l,this.l+t);break;case"utf16le":t*=2,r=H6(this,this.l,this.l+t);break;case"wstr":return Gy.call(this,t,"dbcs");case"lpstr-ansi":r=Dte(this,this.l),t=4+vc(this,this.l);break;case"lpstr-cp":r=Mte(this,this.l),t=4+vc(this,this.l);break;case"lpwstr":r=Ute(this,this.l),t=4+2*vc(this,this.l);break;case"lpp4":t=4+vc(this,this.l),r=Vte(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+vc(this,this.l),r=$te(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=zg(this,this.l+t++))!==0;)s.push(i_(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=qA(this,this.l+t))!==0;)s.push(i_(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=zg(this,u),this.l=u+1,o=Gy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(i_(qA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=zg(this,u),this.l=u+1,o=Gy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(i_(zg(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=zg(this,this.l),this.l++,n;case 2:return n=(e==="i"?uTe:qA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Cm:dTe)(this,this.l),this.l+=4,n):(a=vc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=JE(this,this.l):a=JE([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Fte(this,this.l,t);break}}return this.l+=t,r}var ATe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},fTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},hTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function mTe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)hTe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ATe(this,e,this.l);break;case 8:if(n=8,r==="f"){cTe(this,e,this.l);break}case 16:break;case-4:n=4,fTe(this,e,this.l);break}return this.l+=n,this}function Gte(t,e){var r=Fte(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function vo(t,e){t.l=e,t.read_shift=Gy,t.chk=Gte,t.write_shift=mTe}function el(t,e){t.l+=e}function Ot(t){var e=N0(t);return vo(e,0),e}function Pf(t,e,r){if(t){var n,a,s;vo(t,t.l||0);for(var i=t.length,o=0,c=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=eb[o]||eb[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,o))return}}}function ql(){var t=[],e=an?256:2048,r=function(u){var d=Ot(u);return vo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),$i(t)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function Gt(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=eb[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&$6(r)&&t.push(r)}}function zy(t,e,r){var n=Va(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function QV(t,e,r){var n=Va(t);return n.s=zy(n.s,e.s,r),n.e=zy(n.e,e.s,r),n}function qy(t,e){if(t.cRel&&t.c<0)for(t=Va(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Va(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Lr(t);return!t.cRel&&t.cRel!=null&&(r=xTe(r)),!t.rRel&&t.rRel!=null&&(r=pTe(r)),r}function LB(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ds(t.s.c)+":"+(t.e.cRel?"":"$")+ds(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+$s(t.s.r)+":"+(t.e.rRel?"":"$")+$s(t.e.r):qy(t.s,e.biff)+":"+qy(t.e,e.biff)}function K6(t){return parseInt(gTe(t),10)-1}function $s(t){return""+(t+1)}function pTe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function gTe(t){return t.replace(/\$(\d+)$/,"$1")}function G6(t){for(var e=vTe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ds(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function xTe(t){return t.replace(/^([A-Z])/,"$$$1")}function vTe(t){return t.replace(/^\$([A-Z])/,"$1")}function yTe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function As(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Lr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Wl(t){var e=t.indexOf(":");return e==-1?{s:As(t),e:As(t)}:{s:As(t.slice(0,e)),e:As(t.slice(e+1))}}function Jr(t,e){return typeof e>"u"||typeof e=="number"?Jr(t.s,t.e):(typeof t!="string"&&(t=Lr(t)),typeof e!="string"&&(e=Lr(e)),t==e?t:t+":"+e)}function Bn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function VV(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Su(t.z,r?Ei(e):e)}catch{}try{return t.w=Su((t.XF||{}).numFmtId||(r?14:0),r?Ei(e):e)}catch{return""+e}}function xf(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?jf[t.v]||t.v:e==null?VV(t,t.v):VV(t,e))}function Q0(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function zte(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?As(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Bn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var A=0;A!=e.length;++A)if(e[A]){if(!Array.isArray(e[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[A].length;++h)if(!(typeof e[A][h]>"u")){var f={v:e[A][h]},m=i+A,p=o+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[A][h]&&typeof e[A][h]=="object"&&!Array.isArray(e[A][h])&&!(e[A][h]instanceof Date))f=e[A][h];else if(Array.isArray(f.v)&&(f.f=e[A][h][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else if(n.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=n.dateNF||Mr[14],n.cellDates?(f.t="d",f.w=Su(f.z,Ei(f.v))):(f.t="n",f.v=Ei(f.v),f.w=Su(f.z,f.v))):f.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(f.z=s[m][p].z),s[m][p]=f;else{var g=Lr({c:p,r:m});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return u.s.c<1e7&&(s["!ref"]=Jr(u)),s}function Pv(t,e){return zte(null,t,e)}function bTe(t){return t.read_shift(4,"i")}function cd(t,e){return e||(e=Ot(4)),e.write_shift(4,t),e}function Yo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Gi(t,e){var r=!1;return e==null&&(r=!0,e=Ot(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function wTe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function NTe(t,e){return e||(e=Ot(4)),e.write_shift(2,0),e.write_shift(2,0),e}function z6(t,e){var r=t.l,n=t.read_shift(1),a=Yo(t),s=[],i={t:a,h:a};if(n&1){for(var o=t.read_shift(4),c=0;c!=o;++c)s.push(wTe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function _Te(t,e){var r=!1;return e==null&&(r=!0,e=Ot(15+4*t.t.length)),e.write_shift(1,0),Gi(t.t,e),r?e.slice(0,e.l):e}var CTe=z6;function ETe(t,e){var r=!1;return e==null&&(r=!0,e=Ot(23+4*t.t.length)),e.write_shift(1,1),Gi(t.t,e),e.write_shift(4,1),NTe({},e),r?e.slice(0,e.l):e}function Pu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function $p(t,e){return e==null&&(e=Ot(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Kp(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Gp(t,e){return e==null&&(e=Ot(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var STe=Yo,qte=Gi;function q6(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function ZE(t,e){var r=!1;return e==null&&(r=!0,e=Ot(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var ITe=Yo,Xj=q6,W6=ZE;function X6(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?JE([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Cm(e,0)>>2;return r?a/100:a}function Wte(t,e){e==null&&(e=Ot(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Xte(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function BTe(t,e){return e||(e=Ot(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var zp=Xte,jv=BTe;function Wo(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function yp(t,e){return(e||Ot(8)).write_shift(8,t,"f")}function TTe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=zm[a];u&&(e.rgb=X2(u));break;case 2:e.rgb=X2([i,o,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function eS(t,e){if(e||(e=Ot(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function PTe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function jTe(t,e){e||(e=Ot(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Yte(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function kTe(t){return Yte(t,1)}function FTe(t){return Yte(t,2)}var Y6=2,Rl=3,l_=11,HV=12,tS=19,c_=64,OTe=65,DTe=71,RTe=4108,MTe=4126,Qi=80,Jte=81,LTe=[Qi,Jte],Yj={1:{n:"CodePage",t:Y6},2:{n:"Category",t:Qi},3:{n:"PresentationFormat",t:Qi},4:{n:"ByteCount",t:Rl},5:{n:"LineCount",t:Rl},6:{n:"ParagraphCount",t:Rl},7:{n:"SlideCount",t:Rl},8:{n:"NoteCount",t:Rl},9:{n:"HiddenCount",t:Rl},10:{n:"MultimediaClipCount",t:Rl},11:{n:"ScaleCrop",t:l_},12:{n:"HeadingPairs",t:RTe},13:{n:"TitlesOfParts",t:MTe},14:{n:"Manager",t:Qi},15:{n:"Company",t:Qi},16:{n:"LinksUpToDate",t:l_},17:{n:"CharacterCount",t:Rl},19:{n:"SharedDoc",t:l_},22:{n:"HyperlinksChanged",t:l_},23:{n:"AppVersion",t:Rl,p:"version"},24:{n:"DigSig",t:OTe},26:{n:"ContentType",t:Qi},27:{n:"ContentStatus",t:Qi},28:{n:"Language",t:Qi},29:{n:"Version",t:Qi},255:{},2147483648:{n:"Locale",t:tS},2147483651:{n:"Behavior",t:tS},1919054434:{}},Jj={1:{n:"CodePage",t:Y6},2:{n:"Title",t:Qi},3:{n:"Subject",t:Qi},4:{n:"Author",t:Qi},5:{n:"Keywords",t:Qi},6:{n:"Comments",t:Qi},7:{n:"Template",t:Qi},8:{n:"LastAuthor",t:Qi},9:{n:"RevNumber",t:Qi},10:{n:"EditTime",t:c_},11:{n:"LastPrinted",t:c_},12:{n:"CreatedDate",t:c_},13:{n:"ModifiedDate",t:c_},14:{n:"PageCount",t:Rl},15:{n:"WordCount",t:Rl},16:{n:"CharCount",t:Rl},17:{n:"Thumbnail",t:DTe},18:{n:"Application",t:Qi},19:{n:"DocSecurity",t:Rl},255:{},2147483648:{n:"Locale",t:tS},2147483651:{n:"Behavior",t:tS},1919054434:{}},$V={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},UTe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function QTe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var VTe=QTe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zm=Va(VTe),jf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Zte={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Zj={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},u_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function J6(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function HTe(t){var e=J6();if(!t||!t.match)return e;var r={};if((t.match(rl)||[]).forEach(function(n){var a=Ur(n);switch(a[0].replace(ZBe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Zj[a.ContentType]]!==void 0&&e[Zj[a.ContentType]].push(a.PartName);break}}),e.xmlns!==bi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function ere(t,e){var r=HBe(Zj),n=[],a;n[n.length]=Gs,n[n.length]=ir("Types",null,{xmlns:bi.CT,"xmlns:xsd":bi.xsd,"xmlns:xsi":bi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return ir("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=ir("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:u_[c][e.bookType]||u_[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=ir("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:u_[c][e.bookType]||u_[c].xlsx})})},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=ir("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var un={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function W2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Wy(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(rl)||[]).forEach(function(a){var s=Ur(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:my(s.Target,e);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function Ix(t){var e=[Gs,ir("Relationships",null,{xmlns:bi.RELS})];return Is(t["!id"]).forEach(function(r){e[e.length]=ir("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Jn(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[un.HLINK,un.XPATH,un.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var $Te="application/vnd.oasis.opendocument.spreadsheet";function KTe(t,e){for(var r=V6(t),n,a;n=q2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Ur(n[0],!1),a.path=="/"&&a.type!==$Te)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function GTe(t){var e=[Gs];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function KV(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function zTe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function qTe(t){var e=[Gs];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(KV(t[r][0],t[r][1])),e.push(zTe("",t[r][0]));return e.push(KV("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function tre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+zE.version+"</meta:generator></office:meta></office:document-meta>"}var Nu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],WTe=function(){for(var t=new Array(Nu.length),e=0;e<Nu.length;++e){var r=Nu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function rre(t){var e={};t=ca(t);for(var r=0;r<Nu.length;++r){var n=Nu[r],a=t.match(WTe[r]);a!=null&&a.length>0&&(e[n[1]]=In(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Qa(e[n[1]]))}return e}function UB(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ra(e),n[n.length]=r?ir(t,e,r):bo(t,e))}function nre(t,e){var r=e||{},n=[Gs,ir("cp:coreProperties",null,{"xmlns:cp":bi.CORE_PROPS,"xmlns:dc":bi.dc,"xmlns:dcterms":bi.dcterms,"xmlns:dcmitype":bi.dcmitype,"xmlns:xsi":bi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&UB("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Wj(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&UB("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Wj(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Nu.length;++s){var i=Nu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&UB(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var qm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],are=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sre(t,e,r,n){var a=[];if(typeof t=="string")a=OV(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?OV(e,n).map(function(d){return d.v}):e,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function XTe(t,e,r){var n={};return e||(e={}),t=ca(t),qm.forEach(function(a){var s=(t.match(G2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=In(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&sre(n.HeadingPairs,n.TitlesOfParts,e,r),e}function ire(t){var e=[],r=ir;return t||(t={}),t.Application="SheetJS",e[e.length]=Gs,e[e.length]=ir("Properties",null,{xmlns:bi.EXT_PROPS,"xmlns:vt":bi.vt}),qm.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ra(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ra(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var YTe=/<[^>]+>[^<]*/g;function JTe(t,e){var r={},n="",a=t.match(YTe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Ur(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=In(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=In(d);break;case"bool":r[n]=Ra(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=In(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function ore(t){var e=[Gs,ir("Properties",null,{xmlns:bi.CUST_PROPS,"xmlns:vt":bi.vt})];if(!t)return e.join("");var r=1;return Is(t).forEach(function(a){++r,e[e.length]=ir("property",oTe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ra(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var ek={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},QB;function ZTe(t,e,r){QB||(QB=f4(ek)),e=QB[e]||e,t[e]=r}function ePe(t,e){var r=[];return Is(ek).map(function(n){for(var a=0;a<Nu.length;++a)if(Nu[a][1]==n)return Nu[a];for(a=0;a<qm.length;++a)if(qm[a][1]==n)return qm[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(bo(ek[n[1]]||n[1],a))}}),ir("DocumentProperties",r.join(""),{xmlns:xc.o})}function tPe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Is(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Nu.length;++i)if(s==Nu[i][1])return;for(i=0;i<qm.length;++i)if(s==qm[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=t[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(ir(PV(s),o,{"dt:dt":c}))}}),e&&Is(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(ir(PV(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+xc.o+'">'+a.join("")+"</"+n+">"}function Z6(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function rPe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Ot(8);return i.write_shift(4,n),i.write_shift(4,a),i}function lre(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function cre(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function ure(t,e,r){return e===31?cre(t):lre(t,e,r)}function tk(t,e,r){return ure(t,e,r===!1?0:4)}function nPe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return ure(t,e,0)}function aPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(_l,""),t.l-a&2&&(t.l+=2)}return r}function sPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(_l,"");return r}function iPe(t){var e=t.l,r=rS(t,Jte);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=rS(t,Rl);return[r,n]}function oPe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(iPe(t));return r}function GV(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(_l,"").replace(hy,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function dre(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function lPe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function rS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==HV&&n!==e&&LTe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===HV?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return lre(t,n,4).replace(_l,"");case 31:return cre(t);case 64:return Z6(t);case 65:return dre(t);case 71:return lPe(t);case 80:return tk(t,n,!s.raw).replace(_l,"");case 81:return nPe(t,n).replace(_l,"");case 4108:return oPe(t);case 4126:case 4127:return n==4127?aPe(t):sPe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function zV(t,e){var r=Ot(4),n=Ot(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Ot(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=rPe(e);break;case 31:case 80:for(n=Ot(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return $i([r,n])}function qV(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),A=t.read_shift(4);s[i]=[d,A+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var f=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,f=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],f=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],f=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(f=!1,t.l=s[i][1]),f)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=rS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:rd(o=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(o=h.CodePage=rS(t,Y6),rd(o),c!==-1){var p=t.l;t.l=s[c][1],u=GV(t,o),t.l=p}}else if(s[i][0]===0){if(o===0){c=i,t.l=s[i+1][1];continue}u=GV(t,o)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=dre(t);break;case 30:t.l+=4,x=tk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=tk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=Ds(t,4);break;case 64:t.l+=4,x=Qa(Z6(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var Are=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function cPe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function WV(t,e,r){var n=Ot(8),a=[],s=[],i=8,o=0,c=Ot(8),u=Ot(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=Ot(8),u.write_shift(4,0),a.unshift(u);var d=[Ot(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var A=t[o][0];for(c=Ot(8+2*(A.length+1)+(A.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,A.length+1),c.write_shift(0,A,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=$i(d),s.unshift(c),i+=8+c.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(Are.indexOf(t[o][0])>-1||are.indexOf(t[o][0])>-1)&&t[o][1]!=null){var h=t[o][1],f=0;if(e){f=+e[t[o][0]];var m=r[f];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=zV(m.t,h)}else{var g=cPe(h);g==-1&&(g=31,h=String(h)),c=zV(g,h)}s.push(c),u=Ot(8),u.write_shift(4,e?f:2+o),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,x),x+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),$i([n].concat(a).concat(s))}function XV(t,e,r){var n=t.content;if(!n)return{};vo(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==kr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var A=qV(n,e),h={SystemIdentifier:u};for(var f in A)h[f]=A[f];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=qV(n,null)}catch{}for(f in m)h[f]=m[f];return h.FMTID=[s,i],h}function YV(t,e,r,n,a,s){var i=Ot(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,kr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=WV(t,r,n);if(o.push(c),a){var u=WV(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return $i(o)}function ph(t,e){return t.read_shift(e),null}function uPe(t,e){e||(e=Ot(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function dPe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Ds(t,e){return t.read_shift(e)===1}function xl(t,e){return e||(e=Ot(2)),e.write_shift(2,+!!t),e}function Xs(t){return t.read_shift(2,"u")}function uu(t,e){return e||(e=Ot(2)),e.write_shift(2,t),e}function fre(t,e){return dPe(t,e,Xs)}function APe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function hre(t,e,r){return r||(r=Ot(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Yb(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function fPe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function hPe(t){var e=t.t||"",r=Ot(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Ot(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return $i(a)}function bp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Jb(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):bp(t,n,r)}function qp(t,e,r){if(r.biff>5)return Jb(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function mre(t,e,r){return r||(r=Ot(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function mPe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function pPe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(_l,"");return n&&(t.l+=24),a}function gPe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(_l,"");return r+i}function xPe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return pPe(t);case"0303000000000000c000000000000046":return gPe(t);default:throw new Error("Unsupported Moniker "+r)}}function d_(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(_l,""):"";return r}function JV(t,e){e||(e=Ot(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function vPe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,o,c,u="",d,A;a&16&&(s=d_(t,r-t.l)),a&128&&(i=d_(t,r-t.l)),(a&257)===257&&(o=d_(t,r-t.l)),(a&257)===1&&(c=xPe(t,r-t.l)),a&8&&(u=d_(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(A=Z6(t)),t.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var f={Target:h};return d&&(f.guid=d),A&&(f.time=A),s&&(f.Tooltip=s),f}function yPe(t){var e=Ot(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),JV(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&JV(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function pre(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function gre(t,e){var r=pre(t);return r[3]=0,r}function hA(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function wp(t,e,r,n){return n||(n=Ot(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function bPe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function wPe(t,e,r){return e===0?"":qp(t,e,r)}function NPe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function xre(t){var e=t.read_shift(2),r=X6(t);return[e,r]}function _Pe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Yb(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function p4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function vre(t,e){return e||(e=Ot(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function yre(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var CPe=yre;function bre(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function EPe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function SPe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Mo(t){t.l+=2,t.l+=t.read_shift(2)}var IPe={0:Mo,4:Mo,5:Mo,6:Mo,7:SPe,8:Mo,9:Mo,10:Mo,11:Mo,12:Mo,13:EPe,14:Mo,15:Mo,16:Mo,17:Mo,18:Mo,19:Mo,20:Mo,21:bre};function BPe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(IPe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function A_(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function eD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ot(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function TPe(t,e){return e===0||t.read_shift(2),1200}function PPe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=qp(t,0,r);return t.read_shift(e+n-t.l),a}function jPe(t,e){var r=!e||e.biff==8,n=Ot(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function kPe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function FPe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Yb(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function OPe(t,e){var r=!e||e.biff>=8?2:1,n=Ot(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function DPe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(fPe(t));return s.Count=n,s.Unique=a,s}function RPe(t,e){var r=Ot(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=hPe(t[a]);var s=$i([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function MPe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function LPe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function UPe(t){var e=bPe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function QPe(t){return t.read_shift(2),t.read_shift(4)}function ZV(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function VPe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function HPe(){var t=Ot(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function $Pe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function KPe(t){var e=Ot(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function GPe(){}function zPe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Yb(t,0,r),n}function qPe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Ot(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function WPe(t){var e=hA(t);return e.isst=t.read_shift(4),e}function XPe(t,e,r,n){var a=Ot(10);return wp(t,e,n,a),a.write_shift(4,r),a}function YPe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=hA(t);r.biff==2&&t.l++;var s=Jb(t,n-t.l,r);return a.val=s,a}function JPe(t,e,r,n,a){var s=!a||a.biff==8,i=Ot(8+ +s+(1+s)*r.length);return wp(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function ZPe(t,e,r){var n=t.read_shift(2),a=qp(t,0,r);return[n,a]}function eje(t,e,r,n){var a=r&&r.biff==5;n||(n=Ot(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var tje=qp;function eH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:i,c}}}function rje(t,e){var r=e.biff==8||!e.biff?4:2,n=Ot(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function nje(t){var e=t.read_shift(2),r=t.read_shift(2),n=xre(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function aje(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(xre(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function sje(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function ije(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),c=t.read_shift(2);return a.patternType=UTe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function oje(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=ije(t,e,n.fStyle,r),n}function tH(t,e,r,n){var a=r&&r.biff==5;n||(n=Ot(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function lje(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function cje(t){var e=Ot(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function rH(t,e,r){var n=hA(t);(r.biff==2||e==9)&&++t.l;var a=APe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function uje(t,e,r,n,a,s){var i=Ot(8);return wp(t,e,n,i),hre(r,s,i),i}function dje(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=hA(t),a=Wo(t);return n.val=a,n}function Aje(t,e,r,n){var a=Ot(14);return wp(t,e,n,a),yp(r,a),a}var nH=wPe;function fje(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=bp(t,s),o=[];n>t.l;)o.push(Jb(t));return[s,a,i,o]}function aH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=_Pe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var hje=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function sH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=bp(t,i,r);a&32&&(u=hje[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var A=n==t.l||o===0||!(d>0)?[]:B6e(t,d,r,o);return{chKey:s,Name:u,itab:c,rgce:A}}function wre(t,e,r){if(r.biff<8)return mje(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(NPe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function mje(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Yb(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function pje(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=bp(t,n,r),i=bp(t,a,r);return[s,i]}function gje(t,e,r){var n=yre(t);t.l++;var a=t.read_shift(1);return e-=8,[T6e(t,e,r),a,n]}function iH(t,e,r){var n=CPe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,S6e(t,e,r)]}function xje(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function vje(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=qp(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},o,i,s]}}function yje(t,e,r){return vje(t,e,r)}function bje(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(p4(t));return r}function wje(t){var e=Ot(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)vre(t[r],e);return e}function Nje(t,e,r){if(r&&r.biff<8)return Cje(t,e,r);var n=bre(t),a=BPe(t,e-22,n[1]);return{cmo:n,ft:a}}var _je={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function Cje(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((_je[n]||el)(t,e,r)),{cmo:[a,n,s],ft:i}}function Eje(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=mPe(t,6,r);var o=t.read_shift(2);t.read_shift(2),Xs(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],A=bp(t,t.lens[u+1]-t.lens[u]-1);if(a+=A,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function Sje(t,e){var r=p4(t);t.l+=16;var n=vPe(t,e-24);return[r,n]}function Ije(t){var e=Ot(24),r=As(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return $i([e,yPe(t[1])])}function Bje(t,e){t.read_shift(2);var r=p4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(_l,""),[r,n]}function Tje(t){var e=t[1].Tooltip,r=Ot(10+2*(e.length+1));r.write_shift(2,2048);var n=As(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function Pje(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=$V[r]||r,r=t.read_shift(2),e[1]=$V[r]||r,e}function jje(t){return t||(t=Ot(4)),t.write_shift(2,1),t.write_shift(2,1),t}function kje(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(gre(t));return r}function Fje(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(gre(t));return r}function Oje(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Nre(t,e,r){if(!r.cellStyles)return el(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Dje(t,e){var r=Ot(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Rje(t,e){var r={};return e<32||(t.l+=16,r.header=Wo(t),r.footer=Wo(t),t.l+=2),r}function Mje(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function Lje(t){for(var e=Ot(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Uje=hA,Qje=fre,Vje=Jb;function Hje(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function $je(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=hA(t);++t.l;var a=qp(t,e-7,r);return n.t="str",n.val=a,n}function Kje(t){var e=hA(t);++t.l;var r=Wo(t);return e.t="n",e.val=r,e}function Gje(t,e,r){var n=Ot(15);return rw(n,t,e),n.write_shift(8,r,"f"),n}function zje(t){var e=hA(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function qje(t,e,r){var n=Ot(9);return rw(n,t,e),n.write_shift(2,r),n}function Wje(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Xje(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Yje(t,e,r){var n=t.l+e,a=hA(t),s=t.read_shift(2),i=bp(t,s,r);return t.l=n,a.t="str",a.val=i,a}var Jje=[2,3,48,49,131,139,140,245],rk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=f4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=N0(1);switch(c.type){case"base64":d=yc(jc(o));break;case"binary":d=yc(o);break;case"buffer":case"array":d=o;break}vo(d,0);var A=d.read_shift(1),h=!!(A&136),f=!1,m=!1;switch(A){case 2:break;case 3:break;case 48:f=!0,h=!0;break;case 49:f=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var p=0,g=521;A==2&&(p=d.read_shift(2)),d.l+=3,A!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),A!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;A!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},I=Math.min(d.length,A==2?521:g-10-(f?264:0)),T=m?32:11;d.l<I&&d[d.l]!=13;)switch(w={},w.name=H2.utils.decode(y,d.slice(d.l,d.l+T)).replace(/[\u0000\r\n].*$/g,""),d.l+=T,w.type=String.fromCharCode(d.read_shift(1)),A!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),A==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),A!=2&&(d.l+=m?13:14),w.type){case"B":(!f||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var C=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++C]=[],E=0,E=0;E!=b.length;++E){var S=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,vo(S,0);var O=H2.utils.decode(y,S);switch(b[E].type){case"C":O.trim().length&&(u[C][E]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[C][E]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[C][E]=O;break;case"F":u[C][E]=parseFloat(O.trim());break;case"+":case"I":u[C][E]=m?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[C][E]=!0;break;case"N":case"F":u[C][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));u[C][E]="##MEMO##"+(m?parseInt(O.trim(),10):S.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[C][E]=+O||0);break;case"@":u[C][E]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":u[C][E]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":u[C][E]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][E]=-S.read_shift(-8,"f");break;case"B":if(f&&b[E].len==8){u[C][E]=S.read_shift(8,"f");break}case"G":case"P":S.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(A!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Pv(r(o,u),u);return d["!cols"]=u.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete u.DBF,d}function a(o,c){try{return Q0(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&rd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ql(),A=iS(o,{header:1,raw:!0,cellDates:!0}),h=A[0],f=A.slice(1),m=o["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=Bn(o["!ref"]),w=[],I=[],T=[];for(p=0;p<=b.e.c-b.s.c;++p){var C="",E="",S=0,O=[];for(g=0;g<f.length;++g)f[g][p]!=null&&O.push(f[g][p]);if(O.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<O.length;++g){switch(typeof O[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=O[g]instanceof Date?"D":"C";break;default:E="C"}S=Math.max(S,String(O[g]).length),C=C&&C!=E?"C":E}S>250&&(S=250),E=((m[p]||{}).DBF||{}).type,E=="C"&&m[p].DBF.len>S&&(S=m[p].DBF.len),C=="B"&&E=="N"&&(C="N",T[p]=m[p].DBF.dec,S=m[p].DBF.len),I[p]=C=="C"||E=="N"?S:s[C]||0,y+=I[p],w[p]=C}var B=d.next(32);for(B.write_shift(4,318902576),B.write_shift(4,f.length),B.write_shift(2,296+32*x),B.write_shift(2,y),p=0;p<4;++p)B.write_shift(4,0);for(B.write_shift(4,0|(+e[Ate]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var P=d.next(32),D=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,D,"sbcs"),P.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),P.write_shift(4,g),P.write_shift(1,I[p]||s[w[p]]||0),P.write_shift(1,T[p]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),g+=I[p]||s[w[p]]||0}var W=d.next(264);for(W.write_shift(4,13),p=0;p<65;++p)W.write_shift(4,0);for(p=0;p<f.length;++p){var Ae=d.next(y);for(Ae.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":Ae.write_shift(1,f[p][g]==null?63:f[p][g]?84:70);break;case"B":Ae.write_shift(8,f[p][g]||0,"f");break;case"N":var ee="0";for(typeof f[p][g]=="number"&&(ee=f[p][g].toFixed(T[g]||0)),x=0;x<I[g]-ee.length;++x)Ae.write_shift(1,32);Ae.write_shift(1,ee,"sbcs");break;case"D":f[p][g]?(Ae.write_shift(4,("0000"+f[p][g].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(f[p][g].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+f[p][g].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var ce=String(f[p][g]!=null?f[p][g]:"").slice(0,I[g]);for(Ae.write_shift(1,ce,"sbcs"),x=0;x<I[g]-ce.length;++x)Ae.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),_re=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Is(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,f){var m=t[f];return typeof m=="number"?gV(m):m},n=function(h,f,m){var p=f.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:gV(p)};t["|"]=254;function a(h,f){switch(f.type){case"base64":return s(jc(h),f);case"binary":return s(h,f);case"buffer":return s(an&&Buffer.isBuffer(h)?h.toString("binary"):U0(h),f);case"array":return s(vp(h),f)}throw new Error("Unrecognized type "+f.type)}function s(h,f){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],I=null,T={},C=[],E=[],S=[],O=0,B;for(+f.codepage>=0&&rd(+f.codepage);x!==m.length;++x){O=0;var P=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=P.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),W=D[0],Ae;if(P.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(P.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,ce=!1,de=!1,X=!1,pe=-1,Se=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":g=parseInt(D[y].slice(1))-1,ce=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,ce||(g=0),B=b.length;B<=p;++B)b[B]=[];break;case"K":Ae=D[y].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(ld(Ae))?isNaN(Jx(Ae).getDate())||(Ae=Qa(Ae)):(Ae=ld(Ae),I!==null&&Bv(I)&&(Ae=m4(Ae))),ee=!0;break;case"E":X=!0;var k=Bx(D[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],k];break;case"S":de=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":pe=parseInt(D[y].slice(1))-1;break;case"C":Se=parseInt(D[y].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}if(ee&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=Ae:b[p][g]=Ae,I=null),de){if(X)throw new Error("SYLK shared formula cannot have own formula");var F=pe>-1&&b[pe][Se];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Vre(F[1],{r:p-pe,c:g-Se})}break;case"F":var V=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":g=parseInt(D[y].slice(1))-1,++V;break;case"Y":for(p=parseInt(D[y].slice(1))-1,B=b.length;B<=p;++B)b[B]=[];break;case"M":O=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":I=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=D[y].slice(1).split(" "),B=parseInt(S[0],10);B<=parseInt(S[1],10);++B)O=parseInt(S[2],10),E[B-1]=O===0?{hidden:!0}:{wch:O},_0(E[B-1]);break;case"C":g=parseInt(D[y].slice(1))-1,E[g]||(E[g]={});break;case"R":p=parseInt(D[y].slice(1))-1,C[p]||(C[p]={}),O>0?(C[p].hpt=O,C[p].hpx=ev(O)):O===0&&(C[p].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}V<1&&(I=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}}return C.length>0&&(T["!rows"]=C),E.length>0&&(T["!cols"]=E),f&&f.sheetRows&&(b=b.slice(0,f.sheetRows)),[b,T]}function i(h,f){var m=a(h,f),p=m[0],g=m[1],x=Pv(p,f);return Is(g).forEach(function(y){x[y]=g[y]}),x}function o(h,f){return Q0(i(h,f),f)}function c(h,f,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+iD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,f){f.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=Y2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=J2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,f){f.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*Z2(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function A(h,f){var m=["ID;PWXL;N;E"],p=[],g=Bn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var I=g.s.c;I<=g.e.c;++I){var T=Lr({r:w,c:I});x=y?(h[w]||[])[I]:h[T],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,I))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:A}}(),Cre=function(){function t(s,i){switch(i.type){case"base64":return e(jc(s),i);case"binary":return e(s,i);case"buffer":return e(an&&Buffer.isBuffer(s)?s.toString("binary"):U0(s),i);case"array":return e(vp(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,A=[];d!==o.length;++d){if(o[d].trim()==="BOT"){A[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),f=h[0],m=h[1];++d;for(var p=o[d]||"";(p.match(/["]/g)||[]).length&1&&d<o.length-1;)p+=`
`+o[++d];switch(p=p.trim(),+f){case-1:if(p==="BOT"){A[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?A[c][u]=!0:p==="FALSE"?A[c][u]=!1:isNaN(ld(m))?isNaN(Jx(m).getDate())?A[c][u]=m:A[c][u]=Qa(m):A[c][u]=ld(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),A[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(A=A.slice(0,i.sheetRows)),A}function r(s,i){return Pv(t(s,i),i)}function n(s,i){return Q0(r(s,i),i)}var a=function(){var s=function(c,u,d,A,h){c.push(u),c.push(d+","+A),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,A){c.push(u+","+d),c.push(u==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(c){var u=[],d=Bn(c["!ref"]),A,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var f=d.s.r;f<=d.e.r;++f){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Lr({r:f,c:m});if(A=h?(c[f]||[])[m]:c[p],!A){i(u,1,0,"");continue}switch(A.t){case"n":var g=A.w;!g&&A.v!=null&&(g=A.v),g==null?A.f&&!A.F?i(u,1,0,"="+A.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=Su(A.z||Mr[14],Ei(Qa(A.v)))),i(u,0,A.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Ere=function(){function t(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(A,h){for(var f=A.split(`
`),m=-1,p=-1,g=0,x=[];g!==f.length;++g){var y=f[g].trim().split(":");if(y[0]==="cell"){var b=As(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(A,h){return Pv(r(A,h),h)}function a(A,h){return Q0(n(A,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(A){if(!A||!A["!ref"])return"";for(var h=[],f=[],m,p="",g=Wl(A["!ref"]),x=Array.isArray(A),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=Lr({r:y,c:b}),m=x?(A[y]||[])[b]:A[p],!(!m||m.v==null||m.t==="z")){switch(f=["cell",p,"t"],m.t){case"s":case"str":f.push(e(m.v));break;case"n":m.f?(f[2]="vtf",f[3]="n",f[4]=m.v,f[5]=e(m.f)):(f[2]="v",f[3]=m.v);break;case"b":f[2]="vt"+(m.f?"f":"c"),f[3]="nl",f[4]=m.v?"1":"0",f[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Ei(Qa(m.v));f[2]="vtc",f[3]="nd",f[4]=""+w,f[5]=m.w||Su(m.z||Mr[14],w);break;case"e":continue}h.push(f.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(A){return[s,i,o,i,u(A),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Zx=function(){function t(d,A,h,f,m){m.raw?A[h][f]=d:d===""||(d==="TRUE"?A[h][f]=!0:d==="FALSE"?A[h][f]=!1:isNaN(ld(d))?isNaN(Jx(d).getDate())?A[h][f]=d:A[h][f]=Qa(d):A[h][f]=ld(d))}function e(d,A){var h=A||{},f=[];if(!d||d.length===0)return f;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){f[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),f,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),f,y,b,h)}return h.sheetRows&&(f=f.slice(0,h.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var A={},h=!1,f=0,m=0;f<d.length;++f)(m=d.charCodeAt(f))==34?h=!h:!h&&m in r&&(A[m]=(A[m]||0)+1);m=[];for(f in A)Object.prototype.hasOwnProperty.call(A,f)&&m.push([A[f],f]);if(!m.length){A=n;for(f in A)Object.prototype.hasOwnProperty.call(A,f)&&m.push([A[f],f])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,A){var h=A||{},f="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(f=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(f=d.charAt(4),d=d.slice(6)):f=a(d.slice(0,1024)):h&&h.FS?f=h.FS:f=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,I=f.charCodeAt(0),T=!1,C=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var S=h.dateNF!=null?MBe(h.dateNF):null;function O(){var B=d.slice(b,w),P={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)P.t="z";else if(h.raw)P.t="s",P.v=B;else if(B.trim().length===0)P.t="s",P.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(P.t="s",P.v=B.slice(2,-1).replace(/""/g,'"')):fOe(B)?(P.t="n",P.f=B.slice(1)):(P.t="s",P.v=B);else if(B=="TRUE")P.t="b",P.v=!0;else if(B=="FALSE")P.t="b",P.v=!1;else if(!isNaN(y=ld(B)))P.t="n",h.cellText!==!1&&(P.w=B),P.v=y;else if(!isNaN(Jx(B).getDate())||S&&B.match(S)){P.z=h.dateNF||Mr[14];var D=0;S&&B.match(S)&&(B=LBe(B,h.dateNF,B.match(S)||[]),D=1),h.cellDates?(P.t="d",P.v=Qa(B,D)):(P.t="n",P.v=Ei(Qa(B,D))),h.cellText!==!1&&(P.w=Su(P.z,P.v instanceof Date?Ei(P.v):P.v)),h.cellNF||delete P.z}else P.t="s",P.v=B;if(P.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=P):m[Lr({c:x,r:g})]=P),b=w+1,E=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),C==I)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(C=d.charCodeAt(w)){case 34:E===34&&(T=!T);break;case I:case 10:case 13:if(!T&&O())break e;break}return w-b>0&&O(),m["!ref"]=Jr(p),m}function i(d,A){return!(A&&A.PRN)||A.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,A):Pv(e(d,A),A)}function o(d,A){var h="",f=A.type=="string"?[0,0,0,0]:hD(d,A);switch(A.type){case"base64":h=jc(d);break;case"binary":h=d;break;case"buffer":A.codepage==65001?h=d.toString("utf8"):A.codepage&&typeof H2<"u"||(h=an&&Buffer.isBuffer(d)?d.toString("binary"):U0(d));break;case"array":h=vp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+A.type)}return f[0]==239&&f[1]==187&&f[2]==191?h=ca(h.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?h=ca(h):A.type=="binary"&&typeof H2<"u",h.slice(0,19)=="socialcalc:version:"?Ere.to_sheet(A.type=="string"?h:ca(h),A):i(h,A)}function c(d,A){return Q0(o(d,A),A)}function u(d){for(var A=[],h=Bn(d["!ref"]),f,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=Lr({r:p,c:x});if(f=m?(d[p]||[])[x]:d[y],!f||f.v==null){g.push("          ");continue}for(var b=(f.w||(xf(f),f.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}A.push(g.join(""))}return A.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function Zje(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=_re.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Zx.to_workbook(t,e)}}var Wm=function(){function t(k,F,V){if(k){vo(k,k.l||0);for(var M=V.Enum||pe;k.l<k.length;){var L=k.read_shift(2),q=M[L]||M[65535],R=k.read_shift(2),K=k.l+R,Z=q.f&&q.f(k,R,V);if(k.l=K,F(Z,q,L))return}}}function e(k,F){switch(F.type){case"base64":return r(yc(jc(k)),F);case"binary":return r(yc(k),F);case"buffer":case"array":return r(k,F)}throw"Unsupported type "+F.type}function r(k,F){if(!k)return k;var V=F||{},M=V.dense?[]:{},L="Sheet1",q="",R=0,K={},Z=[],te=[],Q={s:{r:0,c:0},e:{r:0,c:0}},ye=V.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)V.Enum=pe,t(k,function(je,ue,Pe){switch(Pe){case 0:V.vers=je,je>=4096&&(V.qpro=!0);break;case 6:Q=je;break;case 204:je&&(q=je);break;case 222:q=je;break;case 15:case 51:V.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:Pe==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=V.dateNF||Mr[14],V.cellDates&&(je[1].t="d",je[1].v=m4(je[1].v))),V.qpro&&je[3]>R&&(M["!ref"]=Jr(Q),K[L]=M,Z.push(L),M=V.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=je[3],L=q||"Sheet"+(R+1),q="");var Ye=V.dense?(M[je[0].r]||[])[je[0].c]:M[Lr(je[0])];if(Ye){Ye.t=je[1].t,Ye.v=je[1].v,je[1].z!=null&&(Ye.z=je[1].z),je[1].f!=null&&(Ye.f=je[1].f);break}V.dense?(M[je[0].r]||(M[je[0].r]=[]),M[je[0].r][je[0].c]=je[1]):M[Lr(je[0])]=je[1];break}},V);else if(k[2]==26||k[2]==14)V.Enum=Se,k[2]==14&&(V.qpro=!0,k.l=0),t(k,function(je,ue,Pe){switch(Pe){case 204:L=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>R&&(M["!ref"]=Jr(Q),K[L]=M,Z.push(L),M=V.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=je[3],L="Sheet"+(R+1)),ye>0&&je[0].r>=ye)break;V.dense?(M[je[0].r]||(M[je[0].r]=[]),M[je[0].r][je[0].c]=je[1]):M[Lr(je[0])]=je[1],Q.e.c<je[0].c&&(Q.e.c=je[0].c),Q.e.r<je[0].r&&(Q.e.r=je[0].r);break;case 27:je[14e3]&&(te[je[14e3][0]]=je[14e3][1]);break;case 1537:te[je[0]]=je[1],je[0]==R&&(L=je[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(M["!ref"]=Jr(Q),K[q||L]=M,Z.push(q||L),!te.length)return{SheetNames:Z,Sheets:K};for(var Y={},z=[],le=0;le<te.length;++le)K[Z[le]]?(z.push(te[le]||Z[le]),Y[te[le]]=K[te[le]]||K[Z[le]]):(z.push(te[le]),Y[te[le]]={"!ref":"A1"});return{SheetNames:z,Sheets:Y}}function n(k,F){var V=F||{};if(+V.codepage>=0&&rd(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var M=ql(),L=Bn(k["!ref"]),q=Array.isArray(k),R=[];or(M,0,s(1030)),or(M,6,c(L));for(var K=Math.min(L.e.r,8191),Z=L.s.r;Z<=K;++Z)for(var te=$s(Z),Q=L.s.c;Q<=L.e.c;++Q){Z===L.s.r&&(R[Q]=ds(Q));var ye=R[Q]+te,Y=q?(k[Z]||[])[Q]:k[ye];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?or(M,13,f(Z,Q,Y.v)):or(M,14,p(Z,Q,Y.v));else{var z=xf(Y);or(M,15,A(Z,Q,z.slice(0,239)))}}return or(M,1),M.end()}function a(k,F){var V=F||{};if(+V.codepage>=0&&rd(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var M=ql();or(M,0,i(k));for(var L=0,q=0;L<k.SheetNames.length;++L)(k.Sheets[k.SheetNames[L]]||{})["!ref"]&&or(M,27,X(k.SheetNames[L],q++));var R=0;for(L=0;L<k.SheetNames.length;++L){var K=k.Sheets[k.SheetNames[L]];if(!(!K||!K["!ref"])){for(var Z=Bn(K["!ref"]),te=Array.isArray(K),Q=[],ye=Math.min(Z.e.r,8191),Y=Z.s.r;Y<=ye;++Y)for(var z=$s(Y),le=Z.s.c;le<=Z.e.c;++le){Y===Z.s.r&&(Q[le]=ds(le));var je=Q[le]+z,ue=te?(K[Y]||[])[le]:K[je];if(!(!ue||ue.t=="z"))if(ue.t=="n")or(M,23,O(Y,le,R,ue.v));else{var Pe=xf(ue);or(M,22,C(Y,le,R,Pe.slice(0,239)))}}++R}}return or(M,1),M.end()}function s(k){var F=Ot(2);return F.write_shift(2,k),F}function i(k){var F=Ot(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var V=0,M=0,L=0,q=0;q<k.SheetNames.length;++q){var R=k.SheetNames[q],K=k.Sheets[R];if(!(!K||!K["!ref"])){++L;var Z=Wl(K["!ref"]);V<Z.e.r&&(V=Z.e.r),M<Z.e.c&&(M=Z.e.c)}}return V>8191&&(V=8191),F.write_shift(2,V),F.write_shift(1,L),F.write_shift(1,M),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function o(k,F,V){var M={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&V.qpro?(M.s.c=k.read_shift(1),k.l++,M.s.r=k.read_shift(2),M.e.c=k.read_shift(1),k.l++,M.e.r=k.read_shift(2),M):(M.s.c=k.read_shift(2),M.s.r=k.read_shift(2),F==12&&V.qpro&&(k.l+=2),M.e.c=k.read_shift(2),M.e.r=k.read_shift(2),F==12&&V.qpro&&(k.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(k){var F=Ot(8);return F.write_shift(2,k.s.c),F.write_shift(2,k.s.r),F.write_shift(2,k.e.c),F.write_shift(2,k.e.r),F}function u(k,F,V){var M=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(M[0].c=k.read_shift(1),M[3]=k.read_shift(1),M[0].r=k.read_shift(2),k.l+=2):(M[2]=k.read_shift(1),M[0].c=k.read_shift(2),M[0].r=k.read_shift(2)),M}function d(k,F,V){var M=k.l+F,L=u(k,F,V);if(L[1].t="s",V.vers==20768){k.l++;var q=k.read_shift(1);return L[1].v=k.read_shift(q,"utf8"),L}return V.qpro&&k.l++,L[1].v=k.read_shift(M-k.l,"cstr"),L}function A(k,F,V){var M=Ot(7+V.length);M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(1,39);for(var L=0;L<M.length;++L){var q=V.charCodeAt(L);M.write_shift(1,q>=128?95:q)}return M.write_shift(1,0),M}function h(k,F,V){var M=u(k,F,V);return M[1].v=k.read_shift(2,"i"),M}function f(k,F,V){var M=Ot(7);return M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(2,V,"i"),M}function m(k,F,V){var M=u(k,F,V);return M[1].v=k.read_shift(8,"f"),M}function p(k,F,V){var M=Ot(13);return M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(8,V,"f"),M}function g(k,F,V){var M=k.l+F,L=u(k,F,V);if(L[1].v=k.read_shift(8,"f"),V.qpro)k.l=M;else{var q=k.read_shift(2);w(k.slice(k.l,k.l+q),L),k.l+=q}return L}function x(k,F,V){var M=F&32768;return F&=-32769,F=(M?k:0)+(F>=8192?F-16384:F),(M?"":"$")+(V?ds(F):$s(F))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(k,F){vo(k,0);for(var V=[],M=0,L="",q="",R="",K="";k.l<k.length;){var Z=k[k.l++];switch(Z){case 0:V.push(k.read_shift(8,"f"));break;case 1:q=x(F[0].c,k.read_shift(2),!0),L=x(F[0].r,k.read_shift(2),!1),V.push(q+L);break;case 2:{var te=x(F[0].c,k.read_shift(2),!0),Q=x(F[0].r,k.read_shift(2),!1);q=x(F[0].c,k.read_shift(2),!0),L=x(F[0].r,k.read_shift(2),!1),V.push(te+Q+":"+q+L)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(k.read_shift(2));break;case 6:{for(var ye="";Z=k[k.l++];)ye+=String.fromCharCode(Z);V.push('"'+ye.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:K=V.pop(),R=V.pop(),V.push(["AND","OR"][Z-20]+"("+R+","+K+")");break;default:if(Z<32&&b[Z])K=V.pop(),R=V.pop(),V.push(R+b[Z]+K);else if(y[Z]){if(M=y[Z][1],M==69&&(M=k[k.l++]),M>V.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+V.join("|")+"|");return}var Y=V.slice(-M);V.length-=M,V.push(y[Z][0]+"("+Y.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}V.length==1?F[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function I(k){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=k.read_shift(2),F[3]=k[k.l++],F[0].c=k[k.l++],F}function T(k,F){var V=I(k);return V[1].t="s",V[1].v=k.read_shift(F-4,"cstr"),V}function C(k,F,V,M){var L=Ot(6+M.length);L.write_shift(2,k),L.write_shift(1,V),L.write_shift(1,F),L.write_shift(1,39);for(var q=0;q<M.length;++q){var R=M.charCodeAt(q);L.write_shift(1,R>=128?95:R)}return L.write_shift(1,0),L}function E(k,F){var V=I(k);V[1].v=k.read_shift(2);var M=V[1].v>>1;if(V[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return V[1].v=M,V}function S(k,F){var V=I(k),M=k.read_shift(4),L=k.read_shift(4),q=k.read_shift(2);if(q==65535)return M===0&&L===3221225472?(V[1].t="e",V[1].v=15):M===0&&L===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var R=q&32768;return q=(q&32767)-16446,V[1].v=(1-R*2)*(L*Math.pow(2,q+32)+M*Math.pow(2,q)),V}function O(k,F,V,M){var L=Ot(14);if(L.write_shift(2,k),L.write_shift(1,V),L.write_shift(1,F),M==0)return L.write_shift(4,0),L.write_shift(4,0),L.write_shift(2,65535),L;var q=0,R=0,K=0,Z=0;return M<0&&(q=1,M=-M),R=Math.log2(M)|0,M/=Math.pow(2,R-31),Z=M>>>0,Z&2147483648||(M/=2,++R,Z=M>>>0),M-=Z,Z|=2147483648,Z>>>=0,M*=Math.pow(2,32),K=M>>>0,L.write_shift(4,K),L.write_shift(4,Z),R+=16383+(q?32768:0),L.write_shift(2,R),L}function B(k,F){var V=S(k);return k.l+=F-14,V}function P(k,F){var V=I(k),M=k.read_shift(4);return V[1].v=M>>6,V}function D(k,F){var V=I(k),M=k.read_shift(8,"f");return V[1].v=M,V}function W(k,F){var V=D(k);return k.l+=F-10,V}function Ae(k,F){return k[k.l+F-1]==0?k.read_shift(F,"cstr"):""}function ee(k,F){var V=k[k.l++];V>F-1&&(V=F-1);for(var M="";M.length<V;)M+=String.fromCharCode(k[k.l++]);return M}function ce(k,F,V){if(!(!V.qpro||F<21)){var M=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var L=k.read_shift(F-21,"cstr");return[M,L]}}function de(k,F){for(var V={},M=k.l+F;k.l<M;){var L=k.read_shift(2);if(L==14e3){for(V[L]=[0,""],V[L][0]=k.read_shift(2);k[k.l];)V[L][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return V}function X(k,F){var V=Ot(5+k.length);V.write_shift(2,14e3),V.write_shift(2,F);for(var M=0;M<k.length;++M){var L=k.charCodeAt(M);V[V.l++]=L>127?95:L}return V[V.l++]=0,V}var pe={0:{n:"BOF",f:Xs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},Se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:de},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function eke(t){var e={},r=t.match(rl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Ur(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=P6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var tke=function(){var t=G2("t"),e=G2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:In(i[1])},c=s.match(e);return c&&(o.s=eke(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),rke=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),nke=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ake=/<(?:\w+:)?r>/,ske=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function tD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=In(ca(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ca(t),r&&(n.h=Q6(n.t))):t.match(ake)&&(n.r=ca(t),n.t=In(ca((t.replace(ske,"").match(nke)||[]).join("").replace(rl,""))),r&&(n.h=rke(tke(n.r)))),n):{t:""}}var ike=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,oke=/<(?:\w+:)?(?:si|sstItem)>/g,lke=/<\/(?:\w+:)?(?:si|sstItem)>/;function cke(t,e){var r=[],n="";if(!t)return r;var a=t.match(ike);if(a){n=a[2].replace(oke,"").split(lke);for(var s=0;s!=n.length;++s){var i=tD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Ur(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var uke=/^\s|\s$|[\t\n\r]/;function Sre(t,e){if(!e.bookSST)return"";var r=[Gs];r[r.length]=ir("sst",null,{xmlns:Hp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(uke)&&(s+=' xml:space="preserve"'),s+=">"+ra(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function dke(t){return[t.read_shift(4),t.read_shift(4)]}function Ake(t,e){var r=[],n=!1;return Pf(t,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function fke(t,e){return e||(e=Ot(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var hke=_Te;function mke(t){var e=ql();Gt(e,159,fke(t));for(var r=0;r<t.length;++r)Gt(e,19,hke(t[r]));return Gt(e,160),e.end()}function Ire(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function of(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function pke(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=of(t,4),e.U=of(t,4),e.W=of(t,4),e}function gke(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function xke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(gke(t));return e}function vke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function yke(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=of(t,4),e.U=of(t,4),e.W=of(t,4),e}function bke(t){var e=yke(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Bre(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Tre(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function wke(t){var e=of(t);switch(e.Minor){case 2:return[e.Minor,Nke(t)];case 3:return[e.Minor,_ke()];case 4:return[e.Minor,Cke(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Nke(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Bre(t,r),a=Tre(t,t.length-t.l);return{t:"Std",h:n,v:a}}function _ke(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Cke(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(rl,function(s){var i=Ur(s);switch(fA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Eke(t,e){var r={},n=r.EncryptionVersionInfo=of(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Bre(t,a),e-=a,r.EncryptionVerifier=Tre(t,e),r}function Ske(t){var e={},r=e.EncryptionVersionInfo=of(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function rD(t){var e=0,r,n=Ire(t),a=n.length+1,s,i,o,c,u;for(r=N0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=e&16384?1:0,c=e<<1&32767,u=o|c,e=u^i;return e^52811}var Pre=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],A=0;A!=7;++A)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=Ire(i),c=s(o),u=o.length,d=N0(16),A=0;A!=16;++A)d[A]=0;var h,f,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,f=o[o.length-1],d[u]=a(f,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,m=15-o.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(o[u],h),--u,--m;return d}}(),Ike=function(t,e,r,n,a){a||(a=e),n||(n=Pre(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Bke=function(t){var e=0,r=Pre(t);return function(n){var a=Ike("",n,e,r);return e=a[1],a[0]}};function Tke(t,e,r,n){var a={key:Xs(t),verificationBytes:Xs(t)};return r.password&&(a.verifier=rD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Bke(r.password)),a}function Pke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Ske(t):n.Data=Eke(t,e),n}function jke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Pke(t,e-2,n):Tke(t,r.biff>=8?e:e-2,r,n),n}var jre=function(){function t(a,s){switch(s.type){case"base64":return e(jc(a),s);case"binary":return e(a,s);case"buffer":return e(an&&Buffer.isBuffer(a)?a.toString("binary"):U0(a),s);case"array":return e(vp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,A){Array.isArray(o)&&(o[A]=[]);for(var h=/\\\w+\b/g,f=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(f,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(o)?o[A][p]=x:o[Lr({r:A,c:p})]=x}break}f=h.lastIndex}p>u.e.c&&(u.e.c=p)}),o["!ref"]=Jr(u),o}function r(a,s){return Q0(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Bn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var A=Lr({r:u,c:d});o=c?(a[u]||[])[d]:a[A],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(xf(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function kke(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function X2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Fke(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,c,u/2]}function Oke(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*e,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function nS(t,e){if(e===0)return t;var r=Fke(kke(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),X2(Oke(r))}var kre=6,Dke=15,Rke=1,qo=kre;function Y2(t){return Math.floor((t+Math.round(128/qo)/256)*qo)}function J2(t){return Math.floor((t-5)/qo*100+.5)/100}function aS(t){return Math.round((t*qo+5)/qo*256)/256}function VB(t){return aS(J2(Y2(t)))}function nD(t){var e=Math.abs(t-VB(t)),r=qo;if(e>.005)for(qo=Rke;qo<Dke;++qo)Math.abs(t-VB(t))<=e&&(e=Math.abs(t-VB(t)),r=qo);qo=r}function _0(t){t.width?(t.wpx=Y2(t.width),t.wch=J2(t.wpx),t.MDW=qo):t.wpx?(t.wch=J2(t.wpx),t.width=aS(t.wch),t.MDW=qo):typeof t.wch=="number"&&(t.width=aS(t.wch),t.wpx=Y2(t.width),t.MDW=qo),t.customWidth&&delete t.customWidth}var Mke=96,Fre=Mke;function Z2(t){return t*96/Fre}function ev(t){return t*Fre/96}var Lke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Uke(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(rl)||[]).forEach(function(i){var o=Ur(i);switch(fA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ra(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ra(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function Qke(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(rl)||[]).forEach(function(i){var o=Ur(i);switch(fA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function Vke(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(rl)||[]).forEach(function(i){var o=Ur(i);switch(fA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=ca(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ra(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ra(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ra(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ra(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ra(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ra(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ra(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=P6[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ra(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=zm[a.color.index];a.color.index==81&&(c=zm[1]),c||(c=zm[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=nS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Hke(t,e,r){e.NumberFmt=[];for(var n=Is(Mr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=Mr[n[a]];var s=t[0].match(rl);if(s)for(a=0;a<s.length;++a){var i=Ur(s[a]);switch(fA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=In(ca(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=o}sf(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function $ke(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=ir("numFmt",null,{numFmtId:n,formatCode:ra(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ir("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var f_=["numFmtId","fillId","fontId","borderId","xfId"],h_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Kke(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(rl)||[]).forEach(function(s){var i=Ur(s),o=0;switch(fA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<f_.length;++o)n[f_[o]]&&(n[f_[o]]=parseInt(n[f_[o]],10));for(o=0;o<h_.length;++o)n[h_[o]]&&(n[h_[o]]=Ra(n[h_[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ra(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Gke(t){var e=[];return e[e.length]=ir("cellXfs",null),t.forEach(function(r){e[e.length]=ir("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ir("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var zke=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=o.match(e))&&Hke(A,d,u),(A=o.match(a))&&Vke(A,d,c,u),(A=o.match(n))&&Qke(A,d,c,u),(A=o.match(s))&&Uke(A,d,c,u),(A=o.match(r))&&Kke(A,d,u),d}}();function Ore(t,e){var r=[Gs,ir("styleSheet",null,{xmlns:Hp[0],"xmlns:vt":bi.vt})],n;return t.SSF&&(n=$ke(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Gke(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function qke(t,e){var r=t.read_shift(2),n=Yo(t);return[r,n]}function Wke(t,e,r){r||(r=Ot(6+4*e.length)),r.write_shift(2,t),Gi(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Xke(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=PTe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=TTe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Yo(t),n}function Yke(t,e){e||(e=Ot(25+4*32)),e.write_shift(2,t.sz*20),jTe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),eS(t.color,e);var n=0;return n=2,e.write_shift(1,n),Gi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Jke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],HB,Zke=el;function oH(t,e){e||(e=Ot(4*3+8*7+16*1)),HB||(HB=f4(Jke));var r=HB[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(eS({auto:1},e),eS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function eFe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Dre(t,e,r){r||(r=Ot(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function R1(t,e){return e||(e=Ot(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var tFe=el;function rFe(t,e){return e||(e=Ot(51)),e.write_shift(1,0),R1(null,e),R1(null,e),R1(null,e),R1(null,e),R1(null,e),e.length>e.l?e.slice(0,e.l):e}function nFe(t,e){return e||(e=Ot(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),ZE(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function aFe(t,e,r){var n=Ot(2052);return n.write_shift(4,t),ZE(e,n),ZE(r,n),n.length>n.l?n.slice(0,n.l):n}function sFe(t,e,r){var n={};n.NumberFmt=[];for(var a in Mr)n.NumberFmt[a]=Mr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Pf(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],sf(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=nS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function iFe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Gt(t,615,cd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Gt(t,44,Wke(a,e[a]))}),Gt(t,616))}}function oFe(t){var e=1;Gt(t,611,cd(e)),Gt(t,43,Yke({sz:12,color:{theme:1},name:"Calibri",family:2})),Gt(t,612)}function lFe(t){var e=2;Gt(t,603,cd(e)),Gt(t,45,oH({patternType:"none"})),Gt(t,45,oH({patternType:"gray125"})),Gt(t,604)}function cFe(t){var e=1;Gt(t,613,cd(e)),Gt(t,46,rFe()),Gt(t,614)}function uFe(t){var e=1;Gt(t,626,cd(e)),Gt(t,47,Dre({numFmtId:0},65535)),Gt(t,627)}function dFe(t,e){Gt(t,617,cd(e.length)),e.forEach(function(r){Gt(t,47,Dre(r,0))}),Gt(t,618)}function AFe(t){var e=1;Gt(t,619,cd(e)),Gt(t,48,nFe({xfId:0,name:"Normal"})),Gt(t,620)}function fFe(t){var e=0;Gt(t,505,cd(e)),Gt(t,506)}function hFe(t){var e=0;Gt(t,508,aFe(e,"TableStyleMedium9","PivotStyleMedium4")),Gt(t,509)}function mFe(t,e){var r=ql();return Gt(r,278),iFe(r,t.SSF),oFe(r),lFe(r),cFe(r),uFe(r),dFe(r,e.cellXfs),AFe(r),fFe(r),hFe(r),Gt(r,279),r.end()}var pFe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function gFe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(rl)||[]).forEach(function(a){var s=Ur(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[pFe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function xFe(){}function vFe(){}var yFe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,bFe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,wFe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function NFe(t,e,r){e.themeElements={};var n;[["clrScheme",yFe,gFe],["fontScheme",bFe,xFe],["fmtScheme",wFe,vFe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var _Fe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Rre(t,e){(!t||t.length===0)&&(t=aD());var r,n={};if(!(r=t.match(_Fe)))throw new Error("themeElements not found in theme");return NFe(r[0],n,e),n.raw=t,n}function aD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Gs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function CFe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=Bte(s,{type:"array"})}catch{return}var o=bc(i,"theme/theme/theme1.xml",!0);if(o)return Rre(o,r)}}function EFe(t){return t.read_shift(4)}function SFe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=IFe(t,4);break;case 2:e.xclrValue=pre(t);break;case 3:e.xclrValue=EFe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function IFe(t,e){return el(t,e)}function BFe(t,e){return el(t,e)}function TFe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=SFe(t);break;case 6:n[1]=BFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function PFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(TFe(t,r-t.l));return{ixfe:n,ext:s}}function jFe(t,e){e.forEach(function(r){switch(r[0]){}})}function kFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Yo(t)}}function FFe(t){var e=Ot(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Gi(t.name,e),e.slice(0,e.l)}function OFe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function DFe(t){var e=Ot(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function RFe(t,e){var r=Ot(8+2*e.length);return r.write_shift(4,t),Gi(e,r),r.slice(0,r.l)}function MFe(t){return t.l+=4,t.read_shift(4)!=0}function LFe(t,e){var r=Ot(8);return r.write_shift(4,t),r.write_shift(4,1),r}function UFe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Pf(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(A){o==1?n.Cell.push({type:n.Types[A[0]-1].name,index:A[1]}):o==0&&n.Value.push({type:n.Types[A[0]-1].name,index:A[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function QFe(){var t=ql();return Gt(t,332),Gt(t,334,cd(1)),Gt(t,335,FFe({name:"XLDAPR",version:12e4,flags:3496657072})),Gt(t,336),Gt(t,339,RFe(1,"XLDAPR")),Gt(t,52),Gt(t,35,cd(514)),Gt(t,4096,cd(0)),Gt(t,4097,uu(1)),Gt(t,36),Gt(t,53),Gt(t,340),Gt(t,337,LFe(1)),Gt(t,51,DFe([[1,0]])),Gt(t,338),Gt(t,333),t.end()}function VFe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(rl,function(o){var c=Ur(o);switch(fA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Mre(){var t=[Gs];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function HFe(t){var e=[];if(!t)return e;var r=1;return(t.match(rl)||[]).forEach(function(n){var a=Ur(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function $Fe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Lr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function KFe(t,e,r){var n=[];return Pf(t,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function GFe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;Pf(t,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function zFe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var fx=1024;function Lre(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[ir("xml",null,{"xmlns:v":xc.v,"xmlns:o":xc.o,"xmlns:x":xc.x,"xmlns:mv":xc.mv}).replace(/\/>/,">"),ir("o:shapelayout",ir("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ir("v:shapetype",[ir("v:stroke",null,{joinstyle:"miter"}),ir("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];fx<t*1e3;)fx+=1e3;return e.forEach(function(s){var i=As(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?ir("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ir("v:fill",c,o),d={on:"t",obscured:"t"};++fx,a=a.concat(["<v:shape"+z2({id:"_x0000_s"+fx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ir("v:shadow",null,d),ir("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",bo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),bo("x:AutoFill","False"),bo("x:Row",String(i.r)),bo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function lH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var o=As(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var c=Bn(t["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Jr(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var A=s.c.length-1;A>=0;--A){if(!r&&s.c[A].T)return;r&&!s.c[A].T&&s.c.splice(A,1)}if(r&&n){for(A=0;A<n.length;++A)if(d.a==n[A].id){d.a=n[A].name||d.a;break}}s.c.push(d)})}function qFe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Ur(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=As(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var A=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!A&&!!A[1]&&tD(A[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Ure(t){var e=[Gs,ir("comments",null,{xmlns:Hp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ra(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ra(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(bo("t",ra(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(bo("t",ra(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function WFe(t,e){var r=[],n=!1,a={},s=0;return t.replace(rl,function(o,c){var u=Ur(o);switch(fA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function XFe(t,e,r){var n=[Gs,ir("ThreadedComments",null,{xmlns:bi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(ir("threadedComment",bo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function YFe(t,e){var r=[],n=!1;return t.replace(rl,function(s){var i=Ur(s);switch(fA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function JFe(t){var e=[Gs,ir("personList",null,{xmlns:bi.TCMNT,"xmlns:x":Hp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(ir("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function ZFe(t){var e={};e.iauthor=t.read_shift(4);var r=zp(t);return e.rfx=r.s,e.ref=Lr(r.s),t.l+=16,e}function eOe(t,e){return e==null&&(e=Ot(36)),e.write_shift(4,t[1].iauthor),jv(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var tOe=Yo;function rOe(t){return Gi(t.slice(0,54))}function nOe(t,e){var r=[],n=[],a={},s=!1;return Pf(t,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function aOe(t){var e=ql(),r=[];return Gt(e,628),Gt(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Gt(e,632,rOe(a.a)))})}),Gt(e,631),Gt(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:As(n[0]),e:As(n[0])};Gt(e,635,eOe([s,a])),a.t&&a.t.length>0&&Gt(e,637,ETe(a)),Gt(e,636),delete a.iauthor})}),Gt(e,634),Gt(e,629),e.end()}var sOe="application/vnd.ms-office.vbaProject";function iOe(t){var e=kr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");kr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),kr.write(e)}function oOe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&kr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Qre=["xlsb","xlsm","xlam","biff8","xla"];function lOe(){return{"!type":"dialog"}}function cOe(){return{"!type":"dialog"}}function uOe(){return{"!type":"macro"}}function dOe(){return{"!type":"macro"}}var Bx=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,c?u+=e.r:--u,a+(o?"":"$")+ds(d)+(c?"":"$")+$s(u)}return function(a,s){return e=s,a.replace(t,r)}}(),sD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,iD=function(){return function(e,r){return e.replace(sD,function(n,a,s,i,o,c){var u=G6(i)-(s?0:r.c),d=K6(c)-(o?0:r.r),A=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+A+"C"+h})}}();function Vre(t,e){return t.replace(sD,function(r,n,a,s,i,o){return n+(a=="$"?a+s:ds(G6(s)+e.c))+(i=="$"?i+o:$s(K6(o)+e.r))})}function AOe(t,e,r){var n=Wl(e),a=n.s,s=As(r),i={r:s.r-a.r,c:s.c-a.c};return Vre(t,i)}function fOe(t){return t.length!=1}function cH(t){return t.replace(/_xlfn\./g,"")}function zs(t){t.l+=1}function C0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Hre(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return $re(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=C0(t),o=C0(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function $re(t){var e=C0(t),r=C0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function hOe(t,e,r){if(r.biff<8)return $re(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=C0(t),i=C0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Kre(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return mOe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=C0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function mOe(t){var e=C0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function pOe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function gOe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return xOe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function xOe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function vOe(t,e,r){var n=(t[t.l++]&96)>>5,a=Hre(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function yOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=Hre(t,s,r);return[n,a,i]}function bOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function wOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function NOe(t,e,r){var n=(t[t.l++]&96)>>5,a=hOe(t,e-1,r);return[n,a]}function _Oe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function uH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function COe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function EOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function SOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function IOe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function BOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Gre(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function TOe(t){return t.read_shift(2),Gre(t)}function POe(t){return t.read_shift(2),Gre(t)}function jOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Kre(t,0,r);return[n,a]}function kOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=gOe(t,0,r);return[n,a]}function FOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Kre(t,0,r);return[n,a,s]}function OOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[M6e[a],Wre[a],n]}function DOe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:ROe(t);return[a,(s[0]===0?Wre:R6e)[s[1]]]}function ROe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function MOe(t,e,r){t.l+=r&&r.biff==2?3:4}function LOe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function UOe(t){return t.l++,jf[t.read_shift(1)]}function QOe(t){return t.l++,t.read_shift(2)}function VOe(t){return t.l++,t.read_shift(1)!==0}function HOe(t){return t.l++,Wo(t)}function $Oe(t,e,r){return t.l++,Yb(t,e-1,r)}function KOe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ds(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=jf[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Wo(t);break;case 2:r[1]=qp(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function GOe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?zp:p4)(t));return a}function zOe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=KOe(t,r.biff);return i}function qOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function WOe(t,e,r){if(r.biff==5)return XOe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function XOe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function YOe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function JOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function ZOe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function e6e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var t6e=el,r6e=el,n6e=el;function Zb(t,e,r){return t.l+=2,[pOe(t)]}function oD(t){return t.l+=6,[]}var a6e=Zb,s6e=oD,i6e=oD,o6e=Zb;function zre(t){return t.l+=2,[Xs(t),t.read_shift(2)&1]}var l6e=Zb,c6e=zre,u6e=oD,d6e=Zb,A6e=Zb,f6e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function h6e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=f6e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function m6e(t){return t.l+=2,[t.read_shift(4)]}function p6e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function g6e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function x6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function v6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function y6e(t){return t.l+=4,[0,0]}var dH={1:{n:"PtgExp",f:LOe},2:{n:"PtgTbl",f:n6e},3:{n:"PtgAdd",f:zs},4:{n:"PtgSub",f:zs},5:{n:"PtgMul",f:zs},6:{n:"PtgDiv",f:zs},7:{n:"PtgPower",f:zs},8:{n:"PtgConcat",f:zs},9:{n:"PtgLt",f:zs},10:{n:"PtgLe",f:zs},11:{n:"PtgEq",f:zs},12:{n:"PtgGe",f:zs},13:{n:"PtgGt",f:zs},14:{n:"PtgNe",f:zs},15:{n:"PtgIsect",f:zs},16:{n:"PtgUnion",f:zs},17:{n:"PtgRange",f:zs},18:{n:"PtgUplus",f:zs},19:{n:"PtgUminus",f:zs},20:{n:"PtgPercent",f:zs},21:{n:"PtgParen",f:zs},22:{n:"PtgMissArg",f:zs},23:{n:"PtgStr",f:$Oe},26:{n:"PtgSheet",f:p6e},27:{n:"PtgEndSheet",f:g6e},28:{n:"PtgErr",f:UOe},29:{n:"PtgBool",f:VOe},30:{n:"PtgInt",f:QOe},31:{n:"PtgNum",f:HOe},32:{n:"PtgArray",f:_Oe},33:{n:"PtgFunc",f:OOe},34:{n:"PtgFuncVar",f:DOe},35:{n:"PtgName",f:qOe},36:{n:"PtgRef",f:jOe},37:{n:"PtgArea",f:vOe},38:{n:"PtgMemArea",f:YOe},39:{n:"PtgMemErr",f:t6e},40:{n:"PtgMemNoMem",f:r6e},41:{n:"PtgMemFunc",f:JOe},42:{n:"PtgRefErr",f:ZOe},43:{n:"PtgAreaErr",f:bOe},44:{n:"PtgRefN",f:kOe},45:{n:"PtgAreaN",f:NOe},46:{n:"PtgMemAreaN",f:x6e},47:{n:"PtgMemNoMemN",f:v6e},57:{n:"PtgNameX",f:WOe},58:{n:"PtgRef3d",f:FOe},59:{n:"PtgArea3d",f:yOe},60:{n:"PtgRefErr3d",f:e6e},61:{n:"PtgAreaErr3d",f:wOe},255:{}},b6e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},w6e={1:{n:"PtgElfLel",f:zre},2:{n:"PtgElfRw",f:d6e},3:{n:"PtgElfCol",f:a6e},6:{n:"PtgElfRwV",f:A6e},7:{n:"PtgElfColV",f:o6e},10:{n:"PtgElfRadical",f:l6e},11:{n:"PtgElfRadicalS",f:u6e},13:{n:"PtgElfColS",f:s6e},15:{n:"PtgElfColSV",f:i6e},16:{n:"PtgElfRadicalLel",f:c6e},25:{n:"PtgList",f:h6e},29:{n:"PtgSxName",f:m6e},255:{}},N6e={0:{n:"PtgAttrNoop",f:y6e},1:{n:"PtgAttrSemi",f:BOe},2:{n:"PtgAttrIf",f:SOe},4:{n:"PtgAttrChoose",f:COe},8:{n:"PtgAttrGoto",f:EOe},16:{n:"PtgAttrSum",f:MOe},32:{n:"PtgAttrBaxcel",f:uH},33:{n:"PtgAttrBaxcel",f:uH},64:{n:"PtgAttrSpace",f:TOe},65:{n:"PtgAttrSpaceSemi",f:POe},128:{n:"PtgAttrIfError",f:IOe},255:{}};function ew(t,e,r,n){if(n.biff<8)return el(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=zOe(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=GOe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(el(t,e)),s}function tw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=dH[s]||dH[b6e[s]],(s===24||s===25)&&(a=(s===24?w6e:N6e)[t[t.l+1]]),!a||!a.f?el(t,e):i.push([a.n,a.f(t,e,r)]);return i}function _6e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var C6e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function E6e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function qre(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function AH(t,e,r){var n=qre(t,e,r);return n=="#REF"?n:E6e(n,r)}function Go(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,A=0,h=0,f,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Cs(" ",t[0][p][1][1]);break;case 1:g=Cs("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}o.push(u+C6e[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=zy(b[1][1],i,a),o.push(qy(d,s));break;case"PtgRefN":d=r?zy(b[1][1],r,a):b[1][1],o.push(qy(d,s));break;case"PtgRef3d":A=b[1][1],d=zy(b[1][2],i,a),m=AH(n,A,a),o.push(m+"!"+qy(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],I=b[1][1];w||(w=0),w&=127;var T=w==0?[]:o.slice(-w);o.length-=w,I==="User"&&(I=T.shift()),o.push(I+"("+T.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":f=QV(b[1][1],r?{s:r}:i,a),o.push(LB(f,a));break;case"PtgArea":f=QV(b[1][1],i,a),o.push(LB(f,a));break;case"PtgArea3d":A=b[1][1],f=b[1][2],m=AH(n,A,a),o.push(m+"!"+LB(f,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var C=(n.names||[])[h-1]||(n[0]||[])[h],E=C?C.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var S=b[1][1];h=b[1][2];var O;if(a.biff<=5)S<0&&(S=-S),n[S]&&(O=n[S][h]);else{var B="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][h]&&n[S][h].itab>0&&(B=n.SheetNames[n[S][h].itab-1]+"!"):B=n.SheetNames[h-1]+"!"),n[S]&&n[S][h])B+=n[S][h].Name;else if(n[0]&&n[0][h])B+=n[0][h].Name;else{var P=(qre(n,S,a)||"").split(";;");P[h-1]?B=P[h-1]:B+="SH33TJSERRX"}o.push(B);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var D="(",W=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:D=Cs(" ",t[0][p][1][1])+D;break;case 3:D=Cs("\r",t[0][p][1][1])+D;break;case 4:W=Cs(" ",t[0][p][1][1])+W;break;case 5:W=Cs("\r",t[0][p][1][1])+W;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}o.push(D+o.pop()+W);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Ae={c:r.c,r:r.r};if(n.sharedf[Lr(d)]){var ee=n.sharedf[Lr(d)];o.push(Go(ee,i,Ae,n,a))}else{var ce=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Go(u[1],i,Ae,n,a)),ce=!0;break}ce||o.push(b[1])}break;case"PtgArray":o.push("{"+_6e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var de=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&de.indexOf(t[0][x][0])==-1){b=t[0][p];var X=!0;switch(b[1][0]){case 4:X=!1;case 0:g=Cs(" ",b[1][1]);break;case 5:X=!1;case 1:g=Cs("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((X?g:"")+o.pop()+(X?"":g)),p=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function S6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],el(t,e-2)];var o=tw(t,i,r);return e!==i+a&&(s=ew(t,e-i-a,o,r)),t.l=n,[o,s]}function I6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],el(t,e-2)];var o=tw(t,i,r);return e!==i+a&&(s=ew(t,e-i-a,o,r)),t.l=n,[o,s]}function B6e(t,e,r,n){var a=t.l+e,s=tw(t,n,r),i;return a!==t.l&&(i=ew(t,a-t.l,s,r)),[s,i]}function T6e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=tw(t,s,r);return s==65535?[[],el(t,e-2)]:(e!==s+2&&(a=ew(t,n-s-2,i,r)),[i,a])}function P6e(t){var e;if(qA(t,t.l+6)!==65535)return[Wo(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function j6e(t){if(t==null){var e=Ot(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return yp(t);return yp(0)}function $B(t,e,r){var n=t.l+e,a=hA(t);r.biff==2&&++t.l;var s=P6e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=I6e(t,n-t.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function k6e(t,e,r,n,a){var s=wp(e,r,a),i=j6e(t.v),o=Ot(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ot(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var A=$i([s,i,o,u]);return A}function g4(t,e,r){var n=t.read_shift(4),a=tw(t,n,r),s=t.read_shift(4),i=s>0?ew(t,s,a,r):null;return[a,i]}var F6e=g4,x4=g4,O6e=g4,D6e=g4,R6e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Wre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},M6e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function fH(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function L6e(t){var e="of:="+t.replace(sD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function KB(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function U6e(t){return t.replace(/\./,"!")}var Xy={},Tx={},Yy=typeof Map<"u";function lD(t,e,r){var n=0,a=t.length;if(r){if(Yy?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Yy?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Yy?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function v4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(qo=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=J2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=aS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Xm(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function V0(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){sf(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Xre(t,e,r,n,a,s){try{n.cellNF&&(t.z=Mr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Qa(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Mr[e]==null&&sf(RBe[e]||"General",e),t.t==="e")t.w=t.w||jf[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K2(t.v);else if(t.t==="d"){var i=Ei(t.v);(i|0)===i?t.w=i.toString(10):t.w=K2(i)}else{if(t.v===void 0)return"";t.w=xp(t.v,Tx)}else t.t==="d"?t.w=Su(e,Ei(t.v),Tx):t.w=Su(e,t.v,Tx)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=nS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=nS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function Q6e(t,e,r){if(t&&t["!ref"]){var n=Bn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function V6e(t,e){var r=Bn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Jr(r))}var H6e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,$6e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,K6e=/<(?:\w:)?hyperlink [^>]*>/mg,G6e=/"(\w*:\w*)"/,z6e=/<(?:\w:)?col\b[^>]*[\/]?>/g,q6e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,W6e=/<(?:\w:)?pageMargins[^>]*\/>/g,Yre=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,X6e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Y6e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function J6e(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",A=t.match($6e);A?(u=t.slice(0,A.index),d=t.slice(A.index+A[0].length)):u=d=t;var h=u.match(Yre);h?cD(h[0],o,a,r):(h=u.match(X6e))&&eDe(h[0],h[1]||"",o,a,r);var f=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var m=u.slice(f,f+50).match(G6e);m&&V6e(o,m[1])}var p=u.match(Y6e);p&&p[1]&&fDe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(z6e);x&&lDe(g,x)}A&&pDe(A[1],o,e,c,s,i);var y=d.match(q6e);y&&(o["!autofilter"]=uDe(y[0]));var b=[],w=d.match(H6e);if(w)for(f=0;f!=w.length;++f)b[f]=Bn(w[f].slice(w[f].indexOf('"')+1));var I=d.match(K6e);I&&sDe(o,I,n);var T=d.match(W6e);if(T&&(o["!margins"]=iDe(Ur(T[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Jr(c)),e.sheetRows>0&&o["!ref"]){var C=Bn(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Jr(C))}return g.length>0&&(o["!cols"]=g),b.length>0&&(o["!merges"]=b),o}function Z6e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Jr(t[r])+'"/>';return e+"</mergeCells>"}function cD(t,e,r,n){var a=Ur(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=In(ca(a.codeName)))}function eDe(t,e,r,n,a){cD(t.slice(0,t.indexOf(">")),r,n,a)}function tDe(t,e,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=Xd(ra(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+ir("outlinePr",null,u)}!s&&!o||(a[a.length]=ir("sheetPr",o,i))}var rDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],nDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function aDe(t){var e={sheet:1};return rDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),nDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=rD(t.password).toString(16).toUpperCase()),ir("sheetProtection",null,e)}function sDe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Ur(ca(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+In(s.location))):(s.Target="#"+In(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Bn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Lr({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function iDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function oDe(t){return Xm(t),ir("pageMargins",null,t)}function lDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Ur(e[n],!0);a.hidden&&(a.hidden=Ra(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,nD(a.width)),_0(a);s<=i;)t[s++]=Va(a)}}function cDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=ir("col",null,v4(a,n)));return r[r.length]="</cols>",r.join("")}function uDe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function dDe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Jr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Wl(a);i.s.r==i.e.r&&(i.e.r=Wl(e["!ref"]).e.r,a=Jr(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),ir("autoFilter",null,{ref:a})}var ADe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function fDe(t,e){e.Views||(e.Views=[{}]),(t.match(ADe)||[]).forEach(function(r,n){var a=Ur(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Ra(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function hDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ir("sheetViews",ir("sheetView",null,a),{})}function mDe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=jf[t.v];break;case"d":n&&n.cellDates?a=Qa(t.v,-1).toISOString():(t=Va(t),t.t="n",a=""+(t.v=Ei(Qa(t.v)))),typeof t.z>"u"&&(t.z=Mr[14]);break;default:a=t.v;break}var o=bo("v",ra(a)),c={r:e},u=V0(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=bo("v",""+lD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=ir("f",ra(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),ir("c",o,c)}var pDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=G2("v"),i=G2("f");return function(c,u,d,A,h,f){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,I="",T,C,E=0,S=0,O,B,P=0,D=0,W=Array.isArray(f.CellXf),Ae,ee=[],ce=[],de=Array.isArray(u),X=[],pe={},Se=!1,k=!!d.sheetStubs,F=c.split(e),V=0,M=F.length;V!=M;++V){p=F[V].trim();var L=p.length;if(L!==0){var q=0;e:for(m=0;m<L;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(C=Ur(p.slice(q,m),!0),E=C.r!=null?parseInt(C.r,10):E+1,S=-1,d.sheetRows&&d.sheetRows<E)continue;pe={},Se=!1,C.ht&&(Se=!0,pe.hpt=parseFloat(C.ht),pe.hpx=ev(pe.hpt)),C.hidden=="1"&&(Se=!0,pe.hidden=!0),C.outlineLevel!=null&&(Se=!0,pe.level=+C.outlineLevel),Se&&(X[E-1]=pe)}break;case"<":q=m;break}if(q>=m)break;if(C=Ur(p.slice(q,m),!0),E=C.r!=null?parseInt(C.r,10):E+1,S=-1,!(d.sheetRows&&d.sheetRows<E)){A.s.r>E-1&&(A.s.r=E-1),A.e.r<E-1&&(A.e.r=E-1),d&&d.cellStyles&&(pe={},Se=!1,C.ht&&(Se=!0,pe.hpt=parseFloat(C.ht),pe.hpx=ev(pe.hpt)),C.hidden=="1"&&(Se=!0,pe.hidden=!0),C.outlineLevel!=null&&(Se=!0,pe.level=+C.outlineLevel),Se&&(X[E-1]=pe)),g=p.slice(m).split(t);for(var R=0;R!=g.length&&g[R].trim().charAt(0)=="<";++R);for(g=g.slice(R),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,I=x[1],b=0;b!=I.length&&!((w=I.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,S=y}else++S;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,C=Ur(p.slice(0,b),!0),C.r||(C.r=Lr({r:E-1,c:S})),I=p.slice(b),T={t:""},(x=I.match(s))!=null&&x[1]!==""&&(T.v=In(x[1])),d.cellFormula){if((x=I.match(i))!=null&&x[1]!==""){if(T.f=In(ca(x[1])).replace(/\r\n/g,`
`),d.xlfn||(T.f=cH(T.f)),x[0].indexOf('t="array"')>-1)T.F=(I.match(a)||[])[1],T.F.indexOf(":")>-1&&ee.push([Bn(T.F),T.F]);else if(x[0].indexOf('t="shared"')>-1){B=Ur(x[0]);var K=In(ca(x[1]));d.xlfn||(K=cH(K)),ce[parseInt(B.si,10)]=[B,K,C.r]}}else(x=I.match(/<f[^>]*\/>/))&&(B=Ur(x[0]),ce[B.si]&&(T.f=AOe(ce[B.si][1],ce[B.si][2],C.r)));var Z=As(C.r);for(b=0;b<ee.length;++b)Z.r>=ee[b][0].s.r&&Z.r<=ee[b][0].e.r&&Z.c>=ee[b][0].s.c&&Z.c<=ee[b][0].e.c&&(T.F=ee[b][1])}if(C.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(k)T.t="z";else continue;else T.t=C.t||"n";switch(A.s.c>S&&(A.s.c=S),A.e.c<S&&(A.e.c=S),T.t){case"n":if(T.v==""||T.v==null){if(!k)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!k)continue;T.t="z"}else O=Xy[parseInt(T.v,10)],T.v=O.t,T.r=O.r,d.cellHTML&&(T.h=O.h);break;case"str":T.t="s",T.v=T.v!=null?ca(T.v):"",d.cellHTML&&(T.h=Q6(T.v));break;case"inlineStr":x=I.match(n),T.t="s",x!=null&&(O=tD(x[1]))?(T.v=O.t,d.cellHTML&&(T.h=O.h)):T.v="";break;case"b":T.v=Ra(T.v);break;case"d":d.cellDates?T.v=Qa(T.v,1):(T.v=Ei(Qa(T.v,1)),T.t="n");break;case"e":(!d||d.cellText!==!1)&&(T.w=T.v),T.v=Zte[T.v];break}if(P=D=0,Ae=null,W&&C.s!==void 0&&(Ae=f.CellXf[C.s],Ae!=null&&(Ae.numFmtId!=null&&(P=Ae.numFmtId),d.cellStyles&&Ae.fillId!=null&&(D=Ae.fillId))),Xre(T,P,D,d,h,f),d.cellDates&&W&&T.t=="n"&&Bv(Mr[P])&&(T.t="d",T.v=m4(T.v)),C.cm&&d.xlmeta){var te=(d.xlmeta.Cell||[])[+C.cm-1];te&&te.type=="XLDAPR"&&(T.D=!0)}if(de){var Q=As(C.r);u[Q.r]||(u[Q.r]=[]),u[Q.r][Q.c]=T}else u[C.r]=T}}}}X.length>0&&(u["!rows"]=X)}}();function gDe(t,e,r,n){var a=[],s=[],i=Bn(t["!ref"]),o="",c,u="",d=[],A=0,h=0,f=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=ds(h);for(A=i.s.r;A<=i.e.r;++A){for(s=[],u=$s(A),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[A]||[])[h]:t[c];y!==void 0&&(o=mDe(y,c,t,e))!=null&&s.push(o)}(s.length>0||f&&f[A])&&(p={r:u},f&&f[A]&&(g=f[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=Z2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=ir("row",s.join(""),p))}if(f)for(;A<f.length;++A)f&&f[A]&&(p={r:A+1},g=f[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=Z2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=ir("row","",p));return a.join("")}function Jre(t,e,r,n){var a=[Gs,ir("worksheet",null,{xmlns:Hp[0],"xmlns:r":bi.r})],s=r.SheetNames[t],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Bn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Jr(d)}n||(n={}),c["!comments"]=[];var A=[];tDe(c,r,t,e,a),a[a.length]=ir("dimension",null,{ref:u}),a[a.length]=hDe(c,e,t,r),e.sheetFormat&&(a[a.length]=ir("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=cDe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=gDe(c,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=aDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=dDe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Z6e(c["!merges"]));var h=-1,f,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(f={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=Jn(n,-1,ra(p[1].Target).replace(/#.*$/,""),un.HLINK),f["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(f.location=ra(p[1].Target.slice(h+1))),p[1].Tooltip&&(f.tooltip=ra(p[1].Tooltip)),a[a.length]=ir("hyperlink",null,f))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=oDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=bo("ignoredErrors",ir("ignoredError",null,{numberStoredAsText:1,sqref:u}))),A.length>0&&(m=Jn(n,-1,"../drawings/drawing"+(t+1)+".xml",un.DRAW),a[a.length]=ir("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=A),c["!comments"].length>0&&(m=Jn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",un.VML),a[a.length]=ir("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function xDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function vDe(t,e,r){var n=Ot(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=Z2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var A=-1,h=-1,f=d<<10;f<d+1<<10;++f){u.c=f;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Lr(u)];m&&(A<0&&(A=f),h=f)}A<0||(++o,n.write_shift(4,A),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,o),n.l=p,n.length>n.l?n.slice(0,n.l):n}function yDe(t,e,r,n){var a=vDe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Gt(t,0,a)}var bDe=zp,wDe=jv;function NDe(){}function _De(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=STe(t),r}function CDe(t,e,r){r==null&&(r=Ot(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return eS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),qte(t,r),r.slice(0,r.l)}function EDe(t){var e=Pu(t);return[e]}function SDe(t,e,r){return r==null&&(r=Ot(8)),$p(e,r)}function IDe(t){var e=Kp(t);return[e]}function BDe(t,e,r){return r==null&&(r=Ot(4)),Gp(e,r)}function TDe(t){var e=Pu(t),r=t.read_shift(1);return[e,r,"b"]}function PDe(t,e,r){return r==null&&(r=Ot(9)),$p(e,r),r.write_shift(1,t.v?1:0),r}function jDe(t){var e=Kp(t),r=t.read_shift(1);return[e,r,"b"]}function kDe(t,e,r){return r==null&&(r=Ot(5)),Gp(e,r),r.write_shift(1,t.v?1:0),r}function FDe(t){var e=Pu(t),r=t.read_shift(1);return[e,r,"e"]}function ODe(t,e,r){return r==null&&(r=Ot(9)),$p(e,r),r.write_shift(1,t.v),r}function DDe(t){var e=Kp(t),r=t.read_shift(1);return[e,r,"e"]}function RDe(t,e,r){return r==null&&(r=Ot(8)),Gp(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function MDe(t){var e=Pu(t),r=t.read_shift(4);return[e,r,"s"]}function LDe(t,e,r){return r==null&&(r=Ot(12)),$p(e,r),r.write_shift(4,e.v),r}function UDe(t){var e=Kp(t),r=t.read_shift(4);return[e,r,"s"]}function QDe(t,e,r){return r==null&&(r=Ot(8)),Gp(e,r),r.write_shift(4,e.v),r}function VDe(t){var e=Pu(t),r=Wo(t);return[e,r,"n"]}function HDe(t,e,r){return r==null&&(r=Ot(16)),$p(e,r),yp(t.v,r),r}function Zre(t){var e=Kp(t),r=Wo(t);return[e,r,"n"]}function $De(t,e,r){return r==null&&(r=Ot(12)),Gp(e,r),yp(t.v,r),r}function KDe(t){var e=Pu(t),r=X6(t);return[e,r,"n"]}function GDe(t,e,r){return r==null&&(r=Ot(12)),$p(e,r),Wte(t.v,r),r}function zDe(t){var e=Kp(t),r=X6(t);return[e,r,"n"]}function qDe(t,e,r){return r==null&&(r=Ot(8)),Gp(e,r),Wte(t.v,r),r}function WDe(t){var e=Pu(t),r=z6(t);return[e,r,"is"]}function XDe(t){var e=Pu(t),r=Yo(t);return[e,r,"str"]}function YDe(t,e,r){return r==null&&(r=Ot(12+4*t.v.length)),$p(e,r),Gi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function JDe(t){var e=Kp(t),r=Yo(t);return[e,r,"str"]}function ZDe(t,e,r){return r==null&&(r=Ot(8+4*t.v.length)),Gp(e,r),Gi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function e8e(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var o=x4(t,n-t.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else t.l=n;return i}function t8e(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var o=x4(t,n-t.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else t.l=n;return i}function r8e(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=Wo(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var o=x4(t,n-t.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else t.l=n;return i}function n8e(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=Yo(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var o=x4(t,n-t.l,r);i[3]=Go(o,null,a,r.supbooks,r)}else t.l=n;return i}var a8e=zp,s8e=jv;function i8e(t,e){return e==null&&(e=Ot(4)),e.write_shift(4,t),e}function o8e(t,e){var r=t.l+e,n=zp(t),a=q6(t),s=Yo(t),i=Yo(t),o=Yo(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function l8e(t,e){var r=Ot(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));jv({s:As(t[0]),e:As(t[0])},r),W6("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Gi(a||"",r),Gi(t[1].Tooltip||"",r),Gi("",r),r.slice(0,r.l)}function c8e(){}function u8e(t,e,r){var n=t.l+e,a=Xte(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=F6e(t,n-t.l,r);i[1]=o}else t.l=n;return i}function d8e(t,e,r){var n=t.l+e,a=zp(t),s=[a];if(r.cellFormula){var i=D6e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function A8e(t,e,r){r==null&&(r=Ot(18));var n=v4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var ene=["left","right","top","bottom","header","footer"];function f8e(t){var e={};return ene.forEach(function(r){e[r]=Wo(t)}),e}function h8e(t,e){return e==null&&(e=Ot(6*8)),Xm(t),ene.forEach(function(r){yp(t[r],e)}),e}function m8e(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function p8e(t,e,r){r==null&&(r=Ot(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function g8e(t){var e=Ot(24);return e.write_shift(4,4),e.write_shift(4,1),jv(t,e),e}function x8e(t,e){return e==null&&(e=Ot(16*4+2)),e.write_shift(2,t.password?rD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function v8e(){}function y8e(){}function b8e(t,e,r,n,a,s,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,h=!1,f,m,p,g,x,y,b,w,I,T=[];o.biff=12,o["!row"]=0;var C=0,E=!1,S=[],O={},B=o.supbooks||a.supbooks||[[]];if(B.sharedf=O,B.arrayf=S,B.SheetNames=a.SheetNames||a.Sheets.map(function(de){return de.name}),!o.supbooks&&(o.supbooks=B,a.Names))for(var P=0;P<a.Names.length;++P)B[0][P+1]=a.Names[P];var D=[],W=[],Ae=!1;eb[16]={n:"BrtShortReal",f:Zre};var ee;if(Pf(t,function(X,pe,Se){if(!h)switch(Se){case 148:u=X;break;case 0:f=X,o.sheetRows&&o.sheetRows<=f.r&&(h=!0),w=$s(g=f.r),o["!row"]=f.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=ev(X.hpt)),W[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:X[2]},X[2]){case"n":m.v=X[1];break;case"s":b=Xy[X[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!X[1];break;case"e":m.v=X[1],o.cellText!==!1&&(m.w=jf[m.v]);break;case"str":m.t="s",m.v=X[1];break;case"is":m.t="s",m.v=X[1].t;break}if((p=i.CellXf[X[0].iStyleRef])&&Xre(m,p.numFmtId,null,o,s,i),x=X[0].c==-1?x+1:X[0].c,o.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[ds(x)+w]=m,o.cellFormula){for(E=!1,C=0;C<S.length;++C){var k=S[C];f.r>=k[0].s.r&&f.r<=k[0].e.r&&x>=k[0].s.c&&x<=k[0].e.c&&(m.F=Jr(k[0]),E=!0)}!E&&X.length>3&&(m.f=X[3])}if(d.s.r>f.r&&(d.s.r=f.r),d.s.c>x&&(d.s.c=x),d.e.r<f.r&&(d.e.r=f.r),d.e.c<x&&(d.e.c=x),o.cellDates&&p&&m.t=="n"&&Bv(Mr[p.numFmtId])){var F=km(m.v);F&&(m.t="d",m.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}ee&&(ee.type=="XLDAPR"&&(m.D=!0),ee=void 0);break;case 1:case 12:if(!o.sheetStubs||A)break;m={t:"z",v:void 0},x=X[0].c==-1?x+1:X[0].c,o.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[ds(x)+w]=m,d.s.r>f.r&&(d.s.r=f.r),d.s.c>x&&(d.s.c=x),d.e.r<f.r&&(d.e.r=f.r),d.e.c<x&&(d.e.c=x),ee&&(ee.type=="XLDAPR"&&(m.D=!0),ee=void 0);break;case 176:T.push(X);break;case 49:ee=((o.xlmeta||{}).Cell||[])[X-1];break;case 494:var V=n["!id"][X.relId];for(V?(X.Target=V.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=V):X.relId==""&&(X.Target="#"+X.loc),g=X.rfx.s.r;g<=X.rfx.e.r;++g)for(x=X.rfx.s.c;x<=X.rfx.e.c;++x)o.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=X):(y=Lr({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=X);break;case 426:if(!o.cellFormula)break;S.push(X),I=o.dense?c[g][x]:c[ds(x)+w],I.f=Go(X[1],d,{r:f.r,c:x},B,o),I.F=Jr(X[0]);break;case 427:if(!o.cellFormula)break;O[Lr(X[0].s)]=X[1],I=o.dense?c[g][x]:c[ds(x)+w],I.f=Go(X[1],d,{r:f.r,c:x},B,o);break;case 60:if(!o.cellStyles)break;for(;X.e>=X.s;)D[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},Ae||(Ae=!0,nD(X.w/256)),_0(D[X.e+1]);break;case 161:c["!autofilter"]={ref:Jr(X)};break;case 476:c["!margins"]=X;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),X.name&&(a.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),X.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!pe.T){if(!A||o.WTF)throw new Error("Unexpected record 0x"+Se.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Jr(u||d)),o.sheetRows&&c["!ref"]){var ce=Bn(c["!ref"]);o.sheetRows<=+ce.e.r&&(ce.e.r=o.sheetRows-1,ce.e.r>d.e.r&&(ce.e.r=d.e.r),ce.e.r<ce.s.r&&(ce.s.r=ce.e.r),ce.e.c>d.e.c&&(ce.e.c=d.e.c),ce.e.c<ce.s.c&&(ce.s.c=ce.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Jr(ce))}return T.length>0&&(c["!merges"]=T),D.length>0&&(c["!cols"]=D),W.length>0&&(c["!rows"]=W),c}function w8e(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Va(e),e.z=e.z||Mr[14],e.v=Ei(Qa(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r,c:n};switch(c.s=V0(a.cellXfs,e,a),e.l&&s["!links"].push([Lr(c),e.l]),e.c&&s["!comments"].push([Lr(c),e.c]),e.t){case"s":case"str":return a.bookSST?(o=lD(a.Strings,e.v,a.revStrings),c.t="s",c.v=o,i?Gt(t,18,QDe(e,c)):Gt(t,7,LDe(e,c))):(c.t="str",i?Gt(t,17,ZDe(e,c)):Gt(t,6,YDe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Gt(t,13,qDe(e,c)):Gt(t,2,GDe(e,c)):i?Gt(t,16,$De(e,c)):Gt(t,5,HDe(e,c)),!0;case"b":return c.t="b",i?Gt(t,15,kDe(e,c)):Gt(t,4,PDe(e,c)),!0;case"e":return c.t="e",i?Gt(t,14,RDe(e,c)):Gt(t,3,ODe(e,c)),!0}return i?Gt(t,12,BDe(e,c)):Gt(t,1,SDe(e,c)),!0}function N8e(t,e,r,n){var a=Bn(e["!ref"]||"A1"),s,i="",o=[];Gt(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=$s(d),yDe(t,e,a,d);var A=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=ds(h)),s=o[h]+i;var f=c?(e[d]||[])[h]:e[s];if(!f){A=!1;continue}A=w8e(t,f,d,h,n,e,A)}}Gt(t,146)}function _8e(t,e){!e||!e["!merges"]||(Gt(t,177,i8e(e["!merges"].length)),e["!merges"].forEach(function(r){Gt(t,176,s8e(r))}),Gt(t,178))}function C8e(t,e){!e||!e["!cols"]||(Gt(t,390),e["!cols"].forEach(function(r,n){r&&Gt(t,60,A8e(n,r))}),Gt(t,391))}function E8e(t,e){!e||!e["!ref"]||(Gt(t,648),Gt(t,649,g8e(Bn(e["!ref"]))),Gt(t,650))}function S8e(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Jn(r,-1,n[1].Target.replace(/#.*$/,""),un.HLINK);Gt(t,494,l8e(n,a))}}),delete e["!links"]}function I8e(t,e,r,n){if(e["!comments"].length>0){var a=Jn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",un.VML);Gt(t,551,W6("rId"+a)),e["!legacy"]=a}}function B8e(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Jr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Wl(s);o.s.r==o.e.r&&(o.e.r=Wl(e["!ref"]).e.r,s=Jr(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Gt(t,161,jv(Bn(s))),Gt(t,162)}}function T8e(t,e,r){Gt(t,133),Gt(t,137,p8e(e,r)),Gt(t,138),Gt(t,134)}function P8e(t,e){e["!protect"]&&Gt(t,535,x8e(e["!protect"]))}function j8e(t,e,r,n){var a=ql(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var c=Bn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Gt(a,129),(r.vbaraw||i["!outline"])&&Gt(a,147,CDe(o,i["!outline"])),Gt(a,148,wDe(c)),T8e(a,i,r.Workbook),C8e(a,i),N8e(a,i,t,e),P8e(a,i),B8e(a,i,r,t),_8e(a,i),S8e(a,i,n),i["!margins"]&&Gt(a,476,h8e(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&E8e(a,i),I8e(a,i,t,n),Gt(a,130),a.end()}function k8e(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=In((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function F8e(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var h=k8e(A);d.s.r=d.s.c=0,d.e.c=o,u=ds(o),h[0].forEach(function(f,m){i[u+$s(m)]={t:"n",v:f,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=Jr(d)),i}function O8e(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(Yre);return o&&cD(o[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function D8e(t,e){t.l+=10;var r=Yo(t);return{name:r}}function R8e(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Pf(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var uD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],M8e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],L8e=[],U8e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function hH(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ra(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function mH(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ra(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function tne(t){mH(t.WBProps,uD),mH(t.CalcPr,U8e),hH(t.WBView,M8e),hH(t.Sheets,L8e),Tx.date1904=Ra(t.WBProps.date1904)}function Q8e(t){return!t.Workbook||!t.Workbook.WBProps?"false":Ra(t.Workbook.WBProps.date1904)?"true":"false"}var V8e="][*?/\\".split("");function rne(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return V8e.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function H8e(t,e,r){t.forEach(function(n,a){rne(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function $8e(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];H8e(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Q6e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var K8e=/<\w+:workbook/;function G8e(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(rl,function(c,u){var d=Ur(c);switch(fA(d[0])){case"<?xml":break;case"<workbook":c.match(K8e)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":uD.forEach(function(A){if(d[A[0]]!=null)switch(A[2]){case"bool":r.WBProps[A[0]]=Ra(d[A[0]]);break;case"int":r.WBProps[A[0]]=parseInt(d[A[0]],10);break;default:r.WBProps[A[0]]=d[A[0]]}}),d.codeName&&(r.WBProps.CodeName=ca(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=In(ca(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ca(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ra(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=In(ca(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Hp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return tne(r),r}function nne(t){var e=[Gs];e[e.length]=ir("workbook",null,{xmlns:Hp[0],"xmlns:r":bi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(uD.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=ir("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:ra(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=ir("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=ir("definedName",ra(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function z8e(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Xj(t),r.name=Yo(t),r}function q8e(t,e){return e||(e=Ot(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),W6(t.strRelID,e),Gi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function W8e(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Yo(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function X8e(t,e){e||(e=Ot(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),qte(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Y8e(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function J8e(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=ITe(t),i=O6e(t,0,r),o=q6(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function Z8e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],eb[16]={n:"BrtFRTArchID$",f:Y8e},Pf(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Go(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),tne(r),r.Names=s,r.supbooks=i,r}function eRe(t,e){Gt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Gt(t,156,q8e(a))}Gt(t,144)}function tRe(t,e){e||(e=Ot(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Gi("SheetJS",e),Gi(zE.version,e),Gi(zE.version,e),Gi("7262",e),e.length>e.l?e.slice(0,e.l):e}function rRe(t,e){e||(e=Ot(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function nRe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Gt(t,135),Gt(t,158,rRe(a)),Gt(t,136))}}function aRe(t,e){var r=ql();return Gt(r,131),Gt(r,128,tRe()),Gt(r,153,X8e(t.Workbook&&t.Workbook.WBProps||null)),nRe(r,t),eRe(r,t),Gt(r,132),r.end()}function sRe(t,e,r){return e.slice(-4)===".bin"?Z8e(t,r):G8e(t,r)}function iRe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?b8e(t,n,r,a,s,i,o):J6e(t,n,r,a,s,i,o)}function oRe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?R8e(t,n,r,a,s):O8e(t,n,r,a,s)}function lRe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?uOe():dOe()}function cRe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?lOe():cOe()}function uRe(t,e,r,n){return e.slice(-4)===".bin"?sFe(t,r,n):zke(t,r,n)}function dRe(t,e,r){return Rre(t,r)}function ARe(t,e,r){return e.slice(-4)===".bin"?Ake(t,r):cke(t,r)}function fRe(t,e,r){return e.slice(-4)===".bin"?nOe(t,r):qFe(t,r)}function hRe(t,e,r){return e.slice(-4)===".bin"?KFe(t):HFe(t)}function mRe(t,e,r,n){return r.slice(-4)===".bin"?GFe(t,e,r,n):void 0}function pRe(t,e,r){return e.slice(-4)===".bin"?UFe(t,e,r):VFe(t,e,r)}function gRe(t,e,r){return(e.slice(-4)===".bin"?aRe:nne)(t)}function xRe(t,e,r,n,a){return(e.slice(-4)===".bin"?j8e:Jre)(t,r,n,a)}function vRe(t,e,r){return(e.slice(-4)===".bin"?mFe:Ore)(t,r)}function yRe(t,e,r){return(e.slice(-4)===".bin"?mke:Sre)(t,r)}function bRe(t,e,r){return(e.slice(-4)===".bin"?aOe:Ure)(t)}function wRe(t){return(t.slice(-4)===".bin"?QFe:Mre)()}var ane=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,sne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function $u(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(ane),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(sne),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function NRe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(ane),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(sne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Jy;function _Re(t,e){var r=Jy[t]||In(t);return r==="General"?xp(e):Su(r,e)}function CRe(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ra(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[In(e)]=a}function ERe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||jf[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K2(t.v):t.w=xp(t.v):t.w=_Re(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Jy[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Bv(n)){var a=km(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function SRe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Lke[n.Pattern]||n.Pattern)}t[e.ID]=e}function IRe(t,e,r,n,a,s,i,o,c,u){var d="General",A=n.StyleID,h={};u=u||{};var f=[],m=0;for(A===void 0&&o&&(A=o.StyleID),A===void 0&&i&&(A=i.StyleID);s[A]!==void 0&&(s[A].nf&&(d=s[A].nf),s[A].Interior&&f.push(s[A].Interior),!!s[A].Parent);)A=s[A].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ra(t);break;case"String":n.t="s",n.r=jV(In(t)),n.v=t.indexOf("<")>-1?In(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Qa(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=In(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Zte[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=jV(e||t));break}if(ERe(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=In(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Bx(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Bx("RC:RC",a):n.ArrayRange&&(n.F=Bx(n.ArrayRange,a),c.push([Bn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(f.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function BRe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function GB(t,e){var r=e||{};Tv();var n=fy(V6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ca(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Va(r);return i.type="string",Zx.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ue){a.indexOf("<"+ue)>=0&&(s=!0)}),s)return hMe(n,r);Jy={"General Number":"General","General Date":Mr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mr[15],"Short Date":Mr[14],"Long Time":Mr[19],"Medium Time":Mr[18],"Short Time":Mr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mr[2],Standard:Mr[4],Percent:Mr[10],Scientific:Mr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},A=[],h=r.dense?[]:{},f="",m={},p={},g=$u('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},I={},T={},C="",E=0,S=[],O={},B={},P=0,D=[],W=[],Ae={},ee=[],ce,de=!1,X=[],pe=[],Se={},k=0,F=0,V={Sheets:[],WBProps:{date1904:!1}},M={};q2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var L="";o=q2.exec(n);)switch(o[3]=(L=o[3]).toLowerCase()){case"data":if(L=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?IRe(n.slice(x,o.index),C,g,c[c.length-1][0]=="comment"?Ae:m,{c:y,r:b},I,ee[y],p,X,r):(C="",g=$u(o[0]),x=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(W.length>0&&(m.c=W),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[ds(y)+$s(b)]=m),m.HRef&&(m.l={Target:In(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(k=y+(parseInt(m.MergeAcross,10)|0),F=b+(parseInt(m.MergeDown,10)|0),S.push({s:{c:y,r:b},e:{c:k,r:F}})),!r.sheetStubs)m.MergeAcross?y=k+1:++y;else if(m.MergeAcross||m.MergeDown){for(var q=y;q<=k;++q)for(var R=b;R<=F;++R)(q>y||R>b)&&(r.dense?(h[R]||(h[R]=[]),h[R][q]={t:"z"}):h[ds(q)+$s(R)]={t:"z"});y=k+1}else++y;else m=NRe(o[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),o[0].slice(-2)==="/>"&&++y,W=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),o[0].slice(-2)==="/>"&&(p=$u(o[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=$u(o[0]),p.Index&&(b=+p.Index-1),Se={},(p.AutoFitHeight=="0"||p.Height)&&(Se.hpx=parseInt(p.Height,10),Se.hpt=Z2(Se.hpx),pe[b]=Se),p.Hidden=="1"&&(Se.hidden=!0,pe[b]=Se));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));A.push(f),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=Jr(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=Jr(w))),S.length&&(h["!merges"]=S),ee.length>0&&(h["!cols"]=ee),pe.length>0&&(h["!rows"]=pe),d[f]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([o[3],!1]),u=$u(o[0]),f=In(u.Name),h=r.dense?[]:{},S=[],X=[],pe=[],M={name:f,Hidden:0},V.Sheets.push(M);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),ee=[],de=!1}break;case"style":o[1]==="/"?SRe(I,T,r):T=$u(o[0]);break;case"numberformat":T.nf=In($u(o[0]).Format||"General"),Jy[T.nf]&&(T.nf=Jy[T.nf]);for(var K=0;K!=392&&Mr[K]!=T.nf;++K);if(K==392){for(K=57;K!=392;++K)if(Mr[K]==null){sf(T.nf,K);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(ce=$u(o[0]),ce.Hidden&&(ce.hidden=!0,delete ce.Hidden),ce.Width&&(ce.wpx=parseInt(ce.Width,10)),!de&&ce.wpx>10){de=!0,qo=kre;for(var Z=0;Z<ee.length;++Z)ee[Z]&&_0(ee[Z])}de&&_0(ce),ee[ce.Index-1||ee.length]=ce;for(var te=0;te<+ce.Span;++te)ee[ee.length]=Va(ce);break;case"namedrange":if(o[1]==="/")break;V.Names||(V.Names=[]);var Q=Ur(o[0]),ye={Name:Q.Name,Ref:Bx(Q.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(ye.Sheet=V.Sheets.length-1),V.Names.push(ye);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(E,o.index):E=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;T.Interior=$u(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?ZTe(O,L,n.slice(P,o.index)):P=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));BRe(Ae),W.push(Ae)}else c.push([o[3],!1]),u=$u(o[0]),Ae={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Y=$u(o[0]);h["!autofilter"]={ref:Bx(Y.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return yH(n,r);var z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:z=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:z=!1}break;case"excelworkbook":switch(o[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:z=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:z=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(P,o.index)){case"SheetHidden":M.Hidden=1;break;case"SheetVeryHidden":M.Hidden=2;break}else P=o.index+o[0].length;break;case"header":h["!margins"]||Xm(h["!margins"]={},"xlml"),isNaN(+Ur(o[0]).Margin)||(h["!margins"].header=+Ur(o[0]).Margin);break;case"footer":h["!margins"]||Xm(h["!margins"]={},"xlml"),isNaN(+Ur(o[0]).Margin)||(h["!margins"].footer=+Ur(o[0]).Margin);break;case"pagemargins":var le=Ur(o[0]);h["!margins"]||Xm(h["!margins"]={},"xlml"),isNaN(+le.Top)||(h["!margins"].top=+le.Top),isNaN(+le.Left)||(h["!margins"].left=+le.Left),isNaN(+le.Right)||(h["!margins"].right=+le.Right),isNaN(+le.Bottom)||(h["!margins"].bottom=+le.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:z=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:z=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:z=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:z=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:z=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:z=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:z=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:z=!1}break;case"smarttags":break;default:z=!1;break}if(z||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?CRe(B,L,D,n.slice(P,o.index)):(D=o,P=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=A,je.Workbook=V,je.SSF=Va(Mr),je.Props=O,je.Custprops=B,je}function nk(t,e){switch(AD(e=e||{}),e.type||"base64"){case"base64":return GB(jc(t),e);case"binary":case"buffer":case"file":return GB(t,e);case"array":return GB(U0(t),e)}}function TRe(t,e){var r=[];return t.Props&&r.push(ePe(t.Props,e)),t.Custprops&&r.push(tPe(t.Props,t.Custprops)),r.join("")}function PRe(){return""}function jRe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(ir("NumberFormat",null,{"ss:Format":ra(Mr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(ir("Style",s.join(""),i))}),ir("Styles",r.join(""))}function ine(t){return ir("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+iD(t.Ref,{r:0,c:0})})}function kRe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(ine(a)))}return ir("Names",r.join(""))}function FRe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(ine(o)))}return s.join("")}function ORe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(ir("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(ir("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(ir("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(ir("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(bo("ProtectContents","True")),t["!protect"].objects&&a.push(bo("ProtectObjects","True")),t["!protect"].scenarios&&a.push(bo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(bo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(bo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":ir("WorksheetOptions",a.join(""),{xmlns:xc.x})}function DRe(t){return t.map(function(e){var r=nTe(e.t||""),n=ir("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ir("Comment",n,{"ss:Author":e.a})}).join("")}function RRe(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ra(iD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=As(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ra(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ra(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var A="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":A="Number",h=String(t.v);break;case"b":A="Boolean",h=t.v?"1":"0";break;case"e":A="Error",h=jf[t.v];break;case"d":A="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Mr[14]);break;case"s":A="String",h=rTe(t.v||"");break}var f=V0(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+A+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=DRe(t.c)),ir("Cell",p,o)}function MRe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=ev(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function LRe(t,e,r,n){if(!t["!ref"])return"";var a=Bn(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(g,x){_0(g);var y=!!g.width,b=v4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=Y2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),o.push(ir("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[MRe(u,(t["!rows"]||[])[u])],A=a.s.c;A<=a.e.c;++A){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>A)&&!(s[i].s.r>u)&&!(s[i].e.c<A)&&!(s[i].e.r<u)){(s[i].s.c!=A||s[i].s.r!=u)&&(h=!0);break}if(!h){var f={r:u,c:A},m=Lr(f),p=c?(t[u]||[])[A]:t[m];d.push(RRe(p,m,t,e,r,n,f))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function URe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?FRe(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?LRe(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(ORe(s,e,t,r)),n.join("")}function QRe(t,e){e||(e={}),t.SSF||(t.SSF=Va(Mr)),t.SSF&&(Tv(),A4(t.SSF),e.revssf=h4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],V0(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(TRe(t,e)),r.push(PRe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(ir("Worksheet",URe(n,e,t),{"ss:Name":ra(t.SheetNames[n])}));return r[2]=jRe(t,e),r[3]=kRe(t),Gs+ir("Workbook",r.join(""),{xmlns:xc.ss,"xmlns:o":xc.o,"xmlns:x":xc.x,"xmlns:ss":xc.ss,"xmlns:dt":xc.dt,"xmlns:html":xc.html})}function VRe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=kTe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=FTe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var HRe=[60,1084,2066,2165,2175];function $Re(t,e,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=qA(r,r.l),u=ak[c],d=0;u!=null&&HRe.indexOf(c)>-1;)s=qA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=ak[c=qA(r,r.l)];var A=$i(i);vo(A,0);var h=0;A.lens=[];for(var f=0;f<i.length;++f)A.lens.push(h),h+=i[f].length;if(A.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+A.length+" < "+n;return e.f(A,A.length,a)}function Rd(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Mr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||jf[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K2(t.v):t.w=xp(t.v):t.w=Su(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&Bv(Mr[n]||String(n))){var a=km(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function m_(t,e,r){return{v:t,ixfe:e,t:r}}function KRe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},o=null,c=[],u="",d={},A,h="",f,m,p,g,x={},y=[],b,w,I=[],T=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},S=function(re){return re<8?zm[re]:re<64&&T[re-8]||zm[re]},O=function(re,ne,Ue){var Ke=ne.XF.data;if(!(!Ke||!Ke.patternType||!Ue||!Ue.cellStyles)){ne.s={},ne.s.patternType=Ke.patternType;var et;(et=X2(S(Ke.icvFore)))&&(ne.s.fgColor={rgb:et}),(et=X2(S(Ke.icvBack)))&&(ne.s.bgColor={rgb:et})}},B=function(re,ne,Ue){if(!(Se>1)&&!(Ue.sheetRows&&re.r>=Ue.sheetRows)){if(Ue.cellStyles&&ne.XF&&ne.XF.data&&O(re,ne,Ue),delete ne.ixfe,delete ne.XF,A=re,h=Lr(re),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),re.r<i.s.r&&(i.s.r=re.r),re.c<i.s.c&&(i.s.c=re.c),re.r+1>i.e.r&&(i.e.r=re.r+1),re.c+1>i.e.c&&(i.e.c=re.c+1),Ue.cellFormula&&ne.f){for(var Ke=0;Ke<y.length;++Ke)if(!(y[Ke][0].s.c>re.c||y[Ke][0].s.r>re.r)&&!(y[Ke][0].e.c<re.c||y[Ke][0].e.r<re.r)){ne.F=Jr(y[Ke][0]),(y[Ke][0].s.c!=re.c||y[Ke][0].s.r!=re.r)&&delete ne.f,ne.f&&(ne.f=""+Go(y[Ke][1],i,re,X,P));break}}Ue.dense?(a[re.r]||(a[re.r]=[]),a[re.r][re.c]=ne):a[h]=ne}},P={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(P.password=e.password);var D,W=[],Ae=[],ee=[],ce=[],de=!1,X=[];X.SheetNames=P.snames,X.sharedf=P.sharedf,X.arrayf=P.arrayf,X.names=[],X.XTI=[];var pe=0,Se=0,k=0,F=[],V=[],M;P.codepage=1200,rd(1200);for(var L=!1;t.l<t.length-1;){var q=t.l,R=t.read_shift(2);if(R===0&&pe===10)break;var K=t.l===t.length?0:t.read_shift(2),Z=ak[R];if(Z&&Z.f){if(e.bookSheets&&pe===133&&R!==133)break;if(pe=R,Z.r===2||Z.r==12){var te=t.read_shift(2);if(K-=2,!P.enc&&te!==R&&((te&255)<<8|te>>8)!==R)throw new Error("rt mismatch: "+te+"!="+R);Z.r==12&&(t.l+=10,K-=10)}var Q={};if(R===10?Q=Z.f(t,K,P):Q=$Re(R,Z,t,K,P),Se==0&&[9,521,1033,2057].indexOf(pe)===-1)continue;switch(R){case 34:r.opts.Date1904=C.WBProps.date1904=Q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(t.l=0),P.enc=Q,!e.password)throw new Error("File is password-protected");if(Q.valid==null)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=Q;break;case 66:var ye=Number(Q);switch(ye){case 21010:ye=1200;break;case 32768:ye=1e4;break;case 32769:ye=1252;break}rd(P.codepage=ye),L=!0;break;case 317:P.rrtabid=Q;break;case 25:P.winlocked=Q;break;case 439:r.opts.RefreshAll=Q;break;case 12:r.opts.CalcCount=Q;break;case 16:r.opts.CalcDelta=Q;break;case 17:r.opts.CalcIter=Q;break;case 13:r.opts.CalcMode=Q;break;case 14:r.opts.CalcPrecision=Q;break;case 95:r.opts.CalcSaveRecalc=Q;break;case 15:P.CalcRefMode=Q;break;case 2211:r.opts.FullCalc=Q;break;case 129:Q.fDialog&&(a["!type"]="dialog"),Q.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),Q.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:I.push(Q);break;case 430:X.push([Q]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(Q);break;case 24:case 536:M={Name:Q.Name,Ref:Go(Q.rgce,i,null,X,P)},Q.itab>0&&(M.Sheet=Q.itab-1),X.names.push(M),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(Q),Q.Name=="_xlnm._FilterDatabase"&&Q.itab>0&&Q.rgce&&Q.rgce[0]&&Q.rgce[0][0]&&Q.rgce[0][0][0]=="PtgArea3d"&&(V[Q.itab-1]={ref:Jr(Q.rgce[0][0][1][2])});break;case 22:P.ExternCount=Q;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(Q),X.XTI=X.XTI.concat(Q);break;case 2196:if(P.biff<8)break;M!=null&&(M.Comment=Q[1]);break;case 18:a["!protect"]=Q;break;case 19:Q!==0&&P.WTF&&console.error("Password verifier: "+Q);break;case 133:s[Q.pos]=Q,P.snames.push(Q.name);break;case 10:{if(--Se)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Jr(i),e.sheetRows&&e.sheetRows<=i.e.r){var Y=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Jr(i),i.e.r=Y}i.e.r++,i.e.c++}W.length>0&&(a["!merges"]=W),Ae.length>0&&(a["!objects"]=Ae),ee.length>0&&(a["!cols"]=ee),ce.length>0&&(a["!rows"]=ce),C.Sheets.push(E)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[R]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Q.BIFFVer]||8),P.biffguess=Q.BIFFVer==0,Q.BIFFVer==0&&Q.dt==4096&&(P.biff=5,L=!0,rd(P.codepage=28591)),P.biff==8&&Q.BIFFVer==0&&Q.dt==16&&(P.biff=2),Se++)break;if(a=e.dense?[]:{},P.biff<8&&!L&&(L=!0,rd(P.codepage=e.codepage||1252)),P.biff<5||Q.BIFFVer==0&&Q.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var z={pos:t.l-K,name:u};s[z.pos]=z,P.snames.push(u)}else u=(s[q]||{name:""}).name;Q.dt==32&&(a["!type"]="chart"),Q.dt==64&&(a["!type"]="macro"),W=[],Ae=[],P.arrayf=y=[],ee=[],ce=[],de=!1,E={Hidden:(s[q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[Q.r]||[])[Q.c]:a[Lr({c:Q.c,r:Q.r})])&&++Q.c,b={ixfe:Q.ixfe,XF:I[Q.ixfe]||{},v:Q.val,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 5:case 517:b={ixfe:Q.ixfe,XF:I[Q.ixfe],v:Q.val,t:Q.t},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 638:b={ixfe:Q.ixfe,XF:I[Q.ixfe],v:Q.rknum,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 189:for(var le=Q.c;le<=Q.C;++le){var je=Q.rkrec[le-Q.c][0];b={ixfe:je,XF:I[je],v:Q.rkrec[le-Q.c][1],t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:le,r:Q.r},b,e)}break;case 6:case 518:case 1030:{if(Q.val=="String"){o=Q;break}if(b=m_(Q.val,Q.cell.ixfe,Q.tt),b.XF=I[b.ixfe],e.cellFormula){var ue=Q.formula;if(ue&&ue[0]&&ue[0][0]&&ue[0][0][0]=="PtgExp"){var Pe=ue[0][0][1][0],Ye=ue[0][0][1][1],nt=Lr({r:Pe,c:Ye});x[nt]?b.f=""+Go(Q.formula,i,Q.cell,X,P):b.F=((e.dense?(a[Pe]||[])[Ye]:a[nt])||{}).F}else b.f=""+Go(Q.formula,i,Q.cell,X,P)}k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B(Q.cell,b,e),o=Q}break;case 7:case 519:if(o)o.val=Q,b=m_(Q,o.cell.ixfe,"s"),b.XF=I[b.ixfe],e.cellFormula&&(b.f=""+Go(o.formula,i,o.cell,X,P)),k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B(o.cell,b,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(Q);var mt=Lr(Q[0].s);if(f=e.dense?(a[Q[0].s.r]||[])[Q[0].s.c]:a[mt],e.cellFormula&&f){if(!o||!mt||!f)break;f.f=""+Go(Q[1],i,Q[0],X,P),f.F=Jr(Q[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;x[Lr(o.cell)]=Q[0],f=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[Lr(o.cell)],(f||{}).f=""+Go(Q[0],i,A,X,P)}}break;case 253:b=m_(c[Q.isst].t,Q.ixfe,"s"),c[Q.isst].h&&(b.h=c[Q.isst].h),b.XF=I[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:Q.ixfe,XF:I[Q.ixfe],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e));break;case 190:if(e.sheetStubs)for(var ct=Q.c;ct<=Q.C;++ct){var ft=Q.ixfe[ct-Q.c];b={ixfe:ft,XF:I[ft],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:ct,r:Q.r},b,e)}break;case 214:case 516:case 4:b=m_(Q.val,Q.ixfe,"s"),b.XF=I[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Rd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 0:case 512:Se===1&&(i=Q);break;case 252:c=Q;break;case 1054:if(P.biff==4){F[k++]=Q[1];for(var Ct=0;Ct<k+163&&Mr[Ct]!=Q[1];++Ct);Ct>=163&&sf(Q[1],k+163)}else sf(Q[1],Q[0]);break;case 30:{F[k++]=Q;for(var At=0;At<k+163&&Mr[At]!=Q;++At);At>=163&&sf(Q,k+163)}break;case 229:W=W.concat(Q);break;case 93:Ae[Q.cmo[0]]=P.lastobj=Q;break;case 438:P.lastobj.TxO=Q;break;case 127:P.lastobj.ImData=Q;break;case 440:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)f=e.dense?(a[g]||[])[p]:a[Lr({c:p,r:g})],f&&(f.l=Q[1]);break;case 2048:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)f=e.dense?(a[g]||[])[p]:a[Lr({c:p,r:g})],f&&f.l&&(f.l.Tooltip=Q[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;f=e.dense?(a[Q[0].r]||[])[Q[0].c]:a[Lr(Q[0])];var He=Ae[Q[2]];f||(e.dense?(a[Q[0].r]||(a[Q[0].r]=[]),f=a[Q[0].r][Q[0].c]={t:"z"}):f=a[Lr(Q[0])]={t:"z"},i.e.r=Math.max(i.e.r,Q[0].r),i.s.r=Math.min(i.s.r,Q[0].r),i.e.c=Math.max(i.e.c,Q[0].c),i.s.c=Math.min(i.s.c,Q[0].c)),f.c||(f.c=[]),m={a:Q[1],t:He.TxO.t},f.c.push(m)}break;case 2173:jFe(I[Q.ixfe],Q.ext);break;case 125:{if(!P.cellStyles)break;for(;Q.e>=Q.s;)ee[Q.e--]={width:Q.w/256,level:Q.level||0,hidden:!!(Q.flags&1)},de||(de=!0,nD(Q.w/256)),_0(ee[Q.e+1])}break;case 520:{var it={};Q.level!=null&&(ce[Q.r]=it,it.level=Q.level),Q.hidden&&(ce[Q.r]=it,it.hidden=!0),Q.hpt&&(ce[Q.r]=it,it.hpt=Q.hpt,it.hpx=ev(Q.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Xm(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[R]]=Q;break;case 161:a["!margins"]||Xm(a["!margins"]={}),a["!margins"].header=Q.header,a["!margins"].footer=Q.footer;break;case 574:Q.RTL&&(C.Views[0].RTL=!0);break;case 146:T=Q;break;case 2198:D=Q;break;case 140:w=Q;break;case 442:u?E.CodeName=Q||E.name:C.WBProps.CodeName=Q||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+R.toString(16)),t.l+=K}return r.SheetNames=Is(s).sort(function(we,re){return Number(we)-Number(re)}).map(function(we){return s[we].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&V.forEach(function(we,re){r.Sheets[r.SheetNames[re]]["!autofilter"]=we}),r.Strings=c,r.SSF=Va(Mr),P.enc&&(r.Encryption=P.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),X.names.length>0&&(C.Names=X.names),r.Workbook=C,r}var Zy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function GRe(t,e,r){var n=kr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=XV(n,Yj,Zy.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=kr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=XV(i,Jj,Zy.SI);for(var c in o)e[c]==null&&(e[c]=o[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(sre(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function zRe(t,e){var r=[],n=[],a=[],s=0,i,o=EV(Yj,"n"),c=EV(Jj,"n");if(t.Props)for(i=Is(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Is(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Are.indexOf(a[s][0])>-1||are.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&kr.utils.cfb_add(e,"/SummaryInformation",YV(n,Zy.SI,c,Jj)),(r.length||u.length)&&kr.utils.cfb_add(e,"/DocumentSummaryInformation",YV(r,Zy.DSI,o,Yj,u.length?u:null,Zy.UDI))}function one(t,e){e||(e={}),AD(e),k6(),e.codepage&&j6(e.codepage);var r,n;if(t.FullPaths){if(kr.find(t,"/encryption"))throw new Error("File is password-protected");r=kr.find(t,"!CompObj"),n=kr.find(t,"/Workbook")||kr.find(t,"/Book")}else{switch(e.type){case"base64":t=yc(jc(t));break;case"binary":t=yc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}vo(t,0),n={content:t}}var a,s;if(r&&VRe(r),e.bookProps&&!e.bookSheets)a={};else{var i=an?"buffer":"array";if(n&&n.content)a=KRe(n.content,e);else if((s=kr.find(t,"PerfectOffice_MAIN"))&&s.content)a=Wm.to_workbook(s.content,(e.type=i,e));else if((s=kr.find(t,"NativeContent_MAIN"))&&s.content)a=Wm.to_workbook(s.content,(e.type=i,e));else throw(s=kr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&kr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=iOe(t))}var o={};return t.FullPaths&&GRe(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function qRe(t,e){var r=e||{},n=kr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return kr.utils.cfb_add(n,a,lne(t,r)),r.biff==8&&(t.Props||t.Custprops)&&zRe(t,n),r.biff==8&&t.vbaraw&&oOe(n,kr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var eb={0:{f:xDe},1:{f:EDe},2:{f:KDe},3:{f:FDe},4:{f:TDe},5:{f:VDe},6:{f:XDe},7:{f:MDe},8:{f:n8e},9:{f:r8e},10:{f:e8e},11:{f:t8e},12:{f:IDe},13:{f:zDe},14:{f:DDe},15:{f:jDe},16:{f:Zre},17:{f:JDe},18:{f:UDe},19:{f:z6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:J8e},40:{},42:{},43:{f:Xke},44:{f:qke},45:{f:Zke},46:{f:tFe},47:{f:eFe},48:{},49:{f:bTe},50:{},51:{f:OFe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Nre},62:{f:WDe},63:{f:$Fe},64:{f:v8e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:el,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:m8e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:_De},148:{f:bDe,p:16},151:{f:c8e},152:{},153:{f:W8e},154:{},155:{},156:{f:z8e},157:{},158:{},159:{T:1,f:dke},160:{T:-1},161:{T:1,f:zp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:a8e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:kFe},336:{T:-1},337:{f:MFe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Xj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:wre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:u8e},427:{f:d8e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:f8e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:NDe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:o8e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Xj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tOe},633:{T:1},634:{T:-1},635:{T:1,f:ZFe},636:{T:-1},637:{f:CTe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:D8e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:y8e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},ak={6:{f:$B},10:{f:ph},12:{f:Xs},13:{f:Xs},14:{f:Ds},15:{f:Ds},16:{f:Wo},17:{f:Ds},18:{f:Ds},19:{f:Xs},20:{f:nH},21:{f:nH},23:{f:wre},24:{f:sH},25:{f:Ds},26:{},27:{},28:{f:yje},29:{},34:{f:Ds},35:{f:aH},38:{f:Wo},39:{f:Wo},40:{f:Wo},41:{f:Wo},42:{f:Ds},43:{f:Ds},47:{f:jke},49:{f:zPe},51:{f:Xs},60:{},61:{f:VPe},64:{f:Ds},65:{f:GPe},66:{f:Xs},77:{},80:{},81:{},82:{},85:{f:Xs},89:{},90:{},91:{},92:{f:PPe},93:{f:Nje},94:{},95:{f:Ds},96:{},97:{},99:{f:Ds},125:{f:Nre},128:{f:lje},129:{f:kPe},130:{f:Xs},131:{f:Ds},132:{f:Ds},133:{f:FPe},134:{},140:{f:Pje},141:{f:Xs},144:{},146:{f:Fje},151:{},152:{},153:{},154:{},155:{},156:{f:Xs},157:{},158:{},160:{f:Qje},161:{f:Rje},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:aje},190:{f:sje},193:{f:ph},197:{},198:{},199:{},200:{},201:{},202:{f:Ds},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xs},220:{},221:{f:Ds},222:{},224:{f:oje},225:{f:TPe},226:{f:ph},227:{},229:{f:bje},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:DPe},253:{f:WPe},255:{f:MPe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:fre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ds},353:{f:ph},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:fje},431:{f:Ds},432:{},433:{},434:{},437:{},438:{f:Eje},439:{f:Ds},440:{f:Sje},441:{},442:{f:Jb},443:{},444:{f:Xs},445:{},446:{},448:{f:ph},449:{f:QPe,r:2},450:{f:ph},512:{f:eH},513:{f:Uje},515:{f:dje},516:{f:YPe},517:{f:rH},519:{f:Vje},520:{f:LPe},523:{},545:{f:iH},549:{f:ZV},566:{},574:{f:$Pe},638:{f:nje},659:{},1048:{},1054:{f:ZPe},1084:{},1212:{f:gje},2048:{f:Bje},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:A_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ph},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Oje,r:12},2173:{f:PFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ds,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:pje,r:12},2197:{},2198:{f:CFe,r:12},2199:{},2200:{},2201:{},2202:{f:xje,r:12},2203:{f:ph},2204:{},2205:{},2206:{},2207:{},2211:{f:UPe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Mje},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:kje},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:eH},1:{},2:{f:zje},3:{f:Kje},4:{f:$je},5:{f:rH},7:{f:Wje},8:{},9:{f:A_},11:{},22:{f:Xs},30:{f:tje},31:{},32:{},33:{f:iH},36:{},37:{f:ZV},50:{f:Xje},62:{},52:{},67:{},68:{f:Xs},69:{},86:{},126:{},127:{f:Hje},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Yje},223:{},234:{},354:{},421:{},518:{f:$B},521:{f:A_},536:{f:sH},547:{f:aH},561:{},579:{},1030:{f:$B},1033:{f:A_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function or(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&$6(r)&&t.push(r)}}function WRe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return or(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function rw(t,e,r){return t||(t=Ot(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function XRe(t,e,r,n){var a=Ot(9);return rw(a,t,e),hre(r,n||"b",a),a}function YRe(t,e,r){var n=Ot(8+2*r.length);return rw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function JRe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Ei(Qa(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?or(t,2,qje(r,n,a)):or(t,3,Gje(r,n,a));return;case"b":case"e":or(t,5,XRe(r,n,e.v,e.t));return;case"s":case"str":or(t,4,YRe(r,n,(e.v||"").slice(0,255)));return}or(t,1,rw(null,r,n))}function ZRe(t,e,r,n){var a=Array.isArray(e),s=Bn(e["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Jr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=$s(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=ds(d)),i=c[d]+o;var A=a?(e[u]||[])[d]:e[i];A&&JRe(t,A,u,d)}}}function eMe(t,e){for(var r=e||{},n=ql(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return or(n,r.biff==4?1033:r.biff==3?521:9,eD(t,16,r)),ZRe(n,t.Sheets[t.SheetNames[a]],a,r),or(n,10),n.end()}function tMe(t,e,r){or(t,49,qPe({sz:12,name:"Arial"},r))}function rMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&or(t,1054,eje(a,e[a],r))})}function nMe(t,e){var r=Ot(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),or(t,2151,r),r=Ot(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),vre(Bn(e["!ref"]||"A1"),r),r.write_shift(4,4),or(t,2152,r)}function aMe(t,e){for(var r=0;r<16;++r)or(t,224,tH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){or(t,224,tH(n,0,e))})}function sMe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];or(t,440,Ije(n)),n[1].Tooltip&&or(t,2048,Tje(n))}delete e["!links"]}function iMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&or(t,125,Dje(v4(a,n),a))})}}function oMe(t,e,r,n,a){var s=16+V0(a.cellXfs,e,a);if(e.v==null&&!e.bf){or(t,513,wp(r,n,s));return}if(e.bf)or(t,6,k6e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ei(Qa(e.v)):e.v;or(t,515,Aje(r,n,i,s));break;case"b":case"e":or(t,517,uje(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=lD(a.Strings,e.v,a.revStrings);or(t,253,XPe(r,n,o,s))}else or(t,516,JPe(r,n,(e.v||"").slice(0,255),s,a));break;default:or(t,513,wp(r,n,s))}}function lMe(t,e,r){var n=ql(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,A="",h=[],f=Bn(s["!ref"]||"A1"),m=u?65536:16384;if(f.e.c>255||f.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,m-1)}or(n,2057,eD(r,16,e)),or(n,13,uu(1)),or(n,12,uu(100)),or(n,15,xl(!0)),or(n,17,xl(!1)),or(n,16,yp(.001)),or(n,95,xl(!0)),or(n,42,xl(!1)),or(n,43,xl(!1)),or(n,130,uu(1)),or(n,128,cje()),or(n,131,xl(!1)),or(n,132,xl(!1)),u&&iMe(n,s["!cols"]),or(n,512,rje(f,e)),u&&(s["!links"]=[]);for(var p=f.s.r;p<=f.e.r;++p){A=$s(p);for(var g=f.s.c;g<=f.e.c;++g){p===f.s.r&&(h[g]=ds(g)),d=h[g]+A;var x=c?(s[p]||[])[g]:s[d];x&&(oMe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=o.CodeName||o.name||a;return u&&or(n,574,KPe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&or(n,229,wje(s["!merges"])),u&&sMe(n,s),or(n,442,mre(y)),u&&nMe(n,s),or(n,10),n.end()}function cMe(t,e,r){var n=ql(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(or(n,2057,eD(t,5,r)),r.bookType=="xla"&&or(n,135),or(n,225,o?uu(1200):null),or(n,193,uPe(2)),c&&or(n,191),c&&or(n,192),or(n,226),or(n,92,jPe("SheetJS",r)),or(n,66,uu(o?1200:1252)),o&&or(n,353,uu(0)),o&&or(n,448),or(n,317,Lje(t.SheetNames.length)),o&&t.vbaraw&&or(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";or(n,442,mre(u))}or(n,156,uu(17)),or(n,25,xl(!1)),or(n,18,xl(!1)),or(n,19,uu(0)),o&&or(n,431,xl(!1)),o&&or(n,444,uu(0)),or(n,61,HPe()),or(n,64,xl(!1)),or(n,141,uu(0)),or(n,34,xl(Q8e(t)=="true")),or(n,14,xl(!0)),o&&or(n,439,xl(!1)),or(n,218,uu(0)),tMe(n,t,r),rMe(n,t.SSF,r),aMe(n,r),o&&or(n,352,xl(!1));var d=n.end(),A=ql();o&&or(A,140,jje()),o&&r.Strings&&WRe(A,252,RPe(r.Strings)),or(A,10);var h=A.end(),f=ql(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(o?12:11)+(o?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};or(f,133,OPe({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=f.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),$i(b)}function uMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Va(Mr)),t&&t.SSF&&(Tv(),A4(t.SSF),r.revssf=h4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,fD(r),r.cellXfs=[],V0(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=lMe(a,r,t);return n.unshift(cMe(t,n,r)),$i(n)}function lne(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Wl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return uMe(t,e);case 4:case 3:case 2:return eMe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function pH(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,c=qBe(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,A=0,h=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(o=0;o<x.length;++o){var y=x[o].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var I=0;I<m.length;++I){var T=m[I];T.s.c==d&&T.s.r<u&&u<=T.e.r&&(d=T.e.c+1,I=-1)}var C=Ur(y.slice(0,y.indexOf(">")));h=C.colspan?+C.colspan:1,((A=+C.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(A||1)-1,c:d+h-1}});var E=C.t||C["data-t"]||"";if(!b.length){d+=h;continue}if(b=jte(b),f.s.r>u&&(f.s.r=u),f.e.r<u&&(f.e.r=u),f.s.c>d&&(f.s.c=d),f.e.c<d&&(f.e.c=d),!b.length){d+=h;continue}var S={t:"s",v:b};r.raw||!b.trim().length||E=="s"||(b==="TRUE"?S={t:"b",v:!0}:b==="FALSE"?S={t:"b",v:!1}:isNaN(ld(b))?isNaN(Jx(b).getDate())||(S={t:"d",v:Qa(b)},r.cellDates||(S={t:"n",v:Ei(S.v)}),S.z=r.dateNF||Mr[14]):S={t:"n",v:ld(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=S):n[Lr({r:u,c:d})]=S,d+=h}}}}return n["!ref"]=Jr(f),m.length&&(n["!merges"]=m),n}function dMe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Lr({r,c:i}),A=n.dense?(t[r]||[])[i]:t[d],h=A&&A.v!=null&&(A.h||Q6(A.w||(xf(A),A.w)||""))||"",f={};o>1&&(f.rowspan=o),c>1&&(f.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":A&&(f["data-t"]=A&&A.t||"z",A.v!=null&&(f["data-v"]=A.v),A.z!=null&&(f["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+A.l.Target+'">'+h+"</a>")),f.id=(n.id||"sjs")+"-"+d,s.push(ir("td",h,f))}}var m="<tr>";return m+s.join("")+"</tr>"}var AMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',fMe="</body></html>";function hMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Q0(pH(r[0],e),e);var n=pD();return r.forEach(function(a,s){gD(n,pH(a,e),"Sheet"+(s+1))}),n}function mMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function cne(t,e){var r=e||{},n=r.header!=null?r.header:AMe,a=r.footer!=null?r.footer:fMe,s=[n],i=Wl(t["!ref"]);r.dense=Array.isArray(t),s.push(mMe(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(dMe(t,i,o,r));return s.push("</table>"+a),s.join("")}function une(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?As(n.origin):n.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Wl(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var A=[],h=0,f=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<o.length&&p<c;++m){var w=o[m];if(gH(w)){if(n.display)continue;f[p]={hidden:!0}}var I=w.children;for(g=x=0;g<I.length;++g){var T=I[g];if(!(n.display&&gH(T))){var C=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):jte(T.innerHTML),E=T.getAttribute("data-z")||T.getAttribute("z");for(h=0;h<A.length;++h){var S=A[h];S.s.c==x+s&&S.s.r<p+a&&p+a<=S.e.r&&(x=S.e.c+1-s,h=-1)}b=+T.getAttribute("colspan")||1,((y=+T.getAttribute("rowspan")||1)>1||b>1)&&A.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var O={t:"s",v:C},B=T.getAttribute("data-t")||T.getAttribute("t")||"";C!=null&&(C.length==0?O.t=B||"z":n.raw||C.trim().length==0||B=="s"||(C==="TRUE"?O={t:"b",v:!0}:C==="FALSE"?O={t:"b",v:!1}:isNaN(ld(C))?isNaN(Jx(C).getDate())||(O={t:"d",v:Qa(C)},n.cellDates||(O={t:"n",v:Ei(O.v)}),O.z=n.dateNF||Mr[14]):O={t:"n",v:ld(C)})),O.z===void 0&&E!=null&&(O.z=E);var P="",D=T.getElementsByTagName("A");if(D&&D.length)for(var W=0;W<D.length&&!(D[W].hasAttribute("href")&&(P=D[W].getAttribute("href"),P.charAt(0)!="#"));++W);P&&P.charAt(0)!="#"&&(O.l={Target:P}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=O):t[Lr({c:x+s,r:p+a})]=O,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return A.length&&(t["!merges"]=(t["!merges"]||[]).concat(A)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=Jr(u),p>=c&&(t["!fullref"]=Jr((u.e.r=o.length-m+p-1+a,u))),t}function dne(t,e){var r=e||{},n=r.dense?[]:{};return une(n,t,e)}function pMe(t,e){return Q0(dne(t,e),e)}function gH(t){var e="",r=gMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function gMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function xMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=In(e.replace(/<[^>]*>/g,""));return[r]}var xH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Ane(t,e){var r=e||{},n=V6(t),a=[],s,i,o={name:""},c="",u=0,d,A,h={},f=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],I=-1,T=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,S={},O=[],B={},P=0,D=0,W=[],Ae=1,ee=1,ce=[],de={Names:[]},X={},pe=["",""],Se=[],k={},F="",V=0,M=!1,L=!1,q=0;for(q2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=q2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?m["!ref"]=Jr(C):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(m["!fullref"]=m["!ref"],C.e.r=r.sheetRows-1,m["!ref"]=Jr(C)),O.length&&(m["!merges"]=O),W.length&&(m["!rows"]=W),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),f.push(d.name),h[d.name]=m,L=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=Ur(p[0],!1),I=T=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,m=r.dense?[]:{},O=[],W=[],L=!0);break;case"table-row-group":p[1]==="/"?--E:++E;break;case"table-row":case"":if(p[1]==="/"){I+=Ae,Ae=1;break}if(A=Ur(p[0],!1),A.?I=A.-1:I==-1&&(I=0),Ae=+A["number-rows-repeated"]||1,Ae<10)for(q=0;q<Ae;++q)E>0&&(W[I+q]={level:E});T=-1;break;case"covered-table-cell":p[1]!=="/"&&++T,r.sheetStubs&&(r.dense?(m[I]||(m[I]=[]),m[I][T]={t:"z"}):m[Lr({r:I,c:T})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++T,x=Ur(p[0],!1),ee=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=fH(In(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=In(x["string-value"]||""),r.dense?(m[I]||(m[I]=[]),m[I][T]=g):m[Lr({r:I,c:T})]=g),T+=ee-1;else if(p[1]!=="/"){++T,y="",b=0,w=[],ee=1;var R=Ae?I+Ae-1:I;if(T>C.e.c&&(C.e.c=T),T<C.s.c&&(C.s.c=T),I<C.s.r&&(C.s.r=I),R>C.e.r&&(C.e.r=R),x=Ur(p[0],!1),Se=[],k={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=In(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(P=parseInt(x["number-matrix-rows-spanned"],10)||0,D=parseInt(x["number-matrix-columns-spanned"],10)||0,B={s:{r:I,c:T},e:{r:I+P-1,c:T+D-1}},g.F=Jr(B),ce.push([B,g.F])),x.formula)g.f=fH(x.formula);else for(q=0;q<ce.length;++q)I>=ce[q][0].s.r&&I<=ce[q][0].e.r&&T>=ce[q][0].s.c&&T<=ce[q][0].e.c&&(g.F=ce[q][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(P=parseInt(x["number-rows-spanned"],10)||0,D=parseInt(x["number-columns-spanned"],10)||0,B={s:{r:I,c:T},e:{r:I+P-1,c:T+D-1}},O.push(B)),x["number-columns-repeated"]&&(ee=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Ra(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=Qa(x["date-value"]),r.cellDates||(g.t="n",g.v=Ei(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=KBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=m4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=In(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(M=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),M=b==0),X.Target&&(g.l=X),Se.length>0&&(g.c=Se,Se=[]),y&&r.cellText!==!1&&(g.w=y),M&&(g.t="z",delete g.v),(!M||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=I))for(var K=0;K<Ae;++K){if(ee=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[I+K]||(m[I+K]=[]),m[I+K][T]=K==0?g:Va(g);--ee>0;)m[I+K][T+ee]=Va(g);else for(m[Lr({r:I+K,c:T})]=g;--ee>0;)m[Lr({r:I+K,c:T+ee})]=Va(g);C.e.c<=T&&(C.e.c=T)}ee=parseInt(x["number-columns-repeated"]||"1",10),T+=ee-1,ee=0,g={},y="",w=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;k.t=y,w.length&&(k.R=w),k.a=F,Se.push(k)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);F="",V=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?F=n.slice(V,p.index):V=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(S[o.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",o=Ur(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Ur(p[0],!1),c+=xH[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Ur(p[0],!1),c+=xH[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=Ur(p[0],!1),pe=KB(i["cell-range-address"]);var Z={Name:i.name,Ref:pe[0]+"!"+pe[1]};L&&(Z.Sheet=f.length),de.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var te=xMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+te[0]}else Ur(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{pe=KB(Ur(p[0])["target-range-address"]),h[pe[0]]["!autofilter"]={ref:pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(X=Ur(p[0],!1),!X.href)break;X.Target=In(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(pe=KB(X.Target.slice(1)),X.Target="#"+pe[0]+"!"+pe[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var Q={Sheets:h,SheetNames:f,Workbook:de};return r.bookSheets&&delete Q.Sheets,Q}function vH(t,e){e=e||{},cu(t,"META-INF/manifest.xml")&&KTe(Ws(t,"META-INF/manifest.xml"),e);var r=bc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Ane(ca(r),e);return cu(t,"meta.xml")&&(n.Props=rre(Ws(t,"meta.xml"))),n}function yH(t,e){return Ane(t,e)}var vMe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+z2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Gs+e}}(),bH=function(){var t=function(s){return ra(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+ra(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,A=Wl(s["!ref"]||"A1"),h=s["!merges"]||[],f=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=A.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<A.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=A.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<A.s.c;++d)c.push(e);for(;d<=A.e.c;++d){var x=!1,y={},b="";for(f=0;f!=h.length;++f)if(!(h[f].s.c>d)&&!(h[f].s.r>u)&&!(h[f].e.c<d)&&!(h[f].e.r<u)){(h[f].s.c!=d||h[f].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[f].e.c-h[f].s.c+1,y["table:number-rows-spanned"]=h[f].e.r-h[f].s.r+1;break}if(x){c.push(r);continue}var w=Lr({r:u,c:d}),I=m?(s[u]||[])[d]:s[w];if(I&&I.f&&(y["table:formula"]=ra(L6e(I.f)),I.F&&I.F.slice(0,w.length)==w)){var T=Wl(I.F);y["table:number-matrix-columns-spanned"]=T.e.c-T.s.c+1,y["table:number-matrix-rows-spanned"]=T.e.r-T.s.r+1}if(!I){c.push(e);continue}switch(I.t){case"b":b=I.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=I.v?"true":"false";break;case"n":b=I.w||String(I.v||0),y["office:value-type"]="float",y["office:value"]=I.v||0;break;case"s":case"str":b=I.v==null?"":I.v,y["office:value-type"]="string";break;case"d":b=I.w||Qa(I.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=Qa(I.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var C=t(b);if(I.l&&I.l.Target){var E=I.l.Target;E=E.charAt(0)=="#"?"#"+U6e(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),C=ir("text:a",C,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+ir("table:table-cell",ir("text:p",C,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var A=u["!cols"][d];if(A.width==null&&A.wpx==null&&A.wch==null)continue;_0(A),A.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var A=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+A+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Gs],u=z2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=z2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(tre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var A=0;A!=i.SheetNames.length;++A)c.push(n(i.Sheets[i.SheetNames[A]],i,A));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function fne(t,e){if(e.bookType=="fods")return bH(t,e);var r=M6(),n="",a=[],s=[];return n="mimetype",tn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",tn(r,n,bH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",tn(r,n,vMe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",tn(r,n,Gs+tre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",tn(r,n,qTe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",tn(r,n,GTe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Np(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ca(U0(t))}function yMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):yc(Xd(t))}function bMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function E0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function wH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function wMe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function NMe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function tb(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Xn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ss(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Pn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=tb(t,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);o=t.slice(c,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=tb(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function lo(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Xn(n*8+a.type)),a.type==2&&e.push(Xn(a.data.length)),e.push(a.data))})}),E0(e)}function dD(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function nu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=tb(t,n),s=Pn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ss(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Pn(o.data),u=Ss(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Ss(s[3][0].data)>>>0>0),r.push(i)}return r}function Tg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Xn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Xn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Xn(i.data.length)}],n[2].push({data:lo(i.meta),type:2})});var s=lo(n);e.push(Xn(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),E0(e)}function _Me(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=tb(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[E0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=E0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function au(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(_Me(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return E0(e)}function Pg(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Xn(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return E0(e)}function CMe(t,e,r,n){var a=Np(t),s=a.getUint32(4,!0),i=(n>1?12:8)+wH(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=wH(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var A;switch(t[2]){case 0:break;case 2:A={t:"n",v:u};break;case 3:A={t:"s",v:e[c]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(o>-1)A={t:"s",v:r[o]};else if(c>-1)A={t:"s",v:e[c]};else if(!isNaN(u))A={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return A}function EMe(t,e,r){var n=Np(t),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=wMe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var A;switch(t[1]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:e[o]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(i>-1)A={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:A={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return A}function zB(t,e){var r=new Uint8Array(32),n=Np(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,NMe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function qB(t,e){var r=new Uint8Array(32),n=Np(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function SMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return CMe(t,e,r,t[0]);case 5:return EMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function $o(t){var e=Pn(t);return tb(e[1][0].data)}function NH(t,e){var r=Pn(e.data),n=Ss(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Pn(i.data),c=Ss(o[1][0].data)>>>0;switch(n){case 1:s[c]=sk(o[3][0].data);break;case 8:{var u=t[$o(o[9][0].data)][0],d=Pn(u.data),A=t[$o(d[1][0].data)][0],h=Ss(A.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var f=Pn(A.data);s[c]=f[3].map(function(m){return sk(m.data)}).join("")}break}}),s}function IMe(t,e){var r,n,a,s,i,o,c,u,d,A,h,f,m,p,g=Pn(t),x=Ss(g[1][0].data)>>>0,y=Ss(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Ss(g[8][0].data)>0||!1,w,I;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(o=(i=g[7])==null?void 0:i[0])==null?void 0:o.data,I=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((A=(d=g[4])==null?void 0:d[0])!=null&&A.data&&e!=1)w=(f=(h=g[4])==null?void 0:h[0])==null?void 0:f.data,I=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var T=b?4:1,C=Np(w),E=[],S=0;S<w.length/2;++S){var O=C.getUint16(S*2,!0);O<65535&&E.push([S,O])}if(E.length!=y)throw"Expected ".concat(y," cells, found ").concat(E.length);var B=[];for(S=0;S<E.length-1;++S)B[E[S][0]]=I.subarray(E[S][1]*T,E[S+1][1]*T);return E.length>=1&&(B[E[E.length-1][0]]=I.subarray(E[E.length-1][1]*T)),{R:x,cells:B}}function BMe(t,e){var r,n=Pn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ss(n[7][0].data)>>>0>0?1:0:-1,s=dD(n[5],function(i){return IMe(i,a)});return{nrows:Ss(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function TMe(t,e,r){var n,a=Pn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ss(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ss(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Jr(s);var i=Pn(a[4][0].data),o=NH(t,t[$o(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?NH(t,t[$o(i[17][0].data)][0]):[],u=Pn(i[3][0].data),d=0;u[1].forEach(function(A){var h=Pn(A.data),f=t[$o(h[2][0].data)][0],m=Ss(f.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=BMe(t,f);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=Lr({r:d+x,c:b}),I=SMe(y,o,c);I&&(r[w]=I)})}),d+=p.nrows})}function PMe(t,e){var r=Pn(e.data),n={"!ref":"A1"},a=t[$o(r[2][0].data)],s=Ss(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return TMe(t,a[0],n),n}function jMe(t,e){var r,n=Pn(e.data),a={name:(r=n[1])!=null&&r[0]?sk(n[1][0].data):"",sheets:[]},s=dD(n[2],$o);return s.forEach(function(i){t[i].forEach(function(o){var c=Ss(o.meta[1][0].data);c==6e3&&a.sheets.push(PMe(t,o))})}),a}function kMe(t,e){var r=pD(),n=Pn(e.data),a=dD(n[1],$o);if(a.forEach(function(s){t[s].forEach(function(i){var o=Ss(i.meta[1][0].data);if(o==2){var c=jMe(t,i);c.sheets.forEach(function(u,d){gD(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function WB(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=au(c.content)}catch(A){return console.log("?? "+c.content.length+" "+(A.message||A))}var d;try{d=nu(u)}catch(A){return console.log("## "+(A.message||A))}d.forEach(function(A){s[A.id]=A.messages,i.push(A.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ss(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Ss(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return kMe(s,o)}function FMe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Ss(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Np(t[7][0].data),d=0,A=[],h=Np(t[4][0].data),f=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,f,!0);var g,x;switch(typeof e[p]){case"string":g=zB({t:"s",v:e[p]},r),x=qB({t:"s",v:e[p]},r);break;case"number":g=zB({t:"n",v:e[p]},r),x=qB({t:"n",v:e[p]},r);break;case"boolean":g=zB({t:"b",v:e[p]},r),x=qB({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}A.push(g),d+=g.length,m.push(x),f+=x.length,++c}for(t[2][0].data=Xn(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=E0(A),t[3][0].data=E0(m),c}function OMe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Wl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Jr(n)));var s=iS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(F){return F.forEach(function(V){typeof V=="string"&&i.push(V)})});var o={},c=[],u=kr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(F,V){return[F,u.FullPaths[V]]}).forEach(function(F){var V=F[0],M=F[1];if(V.type==2&&V.name.match(/\.iwa/)){var L=V.content,q=au(L),R=nu(q);R.forEach(function(K){c.push(K.id),o[K.id]={deps:[],location:M,type:Ss(K.messages[0].meta[1][0].data)}})}}),c.sort(function(F,V){return F-V});var d=c.filter(function(F){return F>1}).map(function(F){return[F,Xn(F)]});u.FileIndex.map(function(F,V){return[F,u.FullPaths[V]]}).forEach(function(F){var V=F[0];if(F[1],!!V.name.match(/\.iwa/)){var M=nu(au(V.content));M.forEach(function(L){L.messages.forEach(function(q){d.forEach(function(R){L.messages.some(function(K){return Ss(K.meta[1][0].data)!=11006&&bMe(K.data,R[1])})&&o[R[0]].deps.push(L.id)})})})}});for(var A=kr.find(u,o[1].location),h=nu(au(A.content)),f,m=0;m<h.length;++m){var p=h[m];p.id==1&&(f=p)}var g=$o(Pn(f.messages[0].data)[1][0].data);for(A=kr.find(u,o[g].location),h=nu(au(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);for(g=$o(Pn(f.messages[0].data)[2][0].data),A=kr.find(u,o[g].location),h=nu(au(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);for(g=$o(Pn(f.messages[0].data)[2][0].data),A=kr.find(u,o[g].location),h=nu(au(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);var x=Pn(f.messages[0].data);{x[6][0].data=Xn(n.e.r+1),x[7][0].data=Xn(n.e.c+1);var y=$o(x[46][0].data),b=kr.find(u,o[y].location),w=nu(au(b.content));{for(var I=0;I<w.length&&w[I].id!=y;++I);if(w[I].id!=y)throw"Bad ColumnRowUIDMapArchive";var T=Pn(w[I].messages[0].data);T[1]=[],T[2]=[],T[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:Xn(C+420690)}],T[1].push({type:2,data:lo(E)}),T[2].push({type:0,data:Xn(C)}),T[3].push({type:0,data:Xn(C)})}T[4]=[],T[5]=[],T[6]=[];for(var S=0;S<=n.e.r;++S)E=[],E[1]=E[2]=[{type:0,data:Xn(S+726270)}],T[4].push({type:2,data:lo(E)}),T[5].push({type:0,data:Xn(S)}),T[6].push({type:0,data:Xn(S)});w[I].messages[0].data=lo(T)}b.content=Pg(Tg(w)),b.size=b.content.length,delete x[46];var O=Pn(x[4][0].data);{O[7][0].data=Xn(n.e.r+1);var B=Pn(O[1][0].data),P=$o(B[2][0].data);b=kr.find(u,o[P].location),w=nu(au(b.content));{if(w[0].id!=P)throw"Bad HeaderStorageBucket";var D=Pn(w[0].messages[0].data);for(S=0;S<s.length;++S){var W=Pn(D[2][0].data);W[1][0].data=Xn(S),W[4][0].data=Xn(s[S].length),D[2][S]={type:D[2][0].type,data:lo(W)}}w[0].messages[0].data=lo(D)}b.content=Pg(Tg(w)),b.size=b.content.length;var Ae=$o(O[2][0].data);b=kr.find(u,o[Ae].location),w=nu(au(b.content));{if(w[0].id!=Ae)throw"Bad HeaderStorageBucket";for(D=Pn(w[0].messages[0].data),C=0;C<=n.e.c;++C)W=Pn(D[2][0].data),W[1][0].data=Xn(C),W[4][0].data=Xn(n.e.r+1),D[2][C]={type:D[2][0].type,data:lo(W)};w[0].messages[0].data=lo(D)}b.content=Pg(Tg(w)),b.size=b.content.length;var ee=$o(O[4][0].data);(function(){for(var F=kr.find(u,o[ee].location),V=nu(au(F.content)),M,L=0;L<V.length;++L){var q=V[L];q.id==ee&&(M=q)}var R=Pn(M.messages[0].data);{R[3]=[];var K=[];i.forEach(function(Q,ye){K[1]=[{type:0,data:Xn(ye)}],K[2]=[{type:0,data:Xn(1)}],K[3]=[{type:2,data:yMe(Q)}],R[3].push({type:2,data:lo(K)})})}M.messages[0].data=lo(R);var Z=Tg(V),te=Pg(Z);F.content=te,F.size=F.content.length})();var ce=Pn(O[3][0].data);{var de=ce[1][0];delete ce[2];var X=Pn(de.data);{var pe=$o(X[2][0].data);(function(){for(var F=kr.find(u,o[pe].location),V=nu(au(F.content)),M,L=0;L<V.length;++L){var q=V[L];q.id==pe&&(M=q)}var R=Pn(M.messages[0].data);{delete R[6],delete ce[7];var K=new Uint8Array(R[5][0].data);R[5]=[];for(var Z=0,te=0;te<=n.e.r;++te){var Q=Pn(K);Z+=FMe(Q,s[te],i),Q[1][0].data=Xn(te),R[5].push({data:lo(Q),type:2})}R[1]=[{type:0,data:Xn(n.e.c+1)}],R[2]=[{type:0,data:Xn(n.e.r+1)}],R[3]=[{type:0,data:Xn(Z)}],R[4]=[{type:0,data:Xn(n.e.r+1)}]}M.messages[0].data=lo(R);var ye=Tg(V),Y=Pg(ye);F.content=Y,F.size=F.content.length})()}de.data=lo(X)}O[3][0].data=lo(ce)}x[4][0].data=lo(O)}f.messages[0].data=lo(x);var Se=Tg(h),k=Pg(Se);return A.content=k,A.size=A.content.length,u}function hne(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function AD(t){hne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function fD(t){hne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function DMe(t){return un.WS.indexOf(t)>-1?"sheet":t==un.CS?"chart":t==un.DS?"dialog":t==un.MS?"macro":t&&t.length?t:"sheet"}function RMe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,DMe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function MMe(t,e,r,n,a,s,i,o,c,u,d,A){try{s[n]=Wy(bc(t,r,!0),e);var h=Ws(t,e),f;switch(o){case"sheet":f=iRe(h,e,a,c,s[n],u,d,A);break;case"chart":if(f=oRe(h,e,a,c,s[n],u,d,A),!f||!f["!drawel"])break;var m=my(f["!drawel"].Target,e),p=W2(m),g=zFe(bc(t,m,!0),Wy(bc(t,p,!0),m)),x=my(g,m),y=W2(x);f=F8e(bc(t,x,!0),x,c,Wy(bc(t,y,!0),x),u,f);break;case"macro":f=lRe(h,e,a,c,s[n],u,d,A);break;case"dialog":f=cRe(h,e,a,c,s[n],u,d,A);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=f;var b=[];s&&s[n]&&Is(s[n]).forEach(function(w){var I="";if(s[n][w].Type==un.CMNT){I=my(s[n][w].Target,e);var T=fRe(Ws(t,I,!0),I,c);if(!T||!T.length)return;lH(f,T,!1)}s[n][w].Type==un.TCMNT&&(I=my(s[n][w].Target,e),b=b.concat(WFe(Ws(t,I,!0),c)))}),b&&b.length&&lH(f,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function Yc(t){return t.charAt(0)=="/"?t.slice(1):t}function LMe(t,e){if(Tv(),e=e||{},AD(e),cu(t,"META-INF/manifest.xml")||cu(t,"objectdata.xml"))return vH(t,e);if(cu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof WB<"u"){if(t.FileIndex)return WB(t);var r=kr.utils.cfb_new();return BV(t).forEach(function(W){tn(r,W,XBe(t,W))}),WB(r)}throw new Error("Unsupported NUMBERS file")}if(!cu(t,"[Content_Types].xml"))throw cu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):cu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=BV(t),a=HTe(bc(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Ws(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Ws(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Xy=[],a.sst)try{Xy=ARe(Ws(t,Yc(a.sst)),a.sst,e)}catch(W){if(e.WTF)throw W}e.cellStyles&&a.themes.length&&(c=dRe(bc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=uRe(Ws(t,Yc(a.style)),a.style,c,e))}a.links.map(function(W){try{var Ae=Wy(bc(t,W2(Yc(W))),W);return mRe(Ws(t,Yc(W)),Ae,W,e)}catch{}});var d=sRe(Ws(t,Yc(a.workbooks[0])),a.workbooks[0],e),A={},h="";a.coreprops.length&&(h=Ws(t,Yc(a.coreprops[0]),!0),h&&(A=rre(h)),a.extprops.length!==0&&(h=Ws(t,Yc(a.extprops[0]),!0),h&&XTe(h,A,e)));var f={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=bc(t,Yc(a.custprops[0]),!0),h&&(f=JTe(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Ae){return Ae.name}):A.Worksheets&&A.SheetNames.length>0&&(i=A.SheetNames),e.bookProps&&(m.Props=A,m.Custprops=f),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=hRe(Ws(t,Yc(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;A.Worksheets=w.length,A.SheetNames=[];for(var I=0;I!=w.length;++I)A.SheetNames[I]=w[I].name}var T=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),E=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");cu(t,E)||(E="xl/_rels/workbook."+T+".rels");var S=Wy(bc(t,E,!0),E.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=pRe(Ws(t,Yc(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=YFe(Ws(t,Yc(a.people[0])),e)),S&&(S=RMe(S,d.Sheets));var O=Ws(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=A.Worksheets;++g){var B="sheet";if(S&&S[g]?(y="xl/"+S[g][1].replace(/[\/]?xl\//,""),cu(t,y)||(y=S[g][1]),cu(t,y)||(y=E.replace(/_rels\/.*$/,"")+S[g][1]),B=S[g][2]):(y="xl/worksheets/sheet"+(g+1-O)+"."+T,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(A.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var P=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==g&&(P=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==A.SheetNames[g].toLowerCase()&&(P=1);if(!P)continue e}}MMe(t,y,b,A.SheetNames[g],g,x,i,B,e,d,c,u)}return m={Directory:a,Workbook:d,Props:A,Custprops:f,Deps:p,Sheets:i,SheetNames:A.SheetNames,Strings:Xy,Styles:u,Themes:c,SSF:Va(Mr)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(W,Ae){W=W.replace(/^Root Entry[\/]/,""),m.keys.push(W),m.files[W]=t.FileIndex[Ae]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Ws(t,Yc(a.vba[0]),!0):a.defaults&&a.defaults.bin===sOe&&(m.vbaraw=Ws(t,"xl/vbaProject.bin",!0))),m}function UMe(t,e){var r=e||{},n="Workbook",a=kr.find(t,n);try{if(n="/!DataSpaces/Version",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(pke(a.content),n="/!DataSpaces/DataSpaceMap",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=xke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=vke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);bke(a.content)}catch{}if(n="/EncryptionInfo",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=wke(a.content);if(n="/EncryptedPackage",a=kr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function QMe(t,e){return e.bookType=="ods"?fne(t,e):e.bookType=="numbers"?OMe(t,e):e.bookType=="xlsb"?VMe(t,e):HMe(t,e)}function VMe(t,e){fx=1024,t&&!t.SSF&&(t.SSF=Va(Mr)),t&&t.SSF&&(Tv(),A4(t.SSF),e.revssf=h4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Yy?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Qre.indexOf(e.bookType)>-1,a=J6();fD(e=e||{});var s=M6(),i="",o=0;if(e.cellXfs=[],V0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",tn(s,i,nre(t.Props,e)),a.coreprops.push(i),Jn(e.rels,2,i,un.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,tn(s,i,ire(t.Props)),a.extprops.push(i),Jn(e.rels,3,i,un.EXT_PROPS),t.Custprops!==t.Props&&Is(t.Custprops||{}).length>0&&(i="docProps/custom.xml",tn(s,i,ore(t.Custprops)),a.custprops.push(i),Jn(e.rels,4,i,un.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},A=t.Sheets[t.SheetNames[o-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,tn(s,i,xRe(o-1,i,e,t,d)),a.sheets.push(i),Jn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,un.WS[0])}if(A){var f=A["!comments"],m=!1,p="";f&&f.length>0&&(p="xl/comments"+o+"."+r,tn(s,p,bRe(f,p)),a.comments.push(p),Jn(d,-1,"../comments"+o+"."+r,un.CMNT),m=!0),A["!legacy"]&&m&&tn(s,"xl/drawings/vmlDrawing"+o+".vml",Lre(o,A["!comments"])),delete A["!comments"],delete A["!legacy"]}d["!id"].rId1&&tn(s,W2(i),Ix(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,tn(s,i,yRe(e.Strings,i,e)),a.strs.push(i),Jn(e.wbrels,-1,"sharedStrings."+r,un.SST)),i="xl/workbook."+r,tn(s,i,gRe(t,i)),a.workbooks.push(i),Jn(e.rels,1,i,un.WB),i="xl/theme/theme1.xml",tn(s,i,aD(t.Themes,e)),a.themes.push(i),Jn(e.wbrels,-1,"theme/theme1.xml",un.THEME),i="xl/styles."+r,tn(s,i,vRe(t,i,e)),a.styles.push(i),Jn(e.wbrels,-1,"styles."+r,un.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",tn(s,i,t.vbaraw),a.vba.push(i),Jn(e.wbrels,-1,"vbaProject.bin",un.VBA)),i="xl/metadata."+r,tn(s,i,wRe(i)),a.metadata.push(i),Jn(e.wbrels,-1,"metadata."+r,un.XLMETA),tn(s,"[Content_Types].xml",ere(a,e)),tn(s,"_rels/.rels",Ix(e.rels)),tn(s,"xl/_rels/workbook."+r+".rels",Ix(e.wbrels)),delete e.revssf,delete e.ssf,s}function HMe(t,e){fx=1024,t&&!t.SSF&&(t.SSF=Va(Mr)),t&&t.SSF&&(Tv(),A4(t.SSF),e.revssf=h4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Yy?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Qre.indexOf(e.bookType)>-1,a=J6();fD(e=e||{});var s=M6(),i="",o=0;if(e.cellXfs=[],V0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",tn(s,i,nre(t.Props,e)),a.coreprops.push(i),Jn(e.rels,2,i,un.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,tn(s,i,ire(t.Props)),a.extprops.push(i),Jn(e.rels,3,i,un.EXT_PROPS),t.Custprops!==t.Props&&Is(t.Custprops||{}).length>0&&(i="docProps/custom.xml",tn(s,i,ore(t.Custprops)),a.custprops.push(i),Jn(e.rels,4,i,un.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var A={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,tn(s,i,Jre(o-1,e,t,A)),a.sheets.push(i),Jn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,un.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+o+"."+r,tn(s,g,XFe(m,d,e)),a.threadedcomments.push(g),Jn(A,-1,"../threadedComments/threadedComment"+o+"."+r,un.TCMNT)),g="xl/comments"+o+"."+r,tn(s,g,Ure(m)),a.comments.push(g),Jn(A,-1,"../comments"+o+"."+r,un.CMNT),p=!0}h["!legacy"]&&p&&tn(s,"xl/drawings/vmlDrawing"+o+".vml",Lre(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}A["!id"].rId1&&tn(s,W2(i),Ix(A))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,tn(s,i,Sre(e.Strings,e)),a.strs.push(i),Jn(e.wbrels,-1,"sharedStrings."+r,un.SST)),i="xl/workbook."+r,tn(s,i,nne(t)),a.workbooks.push(i),Jn(e.rels,1,i,un.WB),i="xl/theme/theme1.xml",tn(s,i,aD(t.Themes,e)),a.themes.push(i),Jn(e.wbrels,-1,"theme/theme1.xml",un.THEME),i="xl/styles."+r,tn(s,i,Ore(t,e)),a.styles.push(i),Jn(e.wbrels,-1,"styles."+r,un.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",tn(s,i,t.vbaraw),a.vba.push(i),Jn(e.wbrels,-1,"vbaProject.bin",un.VBA)),i="xl/metadata."+r,tn(s,i,Mre()),a.metadata.push(i),Jn(e.wbrels,-1,"metadata."+r,un.XLMETA),d.length>1&&(i="xl/persons/person.xml",tn(s,i,JFe(d)),a.people.push(i),Jn(e.wbrels,-1,"persons/person.xml",un.PEOPLE)),tn(s,"[Content_Types].xml",ere(a,e)),tn(s,"_rels/.rels",Ix(e.rels)),tn(s,"xl/_rels/workbook."+r+".rels",Ix(e.wbrels)),delete e.revssf,delete e.ssf,s}function hD(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=jc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $Me(t,e){return kr.find(t,"EncryptedPackage")?UMe(t,e):one(t,e)}function KMe(t,e){var r,n=t,a=e||{};return a.type||(a.type=an&&Buffer.isBuffer(t)?"buffer":"base64"),r=Bte(n,a),LMe(r,a)}function mne(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return nk(t.slice(r),e);default:break e}return Zx.to_workbook(t,e)}function GMe(t,e){var r="",n=hD(t,e);switch(e.type){case"base64":r=jc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=vp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ca(r)),e.type="binary",mne(r,e)}function zMe(t,e){var r=t;return e.type=="base64"&&(r=jc(r)),r=H2.utils.decode(1200,r.slice(2),"str"),e.type="binary",mne(r,e)}function qMe(t){return t.match(/[^\x00-\x7F]/)?Xd(t):t}function XB(t,e,r,n){return n?(r.type="string",Zx.to_workbook(t,r)):Zx.to_workbook(e,r)}function sS(t,e){k6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return sS(new Uint8Array(t),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Tx={},r.dateNF&&(Tx.dateNF=r.dateNF),r.type||(r.type=an&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=an?"buffer":"binary",n=VBe(t),typeof Uint8Array<"u"&&!an&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=qMe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Va(r),r.type="array",sS(F6(n),r)}switch((a=hD(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return $Me(kr.read(n,r),r);break;case 9:if(a[1]<=8)return one(n,r);break;case 60:return nk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return Zje(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Cre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?KMe(n,r):XB(t,n,r,s);case 239:return a[3]===60?nk(n,r):XB(t,n,r,s);case 255:if(a[1]===254)return zMe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Wm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Wm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return rk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return jre.to_workbook(n,r);break;case 10:case 13:case 32:return GMe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Jje.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?rk.to_workbook(n,r):XB(t,n,r,s)}function pne(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Wb(e.file,kr.write(t,{type:an?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return kr.write(t,e)}function WMe(t,e){var r=Va(e||{}),n=QMe(t,r);return XMe(n,r)}function XMe(t,e){var r={},n=an?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?kr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(d4(a))}return e.password&&typeof encrypt_agile<"u"?pne(encrypt_agile(a,e.password),e):e.type==="file"?Wb(e.file,a):e.type=="string"?ca(a):a}function YMe(t,e){var r=e||{},n=qRe(t,r);return pne(n,r)}function Vd(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return $2(Xd(n));case"binary":return Xd(n);case"string":return t;case"file":return Wb(e.file,n,"utf8");case"buffer":return an?Tf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Vd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function JMe(t,e){switch(e.type){case"base64":return $2(t);case"binary":return t;case"string":return t;case"file":return Wb(e.file,t,"binary");case"buffer":return an?Tf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function p_(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?$2(r):e.type=="string"?ca(r):r;case"file":return Wb(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function y4(t,e){k6(),$8e(t);var r=Va(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=y4(t,r);return r.type="array",d4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Vd(QRe(t,r),r);case"slk":case"sylk":return Vd(_re.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Vd(cne(t.Sheets[t.SheetNames[a]],r),r);case"txt":return JMe(gne(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Vd(mD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Vd(Cre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return p_(rk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Vd(Zx.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Vd(jre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Vd(Ere.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Vd(fne(t,r),r);case"wk1":return p_(Wm.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return p_(Wm.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),p_(lne(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),YMe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return WMe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ZMe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function eLe(t,e,r){var n={};return n.type="file",n.file=e,ZMe(n),y4(t,n)}function tLe(t,e,r,n,a,s,i,o){var c=$s(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),A=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var f=e.s.c;f<=e.e.c;++f){var m=i?t[r][f]:t[n[f]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[f]!=null&&(h[s[f]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[f]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[f]]=null;else if(u!==void 0)h[s[f]]=u;else if(d&&p===null)h[s[f]]=null;else continue;else h[s[f]]=d&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?p:xf(m,p,o);p!=null&&(A=!1)}}return{row:h,isempty:A}}function iS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Bn(d);break;case"number":c=Bn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var A=$s(c.s.r),h=[],f=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],I=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=ds(y),r=g?t[x][y]:t[h[y]+A],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=xf(r,null,u),p=b[i]||0,!p)b[i]=1;else{do o=i+"_"+p++;while(b[o]);b[i]=p,b[o]=1}s[y]=o}for(x=c.s.r+a;x<=c.e.r;++x)if(!(I[x]||{}).hidden){var T=tLe(t,c,x,h,n,s,g,u);(T.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(f[m++]=T.row)}return f.length=m,f}var _H=/"/g;function rLe(t,e,r,n,a,s,i,o){for(var c=!0,u=[],d="",A=$s(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var f=o.dense?(t[r]||[])[h]:t[n[h]+A];if(f==null)d="";else if(f.v!=null){c=!1,d=""+(o.rawNumbers&&f.t=="n"?f.v:xf(f,null,o));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||o.forceQuotes){d='"'+d.replace(_H,'""')+'"';break}d=="ID"&&(d='"ID"')}else f.f!=null&&!f.F?(c=!1,d="="+f.f,d.indexOf(",")>=0&&(d='"'+d.replace(_H,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function mD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=Bn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",A=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],f=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(A[m]=ds(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(f[g]||{}).hidden||(d=rLe(t,a,g,A,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?o:"")+d)));return delete n.dense,r.join("")}function gne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=mD(t,e);return r}function nLe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=Bn(t["!ref"]),s="",i=[],o,c=[],u=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=ds(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=$s(d),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function xne(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?As(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var A=Bn(s["!ref"]);d.e.c=Math.max(d.e.c,A.e.c),d.e.r=Math.max(d.e.r,A.e.r),i==-1&&(i=A.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],f=0;e.forEach(function(p,g){Is(p).forEach(function(x){(f=h.indexOf(x))==-1&&(h[f=h.length]=x);var y=p[x],b="z",w="",I=Lr({c:o+f,r:i+g+a});u=rb(s,I),y&&typeof y=="object"&&!(y instanceof Date)?s[I]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Ei(y)),w=n.dateNF||Mr[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[I]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var m=$s(i);if(a)for(f=0;f<h.length;++f)s[ds(f+o)+m]={t:"s",v:h[f]};return s["!ref"]=Jr(d),s}function aLe(t,e){return xne(null,t,e)}function rb(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=As(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?rb(t,Lr(e)):rb(t,Lr({r:e,c:r||0}))}function sLe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function pD(){return{SheetNames:[],Sheets:{}}}function gD(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(rne(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function iLe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=sLe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function oLe(t,e){return t.z=e,t}function vne(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function lLe(t,e,r){return vne(t,"#"+e,r)}function cLe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function uLe(t,e,r,n){for(var a=typeof e!="string"?e:Bn(e),s=typeof e=="string"?e:Jr(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=rb(t,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Wu={encode_col:ds,encode_row:$s,encode_cell:Lr,encode_range:Jr,decode_col:G6,decode_row:K6,split_cell:yTe,decode_cell:As,decode_range:Wl,format_cell:xf,sheet_add_aoa:zte,sheet_add_json:xne,sheet_add_dom:une,aoa_to_sheet:Pv,json_to_sheet:aLe,table_to_sheet:dne,table_to_book:pMe,sheet_to_csv:mD,sheet_to_txt:gne,sheet_to_json:iS,sheet_to_html:cne,sheet_to_formulae:nLe,sheet_to_row_object_array:iS,sheet_get_cell:rb,book_new:pD,book_append_sheet:gD,book_set_sheet_visibility:iLe,cell_set_number_format:oLe,cell_set_hyperlink:vne,cell_set_internal_link:lLe,cell_add_comment:cLe,sheet_set_array_formula:uLe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const dLe=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Na(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function bh(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function im(t,e=1){const r=Math.floor(bh(t,e));return r>0?r:e}function ALe(t){return Object.values(t||{}).every(r=>Na(r)==="")}function jg(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Na(a),a));for(const a of e){const s=n.get(Na(a));if(s!=null)return t[s]}}function fLe({open:t,code:e,onClose:r}){return t?l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),l.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),l.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),l.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function hLe({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),o=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new GE,d=()=>{var h,f,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(f=n.current)==null?void 0:f.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;const h=await GE.listVideoInputDevices(),f=h.find(p=>/back|rear|environment/i.test(p.label||""))||h[h.length-1]||h[0];if(!(f!=null&&f.deviceId)){i("No se encontr cmara.");return}const m=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"}},audio:!1},n.current,p=>{if(!c&&p){const g=String(p.getText()||"").trim().replace(/\s+/g,"");if(!g||g===o.current)return;o.current=g,d(),r(g),e()}});a.current=m}catch(h){const f=String((h==null?void 0:h.message)||"");f.toLowerCase().includes("permission")||(h==null?void 0:h.name)==="NotAllowedError"?i("Permiso de cmara denegado."):(h==null?void 0:h.name)==="NotFoundError"?i("No se encontr cmara en este dispositivo."):i(f||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[l.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[l.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),l.jsx("div",{className:"absolute inset-0 pointer-events-none",children:l.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&l.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),l.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function mLe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,o]=v.useState([]),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(null),[w,I]=v.useState(""),[T,C]=v.useState(""),[E,S]=v.useState(0),[O,B]=v.useState(1),[P,D]=v.useState(""),[W,Ae]=v.useState(""),[ee,ce]=v.useState(""),[de,X]=v.useState(!1),[pe,Se]=v.useState(""),[k,F]=v.useState(!1),[V,M]=v.useState("create"),[L,q]=v.useState(!1),[R,K]=v.useState(""),[Z,te]=v.useState([]),[Q,ye]=v.useState([]),[Y,z]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const re=await jt(Kt(ht(Fe,"products_candies"),Gr("name","asc"))),ne=[];re.forEach(Ue=>{const Ke=Ue.data();ne.push({id:Ue.id,name:Ke.name||"",category:Ke.category||"",providerPrice:Number(Ke.providerPrice||0),unitsPerPackage:Number(Ke.unitsPerPackage||1),barcode:String(Ke.barcode||"").trim()||void 0,createdAt:Ke.createdAt})}),o(ne)}catch(re){console.error(re),s(" Error cargando catlogo de dulces.")}finally{n(!1)}})()},[t]);const le=v.useMemo(()=>{const re=Na(W),ne=String(ee||"").trim();return!re&&!ne?i:i.filter(Ue=>{const Ke=`${Ue.category} ${Ue.name}`.toLowerCase(),et=re?Ke.includes(re):!0,ke=String(Ue.barcode||""),he=ne?ke.includes(ne):!0;return et&&he})},[i,W,ee]),je=v.useMemo(()=>{const re=new Set;return i.forEach(ne=>{const Ue=String(ne.category||"").trim();Ue&&re.add(Ue)}),Array.from(re).sort((ne,Ue)=>ne.localeCompare(Ue,"es"))},[i]),ue=()=>{u(""),A(""),f(0),p(1),x("")},Pe=async re=>{re.preventDefault(),s("");const ne=String(c||"").trim(),Ue=String(d||"").trim(),Ke=Math.max(0,bh(h,0)),et=im(m,1),ke=String(g||"").trim();if(!ne)return s(" La categora es requerida.");if(!Ue)return s(" El nombre del producto es requerido.");if(Ke<=0)return s(" El precio proveedor debe ser > 0.");if(et<=0)return s(" Und x paquete debe ser > 0.");if(i.some(_e=>Na(_e.category)===Na(ne)&&Na(_e.name)===Na(Ue)))return s(" Ya existe un producto con esa categora y nombre.");if(ke&&i.some(be=>String(be.barcode||"")===ke))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const _e={category:ne,name:Ue,providerPrice:Ke,unitsPerPackage:et,createdAt:Xt.now()};ke&&(_e.barcode=ke);const be=await on(ht(Fe,"products_candies"),_e);o(Qe=>[...Qe,{id:be.id,..._e}].sort(($e,Je)=>$e.name.localeCompare(Je.name,"es"))),s(" Producto creado."),ue()}catch(_e){console.error(_e),s(" Error creando producto.")}finally{n(!1)}},Ye=re=>{b(re.id),I(re.category),C(re.name),S(re.providerPrice),B(re.unitsPerPackage||1),D(String(re.barcode||"")),s("")},nt=()=>{b(null),I(""),C(""),S(0),B(1),D("")},mt=async()=>{if(!y)return;s("");const re=String(w||"").trim(),ne=String(T||"").trim(),Ue=Math.max(0,bh(E,0)),Ke=im(O,1),et=String(P||"").trim();if(!re)return s(" La categora es requerida.");if(!ne)return s(" El nombre del producto es requerido.");if(Ue<=0)return s(" El precio proveedor debe ser > 0.");if(Ke<=0)return s(" Und x paquete debe ser > 0.");if(i.some(he=>he.id!==y&&Na(he.category)===Na(re)&&Na(he.name)===Na(ne)))return s(" Ya existe otro producto con esa categora y nombre.");if(et&&i.some(_e=>_e.id!==y&&String(_e.barcode||"")===et))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const he={category:re,name:ne,providerPrice:Ue,unitsPerPackage:Ke,updatedAt:Xt.now()};he.barcode=et||"",await Hr(Ht(Fe,"products_candies",y),he),o(_e=>_e.map(be=>be.id===y?{...be,category:re,name:ne,providerPrice:Ue,unitsPerPackage:Ke,barcode:et||void 0}:be).sort((be,Qe)=>be.name.localeCompare(Qe.name,"es"))),s(" Producto actualizado."),nt()}catch(he){console.error(he),s(" Error actualizando producto.")}finally{n(!1)}},ct=async re=>{if(confirm(`Eliminar "${re.name}" (${re.category}) del catlogo?`))try{n(!0),await _n(Ht(Fe,"products_candies",re.id)),o(Ue=>Ue.filter(Ke=>Ke.id!==re.id)),s(" Producto eliminado.")}catch(Ue){console.error(Ue),s(" Error eliminando producto.")}finally{n(!1)}},ft=()=>{const re=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Codigo:"7445074183182"}],ne=Wu.json_to_sheet(re),Ue=Wu.book_new();Wu.book_append_sheet(Ue,ne,"Productos");const Ke=y4(Ue,{type:"array",bookType:"xlsx"}),et=new Blob([Ke],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ke=URL.createObjectURL(et),he=document.createElement("a");he.href=ke,he.download="template_productos_dulces.xlsx",document.body.appendChild(he),he.click(),he.remove(),URL.revokeObjectURL(ke)},Ct=re=>{const ne=[],Ue=[];re.forEach((et,ke)=>{if(!et||typeof et!="object"||ALe(et))return;const he=String(jg(et,["Id","ID","productId","docId"])??"").trim(),_e=String(jg(et,["Categoria","Categora","Category","cat","category"])??"").trim(),be=String(jg(et,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),Qe=jg(et,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),$e=jg(et,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),Je=jg(et,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),st=String(Je??"").trim(),yt=Math.max(0,bh(Qe,0)),Dt=im($e,1),nr=ke+2;_e||Ue.push(`Fila ${nr}: falta Categoria.`),be||Ue.push(`Fila ${nr}: falta Producto/Nombre.`),yt<=0&&Ue.push(`Fila ${nr}: PrecioProveedor debe ser > 0.`),Dt<=0&&Ue.push(`Fila ${nr}: UnidadesPorPaquete debe ser > 0.`),_e&&be&&yt>0&&Dt>0&&ne.push({id:he||void 0,category:_e,name:be,providerPrice:yt,unitsPerPackage:Dt,barcode:st||void 0,_raw:et})});const Ke=new Map;for(const et of ne){const ke=et.id?`id::${et.id}`:`${Na(et.category)}::${Na(et.name)}`;Ke.set(ke,et)}return{rows:Array.from(Ke.values()),errors:Ue}},At=async re=>{if(s(""),ye([]),te([]),K((re==null?void 0:re.name)||""),!re)return;const ne=re.name.toLowerCase(),Ue=ne.endsWith(".xlsx")||ne.endsWith(".xls"),Ke=ne.endsWith(".csv");if(!Ue&&!Ke){ye(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{z(!0);const et=new FileReader,ke=await new Promise((st,yt)=>{et.onerror=()=>yt(new Error("No se pudo leer el archivo.")),et.onload=()=>st(et.result),et.readAsArrayBuffer(re)}),he=sS(new Uint8Array(ke),{type:"array"}),_e=he.SheetNames[0],be=he.Sheets[_e],Qe=Wu.sheet_to_json(be,{defval:""}),{rows:$e,errors:Je}=Ct(Qe);te($e),ye(Je),$e.length===0&&Je.length===0&&ye(["No se encontraron filas vlidas para importar."])}catch(et){console.error(et),ye(["Error leyendo el archivo. Revis que no est corrupto."])}finally{z(!1)}},He=(re,ne)=>{te(Ue=>{const Ke=[...Ue],et=Ke[re];return et?(Ke[re]={...et,...ne},Ke):Ue})},it=async()=>{if(s(""),Q.length>0){s(" Correg los errores antes de importar.");return}if(Z.length===0){s(" No hay filas para importar.");return}try{z(!0);const re={},ne={},Ue={};i.forEach(he=>{re[he.id]=he,ne[`${Na(he.category)}::${Na(he.name)}`]=he;const _e=String(he.barcode||"").trim();_e&&(Ue[_e]=he)});const Ke=M0(Fe);let et=0,ke=0;for(const he of Z){const _e=String(he.category||"").trim(),be=String(he.name||"").trim(),Qe=Math.max(0,bh(he.providerPrice,0)),$e=im(he.unitsPerPackage,1),Je=String(he.barcode||"").trim();if(!_e||!be||Qe<=0||$e<=0)continue;let st;if(he.id&&re[he.id])st=re[he.id];else{const yt=`${Na(_e)}::${Na(be)}`;st=ne[yt]}if(!st&&Je&&Ue[Je]&&(st=Ue[Je]),st){const yt={category:_e,name:be,providerPrice:Qe,unitsPerPackage:$e,updatedAt:Xt.now()};he.barcode!=null&&(yt.barcode=Je||""),Ke.update(Ht(Fe,"products_candies",st.id),yt),ke+=1}else{const yt=Ht(ht(Fe,"products_candies")),Dt={category:_e,name:be,providerPrice:Qe,unitsPerPackage:$e,createdAt:Xt.now()};Je&&(Dt.barcode=Je),Ke.set(yt,Dt),et+=1}}await Ke.commit(),s(` Importacin lista. Creados: ${et}, Actualizados: ${ke}`),q(!1),te([]),ye([]),K(""),e()}catch(re){console.error(re),s(" Error importando productos a Firestore.")}finally{z(!1)}},we=v.useMemo(()=>{const re=new Set(i.map(ke=>ke.id)),ne=new Set(i.map(ke=>`${Na(ke.category)}::${Na(ke.name)}`)),Ue=new Set(i.map(ke=>String(ke.barcode||"").trim()).filter(Boolean));let Ke=0,et=0;for(const ke of Z){if(ke.id&&re.has(ke.id)){Ke+=1;continue}const he=`${Na(ke.category)}::${Na(ke.name)}`;if(ne.has(he)){Ke+=1;continue}const _e=String(ke.barcode||"").trim();if(_e&&Ue.has(_e)){Ke+=1;continue}et+=1}return{willCreate:et,willUpdate:Ke,total:Z.length}},[Z,i]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Catlogo de Productos (Dulces)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Dc,{onClick:e,loading:r||Y}),l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{q(!0),te([]),ye([]),K("")},children:"Importar (.xlsx)"})]})]}),l.jsxs("form",{onSubmit:Pe,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Categora"}),l.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:re=>u(re.target.value),placeholder:"Ej: Gomitas"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block font-semibold",children:"Producto"}),l.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:re=>A(re.target.value),placeholder:"Ej: Gomita Fresa"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:re=>f(Math.max(0,bh(re.target.value,0)))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),l.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:re=>p(im(re.target.value,1))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:re=>x(re.target.value),placeholder:"EAN/UPC"}),l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{M("create"),F(!0)},children:"Escanear"})]})]}),l.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ue,children:"Limpiar"}),l.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[l.jsxs("div",{className:"w-full md:w-1/2",children:[l.jsx("label",{className:"block font-semibold",children:"Buscar"}),l.jsx("input",{className:"w-full border rounded px-2 py-1",value:W,onChange:re=>Ae(re.target.value),placeholder:"Buscar por categora o producto"})]}),l.jsxs("div",{className:"w-full md:w-1/2",children:[l.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),l.jsx("input",{className:"w-full border rounded px-2 py-1",value:ee,onChange:re=>ce(re.target.value),placeholder:"Ej: 7445074183182"})]}),l.jsxs("div",{className:"w-full md:w-auto text-right",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),l.jsx("div",{className:"text-lg font-semibold",children:le.length})]})]}),l.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),l.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),l.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):le.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin productos."})}):le.map(re=>{const ne=y===re.id,Ue=!!String(re.barcode||"").trim();return l.jsxs("tr",{className:"align-top",children:[l.jsx("td",{className:"p-2 border",children:ne?l.jsx("input",{className:"w-full border rounded px-2 py-1",value:w,onChange:Ke=>I(Ke.target.value)}):re.category}),l.jsx("td",{className:"p-2 border",children:ne?l.jsx("input",{className:"w-full border rounded px-2 py-1",value:T,onChange:Ke=>C(Ke.target.value)}):re.name}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:ne?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(E)?"":E,onChange:Ke=>S(Math.max(0,bh(Ke.target.value,0)))}):dLe(re.providerPrice)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:ne?l.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:O,onChange:Ke=>B(im(Ke.target.value,1))}):re.unitsPerPackage}),l.jsx("td",{className:"p-2 border text-center",children:ne?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("input",{className:"w-44 border rounded px-2 py-1",value:P,onChange:Ke=>D(Ke.target.value),placeholder:"EAN/UPC"}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{M("edit"),F(!0)},children:"Escanear"})]}):Ue?l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Se(String(re.barcode||"").trim()),X(!0)},children:"S"}):l.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),l.jsx("td",{className:"p-2 border",children:ne?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:mt,type:"button",children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:nt,type:"button",children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>Ye(re),type:"button",children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ct(re),type:"button",children:"Borrar"})]})})]},re.id)})})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a}),l.jsx(fLe,{open:de,code:pe,onClose:()=>X(!1)}),l.jsx(hLe,{open:k,onClose:()=>F(!1),onDetected:re=>{V==="create"?x(re):D(re)}}),L&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>q(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),l.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Codigo (opcional)."})]}),l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ft,type:"button",children:"Descargar template .xlsx"})]}),l.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[l.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:re=>{var ne;return At(((ne=re.target.files)==null?void 0:ne[0])||null)}}),R&&l.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",l.jsx("b",{children:R})]}),Y&&l.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Q.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[l.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),l.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Q.slice(0,50).map((re,ne)=>l.jsx("li",{children:re},ne))})]}),l.jsxs("div",{className:"bg-white border rounded p-3",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),l.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",we.total," filas (Crear:"," ",we.willCreate," / Actualizar:"," ",we.willUpdate,")"]})]}),l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:it,disabled:Y||Z.length===0||Q.length>0,type:"button",children:"Importar a Firestore"})]}),l.jsxs("div",{className:"overflow-x-auto border rounded",children:[l.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),l.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),l.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),l.jsx("tbody",{children:Z.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Z.slice(0,300).map((re,ne)=>{const Ue=re.id?i.some(he=>he.id===re.id):!1,Ke=i.some(he=>`${Na(he.category)}::${Na(he.name)}`==`${Na(re.category)}::${Na(re.name)}`),et=re.barcode?i.some(he=>String(he.barcode||"")===re.barcode):!1,ke=Ue||Ke||et;return l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:re.id||"",onChange:he=>He(ne,{id:he.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:re.category,onChange:he=>He(ne,{category:he.target.value}),list:"categories-list"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-72 border rounded px-2 py-1",value:re.name,onChange:he=>He(ne,{name:he.target.value})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(re.providerPrice)?"":re.providerPrice,onChange:he=>He(ne,{providerPrice:Math.max(0,bh(he.target.value,0))})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:re.unitsPerPackage,onChange:he=>He(ne,{unitsPerPackage:im(he.target.value,1)})})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:re.barcode||"",onChange:he=>He(ne,{barcode:he.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),l.jsx("td",{className:"p-2 border text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${ke?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:ke?"ACTUALIZA":"CREA"})})]},`${re.id||""}-${ne}`)})})]}),l.jsx("datalist",{id:"categories-list",children:je.map(re=>l.jsx("option",{value:re},re))})]}),Z.length>300&&l.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Z.length," filas (el import importa todas)."]})]})]})})]})}function xD(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function e2(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):xD(t)}function pLe(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=xD(t);return r>0&&e>0?Math.floor(r/e):Math.max(0,Math.floor(Number(t.packages||0)))}function gLe(t){if(typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages))return Math.max(0,Math.floor(Number(t.remainingPackages)));const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=e2(t);return Math.max(0,Math.floor(r/e))}async function xLe(t){const e=Ht(Fe,"candy_main_orders",t);if((await So(e)).exists())return e;const n=Kt(ht(Fe,"candy_main_orders"),Zt("orderId","==",t)),a=await jt(n);return a.empty?null:Ht(Fe,"candy_main_orders",a.docs[0].id)}async function YB(t){if(!t)return;const e=await xLe(t);if(!e)return;const r=Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",t)),n=await jt(r),a=new Map;n.forEach(o=>{const c=o.data(),u=String(c.productId||"");if(!u)return;const d=pLe(c),A=gLe(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),f=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=f*d,y=m*d,b=p*d,w=g*d,I=y-x,T=b-x,C=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:f,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const E=a.get(u);E.packages+=d,E.remainingPackages+=A,E.subtotal+=x,E.totalRivas+=y,E.totalSanJorge+=b,E.totalIsla+=w,E.gainRivas+=I,E.gainSanJorge+=T,E.gainIsla+=C,E.providerPrice=f,E.unitPriceRivas=m||E.unitPriceRivas,E.unitPriceSanJorge=p||E.unitPriceSanJorge,E.unitPriceIsla=g||E.unitPriceIsla,E.unitsPerPackage=h||E.unitsPerPackage,E.name=String(c.productName||E.name),E.category=String(c.category||E.category)});const s=Array.from(a.values()).map(o=>({id:o.productId,name:o.name,category:o.category,providerPrice:o.providerPrice,unitsPerPackage:o.unitsPerPackage,packages:o.packages,remainingPackages:o.remainingPackages,marginRivas:o.marginRivas??void 0,marginSanJorge:o.marginSanJorge??void 0,marginIsla:o.marginIsla??void 0,subtotal:o.subtotal,totalRivas:o.totalRivas,totalSanJorge:o.totalSanJorge,totalIsla:o.totalIsla,unitPriceRivas:o.unitPriceRivas,unitPriceSanJorge:o.unitPriceSanJorge,unitPriceIsla:o.unitPriceIsla,gainRivas:o.gainRivas,gainSanJorge:o.gainSanJorge,gainIsla:o.gainIsla})),i=s.reduce((o,c)=>o+Number(c.packages||0),0);await Hr(e,{totalPackages:i,items:s})}async function vLe(t){const{productId:e,saleDate:r,saleId:n}=t,a=t.quantityPacks,s=t.quantity;if(!e)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const i=Kt(ht(Fe,"inventory_candies"),Zt("productId","==",e)),o=await jt(i);if(o.empty)throw new Error("No hay inventario para este producto.");const c=o.docs.map(f=>({id:f.id,data:f.data()})).sort((f,m)=>{var b,w;const p=String(f.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=f.data.createdAt)==null?void 0:b.seconds)??0,y=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return x-y});let u=0;for(const f of c){const m=Number(f.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const f of c){const m=f.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const f=Math.max(0,Math.floor(Number(a)));if(f<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=f*u}else{const f=Math.max(0,Math.floor(Number(s||0)));if(f<=0)throw new Error("La cantidad debe ser mayor que cero.");d=f}const A=c.map(f=>Ht(Fe,"inventory_candies",f.id)),h=[];return await Ni(Fe,async f=>{const m=await Promise.all(A.map(g=>f.get(g)));let p=d;for(let g=0;g<A.length&&p>0;g++){const x=A[g],y=m[g];if(!y.exists())continue;const b=y.data(),w=e2(b);if(w<=0)continue;const I=Math.min(w,p),T=Math.max(0,w-I),C=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),E=Math.floor(T/C);f.update(x,{remaining:T,remainingPackages:E,packages:E}),h.push({batchId:x.id,qty:I,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=I}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of h)await on(ht(Fe,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:e,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:Xt.now()})}),{allocations:h}}function yLe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),o=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||o<=0||r.push({inventorySellerId:i,units:o})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const o=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!o||c<=0||r.push({inventorySellerId:o,units:c})}}return r.length?{allocations:r}:null}async function nb(t){const e=t.split("#")[0],r=Ht(Fe,"sales_candies",e),n=await So(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=yLe(a);if(s&&s.allocations.length>0){let u=0;return await Ni(Fe,async d=>{const A={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(A[g]=(A[g]||0)+x,u+=x)}const f=Object.keys(A).map(p=>Ht(Fe,"inventory_candies_sellers",p)),m=await Promise.all(f.map(p=>d.get(p)));for(let p=0;p<f.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(A[f[p].id]||0))),w=y+b,I=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),T=Math.floor(w/I);d.update(f[p],{remainingUnits:w,remainingPackages:T})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const A=a.allocationsByItem[d],h=String((A==null?void 0:A.productId)||d||"");if(!h)continue;const f=Array.isArray(A==null?void 0:A.allocations)?A.allocations:[];u[h]=f.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[A]=h.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const d of a.items){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),f=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[A]||[];i.push({productId:A,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:f.length?f:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),A=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];d&&A>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:A,allocations:h.length?h:void 0})}if(i.length===0)return await Ni(Fe,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Ni(Fe,async d=>{const A=[];for(const f of i)for(const m of f.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,A.push({ref:Ht(Fe,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(A.map(f=>d.get(f.ref)));for(let f=0;f<A.length;f++){const m=h[f];if(!m.exists())continue;const p=m.data(),g=e2(p),x=Math.max(0,Math.floor(Number(A[f].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(A[f].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Ni(Fe,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=Kt(ht(Fe,"inventory_candies"),Zt("productId","==",p.productId)),y=(await jt(g)).docs.map(b=>{const w=b.data(),I=xD(w),T=e2(w);return{id:b.id,date:String(w.date||""),baseUnits:I,remaining:T}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const A=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,A.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);A.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);A.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of A)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const f=Object.keys(h).map(p=>Ht(Fe,"inventory_candies",p)),m=await Promise.all(f.map(p=>u.get(p)));for(let p=0;p<f.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=e2(x),b=Math.max(0,Math.floor(Number(h[f[p].id]||0))),w=y+b,I=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),T=Math.floor(w/I);u.update(f[p],{remaining:w,remainingPackages:T,packages:T})}u.delete(r)}),{restored:c}}async function bLe(t){return nb(t)}const Al=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function JB(t){return isFinite(t)?Math.round(t):0}function Ku(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function ZB(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function wLe(t,e){var i,o;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((o=e.createdAt)==null?void 0:o.seconds)??0)-a}function NLe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,o]=v.useState(""),[c,u]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(0),[T,C]=v.useState(!1),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const L=await jt(ht(Fe,"products_candies")),q=[];L.forEach(te=>{const Q=te.data();q.push({id:te.id,name:Q.name??"(sin nombre)",category:Q.category??"(sin categora)"})}),e(q);const R=Kt(ht(Fe,"inventory_candies"),Gr("date","desc")),K=await jt(R),Z=[];K.forEach(te=>{const Q=te.data(),ye=Number(Q.unitsPerPackage||0),Y=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),z=Number(Q.remaining??Q.totalUnits??Y??0);Z.push({id:te.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:ye,totalUnits:Y,remaining:z,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),n(Z)}catch(L){console.error(L),o(" Error cargando inventario.")}finally{s(!1)}})()},[]);const W=v.useMemo(()=>r.filter(L=>!(c&&L.date<c||d&&L.date>d||h&&L.productId!==h||m&&String(L.category||"")!==m)),[r,c,d,h,m]),Ae=v.useMemo(()=>{const L=new Set;for(const q of t)q.category&&L.add(q.category);return Array.from(L).sort((q,R)=>q.localeCompare(R))},[t]),ee=v.useMemo(()=>{const L=W.reduce((Q,ye)=>Q+Ku(ye),0),q=W.reduce((Q,ye)=>Q+ZB(ye),0),R=W.reduce((Q,ye)=>{const Y=Ku(ye);return Q+Number(ye.providerPrice||0)*Y},0),K=W.reduce((Q,ye)=>{const Y=Ku(ye);return Q+Number(ye.unitPriceRivas||0)*Y},0),Z=W.reduce((Q,ye)=>{const Y=Ku(ye);return Q+Number(ye.unitPriceSanJorge||0)*Y},0),te=W.reduce((Q,ye)=>{const Y=Ku(ye);return Q+Number(ye.unitPriceIsla||0)*Y},0);return{totalPaquetes:L,totalPaquetesRestantes:q,totalSubtotal:R,totalRivas:K,totalSJ:Z,totalIsla:te}},[W]),ce=v.useMemo(()=>{let L=0,q=0;for(const R of W)R.status==="PENDIENTE"&&(L+=1),R.status==="PAGADO"&&(q+=1);return{totalLotes:W.length,pendientes:L,pagados:q}},[W]),de=v.useMemo(()=>{const L=new Map;for(const R of W){const K=String(R.productId||"");K&&(L.has(K)||L.set(K,{batches:[]}),L.get(K).batches.push(R))}const q=[];for(const[R,K]of L.entries()){const Z=[...K.batches].sort(wLe),te=Z[0],Q=Z.reduce((ft,Ct)=>ft+Ku(Ct),0),ye=Z.reduce((ft,Ct)=>ft+ZB(Ct),0),Y=Number((te==null?void 0:te.providerPrice)||0),z=Number((te==null?void 0:te.unitPriceRivas)||0),le=Number((te==null?void 0:te.unitPriceIsla)||0),je=Z.reduce((ft,Ct)=>{const At=Ku(Ct);return ft+Number(Ct.providerPrice||0)*At},0),ue=Z.reduce((ft,Ct)=>{const At=Ku(Ct);return ft+Number(Ct.unitPriceRivas||0)*At},0),Pe=Z.reduce((ft,Ct)=>{const At=Ku(Ct);return ft+Number(Ct.unitPriceIsla||0)*At},0),Ye=ue-je,nt=Pe-je;let mt="",ct;for(const ft of Z)(!mt||String(ft.date||"")>mt)&&(mt=String(ft.date||""),ct=ft.createdAt);q.push({productId:R,productName:(te==null?void 0:te.productName)||"",category:(te==null?void 0:te.category)||"",totalPackages:Q,remainingPackages:ye,providerPrice:Y,unitPriceRivas:z,unitPriceIsla:le,subtotal:je,totalRivas:ue,totalIsla:Pe,gainRivas:Ye,gainIsla:nt,lastDate:mt,lastCreatedAt:ct,batchCount:Z.length})}return q.sort((R,K)=>String(K.lastDate).localeCompare(String(R.lastDate))),q},[W]),X=L=>{x(L.id),b(L.date),I(L.providerPrice),o("")},pe=()=>{x(null),b(""),I(0)},Se=async()=>{if(!g)return;const L=r.find(Pe=>Pe.id===g);if(!L)return;if(w<0){o("El precio proveedor no puede ser negativo.");return}const q=Ku(L),R=w*q,K=q>0?R/.8:0,Z=q>0?R/.85:0,te=q>0?R/.7:0,Q=K-R,ye=Z-R,Y=te-R,z=q>0?JB(K/q):0,le=q>0?JB(Z/q):0,je=q>0?JB(te/q):0,ue=Ht(Fe,"inventory_candies",g);await Hr(ue,{date:y,providerPrice:w,subtotal:R,totalRivas:K,totalSanJorge:Z,totalIsla:te,gainRivas:Q,gainSanJorge:ye,gainIsla:Y,unitPriceRivas:z,unitPriceSanJorge:le,unitPriceIsla:je}),n(Pe=>Pe.map(Ye=>Ye.id===g?{...Ye,date:y,providerPrice:w,subtotal:R,totalRivas:K,totalSanJorge:Z,totalIsla:te,gainRivas:Q,gainSanJorge:ye,gainIsla:Y,unitPriceRivas:z,unitPriceSanJorge:le,unitPriceIsla:je}:Ye)),L.orderId&&await YB(String(L.orderId)),o(" Lote de dulces actualizado"),pe()},k=async L=>{confirm(`Marcar PAGADO el lote del ${L.date} (${L.productName})?`)&&(await Hr(Ht(Fe,"inventory_candies",L.id),{status:"PAGADO"}),n(R=>R.map(K=>K.id===L.id?{...K,status:"PAGADO"}:K)),o(" Lote marcado como pagado"))},F=async L=>{confirm(`Eliminar el lote del ${L.date} (${L.productName})?`)&&(await _n(Ht(Fe,"inventory_candies",L.id)),n(R=>R.filter(K=>K.id!==L.id)),L.orderId&&await YB(String(L.orderId)),o(" Lote eliminado"))},V=async(L,q)=>{try{s(!0),o("");const R=Kt(ht(Fe,"inventory_candies"),Zt("productId","==",L),Gr("date","desc")),K=await jt(R),Z=[];K.forEach(te=>{const Q=te.data(),ye=Number(Q.unitsPerPackage||0),Y=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),z=Number(Q.remaining??Q.totalUnits??Y??0);Z.push({id:te.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:ye,totalUnits:Y,remaining:z,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),S(L),B(q),D(Z),C(!0)}catch(R){console.error(R),o(" Error abriendo detalle del producto.")}finally{s(!1)}},M=async(L,q)=>{const R=r.filter(Z=>Z.productId===L);if(confirm(`Eliminar COMPLETAMENTE "${q}"?
Esto eliminar ${R.length} lote(s) de este producto.`))try{s(!0),o("");const Z=Array.from(new Set(R.map(te=>te.orderId?String(te.orderId):"").filter(Boolean)));for(const te of R)await _n(Ht(Fe,"inventory_candies",te.id));n(te=>te.filter(Q=>Q.productId!==L)),o(" Producto eliminado (todos sus lotes).");for(const te of Z)await YB(te);T&&E===L&&(C(!1),D([]),S(""),B(""))}catch(Z){console.error(Z),o(" Error eliminando lotes del producto.")}finally{s(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:L=>u(L.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:L=>A(L.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[l.jsx("label",{className:"font-semibold",children:"Categora"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:L=>p(L.target.value),children:[l.jsx("option",{value:"",children:"Todas"}),Ae.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:L=>f(L.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(L=>l.jsxs("option",{value:L.id,children:[L.name,"  ",L.category]},L.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f(""),p("")},children:"Quitar filtro"})]}),l.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:l.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",ce.totalLotes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",ce.pendientes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",ce.pagados]})]})}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",ee.totalPaquetes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",ee.totalPaquetesRestantes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",Al(ee.totalSubtotal)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",Al(ee.totalRivas)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",Al(ee.totalSJ)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",Al(ee.totalIsla)]})]})}),l.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),l.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:a?l.jsx("tr",{children:l.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):de.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):de.map(L=>l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 border",children:L.category||""}),l.jsxs("td",{className:"p-2 border max-w-[260px]",children:[l.jsx("span",{className:"block truncate",title:L.productName,children:L.productName}),l.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",L.batchCount]})]}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:L.totalPackages}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:L.remainingPackages}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.providerPrice)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.unitPriceRivas)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.unitPriceIsla)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.subtotal)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.totalRivas)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.totalIsla)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.gainRivas)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Al(L.gainIsla)}),l.jsx("td",{className:"p-2 border",children:L.lastDate||""}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>V(L.productId,L.productName),children:"Detalle"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(L.productId,L.productName),children:"Borrar"})]})})]},L.productId))})]})})}),i&&l.jsx("p",{className:"mt-2 text-sm",children:i}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),l.jsxs("div",{className:"text-xs text-gray-600",children:[l.jsx("span",{className:"font-semibold",children:"Producto:"})," ",O||""," ",l.jsxs("span",{className:"ml-2",children:[l.jsx("span",{className:"font-semibold",children:"ID:"})," ",E]})]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{C(!1),D([]),S(""),B(""),pe()},children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),l.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),l.jsx("th",{className:"p-2 border",children:"Nmero orden"}),l.jsx("th",{className:"p-2 border",children:"Status"}),l.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:P.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):P.map(L=>{const q=g===L.id,R=Ku(L),K=ZB(L);return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 border align-top",children:q?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:Z=>b(Z.target.value)}):L.date}),l.jsx("td",{className:"p-2 border align-top",children:L.category||""}),l.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[l.jsx("span",{className:"block truncate",title:L.productName,children:L.productName}),l.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",L.id]})]}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:R}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:K}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:L.totalUnits}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:q?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:Z=>I(Math.max(0,parseFloat(Z.target.value||"0")))}):Al(L.providerPrice)}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Al(L.unitPriceRivas)}),l.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Al(L.unitPriceIsla)}),l.jsx("td",{className:"p-2 border align-top",children:L.orderId?String(L.orderId):""}),l.jsx("td",{className:"p-2 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${L.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:L.status})}),l.jsx("td",{className:"p-2 border align-top",children:q?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Se,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:pe,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[L.status==="PENDIENTE"&&l.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>k(L),children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>X(L),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(L),children:"Borrar"})]})})]},L.id)})})]})}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>M(E,O),children:"Borrar producto (todos los lotes)"})})]})})]})}const eT=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Jc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function M1(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function CH(t){const e=Kt(ht(Fe,"ar_movements"),Zt("ref.saleId","==",t)),r=await jt(e);await Promise.all(r.docs.map(n=>_n(Ht(Fe,"ar_movements",n.id))))}function _Le({role:t="",sellerCandyId:e="",currentUserEmail:r}){const n=String(t||"").trim().toLowerCase(),a=String(e||"").trim(),s=n==="vendedor_dulces",i=n==="admin",[o,c]=v.useState([]),[u,d]=v.useState(!1),[A,h]=v.useState(!1),[f,m]=v.useState(null),[p,g]=v.useState([]),x=async xe=>{d(!0),h(!0),m(xe),g([]);try{const Ie=(await jt(Kt(ht(Fe,"sales_candies"),Zt("__name__","==",xe)))).docs[0],rt=Ie==null?void 0:Ie.data(),tt=(Array.isArray(rt==null?void 0:rt.items)?rt.items:rt!=null&&rt.item?[rt.item]:[]).map(Xe=>({productName:String(Xe.productName||""),qty:Number(Xe.qty||0),unitPrice:Number(Xe.unitPrice||0),discount:Number(Xe.discount||0),total:Number(Xe.total||0)}));g(tt)}catch(Le){console.error(Le)}finally{h(!1)}},[y,b]=v.useState(""),[w,I]=v.useState("+505 "),[T,C]=v.useState(""),[E,S]=v.useState(""),[O,B]=v.useState("ACTIVO"),[P,D]=v.useState(0),[W,Ae]=v.useState(""),[ee,ce]=v.useState(0),[de,X]=v.useState([]),[pe,Se]=v.useState(!0),[k,F]=v.useState(""),[V,M]=v.useState(null),[L,q]=v.useState(""),[R,K]=v.useState("+505 "),[Z,te]=v.useState(""),[Q,ye]=v.useState(""),[Y,z]=v.useState("ACTIVO"),[le,je]=v.useState(0),[ue,Pe]=v.useState(""),[Ye,nt]=v.useState(!1),[mt,ct]=v.useState(null),[ft,Ct]=v.useState(!1),[At,He]=v.useState([]),[it,we]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[re,ne]=v.useState(!1),[Ue,Ke]=v.useState(0),[et,ke]=v.useState(new Date().toISOString().slice(0,10)),[he,_e]=v.useState(""),[be,Qe]=v.useState(!1),[$e,Je]=v.useState(null),[st,yt]=v.useState(""),[Dt,nr]=v.useState(0),[Ce,dt]=v.useState(""),[gt,Ne]=v.useState(!1);v.useEffect(()=>{(async()=>{try{if(Se(!0),s&&!a){X([]),F(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const xe=await jt(ht(Fe,"sellers_candies")),Le=[];xe.forEach(tt=>{const Xe=tt.data(),lt=String(Xe.status||"ACTIVO");lt==="ACTIVO"&&Le.push({id:tt.id,name:String(Xe.name||""),status:lt})}),c(Le);const Ie=s?Kt(ht(Fe,"customers_candies"),Zt("vendorId","==",a),Gr("createdAt","desc")):Kt(ht(Fe,"customers_candies"),Gr("createdAt","desc")),rt=await jt(Ie),Ze=[];rt.forEach(tt=>{const Xe=tt.data();Ze.push({id:tt.id,name:Xe.name??"",phone:Xe.phone??"+505 ",place:Xe.place??"",notes:Xe.notes??"",status:Xe.status??"ACTIVO",creditLimit:Number(Xe.creditLimit??0),createdAt:Xe.createdAt??Xt.now(),balance:0,sellerId:Xe.sellerId||"",vendorId:Xe.vendorId||"",vendorName:Xe.vendorName||"",initialDebt:Number(Xe.initialDebt||0)})});for(const tt of Ze)try{const Xe=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",tt.id)),lt=await jt(Xe);let xt=0;lt.forEach(Wt=>xt+=Number(Wt.data().amount||0)),tt.balance=xt}catch{tt.balance=0}X(Ze)}catch(xe){console.error(xe),F(" Error cargando clientes.")}finally{Se(!1)}})()},[s,a]);const at=()=>{b(""),I("+505 "),C(""),S(""),B("ACTIVO"),D(0),Ae(""),ce(0)},wt=async xe=>{var Ze;if(xe.preventDefault(),F(""),!y.trim()){F("Ingresa el nombre.");return}const Le=M1(w);if(Le.length<6){F("Telfono incompleto.");return}const Ie=s?a:String(W||"").trim(),rt=Ie&&((Ze=o.find(tt=>tt.id===Ie))==null?void 0:Ze.name)||"";try{const tt=await on(ht(Fe,"customers_candies"),{name:y.trim(),phone:Le,place:T||"",notes:E||"",status:O,creditLimit:Number(P||0),vendorId:Ie,vendorName:rt,initialDebt:Number(ee||0),createdAt:Xt.now()});X(Xe=>[{id:tt.id,name:y.trim(),phone:Le,place:T||"",notes:E||"",status:O,creditLimit:Number(P||0),vendorId:Ie,vendorName:rt,initialDebt:Number(ee||0),createdAt:Xt.now(),balance:0},...Xe]),at(),Ne(!1),F(" Cliente creado")}catch(tt){console.error(tt),F(" Error al crear cliente")}},kt=xe=>{if(s){F(" No permitido: vendedores no editan clientes desde el listado.");return}M(xe.id),q(xe.name),K(xe.phone||"+505 "),te(xe.place||""),ye(xe.notes||""),z(xe.status||"ACTIVO"),je(Number(xe.creditLimit||0)),Pe(String(xe.vendorId||""))},Lt=()=>{M(null),q(""),K("+505 "),te(""),ye(""),z("ACTIVO"),je(0),Pe("")},qt=async()=>{var Xe;if(s){F(" No permitido.");return}if(!V)return;const xe=M1(R);if(!L.trim()){F("Ingresa el nombre.");return}const Le=de.find(lt=>lt.id===V),Ie=String((Le==null?void 0:Le.vendorId)||""),rt=s?a:String(ue||"");if(s&&Ie&&Ie!==a){F(" Este cliente pertenece a otro vendedor.");return}if(i&&Ie&&rt&&Ie!==rt){F(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Ze=s?a:String(ue||""),tt=Ze&&((Xe=o.find(lt=>lt.id===Ze))==null?void 0:Xe.name)||"";try{await Hr(Ht(Fe,"customers_candies",V),{name:L.trim(),phone:xe,place:Z||"",notes:Q||"",status:Y,creditLimit:Number(le||0),vendorId:Ze,vendorName:tt}),X(lt=>lt.map(xt=>xt.id===V?{...xt,name:L.trim(),phone:xe,place:Z||"",notes:Q||"",status:Y,creditLimit:Number(le||0),vendorId:Ze,vendorName:tt}:xt)),Lt(),F(" Cliente actualizado")}catch(lt){console.error(lt),F(" Error al actualizar")}},_t=async xe=>{if(confirm(`Eliminar al cliente "${xe.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{Se(!0);const Ie=Kt(ht(Fe,"sales_candies"),Zt("customerId","==",xe.id)),rt=await jt(Ie);for(const Xe of rt.docs){const lt=Xe.id;try{await nb(lt)}catch(xt){console.warn("restoreSaleAndDeleteCandy error",xt);try{await _n(Ht(Fe,"sales_candies",lt))}catch{}}await CH(lt)}const Ze=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",xe.id)),tt=await jt(Ze);await Promise.all(tt.docs.map(Xe=>_n(Ht(Fe,"ar_movements",Xe.id)))),await _n(Ht(Fe,"customers_candies",xe.id)),X(Xe=>Xe.filter(lt=>lt.id!==xe.id)),F(" Cliente eliminado y dulces devueltos al inventario")}catch(Ie){console.error(Ie),F(" No se pudo eliminar el cliente.")}finally{Se(!1)}},ie=async xe=>{ct(xe),He([]),we({saldoActual:0,totalAbonado:0,totalCargos:0}),nt(!0),ne(!1),Ke(0),ke(new Date().toISOString().slice(0,10)),_e(""),Je(null),Ct(!0);try{const Le=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",xe.id)),Ie=await jt(Le),rt=[];Ie.forEach(Ze=>{var Xe,lt;const tt=Ze.data();rt.push({id:Ze.id,date:tt.date??((lt=(Xe=tt.createdAt)==null?void 0:Xe.toDate)!=null&&lt.call(Xe)?tt.createdAt.toDate().toISOString().slice(0,10):""),type:tt.type??"CARGO",amount:Number(tt.amount||0),ref:tt.ref||{},comment:tt.comment||"",createdAt:tt.createdAt})}),rt.sort((Ze,tt)=>{var xt,Wt;if(Ze.date!==tt.date)return Ze.date.localeCompare(tt.date);const Xe=((xt=Ze.createdAt)==null?void 0:xt.seconds)||0,lt=((Wt=tt.createdAt)==null?void 0:Wt.seconds)||0;return Xe-lt}),He(rt),se(rt)}catch(Le){console.error(Le),F(" No se pudo cargar el estado de cuenta")}finally{Ct(!1)}},se=xe=>{const Le=xe.reduce((Ze,tt)=>Ze+(Number(tt.amount)||0),0),Ie=xe.filter(Ze=>Number(Ze.amount)<0).reduce((Ze,tt)=>Ze+Math.abs(Number(tt.amount)||0),0),rt=xe.filter(Ze=>Number(Ze.amount)>0).reduce((Ze,tt)=>Ze+(Number(tt.amount)||0),0);we({saldoActual:Le,totalAbonado:Ie,totalCargos:rt})},me=async()=>{if(!mt)return;F("");const xe=Number(Ue||0);if(!(xe>0)){F("Ingresa un monto de abono mayor a 0.");return}const Le=parseFloat(xe.toFixed(2));if(!et){F("Selecciona la fecha del abono.");return}try{Qe(!0);const Ie={customerId:mt.id,type:"ABONO",amount:-Le,date:et,comment:he||"",createdAt:Xt.now()},Ze={id:(await on(ht(Fe,"ar_movements"),Ie)).id,date:et,type:"ABONO",amount:-Le,comment:he||"",createdAt:Xt.now()},tt=[...At,Ze].sort((Xe,lt)=>{var er,Tr;if(Xe.date!==lt.date)return Xe.date.localeCompare(lt.date);const xt=((er=Xe.createdAt)==null?void 0:er.seconds)||0,Wt=((Tr=lt.createdAt)==null?void 0:Tr.seconds)||0;return xt-Wt});He(tt),se(tt),X(Xe=>Xe.map(lt=>lt.id===mt.id?{...lt,balance:(lt.balance||0)-Le}:lt)),ct(Xe=>Xe&&{...Xe,balance:(Xe.balance||0)-Le}),Ke(0),_e(""),ke(new Date().toISOString().slice(0,10)),ne(!1),F(" Abono registrado")}catch(Ie){console.error(Ie),F(" Error al registrar el abono")}finally{Qe(!1)}},fe=xe=>{Je(xe.id),yt(xe.date||new Date().toISOString().slice(0,10)),nr(Math.abs(Number(xe.amount||0))),dt(xe.comment||"")},Te=()=>{Je(null),yt(""),nr(0),dt("")},Re=async()=>{if(!$e)return;const xe=At.findIndex(Ze=>Ze.id===$e);if(xe===-1)return;const Le=At[xe],Ie=Number(Dt||0);if(!(Ie>0)){F("El monto debe ser mayor a 0.");return}const rt=Le.type==="ABONO"?-parseFloat(Ie.toFixed(2)):+parseFloat(Ie.toFixed(2));try{await Hr(Ht(Fe,"ar_movements",$e),{date:st,amount:rt,comment:Ce||""});const Ze=[...At];Ze[xe]={...Le,date:st,amount:rt,comment:Ce||""},Ze.sort((Xe,lt)=>{var er,Tr;if(Xe.date!==lt.date)return Xe.date.localeCompare(lt.date);const xt=((er=Xe.createdAt)==null?void 0:er.seconds)||0,Wt=((Tr=lt.createdAt)==null?void 0:Tr.seconds)||0;return xt-Wt}),He(Ze),se(Ze);const tt=Ze.reduce((Xe,lt)=>Xe+(Number(lt.amount)||0),0);X(Xe=>Xe.map(lt=>lt.id===(mt==null?void 0:mt.id)?{...lt,balance:tt}:lt)),ct(Xe=>Xe&&{...Xe,balance:tt}),Te(),F(" Movimiento actualizado")}catch(Ze){console.error(Ze),F(" Error al actualizar movimiento")}},ae=async xe=>{var Ie,rt;if(confirm(`Eliminar este movimiento (${xe.type==="ABONO"?"Abono":"Compra"}) del ${xe.date}?${xe.type==="CARGO"&&((Ie=xe.ref)!=null&&Ie.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`))try{if(Se(!0),xe.type==="CARGO"&&((rt=xe.ref)!=null&&rt.saleId)){try{await nb(xe.ref.saleId)}catch(Xe){console.warn("restoreSaleAndDeleteCandy error",Xe),Se(!1),F(" No se pudo devolver inventario de la venta.");return}await CH(xe.ref.saleId)}else await _n(Ht(Fe,"ar_movements",xe.id));const Ze=At.filter(Xe=>{var lt,xt;return xe.type==="CARGO"&&((lt=xe.ref)!=null&&lt.saleId)?((xt=Xe.ref)==null?void 0:xt.saleId)!==xe.ref.saleId:Xe.id!==xe.id});He(Ze),se(Ze);const tt=Ze.reduce((Xe,lt)=>Xe+(Number(lt.amount)||0),0);X(Xe=>Xe.map(lt=>lt.id===(mt==null?void 0:mt.id)?{...lt,balance:tt}:lt)),ct(Xe=>Xe&&{...Xe,balance:tt}),F(" Movimiento eliminado")}catch(Ze){console.error(Ze),F(" Error al eliminar movimiento")}finally{Se(!1)}},Me=v.useMemo(()=>[...de].sort((xe,Le)=>{var Ie,rt;return xe.status!==Le.status?xe.status==="BLOQUEADO"?1:-1:(((Ie=Le.createdAt)==null?void 0:Ie.seconds)||0)-(((rt=xe.createdAt)==null?void 0:rt.seconds)||0)}),[de]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ne(!0),s&&Ae(a)},type:"button",children:"Crear Cliente"})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsx("div",{className:"hidden md:block",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Telfono"}),l.jsx("th",{className:"p-2 border",children:"Vendedor"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Lmite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:pe?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Me.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Me.map(xe=>{var Ie;const Le=V===xe.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(Ie=xe.createdAt)!=null&&Ie.toDate?xe.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border text-left",children:Le?l.jsx("input",{className:"w-full border p-1 rounded",value:L,onChange:rt=>q(rt.target.value)}):l.jsx("div",{className:"font-medium",children:xe.name})}),l.jsx("td",{className:"p-2 border",children:Le?l.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:rt=>K(M1(rt.target.value))}):xe.phone}),l.jsx("td",{className:"p-2 border",children:Le?l.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:s?a:ue,onChange:rt=>Pe(rt.target.value),disabled:s,title:"Vendedor asociado",children:[l.jsx("option",{value:"",children:" Sin vendedor "}),o.map(rt=>l.jsx("option",{value:rt.id,children:rt.name},rt.id))]}):xe.vendorName||""}),l.jsx("td",{className:"p-2 border",children:Le?l.jsxs("select",{className:"w-full border p-1 rounded",value:Z,onChange:rt=>te(rt.target.value),children:[l.jsx("option",{value:"",children:""}),eT.map(rt=>l.jsx("option",{value:rt,children:rt},rt))]}):xe.place||""}),l.jsx("td",{className:"p-2 border",children:Le?l.jsxs("select",{className:"w-full border p-1 rounded",value:Y,onChange:rt=>z(rt.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:xe.status})}),l.jsx("td",{className:"p-2 border",children:Le?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(le)?"":le,onChange:rt=>je(Math.max(0,Number(rt.target.value||0)))}):Jc(xe.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:Jc(xe.balance||0)}),l.jsx("td",{className:"p-2 border",children:Le?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Q,onChange:rt=>ye(rt.target.value),maxLength:500}):l.jsx("span",{title:xe.notes||"",children:(xe.notes||"").length>40?(xe.notes||"").slice(0,40)+"":xe.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:Le?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>kt(xe),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>_t(xe),disabled:!i,title:i?"Borrar":"Solo admin",children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ie(xe),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},xe.id)})})]})}),l.jsx("div",{className:"md:hidden",children:pe?l.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Me.length===0?l.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):l.jsx("div",{className:"space-y-3",children:Me.map(xe=>{var rt;const Le=V===xe.id,Ie=(rt=xe.createdAt)!=null&&rt.toDate?xe.createdAt.toDate().toISOString().slice(0,10):"";return l.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Nombre"}),l.jsx("div",{className:"font-semibold truncate",children:Le?l.jsx("input",{className:"w-full border p-2 rounded",value:L,onChange:Ze=>q(Ze.target.value)}):xe.name})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Estado"}),l.jsx("div",{children:Le?l.jsxs("select",{className:"border p-2 rounded text-sm",value:Y,onChange:Ze=>z(Ze.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs ${xe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:xe.status})})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Fecha"}),l.jsx("div",{className:"font-medium",children:Ie})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Telfono"}),l.jsx("div",{className:"font-medium",children:Le?l.jsx("input",{className:"w-full border p-2 rounded",value:R,onChange:Ze=>K(M1(Ze.target.value))}):xe.phone})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Vendedor"}),l.jsx("div",{className:"font-medium",children:Le?l.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:s?a:ue,onChange:Ze=>Pe(Ze.target.value),disabled:s,title:"Vendedor asociado",children:[l.jsx("option",{value:"",children:" Sin vendedor "}),o.map(Ze=>l.jsx("option",{value:Ze.id,children:Ze.name},Ze.id))]}):xe.vendorName||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Lugar"}),l.jsx("div",{className:"font-medium",children:Le?l.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:Z,onChange:Ze=>te(Ze.target.value),children:[l.jsx("option",{value:"",children:""}),eT.map(Ze=>l.jsx("option",{value:Ze,children:Ze},Ze))]}):xe.place||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Lmite"}),l.jsx("div",{className:"font-medium",children:Le?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(le)?"":le,onChange:Ze=>je(Math.max(0,Number(Ze.target.value||0)))}):Jc(xe.creditLimit||0)})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Saldo"}),l.jsx("div",{className:"font-semibold",children:Jc(xe.balance||0)})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Comentario"}),l.jsx("div",{className:"font-medium",children:Le?l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Q,onChange:Ze=>ye(Ze.target.value),maxLength:500}):l.jsx("div",{title:xe.notes||"",children:(xe.notes||"").trim()?xe.notes:""})})]})]}),l.jsx("div",{className:"mt-3",children:Le?l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),l.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>kt(xe),children:"Editar"}),l.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>_t(xe),disabled:!i,title:i?"Borrar":"Solo admin",children:"Borrar"}),l.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ie(xe),children:"Estado"})]})})]},xe.id)})})})]}),k&&l.jsx("p",{className:"mt-2 text-sm",children:k}),gt&&id.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:wt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:y,onChange:xe=>b(xe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:w,onChange:xe=>I(M1(xe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:T,onChange:xe=>C(xe.target.value),children:[l.jsx("option",{value:"",children:""}),eT.map(xe=>l.jsx("option",{value:xe,children:xe},xe))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:xe=>B(xe.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s?a:W,onChange:xe=>Ae(xe.target.value),disabled:s,children:[l.jsx("option",{value:"",children:" Sin vendedor "}),o.map(xe=>l.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:xe=>ce(Math.max(0,Number(xe.target.value||0))),placeholder:"Ej: 1500"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor queda fijo (no cambia)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:P===0?"":P,onChange:xe=>D(Math.max(0,Number(xe.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:E,onChange:xe=>S(xe.target.value),maxLength:500,placeholder:"Notas del cliente"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[E.length,"/500"]})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Ye&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(mt==null?void 0:mt.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Ke(0),ke(new Date().toISOString().slice(0,10)),_e(""),ne(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>nt(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),l.jsx("div",{className:"text-xl font-semibold",children:Jc(Number((mt==null?void 0:mt.initialDebt)||0))})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:Jc(it.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:Jc(it.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:Jc(it.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:ft?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):At.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):At.map(xe=>{var Ie,rt;const Le=$e===xe.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Le?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:st,onChange:Ze=>yt(Ze.target.value)}):xe.date||""}),l.jsx("td",{className:"p-2 border",children:xe.amount>=0?(Ie=xe.ref)!=null&&Ie.saleId?l.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>x(xe.ref.saleId),children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(rt=xe.ref)!=null&&rt.saleId?`Venta #${xe.ref.saleId}`:""}),l.jsx("td",{className:"p-2 border",children:Le?l.jsx("input",{className:"w-full border p-1 rounded",value:Ce,onChange:Ze=>dt(Ze.target.value),placeholder:"Comentario"}):l.jsx("span",{title:xe.comment||"",children:(xe.comment||"").length>40?(xe.comment||"").slice(0,40)+"":xe.comment||""})}),l.jsx("td",{className:"p-2 border font-semibold",children:Le?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Dt)?"":Dt,onChange:Ze=>{const tt=Number(Ze.target.value||0),Xe=Number.isFinite(tt)?Math.max(0,parseFloat(tt.toFixed(2))):0;nr(Xe)},placeholder:"0.00",title:xe.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Jc(xe.amount)}),l.jsx("td",{className:"p-2 border",children:Le?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Re,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>fe(xe),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ae(xe),children:"Borrar"})]})})]},xe.id)})})]})})]})}),re&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(mt==null?void 0:mt.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:et,onChange:xe=>ke(xe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Ue===0?"":Ue,onChange:xe=>{const Le=Number(xe.target.value||0),Ie=Number.isFinite(Le)?Math.max(0,parseFloat(Le.toFixed(2))):0;Ke(Ie)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:he,onChange:xe=>_e(xe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[he.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ne(!1),disabled:be,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:me,disabled:be,children:be?"Guardando...":"Guardar abono"})]})]})}),u&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",f?` #${f}`:""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>d(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:A?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):p.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):p.map((xe,Le)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:xe.productName}),l.jsx("td",{className:"p-2 border text-right",children:xe.qty}),l.jsx("td",{className:"p-2 border text-right",children:Jc(xe.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:Jc(xe.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:Jc(xe.total)})]},Le))})]})})]})})]})}const om=t=>`C$ ${(Number(t)||0).toFixed(2)}`,CLe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];function ELe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function SLe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function ILe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:o,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new gr;let A=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,A),A+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,A),A+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,A),A+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,A),A+=5,d.text(`Sucursal: ${ELe(a)}`,10,A),A+=5,d.text(`Autorizado: ${e}`,10,A),A+=5,o&&(d.text(`Vendedor: ${o}`,10,A),A+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),f=c.toFixed(2);d.text(`Comisin vendedor: ${f}%  C$ ${h}`,10,A),A+=8}else A+=3;d.setFontSize(12),d.text("Producto",10,A),d.text("Paquetes",110,A,{align:"right"}),d.text("Precio.",150,A,{align:"right"}),d.text("Subtotal",190,A,{align:"right"}),A+=4,d.line(10,A,190,A),A+=4,s.forEach(h=>{A>270&&(d.addPage(),A=12);const f=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(f,10,A),d.text(String(h.qty),110,A,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,A,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,A,{align:"right"}),A+=5}),A+=4,d.line(10,A,190,A),A+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,A,{align:"right"}),A+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,A),d.save(`venta_dulces_${e}.pdf`)}async function EH(t,e){if(!t||!e)return 0;const r=Kt(ht(Fe,"inventory_candies_sellers"),Zt("sellerId","==",e),Zt("productId","==",t)),n=await jt(r);let a=0;return n.forEach(s=>{const i=s.data(),o=Number(i.remainingUnits??i.remaining??i.totalUnits??0);o>0&&(a+=o)}),a}const SH=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function BLe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const o=[];if(!e||!r||i<=0)return{allocations:[]};const c=Kt(ht(Fe,"inventory_candies_sellers"),Zt("sellerId","==",r),Zt("productId","==",e),Zt("remainingUnits",">",0),Gr("date","asc"),Gr("createdAt","asc")),u=await jt(c);for(const d of u.docs){if(i<=0)break;const A=d.data(),h=Number(A.remainingUnits||0);if(h<=0)continue;const f=Math.min(h,i),m=h-f,p=Math.max(1,Math.floor(Number(A.unitsPerPackage||1))),g=Math.floor(m/p);await Hr(d.ref,{remainingUnits:m,remainingPackages:g}),o.push({inventorySellerId:d.id,productId:e,units:f,saleDate:a,saleId:s}),i-=f}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:o}}function IH(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function TLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[o,c]=v.useState([]),[u,d]=v.useState({}),[A,h]=v.useState("CONTADO"),[f,m]=v.useState("RIVAS"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(SH()),[I,T]=v.useState(""),[C,E]=v.useState(!1),[S,O]=v.useState(""),[B,P]=v.useState([]),D=v.useMemo(()=>B.reduce((ke,he)=>ke+(he.qtyPackages||0),0),[B]),W=v.useMemo(()=>B.reduce((ke,he)=>ke+(he.qtyPackages||0)*(he.unitsPerPackage||1),0),[B]),Ae=v.useMemo(()=>{const ke=B.reduce((he,_e)=>{const be=(Number(_e.pricePerPackage)||0)*(_e.qtyPackages||0),Qe=Number(_e.discount)||0,$e=Math.max(0,be-Qe);return he+$e},0);return Math.floor(ke*100)/100},[B]),[ee,ce]=v.useState(0),[de,X]=v.useState(""),[pe,Se]=v.useState(!1),[k,F]=v.useState(!1),[V,M]=v.useState(""),[L,q]=v.useState("+505 "),[R,K]=v.useState(""),[Z,te]=v.useState(""),[Q,ye]=v.useState("ACTIVO"),[Y,z]=v.useState(0),[le,je]=v.useState(""),ue=()=>{M(""),q("+505 "),K(""),te(""),ye("ACTIVO"),z(0)},Pe=v.useMemo(()=>n.find(ke=>ke.id===p),[n,p]),Ye=v.useMemo(()=>C&&I?n.filter(ke=>(ke.vendorId??ke.sellerId??"")===I):n,[n,C,I]),nt=(Pe==null?void 0:Pe.balance)||0,mt=A==="CREDITO"?nt+Math.max(0,Number(Ae||0))-Math.max(0,Number(ee||0)):0,ct=v.useMemo(()=>o.find(ke=>ke.id===I)||null,[o,I]),ft=(ct==null?void 0:ct.commissionPercent)||0,Ct=v.useMemo(()=>{const ke=Number(Ae||0),he=Number(ft||0),_e=ke*he/100;return Number(_e.toFixed(2))},[Ae,ft]);v.useEffect(()=>{(async()=>{const ke=Kt(ht(Fe,"customers_candies"),Gr("createdAt","desc")),he=await jt(ke),_e=[];he.forEach(Je=>{const st=Je.data();_e.push({id:Je.id,name:st.name??"",phone:st.phone??"+505 ",place:st.place??"",status:st.status??"ACTIVO",creditLimit:Number(st.creditLimit??0),balance:0,sellerId:st.sellerId??st.vendorId??"",vendorId:st.vendorId??st.sellerId??""})});for(const Je of _e)try{const st=Kt(ht(Fe,"ar_movements"),Zt("customerId","==",Je.id)),yt=await jt(st);let Dt=0;yt.forEach(nr=>Dt+=Number(nr.data().amount||0)),Je.balance=Dt}catch{Je.balance=0}a(_e);const be=Kt(ht(Fe,"products_candies"),Gr("createdAt","desc")),Qe=await jt(be),$e=[];Qe.forEach(Je=>{const st=Je.data();$e.push({id:Je.id,name:st.name??"(sin nombre)",sku:st.sku??"",unitsPerPackage:Number(st.unitsPerPackage??1),priceRivas:Number(st.unitPriceRivas??0),priceSanJorge:Number(st.unitPriceSanJorge??0),priceIsla:Number(st.unitPriceIsla??0)})}),i($e);try{const Je=await jt(ht(Fe,"sellers_candies")),st=[];Je.forEach(yt=>{const Dt=yt.data(),nr=Dt.branch||"Rivas",Ce=SLe(nr);st.push({id:yt.id,name:Dt.name??"(sin nombre)",branch:Ce,branchLabel:nr,commissionPercent:Number(Dt.commissionPercent??0)})}),c(st)}catch(Je){console.error("Error cargando vendedores:",Je)}d({})})()},[]),v.useEffect(()=>{if(t==="vendedor_dulces"&&e){T(e),E(!0);try{localStorage.setItem("pos_vendorId",e),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(t==="admin"){E(!1);return}try{const ke=localStorage.getItem("pos_vendorId")||"",he=localStorage.getItem("pos_role")||"";ke&&T(ke),he.toUpperCase()==="VENDEDOR"&&E(!0)}catch{}},[t,e]);const At=async ke=>{if(!ke){d({});return}const he=Kt(ht(Fe,"inventory_candies_sellers"),Zt("sellerId","==",ke)),_e=await jt(he),be={};_e.forEach(Qe=>{const $e=Qe.data(),Je=$e.productId||"";if(!Je)return;const st=Number($e.remainingUnits??$e.remaining??$e.totalUnits??0);st<=0||(be[Je]=(be[Je]||0)+st)}),d(be),P(Qe=>{const $e=[];for(const Je of Qe){const st=be[Je.productId]??0;st>0&&$e.push({...Je,availableUnits:st})}return $e})};v.useEffect(()=>{if(!I){d({});return}const ke=o.find(he=>he.id===I);ke&&m(ke.branch),At(I)},[I,o]),v.useEffect(()=>{P(ke=>ke.map(he=>{const _e=s.find(Qe=>Qe.id===he.productId);if(!_e)return he;const be=f==="RIVAS"?_e.priceRivas:f==="SAN_JORGE"?_e.priceSanJorge:_e.priceIsla;return{...he,pricePerPackage:Number(be)||0}}))},[f,s]);async function He(ke){const{productId:he,vendorId:_e,branch:be}=ke;if(!he||!_e)return 0;const Qe=Kt(ht(Fe,"inventory_candies_sellers"),Zt("sellerId","==",_e),Zt("productId","==",he)),$e=await jt(Qe);if($e.empty)return 0;const Je=$e.docs[0].data(),st=Number(Je.unitPriceVendor??0);if(st>0)return st;const yt=Number(be==="RIVAS"?Je.unitPriceRivas??0:be==="SAN_JORGE"?Je.unitPriceSanJorge??0:Je.unitPriceIsla??0);return Number(yt||0)}const it=async ke=>{var Je;if(!ke)return;if(!I){X("Selecciona primero el vendedor para usar su inventario."),O("");return}if(B.some(st=>st.productId===ke)){O("");return}const he=s.find(st=>st.id===ke);if(!he){O("");return}const _e=await EH(ke,I),be=((Je=o.find(st=>st.id===I))==null?void 0:Je.branch)??f,Qe=await He({productId:ke,vendorId:I,branch:be}),$e={productId:ke,productName:he.name||"",sku:he.sku||"",unitsPerPackage:he.unitsPerPackage||1,pricePerPackage:Number(Qe)||0,availableUnits:Number(_e)||0,qtyPackages:0,discount:0};P(st=>[...st,$e]),O("")},we=(ke,he)=>{P(_e=>_e.map(be=>{if(be.productId!==ke)return be;if(he==="")return{...be,qtyPackages:0};const Qe=Math.max(0,Math.floor(Number(he)));return{...be,qtyPackages:Qe}}))},re=(ke,he)=>{P(_e=>_e.map(be=>{if(be.productId!==ke)return be;if(he==="")return{...be,discount:0};const Qe=Math.max(0,Math.floor(Number(he)));return{...be,discount:Qe}}))},ne=ke=>P(he=>he.filter(_e=>_e.productId!==ke)),Ue=async()=>{if(!b)return"Selecciona la fecha.";if(!I)return"Selecciona el vendedor para esta venta.";if(B.length===0)return"Agrega al menos un producto.";const ke=B.filter(he=>(he.qtyPackages||0)>0);if(ke.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Ae>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!x.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!p)return"Selecciona un cliente (crdito).";if(ee<0)return"El pago inicial no puede ser negativo.";if(ee>Ae)return"El pago inicial no puede superar el total.";if((Pe==null?void 0:Pe.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const he of ke){const _e=he.unitsPerPackage||1,be=(he.qtyPackages||0)*_e,Qe=await EH(he.productId,I),$e=Math.floor(Qe/_e);if(be>Qe)return`Inventario insuficiente en el pedido del vendedor para "${he.productName}". Disponible: ${$e} paquetes.`;const Je=(Number(he.pricePerPackage)||0)*(he.qtyPackages||0),st=Number(he.discount)||0;if(!Number.isInteger(st)||st<0)return`El descuento en "${he.productName}" debe ser entero y  0.`;if(st>Je)return`El descuento en "${he.productName}" no puede exceder C$ ${Je.toFixed(2)}.`}return null},Ke=async ke=>{ke.preventDefault(),X("");const he=await Ue();if(he){X(" "+he);return}try{Se(!0);const _e=B.filter(st=>(st.qtyPackages||0)>0).map(st=>{const yt=st.unitsPerPackage||1,Dt=st.qtyPackages||0,nr=Dt*yt,Ce=(Number(st.pricePerPackage)||0)*(Dt||0),dt=Math.max(0,Math.floor(Number(st.discount)||0)),gt=Math.max(0,Ce-dt);return{productId:st.productId,productName:st.productName,sku:st.sku||"",qty:nr,packages:Dt,unitsPerPackage:yt,branch:f,unitPricePackage:Number(st.pricePerPackage)||0,discount:dt,total:Math.floor(gt*100)/100}}),be={type:A,branch:f,date:b,createdAt:Xt.now(),itemsTotal:Number(Ae)||0,total:Number(Ae)||0,quantity:Number(W)||0,packagesTotal:Number(D)||0,items:_e,vendorId:I},Qe=o.find(st=>st.id===I);Qe&&(be.vendorName=Qe.name,be.vendorBranch=Qe.branch,be.vendorBranchLabel=Qe.branchLabel,be.vendorCommissionPercent=Qe.commissionPercent||0,be.vendorCommissionAmount=Ct||0),A==="CONTADO"?be.customerName=x.trim():(be.customerId=p,be.downPayment=Number(ee)||0);const $e=await on(ht(Fe,"sales_candies"),be);if(A==="CONTADO"){const st=(x||"").trim();if(st)try{await on(ht(Fe,"cash_customers"),{name:st,date:b,branch:f,vendorId:I,createdAt:Xt.now()})}catch(yt){console.warn("No se pudo guardar cash_customer:",yt)}}if(A==="CREDITO"&&p){const st={customerId:p,date:b,createdAt:Xt.now(),ref:{saleId:$e.id}},yt=Number((Pe==null?void 0:Pe.balance)||0);if(await on(ht(Fe,"ar_movements"),{...st,type:"CARGO",amount:Number(Ae)||0}),Number(ee)>0&&await on(ht(Fe,"ar_movements"),{...st,type:"ABONO",amount:-Number(ee)}),yt===0)try{await Hr(Ht(Fe,"customers_candies",p),{initialDebt:Number(Ae)||0,initialDebtDate:b})}catch(Dt){console.warn("No se pudo setear initialDebt:",Dt)}}const Je={};for(const st of _e)if(st.qty>0){const{allocations:yt}=await BLe({productId:st.productId,vendorId:I,quantityUnits:st.qty,saleDate:b,saleId:$e.id});Je[st.productId]={productId:st.productId,vendorId:I,allocations:yt}}await Hr(Ht(Fe,"sales_candies",$e.id),{allocationsByItem:Je});try{const st=A==="CONTADO"?x.trim()||"Cliente Mostrador":(Pe==null?void 0:Pe.name)||"Cliente crdito";ILe({saleId:$e.id,date:b,customerName:st,branch:f,items:_e.map(yt=>({productName:yt.productName,qty:yt.packages,unitPrice:yt.unitPricePackage,total:yt.total})),total:Number(Ae)||0,vendorName:Qe==null?void 0:Qe.name,vendorCommissionPercent:(Qe==null?void 0:Qe.commissionPercent)||0,vendorCommissionAmount:Ct})}catch(st){console.error("Error generando voucher PDF:",st)}h("CONTADO"),g(""),y(""),w(SH()),P([]),ce(0),A==="CREDITO"&&p&&a(st=>st.map(yt=>yt.id===p?{...yt,balance:(yt.balance||0)+(Number(Ae)||0)-(Number(ee)||0)}:yt)),X(" Venta de dulces registrada"),I?await At(I):d({})}catch(_e){console.error(_e),X(" Error al guardar la venta de dulces")}finally{Se(!1)}},et=v.useMemo(()=>s.filter(ke=>{const he=u[ke.id]||0,_e=Math.max(1,Number(ke.unitsPerPackage||1));return Math.floor(he/_e)>0}).sort((ke,he)=>(ke.name||"").localeCompare(he.name||"")),[s,u]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:l.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),l.jsxs("form",{onSubmit:Ke,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ke=>h(ke.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:x,onChange:ke=>y(ke.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:p,onChange:ke=>g(ke.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),Ye.map(ke=>l.jsxs("option",{value:ke.status==="ACTIVO"?ke.id:"",disabled:ke.status==="BLOQUEADO",children:[ke.name," | ",ke.phone," | Saldo: ",om(ke.balance||0)]},ke.id))]}),l.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>F(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:om(nt)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:ke=>ce(Math.max(0,Number(ke.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:om(mt)})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:ke=>w(ke.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:ke=>{T(ke.target.value),P([])},disabled:C,children:[l.jsx("option",{value:"",children:"Selecciona un vendedor"}),o.map(ke=>l.jsxs("option",{value:ke.id,children:[ke.name,"  ",ke.branchLabel,"  ",ke.commissionPercent.toFixed(2),"%"," comisin"]},ke.id))]}),C&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),l.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:f==="RIVAS",readOnly:!0,disabled:!0}),l.jsx("span",{children:"Rivas"})]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:f==="SAN_JORGE",readOnly:!0,disabled:!0}),l.jsx("span",{children:"San Jorge"})]}),l.jsxs("label",{className:"inline-flex items-center gap-1",children:[l.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:f==="ISLA",readOnly:!0,disabled:!0}),l.jsx("span",{children:"Isla de Ometepe"})]})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:S,onChange:async ke=>{const he=ke.target.value;O(he),await it(he)},disabled:!I,children:[l.jsx("option",{value:"",children:I?"Selecciona un producto":"Selecciona un vendedor primero"}),et.map(ke=>{const he=B.some($e=>$e.productId===ke.id),_e=u[ke.id]||0,be=Math.max(1,Number(ke.unitsPerPackage||1)),Qe=Math.floor(_e/be);return Qe<=0?null:l.jsxs("option",{value:he?"":ke.id,disabled:he,children:[ke.name," ",ke.sku?` ${ke.sku}`:""," (disp: ",Qe," ","paq.)",he?" ":""]},ke.id)})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[l.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[l.jsx("div",{className:"col-span-4",children:"Producto"}),l.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),l.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),l.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),l.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),l.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),l.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),B.length===0?l.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):B.map(ke=>{const he=u[ke.productId]??ke.availableUnits??0,_e=ke.unitsPerPackage?Math.floor(he/ke.unitsPerPackage):0,be=Math.max(0,_e-(ke.qtyPackages||0)),Qe=(Number(ke.pricePerPackage)||0)*(ke.qtyPackages||0),$e=Math.max(0,Qe-(Number(ke.discount)||0));return l.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[l.jsx("div",{className:"col-span-4",children:l.jsxs("div",{className:"font-medium",children:[ke.productName,ke.sku?`  ${ke.sku}`:""]})}),l.jsx("div",{className:"col-span-2 text-right",children:om(ke.pricePerPackage)}),l.jsxs("div",{className:"col-span-2 text-right",children:[be," paq."]}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ke.qtyPackages)||ke.qtyPackages===0?"":ke.qtyPackages,onChange:Je=>we(ke.productId,Je.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de paquetes"})}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ke.discount)||ke.discount===0?"":ke.discount,onChange:Je=>re(ke.productId,Je.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),l.jsx("div",{className:"col-span-1 text-right",children:om($e)}),l.jsx("div",{className:"col-span-1 text-center",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ne(ke.productId),title:"Quitar producto",children:""})})]},ke.productId)})]})}),B.length>0&&l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),l.jsx("span",{className:"font-semibold",children:D})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total: "}),l.jsx("span",{className:"font-semibold",children:om(Ae)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),l.jsxs("span",{className:"font-semibold",children:[om(Ct)," ",ft?`(${ft.toFixed(2)}%)`:""]})]})]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:pe,children:pe?"Guardando...":"Registrar venta"})})]}),de&&l.jsx("p",{className:"mt-2 text-sm",children:de}),k&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:V,onChange:ke=>M(ke.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:L,onChange:ke=>q(IH(ke.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:R,onChange:ke=>K(ke.target.value),children:[l.jsx("option",{value:"",children:""}),CLe.map(ke=>l.jsx("option",{value:ke,children:ke},ke))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:Q,onChange:ke=>ye(ke.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),!C&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:le,onChange:ke=>je(ke.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un vendedor"}),o.filter(ke=>(ke.status??"ACTIVO")==="ACTIVO").map(ke=>l.jsxs("option",{value:ke.id,children:[ke.name,"  ",ke.branchLabel]},ke.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Y===0?"":Y,onChange:ke=>z(Math.max(0,Number(ke.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Z,onChange:ke=>te(ke.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[l.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ue(),F(!1)},children:"Cancelar"}),l.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var _e;const ke=C?I||e:le;if(!ke){X("Selecciona el vendedor para asociar este cliente.");return}if(X(""),!V.trim()){X("Ingresa el nombre del nuevo cliente.");return}const he=IH(L);try{const be=await on(ht(Fe,"customers_candies"),{name:V.trim(),phone:he,place:R||"",notes:Z||"",status:Q,creditLimit:Number(Y||0),createdAt:Xt.now(),sellerId:ke,vendorId:ke,vendorName:((_e=o.find($e=>$e.id===ke))==null?void 0:_e.name)||""}),Qe={id:be.id,name:V.trim(),phone:he,place:R||"",status:Q,creditLimit:Number(Y||0),balance:0,sellerId:ke};a($e=>[Qe,...$e]),g(be.id),ue(),F(!1),X(" Cliente creado")}catch(be){console.error(be),X(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),pe&&l.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[l.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const BH=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],g_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function PLe(){const[t,e]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(dr(new Date,"yyyy-MM-dd")),[i,o]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[h,f]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState(""),[W,Ae]=v.useState(0),[ee,ce]=v.useState("PENDIENTE"),[de,X]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Kt(ht(Fe,"expenses_candies"),Gr("date","desc")),K=await jt(R),Z=[];K.forEach(te=>{const Q=te.data();Z.push({id:te.id,date:Q.date||dr(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??Xt.now()})}),x(Z)}catch(R){console.error(R),I(" Error al cargar gastos")}finally{b(!1)}})()},[]);const pe=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=pe.reduce((te,Q)=>te+(Q.amount||0),0),K=pe.filter(te=>te.status==="PAGADO").reduce((te,Q)=>te+(Q.amount||0),0),Z=R-K;return{total:R,pagado:K,pendiente:Z}},[pe]),k=()=>{s(dr(new Date,"yyyy-MM-dd")),o(""),u(""),A(0),f("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),I(""),!i){I("Selecciona una categora.");return}if(!c.trim()){I("Ingresa una descripcin.");return}if(!d||d<=0){I("Ingresa un monto vlido.");return}try{const K=await on(ht(Fe,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:Xt.now()});x(Z=>[{id:K.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:Xt.now()},...Z]),k(),I(" Gasto registrado")}catch(K){console.error(K),I(" Error al guardar gasto")}},V=R=>{C(R.id),S(R.date),B(R.category||""),D(R.description||""),Ae(Number(R.amount||0)),ce(R.status||"PENDIENTE"),X(R.notes||"")},M=()=>{C(null),S(""),B(""),D(""),Ae(0),ce("PENDIENTE"),X("")},L=async()=>{if(T){if(!O){I("Selecciona una categora.");return}if(!P.trim()){I("Ingresa una descripcin.");return}if(!W||W<=0){I("Ingresa un monto vlido.");return}try{await Hr(Ht(Fe,"expenses_candies",T),{date:E,category:O,description:P.trim(),amount:Number(W.toFixed(2)),status:ee,notes:de||""}),x(R=>R.map(K=>K.id===T?{...K,date:E,category:O,description:P.trim(),amount:Number(W.toFixed(2)),status:ee,notes:de||""}:K)),M(),I(" Gasto actualizado")}catch(R){console.error(R),I(" Error al actualizar gasto")}}},q=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await _n(Ht(Fe,"expenses_candies",R.id)),x(Z=>Z.filter(te=>te.id!==R.id)),I(" Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",g_(Se.total)]}),l.jsxs("div",{children:["Pagado: ",g_(Se.pagado)]}),l.jsxs("div",{children:["Pendiente: ",g_(Se.pendiente)]})]})]}),l.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>o(R.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),BH.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>A(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>f(R.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):pe.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):pe.slice().sort((R,K)=>R.date.localeCompare(K.date)).map(R=>{const K=T===R.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:Z=>S(Z.target.value)}):R.date}),l.jsx("td",{className:"p-2 border",children:K?l.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:Z=>B(Z.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),BH.map(Z=>l.jsx("option",{value:Z,children:Z},Z))]}):R.category||""}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{className:"w-full border p-1 rounded",value:P,onChange:Z=>D(Z.target.value)}):l.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:Z=>Ae(Math.max(0,Number(Z.target.value||0)))}):g_(R.amount)}),l.jsx("td",{className:"p-2 border",children:K?l.jsxs("select",{className:"w-full border p-1 rounded",value:ee,onChange:Z=>ce(Z.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),l.jsx("td",{className:"p-2 border",children:K?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:de,onChange:Z=>X(Z.target.value),maxLength:500}):l.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:K?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:L,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(R),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>q(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&l.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Ol=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function jLe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?dr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function kLe(t,e){var s,i,o;const r=jLe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((o=t.item)==null?void 0:o.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function FLe(t){const e=Kt(ht(Fe,"ar_movements"),Zt("ref.saleId","==",t)),r=await jt(e);await Promise.all(r.docs.map(n=>_n(Ht(Fe,"ar_movements",n.id))))}function OLe({role:t="",sellerCandyId:e=""}){const r=t==="vendedor_dulces",n=t==="admin",a=n?8:7,[s,i]=v.useState(!1),[o,c]=v.useState(!1),[u,d]=v.useState(null),[A,h]=v.useState([]),f=async le=>{i(!0),c(!0),d(le),h([]);try{const je=await So(Ht(Fe,"sales_candies",le)),ue=je.exists()?je.data():null;if(!ue){h([]);return}const Ye=(Array.isArray(ue==null?void 0:ue.items)?ue.items:ue!=null&&ue.item?[ue.item]:[]).map(nt=>({productName:String(nt.productName||""),qty:Number(nt.packages??nt.qty??nt.quantity??0),unitPrice:Number(nt.unitPricePackage??nt.unitPrice??0),discount:Number(nt.discount||0),total:Number(nt.total??nt.lineFinal??0)}));h(Ye)}catch(je){console.error(je)}finally{c(!1)}},[m,p]=v.useState(dr(new Date,"yyyy-MM-01")),[g,x]=v.useState(dr(new Date,"yyyy-MM-dd")),[y,b]=v.useState([]),[w,I]=v.useState([]),[T,C]=v.useState([]),[E,S]=v.useState(!0),[O,B]=v.useState(""),[P,D]=v.useState(""),[W,Ae]=v.useState(""),[ee,ce]=v.useState(null),de=15,[X,pe]=v.useState(1),Se=v.useMemo(()=>{const le={};return y.forEach(je=>le[je.id]=je.name),le},[y]),k=v.useMemo(()=>{const le={};return T.forEach(je=>{le[je.id]=je}),le},[T]),F=le=>{const je=Number(le.vendorCommissionAmount||0);if(je>0)return je;if(!le.vendorId)return 0;const ue=k[le.vendorId];if(!ue||!ue.commissionPercent)return 0;const Pe=(Number(le.total)||0)*(Number(ue.commissionPercent)||0)/100;return Number(Pe.toFixed(2))};v.useEffect(()=>{(async()=>{S(!0),B("");try{const le=await jt(ht(Fe,"customers_candies")),je=[];le.forEach(mt=>je.push({id:mt.id,name:mt.data().name||""})),b(je);const ue=await jt(ht(Fe,"sellers_candies")),Pe=[];ue.forEach(mt=>{const ct=mt.data();Pe.push({id:mt.id,name:ct.name||"",commissionPercent:Number(ct.commissionPercent||0)})}),C(Pe);const Ye=await jt(Kt(ht(Fe,"sales_candies"),Gr("createdAt","desc"))),nt=[];Ye.forEach(mt=>{const ct=kLe(mt.data(),mt.id);ct&&ct.date>=m&&ct.date<=g&&nt.push(ct)}),I(nt.sort((mt,ct)=>ct.date.localeCompare(mt.date))),pe(1)}catch(le){console.error(le),B(" Error cargando transacciones.")}finally{S(!1)}})()},[m,g]);const V=v.useMemo(()=>w.filter(le=>!(r&&(!e||!le.vendorId||le.vendorId!==e)||P&&le.customerId!==P||W&&le.type!==W)),[w,P,W,r,e]),M=v.useMemo(()=>{let le=0,je=0,ue=0,Pe=0;for(const Ye of V)Ye.type==="CONTADO"?(le+=Ye.quantity,ue+=Ye.total):(je+=Ye.quantity,Pe+=Ye.total);return{packsCash:le,packsCredito:je,montoCash:ue,montoCredito:Pe}},[V]),L=Math.max(1,Math.ceil(V.length/de)),q=v.useMemo(()=>{const le=(X-1)*de;return V.slice(le,le+de)},[V,X]),R=v.useMemo(()=>u&&w.find(le=>le.id===u)||null,[u,w]),K=async le=>{if(n&&(ce(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{S(!0),await nb(le.id),await FLe(le.id),I(je=>je.filter(ue=>ue.id!==le.id)),B(" Venta eliminada")}catch(je){console.error(je),B(" No se pudo eliminar la venta.")}finally{S(!1)}},Z=()=>{const le=`Ventas del dia  ${m} a ${g}`,je=nt=>(nt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ue=V.map(nt=>{const mt=nt.customerName||(nt.customerId?Se[nt.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${nt.date}</td>
          <td>${je(mt)}</td>
          <td>${nt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${nt.quantity}</td>
          <td style="text-align:right">${Ol(nt.total)}</td>
        </tr>`}).join(""),Pe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${je(le)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${je(le)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${M.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${M.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Ol(M.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Ol(M.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${ue||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Ye=window.open("","_blank");Ye&&(Ye.document.open(),Ye.document.write(Pe),Ye.document.close())},te=()=>pe(1),Q=()=>pe(le=>Math.max(1,le-1)),ye=()=>pe(le=>Math.min(L,le+1)),Y=()=>pe(L),z=()=>{const le=[];if(L<=7)for(let ue=1;ue<=L;ue++)le.push(ue);else{const ue=Math.max(1,X-2),Pe=Math.min(L,X+2);le.push(1),ue>2&&le.push(-1);for(let Ye=ue;Ye<=Pe;Ye++)Ye!==1&&Ye!==L&&le.push(Ye);Pe<L-1&&le.push(-2),le.push(L)}return l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:X===1,children:" Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:X===1,children:" Anterior"}),le.map((ue,Pe)=>typeof ue=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${ue===X?"bg-blue-600 text-white":""}`,onClick:()=>pe(ue),children:ue},Pe):l.jsx("span",{className:"px-2",children:""},Pe)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ye,disabled:X===L,children:"Siguiente "}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Y,disabled:X===L,children:"ltimo "})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",X," de ",L,"  ",V.length," transaccin(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:le=>{p(le.target.value),pe(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:le=>{x(le.target.value),pe(1)}})]}),l.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:P,onChange:le=>{D(le.target.value),pe(1)},children:[l.jsx("option",{value:"",children:"Todos"}),y.map(le=>l.jsx("option",{value:le.id,children:le.name},le.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:W,onChange:le=>{Ae(le.target.value),pe(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Z,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:M.packsCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:M.packsCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:Ol(M.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:Ol(M.montoCredito)})]})]}),l.jsxs("div",{className:"block md:hidden space-y-3",children:[E?l.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):q.length===0?l.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):q.map(le=>{const je=le.customerName||(le.customerId?Se[le.customerId]:"")||"Nombre cliente",ue=F(le);return l.jsx("div",{className:"bg-white border rounded-xl shadow",children:l.jsxs("details",{className:"group",children:[l.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"font-semibold truncate",children:je}),l.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:le.date})]}),l.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[l.jsx("span",{className:`px-2 py-1 rounded-full border ${le.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:le.type==="CREDITO"?"Crdito":"Cash"}),l.jsxs("span",{className:"text-gray-700",children:[l.jsx("b",{children:"Paquetes:"})," ",l.jsx("button",{type:"button",className:"underline text-blue-600",onClick:Pe=>{Pe.preventDefault(),f(le.id)},title:"Ver detalle",children:le.quantity})]}),l.jsxs("span",{className:"text-gray-700",children:[l.jsx("b",{children:"Monto:"})," ",Ol(le.total)]})]})]}),l.jsx("div",{className:"text-gray-500 mt-1",children:l.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),l.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:l.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Cliente"}),l.jsx("span",{className:"font-medium text-right",children:je})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Fecha"}),l.jsx("span",{className:"font-medium",children:le.date})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Tipo"}),l.jsx("span",{className:"font-medium",children:le.type==="CREDITO"?"Crdito":"Cash"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Paquetes"}),l.jsx("span",{className:"font-medium",children:l.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>f(le.id),title:"Ver detalle",children:le.quantity})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Monto"}),l.jsx("span",{className:"font-semibold",children:Ol(le.total)})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Comisin"}),l.jsx("span",{className:"font-medium",children:ue>0?Ol(ue):""})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Vendedor"}),l.jsx("span",{className:"font-medium",children:le.vendorName||""})]}),n&&l.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ce(Pe=>Pe===le.id?null:le.id),children:" Acciones"}),ee===le.id&&l.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>K(le),children:"Eliminar"})]})]})})]})},le.id)}),l.jsx("div",{className:"bg-white p-3 rounded shadow border",children:z()})]}),l.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Comisin"}),l.jsx("th",{className:"p-2 border",children:"Vendedor"}),n&&l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:E?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Cargando"})}):q.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Sin transacciones en el rango."})}):q.map(le=>{const je=le.customerName||(le.customerId?Se[le.customerId]:"")||"Nombre cliente",ue=F(le);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:le.date}),l.jsx("td",{className:"p-2 border",children:je}),l.jsx("td",{className:"p-2 border",children:le.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>f(le.id),children:le.quantity})}),l.jsx("td",{className:"p-2 border",children:Ol(le.total)}),l.jsx("td",{className:"p-2 border",children:ue>0?Ol(ue):""}),l.jsx("td",{className:"p-2 border",children:le.vendorName||""}),n&&l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ce(Pe=>Pe===le.id?null:le.id),title:"Acciones",children:""}),ee===le.id&&l.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>K(le),children:"Eliminar"})})]})]},le.id)})})]}),z()]}),O&&l.jsx("p",{className:"mt-2 text-sm",children:O}),s&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",u?` #${u}`:""]}),R&&l.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",l.jsx("span",{className:"font-semibold",children:F(R)>0?Ol(F(R)):""})]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((le,je)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:le.productName}),l.jsx("td",{className:"p-2 border text-right",children:le.qty}),l.jsx("td",{className:"p-2 border text-right",children:Ol(le.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:Ol(le.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:Ol(le.total)})]},je))})]})})]})})]})}const mn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function py(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?dr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function DLe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function RLe(t,e){const r=py(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=DLe(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((o,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),A=Math.max(0,u-d);return o+A},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function MLe(t,e,r,n){const a={};for(const o of t)a[o.productId]||(a[o.productId]={productName:o.productName,lots:[]}),a[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(a))a[o].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((o,c)=>o.date.localeCompare(c.date));let i=0;for(const o of s)for(const c of o.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const h=Math.min(A.qtyLeft,d);o.date>=r&&o.date<=n&&(i+=h*A.cost),A.qtyLeft-=h,d-=h}}return i}async function LLe(t){const e=Kt(ht(Fe,"ar_movements"),Zt("ref.saleId","==",t)),r=await jt(e);await Promise.all(r.docs.map(n=>_n(Ht(Fe,"ar_movements",n.id))))}function ULe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[i,o]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState([]),[E,S]=v.useState({}),[O,B]=v.useState({}),[P,D]=v.useState(!1),[W,Ae]=v.useState(null),[ee,ce]=v.useState([]),[de,X]=v.useState(!1),[pe,Se]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[k,F]=v.useState(!1),[V,M]=v.useState(""),[L,q]=v.useState([]),[R,K]=v.useState(!1),[Z,te]=v.useState(!1),[Q,ye]=v.useState(null);v.useEffect(()=>{(async()=>{try{const He=await jt(ht(Fe,"sellers_candies")),it=[];He.forEach(we=>{const re=we.data();it.push({id:we.id,name:re.name||"",commissionPercent:Number(re.commissionPercent||0)})}),C(it)}catch(He){console.error("Error cargando sellers_candies",He)}})()},[]);const Y=v.useMemo(()=>{const He={};return T.forEach(it=>{He[it.id]=it}),He},[T]);v.useEffect(()=>{(async()=>{b(!0),I("");try{const He=await jt(ht(Fe,"sales_candies")),it=[],we=[];He.forEach(st=>{const yt=st.data(),Dt=RLe(yt,st.id);Dt&&(Dt.date<=a&&it.push(Dt),Dt.date>=r&&Dt.date<=a&&we.push(Dt))}),u(it),o(we);const re=await jt(ht(Fe,"inventory_candies")),ne=[];re.forEach(st=>{const yt=st.data(),Dt=py(yt);if(!Dt||Dt>a)return;const nr=Math.max(1,Math.floor(Number(yt.unitsPerPackage||1))),Ce=Number(yt.totalUnits??yt.quantity??0),dt=Number(yt.packages??0),gt=Number(yt.remaining??0),Ne=Number(yt.remainingPackages??0),at=dt>0?dt:Ce>0?Math.floor(Ce/nr):0,wt=Ne>0?Ne:gt>0?Math.floor(gt/nr):0;ne.push({id:st.id,productId:yt.productId,productName:yt.productName||"",date:Dt,quantity:Number(at||0),remaining:Number(wt||0),purchasePrice:Number(yt.providerPrice||yt.purchasePrice||0),unitsPerPackage:nr})}),A(ne);const Ue=await jt(ht(Fe,"expenses_candies")),Ke=[];Ue.forEach(st=>{const yt=st.data(),Dt=py(yt);Dt&&Dt>=r&&Dt<=a&&Ke.push({id:st.id,date:Dt,category:yt.category||"",description:yt.description||"",amount:Number(yt.amount||0),status:yt.status||""})}),f(Ke);const et=await jt(ht(Fe,"ar_movements")),ke=[],he={};et.forEach(st=>{const yt=st.data(),Dt=py(yt);if(!Dt)return;const nr=yt.customerId,Ce=Number(yt.amount||0);nr&&(he[nr]=(he[nr]||0)+Ce),yt.type==="ABONO"&&Dt>=r&&Dt<=a&&ke.push({id:st.id,customerId:nr,type:"ABONO",amount:Ce,date:Dt})}),p(ke);const _e=await jt(ht(Fe,"customers_candies")),be=[];_e.forEach(st=>{const yt=st.data();be.push({id:st.id,name:yt.name||"",balance:he[st.id]||0})}),x(be);const Qe=await jt(ht(Fe,"inventory_candies_sellers")),$e={},Je={};Qe.forEach(st=>{const yt=st.data(),Dt=py(yt);if(!Dt||Dt<r||Dt>a)return;const nr=yt.sellerId||yt.vendorId||"NO_VENDOR",Ce=yt.productName||"",dt=yt.sku||"",gt=Math.max(1,Math.floor(Number(yt.unitsPerPackage||1))),Ne=Number(yt.totalUnits??0),at=Number(yt.packages??0),wt=Number(yt.remainingUnits??yt.remaining??0),kt=Number(yt.remainingPackages??0),Lt=at>0?at:Ne>0?Math.floor(Ne/gt):0,qt=kt>0?kt:wt>0?Math.floor(wt/gt):0,_t=Number(yt.totalVendor??0),ie=Number(yt.gainVendor??0),se=Lt,me=se>0?_t/se:0,fe=se>0?ie/se:0;if($e[nr]||($e[nr]={associated:[],remaining:[]}),Lt>0){const Te=Lt,Re=Te*me,ae=Re,Me=Te*fe;$e[nr].associated.push({saleId:st.id,date:Dt,productName:Ce,sku:dt,qty:Te,unitPrice:me,lineTotal:Re,discount:0,lineFinal:ae,vendorCommissionAmount:Me,type:"ASSOCIATED"}),Je[nr]=(Je[nr]||0)+Te}if(qt>0){const Te=qt,Re=Te*me,ae=Re,Me=Te*fe;$e[nr].remaining.push({saleId:st.id,date:Dt,productName:Ce,sku:dt,qty:Te,unitPrice:me,lineTotal:Re,discount:0,lineFinal:ae,vendorCommissionAmount:Me,type:"REMAINING"})}}),S($e),B(Je)}catch(He){console.error(He),I(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const z=v.useCallback(He=>{if(He.vendorId&&Y[He.vendorId])return Y[He.vendorId];const it=(He.vendorName||"").trim().toLowerCase();if(it)return T.find(we=>(we.name||"").trim().toLowerCase()===it)},[Y,T]),le=v.useCallback((He,it)=>{const we=Number(it.vendorCommissionAmount||0);if(we)return we;const re=z(He);if(!re||!re.commissionPercent)return 0;const ne=Number(it.qty||0),Ue=Number(it.unitPrice||0),Ke=ne*Ue,et=Math.max(0,Number(it.discount||0)),ke=Math.max(0,Ke-et);if(!ke)return 0;const he=Number(re.commissionPercent)||0;return ke*he/100},[z]),je=v.useMemo(()=>{try{return MLe(d,c,r,a)}catch(He){return console.error(He),0}},[d,c,r,a]),ue=v.useMemo(()=>{const He=i.reduce((be,Qe)=>be+(Qe.total||0),0),it=h.reduce((be,Qe)=>be+(Qe.amount||0),0),we=He-je,re=we-it,ne=m.reduce((be,Qe)=>be+Math.abs(Qe.amount||0),0),Ue=g.filter(be=>(be.balance||0)>0),Ke=Ue.reduce((be,Qe)=>be+(Qe.balance||0),0);let et=0,ke=0,he=0,_e=0;for(const be of i){const Qe=(be.items||[]).reduce((Je,st)=>Je+(Number(st.qty)||0),0),$e=(be.items||[]).reduce((Je,st)=>Je+le(be,st),0);be.type==="CONTADO"?(et+=Qe,he+=$e):(ke+=Qe,_e+=$e)}return{ventasTotales:He,costoMercaderia:je,gastosPeriodo:it,gananciaAntes:we,gananciaDespues:re,abonosRecibidos:ne,saldosPendientes:Ke,clientesConSaldo:Ue.length,paquetesCash:et,paquetesCredito:ke,comisionCash:he,comisionCredito:_e}},[i,h,m,g,je,le]),Pe=v.useMemo(()=>{const He={},it={};for(const we of i)if(!(we.type!=="CREDITO"||!we.customerId))for(const re of we.items||[]){const ne=Number(re.qty||0),Ue=Number(re.unitPrice||0),Ke=ne*Ue,et=Math.max(0,Number(re.discount||0)),ke=Math.max(0,Ke-et);He[we.customerId]=(He[we.customerId]||0)+ne,it[we.customerId]=(it[we.customerId]||0)+ke}return g.filter(we=>(we.balance||0)>0).map(we=>({customerId:we.id,name:we.name,paquetesAsociados:He[we.id]||0,saldoTotal:it[we.id]||0,saldoPendiente:we.balance||0})).sort((we,re)=>re.saldoPendiente-we.saldoPendiente)},[g,i]),Ye=v.useMemo(()=>{const He={};return g.forEach(it=>He[it.id]=it.name),He},[g]),nt=v.useMemo(()=>[...i].sort((He,it)=>it.date.localeCompare(He.date)).map(He=>{var ne;const it=(He.items||[]).reduce((Ue,Ke)=>Ue+(Number(Ke.qty)||0),0);let we="Cash";He.type==="CREDITO"&&He.customerId?we=Ye[He.customerId]||"":He.type==="CONTADO"&&(we=((ne=He.customerName)==null?void 0:ne.trim())||"Cash");const re=it>0?He.total/it:0;return{id:He.id,date:He.date,type:He.type==="CREDITO"?"Crdito":"Cash",customer:we,paquetes:it,total:Number(He.total||0),avgPrice:re}}),[i,Ye]),mt=v.useMemo(()=>{var it,we;const He=new Map;for(const re of i){const ne=re.vendorId||"NO_VENDOR",Ue=re.vendorName||((it=Y[ne])==null?void 0:it.name)||"Sin vendedor";He.has(ne)||He.set(ne,{vendorId:ne,vendorName:Ue,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Ke=He.get(ne);for(const et of re.items||[]){const ke=Number(et.qty||0),he=Number(et.unitPrice||0),_e=ke*he,be=Math.max(0,Number(et.discount||0)),Qe=Math.max(0,_e-be),$e=le(re,et);re.type==="CONTADO"?(Ke.paquetesVendidos+=ke,Ke.totalVendido+=Qe,Ke.comisionCash+=$e):(Ke.paquetesFiados+=ke,Ke.totalFiado+=Qe,Ke.comisionCredito+=$e)}}for(const[re,ne]of Object.entries(O)){const Ue=He.get(re),Ke=(Ue==null?void 0:Ue.vendorName)||((we=Y[re])==null?void 0:we.name)||"Sin vendedor",et=Ue||{vendorId:re,vendorName:Ke,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};et.paquetesAsociados=ne,et.paquetesRestantes=Math.max(ne-et.paquetesVendidos-et.paquetesFiados,0),He.set(re,et)}return Array.from(He.values()).sort((re,ne)=>ne.totalVendido+ne.totalFiado-(re.totalVendido+re.totalFiado))},[i,O,Y,le]),ct=async He=>{D(!0),Ae({id:He.customerId,name:He.name}),ce([]),X(!0),Se({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const it=[];let we=0,re=0,ne=0;for(const ke of i)if(!(ke.type!=="CREDITO"||ke.customerId!==He.customerId))for(const he of ke.items||[]){const _e=Number(he.qty||0),be=Number(he.unitPrice||0),Qe=_e*be,$e=Math.max(0,Number(he.discount||0)),Je=Math.max(0,Qe-$e);it.push({saleId:ke.id,date:ke.date,productName:he.productName,sku:he.sku||"",qty:_e,unitPrice:be,lineTotal:Qe,discount:$e,lineFinal:Je}),we+=Qe,re+=$e,ne+=Je}let Ue=0;for(const ke of m)ke.customerId===He.customerId&&(Ue+=Math.abs(ke.amount||0));const Ke=g.find(ke=>ke.id===He.customerId),et=(Ke==null?void 0:Ke.balance)||0;ce(it),Se({totalBruto:we,totalDescuento:re,totalFiado:ne,saldoActual:et,abonadoPeriodo:Ue})}catch(it){console.error(it),I(" No se pudo cargar el detalle del cliente.")}finally{X(!1)}},ft=(He,it,we)=>{F(!0);let re="";we==="ASSOCIATED"?re=`Paquetes asociados  ${it}`:we==="REMAINING"?re=`Paquetes restantes  ${it}`:we==="CASH"?re=`Paquetes vendidos (Cash)  ${it}`:re=`Paquetes fiados (Crdito)  ${it}`,M(re),q([]),K(!0);try{if(we==="ASSOCIATED"||we==="REMAINING"){const Ue=E[He],Ke=we==="ASSOCIATED"?(Ue==null?void 0:Ue.associated)||[]:(Ue==null?void 0:Ue.remaining)||[];q([...Ke].sort((et,ke)=>et.date.localeCompare(ke.date))),K(!1);return}const ne=[];for(const Ue of i)if(((Ue.vendorId||"NO_VENDOR")===He||!Ue.vendorId&&He==="NO_VENDOR")&&!(we==="CASH"&&Ue.type!=="CONTADO")&&!(we==="CREDIT"&&Ue.type!=="CREDITO"))for(const et of Ue.items||[]){const ke=Number(et.qty||0),he=Number(et.unitPrice||0),_e=ke*he,be=Math.max(0,Number(et.discount||0)),Qe=Math.max(0,_e-be),$e=le(Ue,et);ne.push({saleId:Ue.id,date:Ue.date,productName:et.productName,sku:et.sku||"",qty:ke,unitPrice:he,lineTotal:_e,discount:be,lineFinal:Qe,vendorCommissionAmount:$e,type:we})}q(ne.sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)))}catch(ne){console.error(ne),I(" No se pudo cargar el detalle del vendedor.")}finally{K(!1)}},Ct=He=>{const it=i.find(we=>we.id===He)||null;ye(it),te(!0)},At=async He=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await nb(He),await LLe(He),o(it=>it.filter(we=>we.id!==He)),u(it=>it.filter(we=>we.id!==He)),te(!1),ye(null)}catch(it){console.error(it),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),l.jsx(Dc,{onClick:e,loading:y})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:He=>n(He.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:He=>s(He.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:mn(ue.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:mn(ue.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:ue.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:ue.paquetesCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),l.jsx("div",{className:"text-xl font-semibold",children:ue.paquetesCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.comisionCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(ue.comisionCredito)})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):Pe.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):Pe.map(He=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:He.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ct({customerId:He.customerId,name:He.name}),title:"Ver paquetes fiados del periodo",children:He.paquetesAsociados})}),l.jsx("td",{className:"p-2 border",children:mn(He.saldoTotal)}),l.jsx("td",{className:"p-2 border font-semibold",children:mn(He.saldoPendiente)})]},He.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):mt.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):mt.map(He=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:He.vendorName}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ft(He.vendorId,He.vendorName,"ASSOCIATED"),children:He.paquetesAsociados})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ft(He.vendorId,He.vendorName,"REMAINING"),children:He.paquetesRestantes})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ft(He.vendorId,He.vendorName,"CASH"),children:He.paquetesVendidos})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.totalVendido)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.comisionCash)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ft(He.vendorId,He.vendorName,"CREDIT"),children:He.paquetesFiados})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.totalFiado)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.comisionCredito)})]},He.vendorId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):nt.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):nt.map(He=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:He.date}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:He.customer}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:He.type}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ct(He.id),children:He.paquetes})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.avgPrice)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:mn(He.total)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>At(He.id),children:"Eliminar"})})]},He.id))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((He,it)=>He.date.localeCompare(it.date)).map(He=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:He.date}),l.jsx("td",{className:"p-2 border",children:He.category||""}),l.jsx("td",{className:"p-2 border",children:He.description?l.jsx("span",{title:He.description,children:He.description.length>40?He.description.slice(0,40)+"":He.description}):""}),l.jsx("td",{className:"p-2 border",children:mn(He.amount)}),l.jsx("td",{className:"p-2 border",children:He.status||""})]},He.id))})]})}),w&&l.jsx("p",{className:"mt-2 text-sm",children:w}),P&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(W==null?void 0:W.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(pe.totalBruto)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(pe.totalDescuento)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(pe.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(pe.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:mn(pe.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Descuento"}),l.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),l.jsx("tbody",{children:de?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):ee.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):ee.sort((He,it)=>He.date.localeCompare(it.date)).map((He,it)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:He.date}),l.jsx("td",{className:"p-2 border",children:He.productName}),l.jsx("td",{className:"p-2 border",children:He.sku||""}),l.jsx("td",{className:"p-2 border",children:He.qty}),l.jsx("td",{className:"p-2 border",children:mn(He.unitPrice)}),l.jsx("td",{className:"p-2 border",children:mn(He.lineTotal)}),l.jsx("td",{className:"p-2 border",children:mn(He.discount)}),l.jsx("td",{className:"p-2 border",children:mn(He.lineFinal)})]},`${He.saleId}-${it}`))})]})})]})}),k&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:V}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Descuento"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),l.jsx("tbody",{children:R?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):L.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):L.map((He,it)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:He.date}),l.jsx("td",{className:"p-2 border",children:He.productName}),l.jsx("td",{className:"p-2 border",children:He.sku||""}),l.jsx("td",{className:"p-2 border",children:He.qty}),l.jsx("td",{className:"p-2 border",children:mn(He.unitPrice)}),l.jsx("td",{className:"p-2 border",children:mn(He.lineTotal)}),l.jsx("td",{className:"p-2 border",children:mn(He.discount)}),l.jsx("td",{className:"p-2 border",children:mn(He.lineFinal)}),l.jsx("td",{className:"p-2 border",children:mn(He.vendorCommissionAmount)})]},`${He.saleId}-${it}`))})]})})]})}),Z&&Q&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",Q.date]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>te(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),l.jsx("tbody",{children:(Q.items||[]).map((He,it)=>{const we=Number(He.qty||0),re=Number(He.unitPrice||0),ne=we*re,Ue=le(Q,He);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:He.productName}),l.jsx("td",{className:"p-2 border",children:He.sku||""}),l.jsx("td",{className:"p-2 border",children:we}),l.jsx("td",{className:"p-2 border",children:mn(re)}),l.jsx("td",{className:"p-2 border",children:mn(ne)}),l.jsx("td",{className:"p-2 border",children:mn(Ue)})]},it)})})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-semibold",children:"Total venta:"}),mn(Q.total)]}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>At(Q.id),children:"Eliminar venta"})]})]})})]})}const TH=["Rivas","Isla Ometepe","San Jorge"];function QLe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,o]=v.useState(""),[c,u]=v.useState(!1),[d,A]=v.useState(""),[h,f]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState("0"),[T,C]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),o("");try{const W=Kt(ht(Fe,"sellers_candies"),Gr("name","asc")),Ae=await jt(W),ee=[];Ae.forEach(ce=>{const de=ce.data();ee.push({id:ce.id,name:de.name||"",commissionPercent:Number(de.commissionPercent||0),branch:de.branch||"Rivas",createdAt:de.createdAt||Xt.now()})}),n(ee)}catch(W){console.error(W),o(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const E=()=>{A(""),f("0"),p("Rivas")},S=async W=>{W.preventDefault(),o("");const Ae=d.trim();if(!Ae){o("Ingresa el nombre y apellido del vendedor.");return}const ee=Number(h||0);if(ee<0){o("La comisin no puede ser negativa.");return}try{const ce={name:Ae,commissionPercent:ee,branch:m,createdAt:Xt.now()},de=await on(ht(Fe,"sellers_candies"),ce);n(X=>[{id:de.id,...ce},...X]),o(" Vendedor creado correctamente."),E(),u(!1)}catch(ce){console.error(ce),o(" Error al crear el vendedor.")}},O=W=>{x(W.id),b(W.name),I(W.commissionPercent.toString()),C(W.branch)},B=()=>{x(null),b(""),I("0"),C("Rivas")},P=async()=>{if(!g)return;o("");const W=y.trim();if(!W){o("El nombre y apellido no pueden estar vacos.");return}const Ae=Number(w||0);if(Ae<0){o("La comisin no puede ser negativa.");return}try{await Hr(Ht(Fe,"sellers_candies",g),{name:W,commissionPercent:Ae,branch:T}),n(ee=>ee.map(ce=>ce.id===g?{...ce,name:W,commissionPercent:Ae,branch:T}:ce)),o(" Vendedor actualizado."),B()}catch(ee){console.error(ee),o(" Error al actualizar el vendedor.")}},D=async W=>{if(window.confirm(`Eliminar al vendedor "${W.name}"? Esta accin no se puede deshacer.`))try{await _n(Ht(Fe,"sellers_candies",W.id)),n(ee=>ee.filter(ce=>ce.id!==W.id)),o(" Vendedor eliminado.")}catch(ee){console.error(ee),o(" Error al eliminar el vendedor.")}};return l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Dc,{onClick:e,loading:a}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),l.jsxs("form",{onSubmit:S,className:"space-y-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),l.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:W=>A(W.target.value),placeholder:"Ej: Juan Prez"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comisin (% sobre venta total)"}),l.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:W=>f(W.target.value),placeholder:"Ej: 10"}),l.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje se usa para calcular la comisin del vendedor sobre el total de la venta (no es el margen del producto)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),l.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:W=>p(W.target.value),children:TH.map(W=>l.jsx("option",{value:W,children:W},W))})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[l.jsx("button",{type:"button",onClick:()=>{E(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:l.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),l.jsx("th",{className:"p-2 border",children:"Comisin (%)"}),l.jsx("th",{className:"p-2 border",children:"Sucursal"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:a?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(W=>{const Ae=g===W.id;return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:Ae?l.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:ee=>b(ee.target.value)}):W.name}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:ee=>I(ee.target.value)}):`${W.commissionPercent.toFixed(2)} %`}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsx("select",{className:"border p-1 rounded text-xs",value:T,onChange:ee=>C(ee.target.value),children:TH.map(ee=>l.jsx("option",{value:ee,children:ee},ee))}):W.branch}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsxs("div",{className:"flex gap-1 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:P,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:B,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-1 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>O(W),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(W),children:"Borrar"})]})})]},W.id)})})]})}),i&&l.jsx("p",{className:"mt-2 text-sm",children:i})]})}const go=t=>Math.max(0,Math.floor(Number(t||0)));function VLe(t){return Math.max(1,go(t.unitsPerPackage||1))}async function HLe(t){const{orderId:e,productId:r}=t;let n=go(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",e),Zt("productId","==",r),Gr("createdAt","asc")),s=await jt(a);if(s.empty)return;const i=s.docs.map(o=>o.ref);await Ni(Fe,async o=>{const c=await Promise.all(i.map(u=>o.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const A=d.data(),h=VLe(A),f=n*h,p=go(A.remaining??0)+f,g=Math.floor(p/h);o.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:Xt.now()}),n=0}})}async function $Le(t){const{orderId:e,productId:r}=t,n=go(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Ht(Fe,"candy_main_orders",e);await Ni(Fe,async s=>{const i=await s.get(a);if(!i.exists())return;const o=i.data(),c=Array.isArray(o.items)?o.items:[];let u=!1;const d=c.map(A=>String((A==null?void 0:A.id)||"")!==String(r)?A:(u=!0,{...A,remainingPackages:go(A.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:Xt.now()})})}function KLe(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=go((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,go((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function PH(t,e){const r=go(t),n=Math.max(1,go(e));return Math.floor(r/n)}async function jH(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Ht(Fe,"inventory_candies_sellers",t),r=await So(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=go(n.packages||n.remainingPackages||0),i=KLe(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Ni(Fe,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await HLe({orderId:c,productId:a,packagesToReturn:s}),await $Le({orderId:c,productId:a,packagesToReturn:s}),await Ni(Fe,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let o=0;return await Ni(Fe,async c=>{const u={};for(const g of i){const x=Math.max(1,go(g.unitsPerPackage||1)),y=go(g.units),b=PH(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>Ht(Fe,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>Ht(Fe,"candy_main_orders",g)),[f,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=f[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,go(x.unitsPerPackage||b.unitsPerPackage||1)),I=go(x.units),C=go(b.remaining??0)+I,E=Math.floor(C/w);c.update(d[g],{remaining:C,remainingPackages:E,packages:E,updatedAt:Xt.now()});const S=PH(I,w);S>0&&(p+=S)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=go(u[y]||0);if(b<=0)continue;const w=x.data(),I=Array.isArray(w.items)?w.items:[];let T=!1;const C=I.map(E=>String((E==null?void 0:E.id)||"")!==String(a)?E:(T=!0,{...E,remainingPackages:go(E.remainingPackages)+b}));T&&c.update(h[g],{items:C,updatedAt:Xt.now()})}c.delete(e),o=p}),{restoredPackages:o,mode:"blind"}}const dn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function GLe(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const kH=t=>Math.max(0,Math.floor(Number(t||0)));function zLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const{refreshKey:n,refresh:a}=Yl(),s=!t||t==="admin",i=t==="vendedor_dulces",o=(r||"").trim().toLowerCase(),c=!s&&i,[u,d]=v.useState({}),[A,h]=v.useState([]),[f,m]=v.useState([]),[p,g]=v.useState({}),[x,y]=v.useState(null),[b,w]=v.useState([]),[I,T]=v.useState(!0),[C,E]=v.useState(""),[S,O]=v.useState(!1),[B,P]=v.useState(null),[D,W]=v.useState([]),[Ae,ee]=v.useState(""),[ce,de]=v.useState(""),[X,pe]=v.useState(""),[Se,k]=v.useState("0"),[F,V]=v.useState([]),[M,L]=v.useState(!1),q=v.useMemo(()=>A.find(ae=>ae.id===Ae)||null,[Ae,A]),R=q==null?void 0:q.branch,K=v.useMemo(()=>f.find(ae=>ae.id===X)||null,[X,f]),Z=v.useMemo(()=>new Set(F.map(ae=>ae.productId)),[F]),te=v.useMemo(()=>f.filter(ae=>(p[ae.id]??0)>0||Z.has(ae.id)).sort((ae,Me)=>ae.name.localeCompare(Me.name)),[f,p,Z]),Q=v.useMemo(()=>{const ae={};return A.forEach(Me=>ae[Me.id]=Me),ae},[A]),ye=v.useMemo(()=>!i||!o?null:A.find(ae=>(ae.email||"").trim().toLowerCase()===o)||null,[i,o,A]),Y=v.useMemo(()=>{const ae=A.find(Me=>(Me.email||"").trim().toLowerCase()===o)||null;return(ae==null?void 0:ae.name)||(r||"").trim()||""},[A,o,r]),z=async()=>{try{const ae=ht(Fe,"inventory_transfers_candies");if(!i){const tt=await jt(ae),Xe={};tt.forEach(lt=>{const xt=lt.data(),Wt=Number(xt.packagesMoved||0),er=String(xt.fromOrderKey||""),Tr=String(xt.toOrderKey||"");er&&(Xe[er]=Xe[er]||{out:0,in:0},Xe[er].out+=Wt),Tr&&(Xe[Tr]=Xe[Tr]||{out:0,in:0},Xe[Tr].in+=Wt)}),d(Xe);return}const Me=Kt(ae,Zt("fromSellerId","==",e)),xe=Kt(ae,Zt("toSellerId","==",e)),[Le,Ie]=await Promise.all([jt(Me),jt(xe)]),rt={},Ze=(tt,Xe)=>{tt.forEach(lt=>{const xt=lt.data(),Wt=Number(xt.packagesMoved||0),er=String(Xe==="out"?xt.fromOrderKey||"":xt.toOrderKey||"");er&&(rt[er]=rt[er]||{out:0,in:0},rt[er][Xe]+=Wt)})};Ze(Le.docs,"out"),Ze(Ie.docs,"in"),d(rt)}catch(ae){console.error(ae),d({})}};v.useEffect(()=>{(async()=>{T(!0),E("");try{const ae=await jt(Kt(ht(Fe,"sellers_candies"),Gr("name","asc"))),Me=[];ae.forEach(lt=>{const xt=lt.data(),Wt=xt.branch||xt.branchLabel||xt.route||xt.sucursal||xt.location||"";Me.push({id:lt.id,name:xt.name||"",email:xt.email||"",commissionPercent:Number(xt.commissionPercent||0),branch:GLe(Wt),branchLabel:Wt})}),h(Me);const xe=await jt(ht(Fe,"inventory_candies")),Le={},Ie={};xe.forEach(lt=>{var tc;const xt=lt.data(),Wt=String(xt.productId||"");if(!Wt)return;const er=Number(xt.remainingPackages);if(Number.isFinite(er))Le[Wt]=(Le[Wt]||0)+Math.max(0,Math.floor(er));else{const Uf=Number(xt.remaining??xt.quantity??0),ya=Number(xt.unitsPerPackage||0);let Cd=0;ya>0?Cd=Uf/ya:Cd=Number(xt.packages||0),Le[Wt]=(Le[Wt]||0)+Math.max(0,Cd)}const Tr=String(xt.date||""),va=Number(((tc=xt.createdAt)==null?void 0:tc.seconds)??0),sa={unitPriceRivas:Number(xt.unitPriceRivas||0),unitPriceSanJorge:Number(xt.unitPriceSanJorge||0),unitPriceIsla:Number(xt.unitPriceIsla||0),date:Tr,createdAtSec:va};if(!(sa.unitPriceRivas>0||sa.unitPriceSanJorge>0||sa.unitPriceIsla>0))return;const Bs=Ie[Wt];if(!Bs){Ie[Wt]=sa;return}const ec=`${Bs.date}#${String(Bs.createdAtSec).padStart(10,"0")}`;`${sa.date}#${String(sa.createdAtSec).padStart(10,"0")}`>ec&&(Ie[Wt]=sa)}),Object.keys(Le).forEach(lt=>Le[lt]=Math.floor(Le[lt])),g(Le);const rt=await jt(Kt(ht(Fe,"products_candies"),Gr("name","asc"))),Ze=[];rt.forEach(lt=>{const xt=lt.data(),Wt=lt.id,er=Ie[Wt];Ze.push({id:Wt,name:xt.name||"",category:xt.category||"",providerPrice:Number(xt.providerPrice||0),packages:Number(xt.packages||0),unitsPerPackage:Number(xt.unitsPerPackage||0),unitPriceRivas:Number((er==null?void 0:er.unitPriceRivas)||0),unitPriceSanJorge:Number((er==null?void 0:er.unitPriceSanJorge)||0),unitPriceIsla:Number((er==null?void 0:er.unitPriceIsla)||0)})}),m(Ze);const tt=await jt(i?Kt(ht(Fe,"inventory_candies_sellers"),Zt("sellerId","==",e),Gr("createdAt","desc")):Kt(ht(Fe,"inventory_candies_sellers"),Gr("createdAt","desc"))),Xe=[];tt.forEach(lt=>{const xt=lt.data();Xe.push({id:lt.id,sellerId:xt.sellerId,sellerName:xt.sellerName||"",productId:xt.productId,productName:xt.productName||"",category:xt.category||"",orderId:xt.orderId||null,packages:Number(xt.packages||0),unitsPerPackage:Number(xt.unitsPerPackage||0),totalUnits:Number(xt.totalUnits||0),remainingPackages:Number(xt.remainingPackages||0),remainingUnits:Number(xt.remainingUnits||0),providerPrice:Number(xt.providerPrice||0),totalRivas:Number(xt.totalRivas||0),totalSanJorge:Number(xt.totalSanJorge||0),totalIsla:Number(xt.totalIsla||0),unitPriceRivas:Number(xt.unitPriceRivas||0),unitPriceSanJorge:Number(xt.unitPriceSanJorge||0),unitPriceIsla:Number(xt.unitPriceIsla||0),markupPercent:Number(xt.markupPercent||0),subtotal:Number(xt.subtotal||0),totalVendor:Number(xt.totalVendor||0),gainVendor:Number(xt.gainVendor||0),unitPriceVendor:Number(xt.unitPriceVendor||0),date:xt.date||"",createdAt:xt.createdAt||Xt.now()})}),w(Xe),await z()}catch(ae){console.error(ae),E(" Error cargando datos de vendedores / pedidos.")}finally{T(!1)}})()},[n,t,e]);const le=v.useMemo(()=>i&&ye?b.filter(ae=>ae.sellerId===ye.id):b,[b,i,ye,Ae]),je=ae=>le.filter(Me=>(Me.orderId||Me.id)===ae),ue=v.useMemo(()=>{var Me;const ae={};for(const xe of le){const Le=xe.orderId||xe.id,Ie=ae[Le],rt=xe.date||((Me=xe.createdAt)!=null&&Me.toDate?xe.createdAt.toDate().toISOString().slice(0,10):"");if(Ie)Ie.totalPackages+=xe.packages,Ie.totalRemainingPackages+=xe.remainingPackages,Ie.subtotal+=xe.subtotal,Ie.totalVendor+=xe.totalVendor,rt>Ie.date&&(Ie.date=rt);else{const Ze=u[Le]||{out:0,in:0};ae[Le]={orderKey:Le,sellerId:xe.sellerId,sellerName:xe.sellerName,date:rt,totalPackages:xe.packages,totalRemainingPackages:xe.remainingPackages,subtotal:xe.subtotal,totalVendor:xe.totalVendor,transferredOut:Ze.out,transferredIn:Ze.in}}}return Object.values(ae).map(xe=>{const Le=u[xe.orderKey]||{out:0,in:0};return{...xe,transferredOut:Le.out||0,transferredIn:Le.in||0}}).sort((xe,Le)=>Le.date.localeCompare(xe.date))},[le,u]),Pe=v.useMemo(()=>{const ae={};return ue.forEach(Me=>ae[Me.orderKey]=Me),ae},[ue]),Ye=v.useMemo(()=>{const ae=F.reduce((Ze,tt)=>Ze+tt.packages,0),Me=F.reduce((Ze,tt)=>Ze+tt.subtotal,0),xe=F.reduce((Ze,tt)=>Ze+tt.totalVendor,0),Le=F.reduce((Ze,tt)=>Ze+tt.gainVendor,0),Ie=Number((q==null?void 0:q.commissionPercent)||0),rt=xe*Ie/100;return{totalPackages:ae,subtotal:Me,totalVendor:xe,gainVendor:Le,commissionPercent:Ie,commissionAmount:rt}},[F,q]),nt=()=>{P(null),W([]),ee(""),de(""),pe(""),k("0"),V([])};function mt(ae){const Me=Number(ae.providerPrice||0),xe=Number(ae.packages||0),Le=Number(ae.unitPriceRivas||0),Ie=Number(ae.unitPriceSanJorge||0),rt=Number(ae.unitPriceIsla||0),Ze=Me*xe,tt=Le*xe,Xe=Ie*xe,lt=rt*xe;let xt=Le,Wt=tt;switch(ae.sellerBranch){case"SAN_JORGE":xt=Ie,Wt=Xe;break;case"ISLA":xt=rt,Wt=lt;break;case"RIVAS":default:xt=Le,Wt=tt;break}const er=Wt-Ze;return{subtotal:Ze,totalVendor:Wt,gainVendor:er,pricePerPackage:xt,totalRivas:tt,totalSanJorge:Xe,totalIsla:lt,unitPriceRivas:Le,unitPriceSanJorge:Ie,unitPriceIsla:rt}}function ct(ae,Me){const{subtotal:xe,totalVendor:Le,gainVendor:Ie,pricePerPackage:rt,totalRivas:Ze,totalSanJorge:tt,totalIsla:Xe,unitPriceRivas:lt,unitPriceSanJorge:xt,unitPriceIsla:Wt}=mt({providerPrice:ae.providerPrice,unitPriceRivas:ae.unitPriceRivas,unitPriceSanJorge:ae.unitPriceSanJorge,unitPriceIsla:ae.unitPriceIsla,packages:Me,sellerBranch:R});return{id:`${ae.id}-${Date.now()}-${Math.random()}`,productId:ae.id,productName:ae.name,category:ae.category,providerPrice:ae.providerPrice,unitsPerPackage:ae.unitsPerPackage,packages:Me,subtotal:xe,totalVendor:Le,gainVendor:Ie,pricePerPackage:rt,totalRivas:Ze,totalSanJorge:tt,totalIsla:Xe,unitPriceRivas:lt,unitPriceSanJorge:xt,unitPriceIsla:Wt,remainingPackages:Me}}const ft=()=>{if(c)return;if(!K){E("Selecciona un producto antes de agregarlo.");return}if(Z.has(K.id)){E("Ese producto ya est agregado en este pedido.");return}const ae=Number(Se||0);if(ae<=0){E("La cantidad de paquetes debe ser mayor a 0.");return}const Me=p[K.id]??0;if(!B&&ae>Me){E(`No hay suficientes paquetes en inventario general. Disponibles: ${Me}`);return}const xe=ct(K,ae);V(Le=>[...Le,xe]),pe(""),k("0")},Ct=ae=>{c||V(Me=>Me.filter(xe=>xe.id!==ae))},At=(ae,Me)=>{if(c)return;const xe=Number(Me||0);V(Le=>Le.map(Ie=>{if(Ie.id!==ae)return Ie;const{subtotal:rt,totalVendor:Ze,gainVendor:tt,pricePerPackage:Xe,totalRivas:lt,totalSanJorge:xt,totalIsla:Wt}=mt({providerPrice:Ie.providerPrice,unitPriceRivas:Ie.unitPriceRivas,unitPriceSanJorge:Ie.unitPriceSanJorge,unitPriceIsla:Ie.unitPriceIsla,packages:xe,sellerBranch:R});return{...Ie,packages:xe,subtotal:rt,totalVendor:Ze,gainVendor:tt,pricePerPackage:Xe,totalRivas:lt,totalSanJorge:xt,totalIsla:Wt}}))};async function He(ae,Me,xe){const Le=await vLe({productId:ae,quantityPacks:Me,saleDate:xe}),Ie=Array.isArray(Le==null?void 0:Le.allocations)?Le.allocations:[];if(!Ie.length)return[];const rt=Ie.map(Xe=>String(Xe.batchId||"")).filter(Boolean),Ze=await Promise.all(rt.map(Xe=>So(Ht(Fe,"inventory_candies",Xe)))),tt=[];for(let Xe=0;Xe<Ie.length;Xe++){const lt=Ie[Xe],xt=String(lt.batchId||""),Wt=kH(lt.qty||lt.units||lt.quantity||0),er=Ze[Xe];if(!xt||Wt<=0||!er.exists())continue;const Tr=er.data(),va=String(Tr.orderId||""),sa=Math.max(1,kH(Tr.unitsPerPackage||1));va&&tt.push({batchId:xt,masterOrderId:va,units:Wt,unitsPerPackage:sa})}return tt}const it=async ae=>{if(ae.preventDefault(),M)return;if(!s){E("No tienes permiso para guardar pedidos.");return}if(E(""),!q){E("Selecciona un vendedor.");return}if(!F.length){E("Agrega al menos un producto al pedido.");return}const Me=new Date().toISOString().slice(0,10),xe=ce||Me;try{if(T(!0),L(!0),B){const Le={};D.forEach(Ze=>{Le[Ze.productId]=Ze});const Ie={};F.forEach(Ze=>{Ie[Ze.productId]=Ze});for(const Ze of Object.keys(Ie)){const tt=Ie[Ze],Xe=Le[Ze],lt=Number(tt.packages||0),xt=Xe?Number(Xe.packages||0):0,Wt=lt-xt;if(Wt>0){const er=await He(Ze,Wt,xe);if(Xe&&er.length){const Tr=Ht(Fe,"inventory_candies_sellers",Xe.id),va=await So(Tr),sa=va.exists()?va.data():{},Bs=[...Array.isArray(sa.masterAllocations)?sa.masterAllocations:[],...er];await Hr(Tr,{masterAllocations:Bs,updatedAt:Xt.now()})}}else Wt<0}let rt=[...b];for(const Ze of Object.keys(Ie)){const tt=Ie[Ze],Xe=Le[Ze],lt=f.find(er=>er.id===Ze),xt=(lt==null?void 0:lt.unitsPerPackage)||tt.unitsPerPackage||0,Wt=tt.packages>0&&xt>0?tt.packages*xt:0;if(Xe)await Hr(Ht(Fe,"inventory_candies_sellers",Xe.id),{sellerId:q.id,sellerName:q.name,productId:Ze,productName:tt.productName,category:tt.category,packages:tt.packages,unitsPerPackage:xt,totalUnits:Wt,remainingPackages:tt.packages,remainingUnits:Wt,providerPrice:tt.providerPrice,totalRivas:tt.totalRivas,totalSanJorge:tt.totalSanJorge,totalIsla:tt.totalIsla,unitPriceRivas:tt.unitPriceRivas,unitPriceSanJorge:tt.unitPriceSanJorge,unitPriceIsla:tt.unitPriceIsla,markupPercent:0,subtotal:tt.subtotal,totalVendor:tt.totalVendor,gainVendor:tt.gainVendor,unitPriceVendor:tt.pricePerPackage,date:xe,orderId:Xe.orderId||B,updatedAt:Xt.now()}),rt=rt.map(er=>er.id===Xe.id?{...er,sellerId:q.id,sellerName:q.name,productId:Ze,productName:tt.productName,category:tt.category,packages:tt.packages,unitsPerPackage:xt,totalUnits:Wt,remainingPackages:tt.packages,remainingUnits:Wt,providerPrice:tt.providerPrice,totalRivas:tt.totalRivas,totalSanJorge:tt.totalSanJorge,totalIsla:tt.totalIsla,unitPriceRivas:tt.unitPriceRivas,unitPriceSanJorge:tt.unitPriceSanJorge,unitPriceIsla:tt.unitPriceIsla,markupPercent:0,subtotal:tt.subtotal,totalVendor:tt.totalVendor,gainVendor:tt.gainVendor,unitPriceVendor:tt.pricePerPackage,date:xe,orderId:Xe.orderId||B}:er);else{const er=await He(Ze,tt.packages,xe),Tr={sellerId:q.id,sellerName:q.name,productId:Ze,productName:tt.productName,category:tt.category,orderId:B,packages:tt.packages,unitsPerPackage:xt,totalUnits:Wt,remainingPackages:tt.packages,remainingUnits:Wt,providerPrice:tt.providerPrice,totalRivas:tt.totalRivas,totalSanJorge:tt.totalSanJorge,totalIsla:tt.totalIsla,unitPriceRivas:tt.unitPriceRivas,unitPriceSanJorge:tt.unitPriceSanJorge,unitPriceIsla:tt.unitPriceIsla,markupPercent:0,subtotal:tt.subtotal,totalVendor:tt.totalVendor,gainVendor:tt.gainVendor,unitPriceVendor:tt.pricePerPackage,date:xe,createdAt:Xt.now(),status:"ASIGNADO",masterAllocations:er};rt=[{id:(await on(ht(Fe,"inventory_candies_sellers"),Tr)).id,...Tr},...rt]}}for(const Ze of Object.keys(Le))if(!Ie[Ze]){const tt=Le[Ze];await jH(tt.id),rt=rt.filter(Xe=>Xe.id!==tt.id)}w(rt),E(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const Le=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const Ie of F){const rt=f.find(xt=>xt.id===Ie.productId);if(!rt)continue;const Ze=Ie.packages>0&&rt.unitsPerPackage>0?Ie.packages*rt.unitsPerPackage:0,tt=await He(Ie.productId,Ie.packages,xe),Xe={sellerId:q.id,sellerName:q.name,productId:Ie.productId,productName:Ie.productName,category:Ie.category,orderId:Le,packages:Ie.packages,unitsPerPackage:rt.unitsPerPackage,totalUnits:Ze,remainingPackages:Ie.packages,remainingUnits:Ze,providerPrice:Ie.providerPrice,totalRivas:Ie.totalRivas,totalSanJorge:Ie.totalSanJorge,totalIsla:Ie.totalIsla,unitPriceRivas:Ie.unitPriceRivas,unitPriceSanJorge:Ie.unitPriceSanJorge,unitPriceIsla:Ie.unitPriceIsla,markupPercent:0,subtotal:Ie.subtotal,totalVendor:Ie.totalVendor,gainVendor:Ie.gainVendor,unitPriceVendor:Ie.pricePerPackage,date:xe,createdAt:Xt.now(),status:"ASIGNADO",masterAllocations:tt},lt=await on(ht(Fe,"inventory_candies_sellers"),Xe);w(xt=>[{id:lt.id,...Xe},...xt])}E(" Pedido asignado al vendedor y descontado del inventario.")}nt(),O(!1)}catch(Le){console.error(Le),E((Le==null?void 0:Le.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{L(!1),T(!1)}},we=()=>{if(!q){E("Selecciona un vendedor para imprimir el pedido.");return}if(!F.length){E("No hay productos en el pedido para imprimir.");return}const ae=ce||new Date().toISOString().slice(0,10),Me=Ze=>(Ze||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),xe="Pedido de dulces para vendedor",Le=F.map(Ze=>`
      <tr>
        <td>${Me(Ze.productName)}</td>
        <td class="right">${Me(Ze.category||"")}</td>
        <td class="right">${Ze.packages}</td>

        <td class="right">${dn(Ze.providerPrice)}</td>
        <td class="right">${dn(Ze.subtotal)}</td>
        <td class="right">${dn(Ze.pricePerPackage)}</td>
        <td class="right">${dn(Ze.totalVendor)}</td>
      </tr>`).join(""),Ie=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${Me(xe)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${Me(xe)}</h1>
  <div class="muted">
    Fecha pedido: <b>${Me(ae)}</b><br/>
    Vendedor: <b>${Me(q.name)}</b>${q.commissionPercent?` &mdash; Comisin: <b>${q.commissionPercent.toFixed(2)}%</b>`:""}${q.branchLabel?`<br/>Ruta / sucursal: <b>${Me(q.branchLabel)}</b>`:""}
  </div>

  <div class="grid">
    <div class="card">
      <div class="label">Paquetes totales del pedido</div>
      <div class="value">${Ye.totalPackages}</div>
    </div>
    <div class="card">
      <div class="label">Subtotal costo (proveedor)</div>
      <div class="value">${dn(Ye.subtotal)}</div>
    </div>
    <div class="card">
      <div class="label">Total vendedor (precio venta)</div>
      <div class="value">${dn(Ye.totalVendor)}</div>
    </div>
    <div class="card">
      <div class="label">Comisin posible del vendedor</div>
      <div class="value">${dn(Ye.commissionAmount)}</div>
    </div>
  </div>

  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">P. Proveedor (paq)</th>
        <th class="right">Subtotal</th>
        <th class="right">P. Paquete vendedor</th>
        <th class="right">Total vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${Le}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,rt=window.open("","_blank");if(!rt){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}rt.document.open(),rt.document.write(Ie),rt.document.close()},re=ae=>{const Me=le.filter(Ie=>(Ie.orderId||Ie.id)===ae);if(!Me.length){E("No se encontraron filas para este pedido.");return}const xe=Me[0];if(i&&ye&&xe.sellerId!==ye.id){E("No tienes permiso para ver este pedido.");return}P(ae),W(Me),ee(xe.sellerId),de(xe.date);const Le=Me.map(Ie=>{const rt=Ie.unitPriceRivas||0,Ze=Ie.unitPriceSanJorge||0,tt=Ie.unitPriceIsla||0,Xe=Ie.totalRivas||rt*Number(Ie.packages||0),lt=Ie.totalSanJorge||Ze*Number(Ie.packages||0),xt=Ie.totalIsla||tt*Number(Ie.packages||0);return{id:Ie.id,productId:Ie.productId,productName:Ie.productName,category:Ie.category,providerPrice:Ie.providerPrice,unitsPerPackage:Ie.unitsPerPackage,packages:Ie.packages,subtotal:Ie.subtotal,totalVendor:Ie.totalVendor,gainVendor:Ie.gainVendor,pricePerPackage:Ie.unitPriceVendor,totalRivas:Xe,totalSanJorge:lt,totalIsla:xt,unitPriceRivas:rt,unitPriceSanJorge:Ze,unitPriceIsla:tt,remainingPackages:Ie.remainingPackages}});V(Le),pe(""),k("0"),O(!0)},ne=async ae=>{if(!s){E("No tienes permiso para borrar pedidos.");return}const Me=b.filter(Ie=>(Ie.orderId||Ie.id)===ae);if(!Me.length)return;const xe=Me[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${xe}"? Se regresarn los paquetes al inventario principal.`))try{T(!0);for(const Ie of Me)await jH(Ie.id);w(Ie=>Ie.filter(rt=>(rt.orderId||rt.id)!==ae)),E(" Pedido eliminado y paquetes regresados correctamente.")}catch(Ie){console.error(Ie),E(" Error al eliminar el pedido / regresar paquetes.")}finally{T(!1)}},[Ue,Ke]=v.useState(!1),[et,ke]=v.useState(!1),[he,_e]=v.useState([]),[be,Qe]=v.useState(""),[$e,Je]=v.useState(""),[st,yt]=v.useState(""),[Dt,nr]=v.useState(""),[Ce,dt]=v.useState("0"),[gt,Ne]=v.useState(""),[at,wt]=v.useState(!1),kt=v.useMemo(()=>ue.map(ae=>ae.orderKey),[ue]),Lt=v.useMemo(()=>be?le.filter(ae=>(ae.orderId||ae.id)===be):[],[le,be]),qt=v.useMemo(()=>Lt.filter(ae=>Number(ae.remainingPackages||0)>0),[Lt]),_t=v.useMemo(()=>$e&&le.find(ae=>ae.id===$e)||null,[le,$e]),ie=v.useMemo(()=>st?le.filter(ae=>(ae.orderId||ae.id)===st):[],[le,st]),se=v.useMemo(()=>_t?ie.filter(ae=>ae.productId===_t.productId):[],[ie,_t]),me=async()=>{try{ke(!0);let ae=[];if(i&&e){const Me=Kt(ht(Fe,"inventory_transfers_candies"),Zt("fromSellerId","==",e),Gr("createdAt","desc")),xe=Kt(ht(Fe,"inventory_transfers_candies"),Zt("toSellerId","==",e),Gr("createdAt","desc")),[Le,Ie]=await Promise.all([jt(Me),jt(xe)]),rt=new Set,Ze=tt=>{tt.forEach(Xe=>{if(rt.has(Xe.id))return;rt.add(Xe.id);const lt=Xe.data();ae.push({id:Xe.id,createdAt:lt.createdAt,date:lt.date,createdByEmail:lt.createdByEmail||"",createdByName:lt.createdByName||"",productId:lt.productId||"",productName:lt.productName||"",packagesMoved:Number(lt.packagesMoved||0),providerPrice:Number(lt.providerPrice||0),unitPriceRivas:Number(lt.unitPriceRivas||0),unitPriceIsla:Number(lt.unitPriceIsla||0),toSellerId:lt.toSellerId||"",toSellerName:lt.toSellerName||"",toOrderKey:lt.toOrderKey||"",toOrderLabel:lt.toOrderLabel||"",comment:lt.comment||"",fromSellerId:lt.fromSellerId||"",fromSellerName:lt.fromSellerName||"",fromOrderKey:lt.fromOrderKey||"",fromOrderLabel:lt.fromOrderLabel||"",fromVendorRowId:lt.fromVendorRowId||"",toVendorRowId:lt.toVendorRowId||""})})};Ze(Le),Ze(Ie),ae.sort((tt,Xe)=>{var Wt,er;const lt=((Wt=tt.createdAt)==null?void 0:Wt.seconds)||0;return(((er=Xe.createdAt)==null?void 0:er.seconds)||0)-lt})}else{const Me=Kt(ht(Fe,"inventory_transfers_candies"),Gr("createdAt","desc"));(await jt(Me)).forEach(Le=>{const Ie=Le.data();ae.push({id:Le.id,createdAt:Ie.createdAt,date:Ie.date,createdByEmail:Ie.createdByEmail||"",createdByName:Ie.createdByName||"",productId:Ie.productId||"",productName:Ie.productName||"",packagesMoved:Number(Ie.packagesMoved||0),providerPrice:Number(Ie.providerPrice||0),unitPriceRivas:Number(Ie.unitPriceRivas||0),unitPriceIsla:Number(Ie.unitPriceIsla||0),toSellerId:Ie.toSellerId||"",toSellerName:Ie.toSellerName||"",toOrderKey:Ie.toOrderKey||"",toOrderLabel:Ie.toOrderLabel||"",comment:Ie.comment||"",fromSellerId:Ie.fromSellerId||"",fromSellerName:Ie.fromSellerName||"",fromOrderKey:Ie.fromOrderKey||"",fromOrderLabel:Ie.fromOrderLabel||"",fromVendorRowId:Ie.fromVendorRowId||"",toVendorRowId:Ie.toVendorRowId||""})})}_e(ae)}catch(ae){console.error(ae),E(" Error cargando traslados.")}finally{ke(!1)}},fe=async()=>{Ke(!0),await me()},Te=()=>{Qe(""),Je(""),yt(""),nr(""),dt("0"),Ne("")},Re=async()=>{if(!s){E("No tienes permiso para hacer traslados.");return}E("");const ae=Number(Ce||0);if(!(ae>0)){E("La cantidad de paquetes debe ser mayor a 0.");return}if(!gt.trim()){E("Debes escribir el motivo de la movida.");return}if(!be||!$e){E("Selecciona el pedido origen y el producto.");return}if(!st||!Dt){E("Selecciona el pedido destino y el producto destino.");return}if($e===Dt){E("Origen y destino no pueden ser el mismo.");return}const Me=b.find(Le=>Le.id===$e)||null,xe=b.find(Le=>Le.id===Dt)||null;if(!Me||!xe){E("No se encontr la fila origen/destino.");return}if(Me.productId!==xe.productId){E("El producto destino no coincide con el producto origen.");return}if(Number(Me.remainingPackages||0)<ae){E("El origen no tiene suficientes paquetes disponibles.");return}try{wt(!0),T(!0);const Le=Ht(Fe,"inventory_candies_sellers",Me.id),Ie=Ht(Fe,"inventory_candies_sellers",xe.id),rt=Xt.now(),Ze=new Date().toISOString().slice(0,10);await Ni(Fe,async tt=>{const Xe=await tt.get(Le),lt=await tt.get(Ie);if(!Xe.exists())throw new Error("Orden origen no existe.");if(!lt.exists())throw new Error("Orden destino no existe.");const xt=Xe.data(),Wt=lt.data(),er=Number(xt.remainingPackages||0);if(er<ae)throw new Error("Origen no tiene suficientes paquetes.");const Tr=Number(xt.unitsPerPackage||Wt.unitsPerPackage||0),va=Tr>0?ae*Tr:0;tt.update(Le,{remainingPackages:er-ae,...Tr>0?{remainingUnits:Number(xt.remainingUnits||0)-va}:{},updatedAt:rt}),tt.update(Ie,{remainingPackages:Number(Wt.remainingPackages||0)+ae,...Tr>0?{remainingUnits:Number(Wt.remainingUnits||0)+va}:{},updatedAt:rt});const sa=Ht(ht(Fe,"inventory_transfers_candies"));tt.set(sa,{createdAt:rt,date:Ze,createdByEmail:(r||"").trim(),createdByName:String(Y||"").trim(),productId:String(xt.productId||""),productName:String(xt.productName||""),packagesMoved:ae,providerPrice:Number(xt.providerPrice||0),unitPriceRivas:Number(xt.unitPriceRivas||0),unitPriceIsla:Number(xt.unitPriceIsla||0),fromSellerId:String(xt.sellerId||""),fromSellerName:String(xt.sellerName||""),fromOrderKey:String(xt.orderId||Me.id||""),fromOrderLabel:String(xt.orderId||Me.id||""),toSellerId:String(Wt.sellerId||""),toSellerName:String(Wt.sellerName||""),toOrderKey:String(Wt.orderId||xe.id||""),toOrderLabel:String(Wt.orderId||xe.id||""),fromVendorRowId:Me.id,toVendorRowId:xe.id,comment:gt.trim()})}),w(tt=>tt.map(Xe=>{if(Xe.id===Me.id){const lt=Number(Xe.unitsPerPackage||0),xt=lt>0?ae*lt:0;return{...Xe,remainingPackages:Number(Xe.remainingPackages||0)-ae,remainingUnits:lt>0?Number(Xe.remainingUnits||0)-xt:Xe.remainingUnits}}if(Xe.id===xe.id){const lt=Number(Xe.unitsPerPackage||0),xt=lt>0?ae*lt:0;return{...Xe,remainingPackages:Number(Xe.remainingPackages||0)+ae,remainingUnits:lt>0?Number(Xe.remainingUnits||0)+xt:Xe.remainingUnits}}return Xe})),await me(),d(tt=>{const Xe={...tt},lt=be,xt=st,Wt=Number(Ce||0);return lt&&(Xe[lt]=Xe[lt]||{out:0,in:0},Xe[lt].out+=Wt),xt&&(Xe[xt]=Xe[xt]||{out:0,in:0},Xe[xt].in+=Wt),Xe}),Te(),E(" Traslado realizado.")}catch(Le){console.error(Le),E((Le==null?void 0:Le.message)||" Error realizando el traslado.")}finally{wt(!1),T(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Dc,{onClick:a,loading:I}),l.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:fe,type:"button",disabled:!s,children:"Traslados"}),s&&l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{nt(),O(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),Ue&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[at&&l.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Ke(!1),Te()},type:"button",children:"Cerrar"})]}),l.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[l.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:be,onChange:ae=>{Qe(ae.target.value),Je(""),yt(""),nr(""),dt("0")},disabled:!s,children:[l.jsx("option",{value:"",children:"Selecciona"}),kt.map(ae=>{const Me=Pe[ae];return l.jsxs("option",{value:ae,children:["Vendedor: ",(Me==null?void 0:Me.sellerName)||"","  Existencias: ","",(Me==null?void 0:Me.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(Me==null?void 0:Me.date)||""]},ae)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:$e,onChange:ae=>{Je(ae.target.value),yt(""),nr(""),dt("0")},disabled:!s||!be,children:[l.jsx("option",{value:"",children:"Selecciona"}),qt.map(ae=>l.jsxs("option",{value:ae.id,children:["Tipo: ",ae.category," - ",ae.productName,"  Existencias:"," ",Number(ae.remainingPackages||0)," Paquetes - Precio Costo: $",ae.providerPrice]},ae.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:st,onChange:ae=>{yt(ae.target.value),nr("")},disabled:!s||!$e,children:[l.jsx("option",{value:"",children:"Selecciona"}),kt.filter(ae=>ae!==be).map(ae=>{const Me=Pe[ae];return l.jsxs("option",{value:ae,children:["Vendedor: ",(Me==null?void 0:Me.sellerName)||"","  Existencias: ","",(Me==null?void 0:Me.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(Me==null?void 0:Me.date)||""]},ae)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:Dt,onChange:ae=>nr(ae.target.value),disabled:!s||!st||!_t,children:[l.jsx("option",{value:"",children:"Selecciona"}),se.map(ae=>l.jsxs("option",{value:ae.id,children:["Tipo: ",ae.category," - ",ae.productName,"  Existencias:"," ",Number(ae.remainingPackages||0)," Paquetes - Precio Costo: $",ae.providerPrice]},ae.id))]}),st&&_t&&se.length===0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),l.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Ce,onChange:ae=>dt(ae.target.value),disabled:!s||!$e||!Dt})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:gt,onChange:ae=>Ne(ae.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:Te,disabled:!s||at,children:"Limpiar"}),l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Re,disabled:!s||at||!$e||!Dt||Number(Ce||0)<=0||!gt.trim(),children:"Hacer traslado"})]})]}),l.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:me,disabled:et,type:"button",children:et?"Cargando...":"Recargar"})]}),l.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),l.jsx("th",{className:"p-2 border",children:"Usuario"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),l.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),l.jsx("th",{className:"p-2 border",children:"Precio Isla"}),l.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),l.jsx("th",{className:"p-2 border",children:"Movido a orden"}),l.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),l.jsx("tbody",{children:et?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):he.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):he.map(ae=>{var Ie,rt;const Me=((rt=(Ie=ae.createdAt)==null?void 0:Ie.toDate)==null?void 0:rt.call(Ie))||(ae.createdAt?new Date(ae.createdAt.seconds*1e3):null),xe=Me?`${Me.toISOString().slice(0,10)} ${Me.toISOString().slice(11,19)}`:ae.date||"",Le=(ae.createdByName||"").trim()||(ae.createdByEmail||"").trim()||"";return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:xe}),l.jsx("td",{className:"p-2 border",children:Le}),l.jsx("td",{className:"p-2 border text-left",children:ae.productName||""}),l.jsx("td",{className:"p-2 border",children:Number(ae.packagesMoved||0)}),l.jsx("td",{className:"p-2 border",children:dn(ae.providerPrice||0)}),l.jsx("td",{className:"p-2 border",children:dn(ae.unitPriceRivas||0)}),l.jsx("td",{className:"p-2 border",children:dn(ae.unitPriceIsla||0)}),l.jsx("td",{className:"p-2 border",children:ae.toSellerName||""}),l.jsx("td",{className:"p-2 border",children:ae.toOrderLabel||ae.toOrderKey||""}),l.jsx("td",{className:"p-2 border text-left",children:ae.comment||""})]},ae.id)})})]})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),S&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[M&&l.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),l.jsx("h3",{className:"text-xl font-bold mb-4",children:B?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),A.length===0&&l.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),l.jsxs("form",{onSubmit:it,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:Ae,onChange:ae=>ee(ae.target.value),disabled:c,children:[l.jsx("option",{value:"",children:"Selecciona un vendedor"}),A.map(ae=>l.jsxs("option",{value:ae.id,children:[ae.name,ae.branchLabel?` - ${ae.branchLabel}`:"",ae.commissionPercent?` (${ae.commissionPercent.toFixed(1)}% comisin)`:""]},ae.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ce,onChange:ae=>de(ae.target.value),disabled:c})]})]}),l.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:X,onChange:ae=>pe(ae.target.value),disabled:c,children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),te.map(ae=>{const Me=p[ae.id]??0,xe=[];xe.push(ae.category?`${ae.category} - ${ae.name}`:ae.name);const Le=[];ae.unitPriceRivas>0&&Le.push(`R: ${dn(ae.unitPriceRivas)}`),ae.unitPriceSanJorge>0&&Le.push(`SJ: ${dn(ae.unitPriceSanJorge)}`),ae.unitPriceIsla>0&&Le.push(`I: ${dn(ae.unitPriceIsla)}`),Le.length&&xe.push(Le.join(" | ")),xe.push(`Disp: ${Me} paq`);const Ie=Z.has(ae.id);return l.jsx("option",{value:ae.id,disabled:Ie,children:Ie?` (Agregado) ${xe.join("  ")}`:xe.join("  ")},ae.id)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes / bolsas"}),l.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Se,onChange:ae=>k(ae.target.value),disabled:c})]})]}),l.jsx("div",{className:"flex justify-end mt-3",children:l.jsx("button",{type:"button",onClick:ft,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:c||!X||Z.has(X),title:Z.has(X)?"Ese producto ya est en el pedido":"",children:"Agregar producto al pedido"})})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Paq x Und (ref)"}),l.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),l.jsx("th",{className:"p-2 border",children:"Subtotal"}),l.jsx("th",{className:"p-2 border",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),l.jsx("th",{className:"p-2 border",children:"Total Isla"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),l.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),l.jsx("th",{className:"p-2 border",children:"P. paquete vendedor"}),l.jsx("th",{className:"p-2 border",children:"Total vendedor"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:F.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:16,className:"p-4 text-center text-gray-500",children:"No hay productos en este pedido. Agrega al menos uno."})}):F.map(ae=>l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:ae.productName}),l.jsx("td",{className:"p-2 border",children:ae.category}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",min:0,className:"border p-1 rounded text-right text-xs w-20",value:ae.packages,onChange:Me=>At(ae.id,Me.target.value),disabled:c})}),l.jsx("td",{className:"p-2 border",children:ae.remainingPackages??ae.packages}),l.jsx("td",{className:"p-2 border",children:ae.unitsPerPackage||""}),l.jsx("td",{className:"p-2 border",children:dn(ae.providerPrice)}),l.jsx("td",{className:"p-2 border",children:dn(ae.subtotal)}),l.jsx("td",{className:"p-2 border",children:dn(ae.totalRivas)}),l.jsx("td",{className:"p-2 border",children:dn(ae.totalSanJorge)}),l.jsx("td",{className:"p-2 border",children:dn(ae.totalIsla)}),l.jsx("td",{className:"p-2 border",children:dn(ae.unitPriceRivas)}),l.jsx("td",{className:"p-2 border",children:dn(ae.unitPriceSanJorge)}),l.jsx("td",{className:"p-2 border",children:dn(ae.unitPriceIsla)}),l.jsx("td",{className:"p-2 border",children:dn(ae.pricePerPackage)}),l.jsx("td",{className:"p-2 border",children:dn(ae.totalVendor)}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs disabled:opacity-50",onClick:()=>Ct(ae.id),disabled:c,children:"Quitar"})})]},ae.id))})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales del pedido"}),l.jsx("div",{className:"text-lg font-semibold",children:Ye.totalPackages})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),l.jsx("div",{className:"text-lg font-semibold",children:dn(Ye.subtotal)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total vendedor (precio venta)"}),l.jsx("div",{className:"text-lg font-semibold text-green-600",children:dn(Ye.totalVendor)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin posible vendedor"}),l.jsx("div",{className:"text-lg font-semibold",children:dn(Ye.commissionAmount)})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s&&l.jsx("button",{type:"button",onClick:nt,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:M,children:"Limpiar pedido"}),l.jsx("button",{type:"button",onClick:()=>{nt(),O(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:M,children:"Cerrar"}),l.jsx("button",{type:"button",onClick:we,className:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700",disabled:!q||F.length===0,children:"Imprimir pedido"}),s&&l.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:M||!q||F.length===0,children:M?"Guardando...":"Guardar pedido"})]})]})]})}),l.jsx("div",{className:"block md:hidden space-y-3 mt-4",children:ue.map(ae=>{var Ze,tt;const Me=Q[ae.sellerId],xe=Number((Me==null?void 0:Me.commissionPercent)||0),Le=ae.totalVendor*xe/100,Ie=x===ae.orderKey,rt=Ie?je(ae.orderKey):[];return l.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-sm",children:ae.sellerName}),l.jsx("div",{className:"text-xs text-gray-500",children:(Me==null?void 0:Me.branchLabel)||""})]}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[l.jsx("div",{children:ae.date||""}),l.jsx("div",{className:"truncate max-w-[140px]",children:ae.orderKey})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Paquetes:"})," ",l.jsx("b",{children:ae.totalPackages})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Restantes:"})," ",l.jsx("b",{children:ae.totalRemainingPackages})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Trasl. OUT:"})," ",l.jsx("b",{children:((Ze=u[ae.orderKey])==null?void 0:Ze.out)||0})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Trasl. IN:"})," ",l.jsx("b",{children:((tt=u[ae.orderKey])==null?void 0:tt.in)||0})]})]}),l.jsxs("div",{className:"text-sm border-t pt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),l.jsx("span",{children:dn(ae.subtotal)})]}),l.jsxs("div",{className:"flex justify-between font-semibold",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:dn(ae.totalVendor)})]}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[l.jsx("span",{children:"Comisin:"}),l.jsx("span",{children:dn(Le)})]})]}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 rounded text-xs",onClick:()=>re(ae.orderKey),children:"Ver / Editar"}),s&&l.jsx("button",{className:"flex-1 bg-red-600 text-white py-2 rounded text-xs",onClick:()=>ne(ae.orderKey),children:"Borrar"})]}),l.jsx("button",{type:"button",className:"w-full mt-2 border rounded py-2 text-xs bg-gray-50 hover:bg-gray-100",onClick:()=>{y(Xe=>Xe===ae.orderKey?null:ae.orderKey)},children:Ie?"Ocultar detalle":"Ver detalle del pedido"}),Ie&&l.jsxs("div",{className:"mt-2 border rounded bg-white overflow-hidden",children:[l.jsx("div",{className:"px-3 py-2 text-xs font-semibold bg-gray-100",children:"Detalle del pedido"}),rt.length===0?l.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Sin detalle"}):l.jsx("div",{className:"divide-y",children:rt.map(Xe=>l.jsxs("div",{className:"p-3 text-xs",children:[l.jsxs("div",{className:"flex justify-between gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:Xe.productName}),l.jsx("div",{className:"text-gray-500 truncate",children:Xe.category||""})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Paq:"})," ",l.jsx("b",{children:Number(Xe.packages||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Rem:"})," ",l.jsx("b",{children:Number(Xe.remainingPackages||0)})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-500",children:"Costo:"}),l.jsx("span",{children:dn(Number(Xe.providerPrice||0))})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-500",children:"Total:"}),l.jsx("span",{className:"font-semibold",children:dn(Number(Xe.totalVendor||0))})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-[11px] text-gray-600",children:[l.jsxs("div",{className:"text-center border rounded py-1",children:["R ",dn(Number(Xe.unitPriceRivas||0))]}),l.jsxs("div",{className:"text-center border rounded py-1",children:["SJ ",dn(Number(Xe.unitPriceSanJorge||0))]}),l.jsxs("div",{className:"text-center border rounded py-1",children:["I ",dn(Number(Xe.unitPriceIsla||0))]})]})]},Xe.id))})]})]},ae.orderKey)})}),l.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto mt-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Listado de pedidos"}),l.jsxs("table",{className:"min-w-[1000px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Vendedor"}),l.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Paquetes Trasladados"}),l.jsx("th",{className:"p-2 border",children:"Paquetes Adicionales"}),l.jsx("th",{className:"p-2 border",children:"Subtotal costo"}),l.jsx("th",{className:"p-2 border",children:"Total vendedor"}),l.jsx("th",{className:"p-2 border",children:"Comisin posible"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:I?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Cargando"})}):ue.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Sin pedidos asignados a vendedores."})}):ue.map(ae=>{var Ie,rt;const Me=Q[ae.sellerId],xe=Number((Me==null?void 0:Me.commissionPercent)||0),Le=ae.totalVendor*xe/100;return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:ae.date||""}),l.jsxs("td",{className:"p-2 border",children:[ae.sellerName,Me!=null&&Me.branchLabel?` - ${Me.branchLabel}`:""]}),l.jsx("td",{className:"p-2 border",children:ae.totalPackages}),l.jsx("td",{className:"p-2 border",children:ae.totalRemainingPackages}),l.jsx("td",{className:"p-2 border",children:((Ie=u[ae.orderKey])==null?void 0:Ie.out)||0}),l.jsx("td",{className:"p-2 border",children:((rt=u[ae.orderKey])==null?void 0:rt.in)||0}),l.jsx("td",{className:"p-2 border",children:dn(ae.subtotal)}),l.jsx("td",{className:"p-2 border",children:dn(ae.totalVendor)}),l.jsx("td",{className:"p-2 border",children:dn(Le)}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-1 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>re(ae.orderKey),children:"Ver / Editar"}),s&&l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ne(ae.orderKey),children:"Borrar"})]})})]},ae.orderKey)})})]})]}),C&&l.jsx("p",{className:"mt-2 text-sm",children:C})]})}function tT(t){return isFinite(t)?Math.round(t):0}function ma(t){const e=Number(t);return Number.isFinite(e)?Math.floor(e):0}function yne(t){const e=Math.max(1,ma(t.unitsPerPackage||1)),r=ma(t.totalUnits||0),n=ma(t.quantity||0),a=ma(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function qLe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):yne(t)}function FH(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,ma(t.unitsPerPackage||1)),n=qLe(t);return Math.max(0,Math.floor(n/r))}function WLe(t){const e=Math.max(1,ma(t.unitsPerPackage||1)),r=yne(t);return Math.max(0,Math.floor(r/e))}function XLe(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,o]=v.useState([]),[c,u]=v.useState(!1),[d,A]=v.useState([]),[h,f]=v.useState({}),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(""),[T,C]=v.useState("20"),[E,S]=v.useState("15"),[O,B]=v.useState("30"),[P,D]=v.useState([]),[W,Ae]=v.useState(""),[ee,ce]=v.useState(""),[de,X]=v.useState(""),[pe,Se]=v.useState("1"),[k,F]=v.useState("0"),[V,M]=v.useState("DATOS"),L=v.useMemo(()=>{const ue=new Set;for(const Pe of i){const Ye=String(Pe.category||"").trim();Ye&&ue.add(Ye)}return Array.from(ue).sort((Pe,Ye)=>Pe.localeCompare(Ye,"es"))},[i]);v.useEffect(()=>{!W&&L.length>0&&Ae(L[0])},[L]);const q=(ue,Pe,Ye)=>{const nt=ue*Pe,mt=Math.min(Math.max(Ye.marginR,0),99.9)/100,ct=Math.min(Math.max(Ye.marginSJ,0),99.9)/100,ft=Math.min(Math.max(Ye.marginIsla,0),99.9)/100,Ct=Pe>0&&mt<1?nt/(1-mt):nt,At=Pe>0&&ct<1?nt/(1-ct):nt,He=Pe>0&&ft<1?nt/(1-ft):nt,it=Ct-nt,we=At-nt,re=He-nt,ne=Pe>0?tT(Ct/Pe):0,Ue=Pe>0?tT(At/Pe):0,Ke=Pe>0?tT(He/Pe):0;return{subtotal:nt,totalRivas:Ct,totalSanJorge:At,totalIsla:He,gainRivas:it,gainSanJorge:we,gainIsla:re,unitPriceRivas:ne,unitPriceSanJorge:Ue,unitPriceIsla:Ke}},R=()=>{x(null),b(""),I(""),D([]),Ae(L[0]||""),ce(""),X(""),F("0"),Se("1"),C("20"),S("15"),B("30"),M("DATOS")},K=async()=>{u(!0);try{const ue=await jt(Kt(ht(Fe,"products_candies"),Gr("createdAt","desc"))),Pe=[];ue.forEach(Ye=>{const nt=Ye.data();Pe.push({id:Ye.id,name:String(nt.name??"").trim(),category:String(nt.category??"").trim()||"Caramelo",providerPrice:Number(nt.providerPrice??0),unitsPerPackage:Number(nt.unitsPerPackage??1)})}),o(Pe)}catch(ue){console.error(ue),n(" Error cargando catlogo de dulces.")}finally{u(!1)}};v.useEffect(()=>{K()},[t]);const Z=v.useMemo(()=>(W.trim().length>0?i.filter(Pe=>Pe.category===W):i).sort((Pe,Ye)=>Pe.name.localeCompare(Ye.name,"es")),[i,W]);v.useEffect(()=>{if(!ee){X(""),Se("1");return}const ue=i.find(Pe=>Pe.id===ee);ue&&(X(String(ue.providerPrice??0)),Se(String(ue.unitsPerPackage??1)))},[ee,i]);const te=()=>{if(n(""),!ee){n("Selecciona un producto del catlogo.");return}const ue=i.find(At=>At.id===ee);if(!ue){n("Producto de catlogo no encontrado (refresca).");return}const Pe=Number(ue.providerPrice||0),Ye=ma(k||0),nt=ma(ue.unitsPerPackage||0);if(Pe<0){n("El precio proveedor no puede ser negativo.");return}if(Ye<=0){n("Los paquetes del pedido general deben ser mayor que 0.");return}if(nt<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const mt=Number(T||0),ct=Number(E||0),ft=Number(O||0);if(P.find(At=>At.id===ue.id))D(At=>At.map(He=>{if(He.id!==ue.id)return He;const it=ma(He.packages||0)+Ye,we=q(Pe,it,{marginR:Number(He.marginRivas||mt),marginSJ:Number(He.marginSanJorge||ct),marginIsla:Number(He.marginIsla||ft)});return{...He,providerPrice:Pe,unitsPerPackage:nt,packages:it,remainingPackages:ma(He.remainingPackages??He.packages)+Ye,...we}}));else{const At=q(Pe,Ye,{marginR:mt,marginSJ:ct,marginIsla:ft}),He={id:ue.id,name:ue.name,category:ue.category,providerPrice:Pe,packages:Ye,unitsPerPackage:nt,marginRivas:mt,marginSanJorge:ct,marginIsla:ft,subtotal:At.subtotal,totalRivas:At.totalRivas,totalSanJorge:At.totalSanJorge,totalIsla:At.totalIsla,gainRivas:At.gainRivas,gainSanJorge:At.gainSanJorge,gainIsla:At.gainIsla,unitPriceRivas:At.unitPriceRivas,unitPriceSanJorge:At.unitPriceSanJorge,unitPriceIsla:At.unitPriceIsla,remainingPackages:Ye};D(it=>[...it,He])}ce(""),F("0"),M("ITEMS")},Q=ue=>{D(Pe=>Pe.filter(Ye=>Ye.id!==ue))},ye=v.useMemo(()=>{const ue=P.reduce((ct,ft)=>ct+ma(ft.packages),0),Pe=P.reduce((ct,ft)=>ct+Number(ft.subtotal||0),0),Ye=P.reduce((ct,ft)=>ct+Number(ft.totalRivas||0),0),nt=P.reduce((ct,ft)=>ct+Number(ft.totalSanJorge||0),0),mt=P.reduce((ct,ft)=>ct+Number(ft.totalIsla||0),0);return{totalPackages:ue,subtotal:Pe,totalRivas:Ye,totalSanJorge:nt,totalIsla:mt}},[P]),Y=(ue,Pe,Ye)=>{D(nt=>nt.map(mt=>{if(mt.id!==ue)return mt;let ct={...mt};if(Pe==="packages"&&(ct.packages=ma(Ye||0)),Pe==="unitsPerPackage"&&(ct.unitsPerPackage=ma(Ye||0)),Pe==="marginRivas"&&(ct.marginRivas=Number(Ye||0)),Pe==="marginSanJorge"&&(ct.marginSanJorge=Number(Ye||0)),Pe==="marginIsla"&&(ct.marginIsla=Number(Ye||0)),Pe==="packages"||Pe==="marginRivas"||Pe==="marginSanJorge"||Pe==="marginIsla"){const ft=q(ct.providerPrice,ct.packages,{marginR:Number(ct.marginRivas||0),marginSJ:Number(ct.marginSanJorge||0),marginIsla:Number(ct.marginIsla||0)});ct={...ct,...ft}}return ct}))};v.useEffect(()=>{(async()=>{s(!0);try{const ue=Kt(ht(Fe,"candy_main_orders"),Gr("createdAt","desc")),Pe=await jt(ue),Ye=[];Pe.forEach(ct=>{const ft=ct.data();Ye.push({id:ct.id,name:ft.name??"",date:ft.date??"",totalPackages:Number(ft.totalPackages??0),subtotal:Number(ft.subtotal??0),totalRivas:Number(ft.totalRivas??0),totalSanJorge:Number(ft.totalSanJorge??0),totalIsla:Number(ft.totalIsla??0),marginRivas:Number(ft.marginRivas??20),marginSanJorge:Number(ft.marginSanJorge??15),marginIsla:Number(ft.marginIsla??30),createdAt:ft.createdAt??Xt.now()})}),A(Ye);const nt=await jt(ht(Fe,"inventory_candies")),mt={};nt.forEach(ct=>{const ft=ct.data(),Ct=ft.orderId;if(!Ct)return;const At=WLe(ft),He=FH(ft);mt[Ct]||(mt[Ct]={orderId:Ct,totalPackages:0,remainingPackages:0}),mt[Ct].totalPackages+=At,mt[Ct].remainingPackages+=He}),f(mt)}catch(ue){console.error(ue),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const z=async ue=>{if(ue.preventDefault(),n(""),!P.length){n("Agrega al menos un producto al pedido general.");return}try{const Pe=new Date().toISOString().slice(0,10),Ye=w||Pe,nt=ye,mt=Number(T||0),ct=Number(E||0),ft=Number(O||0);for(const At of P){if(!At.name.trim()){n("Hay un producto sin nombre en el pedido.");return}if(At.providerPrice<0){n(`El precio proveedor no puede ser negativo (producto: ${At.name}).`);return}if(At.packages<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${At.name}).`);return}if(At.unitsPerPackage<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${At.name}).`);return}}const Ct={name:y||`Pedido ${Ye}`,date:Ye,totalPackages:nt.totalPackages,subtotal:nt.subtotal,totalRivas:nt.totalRivas,totalSanJorge:nt.totalSanJorge,totalIsla:nt.totalIsla,marginRivas:mt,marginSanJorge:ct,marginIsla:ft,items:P};if(g){await Hr(Ht(Fe,"candy_main_orders",g),{...Ct});for(const it of P){const we=await jt(Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",g),Zt("productId","==",it.id))),re=ma(it.packages)*ma(it.unitsPerPackage),ne=Math.max(1,ma(it.unitsPerPackage||1));if(we.empty)await on(ht(Fe,"inventory_candies"),{productId:it.id,productName:it.name,category:it.category,measurement:"unidad",quantity:re,remaining:re,packages:ma(it.packages),remainingPackages:ma(it.packages),unitsPerPackage:ne,totalUnits:re,providerPrice:it.providerPrice,subtotal:it.subtotal,totalRivas:it.totalRivas,totalSanJorge:it.totalSanJorge,totalIsla:it.totalIsla,gainRivas:it.gainRivas,gainSanJorge:it.gainSanJorge,gainIsla:it.gainIsla,unitPriceRivas:it.unitPriceRivas,unitPriceSanJorge:it.unitPriceSanJorge,unitPriceIsla:it.unitPriceIsla,date:Ye,createdAt:Xt.now(),status:"PENDIENTE",orderId:g});else for(const Ue of we.docs){const Ke=Ue.data(),et=ma(Ke.totalUnits??0),ke=ma(Ke.remaining??et),he=re-et,_e=Math.max(0,ke+he),be=Math.max(0,Math.floor(_e/ne));await Hr(Ht(Fe,"inventory_candies",Ue.id),{productName:it.name,category:it.category,unitsPerPackage:ne,totalUnits:re,quantity:re,remaining:_e,packages:ma(it.packages),remainingPackages:be,providerPrice:it.providerPrice,subtotal:it.subtotal,totalRivas:it.totalRivas,totalSanJorge:it.totalSanJorge,totalIsla:it.totalIsla,gainRivas:it.gainRivas,gainSanJorge:it.gainSanJorge,gainIsla:it.gainIsla,unitPriceRivas:it.unitPriceRivas,unitPriceSanJorge:it.unitPriceSanJorge,unitPriceIsla:it.unitPriceIsla,date:Ye})}}const At=await jt(Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",g))),He=new Set(P.map(it=>it.id));for(const it of At.docs){const we=it.data(),re=String(we.productId||"");re&&!He.has(re)&&await _n(Ht(Fe,"inventory_candies",it.id))}A(it=>it.map(we=>we.id===g?{...we,name:Ct.name,date:Ct.date,totalPackages:Ct.totalPackages,subtotal:Ct.subtotal,totalRivas:Ct.totalRivas,totalSanJorge:Ct.totalSanJorge,totalIsla:Ct.totalIsla,marginRivas:Ct.marginRivas,marginSanJorge:Ct.marginSanJorge,marginIsla:Ct.marginIsla}:we)),n(" Orden maestra actualizada (pedido + inventario).")}else{const He=(await on(ht(Fe,"candy_main_orders"),{...Ct,createdAt:Xt.now()})).id,it=M0(Fe);for(const we of P){const re=Math.max(1,ma(we.unitsPerPackage||1)),ne=ma(we.packages)*re,Ue=Ht(ht(Fe,"inventory_candies"));it.set(Ue,{productId:we.id,productName:we.name,category:we.category,measurement:"unidad",quantity:ne,remaining:ne,packages:ma(we.packages),remainingPackages:ma(we.packages),unitsPerPackage:re,totalUnits:ne,providerPrice:we.providerPrice,subtotal:we.subtotal,totalRivas:we.totalRivas,totalSanJorge:we.totalSanJorge,totalIsla:we.totalIsla,gainRivas:we.gainRivas,gainSanJorge:we.gainSanJorge,gainIsla:we.gainIsla,unitPriceRivas:we.unitPriceRivas,unitPriceSanJorge:we.unitPriceSanJorge,unitPriceIsla:we.unitPriceIsla,date:Ye,createdAt:Xt.now(),status:"PENDIENTE",orderId:He})}await it.commit(),n(" Orden maestra creada y registrada en inventario.")}R(),p(!1),e()}catch(Pe){console.error(Pe),n(" Error al guardar orden maestra.")}},le=async ue=>{try{s(!0),n(""),x(ue.id),b(ue.name),I(ue.date),C(String(ue.marginRivas??20)),S(String(ue.marginSanJorge??15)),B(String(ue.marginIsla??30)),M("DATOS");const Pe=Ht(Fe,"candy_main_orders",ue.id),Ye=await So(Pe);if(!Ye.exists()){n(" No se encontr la orden.");return}const nt=Ye.data(),mt=Array.isArray(nt.items)?nt.items:[],ct=await jt(Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",ue.id))),ft={};ct.forEach(At=>{const He=At.data(),it=String(He.productId||"");if(!it)return;const we=FH(He);ft[it]=(ft[it]||0)+we});const Ct=mt.map(At=>{const He=i.find(ne=>ne.id===At.id),it=Number((He==null?void 0:He.providerPrice)??At.providerPrice??0),we=Math.max(1,ma((He==null?void 0:He.unitsPerPackage)??At.unitsPerPackage??1)),re=q(it,ma(At.packages||0),{marginR:Number(At.marginRivas||0),marginSJ:Number(At.marginSanJorge||0),marginIsla:Number(At.marginIsla||0)});return{...At,name:String((He==null?void 0:He.name)??At.name??""),category:String((He==null?void 0:He.category)??At.category??"Caramelo"),providerPrice:it,unitsPerPackage:we,remainingPackages:ft[At.id]??At.remainingPackages??At.packages??0,...re}});D(Ct),p(!0)}catch(Pe){console.error(Pe),n(" Error al abrir orden maestra.")}finally{s(!1)}},je=async ue=>{if(confirm(`Eliminar la orden "${ue.name}" y todo su inventario asociado?`)){n("");try{const Ye=await jt(Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",ue.id)));for(const nt of Ye.docs)await _n(Ht(Fe,"inventory_candies",nt.id));await _n(Ht(Fe,"candy_main_orders",ue.id)),A(nt=>nt.filter(mt=>mt.id!==ue.id)),n(" Orden maestra eliminada."),e()}catch(Ye){console.error(Ye),n(" Error al eliminar orden maestra.")}}};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[l.jsx("div",{className:"w-full",children:l.jsx(Dc,{onClick:e,loading:a||c})}),l.jsxs("button",{className:"items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded-2xl hover:bg-indigo-700",onClick:()=>{R(),p(!0)},children:[l.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full ",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:l.jsxs("div",{className:"bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[l.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h3",{className:"text-lg md:text-xl font-bold",children:g?"Editar Orden Maestra":"Nueva Orden Maestra"}),l.jsx("div",{className:"ml-auto flex gap-2",children:l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{R(),p(!1)},children:"Cerrar"})})]}),l.jsx("div",{className:"md:hidden mt-3",children:l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsx("button",{type:"button",onClick:()=>M("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),l.jsx("button",{type:"button",onClick:()=>M("AGREGAR"),disabled:!!g,className:`px-2 py-2 rounded text-xs font-semibold border ${g?"bg-gray-100 text-gray-400 border-gray-200":V==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,title:g?"En edicin no se agregan productos":"",children:"Agregar"}),l.jsxs("button",{type:"button",onClick:()=>M("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",P.length,")"]}),l.jsx("button",{type:"button",onClick:()=>M("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),l.jsxs("form",{onSubmit:z,className:"space-y-4 pt-4",children:[l.jsx("div",{className:`${V==="DATOS"?"block":"hidden"} md:block`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),l.jsx("input",{className:"w-full border p-2 rounded",value:y,onChange:ue=>b(ue.target.value),placeholder:"Ej: Pedido diciembre 01"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:w,onChange:ue=>I(ue.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:T,onChange:ue=>C(ue.target.value),disabled:!!g})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia San Jorge"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:E,onChange:ue=>S(ue.target.value),disabled:!!g})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:O,onChange:ue=>B(ue.target.value),disabled:!!g})]})]})}),!g&&l.jsx("div",{className:`${V==="AGREGAR"?"block":"hidden"} md:block`,children:l.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),l.jsx("select",{className:"w-full border p-2 rounded",value:W,onChange:ue=>{Ae(ue.target.value),ce("")},disabled:c,children:L.length===0?l.jsx("option",{value:"",children:c?"Cargando...":"No hay categoras en catlogo"}):L.map(ue=>l.jsx("option",{value:ue,children:ue},ue))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:ee,onChange:ue=>ce(ue.target.value),children:[l.jsx("option",{value:"",children:c?"Cargando catlogo...":"Selecciona producto"}),Z.map(ue=>l.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:de,readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),l.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:k,onChange:ue=>F(ue.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0})]})]}),l.jsx("div",{className:"flex justify-end mt-3",children:l.jsx("button",{type:"button",onClick:te,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]})}),l.jsxs("div",{className:`${V==="ITEMS"?"block":"hidden"} md:block`,children:[l.jsx("div",{className:"md:hidden space-y-3",children:P.length===0?l.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):P.map(ue=>l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-base leading-tight",children:ue.name}),l.jsx("div",{className:"text-xs text-gray-500",children:ue.category})]}),!g&&l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(ue.id),children:"Quitar"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ue.packages,onChange:Pe=>Y(ue.id,"packages",Pe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"Restantes"}),l.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:ue.remainingPackages??ue.packages,readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paq"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ue.unitsPerPackage,onChange:Pe=>Y(ue.id,"unitsPerPackage",Pe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"P. proveedor"}),l.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(ue.providerPrice||0).toFixed(2),readOnly:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"% Rivas"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ue.marginRivas??0,onChange:Pe=>Y(ue.id,"marginRivas",Pe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"% SJ"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ue.marginSanJorge??0,onChange:Pe=>Y(ue.id,"marginSanJorge",Pe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-600",children:"% Isla"}),l.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:ue.marginIsla??0,onChange:Pe=>Y(ue.id,"marginIsla",Pe.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),l.jsx("div",{className:"font-semibold",children:Number(ue.subtotal||0).toFixed(2)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas"}),l.jsx("div",{className:"font-semibold",children:Number(ue.totalRivas||0).toFixed(2)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total SJ"}),l.jsx("div",{className:"font-semibold",children:Number(ue.totalSanJorge||0).toFixed(2)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Isla"}),l.jsx("div",{className:"font-semibold",children:Number(ue.totalIsla||0).toFixed(2)})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"P. unidad Rivas"}),l.jsx("div",{className:"font-semibold",children:ue.unitPriceRivas})]}),l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"P. unidad SJ"}),l.jsx("div",{className:"font-semibold",children:ue.unitPriceSanJorge})]}),l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"P. unidad Isla"}),l.jsx("div",{className:"font-semibold",children:ue.unitPriceIsla})]})]})]},ue.id))}),l.jsx("div",{className:"hidden md:block bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Und x Paq"}),l.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),l.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),l.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),l.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),l.jsx("th",{className:"p-2 border",children:"Subtotal"}),l.jsx("th",{className:"p-2 border",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),l.jsx("th",{className:"p-2 border",children:"Total Isla"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),l.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),!g&&l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:P.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:g?16:17,className:"p-4 text-center text-gray-500",children:"No hay productos en esta orden."})}):P.map(ue=>l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border text-left",children:ue.name}),l.jsx("td",{className:"p-2 border",children:ue.category}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-24 border p-1 rounded text-right",value:ue.packages,onChange:Pe=>Y(ue.id,"packages",Pe.target.value)})}),l.jsx("td",{className:"p-2 border",children:ue.remainingPackages??ue.packages}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ue.unitsPerPackage,onChange:Pe=>Y(ue.id,"unitsPerPackage",Pe.target.value)})}),l.jsx("td",{className:"p-2 border",children:Number(ue.providerPrice||0).toFixed(2)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ue.marginRivas??0,onChange:Pe=>Y(ue.id,"marginRivas",Pe.target.value)})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ue.marginSanJorge??0,onChange:Pe=>Y(ue.id,"marginSanJorge",Pe.target.value)})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:ue.marginIsla??0,onChange:Pe=>Y(ue.id,"marginIsla",Pe.target.value)})}),l.jsx("td",{className:"p-2 border",children:Number(ue.subtotal||0).toFixed(2)}),l.jsx("td",{className:"p-2 border",children:Number(ue.totalRivas||0).toFixed(2)}),l.jsx("td",{className:"p-2 border",children:Number(ue.totalSanJorge||0).toFixed(2)}),l.jsx("td",{className:"p-2 border",children:Number(ue.totalIsla||0).toFixed(2)}),l.jsx("td",{className:"p-2 border",children:ue.unitPriceRivas}),l.jsx("td",{className:"p-2 border",children:ue.unitPriceSanJorge}),l.jsx("td",{className:"p-2 border",children:ue.unitPriceIsla}),!g&&l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(ue.id),children:"Quitar"})})]},ue.id))})]})})]}),l.jsx("div",{className:`${V==="TOTALES"?"block":"hidden"} md:block`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales de la orden"}),l.jsx("div",{className:"text-lg font-semibold",children:ye.totalPackages})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),l.jsx("div",{className:"text-lg font-semibold",children:ye.subtotal.toFixed(2)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas (orden)"}),l.jsx("div",{className:"text-lg font-semibold",children:ye.totalRivas.toFixed(2)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total San Jorge / Isla"}),l.jsxs("div",{className:"text-sm font-semibold",children:["SJ: ",ye.totalSanJorge.toFixed(2),l.jsx("br",{}),"Isla: ",ye.totalIsla.toFixed(2)]})]})]})}),l.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:R,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),l.jsx("button",{type:"button",onClick:()=>{R(),p(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),l.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:P.length===0,children:"Guardar orden"})]}),l.jsx("div",{className:"md:hidden mt-2",children:l.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{M(V==="DATOS"&&!g?"AGREGAR":V==="DATOS"||V==="AGREGAR"?"ITEMS":V==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"md:hidden space-y-3",children:a?l.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):d.length===0?l.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):d.map(ue=>{var mt;const Pe=h[ue.id],Ye=ue.date||((mt=ue.createdAt)!=null&&mt.toDate?ue.createdAt.toDate().toISOString().slice(0,10):""),nt=ue.totalPackages>0?(ue.subtotal/ue.totalPackages).toFixed(2):"0.00";return l.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-xs text-gray-500",children:Ye}),l.jsx("div",{className:"font-semibold text-base leading-tight",children:ue.name})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>le(ue),children:"Ver"}),l.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>je(ue),children:"Borrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),l.jsx("div",{className:"font-semibold",children:ue.totalPackages})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),l.jsx("div",{className:"font-semibold",children:Pe?Pe.remainingPackages:0})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),l.jsx("div",{className:"font-semibold",children:nt})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),l.jsx("div",{className:"font-semibold",children:ue.subtotal.toFixed(2)})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),l.jsx("div",{className:"font-semibold",children:ue.totalRivas.toFixed(2)})]}),l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"Total SJ"}),l.jsx("div",{className:"font-semibold",children:ue.totalSanJorge.toFixed(2)})]}),l.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[l.jsx("div",{className:"text-gray-600",children:"Total Isla"}),l.jsx("div",{className:"font-semibold",children:ue.totalIsla.toFixed(2)})]})]})]},ue.id)})}),l.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Subtotal"}),l.jsx("th",{className:"p-2 border",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),l.jsx("th",{className:"p-2 border",children:"Total Isla"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:a?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):d.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin ordenes maestras."})}):d.map(ue=>{var Ye;const Pe=h[ue.id];return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:ue.date||((Ye=ue.createdAt)!=null&&Ye.toDate?ue.createdAt.toDate().toISOString().slice(0,10):"")}),l.jsx("td",{className:"p-2 border",children:ue.name}),l.jsx("td",{className:"p-2 border",children:ue.totalPackages}),l.jsx("td",{className:"p-2 border",children:Pe?Pe.remainingPackages:0}),l.jsx("td",{className:"p-2 border",children:ue.totalPackages>0?(ue.subtotal/ue.totalPackages).toFixed(2):"0.00"}),l.jsx("td",{className:"p-2 border",children:ue.subtotal.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:ue.totalRivas.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:ue.totalSanJorge.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:ue.totalIsla.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-1 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>le(ue),children:"Ver / Editar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>je(ue),children:"Borrar"})]})})]},ue.id)})})]})})]}),r&&l.jsx("p",{className:"mt-2 text-sm",children:r})]})}const gh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function rT(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),o=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+o/100),A=a*(1+c/100),h=u-a,f=d-a,m=A-a,p=u/s,g=d/s,x=A/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(A.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(f.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function OH(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Dl(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function nT(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function YLe(){var M,L,q;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,o]=v.useState(""),[c,u]=v.useState(dr(yd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(dr(vd(new Date),"yyyy-MM-dd")),[h,f]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,I]=v.useState(0),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(""),[P,D]=v.useState(""),[W,Ae]=v.useState(0),[ee,ce]=v.useState(0),[de,X]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),o("");const R=Kt(ht(Fe,"candy_main_orders"),Gr("createdAt","desc")),K=await jt(R),Z=[];K.forEach(ye=>{const Y=ye.data();Z.push({id:ye.id,name:Y.name??"",date:Y.date??"",totalPackages:Number(Y.totalPackages??0),subtotal:Number(Y.subtotal??0),totalRivas:Number(Y.totalRivas??0),totalSanJorge:Number(Y.totalSanJorge??0),totalIsla:Number(Y.totalIsla??0),marginRivas:Number(Y.marginRivas??0),marginSanJorge:Number(Y.marginSanJorge??0),marginIsla:Number(Y.marginIsla??0),createdAt:Y.createdAt??Xt.now()})}),e(Z);const te=await jt(Kt(ht(Fe,"inventory_candies"))),Q={};te.forEach(ye=>{const Y=ye.data(),z=Y.orderId;if(!z)return;const le=Number(Y.unitsPerPackage||1)||1,je=Number(Y.totalUnits??(Y.packages||0)*le),ue=Math.round(je/le),Pe=Number(Y.remaining??Y.totalUnits??je),Ye=Number(Y.remainingPackages??NaN),nt=Number.isFinite(Ye)?Math.round(Ye):Math.round(Pe/le);Q[z]||(Q[z]={orderId:z,totalPackages:0,remainingPackages:0}),Q[z].totalPackages+=ue,Q[z].remainingPackages+=nt}),n(Q)}catch(R){console.error(R),o(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const pe=v.useMemo(()=>t.filter(R=>{var Z;const K=R.date||((Z=R.createdAt)!=null&&Z.toDate?R.createdAt.toDate().toISOString().slice(0,10):"");return!(!K||c&&K<c||d&&K>d)}),[t,c,d]),Se=v.useMemo(()=>{let R=0,K=0,Z=0,te=0,Q=0,ye=0;for(const Y of pe){R+=Y.totalPackages,K+=Y.subtotal,Z+=Y.totalRivas,te+=Y.totalSanJorge,Q+=Y.totalIsla;const z=r[Y.id];z&&(ye+=z.remainingPackages)}return{totalPaquetes:R,totalSubtotal:K,totalRivas:Z,totalSJ:te,totalIsla:Q,totalPaquetesRestantes:ye,totalPedidos:pe.length}},[pe,r]),k=async(R,K,Z)=>{if(!g)return;const te=Number(Z||0),Q=y.map(z=>z.id!==R?z:rT({...z,[K]:te}));b(Q);const ye=Q.find(z=>z.id===R);if(!ye)return;const Y=OH(Q);try{await Hr(Ht(Fe,"products_candies",R),{marginRivas:ye.marginRivas,marginSanJorge:ye.marginSanJorge,marginIsla:ye.marginIsla,subtotal:ye.subtotal,totalRivas:ye.totalRivas,totalSanJorge:ye.totalSanJorge,totalIsla:ye.totalIsla,unitPriceRivas:ye.unitPriceRivas,unitPriceSanJorge:ye.unitPriceSanJorge,unitPriceIsla:ye.unitPriceIsla,gainRivas:ye.gainRivas,gainSanJorge:ye.gainSanJorge,gainIsla:ye.gainIsla}),await Hr(Ht(Fe,"candy_main_orders",g.id),{totalPackages:Y.totalPackages,subtotal:Number(Y.subtotal.toFixed(2)),totalRivas:Number(Y.totalRivas.toFixed(2)),totalSanJorge:Number(Y.totalSanJorge.toFixed(2)),totalIsla:Number(Y.totalIsla.toFixed(2))}),x(z=>z&&{...z,totalPackages:Y.totalPackages,subtotal:Number(Y.subtotal.toFixed(2)),totalRivas:Number(Y.totalRivas.toFixed(2)),totalSanJorge:Number(Y.totalSanJorge.toFixed(2)),totalIsla:Number(Y.totalIsla.toFixed(2))}),o(" Mrgenes del producto actualizados.")}catch(z){console.error(z),o(" Error actualizando mrgenes del producto.")}},F=async()=>{if(g)try{o("");const R=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,K=Number.isFinite(T)&&T!==0?T:g.marginSanJorge||0,Z=Number.isFinite(E)&&E!==0?E:g.marginIsla||0,te=rT({id:"tmp",name:O.trim(),category:P.trim(),providerPrice:Number(W||0),packages:Number(ee||0),unitsPerPackage:Number(de||1),marginRivas:Number(R||0),marginSanJorge:Number(K||0),marginIsla:Number(Z||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(ee||0)}),Q=await on(ht(Fe,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:te.name,category:te.category,providerPrice:te.providerPrice,packages:te.packages,unitsPerPackage:te.unitsPerPackage,marginRivas:te.marginRivas,marginSanJorge:te.marginSanJorge,marginIsla:te.marginIsla,gainRivas:te.gainRivas,gainSanJorge:te.gainSanJorge,gainIsla:te.gainIsla,subtotal:te.subtotal,totalRivas:te.totalRivas,totalSanJorge:te.totalSanJorge,totalIsla:te.totalIsla,unitPriceRivas:te.unitPriceRivas,unitPriceSanJorge:te.unitPriceSanJorge,unitPriceIsla:te.unitPriceIsla,createdAt:Xt.now()}),Y=[{...te,id:Q.id},...y];b(Y);const z=OH(Y);await Hr(Ht(Fe,"candy_main_orders",g.id),{totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),x(le=>le&&{...le,totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),I(0),C(0),S(0),B(""),D(""),Ae(0),ce(0),X(1),o(" Producto agregado con mrgenes por sucursal.")}catch(R){console.error(R),o(" Error agregando producto al pedido.")}},V=async R=>{try{x(R),b([]),f(!0),p(!0),o("");const K=await jt(Kt(ht(Fe,"inventory_candies"),Zt("orderId","==",R.id))),Z={};K.forEach(ye=>{const Y=ye.data(),z=Y.productId;if(!z)return;const le=Number(Y.unitsPerPackage||1)||1,je=Number(Y.remaining??Y.totalUnits??0),ue=Number(Y.remainingPackages??NaN),Pe=Number.isFinite(ue)?Math.round(ue):Math.round(je/le);Z[z]=(Z[z]||0)+Pe});const te=await jt(Kt(ht(Fe,"products_candies"),Zt("orderId","==",R.id))),Q=[];te.forEach(ye=>{const Y=ye.data(),z=Dl(Y.providerPrice,0),le=Dl(Y.packages,0),je=Y.subtotal??z*le,ue=nT({margin:Y.marginRivas,gain:Y.gainRivas,subtotal:je,orderMargin:R.marginRivas||0}),Pe=nT({margin:Y.marginSanJorge,gain:Y.gainSanJorge,subtotal:je,orderMargin:R.marginSanJorge||0}),Ye=nT({margin:Y.marginIsla,gain:Y.gainIsla,subtotal:je,orderMargin:R.marginIsla||0}),nt=rT({id:ye.id,name:Y.name??"",category:Y.category??"",providerPrice:z,packages:le,unitsPerPackage:Dl(Y.unitsPerPackage,1),marginRivas:Number(ue||0),marginSanJorge:Number(Pe||0),marginIsla:Number(Ye||0),subtotal:Dl(Y.subtotal,0),totalRivas:Dl(Y.totalRivas,0),totalSanJorge:Dl(Y.totalSanJorge,0),totalIsla:Dl(Y.totalIsla,0),gainRivas:Dl(Y.gainRivas,0),gainSanJorge:Dl(Y.gainSanJorge,0),gainIsla:Dl(Y.gainIsla,0),unitPriceRivas:Dl(Y.unitPriceRivas,0),unitPriceSanJorge:Dl(Y.unitPriceSanJorge,0),unitPriceIsla:Dl(Y.unitPriceIsla,0),remainingPackages:Z[ye.id]??Dl(Y.packages,0)});Q.push(nt)}),b(Q)}catch(K){console.error(K),o(" Error cargando productos del pedido.")}finally{p(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>A(R.target.value)})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A("")},children:"Quitar filtro"}),l.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",l.jsx("span",{className:"font-semibold",children:Se.totalPedidos})]})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Se.totalPaquetes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Se.totalPaquetesRestantes]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",gh(Se.totalSubtotal)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",gh(Se.totalRivas)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",gh(Se.totalSJ)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",gh(Se.totalIsla)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:l.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Subtotal"}),l.jsx("th",{className:"p-2 border",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),l.jsx("th",{className:"p-2 border",children:"Total Isla"}),l.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),l.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),l.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:a?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):pe.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):pe.map(R=>{var Y;const K=R.totalPackages>0?Math.round(R.totalRivas/R.totalPackages):0,Z=R.totalPackages>0?Math.round(R.totalSanJorge/R.totalPackages):0,te=R.totalPackages>0?Math.round(R.totalIsla/R.totalPackages):0,Q=R.date||((Y=R.createdAt)!=null&&Y.toDate?R.createdAt.toDate().toISOString().slice(0,10):""),ye=r[R.id];return l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:Q}),l.jsx("td",{className:"p-2 border",children:R.name}),l.jsx("td",{className:"p-2 border",children:R.totalPackages}),l.jsx("td",{className:"p-2 border",children:ye?ye.remainingPackages:0}),l.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:K}),l.jsx("td",{className:"p-2 border",children:Z}),l.jsx("td",{className:"p-2 border",children:te}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>V(R),children:"Ver pedido"})})]},R.id)})})]})}),h&&g&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{f(!1),x(null),b([]),o("")},children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),l.jsx("div",{className:"font-semibold",children:g.date||((M=g.createdAt)!=null&&M.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),l.jsx("div",{className:"font-semibold",children:((L=r[g.id])==null?void 0:L.totalPackages)??g.totalPackages})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),l.jsx("div",{className:"font-semibold",children:((q=r[g.id])==null?void 0:q.remainingPackages)??0})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),l.jsx("div",{className:"font-semibold",children:gh(g.subtotal)})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),l.jsx("div",{className:"font-semibold",children:gh(g.totalRivas)})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),l.jsx("div",{className:"font-semibold",children:gh(g.totalSanJorge)})]}),l.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-gray-600",children:"Total Isla"}),l.jsx("div",{className:"font-semibold",children:gh(g.totalIsla)})]})]}),l.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:R=>I(Number(R.target.value||0))})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:T,onChange:R=>C(Number(R.target.value||0))})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:E,onChange:R=>S(Number(R.target.value||0))})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Producto"}),l.jsx("input",{className:"border rounded px-2 py-1 w-56",value:O,onChange:R=>B(R.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Categora"}),l.jsx("input",{className:"border rounded px-2 py-1 w-40",value:P,onChange:R=>D(R.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:W,onChange:R=>Ae(Number(R.target.value||0))})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Paquetes"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ee,onChange:R=>ce(Number(R.target.value||0))})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:de,onChange:R=>X(Number(R.target.value||1))})]}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:F,children:"Agregar producto"})]})]}),l.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),l.jsx("th",{className:"p-2 border",children:"Und x Paq"}),l.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),l.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),l.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),l.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),l.jsx("th",{className:"p-2 border",children:"Subtotal"}),l.jsx("th",{className:"p-2 border",children:"Total Rivas"}),l.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),l.jsx("th",{className:"p-2 border",children:"Total Isla"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),l.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),l.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),l.jsx("tbody",{children:m?l.jsx("tr",{children:l.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(R=>l.jsxs("tr",{className:"text-center whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:R.name}),l.jsx("td",{className:"p-2 border",children:R.category}),l.jsx("td",{className:"p-2 border",children:R.packages}),l.jsx("td",{className:"p-2 border",children:R.remainingPackages??R.packages}),l.jsx("td",{className:"p-2 border",children:R.unitsPerPackage}),l.jsx("td",{className:"p-2 border",children:R.providerPrice.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginRivas??0,onChange:K=>k(R.id,"marginRivas",K.target.value)})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginSanJorge??0,onChange:K=>k(R.id,"marginSanJorge",K.target.value)})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginIsla??0,onChange:K=>k(R.id,"marginIsla",K.target.value)})}),l.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),l.jsx("td",{className:"p-2 border",children:R.unitPriceRivas}),l.jsx("td",{className:"p-2 border",children:R.unitPriceSanJorge}),l.jsx("td",{className:"p-2 border",children:R.unitPriceIsla})]},R.id))})]})}),i&&l.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&l.jsx("p",{className:"mt-2 text-sm",children:i})]})}const ha=t=>Math.round((Number(t)||0)*100)/100,kg=t=>Math.round((Number(t)||0)*1e3)/1e3,ao=t=>Number(t??0).toFixed(2),lm=t=>Number(t??0).toFixed(3),JLe=(t,e)=>{var f;const r=t.date??((f=t.timestamp)!=null&&f.toDate?dr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,o=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&o>0&&Number(x||0)>0&&(y=ha(c*Number(x||0)/o)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:ha(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),A=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=ha(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:A,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function ZLe({role:t,currentUserEmail:e,sellerCandyId:r}){const[n,a]=v.useState([]),[s,i]=v.useState(null),[o,c]=v.useState(!0),[u,d]=v.useState(""),[A,h]=v.useState("ALL"),f=dr(new Date,"yyyy-MM-dd"),[m,p]=v.useState(f),[g,x]=v.useState(f),[y,b]=v.useState("ALL"),[w,I]=v.useState(null),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(""),[P,D]=v.useState(0),[W,Ae]=v.useState("0"),ee=v.useRef(null),ce=!t||t==="admin",de=t==="vendedor_dulces",X=(e||"").trim().toLowerCase(),[pe,Se]=v.useState([]);v.useEffect(()=>{if(!m||!g)return;c(!0);const we=Kt(ht(Fe,"sales_candies"),Zt("date",">=",m),Zt("date","<=",g),Gr("date","asc")),re=y0(we,ne=>{const Ue=[];ne.forEach(Ke=>{const et=JLe(Ke.data(),Ke.id);Ue.push(...et)}),a(Ue),c(!1)},ne=>{console.error("Error cargando ventas por periodo:",ne),a([]),c(!1)});return()=>re()},[m,g]),v.useEffect(()=>{(async()=>{const re=Kt(ht(Fe,"daily_closures_candies"),Zt("date","==",f)),ne=await jt(re);if(ne.empty)i(null);else{const Ue=ne.docs[0];i({id:Ue.id,...Ue.data()})}})()},[f]),v.useEffect(()=>{(async()=>{try{const re=await jt(ht(Fe,"sellers_candies")),ne=[];re.forEach(Ue=>{const Ke=Ue.data();ne.push({id:Ue.id,name:Ke.name||"",commissionPercent:Number(Ke.commissionPercent||0)})}),Se(ne)}catch(re){console.error("Error cargando sellers_candies",re)}})()},[]);const k=we=>ha(Number(we.vendorCommissionAmount??0)||0),F=xo.useMemo(()=>{let we=[...n];return A==="FLOTANTE"&&(we=we.filter(re=>re.status==="FLOTANTE")),A==="PROCESADA"&&(we=we.filter(re=>re.status==="PROCESADA")),ce&&y!=="ALL"&&(we=we.filter(re=>(re.vendorId||"")===y)),de&&(r?we=we.filter(re=>(re.vendorId||"")===r):X?we=we.filter(re=>(re.sellerEmail||"").toLowerCase()===X):we=[]),we},[A,n,ce,y,de,r,X]),V=xo.useMemo(()=>F.filter(we=>we.status==="FLOTANTE").length,[F]),M=xo.useMemo(()=>F.filter(we=>we.status==="PROCESADA").length,[F]),L=xo.useMemo(()=>F.filter(we=>we.type==="CREDITO").length,[F]),q=xo.useMemo(()=>F.filter(we=>we.type!=="CREDITO").length,[F]),R=kg(F.reduce((we,re)=>we+(re.quantity||0),0)),K=ha(F.reduce((we,re)=>we+Number(re.cogsAmount??0),0)),Z=ha(F.reduce((we,re)=>we+(re.amount||0),0)),te=ha(Z-K);let Q=0,ye=0,Y=0,z=0,le=0,je=0,ue=0;F.forEach(we=>{const re=Number(we.amount||0),ne=Number(we.amountReceived||0),Ue=k(we);le+=Ue,we.type==="CREDITO"?(Q+=we.quantity||0,Y+=re-ne,ue+=Ue):(ye+=we.quantity||0,z+=re,je+=Ue)}),Y=ha(Y),z=ha(z),le=ha(le),je=ha(je),ue=ha(ue);const Pe=xo.useMemo(()=>{const we={};for(const re of F){const ne=(re.vendorId||"").trim();if(!ne||re.type==="CREDITO")continue;const Ue=k(re);if(!we[ne]){const Ke=pe.find(et=>et.id===ne);we[ne]={vendorId:ne,name:(Ke==null?void 0:Ke.name)||re.userEmail||"(sin vendedor)",total:0}}we[ne].total=ha(we[ne].total+Ue)}return Object.values(we).filter(re=>re.total>0).sort((re,ne)=>ne.total-re.total)},[F,pe]),Ye=xo.useMemo(()=>{const we={};for(const re of F){const ne=(re.vendorId||"").trim();if(!ne||re.type!=="CREDITO")continue;const Ue=k(re);if(!we[ne]){const Ke=pe.find(et=>et.id===ne);we[ne]={vendorId:ne,name:(Ke==null?void 0:Ke.name)||re.userEmail||"(sin vendedor)",total:0}}we[ne].total=ha(we[ne].total+Ue)}return Object.values(we).filter(re=>re.total>0).sort((re,ne)=>ne.total-re.total)},[F,pe]),nt={};F.forEach(we=>{const re=we.productName||"(sin nombre)";nt[re]||(nt[re]={totalQuantity:0,totalAmount:0,totalCommission:0}),nt[re].totalQuantity=kg(nt[re].totalQuantity+(we.quantity||0)),nt[re].totalAmount=ha(nt[re].totalAmount+(we.amount||0)),nt[re].totalCommission=ha(nt[re].totalCommission+k(we))});const mt=Object.entries(nt).map(([we,re])=>({productName:we,totalQuantity:re.totalQuantity,totalAmount:re.totalAmount,totalCommission:re.totalCommission})),ct=async()=>{if(ce)try{const we=F.filter(_e=>_e.status==="FLOTANTE");if(we.length===0){d("No hay ventas flotantes para procesar en este perodo.");return}const re={totalCharged:ha(we.reduce((_e,be)=>_e+(be.amount||0),0)),totalSuggested:ha(we.reduce((_e,be)=>_e+(be.amountSuggested||0),0)),totalUnits:kg(we.reduce((_e,be)=>_e+(be.quantity||0),0)),totalCOGS:ha(we.reduce((_e,be)=>_e+Number(be.cogsAmount??0),0))},ne=ha(re.totalCharged-re.totalSuggested),Ue=ha(re.totalCharged-re.totalCOGS),Ke=we.reduce((_e,be)=>{const Qe=Number(be.quantity||0),$e=Number(be.amount||0),Je=Number(be.vendorCommissionAmount||0);return be.type==="CREDITO"?(_e.packsCredit+=Qe,_e.amountCredit+=$e,_e.comCredit+=Je):(_e.packsCash+=Qe,_e.amountCash+=$e,_e.comCash+=Je),_e},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),et={totalPacksCash:kg(Ke.packsCash),totalPacksCredit:kg(Ke.packsCredit),totalAmountCash:ha(Ke.amountCash),totalAmountCredit:ha(Ke.amountCredit),totalCommissionCash:ha(Ke.comCash),totalCommissionCredit:ha(Ke.comCredit)},ke=await on(ht(Fe,"daily_closures_candies"),{date:f,createdAt:Xt.now(),periodStart:m,periodEnd:g,totalCharged:re.totalCharged,totalSuggested:re.totalSuggested,totalDifference:ne,totalUnits:re.totalUnits,totalCOGS:re.totalCOGS,grossProfit:Ue,...et,products:we.map(_e=>({productName:_e.productName,quantity:_e.quantity,amount:_e.amount})),sales:we.map(_e=>({id:_e.id,productName:_e.productName,quantity:_e.quantity,amount:_e.amount,amountSuggested:_e.amountSuggested,userEmail:_e.userEmail,clientName:_e.clientName,amountReceived:_e.amountReceived,change:_e.change,status:_e.status,cogsAmount:_e.cogsAmount??0,avgUnitCost:_e.avgUnitCost??null,allocations:_e.allocations??[],date:_e.date,type:_e.type??"CONTADO",vendorId:_e.vendorId??"",vendorCommissionAmount:Number(_e.vendorCommissionAmount??0)||0,processedDate:f})),productSummary:Object.entries(we.reduce((_e,be)=>{const Qe=be.productName||"(sin nombre)";return _e[Qe]||(_e[Qe]={totalQuantity:0,totalAmount:0}),_e[Qe].totalQuantity=kg(_e[Qe].totalQuantity+(be.quantity||0)),_e[Qe].totalAmount=ha(_e[Qe].totalAmount+(be.amount||0)),_e},{})).map(([_e,be])=>({productName:_e,totalQuantity:be.totalQuantity,totalAmount:be.totalAmount}))}),he=M0(Fe);we.forEach(_e=>{he.update(Ht(Fe,"sales_candies",_e.id.split("#")[0]),{status:"PROCESADA",closureId:ke.id,closureDate:f,processedDate:f,processedAt:Xt.now()})}),await he.commit(),d(` Cierre guardado. Ventas procesadas: ${we.length}. (Proceso: ${f})`)}catch(we){console.error(we),d(" Error al guardar el cierre de dulces.")}},ft=async we=>{if(ce&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Hr(Ht(Fe,"sales_candies",we.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),d(" Venta revertida a FLOTANTE.")}catch(re){console.error(re),d(" No se pudo revertir la venta.")}},Ct=we=>{ce&&(I(we),C(we.quantity),S(we.amount),B(we.clientName),D(we.amountReceived),Ae(we.change))},At=async()=>{if(!(!w||!ce))try{await Hr(Ht(Fe,"sales_candies",w.id.split("#")[0]),{packagesTotal:T,amount:E,amountCharged:E,clientName:O,amountReceived:P,change:W}),I(null),d(" Venta de dulces actualizada.")}catch(we){console.error(we),d(" No se pudo actualizar la venta de dulces.")}},He=async we=>{if(ce&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:re}=await bLe(we.split("#")[0]);d(` Venta eliminada. Stock restaurado (unidades internas): ${Number(re).toFixed(2)}.`)}catch(re){console.error(re),d(" No se pudo eliminar la venta de dulces.")}},it=async()=>{if(ee.current){ee.current.classList.add("force-pdf-colors"),ee.current.classList.add("pdf-print-mode");try{const re=(await L0(ee.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ne=new gr;ne.addImage(re,"PNG",10,10,190,0),ne.save(`cierre_dulces_${m}_a_${g}_proc_${f}.pdf`)}finally{ee.current.classList.remove("pdf-print-mode"),ee.current.classList.remove("force-pdf-colors")}}};return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[l.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",f]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm",children:"Desde:"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:we=>p(we.target.value)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm",children:"Hasta:"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:we=>x(we.target.value)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:we=>h(we.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ce&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm",children:"Vendedor:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:we=>b(we.target.value),children:[l.jsx("option",{value:"ALL",children:"Todos"}),pe.map(we=>l.jsx("option",{value:we.id,children:we.name||we.id},we.id))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),l.jsx("div",{className:"text-2xl font-bold",children:V}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),l.jsx("div",{className:"text-2xl font-bold",children:M}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),l.jsx("div",{className:"text-2xl font-bold",children:L}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),l.jsx("div",{className:"text-2xl font-bold",children:q}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ao(je)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ao(ue)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),Pe.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.map(we=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:we.name}),l.jsxs("strong",{className:"ml-2",children:["C$",ao(we.total)]})]},we.vendorId))})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),Ye.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Ye.map(we=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:we.name}),l.jsxs("strong",{className:"ml-2",children:["C$",ao(we.total)]})]},we.vendorId))})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:ee,children:[l.jsx("div",{className:"pdf-desktop hidden md:block",children:l.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Tipo"}),l.jsx("th",{className:"border p-2",children:"Paquetes"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Comisin"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Fecha proceso"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[F.map(we=>{const re=k(we),ne=(we.processedDate||"").trim();return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${we.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})}),l.jsx("td",{className:"border p-1",children:we.productName}),l.jsx("td",{className:"border p-1",children:we.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"border p-1",children:lm(we.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",ao(we.amount)]}),l.jsx("td",{className:"border p-1",children:re>0?`C$${ao(re)}`:""}),l.jsx("td",{className:"border p-1",children:we.date}),l.jsx("td",{className:"border p-1",children:ne||""}),l.jsx("td",{className:"border p-1",children:we.userEmail}),l.jsx("td",{className:"border p-1",children:we.status==="FLOTANTE"?l.jsx("div",{className:"flex gap-2 justify-center",children:ce?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ct(we),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>He(we.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):we.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:ce?l.jsx("button",{onClick:()=>ft(we.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},we.id)}),F.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),l.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[F.map(we=>{const re=k(we),ne=(we.processedDate||"").trim();return l.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[l.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:we.productName}),l.jsxs("div",{className:"text-xs text-gray-500",children:[we.type==="CREDITO"?"Crdito":"Cash","  ",we.date]})]}),l.jsxs("div",{className:"text-right shrink-0 ml-3",children:[l.jsxs("div",{className:"font-bold",children:["C$",ao(we.amount)]}),l.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${we.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})]})]}),l.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Paquetes"}),l.jsx("strong",{children:lm(we.quantity)})]}),l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Comisin"}),l.jsx("strong",{children:re>0?`C$${ao(re)}`:""})]}),l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),l.jsx("strong",{children:ne||""})]}),l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Vendedor"}),l.jsx("strong",{className:"text-right break-all",children:we.userEmail})]}),l.jsx("div",{className:"pt-2",children:we.status==="FLOTANTE"?l.jsx("div",{className:"flex gap-2",children:ce?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ct(we),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>He(we.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):l.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):we.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2",children:ce?l.jsx("button",{onClick:()=>ft(we.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):l.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},we.id)}),F.length===0&&l.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[l.jsxs("div",{children:["Total paquetes crdito: ",l.jsx("strong",{children:lm(Q)})]}),l.jsxs("div",{children:["Total paquetes cash: ",l.jsx("strong",{children:lm(ye)})]}),l.jsxs("div",{children:["Total pendiente crdito:"," ",l.jsxs("strong",{children:["C$",ao(Y)]})]}),l.jsxs("div",{children:["Total cobrado cash: ",l.jsxs("strong",{children:["C$",ao(z)]})]}),l.jsxs("div",{children:["Total comisin: ",l.jsxs("strong",{children:["C$",ao(le)]})]})]}),(K>0||te!==Z)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:["Costo total (COGS): ",l.jsxs("strong",{children:["C$",ao(K)]})]}),l.jsxs("div",{children:["Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",ao(te)]})]}),l.jsxs("div",{children:["Total paquetes (visibles):"," ",l.jsx("strong",{children:lm(R)})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsx("div",{className:"pdf-desktop hidden md:block",children:l.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total paquetes"}),l.jsx("th",{className:"border p-2",children:"Total dinero"}),l.jsx("th",{className:"border p-2",children:"Comisin"})]})}),l.jsxs("tbody",{children:[mt.map(we=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:we.productName}),l.jsx("td",{className:"border p-1",children:lm(we.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",ao(we.totalAmount)]}),l.jsx("td",{className:"border p-1",children:we.totalCommission>0?`C$${ao(we.totalCommission)}`:""})]},we.productName)),mt.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),l.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[mt.map(we=>l.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[l.jsx("div",{className:"font-semibold",children:we.productName}),l.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),l.jsx("strong",{children:lm(we.totalQuantity)})]}),l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Total dinero"}),l.jsxs("strong",{children:["C$",ao(we.totalAmount)]})]}),l.jsxs("div",{className:"flex justify-between gap-3",children:[l.jsx("span",{className:"text-gray-600",children:"Comisin"}),l.jsx("strong",{children:we.totalCommission>0?`C$${ao(we.totalCommission)}`:""})]})]})]},we.productName)),mt.length===0&&l.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[ce&&l.jsx("button",{onClick:ct,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),l.jsx("button",{onClick:it,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&l.jsx("p",{className:"mt-2 text-sm",children:u}),w&&ce&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[w.productName,"  ",w.userEmail]}),l.jsx("label",{className:"text-sm",children:"Paquetes"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:T,onChange:we=>C(parseFloat(we.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:we=>S(parseFloat(we.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:O,onChange:we=>B(we.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:P,onChange:we=>D(parseFloat(we.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:W,onChange:we=>Ae(we.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:At,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const FA=t=>`C$ ${(Number(t)||0).toFixed(2)}`,hc=t=>Math.round((Number(t)||0)*100)/100;function eUe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function tUe(t){return t.toISOString().slice(0,10)}function rUe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function nUe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return tUe(r)}function aUe(){const[t,e]=v.useState(rUe()),[r,n]=v.useState(nUe()),[a,s]=v.useState(!1),[i,o]=v.useState(""),[c,u]=v.useState({}),[d,A]=v.useState({}),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,I]=v.useState(null),[T,C]=v.useState(null),E=v.useMemo(()=>w&&h.find(ee=>ee.vendorId===w)||null,[w,h]),S=v.useMemo(()=>{var ee;return!w||!T?[]:((ee=g[w])==null?void 0:ee[T])||[]},[w,T,g]),O=v.useMemo(()=>hc(h.reduce((ee,ce)=>ee+(ce.totalSoldMoney||0),0)),[h]),B=v.useMemo(()=>hc(h.reduce((ee,ce)=>ee+(ce.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const ee=await jt(ht(Fe,"sellers_candies")),ce={};ee.forEach(pe=>{const Se=pe.data(),k=Se.branch||"Rivas";let F="RIVAS";k==="San Jorge"?F="SAN_JORGE":k==="Isla Ometepe"&&(F="ISLA"),ce[pe.id]={id:pe.id,name:Se.name??"(sin nombre)",branch:F,branchLabel:k,commissionPercent:Number(Se.commissionPercent??0)}});const de=await jt(ht(Fe,"products_candies")),X={};de.forEach(pe=>{const Se=pe.data();X[pe.id]={id:pe.id,name:Se.name??"(sin nombre)"}}),u(ce),A(X)}catch(ee){console.error(ee),o(" Error cargando catlogos de vendedores/productos.")}})()},[]);const P=async()=>{if(!t||!r){o("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){o("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),o("");try{const ee={},ce={},de=Kt(ht(Fe,"inventory_candies_sellers"),Zt("date",">=",t),Zt("date","<=",r)),X=await jt(de),pe={},Se={},k={},F={};X.forEach(je=>{var Je,st;const ue=je.data(),Pe=ue.sellerId||"";if(!Pe)return;const Ye=ue.productId||"",nt=ue.productName||((Je=d[Ye])==null?void 0:Je.name)||"(sin nombre)",mt=Math.max(1,Math.floor(Number(ue.unitsPerPackage||1))),ct=Number(ue.totalUnits??0),ft=Number(ue.packages??0),Ct=Number(ue.remainingUnits??ue.remaining??0),At=Number(ue.remainingPackages??0),He=ft>0?ft:ct>0?Math.floor(ct/mt):0,it=At>0?At:Ct>0?Math.floor(Ct/mt):0;pe[Pe]=(pe[Pe]||0)+He,Se[Pe]=(Se[Pe]||0)+it;const we=ue.orderId||ue.vendorOrderId||ue.orderNumber||ue.order||je.id;k[Pe]||(k[Pe]=new Set),k[Pe].add(we);const re=((st=c[Pe])==null?void 0:st.name)||ue.sellerName||"(sin vendedor)",ne=String(ue.date||""),Ue=Number(ue.totalVendor??0),Ke=Number(ue.gainVendor??0),et=ft>0?ft:ct>0?Math.floor(ct/mt):0,ke=et>0?Ue/et:0,he=et>0?Ke/et:0,_e=hc(He*ke),be=hc(He*he),Qe=hc(it*ke),$e=hc(it*he);F[Pe]||(F[Pe]={ordered:[],remaining:[]}),He>0&&F[Pe].ordered.push({date:ne,vendorName:re,productName:nt,packages:He,totalMoney:_e,vendorCommission:be}),it>0&&F[Pe].remaining.push({date:ne,vendorName:re,productName:nt,packages:it,totalMoney:Qe,vendorCommission:$e})});const V={};Object.keys(k).forEach(je=>{V[je]=k[je].size});const M=Kt(ht(Fe,"sales_candies"),Zt("date",">=",t),Zt("date","<=",r)),L=await jt(M),q={},R={},K={},Z={},te={},Q={};L.forEach(je=>{const ue=je.data(),Pe=ue.date||"",Ye=ue.vendorId||ue.sellerId||"";if(!Ye)return;const nt=c[Ye],mt=ue.vendorName||(nt==null?void 0:nt.name)||"(sin vendedor)",ct=Number(ue.vendorCommissionPercent??(nt==null?void 0:nt.commissionPercent)??0)||0,ft=Array.isArray(ue.items)?ue.items:[];if(!ft.length)return;const Ct=String(ue.type||"").toUpperCase()==="CREDITO";te[Ye]||(te[Ye]={sold:[],credit:[]}),ft.forEach(At=>{var _e;const He=At.productName||((_e=d[At.productId||""])==null?void 0:_e.name)||"(sin nombre)",it=At.packages??At.qty??At.quantity??0,we=Number(it||0);if(we<=0)return;const re=Number(At.unitPricePackage??At.unitPrice??0)||0,ne=Math.max(0,Number(At.discount||0)),Ue=we*re,Ke=hc(Math.max(0,Ue-ne));if(Ke<=0)return;console.log("DBG",{isCredit:Ct,vendorId:Ye,commissionPercent:ct,lineFinal:Ke,storedItemCommission:Number(At.vendorCommissionAmount??0)});let et=0;const ke=Number(At.vendorCommissionAmount??0);ke?et=hc(ke):ct>0&&(et=hc(Ke*ct/100)),Ct?(R[Ye]=(R[Ye]||0)+we,Z[Ye]=(Z[Ye]||0)+Ke):(q[Ye]=(q[Ye]||0)+we,K[Ye]=(K[Ye]||0)+Ke),Ct?ce[Ye]=(ce[Ye]||0)+et:ee[Ye]=(ee[Ye]||0)+et,Ct?te[Ye].credit.push({date:Pe,vendorName:mt,productName:He,packages:we,totalMoney:Ke,vendorCommission:0}):te[Ye].sold.push({date:Pe,vendorName:mt,productName:He,packages:we,totalMoney:Ke,vendorCommission:et});const he=He;Q[he]||(Q[he]={productName:He,packages:0,totalMoney:0}),Q[he].packages+=we,Q[he].totalMoney+=Ke})});const ye=new Set([...Object.keys(pe),...Object.keys(Se),...Object.keys(q),...Object.keys(R)]),Y=[],z={};ye.forEach(je=>{var it,we,re,ne;const ue=c[je],Pe=(ue==null?void 0:ue.name)||"(sin vendedor)",Ye=ue?ue.branchLabel||eUe(ue.branch):"",nt=pe[je]||0,mt=Se[je]||0,ct=q[je]||0,ft=R[je]||0,Ct=hc(K[je]||0),At=hc(Z[je]||0),He=V[je]||0;Y.push({vendorId:je,vendorName:Pe,branchLabel:Ye,orderedPackages:nt,remainingPackages:mt,soldPackages:ct,creditPackages:ft,totalSoldMoney:Ct,totalCreditMoney:At,ordersCreated:He,commissionCash:hc(ee[je]||0),commissionCredit:0}),z[je]={ordered:(((it=F[je])==null?void 0:it.ordered)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),remaining:(((we=F[je])==null?void 0:we.remaining)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),sold:(((re=te[je])==null?void 0:re.sold)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date)),credit:(((ne=te[je])==null?void 0:ne.credit)||[]).sort((Ue,Ke)=>Ue.date.localeCompare(Ke.date))}}),Y.sort((je,ue)=>je.vendorName.localeCompare(ue.vendorName,"es")),f(Y),x(z);const le=Object.values(Q).map(je=>({productName:je.productName,packages:je.packages,totalMoney:hc(je.totalMoney)})).sort((je,ue)=>ue.packages-je.packages).slice(0,10);p(le),Y.length||o("Sin datos para el rango seleccionado.")}catch(ee){console.error(ee),o(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&P()},[c]);const D=(ee,ce)=>{I(ee),C(ce),b(!0)},W=()=>{b(!1),I(null),C(null)},Ae=()=>{if(!h.length){o("No hay datos para exportar.");return}const ee=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],ce=h.map(k=>[k.vendorName,k.branchLabel,k.orderedPackages.toString(),k.remainingPackages.toString(),k.soldPackages.toString(),k.creditPackages.toString(),k.totalSoldMoney.toFixed(2),k.commissionCash.toFixed(2),k.totalCreditMoney.toFixed(2),k.commissionCredit.toFixed(2),k.ordersCreated.toString()]),de=[ee,...ce].map(k=>k.map(F=>`"${String(F).replace(/"/g,'""')}"`).join(",")).join(`
`),X=new Blob([de],{type:"text/csv;charset=utf-8;"}),pe=URL.createObjectURL(X),Se=document.createElement("a");Se.href=pe,Se.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Se.click(),URL.revokeObjectURL(pe)};return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:ee=>e(ee.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:ee=>n(ee.target.value)})]}),l.jsx("div",{className:"flex items-end",children:l.jsx("button",{type:"button",onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),l.jsx("div",{className:"flex items-end",children:l.jsx("button",{type:"button",onClick:Ae,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[l.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:FA(O)})]}),l.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),l.jsx("div",{className:"text-xl font-semibold",children:FA(B)})]}),l.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),l.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),l.jsx("div",{className:"overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Sucursal"}),l.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),l.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),l.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),l.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),l.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),l.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),l.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),l.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),l.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),l.jsxs("tbody",{children:[h.map(ee=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:ee.vendorName}),l.jsx("td",{className:"border p-1",children:ee.branchLabel}),l.jsx("td",{className:"border p-1",children:l.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(ee.vendorId,"ordered"),children:ee.orderedPackages})}),l.jsx("td",{className:"border p-1",children:l.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(ee.vendorId,"remaining"),children:ee.remainingPackages})}),l.jsx("td",{className:"border p-1",children:l.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(ee.vendorId,"sold"),children:ee.soldPackages})}),l.jsx("td",{className:"border p-1",children:l.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(ee.vendorId,"credit"),children:ee.creditPackages})}),l.jsx("td",{className:"border p-1",children:FA(ee.totalSoldMoney)}),l.jsx("td",{className:"border p-1",children:FA(ee.commissionCash)}),l.jsx("td",{className:"border p-1",children:FA(ee.totalCreditMoney)}),l.jsx("td",{className:"border p-1",children:FA(ee.commissionCredit)}),l.jsx("td",{className:"border p-1",children:ee.ordersCreated})]},ee.vendorId)),h.length===0&&!a&&l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"#"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),l.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),l.jsxs("tbody",{children:[m.map((ee,ce)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:ce+1}),l.jsx("td",{className:"border p-1",children:ee.productName}),l.jsx("td",{className:"border p-1",children:ee.packages}),l.jsx("td",{className:"border p-1",children:FA(ee.totalMoney)})]},ee.productName)),m.length===0&&!a&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&l.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&T&&w&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",T==="ordered"?"Paquetes ordenados":T==="remaining"?"Paquetes restantes":T==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[E==null?void 0:E.vendorName,"  ",E==null?void 0:E.branchLabel]})]}),l.jsx("button",{onClick:W,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4",children:l.jsxs("table",{className:"min-w-full border text-xs",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Paquetes"}),l.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),l.jsxs("tbody",{children:[S.map((ee,ce)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:ee.date}),l.jsx("td",{className:"border p-1",children:ee.productName}),l.jsx("td",{className:"border p-1",children:ee.packages}),l.jsx("td",{className:"border p-1",children:FA(ee.totalMoney)}),l.jsx("td",{className:"border p-1",children:ee.vendorName}),l.jsx("td",{className:"border p-1",children:FA(ee.vendorCommission)})]},ce)),S.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Lo=t=>`C$${Number(t||0).toFixed(2)}`,x_=t=>Number(t||0).toFixed(3),aT=()=>{const t=new Date;return dr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},v_=()=>dr(new Date,"yyyy-MM-dd");function sUe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const be={};return a.forEach(Qe=>{Qe.email&&(be[Qe.email.trim().toLowerCase()]=Qe)}),be},[a]);v.useEffect(()=>{(async()=>{try{const be=Kt(ht(Fe,"sellers_candies"),Gr("name","asc")),Qe=await jt(be),$e=[];Qe.forEach(Je=>{const st=Je.data();$e.push({id:Je.id,name:st.name||"",email:st.email||"",commissionPercent:Number(st.commissionPercent||0)})}),s($e)}catch(be){console.error(be)}})()},[]);const[o,c]=v.useState(aT()),[u,d]=v.useState(v_()),[A,h]=v.useState(""),[f,m]=v.useState(""),p=v.useMemo(()=>{const be=new Map;return n.forEach(Qe=>{const $e=Qe.productId||Qe.productName;be.set($e,{key:$e,name:Qe.productName})}),Array.from(be.values()).sort((Qe,$e)=>Qe.name.localeCompare($e.name))},[n]),g=v.useMemo(()=>{const be=new Map;return n.forEach(Qe=>{const $e=(Qe.sellerEmail||"").trim().toLowerCase();if(!$e)return;const Je=i[$e],st=(Je==null?void 0:Je.name)||Qe.vendorName||$e;be.set($e,{email:$e,label:st})}),Array.from(be.values()).sort((Qe,$e)=>Qe.label.localeCompare($e.label))},[n,i]),x=v.useMemo(()=>n.filter(be=>!(o&&be.date<o||u&&be.date>u||A&&(be.productId||be.productName)!==A||f&&(be.sellerEmail||"").trim().toLowerCase()!==f)),[n,o,u,A,f]),[y,b]=v.useState(v_()),[w,I]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[T,C]=v.useState(""),[E,S]=v.useState("0"),[O,B]=v.useState(()=>x.map(be=>be.id));v.useEffect(()=>{B(be=>be.filter(Qe=>x.some($e=>$e.id===Qe)))},[x]);const[P,D]=v.useState([]),[W,Ae]=v.useState([]),[ee,ce]=v.useState(!1),[de,X]=v.useState(aT()),[pe,Se]=v.useState(v_());v.useEffect(()=>{(async()=>{try{ce(!0);const be=Kt(ht(Fe,"expensesCandies"),Gr("date","desc")),Qe=await jt(be),$e=[];Qe.forEach(Je=>{const st=Je.data();$e.push({id:Je.id,date:st.date,description:st.description,amount:Number(st.amount||0)})}),D($e)}catch(be){console.error(be)}finally{ce(!1)}})()},[]);const k=v.useMemo(()=>P.filter(be=>!(!be.date||de&&be.date<de||pe&&be.date>pe)),[P,de,pe]),[F,V]=v.useState([]),[M,L]=v.useState(!1),[q,R]=v.useState(""),[K,Z]=v.useState("DEBITO"),[te,Q]=v.useState(""),ye=()=>{const be=Number(te);!q.trim()||!isFinite(be)||be<=0||(V(Qe=>[...Qe,{id:`${Date.now()}_${Qe.length+1}`,description:q.trim(),type:K,amount:Number(be.toFixed(2))}]),R(""),Q(""))},[Y,z]=v.useState(null),[le,je]=v.useState(""),[ue,Pe]=v.useState("DEBITO"),[Ye,nt]=v.useState(""),mt=be=>{z(be.id),je(be.description),Pe(be.type),nt(be.amount.toFixed(2))},ct=()=>{z(null),je(""),Pe("DEBITO"),nt("")},ft=()=>{if(!Y)return;const be=Number(Ye);!isFinite(be)||be<=0||(V(Qe=>Qe.map($e=>$e.id===Y?{...$e,description:le.trim(),type:ue,amount:Number(be.toFixed(2))}:$e)),ct())},Ct=be=>{V(Qe=>Qe.filter($e=>$e.id!==be)),Y===be&&ct()},At=(be,Qe)=>{B($e=>Qe?[...new Set([...$e,be])]:$e.filter(Je=>Je!==be))},He=be=>{B(be?x.map(Qe=>Qe.id):[])},it=(be,Qe)=>{Ae($e=>Qe?[...new Set([...$e,be])]:$e.filter(Je=>Je!==be))},we=v.useMemo(()=>x.filter(be=>O.includes(be.id)),[x,O]),re=v.useMemo(()=>F.filter(be=>be.type==="DEBITO").reduce((be,Qe)=>be+Qe.amount,0),[F]),ne=v.useMemo(()=>F.filter(be=>be.type==="CREDITO").reduce((be,Qe)=>be+Qe.amount,0),[F]),Ue=v.useMemo(()=>{let be=0,Qe=0,$e=0,Je=0;for(const dt of we){const gt=Number(dt.packages||0),Ne=Number(dt.cogsAmount||0),at=Number(dt.amount||0);be+=gt,Qe+=Ne,$e+=at;const wt=(dt.sellerEmail||"").trim().toLowerCase(),kt=i[wt],Lt=Number((kt==null?void 0:kt.commissionPercent)||0),qt=at*Lt/100;Je+=qt}const st=k.filter(dt=>W.includes(dt.id)).reduce((dt,gt)=>dt+Number(gt.amount||0),0),yt=$e-Qe,Dt=$e-st-re+ne-Je,nr=Number(E||0),Ce=$e*nr/100;return{totalPackages:Number(x_(be)),totalProvider:Number(Qe.toFixed(2)),totalSale:Number($e.toFixed(2)),totalGastos:Number(st.toFixed(2)),debits:Number(re.toFixed(2)),credits:Number(ne.toFixed(2)),grossProfit:Number(yt.toFixed(2)),finalAmount:Number(Dt.toFixed(2)),totalCommissionVendors:Number(Je.toFixed(2)),branchProfit:Number(Ce.toFixed(2)),branchFactor:nr}},[we,k,W,re,ne,i,E]),[Ke,et]=v.useState(!1),[ke,he]=v.useState(""),_e=async()=>{if(he(""),we.length===0){he("Selecciona al menos 1 transaccin procesada.");return}try{et(!0);const be={number:w.trim(),date:y,description:T.trim(),status:"PENDIENTE",createdAt:Xt.now(),totalPackages:Ue.totalPackages,totalProvider:Ue.totalProvider,totalSale:Ue.totalSale,totalExpenses:Ue.totalGastos,totalDebits:Ue.debits,totalCredits:Ue.credits,grossProfit:Ue.grossProfit,totalCommissionVendors:Ue.totalCommissionVendors,branchFactorPercent:Ue.branchFactor,branchProfit:Ue.branchProfit,finalAmount:Ue.finalAmount,transactions:we.map(Qe=>{const $e=Number(Qe.packages||0)||1,Je=Number(Qe.cogsAmount||0),st=Number(Qe.amount||0),yt=Je/$e,Dt=st/$e,nr=(Qe.sellerEmail||"").trim().toLowerCase(),Ce=i[nr],dt=Number((Ce==null?void 0:Ce.commissionPercent)||0),gt=st*dt/100;return{id:Qe.id,date:Qe.date,productId:Qe.productId||null,productName:Qe.productName,vendorName:Qe.vendorName,sellerEmail:Qe.sellerEmail||null,packages:Number(x_(Qe.packages)),providerPricePack:Number(yt.toFixed(4)),salePricePack:Number(Dt.toFixed(4)),totalProvider:Number(Je.toFixed(2)),totalSale:Number(st.toFixed(2)),commissionPercent:dt,commissionAmount:Number(gt.toFixed(2))}}),expenses:k.filter(Qe=>W.includes(Qe.id)).map(Qe=>({id:Qe.id,date:Qe.date||null,description:Qe.description||"",amount:Number(Number(Qe.amount||0).toFixed(2))})),adjustments:F.map(Qe=>({id:Qe.id,description:Qe.description,type:Qe.type,amount:Number(Qe.amount.toFixed(2))}))};await on(ht(Fe,"invoicesCandies"),be),he(" Factura de dulces creada."),r()}catch(be){console.error(be),he(` Error al crear factura: ${(be==null?void 0:be.message)||"desconocido"}`)}finally{et(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[l.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),l.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:be=>b(be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:be=>I(be.target.value),placeholder:"FAC-CANDY-001"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:be=>S(be.target.value),placeholder:"Ej: 30"}),l.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:T,onChange:be=>C(be.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:l.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:be=>c(be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:be=>d(be.target.value)})]}),l.jsxs("div",{className:"min-w-[180px]",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:be=>h(be.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),p.map(be=>l.jsx("option",{value:be.key,children:be.name},be.key))]})]}),l.jsxs("div",{className:"min-w-[180px]",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:be=>m(be.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),g.map(be=>l.jsx("option",{value:be.email,children:be.label},be.email))]})]}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(aT()),d(v_()),h(""),m("")},children:"Quitar filtro"})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:x.length>0&&O.length===x.length,onChange:be=>He(be.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):l.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Vendedor"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Paquetes"}),l.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total proveedor"}),l.jsx("th",{className:"p-2 border",children:"Total venta"}),l.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),l.jsx("tbody",{children:x.map(be=>{const Qe=O.includes(be.id),$e=Number(be.packages||0)||1,Je=Number(be.cogsAmount||0),st=Number(be.amount||0),yt=Je/$e,Dt=st/$e,nr=(be.sellerEmail||"").trim().toLowerCase(),Ce=i[nr],dt=Number((Ce==null?void 0:Ce.commissionPercent)||0),gt=st*dt/100;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:Qe,onChange:Ne=>At(be.id,Ne.target.checked)})}),l.jsx("td",{className:"p-2 border",children:be.date}),l.jsx("td",{className:"p-2 border",children:(Ce==null?void 0:Ce.name)||be.vendorName}),l.jsx("td",{className:"p-2 border",children:be.productName}),l.jsx("td",{className:"p-2 border",children:x_(be.packages)}),l.jsx("td",{className:"p-2 border",children:Lo(yt)}),l.jsx("td",{className:"p-2 border",children:Lo(Dt)}),l.jsx("td",{className:"p-2 border",children:Lo(Je)}),l.jsx("td",{className:"p-2 border",children:Lo(st)}),l.jsx("td",{className:"p-2 border",children:dt>0?`${Lo(gt)} (${dt.toFixed(2)}%)`:""})]},be.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),ee&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),l.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:de,onChange:be=>X(be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:pe,onChange:be=>Se(be.target.value)})]})]})]}),k.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:k.map(be=>{const Qe=W.includes(be.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:Qe,onChange:$e=>it(be.id,$e.target.checked)})}),l.jsx("td",{className:"p-2 border",children:be.date||""}),l.jsx("td",{className:"p-2 border",children:be.description||""}),l.jsx("td",{className:"p-2 border",children:Lo(Number(be.amount||0))})]},be.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>L(!0),children:"Crear Cargo"})]}),F.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):l.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:F.map(be=>{const Qe=Y===be.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Qe?l.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:le,onChange:$e=>je($e.target.value)}):l.jsx("span",{title:be.description,children:be.description.length>60?`${be.description.slice(0,60)}`:be.description})}),l.jsx("td",{className:"p-2 border",children:Qe?l.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ue,onChange:$e=>Pe($e.target.value),children:[l.jsx("option",{value:"DEBITO",children:"Dbito"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${be.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:be.type})}),l.jsx("td",{className:"p-2 border",children:Qe?l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Ye,onChange:$e=>nt($e.target.value)}):Lo(be.amount)}),l.jsx("td",{className:"p-2 border",children:Qe?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:ft,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:ct,children:"Cancelar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ct(be.id),children:"Eliminar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>mt(be),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ct(be.id),children:"Eliminar"})]})})]},be.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{children:["Total paquetes: ",l.jsx("strong",{children:x_(Ue.totalPackages)})]})}),l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsxs("div",{children:["Total proveedor (costo):"," ",l.jsx("strong",{children:Lo(Ue.totalProvider)})]}),l.jsxs("div",{children:["Total venta: ",l.jsx("strong",{children:Lo(Ue.totalSale)})]}),l.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",l.jsx("strong",{children:Lo(Ue.grossProfit)})]})]}),l.jsxs("div",{className:"space-y-1 text-right",children:[l.jsxs("div",{children:["Gastos: ",l.jsx("strong",{children:Lo(Ue.totalGastos)})]}),l.jsxs("div",{children:["Dbitos: ",l.jsx("strong",{children:Lo(Ue.debits)})]}),l.jsxs("div",{children:["Crditos: ",l.jsx("strong",{children:Lo(Ue.credits)})]}),l.jsxs("div",{children:["Comisin total vendedores:"," ",l.jsx("strong",{children:Lo(Ue.totalCommissionVendors)})]}),l.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",l.jsx("strong",{children:Lo(Ue.branchProfit)})]})]}),l.jsx("div",{className:"md:col-span-3 mt-3",children:l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",l.jsx("span",{className:"text-blue-700",children:Lo(Ue.finalAmount)})]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:Ke,onClick:_e,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ke?"Creando":"Crear factura"}),l.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),ke&&l.jsx("span",{className:"text-sm ml-2",children:ke})]}),Ke&&l.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[l.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),M&&l.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),l.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>L(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),l.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:q,onChange:be=>R(be.target.value),placeholder:"Detalle del cargo"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),l.jsxs("select",{className:"w-full border rounded px-2 py-1",value:K,onChange:be=>Z(be.target.value),children:[l.jsx("option",{value:"DEBITO",children:"Dbito"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:te,onChange:be=>Q(be.target.value),placeholder:"0.00"})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ye,children:"Agregar"})})]})]})})]})}const zn=t=>`C$ ${Number(t??0).toFixed(2)}`,y_=t=>Number(t??0).toFixed(3);function sT(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],o=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=o.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=o.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,f=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((f*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-A+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:A,credits:h,grossProfit:f,branchProfit:p,finalAmount:g}}function DH(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function iUe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[o,c]=v.useState(!1),u=async()=>{n(!0);const f=Kt(ht(Fe,"invoicesCandies"),Gr("date","desc")),m=await jt(f),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async f=>{const m=f.status==="PAGADA"?"PENDIENTE":"PAGADA";await Hr(Ht(Fe,"invoicesCandies",f.id),{status:m}),e(p=>p.map(g=>g.id===f.id?{...g,status:m}:g)),(a==null?void 0:a.id)===f.id&&s({...f,status:m})},A=async f=>{if(window.confirm(`Eliminar factura del ${f.date}?`))try{await _n(Ht(Fe,"invoicesCandies",f.id)),e(m=>m.filter(p=>p.id!==f.id)),(a==null?void 0:a.id)===f.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const f=i.current,m=await L0(f,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(I=>{const T=b.defaultView.getComputedStyle(I);T.boxShadow&&T.boxShadow!=="none"&&(I.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new gr("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),l.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),o&&l.jsx(sUe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(f=>{const m=sT(f),p=DH(f);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.number||""}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.commissionTotal)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:y_(m.totalPackages)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.totalSale)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.expenses)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.debits)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.credits)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(m.finalAmount)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${f.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:f.status})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(f),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(f),children:f.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(f),children:"Eliminar"})]})})]},f.id)})})]})}),a&&l.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),l.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const f=sT(a),m=DH(a);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",y_(f.totalPackages)]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",zn(f.totalProvider)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",zn(f.totalSale)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",zn(f.grossProfit)]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",zn(f.commissionTotal)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",zn(f.expenses)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",zn(f.debits)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",zn(f.credits)]})]})]})})(),l.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),l.jsx("div",{className:"overflow-x-auto mb-4",children:l.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),l.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((f,m)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.vendorName}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.productName}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:y_(f.packages)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.providerPricePack)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.salePricePack)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.totalProvider)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.totalSale)}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[zn(f.commissionAmount||0),f.commissionPercent?` (${f.commissionPercent.toFixed(2)}%)`:""]})]},m)):l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsx("div",{className:"overflow-x-auto mb-4",children:l.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),l.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((f,m)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date||""}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.description||""}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.amount)})]},m)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),l.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),l.jsx("div",{className:"overflow-x-auto mb-4",children:l.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),l.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((f,m)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.description}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${f.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:f.type})}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:zn(f.amount)}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const f=sT(a);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{children:["Total paquetes: ",l.jsx("strong",{children:y_(f.totalPackages)})]}),l.jsxs("div",{children:["Total proveedor: ",l.jsx("strong",{children:zn(f.totalProvider)})]})]}),l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsxs("div",{children:["Sub total ventas: ",l.jsx("strong",{children:zn(f.totalSale)})]}),l.jsxs("div",{children:["Ganancia bruta: ",l.jsx("strong",{children:zn(f.grossProfit)})]}),l.jsxs("div",{children:["Ganancia sucursal: ",l.jsx("strong",{children:zn(f.branchProfit)})]})]}),l.jsxs("div",{className:"space-y-1 text-right",children:[l.jsxs("div",{children:["Comisin vendedores:"," ",l.jsx("strong",{children:zn(f.commissionTotal)})]}),l.jsxs("div",{children:["Gastos: ",l.jsx("strong",{children:zn(f.expenses)})]}),l.jsxs("div",{children:["Dbitos: ",l.jsx("strong",{children:zn(f.debits)})]}),l.jsxs("div",{children:["Crditos: ",l.jsx("strong",{children:zn(f.credits)})]})]}),l.jsx("div",{className:"md:col-span-3 mt-3",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[l.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),l.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:zn(f.finalAmount)})]})})]})})()]})]})}const Ka=t=>Math.round((Number(t)||0)*100)/100,xh=t=>Math.round((Number(t)||0)*1e3)/1e3,ci=t=>Number(t??0).toFixed(2),OA=t=>Number(t??0).toFixed(3),oUe=(t,e)=>{var h,f;const r=t.date??((h=t.timestamp)!=null&&h.toDate?dr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,o=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&o>0&&Number(x||0)>0&&(y=Ka(c*Number(x||0)/o)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Ka(x),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:y}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,A=Ka(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:((f=String(t))==null?void 0:f.productName)??"(sin nombre)",quantity:u,amount:Ka(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:A}]};function lUe({role:t}){const e=!t||t==="admin",r="daily_closures_candies",n="sales_candies",a="sellers_candies",[s,i]=v.useState(dr(zJ(new Date),"yyyy-MM-dd")),[o,c]=v.useState(dr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(!0),[A,h]=v.useState([]),[f,m]=v.useState(null),[p,g]=v.useState(""),[x,y]=v.useState([]),[b,w]=v.useState("ALL"),[I,T]=v.useState({}),C=v.useRef(null);if(!e)return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),l.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const E=async()=>{try{const F=await jt(ht(Fe,a)),V=[];F.forEach(M=>{const L=M.data();V.push({id:M.id,name:L.name||"",commissionPercent:Number(L.commissionPercent||0)})}),y(V)}catch(F){console.error("Error cargando sellers_candies",F)}},S=async()=>{const F=performance.now();try{d(!0);const V=Kt(ht(Fe,r),Zt("date",">=",s),Zt("date","<=",o)),M=await jt(V),L=performance.now();console.log(" getDocs ms:",(L-F).toFixed(1),"docs:",M.size);const q=[];M.forEach(te=>q.push({id:te.id,...te.data()}));const R=performance.now();console.log(" parse+set ms:",(R-L).toFixed(1),"rows:",q.length),q.sort((te,Q)=>te.date<Q.date?1:te.date>Q.date?-1:0),h(q),m(null);const K=new Set;q.forEach(te=>{(te.sales||[]).forEach(Q=>{const ye=String((Q==null?void 0:Q.id)??"").split("#")[0].trim();ye&&K.add(ye)})});const Z=Array.from(K).filter(te=>!I[te]);if(Z.length>0){const te={};for(const Q of Z)try{const ye=await So(Ht(Fe,n,Q));if(ye.exists()){const Y=ye.data();te[Q]=oUe(Y,Q)}else te[Q]=[]}catch(ye){console.error("Error leyendo sale",Q,ye),te[Q]=[]}T(Q=>({...Q,...te}))}}catch(V){console.error(V),g(" Error cargando liquidaciones.")}finally{d(!1)}};v.useEffect(()=>{E()},[]),v.useEffect(()=>{S()},[]);const O=async F=>{F.preventDefault(),await S()},B=v.useMemo(()=>{const F={};return x.forEach(V=>F[V.id]=V.name||V.id),F},[x]),P=F=>{const V=[];return(F.sales||[]).forEach(M=>{const L=String((M==null?void 0:M.id)??"").trim();if(!L)return;const q=L.split("#")[0],K=(I[q]||[]).find(Z=>Z.id===L);K?V.push(K):V.push({id:L,productName:String((M==null?void 0:M.productName)??"(sin nombre)"),quantity:Number((M==null?void 0:M.quantity)??0),amount:Ka(Number((M==null?void 0:M.amount)??0)),date:String((M==null?void 0:M.date)??""),type:"CONTADO",vendorId:"",userEmail:String((M==null?void 0:M.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),V},D=F=>b==="ALL"?F:F.filter(V=>(V.vendorId||"")===b),W=v.useMemo(()=>A.map(F=>{const V=D(P(F));let M=0,L=0,q=0,R=0,K=0,Z=0;for(const te of V){const Q=Number(te.quantity||0),ye=Number(te.amount||0),Y=Number(te.vendorCommissionAmount||0);te.type==="CREDITO"?(L+=Q,R+=ye,Z+=Y):(M+=Q,q+=ye,K+=Y)}return{...F,_sales:V,_packsCash:xh(M),_packsCredit:xh(L),_amountCash:Ka(q),_amountCredit:Ka(R),_comCash:Ka(K),_comCredit:Ka(Z)}}),[A,I,b]),Ae=v.useMemo(()=>{let F=0,V=0,M=0,L=0,q=0,R=0;for(const K of W)F+=Number(K._packsCash||0),V+=Number(K._packsCredit||0),M+=Number(K._amountCash||0),L+=Number(K._amountCredit||0),q+=Number(K._comCash||0),R+=Number(K._comCredit||0);return{packsCash:xh(F),packsCredit:xh(V),totalSales:Ka(M+L),amountCash:Ka(M),amountCredit:Ka(L),comCash:Ka(q),comCredit:Ka(R)}},[W]),ee=v.useMemo(()=>{const F={},V={};for(const M of W){const L=M._sales||[];for(const q of L){const R=(q.vendorId||"").trim();if(!R)continue;const K=B[R]||q.userEmail||R,Z=Ka(Number(q.vendorCommissionAmount||0));q.type==="CREDITO"?(V[R]||(V[R]={vendorId:R,name:K,total:0}),V[R].total=Ka(V[R].total+Z)):(F[R]||(F[R]={vendorId:R,name:K,total:0}),F[R].total=Ka(F[R].total+Z))}}return{cashRows:Object.values(F).filter(M=>M.total>0).sort((M,L)=>L.total-M.total),creditRows:Object.values(V).filter(M=>M.total>0).sort((M,L)=>L.total-M.total)}},[W,B]),ce=v.useMemo(()=>x.map(F=>({id:F.id,label:F.name||F.id})).sort((F,V)=>F.label.localeCompare(V.label)),[x]),de=v.useMemo(()=>f&&W.find(F=>F.id===f.id)||null,[f,W]),X=v.useMemo(()=>de?de._sales||[]:[],[de]),pe=v.useMemo(()=>{let F=0,V=0,M=0,L=0;for(const q of X)q.type==="CREDITO"?(V+=Number(q.quantity||0),L+=Number(q.amount||0)):(F+=Number(q.quantity||0),M+=Number(q.amount||0));return{packsCash:xh(F),packsCredit:xh(V),amountCash:Ka(M),amountCredit:Ka(L)}},[X]),Se=v.useMemo(()=>{const F={};for(const V of X){const M=V.productName||"(sin nombre)";F[M]||(F[M]={productName:M,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const L=Number(V.quantity||0),q=Number(V.amount||0),R=Number(V.vendorCommissionAmount||0);V.type==="CREDITO"?(F[M].packsCredit=xh(F[M].packsCredit+L),F[M].amountCredit=Ka(F[M].amountCredit+q),F[M].comCredit=Ka(F[M].comCredit+R)):(F[M].packsCash=xh(F[M].packsCash+L),F[M].amountCash=Ka(F[M].amountCash+q),F[M].comCash=Ka(F[M].comCash+R))}return Object.values(F)},[X]),k=async()=>{if(!C.current||!de)return;const F=C.current;F.classList.add("force-pdf-colors");try{const M=(await L0(F,{backgroundColor:"#ffffff"})).toDataURL("image/png"),L=new gr;L.addImage(M,"PNG",10,10,190,0),L.save(`liquidacion_${de.date}.pdf`)}finally{F.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),l.jsxs("form",{onSubmit:O,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:F=>i(F.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:F=>c(F.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Vendedor"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:b,onChange:F=>w(F.target.value),children:[l.jsx("option",{value:"ALL",children:"Todos"}),ce.map(F=>l.jsx("option",{value:F.id,children:F.label},F.id))]})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),l.jsx("div",{className:"text-2xl font-bold",children:OA(Ae.packsCash)})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),l.jsx("div",{className:"text-2xl font-bold",children:OA(Ae.packsCredit)})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ci(Ae.totalSales)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ci(Ae.amountCash)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ci(Ae.amountCredit)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ci(Ae.comCash)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),l.jsxs("div",{className:"text-2xl font-bold",children:["C$",ci(Ae.comCredit)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ee.cashRows.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ee.cashRows.map(F=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:F.name}),l.jsxs("strong",{className:"ml-2",children:["C$",ci(F.total)]})]},F.vendorId))})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ee.creditRows.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ee.creditRows.map(F=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:F.name}),l.jsxs("strong",{className:"ml-2",children:["C$",ci(F.total)]})]},F.vendorId))})]})]}),u?l.jsx("p",{children:"Cargando..."}):W.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),l.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),l.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),l.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),l.jsx("th",{className:"border p-2",children:"Comisin cash"}),l.jsx("th",{className:"border p-2",children:"Comisin crdito"}),l.jsx("th",{className:"border p-2",children:"Opciones"})]})}),l.jsx("tbody",{children:W.map(F=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:F.date}),l.jsx("td",{className:"border p-1",children:OA(F._packsCash)}),l.jsx("td",{className:"border p-1",children:OA(F._packsCredit)}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F._amountCash)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F._amountCredit)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F._comCash)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F._comCredit)]}),l.jsx("td",{className:"border p-1",children:l.jsx("div",{className:"flex items-center gap-2 justify-center",children:l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>m(F),children:"Ver detalle"})})})]},F.id))})]}),de&&l.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",de.date]}),l.jsx("button",{onClick:()=>m(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:k,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:C,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[l.jsxs("div",{children:["Total Ventas cash:"," ",l.jsxs("strong",{children:["C$",ci(pe.amountCash)]})]}),l.jsxs("div",{children:["Total Ventas crdito:"," ",l.jsxs("strong",{children:["C$",ci(pe.amountCredit)]})]}),l.jsxs("div",{children:["Total paquetes cash:"," ",l.jsx("strong",{children:OA(pe.packsCash)})]}),l.jsxs("div",{children:["Total paquetes crdito:"," ",l.jsx("strong",{children:OA(pe.packsCredit)})]})]}),l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),X.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Tipo"}),l.jsx("th",{className:"border p-2",children:"Paquetes"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Comisin"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),l.jsx("tbody",{children:X.map((F,V)=>{const M=F.vendorId&&B[F.vendorId]?B[F.vendorId]:F.userEmail,L=Ka(Number(F.vendorCommissionAmount||0));return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:M}),l.jsx("td",{className:"border p-1",children:F.productName}),l.jsx("td",{className:"border p-1",children:F.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"border p-1",children:OA(F.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F.amount)]}),l.jsx("td",{className:"border p-1",children:L>0?`C$${ci(L)}`:""}),l.jsx("td",{className:"border p-1",children:F.date||""})]},V)})})]}),l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),Se.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),l.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),l.jsx("th",{className:"border p-2",children:"Ventas cash"}),l.jsx("th",{className:"border p-2",children:"Ventas crdito"}),l.jsx("th",{className:"border p-2",children:"Comisin cash"}),l.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),l.jsx("tbody",{children:Se.map((F,V)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:F.productName}),l.jsx("td",{className:"border p-1",children:OA(F.packsCash)}),l.jsx("td",{className:"border p-1",children:OA(F.packsCredit)}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F.amountCash)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F.amountCredit)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F.comCash)]}),l.jsxs("td",{className:"border p-1",children:["C$",ci(F.comCredit)]})]},V))})]})]})]}),p&&l.jsx("p",{className:"mt-3 text-sm",children:p})]})}const hr=t=>Math.round((Number(t)||0)*100)/100,so=t=>Math.round((Number(t)||0)*1e3)/1e3,sr=t=>Number(t??0).toFixed(2),ls=t=>Number(t??0).toFixed(3),oS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},Ar=t=>{const e=Number(t);return Number.isFinite(e)?e:0},cUe=t=>Math.max(0,Math.min(1,t));function RH({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,A=u.length?Math.max(...u):0,h=A-d||1,f=840,m=204,p=e.map((b,w)=>{const I=44+(e.length<=1?f/2:w/(e.length-1)*f),T=18+(1-(Number(b.value||0)-d)/h)*m;return{x:I,y:T,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return l.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[l.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),l.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",l.jsx("strong",{children:r+sr(y)})]})]}),l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return l.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),l.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,sr(A)]}),l.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,sr(d)]}),l.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>l.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),l.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function uUe({title:t,items:e}){const r=e.reduce((A,h)=>A+Number(h.value||0),0),n=240,a=86,s=120,i=120,o=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((A,h)=>{const f=Math.max(0,Number(A.value||0)),m=c/o,p=f/o;c+=f;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),I=s+a*Math.cos(y),T=i+a*Math.sin(y),C=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${C} 1 ${I.toFixed(2)} ${T.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...A,frac:p}});return l.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[l.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[l.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:l.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((A,h)=>l.jsx("path",{d:A.d,fill:A.fill},h)),l.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),l.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),l.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",sr(r)]})]})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((A,h)=>{const f=Number(A.value||0),m=cUe(f/(r||1))*100;return l.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"text-sm font-semibold truncate",children:A.label}),l.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",sr(f)]})]}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),l.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:l.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},A.label)})}),l.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const dUe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?dr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),o=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,A=Number(t.vendorCommissionAmount??0)||0,h=oS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),I=oS(x==null?void 0:x.branch)||h;let T=0;return A>0&&d>0&&w>0&&(T=hr(A*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:o,customerId:c,customerName:u,branch:I||"",packages:b,amount:hr(w),commission:hr(T)}});const f=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=hr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:o,customerId:c,customerName:u,branch:h||"",packages:f,amount:hr(m),commission:hr(p)}]};function AUe({role:t}){var nr;const e=!t||t==="admin",r=dr(new Date,"yyyy-MM-dd"),[n,a]=v.useState(r),[s,i]=v.useState(r),[o,c]=v.useState("TODAS"),[u,d]=v.useState("AMBAS"),[A,h]=v.useState("ALL"),[f,m]=v.useState("ALL"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(""),[I,T]=v.useState(""),[C,E]=v.useState("DIA"),[S,O]=v.useState(!0),[B,P]=v.useState(""),[D,W]=v.useState([]),[Ae,ee]=v.useState([]),[ce,de]=v.useState([]),[X,pe]=v.useState([]),[Se,k]=v.useState([]),[F,V]=v.useState([]),[M,L]=v.useState([]),[q,R]=v.useState([]),[K,Z]=v.useState([]),[te,Q]=v.useState(""),[ye,Y]=v.useState(""),z=v.useRef(null),[le,je]=v.useState([]),[ue,Pe]=v.useState("DETALLE"),Ye=v.useMemo(()=>{const Ce={};return Se.forEach(dt=>Ce[dt.id]=String(dt.name||"").trim()),Ce},[Se]),nt=v.useMemo(()=>{const Ce={};return Ae.forEach(dt=>Ce[dt.id]=dt),Ce},[Ae]),mt=Ce=>{const dt=Ce.customerId?Ye[Ce.customerId]:"";return(Ce.customerName||dt||"").trim()||(Ce.customerId?Ye[Ce.customerId]||Ce.customerId:"")||""};v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=await jt(ht(Fe,"inventory_candies")),gt=[];dt.forEach(Ne=>gt.push({id:Ne.id,...Ne.data()})),je(gt)}catch(dt){console.error("inventory_candies all error:",dt),je([])}})()},[e]),v.useEffect(()=>{(async()=>{try{const dt=await jt(ht(Fe,"sellers_candies")),gt=[];dt.forEach(at=>{const wt=at.data();gt.push({id:at.id,name:String(wt.name||"").trim(),commissionPercent:Number(wt.commissionPercent||0),branch:wt.branch||""})});const Ne=new Map;gt.forEach(at=>Ne.set(at.id,at)),ee(Array.from(Ne.values()).sort((at,wt)=>at.name.localeCompare(wt.name)))}catch(dt){console.error(dt)}})()},[]),v.useEffect(()=>{if(!e||!n||!s)return;O(!0),P("");const Ce=Kt(ht(Fe,"sales_candies"),Zt("date",">=",n),Zt("date","<=",s),Gr("date","asc")),dt=y0(Ce,gt=>{const Ne=[];gt.forEach(at=>Ne.push(...dUe(at.data(),at.id))),W(Ne),O(!1)},gt=>{console.error("sales_candies periodo error:",gt),W([]),O(!1),P(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>dt()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=Kt(ht(Fe,"candy_main_orders"),Zt("date",">=",n),Zt("date","<=",s)),gt=await jt(dt),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),de(Ne)}catch(dt){console.error("candy_main_orders error:",dt),de([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=Kt(ht(Fe,"inventory_candies_sellers"),Zt("date",">=",n),Zt("date","<=",s)),gt=await jt(dt),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),pe(Ne)}catch(dt){console.error("inventory_candies_sellers error:",dt),pe([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=Kt(ht(Fe,"expenses_candies"),Zt("date",">=",n),Zt("date","<=",s),Gr("date","asc")),gt=await jt(dt),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),L(Ne)}catch(dt){console.warn("expenses_candies sin ndice, usando fallback:",dt);try{const gt=await jt(ht(Fe,"expenses_candies")),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),L(Ne.filter(at=>String(at.date||"")>=n&&String(at.date||"")<=s))}catch(gt){console.error(gt),L([])}}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=await jt(ht(Fe,"inventory_candies")),gt=[];dt.forEach(Ne=>gt.push({id:Ne.id,...Ne.data()})),R(gt)}catch(dt){console.error("inventory_candies global error:",dt),R([])}})()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=await jt(ht(Fe,"inventory_candies_sellers")),gt=[];dt.forEach(Ne=>gt.push({id:Ne.id,...Ne.data()})),Z(gt)}catch(dt){console.error("inventory_candies_sellers global error:",dt),Z([])}})()},[e]),v.useEffect(()=>{if(!e)return;const Ce=Kt(ht(Fe,"customers_candies")),dt=y0(Ce,gt=>{const Ne=[];gt.forEach(at=>{var wt;return Ne.push({id:at.id,name:String(((wt=at.data())==null?void 0:wt.name)||"").trim()})}),k(Ne)},gt=>{console.error("customers_candies snapshot error:",gt),k([])});return()=>dt()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const dt=Kt(ht(Fe,"ar_movements"),Zt("date","<=",s),Gr("date","asc")),gt=await jt(dt),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),V(Ne)}catch(dt){console.warn("ar_movements sin ndice, usando fallback:",dt);try{const gt=await jt(ht(Fe,"ar_movements")),Ne=[];gt.forEach(at=>Ne.push({id:at.id,...at.data()})),V(Ne.filter(at=>String(at.date||"")<=s))}catch(gt){console.error(gt),V([])}}})()},[e,s]);const ct=v.useMemo(()=>{let Ce=[...D];if(o!=="TODAS"&&(Ce=Ce.filter(Ne=>Ne.status===o)),u==="CASH"&&(Ce=Ce.filter(Ne=>Ne.type==="CONTADO")),u==="CREDITO"&&(Ce=Ce.filter(Ne=>Ne.type==="CREDITO")),A!=="ALL"&&(Ce=Ce.filter(Ne=>(Ne.vendorId||"")===A)),f!=="ALL"&&(Ce=Ce.filter(Ne=>Ne.branch===f)),p.trim()){const Ne=p.trim().toLowerCase();Ce=Ce.filter(at=>(at.productName||"").toLowerCase().includes(Ne))}if(x.trim()){const Ne=x.trim().toLowerCase();Ce=Ce.filter(at=>(mt(at)||"").toLowerCase().includes(Ne))}const dt=b.trim()?Number(b):null,gt=I.trim()?Number(I):null;return dt!==null&&!Number.isNaN(dt)&&(Ce=Ce.filter(Ne=>(Ne.amount||0)>=dt)),gt!==null&&!Number.isNaN(gt)&&(Ce=Ce.filter(Ne=>(Ne.amount||0)<=gt)),Ce},[D,o,u,A,f,p,x,b,I,Ye]),ft=v.useMemo(()=>{let Ce=0,dt=0,gt=0,Ne=0,at=0,wt=0;for(const Lt of ct){const qt=Ar(Lt.packages),_t=Ar(Lt.amount),ie=Ar(Lt.commission);Lt.type==="CREDITO"?(dt+=qt,Ne+=_t,wt+=ie):(Ce+=qt,gt+=_t,at+=ie)}const kt=hr(gt+Ne);return{packsCash:so(Ce),packsCredit:so(dt),salesCash:hr(gt),salesCredit:hr(Ne),salesTotal:kt,commCash:hr(at),commCredit:hr(wt),commTotal:hr(at+wt)}},[ct]),Ct=v.useMemo(()=>{let Ce=0,dt=0,gt=0,Ne=0,at=0,wt=0;for(const kt of ce){const Lt=Array.isArray(kt.items)?kt.items:[];for(const qt of Lt)Ce+=Ar(qt.totalRivas),dt+=Ar(qt.totalSanJorge),gt+=Ar(qt.totalIsla),Ne+=Ar(qt.gainRivas),at+=Ar(qt.gainSanJorge),wt+=Ar(qt.gainIsla)}return{expectedRivas:hr(Ce),expectedSanJorge:hr(dt),expectedIsla:hr(gt),grossRivas:hr(Ne),grossSanJorge:hr(at),grossIsla:hr(wt),grossTotal:hr(Ne+at+wt),expectedTotal:hr(Ce+dt+gt)}},[ce]),At=v.useMemo(()=>{const Ce={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const dt of ct){const gt=dt.branch;gt&&(Ce[gt].sales+=Ar(dt.amount),Ce[gt].packages+=Ar(dt.packages))}return{RIVAS:{sales:hr(Ce.RIVAS.sales),packages:so(Ce.RIVAS.packages)},SAN_JORGE:{sales:hr(Ce.SAN_JORGE.sales),packages:so(Ce.SAN_JORGE.packages)},ISLA:{sales:hr(Ce.ISLA.sales),packages:so(Ce.ISLA.packages)}}},[ct]),He=v.useMemo(()=>({RIVAS:hr(At.RIVAS.sales-Ct.expectedRivas),SAN_JORGE:hr(At.SAN_JORGE.sales-Ct.expectedSanJorge),ISLA:hr(At.ISLA.sales-Ct.expectedIsla)}),[At,Ct]),it=v.useMemo(()=>{const Ce={},dt={};for(const at of ct){const wt=(at.vendorId||"").trim();if(!wt)continue;const kt=Ae.find(_t=>_t.id===wt),Lt=(kt==null?void 0:kt.name)||at.vendorName||"(sin vendedor)",qt=Ar(at.commission);at.type==="CREDITO"?(dt[wt]||(dt[wt]={vendorId:wt,name:Lt,total:0}),dt[wt].total=hr(dt[wt].total+qt)):(Ce[wt]||(Ce[wt]={vendorId:wt,name:Lt,total:0}),Ce[wt].total=hr(Ce[wt].total+qt))}const gt=Object.values(Ce).sort((at,wt)=>wt.total-at.total),Ne=Object.values(dt).sort((at,wt)=>wt.total-at.total);return{cashArr:gt,creditArr:Ne}},[ct,Ae]),we=v.useMemo(()=>{const Ce=(fe,Te)=>fe.reduce((Re,ae)=>Re+Number((ae==null?void 0:ae[Te])??0),0),dt=fe=>{const Te=Number(fe);return Number.isFinite(Te)?Math.floor(Te):0},gt=fe=>{const Te=Number((fe==null?void 0:fe.totalPackages)??0);if(Te>0)return Te;const Re=Array.isArray(fe==null?void 0:fe.items)?fe.items:[];return Ce(Re,"packages")};let Ne=0,at=0;for(const fe of ce){const Te=Array.isArray(fe.items)?fe.items:[];if(Te.length)for(const Re of Te)Ne+=Number((Re==null?void 0:Re.subtotal)??0);else Ne+=Number(fe.subtotal??0);at+=gt(fe)}let wt=0,kt=0,Lt=0;const qt=fe=>{const Te=Number(fe==null?void 0:fe.remainingPackages);if(Number.isFinite(Te)&&Te>0)return Math.floor(Te);const Re=Math.max(1,dt((fe==null?void 0:fe.unitsPerPackage)??1)),ae=dt((fe==null?void 0:fe.remainingUnits)??(fe==null?void 0:fe.remaining)??0);return ae>0?Math.max(0,Math.floor(ae/Re)):0};for(const fe of X)wt+=Number(fe.subtotal??0),kt+=Number(fe.packages??0),Lt+=qt(fe);const _t=new Set(ce.filter(fe=>String(fe.date||"")>=n&&String(fe.date||"")<=s).map(fe=>fe.id));let ie=0;for(const fe of le){const Te=String(fe.orderId||"").trim();Te&&_t.has(Te)&&(ie+=Number(fe.remainingPackages??0))}const se=q.reduce((fe,Te)=>fe+Ar(Te.remainingPackages),0),me=K.reduce((fe,Te)=>fe+Ar(Te.remainingPackages),0);return{providerTotalMaster:hr(Ne),providerTotalVendor:hr(wt),orderedPacksMaster:so(at),remainingPacksMaster:so(ie),orderedPacksVendor:so(kt),remainingPacksVendor:so(Lt),globalRemainingMaster:so(se),globalRemainingVendor:so(me)}},[ce,X,le,n,s,q,K]),re=v.useMemo(()=>{const Ce={};let dt=0;for(const gt of M){const Ne=String(gt.date||"").trim();if(!Ne)continue;const at=Math.max(0,Ar(gt.amount));dt+=at,Ce[Ne]=hr((Ce[Ne]||0)+at)}return{total:hr(dt),byDay:Ce}},[M]),ne=v.useMemo(()=>{let Ce=0;for(const dt of ce){const gt=Array.isArray(dt.items)?dt.items:[];if(gt.length)for(const Ne of gt)Ce+=Ar(Ne==null?void 0:Ne.subtotal);else Ce+=Ar(dt.subtotal)}return hr(Ce)},[ce]),Ue=v.useMemo(()=>{let Ce=0,dt=0;for(const Ne of X){const at=String(Ne.sellerId||"").trim(),wt=at?nt[at]:void 0,kt=oS(wt==null?void 0:wt.branch)||"ISLA",Lt=Ar(Ne.totalVendor)||Ar(kt==="ISLA"?Ne.totalIsla:kt==="RIVAS"?Ne.totalRivas:Ne.totalSanJorge);Ce+=Lt,kt==="ISLA"&&(dt+=Lt)}const gt=hr(Ar(Ct.expectedIsla)-dt);return{dispersedTotal:hr(Ce),dispersedIsla:hr(dt),totalExistenteIsla:gt}},[X,nt,Ct.expectedIsla]),Ke=v.useMemo(()=>{var Lt,qt;const Ce=_t=>{const ie=Math.max(1,Math.floor(Ar(_t.unitsPerPackage||1))),se=Ar(_t.totalUnits)>0?Ar(_t.totalUnits):Ar(_t.packages)*ie;let me=0;Ar(_t.remainingUnits)>0?me=Ar(_t.remainingUnits):Ar(_t.remainingPackages)>0?me=Ar(_t.remainingPackages)*ie:me=0;const fe=Math.max(0,se-me);return{orderedUnits:se,remainingUnits:me,soldUnits:fe,upp:ie}},dt=_t=>{const ie=nt[_t];return oS(ie==null?void 0:ie.branch)},gt=(_t,ie)=>{const se=Ar(_t.totalVendor)||(ie==="ISLA"?Ar(_t.totalIsla):ie==="RIVAS"?Ar(_t.totalRivas):ie==="SAN_JORGE"?Ar(_t.totalSanJorge):0);if(se>0)return se;const me=Ar(_t.unitPriceVendor);if(me>0){const{orderedUnits:fe}=Ce(_t);return me*fe}return 0},Ne=(_t,ie)=>{const se=Ar(_t.unitPriceVendor);if(se>0)return se;const me=gt(_t,ie),{orderedUnits:fe}=Ce(_t);return me>0&&fe>0?me/fe:0},at=new Map;for(const _t of X){const ie=String(_t.orderId||"").trim(),se=ie||`DOC:${_t.id}`,me=String(_t.sellerId||"").trim(),fe=String(_t.sellerName||"").trim()||me&&((Lt=nt[me])==null?void 0:Lt.name)||""||"(sin vendedor)",Te=String(_t.date||"").trim(),Re=me?dt(me):"",{orderedUnits:ae,remainingUnits:Me,soldUnits:xe}=Ce(_t),Le=gt(_t,Re),Ie=Ne(_t,Re),rt=Ie>0?Ie*xe:ae>0?Le*xe/ae:0,Ze=Ie>0?Ie*Me:ae>0?Le*Me/ae:0;at.has(se)||at.set(se,{orderKey:se,orderId:ie||se,date:Te,sellerId:me,sellerName:fe,branch:Re,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const tt=at.get(se);tt.lines.push({..._t,orderedUnits:ae,soldUnits:xe,remainingUnits:Me,lineTotal:hr(Le),lineSoldValue:hr(rt),lineRemainingValue:hr(Ze)}),tt.totalOrden+=Le,tt.vendido+=rt,tt.restante+=Ze}for(const _t of at.values()){const ie=_t.sellerId?Ar((qt=nt[_t.sellerId])==null?void 0:qt.commissionPercent):0;_t.comision=hr(_t.totalOrden*ie/100),_t.totalEsperado=hr(_t.totalOrden-_t.comision),_t.totalOrden=hr(_t.totalOrden),_t.vendido=hr(_t.vendido),_t.restante=hr(_t.restante)}const wt=Array.from(at.values()).sort((_t,ie)=>_t.date&&ie.date?_t.date<ie.date?1:-1:ie.totalOrden-_t.totalOrden),kt=wt.reduce((_t,ie)=>(_t.totalOrden+=Ar(ie.totalOrden),_t.vendido+=Ar(ie.vendido),_t.restante+=Ar(ie.restante),_t.comision+=Ar(ie.comision),_t.totalEsperado+=Ar(ie.totalEsperado),_t),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:hr(kt.totalOrden),vendido:hr(kt.vendido),restante:hr(kt.restante),comision:hr(kt.comision),totalEsperado:hr(kt.totalEsperado)},orders:wt}},[X,nt]),et=v.useMemo(()=>{if(!ye)return null;const Ce=Ke.orders.find(Ne=>Ne.orderKey===ye);if(!Ce)return null;const dt={};for(const Ne of Ce.lines){const at=String(Ne.productName||"(sin nombre)");dt[at]||(dt[at]={productName:at,asociados:0,vendidos:0,restantes:0}),dt[at].asociados+=Ar(Ne.orderedUnits),dt[at].vendidos+=Ar(Ne.soldUnits),dt[at].restantes+=Ar(Ne.remainingUnits)}const gt=Object.values(dt).map(Ne=>({...Ne,asociados:Math.floor(Ne.asociados),vendidos:Math.floor(Ne.vendidos),restantes:Math.floor(Ne.restantes)})).sort((Ne,at)=>at.asociados-Ne.asociados);return{...Ce,products:gt}},[ye,Ke.orders]),ke=v.useMemo(()=>{const Ce=q.reduce((gt,Ne)=>gt+Ar(Ne.remainingPackages),0),dt=K.reduce((gt,Ne)=>gt+Ar(Ne.remainingPackages),0);return{masterRemainingPackages:so(Ce),vendorRemainingPackages:so(dt)}},[q,K]),he=v.useMemo(()=>{const Ce=new Map,dt=Ne=>C==="DIA"?{key:Ne.date,label:Ne.date}:C==="VENDEDOR"?{key:Ne.vendorId||"",label:Ne.vendorName||""}:C==="PRODUCTO"?{key:Ne.productName||"",label:Ne.productName||""}:{key:Ne.branch||"",label:Ne.branch||""};for(const Ne of ct){const{key:at,label:wt}=dt(Ne);Ce.has(at)||Ce.set(at,{key:at,label:wt,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const kt=Ce.get(at);kt.rows.push(Ne),Ne.type==="CREDITO"?(kt.packsCredit+=Ar(Ne.packages),kt.salesCredit+=Ar(Ne.amount),kt.commCredit+=Ar(Ne.commission)):(kt.packsCash+=Ar(Ne.packages),kt.salesCash+=Ar(Ne.amount),kt.commCash+=Ar(Ne.commission))}const gt=Array.from(Ce.values()).map(Ne=>({...Ne,packsCash:so(Ne.packsCash),packsCredit:so(Ne.packsCredit),salesCash:hr(Ne.salesCash),salesCredit:hr(Ne.salesCredit),commCash:hr(Ne.commCash),commCredit:hr(Ne.commCredit)}));return C==="DIA"?gt.sort((Ne,at)=>Ne.key<at.key?1:-1):gt.sort((Ne,at)=>at.salesCash+at.salesCredit-(Ne.salesCash+Ne.salesCredit)),gt},[ct,C]),_e=v.useMemo(()=>{if(!te)return[];const Ce=he.find(dt=>dt.key===te);return(Ce==null?void 0:Ce.rows)||[]},[te,he]),be=v.useMemo(()=>{const Ce={};for(const dt of _e){const gt=dt.productName||"(sin nombre)";Ce[gt]||(Ce[gt]={productName:gt,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),dt.type==="CREDITO"?(Ce[gt].packsCredit+=Ar(dt.packages),Ce[gt].salesCredit+=Ar(dt.amount),Ce[gt].commCredit+=Ar(dt.commission)):(Ce[gt].packsCash+=Ar(dt.packages),Ce[gt].salesCash+=Ar(dt.amount),Ce[gt].commCash+=Ar(dt.commission))}return Object.values(Ce).map(dt=>({...dt,packsCash:so(dt.packsCash),packsCredit:so(dt.packsCredit),salesCash:hr(dt.salesCash),salesCredit:hr(dt.salesCredit),commCash:hr(dt.commCash),commCredit:hr(dt.commCredit)})).sort((dt,gt)=>gt.salesCash+gt.salesCredit-(dt.salesCash+dt.salesCredit))},[_e]),Qe=v.useMemo(()=>{const Ce={},dt=at=>(Ye[at]||"").trim()||at;for(const at of F){const wt=String(at.customerId||"").trim();if(!wt)continue;const kt=String(at.date||"");if(kt&&kt>s)continue;Ce[wt]||(Ce[wt]={customerId:wt,name:dt(wt),balance:0,lastPayment:""});const Lt=Ar(at.amount);at.type==="CARGO"&&(Ce[wt].balance+=Lt),at.type==="ABONO"&&(Ce[wt].balance-=Lt,(!Ce[wt].lastPayment||kt>Ce[wt].lastPayment)&&(Ce[wt].lastPayment=kt))}const gt=Object.values(Ce).map(at=>({...at,balance:hr(at.balance)})).filter(at=>at.balance>0).sort((at,wt)=>wt.balance-at.balance),Ne=hr(gt.reduce((at,wt)=>at+wt.balance,0));return{count:gt.length,totalPending:Ne,list:gt.slice(0,20)}},[F,Ye,s]),$e=v.useMemo(()=>{const Ce=hr(ft.salesTotal),dt=hr(ft.commTotal),gt=hr(re.total),Ne=hr(Ce-dt-gt),at=new Set;for(const ie of ct)ie.date&&at.add(ie.date);const wt=Math.max(1,at.size),kt=hr(Ce/wt),Lt=hr(dt/wt),qt=hr(gt/wt),_t=hr(Ne/wt);return{ingreso:Ce,comision:dt,gastos:gt,gananciaNeta:Ne,daysCount:wt,ingresoDia:kt,comisionDia:Lt,gastosDia:qt,netaDia:_t}},[ft,re.total,ct]),Je=v.useMemo(()=>{const Ce={};for(const at of ct){const wt=at.date;wt&&(Ce[wt]||(Ce[wt]={date:wt,ingreso:0,comision:0}),Ce[wt].ingreso+=Ar(at.amount),Ce[wt].comision+=Ar(at.commission))}const dt=Object.keys(Ce).sort((at,wt)=>at<wt?-1:1),gt=dt.map(at=>({label:at.slice(5),value:hr(Ce[at].ingreso)})),Ne=dt.map(at=>{var _t,ie;const wt=Ar((_t=Ce[at])==null?void 0:_t.ingreso),kt=Ar((ie=Ce[at])==null?void 0:ie.comision),Lt=Ar(re.byDay[at]||0),qt=wt-kt-Lt;return{label:at.slice(5),value:hr(qt)}});return{seriesIngreso:gt,seriesNeta:Ne,datesCount:dt.length}},[ct,re.byDay]),st=v.useMemo(()=>[{label:"Rivas",value:Ar(At.RIVAS.sales)},{label:"San Jorge",value:Ar(At.SAN_JORGE.sales)},{label:"Isla",value:Ar(At.ISLA.sales)}].map(Ce=>({...Ce,value:hr(Ce.value)})),[At]),yt=async()=>{if(z.current){z.current.classList.add("force-pdf-colors");try{const dt=(await L0(z.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),gt=new gr;gt.addImage(dt,"PNG",10,10,190,0),gt.save(`data_center_dulces_${n}_a_${s}.pdf`)}finally{z.current.classList.remove("force-pdf-colors")}}},Dt=()=>{const dt=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...ct.map(wt=>[wt.date,wt.processedDate||"",wt.status,wt.type,wt.vendorId,`"${String(wt.vendorName||"").replace(/"/g,'""')}"`,wt.branch||"",`"${String(wt.productName||"").replace(/"/g,'""')}"`,ls(wt.packages),sr(wt.amount),sr(wt.commission),wt.customerId||"",`"${String(mt(wt)||"").replace(/"/g,'""')}"`].join(","))],gt=new Blob([dt.join(`
`)],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(gt),at=document.createElement("a");at.href=Ne,at.download=`data_center_dulces_${n}_a_${s}.csv`,at.click(),URL.revokeObjectURL(Ne)};return e?l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:l.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[l.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[l.jsx("button",{onClick:yt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),l.jsx("button",{onClick:Dt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),l.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:n,onChange:Ce=>a(Ce.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:Ce=>i(Ce.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),l.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:o,onChange:Ce=>c(Ce.target.value),children:[l.jsx("option",{value:"TODAS",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),l.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:Ce=>d(Ce.target.value),children:[l.jsx("option",{value:"AMBAS",children:"Ambas"}),l.jsx("option",{value:"CASH",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),l.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:Ce=>h(Ce.target.value),children:[l.jsx("option",{value:"ALL",children:"Todos"}),Ae.map(Ce=>l.jsx("option",{value:Ce.id,children:Ce.name||Ce.id},Ce.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),l.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:Ce=>m(Ce.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"RIVAS",children:"Rivas"}),l.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),l.jsx("option",{value:"ISLA",children:"Isla"})]})]}),l.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),l.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:Ce=>g(Ce.target.value),placeholder:"Ej: Conitos"})]}),l.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),l.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:Ce=>y(Ce.target.value),placeholder:"Ej: Javier"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),l.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:Ce=>w(Ce.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),l.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:I,onChange:Ce=>T(Ce.target.value),placeholder:"999999"})]}),l.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[l.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),l.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:C,onChange:Ce=>{Q(""),E(Ce.target.value)},children:[l.jsx("option",{value:"DIA",children:"Da"}),l.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),l.jsx("option",{value:"PRODUCTO",children:"Producto"}),l.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{Y(""),Pe("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",ue==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),l.jsx("button",{onClick:()=>{Y(""),Pe("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",ue==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),l.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",l.jsxs("strong",{children:["C$",sr(re.total)]})]})]}),l.jsxs("div",{ref:z,children:[ue==="MACRO"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr($e.ingreso)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",sr($e.comision)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",sr(ft.commCash),"  Crdito: C$",sr(ft.commCredit)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",sr($e.gastos)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr($e.gananciaNeta)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr($e.netaDia)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",l.jsx("strong",{children:$e.daysCount})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[l.jsx(RH,{title:"Ventas por da (Ingreso)",series:Je.seriesIngreso,valuePrefix:"C$"}),l.jsx(RH,{title:"Ganancia neta por da (real)",series:Je.seriesNeta,valuePrefix:"C$"})]}),l.jsx("div",{className:"mb-6",children:l.jsx(uUe,{title:"Distribucin de ventas por sucursal",items:st})})]}),ue==="DETALLE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(ft.packsCash)}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(ft.packsCredit)}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(ft.salesTotal)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",sr(ft.salesCash),"  Crdito: C$",sr(ft.salesCredit)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(ft.commTotal)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",sr(ft.commCash),"  Crdito: C$",sr(ft.commCredit)]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(Ct.grossTotal)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",sr(Ct.grossRivas),"  SJ:"," ",sr(Ct.grossSanJorge),"  I:"," ",sr(Ct.grossIsla)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),l.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Rivas"}),l.jsxs("strong",{children:["C$",sr(Ct.expectedRivas)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"San Jorge"}),l.jsxs("strong",{children:["C$",sr(Ct.expectedSanJorge)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Isla"}),l.jsxs("strong",{children:["C$",sr(Ct.expectedIsla)]})]})]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),l.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Rivas"}),l.jsxs("strong",{children:["C$",sr(At.RIVAS.sales)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"San Jorge"}),l.jsxs("strong",{children:["C$",sr(At.SAN_JORGE.sales)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Isla"}),l.jsxs("strong",{children:["C$",sr(At.ISLA.sales)]})]})]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),l.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Rivas"}),l.jsxs("strong",{children:["C$",sr(He.RIVAS)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"San Jorge"}),l.jsxs("strong",{children:["C$",sr(He.SAN_JORGE)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Isla"}),l.jsxs("strong",{children:["C$",sr(He.ISLA)]})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(we.providerTotalVendor)]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(we.orderedPacksMaster)}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",l.jsx("strong",{children:ls(we.remainingPacksMaster)})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",l.jsx("strong",{children:ls(ke.masterRemainingPackages)})]})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(we.orderedPacksVendor)}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",l.jsx("strong",{children:ls(we.remainingPacksVendor)})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",l.jsx("strong",{children:ls(ke.vendorRemainingPackages)})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(ne)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(Ue.dispersedTotal)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(Ue.dispersedIsla)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),l.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",sr(Ue.totalExistenteIsla)]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),l.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[l.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",l.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",l.jsxs("strong",{children:["C$",sr(Ke.global.totalOrden)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",l.jsxs("strong",{children:["C$",sr(Ke.global.vendido)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",l.jsxs("strong",{children:["C$",sr(Ke.global.restante)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",l.jsxs("strong",{children:["C$",sr(Ke.global.comision)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",l.jsxs("strong",{children:["C$",sr(Ke.global.totalEsperado)]})]})]})]}),l.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[l.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),Ke.orders.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:""}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"md:hidden space-y-2",children:Ke.orders.map(Ce=>l.jsxs("div",{className:"border rounded-2xl p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:Ce.orderId}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[Ce.sellerName," ",Ce.branch?` ${Ce.branch}`:""," ",Ce.date?` ${Ce.date}`:""]})]}),l.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Y(Ce.orderKey),children:"Ver"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.totalOrden)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.vendido)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.restante)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.comision)]})]})]})]},Ce.orderKey))}),l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2 text-left",children:"Orden"}),l.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Sucursal"}),l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total orden"}),l.jsx("th",{className:"border p-2",children:"Vendido"}),l.jsx("th",{className:"border p-2",children:"Restante"}),l.jsx("th",{className:"border p-2",children:"Comisin"}),l.jsx("th",{className:"border p-2",children:"Total esperado"}),l.jsx("th",{className:"border p-2",children:"Accin"})]})}),l.jsx("tbody",{children:Ke.orders.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2 text-left",children:Ce.orderId}),l.jsx("td",{className:"border p-2 text-left",children:Ce.sellerName}),l.jsx("td",{className:"border p-2",children:Ce.branch||""}),l.jsx("td",{className:"border p-2",children:Ce.date||""}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.totalOrden)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.vendido)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.restante)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.comision)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.totalEsperado)]}),l.jsx("td",{className:"border p-2",children:l.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Y(Ce.orderKey),children:"Ver detalle"})})]},Ce.orderKey))})]})}),et&&l.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[l.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",et.orderId]}),l.jsx("button",{onClick:()=>Y(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",l.jsxs("strong",{children:["C$",sr(et.totalOrden)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",l.jsxs("strong",{children:["C$",sr(et.vendido)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",l.jsxs("strong",{children:["C$",sr(et.restante)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",l.jsxs("strong",{children:["C$",sr(et.comision)]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",l.jsxs("strong",{children:["C$",sr(et.totalEsperado)]})]})]}),l.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),l.jsx("div",{className:"md:hidden space-y-2",children:et.products.map(Ce=>l.jsxs("div",{className:"border rounded-2xl p-3",children:[l.jsx("div",{className:"font-semibold",children:Ce.productName}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),l.jsx("div",{className:"font-bold",children:Ce.asociados})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),l.jsx("div",{className:"font-bold",children:Ce.vendidos})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),l.jsx("div",{className:"font-bold",children:Ce.restantes})]})]})]},Ce.productName))}),l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),l.jsx("th",{className:"border p-2",children:"Asociados"}),l.jsx("th",{className:"border p-2",children:"Vendidos"}),l.jsx("th",{className:"border p-2",children:"Restantes"})]})}),l.jsxs("tbody",{children:[et.products.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2 text-left",children:Ce.productName}),l.jsx("td",{className:"border p-2",children:Ce.asociados}),l.jsx("td",{className:"border p-2",children:Ce.vendidos}),l.jsx("td",{className:"border p-2",children:Ce.restantes})]},Ce.productName)),et.products.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(ke.masterRemainingPackages)}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),l.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ls(ke.vendorRemainingPackages)}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),it.cashArr.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:it.cashArr.map(Ce=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:Ce.name}),l.jsxs("strong",{className:"ml-2",children:["C$",sr(Ce.total)]})]},Ce.vendorId))})]}),l.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),it.creditArr.length===0?l.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):l.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:it.creditArr.map(Ce=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"truncate",children:Ce.name}),l.jsxs("strong",{className:"ml-2",children:["C$",sr(Ce.total)]})]},Ce.vendorId))})]})]}),l.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[l.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",s,")"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[l.jsxs("div",{children:["Clientes con saldo: ",l.jsx("strong",{children:Qe.count})]}),l.jsxs("div",{children:["Saldo total pendiente:"," ",l.jsxs("strong",{children:["C$",sr(Qe.totalPending)]})]}),l.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Qe.list.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:""}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"md:hidden space-y-2",children:Qe.list.map(Ce=>l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"font-semibold truncate",children:Ce.name}),l.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",sr(Ce.balance)]})]}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",l.jsx("span",{className:"font-medium",children:Ce.lastPayment||""})]})]},Ce.customerId))}),l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Saldo"}),l.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),l.jsx("tbody",{children:Qe.list.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2 text-left",children:Ce.name}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.balance)]}),l.jsx("td",{className:"border p-2",children:Ce.lastPayment||""})]},Ce.customerId))})]})})]})]}),l.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[l.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",C,")"]}),l.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),S?l.jsx("p",{className:"text-sm",children:"Cargando..."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"md:hidden space-y-2 mb-6",children:he.length===0?l.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):he.map(Ce=>l.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"font-semibold truncate",children:Ce.label}),l.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Q(Ce.key),children:"Ver detalle"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),l.jsx("div",{className:"font-bold",children:ls(Ce.packsCash)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),l.jsx("div",{className:"font-bold",children:ls(Ce.packsCredit)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.salesCash)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.salesCredit)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.commCash)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.commCredit)]})]})]})]},Ce.key))}),l.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2 text-left",children:C==="DIA"?"Da":C==="VENDEDOR"?"Vendedor":C==="PRODUCTO"?"Producto":"Sucursal"}),l.jsx("th",{className:"border p-2",children:"Paquetes cash"}),l.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),l.jsx("th",{className:"border p-2",children:"Ventas cash"}),l.jsx("th",{className:"border p-2",children:"Ventas crdito"}),l.jsx("th",{className:"border p-2",children:"Comisin cash"}),l.jsx("th",{className:"border p-2",children:"Comisin crdito"}),l.jsx("th",{className:"border p-2",children:"Opciones"})]})}),l.jsxs("tbody",{children:[he.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2 text-left",children:Ce.label}),l.jsx("td",{className:"border p-2",children:ls(Ce.packsCash)}),l.jsx("td",{className:"border p-2",children:ls(Ce.packsCredit)}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.salesCash)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.salesCredit)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.commCash)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.commCredit)]}),l.jsx("td",{className:"border p-2",children:l.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Q(Ce.key),children:"Ver detalle"})})]},Ce.key)),he.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),te&&l.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[l.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((nr=he.find(Ce=>Ce.key===te))==null?void 0:nr.label)||te]}),l.jsx("button",{onClick:()=>Q(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",l.jsxs("strong",{children:["C$",sr(_e.filter(Ce=>Ce.type==="CONTADO").reduce((Ce,dt)=>Ce+Ar(dt.amount),0))]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",l.jsxs("strong",{children:["C$",sr(_e.filter(Ce=>Ce.type==="CREDITO").reduce((Ce,dt)=>Ce+Ar(dt.amount),0))]})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",l.jsx("strong",{children:ls(_e.filter(Ce=>Ce.type==="CONTADO").reduce((Ce,dt)=>Ce+Ar(dt.packages),0))})]}),l.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",l.jsx("strong",{children:ls(_e.filter(Ce=>Ce.type==="CREDITO").reduce((Ce,dt)=>Ce+Ar(dt.packages),0))})]})]}),l.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),l.jsx("div",{className:"md:hidden space-y-2 mb-4",children:_e.length===0?l.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):_e.map(Ce=>l.jsxs("div",{className:"border rounded-2xl p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"font-semibold truncate",children:Ce.productName}),l.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",sr(Ce.amount)]})]}),l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",l.jsx("span",{className:"font-medium",children:Ce.vendorName})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),l.jsx("div",{className:"font-bold",children:Ce.type==="CREDITO"?"Crdito":"Cash"})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),l.jsx("div",{className:"font-bold",children:Ce.branch||""})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),l.jsx("div",{className:"font-bold",children:ls(Ce.packages)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.commission)]})]})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",Ce.date]})]},Ce.id))}),l.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Tipo"}),l.jsx("th",{className:"border p-2",children:"Sucursal"}),l.jsx("th",{className:"border p-2",children:"Paquetes"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Comisin"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),l.jsxs("tbody",{children:[_e.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2",children:Ce.vendorName}),l.jsx("td",{className:"border p-2",children:Ce.productName}),l.jsx("td",{className:"border p-2",children:Ce.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"border p-2",children:Ce.branch||""}),l.jsx("td",{className:"border p-2",children:ls(Ce.packages)}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.amount)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.commission)]}),l.jsx("td",{className:"border p-2",children:Ce.date})]},Ce.id)),_e.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),l.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),l.jsx("div",{className:"md:hidden space-y-2",children:be.length===0?l.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):be.map(Ce=>l.jsxs("div",{className:"border rounded-2xl p-3",children:[l.jsx("div",{className:"font-semibold",children:Ce.productName}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),l.jsx("div",{className:"font-bold",children:ls(Ce.packsCash)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),l.jsx("div",{className:"font-bold",children:ls(Ce.packsCredit)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.salesCash)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.salesCredit)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.commCash)]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),l.jsxs("div",{className:"font-bold",children:["C$",sr(Ce.commCredit)]})]})]})]},Ce.productName))}),l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),l.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),l.jsx("th",{className:"border p-2",children:"Ventas cash"}),l.jsx("th",{className:"border p-2",children:"Ventas crdito"}),l.jsx("th",{className:"border p-2",children:"Comisin cash"}),l.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),l.jsxs("tbody",{children:[be.map(Ce=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2 text-left",children:Ce.productName}),l.jsx("td",{className:"border p-2",children:ls(Ce.packsCash)}),l.jsx("td",{className:"border p-2",children:ls(Ce.packsCredit)}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.salesCash)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.salesCredit)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.commCash)]}),l.jsxs("td",{className:"border p-2",children:["C$",sr(Ce.commCredit)]})]},Ce.productName)),be.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),B&&l.jsx("p",{className:"mt-3 text-sm",children:B})]})}):l.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[l.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function bne(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=bne(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function aa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=bne(t))&&(n&&(n+=" "),n+=e);return n}var fUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vD(t){if(typeof t!="string")return!1;var e=fUe;return e.includes(t)}var hUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],mUe=new Set(hUe);function wne(t){return typeof t!="string"?!1:mUe.has(t)}function Nne(t){return typeof t=="string"&&t.startsWith("data-")}function sA(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(wne(r)||Nne(r))&&(e[r]=t[r]);return e}function ab(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return sA(e)}return typeof t=="object"&&!Array.isArray(t)?sA(t):null}function Iu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(wne(r)||Nne(r)||vD(r))&&(e[r]=t[r]);return e}var pUe=["children","width","height","viewBox","className","style","title","desc"];function ik(){return ik=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ik.apply(null,arguments)}function gUe(t,e){if(t==null)return{};var r,n,a=xUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var yD=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=t,d=gUe(t,pUe),A=s||{width:n,height:a,x:0,y:0},h=aa("recharts-surface",i);return v.createElement("svg",ik({},Iu(d),{className:h,width:n,height:a,style:o,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),vUe=["children","className"];function ok(){return ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ok.apply(null,arguments)}function yUe(t,e){if(t==null)return{};var r,n,a=bUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Cl=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=yUe(t,vUe),s=aa("recharts-layer",n);return v.createElement("g",ok({className:s},Iu(a),{ref:e}),r)}),_ne=v.createContext(null),wUe=()=>v.useContext(_ne);function _a(t){return function(){return t}}const Cne=Math.cos,lS=Math.sin,_d=Math.sqrt,cS=Math.PI,b4=2*cS,lk=Math.PI,ck=2*lk,gm=1e-6,NUe=ck-gm;function Ene(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function _Ue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ene;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class CUe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ene:_Ue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-e,u=a-r,d=i-e,A=o-r,h=d*d+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>gm)if(!(Math.abs(A*c-u*d)>gm)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let f=n-i,m=a-o,p=c*c+u*u,g=f*f+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((lk-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,I=b/x;Math.abs(w-1)>gm&&this._append`L${e+w*d},${r+w*A}`,this._append`A${s},${s},0,0,${+(A*f>d*m)},${this._x1=e+I*c},${this._y1=r+I*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=e+o,d=r+c,A=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>gm||Math.abs(this._y1-d)>gm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%ck+ck),h>NUe?this._append`A${n},${n},0,1,${A},${e-o},${r-c}A${n},${n},0,1,${A},${this._x1=u},${this._y1=d}`:h>gm&&this._append`A${n},${n},0,${+(h>=lk)},${A},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function bD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new CUe(e)}function wD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Sne(t){this._context=t}Sne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function w4(t){return new Sne(t)}function Ine(t){return t[0]}function Bne(t){return t[1]}function Tne(t,e){var r=_a(!0),n=null,a=w4,s=null,i=bD(o);t=typeof t=="function"?t:t===void 0?Ine:_a(t),e=typeof e=="function"?e:e===void 0?Bne:_a(e);function o(c){var u,d=(c=wD(c)).length,A,h=!1,f;for(n==null&&(s=a(f=i())),u=0;u<=d;++u)!(u<d&&r(A=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(A,u,c),+e(A,u,c));if(f)return s=null,f+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:_a(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:_a(+c),o):e},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:_a(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function b_(t,e,r){var n=null,a=_a(!0),s=null,i=w4,o=null,c=bD(u);t=typeof t=="function"?t:t===void 0?Ine:_a(+t),e=typeof e=="function"?e:_a(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Bne:_a(+r);function u(A){var h,f,m,p=(A=wD(A)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(o=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=A[h],h,A))===x)if(x=!x)f=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=f;--m)o.point(b[m],w[m]);o.lineEnd(),o.areaEnd()}x&&(b[h]=+t(g,h,A),w[h]=+e(g,h,A),o.point(n?+n(g,h,A):b[h],r?+r(g,h,A):w[h]))}if(y)return o=null,y+""||null}function d(){return Tne().defined(a).curve(i).context(s)}return u.x=function(A){return arguments.length?(t=typeof A=="function"?A:_a(+A),n=null,u):t},u.x0=function(A){return arguments.length?(t=typeof A=="function"?A:_a(+A),u):t},u.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:_a(+A),u):n},u.y=function(A){return arguments.length?(e=typeof A=="function"?A:_a(+A),r=null,u):e},u.y0=function(A){return arguments.length?(e=typeof A=="function"?A:_a(+A),u):e},u.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:_a(+A),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(A){return arguments.length?(a=typeof A=="function"?A:_a(!!A),u):a},u.curve=function(A){return arguments.length?(i=A,s!=null&&(o=i(s)),u):i},u.context=function(A){return arguments.length?(A==null?s=o=null:o=i(s=A),u):s},u}class Pne{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function EUe(t){return new Pne(t,!0)}function SUe(t){return new Pne(t,!1)}const ND={draw(t,e){const r=_d(e/cS);t.moveTo(r,0),t.arc(0,0,r,0,b4)}},IUe={draw(t,e){const r=_d(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},jne=_d(1/3),BUe=jne*2,TUe={draw(t,e){const r=_d(e/BUe),n=r*jne;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},PUe={draw(t,e){const r=_d(e),n=-r/2;t.rect(n,n,r,r)}},jUe=.8908130915292852,kne=lS(cS/10)/lS(7*cS/10),kUe=lS(b4/10)*kne,FUe=-Cne(b4/10)*kne,OUe={draw(t,e){const r=_d(e*jUe),n=kUe*r,a=FUe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=b4*s/5,o=Cne(i),c=lS(i);t.lineTo(c*r,-o*r),t.lineTo(o*n-c*a,c*n+o*a)}t.closePath()}},iT=_d(3),DUe={draw(t,e){const r=-_d(e/(iT*3));t.moveTo(0,r*2),t.lineTo(-iT*r,-r),t.lineTo(iT*r,-r),t.closePath()}},Zc=-.5,eu=_d(3)/2,uk=1/_d(12),RUe=(uk/2+1)*3,MUe={draw(t,e){const r=_d(e/RUe),n=r/2,a=r*uk,s=n,i=r*uk+r,o=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(o,c),t.lineTo(Zc*n-eu*a,eu*n+Zc*a),t.lineTo(Zc*s-eu*i,eu*s+Zc*i),t.lineTo(Zc*o-eu*c,eu*o+Zc*c),t.lineTo(Zc*n+eu*a,Zc*a-eu*n),t.lineTo(Zc*s+eu*i,Zc*i-eu*s),t.lineTo(Zc*o+eu*c,Zc*c-eu*o),t.closePath()}};function LUe(t,e){let r=null,n=bD(a);t=typeof t=="function"?t:_a(t||ND),e=typeof e=="function"?e:_a(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:_a(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:_a(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function uS(){}function dS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Fne(t){this._context=t}Fne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function UUe(t){return new Fne(t)}function One(t){this._context=t}One.prototype={areaStart:uS,areaEnd:uS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:dS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QUe(t){return new One(t)}function Dne(t){this._context=t}Dne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VUe(t){return new Dne(t)}function Rne(t){this._context=t}Rne.prototype={areaStart:uS,areaEnd:uS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function HUe(t){return new Rne(t)}function MH(t){return t<0?-1:1}function LH(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(MH(s)+MH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function UH(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function oT(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,o=(s-n)/3;t._context.bezierCurveTo(n+o,a+o*e,s-o,i-o*r,s,i)}function AS(t){this._context=t}AS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oT(this,this._t0,UH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,oT(this,UH(this,r=LH(this,t,e)),r);break;default:oT(this,this._t0,r=LH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Mne(t){this._context=new Lne(t)}(Mne.prototype=Object.create(AS.prototype)).point=function(t,e){AS.prototype.point.call(this,e,t)};function Lne(t){this._context=t}Lne.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function $Ue(t){return new AS(t)}function KUe(t){return new Mne(t)}function Une(t){this._context=t}Une.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=QH(t),a=QH(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function QH(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function GUe(t){return new Une(t)}function N4(t,e){this._context=t,this._t=e}N4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function zUe(t){return new N4(t,.5)}function qUe(t){return new N4(t,0)}function WUe(t){return new N4(t,1)}function _p(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,o=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function dk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function XUe(t,e){return t[e]}function YUe(t){const e=[];return e.key=t,e}function JUe(){var t=_a([]),e=dk,r=_p,n=XUe;function a(s){var i=Array.from(t.apply(this,arguments),YUe),o,c=i.length,u=-1,d;for(const A of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(A,i[o].key,u,s)]).data=A;for(o=0,d=wD(e(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:_a(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:_a(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?dk:typeof s=="function"?s:_a(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??_p,a):r},a}function ZUe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}_p(t,e)}}function e7e(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=t[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}_p(t,e)}}function t7e(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=t[e[o]],A=d[n][1]||0,h=d[n-1][1]||0,f=(A-h)/2,m=0;m<o;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;f+=g-x}c+=A,u+=f*A}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,_p(t,e)}}var _4={},Qne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Qne);var _D={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(_D);var C4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(C4);var E4={},Vne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Vne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vne,r=C4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let o=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),o++);o<i;){const A=a[o];u?A==="\\"&&o+1<i?(o++,c+=a[o]):A===u?u="":c+=A:d?A==='"'||A==="'"?u=A:A==="]"?(d=!1,s.push(c),c=""):c+=A:A==="["?(d=!0,c&&(s.push(c),c="")):A==="."?c&&(s.push(c),c=""):c+=A,o++}return c&&s.push(c),s}t.toPath=n})(E4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qne,r=_D,n=C4,a=E4;function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let A=0;A<c.length;A++){if(d==null||e.isUnsafeProperty(c[A]))return u;d=d[c[A]]}return d===void 0?u:d}t.get=s})(_4);var r7e=_4.get;const Cp=Ef(r7e);var n7e=4;function zh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n7e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function Ns(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var o=r[i-1];return typeof o=="string"?a+o+s:o!==void 0?a+zh(o)+s:a+s},"")}var _o=t=>t===0?0:t>0?1:-1,iA=t=>typeof t=="number"&&t!=+t,vf=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,jr=t=>(typeof t=="number"||t instanceof Number)&&!iA(t),oA=t=>jr(t)||typeof t=="string",a7e=0,sb=t=>{var e=++a7e;return"".concat(t||"").concat(e)},Jo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!jr(e)&&typeof e!="string")return n;var s;if(vf(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return iA(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Hne=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function pi(t,e,r){return jr(t)&&jr(e)?zh(t+r*(e-t)):e}function s7e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Cp(n,e))===r)}var Yi=t=>t===null||typeof t>"u",nw=t=>Yi(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function i7e(t){return t!=null}function aw(){}var o7e=["type","size","sizeType"];function Ak(){return Ak=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ak.apply(null,arguments)}function VH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VH(Object(r),!0).forEach(function(n){l7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l7e(t,e,r){return(e=c7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c7e(t){var e=u7e(t,"string");return typeof e=="symbol"?e:e+""}function u7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d7e(t,e){if(t==null)return{};var r,n,a=A7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function A7e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $ne={symbolCircle:ND,symbolCross:IUe,symbolDiamond:TUe,symbolSquare:PUe,symbolStar:OUe,symbolTriangle:DUe,symbolWye:MUe},f7e=Math.PI/180,h7e=t=>{var e="symbol".concat(nw(t));return $ne[e]||ND},m7e=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*f7e;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},p7e=(t,e)=>{$ne["symbol".concat(nw(t))]=e},CD=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=d7e(t,o7e),s=HH(HH({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var o=()=>{var h=h7e(i),f=LUe().type(h).size(m7e(r,n,i)),m=f();if(m!==null)return m},{className:c,cx:u,cy:d}=s,A=Iu(s);return jr(u)&&jr(d)&&jr(r)?v.createElement("path",Ak({},A,{className:aa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};CD.registerSymbol=p7e;var Kne=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,g7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{vD(a)&&(n[a]=s=>r[a](r,s))}),n},x7e=(t,e,r)=>n=>(t(e,r,n),null),sw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];vD(a)&&typeof s=="function"&&(n||(n={}),n[a]=x7e(s,e,r))}),n};function $H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$H(Object(r),!0).forEach(function(n){y7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$H(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y7e(t,e,r){return(e=b7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b7e(t){var e=w7e(t,"string");return typeof e=="symbol"?e:e+""}function w7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Io(t,e){var r=v7e({},t),n=e,a=Object.keys(e),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fS.apply(null,arguments)}function KH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function N7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(r),!0).forEach(function(n){_7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _7e(t,e,r){return(e=C7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C7e(t){var e=E7e(t,"string");return typeof e=="symbol"?e:e+""}function E7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ou=32,S7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function I7e(t){var{data:e,iconType:r,inactiveColor:n}=t,a=ou/2,s=ou/6,i=ou/3,o=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:ou,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(ou,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(ou/8,"h").concat(ou,"v").concat(ou*3/4,"h").concat(-ou,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=N7e({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(CD,{fill:o,cx:a,cy:a,size:ou,sizeType:"diameter",type:c})}function B7e(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,o={x:0,y:0,width:ou,height:ou},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,A)=>{var h=d.formatter||a,f=aa({"recharts-legend-item":!0,["legend-item-".concat(A)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,A):d.value;return v.createElement("li",fS({className:f,style:c,key:"legend-item-".concat(A)},sw(t,d,A)),v.createElement(yD,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(I7e,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var T7e=t=>{var e=Io(t,S7e),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(B7e,fS({},e,{payload:r})))},Gne={},zne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}t.uniqBy=e})(zne);var ED={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(ED);var qne={},S4={},Wne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Wne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wne;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(S4);var Xne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Xne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S4,r=Xne;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(qne);var Yne={},Jne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Jne);var Zne={},SD={},eae={},ID={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(ID);var BD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(BD);var TD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(TD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID,r=BD,n=TD;function a(d,A,h){return typeof h!="function"?a(d,A,()=>{}):s(d,A,function f(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,f,b)},new Map)}function s(d,A,h,f){if(A===d)return!0;switch(typeof A){case"object":return i(d,A,h,f);case"function":return Object.keys(A).length>0?s(d,{...A},h,f):n.eq(d,A);default:return e.isObject(d)?typeof A=="string"?A==="":!0:n.eq(d,A)}}function i(d,A,h,f){if(A==null)return!0;if(Array.isArray(A))return c(d,A,h,f);if(A instanceof Map)return o(d,A,h,f);if(A instanceof Set)return u(d,A,h,f);const m=Object.keys(A);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(f!=null&&f.has(A))return f.get(A)===d;f==null||f.set(A,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||A[g]===void 0&&d[g]!==void 0||A[g]===null&&d[g]!==null||!h(d[g],A[g],g,d,A,f))return!1}return!0}finally{f==null||f.delete(A)}}function o(d,A,h,f){if(A.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of A.entries()){const g=d.get(m);if(h(g,p,m,d,A,f)===!1)return!1}return!0}function c(d,A,h,f){if(A.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<A.length;p++){const g=A[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,A,f)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,A,h,f){return A.size===0?!0:d instanceof Set?c([...d],[...A],h,f):!1}t.isMatchWith=a,t.isSetMatch=u})(eae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eae;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(SD);var tae={},PD={},rae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(rae);var jD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(jD);var kD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",A="[object Function]",h="[object ArrayBuffer]",f="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",I="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",E="[object BigInt64Array]",S="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=o,t.errorTag=m,t.float32ArrayTag=S,t.float64ArrayTag=O,t.functionTag=A,t.int16ArrayTag=T,t.int32ArrayTag=C,t.int8ArrayTag=I,t.mapTag=c,t.numberTag=n,t.objectTag=f,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(kD);var nae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(nae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rae,r=jD,n=kD,a=BD,s=nae;function i(d,A){return o(d,void 0,d,new Map,A)}function o(d,A,h,f=new Map,m=void 0){const p=m==null?void 0:m(d,A,h,f);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(f.has(d))return f.get(d);if(Array.isArray(d)){const g=new Array(d.length);f.set(d,g);for(let x=0;x<d.length;x++)g[x]=o(d[x],x,h,f,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;f.set(d,g);for(const[x,y]of d)g.set(x,o(y,x,h,f,m));return g}if(d instanceof Set){const g=new Set;f.set(d,g);for(const x of d)g.add(o(x,void 0,h,f,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);f.set(d,g);for(let x=0;x<d.length;x++)g[x]=o(d[x],x,h,f,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return f.set(d,g),c(g,d,h,f,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return f.set(d,g),c(g,d,h,f,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof Error){const g=new d.constructor;return f.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,f,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof String){const g=new String(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return f.set(d,g),c(g,d,h,f,m),g}return d}function c(d,A,h=d,f,m){const p=[...Object.keys(A),...e.getSymbols(A)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=o(A[x],x,h,f,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=o,t.copyProperties=c})(PD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(tae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SD,r=tae;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(Zne);var aae={},sae={},iae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PD,r=kD;function n(a,s){return e.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(A,a),A}case r.argumentsTag:{const A={};return e.copyProperties(A,a),A.length=a.length,A[Symbol.iterator]=a[Symbol.iterator],A}default:return}})}t.cloneDeepWith=n})(iae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iae;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(sae);var oae={},FD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(FD);var lae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jD;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(lae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_D,r=FD,n=lae,a=E4;function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const A=c[d];if((u==null||!Object.hasOwn(u,A))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(A)&&A<u.length))return!1;u=u[A]}return!0}t.has=s})(oae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SD,r=C4,n=sae,a=_4,s=oae;function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ED,r=Jne,n=Zne,a=aae;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(Yne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zne,r=ED,n=qne,a=Yne;function s(i,o=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(o)):[]}t.uniqBy=s})(Gne);var P7e=Gne.uniqBy;const GH=Ef(P7e);function cae(t,e,r){return e===!0?GH(t,r):typeof e=="function"?GH(t,e):t}var uae={exports:{}},dae={},Aae={exports:{}},fae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=v;function j7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var k7e=typeof Object.is=="function"?Object.is:j7e,F7e=tv.useState,O7e=tv.useEffect,D7e=tv.useLayoutEffect,R7e=tv.useDebugValue;function M7e(t,e){var r=e(),n=F7e({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return D7e(function(){a.value=r,a.getSnapshot=e,lT(a)&&s({inst:a})},[t,r,e]),O7e(function(){return lT(a)&&s({inst:a}),t(function(){lT(a)&&s({inst:a})})},[t]),R7e(r),r}function lT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!k7e(t,r)}catch{return!0}}function L7e(t,e){return e()}var U7e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?L7e:M7e;fae.useSyncExternalStore=tv.useSyncExternalStore!==void 0?tv.useSyncExternalStore:U7e;Aae.exports=fae;var Q7e=Aae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=v,V7e=Q7e;function H7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $7e=typeof Object.is=="function"?Object.is:H7e,K7e=V7e.useSyncExternalStore,G7e=I4.useRef,z7e=I4.useEffect,q7e=I4.useMemo,W7e=I4.useDebugValue;dae.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=G7e(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=q7e(function(){function c(f){if(!u){if(u=!0,d=f,f=n(f),a!==void 0&&i.hasValue){var m=i.value;if(a(m,f))return A=m}return A=f}if(m=A,$7e(d,f))return m;var p=n(f);return a!==void 0&&a(m,p)?(d=f,m):(d=f,A=p)}var u=!1,d,A,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var o=K7e(t,s[0],s[1]);return z7e(function(){i.hasValue=!0,i.value=o},[o]),W7e(o),o};uae.exports=dae;var X7e=uae.exports,OD=v.createContext(null),Y7e=t=>t,Ba=()=>{var t=v.useContext(OD);return t?t.store.dispatch:Y7e},SC=()=>{},J7e=()=>SC,Z7e=(t,e)=>t===e;function Ir(t){var e=v.useContext(OD);return X7e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:J7e,e?e.store.getState:SC,e?e.store.getState:SC,e?t:SC,Z7e)}function e9e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function t9e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function r9e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var zH=t=>Array.isArray(t)?t:[t];function n9e(t){const e=Array.isArray(t[0])?t[0]:t;return r9e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function a9e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var s9e=class{constructor(t){this.value=t}deref(){return this.value}},i9e=typeof WeakRef<"u"?WeakRef:s9e,o9e=0,qH=1;function w_(){return{s:o9e,v:void 0,o:null,p:null}}function hae(t,e={}){let r=w_();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var A;let o=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=o.o;p===null&&(o.o=p=new WeakMap);const g=p.get(m);g===void 0?(o=w_(),p.set(m,o)):o=g}else{let p=o.p;p===null&&(o.p=p=new Map);const g=p.get(m);g===void 0?(o=w_(),p.set(m,o)):o=g}}const u=o;let d;if(o.s===qH)d=o.v;else if(d=t.apply(null,arguments),s++,n){const h=((A=a==null?void 0:a.deref)==null?void 0:A.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new i9e(d):d}return u.s=qH,u.v=d,d}return i.clearCache=()=>{r=w_(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function l9e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),e9e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:A,memoizeOptions:h=[],argsMemoize:f=hae,argsMemoizeOptions:m=[]}=d,p=zH(h),g=zH(m),x=n9e(a),y=A(function(){return s++,u.apply(null,arguments)},...p),b=f(function(){i++;const I=a9e(x,arguments);return o=y.apply(null,I),o},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:A,argsMemoize:f})};return Object.assign(n,{withTypes:()=>n}),n}var Tt=l9e(hae),c9e=Object.assign((t,e=Tt)=>{t9e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>c9e}),mae={},pae={},gae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),o=e(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};t.compareValues=r})(gae);var xae={},DD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(DD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(xae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gae,r=xae,n=E4;function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(f=>String(f));const u=(f,m)=>{let p=f;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(f,m)=>m==null||f==null?m:typeof f=="object"&&"key"in f?Object.hasOwn(m,f.key)?m[f.key]:u(m,f.path):typeof f=="function"?f(m):Array.isArray(f)?u(m,f):typeof m=="object"?m[f]:m,A=i.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return s.map(f=>({original:f,criteria:A.map(m=>d(m,f))})).slice().sort((f,m)=>{for(let p=0;p<A.length;p++){const g=e.compareValues(f.criteria[p],m.criteria[p],o[p]);if(g!==0)return g}return 0}).map(f=>f.original)}t.orderBy=a})(pae);var vae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(vae);var RD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FD,r=S4,n=ID,a=TD;function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}t.isIterateeCall=s})(RD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pae,r=vae,n=RD;function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(mae);var u9e=mae.sortBy;const B4=Ef(u9e);var yae=t=>t.legend.settings,d9e=t=>t.legend.size,A9e=t=>t.legend.payload,f9e=Tt([A9e,yae],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?B4(n,r):n});function h9e(){return Ir(f9e)}var N_=1;function bae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>N_||Math.abs(i.left-e.left)>N_||Math.abs(i.top-e.top)>N_||Math.abs(i.width-e.width)>N_)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function uo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var m9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",WH=m9e,cT=()=>Math.random().toString(36).substring(7).split("").join("."),p9e={INIT:`@@redux/INIT${cT()}`,REPLACE:`@@redux/REPLACE${cT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cT()}`},hS=p9e;function MD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function wae(t,e,r){if(typeof t!="function")throw new Error(uo(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(uo(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(uo(1));return r(wae)(t,e)}let n=t,a=e,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(uo(3));return a}function A(g){if(typeof g!="function")throw new Error(uo(4));if(c)throw new Error(uo(5));let x=!0;u();const y=o++;return i.set(y,g),function(){if(x){if(c)throw new Error(uo(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!MD(g))throw new Error(uo(7));if(typeof g.type>"u")throw new Error(uo(8));if(typeof g.type!="string")throw new Error(uo(17));if(c)throw new Error(uo(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function f(g){if(typeof g!="function")throw new Error(uo(10));n=g,h({type:hS.REPLACE})}function m(){const g=A;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(uo(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[WH](){return this}}}return h({type:hS.INIT}),{dispatch:h,subscribe:A,getState:d,replaceReducer:f,[WH]:m}}function g9e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:hS.INIT})>"u")throw new Error(uo(12));if(typeof r(void 0,{type:hS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(uo(13))})}function Nae(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{g9e(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const A=n[d],h=r[A],f=i[A],m=h(f,o);if(typeof m>"u")throw o&&o.type,new Error(uo(14));u[A]=m,c=c||m!==f}return c=c||n.length!==Object.keys(i).length,c?u:i}}function mS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function x9e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(uo(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=t.map(c=>c(i));return s=mS(...o)(a.dispatch),{...a,dispatch:s}}}function _ae(t){return MD(t)&&"type"in t&&typeof t.type=="string"}var Cae=Symbol.for("immer-nothing"),XH=Symbol.for("immer-draftable"),El=Symbol.for("immer-state");function Zu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ec=Object,rv=Ec.getPrototypeOf,pS="constructor",T4="prototype",fk="configurable",gS="enumerable",IC="writable",ib="value",yf=t=>!!t&&!!t[El];function pd(t){var e;return t?Eae(t)||j4(t)||!!t[XH]||!!((e=t[pS])!=null&&e[XH])||k4(t)||F4(t):!1}var v9e=Ec[T4][pS].toString(),YH=new WeakMap;function Eae(t){if(!t||!LD(t))return!1;const e=rv(t);if(e===null||e===Ec[T4])return!0;const r=Ec.hasOwnProperty.call(e,pS)&&e[pS];if(r===Object)return!0;if(!qg(r))return!1;let n=YH.get(r);return n===void 0&&(n=Function.toString.call(r),YH.set(r,n)),n===v9e}function P4(t,e,r=!0){iw(t)===0?(r?Reflect.ownKeys(t):Ec.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function iw(t){const e=t[El];return e?e.type_:j4(t)?1:k4(t)?2:F4(t)?3:0}var JH=(t,e,r=iw(t))=>r===2?t.has(e):Ec[T4].hasOwnProperty.call(t,e),hk=(t,e,r=iw(t))=>r===2?t.get(e):t[e],xS=(t,e,r,n=iw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function y9e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var j4=Array.isArray,k4=t=>t instanceof Map,F4=t=>t instanceof Set,LD=t=>typeof t=="object",qg=t=>typeof t=="function",uT=t=>typeof t=="boolean";function b9e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var LA=t=>t.copy_||t.base_,UD=t=>t.modified_?t.copy_:t.base_;function mk(t,e){if(k4(t))return new Map(t);if(F4(t))return new Set(t);if(j4(t))return Array[T4].slice.call(t);const r=Eae(t);if(e===!0||e==="class_only"&&!r){const n=Ec.getOwnPropertyDescriptors(t);delete n[El];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o[IC]===!1&&(o[IC]=!0,o[fk]=!0),(o.get||o.set)&&(n[i]={[fk]:!0,[IC]:!0,[gS]:o[gS],[ib]:t[i]})}return Ec.create(rv(t),n)}else{const n=rv(t);if(n!==null&&r)return{...t};const a=Ec.create(n);return Ec.assign(a,t)}}function QD(t,e=!1){return O4(t)||yf(t)||!pd(t)||(iw(t)>1&&Ec.defineProperties(t,{set:__,add:__,clear:__,delete:__}),Ec.freeze(t),e&&P4(t,(r,n)=>{QD(n,!0)},!1)),t}function w9e(){Zu(2)}var __={[ib]:w9e};function O4(t){return t===null||!LD(t)?!0:Ec.isFrozen(t)}var vS="MapSet",pk="Patches",ZH="ArrayMethods",Sae={};function Ep(t){const e=Sae[t];return e||Zu(0,t),e}var e$=t=>!!Sae[t],ob,Iae=()=>ob,N9e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:e$(vS)?Ep(vS):void 0,arrayMethodsPlugin_:e$(ZH)?Ep(ZH):void 0});function t$(t,e){e&&(t.patchPlugin_=Ep(pk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function gk(t){xk(t),t.drafts_.forEach(_9e),t.drafts_=null}function xk(t){t===ob&&(ob=t.parent_)}var r$=t=>ob=N9e(ob,t);function _9e(t){const e=t[El];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function n$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[El].modified_&&(gk(e),Zu(4)),pd(t)&&(t=a$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[El].base_,t,e)}else t=a$(e,r);return C9e(e,t,!0),gk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Cae?t:void 0}function a$(t,e){if(O4(e))return e;const r=e[El];if(!r)return yS(e,t.handledSet_,t);if(!D4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Pae(r,t)}return r.copy_}function C9e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QD(e,r)}function Bae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var D4=(t,e)=>t.scope_===e,E9e=[];function Tae(t,e,r,n){const a=LA(t),s=t.type_;if(n!==void 0&&hk(a,n,s)===e){xS(a,n,r,s);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;P4(a,(c,u)=>{if(yf(u)){const d=o.get(u)||[];d.push(c),o.set(u,d)}})}const i=t.draftLocations_.get(e)??E9e;for(const o of i)xS(a,o,r,s)}function S9e(t,e,r){t.callbacks_.push(function(a){var o;const s=e;if(!s||!D4(s,a))return;(o=a.mapSetPlugin_)==null||o.fixSetContents(s);const i=UD(s);Tae(t,s.draft_??s,i,r),Pae(s,a)})}function Pae(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Bae(t)}}function I9e(t,e,r){const{scope_:n}=t;if(yf(r)){const a=r[El];D4(a,n)&&a.callbacks_.push(function(){BC(t);const i=UD(a);Tae(t,r,i,e)})}else pd(r)&&t.callbacks_.push(function(){const s=LA(t);t.type_===3?s.has(r)&&yS(r,n.handledSet_,n):hk(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&yS(hk(t.copy_,e,t.type_),n.handledSet_,n)})}function yS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||yf(t)||e.has(t)||!pd(t)||O4(t)||(e.add(t),P4(t,(n,a)=>{if(yf(a)){const s=a[El];if(D4(s,r)){const i=UD(s);xS(t,n,i,t.type_),Bae(s)}}else pd(a)&&yS(a,e,r)})),t}function B9e(t,e){const r=j4(t),n={type_:r?1:0,scope_:e?e.scope_:Iae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=bS;r&&(a=[n],s=lb);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,[o,n]}var bS={get(t,e){if(e===El)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=LA(t);if(!JH(a,e,t.type_))return T9e(t,a,e);const s=a[e];if(t.finalized_||!pd(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&b9e(e))return s;if(s===dT(t.base_,e)){BC(t);const i=t.type_===1?+e:e,o=yk(t.scope_,s,t,i);return t.copy_[i]=o}return s},has(t,e){return e in LA(t)},ownKeys(t){return Reflect.ownKeys(LA(t))},set(t,e,r){const n=jae(LA(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=dT(LA(t),e),s=a==null?void 0:a[El];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(y9e(r,a)&&(r!==void 0||JH(t.base_,e,t.type_)))return!0;BC(t),vk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),I9e(t,e,r)),!0},deleteProperty(t,e){return BC(t),dT(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),vk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=LA(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[IC]:!0,[fk]:t.type_!==1||e!=="length",[gS]:n[gS],[ib]:r[e]}},defineProperty(){Zu(11)},getPrototypeOf(t){return rv(t.base_)},setPrototypeOf(){Zu(12)}},lb={};for(let t in bS){let e=bS[t];lb[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}lb.deleteProperty=function(t,e){return lb.set.call(this,t,e,void 0)};lb.set=function(t,e,r){return bS.set.call(this,t[0],e,r,t[0])};function dT(t,e){const r=t[El];return(r?LA(r):t)[e]}function T9e(t,e,r){var a;const n=jae(e,r);return n?ib in n?n[ib]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function jae(t,e){if(!(e in t))return;let r=rv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=rv(r)}}function vk(t){t.modified_||(t.modified_=!0,t.parent_&&vk(t.parent_))}function BC(t){t.copy_||(t.assigned_=new Map,t.copy_=mk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var P9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(qg(r)&&!qg(n)){const i=n;n=r;const o=this;return function(u=i,...d){return o.produce(u,A=>n.call(this,A,...d))}}qg(n)||Zu(6),a!==void 0&&!qg(a)&&Zu(7);let s;if(pd(r)){const i=r$(this),o=yk(i,r,void 0);let c=!0;try{s=n(o),c=!1}finally{c?gk(i):xk(i)}return t$(i,a),n$(s,i)}else if(!r||!LD(r)){if(s=n(r),s===void 0&&(s=r),s===Cae&&(s=void 0),this.autoFreeze_&&QD(s,!0),a){const i=[],o=[];Ep(pk).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:o}),a(i,o)}return s}else Zu(1,r)},this.produceWithPatches=(r,n)=>{if(qg(r))return(o,...c)=>this.produceWithPatches(o,u=>r(u,...c));let a,s;return[this.produce(r,n,(o,c)=>{a=o,s=c}),a,s]},uT(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),uT(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),uT(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){pd(e)||Zu(8),yf(e)&&(e=ud(e));const r=r$(this),n=yk(r,e,void 0);return n[El].isManual_=!0,xk(r),n}finishDraft(e,r){const n=e&&e[El];(!n||!n.isManual_)&&Zu(9);const{scope_:a}=n;return t$(a,r),n$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Ep(pk).applyPatches_;return yf(e)?a(e,r):this.produce(e,s=>a(s,r))}};function yk(t,e,r,n){const[a,s]=k4(e)?Ep(vS).proxyMap_(e,r):F4(e)?Ep(vS).proxySet_(e,r):B9e(e,r);return((r==null?void 0:r.scope_)??Iae()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?S9e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function ud(t){return yf(t)||Zu(10,t),kae(t)}function kae(t){if(!pd(t)||O4(t))return t;const e=t[El];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=mk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=mk(t,!0);return P4(r,(a,s)=>{xS(r,a,kae(s))},n),e&&(e.finalized_=!1),r}var j9e=new P9e,Fae=j9e.produce;function Oae(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var k9e=Oae(),F9e=Oae,O9e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mS:mS.apply(null,arguments)};function Bu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Ic(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>_ae(n)&&n.type===t,r}var Dae=class gy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,gy.prototype)}static get[Symbol.species](){return gy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new gy(...e[0].concat(this)):new gy(...e.concat(this))}};function s$(t){return pd(t)?Fae(t,()=>{}):t}function C_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function D9e(t){return typeof t=="boolean"}var R9e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new Dae;return r&&(D9e(r)?i.push(k9e):i.push(F9e(r.extraArgument))),i},Rae="RTK_autoBatch",Ga=()=>t=>({payload:t,meta:{[Rae]:!0}}),i$=t=>e=>{setTimeout(e,t)},Mae=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i$(10):t.type==="callback"?t.queueNotification:i$(t.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const A=()=>a&&d(),h=n.subscribe(A);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var A;try{return a=!((A=d==null?void 0:d.meta)!=null&&A[Rae]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},M9e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Dae(t);return n&&a.push(Mae(typeof n=="object"?n:void 0)),a};function L9e(t){const e=R9e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let o;if(typeof r=="function")o=r;else if(MD(r))o=Nae(r);else throw new Error(Ic(1));let c;typeof n=="function"?c=n(e):c=e();let u=mS;a&&(u=O9e({trace:!1,...typeof a=="object"&&a}));const d=x9e(...c),A=M9e(d);let h=typeof i=="function"?i(A):A();const f=u(...h);return wae(o,s,f)}function Lae(t){const e={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Ic(28));if(o in e)throw new Error(Ic(29));return e[o]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function U9e(t){return typeof t=="function"}function Q9e(t,e){let[r,n,a]=Lae(e),s;if(U9e(t))s=()=>s$(t());else{const o=s$(t);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,A)=>{if(A)if(yf(d)){const f=A(d,c);return f===void 0?d:f}else{if(pd(d))return Fae(d,h=>A(h,c));{const h=A(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var V9e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",H9e=(t=21)=>{let e="",r=t;for(;r--;)e+=V9e[Math.random()*64|0];return e},$9e=Symbol.for("rtk-slice-createasyncthunk");function K9e(t,e){return`${t}/${e}`}function G9e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[$9e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Ic(11));const o=(typeof a.reducers=="function"?a.reducers(q9e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,I){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Ic(12));if(T in u.sliceCaseReducersByType)throw new Error(Ic(13));return u.sliceCaseReducersByType[T]=I,d},addMatcher(w,I){return u.sliceMatchers.push({matcher:w,reducer:I}),d},exposeAction(w,I){return u.actionCreators[w]=I,d},exposeCaseReducer(w,I){return u.sliceCaseReducersByName[w]=I,d}};c.forEach(w=>{const I=o[w],T={reducerName:w,type:K9e(s,w),createNotation:typeof a.reducers=="function"};X9e(I)?J9e(T,I,d,e):W9e(T,I,d)});function A(){const[w={},I=[],T=void 0]=typeof a.extraReducers=="function"?Lae(a.extraReducers):[a.extraReducers],C={...w,...u.sliceCaseReducersByType};return Q9e(a.initialState,E=>{for(let S in C)E.addCase(S,C[S]);for(let S of u.sliceMatchers)E.addMatcher(S.matcher,S.reducer);for(let S of I)E.addMatcher(S.matcher,S.reducer);T&&E.addDefaultCase(T)})}const h=w=>w,f=new Map,m=new WeakMap;let p;function g(w,I){return p||(p=A()),p(w,I)}function x(){return p||(p=A()),p.getInitialState()}function y(w,I=!1){function T(E){let S=E[w];return typeof S>"u"&&I&&(S=C_(m,T,x)),S}function C(E=h){const S=C_(f,I,()=>new WeakMap);return C_(S,E,()=>{const O={};for(const[B,P]of Object.entries(a.selectors??{}))O[B]=z9e(P,E,()=>C_(m,E,x),I);return O})}return{reducerPath:w,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:I,...T}={}){const C=I??i;return w.inject({reducerPath:C,reducer:g},T),{...b,...y(C,!0)}}};return b}}function z9e(t,e,r,n){function a(s,...i){let o=e(s);return typeof o>"u"&&n&&(o=r()),t(o,...i)}return a.unwrapped=t,a}var Zl=G9e();function q9e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function W9e({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!Y9e(n))throw new Error(Ic(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?Bu(t,i):Bu(t))}function X9e(t){return t._reducerDefinitionType==="asyncThunk"}function Y9e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function J9e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Ic(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,A=a(t,s,d);n.exposeAction(e,A),i&&n.addCase(A.fulfilled,i),o&&n.addCase(A.pending,o),c&&n.addCase(A.rejected,c),u&&n.addMatcher(A.settled,u),n.exposeCaseReducer(e,{fulfilled:i||E_,pending:o||E_,rejected:c||E_,settled:u||E_})}function E_(){}var Z9e="task",Uae="listener",Qae="completed",VD="cancelled",eQe=`task-${VD}`,tQe=`task-${Qae}`,bk=`${Uae}-${VD}`,rQe=`${Uae}-${Qae}`,R4=class{constructor(t){Rn(this,"name","TaskAbortError");Rn(this,"message");this.code=t,this.message=`${Z9e} ${VD} (reason: ${t})`}},HD=(t,e)=>{if(typeof t!="function")throw new TypeError(Ic(32))},wS=()=>{},Vae=(t,e=wS)=>(t.catch(e),t),Hae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ym=t=>{if(t.aborted)throw new R4(t.reason)};function $ae(t,e){let r=wS;return new Promise((n,a)=>{const s=()=>a(new R4(t.reason));if(t.aborted){s();return}r=Hae(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=wS})}var nQe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof R4?"cancelled":"rejected",error:r}}finally{e==null||e()}},NS=t=>e=>Vae($ae(t,e).then(r=>(Ym(t),r))),Kae=t=>{const e=NS(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Px}=Object,o$={},M4="listenerMiddleware",aQe=(t,e)=>{const r=n=>Hae(t,()=>n.abort(t.reason));return(n,a)=>{HD(n);const s=new AbortController;r(s);const i=nQe(async()=>{Ym(t),Ym(s.signal);const o=await n({pause:NS(s.signal),delay:Kae(s.signal),signal:s.signal});return Ym(s.signal),o},()=>s.abort(tQe));return a!=null&&a.autoJoin&&e.push(i.catch(wS)),{result:NS(t)(i),cancel(){s.abort(eQe)}}}},sQe=(t,e)=>{const r=async(n,a)=>{Ym(e);let s=()=>{};const o=[new Promise((c,u)=>{let d=t({predicate:n,effect:(A,h)=>{h.unsubscribe(),c([A,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await $ae(e,Promise.race(o));return Ym(e),c}finally{s()}};return(n,a)=>Vae(r(n,a))},Gae=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Bu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Ic(21));return HD(s),{predicate:a,type:e,effect:s}},zae=Px(t=>{const{type:e,predicate:r,effect:n}=Gae(t);return{id:H9e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ic(22))}}},{withTypes:()=>zae}),l$=(t,e)=>{const{type:r,effect:n,predicate:a}=Gae(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},wk=t=>{t.pending.forEach(e=>{e.abort(bk)})},iQe=(t,e)=>()=>{for(const r of e.keys())wk(r);t.clear()},c$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},qae=Px(Bu(`${M4}/add`),{withTypes:()=>qae}),oQe=Bu(`${M4}/removeAll`),Wae=Px(Bu(`${M4}/remove`),{withTypes:()=>Wae}),lQe=(...t)=>{console.error(`${M4}/error`,...t)},ow=(t={})=>{const e=new Map,r=new Map,n=f=>{const m=r.get(f)??0;r.set(f,m+1)},a=f=>{const m=r.get(f)??1;m===1?r.delete(f):r.set(f,m-1)},{extra:s,onError:i=lQe}=t;HD(i);const o=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&wk(f)}),c=f=>{const m=l$(e,f)??zae(f);return o(m)};Px(c,{withTypes:()=>c});const u=f=>{const m=l$(e,f);return m&&(m.unsubscribe(),f.cancelActive&&wk(m)),!!m};Px(u,{withTypes:()=>u});const d=async(f,m,p,g)=>{const x=new AbortController,y=sQe(c,x.signal),b=[];try{f.pending.add(x),n(f),await Promise.resolve(f.effect(m,Px({},p,{getOriginalState:g,condition:(w,I)=>y(w,I).then(Boolean),take:y,delay:Kae(x.signal),pause:NS(x.signal),extra:s,signal:x.signal,fork:aQe(x.signal,b),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((w,I,T)=>{w!==x&&(w.abort(bk),T.delete(w))})},cancel:()=>{x.abort(bk),f.pending.delete(x)},throwIfCancelled:()=>{Ym(x.signal)}})))}catch(w){w instanceof R4||c$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(rQe),a(f),f.pending.delete(x)}},A=iQe(e,r);return{middleware:f=>m=>p=>{if(!_ae(p))return m(p);if(qae.match(p))return c(p.payload);if(oQe.match(p)){A();return}if(Wae.match(p))return u(p.payload);let g=f.getState();const x=()=>{if(g===o$)throw new Error(Ic(23));return g};let y;try{if(y=m(p),e.size>0){const b=f.getState(),w=Array.from(e.values());for(const I of w){let T=!1;try{T=I.predicate(p,b,g)}catch(C){T=!1,c$(i,C,{raisedBy:"predicate"})}T&&d(I,p,f,x)}}}finally{g=o$}return y},startListening:c,stopListening:u,clearListeners:A}};function Ic(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var cQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Xae=Zl({name:"chartLayout",initialState:cQe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:uQe,setLayout:dQe,setChartSize:AQe,setScale:fQe}=Xae.actions,hQe=Xae.reducer;function Yae(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function ps(t){return Number.isFinite(t)}function S0(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function u$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(r),!0).forEach(function(n){mQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mQe(t,e,r){return(e=pQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pQe(t){var e=gQe(t,"string");return typeof e=="symbol"?e:e+""}function gQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ua(t,e,r){return Yi(t)||Yi(e)?r:oA(e)?Cp(t,e,r):typeof e=="function"?e(t):r}var xQe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=e;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&jr(t[s]))return hx(hx({},t),{},{[s]:t[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&jr(t[i]))return hx(hx({},t),{},{[i]:t[i]+(a||0)})}return t},Wp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",d$=1e-4,vQe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-d$,s=Math.max(n[0],n[1])+d$,i=t(e[0]),o=t(e[r-1]);(i<a||i>s||o<a||o>s)&&t.domain([e[0],e[r-1]])}},yQe=(t,e)=>{if(!e||e.length!==2||!jr(e[0])||!jr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!jr(t[0])||t[0]<r)&&(a[0]=r),(!jr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},bQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,o=0;o<r;++o){var c=t[o],u=c==null?void 0:c[a];if(u!=null){var d=u[1],A=u[0],h=iA(d)?A:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},wQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var o=t[i],c=o==null?void 0:o[a];if(c!=null){var u=iA(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},NQe={sign:bQe,expand:ZUe,none:_p,silhouette:e7e,wiggle:t7e,positive:wQe},_Qe=(t,e,r)=>{var n,a=(n=NQe[r])!==null&&n!==void 0?n:_p,s=JUe().keys(e).value((o,c)=>Number(Ua(o,c,0))).order(dk).offset(a),i=s(t);return i.forEach((o,c)=>{o.forEach((u,d)=>{var A=Ua(t[d],e[c],0);Array.isArray(A)&&A.length===2&&jr(A[0])&&jr(A[1])&&(u[0]=A[0],u[1]=A[1])})}),i};function CQe(t){return t==null?void 0:String(t)}var A$=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var o=Ua(s,e.dataKey,e.scale.domain()[i]);return Yi(o)?null:e.scale(o)-a/2+n},EQe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},SQe=t=>{var e=t.flat(2).filter(jr);return[Math.min(...e),Math.max(...e)]},IQe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],BQe=(t,e,r)=>{if(t!=null)return IQe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Yae(u,e,r),A=SQe(d);return!ps(A[0])||!ps(A[1])?c:[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},f$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_S=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=B4(e,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function m$(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return hx(hx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function L4(t,e){if(t)return String(t);if(typeof e=="string")return e}var TQe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},PQe=(t,e)=>e==="centric"?t.angle:t.radius,kf=t=>t.layout.width,Ff=t=>t.layout.height,jQe=t=>t.layout.scale,Jae=t=>t.layout.margin,U4=Tt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Q4=Tt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Zae="data-recharts-item-index",ese="data-recharts-item-id",lw=60;function p$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function S_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(r),!0).forEach(function(n){kQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kQe(t,e,r){return(e=FQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FQe(t){var e=OQe(t,"string");return typeof e=="symbol"?e:e+""}function OQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DQe=t=>t.brush.height;function RQe(t){var e=Q4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:lw;return r+a}return r},0)}function MQe(t){var e=Q4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:lw;return r+a}return r},0)}function LQe(t){var e=U4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function UQe(t){var e=U4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Ii=Tt([kf,Ff,Jae,DQe,RQe,MQe,LQe,UQe,yae,d9e],(t,e,r,n,a,s,i,o,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},A={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=S_(S_({},A),d),f=h.bottom;h.bottom+=n,h=xQe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return S_(S_({brushBottom:f},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),QQe=Tt(Ii,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),$D=Tt(kf,Ff,(t,e)=>({x:0,y:0,width:t,height:e})),VQe=v.createContext(null),Rc=()=>v.useContext(VQe)!=null,V4=t=>t.brush,H4=Tt([V4,Ii,Jae],(t,e,r)=>({height:t.height,x:jr(t.x)?t.x:e.left,y:jr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:jr(t.width)?t.width:e.width})),tse={},rse={},nse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},A=()=>{u&&d(),p()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,A()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,o=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,o=y;const b=h==null;f(),c&&b&&d()};return x.schedule=f,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(nse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nse;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,A=null;const h=e.debounce(function(...p){d=n.apply(this,p),A=null},a,{edges:u}),f=function(...p){return c!=null&&(A===null&&(A=Date.now()),Date.now()-A>=c)?(d=n.apply(this,p),A=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return f.cancel=h.cancel,f.flush=m,f}t.debounce=r})(rse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rse;function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:o})}t.throttle=r})(tse);var HQe=tse.throttle;const $Qe=Ef(HQe);var g$=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},ase=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,o=vf(n)?t:Number(n),c=vf(a)?e:Number(a);return s&&s>0&&(o?c=o/s:c&&(o=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:o,calculatedHeight:c}},KQe={width:0,height:0,overflow:"visible"},GQe={width:0,overflowX:"visible"},zQe={height:0,overflowY:"visible"},qQe={},WQe=t=>{var{width:e,height:r}=t,n=vf(e),a=vf(r);return n&&a?KQe:n?GQe:a?zQe:qQe};function XQe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Nk(){return Nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nk.apply(null,arguments)}function x$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(r),!0).forEach(function(n){YQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YQe(t,e,r){return(e=JQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JQe(t){var e=ZQe(t,"string");return typeof e=="symbol"?e:e+""}function ZQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sse=v.createContext({width:-1,height:-1});function eVe(t){return S0(t.width)&&S0(t.height)}function ise(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return eVe(a)?v.createElement(sse.Provider,{value:a},e):null}var KD=()=>v.useContext(sse),tVe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:A,className:h,onResize:f,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=f,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((E,S)=>{y(O=>{var B=Math.round(E),P=Math.round(S);return O.containerWidth===B&&O.containerHeight===P?O:{containerWidth:B,containerHeight:P}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return aw;var E=P=>{var D,{width:W,height:Ae}=P[0].contentRect;b(W,Ae),(D=g.current)===null||D===void 0||D.call(g,W,Ae)};d>0&&(E=$Qe(E,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(E),{width:O,height:B}=p.current.getBoundingClientRect();return b(O,B),S.observe(p.current),()=>{S.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:I}=x;g$(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:C}=ase(w,I,{width:a,height:s,aspect:r,maxHeight:c});return g$(T!=null&&T>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,C,a,s,i,o,r),v.createElement("div",{id:A?"".concat(A):void 0,className:aa("recharts-responsive-container",h),style:v$(v$({},m),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:p},v.createElement("div",{style:WQe({width:a,height:s})},v.createElement(ise,{width:T,height:C},u)))}),y$=v.forwardRef((t,e)=>{var r=KD();if(S0(r.width)&&S0(r.height))return t.children;var{width:n,height:a}=XQe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=ase(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return jr(s)&&jr(i)?v.createElement(ise,{width:s,height:i},t.children):v.createElement(tVe,Nk({},t,{width:n,height:a,ref:e}))});function ose(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var $4=()=>{var t,e=Rc(),r=Ir(QQe),n=Ir(H4),a=(t=Ir(V4))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},rVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},nVe=()=>{var t;return(t=Ir(Ii))!==null&&t!==void 0?t:rVe},lse=()=>Ir(kf),cse=()=>Ir(Ff),aVe=()=>Ir(t=>t.layout.margin),On=t=>t.layout.layoutType,cw=()=>Ir(On),sVe=()=>{var t=cw();return t!==void 0},K4=t=>{var e=Ba(),r=Rc(),{width:n,height:a}=t,s=KD(),i=n,o=a;return s&&(i=s.width>0?s.width:n,o=s.height>0?s.height:a),v.useEffect(()=>{!r&&S0(i)&&S0(o)&&e(AQe({width:i,height:o}))},[e,r,i,o]),null},use=Symbol.for("immer-nothing"),b$=Symbol.for("immer-draftable"),kc=Symbol.for("immer-state");function ed(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var cb=Object.getPrototypeOf;function nv(t){return!!t&&!!t[kc]}function Sp(t){var e;return t?dse(t)||Array.isArray(t)||!!t[b$]||!!((e=t.constructor)!=null&&e[b$])||uw(t)||z4(t):!1}var iVe=Object.prototype.constructor.toString(),w$=new WeakMap;function dse(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=w$.get(r);return n===void 0&&(n=Function.toString.call(r),w$.set(r,n)),n===iVe}function CS(t,e,r=!0){G4(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function G4(t){const e=t[kc];return e?e.type_:Array.isArray(t)?1:uw(t)?2:z4(t)?3:0}function _k(t,e){return G4(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ase(t,e,r){const n=G4(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function oVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function uw(t){return t instanceof Map}function z4(t){return t instanceof Set}function xm(t){return t.copy_||t.base_}function Ck(t,e){if(uw(t))return new Map(t);if(z4(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=dse(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[kc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(cb(t),n)}else{const n=cb(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function GD(t,e=!1){return q4(t)||nv(t)||!Sp(t)||(G4(t)>1&&Object.defineProperties(t,{set:I_,add:I_,clear:I_,delete:I_}),Object.freeze(t),e&&Object.values(t).forEach(r=>GD(r,!0))),t}function lVe(){ed(2)}var I_={value:lVe};function q4(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var cVe={};function Ip(t){const e=cVe[t];return e||ed(0,t),e}var ub;function fse(){return ub}function uVe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function N$(t,e){e&&(Ip("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ek(t){Sk(t),t.drafts_.forEach(dVe),t.drafts_=null}function Sk(t){t===ub&&(ub=t.parent_)}function _$(t){return ub=uVe(ub,t)}function dVe(t){const e=t[kc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function C$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[kc].modified_&&(Ek(e),ed(4)),Sp(t)&&(t=ES(e,t),e.parent_||SS(e,t)),e.patches_&&Ip("Patches").generateReplacementPatches_(r[kc].base_,t,e.patches_,e.inversePatches_)):t=ES(e,r,[]),Ek(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==use?t:void 0}function ES(t,e,r){if(q4(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[kc];if(!a)return CS(e,(s,i)=>E$(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return SS(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),CS(i,(c,u)=>E$(t,a,s,c,u,r,o),n),SS(t,s,!1),r&&t.patches_&&Ip("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function E$(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const o=q4(a);if(!(o&&!i)){if(nv(a)){const c=s&&e&&e.type_!==3&&!_k(e.assigned_,n)?s.concat(n):void 0,u=ES(t,a,c);if(Ase(r,n,u),nv(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Sp(a)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&o)return;ES(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(uw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&SS(t,a)}}}function SS(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&GD(e,r)}function AVe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:fse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=zD;r&&(a=[n],s=db);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var zD={get(t,e){if(e===kc)return t;const r=xm(t);if(!_k(r,e))return fVe(t,r,e);const n=r[e];return t.finalized_||!Sp(n)?n:n===AT(t.base_,e)?(fT(t),t.copy_[e]=Bk(n,t)):n},has(t,e){return e in xm(t)},ownKeys(t){return Reflect.ownKeys(xm(t))},set(t,e,r){const n=hse(xm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=AT(xm(t),e),s=a==null?void 0:a[kc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(oVe(r,a)&&(r!==void 0||_k(t.base_,e)))return!0;fT(t),Ik(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return AT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,fT(t),Ik(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=xm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){ed(11)},getPrototypeOf(t){return cb(t.base_)},setPrototypeOf(){ed(12)}},db={};CS(zD,(t,e)=>{db[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});db.deleteProperty=function(t,e){return db.set.call(this,t,e,void 0)};db.set=function(t,e,r){return zD.set.call(this,t[0],e,r,t[0])};function AT(t,e){const r=t[kc];return(r?xm(r):t)[e]}function fVe(t,e,r){var a;const n=hse(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function hse(t,e){if(!(e in t))return;let r=cb(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=cb(r)}}function Ik(t){t.modified_||(t.modified_=!0,t.parent_&&Ik(t.parent_))}function fT(t){t.copy_||(t.copy_=Ck(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hVe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&ed(6),n!==void 0&&typeof n!="function"&&ed(7);let a;if(Sp(e)){const s=_$(this),i=Bk(e,void 0);let o=!0;try{a=r(i),o=!1}finally{o?Ek(s):Sk(s)}return N$(s,n),C$(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===use&&(a=void 0),this.autoFreeze_&&GD(a,!0),n){const s=[],i=[];Ip("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else ed(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...o)=>this.produceWithPatches(i,c=>e(c,...o));let n,a;return[this.produce(e,r,(i,o)=>{n=i,a=o}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Sp(t)||ed(8),nv(t)&&(t=mVe(t));const e=_$(this),r=Bk(t,void 0);return r[kc].isManual_=!0,Sk(e),r}finishDraft(t,e){const r=t&&t[kc];(!r||!r.isManual_)&&ed(9);const{scope_:n}=r;return N$(n,e),C$(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Ip("Patches").applyPatches_;return nv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function Bk(t,e){const r=uw(t)?Ip("MapSet").proxyMap_(t,e):z4(t)?Ip("MapSet").proxySet_(t,e):AVe(t,e);return(e?e.scope_:fse()).drafts_.push(r),r}function mVe(t){return nv(t)||ed(10,t),mse(t)}function mse(t){if(!Sp(t)||q4(t))return t;const e=t[kc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ck(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Ck(t,!0);return CS(r,(a,s)=>{Ase(r,a,mse(s))},n),e&&(e.finalized_=!1),r}var pVe=new hVe;pVe.produce;var gVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pse=Zl({name:"legend",initialState:gVe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ga()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=ud(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:Ga()},removeLegendPayload:{reducer(t,e){var r=ud(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Ga()}}}),{setLegendSize:S$,setLegendSettings:xVe,addLegendPayload:gse,replaceLegendPayload:xse,removeLegendPayload:vse}=pse.actions,vVe=pse.reducer,yVe=["contextPayload"];function Tk(){return Tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tk.apply(null,arguments)}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function av(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){bVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bVe(t,e,r){return(e=wVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wVe(t){var e=NVe(t,"string");return typeof e=="symbol"?e:e+""}function NVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ve(t,e){if(t==null)return{};var r,n,a=CVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function CVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function EVe(t){return t.value}function SVe(t){var{contextPayload:e}=t,r=_Ve(t,yVe),n=cae(e,t.payloadUniqBy,EVe),a=av(av({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(T7e,a)}function IVe(t,e,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),av(av({},u),d)}function BVe(t){var e=Ba();return v.useEffect(()=>{e(xVe(t))},[e,t]),null}function TVe(t){var e=Ba();return v.useEffect(()=>(e(S$(t)),()=>{e(S$({width:0,height:0}))}),[e,t]),null}function PVe(t,e,r,n){return t==="vertical"&&jr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var jVe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Pk(t){var e=Io(t,jVe),r=h9e(),n=wUe(),a=aVe(),{width:s,height:i,wrapperStyle:o,portal:c}=e,[u,d]=bae([r]),A=lse(),h=cse();if(A==null||h==null)return null;var f=A-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=PVe(e.layout,i,s,f),p=c?o:av(av({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},IVe(o,e,a,A,h,u)),o),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(BVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(TVe,{width:u.width,height:u.height}),v.createElement(SVe,Tk({},e,m,{margin:a,chartWidth:A,chartHeight:h,contextPayload:r})));return id.createPortal(x,g)}Pk.displayName="Legend";function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jk.apply(null,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){kVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kVe(t,e,r){return(e=FVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FVe(t){var e=OVe(t,"string");return typeof e=="symbol"?e:e+""}function OVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DVe(t){return Array.isArray(t)&&oA(t[0])&&oA(t[1])?t.join(" ~ "):t}var RVe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:A,accessibilityLayer:h=!1}=t,f=()=>{if(s&&s.length){var I={padding:0,margin:0},T=(o?B4(s,o):s).map((C,E)=>{if(C.type==="none")return null;var S=C.formatter||i||DVe,{value:O,name:B}=C,P=O,D=B;if(S){var W=S(O,B,C,E,s);if(Array.isArray(W))[P,D]=W;else if(W!=null)P=W;else return null}var Ae=hT({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:Ae},oA(D)?v.createElement("span",{className:"recharts-tooltip-item-name"},D):null,oA(D)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},P),v.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},m=hT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=hT({margin:0},a),g=!Yi(d),x=g?d:"",y=aa("recharts-default-tooltip",c),b=aa("recharts-tooltip-label",u);g&&A&&s!==void 0&&s!==null&&(x=A(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",jk({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),f())},L1="recharts-tooltip-wrapper",MVe={visibility:"hidden"};function LVe(t){var{coordinate:e,translateX:r,translateY:n}=t;return aa(L1,{["".concat(L1,"-right")]:jr(r)&&e&&jr(e.x)&&r>=e.x,["".concat(L1,"-left")]:jr(r)&&e&&jr(e.x)&&r<e.x,["".concat(L1,"-bottom")]:jr(n)&&e&&jr(e.y)&&n>=e.y,["".concat(L1,"-top")]:jr(n)&&e&&jr(e.y)&&n<e.y})}function T$(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(s&&jr(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),A=r[n]+a;if(e[n])return i[n]?d:A;var h=c[n];if(h==null)return 0;if(i[n]){var f=d,m=h;return f<m?Math.max(A,h):Math.max(d,h)}if(u==null)return 0;var p=A+o,g=h+u;return p>g?Math.max(d,h):Math.max(A,h)}function UVe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function QVe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=t,u,d,A;return i.height>0&&i.width>0&&r?(d=T$({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),A=T$({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=UVe({translateX:d,translateY:A,useTranslate3d:o})):u=MVe,{cssProperties:u,cssClasses:LVe({translateX:d,translateY:A,coordinate:r})}}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function B_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){kk(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kk(t,e,r){return(e=VVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VVe(t){var e=HVe(t,"string");return typeof e=="symbol"?e:e+""}function HVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $Ve extends v.PureComponent{constructor(){super(...arguments),kk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),kk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:A,useTranslate3d:h,viewBox:f,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=QVe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:A,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:f}),w=x?{}:B_(B_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=B_(B_({},w),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:I,ref:g},s)}}var yse=()=>{var t;return(t=Ir(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fk.apply(null,arguments)}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){KVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KVe(t,e,r){return(e=GVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GVe(t){var e=zVe(t,"string");return typeof e=="symbol"?e:e+""}function zVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F$={curveBasisClosed:QUe,curveBasisOpen:VUe,curveBasis:UUe,curveBumpX:EUe,curveBumpY:SUe,curveLinearClosed:HUe,curveLinear:w4,curveMonotoneX:$Ue,curveMonotoneY:KUe,curveNatural:GUe,curveStep:zUe,curveStepAfter:WUe,curveStepBefore:qUe},IS=t=>ps(t.x)&&ps(t.y),O$=t=>t.base!=null&&IS(t.base)&&IS(t),U1=t=>t.x,Q1=t=>t.y,qVe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(nw(t));return(r==="curveMonotone"||r==="curveBump")&&e?F$["".concat(r).concat(e==="vertical"?"Y":"X")]:F$[r]||w4},WVe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=qVe(e,a),o=s?r.filter(IS):r,c;if(Array.isArray(n)){var u=r.map((f,m)=>k$(k$({},f),{},{base:n[m]}));a==="vertical"?c=b_().y(Q1).x1(U1).x0(f=>f.base.x):c=b_().x(U1).y1(Q1).y0(f=>f.base.y);var d=c.defined(O$).curve(i),A=s?u.filter(O$):u;return d(A)}a==="vertical"&&jr(n)?c=b_().y(Q1).x1(U1).x0(n):jr(n)?c=b_().x(U1).y1(Q1).y0(n):c=Tne().x(U1).y(Q1);var h=c.defined(IS).curve(i);return h(o)},qD=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=cw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},o=r&&r.length?WVe(i):n;return v.createElement("path",Fk({},sA(t),g7e(t),{className:aa("recharts-curve",e),d:o===null?void 0:o,ref:a}))},XVe=["x","y","top","left","width","height","className"];function Ok(){return Ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ok.apply(null,arguments)}function D$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(r),!0).forEach(function(n){JVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JVe(t,e,r){return(e=ZVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZVe(t){var e=eHe(t,"string");return typeof e=="symbol"?e:e+""}function eHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tHe(t,e){if(t==null)return{};var r,n,a=rHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nHe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),aHe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=t,c=tHe(t,XVe),u=YVe({x:e,y:r,top:n,left:a,width:s,height:i},c);return!jr(e)||!jr(r)||!jr(s)||!jr(i)||!jr(n)||!jr(a)?null:v.createElement("path",Ok({},Iu(u),{className:aa("recharts-cross",o),d:nHe(e,r,s,i,n,a)}))};function sHe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){iHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iHe(t,e,r){return(e=oHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oHe(t){var e=lHe(t,"string");return typeof e=="symbol"?e:e+""}function lHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cHe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),bse=(t,e,r)=>t.map(n=>"".concat(cHe(n)," ").concat(e,"ms ").concat(r)).join(","),uHe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ab=(t,e)=>Object.keys(e).reduce((r,n)=>M$(M$({},r),{},{[n]:t(n,e[n])}),{});function L$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(r),!0).forEach(function(n){dHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dHe(t,e,r){return(e=AHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AHe(t){var e=fHe(t,"string");return typeof e=="symbol"?e:e+""}function fHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BS=(t,e,r)=>t+(e-t)*r,Dk=t=>{var{from:e,to:r}=t;return e!==r},wse=(t,e,r)=>{var n=Ab((a,s)=>{if(Dk(s)){var[i,o]=t(s.from,s.to,s.velocity);return gi(gi({},s),{},{from:i,velocity:o})}return s},e);return r<1?Ab((a,s)=>Dk(s)&&n[a]!=null?gi(gi({},s),{},{velocity:BS(s.velocity,n[a].velocity,r),from:BS(s.from,n[a].from,r)}):s,e):wse(t,n,r-1)};function hHe(t,e,r,n,a,s){var i,o=n.reduce((h,f)=>gi(gi({},h),{},{[f]:{from:t[f],velocity:0,to:e[f]}}),{}),c=()=>Ab((h,f)=>f.from,o),u=()=>!Object.values(o).filter(Dk).length,d=null,A=h=>{i||(i=h);var f=h-i,m=f/r.dt;o=wse(r,o,m),a(gi(gi(gi({},t),e),c())),i=h,u()||(d=s.setTimeout(A))};return()=>(d=s.setTimeout(A),()=>{var h;(h=d)===null||h===void 0||h()})}function mHe(t,e,r,n,a,s,i){var o=null,c=a.reduce((A,h)=>{var f=t[h],m=e[h];return f==null||m==null?A:gi(gi({},A),{},{[h]:[f,m]})},{}),u,d=A=>{u||(u=A);var h=(A-u)/n,f=Ab((p,g)=>BS(...g,r(h)),c);if(s(gi(gi(gi({},t),e),f)),h<1)o=i.setTimeout(d);else{var m=Ab((p,g)=>BS(...g,r(1)),c);s(gi(gi(gi({},t),e),m))}};return()=>(o=i.setTimeout(d),()=>{var A;(A=o)===null||A===void 0||A()})}const pHe=(t,e,r,n,a,s)=>{var i=uHe(t,e);return r==null?()=>(a(gi(gi({},t),e)),()=>{}):r.isStepper===!0?hHe(t,e,r,i,a,s):mHe(t,e,r,n,i,a,s)};var TS=1e-4,Nse=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],_se=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),U$=(t,e)=>r=>{var n=Nse(t,e);return _se(n,r)},gHe=(t,e)=>r=>{var n=Nse(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return _se(a,r)},xHe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},vHe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=xHe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},yHe=(t,e,r,n)=>{var a=U$(t,r),s=U$(e,n),i=gHe(t,r),o=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,A=d,h=0;h<8;++h){var f=a(A)-d,m=i(A);if(Math.abs(f-d)<TS||m<TS)return s(A);A=o(A-f/m)}return s(A)};return c.isStepper=!1,c},Q$=function(){return yHe(...vHe(...arguments))},bHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,A=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<TS&&Math.abs(A)<TS?[o,0]:[h,A]};return s.isStepper=!0,s.dt=a,s},wHe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q$(t);case"spring":return bHe();default:if(t.split("(")[0]==="cubic-bezier")return Q$(t)}return typeof t=="function"?t:null};function NHe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class _He{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function CHe(){return NHe(new _He)}var EHe=v.createContext(CHe);function SHe(t,e){var r=v.useContext(EHe);return v.useMemo(()=>e??r(t),[t,e,r])}var IHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),W4={isSsr:IHe()},BHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},V$={t:0},mT={t:1};function X4(t){var e=Io(t,BHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=e,d=r==="auto"?!W4.isSsr:r,A=SHe(e.animationId,e.animationManager),[h,f]=v.useState(d?V$:mT),m=v.useRef(null);return v.useEffect(()=>{d||f(mT)},[d]),v.useEffect(()=>{if(!d||!n)return aw;var p=pHe(V$,mT,wHe(s),a,f,A.getTimeoutController()),g=()=>{m.current=p()};return A.start([c,i,g,a,o]),()=>{A.stop(),m.current&&m.current(),o()}},[d,n,a,s,i,c,o,A]),u(h.t)}function Y4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(sb(e)),n=v.useRef(t);return n.current!==t&&(r.current=sb(e),n.current=t),r.current}var THe=["radius"],PHe=["radius"],H$,$$,K$,G$,z$,q$,W$,X$,Y$,J$;function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){jHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jHe(t,e,r){return(e=kHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kHe(t){var e=FHe(t,"string");return typeof e=="symbol"?e:e+""}function FHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PS(){return PS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PS.apply(null,arguments)}function tK(t,e){if(t==null)return{};var r,n,a=OHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function OHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Md(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var rK=(t,e,r,n,a)=>{var s=zh(r),i=zh(n),o=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,A;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];A=Ns(H$||(H$=Md(["M",",",""])),t,e+c*h[0]),h[0]>0&&(A+=Ns($$||($$=Md(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),A+=Ns(K$||(K$=Md(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(A+=Ns(G$||(G$=Md(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),A+=Ns(z$||(z$=Md(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(A+=Ns(q$||(q$=Md(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),A+=Ns(W$||(W$=Md(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(A+=Ns(X$||(X$=Md(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),A+="Z"}else if(o>0&&a===+a&&a>0){var p=Math.min(o,a);A=Ns(Y$||(Y$=Md(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else A=Ns(J$||(J$=Md(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return A},nK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Cse=t=>{var e=Io(t,nK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ce=r.current.getTotalLength();ce&&a(ce)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=e,{animationEasing:A,animationDuration:h,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(o),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:o,height:c,radius:u}),[s,i,o,c,u]),I=Y4(w,"rectangle-");if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var T=aa("recharts-rectangle",d);if(!p){var C=Iu(e),{radius:E}=C,S=tK(C,THe);return v.createElement("path",PS({},S,{x:zh(s),y:zh(i),width:zh(o),height:zh(c),radius:typeof u=="number"?u:void 0,className:T,d:rK(s,i,o,c,u)}))}var O=g.current,B=x.current,P=y.current,D=b.current,W="0px ".concat(n===-1?1:n,"px"),Ae="".concat(n,"px 0px"),ee=bse(["strokeDasharray"],h,typeof A=="string"?A:nK.animationEasing);return v.createElement(X4,{animationId:I,key:I,canBegin:n>0,duration:h,easing:A,isActive:p,begin:f},ce=>{var de=pi(O,o,ce),X=pi(B,c,ce),pe=pi(P,s,ce),Se=pi(D,i,ce);r.current&&(g.current=de,x.current=X,y.current=pe,b.current=Se);var k;m?ce>0?k={transition:ee,strokeDasharray:Ae}:k={strokeDasharray:W}:k={strokeDasharray:Ae};var F=Iu(e),{radius:V}=F,M=tK(F,PHe);return v.createElement("path",PS({},M,{radius:typeof u=="number"?u:void 0,className:T,d:rK(pe,Se,de,X,u),ref:r,style:eK(eK({},k),e.style)}))})};function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(r),!0).forEach(function(n){DHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DHe(t,e,r){return(e=RHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RHe(t){var e=MHe(t,"string");return typeof e=="symbol"?e:e+""}function MHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jS=Math.PI/180,LHe=t=>t*180/Math.PI,ti=(t,e,r,n)=>({x:t+Math.cos(-jS*n)*r,y:e+Math.sin(-jS*n)*r}),Ese=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},UHe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},QHe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=UHe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:LHe(c),angleInRadian:c}},VHe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},HHe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},$He=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=QHe({x:r,y:n},e),{innerRadius:i,outerRadius:o}=e;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=VHe(e),d=s,A;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;A=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;A=d>=u&&d<=c}return A?sK(sK({},e),{},{radius:a,angle:HHe(d,e)}):null};function Sse(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=ti(e,r,n,a),o=ti(e,r,n,s);return{points:[i,o],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var iK,oK,lK,cK,uK,dK,AK;function Rk(){return Rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rk.apply(null,arguments)}function Fm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var KHe=(t,e)=>{var r=_o(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},T_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=t,u=o*(i?1:-1)+n,d=Math.asin(o/u)/jS,A=c?a:a+s*d,h=ti(e,r,u,A),f=ti(e,r,n,A),m=c?a-s*d:a,p=ti(e,r,u*Math.cos(d*jS),m);return{center:h,circleTangency:f,lineTangency:p,theta:d}},Ise=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,o=KHe(s,i),c=s+o,u=ti(e,r,a,s),d=ti(e,r,a,c),A=Ns(iK||(iK=Fm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(o)>180),+(s>c),d.x,d.y);if(n>0){var h=ti(e,r,n,s),f=ti(e,r,n,c);A+=Ns(oK||(oK=Fm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),f.x,f.y,n,n,+(Math.abs(o)>180),+(s<=c),h.x,h.y)}else A+=Ns(lK||(lK=Fm(["L ",","," Z"])),e,r);return A},GHe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=t,d=_o(u-c),{circleTangency:A,lineTangency:h,theta:f}=T_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:m,lineTangency:p,theta:g}=T_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),x=o?Math.abs(c-u):Math.abs(c-u)-f-g;if(x<0)return i?Ns(cK||(cK=Fm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):Ise({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Ns(uK||(uK=Fm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),A.x,A.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:I}=T_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:T,lineTangency:C,theta:E}=T_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-I-E;if(S<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=Ns(dK||(dK=Fm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,s,s,+(d<0),T.x,T.y,n,n,+(S>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=Ns(AK||(AK=Fm(["L",",","Z"])),e,r);return y},zHe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Bse=t=>{var e=Io(t,zHe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:A}=e;if(s<a||u===d)return null;var h=aa("recharts-sector",A),f=s-a,m=Jo(i,f,0,!0),p;return m>0&&Math.abs(u-d)<360?p=GHe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,f/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):p=Ise({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",Rk({},Iu(e),{className:h,d:p}))};function qHe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Kne(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:o}=e,c=ti(n,a,s,o),u=ti(n,a,i,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Sse(e)}}var Tse={},Pse={},jse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(jse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jse;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Pse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RD,r=Pse;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}t.range=n})(Tse);var WHe=Tse.range;const kse=Ef(WHe);function d0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XHe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WD(t){let e,r,n;t.length!==2?(e=d0,r=(o,c)=>d0(t(o),c),n=(o,c)=>t(o)-c):(e=t===d0||t===XHe?t:YHe,r=t,n=t);function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const A=u+d>>>1;r(o[A],c)<0?u=A+1:d=A}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const A=u+d>>>1;r(o[A],c)<=0?u=A+1:d=A}while(u<d)}return u}function i(o,c,u=0,d=o.length){const A=a(o,c,u,d-1);return A>u&&n(o[A-1],c)>-n(o[A],c)?A-1:A}return{left:a,center:i,right:s}}function YHe(){return 0}function Fse(t){return t===null?NaN:+t}function*JHe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const ZHe=WD(d0),dw=ZHe.right;WD(Fse).center;class fK extends Map{constructor(e,r=r$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(hK(this,e))}has(e){return super.has(hK(this,e))}set(e,r){return super.set(e$e(this,e),r)}delete(e){return super.delete(t$e(this,e))}}function hK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function e$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function t$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function r$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function n$e(t=d0){if(t===d0)return Ose;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Ose(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const a$e=Math.sqrt(50),s$e=Math.sqrt(10),i$e=Math.sqrt(2);function kS(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=a$e?10:s>=s$e?5:s>=i$e?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=r&&r<2?kS(t,e,r*2):[o,c,u]}function Mk(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?kS(e,t,r):kS(t,e,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function Lk(t,e,r){return e=+e,t=+t,r=+r,kS(t,e,r)[2]}function Uk(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Lk(e,t,r):Lk(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function mK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function pK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Dse(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Ose:n$e(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),A=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*A*(c-A)/c)*(u-c/2<0?-1:1),f=Math.max(r,Math.floor(e-u*A/c+h)),m=Math.min(n,Math.floor(e+(c-u)*A/c+h));Dse(t,e,f,m,a)}const s=t[e];let i=r,o=n;for(V1(t,r,e),a(t[n],s)>0&&V1(t,r,n);i<o;){for(V1(t,i,o),++i,--o;a(t[i],s)<0;)++i;for(;a(t[o],s)>0;)--o}a(t[r],s)===0?V1(t,r,o):(++o,V1(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1)}return t}function V1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function o$e(t,e,r){if(t=Float64Array.from(JHe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return pK(t);if(e>=1)return mK(t);var n,a=(n-1)*e,s=Math.floor(a),i=mK(Dse(t,s).subarray(0,s+1)),o=pK(t.subarray(s+1));return i+(o-i)*(a-s)}}function l$e(t,e,r=Fse){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),o=+r(t[s+1],s+1,t);return i+(o-i)*(a-s)}}function c$e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function ju(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Of(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Qk=Symbol("implicit");function XD(){var t=new fK,e=[],r=[],n=Qk;function a(s){let i=t.get(s);if(i===void 0){if(n!==Qk)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new fK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return XD(e,r).unknown(n)},ju.apply(a,arguments),a}function YD(){var t=XD().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete t.unknown;function A(){var h=e().length,f=a<n,m=f?a:n,p=f?n:a;s=(p-m)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),o&&(m=Math.round(m),i=Math.round(i));var g=c$e(h).map(function(x){return m+s*x});return r(f?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),A()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,A()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,A()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,A()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),A()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),A()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,A()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),A()):d},t.copy=function(){return YD(e(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},ju.apply(A(),arguments)}function Rse(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Rse(e())},t}function u$e(){return Rse(YD.apply(null,arguments).paddingInner(1))}function JD(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Mse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Aw(){}var fb=.7,FS=1/fb,jx="\\s*([+-]?\\d+)\\s*",hb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d$e=/^#([0-9a-f]{3,8})$/,A$e=new RegExp(`^rgb\\(${jx},${jx},${jx}\\)$`),f$e=new RegExp(`^rgb\\(${rA},${rA},${rA}\\)$`),h$e=new RegExp(`^rgba\\(${jx},${jx},${jx},${hb}\\)$`),m$e=new RegExp(`^rgba\\(${rA},${rA},${rA},${hb}\\)$`),p$e=new RegExp(`^hsl\\(${hb},${rA},${rA}\\)$`),g$e=new RegExp(`^hsla\\(${hb},${rA},${rA},${hb}\\)$`),gK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JD(Aw,mb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xK,formatHex:xK,formatHex8:x$e,formatHsl:v$e,formatRgb:vK,toString:vK});function xK(){return this.rgb().formatHex()}function x$e(){return this.rgb().formatHex8()}function v$e(){return Lse(this).formatHsl()}function vK(){return this.rgb().formatRgb()}function mb(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=d$e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?yK(e):r===3?new $l(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?P_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?P_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=A$e.exec(t))?new $l(e[1],e[2],e[3],1):(e=f$e.exec(t))?new $l(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=h$e.exec(t))?P_(e[1],e[2],e[3],e[4]):(e=m$e.exec(t))?P_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=p$e.exec(t))?NK(e[1],e[2]/100,e[3]/100,1):(e=g$e.exec(t))?NK(e[1],e[2]/100,e[3]/100,e[4]):gK.hasOwnProperty(t)?yK(gK[t]):t==="transparent"?new $l(NaN,NaN,NaN,0):null}function yK(t){return new $l(t>>16&255,t>>8&255,t&255,1)}function P_(t,e,r,n){return n<=0&&(t=e=r=NaN),new $l(t,e,r,n)}function y$e(t){return t instanceof Aw||(t=mb(t)),t?(t=t.rgb(),new $l(t.r,t.g,t.b,t.opacity)):new $l}function Vk(t,e,r,n){return arguments.length===1?y$e(t):new $l(t,e,r,n??1)}function $l(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}JD($l,Vk,Mse(Aw,{brighter(t){return t=t==null?FS:Math.pow(FS,t),new $l(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fb:Math.pow(fb,t),new $l(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $l(Jm(this.r),Jm(this.g),Jm(this.b),OS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bK,formatHex:bK,formatHex8:b$e,formatRgb:wK,toString:wK}));function bK(){return`#${Om(this.r)}${Om(this.g)}${Om(this.b)}`}function b$e(){return`#${Om(this.r)}${Om(this.g)}${Om(this.b)}${Om((isNaN(this.opacity)?1:this.opacity)*255)}`}function wK(){const t=OS(this.opacity);return`${t===1?"rgb(":"rgba("}${Jm(this.r)}, ${Jm(this.g)}, ${Jm(this.b)}${t===1?")":`, ${t})`}`}function OS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Om(t){return t=Jm(t),(t<16?"0":"")+t.toString(16)}function NK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new td(t,e,r,n)}function Lse(t){if(t instanceof td)return new td(t.h,t.s,t.l,t.opacity);if(t instanceof Aw||(t=mb(t)),!t)return new td;if(t instanceof td)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(e===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-e)/o+2:i=(e-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new td(i,o,c,t.opacity)}function w$e(t,e,r,n){return arguments.length===1?Lse(t):new td(t,e,r,n??1)}function td(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}JD(td,w$e,Mse(Aw,{brighter(t){return t=t==null?FS:Math.pow(FS,t),new td(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fb:Math.pow(fb,t),new td(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new $l(pT(t>=240?t-240:t+120,a,n),pT(t,a,n),pT(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new td(_K(this.h),j_(this.s),j_(this.l),OS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=OS(this.opacity);return`${t===1?"hsl(":"hsla("}${_K(this.h)}, ${j_(this.s)*100}%, ${j_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _K(t){return t=(t||0)%360,t<0?t+360:t}function j_(t){return Math.max(0,Math.min(1,t||0))}function pT(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const ZD=t=>()=>t;function N$e(t,e){return function(r){return t+r*e}}function _$e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function C$e(t){return(t=+t)==1?Use:function(e,r){return r-e?_$e(e,r,t):ZD(isNaN(e)?r:e)}}function Use(t,e){var r=e-t;return r?N$e(t,r):ZD(isNaN(t)?e:t)}const CK=function t(e){var r=C$e(e);function n(a,s){var i=r((a=Vk(a)).r,(s=Vk(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=Use(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function E$e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function S$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I$e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=kv(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function B$e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function DS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function T$e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=kv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var Hk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gT=new RegExp(Hk.source,"g");function P$e(t){return function(){return t}}function j$e(t){return function(e){return t(e)+""}}function k$e(t,e){var r=Hk.lastIndex=gT.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(t=t+"",e=e+"";(n=Hk.exec(t))&&(a=gT.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:DS(n,a)})),r=gT.lastIndex;return r<e.length&&(s=e.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?j$e(c[0].x):P$e(e):(e=c.length,function(u){for(var d=0,A;d<e;++d)o[(A=c[d]).i]=A.x(u);return o.join("")})}function kv(t,e){var r=typeof e,n;return e==null||r==="boolean"?ZD(e):(r==="number"?DS:r==="string"?(n=mb(e))?(e=n,CK):k$e:e instanceof mb?CK:e instanceof Date?B$e:S$e(e)?E$e:Array.isArray(e)?I$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?T$e:DS)(t,e)}function e8(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function F$e(t,e){e===void 0&&(e=t,t=kv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function O$e(t){return function(){return t}}function RS(t){return+t}var EK=[0,1];function bl(t){return t}function $k(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:O$e(isNaN(e)?NaN:.5)}function D$e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function R$e(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=$k(a,n),s=r(i,s)):(n=$k(n,a),s=r(s,i)),function(o){return s(n(o))}}function M$e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=$k(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(o){var c=dw(t,o,1,n)-1;return s[c](a[c](o))}}function fw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function J4(){var t=EK,e=EK,r=kv,n,a,s,i=bl,o,c,u;function d(){var h=Math.min(t.length,e.length);return i!==bl&&(i=D$e(t[0],t[h-1])),o=h>2?M$e:R$e,c=u=null,A}function A(h){return h==null||isNaN(h=+h)?s:(c||(c=o(t.map(n),e,r)))(n(i(h)))}return A.invert=function(h){return i(a((u||(u=o(e,t.map(n),DS)))(h)))},A.domain=function(h){return arguments.length?(t=Array.from(h,RS),d()):t.slice()},A.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},A.rangeRound=function(h){return e=Array.from(h),r=e8,d()},A.clamp=function(h){return arguments.length?(i=h?!0:bl,d()):i!==bl},A.interpolate=function(h){return arguments.length?(r=h,d()):r},A.unknown=function(h){return arguments.length?(s=h,A):s},function(h,f){return n=h,a=f,d()}}function t8(){return J4()(bl,bl)}function L$e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function MS(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function sv(t){return t=MS(Math.abs(t)),t?t[1]:NaN}function U$e(t,e){return function(r,n){for(var a=r.length,s=[],i=0,o=t[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=t[i=(i+1)%t.length];return s.reverse().join(e)}}function Q$e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var V$e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pb(t){if(!(e=V$e.exec(t)))throw new Error("invalid format: "+t);var e;return new r8({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}pb.prototype=r8.prototype;function r8(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}r8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H$e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var LS;function $$e(t,e){var r=MS(t,e);if(!r)return LS=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(LS=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+MS(t,Math.max(0,e+s-1))[0]}function SK(t,e){var r=MS(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const IK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:L$e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SK(t*100,e),r:SK,s:$$e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function BK(t){return t}var TK=Array.prototype.map,PK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function K$e(t){var e=t.grouping===void 0||t.thousands===void 0?BK:U$e(TK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?BK:Q$e(TK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(A,h){A=pb(A);var f=A.fill,m=A.align,p=A.sign,g=A.symbol,x=A.zero,y=A.width,b=A.comma,w=A.precision,I=A.trim,T=A.type;T==="n"?(b=!0,T="g"):IK[T]||(w===void 0&&(w=12),I=!0,T="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),E=(g==="$"?n:/[%p]/.test(T)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),S=IK[T],O=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function B(P){var D=C,W=E,Ae,ee,ce;if(T==="c")W=S(P)+W,P="";else{P=+P;var de=P<0||1/P<0;if(P=isNaN(P)?c:S(Math.abs(P),w),I&&(P=H$e(P)),de&&+P==0&&p!=="+"&&(de=!1),D=(de?p==="("?p:o:p==="-"||p==="("?"":p)+D,W=(T==="s"&&!isNaN(P)&&LS!==void 0?PK[8+LS/3]:"")+W+(de&&p==="("?")":""),O){for(Ae=-1,ee=P.length;++Ae<ee;)if(ce=P.charCodeAt(Ae),48>ce||ce>57){W=(ce===46?a+P.slice(Ae+1):P.slice(Ae))+W,P=P.slice(0,Ae);break}}}b&&!x&&(P=e(P,1/0));var X=D.length+P.length+W.length,pe=X<y?new Array(y-X+1).join(f):"";switch(b&&x&&(P=e(pe+P,pe.length?y-W.length:1/0),pe=""),m){case"<":P=D+P+W+pe;break;case"=":P=D+pe+P+W;break;case"^":P=pe.slice(0,X=pe.length>>1)+D+P+W+pe.slice(X);break;default:P=pe+D+P+W;break}return s(P)}return B.toString=function(){return A+""},B}function d(A,h){var f=Math.max(-8,Math.min(8,Math.floor(sv(h)/3)))*3,m=Math.pow(10,-f),p=u((A=pb(A),A.type="f",A),{suffix:PK[8+f/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var k_,n8,Qse;G$e({thousands:",",grouping:[3],currency:["$",""]});function G$e(t){return k_=K$e(t),n8=k_.format,Qse=k_.formatPrefix,k_}function z$e(t){return Math.max(0,-sv(Math.abs(t)))}function q$e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sv(e)/3)))*3-sv(Math.abs(t)))}function W$e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sv(e)-sv(t))+1}function Vse(t,e,r,n){var a=Uk(t,e,r),s;switch(n=pb(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=q$e(a,i))&&(n.precision=s),Qse(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=W$e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=z$e(a))&&(n.precision=s-(n.type==="%")*2);break}}return n8(n)}function H0(t){var e=t.domain;return t.ticks=function(r){var n=e();return Mk(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Vse(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=Lk(i,o,r),u===c)return n[a]=i,n[s]=o,e(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Hse(){var t=t8();return t.copy=function(){return fw(t,Hse())},ju.apply(t,arguments),H0(t)}function $se(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,RS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return $se(t).unknown(e)},t=arguments.length?Array.from(t,RS):[0,1],H0(r)}function Kse(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function jK(t){return Math.log(t)}function kK(t){return Math.exp(t)}function X$e(t){return-Math.log(-t)}function Y$e(t){return-Math.exp(-t)}function J$e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Z$e(t){return t===10?J$e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function eKe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FK(t){return(e,r)=>-t(-e,r)}function a8(t){const e=t(jK,kK),r=e.domain;let n=10,a,s;function i(){return a=eKe(n),s=Z$e(n),r()[0]<0?(a=FK(a),s=FK(s),t(X$e,Y$e)):t(jK,kK),e}return e.base=function(o){return arguments.length?(n=+o,i()):n},e.domain=function(o){return arguments.length?(r(o),i()):r()},e.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const A=d<u;A&&([u,d]=[d,u]);let h=a(u),f=a(d),m,p;const g=o==null?10:+o;let x=[];if(!(n%1)&&f-h<g){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=f;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=Mk(u,d,g))}else x=Mk(h,f,Math.min(f-h,g)).map(s);return A?x.reverse():x},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=pb(c)).precision==null&&(c.trim=!0),c=n8(c)),o===1/0)return c;const u=Math.max(1,n*o/e.ticks().length);return d=>{let A=d/s(Math.round(a(d)));return A*n<n-.5&&(A*=n),A<=u?c(d):""}},e.nice=()=>r(Kse(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),e}function Gse(){const t=a8(J4()).domain([1,10]);return t.copy=()=>fw(t,Gse()).base(t.base()),ju.apply(t,arguments),t}function OK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function s8(t){var e=1,r=t(OK(e),DK(e));return r.constant=function(n){return arguments.length?t(OK(e=+n),DK(e)):e},H0(r)}function zse(){var t=s8(J4());return t.copy=function(){return fw(t,zse()).constant(t.constant())},ju.apply(t,arguments)}function RK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rKe(t){return t<0?-t*t:t*t}function i8(t){var e=t(bl,bl),r=1;function n(){return r===1?t(bl,bl):r===.5?t(tKe,rKe):t(RK(r),RK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},H0(e)}function o8(){var t=i8(J4());return t.copy=function(){return fw(t,o8()).exponent(t.exponent())},ju.apply(t,arguments),t}function nKe(){return o8.apply(null,arguments).exponent(.5)}function MK(t){return Math.sign(t)*t*t}function aKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function qse(){var t=t8(),e=[0,1],r=!1,n;function a(s){var i=aKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(MK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,RS)).map(MK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return qse(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ju.apply(a,arguments),H0(a)}function Wse(){var t=[],e=[],r=[],n;function a(){var i=0,o=Math.max(1,e.length);for(r=new Array(o-1);++i<o;)r[i-1]=l$e(t,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:e[dw(r,i)]}return s.invertExtent=function(i){var o=e.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let o of i)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(d0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Wse().domain(t).range(e).unknown(n)},ju.apply(s,arguments)}function Xse(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[dw(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Xse().domain([t,e]).range(a).unknown(s)},ju.apply(H0(i),arguments)}function Yse(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[dw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Yse().domain(t).range(e).unknown(r)},ju.apply(a,arguments)}const xT=new Date,vT=new Date;function Bi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<i);return c},a.filter=s=>Bi(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;e(i,-1),!s(i););else for(;--o>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>(xT.setTime(+s),vT.setTime(+i),t(xT),t(vT),Math.floor(r(xT,vT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const US=Bi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);US.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):US);US.range;const WA=1e3,vu=WA*60,XA=vu*60,bf=XA*24,l8=bf*7,LK=bf*30,yT=bf*365,Dm=Bi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*WA)},(t,e)=>(e-t)/WA,t=>t.getUTCSeconds());Dm.range;const c8=Bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*WA)},(t,e)=>{t.setTime(+t+e*vu)},(t,e)=>(e-t)/vu,t=>t.getMinutes());c8.range;const u8=Bi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*vu)},(t,e)=>(e-t)/vu,t=>t.getUTCMinutes());u8.range;const d8=Bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*WA-t.getMinutes()*vu)},(t,e)=>{t.setTime(+t+e*XA)},(t,e)=>(e-t)/XA,t=>t.getHours());d8.range;const A8=Bi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*XA)},(t,e)=>(e-t)/XA,t=>t.getUTCHours());A8.range;const hw=Bi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vu)/bf,t=>t.getDate()-1);hw.range;const Z4=Bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bf,t=>t.getUTCDate()-1);Z4.range;const Jse=Bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bf,t=>Math.floor(t/bf));Jse.range;function Xp(t){return Bi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*vu)/l8)}const e5=Xp(0),QS=Xp(1),sKe=Xp(2),iKe=Xp(3),iv=Xp(4),oKe=Xp(5),lKe=Xp(6);e5.range;QS.range;sKe.range;iKe.range;iv.range;oKe.range;lKe.range;function Yp(t){return Bi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/l8)}const t5=Yp(0),VS=Yp(1),cKe=Yp(2),uKe=Yp(3),ov=Yp(4),dKe=Yp(5),AKe=Yp(6);t5.range;VS.range;cKe.range;uKe.range;ov.range;dKe.range;AKe.range;const f8=Bi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());f8.range;const h8=Bi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());h8.range;const wf=Bi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});wf.range;const Nf=Bi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Nf.range;function Zse(t,e,r,n,a,s){const i=[[Dm,1,WA],[Dm,5,5*WA],[Dm,15,15*WA],[Dm,30,30*WA],[s,1,vu],[s,5,5*vu],[s,15,15*vu],[s,30,30*vu],[a,1,XA],[a,3,3*XA],[a,6,6*XA],[a,12,12*XA],[n,1,bf],[n,2,2*bf],[r,1,l8],[e,1,LK],[e,3,3*LK],[t,1,yT]];function o(u,d,A){const h=d<u;h&&([u,d]=[d,u]);const f=A&&typeof A.range=="function"?A:c(u,d,A),m=f?f.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,A){const h=Math.abs(d-u)/A,f=WD(([,,g])=>g).right(i,h);if(f===i.length)return t.every(Uk(u/yT,d/yT,A));if(f===0)return US.every(Math.max(Uk(u,d,A),1));const[m,p]=i[h/i[f-1][2]<i[f][2]/h?f-1:f];return m.every(p)}return[o,c]}const[fKe,hKe]=Zse(Nf,h8,t5,Jse,A8,u8),[mKe,pKe]=Zse(wf,f8,e5,hw,d8,c8);function bT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function H1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function gKe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,o=t.months,c=t.shortMonths,u=$1(a),d=K1(a),A=$1(s),h=K1(s),f=$1(i),m=K1(i),p=$1(o),g=K1(o),x=$1(c),y=K1(c),b={a:ce,A:de,b:X,B:pe,c:null,d:KK,e:KK,f:UKe,g:XKe,G:JKe,H:RKe,I:MKe,j:LKe,L:eie,m:QKe,M:VKe,p:Se,q:k,Q:qK,s:WK,S:HKe,u:$Ke,U:KKe,V:GKe,w:zKe,W:qKe,x:null,X:null,y:WKe,Y:YKe,Z:ZKe,"%":zK},w={a:F,A:V,b:M,B:L,c:null,d:GK,e:GK,f:nGe,g:fGe,G:mGe,H:eGe,I:tGe,j:rGe,L:rie,m:aGe,M:sGe,p:q,q:R,Q:qK,s:WK,S:iGe,u:oGe,U:lGe,V:cGe,w:uGe,W:dGe,x:null,X:null,y:AGe,Y:hGe,Z:pGe,"%":zK},I={a:O,A:B,b:P,B:D,c:W,d:HK,e:HK,f:kKe,g:VK,G:QK,H:$K,I:$K,j:BKe,L:jKe,m:IKe,M:TKe,p:S,q:SKe,Q:OKe,s:DKe,S:PKe,u:wKe,U:NKe,V:_Ke,w:bKe,W:CKe,x:Ae,X:ee,y:VK,Y:QK,Z:EKe,"%":FKe};b.x=T(r,b),b.X=T(n,b),b.c=T(e,b),w.x=T(r,w),w.X=T(n,w),w.c=T(e,w);function T(K,Z){return function(te){var Q=[],ye=-1,Y=0,z=K.length,le,je,ue;for(te instanceof Date||(te=new Date(+te));++ye<z;)K.charCodeAt(ye)===37&&(Q.push(K.slice(Y,ye)),(je=UK[le=K.charAt(++ye)])!=null?le=K.charAt(++ye):je=le==="e"?" ":"0",(ue=Z[le])&&(le=ue(te,je)),Q.push(le),Y=ye+1);return Q.push(K.slice(Y,ye)),Q.join("")}}function C(K,Z){return function(te){var Q=H1(1900,void 0,1),ye=E(Q,K,te+="",0),Y,z;if(ye!=te.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(Z&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Y=wT(H1(Q.y,0,1)),z=Y.getUTCDay(),Y=z>4||z===0?VS.ceil(Y):VS(Y),Y=Z4.offset(Y,(Q.V-1)*7),Q.y=Y.getUTCFullYear(),Q.m=Y.getUTCMonth(),Q.d=Y.getUTCDate()+(Q.w+6)%7):(Y=bT(H1(Q.y,0,1)),z=Y.getDay(),Y=z>4||z===0?QS.ceil(Y):QS(Y),Y=hw.offset(Y,(Q.V-1)*7),Q.y=Y.getFullYear(),Q.m=Y.getMonth(),Q.d=Y.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),z="Z"in Q?wT(H1(Q.y,0,1)).getUTCDay():bT(H1(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(z+5)%7:Q.w+Q.U*7-(z+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,wT(Q)):bT(Q)}}function E(K,Z,te,Q){for(var ye=0,Y=Z.length,z=te.length,le,je;ye<Y;){if(Q>=z)return-1;if(le=Z.charCodeAt(ye++),le===37){if(le=Z.charAt(ye++),je=I[le in UK?Z.charAt(ye++):le],!je||(Q=je(K,te,Q))<0)return-1}else if(le!=te.charCodeAt(Q++))return-1}return Q}function S(K,Z,te){var Q=u.exec(Z.slice(te));return Q?(K.p=d.get(Q[0].toLowerCase()),te+Q[0].length):-1}function O(K,Z,te){var Q=f.exec(Z.slice(te));return Q?(K.w=m.get(Q[0].toLowerCase()),te+Q[0].length):-1}function B(K,Z,te){var Q=A.exec(Z.slice(te));return Q?(K.w=h.get(Q[0].toLowerCase()),te+Q[0].length):-1}function P(K,Z,te){var Q=x.exec(Z.slice(te));return Q?(K.m=y.get(Q[0].toLowerCase()),te+Q[0].length):-1}function D(K,Z,te){var Q=p.exec(Z.slice(te));return Q?(K.m=g.get(Q[0].toLowerCase()),te+Q[0].length):-1}function W(K,Z,te){return E(K,e,Z,te)}function Ae(K,Z,te){return E(K,r,Z,te)}function ee(K,Z,te){return E(K,n,Z,te)}function ce(K){return i[K.getDay()]}function de(K){return s[K.getDay()]}function X(K){return c[K.getMonth()]}function pe(K){return o[K.getMonth()]}function Se(K){return a[+(K.getHours()>=12)]}function k(K){return 1+~~(K.getMonth()/3)}function F(K){return i[K.getUTCDay()]}function V(K){return s[K.getUTCDay()]}function M(K){return c[K.getUTCMonth()]}function L(K){return o[K.getUTCMonth()]}function q(K){return a[+(K.getUTCHours()>=12)]}function R(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var Z=T(K+="",b);return Z.toString=function(){return K},Z},parse:function(K){var Z=C(K+="",!1);return Z.toString=function(){return K},Z},utcFormat:function(K){var Z=T(K+="",w);return Z.toString=function(){return K},Z},utcParse:function(K){var Z=C(K+="",!0);return Z.toString=function(){return K},Z}}}var UK={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,xKe=/^%/,vKe=/[\\^$*+?|[\]().{}]/g;function Fn(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function yKe(t){return t.replace(vKe,"\\$&")}function $1(t){return new RegExp("^(?:"+t.map(yKe).join("|")+")","i")}function K1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function bKe(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function wKe(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function NKe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function _Ke(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function CKe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function QK(t,e,r){var n=Ji.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function VK(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function EKe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function SKe(t,e,r){var n=Ji.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function IKe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function HK(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function BKe(t,e,r){var n=Ji.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function $K(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function TKe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function PKe(t,e,r){var n=Ji.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function jKe(t,e,r){var n=Ji.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function kKe(t,e,r){var n=Ji.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function FKe(t,e,r){var n=xKe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function OKe(t,e,r){var n=Ji.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function DKe(t,e,r){var n=Ji.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function KK(t,e){return Fn(t.getDate(),e,2)}function RKe(t,e){return Fn(t.getHours(),e,2)}function MKe(t,e){return Fn(t.getHours()%12||12,e,2)}function LKe(t,e){return Fn(1+hw.count(wf(t),t),e,3)}function eie(t,e){return Fn(t.getMilliseconds(),e,3)}function UKe(t,e){return eie(t,e)+"000"}function QKe(t,e){return Fn(t.getMonth()+1,e,2)}function VKe(t,e){return Fn(t.getMinutes(),e,2)}function HKe(t,e){return Fn(t.getSeconds(),e,2)}function $Ke(t){var e=t.getDay();return e===0?7:e}function KKe(t,e){return Fn(e5.count(wf(t)-1,t),e,2)}function tie(t){var e=t.getDay();return e>=4||e===0?iv(t):iv.ceil(t)}function GKe(t,e){return t=tie(t),Fn(iv.count(wf(t),t)+(wf(t).getDay()===4),e,2)}function zKe(t){return t.getDay()}function qKe(t,e){return Fn(QS.count(wf(t)-1,t),e,2)}function WKe(t,e){return Fn(t.getFullYear()%100,e,2)}function XKe(t,e){return t=tie(t),Fn(t.getFullYear()%100,e,2)}function YKe(t,e){return Fn(t.getFullYear()%1e4,e,4)}function JKe(t,e){var r=t.getDay();return t=r>=4||r===0?iv(t):iv.ceil(t),Fn(t.getFullYear()%1e4,e,4)}function ZKe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fn(e/60|0,"0",2)+Fn(e%60,"0",2)}function GK(t,e){return Fn(t.getUTCDate(),e,2)}function eGe(t,e){return Fn(t.getUTCHours(),e,2)}function tGe(t,e){return Fn(t.getUTCHours()%12||12,e,2)}function rGe(t,e){return Fn(1+Z4.count(Nf(t),t),e,3)}function rie(t,e){return Fn(t.getUTCMilliseconds(),e,3)}function nGe(t,e){return rie(t,e)+"000"}function aGe(t,e){return Fn(t.getUTCMonth()+1,e,2)}function sGe(t,e){return Fn(t.getUTCMinutes(),e,2)}function iGe(t,e){return Fn(t.getUTCSeconds(),e,2)}function oGe(t){var e=t.getUTCDay();return e===0?7:e}function lGe(t,e){return Fn(t5.count(Nf(t)-1,t),e,2)}function nie(t){var e=t.getUTCDay();return e>=4||e===0?ov(t):ov.ceil(t)}function cGe(t,e){return t=nie(t),Fn(ov.count(Nf(t),t)+(Nf(t).getUTCDay()===4),e,2)}function uGe(t){return t.getUTCDay()}function dGe(t,e){return Fn(VS.count(Nf(t)-1,t),e,2)}function AGe(t,e){return Fn(t.getUTCFullYear()%100,e,2)}function fGe(t,e){return t=nie(t),Fn(t.getUTCFullYear()%100,e,2)}function hGe(t,e){return Fn(t.getUTCFullYear()%1e4,e,4)}function mGe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ov(t):ov.ceil(t),Fn(t.getUTCFullYear()%1e4,e,4)}function pGe(){return"+0000"}function zK(){return"%"}function qK(t){return+t}function WK(t){return Math.floor(+t/1e3)}var Fg,aie,sie;gGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gGe(t){return Fg=gKe(t),aie=Fg.format,Fg.parse,sie=Fg.utcFormat,Fg.utcParse,Fg}function xGe(t){return new Date(t)}function vGe(t){return t instanceof Date?+t:+new Date(+t)}function m8(t,e,r,n,a,s,i,o,c,u){var d=t8(),A=d.invert,h=d.domain,f=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function I(T){return(c(T)<T?f:o(T)<T?m:i(T)<T?p:s(T)<T?g:n(T)<T?a(T)<T?x:y:r(T)<T?b:w)(T)}return d.invert=function(T){return new Date(A(T))},d.domain=function(T){return arguments.length?h(Array.from(T,vGe)):h().map(xGe)},d.ticks=function(T){var C=h();return t(C[0],C[C.length-1],T??10)},d.tickFormat=function(T,C){return C==null?I:u(C)},d.nice=function(T){var C=h();return(!T||typeof T.range!="function")&&(T=e(C[0],C[C.length-1],T??10)),T?h(Kse(C,T)):d},d.copy=function(){return fw(d,m8(t,e,r,n,a,s,i,o,c,u))},d}function yGe(){return ju.apply(m8(mKe,pKe,wf,f8,e5,hw,d8,c8,Dm,aie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bGe(){return ju.apply(m8(fKe,hKe,Nf,h8,t5,Z4,A8,u8,Dm,sie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function r5(){var t=0,e=1,r,n,a,s,i=bl,o=!1,c;function u(A){return A==null||isNaN(A=+A)?c:i(a===0?.5:(A=(s(A)-r)*a,o?Math.max(0,Math.min(1,A)):A))}u.domain=function(A){return arguments.length?([t,e]=A,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(A){return arguments.length?(o=!!A,u):o},u.interpolator=function(A){return arguments.length?(i=A,u):i};function d(A){return function(h){var f,m;return arguments.length?([f,m]=h,i=A(f,m),u):[i(0),i(1)]}}return u.range=d(kv),u.rangeRound=d(e8),u.unknown=function(A){return arguments.length?(c=A,u):c},function(A){return s=A,r=A(t),n=A(e),a=r===n?0:1/(n-r),u}}function $0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function iie(){var t=H0(r5()(bl));return t.copy=function(){return $0(t,iie())},Of.apply(t,arguments)}function oie(){var t=a8(r5()).domain([1,10]);return t.copy=function(){return $0(t,oie()).base(t.base())},Of.apply(t,arguments)}function lie(){var t=s8(r5());return t.copy=function(){return $0(t,lie()).constant(t.constant())},Of.apply(t,arguments)}function p8(){var t=i8(r5());return t.copy=function(){return $0(t,p8()).exponent(t.exponent())},Of.apply(t,arguments)}function wGe(){return p8.apply(null,arguments).exponent(.5)}function cie(){var t=[],e=bl;function r(n){if(n!=null&&!isNaN(n=+n))return e((dw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(d0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>o$e(t,s/n))},r.copy=function(){return cie(e).domain(t)},Of.apply(r,arguments)}function n5(){var t=0,e=.5,r=1,n=1,a,s,i,o,c,u=bl,d,A=!1,h;function f(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?o:c),u(A?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,f):[t,e,r]},f.clamp=function(p){return arguments.length?(A=!!p,f):A},f.interpolator=function(p){return arguments.length?(u=p,f):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=F$e(p,[x,y,b]),f):[u(0),u(.5),u(1)]}}return f.range=m(kv),f.rangeRound=m(e8),f.unknown=function(p){return arguments.length?(h=p,f):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,f}}function uie(){var t=H0(n5()(bl));return t.copy=function(){return $0(t,uie())},Of.apply(t,arguments)}function die(){var t=a8(n5()).domain([.1,1,10]);return t.copy=function(){return $0(t,die()).base(t.base())},Of.apply(t,arguments)}function Aie(){var t=s8(n5());return t.copy=function(){return $0(t,Aie()).constant(t.constant())},Of.apply(t,arguments)}function g8(){var t=i8(n5());return t.copy=function(){return $0(t,g8()).exponent(t.exponent())},Of.apply(t,arguments)}function NGe(){return g8.apply(null,arguments).exponent(.5)}const xy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:YD,scaleDiverging:uie,scaleDivergingLog:die,scaleDivergingPow:g8,scaleDivergingSqrt:NGe,scaleDivergingSymlog:Aie,scaleIdentity:$se,scaleImplicit:Qk,scaleLinear:Hse,scaleLog:Gse,scaleOrdinal:XD,scalePoint:u$e,scalePow:o8,scaleQuantile:Wse,scaleQuantize:Xse,scaleRadial:qse,scaleSequential:iie,scaleSequentialLog:oie,scaleSequentialPow:p8,scaleSequentialQuantile:cie,scaleSequentialSqrt:wGe,scaleSequentialSymlog:lie,scaleSqrt:nKe,scaleSymlog:zse,scaleThreshold:Yse,scaleTime:yGe,scaleUtc:bGe,tickFormat:Vse},Symbol.toStringTag,{value:"Module"}));var Df=t=>t.chartData,a5=Tt([Df],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),fie=(t,e,r,n)=>n?a5(t):Df(t),_Ge=(t,e,r)=>r?a5(t):Df(t);function I0(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(ps(e)&&ps(r))return!0}return!1}function XK(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function hie(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(ps(r))a=r;else if(typeof r=="function")return;if(ps(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(I0(i))return i}}function CGe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(I0(n))return XK(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,o;if(a==="auto")e!=null&&(i=Math.min(...e));else if(jr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&f$.test(a)){var c=f$.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(jr(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&h$.test(s)){var d=h$.exec(s);if(d==null||d[1]==null||e==null)o=void 0;else{var A=+d[1];o=e[1]+A}}else o=e==null?void 0:e[1];var h=[i,o];if(I0(h))return e==null?h:XK(h,e,r)}}}var Fv=1e9,EGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},v8,Ja=!0,Tu="[DecimalError] ",Zm=Tu+"Invalid argument: ",x8=Tu+"Exponent out of range: ",Ov=Math.floor,vm=Math.pow,SGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wc,Vi=1e7,Da=7,mie=9007199254740991,HS=Ov(mie/Da),vr={};vr.absoluteValue=vr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};vr.comparedTo=vr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};vr.decimalPlaces=vr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Da;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};vr.dividedBy=vr.div=function(t){return lf(this,new this.constructor(t))};vr.dividedToIntegerBy=vr.idiv=function(t){var e=this,r=e.constructor;return ga(lf(e,new r(t),0,1),r.precision)};vr.equals=vr.eq=function(t){return!this.cmp(t)};vr.exponent=function(){return ri(this)};vr.greaterThan=vr.gt=function(t){return this.cmp(t)>0};vr.greaterThanOrEqualTo=vr.gte=function(t){return this.cmp(t)>=0};vr.isInteger=vr.isint=function(){return this.e>this.d.length-2};vr.isNegative=vr.isneg=function(){return this.s<0};vr.isPositive=vr.ispos=function(){return this.s>0};vr.isZero=function(){return this.s===0};vr.lessThan=vr.lt=function(t){return this.cmp(t)<0};vr.lessThanOrEqualTo=vr.lte=function(t){return this.cmp(t)<1};vr.logarithm=vr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(wc))throw Error(Tu+"NaN");if(r.s<1)throw Error(Tu+(r.s?"NaN":"-Infinity"));return r.eq(wc)?new n(0):(Ja=!1,e=lf(gb(r,s),gb(t,s),s),Ja=!0,ga(e,a))};vr.minus=vr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xie(e,t):pie(e,(t.s=-t.s,t))};vr.modulo=vr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Tu+"NaN");return r.s?(Ja=!1,e=lf(r,t,0,1).times(t),Ja=!0,r.minus(e)):ga(new n(r),a)};vr.naturalExponential=vr.exp=function(){return gie(this)};vr.naturalLogarithm=vr.ln=function(){return gb(this)};vr.negated=vr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};vr.plus=vr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?pie(e,t):xie(e,(t.s=-t.s,t))};vr.precision=vr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Zm+t);if(e=ri(a)+1,n=a.d.length-1,r=n*Da+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};vr.squareRoot=vr.sqrt=function(){var t,e,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Tu+"NaN")}for(t=ri(o),Ja=!1,a=Math.sqrt(+o),a==0||a==1/0?(e=Yd(o.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Ov((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(lf(o,s,i+2)).times(.5),Yd(s.d).slice(0,i)===(e=Yd(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(ga(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(e!="9999")break;i+=4}return Ja=!0,ga(n,r)};vr.times=vr.mul=function(t){var e,r,n,a,s,i,o,c,u,d=this,A=d.constructor,h=d.d,f=(t=new A(t)).d;if(!d.s||!t.s)return new A(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=f.length,c<u&&(s=h,h=f,f=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)o=s[a]+f[n]*h[a-n-1]+e,s[a--]=o%Vi|0,e=o/Vi|0;s[a]=(s[a]+e)%Vi|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Ja?ga(t,A.precision):t};vr.toDecimalPlaces=vr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(lA(t,0,Fv),e===void 0?e=n.rounding:lA(e,0,8),ga(r,t+ri(r)+1,e))};vr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Bp(n,!0):(lA(t,0,Fv),e===void 0?e=a.rounding:lA(e,0,8),n=ga(new a(n),t+1,e),r=Bp(n,!0,t+1)),r};vr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Bp(a):(lA(t,0,Fv),e===void 0?e=s.rounding:lA(e,0,8),n=ga(new s(a),t+ri(a)+1,e),r=Bp(n.abs(),!1,t+ri(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};vr.toInteger=vr.toint=function(){var t=this,e=t.constructor;return ga(new e(t),ri(t)+1,e.rounding)};vr.toNumber=function(){return+this};vr.toPower=vr.pow=function(t){var e,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(wc);if(o=new c(o),!o.s){if(t.s<1)throw Error(Tu+"Infinity");return o}if(o.eq(wc))return o;if(n=c.precision,t.eq(wc))return ga(o,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=o.s,i){if((r=d<0?-d:d)<=mie){for(a=new c(wc),e=Math.ceil(n/Da+4),Ja=!1;r%2&&(a=a.times(o),JK(a.d,e)),r=Ov(r/2),r!==0;)o=o.times(o),JK(o.d,e);return Ja=!0,t.s<0?new c(wc).div(a):ga(a,n)}}else if(s<0)throw Error(Tu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,o.s=1,Ja=!1,a=t.times(gb(o,n+u)),Ja=!0,a=gie(a),a.s=s,a};vr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=ri(a),n=Bp(a,r<=s.toExpNeg||r>=s.toExpPos)):(lA(t,1,Fv),e===void 0?e=s.rounding:lA(e,0,8),a=ga(new s(a),t,e),r=ri(a),n=Bp(a,t<=r||r<=s.toExpNeg,t)),n};vr.toSignificantDigits=vr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(lA(t,1,Fv),e===void 0?e=n.rounding:lA(e,0,8)),ga(new n(r),t,e)};vr.toString=vr.valueOf=vr.val=vr.toJSON=vr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ri(t),r=t.constructor;return Bp(t,e<=r.toExpNeg||e>=r.toExpPos)};function pie(t,e){var r,n,a,s,i,o,c,u,d=t.constructor,A=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Ja?ga(e,A):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(A/Da),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Vi|0,c[s]%=Vi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=a,Ja?ga(e,A):e}function lA(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Zm+t)}function Yd(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=Da-n.length,r&&(s+=Eh(r)),s+=n;i=t[e],n=i+"",r=Da-n.length,r&&(s+=Eh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var lf=function(){function t(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%Vi|0,i=s/Vi|0;return i&&n.unshift(i),n}function e(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Vi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S=n.constructor,O=n.s==a.s?1:-1,B=n.d,P=a.d;if(!n.s)return new S(n);if(!a.s)throw Error(Tu+"Division by zero");for(c=n.e-a.e,C=P.length,I=B.length,f=new S(O),m=f.d=[],u=0;P[u]==(B[u]||0);)++u;if(P[u]>(B[u]||0)&&--c,s==null?y=s=S.precision:i?y=s+(ri(n)-ri(a))+1:y=s,y<0)return new S(0);if(y=y/Da+2|0,u=0,C==1)for(d=0,P=P[0],y++;(u<I||d)&&y--;u++)b=d*Vi+(B[u]||0),m[u]=b/P|0,d=b%P|0;else{for(d=Vi/(P[0]+1)|0,d>1&&(P=t(P,d),B=t(B,d),C=P.length,I=B.length),w=C,p=B.slice(0,C),g=p.length;g<C;)p[g++]=0;E=P.slice(),E.unshift(0),T=P[0],P[1]>=Vi/2&&++T;do d=0,o=e(P,p,C,g),o<0?(x=p[0],C!=g&&(x=x*Vi+(p[1]||0)),d=x/T|0,d>1?(d>=Vi&&(d=Vi-1),A=t(P,d),h=A.length,g=p.length,o=e(A,p,h,g),o==1&&(d--,r(A,C<h?E:P,h))):(d==0&&(o=d=1),A=P.slice()),h=A.length,h<g&&A.unshift(0),r(p,A,g),o==-1&&(g=p.length,o=e(P,p,C,g),o<1&&(d++,r(p,C<g?E:P,g))),g=p.length):o===0&&(d++,p=[0]),m[u++]=d,o&&p[0]?p[g++]=B[w]||0:(p=[B[w]],g=1);while((w++<I||p[0]!==void 0)&&y--)}return m[0]||m.shift(),f.e=c,ga(f,i?s+ri(f)+1:s)}}();function gie(t,e){var r,n,a,s,i,o,c=0,u=0,d=t.constructor,A=d.precision;if(ri(t)>16)throw Error(x8+ri(t));if(!t.s)return new d(wc);for(Ja=!1,o=A,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(vm(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(wc),d.precision=o;;){if(a=ga(a.times(t),o),r=r.times(++c),i=s.plus(lf(a,r,o)),Yd(i.d).slice(0,o)===Yd(s.d).slice(0,o)){for(;u--;)s=ga(s.times(s),o);return d.precision=A,e==null?(Ja=!0,ga(s,A)):s}s=i}}function ri(t){for(var e=t.e*Da,r=t.d[0];r>=10;r/=10)e++;return e}function NT(t,e,r){if(e>t.LN10.sd())throw Ja=!0,r&&(t.precision=r),Error(Tu+"LN10 precision limit exceeded");return ga(new t(t.LN10),e)}function Eh(t){for(var e="";t--;)e+="0";return e}function gb(t,e){var r,n,a,s,i,o,c,u,d,A=1,h=10,f=t,m=f.d,p=f.constructor,g=p.precision;if(f.s<1)throw Error(Tu+(f.s?"NaN":"-Infinity"));if(f.eq(wc))return new p(0);if(e==null?(Ja=!1,u=g):u=e,f.eq(10))return e==null&&(Ja=!0),NT(p,u);if(u+=h,p.precision=u,r=Yd(m),n=r.charAt(0),s=ri(f),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(t),r=Yd(f.d),n=r.charAt(0),A++;s=ri(f),n>1?(f=new p("0."+r),s++):f=new p(n+"."+r.slice(1))}else return c=NT(p,u+2,g).times(s+""),f=gb(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(Ja=!0,ga(f,g)):f;for(o=i=f=lf(f.minus(wc),f.plus(wc),u),d=ga(f.times(f),u),a=3;;){if(i=ga(i.times(d),u),c=o.plus(lf(i,new p(a),u)),Yd(c.d).slice(0,u)===Yd(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(NT(p,u+2,g).times(s+""))),o=lf(o,new p(A),u),p.precision=g,e==null?(Ja=!0,ga(o,g)):o;o=c,a+=2}}function YK(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Ov(r/Da),t.d=[],n=(r+1)%Da,r<0&&(n+=Da),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Da;n<a;)t.d.push(+e.slice(n,n+=Da));e=e.slice(n),n=Da-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Ja&&(t.e>HS||t.e<-HS))throw Error(x8+r)}else t.s=0,t.e=0,t.d=[0];return t}function ga(t,e,r){var n,a,s,i,o,c,u,d,A=t.d;for(i=1,s=A[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=Da,a=e,u=A[d=0];else{if(d=Math.ceil((n+1)/Da),s=A.length,d>=s)return t;for(u=s=A[d],i=1;s>=10;s/=10)i++;n%=Da,a=n-Da+i}if(r!==void 0&&(s=vm(10,i-a-1),o=u/s%10|0,c=e<0||A[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/vm(10,i-a):0:A[d-1])%10&1||r==(t.s<0?8:7))),e<1||!A[0])return c?(s=ri(t),A.length=1,e=e-s-1,A[0]=vm(10,(Da-e%Da)%Da),t.e=Ov(-e/Da)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(n==0?(A.length=d,s=1,d--):(A.length=d+1,s=vm(10,Da-n),A[d]=a>0?(u/vm(10,i-a)%vm(10,a)|0)*s:0),c)for(;;)if(d==0){(A[0]+=s)==Vi&&(A[0]=1,++t.e);break}else{if(A[d]+=s,A[d]!=Vi)break;A[d--]=0,s=1}for(n=A.length;A[--n]===0;)A.pop();if(Ja&&(t.e>HS||t.e<-HS))throw Error(x8+ri(t));return t}function xie(t,e){var r,n,a,s,i,o,c,u,d,A,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Ja?ga(e,f):e;if(c=t.d,A=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=A.length):(r=A,n=u,o=c.length),a=Math.max(Math.ceil(f/Da),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=A.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=A[a]){d=c[a]<A[a];break}i=0}for(d&&(r=c,c=A,A=r,e.s=-e.s),o=c.length,a=A.length-o;a>0;--a)c[o++]=0;for(a=A.length;a>i;){if(c[--a]<A[a]){for(s=a;s&&c[--s]===0;)c[s]=Vi-1;--c[s],c[a]+=Vi}c[a]-=A[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Ja?ga(e,f):e):new h(0)}function Bp(t,e,r){var n,a=ri(t),s=Yd(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+Eh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Eh(-a-1)+s,r&&(n=r-i)>0&&(s+=Eh(n))):a>=i?(s+=Eh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+Eh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=Eh(n))),t.s<0?"-"+s:s}function JK(t,e){if(t.length>e)return t.length=e,!0}function vie(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Zm+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return YK(i,s.toString())}else if(typeof s!="string")throw Error(Zm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,SGe.test(s))YK(i,s);else throw Error(Zm+s)}if(a.prototype=vr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=vie,a.config=a.set=IGe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function IGe(t){if(!t||typeof t!="object")throw Error(Tu+"Object expected");var e,r,n,a=["precision",1,Fv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Ov(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Zm+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Zm+r+": "+n);return this}var v8=vie(EGe);wc=new v8(1);const Zn=v8;var BGe=t=>t,yie={},bie=t=>t===yie,ZK=t=>function e(){return arguments.length===0||arguments.length===1&&bie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},wie=(t,e)=>t===1?e:ZK(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==yie).length;return s>=t?e(...n):wie(t-s,ZK(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>bie(d)?o.shift():d);return e(...u,...o)}))}),TGe=t=>wie(t.length,t),Kk=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},PGe=TGe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),jGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return BGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}};function Nie(t){var e;return t===0?e=1:e=Math.floor(new Zn(t).abs().log(10).toNumber())+1,e}function _ie(t,e,r){for(var n=new Zn(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Cie=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Eie=(t,e,r)=>{if(t.lte(0))return new Zn(0);var n=Nie(t.toNumber()),a=new Zn(10).pow(n),s=t.div(a),i=n!==1?.05:.1,o=new Zn(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return e?new Zn(c.toNumber()):new Zn(Math.ceil(c.toNumber()))},kGe=(t,e,r)=>{var n=new Zn(1),a=new Zn(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Zn(10).pow(Nie(t)-1),a=new Zn(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Zn(Math.floor(t)))}else t===0?a=new Zn(Math.floor((e-1)/2)):r||(a=new Zn(Math.floor(t)));var i=Math.floor((e-1)/2),o=jGe(PGe(c=>a.add(new Zn(c-i).mul(n)).toNumber()),Kk);return o(0,e)},Sie=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Zn(0),tickMin:new Zn(0),tickMax:new Zn(0)};var i=Eie(new Zn(r).sub(e).div(n-1),a,s),o;e<=0&&r>=0?o=new Zn(0):(o=new Zn(e).add(r).div(2),o=o.sub(new Zn(o).mod(i)));var c=Math.ceil(o.sub(e).div(i).toNumber()),u=Math.ceil(new Zn(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?Sie(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new Zn(c).mul(i)),tickMax:o.add(new Zn(u).mul(i))})},FGe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,c]=Cie([r,n]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Kk(0,a-1).map(()=>1/0)]:[...Kk(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(o===c)return kGe(o,a,s);var{step:d,tickMin:A,tickMax:h}=Sie(o,c,i,s,0),f=_ie(A,h.add(new Zn(.1).mul(d)),d);return r>n?f.reverse():f},OGe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Cie([n,a]);if(i===-1/0||o===1/0)return[n,a];if(i===o)return[i];var c=Math.max(r,2),u=Eie(new Zn(o).sub(i).div(c-1),s,0),d=[..._ie(new Zn(i),new Zn(o),u),o];return s===!1&&(d=d.map(A=>Math.round(A))),n>a?d.reverse():d},Iie=t=>t.rootProps.maxBarSize,DGe=t=>t.rootProps.barGap,Bie=t=>t.rootProps.barCategoryGap,RGe=t=>t.rootProps.barSize,mw=t=>t.rootProps.stackOffset,Tie=t=>t.rootProps.reverseStackOrder,y8=t=>t.options.chartName,b8=t=>t.rootProps.syncId,Pie=t=>t.rootProps.syncMethod,w8=t=>t.options.eventEmitter,Xo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},UA={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},gc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},s5=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},MGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:UA.angleAxisId,includeHidden:!1,name:void 0,reversed:UA.reversed,scale:UA.scale,tick:UA.tick,tickCount:void 0,ticks:void 0,type:UA.type,unit:void 0},LGe={allowDataOverflow:gc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gc.scale,tick:gc.tick,tickCount:gc.tickCount,ticks:void 0,type:gc.type,unit:void 0},UGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:UA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:UA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:UA.scale,tick:UA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},QGe={allowDataOverflow:gc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gc.scale,tick:gc.tick,tickCount:gc.tickCount,ticks:void 0,type:"category",unit:void 0},N8=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?UGe:MGe,_8=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?QGe:LGe,i5=t=>t.polarOptions,C8=Tt([kf,Ff,Ii],Ese),jie=Tt([i5,C8],(t,e)=>{if(t!=null)return Jo(t.innerRadius,e,0)}),kie=Tt([i5,C8],(t,e)=>{if(t!=null)return Jo(t.outerRadius,e,e*.8)}),VGe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Fie=Tt([i5],VGe);Tt([N8,Fie],s5);var Oie=Tt([C8,jie,kie],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Tt([_8,Oie],s5);var Die=Tt([On,i5,jie,kie,kf,Ff],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=e;return{cx:Jo(i,a,a/2),cy:Jo(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ts=(t,e)=>e,pw=(t,e,r)=>r;function E8(t){return t==null?void 0:t.id}function Rie(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=E8(o);u.forEach((A,h)=>{var f=s==null||a?h:String(Ua(A,s,null)),m=Ua(A,o.dataKey,0),p;i.has(f)?p=i.get(f):p={},Object.assign(p,{[d]:m}),i.set(f,p)})}}),Array.from(i.values())}function o5(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var l5=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function c5(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function HGe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Ti=t=>{var e=On(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Dv=t=>t.tooltip.settings.axisId;function eG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $S(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(r),!0).forEach(function(n){$Ge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Ge(t,e,r){return(e=KGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KGe(t){var e=GGe(t,"string");return typeof e=="symbol"?e:e+""}function GGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gk=[0,"auto"],Ri={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Mie=(t,e)=>t.cartesianAxis.xAxis[e],Rf=(t,e)=>{var r=Mie(t,e);return r??Ri},Mi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Gk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:lw},Lie=(t,e)=>t.cartesianAxis.yAxis[e],Mf=(t,e)=>{var r=Lie(t,e);return r??Mi},zGe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},S8=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??zGe},gs=(t,e,r)=>{switch(e){case"xAxis":return Rf(t,r);case"yAxis":return Mf(t,r);case"zAxis":return S8(t,r);case"angleAxis":return N8(t,r);case"radiusAxis":return _8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},qGe=(t,e,r)=>{switch(e){case"xAxis":return Rf(t,r);case"yAxis":return Mf(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},gw=(t,e,r)=>{switch(e){case"xAxis":return Rf(t,r);case"yAxis":return Mf(t,r);case"angleAxis":return N8(t,r);case"radiusAxis":return _8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Uie=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function I8(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var B8=t=>t.graphicalItems.cartesianItems,WGe=Tt([ts,pw],I8),T8=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),xw=Tt([B8,gs,WGe],T8,{memoizeOptions:{resultEqualityCheck:c5}}),Qie=Tt([xw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(o5)),Vie=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),XGe=Tt([xw],Vie),P8=t=>t.map(e=>e.data).filter(Boolean).flat(1),YGe=Tt([xw],P8,{memoizeOptions:{resultEqualityCheck:c5}}),j8=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},k8=Tt([YGe,fie],j8),F8=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ua(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:Ua(a,n)}))):t.map(n=>({value:n})),u5=Tt([k8,gs,xw],F8);function Hie(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function TC(t){if(oA(t)||t instanceof Date){var e=Number(t);if(ps(e))return e}}function tG(t){if(Array.isArray(t)){var e=[TC(t[0]),TC(t[1])];return I0(e)?e:void 0}var r=TC(t);if(r!=null)return[r,r]}function _f(t){return t.map(TC).filter(i7e)}function JGe(t,e,r){return!r||typeof e!="number"||iA(e)?[]:r.length?_f(r.flatMap(n=>{var a=Ua(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!ps(s)||!ps(i)))return[e-s,e+i]})):[]}var Pi=t=>{var e=Ti(t),r=Dv(t);return gw(t,e,r)},vw=Tt([Pi],t=>t==null?void 0:t.dataKey),ZGe=Tt([Qie,fie,Pi],Rie),$ie=(t,e,r,n)=>{var a={},s=e.reduce((i,o)=>{if(o.stackId==null)return i;var c=i[o.stackId];return c==null&&(c=[]),c.push(o),i[o.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[o,c]=i,u=n?[...c].reverse():c,d=u.map(E8);return[o,{stackedData:_Qe(t,d,r),graphicalItems:u}]}))},zk=Tt([ZGe,Qie,mw,Tie],$ie),Kie=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=BQe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},eze=Tt([gs],t=>t.allowDataOverflow),O8=t=>{var e;if(t==null||!("domain"in t))return Gk;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=_f(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Gk},D8=Tt([gs],O8),R8=Tt([D8,eze],hie),tze=Tt([zk,Df,ts,R8],Kie,{memoizeOptions:{resultEqualityCheck:l5}}),d5=t=>t.errorBars,rze=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Hie(r,n)),KS=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},M8=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(o=>{r.forEach(c=>{var u,d,A=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>Hie(a,x)),h=Ua(o,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),f=JGe(o,h,A);if(f.length>=2){var m=Math.min(...f),p=Math.max(...f);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=tG(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var c=tG(Ua(o,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),ps(s)&&ps(i))return[s,i]},nze=Tt([k8,gs,XGe,d5,ts],M8,{memoizeOptions:{resultEqualityCheck:l5}});function aze(t){var{value:e}=t;if(oA(e)||e instanceof Date)return e}var sze=(t,e,r)=>{var n=t.map(aze).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Hne(n))?kse(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Gie=t=>t.referenceElements.dots,Rv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),ize=Tt([Gie,ts,pw],Rv),zie=t=>t.referenceElements.areas,oze=Tt([zie,ts,pw],Rv),qie=t=>t.referenceElements.lines,lze=Tt([qie,ts,pw],Rv),Wie=(t,e)=>{if(t!=null){var r=_f(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},cze=Tt(ize,ts,Wie),Xie=(t,e)=>{if(t!=null){var r=_f(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},uze=Tt([oze,ts],Xie);function dze(t){var e;if(t.x!=null)return _f([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:_f(r)}function Aze(t){var e;if(t.y!=null)return _f([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:_f(r)}var Yie=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?dze(n):Aze(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},fze=Tt([lze,ts],Yie),hze=Tt(cze,fze,uze,(t,e,r)=>KS(t,r,e)),L8=(t,e,r,n,a,s,i,o)=>{if(r!=null)return r;var c=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",u=c?KS(n,s,a):KS(s,a);return CGe(e,u,t.allowDataOverflow)},mze=Tt([gs,D8,R8,tze,nze,hze,On,ts],L8,{memoizeOptions:{resultEqualityCheck:l5}}),pze=[0,1],U8=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=t,u=Wp(e,s);if(u&&o==null){var d;return kse(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?sze(n,t,u):a==="expand"?pze:i}},Q8=Tt([gs,On,k8,u5,mw,ts,mze],U8),Jie=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(nw(s));return o in xy?o:"point"}}},Mv=Tt([gs,On,Uie,y8,ts],Jie);function gze(t){if(t!=null){if(t in xy)return xy[t]();var e="scale".concat(nw(t));if(e in xy)return xy[e]()}}function V8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=gze(e);if(a!=null){var s=a.domain(r).range(n);return vQe(s),s}}}var H8=(t,e,r)=>{var n=O8(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&I0(t))return FGe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&I0(t))return OGe(t,e.tickCount,e.allowDecimals)}},$8=Tt([Q8,gw,Mv],H8),K8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&I0(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return e},xze=Tt([gs,Q8,$8,ts],K8),vze=Tt(u5,gs,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(_f(t.map(A=>A.value))).sort((A,h)=>A-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var o=0;o<n.length-1;o++){var c=n[o],u=n[o+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),Zie=Tt(vze,On,Bie,Ii,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!ps(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=Jo(r,t*s),o=t*s/2;return o-i-(o-i)/s*i}return 0}),yze=(t,e,r)=>{var n=Rf(t,e);return n==null||typeof n.padding!="string"?0:Zie(t,"xAxis",e,r,n.padding)},bze=(t,e,r)=>{var n=Mf(t,e);return n==null||typeof n.padding!="string"?0:Zie(t,"yAxis",e,r,n.padding)},wze=Tt(Rf,yze,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),Nze=Tt(Mf,bze,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),_ze=Tt([Ii,wze,H4,V4,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Cze=Tt([Ii,On,Nze,H4,V4,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),yw=(t,e,r,n)=>{var a;switch(e){case"xAxis":return _ze(t,r,n);case"yAxis":return Cze(t,r,n);case"zAxis":return(a=S8(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Fie(t);case"radiusAxis":return Oie(t,r);default:return}},eoe=Tt([gs,yw],s5),A5=Tt([gs,Mv,xze,eoe],V8);Tt([xw,d5,ts],rze);function toe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var f5=(t,e)=>e,h5=(t,e,r)=>r,Eze=Tt(U4,f5,h5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(toe)),Sze=Tt(Q4,f5,h5,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(toe)),roe=(t,e)=>({width:t.width,height:e.height}),Ize=(t,e)=>{var r=typeof e.width=="number"?e.width:lw;return{width:r,height:t.height}},noe=Tt(Ii,Rf,roe),Bze=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Tze=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Pze=Tt(Ff,Ii,Eze,f5,h5,(t,e,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=roe(e,o);i==null&&(i=Bze(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),jze=Tt(kf,Ii,Sze,f5,h5,(t,e,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=Ize(e,o);i==null&&(i=Tze(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),kze=(t,e)=>{var r=Rf(t,e);if(r!=null)return Pze(t,r.orientation,r.mirror)},Fze=Tt([Ii,Rf,kze,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),Oze=(t,e)=>{var r=Mf(t,e);if(r!=null)return jze(t,r.orientation,r.mirror)},Dze=Tt([Ii,Mf,Oze,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),aoe=Tt(Ii,Mf,(t,e)=>{var r=typeof e.width=="number"?e.width:lw;return{width:r,height:t.height}}),rG=(t,e,r)=>{switch(e){case"xAxis":return noe(t,r).width;case"yAxis":return aoe(t,r).height;default:return}},soe=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Wp(t,n),c=e.map(u=>u.value);if(i&&o&&s==="category"&&a&&Hne(c))return c}},G8=Tt([On,u5,gs,ts],soe),ioe=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Wp(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(o=>o.value)}},z8=Tt([On,u5,gw,ts],ioe);Tt([On,qGe,Mv,A5,G8,z8,yw,$8,ts],(t,e,r,n,a,s,i,o,c)=>{if(e!=null){var u=Wp(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}});var Rze=(t,e,r,n,a,s,i,o,c)=>{if(!(e==null||n==null)){var u=Wp(t,c),{type:d,ticks:A,tickCount:h}=e,f=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/f:0;m=c==="angleAxis"&&s!=null&&s.length>=2?_o(s[0]-s[1])*2*m:m;var p=A||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>ps(x.coordinate))}return u&&o?o.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>ps(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},ooe=Tt([On,gw,Mv,A5,$8,yw,G8,z8,ts],Rze),Mze=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var o=Wp(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?_o(n[0]-n[1])*2*u:u,o&&s?s.map((d,A)=>({coordinate:r(d)+u,value:d,index:A,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,A)=>({coordinate:r(d)+u,value:a?a[d]:d,index:A,offset:u}))}},lv=Tt([On,gw,A5,yw,G8,z8,ts],Mze),cv=Tt(gs,A5,(t,e)=>{if(!(t==null||e==null))return $S($S({},t),{},{scale:e})}),Lze=Tt([gs,Mv,Q8,eoe],V8);Tt((t,e,r)=>S8(t,r),Lze,(t,e)=>{if(!(t==null||e==null))return $S($S({},t),{},{scale:e})});var Uze=Tt([On,U4,Q4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),loe=t=>t.options.defaultTooltipEventType,coe=t=>t.options.validateTooltipEventTypes;function uoe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function q8(t,e){var r=loe(t),n=coe(t);return uoe(e,r,n)}function Qze(t){return Ir(e=>q8(e,t))}var doe=(t,e)=>{var r,n=Number(e);if(!(iA(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Vze=t=>t.tooltip.settings,Rh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Hze={itemInteraction:{click:Rh,hover:Rh},axisInteraction:{click:Rh,hover:Rh},keyboardInteraction:Rh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Aoe=Zl({name:"tooltip",initialState:Hze,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ga()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=ud(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:Ga()},removeTooltipEntrySettings:{reducer(t,e){var r=ud(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Ga()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:$ze,replaceTooltipEntrySettings:Kze,removeTooltipEntrySettings:Gze,setTooltipSettingsState:zze,setActiveMouseOverItemIndex:foe,mouseLeaveItem:qze,mouseLeaveChart:hoe,setActiveClickItemIndex:Wze,setMouseOverAxisIndex:moe,setMouseClickAxisIndex:Xze,setSyncInteraction:qk,setKeyboardInteraction:Wk}=Aoe.actions,Yze=Aoe.reducer;function nG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function F_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(r),!0).forEach(function(n){Jze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jze(t,e,r){return(e=Zze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zze(t){var e=eqe(t,"string");return typeof e=="symbol"?e:e+""}function eqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tqe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function rqe(t){return t.index!=null}var poe=(t,e,r,n)=>{if(e==null)return Rh;var a=tqe(t,e,r);if(a==null)return Rh;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(rqe(a)){if(s)return F_(F_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return F_(F_({},Rh),{},{coordinate:a.coordinate})};function nqe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function aqe(t,e){var r=nqe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function sqe(t,e,r){if(r==null||e==null)return!0;var n=Ua(t,e);return n==null||!I0(r)?!0:aqe(n,r)}var W8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!ps(s))return a;var i=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(i,Math.min(s,o)),u=e[c];return u==null||sqe(u,r,n)?String(c):null},goe=(t,e,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},xoe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.graphicalItemId)===a})},bw=t=>t.options.tooltipPayloadSearcher,Lv=t=>t.tooltip;function aG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aG(Object(r),!0).forEach(function(n){iqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iqe(t,e,r){return(e=oqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oqe(t){var e=lqe(t,"string");return typeof e=="symbol"?e:e+""}function lqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cqe(t,e){return t??e}var voe=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,A=[];return t.reduce((h,f)=>{var m,{dataDefinedOnItem:p,settings:g}=f,x=cqe(p,o),y=Array.isArray(x)?Yae(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,I;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?I=s7e(y,n,a):I=s(y,e,c,w),Array.isArray(I))I.forEach(C=>{var E=sG(sG({},g),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(m$({tooltipEntrySettings:E,dataKey:C.dataKey,payload:C.payload,value:Ua(C.payload,C.dataKey),name:C.name}))});else{var T;h.push(m$({tooltipEntrySettings:g,dataKey:b,payload:I,value:Ua(I,b),name:(T=Ua(I,w))!==null&&T!==void 0?T:g==null?void 0:g.name}))}return h},A)}},X8=Tt([Pi,On,Uie,y8,Ti],Jie),uqe=Tt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),dqe=Tt([Ti,Dv],I8),Uv=Tt([uqe,Pi,dqe],T8,{memoizeOptions:{resultEqualityCheck:c5}}),Aqe=Tt([Uv],t=>t.filter(o5)),fqe=Tt([Uv],P8,{memoizeOptions:{resultEqualityCheck:c5}}),Qv=Tt([fqe,Df],j8),hqe=Tt([Aqe,Df,Pi],Rie),Y8=Tt([Qv,Pi,Uv],F8),yoe=Tt([Pi],O8),mqe=Tt([Pi],t=>t.allowDataOverflow),boe=Tt([yoe,mqe],hie),pqe=Tt([Uv],t=>t.filter(o5)),gqe=Tt([hqe,pqe,mw,Tie],$ie),xqe=Tt([gqe,Df,Ti,boe],Kie),vqe=Tt([Uv],Vie),yqe=Tt([Qv,Pi,vqe,d5,Ti],M8,{memoizeOptions:{resultEqualityCheck:l5}}),bqe=Tt([Gie,Ti,Dv],Rv),wqe=Tt([bqe,Ti],Wie),Nqe=Tt([zie,Ti,Dv],Rv),_qe=Tt([Nqe,Ti],Xie),Cqe=Tt([qie,Ti,Dv],Rv),Eqe=Tt([Cqe,Ti],Yie),Sqe=Tt([wqe,Eqe,_qe],KS),Iqe=Tt([Pi,yoe,boe,xqe,yqe,Sqe,On,Ti],L8),ww=Tt([Pi,On,Qv,Y8,mw,Ti,Iqe],U8),Bqe=Tt([ww,Pi,X8],H8),Tqe=Tt([Pi,ww,Bqe,Ti],K8),woe=t=>{var e=Ti(t),r=Dv(t),n=!1;return yw(t,e,r,n)},Noe=Tt([Pi,woe],s5),_oe=Tt([Pi,X8,Tqe,Noe],V8),Pqe=Tt([On,Y8,Pi,Ti],soe),jqe=Tt([On,Y8,Pi,Ti],ioe),kqe=(t,e,r,n,a,s,i,o)=>{if(e){var{type:c}=e,u=Wp(t,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,A=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return A=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?_o(a[0]-a[1])*2*A:A,u&&i?i.map((h,f)=>({coordinate:n(h)+A,value:h,index:f,offset:A})):n.domain().map((h,f)=>({coordinate:n(h)+A,value:s?s[h]:h,index:f,offset:A}))}}},Lf=Tt([On,Pi,X8,_oe,woe,Pqe,jqe,Ti],kqe),J8=Tt([loe,coe,Vze],(t,e,r)=>uoe(r.shared,t,e)),Coe=t=>t.tooltip.settings.trigger,Z8=t=>t.tooltip.settings.defaultIndex,Nw=Tt([Lv,J8,Coe,Z8],poe),Tp=Tt([Nw,Qv,vw,ww],W8),Eoe=Tt([Lf,Tp],doe),eR=Tt([Nw],t=>{if(t)return t.dataKey}),Fqe=Tt([Nw],t=>{if(t)return t.graphicalItemId}),Soe=Tt([Lv,J8,Coe,Z8],xoe),Oqe=Tt([kf,Ff,On,Ii,Lf,Z8,Soe,bw],goe),Dqe=Tt([Nw,Oqe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Rqe=Tt([Nw],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Mqe=Tt([Soe,Tp,Df,vw,Eoe,bw,J8],voe);Tt([Mqe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function iG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iG(Object(r),!0).forEach(function(n){Lqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lqe(t,e,r){return(e=Uqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uqe(t){var e=Qqe(t,"string");return typeof e=="symbol"?e:e+""}function Qqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vqe=()=>Ir(Pi),Hqe=()=>{var t=Vqe(),e=Ir(Lf),r=Ir(_oe);return _S(!t||!r?void 0:oG(oG({},t),{},{scale:r}),e)};function lG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Og(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(r),!0).forEach(function(n){$qe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $qe(t,e,r){return(e=Kqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kqe(t){var e=Gqe(t,"string");return typeof e=="symbol"?e:e+""}function Gqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zqe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},qqe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return Og(Og(Og({},n),ti(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return Og(Og(Og({},n),ti(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Wqe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var Ioe=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var o=0;o<i;o++){var c,u,d,A,h,f=o>0?(c=r[o-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[o])===null||d===void 0?void 0:d.coordinate,p=o>=i-1?(A=r[0])===null||A===void 0?void 0:A.coordinate:(h=r[o+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(f==null||m==null||p==null))if(_o(m-f)!==_o(p-m)){var x=[];if(_o(p-m)===_o(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+f)/2),x[1]=Math.max(y,(y+f)/2)}else{g=f;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var I;return(I=r[o])===null||I===void 0?void 0:I.index}}else{var T=Math.min(f,p),C=Math.max(f,p);if(t>(T+m)/2&&t<=(C+m)/2){var E;return(E=r[o])===null||E===void 0?void 0:E.index}}}else if(e)for(var S=0;S<i;S++){var O=e[S];if(O!=null){var B=e[S+1],P=e[S-1];if(S===0&&B!=null&&t<=(O.coordinate+B.coordinate)/2||S===i-1&&P!=null&&t>(O.coordinate+P.coordinate)/2||S>0&&S<i-1&&P!=null&&B!=null&&t>(O.coordinate+P.coordinate)/2&&t<=(O.coordinate+B.coordinate)/2)return O.index}}return-1},Xqe=()=>Ir(y8),tR=(t,e)=>e,Boe=(t,e,r)=>r,rR=(t,e,r,n)=>n,Yqe=Tt(Lf,t=>B4(t,e=>e.coordinate)),nR=Tt([Lv,tR,Boe,rR],poe),aR=Tt([nR,Qv,vw,ww],W8),Jqe=(t,e,r)=>{if(e!=null){var n=Lv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Toe=Tt([Lv,tR,Boe,rR],xoe),GS=Tt([kf,Ff,On,Ii,Lf,rR,Toe,bw],goe),Zqe=Tt([nR,GS],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Poe=Tt([Lf,aR],doe),eWe=Tt([Toe,aR,Df,vw,Poe,bw,tR],voe),tWe=Tt([nR,aR],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),rWe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&Wqe(t,i)){var o=TQe(t,e),c=Ioe(o,s,a,r,n),u=zqe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},nWe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var o=$He(t,r);if(o){var c=PQe(o,e),u=Ioe(c,i,s,n,a),d=qqe(e,s,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},aWe=(t,e,r,n,a,s,i,o)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?rWe(t,e,n,a,s,i,o):nWe(t,e,r,n,a,s,i)},sWe=Tt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),iWe=Tt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Xo)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:HGe}});function cG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cG(Object(r),!0).forEach(function(n){oWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oWe(t,e,r){return(e=lWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lWe(t){var e=cWe(t,"string");return typeof e=="symbol"?e:e+""}function cWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uWe={},dWe={zIndexMap:Object.values(Xo).reduce((t,e)=>uG(uG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),uWe)},AWe=new Set(Object.values(Xo));function fWe(t){return AWe.has(t)}var joe=Zl({name:"zIndex",initialState:dWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ga()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!fWe(r)&&delete t.zIndexMap[r])},prepare:Ga()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Ga()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:Ga()}}}),{registerZIndexPortal:hWe,unregisterZIndexPortal:mWe,registerZIndexPortalElement:pWe,unregisterZIndexPortalElement:gWe}=joe.actions,xWe=joe.reducer;function mA(t){var{zIndex:e,children:r}=t,n=sVe(),a=n&&e!==void 0&&e!==0,s=Rc(),i=Ba();v.useLayoutEffect(()=>a?(i(hWe({zIndex:e})),()=>{i(mWe({zIndex:e}))}):aw,[i,e,a]);var o=Ir(c=>sWe(c,e,s));return a?o?id.createPortal(r,o):null:r}function Xk(){return Xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xk.apply(null,arguments)}function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function O_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){vWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vWe(t,e,r){return(e=yWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yWe(t){var e=bWe(t,"string");return typeof e=="symbol"?e:e+""}function bWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wWe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function NWe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:o,cursor:c,tooltipEventType:u,chartName:d}=t,A=r,h=n,f=a;if(!c||!A||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=A,p=aHe,g=Xo.cursorLine;else if(d==="BarChart")m=sHe(o,A,s,i),p=Cse,g=Xo.cursorRectangle;else if(o==="radial"&&Kne(A)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:I}=Sse(A);m={cx:x,cy:y,startAngle:w,endAngle:I,innerRadius:b,outerRadius:b},p=Bse,g=Xo.cursorLine}else m={points:qHe(o,A,s)},p=qD,g=Xo.cursorLine;var T=typeof c=="object"&&"className"in c?c.className:void 0,C=O_(O_(O_(O_({stroke:"#ccc",pointerEvents:"none"},s),m),ab(c)),{},{payload:h,payloadIndex:f,className:aa("recharts-tooltip-cursor",T)});return v.createElement(mA,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(wWe,{cursor:c,cursorComp:p,cursorProps:C}))}function _We(t){var e=Hqe(),r=nVe(),n=cw(),a=Xqe();return e==null||r==null||n==null||a==null?null:v.createElement(NWe,Xk({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var koe=v.createContext(null),CWe=()=>v.useContext(koe),Foe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,A,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new a(d,A||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)e.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var h=0,f=A.length,m=new Array(f);h<f;h++)m[h]=A[h].fn;return m},o.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},o.prototype.emit=function(u,d,A,h,f,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,A),!0;case 4:return g.fn.call(g.context,d,A,h),!0;case 5:return g.fn.call(g.context,d,A,h,f),!0;case 6:return g.fn.call(g.context,d,A,h,f,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,I;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,A);break;case 4:g[b].fn.call(g[b].context,d,A,h);break;default:if(!y)for(I=1,y=new Array(x-1);I<x;I++)y[I-1]=arguments[I];g[b].fn.apply(g[b].context,y)}}return!0},o.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},o.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},o.prototype.removeListener=function(u,d,A,h){var f=r?r+u:u;if(!this._events[f])return this;if(!d)return i(this,f),this;var m=this._events[f];if(m.fn)m.fn===d&&(!h||m.once)&&(!A||m.context===A)&&i(this,f);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||A&&m[p].context!==A)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:i(this,f)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(Foe);var EWe=Foe.exports;const SWe=Ef(EWe);var xb=new SWe,Yk="recharts.syncEvent.tooltip",AG="recharts.syncEvent.brush";function Ooe(t,e){if(e){var r=Number.parseInt(e,10);if(!iA(r))return t==null?void 0:t[r]}}var IWe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Doe=Zl({name:"options",initialState:IWe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BWe=Doe.reducer,{createEventEmitter:TWe}=Doe.actions;function PWe(t){return t.tooltip.syncInteraction}var jWe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Roe=Zl({name:"chartData",initialState:jWe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:fG,setDataStartEndIndexes:kWe,setComputedData:krt}=Roe.actions,FWe=Roe.reducer,OWe=["x","y"];function hG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hG(Object(r),!0).forEach(function(n){DWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DWe(t,e,r){return(e=RWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RWe(t){var e=MWe(t,"string");return typeof e=="symbol"?e:e+""}function MWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LWe(t,e){if(t==null)return{};var r,n,a=UWe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function UWe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function QWe(){var t=Ir(b8),e=Ir(w8),r=Ba(),n=Ir(Pie),a=Ir(Lf),s=cw(),i=$4(),o=Ir(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return aw;var c=(u,d,A)=>{if(e!==A&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var f=d.payload.coordinate,{x:m,y:p}=f,g=LWe(f,OWe),{x,y,width:b,height:w}=d.payload.sourceViewBox,I=Dg(Dg({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(Dg(Dg({},d),{},{payload:Dg(Dg({},d.payload),{},{coordinate:I})}))}else r(d);return}if(a!=null){var T;if(typeof n=="function"){var C={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(a,C);T=a[E]}else n==="value"&&(T=a.find(ee=>String(ee.value)===d.payload.label));var{coordinate:S}=d.payload;if(T==null||d.payload.active===!1||S==null||i==null){r(qk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:B}=S,P=Math.min(O,i.x+i.width),D=Math.min(B,i.y+i.height),W={x:s==="horizontal"?T.coordinate:P,y:s==="horizontal"?D:T.coordinate},Ae=qk({active:d.payload.active,coordinate:W,dataKey:d.payload.dataKey,index:String(T.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(Ae)}}};return xb.on(Yk,c),()=>{xb.off(Yk,c)}},[o,r,e,t,n,a,s,i])}function VWe(){var t=Ir(b8),e=Ir(w8),r=Ba();v.useEffect(()=>{if(t==null)return aw;var n=(a,s,i)=>{e!==i&&t===a&&r(kWe(s))};return xb.on(AG,n),()=>{xb.off(AG,n)}},[r,e,t])}function HWe(){var t=Ba();v.useEffect(()=>{t(TWe())},[t]),QWe(),VWe()}function $We(t,e,r,n,a,s){var i=Ir(f=>Jqe(f,t,e)),o=Ir(w8),c=Ir(b8),u=Ir(Pie),d=Ir(PWe),A=d==null?void 0:d.active,h=$4();v.useEffect(()=>{if(!A&&c!=null&&o!=null){var f=qk({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});xb.emit(Yk,c,f,o)}},[A,r,i,a,n,o,c,u,s,h])}function mG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mG(Object(r),!0).forEach(function(n){KWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KWe(t,e,r){return(e=GWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GWe(t){var e=zWe(t,"string");return typeof e=="symbol"?e:e+""}function zWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qWe(t){return t.dataKey}function WWe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(RVe,e)}var gG=[],XWe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xG(t){var e,r,n=Io(t,XWe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:o,content:c,filterNull:u,isAnimationActive:d,offset:A,payloadUniqBy:h,position:f,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:I,axisId:T}=n,C=Ba(),E=typeof w=="number"?String(w):w;v.useEffect(()=>{C(zze({shared:y,trigger:b,axisId:T,active:a,defaultIndex:E}))},[C,y,b,T,a,E]);var S=$4(),O=yse(),B=Qze(y),{activeIndex:P,isActive:D}=(e=Ir(q=>tWe(q,B,b,E)))!==null&&e!==void 0?e:{},W=Ir(q=>eWe(q,B,b,E)),Ae=Ir(q=>Poe(q,B,b,E)),ee=Ir(q=>Zqe(q,B,b,E)),ce=W,de=CWe(),X=(r=a??D)!==null&&r!==void 0?r:!1,[pe,Se]=bae([ce,X]),k=B==="axis"?Ae:void 0;$We(B,b,ee,k,P,X);var F=I??de;if(F==null||S==null||B==null)return null;var V=ce??gG;X||(V=gG),u&&V.length&&(V=cae(V.filter(q=>q.value!=null&&(q.hide!==!0||n.includeHidden)),h,qWe));var M=V.length>0,L=v.createElement($Ve,{allowEscapeViewBox:s,animationDuration:i,animationEasing:o,isAnimationActive:d,active:X,coordinate:ee,hasPayload:M,offset:A,position:f,reverseDirection:m,useTranslate3d:p,viewBox:S,wrapperStyle:g,lastBoundingBox:pe,innerRef:Se,hasPortalFromProps:!!I},WWe(c,pG(pG({},n),{},{payload:V,label:k,active:X,activeIndex:P,coordinate:ee,accessibilityLayer:O})));return v.createElement(v.Fragment,null,id.createPortal(L,F),X&&v.createElement(_We,{cursor:x,tooltipEventType:B,coordinate:ee,payload:V,index:P}))}var _w=t=>null;_w.displayName="Cell";function YWe(t,e,r){return(e=JWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JWe(t){var e=ZWe(t,"string");return typeof e=="symbol"?e:e+""}function ZWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eXe{constructor(e){YWe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function vG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tXe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(r),!0).forEach(function(n){rXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rXe(t,e,r){return(e=nXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nXe(t){var e=aXe(t,"string");return typeof e=="symbol"?e:e+""}function aXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sXe={cacheSize:2e3,enableCache:!0},Moe=tXe({},sXe),yG=new eXe(Moe.cacheSize),iXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bG="recharts_measurement_span";function oXe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var wG=(t,e)=>{try{var r=document.getElementById(bG);r||(r=document.createElement("span"),r.setAttribute("id",bG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,iXe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},t2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||W4.isSsr)return{width:0,height:0};if(!Moe.enableCache)return wG(e,r);var n=oXe(e,r),a=yG.get(n);if(a)return a;var s=wG(e,r);return yG.set(n,s),s},Loe;function lXe(t,e,r){return(e=cXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cXe(t){var e=uXe(t,"string");return typeof e=="symbol"?e:e+""}function uXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_G=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AXe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fXe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hXe=["cm","mm","pt","pc","in","Q","px"];function mXe(t){return hXe.includes(t)}var mx="NaN";function pXe(t,e){return t*fXe[e]}class fo{static parse(e){var r,[,n,a]=(r=AXe.exec(e))!==null&&r!==void 0?r:[];return n==null?fo.NaN:new fo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,iA(e)&&(this.unit=""),r!==""&&!dXe.test(r)&&(this.num=NaN,this.unit=""),mXe(r)&&(this.num=pXe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new fo(NaN,""):new fo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new fo(NaN,""):new fo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new fo(NaN,""):new fo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new fo(NaN,""):new fo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return iA(this.num)}}Loe=fo;lXe(fo,"NaN",new Loe(NaN,""));function Uoe(t){if(t==null||t.includes(mx))return mx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=NG.exec(e))!==null&&r!==void 0?r:[],i=fo.parse(n??""),o=fo.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return mx;e=e.replace(NG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,A,h]=(u=_G.exec(e))!==null&&u!==void 0?u:[],f=fo.parse(d??""),m=fo.parse(h??""),p=A==="+"?f.add(m):f.subtract(m);if(p.isNaN())return mx;e=e.replace(_G,p.toString())}return e}var CG=/\(([^()]*)\)/;function gXe(t){for(var e=t,r;(r=CG.exec(e))!=null;){var[,n]=r;e=e.replace(CG,Uoe(n))}return e}function xXe(t){var e=t.replace(/\s+/g,"");return e=gXe(e),e=Uoe(e),e}function vXe(t){try{return xXe(t)}catch{return mx}}function _T(t){var e=vXe(t.slice(5,-1));return e===mx?"":e}var yXe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],bXe=["dx","dy","angle","className","breakAll"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jk.apply(null,arguments)}function EG(t,e){if(t==null)return{};var r,n,a=wXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Qoe=/[ \f\n\r\t\v\u2028\u2029]+/,Voe=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Yi(e)||(r?a=e.toString().split(""):a=e.toString().split(Qoe));var s=a.map(o=>({word:o,width:t2(o,n).width})),i=r?0:t2("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function NXe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Hoe=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:o}=s,c=a[a.length-1];if(c&&o!=null&&(e==null||n||c.width+o+r<Number(e)))c.words.push(i),c.width+=o+r;else{var u={words:[i],width:o};a.push(u)}return a},[]),$oe=t=>t.reduce((e,r)=>e.width>r.width?e:r),_Xe="",SG=(t,e,r,n,a,s,i,o)=>{var c=t.slice(0,e),u=Voe({breakAll:r,style:n,children:c+_Xe});if(!u)return[!1,[]];var d=Hoe(u.wordsWithComputedWidth,s,i,o),A=d.length>a||$oe(d).width>Number(s);return[A,d]},CXe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=t,u=jr(s),d=String(i),A=Hoe(e,n,r,a);if(!u||a)return A;var h=A.length>s||$oe(A).width>Number(n);if(!h)return A;for(var f=0,m=d.length-1,p=0,g;f<=m&&p<=d.length-1;){var x=Math.floor((f+m)/2),y=x-1,[b,w]=SG(d,y,c,o,s,n,r,a),[I]=SG(d,x,c,o,s,n,r,a);if(!b&&!I&&(f=x+1),b&&I&&(m=x-1),!b&&I){g=w;break}p++}return g||A},IG=t=>{var e=Yi(t)?[]:t.toString().split(Qoe);return[{words:e,width:void 0}]},EXe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!W4.isSsr){var o,c,u=Voe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:A}=u;o=d,c=A}else return IG(n);return CXe({breakAll:s,children:n,maxLines:i,style:a},o,c,e,!!r)}return IG(n)},Koe="#808080",SXe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Koe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},m5=v.forwardRef((t,e)=>{var r=Io(t,SXe),{x:n,y:a,lineHeight:s,capHeight:i,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,A=EG(r,yXe),h=v.useMemo(()=>EXe({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:c,style:A.style,width:A.width}),[A.breakAll,A.children,A.maxLines,c,A.style,A.width]),{dx:f,dy:m,angle:p,className:g,breakAll:x}=A,y=EG(A,bXe);if(!oA(n)||!oA(a)||h.length===0)return null;var b=Number(n)+(jr(f)?f:0),w=Number(a)+(jr(m)?m:0);if(!ps(b)||!ps(w))return null;var I;switch(d){case"start":I=_T("calc(".concat(i,")"));break;case"middle":I=_T("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:I=_T("calc(".concat(h.length-1," * -").concat(s,")"));break}var T=[];if(c){var C=h[0].width,{width:E}=A;T.push("scale(".concat(jr(E)&&jr(C)?E/C:1,")"))}return p&&T.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),T.length&&(y.transform=T.join(" ")),v.createElement("text",Jk({},Iu(y),{ref:e,x:b,y:w,className:aa("recharts-text",g),textAnchor:u,fill:o.includes("url")?Koe:o}),h.map((S,O)=>{var B=S.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:O===0?I:s,key:"".concat(B,"-").concat(O)},B)}))});m5.displayName="Text";var IXe=["labelRef"],BXe=["content"];function BG(t,e){if(t==null)return{};var r,n,a=TXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function TXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function TG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(r),!0).forEach(function(n){PXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PXe(t,e,r){return(e=jXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jXe(t){var e=kXe(t,"string");return typeof e=="symbol"?e:e+""}function kXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QA.apply(null,arguments)}var Goe=v.createContext(null),FXe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:o}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(Goe.Provider,{value:c},o)},zoe=()=>{var t=v.useContext(Goe),e=$4();return t||ose(e)},OXe=v.createContext(null),DXe=()=>{var t=v.useContext(OXe),e=Ir(Die);return t||e},RXe=t=>{var{value:e,formatter:r}=t,n=Yi(t.children)?e:t.children;return typeof r=="function"?r(n):n},sR=t=>t!=null&&typeof t=="function",MXe=(t,e)=>{var r=_o(e-t),n=Math.min(Math.abs(e-t),360);return r*n},LXe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:A,endAngle:h,clockWise:f}=a,m=(u+d)/2,p=MXe(A,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=A+g*s,y=f;break;case"insideEnd":x=h-g*s,y=!f;break;case"end":x=h+g*s,y=f;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=ti(o,c,m,x),w=ti(o,c,m,x+(y?1:-1)*359),I="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),T=Yi(t.id)?sb("recharts-radial-line-"):t.id;return v.createElement("text",QA({},n,{dominantBaseline:"central",className:aa("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:T,d:I})),v.createElement("textPath",{xlinkHref:"#".concat(T)},r))},UXe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(r==="outside"){var{x:d,y:A}=ti(n,a,i+e,u);return{x:d,y:A,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:f,y:m}=ti(n,a,h,u);return{x:f,y:m,textAnchor:"middle",verticalAnchor:"middle"}},Zk=t=>"cx"in t&&jr(t.cx),QXe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!Zk(r)&&(s=r);var{x:i,y:o,upperWidth:c,lowerWidth:u,height:d}=e,A=i,h=i+(c-u)/2,f=(A+h)/2,m=(c+u)/2,p=A+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,I=w*n,T=w>0?"end":"start",C=w>0?"start":"end";if(a==="top"){var E={x:A+c/2,y:o-x,textAnchor:"middle",verticalAnchor:y};return Rs(Rs({},E),s?{height:Math.max(o-s.y,0),width:c}:{})}if(a==="bottom"){var S={x:h+u/2,y:o+d+x,textAnchor:"middle",verticalAnchor:b};return Rs(Rs({},S),s?{height:Math.max(s.y+s.height-(o+d),0),width:u}:{})}if(a==="left"){var O={x:f-I,y:o+d/2,textAnchor:T,verticalAnchor:"middle"};return Rs(Rs({},O),s?{width:Math.max(O.x-s.x,0),height:d}:{})}if(a==="right"){var B={x:f+m+I,y:o+d/2,textAnchor:C,verticalAnchor:"middle"};return Rs(Rs({},B),s?{width:Math.max(s.x+s.width-B.x,0),height:d}:{})}var P=s?{width:m,height:d}:{};return a==="insideLeft"?Rs({x:f+I,y:o+d/2,textAnchor:C,verticalAnchor:"middle"},P):a==="insideRight"?Rs({x:f+m-I,y:o+d/2,textAnchor:T,verticalAnchor:"middle"},P):a==="insideTop"?Rs({x:A+c/2,y:o+x,textAnchor:"middle",verticalAnchor:b},P):a==="insideBottom"?Rs({x:h+u/2,y:o+d-x,textAnchor:"middle",verticalAnchor:y},P):a==="insideTopLeft"?Rs({x:A+I,y:o+x,textAnchor:C,verticalAnchor:b},P):a==="insideTopRight"?Rs({x:A+c-I,y:o+x,textAnchor:T,verticalAnchor:b},P):a==="insideBottomLeft"?Rs({x:h+I,y:o+d-x,textAnchor:C,verticalAnchor:y},P):a==="insideBottomRight"?Rs({x:h+u-I,y:o+d-x,textAnchor:T,verticalAnchor:y},P):a&&typeof a=="object"&&(jr(a.x)||vf(a.x))&&(jr(a.y)||vf(a.y))?Rs({x:i+Jo(a.x,m),y:o+Jo(a.y,d),textAnchor:"end",verticalAnchor:"end"},P):Rs({x:p,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},VXe={angle:0,offset:5,zIndex:Xo.label,position:"middle",textBreakAll:!1};function Sh(t){var e=Io(t,VXe),{viewBox:r,position:n,value:a,children:s,content:i,className:o="",textBreakAll:c,labelRef:u}=e,d=DXe(),A=zoe(),h=n==="center"?A:d??A,f,m,p;if(r==null?f=h:Zk(r)?f=r:f=ose(r),!f||Yi(a)&&Yi(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=Rs(Rs({},e),{},{viewBox:f});if(v.isValidElement(i)){var{labelRef:x}=g,y=BG(g,IXe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=BG(g,BXe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=RXe(e);var I=Iu(e);if(Zk(f)){if(n==="insideStart"||n==="insideEnd"||n==="end")return LXe(e,n,m,I,f);p=UXe(f,e.offset,e.position)}else p=QXe(e,f);return v.createElement(mA,{zIndex:e.zIndex},v.createElement(m5,QA({ref:u,className:aa("recharts-label",o)},I,p,{textAnchor:NXe(I.textAnchor)?I.textAnchor:p.textAnchor,breakAll:c}),m))}Sh.displayName="Label";var HXe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(Sh,QA({key:"label-implicit"},n)):oA(t)?v.createElement(Sh,QA({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===Sh?v.cloneElement(t,Rs({key:"label-implicit"},n)):v.createElement(Sh,QA({key:"label-implicit",content:t},n)):sR(t)?v.createElement(Sh,QA({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(Sh,QA({},t,{key:"label-implicit"},n)):null};function $Xe(t){var{label:e,labelRef:r}=t,n=zoe();return HXe(e,n,r)||null}var qoe={},Woe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Woe);var Xoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Xoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe,r=Xoe,n=S4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(qoe);var KXe=qoe.last;const GXe=Ef(KXe);var zXe=["valueAccessor"],qXe=["dataKey","clockWise","id","textBreakAll","zIndex"];function zS(){return zS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zS.apply(null,arguments)}function PG(t,e){if(t==null)return{};var r,n,a=WXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function WXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var XXe=t=>Array.isArray(t.value)?GXe(t.value):t.value,Yoe=v.createContext(void 0),YXe=Yoe.Provider,Joe=v.createContext(void 0),JXe=Joe.Provider;function ZXe(){return v.useContext(Yoe)}function eYe(){return v.useContext(Joe)}function PC(t){var{valueAccessor:e=XXe}=t,r=PG(t,zXe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:o}=r,c=PG(r,qXe),u=ZXe(),d=eYe(),A=u||d;return!A||!A.length?null:v.createElement(mA,{zIndex:o??Xo.label},v.createElement(Cl,{className:"recharts-label-list"},A.map((h,f)=>{var m,p=Yi(n)?e(h,f):Ua(h&&h.payload,n),g=Yi(s)?{}:{id:"".concat(s,"-").concat(f)};return v.createElement(Sh,zS({key:"label-".concat(f)},Iu(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:f,zIndex:0}))})))}PC.displayName="LabelList";function Zoe(t){var{label:e}=t;return e?e===!0?v.createElement(PC,{key:"labelList-implicit"}):v.isValidElement(e)||sR(e)?v.createElement(PC,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(PC,zS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var ele=t=>t.graphicalItems.polarItems,tYe=Tt([ts,pw],I8),p5=Tt([ele,gs,tYe],T8),rYe=Tt([p5],P8),g5=Tt([rYe,a5],j8),nYe=Tt([g5,gs,p5],F8);Tt([g5,gs,p5],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=Ua(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ua(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var jG=()=>{},aYe=Tt([g5,gs,p5,d5,ts],M8),sYe=Tt([gs,D8,R8,jG,aYe,jG,On,ts],L8),tle=Tt([gs,On,g5,nYe,mw,ts,sYe],U8),iYe=Tt([tle,gs,Mv],H8);Tt([gs,tle,iYe,ts],K8);var oYe={radiusAxis:{},angleAxis:{}},rle=Zl({name:"polarAxis",initialState:oYe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Frt,removeRadiusAxis:Ort,addAngleAxis:Drt,removeAngleAxis:Rrt}=rle.actions,lYe=rle.reducer;function kG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(r),!0).forEach(function(n){cYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cYe(t,e,r){return(e=uYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uYe(t){var e=dYe(t,"string");return typeof e=="symbol"?e:e+""}function dYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AYe=(t,e)=>e,iR=Tt([ele,AYe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),fYe=[],oR=(t,e,r)=>(r==null?void 0:r.length)===0?fYe:r,nle=Tt([a5,iR,oR],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>FG(FG({},e.presentationProps),s.props))),a!=null)return a}}),hYe=Tt([nle,iR,oR],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=Ua(n,e.nameKey,e.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=e.fill,{value:L4(i,e.dataKey),color:o,payload:n,type:e.legendType}})}),mYe=Tt([nle,iR,oR,Ii],(t,e,r,n)=>{if(!(e==null||t==null))return gJe({offset:n,pieSettings:e,displayedData:t,cells:r})}),ale={exports:{}},xa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR=Symbol.for("react.transitional.element"),cR=Symbol.for("react.portal"),x5=Symbol.for("react.fragment"),v5=Symbol.for("react.strict_mode"),y5=Symbol.for("react.profiler"),b5=Symbol.for("react.consumer"),w5=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),_5=Symbol.for("react.suspense"),C5=Symbol.for("react.suspense_list"),E5=Symbol.for("react.memo"),S5=Symbol.for("react.lazy"),pYe=Symbol.for("react.view_transition"),gYe=Symbol.for("react.client.reference");function ku(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case lR:switch(t=t.type,t){case x5:case y5:case v5:case _5:case C5:case pYe:return t;default:switch(t=t&&t.$$typeof,t){case w5:case N5:case S5:case E5:return t;case b5:return t;default:return e}}case cR:return e}}}xa.ContextConsumer=b5;xa.ContextProvider=w5;xa.Element=lR;xa.ForwardRef=N5;xa.Fragment=x5;xa.Lazy=S5;xa.Memo=E5;xa.Portal=cR;xa.Profiler=y5;xa.StrictMode=v5;xa.Suspense=_5;xa.SuspenseList=C5;xa.isContextConsumer=function(t){return ku(t)===b5};xa.isContextProvider=function(t){return ku(t)===w5};xa.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lR};xa.isForwardRef=function(t){return ku(t)===N5};xa.isFragment=function(t){return ku(t)===x5};xa.isLazy=function(t){return ku(t)===S5};xa.isMemo=function(t){return ku(t)===E5};xa.isPortal=function(t){return ku(t)===cR};xa.isProfiler=function(t){return ku(t)===y5};xa.isStrictMode=function(t){return ku(t)===v5};xa.isSuspense=function(t){return ku(t)===_5};xa.isSuspenseList=function(t){return ku(t)===C5};xa.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===x5||t===y5||t===v5||t===_5||t===C5||typeof t=="object"&&t!==null&&(t.$$typeof===S5||t.$$typeof===E5||t.$$typeof===w5||t.$$typeof===b5||t.$$typeof===N5||t.$$typeof===gYe||t.getModuleId!==void 0)};xa.typeOf=ku;ale.exports=xa;var xYe=ale.exports,OG=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",DG=null,CT=null,sle=t=>{if(t===DG&&Array.isArray(CT))return CT;var e=[];return v.Children.forEach(t,r=>{Yi(r)||(xYe.isFragment(r)?e=e.concat(sle(r.props.children)):e.push(r))}),CT=e,DG=t,e};function uR(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>OG(a)):n=[OG(e)],sle(t).forEach(a=>{var s=Cp(a,"type.displayName")||Cp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var ile={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(ile);var vYe=ile.isPlainObject;const yYe=Ef(vYe);var RG,MG,LG,UG,QG;function VG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(r),!0).forEach(function(n){bYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bYe(t,e,r){return(e=wYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wYe(t){var e=NYe(t,"string");return typeof e=="symbol"?e:e+""}function NYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qS(){return qS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qS.apply(null,arguments)}function G1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $G=(t,e,r,n,a)=>{var s=r-n,i;return i=Ns(RG||(RG=G1(["M ",",",""])),t,e),i+=Ns(MG||(MG=G1(["L ",",",""])),t+r,e),i+=Ns(LG||(LG=G1(["L ",",",""])),t+r-s/2,e+a),i+=Ns(UG||(UG=G1(["L ",",",""])),t+r-s/2-n,e+a),i+=Ns(QG||(QG=G1(["L ",","," Z"])),t,e),i},_Ye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CYe=t=>{var e=Io(t,_Ye),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:A}=e,h=v.useRef(null),[f,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=Y4(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var W=h.current.getTotalLength();W&&m(W)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var I=aa("recharts-trapezoid",o);if(!A)return v.createElement("g",null,v.createElement("path",qS({},Iu(e),{className:I,d:$G(r,n,a,s,i)})));var T=p.current,C=g.current,E=x.current,S=y.current,O=b.current,B="0px ".concat(f===-1?1:f,"px"),P="".concat(f,"px 0px"),D=bse(["strokeDasharray"],u,c);return v.createElement(X4,{animationId:w,key:w,canBegin:f>0,duration:u,easing:c,isActive:A,begin:d},W=>{var Ae=pi(T,a,W),ee=pi(C,s,W),ce=pi(E,i,W),de=pi(S,r,W),X=pi(O,n,W);h.current&&(p.current=Ae,g.current=ee,x.current=ce,y.current=de,b.current=X);var pe=W>0?{transition:D,strokeDasharray:P}:{strokeDasharray:B};return v.createElement("path",qS({},Iu(e),{className:I,d:$G(de,X,Ae,ee,ce),ref:h,style:HG(HG({},pe),e.style)}))})},EYe=["option","shapeType","activeClassName"];function SYe(t,e){if(t==null)return{};var r,n,a=IYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function IYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function KG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KG(Object(r),!0).forEach(function(n){BYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BYe(t,e,r){return(e=TYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TYe(t){var e=PYe(t,"string");return typeof e=="symbol"?e:e+""}function PYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jYe(t,e){return WS(WS({},e),t)}function kYe(t,e){return t==="symbols"}function GG(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(Cse,r);case"trapezoid":return v.createElement(CYe,r);case"sector":return v.createElement(Bse,r);case"symbols":if(kYe(e))return v.createElement(CD,r);break;case"curve":return v.createElement(qD,r);default:return null}}function FYe(t){return v.isValidElement(t)?t.props:t}function ole(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=SYe(t,EYe),s;if(v.isValidElement(e))s=v.cloneElement(e,WS(WS({},a),FYe(e)));else if(typeof e=="function")s=e(a,a.index);else if(yYe(e)&&typeof e!="boolean"){var i=jYe(e,a);s=v.createElement(GG,{shapeType:r,elementProps:i})}else{var o=a;s=v.createElement(GG,{shapeType:r,elementProps:o})}return a.isActive?v.createElement(Cl,{className:n},s):s}var dR=(t,e,r)=>{var n=Ba();return(a,s)=>i=>{t==null||t(a,s,i),n(foe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},AR=t=>{var e=Ba();return(r,n)=>a=>{t==null||t(r,n,a),e(qze())}},fR=(t,e,r)=>{var n=Ba();return(a,s)=>i=>{t==null||t(a,s,i),n(Wze({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function lle(t){var{tooltipEntrySettings:e}=t,r=Ba(),n=Rc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r($ze(e)):a.current!==e&&r(Kze({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(Gze(a.current)),a.current=null)},[r]),null}function OYe(t){var{legendPayload:e}=t,r=Ba(),n=Rc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(gse(e)):a.current!==e&&r(xse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(vse(a.current)),a.current=null)},[r]),null}function DYe(t){var{legendPayload:e}=t,r=Ba(),n=Ir(On),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(gse(e)):a.current!==e&&r(xse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(vse(a.current)),a.current=null)},[r]),null}var ET,RYe=()=>{var[t]=v.useState(()=>sb("uid-"));return t},MYe=(ET=$ce.useId)!==null&&ET!==void 0?ET:RYe;function LYe(t,e){var r=MYe();return e||(t?"".concat(t,"-").concat(r):r)}var UYe=v.createContext(void 0),cle=t=>{var{id:e,type:r,children:n}=t,a=LYe("recharts-".concat(r),e);return v.createElement(UYe.Provider,{value:a},n(a))},QYe={cartesianItems:[],polarItems:[]},ule=Zl({name:"graphicalItems",initialState:QYe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ga()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=ud(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:Ga()},removeCartesianGraphicalItem:{reducer(t,e){var r=ud(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Ga()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ga()},removePolarGraphicalItem:{reducer(t,e){var r=ud(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Ga()}}}),{addCartesianGraphicalItem:VYe,replaceCartesianGraphicalItem:HYe,removeCartesianGraphicalItem:$Ye,addPolarGraphicalItem:KYe,removePolarGraphicalItem:GYe}=ule.actions,zYe=ule.reducer,qYe=t=>{var e=Ba(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(VYe(t)):r.current!==t&&e(HYe({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e($Ye(r.current)),r.current=null)},[e]),null},WYe=v.memo(qYe);function XYe(t){var e=Ba();return v.useLayoutEffect(()=>(e(KYe(t)),()=>{e(GYe(t))}),[e,t]),null}var YYe=["key"],JYe=["onMouseEnter","onClick","onMouseLeave"],ZYe=["id"],eJe=["id"];function zG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(r),!0).forEach(function(n){tJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tJe(t,e,r){return(e=rJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rJe(t){var e=nJe(t,"string");return typeof e=="symbol"?e:e+""}function nJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B0(){return B0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B0.apply(null,arguments)}function I5(t,e){if(t==null)return{};var r,n,a=aJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function aJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sJe(t){var e=v.useMemo(()=>uR(t.children,_w),[t.children]),r=Ir(n=>hYe(n,t.id,e));return r==null?null:v.createElement(DYe,{legendPayload:r})}var iJe=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u,id:d}=t,A={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:L4(o,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(lle,{tooltipEntrySettings:A})}),oJe=(t,e)=>t>e?"start":t<e?"end":"middle",lJe=(t,e,r)=>Jo(typeof e=="function"?e(t):e,r,r*.8),cJe=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,o=Ese(s,i),c=a+Jo(t.cx,s,s/2),u=n+Jo(t.cy,i,i/2),d=Jo(t.innerRadius,o,0),A=lJe(r,t.outerRadius,o),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:A,maxRadius:h}},uJe=(t,e)=>{var r=_o(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function dJe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var AJe=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=aa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=I5(e,YYe);return v.createElement(qD,B0({},a,{type:"linear",className:r}))},fJe=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=aa("recharts-pie-label-text",dJe(t));return v.createElement(m5,B0({},e,{alignmentBaseline:"middle",className:a}),n)};function hJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var o=sA(r),c=ab(a),u=ab(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,A=e.map((h,f)=>{var m=(h.startAngle+h.endAngle)/2,p=ti(h.cx,h.cy,h.outerRadius+d,m),g=Es(Es(Es(Es({},o),h),{},{stroke:"none"},c),{},{index:f,textAnchor:oJe(p.x,h.cx)},p),x=Es(Es(Es(Es({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:f,points:[ti(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(mA,{zIndex:Xo.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(f)},v.createElement(Cl,null,s&&AJe(s,x),fJe(a,g,Ua(h,i))))});return v.createElement(Cl,{className:"recharts-pie-labels"},A)}function mJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(Zoe,{label:a}):v.createElement(hJe,{sectors:e,props:r,showLabels:n})}function pJe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,o=Ir(Tp),c=Ir(eR),u=Ir(Fqe),{onMouseEnter:d,onClick:A,onMouseLeave:h}=a,f=I5(a,JYe),m=dR(d,a.dataKey,i),p=AR(h),g=fR(A,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===o&&(c==null||a.dataKey===c)&&b,I=o?n:null,T=r&&w?r:I,C=Es(Es({},x),{},{stroke:x.stroke,tabIndex:-1,[Zae]:y,[ese]:i});return v.createElement(Cl,B0({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},sw(f,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(ole,B0({option:s??T,index:y,shapeType:"sector",isActive:w},C)))}))}function gJe(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:A}=r,h=Math.abs(r.minAngle),f=uJe(o,c),m=Math.abs(f),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(T=>Ua(T,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((T,C)=>{var E=Ua(C,u,0);return T+(jr(E)?E:0)},0),w;if(b>0){var I;w=n.map((T,C)=>{var E=Ua(T,u,0),S=Ua(T,d,C),O=cJe(r,s,T),B=(jr(E)?E:0)/b,P,D=Es(Es({},T),a&&a[C]&&a[C].props);C?P=I.endAngle+_o(f)*p*(E!==0?1:0):P=o;var W=P+_o(f)*((E!==0?h:0)+B*y),Ae=(P+W)/2,ee=(O.innerRadius+O.outerRadius)/2,ce=[{name:S,value:E,payload:D,dataKey:u,type:A,graphicalItemId:r.id}],de=ti(O.cx,O.cy,ee,Ae);return I=Es(Es(Es(Es({},r.presentationProps),{},{percent:B,cornerRadius:typeof i=="string"?parseFloat(i):i,name:S,tooltipPayload:ce,midAngle:Ae,middleRadius:ee,tooltipPosition:de},D),O),{},{value:E,dataKey:u,startAngle:P,endAngle:W,payload:D,paddingAngle:_o(f)*p}),I})}return w}function xJe(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(JXe,{value:e?a:void 0},n)}function vJe(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:A,onAnimationEnd:h}=e,f=Y4(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof A=="function"&&A(),g(!0)},[A]);return v.createElement(xJe,{showLabels:!p,sectors:a},v.createElement(X4,{animationId:f,begin:i,duration:o,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:f},b=>{var w=[],I=a&&a[0],T=I==null?void 0:I.startAngle;return a==null||a.forEach((C,E)=>{var S=m&&m[E],O=E>0?Cp(C,"paddingAngle",0):0;if(S){var B=pi(S.endAngle-S.startAngle,C.endAngle-C.startAngle,b),P=Es(Es({},C),{},{startAngle:T+O,endAngle:T+B+O});w.push(P),T=P.endAngle}else{var{endAngle:D,startAngle:W}=C,Ae=pi(0,D-W,b),ee=Es(Es({},C),{},{startAngle:T+O,endAngle:T+Ae+O});w.push(ee),T=ee.endAngle}}),r.current=w,v.createElement(Cl,null,v.createElement(pJe,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(mJe,{showLabels:!p,sectors:a,props:e}),e.children)}var yJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Xo.area};function bJe(t){var{id:e}=t,r=I5(t,ZYe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>uR(t.children,_w),[t.children]),o=Ir(d=>mYe(d,e,i)),c=v.useRef(null),u=aa("recharts-pie",a);return n||o==null?(c.current=null,v.createElement(Cl,{tabIndex:s,className:u})):v.createElement(mA,{zIndex:t.zIndex},v.createElement(iJe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(Cl,{tabIndex:s,className:u},v.createElement(vJe,{props:Es(Es({},r),{},{sectors:o}),previousSectorsRef:c,id:e})))}function dle(t){var e=Io(t,yJe),{id:r}=e,n=I5(e,eJe),a=sA(n);return v.createElement(cle,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(XYe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(sJe,B0({},n,{id:s})),v.createElement(bJe,B0({},n,{id:s}))))}dle.displayName="Pie";function qG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(r),!0).forEach(function(n){wJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wJe(t,e,r){return(e=NJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NJe(t){var e=_Je(t,"string");return typeof e=="symbol"?e:e+""}function _Je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ale=0,CJe={xAxis:{},yAxis:{},zAxis:{}},fle=Zl({name:"cartesianAxis",initialState:CJe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ga()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Ga()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ga()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ga()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Ga()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ga()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ga()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Ga()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ga()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=WG(WG({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:EJe,replaceXAxis:SJe,removeXAxis:IJe,addYAxis:BJe,replaceYAxis:TJe,removeYAxis:PJe,addZAxis:Mrt,replaceZAxis:Lrt,removeZAxis:Urt,updateYAxisWidth:jJe}=fle.actions,kJe=fle.reducer,FJe=Tt([Ii],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),OJe=Tt([FJe,kf,Ff],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),hle=()=>Ir(OJe),XG=(t,e,r)=>{var n=r??t;if(!Yi(n))return Jo(n,e,0)},DJe=(t,e,r)=>{var n={},a=t.filter(o5),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,A]=u,h=A.map(m=>m.dataKey),f=XG(e,r,A[0].barSize);return{stackId:d,dataKeys:h,barSize:f}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),A=XG(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:A}});return[...o,...c]};function YG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function D_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(r),!0).forEach(function(n){RJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RJe(t,e,r){return(e=MJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MJe(t){var e=LJe(t,"string");return typeof e=="symbol"?e:e+""}function LJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UJe(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=Jo(t,r,0,!0),o,c=[];if(ps(n[0].barSize)){var u=!1,d=r/s,A=n.reduce((x,y)=>x+(y.barSize||0),0);A+=(s-1)*i,A>=r&&(A-=(s-1)*i,i=0),A>=r&&d>0&&(u=!0,d*=.9,A=s*d);var h=(r-A)/2>>0,f={offset:h-i,size:0};o=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:f.offset+f.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},I=[...x,w];return f=I[I.length-1].position,I},c)}else{var m=Jo(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=ps(a)?Math.min(p,a):p;o=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return o}}var QJe=(t,e,r,n,a,s,i)=>{var o=Yi(i)?e:i,c=UJe(r,n,a!==s?a:s,t,o);return a!==s&&c!=null&&(c=c.map(u=>D_(D_({},u),{},{position:D_(D_({},u.position),{},{offset:u.position.offset-a/2})}))),c},VJe=(t,e)=>{var r=E8(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function HJe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ps(t.zIndex)?t.zIndex:e}var mle=t=>{var{chartData:e}=t,r=Ba(),n=Rc();return v.useEffect(()=>n?()=>{}:(r(fG(e)),()=>{r(fG(void 0))}),[e,r,n]),null},JG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ple=Zl({name:"brush",initialState:JG,reducers:{setBrushSettings(t,e){return e.payload==null?JG:e.payload}}}),{setBrushSettings:Qrt}=ple.actions,$Je=ple.reducer;function KJe(t,e,r){return(e=GJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GJe(t){var e=zJe(t,"string");return typeof e=="symbol"?e:e+""}function zJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class hR{static create(e){return new hR(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}KJe(hR,"EPS",1e-4);function qJe(t){return(t%180+180)%180}var WJe=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=qJe(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},XJe={dots:[],areas:[],lines:[]},gle=Zl({name:"referenceElements",initialState:XJe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=ud(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=ud(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=ud(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Vrt,removeDot:Hrt,addArea:$rt,removeArea:Krt,addLine:Grt,removeLine:zrt}=gle.actions,YJe=gle.reducer,JJe=v.createContext(void 0),ZJe=t=>{var{children:e}=t,[r]=v.useState("".concat(sb("recharts"),"-clip")),n=hle();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return v.createElement(JJe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:o,width:i}))),e)};function xle(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function eZe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return WJe(n,r)}function tZe(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:o}=t;return e===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function vb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function rZe(t,e){return xle(t,e+1)}function nZe(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=e,c=0,u=1,d=i,A=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:xle(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||vb(t,y,x,d,o);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=A(),h)return h.v;return[]}function aZe(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:o,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,A=o,h=!0,f=function(){var y=n[m],b=m,w,I=()=>(w===void 0&&(w=r(y,b)),w),T=y.coordinate,C=m===d||vb(t,T,I,A,c);if(!C)return h=!1,1;C&&(A=T+t*(I()/2+a))},m=d;m<i&&!f();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function ZG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ho(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(r),!0).forEach(function(n){sZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sZe(t,e,r){return(e=iZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iZe(t){var e=oZe(t,"string");return typeof e=="symbol"?e:e+""}function oZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lZe(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=e,{end:c}=e,u=function(h){var f=s[h],m,p=()=>(m===void 0&&(m=r(f,h)),m);if(h===i-1){var g=t*(f.coordinate+t*p()/2-c);s[h]=f=Ho(Ho({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate})}else s[h]=f=Ho(Ho({},f),{},{tickCoord:f.coordinate});if(f.tickCoord!=null){var x=vb(t,f.tickCoord,p,o,c);x&&(c=f.tickCoord-t*(p()/2+a),s[h]=Ho(Ho({},f),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function cZe(t,e,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=e;if(s){var d=n[o-1],A=r(d,o-1),h=t*(d.coordinate+t*A/2-u);if(i[o-1]=d=Ho(Ho({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var f=vb(t,d.tickCoord,()=>A,c,u);f&&(u=d.tickCoord-t*(A/2+a),i[o-1]=Ho(Ho({},d),{},{isShow:!0}))}}for(var m=s?o-1:o,p=function(y){var b=i[y],w,I=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var T=t*(b.coordinate-t*I()/2-c);i[y]=b=Ho(Ho({},b),{},{tickCoord:T<0?b.coordinate-T*t:b.coordinate})}else i[y]=b=Ho(Ho({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var C=vb(t,b.tickCoord,I,c,u);C&&(c=b.tickCoord+t*(I()/2+a),i[y]=Ho(Ho({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function uZe(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:A}=t;if(!a||!a.length||!n)return[];if(jr(c)||W4.isSsr){var h;return(h=rZe(a,jr(c)?c:0))!==null&&h!==void 0?h:[]}var f=[],m=o==="top"||o==="bottom"?"width":"height",p=d&&m==="width"?t2(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var I=typeof u=="function"?u(b.value,w):b.value;return m==="width"?eZe(t2(I,{fontSize:e,letterSpacing:r}),p,A):t2(I,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?_o(a[1].coordinate-a[0].coordinate):1,y=tZe(s,x,m);return c==="equidistantPreserveStart"?nZe(x,y,g,a,i):c==="equidistantPreserveEnd"?aZe(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?f=cZe(x,y,g,a,i,c==="preserveStartEnd"):f=lZe(x,y,g,a,i),f.filter(b=>b.isShow))}var dZe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var A=d.getBoundingClientRect();A.width>i&&(i=A.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},AZe=["axisLine","width","height","className","hide","ticks","axisType"];function fZe(t,e){if(t==null)return{};var r,n,a=hZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function hZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pp.apply(null,arguments)}function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){mZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mZe(t,e,r){return(e=pZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pZe(t){var e=gZe(t,"string");return typeof e=="symbol"?e:e+""}function gZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ep={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Xo.axis};function xZe(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=Ys(Ys(Ys({},c),sA(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=Ys(Ys({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var A=+(s==="left"&&!i||s==="right"&&i);u=Ys(Ys({},u),{},{x1:e+A*n,y1:r,x2:e+A*n,y2:r+a})}return v.createElement("line",Pp({},u,{className:aa("recharts-cartesian-axis-line",Cp(o,"className"))}))}function vZe(t,e,r,n,a,s,i,o,c){var u,d,A,h,f,m,p=o?-1:1,g=t.tickSize||i,x=jr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!o*a,A=h-p*g,m=A-p*c,f=x;break;case"left":A=h=t.coordinate,d=e+ +!o*n,u=d-p*g,f=u-p*c,m=x;break;case"right":A=h=t.coordinate,d=e+ +o*n,u=d+p*g,f=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +o*a,A=h+p*g,m=A+p*c,f=x;break}return{line:{x1:u,y1:A,x2:d,y2:h},tick:{x:f,y:m}}}function yZe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function bZe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function wZe(t){var{option:e,tickProps:r,value:n}=t,a,s=aa(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,Ys(Ys({},r),{},{className:s}));else if(typeof e=="function")a=e(Ys(Ys({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=aa(i,e==null?void 0:e.className)),a=v.createElement(m5,Pp({},r,{className:i}),n)}return a}var NZe=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:A,x:h,y:f,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:I,axisType:T}=t,C=uZe(Ys(Ys({},w),{},{ticks:r}),y,b),E=yZe(d,A),S=bZe(d,A),O=sA(w),B=ab(n),P={};typeof a=="object"&&(P=a);var D=Ys(Ys({},O),{},{fill:"none"},P),W=C.map(ce=>Ys({entry:ce},vZe(ce,h,f,m,p,d,g,A,x))),Ae=W.map(ce=>{var{entry:de,line:X}=ce;return v.createElement(Cl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},a&&v.createElement("line",Pp({},D,X,{className:aa("recharts-cartesian-axis-tick-line",Cp(a,"className"))})))}),ee=W.map((ce,de)=>{var{entry:X,tick:pe}=ce,Se=Ys(Ys(Ys(Ys({textAnchor:E,verticalAnchor:S},O),{},{stroke:"none",fill:s},B),pe),{},{index:de,payload:X,visibleTicksCount:C.length,tickFormatter:i,padding:c},u);return v.createElement(Cl,Pp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},sw(I,X,de)),n&&v.createElement(wZe,{option:n,tickProps:Se,value:"".concat(typeof i=="function"?i(X.value,de):X.value).concat(o||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},ee.length>0&&v.createElement(mA,{zIndex:Xo.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:e},ee)),Ae.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},Ae))}),_Ze=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:o,axisType:c}=t,u=fZe(t,AZe),[d,A]=v.useState(""),[h,f]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return dZe({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,I=b.letterSpacing;(w!==d||I!==h)&&(A(w),f(I))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(mA,{zIndex:t.zIndex},v.createElement(Cl,{className:aa("recharts-cartesian-axis",s)},v.createElement(xZe,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:sA(t)}),v.createElement(NZe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(FXe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement($Xe,{label:t.label,labelRef:t.labelRef}),t.children)))}),mR=v.forwardRef((t,e)=>{var r=Io(t,ep);return v.createElement(_Ze,Pp({},r,{ref:e}))});mR.displayName="CartesianAxis";var CZe={},vle=Zl({name:"errorBars",initialState:CZe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:qrt,replaceErrorBar:Wrt,removeErrorBar:Xrt}=vle.actions,EZe=vle.reducer,SZe=["children"];function IZe(t,e){if(t==null)return{};var r,n,a=BZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function BZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var TZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},PZe=v.createContext(TZe);function jZe(t){var{children:e}=t,r=IZe(t,SZe);return v.createElement(PZe.Provider,{value:r},e)}function yle(t,e){var r,n,a=Ir(u=>Rf(u,t)),s=Ir(u=>Mf(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Ri.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Mi.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function kZe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=hle(),{needClipX:s,needClipY:i,needClip:o}=yle(e,r);if(!o||!a)return null;var{x:c,y:u,width:d,height:A}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-A/2,width:s?d:d*2,height:i?A:A*2}))}var FZe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw=v;function OZe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var DZe=typeof Object.is=="function"?Object.is:OZe,RZe=Cw.useSyncExternalStore,MZe=Cw.useRef,LZe=Cw.useEffect,UZe=Cw.useMemo,QZe=Cw.useDebugValue;FZe.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=MZe(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=UZe(function(){function c(f){if(!u){if(u=!0,d=f,f=n(f),a!==void 0&&i.hasValue){var m=i.value;if(a(m,f))return A=m}return A=f}if(m=A,DZe(d,f))return m;var p=n(f);return a!==void 0&&a(m,p)?(d=f,m):(d=f,A=p)}var u=!1,d,A,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var o=RZe(t,s[0],s[1]);return LZe(function(){i.hasValue=!0,i.value=o},[o]),QZe(o),o};function VZe(t){t()}function HZe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){VZe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var tz={notify(){},get:()=>[]};function $Ze(t,e){let r,n=tz,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),A())}}function o(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=HZe())}function A(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=tz)}function h(){s||(s=!0,d())}function f(){s&&(s=!1,A())}const m={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>n};return m}var KZe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GZe=KZe(),zZe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qZe=zZe(),WZe=()=>GZe||qZe?v.useLayoutEffect:v.useEffect,XZe=WZe();function rz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function YZe(t,e){if(rz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!rz(t[r[a]],e[r[a]]))return!1;return!0}var ST=Symbol.for("react-redux-context"),IT=typeof globalThis<"u"?globalThis:{};function JZe(){if(!v.createContext)return{};const t=IT[ST]??(IT[ST]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var ZZe=JZe();function eet(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=$Ze(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);XZe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||ZZe;return v.createElement(o.Provider,{value:s},e)}var tet=eet,ret=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function net(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function pR(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(ret.has(n)){if(t[n]==null&&e[n]==null)continue;if(!YZe(t[n],e[n]))return!1}else if(!net(t[n],e[n]))return!1;return!0}function Jp(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Ale}function Zp(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Ale}var aet="Invariant failed";function set(t,e){throw new Error(aet)}function eF(){return eF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eF.apply(null,arguments)}function XS(t){return v.createElement(ole,eF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var iet=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(jr(e))return e;var s=jr(n)||Yi(n);return s?e(n,a):(s||set(),r)}},oet=(t,e,r)=>r,cet=(t,e)=>e,Ew=Tt([B8,cet],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),uet=Tt([Ew],t=>t==null?void 0:t.maxBarSize),det=(t,e,r,n)=>n,Aet=Tt([On,B8,Jp,Zp,oet],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),fet=(t,e,r)=>{var n=On(t),a=Jp(t,e),s=Zp(t,e);if(!(a==null||s==null))return n==="horizontal"?zk(t,"yAxis",s,r):zk(t,"xAxis",a,r)},het=(t,e)=>{var r=On(t),n=Jp(t,e),a=Zp(t,e);if(!(n==null||a==null))return r==="horizontal"?rG(t,"xAxis",n):rG(t,"yAxis",a)},met=Tt([Aet,RGe,het],DJe),pet=(t,e,r)=>{var n,a,s=Ew(t,e);if(s!=null){var i=Jp(t,e),o=Zp(t,e);if(!(i==null||o==null)){var c=On(t),u=Iie(t),{maxBarSize:d}=s,A=Yi(d)?u:d,h,f;return c==="horizontal"?(h=cv(t,"xAxis",i,r),f=lv(t,"xAxis",i,r)):(h=cv(t,"yAxis",o,r),f=lv(t,"yAxis",o,r)),(n=(a=_S(h,f,!0))!==null&&a!==void 0?a:A)!==null&&n!==void 0?n:0}}},ble=(t,e,r)=>{var n=On(t),a=Jp(t,e),s=Zp(t,e);if(!(a==null||s==null)){var i,o;return n==="horizontal"?(i=cv(t,"xAxis",a,r),o=lv(t,"xAxis",a,r)):(i=cv(t,"yAxis",s,r),o=lv(t,"yAxis",s,r)),_S(i,o)}},get=Tt([met,Iie,DGe,Bie,pet,ble,uet],QJe),xet=(t,e,r)=>{var n=Jp(t,e);if(n!=null)return cv(t,"xAxis",n,r)},vet=(t,e,r)=>{var n=Zp(t,e);if(n!=null)return cv(t,"yAxis",n,r)},yet=(t,e,r)=>{var n=Jp(t,e);if(n!=null)return lv(t,"xAxis",n,r)},bet=(t,e,r)=>{var n=Zp(t,e);if(n!=null)return lv(t,"yAxis",n,r)},wet=Tt([get,Ew],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),Net=Tt([fet,Ew],VJe),_et=Tt([Ii,$D,xet,vet,yet,bet,wet,On,_Ge,ble,Net,Ew,det],(t,e,r,n,a,s,i,o,c,u,d,A,h)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:p}=c;if(!(A==null||i==null||e==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=A,x;if(g!=null&&g.length>0?x=g:x=f==null?void 0:f.slice(m,p+1),x!=null)return ett({layout:o,barSettings:A,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),Cet=["index"];function tF(){return tF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tF.apply(null,arguments)}function Eet(t,e){if(t==null)return{};var r,n,a=Iet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Iet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var wle=v.createContext(void 0),Bet=t=>{var e=v.useContext(wle);if(e!=null)return e.stackId;if(t!=null)return CQe(t)},Tet=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Pet=t=>{var e=v.useContext(wle);if(e!=null){var{stackId:r}=e;return"url(#".concat(Tet(r,t),")")}},jet=t=>{var{index:e}=t,r=Eet(t,Cet),n=Pet(e);return v.createElement(Cl,tF({className:"recharts-bar-stack-layer",clipPath:n},r))},ket=["onMouseEnter","onMouseLeave","onClick"],Fet=["value","background","tooltipPosition"],Oet=["id"],Det=["onMouseEnter","onClick","onMouseLeave"];function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cf.apply(null,arguments)}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){Ret(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ret(t,e,r){return(e=Met(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Met(t){var e=Let(t,"string");return typeof e=="symbol"?e:e+""}function Let(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YS(t,e){if(t==null)return{};var r,n,a=Uet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Uet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Qet=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:L4(r,e),payload:t}]},Vet=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:L4(s,e),hide:i,type:c,color:a,unit:o,graphicalItemId:u}};return v.createElement(lle,{tooltipEntrySettings:d})});function Het(t){var e=Ir(Tp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=YS(s,ket),d=dR(i,n,s.id),A=AR(o),h=fR(c,n,s.id);if(!a||r==null)return null;var f=ab(a);return v.createElement(mA,{zIndex:HJe(a,Xo.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=YS(m,Fet);if(!x)return null;var w=d(m,p),I=A(m,p),T=h(m,p),C=vl(vl(vl(vl(vl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),f),sw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:I,onClick:T,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(XS,Cf({key:"background-bar-".concat(p)},C))}))}function $et(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return vl(vl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(YXe,{value:e?a:void 0},r)}function Ket(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,o=Ir(Tp),c=Ir(eR),u=r&&String(s)===o&&(c==null||i===c),d=u?r:e;return u?v.createElement(mA,{zIndex:Xo.activeBar},v.createElement(XS,Cf({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(XS,Cf({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function Get(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(XS,Cf({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function zet(t){var e,{data:r,props:n}=t,a=(e=sA(n))!==null&&e!==void 0?e:{},{id:s}=a,i=YS(a,Oet),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:A,onMouseLeave:h}=n,f=YS(n,Det),m=dR(d,c,s),p=AR(h),g=fR(A,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(jet,Cf({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},sw(f,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(Ket,{shape:o,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement(Get,{shape:o,baseProps:i,entry:x,index:y,dataKey:c})))):null}function qet(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,A=r.current,h=Y4(e,"recharts-bar-"),[f,m]=v.useState(!1),p=!f,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement($et,{showLabels:p,rects:n},v.createElement(X4,{animationId:h,begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,I)=>{var T=A&&A[I];if(T)return vl(vl({},w),{},{x:pi(T.x,w.x,y),y:pi(T.y,w.y,y),width:pi(T.width,w.width,y),height:pi(T.height,w.height,y)});if(a==="horizontal"){var C=pi(0,w.height,y),E=pi(w.stackedBarStart,w.y,y);return vl(vl({},w),{},{y:E,height:C})}var S=pi(0,w.width,y),O=pi(w.stackedBarStart,w.x,y);return vl(vl({},w),{},{width:S,x:O})});return y>0&&(r.current=b??null),b==null?null:v.createElement(Cl,null,v.createElement(zet,{props:e,data:b}))}),v.createElement(Zoe,{label:e.label}),e.children)}function Wet(t){var e=v.useRef(null);return v.createElement(qet,{previousRectanglesRef:e,props:t})}var Nle=0,Xet=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Ua(t,e)}};class Yet extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(e||r==null)return null;var d=aa("recharts-bar",a),A=u;return v.createElement(Cl,{className:d,id:u},o&&v.createElement("defs",null,v.createElement(kZe,{clipPathId:A,xAxisId:s,yAxisId:i})),v.createElement(Cl,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(A,")"):void 0},v.createElement(Het,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(Wet,this.props)))}}var Jet={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Nle,xAxisId:0,yAxisId:0,zIndex:Xo.bar};function Zet(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:A}=yle(e,r),h=cw(),f=Rc(),m=uR(t.children,_w),p=Ir(y=>_et(y,t.id,f,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(jZe,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:Xet,errorBarOffset:g},v.createElement(Yet,Cf({},t,{layout:h,needClip:A,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function ett(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:A,offset:h,cells:f,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?o:i,x=d?g.scale.domain():null,y=EQe({numericAxis:g}),b=g.scale(y);return A.map((w,I)=>{var T,C,E,S,O,B;if(d){var P=d[I+p];if(P==null)return null;T=yQe(P,x)}else T=Ua(w,r),Array.isArray(T)||(T=[y,T]);var D=iet(n,Nle)(T[1],I);if(e==="horizontal"){var W,[Ae,ee]=[o.scale(T[0]),o.scale(T[1])];C=A$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:I}),E=(W=ee??Ae)!==null&&W!==void 0?W:void 0,S=a.size;var ce=Ae-ee;if(O=iA(ce)?0:ce,B={x:C,y:h.top,width:S,height:h.height},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var de=_o(O||D)*(Math.abs(D)-Math.abs(O));E-=de,O+=de}}else{var[X,pe]=[i.scale(T[0]),i.scale(T[1])];if(C=X,E=A$({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:w,index:I}),S=pe-X,O=a.size,B={x:h.left,y:E,width:h.width,height:O},Math.abs(D)>0&&Math.abs(S)<Math.abs(D)){var Se=_o(S||D)*(Math.abs(D)-Math.abs(S));S+=Se}}if(C==null||E==null||S==null||O==null)return null;var k=vl(vl({},w),{},{stackedBarStart:b,x:C,y:E,width:S,height:O,value:d?T:T[1],payload:w,background:B,tooltipPosition:{x:C+S/2,y:E+O/2},parentViewBox:m},f&&f[I]&&f[I].props);return k}).filter(Boolean)}function ttt(t){var e=Io(t,Jet),r=Bet(e.stackId),n=Rc();return v.createElement(cle,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(OYe,{legendPayload:Qet(e)}),v.createElement(Vet,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(WYe,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(mA,{zIndex:e.zIndex},v.createElement(Zet,Cf({},e,{id:a})))))}var rF=v.memo(ttt,pR);rF.displayName="Bar";var rtt=["domain","range"],ntt=["domain","range"];function az(t,e){if(t==null)return{};var r,n,a=att(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function att(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function _le(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=az(t,rtt),{domain:s,range:i}=e,o=az(e,ntt);return!sz(r,s)||!sz(n,i)?!1:pR(a,o)}var stt=["dangerouslySetInnerHTML","ticks","scale"],itt=["id","scale"];function nF(){return nF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nF.apply(null,arguments)}function iz(t,e){if(t==null)return{};var r,n,a=ott(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ott(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ltt(t){var e=Ba(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(EJe(t)):r.current!==t&&e(SJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(IJe(r.current)),r.current=null)},[e]),null}var ctt=t=>{var{xAxisId:e,className:r}=t,n=Ir($D),a=Rc(),s="xAxis",i=Ir(x=>ooe(x,s,e,a)),o=Ir(x=>noe(x,e)),c=Ir(x=>Fze(x,e)),u=Ir(x=>Mie(x,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:A,scale:h}=t,f=iz(t,stt),{id:m,scale:p}=u,g=iz(u,itt);return v.createElement(mR,nF({},f,g,{x:c.x,y:c.y,width:o.width,height:o.height,className:aa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},utt={allowDataOverflow:Ri.allowDataOverflow,allowDecimals:Ri.allowDecimals,allowDuplicatedCategory:Ri.allowDuplicatedCategory,angle:Ri.angle,axisLine:ep.axisLine,height:Ri.height,hide:!1,includeHidden:Ri.includeHidden,interval:Ri.interval,minTickGap:Ri.minTickGap,mirror:Ri.mirror,orientation:Ri.orientation,padding:Ri.padding,reversed:Ri.reversed,scale:Ri.scale,tick:Ri.tick,tickCount:Ri.tickCount,tickLine:ep.tickLine,tickSize:ep.tickSize,type:Ri.type,xAxisId:0},dtt=t=>{var e=Io(t,utt);return v.createElement(v.Fragment,null,v.createElement(ltt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(ctt,e))},Cle=v.memo(dtt,_le);Cle.displayName="XAxis";var Att=["dangerouslySetInnerHTML","ticks","scale"],ftt=["id","scale"];function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aF.apply(null,arguments)}function oz(t,e){if(t==null)return{};var r,n,a=htt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function htt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mtt(t){var e=Ba(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(BJe(t)):r.current!==t&&e(TJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(PJe(r.current)),r.current=null)},[e]),null}var ptt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),o=Ir($D),c=Rc(),u=Ba(),d="yAxis",A=Ir(T=>aoe(T,e)),h=Ir(T=>Dze(T,e)),f=Ir(T=>ooe(T,d,e,c)),m=Ir(T=>Lie(T,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!A||sR(a)||v.isValidElement(a)||m==null)){var T=s.current;if(T){var C=T.getCalculatedWidth();Math.round(A.width)!==Math.round(C)&&u(jJe({id:e,width:C}))}}},[f,A,u,a,e,n,m]),A==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=oz(t,Att),{id:b,scale:w}=m,I=oz(m,ftt);return v.createElement(mR,aF({},y,I,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:A.width,height:A.height,className:aa("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:f,axisType:d}))},gtt={allowDataOverflow:Mi.allowDataOverflow,allowDecimals:Mi.allowDecimals,allowDuplicatedCategory:Mi.allowDuplicatedCategory,angle:Mi.angle,axisLine:ep.axisLine,hide:!1,includeHidden:Mi.includeHidden,interval:Mi.interval,minTickGap:Mi.minTickGap,mirror:Mi.mirror,orientation:Mi.orientation,padding:Mi.padding,reversed:Mi.reversed,scale:Mi.scale,tick:Mi.tick,tickCount:Mi.tickCount,tickLine:ep.tickLine,tickSize:ep.tickSize,type:Mi.type,width:Mi.width,yAxisId:0},xtt=t=>{var e=Io(t,gtt);return v.createElement(v.Fragment,null,v.createElement(mtt,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(ptt,e))},Ele=v.memo(xtt,_le);Ele.displayName="YAxis";var vtt=(t,e)=>e,gR=Tt([vtt,On,Die,Ti,Noe,Lf,Yqe,Ii],aWe),xR=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Sle=Bu("mouseClick"),Ile=ow();Ile.startListening({actionCreator:Sle,effect:(t,e)=>{var r=t.payload,n=gR(e.getState(),xR(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(Xze({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sF=Bu("mouseMove"),Ble=ow(),R_=null;Ble.startListening({actionCreator:sF,effect:(t,e)=>{var r=t.payload;R_!==null&&cancelAnimationFrame(R_);var n=xR(r);R_=requestAnimationFrame(()=>{var a=e.getState(),s=q8(a,a.tooltip.settings.shared);if(s==="axis"){var i=gR(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(moe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(hoe())}R_=null})}});function ytt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var lz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Tle=Zl({name:"rootProps",initialState:lz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:lz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),btt=Tle.reducer,{updateOptions:wtt}=Tle.actions,Ple=Zl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Ntt}=Ple.actions,_tt=Ple.reducer,jle=Bu("keyDown"),kle=Bu("focus"),vR=ow();vR.startListening({actionCreator:jle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=W8(a,Qv(r),vw(r),ww(r)),o=i==null?-1:Number(i);if(!(!Number.isFinite(o)||o<0)){var c=Lf(r);if(s==="Enter"){var u=GS(r,"axis","hover",String(a.index));e.dispatch(Wk({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=Uze(r),A=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,f=o+h*A;if(!(c==null||f>=c.length||f<0)){var m=GS(r,"axis","hover",String(f));e.dispatch(Wk({active:!0,activeIndex:f.toString(),activeCoordinate:m}))}}}}}});vR.startListening({actionCreator:kle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=GS(r,"axis","hover",String(s));e.dispatch(Wk({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var su=Bu("externalEvent"),Fle=ow(),BT=new Map;Fle.startListening({actionCreator:su,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=BT.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:Dqe(o),activeDataKey:eR(o),activeIndex:Tp(o),activeLabel:Eoe(o),activeTooltipIndex:Tp(o),isTooltipActive:Rqe(o)};r(c,n)}finally{BT.delete(a)}});BT.set(a,i)}}});var Ctt=Tt([Lv],t=>t.tooltipItemPayloads),Ett=Tt([Ctt,bw,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),Ole=Bu("touchMove"),Dle=ow();Dle.startListening({actionCreator:Ole,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=q8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=gR(n,xR({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(moe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Zae),A=(o=u.getAttribute(ese))!==null&&o!==void 0?o:void 0,h=Uv(n).find(p=>p.id===A);if(d==null||h==null||A==null)return;var{dataKey:f}=h,m=Ett(n,d,A);e.dispatch(foe({activeDataKey:f,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:A}))}}}});var Stt=Nae({brush:$Je,cartesianAxis:kJe,chartData:FWe,errorBars:EZe,graphicalItems:zYe,layout:hQe,legend:vVe,options:BWe,polarAxis:lYe,polarOptions:_tt,referenceElements:YJe,rootProps:btt,tooltip:Yze,zIndex:xWe}),Itt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return L9e({reducer:Stt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([Ile.middleware,Ble.middleware,vR.middleware,Fle.middleware,Dle.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Mae({type:"raf"}))},devTools:{serialize:{replacer:ytt},name:"recharts-".concat(r)}})};function Rle(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Rc(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=Itt(e,n));var i=OD;return v.createElement(tet,{context:i,store:s.current},r)}function Btt(t){var{layout:e,margin:r}=t,n=Ba(),a=Rc();return v.useEffect(()=>{a||(n(dQe(e)),n(uQe(r)))},[n,a,e,r]),null}var Mle=v.memo(Btt,pR);function Lle(t){var e=Ba();return v.useEffect(()=>{e(wtt(t))},[e,t]),null}function cz(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=Ba();return v.useLayoutEffect(()=>(n.current&&a(pWe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(gWe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function uz(t){var{children:e,isPanorama:r}=t,n=Ir(iWe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(cz,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(cz,{key:i,zIndex:i,isPanorama:r})))}var Ttt=["children"];function Ptt(t,e){if(t==null)return{};var r,n,a=jtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JS.apply(null,arguments)}var ktt={width:"100%",height:"100%",display:"block"},Ftt=v.forwardRef((t,e)=>{var r=lse(),n=cse(),a=yse();if(!S0(r)||!S0(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(yD,JS({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:ktt,ref:e}),s)}),Ott=t=>{var{children:e}=t,r=Ir(H4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(yD,{width:n,height:a,x:i,y:s},e)},dz=v.forwardRef((t,e)=>{var{children:r}=t,n=Ptt(t,Ttt),a=Rc();return a?v.createElement(Ott,null,v.createElement(uz,{isPanorama:!0},r)):v.createElement(Ftt,JS({ref:e},n),v.createElement(uz,{isPanorama:!1},r))});function Dtt(){var t=Ba(),[e,r]=v.useState(null),n=Ir(jQe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;ps(s)&&s!==n&&t(fQe(s))}},[e,t,n]),r}function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rtt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){Mtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mtt(t,e,r){return(e=Ltt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ltt(t){var e=Utt(t,"string");return typeof e=="symbol"?e:e+""}function Utt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jp(){return jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jp.apply(null,arguments)}var Qtt=()=>(HWe(),null);function ZS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Vtt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:ZS((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:ZS((n=t.style)===null||n===void 0?void 0:n.height)}),o=v.useCallback((u,d)=>{i(A=>{var h=Math.round(u),f=Math.round(d);return A.containerWidth===h&&A.containerHeight===f?A:{containerWidth:h,containerHeight:f}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:A}=u.getBoundingClientRect();o(d,A);var h=m=>{var{width:p,height:g}=m[0].contentRect;o(p,g)},f=new ResizeObserver(h);f.observe(u),a.current=f}},[e,o]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[o]),v.createElement(v.Fragment,null,v.createElement(K4,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",jp({ref:c},t)))}),Htt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:ZS(r),containerHeight:ZS(n)}),i=v.useCallback((c,u)=>{s(d=>{var A=Math.round(c),h=Math.round(u);return d.containerWidth===A&&d.containerHeight===h?d:{containerWidth:A,containerHeight:h}})},[]),o=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(K4,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",jp({ref:o},t)))}),$tt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(K4,{width:r,height:n}),v.createElement("div",jp({ref:e},t)))}),Ktt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return vf(r)||vf(n)?v.createElement(Htt,jp({},t,{ref:e})):v.createElement($tt,jp({},t,{ref:e}))});function Gtt(t){return t===!0?Vtt:Ktt}var ztt=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:A,onMouseUp:h,onTouchEnd:f,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),I=Ba(),[T,C]=v.useState(null),[E,S]=v.useState(null),O=Dtt(),B=KD(),P=(B==null?void 0:B.width)>0?B.width:x,D=(B==null?void 0:B.height)>0?B.height:a,W=v.useCallback(K=>{O(K),typeof e=="function"&&e(K),C(K),S(K),K!=null&&(w.current=K)},[O,e,C,S]),Ae=v.useCallback(K=>{I(Sle(K)),I(su({handler:s,reactEvent:K}))},[I,s]),ee=v.useCallback(K=>{I(sF(K)),I(su({handler:u,reactEvent:K}))},[I,u]),ce=v.useCallback(K=>{I(hoe()),I(su({handler:d,reactEvent:K}))},[I,d]),de=v.useCallback(K=>{I(sF(K)),I(su({handler:A,reactEvent:K}))},[I,A]),X=v.useCallback(()=>{I(kle())},[I]),pe=v.useCallback(K=>{I(jle(K.key))},[I]),Se=v.useCallback(K=>{I(su({handler:i,reactEvent:K}))},[I,i]),k=v.useCallback(K=>{I(su({handler:o,reactEvent:K}))},[I,o]),F=v.useCallback(K=>{I(su({handler:c,reactEvent:K}))},[I,c]),V=v.useCallback(K=>{I(su({handler:h,reactEvent:K}))},[I,h]),M=v.useCallback(K=>{I(su({handler:p,reactEvent:K}))},[I,p]),L=v.useCallback(K=>{b&&I(Ole(K)),I(su({handler:m,reactEvent:K}))},[I,b,m]),q=v.useCallback(K=>{I(su({handler:f,reactEvent:K}))},[I,f]),R=Gtt(y);return v.createElement(koe.Provider,{value:T},v.createElement(_ne.Provider,{value:E},v.createElement(R,{width:P??(g==null?void 0:g.width),height:D??(g==null?void 0:g.height),className:aa("recharts-wrapper",n),style:Rtt({position:"relative",cursor:"default",width:P,height:D},g),onClick:Ae,onContextMenu:Se,onDoubleClick:k,onFocus:X,onKeyDown:pe,onMouseDown:F,onMouseEnter:ee,onMouseLeave:ce,onMouseMove:de,onMouseUp:V,onTouchEnd:q,onTouchMove:L,onTouchStart:M,ref:W},v.createElement(Qtt,null),r)))}),qtt=["width","height","responsive","children","className","style","compact","title","desc"];function Wtt(t,e){if(t==null)return{};var r,n,a=Xtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Xtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ule=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:o,compact:c,title:u,desc:d}=t,A=Wtt(t,qtt),h=sA(A);return c?v.createElement(v.Fragment,null,v.createElement(K4,{width:r,height:n}),v.createElement(dz,{otherAttributes:h,title:u,desc:d},s)):v.createElement(ztt,{className:i,style:o,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(dz,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(ZJe,null,s)))});function iF(){return iF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iF.apply(null,arguments)}var Ytt={top:5,right:5,bottom:5,left:5},Jtt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Ytt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ztt=v.forwardRef(function(e,r){var n,a=Io(e.categoricalChartProps,Jtt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Rle,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(mle,{chartData:u.data}),v.createElement(Mle,{layout:a.layout,margin:a.margin}),v.createElement(Lle,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Ule,iF({},a,{ref:r})))}),ert=["axis","item"],trt=v.forwardRef((t,e)=>v.createElement(Ztt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ert,tooltipPayloadSearcher:Ooe,categoricalChartProps:t,ref:e}));function rrt(t){var e=Ba();return v.useEffect(()=>{e(Ntt(t))},[e,t]),null}var nrt=["layout"];function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function art(t,e){if(t==null)return{};var r,n,a=srt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function srt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var irt={top:5,right:5,bottom:5,left:5},Qle={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:irt,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ort=v.forwardRef(function(e,r){var n,a=Io(e.categoricalChartProps,Qle),{layout:s}=a,i=art(a,nrt),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,A={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Rle,{preloadedState:{options:A},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:o},v.createElement(mle,{chartData:a.data}),v.createElement(Mle,{layout:s,margin:a.margin}),v.createElement(Lle,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(rrt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(Ule,oF({},i,{ref:r})))});function fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(r),!0).forEach(function(n){lrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lrt(t,e,r){return(e=crt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function crt(t){var e=urt(t,"string");return typeof e=="symbol"?e:e+""}function urt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var drt=["item"],Art=hz(hz({},Qle),{},{layout:"centric",startAngle:0,endAngle:360}),frt=v.forwardRef((t,e)=>{var r=Io(t,Art);return v.createElement(ort,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:drt,tooltipPayloadSearcher:Ooe,categoricalChartProps:r,ref:e})});const hrt="sellers_candies",M_="cash_deliveries_candies";function Ln(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function Os(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function L_(t,e){return t*e/100}function U_(t,e,r){return t-e-r}function mz(t){return t?dr(t.toDate(),"yyyy-MM-dd"):""}function Q_(t){if(!t)return Xt.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return Xt.fromDate(a)}function mrt(){const t=new Date,[e,r]=v.useState(dr(yd(t),"yyyy-MM-dd")),[n,a]=v.useState(dr(vd(t),"yyyy-MM-dd")),[s,i]=v.useState([]),o=v.useMemo(()=>{const R=new Map;return s.forEach(K=>R.set(K.id,K)),R},[s]),[c,u]=v.useState([]),[d,A]=v.useState(!0),[h,f]=v.useState(()=>dr(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState({}),O=v.useRef(null);v.useEffect(()=>{const R=Kt(ht(Fe,hrt),Gr("name","asc")),K=y0(R,Z=>{const te=Z.docs.map(Q=>{const ye=Q.data();return{id:Q.id,name:String((ye==null?void 0:ye.name)??""),branch:ye!=null&&ye.branch?String(ye.branch):"",commissionPercent:Ln((ye==null?void 0:ye.commissionPercent)??0)}});i(te)},()=>i([]));return()=>K()},[]),v.useEffect(()=>{A(!0);const R=Q_(e),K=new Date(Q_(n).toDate().getTime());K.setDate(K.getDate()+1);const Z=Xt.fromDate(K),te=Kt(ht(Fe,M_),Zt("date",">=",R),Zt("date","<",Z),Gr("date","desc")),Q=y0(te,ye=>{const Y=ye.docs.map(z=>{const le=z.data();return{id:z.id,date:le==null?void 0:le.date,sellerId:String((le==null?void 0:le.sellerId)??""),sellerName:String((le==null?void 0:le.sellerName)??""),amountDelivered:Ln(le==null?void 0:le.amountDelivered),commissionPercent:Ln(le==null?void 0:le.commissionPercent),commissionPaid:Ln(le==null?void 0:le.commissionPaid),extraExpenses:Ln(le==null?void 0:le.extraExpenses),totalFinal:Ln(le==null?void 0:le.totalFinal),comment:String((le==null?void 0:le.comment)??""),createdAt:le==null?void 0:le.createdAt,updatedAt:le==null?void 0:le.updatedAt}});u(Y),A(!1)},ye=>{console.error("Firestore deliveries query error:",ye),u([]),A(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>Q()},[e,n]);const B=v.useMemo(()=>m?o.get(m):void 0,[m,o]),P=Ln((B==null?void 0:B.commissionPercent)??0),D=Ln(g),W=Ln(y),Ae=L_(D,P),ee=U_(D,Ae,W),ce=v.useMemo(()=>{var K;const R=new Map;for(const Z of c){const te=Z.sellerId||Z.sellerName||"UNKNOWN",Q=R.get(te)??{sellerId:Z.sellerId,sellerName:Z.sellerName||((K=o.get(Z.sellerId))==null?void 0:K.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};Q.delivered+=Ln(Z.amountDelivered),Q.commission+=Ln(Z.commissionPaid),Q.totalFinal+=Ln(Z.totalFinal),R.set(te,Q)}return Array.from(R.values()).sort((Z,te)=>Z.sellerName.localeCompare(te.sellerName))},[c,o]),de=v.useMemo(()=>{let R=0,K=0,Z=0,te=0;for(const Q of c)R+=Ln(Q.amountDelivered),K+=Ln(Q.commissionPaid),Z+=Ln(Q.extraExpenses),te+=Ln(Q.totalFinal);return{delivered:R,commission:K,expenses:Z,totalFinal:te}},[c]),X=v.useMemo(()=>ce.map(R=>({name:R.sellerName,Entregado:Number(R.delivered.toFixed(2)),Comision:Number(R.commission.toFixed(2))})),[ce]),pe=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(de.delivered.toFixed(2))},{name:"Total Comisin",value:Number(de.commission.toFixed(2))},{name:"Total Gastos",value:Number(de.expenses.toFixed(2))}].filter(R=>R.value>0),[de]),Se=["#3B82F6","#F59E0B","#EF4444"];async function k(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const R=o.get(m),K=(R==null?void 0:R.name)??"Sin nombre",Z=Ln((R==null?void 0:R.commissionPercent)??0),te=L_(D,Z),Q=U_(D,te,W);await on(ht(Fe,M_),{date:Q_(h),sellerId:m,sellerName:K,amountDelivered:D,commissionPercent:Z,commissionPaid:te,extraExpenses:W,totalFinal:Q,comment:w??"",createdAt:Xt.now()}),x(""),b("0"),I("")}function F(R){C(R.id),S({...R,dateInput:mz(R.date)})}function V(){C(null),S({})}async function M(R){const K=E,Z=String(K.sellerId??""),te=o.get(Z),Q=String(K.sellerName??(te==null?void 0:te.name)??"Sin nombre"),ye=Ln(K.amountDelivered),Y=Ln(K.extraExpenses),z=Ln(K.commissionPercent??(te==null?void 0:te.commissionPercent)??0),le=L_(ye,z),je=U_(ye,le,Y),ue=Q_(String(K.dateInput??mz(K.date)));await Hr(Ht(Fe,M_,R),{date:ue,sellerId:Z,sellerName:Q,amountDelivered:ye,commissionPercent:z,commissionPaid:le,extraExpenses:Y,totalFinal:je,comment:String(K.comment??""),updatedAt:Xt.now()}),V()}async function L(R){confirm("Eliminar este registro?")&&await _n(Ht(Fe,M_,R))}async function q(){if(!O.current)return;const R=await L0(O.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),K=R.toDataURL("image/png"),Z=new gr("p","mm","a4"),te=Z.internal.pageSize.getWidth(),Q=Z.internal.pageSize.getHeight(),ye=te,Y=R.height*ye/R.width;let z=Y,le=0;for(Z.addImage(K,"PNG",0,le,ye,Y),z-=Q;z>0;)Z.addPage(),le=-(Y-z),Z.addImage(K,"PNG",0,le,ye,Y),z-=Q;Z.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return l.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),l.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",l.jsx("span",{className:"font-bold",children:e})," "," ",l.jsx("span",{className:"font-bold",children:n})]})]}),l.jsx("button",{onClick:q,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),l.jsx("input",{type:"date",value:e,onChange:R=>r(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),l.jsx("input",{type:"date",value:n,onChange:R=>a(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),l.jsxs("div",{ref:O,className:"space-y-3 md:space-y-4",children:[l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[l.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),l.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Os(de.totalFinal)]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[l.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),l.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Os(de.commission)]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[l.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),l.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Os(de.expenses)]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[l.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),l.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Os(de.delivered)]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),l.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[l.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),l.jsx("tbody",{children:ce.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):ce.map(R=>l.jsxs("tr",{className:"border-t",children:[l.jsx("td",{className:"p-2",children:R.sellerName}),l.jsxs("td",{className:"p-2 text-right",children:["$ ",Os(R.delivered)]}),l.jsxs("td",{className:"p-2 text-right",children:["$ ",Os(R.commission)]}),l.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Os(R.totalFinal)]})]},R.sellerId||R.sellerName))})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),l.jsx("div",{className:"w-full h-[320px]",children:l.jsx(y$,{children:l.jsxs(trt,{data:X,children:[l.jsx(Cle,{dataKey:"name",interval:0,angle:-12,height:70}),l.jsx(Ele,{}),l.jsx(xG,{}),l.jsx(Pk,{}),l.jsx(rF,{dataKey:"Entregado"}),l.jsx(rF,{dataKey:"Comision"})]})})})]}),l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),l.jsx("div",{className:"w-full h-[320px]",children:l.jsx(y$,{children:l.jsxs(frt,{children:[l.jsx(dle,{data:pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:pe.map((R,K)=>l.jsx(_w,{fill:Se[K%Se.length]},K))}),l.jsx(xG,{}),l.jsx(Pk,{})]})})})]})]}),l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),l.jsx("input",{type:"date",value:h,onChange:R=>f(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),l.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[l.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>l.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),l.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:R=>x(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),l.jsx("input",{value:`${P}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),l.jsx("input",{value:`$ ${Os(Ae)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),l.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:R=>b(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),l.jsx("input",{value:`$ ${Os(ee)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),l.jsxs("label",{className:"space-y-1 md:col-span-2",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),l.jsx("input",{value:w,onChange:R=>I(R.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{onClick:k,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),l.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[l.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?l.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[l.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),l.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),l.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),l.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),l.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),l.jsx("tbody",{children:c.map(R=>{if(!(T===R.id))return l.jsxs("tr",{className:"border-t",children:[l.jsx("td",{className:"p-2",children:dr(R.date.toDate(),"yyyy-MM-dd")}),l.jsx("td",{className:"p-2 font-semibold",children:R.sellerName}),l.jsxs("td",{className:"p-2 text-right",children:["$ ",Os(R.amountDelivered)]}),l.jsxs("td",{className:"p-2 text-right",children:[Os(R.commissionPercent),"%"]}),l.jsxs("td",{className:"p-2 text-right",children:["$ ",Os(R.commissionPaid)]}),l.jsxs("td",{className:"p-2 text-right",children:["$ ",Os(R.extraExpenses)]}),l.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Os(R.totalFinal)]}),l.jsx("td",{className:"p-2",children:R.comment}),l.jsx("td",{className:"p-2",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>F(R),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),l.jsx("button",{onClick:()=>L(R.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},R.id);const Z=Ln(E.amountDelivered??R.amountDelivered),te=Ln(E.commissionPercent??R.commissionPercent),Q=Ln(E.extraExpenses??R.extraExpenses),ye=L_(Z,te),Y=U_(Z,ye,Q);return l.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:z=>S(le=>({...le,dateInput:z.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),l.jsx("td",{className:"p-2",children:l.jsxs("select",{value:String(E.sellerId??R.sellerId),onChange:z=>{const le=z.target.value,je=o.get(le);S(ue=>({...ue,sellerId:le,sellerName:(je==null?void 0:je.name)??"",commissionPercent:Ln((je==null?void 0:je.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[l.jsx("option",{value:"",children:"Seleccionar..."}),s.map(z=>l.jsxs("option",{value:z.id,children:[z.name," ",z.branch?`(${z.branch})`:""]},z.id))]})}),l.jsx("td",{className:"p-2 text-right",children:l.jsx("input",{type:"number",value:String(Z),onChange:z=>S(le=>({...le,amountDelivered:Ln(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),l.jsx("td",{className:"p-2 text-right",children:l.jsx("input",{type:"number",value:String(te),onChange:z=>S(le=>({...le,commissionPercent:Ln(z.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),l.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",Os(ye)]}),l.jsx("td",{className:"p-2 text-right",children:l.jsx("input",{type:"number",value:String(Q),onChange:z=>S(le=>({...le,extraExpenses:Ln(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),l.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Os(Y)]}),l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:String(E.comment??R.comment),onChange:z=>S(le=>({...le,comment:z.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),l.jsx("td",{className:"p-2",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>M(R.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),l.jsx("button",{onClick:V,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},R.id)})})]})}),l.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(R=>l.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("div",{className:"font-black text-gray-900",children:R.sellerName}),l.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:dr(R.date.toDate(),"yyyy-MM-dd")})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),l.jsxs("div",{className:"font-extrabold",children:["$ ",Os(R.amountDelivered)]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),l.jsxs("div",{className:"font-semibold",children:[Os(R.commissionPercent),"%"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),l.jsxs("div",{className:"font-semibold",children:["$ ",Os(R.commissionPaid)]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),l.jsxs("div",{className:"font-semibold",children:["$ ",Os(R.extraExpenses)]})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),l.jsxs("div",{className:"text-base font-black",children:["$ ",Os(R.totalFinal)]})]}),R.comment?l.jsxs("div",{className:"col-span-2",children:[l.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),l.jsx("div",{className:"text-sm text-gray-800",children:R.comment})]}):null]}),l.jsxs("div",{className:"mt-3 flex gap-2",children:[l.jsx("button",{onClick:()=>F(R),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),l.jsx("button",{onClick:()=>L(R.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},R.id)),T?l.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[l.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),l.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:R=>S(K=>({...K,dateInput:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),l.jsxs("select",{value:String(E.sellerId??""),onChange:R=>{const K=R.target.value,Z=o.get(K);S(te=>({...te,sellerId:K,sellerName:(Z==null?void 0:Z.name)??"",commissionPercent:Ln((Z==null?void 0:Z.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[l.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>l.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),l.jsx("input",{type:"number",value:String(E.amountDelivered??""),onChange:R=>S(K=>({...K,amountDelivered:Ln(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),l.jsx("input",{type:"number",value:String(E.extraExpenses??""),onChange:R=>S(K=>({...K,extraExpenses:Ln(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),l.jsx("input",{type:"number",value:String(E.commissionPercent??""),onChange:R=>S(K=>({...K,commissionPercent:Ln(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),l.jsxs("label",{className:"space-y-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),l.jsx("input",{type:"text",value:String(E.comment??""),onChange:R=>S(K=>({...K,comment:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>M(T),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),l.jsx("button",{onClick:V,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const V_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function prt(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function pz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function grt(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function xrt(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,o]=v.useState([]),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState("ANY"),[g,x]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const I=await jt(Kt(ht(Fe,"candy_main_orders"))),T=new Map;I.forEach(E=>{var W,Ae,ee;const S=E.data(),O=grt(S.date),B=((Ae=(W=S==null?void 0:S.createdAt)==null?void 0:W.toMillis)==null?void 0:Ae.call(W))||((ee=S==null?void 0:S.createdAt)!=null&&ee.seconds?S.createdAt.seconds*1e3:0)||0,P=Math.max(O,B),D=Array.isArray(S.items)?S.items:[];for(const ce of D){const de=String((ce==null?void 0:ce.id)||(ce==null?void 0:ce.productId)||"").trim();if(!de)continue;const X=String((ce==null?void 0:ce.name)||(ce==null?void 0:ce.productName)||"").trim(),pe=String((ce==null?void 0:ce.category)||"").trim(),Se=Number((ce==null?void 0:ce.unitPriceIsla)||0),k=Number((ce==null?void 0:ce.unitPriceRivas)||0),F=T.get(de);(!F||P>=F._sortKey)&&T.set(de,{productId:de,category:pe,productName:X,priceIsla:Se,priceRivas:k,_sortKey:P})}});const C=Array.from(T.values()).sort((E,S)=>E.productName.localeCompare(S.productName,"es"));o(C)}catch(I){console.error(I),s(" Error cargando precios desde rdenes maestras."),o([])}finally{n(!1)}})()},[t]);const y=v.useMemo(()=>{const I=prt(c),T=d.trim()===""?null:pz(d,NaN),C=h.trim()===""?null:pz(h,NaN);return i.filter(E=>{if(I&&!`${E.category} ${E.productName}`.toLowerCase().includes(I))return!1;const S=m==="ISLA"?[E.priceIsla]:m==="RIVAS"?[E.priceRivas]:[E.priceIsla,E.priceRivas],O=T==null||!Number.isFinite(T)?!0:S.some(P=>P>=T),B=C==null||!Number.isFinite(C)?!0:S.some(P=>P<=C);return O&&B})},[i,c,d,h,m]),b=()=>{u(""),A(""),f(""),p("ANY")},w=v.useMemo(()=>c.trim()!==""||d.trim()!==""||h.trim()!==""||m!=="ANY",[c,d,h,m]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),l.jsx("div",{className:"flex gap-2",children:l.jsx(Dc,{onClick:e,loading:r})})]}),l.jsxs("div",{className:"md:hidden mb-3",children:[l.jsxs("button",{type:"button",onClick:()=>x(I=>!I),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${w?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-semibold",children:"Filtros"}),l.jsxs("div",{className:"text-xs text-gray-600",children:[w?"Activos":"Ninguno","  ","Mostrando ",l.jsx("b",{children:y.length})]})]}),l.jsx("div",{className:"text-sm font-semibold",children:g?"Cerrar":"Abrir"})]}),g&&l.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Producto"}),l.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:I=>u(I.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio en"}),l.jsxs("select",{className:"w-full border rounded px-2 py-2",value:m,onChange:I=>p(I.target.value),children:[l.jsx("option",{value:"ANY",children:"Isla o Rivas"}),l.jsx("option",{value:"ISLA",children:"Solo Isla"}),l.jsx("option",{value:"RIVAS",children:"Solo Rivas"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Mn"}),l.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:d,onChange:I=>A(I.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Mx"}),l.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:h,onChange:I=>f(I.target.value),placeholder:"0"})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:b,children:"Limpiar"}),l.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>x(!1),children:"Aplicar"})]})]})})]}),l.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[l.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),l.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:I=>u(I.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio en"}),l.jsxs("select",{className:"w-full border rounded px-2 py-1",value:m,onChange:I=>p(I.target.value),children:[l.jsx("option",{value:"ANY",children:"Isla o Rivas"}),l.jsx("option",{value:"ISLA",children:"Solo Isla"}),l.jsx("option",{value:"RIVAS",children:"Solo Rivas"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio mn"}),l.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:d,onChange:I=>A(I.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio mx"}),l.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:I=>f(I.target.value),placeholder:"0"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:b,children:"Limpiar"})})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",l.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",l.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",l.jsx("b",{children:y.length})]})]})]}),l.jsxs("div",{className:"md:hidden",children:[r?l.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):y.length===0?l.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):l.jsx("div",{className:"space-y-2",children:y.map(I=>l.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-3",children:[l.jsx("div",{className:"text-xs text-gray-600",children:I.category}),l.jsx("div",{className:"text-base font-bold leading-tight",children:I.productName}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Isla"}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:V_(I.priceIsla)})]}),l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Rivas"}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:V_(I.priceRivas)})]})]})]},I.productId))}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]}),l.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):y.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin resultados."})}):y.map(I=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 border",children:I.category}),l.jsx("td",{className:"p-2 border",children:I.productName}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:V_(I.priceIsla)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:V_(I.priceRivas)})]},I.productId))})]})}),a&&l.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const H_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],TT=["Hombre","Mujer","Variado","NA"],vrt=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],Uo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ai(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function ml(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function jC(t,e=1){const r=Math.floor(ml(t,e));return r>0?r:e}function Vle(t){return!Number.isFinite(t)||t<=0?0:t}function PT(t){const e=String(t??"").trim();return e||""}function Ld(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ai(a),a));for(const a of e){const s=n.get(Ai(a));if(s!=null)return t[s]}}function yrt(t){return Object.values(t||{}).every(r=>Ai(r)==="")}function Rg(t){const e=Math.max(0,ml(t.providerPrice,0)),r=Math.max(1,jC(t.quantity,1)),n=Vle(ml(t.margin,0)),a=Math.max(0,ml(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,o=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:o,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function brt(){const{refreshKey:t,refresh:e}=Yl(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,o]=v.useState([]),[c,u]=v.useState(!1),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,I]=v.useState(null),[T,C]=v.useState(!1),[E,S]=v.useState(null),[O,B]=v.useState(H_[0]),[P,D]=v.useState(""),[W,Ae]=v.useState(0),[ee,ce]=v.useState(1),[de,X]=v.useState(.7),[pe,Se]=v.useState(0),[k,F]=v.useState("NA"),[V,M]=v.useState(""),[L,q]=v.useState(""),[R,K]=v.useState(!1),[Z,te]=v.useState(""),[Q,ye]=v.useState([]),[Y,z]=v.useState([]),[le,je]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const he=await jt(Kt(ht(Fe,"products_stationery"))),_e=[];he.forEach(be=>{const Qe=be.data();_e.push({id:be.id,category:Qe.category||"",name:Qe.name||"",providerPrice:Number(Qe.providerPrice||0),quantity:Number(Qe.quantity||1),facturado:Number(Qe.facturado||0),margin:Number(Qe.margin||0),salePrice:Number(Qe.salePrice||0),gain:Number(Qe.gain||0),gender:Qe.gender||"NA",typeProduct:Qe.typeProduct||"",code:Qe.code??"",createdAt:Qe.createdAt,updatedAt:Qe.updatedAt,totalEsperado:Number(Qe.totalEsperado||Number(Qe.salePrice||0)*Number(Qe.quantity||1))})}),o(_e)}catch(he){console.error(he),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const ue=v.useMemo(()=>{const he=Ai(d),_e=Ai(h),be=m.trim()===""?null:ml(m,NaN),Qe=g.trim()===""?null:ml(g,NaN);return i.filter($e=>!(he&&!`${$e.category} ${$e.name}`.toLowerCase().includes(he)||_e&&!String($e.code||"").toLowerCase().includes(_e)||be!=null&&Number.isFinite(be)&&$e.salePrice<be||Qe!=null&&Number.isFinite(Qe)&&$e.salePrice>Qe))},[i,d,h,m,g]),Pe=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),Ye=v.useMemo(()=>{const he=i.length,_e=i.reduce(($e,Je)=>$e+(Je.facturado||0),0),be=i.reduce(($e,Je)=>$e+Number(Je.totalEsperado||Number(Je.salePrice||0)*Number(Je.quantity||1)),0),Qe=i.reduce(($e,Je)=>$e+(Je.gain||0),0);return{count:he,sumFact:_e,sumEsperado:be,sumGain:Qe}},[i]),nt=()=>{B(H_[0]),D(""),Ae(0),ce(1),X(.7),Se(0),F("NA"),M(""),q(""),I(null)},mt=()=>{nt(),b(!0)},ct=he=>{I(he),B(he.category||H_[0]),D(he.name||""),Ae(Number(he.providerPrice||0)),ce(Number(he.quantity||1)),X(Number(he.margin||.7)),Se(Number(he.salePrice||0)),F(he.gender||"NA"),M(he.typeProduct||""),q(String(he.code||"")),b(!0)},ft=async()=>{s("");const he=String(O||"").trim(),_e=String(P||"").trim(),{providerPrice:be,quantity:Qe,margin:$e,salePrice:Je,facturado:st,totalEsperado:yt,gain:Dt}=Rg({providerPrice:W,quantity:ee,margin:de,salePrice:pe});if(!he)return s(" Categora requerida.");if(!_e)return s(" Producto requerido.");if(be<=0)return s(" Precio proveedor debe ser > 0.");if(Qe<=0)return s(" Cantidad debe ser > 0.");if(Je<=0)return s(" Precio venta invlido.");if($e<=0)return s(" Margen invlido.");const nr={category:he,name:_e,providerPrice:be,quantity:Qe,facturado:st,margin:$e,salePrice:Je,gain:Dt,gender:k||"NA",typeProduct:String(V||"").trim(),code:PT(L)||null,updatedAt:Xt.now(),totalEsperado:yt};try{n(!0),w?(await Hr(Ht(Fe,"products_stationery",w.id),nr),s(" Producto actualizado.")):(await on(ht(Fe,"products_stationery"),{...nr,createdAt:Xt.now()}),s(" Producto creado.")),b(!1),I(null),nt(),e()}catch(Ce){console.error(Ce),s(" Error guardando producto.")}finally{n(!1)}},Ct=async()=>{var he;try{const _e=new GE,be=await GE.listVideoInputDevices(),Qe=(he=be[be.length-1])==null?void 0:he.deviceId;if(!Qe)return null;const $e=document.createElement("div");$e.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Je=document.createElement("div");Je.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const st=document.createElement("div");st.className="p-3 flex items-center justify-between border-b",st.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const yt=document.createElement("button");yt.textContent="Cerrar",yt.className="px-3 py-1 rounded bg-gray-200";const Dt=document.createElement("div");Dt.className="p-3";const nr=document.createElement("video");return nr.style.width="100%",nr.style.borderRadius="12px",Dt.appendChild(nr),st.appendChild(yt),Je.appendChild(st),Je.appendChild(Dt),$e.appendChild(Je),document.body.appendChild($e),await new Promise(async Ce=>{const dt=()=>{$e.remove(),Ce(null)};yt.onclick=dt;const gt=await _e.decodeFromVideoDevice(Qe,nr,Ne=>{if(Ne){const at=Ne.getText();try{gt.stop()}catch{}$e.remove(),Ce(at)}})})}catch(_e){return console.error(_e),null}},At=async()=>{const he=await Ct();he&&q(he)},He=async()=>{const he=await Ct();if(!he)return;const _e=i.find(be=>String(be.code||"")===String(he));_e?(S(_e),C(!0),s("")):(S(null),C(!0),s(""))},it=(he,_e)=>{const be=he.map(Je=>({Id:Je.id,Categoria:Je.category,Producto:Je.name,PrecioProveedor:Je.providerPrice,Cantidad:Je.quantity,Facturado:Je.facturado,TotalEsperado:Je.totalEsperado||Je.salePrice*Je.quantity,Margen:Je.margin,PrecioVenta:Je.salePrice,Ganancia:Je.gain,Genero:Je.gender,TipoProducto:Je.typeProduct,Codigo:Je.code||""})),Qe=Wu.json_to_sheet(be),$e=Wu.book_new();Wu.book_append_sheet($e,Qe,"Productos"),eLe($e,_e)},we=()=>{const he=[{Id:"",Categoria:"Cuaderno",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],_e=Wu.json_to_sheet(he),be=Wu.book_new();Wu.book_append_sheet(be,_e,"Productos");const Qe=y4(be,{type:"array",bookType:"xlsx"}),$e=new Blob([Qe],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Je=URL.createObjectURL($e),st=document.createElement("a");st.href=Je,st.download="template_products_stationery.xlsx",document.body.appendChild(st),st.click(),st.remove(),URL.revokeObjectURL(Je)},re=he=>{const _e=[],be=[];he.forEach(($e,Je)=>{if(!$e||typeof $e!="object"||yrt($e))return;const st=Je+2,yt=String(Ld($e,["Id","ID","docId","DocId"])??"").trim(),Dt=String(Ld($e,["Categoria","Categora","Category","category"])??"").trim(),nr=String(Ld($e,["Producto","Product","Nombre","Name","name"])??"").trim(),Ce=Ld($e,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),dt=Ld($e,["Cantidad","Qty","quantity","cantidad"]),gt=Ld($e,["Margen","Margin","margen","margin"]),Ne=Ld($e,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),at=String(Ld($e,["Genero","Gnero","Gender","gender"])??"NA").trim(),wt=String(Ld($e,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),kt=Ld($e,["Codigo","Cdigo","Code","Barcode","code"]),Lt=PT(kt),qt=Math.max(0,ml(Ce,0)),_t=Math.max(1,jC(dt,1)),ie=Vle(ml(gt,0)),se=Math.max(0,ml(Ne,0));Dt||be.push(`Fila ${st}: falta Categoria.`),nr||be.push(`Fila ${st}: falta Producto.`),qt<=0&&be.push(`Fila ${st}: PrecioProveedor debe ser > 0.`),_t<=0&&be.push(`Fila ${st}: Cantidad debe ser > 0.`),ie<=0&&se<=0&&be.push(`Fila ${st}: Margen debe ser > 0 (o enviar PrecioVenta).`);const fe=TT.includes(at||"NA")?at:"NA";Dt&&nr&&qt>0&&_t>0&&(ie>0||se>0)&&_e.push({id:yt||void 0,category:Dt,name:nr,providerPrice:qt,quantity:_t,margin:ie>0?ie:.7,salePrice:se>0?se:void 0,gender:fe,typeProduct:wt,code:Lt||"",_raw:$e})});const Qe=new Map;for(const $e of _e){const Je=$e.id?`id::${$e.id}`:`${Ai($e.category)}::${Ai($e.name)}`;Qe.set(Je,$e)}return{rows:Array.from(Qe.values()),errors:be}},ne=async he=>{if(s(""),z([]),ye([]),te((he==null?void 0:he.name)||""),!he)return;const _e=he.name.toLowerCase(),be=_e.endsWith(".xlsx")||_e.endsWith(".xls"),Qe=_e.endsWith(".csv");if(!be&&!Qe){z(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{je(!0);const $e=new FileReader,Je=await new Promise((gt,Ne)=>{$e.onerror=()=>Ne(new Error("No se pudo leer el archivo.")),$e.onload=()=>gt($e.result),$e.readAsArrayBuffer(he)}),st=sS(new Uint8Array(Je),{type:"array"}),yt=st.SheetNames[0],Dt=st.Sheets[yt],nr=Wu.sheet_to_json(Dt,{defval:""}),{rows:Ce,errors:dt}=re(nr);ye(Ce),z(dt),Ce.length===0&&dt.length===0&&z(["No se encontraron filas vlidas para importar."])}catch($e){console.error($e),z(["Error leyendo el archivo. Revis que no est corrupto."])}finally{je(!1)}},Ue=(he,_e)=>{ye(be=>{const Qe=[...be],$e=Qe[he];return $e?(Qe[he]={...$e,..._e},Qe):be})},Ke=v.useMemo(()=>{const he=new Set(i.map($e=>$e.id)),_e=new Set(i.map($e=>`${Ai($e.category)}::${Ai($e.name)}`));let be=0,Qe=0;for(const $e of Q){if($e.id&&he.has($e.id)){be+=1;continue}const Je=`${Ai($e.category)}::${Ai($e.name)}`;_e.has(Je)?be+=1:Qe+=1}return{total:Q.length,willCreate:Qe,willUpdate:be}},[Q,i]),et=async()=>{if(s(""),Y.length>0){s(" Correg los errores antes de importar.");return}if(Q.length===0){s(" No hay filas para importar.");return}try{je(!0);const he={},_e={};i.forEach(Je=>{he[Je.id]=Je,_e[`${Ai(Je.category)}::${Ai(Je.name)}`]=Je});const be=M0(Fe);let Qe=0,$e=0;for(const Je of Q){const st=String(Je.category||"").trim(),yt=String(Je.name||"").trim(),{providerPrice:Dt,quantity:nr,margin:Ce,salePrice:dt,facturado:gt,totalEsperado:Ne,gain:at}=Rg({providerPrice:Je.providerPrice,quantity:Je.quantity,margin:Je.margin,salePrice:Je.salePrice});if(!st||!yt||Dt<=0||nr<=0||dt<=0||Ce<=0)continue;const wt={category:st,name:yt,providerPrice:Dt,quantity:nr,facturado:gt,totalEsperado:Ne,margin:Ce,salePrice:dt,gain:at,gender:Je.gender||"NA",typeProduct:String(Je.typeProduct||"").trim(),code:PT(Je.code)||null,updatedAt:Xt.now()};let kt;if(Je.id&&he[Je.id])kt=he[Je.id];else{const Lt=`${Ai(st)}::${Ai(yt)}`;kt=_e[Lt]}if(kt)be.update(Ht(Fe,"products_stationery",kt.id),wt),$e+=1;else{const Lt=Ht(ht(Fe,"products_stationery"));be.set(Lt,{...wt,createdAt:Xt.now()}),Qe+=1}}await be.commit(),s(` Importacin lista. Creados: ${Qe}, Actualizados: ${$e}`),K(!1),ye([]),z([]),te(""),e()}catch(he){console.error(he),s(" Error importando productos a Firestore.")}finally{je(!1)}},ke=()=>{A(""),f(""),p(""),x("")};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),l.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:He,type:"button",children:"Escanear"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:mt,type:"button",children:"+ Nuevo"}),l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{K(!0),ye([]),z([]),te("")},type:"button",children:"Importar (.xlsx)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>it(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>it(ue,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),l.jsx(Dc,{onClick:e,loading:r||le})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[l.jsx($_,{label:"Productos",value:Ye.count}),l.jsx($_,{label:"Facturado",value:Uo(Ye.sumFact)}),l.jsx($_,{label:"Esperado",value:Uo(Ye.sumEsperado)}),l.jsx($_,{label:"Ganancia",value:Uo(Ye.sumGain)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${Pe?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(he=>!he),children:[c?"Cerrar filtros":"Abrir filtros"," ",Pe?"(activos)":""]}),c&&l.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Producto"}),l.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:he=>A(he.target.value),placeholder:"Ej: Cuaderno Norma"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cdigo"}),l.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:he=>f(he.target.value),placeholder:"Barcode"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),l.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:he=>p(he.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),l.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:he=>x(he.target.value),placeholder:"0"})]}),l.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:ke,children:"Limpiar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[l.jsxs("div",{children:["Mostrando: ",l.jsx("b",{children:ue.length})]}),l.jsxs("div",{children:["Coleccin: ",l.jsx("b",{children:"products_stationery"})]})]})]})]}),l.jsx("div",{className:"md:hidden space-y-2",children:r?l.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):ue.length===0?l.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):ue.map(he=>l.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[l.jsx("div",{className:"text-xs text-gray-600",children:he.category}),l.jsx("div",{className:"text-base font-bold leading-tight",children:he.name}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Uo(he.salePrice)})]}),l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",l.jsx("b",{children:Uo(he.totalEsperado||he.salePrice*he.quantity)})]}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Uo(he.gain)})]})]}),l.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",l.jsx("b",{children:he.code||""})]}),l.jsx("div",{className:"mt-2 flex gap-2",children:l.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ct(he),children:"Editar"})})]},he.id))}),l.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:l.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),l.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),l.jsx("th",{className:"p-2 border text-right",children:"Margen"}),l.jsx("th",{className:"p-2 border text-right",children:"Venta"}),l.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),l.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),l.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),l.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),l.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):ue.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):ue.map(he=>l.jsxs("tr",{className:"align-top",children:[l.jsx("td",{className:"p-2 border",children:he.category}),l.jsx("td",{className:"p-2 border",children:he.name}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Uo(he.providerPrice)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:he.quantity}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Uo(he.facturado)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Uo(he.totalEsperado||he.salePrice*he.quantity)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(he.margin||0).toFixed(2)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Uo(he.salePrice)}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:Uo(he.gain)}),l.jsx("td",{className:"p-2 border",children:he.gender}),l.jsx("td",{className:"p-2 border",children:he.typeProduct}),l.jsx("td",{className:"p-2 border",children:he.code||""}),l.jsx("td",{className:"p-2 border text-center",children:l.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ct(he),children:"Editar"})})]},he.id))})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a}),y&&l.jsxs(gz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Categora"}),l.jsx("select",{className:"w-full border rounded px-2 py-2",value:O,onChange:he=>B(he.target.value),children:H_.map(he=>l.jsx("option",{value:he,children:he},he))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Producto"}),l.jsx("input",{className:"w-full border rounded px-2 py-2",value:P,onChange:he=>D(he.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(W)?"":W,onChange:he=>Ae(Math.max(0,ml(he.target.value,0)))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cantidad"}),l.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:ee,onChange:he=>ce(jC(he.target.value,1))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),l.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Uo(Rg({providerPrice:W,quantity:ee,margin:de,salePrice:pe}).facturado)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Margen"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(de)?"":de,onChange:he=>X(Math.max(0,ml(he.target.value,0)))}),l.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Rg({providerPrice:W,quantity:ee,margin:de,salePrice:pe}).salePrice)?"":Rg({providerPrice:W,quantity:ee,margin:de,salePrice:pe}).salePrice,onChange:he=>{Se(Math.max(0,ml(he.target.value,0)))}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),l.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Uo(Rg({providerPrice:W,quantity:ee,margin:de,salePrice:pe}).gain)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Gnero"}),l.jsx("select",{className:"w-full border rounded px-2 py-2",value:k,onChange:he=>F(he.target.value),children:TT.map(he=>l.jsx("option",{value:he,children:he},he))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),l.jsxs("select",{className:"w-full border rounded px-2 py-2",value:V,onChange:he=>M(he.target.value),children:[l.jsx("option",{value:"",children:""}),vrt.map(he=>l.jsx("option",{value:he,children:he},he))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block font-semibold",children:"Cdigo"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:L,onChange:he=>q(he.target.value),placeholder:"Escane o peg el cdigo"}),l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:At,children:"Escanear"})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),I(null)},children:"Cancelar"}),l.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:ft,disabled:r,children:"Guardar"})]})]}),T&&l.jsx(gz,{onClose:()=>C(!1),title:"Resultado de escaneo",children:E?l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"text-xs text-gray-600",children:E.category}),l.jsx("div",{className:"text-lg font-bold",children:E.name}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Uo(E.salePrice)})]}),l.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),l.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Uo(E.gain)})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"rounded-lg border p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),l.jsx("div",{className:"font-semibold tabular-nums",children:Uo(E.providerPrice)})]}),l.jsxs("div",{className:"rounded-lg border p-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),l.jsx("div",{className:"font-semibold tabular-nums",children:E.quantity})]}),l.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[l.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),l.jsx("div",{className:"font-semibold tabular-nums",children:E.code||""})]})]}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{C(!1),ct(E)},children:"Editar"})})]}):l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-semibold",children:"No encontrado"}),l.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",l.jsx("b",{children:"products_stationery"}),"."]})]})}),R&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),l.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:we,type:"button",children:"Descargar template .xlsx"})]}),l.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[l.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:he=>{var _e;return ne(((_e=he.target.files)==null?void 0:_e[0])||null)}}),Z&&l.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",l.jsx("b",{children:Z})]}),le&&l.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Y.length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[l.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),l.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Y.slice(0,60).map((he,_e)=>l.jsx("li",{children:he},_e))})]}),l.jsxs("div",{className:"bg-white border rounded p-3",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),l.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Ke.total," filas (Crear:"," ",Ke.willCreate," / Actualizar:"," ",Ke.willUpdate,")"]})]}),l.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:et,disabled:le||Q.length===0||Y.length>0,type:"button",children:"Importar a Firestore"})]}),l.jsxs("div",{className:"overflow-x-auto border rounded",children:[l.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),l.jsx("th",{className:"p-2 border text-left",children:"Categora"}),l.jsx("th",{className:"p-2 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Margen"}),l.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),l.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),l.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),l.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),l.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),l.jsx("tbody",{children:Q.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Q.slice(0,300).map((he,_e)=>{const be=he.id?i.some(Je=>Je.id===he.id):!1,Qe=i.some(Je=>`${Ai(Je.category)}::${Ai(Je.name)}`==`${Ai(he.category)}::${Ai(he.name)}`),$e=be||Qe;return l.jsxs("tr",{className:"whitespace-nowrap",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.id||"",onChange:Je=>Ue(_e,{id:Je.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-44 border rounded px-2 py-1",value:he.category,onChange:Je=>Ue(_e,{category:Je.target.value})})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-72 border rounded px-2 py-1",value:he.name,onChange:Je=>Ue(_e,{name:Je.target.value})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:he.providerPrice,onChange:Je=>Ue(_e,{providerPrice:Math.max(0,ml(Je.target.value,0))})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:he.quantity,onChange:Je=>Ue(_e,{quantity:jC(Je.target.value,1)})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:he.margin,onChange:Je=>Ue(_e,{margin:Math.max(0,ml(Je.target.value,0))})})}),l.jsx("td",{className:"p-2 border text-right tabular-nums",children:l.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:he.salePrice??"",onChange:Je=>Ue(_e,{salePrice:Math.max(0,ml(Je.target.value,0))||void 0}),placeholder:"Opcional"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("select",{className:"w-28 border rounded px-2 py-1",value:he.gender,onChange:Je=>Ue(_e,{gender:Je.target.value}),children:TT.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.typeProduct,onChange:Je=>Ue(_e,{typeProduct:Je.target.value})})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{className:"w-56 border rounded px-2 py-1",value:he.code||"",onChange:Je=>Ue(_e,{code:Je.target.value})})}),l.jsx("td",{className:"p-2 border text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${$e?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:$e?"ACTUALIZA":"CREA"})})]},`${he.id||""}-${_e}`)})})]}),Q.length>300&&l.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Q.length," filas (importa todas)."]})]})]})]})})]})}function $_({label:t,value:e}){return l.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[l.jsx("div",{className:"text-xs text-gray-500",children:t}),l.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function gz({title:t,children:e,onClose:r}){return l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-xl font-bold",children:t}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}function wrt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Nrt(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,o]=v.useState(!0),c=wrt(),u=v.useMemo(()=>c?l.jsx(jve,{role:r}):l.jsx(Pve,{role:r}),[c,r]),d=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const h=IX(mp,async f=>{o(!0);try{const m="POSYS_LOGIN_AT";if(f){const g=localStorage.getItem(m),x=g?Number(g):NaN;if(!Number.isFinite(x))localStorage.setItem(m,String(Date.now()));else if(Date.now()-x>1296e6){await yI(mp),localStorage.removeItem(m),localStorage.removeItem("role"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),e(null),n(""),s(""),o(!1);return}}}catch{}if(f){e(f);try{const m=Ht(Fe,"users",f.uid),p=await So(m);if(p.exists()){const g=p.data(),x=g.role||"",y=g.sellerCandyId||"";n(x||""),s(y||"")}else n(""),s("")}catch{n(""),s("")}}else e(null),n(""),s("");o(!1)});return()=>h()},[]),i)return l.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>r==="admin"?l.jsx(dm,{to:"financialDashboard",replace:!0}):r==="vendedor_pollo"?l.jsx(dm,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?l.jsx(dm,{to:"salesClothes",replace:!0}):r==="vendedor_dulces"?l.jsx(dm,{to:"salesCandies",replace:!0}):l.jsx(dm,{to:"/",replace:!0});return l.jsx(mfe,{children:l.jsxs(GAe,{children:[l.jsx(zr,{path:"/",element:l.jsx(Tve,{})}),l.jsxs(zr,{path:"/admin",element:l.jsx(rn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"],children:u}),children:[l.jsx(zr,{index:!0,element:l.jsx(A,{})}),l.jsx(zr,{path:"bills",element:l.jsx(rn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(sSe,{})})}),l.jsx(zr,{path:"salesV2",element:l.jsx(rn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(EQ,{user:t})})}),l.jsx(zr,{path:"financialDashboard",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(TSe,{})})}),l.jsx(zr,{path:"expenses",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(jSe,{})})}),l.jsx(zr,{path:"billing",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(RSe,{})})}),l.jsx(zr,{path:"batches",element:l.jsx(rn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(SSe,{role:r})})}),l.jsx(zr,{path:"paidBatches",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(QSe,{})})}),l.jsx(zr,{path:"fix",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(OSe,{})})}),l.jsx(zr,{path:"transactionclose",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(ISe,{})})}),l.jsx(zr,{path:"billhistoric",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(iSe,{})})}),l.jsx(zr,{path:"users",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(oSe,{})})}),l.jsx(zr,{path:"products",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(cSe,{})})}),l.jsx(zr,{path:"datacenter",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(AUe,{})})}),l.jsx(zr,{path:"productsCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(mLe,{})})}),l.jsx(zr,{path:"mainordersCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(XLe,{})})}),l.jsx(zr,{path:"productsPricesCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(xrt,{})})}),l.jsx(zr,{path:"inventoryMainOrderCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(YLe,{})})}),l.jsx(zr,{path:"inventoryCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(NLe,{})})}),l.jsx(zr,{path:"billingsCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(iUe,{})})}),l.jsx(zr,{path:"cashDeliveries",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(mrt,{})})}),l.jsx(zr,{path:"customersCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(_Le,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"salesCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(TLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"expensesCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(PLe,{})})}),l.jsx(zr,{path:"dashboardCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(ULe,{})})}),l.jsx(zr,{path:"transactionCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(OLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"vendorsCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(QLe,{})})}),l.jsx(zr,{path:"productsVendorsCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(zLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"cierreVentasCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(ZLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"reporteCierresCandies",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(lUe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),l.jsx(zr,{path:"consolidatedVendors",element:l.jsx(rn,{allowedRoles:["admin","vendedor_dulces"],children:l.jsx(aUe,{})})}),l.jsx(zr,{path:"salesClothes",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(oIe,{})})}),l.jsx(zr,{path:"notebooksInventory",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(brt,{})})}),l.jsx(zr,{path:"TransactionsReportClothes",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(gIe,{})})}),l.jsx(zr,{path:"financialDashboardClothes",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(uIe,{})})}),l.jsx(zr,{path:"ExpensesClothes",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(dIe,{})})}),l.jsx(zr,{path:"inventoryClothesBatches",element:l.jsx(rn,{allowedRoles:["admin"],children:l.jsx(KSe,{})})}),l.jsx(zr,{path:"productsClothes",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(rIe,{})})}),l.jsx(zr,{path:"CustomersClothes",element:l.jsx(rn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(aIe,{})})})]}),l.jsx(zr,{path:"/salesV2",element:l.jsx(rn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(EQ,{user:t})})}),l.jsx(zr,{path:"*",element:l.jsx(dm,{to:"/"})})]})})}jT.createRoot(document.getElementById("root")).render(l.jsx(xo.StrictMode,{children:l.jsx(Nrt,{})}));export{ea as _,Crt as c,Ef as g};
