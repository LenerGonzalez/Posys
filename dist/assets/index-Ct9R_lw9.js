(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var yW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TN={exports:{}},nw={},UN={exports:{}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),vP=Symbol.for("react.portal"),yP=Symbol.for("react.fragment"),xP=Symbol.for("react.strict_mode"),bP=Symbol.for("react.profiler"),BP=Symbol.for("react.provider"),CP=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),NP=Symbol.for("react.memo"),IP=Symbol.for("react.lazy"),WB=Symbol.iterator;function SP(t){return t===null||typeof t!="object"?null:(t=WB&&t[WB]||t["@@iterator"],typeof t=="function"?t:null)}var PN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QN=Object.assign,LN={};function Ld(t,e,r){this.props=t,this.context=e,this.refs=LN,this.updater=r||PN}Ld.prototype.isReactComponent={};Ld.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ld.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jN(){}jN.prototype=Ld.prototype;function ox(t,e,r){this.props=t,this.context=e,this.refs=LN,this.updater=r||PN}var Ax=ox.prototype=new jN;Ax.constructor=ox;QN(Ax,Ld.prototype);Ax.isPureReactComponent=!0;var XB=Array.isArray,kN=Object.prototype.hasOwnProperty,lx={current:null},RN={key:!0,ref:!0,__self:!0,__source:!0};function DN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)kN.call(e,n)&&!RN.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:yp,type:t,key:i,ref:a,props:s,_owner:lx.current}}function FP(t,e){return{$$typeof:yp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cx(t){return typeof t=="object"&&t!==null&&t.$$typeof===yp}function TP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var JB=/\/+/g;function Uv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TP(""+t.key):e.toString(36)}function xg(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case yp:case vP:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Uv(a,0):n,XB(s)?(r="",t!=null&&(r=t.replace(JB,"$&/")+"/"),xg(s,e,r,"",function(c){return c})):s!=null&&(cx(s)&&(s=FP(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(JB,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",XB(t))for(var o=0;o<t.length;o++){i=t[o];var A=n+Uv(i,o);a+=xg(i,e,r,A,s)}else if(A=SP(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=n+Uv(i,o++),a+=xg(i,e,r,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function gm(t,e,r){if(t==null)return t;var n=[],s=0;return xg(t,n,"","",function(i){return e.call(r,i,s++)}),n}function UP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qs={current:null},bg={transition:null},PP={ReactCurrentDispatcher:Qs,ReactCurrentBatchConfig:bg,ReactCurrentOwner:lx};function ON(){throw Error("act(...) is not supported in production builds of React.")}er.Children={map:gm,forEach:function(t,e,r){gm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return gm(t,function(){e++}),e},toArray:function(t){return gm(t,function(e){return e})||[]},only:function(t){if(!cx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};er.Component=Ld;er.Fragment=yP;er.Profiler=bP;er.PureComponent=ox;er.StrictMode=xP;er.Suspense=_P;er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;er.act=ON;er.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=QN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=lx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)kN.call(e,A)&&!RN.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:yp,type:t.type,key:s,ref:i,props:n,_owner:a}};er.createContext=function(t){return t={$$typeof:CP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BP,_context:t},t.Consumer=t};er.createElement=DN;er.createFactory=function(t){var e=DN.bind(null,t);return e.type=t,e};er.createRef=function(){return{current:null}};er.forwardRef=function(t){return{$$typeof:EP,render:t}};er.isValidElement=cx;er.lazy=function(t){return{$$typeof:IP,_payload:{_status:-1,_result:t},_init:UP}};er.memo=function(t,e){return{$$typeof:NP,type:t,compare:e===void 0?null:e}};er.startTransition=function(t){var e=bg.transition;bg.transition={};try{t()}finally{bg.transition=e}};er.unstable_act=ON;er.useCallback=function(t,e){return Qs.current.useCallback(t,e)};er.useContext=function(t){return Qs.current.useContext(t)};er.useDebugValue=function(){};er.useDeferredValue=function(t){return Qs.current.useDeferredValue(t)};er.useEffect=function(t,e){return Qs.current.useEffect(t,e)};er.useId=function(){return Qs.current.useId()};er.useImperativeHandle=function(t,e,r){return Qs.current.useImperativeHandle(t,e,r)};er.useInsertionEffect=function(t,e){return Qs.current.useInsertionEffect(t,e)};er.useLayoutEffect=function(t,e){return Qs.current.useLayoutEffect(t,e)};er.useMemo=function(t,e){return Qs.current.useMemo(t,e)};er.useReducer=function(t,e,r){return Qs.current.useReducer(t,e,r)};er.useRef=function(t){return Qs.current.useRef(t)};er.useState=function(t){return Qs.current.useState(t)};er.useSyncExternalStore=function(t,e,r){return Qs.current.useSyncExternalStore(t,e,r)};er.useTransition=function(){return Qs.current.useTransition()};er.version="18.3.1";UN.exports=er;var j=UN.exports;const _o=wP(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=j,LP=Symbol.for("react.element"),jP=Symbol.for("react.fragment"),kP=Object.prototype.hasOwnProperty,RP=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function MN(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)kP.call(e,n)&&!DP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:LP,type:t,key:i,ref:a,props:s,_owner:RP.current}}nw.Fragment=jP;nw.jsx=MN;nw.jsxs=MN;TN.exports=nw;var l=TN.exports,Zy={},HN={exports:{}},hi={},VN={exports:{}},KN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,ce){var ae=z.length;z.push(ce);e:for(;0<ae;){var Ce=ae-1>>>1,P=z[Ce];if(0<s(P,ce))z[Ce]=ce,z[ae]=P,ae=Ce;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var ce=z[0],ae=z.pop();if(ae!==ce){z[0]=ae;e:for(var Ce=0,P=z.length,k=P>>>1;Ce<k;){var W=2*(Ce+1)-1,re=z[W],oe=W+1,Z=z[oe];if(0>s(re,ae))oe<P&&0>s(Z,re)?(z[Ce]=Z,z[oe]=ae,Ce=oe):(z[Ce]=re,z[W]=ae,Ce=W);else if(oe<P&&0>s(Z,ae))z[Ce]=Z,z[oe]=ae,Ce=oe;else break e}}return ce}function s(z,ce){var ae=z.sortIndex-ce.sortIndex;return ae!==0?ae:z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],d=1,f=null,m=3,g=!1,B=!1,C=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(z){for(var ce=r(c);ce!==null;){if(ce.callback===null)n(c);else if(ce.startTime<=z)n(c),ce.sortIndex=ce.expirationTime,e(A,ce);else break;ce=r(c)}}function R(z){if(C=!1,N(z),!B)if(r(A)!==null)B=!0,ne(V);else{var ce=r(c);ce!==null&&se(R,ce.startTime-z)}}function V(z,ce){B=!1,C&&(C=!1,y(_),_=-1),g=!0;var ae=m;try{for(N(ce),f=r(A);f!==null&&(!(f.expirationTime>ce)||z&&!S());){var Ce=f.callback;if(typeof Ce=="function"){f.callback=null,m=f.priorityLevel;var P=Ce(f.expirationTime<=ce);ce=t.unstable_now(),typeof P=="function"?f.callback=P:f===r(A)&&n(A),N(ce)}else n(A);f=r(A)}if(f!==null)var k=!0;else{var W=r(c);W!==null&&se(R,W.startTime-ce),k=!1}return k}finally{f=null,m=ae,g=!1}}var O=!1,T=null,_=-1,L=5,D=-1;function S(){return!(t.unstable_now()-D<L)}function I(){if(T!==null){var z=t.unstable_now();D=z;var ce=!0;try{ce=T(!0,z)}finally{ce?F():(O=!1,T=null)}}else O=!1}var F;if(typeof w=="function")F=function(){w(I)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ue=Y.port2;Y.port1.onmessage=I,F=function(){ue.postMessage(null)}}else F=function(){b(I,0)};function ne(z){T=z,O||(O=!0,F())}function se(z,ce){_=b(function(){z(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){B||g||(B=!0,ne(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var ce=3;break;default:ce=m}var ae=m;m=ce;try{return z()}finally{m=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,ce){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=m;m=z;try{return ce()}finally{m=ae}},t.unstable_scheduleCallback=function(z,ce,ae){var Ce=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ce+ae:Ce):ae=Ce,z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ae+P,z={id:d++,callback:ce,priorityLevel:z,startTime:ae,expirationTime:P,sortIndex:-1},ae>Ce?(z.sortIndex=ae,e(c,z),r(A)===null&&z===r(c)&&(C?(y(_),_=-1):C=!0,se(R,ae-Ce))):(z.sortIndex=P,e(A,z),B||g||(B=!0,ne(V))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var ce=m;return function(){var ae=m;m=ce;try{return z.apply(this,arguments)}finally{m=ae}}}})(KN);VN.exports=KN;var OP=VN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=j,li=OP;function Ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qN=new Set,Pf={};function Dc(t,e){gd(t,e),gd(t+"Capture",e)}function gd(t,e){for(Pf[t]=e,t=0;t<e.length;t++)qN.add(e[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e1=Object.prototype.hasOwnProperty,HP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YB={},ZB={};function VP(t){return e1.call(ZB,t)?!0:e1.call(YB,t)?!1:HP.test(t)?ZB[t]=!0:(YB[t]=!0,!1)}function KP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qP(t,e,r,n){if(e===null||typeof e>"u"||KP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ls(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var os={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){os[t]=new Ls(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];os[e]=new Ls(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){os[t]=new Ls(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){os[t]=new Ls(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){os[t]=new Ls(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){os[t]=new Ls(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){os[t]=new Ls(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){os[t]=new Ls(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){os[t]=new Ls(t,5,!1,t.toLowerCase(),null,!1,!1)});var ux=/[\-:]([a-z])/g;function dx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ux,dx);os[e]=new Ls(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ux,dx);os[e]=new Ls(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ux,dx);os[e]=new Ls(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){os[t]=new Ls(t,1,!1,t.toLowerCase(),null,!1,!1)});os.xlinkHref=new Ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){os[t]=new Ls(t,1,!1,t.toLowerCase(),null,!0,!0)});function hx(t,e,r,n){var s=os.hasOwnProperty(e)?os[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qP(e,r,s,n)&&(r=null),n||s===null?VP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Vo=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wm=Symbol.for("react.element"),Gu=Symbol.for("react.portal"),zu=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),t1=Symbol.for("react.profiler"),GN=Symbol.for("react.provider"),zN=Symbol.for("react.context"),px=Symbol.for("react.forward_ref"),r1=Symbol.for("react.suspense"),n1=Symbol.for("react.suspense_list"),mx=Symbol.for("react.memo"),SA=Symbol.for("react.lazy"),$N=Symbol.for("react.offscreen"),eC=Symbol.iterator;function gh(t){return t===null||typeof t!="object"?null:(t=eC&&t[eC]||t["@@iterator"],typeof t=="function"?t:null)}var nn=Object.assign,Pv;function Vh(t){if(Pv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Pv=e&&e[1]||""}return`
`+Pv+t}var Qv=!1;function Lv(t,e){if(!t||Qv)return"";Qv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{Qv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Vh(t):""}function GP(t){switch(t.tag){case 5:return Vh(t.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return t=Lv(t.type,!1),t;case 11:return t=Lv(t.type.render,!1),t;case 1:return t=Lv(t.type,!0),t;default:return""}}function s1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zu:return"Fragment";case Gu:return"Portal";case t1:return"Profiler";case fx:return"StrictMode";case r1:return"Suspense";case n1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zN:return(t.displayName||"Context")+".Consumer";case GN:return(t._context.displayName||"Context")+".Provider";case px:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mx:return e=t.displayName||null,e!==null?e:s1(t.type)||"Memo";case SA:e=t._payload,t=t._init;try{return s1(t(e))}catch{}}return null}function zP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return s1(e);case 8:return e===fx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $P(t){var e=WN(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vm(t){t._valueTracker||(t._valueTracker=$P(t))}function XN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=WN(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Yg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function i1(t,e){var r=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function tC(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JN(t,e){e=e.checked,e!=null&&hx(t,"checked",e,!1)}function a1(t,e){JN(t,e);var r=cl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?o1(t,e.type,r):e.hasOwnProperty("defaultValue")&&o1(t,e.type,cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function o1(t,e,r){(e!=="number"||Yg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Kh=Array.isArray;function ad(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function A1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ze(92));if(Kh(r)){if(1<r.length)throw Error(Ze(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cl(r)}}function YN(t,e){var r=cl(e.value),n=cl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function sC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ym,eI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ym=ym||document.createElement("div"),ym.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ym.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WP=["Webkit","ms","Moz","O"];Object.keys(of).forEach(function(t){WP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),of[e]=of[t]})});function tI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||of.hasOwnProperty(t)&&of[t]?(""+e).trim():e+"px"}function rI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=tI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var XP=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function c1(t,e){if(e){if(XP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function u1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var d1=null;function gx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var h1=null,od=null,Ad=null;function iC(t){if(t=Bp(t)){if(typeof h1!="function")throw Error(Ze(280));var e=t.stateNode;e&&(e=Aw(e),h1(t.stateNode,t.type,e))}}function nI(t){od?Ad?Ad.push(t):Ad=[t]:od=t}function sI(){if(od){var t=od,e=Ad;if(Ad=od=null,iC(t),e)for(t=0;t<e.length;t++)iC(e[t])}}function iI(t,e){return t(e)}function aI(){}var jv=!1;function oI(t,e,r){if(jv)return t(e,r);jv=!0;try{return iI(t,e,r)}finally{jv=!1,(od!==null||Ad!==null)&&(aI(),sI())}}function Lf(t,e){var r=t.stateNode;if(r===null)return null;var n=Aw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ze(231,e,typeof r));return r}var f1=!1;if(Qo)try{var wh={};Object.defineProperty(wh,"passive",{get:function(){f1=!0}}),window.addEventListener("test",wh,wh),window.removeEventListener("test",wh,wh)}catch{f1=!1}function JP(t,e,r,n,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Af=!1,Zg=null,e0=!1,p1=null,YP={onError:function(t){Af=!0,Zg=t}};function ZP(t,e,r,n,s,i,a,o,A){Af=!1,Zg=null,JP.apply(YP,arguments)}function eQ(t,e,r,n,s,i,a,o,A){if(ZP.apply(this,arguments),Af){if(Af){var c=Zg;Af=!1,Zg=null}else throw Error(Ze(198));e0||(e0=!0,p1=c)}}function Oc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function AI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function aC(t){if(Oc(t)!==t)throw Error(Ze(188))}function tQ(t){var e=t.alternate;if(!e){if(e=Oc(t),e===null)throw Error(Ze(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return aC(s),t;if(i===n)return aC(s),e;i=i.sibling}throw Error(Ze(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(Ze(189))}}if(r.alternate!==n)throw Error(Ze(190))}if(r.tag!==3)throw Error(Ze(188));return r.stateNode.current===r?t:e}function lI(t){return t=tQ(t),t!==null?cI(t):null}function cI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cI(t);if(e!==null)return e;t=t.sibling}return null}var uI=li.unstable_scheduleCallback,oC=li.unstable_cancelCallback,rQ=li.unstable_shouldYield,nQ=li.unstable_requestPaint,mn=li.unstable_now,sQ=li.unstable_getCurrentPriorityLevel,wx=li.unstable_ImmediatePriority,dI=li.unstable_UserBlockingPriority,t0=li.unstable_NormalPriority,iQ=li.unstable_LowPriority,hI=li.unstable_IdlePriority,sw=null,ja=null;function aQ(t){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(sw,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:lQ,oQ=Math.log,AQ=Math.LN2;function lQ(t){return t>>>=0,t===0?32:31-(oQ(t)/AQ|0)|0}var xm=64,bm=4194304;function qh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function r0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=qh(o):(i&=a,i!==0&&(n=qh(i)))}else a=r&~s,a!==0?n=qh(a):i!==0&&(n=qh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ra(e),s=1<<r,n|=t[r],e&=~s;return n}function cQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ra(i),o=1<<a,A=s[a];A===-1?(!(o&r)||o&n)&&(s[a]=cQ(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function m1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fI(){var t=xm;return xm<<=1,!(xm&4194240)&&(xm=64),t}function kv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=r}function dQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ra(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function vx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ra(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var _r=0;function pI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mI,yx,gI,wI,vI,g1=!1,Bm=[],$A=null,WA=null,XA=null,jf=new Map,kf=new Map,UA=[],hQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AC(t,e){switch(t){case"focusin":case"focusout":$A=null;break;case"dragenter":case"dragleave":WA=null;break;case"mouseover":case"mouseout":XA=null;break;case"pointerover":case"pointerout":jf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kf.delete(e.pointerId)}}function vh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Bp(e),e!==null&&yx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fQ(t,e,r,n,s){switch(e){case"focusin":return $A=vh($A,t,e,r,n,s),!0;case"dragenter":return WA=vh(WA,t,e,r,n,s),!0;case"mouseover":return XA=vh(XA,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return jf.set(i,vh(jf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,kf.set(i,vh(kf.get(i)||null,t,e,r,n,s)),!0}return!1}function yI(t){var e=cc(t.target);if(e!==null){var r=Oc(e);if(r!==null){if(e=r.tag,e===13){if(e=AI(r),e!==null){t.blockedOn=e,vI(t.priority,function(){gI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=w1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);d1=n,r.target.dispatchEvent(n),d1=null}else return e=Bp(r),e!==null&&yx(e),t.blockedOn=r,!1;e.shift()}return!0}function lC(t,e,r){Bg(t)&&r.delete(e)}function pQ(){g1=!1,$A!==null&&Bg($A)&&($A=null),WA!==null&&Bg(WA)&&(WA=null),XA!==null&&Bg(XA)&&(XA=null),jf.forEach(lC),kf.forEach(lC)}function yh(t,e){t.blockedOn===e&&(t.blockedOn=null,g1||(g1=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,pQ)))}function Rf(t){function e(s){return yh(s,t)}if(0<Bm.length){yh(Bm[0],t);for(var r=1;r<Bm.length;r++){var n=Bm[r];n.blockedOn===t&&(n.blockedOn=null)}}for($A!==null&&yh($A,t),WA!==null&&yh(WA,t),XA!==null&&yh(XA,t),jf.forEach(e),kf.forEach(e),r=0;r<UA.length;r++)n=UA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<UA.length&&(r=UA[0],r.blockedOn===null);)yI(r),r.blockedOn===null&&UA.shift()}var ld=Vo.ReactCurrentBatchConfig,n0=!0;function mQ(t,e,r,n){var s=_r,i=ld.transition;ld.transition=null;try{_r=1,xx(t,e,r,n)}finally{_r=s,ld.transition=i}}function gQ(t,e,r,n){var s=_r,i=ld.transition;ld.transition=null;try{_r=4,xx(t,e,r,n)}finally{_r=s,ld.transition=i}}function xx(t,e,r,n){if(n0){var s=w1(t,e,r,n);if(s===null)zv(t,e,n,s0,r),AC(t,n);else if(fQ(s,t,e,r,n))n.stopPropagation();else if(AC(t,n),e&4&&-1<hQ.indexOf(t)){for(;s!==null;){var i=Bp(s);if(i!==null&&mI(i),i=w1(t,e,r,n),i===null&&zv(t,e,n,s0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zv(t,e,n,null,r)}}var s0=null;function w1(t,e,r,n){if(s0=null,t=gx(n),t=cc(t),t!==null)if(e=Oc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=AI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return s0=t,null}function xI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sQ()){case wx:return 1;case dI:return 4;case t0:case iQ:return 16;case hI:return 536870912;default:return 16}default:return 16}}var MA=null,bx=null,Cg=null;function bI(){if(Cg)return Cg;var t,e=bx,r=e.length,n,s="value"in MA?MA.value:MA.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Cg=s.slice(t,1<n?1-n:void 0)}function Eg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cm(){return!0}function cC(){return!1}function fi(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cm:cC,this.isPropagationStopped=cC,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cm)},persist:function(){},isPersistent:Cm}),e}var jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bx=fi(jd),bp=nn({},jd,{view:0,detail:0}),wQ=fi(bp),Rv,Dv,xh,iw=nn({},bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xh&&(xh&&t.type==="mousemove"?(Rv=t.screenX-xh.screenX,Dv=t.screenY-xh.screenY):Dv=Rv=0,xh=t),Rv)},movementY:function(t){return"movementY"in t?t.movementY:Dv}}),uC=fi(iw),vQ=nn({},iw,{dataTransfer:0}),yQ=fi(vQ),xQ=nn({},bp,{relatedTarget:0}),Ov=fi(xQ),bQ=nn({},jd,{animationName:0,elapsedTime:0,pseudoElement:0}),BQ=fi(bQ),CQ=nn({},jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EQ=fi(CQ),_Q=nn({},jd,{data:0}),dC=fi(_Q),NQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SQ[t])?!!e[t]:!1}function Cx(){return FQ}var TQ=nn({},bp,{key:function(t){if(t.key){var e=NQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cx,charCode:function(t){return t.type==="keypress"?Eg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UQ=fi(TQ),PQ=nn({},iw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hC=fi(PQ),QQ=nn({},bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cx}),LQ=fi(QQ),jQ=nn({},jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),kQ=fi(jQ),RQ=nn({},iw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DQ=fi(RQ),OQ=[9,13,27,32],Ex=Qo&&"CompositionEvent"in window,lf=null;Qo&&"documentMode"in document&&(lf=document.documentMode);var MQ=Qo&&"TextEvent"in window&&!lf,BI=Qo&&(!Ex||lf&&8<lf&&11>=lf),fC=" ",pC=!1;function CI(t,e){switch(t){case"keyup":return OQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $u=!1;function HQ(t,e){switch(t){case"compositionend":return EI(e);case"keypress":return e.which!==32?null:(pC=!0,fC);case"textInput":return t=e.data,t===fC&&pC?null:t;default:return null}}function VQ(t,e){if($u)return t==="compositionend"||!Ex&&CI(t,e)?(t=bI(),Cg=bx=MA=null,$u=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BI&&e.locale!=="ko"?null:e.data;default:return null}}var KQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KQ[t.type]:e==="textarea"}function _I(t,e,r,n){nI(n),e=i0(e,"onChange"),0<e.length&&(r=new Bx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var cf=null,Df=null;function qQ(t){kI(t,0)}function aw(t){var e=Ju(t);if(XN(e))return t}function GQ(t,e){if(t==="change")return e}var NI=!1;if(Qo){var Mv;if(Qo){var Hv="oninput"in document;if(!Hv){var gC=document.createElement("div");gC.setAttribute("oninput","return;"),Hv=typeof gC.oninput=="function"}Mv=Hv}else Mv=!1;NI=Mv&&(!document.documentMode||9<document.documentMode)}function wC(){cf&&(cf.detachEvent("onpropertychange",II),Df=cf=null)}function II(t){if(t.propertyName==="value"&&aw(Df)){var e=[];_I(e,Df,t,gx(t)),oI(qQ,e)}}function zQ(t,e,r){t==="focusin"?(wC(),cf=e,Df=r,cf.attachEvent("onpropertychange",II)):t==="focusout"&&wC()}function $Q(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aw(Df)}function WQ(t,e){if(t==="click")return aw(e)}function XQ(t,e){if(t==="input"||t==="change")return aw(e)}function JQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ia=typeof Object.is=="function"?Object.is:JQ;function Of(t,e){if(ia(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!e1.call(e,s)||!ia(t[s],e[s]))return!1}return!0}function vC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yC(t,e){var r=vC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vC(r)}}function SI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FI(){for(var t=window,e=Yg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Yg(t.document)}return e}function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YQ(t){var e=FI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&SI(r.ownerDocument.documentElement,r)){if(n!==null&&_x(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=yC(r,i);var a=yC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZQ=Qo&&"documentMode"in document&&11>=document.documentMode,Wu=null,v1=null,uf=null,y1=!1;function xC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;y1||Wu==null||Wu!==Yg(n)||(n=Wu,"selectionStart"in n&&_x(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),uf&&Of(uf,n)||(uf=n,n=i0(v1,"onSelect"),0<n.length&&(e=new Bx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Wu)))}function Em(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Xu={animationend:Em("Animation","AnimationEnd"),animationiteration:Em("Animation","AnimationIteration"),animationstart:Em("Animation","AnimationStart"),transitionend:Em("Transition","TransitionEnd")},Vv={},TI={};Qo&&(TI=document.createElement("div").style,"AnimationEvent"in window||(delete Xu.animationend.animation,delete Xu.animationiteration.animation,delete Xu.animationstart.animation),"TransitionEvent"in window||delete Xu.transitionend.transition);function ow(t){if(Vv[t])return Vv[t];if(!Xu[t])return t;var e=Xu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in TI)return Vv[t]=e[r];return t}var UI=ow("animationend"),PI=ow("animationiteration"),QI=ow("animationstart"),LI=ow("transitionend"),jI=new Map,bC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(t,e){jI.set(t,e),Dc(e,[t])}for(var Kv=0;Kv<bC.length;Kv++){var qv=bC[Kv],eL=qv.toLowerCase(),tL=qv[0].toUpperCase()+qv.slice(1);xl(eL,"on"+tL)}xl(UI,"onAnimationEnd");xl(PI,"onAnimationIteration");xl(QI,"onAnimationStart");xl("dblclick","onDoubleClick");xl("focusin","onFocus");xl("focusout","onBlur");xl(LI,"onTransitionEnd");gd("onMouseEnter",["mouseout","mouseover"]);gd("onMouseLeave",["mouseout","mouseover"]);gd("onPointerEnter",["pointerout","pointerover"]);gd("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));function BC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,eQ(n,e,void 0,t),t.currentTarget=null}function kI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;BC(s,o,c),i=A}else for(a=0;a<n.length;a++){if(o=n[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;BC(s,o,c),i=A}}}if(e0)throw t=p1,e0=!1,p1=null,t}function Mr(t,e){var r=e[E1];r===void 0&&(r=e[E1]=new Set);var n=t+"__bubble";r.has(n)||(RI(e,t,2,!1),r.add(n))}function Gv(t,e,r){var n=0;e&&(n|=4),RI(r,t,n,e)}var _m="_reactListening"+Math.random().toString(36).slice(2);function Mf(t){if(!t[_m]){t[_m]=!0,qN.forEach(function(r){r!=="selectionchange"&&(rL.has(r)||Gv(r,!1,t),Gv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_m]||(e[_m]=!0,Gv("selectionchange",!1,e))}}function RI(t,e,r,n){switch(xI(e)){case 1:var s=mQ;break;case 4:s=gQ;break;default:s=xx}r=s.bind(null,e,r,t),s=void 0,!f1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function zv(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=cc(o),a===null)return;if(A=a.tag,A===5||A===6){n=i=a;continue e}o=o.parentNode}}n=n.return}oI(function(){var c=i,d=gx(r),f=[];e:{var m=jI.get(t);if(m!==void 0){var g=Bx,B=t;switch(t){case"keypress":if(Eg(r)===0)break e;case"keydown":case"keyup":g=UQ;break;case"focusin":B="focus",g=Ov;break;case"focusout":B="blur",g=Ov;break;case"beforeblur":case"afterblur":g=Ov;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=uC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=LQ;break;case UI:case PI:case QI:g=BQ;break;case LI:g=kQ;break;case"scroll":g=wQ;break;case"wheel":g=DQ;break;case"copy":case"cut":case"paste":g=EQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hC}var C=(e&4)!==0,b=!C&&t==="scroll",y=C?m!==null?m+"Capture":null:m;C=[];for(var w=c,N;w!==null;){N=w;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,y!==null&&(R=Lf(w,y),R!=null&&C.push(Hf(w,R,N)))),b)break;w=w.return}0<C.length&&(m=new g(m,B,null,r,d),f.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==d1&&(B=r.relatedTarget||r.fromElement)&&(cc(B)||B[Lo]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(B=r.relatedTarget||r.toElement,g=c,B=B?cc(B):null,B!==null&&(b=Oc(B),B!==b||B.tag!==5&&B.tag!==6)&&(B=null)):(g=null,B=c),g!==B)){if(C=uC,R="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=hC,R="onPointerLeave",y="onPointerEnter",w="pointer"),b=g==null?m:Ju(g),N=B==null?m:Ju(B),m=new C(R,w+"leave",g,r,d),m.target=b,m.relatedTarget=N,R=null,cc(d)===c&&(C=new C(y,w+"enter",B,r,d),C.target=N,C.relatedTarget=b,R=C),b=R,g&&B)t:{for(C=g,y=B,w=0,N=C;N;N=wu(N))w++;for(N=0,R=y;R;R=wu(R))N++;for(;0<w-N;)C=wu(C),w--;for(;0<N-w;)y=wu(y),N--;for(;w--;){if(C===y||y!==null&&C===y.alternate)break t;C=wu(C),y=wu(y)}C=null}else C=null;g!==null&&CC(f,m,g,C,!1),B!==null&&b!==null&&CC(f,b,B,C,!0)}}e:{if(m=c?Ju(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var V=GQ;else if(mC(m))if(NI)V=XQ;else{V=$Q;var O=zQ}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=WQ);if(V&&(V=V(t,c))){_I(f,V,r,d);break e}O&&O(t,m,c),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&o1(m,"number",m.value)}switch(O=c?Ju(c):window,t){case"focusin":(mC(O)||O.contentEditable==="true")&&(Wu=O,v1=c,uf=null);break;case"focusout":uf=v1=Wu=null;break;case"mousedown":y1=!0;break;case"contextmenu":case"mouseup":case"dragend":y1=!1,xC(f,r,d);break;case"selectionchange":if(ZQ)break;case"keydown":case"keyup":xC(f,r,d)}var T;if(Ex)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else $u?CI(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(BI&&r.locale!=="ko"&&($u||_!=="onCompositionStart"?_==="onCompositionEnd"&&$u&&(T=bI()):(MA=d,bx="value"in MA?MA.value:MA.textContent,$u=!0)),O=i0(c,_),0<O.length&&(_=new dC(_,t,null,r,d),f.push({event:_,listeners:O}),T?_.data=T:(T=EI(r),T!==null&&(_.data=T)))),(T=MQ?HQ(t,r):VQ(t,r))&&(c=i0(c,"onBeforeInput"),0<c.length&&(d=new dC("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=T))}kI(f,e)})}function Hf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function i0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Lf(t,r),i!=null&&n.unshift(Hf(t,i,s)),i=Lf(t,e),i!=null&&n.push(Hf(t,i,s))),t=t.return}return n}function wu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,A=o.alternate,c=o.stateNode;if(A!==null&&A===n)break;o.tag===5&&c!==null&&(o=c,s?(A=Lf(r,i),A!=null&&a.unshift(Hf(r,A,o))):s||(A=Lf(r,i),A!=null&&a.push(Hf(r,A,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var nL=/\r\n?/g,sL=/\u0000|\uFFFD/g;function EC(t){return(typeof t=="string"?t:""+t).replace(nL,`
`).replace(sL,"")}function Nm(t,e,r){if(e=EC(e),EC(t)!==e&&r)throw Error(Ze(425))}function a0(){}var x1=null,b1=null;function B1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C1=typeof setTimeout=="function"?setTimeout:void 0,iL=typeof clearTimeout=="function"?clearTimeout:void 0,_C=typeof Promise=="function"?Promise:void 0,aL=typeof queueMicrotask=="function"?queueMicrotask:typeof _C<"u"?function(t){return _C.resolve(null).then(t).catch(oL)}:C1;function oL(t){setTimeout(function(){throw t})}function $v(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Rf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Rf(e)}function JA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kd=Math.random().toString(36).slice(2),Ta="__reactFiber$"+kd,Vf="__reactProps$"+kd,Lo="__reactContainer$"+kd,E1="__reactEvents$"+kd,AL="__reactListeners$"+kd,lL="__reactHandles$"+kd;function cc(t){var e=t[Ta];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lo]||r[Ta]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=NC(t);t!==null;){if(r=t[Ta])return r;t=NC(t)}return e}t=r,r=t.parentNode}return null}function Bp(t){return t=t[Ta]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ju(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ze(33))}function Aw(t){return t[Vf]||null}var _1=[],Yu=-1;function bl(t){return{current:t}}function Kr(t){0>Yu||(t.current=_1[Yu],_1[Yu]=null,Yu--)}function Rr(t,e){Yu++,_1[Yu]=t.current,t.current=e}var ul={},bs=bl(ul),zs=bl(!1),Ec=ul;function wd(t,e){var r=t.type.contextTypes;if(!r)return ul;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $s(t){return t=t.childContextTypes,t!=null}function o0(){Kr(zs),Kr(bs)}function IC(t,e,r){if(bs.current!==ul)throw Error(Ze(168));Rr(bs,e),Rr(zs,r)}function DI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Ze(108,zP(t)||"Unknown",s));return nn({},r,n)}function A0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ul,Ec=bs.current,Rr(bs,t),Rr(zs,zs.current),!0}function SC(t,e,r){var n=t.stateNode;if(!n)throw Error(Ze(169));r?(t=DI(t,e,Ec),n.__reactInternalMemoizedMergedChildContext=t,Kr(zs),Kr(bs),Rr(bs,t)):Kr(zs),Rr(zs,r)}var vo=null,lw=!1,Wv=!1;function OI(t){vo===null?vo=[t]:vo.push(t)}function cL(t){lw=!0,OI(t)}function Bl(){if(!Wv&&vo!==null){Wv=!0;var t=0,e=_r;try{var r=vo;for(_r=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vo=null,lw=!1}catch(s){throw vo!==null&&(vo=vo.slice(t+1)),uI(wx,Bl),s}finally{_r=e,Wv=!1}}return null}var Zu=[],ed=0,l0=null,c0=0,_i=[],Ni=0,_c=null,yo=1,xo="";function Zl(t,e){Zu[ed++]=c0,Zu[ed++]=l0,l0=t,c0=e}function MI(t,e,r){_i[Ni++]=yo,_i[Ni++]=xo,_i[Ni++]=_c,_c=t;var n=yo;t=xo;var s=32-ra(n)-1;n&=~(1<<s),r+=1;var i=32-ra(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,yo=1<<32-ra(e)+s|r<<s|n,xo=i+t}else yo=1<<i|r<<s|n,xo=t}function Nx(t){t.return!==null&&(Zl(t,1),MI(t,1,0))}function Ix(t){for(;t===l0;)l0=Zu[--ed],Zu[ed]=null,c0=Zu[--ed],Zu[ed]=null;for(;t===_c;)_c=_i[--Ni],_i[Ni]=null,xo=_i[--Ni],_i[Ni]=null,yo=_i[--Ni],_i[Ni]=null}var Ai=null,ii=null,$r=!1,ta=null;function HI(t,e){var r=Si(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function FC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,ii=JA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=_c!==null?{id:yo,overflow:xo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Si(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ai=t,ii=null,!0):!1;default:return!1}}function N1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function I1(t){if($r){var e=ii;if(e){var r=e;if(!FC(t,e)){if(N1(t))throw Error(Ze(418));e=JA(r.nextSibling);var n=Ai;e&&FC(t,e)?HI(n,r):(t.flags=t.flags&-4097|2,$r=!1,Ai=t)}}else{if(N1(t))throw Error(Ze(418));t.flags=t.flags&-4097|2,$r=!1,Ai=t}}}function TC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function Im(t){if(t!==Ai)return!1;if(!$r)return TC(t),$r=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!B1(t.type,t.memoizedProps)),e&&(e=ii)){if(N1(t))throw VI(),Error(Ze(418));for(;e;)HI(t,e),e=JA(e.nextSibling)}if(TC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ii=JA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=Ai?JA(t.stateNode.nextSibling):null;return!0}function VI(){for(var t=ii;t;)t=JA(t.nextSibling)}function vd(){ii=Ai=null,$r=!1}function Sx(t){ta===null?ta=[t]:ta.push(t)}var uL=Vo.ReactCurrentBatchConfig;function bh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ze(309));var n=r.stateNode}if(!n)throw Error(Ze(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ze(284));if(!r._owner)throw Error(Ze(290,t))}return t}function Sm(t,e){throw t=Object.prototype.toString.call(e),Error(Ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UC(t){var e=t._init;return e(t._payload)}function KI(t){function e(y,w){if(t){var N=y.deletions;N===null?(y.deletions=[w],y.flags|=16):N.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=tl(y,w),y.index=0,y.sibling=null,y}function i(y,w,N){return y.index=N,t?(N=y.alternate,N!==null?(N=N.index,N<w?(y.flags|=2,w):N):(y.flags|=2,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,w,N,R){return w===null||w.tag!==6?(w=ry(N,y.mode,R),w.return=y,w):(w=s(w,N),w.return=y,w)}function A(y,w,N,R){var V=N.type;return V===zu?d(y,w,N.props.children,R,N.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===SA&&UC(V)===w.type)?(R=s(w,N.props),R.ref=bh(y,w,N),R.return=y,R):(R=Ug(N.type,N.key,N.props,null,y.mode,R),R.ref=bh(y,w,N),R.return=y,R)}function c(y,w,N,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=ny(N,y.mode,R),w.return=y,w):(w=s(w,N.children||[]),w.return=y,w)}function d(y,w,N,R,V){return w===null||w.tag!==7?(w=gc(N,y.mode,R,V),w.return=y,w):(w=s(w,N),w.return=y,w)}function f(y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ry(""+w,y.mode,N),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wm:return N=Ug(w.type,w.key,w.props,null,y.mode,N),N.ref=bh(y,null,w),N.return=y,N;case Gu:return w=ny(w,y.mode,N),w.return=y,w;case SA:var R=w._init;return f(y,R(w._payload),N)}if(Kh(w)||gh(w))return w=gc(w,y.mode,N,null),w.return=y,w;Sm(y,w)}return null}function m(y,w,N,R){var V=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:o(y,w,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case wm:return N.key===V?A(y,w,N,R):null;case Gu:return N.key===V?c(y,w,N,R):null;case SA:return V=N._init,m(y,w,V(N._payload),R)}if(Kh(N)||gh(N))return V!==null?null:d(y,w,N,R,null);Sm(y,N)}return null}function g(y,w,N,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(N)||null,o(w,y,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case wm:return y=y.get(R.key===null?N:R.key)||null,A(w,y,R,V);case Gu:return y=y.get(R.key===null?N:R.key)||null,c(w,y,R,V);case SA:var O=R._init;return g(y,w,N,O(R._payload),V)}if(Kh(R)||gh(R))return y=y.get(N)||null,d(w,y,R,V,null);Sm(w,R)}return null}function B(y,w,N,R){for(var V=null,O=null,T=w,_=w=0,L=null;T!==null&&_<N.length;_++){T.index>_?(L=T,T=null):L=T.sibling;var D=m(y,T,N[_],R);if(D===null){T===null&&(T=L);break}t&&T&&D.alternate===null&&e(y,T),w=i(D,w,_),O===null?V=D:O.sibling=D,O=D,T=L}if(_===N.length)return r(y,T),$r&&Zl(y,_),V;if(T===null){for(;_<N.length;_++)T=f(y,N[_],R),T!==null&&(w=i(T,w,_),O===null?V=T:O.sibling=T,O=T);return $r&&Zl(y,_),V}for(T=n(y,T);_<N.length;_++)L=g(T,y,_,N[_],R),L!==null&&(t&&L.alternate!==null&&T.delete(L.key===null?_:L.key),w=i(L,w,_),O===null?V=L:O.sibling=L,O=L);return t&&T.forEach(function(S){return e(y,S)}),$r&&Zl(y,_),V}function C(y,w,N,R){var V=gh(N);if(typeof V!="function")throw Error(Ze(150));if(N=V.call(N),N==null)throw Error(Ze(151));for(var O=V=null,T=w,_=w=0,L=null,D=N.next();T!==null&&!D.done;_++,D=N.next()){T.index>_?(L=T,T=null):L=T.sibling;var S=m(y,T,D.value,R);if(S===null){T===null&&(T=L);break}t&&T&&S.alternate===null&&e(y,T),w=i(S,w,_),O===null?V=S:O.sibling=S,O=S,T=L}if(D.done)return r(y,T),$r&&Zl(y,_),V;if(T===null){for(;!D.done;_++,D=N.next())D=f(y,D.value,R),D!==null&&(w=i(D,w,_),O===null?V=D:O.sibling=D,O=D);return $r&&Zl(y,_),V}for(T=n(y,T);!D.done;_++,D=N.next())D=g(T,y,_,D.value,R),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?_:D.key),w=i(D,w,_),O===null?V=D:O.sibling=D,O=D);return t&&T.forEach(function(I){return e(y,I)}),$r&&Zl(y,_),V}function b(y,w,N,R){if(typeof N=="object"&&N!==null&&N.type===zu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case wm:e:{for(var V=N.key,O=w;O!==null;){if(O.key===V){if(V=N.type,V===zu){if(O.tag===7){r(y,O.sibling),w=s(O,N.props.children),w.return=y,y=w;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===SA&&UC(V)===O.type){r(y,O.sibling),w=s(O,N.props),w.ref=bh(y,O,N),w.return=y,y=w;break e}r(y,O);break}else e(y,O);O=O.sibling}N.type===zu?(w=gc(N.props.children,y.mode,R,N.key),w.return=y,y=w):(R=Ug(N.type,N.key,N.props,null,y.mode,R),R.ref=bh(y,w,N),R.return=y,y=R)}return a(y);case Gu:e:{for(O=N.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){r(y,w.sibling),w=s(w,N.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=ny(N,y.mode,R),w.return=y,y=w}return a(y);case SA:return O=N._init,b(y,w,O(N._payload),R)}if(Kh(N))return B(y,w,N,R);if(gh(N))return C(y,w,N,R);Sm(y,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(r(y,w.sibling),w=s(w,N),w.return=y,y=w):(r(y,w),w=ry(N,y.mode,R),w.return=y,y=w),a(y)):r(y,w)}return b}var yd=KI(!0),qI=KI(!1),u0=bl(null),d0=null,td=null,Fx=null;function Tx(){Fx=td=d0=null}function Ux(t){var e=u0.current;Kr(u0),t._currentValue=e}function S1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function cd(t,e){d0=t,Fx=td=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qs=!0),t.firstContext=null)}function Li(t){var e=t._currentValue;if(Fx!==t)if(t={context:t,memoizedValue:e,next:null},td===null){if(d0===null)throw Error(Ze(308));td=t,d0.dependencies={lanes:0,firstContext:t}}else td=td.next=t;return e}var uc=null;function Px(t){uc===null?uc=[t]:uc.push(t)}function GI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Px(e)):(r.next=s.next,s.next=r),e.interleaved=r,jo(t,n)}function jo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var FA=!1;function Qx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function No(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function YA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,cr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,jo(t,r)}return s=n.interleaved,s===null?(e.next=e,Px(n)):(e.next=s.next,s.next=e),n.interleaved=e,jo(t,r)}function _g(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vx(t,r)}}function PC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function h0(t,e,r,n){var s=t.updateQueue;FA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=A))}if(i!==null){var f=s.baseState;a=0,d=c=A=null,o=i;do{var m=o.lane,g=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var B=t,C=o;switch(m=e,g=r,C.tag){case 1:if(B=C.payload,typeof B=="function"){f=B.call(g,f,m);break e}f=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=C.payload,m=typeof B=="function"?B.call(g,f,m):B,m==null)break e;f=nn({},f,m);break e;case 2:FA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=g,A=f):d=d.next=g,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(A=f),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ic|=a,t.lanes=a,t.memoizedState=f}}function QC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Ze(191,s));s.call(n)}}}var Cp={},ka=bl(Cp),Kf=bl(Cp),qf=bl(Cp);function dc(t){if(t===Cp)throw Error(Ze(174));return t}function Lx(t,e){switch(Rr(qf,e),Rr(Kf,t),Rr(ka,Cp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:l1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=l1(e,t)}Kr(ka),Rr(ka,e)}function xd(){Kr(ka),Kr(Kf),Kr(qf)}function $I(t){dc(qf.current);var e=dc(ka.current),r=l1(e,t.type);e!==r&&(Rr(Kf,t),Rr(ka,r))}function jx(t){Kf.current===t&&(Kr(ka),Kr(Kf))}var tn=bl(0);function f0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xv=[];function kx(){for(var t=0;t<Xv.length;t++)Xv[t]._workInProgressVersionPrimary=null;Xv.length=0}var Ng=Vo.ReactCurrentDispatcher,Jv=Vo.ReactCurrentBatchConfig,Nc=0,rn=null,Sn=null,Mn=null,p0=!1,df=!1,Gf=0,dL=0;function us(){throw Error(Ze(321))}function Rx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ia(t[r],e[r]))return!1;return!0}function Dx(t,e,r,n,s,i){if(Nc=i,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ng.current=t===null||t.memoizedState===null?mL:gL,t=r(n,s),df){i=0;do{if(df=!1,Gf=0,25<=i)throw Error(Ze(301));i+=1,Mn=Sn=null,e.updateQueue=null,Ng.current=wL,t=r(n,s)}while(df)}if(Ng.current=m0,e=Sn!==null&&Sn.next!==null,Nc=0,Mn=Sn=rn=null,p0=!1,e)throw Error(Ze(300));return t}function Ox(){var t=Gf!==0;return Gf=0,t}function Fa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?rn.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function ji(){if(Sn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=Sn.next;var e=Mn===null?rn.memoizedState:Mn.next;if(e!==null)Mn=e,Sn=t;else{if(t===null)throw Error(Ze(310));Sn=t,t={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Mn===null?rn.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function zf(t,e){return typeof e=="function"?e(t):e}function Yv(t){var e=ji(),r=e.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=t;var n=Sn,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,A=null,c=i;do{var d=c.lane;if((Nc&d)===d)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=f,a=n):A=A.next=f,rn.lanes|=d,Ic|=d}c=c.next}while(c!==null&&c!==i);A===null?a=n:A.next=o,ia(n,e.memoizedState)||(qs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,rn.lanes|=i,Ic|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Zv(t){var e=ji(),r=e.queue;if(r===null)throw Error(Ze(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ia(i,e.memoizedState)||(qs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function WI(){}function XI(t,e){var r=rn,n=ji(),s=e(),i=!ia(n.memoizedState,s);if(i&&(n.memoizedState=s,qs=!0),n=n.queue,Mx(ZI.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Mn!==null&&Mn.memoizedState.tag&1){if(r.flags|=2048,$f(9,YI.bind(null,r,n,s,e),void 0,null),Hn===null)throw Error(Ze(349));Nc&30||JI(r,e,s)}return s}function JI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function YI(t,e,r,n){e.value=r,e.getSnapshot=n,eS(e)&&tS(t)}function ZI(t,e,r){return r(function(){eS(e)&&tS(t)})}function eS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ia(t,r)}catch{return!0}}function tS(t){var e=jo(t,1);e!==null&&na(e,t,1,-1)}function LC(t){var e=Fa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zf,lastRenderedState:t},e.queue=t,t=t.dispatch=pL.bind(null,rn,t),[e.memoizedState,t]}function $f(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function rS(){return ji().memoizedState}function Ig(t,e,r,n){var s=Fa();rn.flags|=t,s.memoizedState=$f(1|e,r,void 0,n===void 0?null:n)}function cw(t,e,r,n){var s=ji();n=n===void 0?null:n;var i=void 0;if(Sn!==null){var a=Sn.memoizedState;if(i=a.destroy,n!==null&&Rx(n,a.deps)){s.memoizedState=$f(e,r,i,n);return}}rn.flags|=t,s.memoizedState=$f(1|e,r,i,n)}function jC(t,e){return Ig(8390656,8,t,e)}function Mx(t,e){return cw(2048,8,t,e)}function nS(t,e){return cw(4,2,t,e)}function sS(t,e){return cw(4,4,t,e)}function iS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aS(t,e,r){return r=r!=null?r.concat([t]):null,cw(4,4,iS.bind(null,e,t),r)}function Hx(){}function oS(t,e){var r=ji();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function AS(t,e){var r=ji();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function lS(t,e,r){return Nc&21?(ia(r,e)||(r=fI(),rn.lanes|=r,Ic|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qs=!0),t.memoizedState=r)}function hL(t,e){var r=_r;_r=r!==0&&4>r?r:4,t(!0);var n=Jv.transition;Jv.transition={};try{t(!1),e()}finally{_r=r,Jv.transition=n}}function cS(){return ji().memoizedState}function fL(t,e,r){var n=el(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},uS(t))dS(e,r);else if(r=GI(t,e,r,n),r!==null){var s=Us();na(r,t,n,s),hS(r,e,n)}}function pL(t,e,r){var n=el(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(uS(t))dS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,ia(o,a)){var A=e.interleaved;A===null?(s.next=s,Px(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=GI(t,e,s,n),r!==null&&(s=Us(),na(r,t,n,s),hS(r,e,n))}}function uS(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function dS(t,e){df=p0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function hS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,vx(t,r)}}var m0={readContext:Li,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},mL={readContext:Li,useCallback:function(t,e){return Fa().memoizedState=[t,e===void 0?null:e],t},useContext:Li,useEffect:jC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ig(4194308,4,iS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ig(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ig(4,2,t,e)},useMemo:function(t,e){var r=Fa();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Fa();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=fL.bind(null,rn,t),[n.memoizedState,t]},useRef:function(t){var e=Fa();return t={current:t},e.memoizedState=t},useState:LC,useDebugValue:Hx,useDeferredValue:function(t){return Fa().memoizedState=t},useTransition:function(){var t=LC(!1),e=t[0];return t=hL.bind(null,t[1]),Fa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=rn,s=Fa();if($r){if(r===void 0)throw Error(Ze(407));r=r()}else{if(r=e(),Hn===null)throw Error(Ze(349));Nc&30||JI(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,jC(ZI.bind(null,n,i,t),[t]),n.flags|=2048,$f(9,YI.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Fa(),e=Hn.identifierPrefix;if($r){var r=xo,n=yo;r=(n&~(1<<32-ra(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=dL++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gL={readContext:Li,useCallback:oS,useContext:Li,useEffect:Mx,useImperativeHandle:aS,useInsertionEffect:nS,useLayoutEffect:sS,useMemo:AS,useReducer:Yv,useRef:rS,useState:function(){return Yv(zf)},useDebugValue:Hx,useDeferredValue:function(t){var e=ji();return lS(e,Sn.memoizedState,t)},useTransition:function(){var t=Yv(zf)[0],e=ji().memoizedState;return[t,e]},useMutableSource:WI,useSyncExternalStore:XI,useId:cS,unstable_isNewReconciler:!1},wL={readContext:Li,useCallback:oS,useContext:Li,useEffect:Mx,useImperativeHandle:aS,useInsertionEffect:nS,useLayoutEffect:sS,useMemo:AS,useReducer:Zv,useRef:rS,useState:function(){return Zv(zf)},useDebugValue:Hx,useDeferredValue:function(t){var e=ji();return Sn===null?e.memoizedState=t:lS(e,Sn.memoizedState,t)},useTransition:function(){var t=Zv(zf)[0],e=ji().memoizedState;return[t,e]},useMutableSource:WI,useSyncExternalStore:XI,useId:cS,unstable_isNewReconciler:!1};function Yi(t,e){if(t&&t.defaultProps){e=nn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function F1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:nn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uw={isMounted:function(t){return(t=t._reactInternals)?Oc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Us(),s=el(t),i=No(n,s);i.payload=e,r!=null&&(i.callback=r),e=YA(t,i,s),e!==null&&(na(e,t,s,n),_g(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Us(),s=el(t),i=No(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=YA(t,i,s),e!==null&&(na(e,t,s,n),_g(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Us(),n=el(t),s=No(r,n);s.tag=2,e!=null&&(s.callback=e),e=YA(t,s,n),e!==null&&(na(e,t,n,r),_g(e,t,n))}};function kC(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Of(r,n)||!Of(s,i):!0}function fS(t,e,r){var n=!1,s=ul,i=e.contextType;return typeof i=="object"&&i!==null?i=Li(i):(s=$s(e)?Ec:bs.current,n=e.contextTypes,i=(n=n!=null)?wd(t,s):ul),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function RC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uw.enqueueReplaceState(e,e.state,null)}function T1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Qx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Li(i):(i=$s(e)?Ec:bs.current,s.context=wd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(F1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uw.enqueueReplaceState(s,s.state,null),h0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e){try{var r="",n=e;do r+=GP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ey(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function U1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var vL=typeof WeakMap=="function"?WeakMap:Map;function pS(t,e,r){r=No(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){w0||(w0=!0,H1=n),U1(t,e)},r}function mS(t,e,r){r=No(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){U1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){U1(t,e),typeof n!="function"&&(ZA===null?ZA=new Set([this]):ZA.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function DC(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new vL;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=PL.bind(null,t,e,r),e.then(t,t))}function OC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MC(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=No(-1,1),e.tag=2,YA(r,e,1))),r.lanes|=1),t)}var yL=Vo.ReactCurrentOwner,qs=!1;function Ss(t,e,r,n){e.child=t===null?qI(e,null,r,n):yd(e,t.child,r,n)}function HC(t,e,r,n,s){r=r.render;var i=e.ref;return cd(e,s),n=Dx(t,e,r,n,i,s),r=Ox(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ko(t,e,s)):($r&&r&&Nx(e),e.flags|=1,Ss(t,e,n,s),e.child)}function VC(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Xx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,gS(t,e,i,n,s)):(t=Ug(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Of,r(a,n)&&t.ref===e.ref)return ko(t,e,s)}return e.flags|=1,t=tl(i,n),t.ref=e.ref,t.return=e,e.child=t}function gS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Of(i,n)&&t.ref===e.ref)if(qs=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(qs=!0);else return e.lanes=t.lanes,ko(t,e,s)}return P1(t,e,r,n,s)}function wS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(nd,si),si|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rr(nd,si),si|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Rr(nd,si),si|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Rr(nd,si),si|=n;return Ss(t,e,s,r),e.child}function vS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function P1(t,e,r,n,s){var i=$s(r)?Ec:bs.current;return i=wd(e,i),cd(e,s),r=Dx(t,e,r,n,i,s),n=Ox(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ko(t,e,s)):($r&&n&&Nx(e),e.flags|=1,Ss(t,e,r,s),e.child)}function KC(t,e,r,n,s){if($s(r)){var i=!0;A0(e)}else i=!1;if(cd(e,s),e.stateNode===null)Sg(t,e),fS(e,r,n),T1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Li(c):(c=$s(r)?Ec:bs.current,c=wd(e,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||A!==c)&&RC(e,a,n,c),FA=!1;var m=e.memoizedState;a.state=m,h0(e,n,a,s),A=e.memoizedState,o!==n||m!==A||zs.current||FA?(typeof d=="function"&&(F1(e,r,d,n),A=e.memoizedState),(o=FA||kC(e,r,o,n,m,A,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),a.props=n,a.state=A,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,zI(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Yi(e.type,o),a.props=c,f=e.pendingProps,m=a.context,A=r.contextType,typeof A=="object"&&A!==null?A=Li(A):(A=$s(r)?Ec:bs.current,A=wd(e,A));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||m!==A)&&RC(e,a,n,A),FA=!1,m=e.memoizedState,a.state=m,h0(e,n,a,s);var B=e.memoizedState;o!==f||m!==B||zs.current||FA?(typeof g=="function"&&(F1(e,r,g,n),B=e.memoizedState),(c=FA||kC(e,r,c,n,m,B,A)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,B,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,B,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=B),a.props=n,a.state=B,a.context=A,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Q1(t,e,r,n,i,s)}function Q1(t,e,r,n,s,i){vS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&SC(e,r,!1),ko(t,e,i);n=e.stateNode,yL.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=yd(e,t.child,null,i),e.child=yd(e,null,o,i)):Ss(t,e,o,i),e.memoizedState=n.state,s&&SC(e,r,!0),e.child}function yS(t){var e=t.stateNode;e.pendingContext?IC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IC(t,e.context,!1),Lx(t,e.containerInfo)}function qC(t,e,r,n,s){return vd(),Sx(s),e.flags|=256,Ss(t,e,r,n),e.child}var L1={dehydrated:null,treeContext:null,retryLane:0};function j1(t){return{baseLanes:t,cachePool:null,transitions:null}}function xS(t,e,r){var n=e.pendingProps,s=tn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rr(tn,s&1),t===null)return I1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=fw(a,n,0,null),t=gc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=j1(r),e.memoizedState=L1,t):Vx(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return xL(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=tl(s,A),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=tl(o,i):(i=gc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?j1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=L1,n}return i=t.child,t=i.sibling,n=tl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Vx(t,e){return e=fw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fm(t,e,r,n){return n!==null&&Sx(n),yd(e,t.child,null,r),t=Vx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xL(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=ey(Error(Ze(422))),Fm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=fw({mode:"visible",children:n.children},s,0,null),i=gc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&yd(e,t.child,null,a),e.child.memoizedState=j1(a),e.memoizedState=L1,i);if(!(e.mode&1))return Fm(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Ze(419)),n=ey(i,n,void 0),Fm(t,e,a,n)}if(o=(a&t.childLanes)!==0,qs||o){if(n=Hn,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jo(t,s),na(n,t,s,-1))}return Wx(),n=ey(Error(Ze(421))),Fm(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QL.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ii=JA(s.nextSibling),Ai=e,$r=!0,ta=null,t!==null&&(_i[Ni++]=yo,_i[Ni++]=xo,_i[Ni++]=_c,yo=t.id,xo=t.overflow,_c=e),e=Vx(e,n.children),e.flags|=4096,e)}function GC(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),S1(t.return,e,r)}function ty(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function bS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ss(t,e,n.children,r),n=tn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GC(t,r,e);else if(t.tag===19)GC(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rr(tn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&f0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ty(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&f0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}ty(e,!0,r,null,i);break;case"together":ty(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ko(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ic|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ze(153));if(e.child!==null){for(t=e.child,r=tl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=tl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function bL(t,e,r){switch(e.tag){case 3:yS(e),vd();break;case 5:$I(e);break;case 1:$s(e.type)&&A0(e);break;case 4:Lx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Rr(u0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rr(tn,tn.current&1),e.flags|=128,null):r&e.child.childLanes?xS(t,e,r):(Rr(tn,tn.current&1),t=ko(t,e,r),t!==null?t.sibling:null);Rr(tn,tn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return bS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rr(tn,tn.current),n)break;return null;case 22:case 23:return e.lanes=0,wS(t,e,r)}return ko(t,e,r)}var BS,k1,CS,ES;BS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};k1=function(){};CS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,dc(ka.current);var i=null;switch(r){case"input":s=i1(t,s),n=i1(t,n),i=[];break;case"select":s=nn({},s,{value:void 0}),n=nn({},n,{value:void 0}),i=[];break;case"textarea":s=A1(t,s),n=A1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=a0)}c1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var A=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(r||(r={}),r[a]=A[a])}else r||(i||(i=[]),i.push(c,r)),r=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pf.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&Mr("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ES=function(t,e,r,n){r!==n&&(e.flags|=4)};function Bh(t,e){if(!$r)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ds(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function BL(t,e,r){var n=e.pendingProps;switch(Ix(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(e),null;case 1:return $s(e.type)&&o0(),ds(e),null;case 3:return n=e.stateNode,xd(),Kr(zs),Kr(bs),kx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Im(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ta!==null&&(q1(ta),ta=null))),k1(t,e),ds(e),null;case 5:jx(e);var s=dc(qf.current);if(r=e.type,t!==null&&e.stateNode!=null)CS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ze(166));return ds(e),null}if(t=dc(ka.current),Im(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Ta]=e,n[Vf]=i,t=(e.mode&1)!==0,r){case"dialog":Mr("cancel",n),Mr("close",n);break;case"iframe":case"object":case"embed":Mr("load",n);break;case"video":case"audio":for(s=0;s<Gh.length;s++)Mr(Gh[s],n);break;case"source":Mr("error",n);break;case"img":case"image":case"link":Mr("error",n),Mr("load",n);break;case"details":Mr("toggle",n);break;case"input":tC(n,i),Mr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",n);break;case"textarea":nC(n,i),Mr("invalid",n)}c1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Nm(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Nm(n.textContent,o,t),s=["children",""+o]):Pf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Mr("scroll",n)}switch(r){case"input":vm(n),rC(n,i,!0);break;case"textarea":vm(n),sC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=a0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZN(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Ta]=e,t[Vf]=n,BS(t,e,!1,!1),e.stateNode=t;e:{switch(a=u1(r,n),r){case"dialog":Mr("cancel",t),Mr("close",t),s=n;break;case"iframe":case"object":case"embed":Mr("load",t),s=n;break;case"video":case"audio":for(s=0;s<Gh.length;s++)Mr(Gh[s],t);s=n;break;case"source":Mr("error",t),s=n;break;case"img":case"image":case"link":Mr("error",t),Mr("load",t),s=n;break;case"details":Mr("toggle",t),s=n;break;case"input":tC(t,n),s=i1(t,n),Mr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=nn({},n,{value:void 0}),Mr("invalid",t);break;case"textarea":nC(t,n),s=A1(t,n),Mr("invalid",t);break;default:s=n}c1(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?rI(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&eI(t,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Qf(t,A):typeof A=="number"&&Qf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pf.hasOwnProperty(i)?A!=null&&i==="onScroll"&&Mr("scroll",t):A!=null&&hx(t,i,A,a))}switch(r){case"input":vm(t),rC(t,n,!1);break;case"textarea":vm(t),sC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ad(t,!!n.multiple,i,!1):n.defaultValue!=null&&ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=a0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ds(e),null;case 6:if(t&&e.stateNode!=null)ES(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ze(166));if(r=dc(qf.current),dc(ka.current),Im(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ta]=e,(i=n.nodeValue!==r)&&(t=Ai,t!==null))switch(t.tag){case 3:Nm(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nm(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ta]=e,e.stateNode=n}return ds(e),null;case 13:if(Kr(tn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($r&&ii!==null&&e.mode&1&&!(e.flags&128))VI(),vd(),e.flags|=98560,i=!1;else if(i=Im(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ze(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ze(317));i[Ta]=e}else vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ds(e),i=!1}else ta!==null&&(q1(ta),ta=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||tn.current&1?Un===0&&(Un=3):Wx())),e.updateQueue!==null&&(e.flags|=4),ds(e),null);case 4:return xd(),k1(t,e),t===null&&Mf(e.stateNode.containerInfo),ds(e),null;case 10:return Ux(e.type._context),ds(e),null;case 17:return $s(e.type)&&o0(),ds(e),null;case 19:if(Kr(tn),i=e.memoizedState,i===null)return ds(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Bh(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=f0(t),a!==null){for(e.flags|=128,Bh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rr(tn,tn.current&1|2),e.child}t=t.sibling}i.tail!==null&&mn()>Bd&&(e.flags|=128,n=!0,Bh(i,!1),e.lanes=4194304)}else{if(!n)if(t=f0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Bh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!$r)return ds(e),null}else 2*mn()-i.renderingStartTime>Bd&&r!==1073741824&&(e.flags|=128,n=!0,Bh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mn(),e.sibling=null,r=tn.current,Rr(tn,n?r&1|2:r&1),e):(ds(e),null);case 22:case 23:return $x(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?si&1073741824&&(ds(e),e.subtreeFlags&6&&(e.flags|=8192)):ds(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function CL(t,e){switch(Ix(e),e.tag){case 1:return $s(e.type)&&o0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xd(),Kr(zs),Kr(bs),kx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jx(e),null;case 13:if(Kr(tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kr(tn),null;case 4:return xd(),null;case 10:return Ux(e.type._context),null;case 22:case 23:return $x(),null;case 24:return null;default:return null}}var Tm=!1,ys=!1,EL=typeof WeakSet=="function"?WeakSet:Set,yt=null;function rd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){An(t,e,n)}else r.current=null}function R1(t,e,r){try{r()}catch(n){An(t,e,n)}}var zC=!1;function _L(t,e){if(x1=n0,t=FI(),_x(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,A=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(A=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===r&&++c===s&&(o=a),m===i&&++d===n&&(A=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}r=o===-1||A===-1?null:{start:o,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(b1={focusedElem:t,selectionRange:r},n0=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){e=yt;try{var B=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var C=B.memoizedProps,b=B.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:Yi(e.type,C),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(R){An(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}return B=zC,zC=!1,B}function hf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&R1(e,r,i)}s=s.next}while(s!==n)}}function dw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function D1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function _S(t){var e=t.alternate;e!==null&&(t.alternate=null,_S(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ta],delete e[Vf],delete e[E1],delete e[AL],delete e[lL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function $C(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=a0));else if(n!==4&&(t=t.child,t!==null))for(O1(t,e,r),t=t.sibling;t!==null;)O1(t,e,r),t=t.sibling}function M1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(M1(t,e,r),t=t.sibling;t!==null;)M1(t,e,r),t=t.sibling}var Yn=null,ea=!1;function yA(t,e,r){for(r=r.child;r!==null;)IS(t,e,r),r=r.sibling}function IS(t,e,r){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(sw,r)}catch{}switch(r.tag){case 5:ys||rd(r,e);case 6:var n=Yn,s=ea;Yn=null,yA(t,e,r),Yn=n,ea=s,Yn!==null&&(ea?(t=Yn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Yn.removeChild(r.stateNode));break;case 18:Yn!==null&&(ea?(t=Yn,r=r.stateNode,t.nodeType===8?$v(t.parentNode,r):t.nodeType===1&&$v(t,r),Rf(t)):$v(Yn,r.stateNode));break;case 4:n=Yn,s=ea,Yn=r.stateNode.containerInfo,ea=!0,yA(t,e,r),Yn=n,ea=s;break;case 0:case 11:case 14:case 15:if(!ys&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&R1(r,e,a),s=s.next}while(s!==n)}yA(t,e,r);break;case 1:if(!ys&&(rd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){An(r,e,o)}yA(t,e,r);break;case 21:yA(t,e,r);break;case 22:r.mode&1?(ys=(n=ys)||r.memoizedState!==null,yA(t,e,r),ys=n):yA(t,e,r);break;default:yA(t,e,r)}}function WC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new EL),e.forEach(function(n){var s=LL.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Yn=o.stateNode,ea=!1;break e;case 3:Yn=o.stateNode.containerInfo,ea=!0;break e;case 4:Yn=o.stateNode.containerInfo,ea=!0;break e}o=o.return}if(Yn===null)throw Error(Ze(160));IS(i,a,s),Yn=null,ea=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){An(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SS(e,t),e=e.sibling}function SS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),Na(t),n&4){try{hf(3,t,t.return),dw(3,t)}catch(C){An(t,t.return,C)}try{hf(5,t,t.return)}catch(C){An(t,t.return,C)}}break;case 1:zi(e,t),Na(t),n&512&&r!==null&&rd(r,r.return);break;case 5:if(zi(e,t),Na(t),n&512&&r!==null&&rd(r,r.return),t.flags&32){var s=t.stateNode;try{Qf(s,"")}catch(C){An(t,t.return,C)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&JN(s,i),u1(o,a);var c=u1(o,i);for(a=0;a<A.length;a+=2){var d=A[a],f=A[a+1];d==="style"?rI(s,f):d==="dangerouslySetInnerHTML"?eI(s,f):d==="children"?Qf(s,f):hx(s,d,f,c)}switch(o){case"input":a1(s,i);break;case"textarea":YN(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ad(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?ad(s,!!i.multiple,i.defaultValue,!0):ad(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vf]=i}catch(C){An(t,t.return,C)}}break;case 6:if(zi(e,t),Na(t),n&4){if(t.stateNode===null)throw Error(Ze(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){An(t,t.return,C)}}break;case 3:if(zi(e,t),Na(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rf(e.containerInfo)}catch(C){An(t,t.return,C)}break;case 4:zi(e,t),Na(t);break;case 13:zi(e,t),Na(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gx=mn())),n&4&&WC(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ys=(c=ys)||d,zi(e,t),ys=c):zi(e,t),Na(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(yt=t,d=t.child;d!==null;){for(f=yt=d;yt!==null;){switch(m=yt,g=m.child,m.tag){case 0:case 11:case 14:case 15:hf(4,m,m.return);break;case 1:rd(m,m.return);var B=m.stateNode;if(typeof B.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,B.props=e.memoizedProps,B.state=e.memoizedState,B.componentWillUnmount()}catch(C){An(n,r,C)}}break;case 5:rd(m,m.return);break;case 22:if(m.memoizedState!==null){JC(f);continue}}g!==null?(g.return=m,yt=g):JC(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,A=f.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=tI("display",a))}catch(C){An(t,t.return,C)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(C){An(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zi(e,t),Na(t),n&4&&WC(t);break;case 21:break;default:zi(e,t),Na(t)}}function Na(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(NS(r)){var n=r;break e}r=r.return}throw Error(Ze(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Qf(s,""),n.flags&=-33);var i=$C(t);M1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=$C(t);O1(t,o,a);break;default:throw Error(Ze(161))}}catch(A){An(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NL(t,e,r){yt=t,FS(t)}function FS(t,e,r){for(var n=(t.mode&1)!==0;yt!==null;){var s=yt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Tm;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||ys;o=Tm;var c=ys;if(Tm=a,(ys=A)&&!c)for(yt=s;yt!==null;)a=yt,A=a.child,a.tag===22&&a.memoizedState!==null?YC(s):A!==null?(A.return=a,yt=A):YC(s);for(;i!==null;)yt=i,FS(i),i=i.sibling;yt=s,Tm=o,ys=c}XC(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,yt=i):XC(t)}}function XC(t){for(;yt!==null;){var e=yt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ys||dw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ys)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Yi(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&QC(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}QC(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Rf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}ys||e.flags&512&&D1(e)}catch(m){An(e,e.return,m)}}if(e===t){yt=null;break}if(r=e.sibling,r!==null){r.return=e.return,yt=r;break}yt=e.return}}function JC(t){for(;yt!==null;){var e=yt;if(e===t){yt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,yt=r;break}yt=e.return}}function YC(t){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{dw(4,e)}catch(A){An(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){An(e,s,A)}}var i=e.return;try{D1(e)}catch(A){An(e,i,A)}break;case 5:var a=e.return;try{D1(e)}catch(A){An(e,a,A)}}}catch(A){An(e,e.return,A)}if(e===t){yt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,yt=o;break}yt=e.return}}var IL=Math.ceil,g0=Vo.ReactCurrentDispatcher,Kx=Vo.ReactCurrentOwner,Pi=Vo.ReactCurrentBatchConfig,cr=0,Hn=null,En=null,as=0,si=0,nd=bl(0),Un=0,Wf=null,Ic=0,hw=0,qx=0,ff=null,Ks=null,Gx=0,Bd=1/0,wo=null,w0=!1,H1=null,ZA=null,Um=!1,HA=null,v0=0,pf=0,V1=null,Fg=-1,Tg=0;function Us(){return cr&6?mn():Fg!==-1?Fg:Fg=mn()}function el(t){return t.mode&1?cr&2&&as!==0?as&-as:uL.transition!==null?(Tg===0&&(Tg=fI()),Tg):(t=_r,t!==0||(t=window.event,t=t===void 0?16:xI(t.type)),t):1}function na(t,e,r,n){if(50<pf)throw pf=0,V1=null,Error(Ze(185));xp(t,r,n),(!(cr&2)||t!==Hn)&&(t===Hn&&(!(cr&2)&&(hw|=r),Un===4&&PA(t,as)),Ws(t,n),r===1&&cr===0&&!(e.mode&1)&&(Bd=mn()+500,lw&&Bl()))}function Ws(t,e){var r=t.callbackNode;uQ(t,e);var n=r0(t,t===Hn?as:0);if(n===0)r!==null&&oC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&oC(r),e===1)t.tag===0?cL(ZC.bind(null,t)):OI(ZC.bind(null,t)),aL(function(){!(cr&6)&&Bl()}),r=null;else{switch(pI(n)){case 1:r=wx;break;case 4:r=dI;break;case 16:r=t0;break;case 536870912:r=hI;break;default:r=t0}r=RS(r,TS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function TS(t,e){if(Fg=-1,Tg=0,cr&6)throw Error(Ze(327));var r=t.callbackNode;if(ud()&&t.callbackNode!==r)return null;var n=r0(t,t===Hn?as:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=y0(t,n);else{e=n;var s=cr;cr|=2;var i=PS();(Hn!==t||as!==e)&&(wo=null,Bd=mn()+500,mc(t,e));do try{TL();break}catch(o){US(t,o)}while(!0);Tx(),g0.current=i,cr=s,En!==null?e=0:(Hn=null,as=0,e=Un)}if(e!==0){if(e===2&&(s=m1(t),s!==0&&(n=s,e=K1(t,s))),e===1)throw r=Wf,mc(t,0),PA(t,n),Ws(t,mn()),r;if(e===6)PA(t,n);else{if(s=t.current.alternate,!(n&30)&&!SL(s)&&(e=y0(t,n),e===2&&(i=m1(t),i!==0&&(n=i,e=K1(t,i))),e===1))throw r=Wf,mc(t,0),PA(t,n),Ws(t,mn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Ze(345));case 2:ec(t,Ks,wo);break;case 3:if(PA(t,n),(n&130023424)===n&&(e=Gx+500-mn(),10<e)){if(r0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Us(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=C1(ec.bind(null,t,Ks,wo),e);break}ec(t,Ks,wo);break;case 4:if(PA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-ra(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*IL(n/1960))-n,10<n){t.timeoutHandle=C1(ec.bind(null,t,Ks,wo),n);break}ec(t,Ks,wo);break;case 5:ec(t,Ks,wo);break;default:throw Error(Ze(329))}}}return Ws(t,mn()),t.callbackNode===r?TS.bind(null,t):null}function K1(t,e){var r=ff;return t.current.memoizedState.isDehydrated&&(mc(t,e).flags|=256),t=y0(t,e),t!==2&&(e=Ks,Ks=r,e!==null&&q1(e)),t}function q1(t){Ks===null?Ks=t:Ks.push.apply(Ks,t)}function SL(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ia(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function PA(t,e){for(e&=~qx,e&=~hw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ra(e),n=1<<r;t[r]=-1,e&=~n}}function ZC(t){if(cr&6)throw Error(Ze(327));ud();var e=r0(t,0);if(!(e&1))return Ws(t,mn()),null;var r=y0(t,e);if(t.tag!==0&&r===2){var n=m1(t);n!==0&&(e=n,r=K1(t,n))}if(r===1)throw r=Wf,mc(t,0),PA(t,e),Ws(t,mn()),r;if(r===6)throw Error(Ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ec(t,Ks,wo),Ws(t,mn()),null}function zx(t,e){var r=cr;cr|=1;try{return t(e)}finally{cr=r,cr===0&&(Bd=mn()+500,lw&&Bl())}}function Sc(t){HA!==null&&HA.tag===0&&!(cr&6)&&ud();var e=cr;cr|=1;var r=Pi.transition,n=_r;try{if(Pi.transition=null,_r=1,t)return t()}finally{_r=n,Pi.transition=r,cr=e,!(cr&6)&&Bl()}}function $x(){si=nd.current,Kr(nd)}function mc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,iL(r)),En!==null)for(r=En.return;r!==null;){var n=r;switch(Ix(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&o0();break;case 3:xd(),Kr(zs),Kr(bs),kx();break;case 5:jx(n);break;case 4:xd();break;case 13:Kr(tn);break;case 19:Kr(tn);break;case 10:Ux(n.type._context);break;case 22:case 23:$x()}r=r.return}if(Hn=t,En=t=tl(t.current,null),as=si=e,Un=0,Wf=null,qx=hw=Ic=0,Ks=ff=null,uc!==null){for(e=0;e<uc.length;e++)if(r=uc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}uc=null}return t}function US(t,e){do{var r=En;try{if(Tx(),Ng.current=m0,p0){for(var n=rn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}p0=!1}if(Nc=0,Mn=Sn=rn=null,df=!1,Gf=0,Kx.current=null,r===null||r.return===null){Un=1,Wf=e,En=null;break}e:{var i=t,a=r.return,o=r,A=e;if(e=as,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=OC(a);if(g!==null){g.flags&=-257,MC(g,a,o,i,e),g.mode&1&&DC(i,c,e),e=g,A=c;var B=e.updateQueue;if(B===null){var C=new Set;C.add(A),e.updateQueue=C}else B.add(A);break e}else{if(!(e&1)){DC(i,c,e),Wx();break e}A=Error(Ze(426))}}else if($r&&o.mode&1){var b=OC(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),MC(b,a,o,i,e),Sx(bd(A,o));break e}}i=A=bd(A,o),Un!==4&&(Un=2),ff===null?ff=[i]:ff.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=pS(i,A,e);PC(i,y);break e;case 1:o=A;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ZA===null||!ZA.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=mS(i,o,e);PC(i,R);break e}}i=i.return}while(i!==null)}LS(r)}catch(V){e=V,En===r&&r!==null&&(En=r=r.return);continue}break}while(!0)}function PS(){var t=g0.current;return g0.current=m0,t===null?m0:t}function Wx(){(Un===0||Un===3||Un===2)&&(Un=4),Hn===null||!(Ic&268435455)&&!(hw&268435455)||PA(Hn,as)}function y0(t,e){var r=cr;cr|=2;var n=PS();(Hn!==t||as!==e)&&(wo=null,mc(t,e));do try{FL();break}catch(s){US(t,s)}while(!0);if(Tx(),cr=r,g0.current=n,En!==null)throw Error(Ze(261));return Hn=null,as=0,Un}function FL(){for(;En!==null;)QS(En)}function TL(){for(;En!==null&&!rQ();)QS(En)}function QS(t){var e=kS(t.alternate,t,si);t.memoizedProps=t.pendingProps,e===null?LS(t):En=e,Kx.current=null}function LS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=CL(r,e),r!==null){r.flags&=32767,En=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,En=null;return}}else if(r=BL(r,e,si),r!==null){En=r;return}if(e=e.sibling,e!==null){En=e;return}En=e=t}while(e!==null);Un===0&&(Un=5)}function ec(t,e,r){var n=_r,s=Pi.transition;try{Pi.transition=null,_r=1,UL(t,e,r,n)}finally{Pi.transition=s,_r=n}return null}function UL(t,e,r,n){do ud();while(HA!==null);if(cr&6)throw Error(Ze(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ze(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(dQ(t,i),t===Hn&&(En=Hn=null,as=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Um||(Um=!0,RS(t0,function(){return ud(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Pi.transition,Pi.transition=null;var a=_r;_r=1;var o=cr;cr|=4,Kx.current=null,_L(t,r),SS(r,t),YQ(b1),n0=!!x1,b1=x1=null,t.current=r,NL(r),nQ(),cr=o,_r=a,Pi.transition=i}else t.current=r;if(Um&&(Um=!1,HA=t,v0=s),i=t.pendingLanes,i===0&&(ZA=null),aQ(r.stateNode),Ws(t,mn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(w0)throw w0=!1,t=H1,H1=null,t;return v0&1&&t.tag!==0&&ud(),i=t.pendingLanes,i&1?t===V1?pf++:(pf=0,V1=t):pf=0,Bl(),null}function ud(){if(HA!==null){var t=pI(v0),e=Pi.transition,r=_r;try{if(Pi.transition=null,_r=16>t?16:t,HA===null)var n=!1;else{if(t=HA,HA=null,v0=0,cr&6)throw Error(Ze(331));var s=cr;for(cr|=4,yt=t.current;yt!==null;){var i=yt,a=i.child;if(yt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(yt=c;yt!==null;){var d=yt;switch(d.tag){case 0:case 11:case 15:hf(8,d,i)}var f=d.child;if(f!==null)f.return=d,yt=f;else for(;yt!==null;){d=yt;var m=d.sibling,g=d.return;if(_S(d),d===c){yt=null;break}if(m!==null){m.return=g,yt=m;break}yt=g}}}var B=i.alternate;if(B!==null){var C=B.child;if(C!==null){B.child=null;do{var b=C.sibling;C.sibling=null,C=b}while(C!==null)}}yt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,yt=a;else e:for(;yt!==null;){if(i=yt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,yt=y;break e}yt=i.return}}var w=t.current;for(yt=w;yt!==null;){a=yt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,yt=N;else e:for(a=w;yt!==null;){if(o=yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:dw(9,o)}}catch(V){An(o,o.return,V)}if(o===a){yt=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,yt=R;break e}yt=o.return}}if(cr=s,Bl(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(sw,t)}catch{}n=!0}return n}finally{_r=r,Pi.transition=e}}return!1}function e5(t,e,r){e=bd(r,e),e=pS(t,e,1),t=YA(t,e,1),e=Us(),t!==null&&(xp(t,1,e),Ws(t,e))}function An(t,e,r){if(t.tag===3)e5(t,t,r);else for(;e!==null;){if(e.tag===3){e5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ZA===null||!ZA.has(n))){t=bd(r,t),t=mS(e,t,1),e=YA(e,t,1),t=Us(),e!==null&&(xp(e,1,t),Ws(e,t));break}}e=e.return}}function PL(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Us(),t.pingedLanes|=t.suspendedLanes&r,Hn===t&&(as&r)===r&&(Un===4||Un===3&&(as&130023424)===as&&500>mn()-Gx?mc(t,0):qx|=r),Ws(t,e)}function jS(t,e){e===0&&(t.mode&1?(e=bm,bm<<=1,!(bm&130023424)&&(bm=4194304)):e=1);var r=Us();t=jo(t,e),t!==null&&(xp(t,e,r),Ws(t,r))}function QL(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),jS(t,r)}function LL(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ze(314))}n!==null&&n.delete(e),jS(t,r)}var kS;kS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||zs.current)qs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qs=!1,bL(t,e,r);qs=!!(t.flags&131072)}else qs=!1,$r&&e.flags&1048576&&MI(e,c0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sg(t,e),t=e.pendingProps;var s=wd(e,bs.current);cd(e,r),s=Dx(null,e,n,t,s,r);var i=Ox();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$s(n)?(i=!0,A0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qx(e),s.updater=uw,e.stateNode=s,s._reactInternals=e,T1(e,n,t,r),e=Q1(null,e,n,!0,i,r)):(e.tag=0,$r&&i&&Nx(e),Ss(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=kL(n),t=Yi(n,t),s){case 0:e=P1(null,e,n,t,r);break e;case 1:e=KC(null,e,n,t,r);break e;case 11:e=HC(null,e,n,t,r);break e;case 14:e=VC(null,e,n,Yi(n.type,t),r);break e}throw Error(Ze(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yi(n,s),P1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yi(n,s),KC(t,e,n,s,r);case 3:e:{if(yS(e),t===null)throw Error(Ze(387));n=e.pendingProps,i=e.memoizedState,s=i.element,zI(t,e),h0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bd(Error(Ze(423)),e),e=qC(t,e,n,r,s);break e}else if(n!==s){s=bd(Error(Ze(424)),e),e=qC(t,e,n,r,s);break e}else for(ii=JA(e.stateNode.containerInfo.firstChild),Ai=e,$r=!0,ta=null,r=qI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vd(),n===s){e=ko(t,e,r);break e}Ss(t,e,n,r)}e=e.child}return e;case 5:return $I(e),t===null&&I1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,B1(n,s)?a=null:i!==null&&B1(n,i)&&(e.flags|=32),vS(t,e),Ss(t,e,a,r),e.child;case 6:return t===null&&I1(e),null;case 13:return xS(t,e,r);case 4:return Lx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yd(e,null,n,r):Ss(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yi(n,s),HC(t,e,n,s,r);case 7:return Ss(t,e,e.pendingProps,r),e.child;case 8:return Ss(t,e,e.pendingProps.children,r),e.child;case 12:return Ss(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Rr(u0,n._currentValue),n._currentValue=a,i!==null)if(ia(i.value,a)){if(i.children===s.children&&!zs.current){e=ko(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===n){if(i.tag===1){A=No(-1,r&-r),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?A.next=A:(A.next=d.next,d.next=A),c.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),S1(i.return,r,e),o.lanes|=r;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Ze(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),S1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ss(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,cd(e,r),s=Li(s),n=n(s),e.flags|=1,Ss(t,e,n,r),e.child;case 14:return n=e.type,s=Yi(n,e.pendingProps),s=Yi(n.type,s),VC(t,e,n,s,r);case 15:return gS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yi(n,s),Sg(t,e),e.tag=1,$s(n)?(t=!0,A0(e)):t=!1,cd(e,r),fS(e,n,s),T1(e,n,s,r),Q1(null,e,n,!0,t,r);case 19:return bS(t,e,r);case 22:return wS(t,e,r)}throw Error(Ze(156,e.tag))};function RS(t,e){return uI(t,e)}function jL(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(t,e,r,n){return new jL(t,e,r,n)}function Xx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kL(t){if(typeof t=="function")return Xx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===px)return 11;if(t===mx)return 14}return 2}function tl(t,e){var r=t.alternate;return r===null?(r=Si(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ug(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Xx(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zu:return gc(r.children,s,i,e);case fx:a=8,s|=8;break;case t1:return t=Si(12,r,e,s|2),t.elementType=t1,t.lanes=i,t;case r1:return t=Si(13,r,e,s),t.elementType=r1,t.lanes=i,t;case n1:return t=Si(19,r,e,s),t.elementType=n1,t.lanes=i,t;case $N:return fw(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GN:a=10;break e;case zN:a=9;break e;case px:a=11;break e;case mx:a=14;break e;case SA:a=16,n=null;break e}throw Error(Ze(130,t==null?t:typeof t,""))}return e=Si(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function gc(t,e,r,n){return t=Si(7,t,n,e),t.lanes=r,t}function fw(t,e,r,n){return t=Si(22,t,n,e),t.elementType=$N,t.lanes=r,t.stateNode={isHidden:!1},t}function ry(t,e,r){return t=Si(6,t,null,e),t.lanes=r,t}function ny(t,e,r){return e=Si(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RL(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kv(0),this.expirationTimes=kv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kv(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jx(t,e,r,n,s,i,a,o,A){return t=new RL(t,e,r,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Si(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qx(i),t}function DL(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function DS(t){if(!t)return ul;t=t._reactInternals;e:{if(Oc(t)!==t||t.tag!==1)throw Error(Ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($s(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(t.tag===1){var r=t.type;if($s(r))return DI(t,r,e)}return e}function OS(t,e,r,n,s,i,a,o,A){return t=Jx(r,n,!0,t,s,i,a,o,A),t.context=DS(null),r=t.current,n=Us(),s=el(r),i=No(n,s),i.callback=e??null,YA(r,i,s),t.current.lanes=s,xp(t,s,n),Ws(t,n),t}function pw(t,e,r,n){var s=e.current,i=Us(),a=el(s);return r=DS(r),e.context===null?e.context=r:e.pendingContext=r,e=No(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=YA(s,e,a),t!==null&&(na(t,s,a,i),_g(t,s,a)),a}function x0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Yx(t,e){t5(t,e),(t=t.alternate)&&t5(t,e)}function OL(){return null}var MS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zx(t){this._internalRoot=t}mw.prototype.render=Zx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ze(409));pw(t,e,null,null)};mw.prototype.unmount=Zx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sc(function(){pw(null,t,null,null)}),e[Lo]=null}};function mw(t){this._internalRoot=t}mw.prototype.unstable_scheduleHydration=function(t){if(t){var e=wI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<UA.length&&e!==0&&e<UA[r].priority;r++);UA.splice(r,0,t),r===0&&yI(t)}};function eb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r5(){}function ML(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=x0(a);i.call(c)}}var a=OS(e,n,t,0,null,!1,!1,"",r5);return t._reactRootContainer=a,t[Lo]=a.current,Mf(t.nodeType===8?t.parentNode:t),Sc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=x0(A);o.call(c)}}var A=Jx(t,0,!1,null,null,!1,!1,"",r5);return t._reactRootContainer=A,t[Lo]=A.current,Mf(t.nodeType===8?t.parentNode:t),Sc(function(){pw(e,A,r,n)}),A}function ww(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=x0(a);o.call(A)}}pw(e,a,t,s)}else a=ML(r,e,t,s,n);return x0(a)}mI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=qh(e.pendingLanes);r!==0&&(vx(e,r|1),Ws(e,mn()),!(cr&6)&&(Bd=mn()+500,Bl()))}break;case 13:Sc(function(){var n=jo(t,1);if(n!==null){var s=Us();na(n,t,1,s)}}),Yx(t,1)}};yx=function(t){if(t.tag===13){var e=jo(t,134217728);if(e!==null){var r=Us();na(e,t,134217728,r)}Yx(t,134217728)}};gI=function(t){if(t.tag===13){var e=el(t),r=jo(t,e);if(r!==null){var n=Us();na(r,t,e,n)}Yx(t,e)}};wI=function(){return _r};vI=function(t,e){var r=_r;try{return _r=t,e()}finally{_r=r}};h1=function(t,e,r){switch(e){case"input":if(a1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Aw(n);if(!s)throw Error(Ze(90));XN(n),a1(n,s)}}}break;case"textarea":YN(t,r);break;case"select":e=r.value,e!=null&&ad(t,!!r.multiple,e,!1)}};iI=zx;aI=Sc;var HL={usingClientEntryPoint:!1,Events:[Bp,Ju,Aw,nI,sI,zx]},Ch={findFiberByHostInstance:cc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VL={bundleType:Ch.bundleType,version:Ch.version,rendererPackageName:Ch.rendererPackageName,rendererConfig:Ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lI(t),t===null?null:t.stateNode},findFiberByHostInstance:Ch.findFiberByHostInstance||OL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{sw=Pm.inject(VL),ja=Pm}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HL;hi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eb(e))throw Error(Ze(200));return DL(t,e,null,r)};hi.createRoot=function(t,e){if(!eb(t))throw Error(Ze(299));var r=!1,n="",s=MS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jx(t,1,!1,null,null,r,!1,n,s),t[Lo]=e.current,Mf(t.nodeType===8?t.parentNode:t),new Zx(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ze(188)):(t=Object.keys(t).join(","),Error(Ze(268,t)));return t=lI(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return Sc(t)};hi.hydrate=function(t,e,r){if(!gw(e))throw Error(Ze(200));return ww(null,t,e,!0,r)};hi.hydrateRoot=function(t,e,r){if(!eb(t))throw Error(Ze(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=MS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=OS(e,null,t,1,r??null,s,!1,i,a),t[Lo]=e.current,Mf(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new mw(e)};hi.render=function(t,e,r){if(!gw(e))throw Error(Ze(200));return ww(null,t,e,!1,r)};hi.unmountComponentAtNode=function(t){if(!gw(t))throw Error(Ze(40));return t._reactRootContainer?(Sc(function(){ww(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};hi.unstable_batchedUpdates=zx;hi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!gw(r))throw Error(Ze(200));if(t==null||t._reactInternals===void 0)throw Error(Ze(38));return ww(t,e,r,!1,n)};hi.version="18.3.1-next-f1338f8080-20240426";function HS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HS)}catch(t){console.error(t)}}HS(),HN.exports=hi;var Xf=HN.exports,n5=Xf;Zy.createRoot=n5.createRoot,Zy.hydrateRoot=n5.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var s5="popstate";function KL(t={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return G1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Jf(s)}return GL(e,r,null,t)}function Yr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qL(){return Math.random().toString(36).substring(2,10)}function i5(t,e){return{usr:t.state,key:t.key,idx:e}}function G1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Rd(e):e,state:r,key:e&&e.key||n||qL()}}function Jf({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function GL(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",A=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let b=d(),y=b==null?null:b-c;c=b,A&&A({action:o,location:C.location,delta:y})}function m(b,y){o="PUSH";let w=G1(C.location,b,y);c=d()+1;let N=i5(w,c),R=C.createHref(w);try{a.pushState(N,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(R)}i&&A&&A({action:o,location:C.location,delta:1})}function g(b,y){o="REPLACE";let w=G1(C.location,b,y);c=d();let N=i5(w,c),R=C.createHref(w);a.replaceState(N,"",R),i&&A&&A({action:o,location:C.location,delta:0})}function B(b){return zL(b)}let C={get action(){return o},get location(){return t(s,a)},listen(b){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(s5,f),A=b,()=>{s.removeEventListener(s5,f),A=null}},createHref(b){return e(s,b)},createURL:B,encodeLocation(b){let y=B(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:g,go(b){return a.go(b)}};return C}function zL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Yr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Jf(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function VS(t,e,r="/"){return $L(t,e,r,!1)}function $L(t,e,r,n){let s=typeof e=="string"?Rd(e):e,i=Ro(s.pathname||"/",r);if(i==null)return null;let a=KS(t);WL(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=aj(i);o=sj(a[A],c,n)}return o}function KS(t,e=[],r=[],n="",s=!1){let i=(a,o,A=s,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&A)return;Yr(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Io([n,d.relativePath]),m=r.concat(d);a.children&&a.children.length>0&&(Yr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),KS(a.children,e,m,f,A)),!(a.path==null&&!a.index)&&e.push({path:f,score:rj(f,a.index),routesMeta:m})};return t.forEach((a,o)=>{var A;if(a.path===""||!((A=a.path)!=null&&A.includes("?")))i(a,o);else for(let c of qS(a.path))i(a,o,!0,c)}),e}function qS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=qS(n.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function WL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:nj(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var XL=/^:[\w-]+$/,JL=3,YL=2,ZL=1,ej=10,tj=-2,a5=t=>t==="*";function rj(t,e){let r=t.split("/"),n=r.length;return r.some(a5)&&(n+=tj),e&&(n+=YL),r.filter(s=>!a5(s)).reduce((s,i)=>s+(XL.test(i)?JL:i===""?ZL:ej),n)}function nj(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function sj(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let A=n[o],c=o===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=b0({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},d),m=A.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=b0({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Io([i,f.pathname]),pathnameBase:cj(Io([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Io([i,f.pathnameBase]))}return a}function b0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=ij(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:f},m)=>{if(d==="*"){let B=o[m]||"";a=i.slice(0,i.length-B.length).replace(/(.)\/+$/,"$1")}const g=o[m];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function ij(t,e=!1,r=!0){aa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(n.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function aj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return aa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function oj(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Rd(t):t;return{pathname:r?r.startsWith("/")?r:Aj(r,e):e,search:uj(n),hash:dj(s)}}function Aj(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function sy(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tb(t){let e=lj(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function rb(t,e,r,n=!1){let s;typeof t=="string"?s=Rd(t):(s={...t},Yr(!s.pathname||!s.pathname.includes("?"),sy("?","pathname","search",s)),Yr(!s.pathname||!s.pathname.includes("#"),sy("#","pathname","hash",s)),Yr(!s.search||!s.search.includes("#"),sy("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}o=f>=0?e[f]:"/"}let A=oj(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!A.pathname.endsWith("/")&&(c||d)&&(A.pathname+="/"),A}var Io=t=>t.join("/").replace(/\/\/+/g,"/"),cj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var GS=["POST","PUT","PATCH","DELETE"];new Set(GS);var fj=["GET",...GS];new Set(fj);var Dd=j.createContext(null);Dd.displayName="DataRouter";var vw=j.createContext(null);vw.displayName="DataRouterState";j.createContext(!1);var zS=j.createContext({isTransitioning:!1});zS.displayName="ViewTransition";var pj=j.createContext(new Map);pj.displayName="Fetchers";var mj=j.createContext(null);mj.displayName="Await";var la=j.createContext(null);la.displayName="Navigation";var Ep=j.createContext(null);Ep.displayName="Location";var ca=j.createContext({outlet:null,matches:[],isDataRoute:!1});ca.displayName="Route";var nb=j.createContext(null);nb.displayName="RouteError";function gj(t,{relative:e}={}){Yr(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=j.useContext(la),{hash:s,pathname:i,search:a}=_p(t,{relative:e}),o=i;return r!=="/"&&(o=i==="/"?r:Io([r,i])),n.createHref({pathname:o,search:a,hash:s})}function Od(){return j.useContext(Ep)!=null}function Cl(){return Yr(Od(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Ep).location}var $S="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WS(t){j.useContext(la).static||j.useLayoutEffect(t)}function yw(){let{isDataRoute:t}=j.useContext(ca);return t?Uj():wj()}function wj(){Yr(Od(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Dd),{basename:e,navigator:r}=j.useContext(la),{matches:n}=j.useContext(ca),{pathname:s}=Cl(),i=JSON.stringify(tb(n)),a=j.useRef(!1);return WS(()=>{a.current=!0}),j.useCallback((A,c={})=>{if(aa(a.current,$S),!a.current)return;if(typeof A=="number"){r.go(A);return}let d=rb(A,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Io([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,i,s,t])}var vj=j.createContext(null);function yj(t){let e=j.useContext(ca).outlet;return e&&j.createElement(vj.Provider,{value:t},e)}function _p(t,{relative:e}={}){let{matches:r}=j.useContext(ca),{pathname:n}=Cl(),s=JSON.stringify(tb(r));return j.useMemo(()=>rb(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function xj(t,e){return XS(t,e)}function XS(t,e,r,n){var y;Yr(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(la),{matches:i}=j.useContext(ca),a=i[i.length-1],o=a?a.params:{},A=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";JS(A,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=Cl(),m;if(e){let w=typeof e=="string"?Rd(e):e;Yr(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=f;let g=m.pathname||"/",B=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");B="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let C=VS(t,{pathname:B});aa(d||C!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),aa(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=_j(C&&C.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Io([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Io([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&b?j.createElement(Ep.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function bj(){let t=Tj(),e=hj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:s},r):null,a)}var Bj=j.createElement(bj,null),Cj=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?j.createElement(ca.Provider,{value:this.props.routeContext},j.createElement(nb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ej({routeContext:t,match:e,children:r}){let n=j.useContext(Dd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(ca.Provider,{value:t},r)}function _j(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let A=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Yr(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,A+1))}let a=!1,o=-1;if(r)for(let A=0;A<s.length;A++){let c=s[A];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=A),c.route.id){let{loaderData:d,errors:f}=r,m=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((A,c,d)=>{let f,m=!1,g=null,B=null;r&&(f=i&&c.route.id?i[c.route.id]:void 0,g=c.route.errorElement||Bj,a&&(o<0&&d===0?(JS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,B=null):o===d&&(m=!0,B=c.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,d+1)),b=()=>{let y;return f?y=g:m?y=B:c.route.Component?y=j.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=A,j.createElement(Ej,{match:c,routeContext:{outlet:A,matches:C,isDataRoute:r!=null},children:y})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?j.createElement(Cj,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):b()},null)}function sb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nj(t){let e=j.useContext(Dd);return Yr(e,sb(t)),e}function Ij(t){let e=j.useContext(vw);return Yr(e,sb(t)),e}function Sj(t){let e=j.useContext(ca);return Yr(e,sb(t)),e}function ib(t){let e=Sj(t),r=e.matches[e.matches.length-1];return Yr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Fj(){return ib("useRouteId")}function Tj(){var n;let t=j.useContext(nb),e=Ij("useRouteError"),r=ib("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Uj(){let{router:t}=Nj("useNavigate"),e=ib("useNavigate"),r=j.useRef(!1);return WS(()=>{r.current=!0}),j.useCallback(async(s,i={})=>{aa(r.current,$S),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var o5={};function JS(t,e,r){!e&&!o5[t]&&(o5[t]=!0,aa(!1,r))}j.memo(Pj);function Pj({routes:t,future:e,state:r}){return XS(t,void 0,r,e)}function ju({to:t,replace:e,state:r,relative:n}){Yr(Od(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(la);aa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(ca),{pathname:a}=Cl(),o=yw(),A=rb(t,tb(i),a,n==="path"),c=JSON.stringify(A);return j.useEffect(()=>{o(JSON.parse(c),{replace:e,state:r,relative:n})},[o,c,n,e,r]),null}function Qj(t){return yj(t.context)}function Hr(t){Yr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Lj({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Yr(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=j.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Rd(r));let{pathname:A="/",search:c="",hash:d="",state:f=null,key:m="default"}=r,g=j.useMemo(()=>{let B=Ro(A,a);return B==null?null:{location:{pathname:B,search:c,hash:d,state:f,key:m},navigationType:n}},[a,A,c,d,f,m,n]);return aa(g!=null,`<Router basename="${a}"> is not able to match the URL "${A}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:j.createElement(la.Provider,{value:o},j.createElement(Ep.Provider,{children:e,value:g}))}function jj({children:t,location:e}){return xj(z1(t),e)}function z1(t,e=[]){let r=[];return j.Children.forEach(t,(n,s)=>{if(!j.isValidElement(n))return;let i=[...e,s];if(n.type===j.Fragment){r.push.apply(r,z1(n.props.children,i));return}Yr(n.type===Hr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=z1(n.props.children,i)),r.push(a)}),r}var Pg="get",Qg="application/x-www-form-urlencoded";function xw(t){return t!=null&&typeof t.tagName=="string"}function kj(t){return xw(t)&&t.tagName.toLowerCase()==="button"}function Rj(t){return xw(t)&&t.tagName.toLowerCase()==="form"}function Dj(t){return xw(t)&&t.tagName.toLowerCase()==="input"}function Oj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Mj(t,e){return t.button===0&&(!e||e==="_self")&&!Oj(t)}var Qm=null;function Hj(){if(Qm===null)try{new FormData(document.createElement("form"),0),Qm=!1}catch{Qm=!0}return Qm}var Vj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iy(t){return t!=null&&!Vj.has(t)?(aa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qg}"`),null):t}function Kj(t,e){let r,n,s,i,a;if(Rj(t)){let o=t.getAttribute("action");n=o?Ro(o,e):null,r=t.getAttribute("method")||Pg,s=iy(t.getAttribute("enctype"))||Qg,i=new FormData(t)}else if(kj(t)||Dj(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=t.getAttribute("formaction")||o.getAttribute("action");if(n=A?Ro(A,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||Pg,s=iy(t.getAttribute("formenctype"))||iy(o.getAttribute("enctype"))||Qg,i=new FormData(o,t),!Hj()){let{name:c,type:d,value:f}=t;if(d==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,f)}}else{if(xw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pg,n=null,s=Qg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ab(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qj(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Gj(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $j(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await Gj(i,r);return a.links?a.links():[]}return[]}));return Yj(n.flat(1).filter(zj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function A5(t,e,r,n,s,i){let a=(A,c)=>r[c]?A.route.id!==r[c].route.id:!0,o=(A,c)=>{var d;return r[c].pathname!==A.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==A.params["*"]};return i==="assets"?e.filter((A,c)=>a(A,c)||o(A,c)):i==="data"?e.filter((A,c)=>{var f;let d=n.routes[A.route.id];if(!d||!d.hasLoader)return!1;if(a(A,c)||o(A,c))return!0;if(A.route.shouldRevalidate){let m=A.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Wj(t,e,{includeHydrateFallback:r}={}){return Xj(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Xj(t){return[...new Set(t)]}function Jj(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Yj(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(Jj(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function YS(){let t=j.useContext(Dd);return ab(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Zj(){let t=j.useContext(vw);return ab(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ob=j.createContext(void 0);ob.displayName="FrameworkContext";function ZS(){let t=j.useContext(ob);return ab(t,"You must render this element inside a <HydratedRouter> element"),t}function ek(t,e){let r=j.useContext(ob),[n,s]=j.useState(!1),[i,a]=j.useState(!1),{onFocus:o,onBlur:A,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,m=j.useRef(null);j.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let C=y=>{y.forEach(w=>{a(w.isIntersecting)})},b=new IntersectionObserver(C,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[t]),j.useEffect(()=>{if(n){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[n]);let g=()=>{s(!0)},B=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Eh(o,g),onBlur:Eh(A,B),onMouseEnter:Eh(c,g),onMouseLeave:Eh(d,B),onTouchStart:Eh(f,g)}]:[!1,m,{}]}function Eh(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function tk({page:t,...e}){let{router:r}=YS(),n=j.useMemo(()=>VS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?j.createElement(nk,{page:t,matches:n,...e}):null}function rk(t){let{manifest:e,routeModules:r}=ZS(),[n,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return $j(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function nk({page:t,matches:e,...r}){let n=Cl(),{manifest:s,routeModules:i}=ZS(),{basename:a}=YS(),{loaderData:o,matches:A}=Zj(),c=j.useMemo(()=>A5(t,e,A,s,n,"data"),[t,e,A,s,n]),d=j.useMemo(()=>A5(t,e,A,s,n,"assets"),[t,e,A,s,n]),f=j.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let B=new Set,C=!1;if(e.forEach(y=>{var N;let w=s.routes[y.route.id];!w||!w.hasLoader||(!c.some(R=>R.route.id===y.route.id)&&y.route.id in o&&((N=i[y.route.id])!=null&&N.shouldRevalidate)||w.hasClientLoader?C=!0:B.add(y.route.id))}),B.size===0)return[];let b=qj(t,a,"data");return C&&B.size>0&&b.searchParams.set("_routes",e.filter(y=>B.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[a,o,n,s,c,e,t,i]),m=j.useMemo(()=>Wj(d,s),[d,s]),g=rk(d);return j.createElement(j.Fragment,null,f.map(B=>j.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...r})),m.map(B=>j.createElement("link",{key:B,rel:"modulepreload",href:B,...r})),g.map(({key:B,link:C})=>j.createElement("link",{key:B,nonce:r.nonce,...C})))}function sk(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var eF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eF&&(window.__reactRouterVersion="7.8.1")}catch{}function ik({basename:t,children:e,window:r}){let n=j.useRef();n.current==null&&(n.current=KL({window:r,v5Compat:!0}));let s=n.current,[i,a]=j.useState({action:s.action,location:s.location}),o=j.useCallback(A=>{j.startTransition(()=>a(A))},[a]);return j.useLayoutEffect(()=>s.listen(o),[s,o]),j.createElement(Lj,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var tF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rF=j.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:d,viewTransition:f,...m},g){let{basename:B}=j.useContext(la),C=typeof c=="string"&&tF.test(c),b,y=!1;if(typeof c=="string"&&C&&(b=c,eF))try{let L=new URL(window.location.href),D=c.startsWith("//")?new URL(L.protocol+c):new URL(c),S=Ro(D.pathname,B);D.origin===L.origin&&S!=null?c=S+D.search+D.hash:y=!0}catch{aa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=gj(c,{relative:s}),[N,R,V]=ek(n,m),O=Ak(c,{replace:a,state:o,target:A,preventScrollReset:d,relative:s,viewTransition:f});function T(L){e&&e(L),L.defaultPrevented||O(L)}let _=j.createElement("a",{...m,...V,href:b||w,onClick:y||i?e:T,ref:sk(g,R),target:A,"data-discover":!C&&r==="render"?"true":void 0});return N&&!C?j.createElement(j.Fragment,null,_,j.createElement(tk,{page:w})):_});rF.displayName="Link";var jr=j.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:A,...c},d){let f=_p(a,{relative:c.relative}),m=Cl(),g=j.useContext(vw),{navigator:B,basename:C}=j.useContext(la),b=g!=null&&hk(f)&&o===!0,y=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,w=m.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(w=w.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&C&&(N=Ro(N,C)||N);const R=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let V=w===y||!s&&w.startsWith(y)&&w.charAt(R)==="/",O=N!=null&&(N===y||!s&&N.startsWith(y)&&N.charAt(y.length)==="/"),T={isActive:V,isPending:O,isTransitioning:b},_=V?e:void 0,L;typeof n=="function"?L=n(T):L=[n,V?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(T):i;return j.createElement(rF,{...c,"aria-current":_,className:L,ref:d,style:D,to:a,viewTransition:o},typeof A=="function"?A(T):A)});jr.displayName="NavLink";var ak=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=Pg,action:o,onSubmit:A,relative:c,preventScrollReset:d,viewTransition:f,...m},g)=>{let B=uk(),C=dk(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&tF.test(o),w=N=>{if(A&&A(N),N.defaultPrevented)return;N.preventDefault();let R=N.nativeEvent.submitter,V=(R==null?void 0:R.getAttribute("formmethod"))||a;B(R||N.currentTarget,{fetcherKey:e,method:V,navigate:r,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:f})};return j.createElement("form",{ref:g,method:b,action:C,onSubmit:n?A:w,...m,"data-discover":!y&&t==="render"?"true":void 0})});ak.displayName="Form";function ok(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nF(t){let e=j.useContext(Dd);return Yr(e,ok(t)),e}function Ak(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=yw(),A=Cl(),c=_p(t,{relative:i});return j.useCallback(d=>{if(Mj(d,e)){d.preventDefault();let f=r!==void 0?r:Jf(A)===Jf(c);o(t,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[A,o,c,r,n,e,t,s,i,a])}var lk=0,ck=()=>`__${String(++lk)}__`;function uk(){let{router:t}=nF("useSubmit"),{basename:e}=j.useContext(la),r=Fj();return j.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:A,body:c}=Kj(n,e);if(s.navigate===!1){let d=s.fetcherKey||ck();await t.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function dk(t,{relative:e}={}){let{basename:r}=j.useContext(la),n=j.useContext(ca);Yr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={..._p(t||".",{relative:e})},a=Cl();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),A=o.getAll("index");if(A.some(d=>d==="")){o.delete("index"),A.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Io([r,i.pathname])),Jf(i)}function hk(t,{relative:e}={}){let r=j.useContext(zS);Yr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=nF("useViewTransitionState"),s=_p(t,{relative:e});if(!r.isTransitioning)return!1;let i=Ro(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Ro(r.nextLocation.pathname,n)||r.nextLocation.pathname;return b0(s.pathname,a)!=null||b0(s.pathname,i)!=null}var l5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},fk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},iF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,d=i>>2,f=(i&3)<<4|o>>4;let m=(o&15)<<2|c>>6,g=c&63;A||(g=64,a||(m=64)),n.push(r[d],r[f],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new pk;const m=i<<2|o>>4;if(n.push(m),c!==64){const g=o<<4&240|c>>2;if(n.push(g),f!==64){const B=c<<6&192|f;n.push(B)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mk=function(t){const e=sF(t);return iF.encodeByteArray(e,!0)},B0=function(t){return mk(t).replace(/\./g,"")},aF=function(t){try{return iF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=()=>gk().__FIREBASE_DEFAULTS__,vk=()=>{if(typeof process>"u"||typeof l5>"u")return;const t=l5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aF(t[1]);return e&&JSON.parse(e)},bw=()=>{try{return wk()||vk()||yk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oF=t=>{var e,r;return(r=(e=bw())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},xk=t=>{const e=oF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},AF=()=>{var t;return(t=bw())===null||t===void 0?void 0:t.config},lF=t=>{var e;return(e=bw())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[B0(JSON.stringify(r)),B0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ck(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function Ek(){var t;const e=(t=bw())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _k(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sk(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cF(){return!Ek()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uF(){try{return typeof indexedDB=="object"}catch{return!1}}function Fk(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="FirebaseError";class Ko extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Tk,Object.setPrototypeOf(this,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Np.prototype.create)}}class Np{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Uk(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Ko(s,o,n)}}function Uk(t,e){return t.replace(Pk,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Pk=/\{\$([^}]+)}/g;function Qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function C0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(c5(i)&&c5(a)){if(!C0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function c5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function zh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $h(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Lk(t,e){const r=new jk(t,e);return r.subscribe.bind(r)}class jk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");kk(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=ay),s.error===void 0&&(s.error=ay),s.complete===void 0&&(s.complete=ay);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function ay(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class Fc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new bk;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ok(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Dk(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dk(t){return t===tc?void 0:t}function Ok(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Rk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(sr||(sr={}));const Hk={debug:sr.DEBUG,verbose:sr.VERBOSE,info:sr.INFO,warn:sr.WARN,error:sr.ERROR,silent:sr.SILENT},Vk=sr.INFO,Kk={[sr.DEBUG]:"log",[sr.VERBOSE]:"log",[sr.INFO]:"info",[sr.WARN]:"warn",[sr.ERROR]:"error"},qk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Kk[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Ab=class{constructor(e){this.name=e,this._logLevel=Vk,this._logHandler=qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sr.DEBUG,...e),this._logHandler(this,sr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sr.VERBOSE,...e),this._logHandler(this,sr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sr.INFO,...e),this._logHandler(this,sr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sr.WARN,...e),this._logHandler(this,sr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sr.ERROR,...e),this._logHandler(this,sr.ERROR,...e)}};const Gk=(t,e)=>e.some(r=>t instanceof r);let u5,d5;function zk(){return u5||(u5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $k(){return d5||(d5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dF=new WeakMap,$1=new WeakMap,hF=new WeakMap,oy=new WeakMap,lb=new WeakMap;function Wk(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(rl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&dF.set(r,t)}).catch(()=>{}),lb.set(e,t),e}function Xk(t){if($1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});$1.set(t,e)}let W1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return $1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jk(t){W1=t(W1)}function Yk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ay(this),e,...r);return hF.set(n,e.sort?e.sort():[e]),rl(n)}:$k().includes(t)?function(...e){return t.apply(Ay(this),e),rl(dF.get(this))}:function(...e){return rl(t.apply(Ay(this),e))}}function Zk(t){return typeof t=="function"?Yk(t):(t instanceof IDBTransaction&&Xk(t),Gk(t,zk())?new Proxy(t,W1):t)}function rl(t){if(t instanceof IDBRequest)return Wk(t);if(oy.has(t))return oy.get(t);const e=Zk(t);return e!==t&&(oy.set(t,e),lb.set(e,t)),e}const Ay=t=>lb.get(t);function eR(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=rl(a);return n&&a.addEventListener("upgradeneeded",A=>{n(rl(a.result),A.oldVersion,A.newVersion,rl(a.transaction),A)}),r&&a.addEventListener("blocked",A=>r(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const tR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],ly=new Map;function h5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=rR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||tR.includes(r)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&A.done]))[0]};return ly.set(e,i),i}Jk(t=>({...t,get:(e,r,n)=>h5(e,r)||t.get(e,r,n),has:(e,r)=>!!h5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(sR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function sR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const X1="@firebase/app",f5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Ab("@firebase/app"),iR="@firebase/app-compat",aR="@firebase/analytics-compat",oR="@firebase/analytics",AR="@firebase/app-check-compat",lR="@firebase/app-check",cR="@firebase/auth",uR="@firebase/auth-compat",dR="@firebase/database",hR="@firebase/data-connect",fR="@firebase/database-compat",pR="@firebase/functions",mR="@firebase/functions-compat",gR="@firebase/installations",wR="@firebase/installations-compat",vR="@firebase/messaging",yR="@firebase/messaging-compat",xR="@firebase/performance",bR="@firebase/performance-compat",BR="@firebase/remote-config",CR="@firebase/remote-config-compat",ER="@firebase/storage",_R="@firebase/storage-compat",NR="@firebase/firestore",IR="@firebase/vertexai-preview",SR="@firebase/firestore-compat",FR="firebase",TR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="[DEFAULT]",UR={[X1]:"fire-core",[iR]:"fire-core-compat",[oR]:"fire-analytics",[aR]:"fire-analytics-compat",[lR]:"fire-app-check",[AR]:"fire-app-check-compat",[cR]:"fire-auth",[uR]:"fire-auth-compat",[dR]:"fire-rtdb",[hR]:"fire-data-connect",[fR]:"fire-rtdb-compat",[pR]:"fire-fn",[mR]:"fire-fn-compat",[gR]:"fire-iid",[wR]:"fire-iid-compat",[vR]:"fire-fcm",[yR]:"fire-fcm-compat",[xR]:"fire-perf",[bR]:"fire-perf-compat",[BR]:"fire-rc",[CR]:"fire-rc-compat",[ER]:"fire-gcs",[_R]:"fire-gcs-compat",[NR]:"fire-fst",[SR]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[FR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,Y1=new Map,Z1=new Map;function p5(t,e){try{t.container.addComponent(e)}catch(r){Do.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ed(t){const e=t.name;if(Z1.has(e))return Do.debug(`There were multiple attempts to register component ${e}.`),!1;Z1.set(e,t);for(const r of Cd.values())p5(r,t);for(const r of Y1.values())p5(r,t);return!0}function cb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ua(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nl=new Np("app","Firebase",PR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=TR;function ub(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:J1,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw nl.create("bad-app-name",{appName:String(s)});if(r||(r=AF()),!r)throw nl.create("no-options");const i=Cd.get(s);if(i){if(C0(r,i.options)&&C0(n,i.config))return i;throw nl.create("duplicate-app",{appName:s})}const a=new Mk(s);for(const A of Z1.values())a.addComponent(A);const o=new QR(r,n,a);return Cd.set(s,o),o}function db(t=J1){const e=Cd.get(t);if(!e&&t===J1&&AF())return ub();if(!e)throw nl.create("no-app",{appName:t});return e}async function LR(t){let e=!1;const r=t.name;Cd.has(r)?(e=!0,Cd.delete(r)):Y1.has(r)&&t.decRefCount()<=0&&(Y1.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function sl(t,e,r){var n;let s=(n=UR[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Do.warn(o.join(" "));return}Ed(new Fc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebase-heartbeat-database",kR=1,Yf="firebase-heartbeat-store";let cy=null;function fF(){return cy||(cy=eR(jR,kR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yf)}catch(r){console.warn(r)}}}}).catch(t=>{throw nl.create("idb-open",{originalErrorMessage:t.message})})),cy}async function RR(t){try{const r=(await fF()).transaction(Yf),n=await r.objectStore(Yf).get(pF(t));return await r.done,n}catch(e){if(e instanceof Ko)Do.warn(e.message);else{const r=nl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Do.warn(r.message)}}}async function m5(t,e){try{const n=(await fF()).transaction(Yf,"readwrite");await n.objectStore(Yf).put(e,pF(t)),await n.done}catch(r){if(r instanceof Ko)Do.warn(r.message);else{const n=nl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Do.warn(n.message)}}}function pF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=1024,OR=30*24*60*60*1e3;class MR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new VR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=g5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=OR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Do.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=g5(),{heartbeatsToSend:n,unsentEntries:s}=HR(this._heartbeatsCache.heartbeats),i=B0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Do.warn(r),""}}}function g5(){return new Date().toISOString().substring(0,10)}function HR(t,e=DR){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),w5(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),w5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class VR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uF()?Fk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await RR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return m5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return m5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w5(t){return B0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){Ed(new Fc("platform-logger",e=>new nR(e),"PRIVATE")),Ed(new Fc("heartbeat",e=>new MR(e),"PRIVATE")),sl(X1,f5,t),sl(X1,f5,"esm2017"),sl("fire-js","")}KR("");function hb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function mF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qR=mF,gF=new Np("auth","Firebase",mF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Ab("@firebase/auth");function GR(t,...e){E0.logLevel<=sr.WARN&&E0.warn(`Auth (${Md}): ${t}`,...e)}function Lg(t,...e){E0.logLevel<=sr.ERROR&&E0.error(`Auth (${Md}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t,...e){throw fb(t,...e)}function Ra(t,...e){return fb(t,...e)}function wF(t,e,r){const n=Object.assign(Object.assign({},qR()),{[e]:r});return new Np("auth","Firebase",n).create(e,{appName:t.name})}function So(t){return wF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return gF.create(t,...e)}function Dt(t,e,...r){if(!t)throw fb(e,...r)}function bo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lg(e),new Error(e)}function Oo(t,e){t||bo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zR(){return v5()==="http:"||v5()==="https:"}function v5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zR()||Nk()||"connection"in navigator)?navigator.onLine:!0}function WR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r){this.shortDelay=e,this.longDelay=r,Oo(r>e,"Short delay should be less than long delay!"),this.isMobile=Ck()||Ik()}get(){return $R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){Oo(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new Sp(3e4,6e4);function El(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _l(t,e,r,n,s={}){return yF(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Ip(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return _k()||(c.referrerPolicy="no-referrer"),vF.fetch()(xF(t,t.config.apiHost,r,o),c)})}async function yF(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},XR),e);try{const s=new ZR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Lm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lm(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw Lm(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw Lm(t,"user-disabled",a);const d=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw wF(t,d,c);oa(t,d)}}catch(s){if(s instanceof Ko)throw s;oa(t,"network-request-failed",{message:String(s)})}}async function Fp(t,e,r,n,s={}){const i=await _l(t,e,r,n,s);return"mfaPendingCredential"in i&&oa(t,"multi-factor-auth-required",{_serverResponse:i}),i}function xF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?pb(t.config,s):`${t.config.apiScheme}://${s}`}function YR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ra(this.auth,"network-request-failed")),JR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ra(t,e,n);return s.customData._tokenResponse=r,s}function y5(t){return t!==void 0&&t.enterprise!==void 0}class eD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return YR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tD(t,e){return _l(t,"GET","/v2/recaptchaConfig",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function bF(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nD(t,e=!1){const r=ln(t),n=await r.getIdToken(e),s=mb(n);Dt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:mf(uy(s.auth_time)),issuedAtTime:mf(uy(s.iat)),expirationTime:mf(uy(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uy(t){return Number(t)*1e3}function mb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Lg("JWT malformed, contained fewer than 3 sections"),null;try{const s=aF(r);return s?JSON.parse(s):(Lg("Failed to decode base64 JWT payload"),null)}catch(s){return Lg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function x5(t){const e=mb(t);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ko&&sD(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function sD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=mf(this.lastLoginAt),this.creationTime=mf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Zf(t,bF(r,{idToken:n}));Dt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?BF(i.providerUserInfo):[],o=oD(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=A?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new t2(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function aD(t){const e=ln(t);await _0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oD(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function BF(t){return t.map(e=>{var{providerId:r}=e,n=hb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){const r=await yF(t,{},async()=>{const n=Ip({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=xF(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",vF.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function lD(t,e){return _l(t,"POST","/v2/accounts:revokeToken",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const r=x5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await AD(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new dd;return n&&(Dt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Dt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Dt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dd,this.toJSON())}_performRefresh(){return bo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){Dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bo{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=hb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new t2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Zf(this,this.stsTokenManager.getToken(this.auth,e));return Dt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return nD(this,e)}reload(){return aD(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await _0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ua(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Zf(this,rD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,A,c,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,g=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,B=(a=r.photoURL)!==null&&a!==void 0?a:void 0,C=(o=r.tenantId)!==null&&o!==void 0?o:void 0,b=(A=r._redirectEventId)!==null&&A!==void 0?A:void 0,y=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:N,emailVerified:R,isAnonymous:V,providerData:O,stsTokenManager:T}=r;Dt(N&&T,e,"internal-error");const _=dd.fromJSON(this.name,T);Dt(typeof N=="string",e,"internal-error"),xA(f,e.name),xA(m,e.name),Dt(typeof R=="boolean",e,"internal-error"),Dt(typeof V=="boolean",e,"internal-error"),xA(g,e.name),xA(B,e.name),xA(C,e.name),xA(b,e.name),xA(y,e.name),xA(w,e.name);const L=new Bo({uid:N,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:V,photoURL:B,phoneNumber:g,tenantId:C,stsTokenManager:_,createdAt:y,lastLoginAt:w});return O&&Array.isArray(O)&&(L.providerData=O.map(D=>Object.assign({},D))),b&&(L._redirectEventId=b),L}static async _fromIdTokenResponse(e,r,n=!1){const s=new dd;s.updateFromServerResponse(r);const i=new Bo({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await _0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Dt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?BF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new dd;o.updateFromIdToken(n);const A=new Bo({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new t2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new Map;function Co(t){Oo(t instanceof Function,"Expected a class definition");let e=b5.get(t);return e?(Oo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}CF.type="NONE";const B5=CF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e,r){return`firebase:${t}:${e}:${r}`}class hd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=jg(this.userKey,s.apiKey,i),this.fullPersistenceKey=jg("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new hd(Co(B5),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Co(B5);const a=jg(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(a);if(d){const f=Bo._fromJSON(e,d);c!==i&&(o=f),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new hd(i,e,n):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new hd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FF(e))return"Blackberry";if(TF(e))return"Webos";if(_F(e))return"Safari";if((e.includes("chrome/")||NF(e))&&!e.includes("edge/"))return"Chrome";if(SF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function EF(t=Pn()){return/firefox\//i.test(t)}function _F(t=Pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NF(t=Pn()){return/crios\//i.test(t)}function IF(t=Pn()){return/iemobile/i.test(t)}function SF(t=Pn()){return/android/i.test(t)}function FF(t=Pn()){return/blackberry/i.test(t)}function TF(t=Pn()){return/webos/i.test(t)}function gb(t=Pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cD(t=Pn()){var e;return gb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uD(){return Sk()&&document.documentMode===10}function UF(t=Pn()){return gb(t)||SF(t)||TF(t)||FF(t)||/windows phone/i.test(t)||IF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t,e=[]){let r;switch(t){case"Browser":r=C5(Pn());break;case"Worker":r=`${C5(Pn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Md}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e={}){return _l(t,"GET","/v2/passwordPolicy",El(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=6;class pD{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:fD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(r=A.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(n=A.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E5(this),this.idTokenSubscription=new E5(this),this.beforeStateQueue=new dD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Co(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await hd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bF(this,{idToken:e}),n=await Bo._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ua(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ua(this.app))return Promise.reject(So(this));const r=e?ln(e):null;return r&&Dt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ua(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ua(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Co(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hD(this),r=new pD(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Np("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await lD(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Co(e)||this._popupRedirectResolver;Dt(r,this,"argument-error"),this.redirectPersistenceManager=await hd.create(this,[Co(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const A=e.addObserver(r,n,s);return()=>{a=!0,A()}}else{const A=e.addObserver(r);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&GR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Mc(t){return ln(t)}class E5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lk(r=>this.observer=r)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gD(t){Bw=t}function QF(t){return Bw.loadJS(t)}function wD(){return Bw.recaptchaEnterpriseScript}function vD(){return Bw.gapiScript}function yD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xD="recaptcha-enterprise",bD="NO_RECAPTCHA";class BD{constructor(e){this.type=xD,this.auth=Mc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{tD(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new eD(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;y5(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(bD)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&y5(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=wD();A.length!==0&&(A+=o),QF(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function _5(t,e,r,n=!1){const s=new BD(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function r2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _5(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _5(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t,e){const r=cb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(C0(i,e??{}))return s;oa(s,"already-initialized")}return r.initialize({options:e})}function ED(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Co);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function _D(t,e,r){const n=Mc(t);Dt(n._canInitEmulator,n,"emulator-config-failed"),Dt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=LF(e),{host:a,port:o}=ND(e),A=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${A}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),ID()}function LF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ND(t){const e=LF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:N5(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:N5(a)}}}function N5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ID(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return bo("not implemented")}_getIdTokenResponse(e){return bo("not implemented")}_linkToIdToken(e,r){return bo("not implemented")}_getReauthenticationResolver(e){return bo("not implemented")}}async function SD(t,e){return _l(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){return Fp(t,"POST","/v1/accounts:signInWithPassword",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return Fp(t,"POST","/v1/accounts:signInWithEmailLink",El(t,e))}async function UD(t,e){return Fp(t,"POST","/v1/accounts:signInWithEmailLink",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends wb{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ep(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ep(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r2(e,r,"signInWithPassword",FD);case"emailLink":return TD(e,{email:this._email,oobCode:this._password});default:oa(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r2(e,n,"signUpPassword",SD);case"emailLink":return UD(e,{idToken:r,email:this._email,oobCode:this._password});default:oa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(t,e){return Fp(t,"POST","/v1/accounts:signInWithIdp",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="http://localhost";class Tc extends wb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):oa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=hb(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Tc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return fd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,fd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,fd(e,r)}buildRequest(){const e={requestUri:PD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ip(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LD(t){const e=zh($h(t)).link,r=e?zh($h(e)).deep_link_id:null,n=zh($h(t)).deep_link_id;return(n?zh($h(n)).link:null)||n||r||e||t}class vb{constructor(e){var r,n,s,i,a,o;const A=zh($h(e)),c=(r=A.apiKey)!==null&&r!==void 0?r:null,d=(n=A.oobCode)!==null&&n!==void 0?n:null,f=QD((s=A.mode)!==null&&s!==void 0?s:null);Dt(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=LD(e);try{return new vb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.providerId=Hd.PROVIDER_ID}static credential(e,r){return ep._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=vb.parseLink(r);return Dt(n,"argument-error"),ep._fromEmailAndCode(e,n.code,n.tenantId)}}Hd.PROVIDER_ID="password";Hd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends jF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Tp{constructor(){super("facebook.com")}static credential(e){return Tc._fromParams({providerId:QA.PROVIDER_ID,signInMethod:QA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QA.credentialFromTaggedObject(e)}static credentialFromError(e){return QA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return QA.credential(e.oauthAccessToken)}catch{return null}}}QA.FACEBOOK_SIGN_IN_METHOD="facebook.com";QA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Tp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Tc._fromParams({providerId:LA.PROVIDER_ID,signInMethod:LA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return LA.credentialFromTaggedObject(e)}static credentialFromError(e){return LA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return LA.credential(r,n)}catch{return null}}}LA.GOOGLE_SIGN_IN_METHOD="google.com";LA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Tp{constructor(){super("github.com")}static credential(e){return Tc._fromParams({providerId:jA.PROVIDER_ID,signInMethod:jA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jA.credentialFromTaggedObject(e)}static credentialFromError(e){return jA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jA.credential(e.oauthAccessToken)}catch{return null}}}jA.GITHUB_SIGN_IN_METHOD="github.com";jA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Tp{constructor(){super("twitter.com")}static credential(e,r){return Tc._fromParams({providerId:kA.PROVIDER_ID,signInMethod:kA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return kA.credentialFromTaggedObject(e)}static credentialFromError(e){return kA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return kA.credential(r,n)}catch{return null}}}kA.TWITTER_SIGN_IN_METHOD="twitter.com";kA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t,e){return Fp(t,"POST","/v1/accounts:signUp",El(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Bo._fromIdTokenResponse(e,n,s),a=I5(n);return new Uc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=I5(n);return new Uc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function I5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends Ko{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,N0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new N0(e,r,n,s)}}function kF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?N0._fromErrorAndOperation(t,i,e,n):i})}async function kD(t,e,r=!1){const n=await Zf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Uc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e,r=!1){const{auth:n}=t;if(Ua(n.app))return Promise.reject(So(n));const s="reauthenticate";try{const i=await Zf(t,kF(n,s,e,t),r);Dt(i.idToken,n,"internal-error");const a=mb(i.idToken);Dt(a,n,"internal-error");const{sub:o}=a;return Dt(t.uid===o,n,"user-mismatch"),Uc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&oa(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,r=!1){if(Ua(t.app))return Promise.reject(So(t));const n="signIn",s=await kF(t,n,e),i=await Uc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function DD(t,e){return RF(Mc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t){const e=Mc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OD(t,e,r){if(Ua(t.app))return Promise.reject(So(t));const n=Mc(t),a=await r2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jD).catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&DF(t),A}),o=await Uc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function MD(t,e,r){return Ua(t.app)?Promise.reject(So(t)):DD(ln(t),Hd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&DF(t),n})}function HD(t,e,r,n){return ln(t).onIdTokenChanged(e,r,n)}function VD(t,e,r){return ln(t).beforeAuthStateChanged(e,r)}function OF(t,e,r,n){return ln(t).onAuthStateChanged(e,r,n)}function MF(t){return ln(t).signOut()}const I0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(I0,"1"),this.storage.removeItem(I0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=1e3,qD=10;class VF extends HF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);uD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qD):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},KD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}VF.type="LOCAL";const GD=VF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF extends HF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}KF.type="SESSION";const qF=KF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Cw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),A=await zD(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:A})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=yb("",20);s.port1.start();const d=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(d),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function WD(t){Da().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function XD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YD(){return GF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="firebaseLocalStorageDb",ZD=1,S0="firebaseLocalStorage",$F="fbase_key";class Up{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ew(t,e){return t.transaction([S0],e?"readwrite":"readonly").objectStore(S0)}function e6(){const t=indexedDB.deleteDatabase(zF);return new Up(t).toPromise()}function n2(){const t=indexedDB.open(zF,ZD);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(S0,{keyPath:$F})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(S0)?e(n):(n.close(),await e6(),e(await n2()))})})}async function S5(t,e,r){const n=Ew(t,!0).put({[$F]:e,value:r});return new Up(n).toPromise()}async function t6(t,e){const r=Ew(t,!1).get(e),n=await new Up(r).toPromise();return n===void 0?null:n.value}function F5(t,e){const r=Ew(t,!0).delete(e);return new Up(r).toPromise()}const r6=800,n6=3;class WF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await n2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>n6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cw._getInstance(YD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await XD(),!this.activeServiceWorker)return;this.sender=new $D(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await n2();return await S5(e,I0,"1"),await F5(e,I0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>S5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>t6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>F5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ew(s,!1).getAll();return new Up(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WF.type="LOCAL";const s6=WF;new Sp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t,e){return e?Co(e):(Dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends wb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return fd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return fd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function a6(t){return RF(t.auth,new xb(t),t.bypassAuthState)}function o6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),RD(r,new xb(t),t.bypassAuthState)}async function A6(t){const{auth:e,user:r}=t;return Dt(r,e,"internal-error"),kD(r,new xb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a6;case"linkViaPopup":case"linkViaRedirect":return A6;case"reauthViaPopup":case"reauthViaRedirect":return o6;default:oa(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new Sp(2e3,1e4);class sd extends XF{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,sd.currentPopupAction&&sd.currentPopupAction.cancel(),sd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Oo(this.filter.length===1,"Popup operations only handle one event");const e=yb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ra(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ra(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l6.get())};e()}}sd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="pendingRedirect",kg=new Map;class u6 extends XF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=kg.get(this.auth._key());if(!e){try{const n=await d6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}kg.set(this.auth._key(),e)}return this.bypassAuthState||kg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d6(t,e){const r=p6(e),n=f6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function h6(t,e){kg.set(t._key(),e)}function f6(t){return Co(t._redirectPersistence)}function p6(t){return jg(c6,t.config.apiKey,t.name)}async function m6(t,e,r=!1){if(Ua(t.app))return Promise.reject(So(t));const n=Mc(t),s=i6(n,e),a=await new u6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=10*60*1e3;class w6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!JF(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ra(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g6&&this.cachedEventUids.clear(),this.cachedEventUids.has(T5(e))}saveEventToCache(e){this.cachedEventUids.add(T5(e)),this.lastProcessedEventTime=Date.now()}}function T5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(t,e={}){return _l(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b6=/^https?/;async function B6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await y6(t);for(const r of e)try{if(C6(r))return}catch{}oa(t,"unauthorized-domain")}function C6(t){const e=e2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!b6.test(r))return!1;if(x6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new Sp(3e4,6e4);function U5(){const t=Da().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function _6(t){return new Promise((e,r)=>{var n,s,i;function a(){U5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U5(),r(Ra(t,"network-request-failed"))},timeout:E6.get()})}if(!((s=(n=Da().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Da().gapi)===null||i===void 0)&&i.load)a();else{const o=yD("iframefcb");return Da()[o]=()=>{gapi.load?a():r(Ra(t,"network-request-failed"))},QF(`${vD()}?onload=${o}`).catch(A=>r(A))}}).catch(e=>{throw Rg=null,e})}let Rg=null;function N6(t){return Rg=Rg||_6(t),Rg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Sp(5e3,15e3),S6="__/auth/iframe",F6="emulator/auth/iframe",T6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P6(t){const e=t.config;Dt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?pb(e,F6):`https://${t.config.authDomain}/${S6}`,n={apiKey:e.apiKey,appName:t.name,v:Md},s=U6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Ip(n).slice(1)}`}async function Q6(t){const e=await N6(t),r=Da().gapi;return Dt(r,t,"internal-error"),e.open({where:document.body,url:P6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Ra(t,"network-request-failed"),o=Da().setTimeout(()=>{i(a)},I6.get());function A(){Da().clearTimeout(o),s(n)}n.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j6=500,k6=600,R6="_blank",D6="http://localhost";class P5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O6(t,e,r,n=j6,s=k6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A=Object.assign(Object.assign({},L6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Pn().toLowerCase();r&&(o=NF(c)?R6:r),EF(c)&&(e=e||D6,A.scrollbars="yes");const d=Object.entries(A).reduce((m,[g,B])=>`${m}${g}=${B},`,"");if(cD(c)&&o!=="_self")return M6(e||"",o),new P5(null);const f=window.open(e||"",o,d);Dt(f,t,"popup-blocked");try{f.focus()}catch{}return new P5(f)}function M6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",V6="emulator/auth/handler",K6=encodeURIComponent("fac");async function Q5(t,e,r,n,s,i){Dt(t.config.authDomain,t,"auth-domain-config-required"),Dt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Md,eventId:s};if(e instanceof jF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Qk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Tp){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const A=await t._getAppCheckToken(),c=A?`#${K6}=${encodeURIComponent(A)}`:"";return`${q6(t)}?${Ip(o).slice(1)}${c}`}function q6({config:t}){return t.emulator?pb(t,V6):`https://${t.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="webStorageSupport";class G6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qF,this._completeRedirectFn=m6,this._overrideRedirectResult=h6}async _openPopup(e,r,n,s){var i;Oo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Q5(e,r,n,e2(),s);return O6(e,a,yb())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await Q5(e,r,n,e2(),s);return WD(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Oo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Q6(e),n=new w6(e);return r.register("authEvent",s=>(Dt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(dy,{type:dy},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dy];a!==void 0&&r(!!a),oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=B6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return UF()||_F()||gb()}}const z6=G6;var L5="@firebase/auth",j5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X6(t){Ed(new Fc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Dt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PF(t)},c=new mD(n,s,i,A);return ED(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ed(new Fc("auth-internal",e=>{const r=Mc(e.getProvider("auth").getImmediate());return(n=>new $6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),sl(L5,j5,W6(t)),sl(L5,j5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=5*60,Y6=lF("authIdTokenMaxAge")||J6;let k5=null;const Z6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Y6)return;const s=r==null?void 0:r.token;k5!==s&&(k5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function YF(t=db()){const e=cb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=CD(t,{popupRedirectResolver:z6,persistence:[s6,GD,qF]}),n=lF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=Z6(i.toString());VD(r,a,()=>a(r.currentUser)),HD(r,o=>a(o))}}const s=oF("auth");return s&&_D(r,`http://${s}`),r}function eO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gD({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ra("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",eO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X6("Browser");var tO="firebase",rO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sl(tO,rO,"app");var R5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wc,ZF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function L(){}L.prototype=_.prototype,T.D=_.prototype,T.prototype=new L,T.prototype.constructor=T,T.C=function(D,S,I){for(var F=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)F[Y-2]=arguments[Y];return _.prototype[S].apply(D,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,L){L||(L=0);var D=Array(16);if(typeof _=="string")for(var S=0;16>S;++S)D[S]=_.charCodeAt(L++)|_.charCodeAt(L++)<<8|_.charCodeAt(L++)<<16|_.charCodeAt(L++)<<24;else for(S=0;16>S;++S)D[S]=_[L++]|_[L++]<<8|_[L++]<<16|_[L++]<<24;_=T.g[0],L=T.g[1],S=T.g[2];var I=T.g[3],F=_+(I^L&(S^I))+D[0]+3614090360&4294967295;_=L+(F<<7&4294967295|F>>>25),F=I+(S^_&(L^S))+D[1]+3905402710&4294967295,I=_+(F<<12&4294967295|F>>>20),F=S+(L^I&(_^L))+D[2]+606105819&4294967295,S=I+(F<<17&4294967295|F>>>15),F=L+(_^S&(I^_))+D[3]+3250441966&4294967295,L=S+(F<<22&4294967295|F>>>10),F=_+(I^L&(S^I))+D[4]+4118548399&4294967295,_=L+(F<<7&4294967295|F>>>25),F=I+(S^_&(L^S))+D[5]+1200080426&4294967295,I=_+(F<<12&4294967295|F>>>20),F=S+(L^I&(_^L))+D[6]+2821735955&4294967295,S=I+(F<<17&4294967295|F>>>15),F=L+(_^S&(I^_))+D[7]+4249261313&4294967295,L=S+(F<<22&4294967295|F>>>10),F=_+(I^L&(S^I))+D[8]+1770035416&4294967295,_=L+(F<<7&4294967295|F>>>25),F=I+(S^_&(L^S))+D[9]+2336552879&4294967295,I=_+(F<<12&4294967295|F>>>20),F=S+(L^I&(_^L))+D[10]+4294925233&4294967295,S=I+(F<<17&4294967295|F>>>15),F=L+(_^S&(I^_))+D[11]+2304563134&4294967295,L=S+(F<<22&4294967295|F>>>10),F=_+(I^L&(S^I))+D[12]+1804603682&4294967295,_=L+(F<<7&4294967295|F>>>25),F=I+(S^_&(L^S))+D[13]+4254626195&4294967295,I=_+(F<<12&4294967295|F>>>20),F=S+(L^I&(_^L))+D[14]+2792965006&4294967295,S=I+(F<<17&4294967295|F>>>15),F=L+(_^S&(I^_))+D[15]+1236535329&4294967295,L=S+(F<<22&4294967295|F>>>10),F=_+(S^I&(L^S))+D[1]+4129170786&4294967295,_=L+(F<<5&4294967295|F>>>27),F=I+(L^S&(_^L))+D[6]+3225465664&4294967295,I=_+(F<<9&4294967295|F>>>23),F=S+(_^L&(I^_))+D[11]+643717713&4294967295,S=I+(F<<14&4294967295|F>>>18),F=L+(I^_&(S^I))+D[0]+3921069994&4294967295,L=S+(F<<20&4294967295|F>>>12),F=_+(S^I&(L^S))+D[5]+3593408605&4294967295,_=L+(F<<5&4294967295|F>>>27),F=I+(L^S&(_^L))+D[10]+38016083&4294967295,I=_+(F<<9&4294967295|F>>>23),F=S+(_^L&(I^_))+D[15]+3634488961&4294967295,S=I+(F<<14&4294967295|F>>>18),F=L+(I^_&(S^I))+D[4]+3889429448&4294967295,L=S+(F<<20&4294967295|F>>>12),F=_+(S^I&(L^S))+D[9]+568446438&4294967295,_=L+(F<<5&4294967295|F>>>27),F=I+(L^S&(_^L))+D[14]+3275163606&4294967295,I=_+(F<<9&4294967295|F>>>23),F=S+(_^L&(I^_))+D[3]+4107603335&4294967295,S=I+(F<<14&4294967295|F>>>18),F=L+(I^_&(S^I))+D[8]+1163531501&4294967295,L=S+(F<<20&4294967295|F>>>12),F=_+(S^I&(L^S))+D[13]+2850285829&4294967295,_=L+(F<<5&4294967295|F>>>27),F=I+(L^S&(_^L))+D[2]+4243563512&4294967295,I=_+(F<<9&4294967295|F>>>23),F=S+(_^L&(I^_))+D[7]+1735328473&4294967295,S=I+(F<<14&4294967295|F>>>18),F=L+(I^_&(S^I))+D[12]+2368359562&4294967295,L=S+(F<<20&4294967295|F>>>12),F=_+(L^S^I)+D[5]+4294588738&4294967295,_=L+(F<<4&4294967295|F>>>28),F=I+(_^L^S)+D[8]+2272392833&4294967295,I=_+(F<<11&4294967295|F>>>21),F=S+(I^_^L)+D[11]+1839030562&4294967295,S=I+(F<<16&4294967295|F>>>16),F=L+(S^I^_)+D[14]+4259657740&4294967295,L=S+(F<<23&4294967295|F>>>9),F=_+(L^S^I)+D[1]+2763975236&4294967295,_=L+(F<<4&4294967295|F>>>28),F=I+(_^L^S)+D[4]+1272893353&4294967295,I=_+(F<<11&4294967295|F>>>21),F=S+(I^_^L)+D[7]+4139469664&4294967295,S=I+(F<<16&4294967295|F>>>16),F=L+(S^I^_)+D[10]+3200236656&4294967295,L=S+(F<<23&4294967295|F>>>9),F=_+(L^S^I)+D[13]+681279174&4294967295,_=L+(F<<4&4294967295|F>>>28),F=I+(_^L^S)+D[0]+3936430074&4294967295,I=_+(F<<11&4294967295|F>>>21),F=S+(I^_^L)+D[3]+3572445317&4294967295,S=I+(F<<16&4294967295|F>>>16),F=L+(S^I^_)+D[6]+76029189&4294967295,L=S+(F<<23&4294967295|F>>>9),F=_+(L^S^I)+D[9]+3654602809&4294967295,_=L+(F<<4&4294967295|F>>>28),F=I+(_^L^S)+D[12]+3873151461&4294967295,I=_+(F<<11&4294967295|F>>>21),F=S+(I^_^L)+D[15]+530742520&4294967295,S=I+(F<<16&4294967295|F>>>16),F=L+(S^I^_)+D[2]+3299628645&4294967295,L=S+(F<<23&4294967295|F>>>9),F=_+(S^(L|~I))+D[0]+4096336452&4294967295,_=L+(F<<6&4294967295|F>>>26),F=I+(L^(_|~S))+D[7]+1126891415&4294967295,I=_+(F<<10&4294967295|F>>>22),F=S+(_^(I|~L))+D[14]+2878612391&4294967295,S=I+(F<<15&4294967295|F>>>17),F=L+(I^(S|~_))+D[5]+4237533241&4294967295,L=S+(F<<21&4294967295|F>>>11),F=_+(S^(L|~I))+D[12]+1700485571&4294967295,_=L+(F<<6&4294967295|F>>>26),F=I+(L^(_|~S))+D[3]+2399980690&4294967295,I=_+(F<<10&4294967295|F>>>22),F=S+(_^(I|~L))+D[10]+4293915773&4294967295,S=I+(F<<15&4294967295|F>>>17),F=L+(I^(S|~_))+D[1]+2240044497&4294967295,L=S+(F<<21&4294967295|F>>>11),F=_+(S^(L|~I))+D[8]+1873313359&4294967295,_=L+(F<<6&4294967295|F>>>26),F=I+(L^(_|~S))+D[15]+4264355552&4294967295,I=_+(F<<10&4294967295|F>>>22),F=S+(_^(I|~L))+D[6]+2734768916&4294967295,S=I+(F<<15&4294967295|F>>>17),F=L+(I^(S|~_))+D[13]+1309151649&4294967295,L=S+(F<<21&4294967295|F>>>11),F=_+(S^(L|~I))+D[4]+4149444226&4294967295,_=L+(F<<6&4294967295|F>>>26),F=I+(L^(_|~S))+D[11]+3174756917&4294967295,I=_+(F<<10&4294967295|F>>>22),F=S+(_^(I|~L))+D[2]+718787259&4294967295,S=I+(F<<15&4294967295|F>>>17),F=L+(I^(S|~_))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(S+(F<<21&4294967295|F>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+I&4294967295}n.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var L=_-this.blockSize,D=this.B,S=this.h,I=0;I<_;){if(S==0)for(;I<=L;)s(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<_;)if(D[S++]=T.charCodeAt(I++),S==this.blockSize){s(this,D),S=0;break}}else for(;I<_;)if(D[S++]=T[I++],S==this.blockSize){s(this,D),S=0;break}}this.h=S,this.o+=_},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var L=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=L&255,L/=256;for(this.u(T),T=Array(16),_=L=0;4>_;++_)for(var D=0;32>D;D+=8)T[L++]=this.g[_]>>>D&255;return T};function i(T,_){var L=o;return Object.prototype.hasOwnProperty.call(L,T)?L[T]:L[T]=_(T)}function a(T,_){this.h=_;for(var L=[],D=!0,S=T.length-1;0<=S;S--){var I=T[S]|0;D&&I==_||(L[S]=I,D=!1)}this.g=L}var o={};function A(T){return-128<=T&&128>T?i(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return b(c(-T));for(var _=[],L=1,D=0;T>=L;D++)_[D]=T/L|0,L*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return b(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=c(Math.pow(_,8)),D=f,S=0;S<T.length;S+=8){var I=Math.min(8,T.length-S),F=parseInt(T.substring(S,S+I),_);8>I?(I=c(Math.pow(_,I)),D=D.j(I).add(c(F))):(D=D.j(L),D=D.add(c(F)))}return D}var f=A(0),m=A(1),g=A(16777216);t=a.prototype,t.m=function(){if(C(this))return-b(this).m();for(var T=0,_=1,L=0;L<this.g.length;L++){var D=this.i(L);T+=(0<=D?D:4294967296+D)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(B(this))return"0";if(C(this))return"-"+b(this).toString(T);for(var _=c(Math.pow(T,6)),L=this,D="";;){var S=R(L,_).g;L=y(L,S.j(_));var I=((0<L.g.length?L.g[0]:L.h)>>>0).toString(T);if(L=S,B(L))return I+D;for(;6>I.length;)I="0"+I;D=I+D}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function B(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function C(T){return T.h==-1}t.l=function(T){return T=y(this,T),C(T)?-1:B(T)?0:1};function b(T){for(var _=T.g.length,L=[],D=0;D<_;D++)L[D]=~T.g[D];return new a(L,~T.h).add(m)}t.abs=function(){return C(this)?b(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),L=[],D=0,S=0;S<=_;S++){var I=D+(this.i(S)&65535)+(T.i(S)&65535),F=(I>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);D=F>>>16,I&=65535,F&=65535,L[S]=F<<16|I}return new a(L,L[L.length-1]&-2147483648?-1:0)};function y(T,_){return T.add(b(_))}t.j=function(T){if(B(this)||B(T))return f;if(C(this))return C(T)?b(this).j(b(T)):b(b(this).j(T));if(C(T))return b(this.j(b(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var _=this.g.length+T.g.length,L=[],D=0;D<2*_;D++)L[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<T.g.length;S++){var I=this.i(D)>>>16,F=this.i(D)&65535,Y=T.i(S)>>>16,ue=T.i(S)&65535;L[2*D+2*S]+=F*ue,w(L,2*D+2*S),L[2*D+2*S+1]+=I*ue,w(L,2*D+2*S+1),L[2*D+2*S+1]+=F*Y,w(L,2*D+2*S+1),L[2*D+2*S+2]+=I*Y,w(L,2*D+2*S+2)}for(D=0;D<_;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=_;D<2*_;D++)L[D]=0;return new a(L,0)};function w(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function N(T,_){this.g=T,this.h=_}function R(T,_){if(B(_))throw Error("division by zero");if(B(T))return new N(f,f);if(C(T))return _=R(b(T),_),new N(b(_.g),b(_.h));if(C(_))return _=R(T,b(_)),new N(b(_.g),_.h);if(30<T.g.length){if(C(T)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var L=m,D=_;0>=D.l(T);)L=V(L),D=V(D);var S=O(L,1),I=O(D,1);for(D=O(D,2),L=O(L,2);!B(D);){var F=I.add(D);0>=F.l(T)&&(S=S.add(L),I=F),D=O(D,1),L=O(L,1)}return _=y(T,S.j(_)),new N(S,_)}for(S=f;0<=T.l(_);){for(L=Math.max(1,Math.floor(T.m()/_.m())),D=Math.ceil(Math.log(L)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),I=c(L),F=I.j(_);C(F)||0<F.l(T);)L-=D,I=c(L),F=I.j(_);B(I)&&(I=m),S=S.add(I),T=y(T,F)}return new N(S,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),L=[],D=0;D<_;D++)L[D]=this.i(D)&T.i(D);return new a(L,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),L=[],D=0;D<_;D++)L[D]=this.i(D)|T.i(D);return new a(L,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),L=[],D=0;D<_;D++)L[D]=this.i(D)^T.i(D);return new a(L,this.h^T.h)};function V(T){for(var _=T.g.length+1,L=[],D=0;D<_;D++)L[D]=T.i(D)<<1|T.i(D-1)>>>31;return new a(L,T.h)}function O(T,_){var L=_>>5;_%=32;for(var D=T.g.length-L,S=[],I=0;I<D;I++)S[I]=0<_?T.i(I+L)>>>_|T.i(I+L+1)<<32-_:T.i(I+L);return new a(S,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ZF=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,wc=a}).apply(typeof R5<"u"?R5:typeof self<"u"?self:typeof window<"u"?window:{});var jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e4,Wh,t4,Dg,s2,r4,n4,s4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,Q){return h==Array.prototype||h==Object.prototype||(h[E]=Q.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof jm=="object"&&jm];for(var E=0;E<h.length;++E){var Q=h[E];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var n=r(this);function s(h,E){if(E)e:{var Q=n;h=h.split(".");for(var $=0;$<h.length-1;$++){var ge=h[$];if(!(ge in Q))break e;Q=Q[ge]}h=h[h.length-1],$=Q[h],E=E($),E!=$&&E!=null&&e(Q,h,{configurable:!0,writable:!0,value:E})}}function i(h,E){h instanceof String&&(h+="");var Q=0,$=!1,ge={next:function(){if(!$&&Q<h.length){var Ne=Q++;return{value:E(Ne,h[Ne]),done:!1}}return $=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.values",function(h){return h||function(){return i(this,function(E,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function c(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,Q){return h.call.apply(h.bind,arguments)}function f(h,E,Q){if(!h)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,$),h.apply(E,ge)}}return function(){return h.apply(E,arguments)}}function m(h,E,Q){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(h,E){var Q=Array.prototype.slice.call(arguments,1);return function(){var $=Q.slice();return $.push.apply($,arguments),h.apply(this,$)}}function B(h,E){function Q(){}Q.prototype=E.prototype,h.aa=E.prototype,h.prototype=new Q,h.prototype.constructor=h,h.Qb=function($,ge,Ne){for(var We=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)We[Ht-2]=arguments[Ht];return E.prototype[ge].apply($,We)}}function C(h){const E=h.length;if(0<E){const Q=Array(E);for(let $=0;$<E;$++)Q[$]=h[$];return Q}return[]}function b(h,E){for(let Q=1;Q<arguments.length;Q++){const $=arguments[Q];if(A($)){const ge=h.length||0,Ne=$.length||0;h.length=ge+Ne;for(let We=0;We<Ne;We++)h[ge+We]=$[We]}else h.push($)}}class y{constructor(E,Q){this.i=E,this.j=Q,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function w(h){return/^[\s\xa0]*$/.test(h)}function N(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function R(h){return R[" "](h),h}R[" "]=function(){};var V=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function O(h,E,Q){for(const $ in h)E.call(Q,h[$],$,h)}function T(h,E){for(const Q in h)E.call(void 0,h[Q],Q,h)}function _(h){const E={};for(const Q in h)E[Q]=h[Q];return E}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,E){let Q,$;for(let ge=1;ge<arguments.length;ge++){$=arguments[ge];for(Q in $)h[Q]=$[Q];for(let Ne=0;Ne<L.length;Ne++)Q=L[Ne],Object.prototype.hasOwnProperty.call($,Q)&&(h[Q]=$[Q])}}function S(h){var E=1;h=h.split(":");const Q=[];for(;0<E&&h.length;)Q.push(h.shift()),E--;return h.length&&Q.push(h.join(":")),Q}function I(h){o.setTimeout(()=>{throw h},0)}function F(){var h=ce;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class Y{constructor(){this.h=this.g=null}add(E,Q){const $=ue.get();$.set(E,Q),this.h?this.h.next=$:this.g=$,this.h=$}}var ue=new y(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(E,Q){this.h=E,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let se,z=!1,ce=new Y,ae=()=>{const h=o.Promise.resolve(void 0);se=()=>{h.then(Ce)}};var Ce=()=>{for(var h;h=F();){try{h.h.call(h.g)}catch(Q){I(Q)}var E=ue;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}z=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const Q=()=>{};o.addEventListener("test",Q,E),o.removeEventListener("test",Q,E)}catch{}return h}();function re(h,E){if(k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var Q=this.type=h.type,$=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(V){e:{try{R(E.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(E=null)}}else Q=="mouseover"?E=h.fromElement:Q=="mouseout"&&(E=h.toElement);this.relatedTarget=E,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:oe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}B(re,k);var oe={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),ee=0;function de(h,E,Q,$,ge){this.listener=h,this.proxy=null,this.src=E,this.type=Q,this.capture=!!$,this.ha=ge,this.key=++ee,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function be(h){this.src=h,this.g={},this.h=0}be.prototype.add=function(h,E,Q,$,ge){var Ne=h.toString();h=this.g[Ne],h||(h=this.g[Ne]=[],this.h++);var We=Ve(h,E,$,ge);return-1<We?(E=h[We],Q||(E.fa=!1)):(E=new de(E,this.src,Ne,!!$,ge),E.fa=Q,h.push(E)),E};function Te(h,E){var Q=E.type;if(Q in h.g){var $=h.g[Q],ge=Array.prototype.indexOf.call($,E,void 0),Ne;(Ne=0<=ge)&&Array.prototype.splice.call($,ge,1),Ne&&(xe(E),h.g[Q].length==0&&(delete h.g[Q],h.h--))}}function Ve(h,E,Q,$){for(var ge=0;ge<h.length;++ge){var Ne=h[ge];if(!Ne.da&&Ne.listener==E&&Ne.capture==!!Q&&Ne.ha==$)return ge}return-1}var te="closure_lm_"+(1e6*Math.random()|0),Ae={};function G(h,E,Q,$,ge){if(Array.isArray(E)){for(var Ne=0;Ne<E.length;Ne++)G(h,E[Ne],Q,$,ge);return null}return Q=Ke(Q),h&&h[Z]?h.K(E,Q,c($)?!!$.capture:!1,ge):Re(h,E,Q,!1,$,ge)}function Re(h,E,Q,$,ge,Ne){if(!E)throw Error("Invalid event type");var We=c(ge)?!!ge.capture:!!ge,Ht=it(h);if(Ht||(h[te]=Ht=new be(h)),Q=Ht.add(E,Q,$,We,Ne),Q.proxy)return Q;if($=Le(),Q.proxy=$,$.src=h,$.listener=Q,h.addEventListener)W||(ge=We),ge===void 0&&(ge=!1),h.addEventListener(E.toString(),$,ge);else if(h.attachEvent)h.attachEvent(Xe(E.toString()),$);else if(h.addListener&&h.removeListener)h.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function Le(){function h(Q){return E.call(h.src,h.listener,Q)}const E=Ge;return h}function Fe(h,E,Q,$,ge){if(Array.isArray(E))for(var Ne=0;Ne<E.length;Ne++)Fe(h,E[Ne],Q,$,ge);else $=c($)?!!$.capture:!!$,Q=Ke(Q),h&&h[Z]?(h=h.i,E=String(E).toString(),E in h.g&&(Ne=h.g[E],Q=Ve(Ne,Q,$,ge),-1<Q&&(xe(Ne[Q]),Array.prototype.splice.call(Ne,Q,1),Ne.length==0&&(delete h.g[E],h.h--)))):h&&(h=it(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Ve(E,Q,$,ge)),(Q=-1<h?E[h]:null)&&Pe(Q))}function Pe(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[Z])Te(E.i,h);else{var Q=h.type,$=h.proxy;E.removeEventListener?E.removeEventListener(Q,$,h.capture):E.detachEvent?E.detachEvent(Xe(Q),$):E.addListener&&E.removeListener&&E.removeListener($),(Q=it(E))?(Te(Q,h),Q.h==0&&(Q.src=null,E[te]=null)):xe(h)}}}function Xe(h){return h in Ae?Ae[h]:Ae[h]="on"+h}function Ge(h,E){if(h.da)h=!0;else{E=new re(E,this);var Q=h.listener,$=h.ha||h.src;h.fa&&Pe(h),h=Q.call($,E)}return h}function it(h){return h=h[te],h instanceof be?h:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ke(h){return typeof h=="function"?h:(h[Be]||(h[Be]=function(E){return h.handleEvent(E)}),h[Be])}function ze(){P.call(this),this.i=new be(this),this.M=this,this.F=null}B(ze,P),ze.prototype[Z]=!0,ze.prototype.removeEventListener=function(h,E,Q,$){Fe(this,h,E,Q,$)};function tt(h,E){var Q,$=h.F;if($)for(Q=[];$;$=$.F)Q.push($);if(h=h.M,$=E.type||E,typeof E=="string")E=new k(E,h);else if(E instanceof k)E.target=E.target||h;else{var ge=E;E=new k($,h),D(E,ge)}if(ge=!0,Q)for(var Ne=Q.length-1;0<=Ne;Ne--){var We=E.g=Q[Ne];ge=pt(We,$,!0,E)&&ge}if(We=E.g=h,ge=pt(We,$,!0,E)&&ge,ge=pt(We,$,!1,E)&&ge,Q)for(Ne=0;Ne<Q.length;Ne++)We=E.g=Q[Ne],ge=pt(We,$,!1,E)&&ge}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var Q=h.g[E],$=0;$<Q.length;$++)xe(Q[$]);delete h.g[E],h.h--}}this.F=null},ze.prototype.K=function(h,E,Q,$){return this.i.add(String(h),E,!1,Q,$)},ze.prototype.L=function(h,E,Q,$){return this.i.add(String(h),E,!0,Q,$)};function pt(h,E,Q,$){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var ge=!0,Ne=0;Ne<E.length;++Ne){var We=E[Ne];if(We&&!We.da&&We.capture==Q){var Ht=We.listener,tr=We.ha||We.src;We.fa&&Te(h.i,We),ge=Ht.call(tr,$)!==!1&&ge}}return ge&&!$.defaultPrevented}function ot(h,E,Q){if(typeof h=="function")Q&&(h=m(h,Q));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:o.setTimeout(h,E||0)}function rt(h){h.g=ot(()=>{h.g=null,h.i&&(h.i=!1,rt(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Je extends P{constructor(E,Q){super(),this.m=E,this.l=Q,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(h){P.call(this),this.h=h,this.g={}}B(Ot,P);var Pt=[];function Pr(h){O(h.g,function(E,Q){this.g.hasOwnProperty(Q)&&Pe(E)},h),h.g={}}Ot.prototype.N=function(){Ot.aa.N.call(this),Pr(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=o.JSON.stringify,dr=o.JSON.parse,Gn=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function qt(){}qt.prototype.h=null;function As(h){return h.h||(h.h=h.i())}function ar(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cn(){k.call(this,"d")}B(cn,k);function mr(){k.call(this,"c")}B(mr,k);var Ft={},$t=null;function ls(){return $t=$t||new ze}Ft.La="serverreachability";function qr(h){k.call(this,Ft.La,h)}B(qr,k);function hr(h){const E=ls();tt(E,new qr(E))}Ft.STAT_EVENT="statevent";function Se(h,E){k.call(this,Ft.STAT_EVENT,h),this.stat=E}B(Se,k);function De(h){const E=ls();tt(E,new Se(E,h))}Ft.Ma="timingevent";function Et(h,E){k.call(this,Ft.Ma,h),this.size=E}B(Et,k);function ft(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},E)}function ut(){this.g=!0}ut.prototype.xa=function(){this.g=!1};function Nt(h,E,Q,$,ge,Ne){h.info(function(){if(h.g)if(Ne)for(var We="",Ht=Ne.split("&"),tr=0;tr<Ht.length;tr++){var Vt=Ht[tr].split("=");if(1<Vt.length){var wr=Vt[0];Vt=Vt[1];var Fr=wr.split("_");We=2<=Fr.length&&Fr[1]=="type"?We+(wr+"="+Vt+"&"):We+(wr+"=redacted&")}}else We=null;else We=Ne;return"XMLHTTP REQ ("+$+") [attempt "+ge+"]: "+E+`
`+Q+`
`+We})}function at(h,E,Q,$,ge,Ne,We){h.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ge+"]: "+E+`
`+Q+`
`+Ne+" "+We})}function Bt(h,E,Q,$){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+et(h,Q)+($?" "+$:"")})}function ve(h,E){h.info(function(){return"TIMEOUT: "+E})}ut.prototype.info=function(){};function et(h,E){if(!h.g)return E;if(!E)return null;try{var Q=JSON.parse(E);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var $=Q[h];if(!(2>$.length)){var ge=$[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ne=ge[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var We=1;We<ge.length;We++)ge[We]=""}}}}return Jt(Q)}catch{return E}}var nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wt;function Ct(){}B(Ct,qt),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Wt=new Ct;function gt(h,E,Q,$){this.j=h,this.i=E,this.l=Q,this.R=$||1,this.U=new Ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var fa={},pa={};function ma(h,E,Q){h.L=1,h.v=Ja(Cs(E)),h.m=Q,h.P=!0,Ga(h,null)}function Ga(h,E){h.F=Date.now(),Go(h),h.A=Cs(h.v);var Q=h.A,$=h.R;Array.isArray($)||($=[String($)]),Rt(Q.i,"t",$),h.C=0,Q=h.j.J,h.h=new Bs,h.g=M(h.j,Q?E:null,!h.m),0<h.O&&(h.M=new Je(m(h.Y,h,h.g),h.O)),E=h.U,Q=h.g,$=h.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Pt[0]=ge.toString()),ge=Pt);for(var Ne=0;Ne<ge.length;Ne++){var We=G(Q,ge[Ne],$||E.handleEvent,!1,E.h||E);if(!We)break;E.g[We.key]=We}E=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),hr(),Nt(h.i,h.u,h.A,h.l,h.R,h.m)}gt.prototype.ca=function(h){h=h.target;const E=this.M;E&&_n(h)==3?E.j():this.Y(h)},gt.prototype.Y=function(h){try{if(h==this.g)e:{const Fr=_n(this.g);var E=this.g.Ba();const Ki=this.g.Z();if(!(3>Fr)&&(Fr!=3||this.g&&(this.h.h||this.g.oa()||nu(this.g)))){this.J||Fr!=4||E==7||(E==8||0>=Ki?hr(3):hr(2)),ga(this);var Q=this.g.Z();this.X=Q;t:if(za(this)){var $=nu(this.g);h="";var ge=$.length,Ne=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),wa(this);var We="";break t}this.h.i=new o.TextDecoder}for(E=0;E<ge;E++)this.h.h=!0,h+=this.h.i.decode($[E],{stream:!(Ne&&E==ge-1)});$.length=0,this.h.g+=h,this.C=0,We=this.h.g}else We=this.g.oa();if(this.o=Q==200,at(this.i,this.u,this.A,this.l,this.R,Fr,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,tr=this.g;if((Ht=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ht)){var Vt=Ht;break t}}Vt=null}if(Q=Vt)Bt(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$a(this,Q);else{this.o=!1,this.s=3,De(12),ki(this),wa(this);break e}}if(this.P){Q=!0;let $n;for(;!this.J&&this.C<We.length;)if($n=$c(this,We),$n==pa){Fr==4&&(this.s=4,De(14),Q=!1),Bt(this.i,this.l,null,"[Incomplete Response]");break}else if($n==fa){this.s=4,De(15),Bt(this.i,this.l,We,"[Invalid Chunk]"),Q=!1;break}else Bt(this.i,this.l,$n,null),$a(this,$n);if(za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fr!=4||We.length!=0||this.h.h||(this.s=1,De(16),Q=!1),this.o=this.o&&Q,!Q)Bt(this.i,this.l,We,"[Invalid Chunked Response]"),ki(this),wa(this);else if(0<We.length&&!this.W){this.W=!0;var wr=this.j;wr.g==this&&wr.ba&&!wr.M&&(wr.j.info("Great, no buffering proxy detected. Bytes received: "+We.length),aA(wr),wr.M=!0,De(11))}}else Bt(this.i,this.l,We,null),$a(this,We);Fr==4&&ki(this),this.o&&!this.J&&(Fr==4?Ba(this.j,this):(this.o=!1,Go(this)))}else xa(this.g),Q==400&&0<We.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),ki(this),wa(this)}}}catch{}finally{}};function za(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $c(h,E){var Q=h.C,$=E.indexOf(`
`,Q);return $==-1?pa:(Q=Number(E.substring(Q,$)),isNaN(Q)?fa:($+=1,$+Q>E.length?pa:(E=E.slice($,$+Q),h.C=$+Q,E)))}gt.prototype.cancel=function(){this.J=!0,ki(this)};function Go(h){h.S=Date.now()+h.I,Wc(h,h.I)}function Wc(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ft(m(h.ba,h),E)}function ga(h){h.B&&(o.clearTimeout(h.B),h.B=null)}gt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ve(this.i,this.A),this.L!=2&&(hr(),De(17)),ki(this),this.s=2,wa(this)):Wc(this,this.S-h)};function wa(h){h.j.G==0||h.J||Ba(h.j,h)}function ki(h){ga(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,Pr(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function $a(h,E){try{var Q=h.j;if(Q.G!=0&&(Q.g==h||Tl(Q.h,h))){if(!h.K&&Tl(Q.h,h)&&Q.G==3){try{var $=Q.Da.g.parse(E)}catch{$=null}if(Array.isArray($)&&$.length==3){var ge=$;if(ge[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<h.F)Vi(Q),rA(Q);else break e;ro(Q),De(18)}}else Q.za=ge[1],0<Q.za-Q.T&&37500>ge[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=ft(m(Q.Za,Q),6e3));if(1>=Wa(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else cs(Q,11)}else if((h.K||Q.g==h)&&Vi(Q),!w(E))for(ge=Q.Da.g.parse(E),E=0;E<ge.length;E++){let Vt=ge[E];if(Q.T=Vt[0],Vt=Vt[1],Q.G==2)if(Vt[0]=="c"){Q.K=Vt[1],Q.ia=Vt[2];const wr=Vt[3];wr!=null&&(Q.la=wr,Q.j.info("VER="+Q.la));const Fr=Vt[4];Fr!=null&&(Q.Aa=Fr,Q.j.info("SVER="+Q.Aa));const Ki=Vt[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&($=1.5*Ki,Q.L=$,Q.j.info("backChannelRequestTimeoutMs_="+$)),$=Q;const $n=h.g;if($n){const Ca=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ca){var Ne=$.h;Ne.g||Ca.indexOf("spdy")==-1&&Ca.indexOf("quic")==-1&&Ca.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(Dr(Ne,Ne.h),Ne.h=null))}if($.D){const Ea=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&($.ya=Ea,yr($.I,$.D,Ea))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-h.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),$=Q;var We=h;if($.qa=v($,$.J?$.ia:null,$.W),We.K){Ul($.h,We);var Ht=We,tr=$.L;tr&&(Ht.I=tr),Ht.B&&(ga(Ht),Go(Ht)),$.g=We}else iA($);0<Q.i.length&&nA(Q)}else Vt[0]!="stop"&&Vt[0]!="close"||cs(Q,7);else Q.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?cs(Q,7):Hi(Q):Vt[0]!="noop"&&Q.l&&Q.l.ta(Vt),Q.v=0)}}hr(4)}catch{}}var Zd=class{constructor(h,E){this.g=h,this.map=E}};function Fl(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wa(h){return h.h?1:h.g?h.g.size:0}function Tl(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Dr(h,E){h.g?h.g.add(E):h.h=E}function Ul(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Fl.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const Q of h.g.values())E=E.concat(Q.D);return E}return C(h.i)}function Jc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(A(h)){for(var E=[],Q=h.length,$=0;$<Q;$++)E.push(h[$]);return E}E=[],Q=0;for($ in h)E[Q++]=h[$];return E}function Ql(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(A(h)||typeof h=="string"){var E=[];h=h.length;for(var Q=0;Q<h;Q++)E.push(Q);return E}E=[],Q=0;for(const $ in h)E[Q++]=$;return E}}}function Yc(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(A(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var Q=Ql(h),$=Jc(h),ge=$.length,Ne=0;Ne<ge;Ne++)E.call(void 0,$[Ne],Q&&Q[Ne],h)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zo(h,E){if(h){h=h.split("&");for(var Q=0;Q<h.length;Q++){var $=h[Q].indexOf("="),ge=null;if(0<=$){var Ne=h[Q].substring(0,$);ge=h[Q].substring($+1)}else Ne=h[Q];E(Ne,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function sn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof sn){this.h=h.h,Xa(this,h.j),this.o=h.o,this.g=h.g,$o(this,h.s),this.l=h.l;var E=h.i,Q=new va;Q.i=E.i,E.g&&(Q.g=new Map(E.g),Q.h=E.h),Ll(this,Q),this.m=h.m}else h&&(E=String(h).match(ks))?(this.h=!1,Xa(this,E[1]||"",!0),this.o=Ya(E[2]||""),this.g=Ya(E[3]||"",!0),$o(this,E[4]),this.l=Ya(E[5]||"",!0),Ll(this,E[6]||"",!0),this.m=Ya(E[7]||"")):(this.h=!1,this.i=new va(null,this.h))}sn.prototype.toString=function(){var h=[],E=this.j;E&&h.push(Ri(E,Zc,!0),":");var Q=this.g;return(Q||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Ri(E,Zc,!0),"@"),h.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&h.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&h.push("/"),h.push(Ri(Q,Q.charAt(0)=="/"?Di:th,!0))),(Q=this.i.toString())&&h.push("?",Q),(Q=this.m)&&h.push("#",Ri(Q,Xo)),h.join("")};function Cs(h){return new sn(h)}function Xa(h,E,Q){h.j=Q?Ya(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function $o(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Ll(h,E,Q){E instanceof va?(h.i=E,rh(h.i,h.h)):(Q||(E=Ri(E,Wo)),h.i=new va(E,h.h))}function yr(h,E,Q){h.i.set(E,Q)}function Ja(h){return yr(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ya(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ri(h,E,Q){return typeof h=="string"?(h=encodeURI(h).replace(E,eh),Q&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function eh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zc=/[#\/\?@]/g,th=/[#\?:]/g,Di=/[#\?]/g,Wo=/[#\?@]/g,Xo=/#/g;function va(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Or(h){h.g||(h.g=new Map,h.h=0,h.i&&zo(h.i,function(E,Q){h.add(decodeURIComponent(E.replace(/\+/g," ")),Q)}))}t=va.prototype,t.add=function(h,E){Or(this),this.i=null,h=ya(this,h);var Q=this.g.get(h);return Q||this.g.set(h,Q=[]),Q.push(E),this.h+=1,this};function eu(h,E){Or(h),E=ya(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function jl(h,E){return Or(h),E=ya(h,E),h.g.has(E)}t.forEach=function(h,E){Or(this),this.g.forEach(function(Q,$){Q.forEach(function(ge){h.call(E,ge,$,this)},this)},this)},t.na=function(){Or(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),Q=[];for(let $=0;$<E.length;$++){const ge=h[$];for(let Ne=0;Ne<ge.length;Ne++)Q.push(E[$])}return Q},t.V=function(h){Or(this);let E=[];if(typeof h=="string")jl(this,h)&&(E=E.concat(this.g.get(ya(this,h))));else{h=Array.from(this.g.values());for(let Q=0;Q<h.length;Q++)E=E.concat(h[Q])}return E},t.set=function(h,E){return Or(this),this.i=null,h=ya(this,h),jl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},t.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Rt(h,E,Q){eu(h,E),0<Q.length&&(h.i=null,h.g.set(ya(h,E),C(Q)),h.h+=Q.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var Q=0;Q<E.length;Q++){var $=E[Q];const Ne=encodeURIComponent(String($)),We=this.V($);for($=0;$<We.length;$++){var ge=Ne;We[$]!==""&&(ge+="="+encodeURIComponent(String(We[$]))),h.push(ge)}}return this.i=h.join("&")};function ya(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function rh(h,E){E&&!h.j&&(Or(h),h.i=null,h.g.forEach(function(Q,$){var ge=$.toLowerCase();$!=ge&&(eu(this,$),Rt(this,ge,Q))},h)),h.j=E}function pi(h,E){const Q=new ut;if(o.Image){const $=new Image;$.onload=g(Js,Q,"TestLoadImage: loaded",!0,E,$),$.onerror=g(Js,Q,"TestLoadImage: error",!1,E,$),$.onabort=g(Js,Q,"TestLoadImage: abort",!1,E,$),$.ontimeout=g(Js,Q,"TestLoadImage: timeout",!1,E,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=h}else E(!1)}function tu(h,E){const Q=new ut,$=new AbortController,ge=setTimeout(()=>{$.abort(),Js(Q,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:$.signal}).then(Ne=>{clearTimeout(ge),Ne.ok?Js(Q,"TestPingServer: ok",!0,E):Js(Q,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ge),Js(Q,"TestPingServer: error",!1,E)})}function Js(h,E,Q,$,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),$(Q)}catch{}}function Jo(){this.g=new Gn}function kl(h,E,Q){const $=Q||"";try{Yc(h,function(ge,Ne){let We=ge;c(ge)&&(We=Jt(ge)),E.push($+Ne+"="+encodeURIComponent(We))})}catch(ge){throw E.push($+"type="+encodeURIComponent("_badmap")),ge}}function Yo(h){this.l=h.Ub||null,this.j=h.eb||!1}B(Yo,qt),Yo.prototype.g=function(){return new Zo(this.l,this.j)},Yo.prototype.i=function(h){return function(){return h}}({});function Zo(h,E){ze.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Zo,ze),t=Zo.prototype,t.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,Ys(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||o).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ru(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ru(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Oi(this):Ys(this),this.readyState==3&&ru(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Oi(this))},t.Qa=function(h){this.g&&(this.response=h,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ys(h)}t.setRequestHeader=function(h,E){this.u.append(h,E)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var Q=E.next();!Q.done;)Q=Q.value,h.push(Q[0]+": "+Q[1]),Q=E.next();return h.join(`\r
`)};function Ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mi(h){let E="";return O(h,function(Q,$){E+=$,E+=":",E+=Q,E+=`\r
`}),E}function Rl(h,E,Q){e:{for($ in Q){var $=!1;break e}$=!0}$||(Q=Mi(Q),typeof h=="string"?Q!=null&&encodeURIComponent(String(Q)):yr(h,E,Q))}function gr(h){ze.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(gr,ze);var Dl=/^https?$/i,eA=["POST","PUT"];t=gr.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,E,Q,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wt.g(),this.v=this.o?As(this.o):As(Wt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(Ne){Ol(this,Ne);return}if(h=Q||"",Q=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ge in $)Q.set(ge,$[ge]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const Ne of $.keys())Q.set(Ne,$.get(Ne));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(Q.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ge=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(eA,E,void 0))||$||ge||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,We]of Q)this.g.setRequestHeader(Ne,We);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Ne){Ol(this,Ne)}};function Ol(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Ml(h),Za(h)}function Ml(h){h.A||(h.A=!0,tt(h,"complete"),tt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tt(this,"complete"),tt(this,"abort"),Za(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Za(this,!0)),gr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hl(this):this.bb())},t.bb=function(){Hl(this)};function Hl(h){if(h.h&&typeof a<"u"&&(!h.v[1]||_n(h)!=4||h.Z()!=2)){if(h.u&&_n(h)==4)ot(h.Ea,0,h);else if(tt(h,"readystatechange"),_n(h)==4){h.h=!1;try{const We=h.Z();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var Q;if(!(Q=E)){var $;if($=We===0){var ge=String(h.D).match(ks)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),$=!Dl.test(ge?ge.toLowerCase():"")}Q=$}if(Q)tt(h,"complete"),tt(h,"success");else{h.m=6;try{var Ne=2<_n(h)?h.g.statusText:""}catch{Ne=""}h.l=Ne+" ["+h.Z()+"]",Ml(h)}}finally{Za(h)}}}}function Za(h,E){if(h.g){Zs(h);const Q=h.g,$=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||tt(h,"ready");try{Q.onreadystatechange=$}catch{}}}function Zs(h){h.I&&(o.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _n(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),dr(E)}};function nu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(h){const E={};h=(h.g&&2<=_n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<h.length;$++){if(w(h[$]))continue;var Q=S(h[$]);const ge=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Ne=E[ge]||[];E[ge]=Ne,Ne.push(Q)}T(E,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(h,E,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[h]||E}function tA(h){this.Aa=0,this.i=[],this.j=new ut,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,h),this.cb=zn("retryDelaySeedMs",1e4,h),this.Wa=zn("forwardChannelMaxRetries",2,h),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Fl(h&&h.concurrentRequestLimit),this.Da=new Jo,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tA.prototype,t.la=8,t.G=1,t.connect=function(h,E,Q,$){De(0),this.W=h,this.H=E||{},Q&&$!==void 0&&(this.H.OSID=Q,this.H.OAID=$),this.F=this.X,this.I=v(this,null,this.W),nA(this)};function Hi(h){if(eo(h),h.G==3){var E=h.U++,Q=Cs(h.I);if(yr(Q,"SID",h.K),yr(Q,"RID",E),yr(Q,"TYPE","terminate"),ba(h,Q),E=new gt(h,h.j,E),E.L=2,E.v=Ja(Cs(Q)),Q=!1,o.navigator&&o.navigator.sendBeacon)try{Q=o.navigator.sendBeacon(E.v.toString(),"")}catch{}!Q&&o.Image&&(new Image().src=E.v,Q=!0),Q||(E.g=M(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Go(E)}AA(h)}function rA(h){h.g&&(aA(h),h.g.cancel(),h.g=null)}function eo(h){rA(h),h.u&&(o.clearTimeout(h.u),h.u=null),Vi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function nA(h){if(!Xc(h.h)&&!h.s){h.s=!0;var E=h.Ga;se||ae(),z||(se(),z=!0),ce.add(E,h),h.B=0}}function Vl(h,E){return Wa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ft(m(h.Ga,h,E),oA(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ge=new gt(this,this.j,h);let Ne=this.o;if(this.S&&(Ne?(Ne=_(Ne),D(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(ge.H=Ne,Ne=null),this.P)e:{for(var E=0,Q=0;Q<this.i.length;Q++){t:{var $=this.i[Q];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(E+=$,4096<E){E=Q;break e}if(E===4096||Q===this.i.length-1){E=Q+1;break e}}E=1e3}else E=1e3;E=to(this,ge,E),Q=Cs(this.I),yr(Q,"RID",h),yr(Q,"CVER",22),this.D&&yr(Q,"X-HTTP-Session-Id",this.D),ba(this,Q),Ne&&(this.O?E="headers="+encodeURIComponent(String(Mi(Ne)))+"&"+E:this.m&&Rl(Q,this.m,Ne)),Dr(this.h,ge),this.Ua&&yr(Q,"TYPE","init"),this.P?(yr(Q,"$req",E),yr(Q,"SID","null"),ge.T=!0,ma(ge,Q,null)):ma(ge,Q,E),this.G=2}}else this.G==3&&(h?sA(this,h):this.i.length==0||Xc(this.h)||sA(this))};function sA(h,E){var Q;E?Q=E.l:Q=h.U++;const $=Cs(h.I);yr($,"SID",h.K),yr($,"RID",Q),yr($,"AID",h.T),ba(h,$),h.m&&h.o&&Rl($,h.m,h.o),Q=new gt(h,h.j,Q,h.B+1),h.m===null&&(Q.H=h.o),E&&(h.i=E.D.concat(h.i)),E=to(h,Q,1e3),Q.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Dr(h.h,Q),ma(Q,$,E)}function ba(h,E){h.H&&O(h.H,function(Q,$){yr(E,$,Q)}),h.l&&Yc({},function(Q,$){yr(E,$,Q)})}function to(h,E,Q){Q=Math.min(h.i.length,Q);var $=h.l?m(h.l.Na,h.l,h):null;e:{var ge=h.i;let Ne=-1;for(;;){const We=["count="+Q];Ne==-1?0<Q?(Ne=ge[0].g,We.push("ofs="+Ne)):Ne=0:We.push("ofs="+Ne);let Ht=!0;for(let tr=0;tr<Q;tr++){let Vt=ge[tr].g;const wr=ge[tr].map;if(Vt-=Ne,0>Vt)Ne=Math.max(0,ge[tr].g-100),Ht=!1;else try{kl(wr,We,"req"+Vt+"_")}catch{$&&$(wr)}}if(Ht){$=We.join("&");break e}}}return h=h.i.splice(0,Q),E.D=h,$}function iA(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;se||ae(),z||(se(),z=!0),ce.add(E,h),h.v=0}}function ro(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ft(m(h.Fa,h),oA(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ft(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),rA(this),su(this))};function aA(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function su(h){h.g=new gt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=Cs(h.qa);yr(E,"RID","rpc"),yr(E,"SID",h.K),yr(E,"AID",h.T),yr(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&yr(E,"TO",h.ja),yr(E,"TYPE","xmlhttp"),ba(h,E),h.m&&h.o&&Rl(E,h.m,h.o),h.L&&(h.g.I=h.L);var Q=h.g;h=h.ia,Q.L=1,Q.v=Ja(Cs(E)),Q.m=null,Q.P=!0,Ga(Q,h)}t.Za=function(){this.C!=null&&(this.C=null,rA(this),ro(this),De(19))};function Vi(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function Ba(h,E){var Q=null;if(h.g==E){Vi(h),aA(h),h.g=null;var $=2}else if(Tl(h.h,E))Q=E.D,Ul(h.h,E),$=1;else return;if(h.G!=0){if(E.o)if($==1){Q=E.m?E.m.length:0,E=Date.now()-E.F;var ge=h.B;$=ls(),tt($,new Et($,Q)),nA(h)}else iA(h);else if(ge=E.s,ge==3||ge==0&&0<E.X||!($==1&&Vl(h,E)||$==2&&ro(h)))switch(Q&&0<Q.length&&(E=h.h,E.i=E.i.concat(Q)),ge){case 1:cs(h,5);break;case 4:cs(h,10);break;case 3:cs(h,6);break;default:cs(h,2)}}}function oA(h,E){let Q=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(Q*=2),Q*E}function cs(h,E){if(h.j.info("Error code "+E),E==2){var Q=m(h.fb,h),$=h.Xa;const ge=!$;$=new sn($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xa($,"https"),Ja($),ge?pi($.toString(),Q):tu($.toString(),Q)}else De(2);h.G=0,h.l&&h.l.sa(E),AA(h),eo(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function AA(h){if(h.G=0,h.ka=[],h.l){const E=Pl(h.h);(E.length!=0||h.i.length!=0)&&(b(h.ka,E),b(h.ka,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.ra()}}function v(h,E,Q){var $=Q instanceof sn?Cs(Q):new sn(Q);if($.g!="")E&&($.g=E+"."+$.g),$o($,$.s);else{var ge=o.location;$=ge.protocol,E=E?E+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ne=new sn(null);$&&Xa(Ne,$),E&&(Ne.g=E),ge&&$o(Ne,ge),Q&&(Ne.l=Q),$=Ne}return Q=h.D,E=h.ya,Q&&E&&yr($,Q,E),yr($,"VER",h.la),ba(h,$),$}function M(h,E,Q){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new gr(new Yo({eb:Q})):new gr(h.pa),E.Ha(h.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function le(){}t=le.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function he(){}he.prototype.g=function(h,E){return new we(h,E)};function we(h,E){ze.call(this),this.g=new tA(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!w(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!w(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new lt(this)}B(we,ze),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Hi(this.g)},we.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var Q={};Q.__data__=h,h=Q}else this.u&&(Q={},Q.__data__=Jt(h),h=Q);E.i.push(new Zd(E.Ya++,h)),E.G==3&&nA(E)},we.prototype.N=function(){this.g.l=null,delete this.j,Hi(this.g),delete this.g,we.aa.N.call(this)};function je(h){cn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const Q in E){h=Q;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}B(je,cn);function $e(){mr.call(this),this.status=1}B($e,mr);function lt(h){this.g=h}B(lt,le),lt.prototype.ua=function(){tt(this.g,"a")},lt.prototype.ta=function(h){tt(this.g,new je(h))},lt.prototype.sa=function(h){tt(this.g,new $e)},lt.prototype.ra=function(){tt(this.g,"b")},he.prototype.createWebChannel=he.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,s4=function(){return new he},n4=function(){return ls()},r4=Ft,s2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,Dg=nt,jt.COMPLETE="complete",t4=jt,ar.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Wh=ar,gr.prototype.listenOnce=gr.prototype.L,gr.prototype.getLastError=gr.prototype.Ka,gr.prototype.getLastErrorCode=gr.prototype.Ba,gr.prototype.getStatus=gr.prototype.Z,gr.prototype.getResponseJson=gr.prototype.Oa,gr.prototype.getResponseText=gr.prototype.oa,gr.prototype.send=gr.prototype.ea,gr.prototype.setWithCredentials=gr.prototype.Ha,e4=gr}).apply(typeof jm<"u"?jm:typeof self<"u"?self:typeof window<"u"?window:{});const D5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Ab("@firebase/firestore");function ku(){return Pc.logLevel}function Ye(t,...e){if(Pc.logLevel<=sr.DEBUG){const r=e.map(bb);Pc.debug(`Firestore (${Vd}): ${t}`,...r)}}function Fs(t,...e){if(Pc.logLevel<=sr.ERROR){const r=e.map(bb);Pc.error(`Firestore (${Vd}): ${t}`,...r)}}function dl(t,...e){if(Pc.logLevel<=sr.WARN){const r=e.map(bb);Pc.warn(`Firestore (${Vd}): ${t}`,...r)}}function bb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t="Unexpected state"){const e=`FIRESTORE (${Vd}) INTERNAL ASSERTION FAILED: `+t;throw Fs(e),new Error(e)}function _t(t,e){t||bt()}function Mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Ko{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(es.UNAUTHENTICATED))}shutdown(){}}class nO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sO{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){_t(this.o===void 0);let n=this.i;const s=A=>this.i!==n?(n=this.i,r(A)):Promise.resolve();let i=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new i4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new es(e)}}class iO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=es.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new iO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){_t(this.o===void 0);const n=i=>{i.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Ye("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_t(typeof r.token=="string"),this.R=r.token,new oO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=lO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Gt(t,e){return t<e?-1:t>e?1:0}function _d(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function o4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Lt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Lt(0,0))}static max(){return new It(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,r,n){r===void 0?r=0:r>e.length&&bt(),n===void 0?n=e.length-r:n>e.length-r&&bt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return tp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof tp?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ur extends tp{construct(e,r,n){return new ur(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new st(ke.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ur(r)}static emptyPath(){return new ur([])}}const cO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends tp{construct(e,r,n){return new Xr(e,r,n)}static isValidIdentifier(e){return cO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new st(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new st(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new st(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(r)}static emptyPath(){return new Xr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(ur.fromString(e))}static fromName(e){return new ht(ur.fromString(e).popFirst(5))}static empty(){return new ht(ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ur.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function i2(t){return t.fields.find(e=>e.kind===2)}function rc(t){return t.fields.filter(e=>e.kind!==2)}F0.UNKNOWN_ID=-1;class Og{constructor(e,r){this.fieldPath=e,this.kind=r}}class rp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new rp(0,ci.min())}}function uO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=It.fromTimestamp(n===1e9?new Lt(r+1,0):new Lt(r,n));return new ci(s,ht.empty(),e)}function A4(t){return new ci(t.readTime,t.key,-1)}class ci{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ci(It.min(),ht.empty(),-1)}static max(){return new ci(It.max(),ht.empty(),-1)}}function Cb(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ht.comparator(t.documentKey,e.documentKey),r!==0?r:Gt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==l4)throw t;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ie((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ie?r:Ie.resolve(r)}catch(r){return Ie.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ie.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ie.reject(r)}static resolve(e){return new Ie((r,n)=>{r(e)})}static reject(e){return new Ie((r,n)=>{n(e)})}static waitFor(e){return new Ie((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},A=>n(A))}),a=!0,i===s&&r()})}static or(e){let r=Ie.resolve(!1);for(const n of e)r=r.next(s=>s?Ie.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ie((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;r(e[c]).next(d=>{a[c]=d,++o,o===i&&n(a)},d=>s(d))}})}static doWhile(e,r){return new Ie((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new sa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new gf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Eb(n.target.error);this.V.reject(new gf(e,s))}}static open(e,r,n,s){try{return new _w(r,e.transaction(s,n))}catch(i){throw new gf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ye("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new hO(r)}}class il{constructor(e,r,n){this.name=e,this.version=r,this.p=n,il.S(Pn())===12.2&&Fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ye("SimpleDb","Removing database:",e),ic(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!uF())return!1;if(il.v())return!0;const e=Pn(),r=il.S(e),n=0<r&&r<10,s=u4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ye("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new st(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new st(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new gf(e,a))},s.onupgradeneeded=i=>{Ye("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{Ye("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=_w.open(this.db,e,i?"readonly":"readwrite",n),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Ie.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(Ye("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function u4(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class dO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ic(this.B.delete())}}class gf extends st{constructor(e,r){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Nl(t){return t.name==="IndexedDbTransactionError"}class hO{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ye("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ye("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ic(n)}add(e){return Ye("SimpleDb","ADD",this.store.name,e,e),ic(this.store.add(e))}get(e){return ic(this.store.get(e)).next(r=>(r===void 0&&(r=null),Ye("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ye("SimpleDb","DELETE",this.store.name,e),ic(this.store.delete(e))}count(){return Ye("SimpleDb","COUNT",this.store.name),ic(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Ie((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ie((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){Ye("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Ie((n,s)=>{r.onerror=i=>{const a=Eb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Ie((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new dO(o),c=r(o.primaryKey,o.value,A);if(c instanceof Ie){const d=c.catch(f=>(A.done(),Ie.reject(f)));n.push(d)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Ie.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ic(t){return new Ie((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Eb(n.target.error);r(s)}})}let O5=!1;function Eb(t){const e=il.S(Pn());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O5||(O5=!0,setTimeout(()=>{throw n},0)),n}}return t}class fO{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ye("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Ye("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Nl(r)?Ye("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Hc(r)}await this.X(6e4)})}}class pO{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Ie.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Ye("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(Ye("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=A4(i);Cb(a,n)>0&&(n=a)}),new ci(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fi.oe=-1;function Pp(t){return t==null}function np(t){return t===0&&1/t==-1/0}function mO(t){return typeof t=="number"&&Number.isInteger(t)&&!np(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=M5(e)),e=gO(t.get(r),e);return M5(e)}function gO(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function M5(t){return t+""}function Pa(t){const e=t.length;if(_t(e>=2),e===2)return _t(t.charAt(0)===""&&t.charAt(1)===""),ur.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&bt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),n.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:bt()}i=a+2}return new ur(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){return[t,Ps(e)]}function d4(t,e,r){return[t,Ps(e),r]}const wO={},vO=["prefixPath","collectionGroup","readTime","documentId"],yO=["prefixPath","collectionGroup","documentId"],xO=["collectionGroup","readTime","prefixPath","documentId"],bO=["canonicalId","targetId"],BO=["targetId","path"],CO=["path","targetId"],EO=["collectionId","parent"],_O=["indexId","uid"],NO=["uid","sequenceNumber"],IO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SO=["indexId","uid","orderedDocumentKey"],FO=["userId","collectionPath","documentId"],TO=["userId","collectionPath","largestBatchId"],UO=["userId","collectionGroup","largestBatchId"],h4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PO=[...h4,"documentOverlays"],f4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],p4=f4,_b=[...p4,"indexConfiguration","indexState","indexEntries"],QO=_b,LO=[..._b,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends c4{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Qn(t,e){const r=Mt(t);return il.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Vc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function m4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,r){this.comparator=e,this.root=r||ts.EMPTY}insert(e,r){return new Zr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new km(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new km(this.root,e,this.comparator,!1)}getReverseIterator(){return new km(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new km(this.root,e,this.comparator,!0)}}class km{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ts.RED,this.left=s??ts.EMPTY,this.right=i??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ts(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ts.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1;ts.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ts(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new K5(this.data.getIterator())}getIteratorFrom(e){return new K5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Sr(this.comparator);return r.data=e,r}}class K5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.fields=e,e.sort(Xr.comparator)}static empty(){return new Gs([])}unionWith(e){let r=new Sr(Xr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Gs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return _d(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new g4("Invalid base64 string: "+i):i}}(e);return new yn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const jO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(t){if(_t(!!t),typeof t=="string"){let e=0;const r=jO.exec(t);if(_t(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zr(t.seconds),nanos:zr(t.nanos)}}function zr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hl(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ib(t){const e=t.mapValue.fields.__previous_value__;return Nb(e)?Ib(e):e}function sp(t){const e=Mo(t.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,r,n,s,i,a,o,A,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class fl{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hg={nullValue:"NULL_VALUE"};function Qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nb(t)?4:w4(t)?9007199254740991:Nw(t)?10:11:bt()}function Ma(t,e){if(t===e)return!0;const r=Qc(t);if(r!==Qc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sp(t).isEqual(sp(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Mo(s.timestampValue),o=Mo(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hl(s.bytesValue).isEqual(hl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return zr(s.geoPointValue.latitude)===zr(i.geoPointValue.latitude)&&zr(s.geoPointValue.longitude)===zr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return zr(s.integerValue)===zr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=zr(s.doubleValue),o=zr(i.doubleValue);return a===o?np(a)===np(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return _d(t.arrayValue.values||[],e.arrayValue.values||[],Ma);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(V5(a)!==V5(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!Ma(a[A],o[A])))return!1;return!0}(t,e);default:return bt()}}function ip(t,e){return(t.values||[]).find(r=>Ma(r,e))!==void 0}function pl(t,e){if(t===e)return 0;const r=Qc(t),n=Qc(e);if(r!==n)return Gt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Gt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=zr(i.integerValue||i.doubleValue),A=zr(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return q5(t.timestampValue,e.timestampValue);case 4:return q5(sp(t),sp(e));case 5:return Gt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=hl(i),A=hl(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const d=Gt(o[c],A[c]);if(d!==0)return d}return Gt(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Gt(zr(i.latitude),zr(a.latitude));return o!==0?o:Gt(zr(i.longitude),zr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return G5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,d;const f=i.fields||{},m=a.fields||{},g=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=(A=m.value)===null||A===void 0?void 0:A.arrayValue,C=Gt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=B==null?void 0:B.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:G5(g,B)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===VA.mapValue&&a===VA.mapValue)return 0;if(i===VA.mapValue)return 1;if(a===VA.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},d=Object.keys(c);A.sort(),d.sort();for(let f=0;f<A.length&&f<d.length;++f){const m=Gt(A[f],d[f]);if(m!==0)return m;const g=pl(o[A[f]],c[d[f]]);if(g!==0)return g}return Gt(A.length,d.length)}(t.mapValue,e.mapValue);default:throw bt()}}function q5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Gt(t,e);const r=Mo(t),n=Mo(e),s=Gt(r.seconds,n.seconds);return s!==0?s:Gt(r.nanos,n.nanos)}function G5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=pl(r[s],n[s]);if(i)return i}return Gt(r.length,n.length)}function Nd(t){return o2(t)}function o2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Mo(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return hl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ht.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=o2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${o2(r.fields[a])}`;return s+"}"}(t.mapValue):bt()}function ap(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function A2(t){return!!t&&"integerValue"in t}function op(t){return!!t&&"arrayValue"in t}function z5(t){return!!t&&"nullValue"in t}function $5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vg(t){return!!t&&"mapValue"in t}function Nw(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function wf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=wf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=wf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function w4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const v4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RO(t){return"nullValue"in t?Hg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ap(fl.empty(),ht.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Nw(t)?v4:{mapValue:{}}:bt()}function DO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ap(fl.empty(),ht.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?v4:"mapValue"in t?Nw(t)?{mapValue:{}}:VA:bt()}function W5(t,e){const r=pl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function X5(t,e){const r=pl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Vg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=wf(r)}setAll(e){let r=Xr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const A=this.getFieldsMap(r);this.applyChanges(A,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=wf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Vg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ma(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Vg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Vc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ns(wf(this.value))}}function y4(t){const e=[];return Vc(t.fields,(r,n)=>{const s=new Xr([r]);if(Vg(n)){const i=y4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Gs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Wr(e,0,It.min(),It.min(),It.min(),ns.empty(),0)}static newFoundDocument(e,r,n,s){return new Wr(e,1,r,It.min(),n,s,0)}static newNoDocument(e,r){return new Wr(e,2,r,It.min(),It.min(),ns.empty(),0)}static newUnknownDocument(e,r){return new Wr(e,3,r,It.min(),It.min(),ns.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r){this.position=e,this.inclusive=r}}function J5(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=ht.comparator(ht.fromName(a.referenceValue),r.key):n=pl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Y5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ma(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,r="asc"){this.field=e,this.dir=r}}function OO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{}class ir extends x4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new MO(e,r,n):r==="array-contains"?new KO(e,n):r==="in"?new N4(e,n):r==="not-in"?new qO(e,n):r==="array-contains-any"?new GO(e,n):new ir(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new HO(e,n):new VO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(pl(r,this.value)):r!==null&&Qc(this.value)===Qc(r)&&this.matchesComparison(pl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends x4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Cr(e,r)}matches(e){return Sd(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sd(t){return t.op==="and"}function l2(t){return t.op==="or"}function Sb(t){return b4(t)&&Sd(t)}function b4(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function c2(t){if(t instanceof ir)return t.field.canonicalString()+t.op.toString()+Nd(t.value);if(Sb(t))return t.filters.map(e=>c2(e)).join(",");{const e=t.filters.map(r=>c2(r)).join(",");return`${t.op}(${e})`}}function B4(t,e){return t instanceof ir?function(n,s){return s instanceof ir&&n.op===s.op&&n.field.isEqual(s.field)&&Ma(n.value,s.value)}(t,e):t instanceof Cr?function(n,s){return s instanceof Cr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&B4(a,s.filters[o]),!0):!1}(t,e):void bt()}function C4(t,e){const r=t.filters.concat(e);return Cr.create(r,t.op)}function E4(t){return t instanceof ir?function(r){return`${r.field.canonicalString()} ${r.op} ${Nd(r.value)}`}(t):t instanceof Cr?function(r){return r.op.toString()+" {"+r.getFilters().map(E4).join(" ,")+"}"}(t):"Filter"}class MO extends ir{constructor(e,r,n){super(e,r,n),this.key=ht.fromName(n.referenceValue)}matches(e){const r=ht.comparator(e.key,this.key);return this.matchesComparison(r)}}class HO extends ir{constructor(e,r){super(e,"in",r),this.keys=_4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class VO extends ir{constructor(e,r){super(e,"not-in",r),this.keys=_4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function _4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ht.fromName(n.referenceValue))}class KO extends ir{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return op(r)&&ip(r.arrayValue,this.value)}}class N4 extends ir{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ip(this.value.arrayValue,r)}}class qO extends ir{constructor(e,r){super(e,"not-in",r)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ip(this.value.arrayValue,r)}}class GO extends ir{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!op(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ip(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function u2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new zO(t,e,r,n,s,i,a)}function Lc(t){const e=Mt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>c2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Pp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Nd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Nd(n)).join(",")),e.ue=r}return e.ue}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!OO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!B4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y5(t.startAt,e.startAt)&&Y5(t.endAt,e.endAt)}function T0(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function U0(t,e){return t.filters.filter(r=>r instanceof ir&&r.field.isEqual(e))}function Z5(t,e,r){let n=Hg,s=!0;for(const i of U0(t,e)){let a=Hg,o=!0;switch(i.op){case"<":case"<=":a=RO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Hg}W5({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];W5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function eE(t,e,r){let n=VA,s=!0;for(const i of U0(t,e)){let a=VA,o=!0;switch(i.op){case">=":case">":a=DO(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=VA}X5({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];X5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $O(t,e,r,n,s,i,a,o){return new Kd(t,e,r,n,s,i,a,o)}function Lp(t){return new Kd(t)}function tE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I4(t){return t.collectionGroup!==null}function vf(t){const e=Mt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Sr(Xr.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ap(i,n))}),r.has(Xr.keyField().canonicalString())||e.ce.push(new Ap(Xr.keyField(),n))}return e.ce}function Qi(t){const e=Mt(t);return e.le||(e.le=WO(e,vf(t))),e.le}function WO(t,e){if(t.limitType==="F")return u2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ap(s.field,i)});const r=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return u2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function d2(t,e){const r=t.filters.concat([e]);return new Kd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function P0(t,e,r){return new Kd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Iw(t,e){return Qp(Qi(t),Qi(e))&&t.limitType===e.limitType}function S4(t){return`${Lc(Qi(t))}|lt:${t.limitType}`}function Ru(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>E4(s)).join(", ")}]`),Pp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Nd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Nd(s)).join(",")),`Target(${n})`}(Qi(t))}; limitType=${t.limitType})`}function jp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ht.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of vf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,A){const c=J5(a,o,A);return a.inclusive?c<=0:c<0}(n.startAt,vf(n),s)||n.endAt&&!function(a,o,A){const c=J5(a,o,A);return a.inclusive?c>=0:c>0}(n.endAt,vf(n),s))}(t,e)}function XO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function F4(t){return(e,r)=>{let n=!1;for(const s of vf(t)){const i=JO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function JO(t,e,r){const n=t.field.isKeyField()?ht.comparator(e.key,r.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?pl(A,c):bt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return m4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new Zr(ht.comparator);function ai(){return YO}const T4=new Zr(ht.comparator);function Xh(...t){let e=T4;for(const r of t)e=e.insert(r.key,r);return e}function U4(t){let e=T4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Qa(){return yf()}function P4(){return yf()}function yf(){return new Il(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZO=new Zr(ht.comparator),eM=new Sr(ht.comparator);function Yt(...t){let e=eM;for(const r of t)e=e.add(r);return e}const tM=new Sr(Gt);function rM(){return tM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function Q4(t){return{integerValue:""+t}}function nM(t,e){return mO(e)?Q4(e):Fb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this._=void 0}}function sM(t,e,r){return t instanceof lp?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Nb(i)&&(i=Ib(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Fd?j4(t,e):t instanceof Td?k4(t,e):function(s,i){const a=L4(s,i),o=rE(a)+rE(s.Pe);return A2(a)&&A2(s.Pe)?Q4(o):Fb(s.serializer,o)}(t,e)}function iM(t,e,r){return t instanceof Fd?j4(t,e):t instanceof Td?k4(t,e):r}function L4(t,e){return t instanceof cp?function(n){return A2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class lp extends Sw{}class Fd extends Sw{constructor(e){super(),this.elements=e}}function j4(t,e){const r=R4(e);for(const n of t.elements)r.some(s=>Ma(s,n))||r.push(n);return{arrayValue:{values:r}}}class Td extends Sw{constructor(e){super(),this.elements=e}}function k4(t,e){let r=R4(e);for(const n of t.elements)r=r.filter(s=>!Ma(s,n));return{arrayValue:{values:r}}}class cp extends Sw{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function rE(t){return zr(t.integerValue||t.doubleValue)}function R4(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,r){this.field=e,this.transform=r}}function oM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Fd&&s instanceof Fd||n instanceof Td&&s instanceof Td?_d(n.elements,s.elements,Ma):n instanceof cp&&s instanceof cp?Ma(n.Pe,s.Pe):n instanceof lp&&s instanceof lp}(t.transform,e.transform)}class AM{constructor(e,r){this.version=e,this.transformResults=r}}class Jr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fw{}function D4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gd(t.key,Jr.none()):new qd(t.key,t.data,Jr.none());{const r=t.data,n=ns.empty();let s=new Sr(Xr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new qo(t.key,n,new Gs(s.toArray()),Jr.none())}}function lM(t,e,r){t instanceof qd?function(s,i,a){const o=s.value.clone(),A=sE(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof qo?function(s,i,a){if(!Kg(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=sE(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(O4(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function xf(t,e,r,n){return t instanceof qd?function(i,a,o,A){if(!Kg(i.precondition,a))return o;const c=i.value.clone(),d=iE(i.fieldTransforms,A,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof qo?function(i,a,o,A){if(!Kg(i.precondition,a))return o;const c=iE(i.fieldTransforms,A,a),d=a.data;return d.setAll(O4(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return Kg(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function cM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=L4(n.transform,s||null);i!=null&&(r===null&&(r=ns.empty()),r.set(n.field,i))}return r||null}function nE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&_d(n,s,(i,a)=>oM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qd extends Fw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qo extends Fw{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function O4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function sE(t,e,r){const n=new Map;_t(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,iM(a,o,r[s]))}return n}function iE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,sM(i,a,e))}return n}class Gd extends Fw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tb extends Fw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lM(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=xf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=xf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=P4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const A=D4(a,o);A!==null&&n.set(s.key,A),a.isValidDocument()||a.convertToNoDocument(It.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Yt())}isEqual(e){return this.batchId===e.batchId&&_d(this.mutations,e.mutations,(r,n)=>nE(r,n))&&_d(this.baseMutations,e.baseMutations,(r,n)=>nE(r,n))}}class Pb{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){_t(e.mutations.length===n.length);let s=function(){return ZO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Pb(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,or;function M4(t){switch(t){default:return bt();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function H4(t){if(t===void 0)return Fs("GRPC error has no .code"),ke.UNKNOWN;switch(t){case Bn.OK:return ke.OK;case Bn.CANCELLED:return ke.CANCELLED;case Bn.UNKNOWN:return ke.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return ke.INTERNAL;case Bn.UNAVAILABLE:return ke.UNAVAILABLE;case Bn.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Bn.NOT_FOUND:return ke.NOT_FOUND;case Bn.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Bn.ABORTED:return ke.ABORTED;case Bn.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Bn.DATA_LOSS:return ke.DATA_LOSS;default:return bt()}}(or=Bn||(Bn={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new wc([4294967295,4294967295],0);function aE(t){const e=dM().encode(t),r=new ZF;return r.update(e),new Uint8Array(r.digest())}function oE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wc([r,n],0),new wc([s,i],0)]}class Lb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Jh(`Invalid padding: ${r}`);if(n<0)throw new Jh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Jh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Jh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(wc.fromNumber(n)));return s.compare(hM)===1&&(s=new wc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=aE(e),[n,s]=oE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Lb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=aE(e),[n,s]=oE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Jh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,kp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Tw(It.min(),s,new Zr(Gt),ai(),Yt())}}class kp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new kp(n,r,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class V4{constructor(e,r){this.targetId=e,this.me=r}}class K4{constructor(e,r,n=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class AE{constructor(){this.fe=0,this.ge=cE(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yt(),r=Yt(),n=Yt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:bt()}}),new kp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=cE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fM{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=lE(),this.Qe=new Zr(Gt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:bt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(T0(i))if(n===0){const a=new ht(i.path);this.Ue(r,a,Wr.newNoDocument(a,It.min()))}else _t(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(r);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=hl(n).toUint8Array()}catch(A){if(A instanceof g4)return dl("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Lb(a,s,i)}catch(A){return dl(A instanceof Jh?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&T0(o.target)){const A=new ht(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,Wr.newNoDocument(A,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Yt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Tw(e,r,this.Qe,this.ke,n);return this.ke=ai(),this.qe=lE(),this.Qe=new Zr(Gt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new AE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Sr(Gt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ye("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new AE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function lE(){return new Zr(ht.comparator)}function cE(){return new Zr(ht.comparator)}const pM={asc:"ASCENDING",desc:"DESCENDING"},mM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gM={and:"AND",or:"OR"};class wM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function h2(t,e){return t.useProto3Json||Pp(e)?e:{value:e}}function Ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vM(t,e){return Ud(t,e.toTimestamp())}function Vn(t){return _t(!!t),It.fromTimestamp(function(r){const n=Mo(r);return new Lt(n.seconds,n.nanos)}(t))}function jb(t,e){return f2(t,e).canonicalString()}function f2(t,e){const r=function(s){return new ur(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function G4(t){const e=ur.fromString(t);return _t(tT(e)),e}function up(t,e){return jb(t.databaseId,e.path)}function Fo(t,e){const r=G4(e);if(r.get(1)!==t.databaseId.projectId)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ht(W4(r))}function z4(t,e){return jb(t.databaseId,e)}function $4(t){const e=G4(t);return e.length===4?ur.emptyPath():W4(e)}function p2(t){return new ur(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W4(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uE(t,e,r){return{name:up(t,e),fields:r.value.mapValue.fields}}function yM(t,e,r){const n=Fo(t,e.name),s=Vn(e.updateTime),i=e.createTime?Vn(e.createTime):It.min(),a=new ns({mapValue:{fields:e.fields}}),o=Wr.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function xM(t,e){return"found"in e?function(n,s){_t(!!s.found),s.found.name,s.found.updateTime;const i=Fo(n,s.found.name),a=Vn(s.found.updateTime),o=s.found.createTime?Vn(s.found.createTime):It.min(),A=new ns({mapValue:{fields:s.found.fields}});return Wr.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(n,s){_t(!!s.missing),_t(!!s.readTime);const i=Fo(n,s.missing),a=Vn(s.readTime);return Wr.newNoDocument(i,a)}(t,e):bt()}function bM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(_t(d===void 0||typeof d=="string"),yn.fromBase64String(d||"")):(_t(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const d=c.code===void 0?ke.UNKNOWN:H4(c.code);return new st(d,c.message||"")}(a);r=new K4(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Fo(t,n.document.name),i=Vn(n.document.updateTime),a=n.document.createTime?Vn(n.document.createTime):It.min(),o=new ns({mapValue:{fields:n.document.fields}}),A=Wr.newFoundDocument(s,i,a,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new qg(c,d,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Fo(t,n.document),i=n.readTime?Vn(n.readTime):It.min(),a=Wr.newNoDocument(s,i),o=n.removedTargetIds||[];r=new qg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Fo(t,n.document),i=n.removedTargetIds||[];r=new qg([],i,s,null)}else{if(!("filter"in e))return bt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new uM(s,i),o=n.targetId;r=new V4(o,a)}}return r}function dp(t,e){let r;if(e instanceof qd)r={update:uE(t,e.key,e.value)};else if(e instanceof Gd)r={delete:up(t,e.key)};else if(e instanceof qo)r={update:uE(t,e.key,e.data),updateMask:IM(e.fieldMask)};else{if(!(e instanceof Tb))return bt();r={verify:up(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof lp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Fd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Td)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof cp)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw bt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:bt()}(t,e.precondition)),r}function m2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Jr.updateTime(Vn(i.updateTime)):i.exists!==void 0?Jr.exists(i.exists):Jr.none()}(e.currentDocument):Jr.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)_t(o.setToServerValue==="REQUEST_TIME"),A=new lp;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];A=new Fd(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];A=new Td(d)}else"increment"in o?A=new cp(a,o.increment):bt();const c=Xr.fromServerFormat(o.fieldPath);return new aM(c,A)}(t,s)):[];if(e.update){e.update.name;const s=Fo(t,e.update.name),i=new ns({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new Gs(c.map(d=>Xr.fromServerFormat(d)))}(e.updateMask);return new qo(s,i,a,r,n)}return new qd(s,i,r,n)}if(e.delete){const s=Fo(t,e.delete);return new Gd(s,r)}if(e.verify){const s=Fo(t,e.verify);return new Tb(s,r)}return bt()}function BM(t,e){return t&&t.length>0?(_t(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Vn(s.updateTime):Vn(i);return a.isEqual(It.min())&&(a=Vn(i)),new AM(a,s.transformResults||[])}(r,e))):[]}function X4(t,e){return{documents:[z4(t,e.path)]}}function J4(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=z4(t,s);const i=function(c){if(c.length!==0)return eT(Cr.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Du(m.field),direction:EM(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=h2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function Y4(t){let e=$4(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){_t(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(f){const m=Z4(f);return m instanceof Cr&&Sb(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(B){return new Ap(Ou(B.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,Pp(m)?null:m}(r.limit));let A=null;r.startAt&&(A=function(f){const m=!!f.before,g=f.values||[];return new Id(g,m)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Id(g,m)}(r.endAt)),$O(e,s,a,i,o,"F",A,c)}function CM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Z4(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ou(r.unaryFilter.field);return ir.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ou(r.unaryFilter.field);return ir.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ou(r.unaryFilter.field);return ir.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ou(r.unaryFilter.field);return ir.create(a,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(t):t.fieldFilter!==void 0?function(r){return ir.create(Ou(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Cr.create(r.compositeFilter.filters.map(n=>Z4(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return bt()}}(r.compositeFilter.op))}(t):bt()}function EM(t){return pM[t]}function _M(t){return mM[t]}function NM(t){return gM[t]}function Du(t){return{fieldPath:t.canonicalString()}}function Ou(t){return Xr.fromServerFormat(t.fieldPath)}function eT(t){return t instanceof ir?function(r){if(r.op==="=="){if($5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NAN"}};if(z5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if($5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NOT_NAN"}};if(z5(r.value))return{unaryFilter:{field:Du(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(r.field),op:_M(r.op),value:r.value}}}(t):t instanceof Cr?function(r){const n=r.getFilters().map(s=>eT(s));return n.length===1?n[0]:{compositeFilter:{op:NM(r.op),filters:n}}}(t):bt()}function IM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function tT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r,n,s,i=It.min(),a=It.min(),o=yn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new Eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.ct=e}}function SM(t,e){let r;if(e.document)r=yM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ht.fromSegments(e.noDocument.path),s=kc(e.noDocument.readTime);r=Wr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt();{const n=ht.fromSegments(e.unknownDocument.path),s=kc(e.unknownDocument.version);r=Wr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Lt(s[0],s[1]);return It.fromTimestamp(i)}(e.readTime)),r}function dE(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Q0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:up(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Ud(i,a.version.toTimestamp()),createTime:Ud(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:jc(e.version)};else{if(!e.isUnknownDocument())return bt();n.unknownDocument={path:r.path.toArray(),version:jc(e.version)}}return n}function Q0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function jc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(t){const e=new Lt(t.seconds,t.nanoseconds);return It.fromTimestamp(e)}function ac(t,e){const r=(e.baseMutations||[]).map(i=>m2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>m2(t.ct,i)),s=Lt.fromMillis(e.localWriteTimeMs);return new Ub(e.batchId,s,r,n)}function Yh(t){const e=kc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?kc(t.lastLimboFreeSnapshotVersion):It.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return _t(i.documents.length===1),Qi(Lp($4(i.documents[0])))}(t.query):function(i){return Qi(Y4(i))}(t.query),new Eo(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,yn.fromBase64String(t.resumeToken))}function nT(t,e){const r=jc(e.snapshotVersion),n=jc(e.lastLimboFreeSnapshotVersion);let s;s=T0(e.target)?X4(t.ct,e.target):J4(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function sT(t){const e=Y4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?P0(e,e.limit,"L"):e}function hy(t,e){return new Qb(e.largestBatchId,m2(t.ct,e.overlayMutation))}function hE(t,e){const r=e.path.lastSegment();return[t,Ps(e.path.popLast()),r]}function fE(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:jc(n.readTime),documentKey:Ps(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{getBundleMetadata(e,r){return pE(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:kc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return pE(e).put(function(s){return{bundleId:s.id,createTime:jc(Vn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return mE(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:sT(i.bundledQuery),readTime:kc(i.readTime)}}(n)})}saveNamedQuery(e,r){return mE(e).put(function(s){return{name:s.name,readTime:jc(Vn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function pE(t){return Qn(t,"bundles")}function mE(t){return Qn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Uw(e,n)}getOverlay(e,r){return _h(e).get(hE(this.userId,r)).next(n=>n?hy(this.serializer,n):null)}getOverlays(e,r){const n=Qa();return Ie.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Qb(r,a);s.push(this.ht(e,o))}),Ie.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Ps(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(_h(e).j("collectionPathOverlayIndex",o))}),Ie.waitFor(i)}getOverlaysForCollection(e,r,n){const s=Qa(),i=Ps(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _h(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=hy(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=Qa();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return _h(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,d)=>{const f=hy(this.serializer,c);i.size()<s||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):d.done()}).next(()=>i)}ht(e,r){return _h(e).put(function(s,i,a){const[o,A,c]=hE(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:dp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function _h(t){return Qn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{Pt(e){return Qn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?yn.fromUint8Array(n):yn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zr(e.integerValue));else if("doubleValue"in e){const n=zr(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),np(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Mo(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(hl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?w4(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Nw(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):bt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(zr(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),ht.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}oc.vt=new oc;function UM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function gE(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=UM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class PM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=gE(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=gE(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class QM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class LM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Nh{constructor(){this.jt=new PM,this.Ht=new QM(this.jt),this.Jt=new LM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ac(this.indexId,this.documentKey,this.arrayValue,n)}}function bA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=wE(t.arrayValue,e.arrayValue),r!==0?r:(r=wE(t.directionalValue,e.directionalValue),r!==0?r:ht.comparator(t.documentKey,e.documentKey)))}function wE(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.Xt=new Sr((r,n)=>Xr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(_t(e.collectionGroup===this.collectionId),this.nn)return!1;const r=i2(e);if(r!==void 0&&!this.sn(r))return!1;const n=rc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=n[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Sr(Xr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Og(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Og(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Og(n.field,n.dir==="asc"?0:1)));return new F0(F0.UNKNOWN_ID,this.collectionId,r,rp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){var e,r;if(_t(t instanceof ir||t instanceof Cr),t instanceof ir){if(t instanceof N4){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>ir.create(t.field,"==",i)))||[];return Cr.create(s,"or")}return t}const n=t.filters.map(s=>iT(s));return Cr.create(n,t.op)}function jM(t){if(t.getFilters().length===0)return[];const e=v2(iT(t));return _t(aT(e)),g2(e)||w2(e)?[e]:e.getFilters()}function g2(t){return t instanceof ir}function w2(t){return t instanceof Cr&&Sb(t)}function aT(t){return g2(t)||w2(t)||function(r){if(r instanceof Cr&&l2(r)){for(const n of r.getFilters())if(!g2(n)&&!w2(n))return!1;return!0}return!1}(t)}function v2(t){if(_t(t instanceof ir||t instanceof Cr),t instanceof ir)return t;if(t.filters.length===1)return v2(t.filters[0]);const e=t.filters.map(n=>v2(n));let r=Cr.create(e,t.op);return r=L0(r),aT(r)?r:(_t(r instanceof Cr),_t(Sd(r)),_t(r.filters.length>1),r.filters.reduce((n,s)=>kb(n,s)))}function kb(t,e){let r;return _t(t instanceof ir||t instanceof Cr),_t(e instanceof ir||e instanceof Cr),r=t instanceof ir?e instanceof ir?function(s,i){return Cr.create([s,i],"and")}(t,e):yE(t,e):e instanceof ir?yE(e,t):function(s,i){if(_t(s.filters.length>0&&i.filters.length>0),Sd(s)&&Sd(i))return C4(s,i.getFilters());const a=l2(s)?s:i,o=l2(s)?i:s,A=a.filters.map(c=>kb(c,o));return Cr.create(A,"or")}(t,e),L0(r)}function yE(t,e){if(Sd(e))return C4(e,t.getFilters());{const r=e.filters.map(n=>kb(t,n));return Cr.create(r,"or")}}function L0(t){if(_t(t instanceof ir||t instanceof Cr),t instanceof ir)return t;const e=t.getFilters();if(e.length===1)return L0(e[0]);if(b4(t))return t;const r=e.map(s=>L0(s)),n=[];return r.forEach(s=>{s instanceof ir?n.push(s):s instanceof Cr&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Cr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.un=new Rb}addToCollectionParentIndex(e,r){return this.un.add(r),Ie.resolve()}getCollectionParents(e,r){return Ie.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ie.resolve()}deleteFieldIndex(e,r){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,r){return Ie.resolve()}getDocumentsMatchingTarget(e,r){return Ie.resolve(null)}getIndexType(e,r){return Ie.resolve(0)}getFieldIndexes(e,r){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,r){return Ie.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,r){return Ie.resolve(ci.min())}updateCollectionGroup(e,r,n){return Ie.resolve()}updateIndexEntries(e,r){return Ie.resolve()}}class Rb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Sr(ur.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Sr(ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Uint8Array(0);class RM{constructor(e,r){this.databaseId=r,this.cn=new Rb,this.ln=new Il(n=>Lc(n),(n,s)=>Qp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Ps(s)};return xE(e).put(i)}return Ie.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[o4(r),""],!1,!0);return xE(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(Pa(a.parent))}return n})}addFieldIndex(e,r){const n=Ih(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=xu(e);return i.next(o=>{a.put(fE(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Ih(e),s=xu(e),i=yu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Ih(e),n=yu(e),s=xu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Ie.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new vE(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=yu(e);let s=!0;const i=new Map;return Ie.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=Yt();const o=[];return Ie.forEach(i,(A,c)=>{Ye("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(A)} to execute ${Lc(r)}`);const d=function(N,R){const V=i2(R);if(V===void 0)return null;for(const O of U0(N,V.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,A),f=function(N,R){const V=new Map;for(const O of rc(R))for(const T of U0(N,O.fieldPath))switch(T.op){case"==":case"in":V.set(O.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return V.set(O.fieldPath.canonicalString(),T.value),Array.from(V.values())}return null}(c,A),m=function(N,R){const V=[];let O=!0;for(const T of rc(R)){const _=T.kind===0?Z5(N,T.fieldPath,N.startAt):eE(N,T.fieldPath,N.startAt);V.push(_.value),O&&(O=_.inclusive)}return new Id(V,O)}(c,A),g=function(N,R){const V=[];let O=!0;for(const T of rc(R)){const _=T.kind===0?eE(N,T.fieldPath,N.endAt):Z5(N,T.fieldPath,N.endAt);V.push(_.value),O&&(O=_.inclusive)}return new Id(V,O)}(c,A),B=this.In(A,c,m),C=this.In(A,c,g),b=this.Tn(A,c,f),y=this.En(A.indexId,d,B,m.inclusive,C,g.inclusive,b);return Ie.forEach(y,w=>n.G(w,r.limit).next(N=>{N.forEach(R=>{const V=ht.fromSegments(R.documentKey);a.has(V)||(a=a.add(V),o.push(V))})}))}).next(()=>o)}return Ie.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=jM(Cr.create(e.filters,"and")).map(n=>u2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const A=(r!=null?r.length:1)*Math.max(n.length,i.length),c=A/(r!=null?r.length:1),d=[];for(let f=0;f<A;++f){const m=r?this.dn(r[f/c]):Rm,g=this.An(e,m,n[f%c],s),B=this.Rn(e,m,i[f%c],a),C=o.map(b=>this.An(e,m,b,!0));d.push(...this.createRange(g,B,C))}return d}An(e,r,n,s){const i=new Ac(e,ht.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Ac(e,ht.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new vE(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Ie.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(A){let c=new Sr(Xr.comparator),d=!1;for(const f of A.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(const f of A.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Nh;for(const s of rc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);oc.vt.It(i,a)}return n.zt()}dn(e){const r=new Nh;return oc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Nh;return oc.vt.It(ap(this.databaseId,r),n.Yt(function(i){const a=rc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Nh);let i=0;for(const a of rc(e)){const o=n[i++];for(const A of s)if(this.fn(r,a.fieldPath)&&op(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);oc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const A=new Nh;A.seed(o.zt()),oc.vt.It(a,A.Yt(r.kind)),i.push(A)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof ir&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Ih(e),s=xu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Ie.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(d,f){const m=f?new rp(f.sequenceNumber,new ci(kc(f.readTime),new ht(Pa(f.documentKey)),f.largestBatchId)):rp.empty(),g=d.fields.map(([B,C])=>new Og(Xr.fromServerFormat(B),C));return new F0(d.indexId,d.collectionGroup,g,m)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Gt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Ih(e),i=xu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Ie.forEach(o,A=>i.put(fE(A.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Ie.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Ie.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Ie.forEach(o,A=>this.wn(e,s,A).next(c=>{const d=this.Sn(i,A);return c.isEqual(d)?Ie.resolve():this.bn(e,i,A,c,d)}))))})}Dn(e,r,n,s){return yu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return yu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=yu(e);let i=new Sr(bA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Ac(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new Sr(bA);const s=this.Vn(r,e);if(s==null)return n;const i=i2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(op(a))for(const o of a.arrayValue.values||[])n=n.add(new Ac(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Ac(r.indexId,e.key,Rm,s));return n}bn(e,r,n,s,i){Ye("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(A,c,d,f,m){const g=A.getIterator(),B=c.getIterator();let C=vu(g),b=vu(B);for(;C||b;){let y=!1,w=!1;if(C&&b){const N=d(C,b);N<0?w=!0:N>0&&(y=!0)}else C!=null?w=!0:y=!0;y?(f(b),b=vu(B)):w?(m(C),C=vu(g)):(C=vu(g),b=vu(B))}}(s,i,bA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Ie.waitFor(a)}yn(e){let r=1;return xu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>bA(a,o)).filter((a,o,A)=>!o||bA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=bA(a,e),A=bA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Rm,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Rm,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,r){return bA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(bE)}getMinOffset(e,r){return Ie.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||bt())).next(bE)}}function xE(t){return Qn(t,"collectionParents")}function yu(t){return Qn(t,"indexEntries")}function Ih(t){return Qn(t,"indexConfiguration")}function xu(t){return Qn(t,"indexState")}function bE(t){_t(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Cb(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new ci(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hs{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const A=n.J({range:a},(d,f,m)=>(o++,m.delete()));i.push(A.next(()=>{_t(o===1)}));const c=[];for(const d of r.mutations){const f=d4(e,d.key.path,r.batchId);i.push(s.delete(f)),c.push(d.key)}return Ie.waitFor(i).next(()=>c)}function j0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw bt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class Pw{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){_t(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Pw(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Mu(e),a=BA(e);return a.add({}).next(o=>{_t(typeof o=="number");const A=new Ub(o,r,n,s),c=function(g,B,C){const b=C.baseMutations.map(w=>dp(g.ct,w)),y=C.mutations.map(w=>dp(g.ct,w));return{userId:B,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:b,mutations:y}}(this.serializer,this.userId,A),d=[];let f=new Sr((m,g)=>Gt(m.canonicalString(),g.canonicalString()));for(const m of s){const g=d4(this.userId,m.key.path,o);f=f.add(m.key.path.popLast()),d.push(a.put(c)),d.push(i.put(g,wO))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Ie.waitFor(d).next(()=>A)})}lookupMutationBatch(e,r){return BA(e).get(r).next(n=>n?(_t(n.userId===this.userId),ac(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ie.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return BA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(_t(o.batchId>=n),i=ac(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return BA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).U("userMutationsIndex",r).next(n=>n.map(s=>ac(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Mg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Mu(e).J({range:s},(a,o,A)=>{const[c,d,f]=a,m=Pa(d);if(c===this.userId&&r.path.isEqual(m))return BA(e).get(f).next(g=>{if(!g)throw bt();_t(g.userId===this.userId),i.push(ac(this.serializer,g))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sr(Gt);const s=[];return r.forEach(i=>{const a=Mg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Mu(e).J({range:o},(c,d,f)=>{const[m,g,B]=c,C=Pa(g);m===this.userId&&i.path.isEqual(C)?n=n.add(B):f.done()});s.push(A)}),Ie.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=Mg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new Sr(Gt);return Mu(e).J({range:a},(A,c,d)=>{const[f,m,g]=A,B=Pa(m);f===this.userId&&n.isPrefixOf(B)?B.length===s&&(o=o.add(g)):d.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(BA(e).get(i).next(a=>{if(a===null)throw bt();_t(a.userId===this.userId),n.push(ac(this.serializer,a))}))}),Ie.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return oT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ie.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ie.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Mu(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const A=Pa(i[1]);s.push(A)}else o.done()}).next(()=>{_t(s.length===0)})})}containsKey(e,r){return AT(e,this.userId,r)}Nn(e){return lT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AT(t,e,r){const n=Mg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Mu(t).J({range:i,H:!0},(o,A,c)=>{const[d,f,m]=o;d===e&&f===s&&(a=!0),c.done()}).next(()=>a)}function BA(t){return Qn(t,"mutations")}function Mu(t){return Qn(t,"documentMutations")}function lT(t){return Qn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Rc(0)}static kn(){return new Rc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Rc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>It.fromTimestamp(new Lt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>bu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(_t(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return bu(e).J((a,o)=>{const A=Yh(o);A.sequenceNumber<=r&&n.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Ie.waitFor(i)).next(()=>s)}forEachTarget(e,r){return bu(e).J((n,s)=>{const i=Yh(s);r(i)})}qn(e){return CE(e).get("targetGlobalKey").next(r=>(_t(r!==null),r))}Qn(e,r){return CE(e).put("targetGlobalKey",r)}Kn(e,r){return bu(e).put(nT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Lc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return bu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=Yh(o);Qp(r,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=RA(e);return r.forEach(a=>{const o=Ps(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Ie.waitFor(s)}removeMatchingKeys(e,r,n){const s=RA(e);return Ie.forEach(r,i=>{const a=Ps(i.path);return Ie.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=RA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=RA(e);let i=Yt();return s.J({range:n,H:!0},(a,o,A)=>{const c=Pa(a[1]),d=new ht(c);i=i.add(d)}).next(()=>i)}containsKey(e,r){const n=Ps(r.path),s=IDBKeyRange.bound([n],[o4(n)],!1,!0);let i=0;return RA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return bu(e).get(r).next(n=>n?Yh(n):null)}}function bu(t){return Qn(t,"targets")}function CE(t){return Qn(t,"targetGlobal")}function RA(t){return Qn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE([t,e],[r,n]){const s=Gt(t,r);return s===0?Gt(e,n):s}class OM{constructor(e){this.Un=e,this.buffer=new Sr(EE),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();EE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class MM{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Nl(r)?Ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Hc(r)}await this.Hn(3e5)})}}class HM{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ie.resolve(Fi.oe);const n=new OM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(BE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BE):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,A,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,A=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(c=Date.now(),ku()<=sr.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${f} documents in `+(c-A)+`ms
Total Duration: ${c-d}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function VM(t,e){return new HM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,r){this.db=e,this.garbageCollector=VM(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Dm(e,n)}removeReference(e,r,n){return Dm(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Dm(e,r)}nr(e,r){return function(s,i){let a=!1;return lT(s).Y(o=>AT(s,o,i).next(A=>(A&&(a=!0),Ie.resolve(!A)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const A=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,It.min()),RA(e).delete(function(f){return[0,Ps(f.path)]}(a))))});s.push(A)}}).next(()=>Ie.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Dm(e,r)}tr(e,r){const n=RA(e);let s,i=Fi.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==Fi.oe&&r(new ht(Pa(s)),i),i=c,s=A):i=Fi.oe}).next(()=>{i!==Fi.oe&&r(new ht(Pa(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dm(t,e){return RA(t).put(function(n,s){return{targetId:0,path:Ps(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.changes=new Il(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Wr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ie.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Xl(e).put(n)}removeEntry(e,r,n){return Xl(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Q0(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Wr.newInvalidDocument(r);return Xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Wr.newInvalidDocument(r)};return Xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(r))},(s,i)=>{n={document:this.ir(r,i),size:j0(i)}}).next(()=>n)}getEntries(e,r){let n=ai();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=ai(),s=new Zr(ht.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,j0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Ie.resolve();let s=new Sr(IE);r.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound(Sh(s.first()),Sh(s.last())),a=s.getIterator();let o=a.getNext();return Xl(e).J({index:"documentKeyIndex",range:i},(A,c,d)=>{const f=ht.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&IE(o,f)<0;)n(o,null),o=a.getNext();o&&o.isEqual(f)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?d.$(Sh(o)):d.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),Q0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xl(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=ai();for(const f of c){const m=this.ir(ht.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(jp(r,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,r,n,s){let i=ai();const a=NE(r,n),o=NE(r,ci.max());return Xl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,d)=>{const f=this.ir(ht.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(f.key,f),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new GM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return _E(e).get("remoteDocumentGlobalKey").next(r=>(_t(!!r),r))}rr(e,r){return _E(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=SM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(It.min())))return n}return Wr.newInvalidDocument(e)}}function uT(t){return new qM(t)}class GM extends cT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Il(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Sr((i,a)=>Gt(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=dE(this.cr.serializer,a);s=s.add(i.path.popLast());const c=j0(A);n+=c-o.size,r.push(this.cr.addEntry(e,i,A))}else if(n-=o.size,this.trackRemovals){const A=dE(this.cr.serializer,a.convertToNoDocument(It.min()));r.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Ie.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function _E(t){return Qn(t,"remoteDocumentGlobal")}function Xl(t){return Qn(t,"remoteDocumentsV14")}function Sh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NE(t,e){const r=e.documentKey.path.toArray();return[t,Q0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function IE(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=Gt(r[i],n[i]),s)return s;return s=Gt(r.length,n.length),s||(s=Gt(r[r.length-2],n[n.length-2]),s||Gt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&xf(n.mutation,s,Gs.empty(),Lt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Yt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Yt()){const s=Qa();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Xh();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Qa();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Yt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=ai();const a=yf(),o=function(){return yf()}();return r.forEach((A,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof qo)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),xf(d.mutation,c,d.mutation.getFieldMask(),Lt.now())):a.set(c.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,d)=>a.set(c,d)),r.forEach((c,d)=>{var f;return o.set(c,new zM(d,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=yf();let s=new Zr((a,o)=>a-o),i=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=r.get(A);if(c===null)return;let d=n.get(A)||Gs.empty();d=o.applyToLocalView(c,d),n.set(A,d);const f=(s.get(o.batchId)||Yt()).add(A);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,d=A.value,f=P4();d.forEach(m=>{if(!i.has(m)){const g=D4(r.get(m),n.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ie.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return ht.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):I4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ie.resolve(Qa());let o=-1,A=i;return a.next(c=>Ie.forEach(c,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(d)?Ie.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{A=A.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,Yt())).next(d=>({batchId:o,changes:U4(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ht(r)).next(n=>{let s=Xh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Xh();return this.indexManager.getCollectionParents(e,i).next(o=>Ie.forEach(o,A=>{const c=function(f,m){return new Kd(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((A,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Wr.newInvalidDocument(d)))});let o=Xh();return a.forEach((A,c)=>{const d=i.get(A);d!==void 0&&xf(d.mutation,c,Gs.empty(),Lt.now()),jp(r,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ie.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}}(r)),Ie.resolve()}getNamedQuery(e,r){return Ie.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:sT(s.bundledQuery),readTime:Vn(s.readTime)}}(r)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new Zr(ht.comparator),this.Ir=new Map}getOverlay(e,r){return Ie.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qa();return Ie.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ie.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ie.resolve()}getOverlaysForCollection(e,r,n){const s=Qa(),i=r.length+1,a=new ht(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>n&&s.set(A.getKey(),A)}return Ie.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Zr((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=i.get(c.largestBatchId);d===null&&(d=Qa(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Qa(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return Ie.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Qb(r,n));let i=this.Ir.get(r);i===void 0&&(i=Yt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.Tr=new Sr(On.Er),this.dr=new Sr(On.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new On(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new On(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ht(new ur([])),n=new On(r,e),s=new On(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ht(new ur([])),n=new On(r,e),s=new On(r,e+1);let i=Yt();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new On(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class On{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ht.comparator(e.key,r.key)||Gt(e.wr,r.wr)}static Ar(e,r){return Gt(e.wr,r.wr)||ht.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Sr(On.Er)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ub(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new On(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ie.resolve(a)}lookupMutationBatch(e,r){return Ie.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new On(r,0),s=new On(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sr(Gt);return r.forEach(s=>{const i=new On(s,0),a=new On(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Ie.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;ht.isDocumentKey(i)||(i=i.child(""));const a=new On(new ht(i),0);let o=new Sr(Gt);return this.br.forEachWhile(A=>{const c=A.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Ie.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){_t(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ie.forEach(r.mutations,s=>{const i=new On(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new On(r,0),s=this.br.firstAfterOrEqual(n);return Ie.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.Mr=e,this.docs=function(){return new Zr(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ie.resolve(n?n.document.mutableCopy():Wr.newInvalidDocument(r))}getEntries(e,r){let n=ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Wr.newInvalidDocument(s))}),Ie.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ai();const a=r.path,o=new ht(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:d}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Cb(A4(d),n)<=0||(s.has(d.key)||jp(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,r,n,s){bt()}Or(e,r){return Ie.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new ZM(this)}getSize(e){return Ie.resolve(this.size)}}class ZM extends cT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ie.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.persistence=e,this.Nr=new Il(r=>Lc(r),Qp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Db,this.targetCount=0,this.kr=Rc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ie.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Rc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ie.resolve()}updateTargetData(e,r){return this.Kn(r),Ie.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ie.waitFor(i).next(()=>s)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ie.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ie.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ie.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ie.resolve(n)}containsKey(e,r){return Ie.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Fi(0),this.Kr=!1,this.Kr=!0,this.$r=new XM,this.referenceDelegate=e(this),this.Ur=new e8(this),this.indexManager=new kM,this.remoteDocumentCache=function(s){return new YM(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new rT(r),this.Gr=new $M(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new WM,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new JM(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ye("MemoryPersistence","Starting transaction:",e);const s=new t8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ie.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class t8 extends c4{constructor(e){super(),this.currentSequenceNumber=e}}class Qw{constructor(e){this.persistence=e,this.Jr=new Db,this.Yr=null}static Zr(e){return new Qw(e)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ie.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ie.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,n=>{const s=ht.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,It.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new _w("createOrUpgrade",r);n<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",H5,{unique:!0}),A.createObjectStore("documentMutations")}(e),SE(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Ie.resolve();return n<3&&s>=3&&(n!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),SE(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(d=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",H5,{unique:!0});const f=c.store("mutations"),m=d.map(g=>f.put(g));return Ie.waitFor(m)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:FO});c.createIndex("collectionPathOverlayIndex",TO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",UO,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:vO});c.createIndex("documentKeyIndex",yO),c.createIndex("collectionGroupIndex",xO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:_O}).createIndex("sequenceNumberIndex",NO,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:IO}).createIndex("documentKeyIndex",SO,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=j0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Ie.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Ie.forEach(o,A=>{_t(A.userId===i.userId);const c=ac(this.serializer,A);return oT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const A=new ur(a),c=function(f){return[0,Ps(f)]}(A);i.push(r.get(c).next(d=>d?Ie.resolve():(f=>r.put({targetId:0,path:Ps(f),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Ie.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:EO});const n=r.store("collectionParents"),s=new Rb,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:Ps(A)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new ur(a);return i(A.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,A],c)=>{const d=Pa(o);return i(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=Yh(s),a=nT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),A=function(f){return f.document?new ht(ur.fromString(f.document.name).popFirst(5)):f.noDocument?ht.fromSegments(f.noDocument.path):f.unknownDocument?ht.fromSegments(f.unknownDocument.path):bt()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Ie.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=uT(this.serializer),i=new hT(Qw.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let d=(c=o.get(A.userId))!==null&&c!==void 0?c:Yt();ac(this.serializer,A).keys().forEach(f=>d=d.add(f)),o.set(A.userId,d)}),Ie.forEach(o,(A,c)=>{const d=new es(c),f=Uw.lt(this.serializer,d),m=i.getIndexManager(d),g=Pw.lt(d,this.serializer,m,i.referenceDelegate);return new dT(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new a2(r,Fi.oe),A).next()})})}}function SE(t){t.createObjectStore("targetDocuments",{keyPath:BO}).createIndex("documentTargetsIndex",CO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bO,{unique:!0}),t.createObjectStore("targetGlobal")}const fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ob{constructor(e,r,n,s,i,a,o,A,c,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!Ob.D())throw new st(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KM(this,s),this.Ai=r+"main",this.serializer=new rT(A),this.Ri=new il(this.Ai,this.hi,new r8(this.serializer)),this.$r=new TM,this.Ur=new DM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uT(this.serializer),this.Gr=new FM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,fy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Fi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Nl(e))return Ye("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ye("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Fh(e).get("owner").next(r=>Ie.resolve(this.vi(r)))}Ci(e){return Om(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Qn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Ie.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ie.resolve(!0):Fh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Om(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Ye("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new a2(e,Fi.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Om(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Pw.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ye("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(A){return A===17?LO:A===16?QO:A===15?_b:A===14?p4:A===13?f4:A===12?PO:A===11?h4:void bt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new a2(o,this.Qr?this.Qr.next():Fi.oe),r==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw Fs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new st(ke.FAILED_PRECONDITION,l4);return n(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Fh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new st(ke.FAILED_PRECONDITION,fy)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fh(e).put("owner",r)}static D(){return il.D()}bi(e){const r=Fh(e);return r.get("owner").next(n=>this.vi(n)?(Ye("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ie.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Fs(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;cF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ye("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Fs("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Fs("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fh(t){return Qn(t,"owner")}function Om(t){return Qn(t,"clientMetadata")}function n8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Yt(),s=Yt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Mb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cF()?8:u4(Pn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new s8;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(ku()<=sr.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Ru(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(ku()<=sr.DEBUG&&Ye("QueryEngine","Query:",Ru(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ku()<=sr.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Ru(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(r))):Ie.resolve())}Yi(e,r){if(tE(r))return Ie.resolve(null);let n=Qi(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=P0(r,null,"F"),n=Qi(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Yt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(A=>{const c=this.ts(r,o);return this.ns(r,c,a,A.readTime)?this.Yi(e,P0(r,null,"F")):this.rs(e,c,r,A)}))})))}Zi(e,r,n,s){return tE(r)||s.isEqual(It.min())?Ie.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Ie.resolve(null):(ku()<=sr.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ru(r)),this.rs(e,a,r,uO(s,-1)).next(o=>o))})}ts(e,r){let n=new Sr(F4(e));return r.forEach((s,i)=>{jp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return ku()<=sr.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Ru(r)),this.Ji.getDocumentsMatchingQuery(e,r,ci.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Zr(Gt),this._s=new Il(i=>Lc(i),Qp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function pT(t,e,r,n){return new i8(t,e,r,n)}async function mT(t,e){const r=Mt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let A=Yt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}return r.localDocuments.getDocuments(n,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function a8(t,e){const r=Mt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,d){const f=c.batch,m=f.keys();let g=Ie.resolve();return m.forEach(B=>{g=g.next(()=>d.getEntry(A,B)).next(C=>{const b=c.docVersions.get(B);_t(b!==null),C.version.compareTo(b)<0&&(f.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(A,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let A=Yt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function gT(t){const e=Mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function o8(t,e){const r=Mt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;o.push(r.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,d.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(yn.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(f,g),function(C,b,y){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,d)&&o.push(r.Ur.updateTargetData(i,g))});let A=ai(),c=Yt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(A8(i,a,e.documentUpdates).next(d=>{A=d.Ps,c=d.Is})),!n.isEqual(It.min())){const d=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(d)}return Ie.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(r.os=s,i))}function A8(t,e,r){let n=Yt(),s=Yt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=ai();return r.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual(It.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):Ye("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function l8(t,e){const r=Mt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function c8(t,e){const r=Mt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ie.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Eo(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function y2(t,e,r){const n=Mt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Nl(a))throw a;Ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function FE(t,e,r){const n=Mt(t);let s=It.min(),i=Yt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,d){const f=Mt(A),m=f._s.get(d);return m!==void 0?Ie.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(n,a,Qi(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:It.min(),r?i:Yt())).next(o=>(u8(n,XO(e),o),{documents:o,Ts:i})))}function u8(t,e,r){let n=t.us.get(e)||It.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class TE{constructor(){this.activeTargetIds=rM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wT{constructor(){this.so=new TE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new TE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mm=null;function py(){return Mm===null?Mm=function(){return 268435456+Math.round(2147483648*Math.random())}():Mm++,"0x"+Mm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="WebChannelConnection";class p8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=py(),A=this.xo(r,n.toUriEncodedString());Ye("RestConnection",`Sending RPC '${r}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,A,c,s).then(d=>(Ye("RestConnection",`Received RPC '${r}' ${o}: `,d),d),d=>{throw dl("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",A,"request:",s),d})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=h8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=py();return new Promise((a,o)=>{const A=new e4;A.setWithCredentials(!0),A.listenOnce(t4.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Dg.NO_ERROR:const d=A.getResponseJson();Ye(hs,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case Dg.TIMEOUT:Ye(hs,`RPC '${e}' ${i} timed out`),o(new st(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Dg.HTTP_ERROR:const f=A.getStatus();if(Ye(hs,`RPC '${e}' ${i} failed with status:`,f,"response text:",A.getResponseText()),f>0){let m=A.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const B=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(y)>=0?y:ke.UNKNOWN}(g.status);o(new st(B,g.message))}else o(new st(ke.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new st(ke.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{Ye(hs,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Ye(hs,`RPC '${e}' ${i} sending request:`,s),A.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=py(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=s4(),o=n4(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,r,n),A.encodeInitMessageHeaders=!0;const d=i.join("");Ye(hs,`Creating RPC '${e}' stream ${s}: ${d}`,A);const f=a.createWebChannel(d,A);let m=!1,g=!1;const B=new f8({Io:b=>{g?Ye(hs,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(Ye(hs,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Ye(hs,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},To:()=>f.close()}),C=(b,y,w)=>{b.listen(y,N=>{try{w(N)}catch(R){setTimeout(()=>{throw R},0)}})};return C(f,Wh.EventType.OPEN,()=>{g||(Ye(hs,`RPC '${e}' stream ${s} transport opened.`),B.yo())}),C(f,Wh.EventType.CLOSE,()=>{g||(g=!0,Ye(hs,`RPC '${e}' stream ${s} transport closed`),B.So())}),C(f,Wh.EventType.ERROR,b=>{g||(g=!0,dl(hs,`RPC '${e}' stream ${s} transport errored:`,b),B.So(new st(ke.UNAVAILABLE,"The operation could not be completed")))}),C(f,Wh.EventType.MESSAGE,b=>{var y;if(!g){const w=b.data[0];_t(!!w);const N=w,R=N.error||((y=N[0])===null||y===void 0?void 0:y.error);if(R){Ye(hs,`RPC '${e}' stream ${s} received error:`,R);const V=R.status;let O=function(L){const D=Bn[L];if(D!==void 0)return H4(D)}(V),T=R.message;O===void 0&&(O=ke.INTERNAL,T="Unknown error status: "+V+" with message "+R.message),g=!0,B.So(new st(O,T)),f.close()}else Ye(hs,`RPC '${e}' stream ${s} received:`,w),B.bo(w)}}),C(o,r4.STAT_EVENT,b=>{b.stat===s2.PROXY?Ye(hs,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===s2.NOPROXY&&Ye(hs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{B.wo()},0),B}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(){return typeof window<"u"?window:null}function Gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){return new wM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,r,n,s,i,a,o,A){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hb(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ke.RESOURCE_EXHAUSTED?(Fs(r.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new st(ke.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g8 extends vT{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=bM(this.serializer,e),n=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?Vn(a.readTime):It.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=p2(this.serializer),r.addTarget=function(i,a){let o;const A=a.target;if(o=T0(A)?{documents:X4(i,A)}:{query:J4(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=q4(i,a.resumeToken);const c=h2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(It.min())>0){o.readTime=Ud(i,a.snapshotVersion.toTimestamp());const c=h2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=CM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=p2(this.serializer),r.removeTarget=e,this.a_(r)}}class w8 extends vT{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=BM(e.writeResults,e.commitTime),n=Vn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=p2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>dp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,f2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(ke.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,f2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(ke.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class y8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fs(r),this.D_=!1):Ye("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Kc(this)&&(Ye("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=Mt(A);c.L_.add(4),await Rp(c),c.q_.set("Unknown"),c.L_.delete(4),await jw(c)}(this))})}),this.q_=new y8(n,s)}}async function jw(t){if(Kc(t))for(const e of t.B_)await e(!0)}async function Rp(t){for(const e of t.B_)await e(!1)}function yT(t,e){const r=Mt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Gb(r)?qb(r):zd(r).r_()&&Kb(r,e))}function Vb(t,e){const r=Mt(t),n=zd(r);r.N_.delete(e),n.r_()&&xT(r,e),r.N_.size===0&&(n.r_()?n.o_():Kc(r)&&r.q_.set("Unknown"))}function Kb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}zd(t).A_(e)}function xT(t,e){t.Q_.xe(e),zd(t).R_(e)}function qb(t){t.Q_=new fM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zd(t).start(),t.q_.v_()}function Gb(t){return Kc(t)&&!zd(t).n_()&&t.N_.size>0}function Kc(t){return Mt(t).L_.size===0}function bT(t){t.Q_=void 0}async function b8(t){t.q_.set("Online")}async function B8(t){t.N_.forEach((e,r)=>{Kb(t,e)})}async function C8(t,e){bT(t),Gb(t)?(t.q_.M_(e),qb(t)):t.q_.set("Unknown")}async function E8(t,e,r){if(t.q_.set("Online"),e instanceof K4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){Ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await k0(t,n)}else if(e instanceof qg?t.Q_.Ke(e):e instanceof V4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(It.min()))try{const n=await gT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const d=i.N_.get(A);if(!d)return;i.N_.set(A,d.withResumeToken(yn.EMPTY_BYTE_STRING,d.snapshotVersion)),xT(i,A);const f=new Eo(d.target,A,c,d.sequenceNumber);Kb(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Ye("RemoteStore","Failed to raise snapshot:",n),await k0(t,n)}}async function k0(t,e,r){if(!Nl(e))throw e;t.L_.add(1),await Rp(t),t.q_.set("Offline"),r||(r=()=>gT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ye("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await jw(t)})}function BT(t,e){return e().catch(r=>k0(t,r,e))}async function Dp(t){const e=Mt(t),r=ml(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_8(e);)try{const s=await l8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,N8(e,s)}catch(s){await k0(e,s)}CT(e)&&ET(e)}function _8(t){return Kc(t)&&t.O_.length<10}function N8(t,e){t.O_.push(e);const r=ml(t);r.r_()&&r.V_&&r.m_(e.mutations)}function CT(t){return Kc(t)&&!ml(t).n_()&&t.O_.length>0}function ET(t){ml(t).start()}async function I8(t){ml(t).p_()}async function S8(t){const e=ml(t);for(const r of t.O_)e.m_(r.mutations)}async function F8(t,e,r){const n=t.O_.shift(),s=Pb.from(n,e,r);await BT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dp(t)}async function T8(t,e){e&&ml(t).V_&&await async function(n,s){if(function(a){return M4(a)&&a!==ke.ABORTED}(s.code)){const i=n.O_.shift();ml(n).s_(),await BT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Dp(n)}}(t,e),CT(t)&&ET(t)}async function PE(t,e){const r=Mt(t);r.asyncQueue.verifyOperationInProgress(),Ye("RemoteStore","RemoteStore received new credentials");const n=Kc(r);r.L_.add(3),await Rp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await jw(r)}async function U8(t,e){const r=Mt(t);e?(r.L_.delete(2),await jw(r)):e||(r.L_.add(2),await Rp(r),r.q_.set("Unknown"))}function zd(t){return t.K_||(t.K_=function(r,n,s){const i=Mt(r);return i.w_(),new g8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:b8.bind(null,t),Ro:B8.bind(null,t),mo:C8.bind(null,t),d_:E8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Gb(t)?qb(t):t.q_.set("Unknown")):(await t.K_.stop(),bT(t))})),t.K_}function ml(t){return t.U_||(t.U_=function(r,n,s){const i=Mt(r);return i.w_(),new w8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:I8.bind(null,t),mo:T8.bind(null,t),f_:S8.bind(null,t),g_:F8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dp(t)):(await t.U_.stop(),t.O_.length>0&&(Ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new zb(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $b(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),Nl(t))return new st(ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ht.comparator(r.key,n.key):(r,n)=>ht.comparator(r.key,n.key),this.keyedMap=Xh(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new pd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new pd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.W_=new Zr(ht.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):bt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Pd{constructor(e,r,n,s,i,a,o,A,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Pd(e,r,pd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Iw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q8{constructor(){this.queries=LE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Mt(r),i=s.queries;s.queries=LE(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(n)})})(this,new st(ke.ABORTED,"Firestore shutting down"))}}function LE(){return new Il(t=>S4(t),Iw)}async function Wb(t,e){const r=Mt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new P8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=$b(a,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&Jb(r)}async function Xb(t,e){const r=Mt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function L8(t,e){const r=Mt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&Jb(r)}function j8(t,e,r){const n=Mt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function Jb(t){t.Y_.forEach(e=>{e.next()})}var x2,jE;(jE=x2||(x2={})).ea="default",jE.Cache="cache";class Yb{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Pd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==x2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.key=e}}class NT{constructor(e){this.key=e}}class k8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yt(),this.mutatedKeys=Yt(),this.Aa=F4(e),this.Ra=new pd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new QE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),g=jp(this.query,f)?f:null,B=!!m&&this.mutatedKeys.has(m.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;m&&g?m.data.isEqual(g.data)?B!==C&&(n.track({type:3,doc:g}),b=!0):this.ga(m,g)||(n.track({type:2,doc:g}),b=!0,(A&&this.Aa(g,A)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),b=!0):m&&!g&&(n.track({type:1,doc:m}),b=!0,(A||c)&&(o=!0)),b&&(g?(a=a.add(g),i=C?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(g,B){const C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return C(g)-C(B)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new Pd(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new QE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new NT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new _T(n))}),r}ba(e){this.Ta=e.Ts,this.da=Yt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Pd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class R8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class D8{constructor(e){this.key=e,this.va=!1}}class O8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Il(o=>S4(o),Iw),this.Ma=new Map,this.xa=new Set,this.Oa=new Zr(ht.comparator),this.Na=new Map,this.La=new Db,this.Ba={},this.ka=new Map,this.qa=Rc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function M8(t,e,r=!0){const n=PT(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await IT(n,e,r,!0),s}async function H8(t,e){const r=PT(t);await IT(r,e,!0,!1)}async function IT(t,e,r,n){const s=await c8(t.localStore,Qi(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await V8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&yT(t.remoteStore,s),o}async function V8(t,e,r,n,s){t.Ka=(f,m,g)=>async function(C,b,y,w){let N=b.view.ma(y);N.ns&&(N=await FE(C.localStore,b.query,!1).then(({documents:T})=>b.view.ma(T,N)));const R=w&&w.targetChanges.get(b.targetId),V=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(N,C.isPrimaryClient,R,V);return RE(C,b.targetId,O.wa),O.snapshot}(t,f,m,g);const i=await FE(t.localStore,e,!0),a=new k8(e,i.Ts),o=a.ma(i.documents),A=kp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);RE(t,r,c.wa);const d=new R8(e,r,a);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function K8(t,e,r){const n=Mt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Iw(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await y2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Vb(n.remoteStore,s.targetId),b2(n,s.targetId)}).catch(Hc)):(b2(n,s.targetId),await y2(n.localStore,s.targetId,!0))}async function q8(t,e){const r=Mt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Vb(r.remoteStore,n.targetId))}async function G8(t,e,r){const n=QT(t);try{const s=await function(a,o){const A=Mt(a),c=Lt.now(),d=o.reduce((g,B)=>g.add(B.key),Yt());let f,m;return A.persistence.runTransaction("Locally write mutations","readwrite",g=>{let B=ai(),C=Yt();return A.cs.getEntries(g,d).next(b=>{B=b,B.forEach((y,w)=>{w.isValidDocument()||(C=C.add(y))})}).next(()=>A.localDocuments.getOverlayedDocuments(g,B)).next(b=>{f=b;const y=[];for(const w of o){const N=cM(w,f.get(w.key).overlayedDocument);N!=null&&y.push(new qo(w.key,N,y4(N.value.mapValue),Jr.exists(!0)))}return A.mutationQueue.addMutationBatch(g,c,y,o)}).next(b=>{m=b;const y=b.applyToLocalDocumentSet(f,C);return A.documentOverlayCache.saveOverlays(g,b.batchId,y)})}).then(()=>({batchId:m.batchId,changes:U4(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new Zr(Gt)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Op(n,s.changes),await Dp(n.remoteStore)}catch(s){const i=$b(s,"Failed to persist write");r.reject(i)}}async function ST(t,e){const r=Mt(t);try{const n=await o8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?_t(a.va):s.removedDocuments.size>0&&(_t(a.va),a.va=!1))}),await Op(r,n,e)}catch(n){await Hc(n)}}function kE(t,e,r){const n=Mt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=Mt(a);A.onlineState=o;let c=!1;A.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(o)&&(c=!0)}),c&&Jb(A)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function z8(t,e,r){const n=Mt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Zr(ht.comparator);a=a.insert(i,Wr.newNoDocument(i,It.min()));const o=Yt().add(i),A=new Tw(It.min(),new Map,new Zr(Gt),a,o);await ST(n,A),n.Oa=n.Oa.remove(i),n.Na.delete(e),Zb(n)}else await y2(n.localStore,e,!1).then(()=>b2(n,e,r)).catch(Hc)}async function $8(t,e){const r=Mt(t),n=e.batch.batchId;try{const s=await a8(r.localStore,e);TT(r,n,null),FT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Op(r,s)}catch(s){await Hc(s)}}async function W8(t,e,r){const n=Mt(t);try{const s=await function(a,o){const A=Mt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return A.mutationQueue.lookupMutationBatch(c,o).next(f=>(_t(f!==null),d=f.keys(),A.mutationQueue.removeMutationBatch(c,f))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>A.localDocuments.getDocuments(c,d))})}(n.localStore,e);TT(n,e,r),FT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Op(n,s)}catch(s){await Hc(s)}}function FT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function TT(t,e,r){const n=Mt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function b2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||UT(t,n)})}function UT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Vb(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Zb(t))}function RE(t,e,r){for(const n of r)n instanceof _T?(t.La.addReference(n.key,e),X8(t,n)):n instanceof NT?(Ye("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||UT(t,n.key)):bt()}function X8(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ye("SyncEngine","New document in limbo: "+r),t.xa.add(n),Zb(t))}function Zb(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ht(ur.fromString(e)),n=t.qa.next();t.Na.set(n,new D8(r)),t.Oa=t.Oa.insert(r,n),yT(t.remoteStore,new Eo(Qi(Lp(r.path)),n,"TargetPurposeLimboResolution",Fi.oe))}}async function Op(t,e,r){const n=Mt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,A)=>{a.push(n.Ka(A,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(A.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(A.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Mb.Wi(A.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(A,c){const d=Mt(A);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ie.forEach(c,m=>Ie.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>Ie.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Nl(f))throw f;Ye("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.os.get(m),B=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(B);d.os=d.os.insert(m,C)}}}(n.localStore,i))}async function J8(t,e){const r=Mt(t);if(!r.currentUser.isEqual(e)){Ye("SyncEngine","User change. New user:",e.toKey());const n=await mT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new st(ke.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Op(r,n.hs)}}function Y8(t,e){const r=Mt(t),n=r.Na.get(e);if(n&&n.va)return Yt().add(n.key);{let s=Yt();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function PT(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ST.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z8.bind(null,e),e.Ca.d_=L8.bind(null,e.eventManager),e.Ca.$a=j8.bind(null,e.eventManager),e}function QT(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W8.bind(null,e),e}class hp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return pT(this.persistence,new fT,e.initialUser,this.serializer)}Ga(e){return new hT(Qw.Zr,this.serializer)}Wa(e){return new wT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hp.provider={build:()=>new hp};class Z8 extends hp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await QT(this.Ja.syncEngine),await Dp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return pT(this.persistence,new fT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new MM(n,e.asyncQueue,r)}Ha(e,r){const n=new pO(r,this.persistence);return new fO(e.asyncQueue,n)}Ga(e){const r=n8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new Ob(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,m8(),Gg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new wT}}class R0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>kE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=J8.bind(null,this.syncEngine),await U8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q8}()}createDatastore(e){const r=Lw(e.databaseInfo.databaseId),n=function(i){return new p8(i)}(e.databaseInfo);return function(i,a,o,A){return new v8(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new x8(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>kE(this.syncEngine,r,0),function(){return UE.D()?new UE:new d8}())}createSyncEngine(e,r){return function(s,i,a,o,A,c,d){const f=new O8(s,i,a,o,A,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Mt(s);Ye("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Rp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=Mt(s),o={documents:i.map(f=>up(a.serializer,f))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,ur.emptyPath(),o,i.length),c=new Map;A.forEach(f=>{const m=xM(a.serializer,f);c.set(m.key.toString(),m)});const d=[];return i.forEach(f=>{const m=c.get(f.toString());_t(!!m),d.push(m)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=ht.fromPath(n);this.mutations.push(new Tb(s,this.precondition(s)))}),await async function(n,s){const i=Mt(n),a={writes:s.map(o=>dp(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,ur.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw bt();r=It.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new st(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(It.min())?Jr.exists(!1):Jr.updateTime(r):Jr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(It.min()))throw new st(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jr.updateTime(r)}return Jr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new Hb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new eH(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Pp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!M4(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=es.UNAUTHENTICATED,this.clientId=Bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Ye("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ye("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=$b(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function my(t,e){t.asyncQueue.verifyOperationInProgress(),Ye("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await mT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function DE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await nH(t);Ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>PE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>PE(e.remoteStore,s)),t._onlineComponents=e}async function nH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await my(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ke.FAILED_PRECONDITION||s.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;dl("Error using user provided cache. Falling back to memory cache: "+r),await my(t,new hp)}}else Ye("FirestoreClient","Using default OfflineComponentProvider"),await my(t,new hp);return t._offlineComponents}async function tB(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ye("FirestoreClient","Using user provided OnlineComponentProvider"),await DE(t,t._uninitializedComponentsProvider._online)):(Ye("FirestoreClient","Using default OnlineComponentProvider"),await DE(t,new R0))),t._onlineComponents}function sH(t){return tB(t).then(e=>e.syncEngine)}function iH(t){return tB(t).then(e=>e.datastore)}async function D0(t){const e=await tB(t),r=e.eventManager;return r.onListen=M8.bind(null,e.syncEngine),r.onUnlisten=K8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=H8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=q8.bind(null,e.syncEngine),r}function aH(t,e,r={}){const n=new sa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new eB({next:m=>{d.Za(),a.enqueueAndForget(()=>Xb(i,f));const g=m.docs.has(o);!g&&m.fromCache?c.reject(new st(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&A&&A.source==="server"?c.reject(new st(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Yb(Lp(o.path),d,{includeMetadataChanges:!0,_a:!0});return Wb(i,f)}(await D0(t),t.asyncQueue,e,r,n)),n.promise}function oH(t,e,r={}){const n=new sa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new eB({next:m=>{d.Za(),a.enqueueAndForget(()=>Xb(i,f)),m.fromCache&&A.source==="server"?c.reject(new st(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Yb(o,d,{includeMetadataChanges:!0,_a:!0});return Wb(i,f)}(await D0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e,r){if(!r)throw new st(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,r,n){if(e===!0&&n===!0)throw new st(ke.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function ME(t){if(!ht.isDocumentKey(t))throw new st(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HE(t){if(ht.isDocumentKey(t))throw new st(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=kw(t);throw new st(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new st(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new st(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rw{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new a4;switch(n.type){case"firstParty":return new aO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new st(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=OE.get(r);n&&(Ye("ComponentProvider","Removing Datastore"),OE.delete(r),n.terminate())}(this),Promise.resolve()}}function RT(t,e,r,n={}){var s;const i=(t=Kn(t,Rw))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,A;if(typeof n.mockUserToken=="string")o=n.mockUserToken,A=es.MOCK_USER;else{o=Bk(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new st(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new es(c)}t._authCredentials=new nO(new i4(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ha(this.firestore,e,this._query)}}class qn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class To extends Ha{constructor(e,r,n){super(e,r,Lp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new ht(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function ct(t,e,...r){if(t=ln(t),jT("collection","path",e),t instanceof Rw){const n=ur.fromString(e,...r);return HE(n),new To(t,null,n)}{if(!(t instanceof qn||t instanceof To))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ur.fromString(e,...r));return HE(n),new To(t.firestore,null,n)}}function Tt(t,e,...r){if(t=ln(t),arguments.length===1&&(e=Bb.newId()),jT("doc","path",e),t instanceof Rw){const n=ur.fromString(e,...r);return ME(n),new qn(t,null,new ht(n))}{if(!(t instanceof qn||t instanceof To))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ur.fromString(e,...r));return ME(n),new qn(t.firestore,t instanceof To?t.converter:null,new ht(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hb(this,"async_queue_retry"),this.Vu=()=>{const n=Gg();n&&Ye("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Gg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Gg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new sa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Nl(e))throw e;Ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Fs("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=zb.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function qE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ui extends Rw{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new KE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KE(e),this._firestoreClient=void 0,await e}}}function DT(t,e){const r=typeof t=="object"?t:db(),n=typeof t=="string"?t:"(default)",s=cb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=xk("firestore");i&&RT(s,...i)}return s}function qc(t){if(t._terminated)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OT(t),t._firestoreClient}function OT(t){var e,r,n;const s=t._freezeSettings(),i=function(o,A,c,d){return new kO(o,A,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,LT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function MT(t,e){dl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return AH(t,R0.provider,{build:n=>new Z8(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function AH(t,e,r){if((t=Kn(t,ui))._firestoreClient||t._terminated)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new st(ke.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},OT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(yn.fromBase64String(e))}catch(r){throw new st(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new gl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new st(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new st(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new st(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH=/^__.*__$/;class cH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,r,this.fieldTransforms):new qd(e,this.data,r,this.fieldTransforms)}}class HT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new qo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function VT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class rB{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rB(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return O0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VT(this.Cu)&&lH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Lw(e)}Qu(e,r,n,s=!1){return new rB({Cu:e,methodName:r,qu:n,path:Xr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),r=Lw(t._databaseId);return new uH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Hw(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);iB("Data must be an object, but it was:",a,n);const o=KT(n,a);let A,c;if(i.merge)A=new Gs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=B2(e,f,r);if(!a.contains(m))throw new st(ke.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);GT(d,m)||d.push(m)}A=new Gs(d),c=a.fieldTransforms.filter(f=>A.covers(f.field))}else A=null,c=a.fieldTransforms;return new cH(new ns(o),A,c)}class Vw extends Dw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vw}}function nB(t,e,r,n){const s=t.Qu(1,e,r);iB("Data must be an object, but it was:",s,n);const i=[],a=ns.empty();Vc(n,(A,c)=>{const d=aB(e,A,r);c=ln(c);const f=s.Nu(d);if(c instanceof Vw)i.push(d);else{const m=Mp(c,f);m!=null&&(i.push(d),a.set(d,m))}});const o=new Gs(i);return new HT(a,o,s.fieldTransforms)}function sB(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[B2(e,n,r)],A=[s];if(i.length%2!=0)throw new st(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(B2(e,i[m])),A.push(i[m+1]);const c=[],d=ns.empty();for(let m=o.length-1;m>=0;--m)if(!GT(c,o[m])){const g=o[m];let B=A[m];B=ln(B);const C=a.Nu(g);if(B instanceof Vw)c.push(g);else{const b=Mp(B,C);b!=null&&(c.push(g),d.set(g,b))}}const f=new Gs(c);return new HT(d,f,a.fieldTransforms)}function dH(t,e,r,n=!1){return Mp(r,t.Qu(n?4:3,e))}function Mp(t,e){if(qT(t=ln(t)))return iB("Unsupported field value:",e,t),KT(t,e);if(t instanceof Dw)return function(n,s){if(!VT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let A=Mp(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=ln(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return nM(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Lt.fromDate(n);return{timestampValue:Ud(s.serializer,i)}}if(n instanceof Lt){const i=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ud(s.serializer,i)}}if(n instanceof Ow)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gl)return{bytesValue:q4(s.serializer,n._byteString)};if(n instanceof qn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Mw)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return Fb(o.serializer,A)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${kw(n)}`)}(t,e)}function KT(t,e){const r={};return m4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(t,(n,s)=>{const i=Mp(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function qT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof Ow||t instanceof gl||t instanceof qn||t instanceof Dw||t instanceof Mw)}function iB(t,e,r){if(!qT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=kw(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function B2(t,e,r){if((e=ln(e))instanceof Gc)return e._internalPath;if(typeof e=="string")return aB(t,e);throw O0("Field path arguments must be of type string or ",t,!1,void 0,r)}const hH=new RegExp("[~\\*/\\[\\]]");function aB(t,e,r){if(e.search(hH)>=0)throw O0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Gc(...e.split("."))._internalPath}catch{throw O0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function O0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${n}`),a&&(A+=` in document ${s}`),A+=")"),new st(ke.INVALID_ARGUMENT,o+t+A)}function GT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Kw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class fH extends M0{data(){return super.data()}}function Kw(t,e){return typeof e=="string"?aB(t,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oB{}class qw extends oB{}function Xt(t,e,...r){let n=[];e instanceof oB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(A=>A instanceof Gw).length,o=i.filter(A=>A instanceof Hp).length;if(a>1||a>0&&o>0)throw new st(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Hp extends qw{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Hp(e,r,n)}_apply(e){const r=this._parse(e);return WT(e._query,r),new Ha(e.firestore,e.converter,d2(e._query,r))}_parse(e){const r=$d(e.firestore);return function(i,a,o,A,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new st(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zE(f,d);const g=[];for(const B of f)g.push(GE(A,i,B));m={arrayValue:{values:g}}}else m=GE(A,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zE(f,d),m=dH(o,a,f,d==="in"||d==="not-in");return ir.create(c,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ar(t,e,r){const n=e,s=Kw("where",t);return Hp._create(s,n,r)}class Gw extends oB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Gw(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Cr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)WT(a,A),a=d2(a,A)}(e._query,r),new Ha(e.firestore,e.converter,d2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zw extends qw{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new zw(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new st(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new st(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ap(i,a)}(e._query,this._field,this._direction);return new Ha(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Kd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function di(t,e="asc"){const r=e,n=Kw("orderBy",t);return zw._create(n,r)}class $w extends qw{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new $w(e,r,n)}_apply(e){return new Ha(e.firestore,e.converter,P0(e._query,this._limit,this._limitType))}}function $T(t){return $w._create("limit",t,"F")}function GE(t,e,r){if(typeof(r=ln(r))=="string"){if(r==="")throw new st(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I4(e)&&r.indexOf("/")!==-1)throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ur.fromString(r));if(!ht.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ap(t,new ht(n))}if(r instanceof qn)return ap(t,r._key);throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kw(r)}.`)}function zE(t,e){if(!Array.isArray(t)||t.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class AB{convertValue(e,r="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw bt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Vc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>zr(a.doubleValue));return new Mw(i)}convertGeoPoint(e){return new Ow(zr(e.latitude),zr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ib(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const r=Mo(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ur.fromString(e);_t(tT(n));const s=new fl(n.get(1),n.get(3)),i=new ht(n.popFirst(5));return s.isEqual(r)||Fs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class pH extends AB{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xw extends M0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Kw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class bf extends Xw{data(e={}){return super.data(e)}}class lB{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new hc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new bf(this._firestore,this._userDataWriter,n.key,n,new hc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new st(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new bf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new hc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new bf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new hc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:mH(o.type),doc:A,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function mH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){t=Kn(t,qn);const e=Kn(t.firestore,ui);return aH(qc(e),t._key).then(r=>JT(e,t,r))}class Jw extends AB{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,r)}}function St(t){t=Kn(t,Ha);const e=Kn(t.firestore,ui),r=qc(e),n=new Jw(e);return zT(t._query),oH(r,t._query).then(s=>new lB(e,n,t,s))}function XT(t,e,r){t=Kn(t,qn);const n=Kn(t.firestore,ui),s=Ww(t.converter,e,r);return Wd(n,[Hw($d(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Jr.none())])}function en(t,e,r,...n){t=Kn(t,qn);const s=Kn(t.firestore,ui),i=$d(s);let a;return a=typeof(e=ln(e))=="string"||e instanceof Gc?sB(i,"updateDoc",t._key,e,r,n):nB(i,"updateDoc",t._key,e),Wd(s,[a.toMutation(t._key,Jr.exists(!0))])}function Ts(t){return Wd(Kn(t.firestore,ui),[new Gd(t._key,Jr.none())])}function ss(t,e){const r=Kn(t.firestore,ui),n=Tt(t),s=Ww(t.converter,e);return Wd(r,[Hw($d(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Jr.exists(!1))]).then(()=>n)}function C2(t,...e){var r,n,s;t=ln(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||qE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(qE(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let A,c,d;if(t instanceof qn)c=Kn(t.firestore,ui),d=Lp(t._key.path),A={next:f=>{e[a]&&e[a](JT(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Kn(t,Ha);c=Kn(f.firestore,ui),d=f._query;const m=new Jw(c);A={next:g=>{e[a]&&e[a](new lB(c,m,f,g))},error:e[a+1],complete:e[a+2]},zT(t._query)}return function(m,g,B,C){const b=new eB(C),y=new Yb(g,b,B);return m.asyncQueue.enqueueAndForget(async()=>Wb(await D0(m),y)),()=>{b.Za(),m.asyncQueue.enqueueAndForget(async()=>Xb(await D0(m),y))}}(qc(c),d,o,A)}function Wd(t,e){return function(n,s){const i=new sa;return n.asyncQueue.enqueueAndForget(async()=>G8(await sH(n),s,i)),i.promise}(qc(t),e)}function JT(t,e,r){const n=r.docs.get(e._key),s=new Jw(t);return new Xw(t,s,e._key,n,new hc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=$d(e)}set(e,r,n){this._verifyNotCommitted();const s=DA(e,this._firestore),i=Ww(s.converter,r,n),a=Hw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Jr.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=DA(e,this._firestore);let a;return a=typeof(r=ln(r))=="string"||r instanceof Gc?sB(this._dataReader,"WriteBatch.update",i._key,r,n,s):nB(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=DA(e,this._firestore);return this._mutations=this._mutations.concat(new Gd(r._key,Jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DA(t,e){if((t=ln(t)).firestore!==e)throw new st(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=$d(r)}get(r){const n=DA(r,this._firestore),s=new pH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return bt();const a=i[0];if(a.isFoundDocument())return new M0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new M0(this._firestore,s,n._key,null,n.converter);throw bt()})}set(r,n,s){const i=DA(r,this._firestore),a=Ww(i.converter,n,s),o=Hw(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=DA(r,this._firestore);let o;return o=typeof(n=ln(n))=="string"||n instanceof Gc?sB(this._dataReader,"Transaction.update",a._key,n,s,i):nB(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=DA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=DA(e,this._firestore),n=new Jw(this._firestore);return super.get(e).then(s=>new Xw(this._firestore,n,r._key,s._document,new hc(!1,!1),r.converter))}}function al(t,e,r){t=Kn(t,ui);const n=Object.assign(Object.assign({},gH),r);return function(i){if(i.maxAttempts<1)throw new st(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const A=new sa;return i.asyncQueue.enqueueAndForget(async()=>{const c=await iH(i);new tH(i.asyncQueue,c,o,a,A).au()}),A.promise}(qc(t),s=>e(new ZT(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){return qc(t=Kn(t,ui)),new YT(t,e=>Wd(t,e))}(function(e,r=!0){(function(s){Vd=s})(Md),Ed(new Fc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new ui(new sO(n.getProvider("auth-internal")),new AO(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new st(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(c.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),sl(D5,"4.7.3",e),sl(D5,"4.7.3","esm2017")})();const wH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:AB,Bytes:gl,CollectionReference:To,DocumentReference:qn,DocumentSnapshot:Xw,FieldPath:Gc,FieldValue:Dw,Firestore:ui,FirestoreError:st,GeoPoint:Ow,Query:Ha,QueryCompositeFilterConstraint:Gw,QueryConstraint:qw,QueryDocumentSnapshot:bf,QueryFieldFilterConstraint:Hp,QueryLimitConstraint:$w,QueryOrderByConstraint:zw,QuerySnapshot:lB,SnapshotMetadata:hc,Timestamp:Lt,Transaction:ZT,VectorValue:Mw,WriteBatch:YT,_AutoId:Bb,_ByteString:yn,_DatabaseId:fl,_DocumentKey:ht,_EmptyAuthCredentialsProvider:a4,_FieldPath:Xr,_cast:Kn,_logWarn:dl,_validateIsNotUsedTogether:kT,addDoc:ss,collection:ct,connectFirestoreEmulator:RT,deleteDoc:Ts,doc:Tt,enableIndexedDbPersistence:MT,ensureFirestoreConfigured:qc,executeWrite:Wd,getDoc:Sl,getDocs:St,getFirestore:DT,limit:$T,onSnapshot:C2,orderBy:di,query:Xt,runTransaction:al,setDoc:XT,updateDoc:en,where:Ar,writeBatch:Yw},Symbol.toStringTag,{value:"Module"})),vH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},eU=ub(vH),Ue=DT(eU),Zw=YF(eU);MT(Ue).catch(t=>{t.code==="failed-precondition"?console.warn("⚠️ Ya hay otra pestaña usando persistencia."):t.code==="unimplemented"?console.warn("⚠️ El navegador no soporta persistencia offline."):console.error("❌ Error en persistencia offline:",t)});function yH(){const[t,e]=j.useState(""),[r,n]=j.useState(""),[s,i]=j.useState(!1),[a,o]=j.useState(""),[A,c]=j.useState(!1),d=yw(),f=g=>{if(localStorage.setItem("role",g),g==="admin")return d("/admin");if(g==="vendedor_pollo")return d("/admin/salesV2");if(g==="vendedor_ropa")return d("/admin/salesClothes")},m=async g=>{if(g.preventDefault(),o(""),!t.trim()){o("Ingresa el correo.");return}if(r.length<6){o("La contraseña debe tener al menos 6 caracteres.");return}try{c(!0);const B=await MD(Zw,t,r),C=B.user.uid,b=await Sl(Tt(Ue,"users",C));if(!b.exists()){o("Tu usuario no tiene perfil en la base de datos.");return}const y=b.data(),w=y.role||"",N=y.name||"";if(!["admin","vendedor_pollo","vendedor_ropa"].includes(w)){o("Rol no válido. Consulta al administrador.");return}localStorage.setItem("user_email",B.user.email||""),N&&localStorage.setItem("user_name",N),f(w)}catch(B){const C=String((B==null?void 0:B.code)||"");o(C==="auth/invalid-credential"||C==="auth/wrong-password"?"Credenciales incorrectas.":C==="auth/user-not-found"?"Usuario no encontrado.":C==="auth/too-many-requests"?"Demasiados intentos. Intenta más tarde.":(B==null?void 0:B.message)||"Error al iniciar sesión.")}finally{c(!1)}};return l.jsx("div",{className:"min-h-screen grid place-items-center",children:l.jsxs("form",{onSubmit:m,className:"w-[92%] max-w-md bg-white p-6 rounded-lg shadow border",children:[l.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesión"}),l.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrónico"}),l.jsx("input",{type:"email",className:"w-full border rounded px-3 py-2 mb-3",value:t,onChange:g=>e(g.target.value),autoComplete:"username"}),l.jsx("label",{className:"block text-sm font-semibold",children:"Contraseña"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:s?"text":"password",className:"flex-1 border rounded px-3 py-2",value:r,onChange:g=>n(g.target.value),minLength:6,autoComplete:"current-password"}),l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(g=>!g),children:s?"Ocultar":"Mostrar"})]}),l.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mínimo 6 caracteres (requisito de Firebase)."}),l.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:A,children:A?"Entrando...":"Entrar"}),a&&l.jsx("p",{className:`mt-3 text-sm ${a.startsWith("Error")||a.includes("no válido")?"text-red-600":"text-gray-700"}`,children:a})]})})}function hn({children:t,allowedRoles:e}){const[r,n]=j.useState(!0),[s,i]=j.useState(!1);return j.useEffect(()=>{const a=OF(Zw,async o=>{if(o){const A=Tt(Ue,"users",o.uid),c=await Sl(A);if(c.exists()){const d=c.data().role;i(e.includes(d))}}n(!1)});return()=>a()},[e]),r?l.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:l.jsx(ju,{to:"/"})}function xH({role:t}){const e="/admin",r=({isActive:z})=>`block rounded px-3 py-2 text-sm ${z?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=yw(),[s,i]=j.useState(!1),[a,o]=j.useState(!1),[A,c]=j.useState(!1),[d,f]=j.useState(!1),[m,g]=j.useState(!1),[B,C]=j.useState(!1),[b,y]=j.useState(!1),[w,N]=j.useState(!1),[R,V]=j.useState(!1),[O,T]=j.useState(!1),[_,L]=j.useState(!1),[D,S]=j.useState(!1),I=async()=>{await MF(Zw),n("/")},F=({open:z,onClick:ce,children:ae})=>l.jsxs("button",{type:"button",onClick:ce,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[l.jsx("span",{children:ae}),l.jsx("span",{className:"text-xs",children:z?"▾":"▸"})]}),Y=({open:z,onClick:ce,title:ae})=>l.jsxs("button",{type:"button",onClick:ce,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[l.jsx("span",{className:"text-blue-500 font-medium ",children:ae}),l.jsx("span",{className:"text-xs",children:z?"▾":"▸"})]}),ue=t==="admin",ne=t==="vendedor_pollo"||t==="vendedor",se=t==="vendedor_ropa";return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[l.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir menú":"Colapsar menú",children:s?l.jsx("span",{title:"Expandir menú",children:"▶"}):l.jsx("span",{title:"Colapsar menú",children:"◀"})}),!s&&l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"space-y-1",children:[ue&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(F,{open:a,onClick:()=>o(z=>!z),children:"Operaciones Pollo"}),a&&l.jsxs("div",{className:"pb-2",children:[l.jsx(Y,{open:A,onClick:()=>c(z=>!z),title:"Inventario"}),A&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(jr,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),l.jsx(jr,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),l.jsx(Y,{open:d,onClick:()=>f(z=>!z),title:"Finanzas"}),d&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(jr,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),l.jsx(jr,{to:`${e}/billing`,className:r,children:"Facturacion"}),l.jsx(jr,{to:`${e}/expenses`,className:r,children:"Gastos"}),l.jsx(jr,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(jr,{to:`${e}/bills`,className:r,children:"Cierre"}),l.jsx(jr,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),l.jsx(Y,{open:m,onClick:()=>g(z=>!z),title:"Productos"}),m&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(F,{open:B,onClick:()=>C(z=>!z),children:"Operaciones Ropa"}),B&&l.jsxs("div",{className:"pb-2",children:[l.jsx(Y,{open:b,onClick:()=>y(z=>!z),title:"Inventario"}),b&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),l.jsx(Y,{open:w,onClick:()=>N(z=>!z),title:"Productos"}),w&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),l.jsx(Y,{open:R,onClick:()=>V(z=>!z),title:"Clientes"}),R&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),l.jsx(Y,{open:O,onClick:()=>T(z=>!z),title:"Finanzas"}),O&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),O&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),O&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),O&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),l.jsxs("div",{className:"border rounded",children:[l.jsx(F,{open:D,onClick:()=>S(z=>!z),children:"Operaciones Otras"}),D&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(jr,{to:`${e}/users`,className:r,children:"Usuarios"}),l.jsx(jr,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),l.jsx(jr,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),ne&&l.jsxs("div",{className:"border rounded",children:[l.jsx(F,{open:d,onClick:()=>f(z=>!z),children:"Finanzas (Pollo)"}),d&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(jr,{to:`${e}/salesV2`,className:r,children:"Venta"}),l.jsx(jr,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),se&&l.jsxs("div",{className:"border rounded",children:[l.jsx(F,{open:B,onClick:()=>C(z=>!z),children:"Operaciones Ropa"}),B&&l.jsxs("div",{className:"pb-2",children:[l.jsx(Y,{open:O,onClick:()=>T(z=>!z),title:"Ventas"}),O&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(jr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),l.jsx(jr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),l.jsx(Y,{open:w,onClick:()=>N(z=>!z),title:"Productos"}),w&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),l.jsx(Y,{open:R,onClick:()=>V(z=>!z),title:"Clientes"}),R&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(jr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),l.jsx("button",{onClick:I,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesión"})]})]}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx(Qj,{})})]})}const tU=6048e5,bH=864e5,$E=Symbol.for("constructDateFrom");function Aa(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&$E in t?t[$E](e):t instanceof Date?new t.constructor(e):new Date(e)}function js(t,e){return Aa(e||t,t)}function BH(t,e,r){const n=js(t,r==null?void 0:r.in);return isNaN(e)?Aa(t,NaN):(n.setDate(n.getDate()+e),n)}function CH(t,e,r){const n=js(t,r==null?void 0:r.in);if(isNaN(e))return Aa(t,NaN);const s=n.getDate(),i=Aa(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let EH={};function ev(){return EH}function fp(t,e){var o,A,c,d;const r=ev(),n=(e==null?void 0:e.weekStartsOn)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??r.weekStartsOn??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=js(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function H0(t,e){return fp(t,{...e,weekStartsOn:1})}function rU(t,e){const r=js(t,e==null?void 0:e.in),n=r.getFullYear(),s=Aa(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=H0(s),a=Aa(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=H0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function WE(t){const e=js(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function _H(t,...e){const r=Aa.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function XE(t,e){const r=js(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function NH(t,e,r){const[n,s]=_H(r==null?void 0:r.in,t,e),i=XE(n),a=XE(s),o=+i-WE(i),A=+a-WE(a);return Math.round((o-A)/bH)}function IH(t,e){const r=rU(t,e),n=Aa(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),H0(n)}function SH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function FH(t){return!(!SH(t)&&typeof t!="number"||isNaN(+js(t)))}function Vp(t,e){const r=js(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Kp(t,e){const r=js(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function TH(t,e){const r=js(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const UH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PH=(t,e,r)=>{let n;const s=UH[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function gy(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const QH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kH={date:gy({formats:QH,defaultWidth:"full"}),time:gy({formats:LH,defaultWidth:"full"}),dateTime:gy({formats:jH,defaultWidth:"full"})},RH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DH=(t,e,r,n)=>RH[t];function Th(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const OH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},HH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},KH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GH=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},zH={ordinalNumber:GH,era:Th({values:OH,defaultWidth:"wide"}),quarter:Th({values:MH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Th({values:HH,defaultWidth:"wide"}),day:Th({values:VH,defaultWidth:"wide"}),dayPeriod:Th({values:KH,defaultWidth:"wide",formattingValues:qH,defaultFormattingWidth:"wide"})};function Uh(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],A=Array.isArray(o)?WH(o,f=>f.test(a)):$H(o,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(A):A,c=r.valueCallback?r.valueCallback(c):c;const d=e.slice(a.length);return{value:c,rest:d}}}function $H(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function WH(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function XH(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const JH=/^(\d+)(th|st|nd|rd)?/i,YH=/\d+/i,ZH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eV={any:[/^b/i,/^(a|c)/i]},tV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rV={any:[/1/i,/2/i,/3/i,/4/i]},nV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lV={ordinalNumber:XH({matchPattern:JH,parsePattern:YH,valueCallback:t=>parseInt(t,10)}),era:Uh({matchPatterns:ZH,defaultMatchWidth:"wide",parsePatterns:eV,defaultParseWidth:"any"}),quarter:Uh({matchPatterns:tV,defaultMatchWidth:"wide",parsePatterns:rV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Uh({matchPatterns:nV,defaultMatchWidth:"wide",parsePatterns:sV,defaultParseWidth:"any"}),day:Uh({matchPatterns:iV,defaultMatchWidth:"wide",parsePatterns:aV,defaultParseWidth:"any"}),dayPeriod:Uh({matchPatterns:oV,defaultMatchWidth:"any",parsePatterns:AV,defaultParseWidth:"any"})},cV={code:"en-US",formatDistance:PH,formatLong:kH,formatRelative:DH,localize:zH,match:lV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uV(t,e){const r=js(t,e==null?void 0:e.in);return NH(r,TH(r))+1}function dV(t,e){const r=js(t,e==null?void 0:e.in),n=+H0(r)-+IH(r);return Math.round(n/tU)+1}function nU(t,e){var d,f,m,g;const r=js(t,e==null?void 0:e.in),n=r.getFullYear(),s=ev(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=Aa((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=fp(a,e),A=Aa((e==null?void 0:e.in)||t,0);A.setFullYear(n,0,i),A.setHours(0,0,0,0);const c=fp(A,e);return+r>=+o?n+1:+r>=+c?n:n-1}function hV(t,e){var o,A,c,d;const r=ev(),n=(e==null?void 0:e.firstWeekContainsDate)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(c=r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=nU(t,e),i=Aa((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),fp(i,e)}function fV(t,e){const r=js(t,e==null?void 0:e.in),n=+fp(r,e)-+hV(r,e);return Math.round(n/tU)+1}function Br(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const CA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Br(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Br(r+1,2)},d(t,e){return Br(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Br(t.getHours()%12||12,e.length)},H(t,e){return Br(t.getHours(),e.length)},m(t,e){return Br(t.getMinutes(),e.length)},s(t,e){return Br(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Br(s,e.length)}},Bu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},JE={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return CA.y(t,e)},Y:function(t,e,r,n){const s=nU(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Br(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Br(i,e.length)},R:function(t,e){const r=rU(t);return Br(r,e.length)},u:function(t,e){const r=t.getFullYear();return Br(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Br(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Br(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return CA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Br(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=fV(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Br(s,e.length)},I:function(t,e,r){const n=dV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Br(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):CA.d(t,e)},D:function(t,e,r){const n=uV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Br(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Br(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Br(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Br(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Bu.noon:n===0?s=Bu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Bu.evening:n>=12?s=Bu.afternoon:n>=4?s=Bu.morning:s=Bu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return CA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):CA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Br(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Br(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):CA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):CA.s(t,e)},S:function(t,e){return CA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return ZE(n);case"XXXX":case"XX":return nc(n);case"XXXXX":case"XXX":default:return nc(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return ZE(n);case"xxxx":case"xx":return nc(n);case"xxxxx":case"xxx":default:return nc(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+YE(n,":");case"OOOO":default:return"GMT"+nc(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+YE(n,":");case"zzzz":default:return"GMT"+nc(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Br(n,e.length)},T:function(t,e,r){return Br(+t,e.length)}};function YE(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Br(i,2)}function ZE(t,e){return t%60===0?(t>0?"-":"+")+Br(Math.abs(t)/60,2):nc(t,e)}function nc(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Br(Math.trunc(n/60),2),i=Br(n%60,2);return r+s+e+i}const e_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},sU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return e_(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",e_(n,e)).replace("{{time}}",sU(s,e))},mV={p:sU,P:pV},gV=/^D+$/,wV=/^Y+$/,vV=["D","DD","YY","YYYY"];function yV(t){return gV.test(t)}function xV(t){return wV.test(t)}function bV(t,e,r){const n=BV(t,e,r);if(console.warn(n),vV.includes(t))throw new RangeError(n)}function BV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const CV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_V=/^'([^]*?)'?$/,NV=/''/g,IV=/[a-zA-Z]/;function Zt(t,e,r){var d,f,m,g;const n=ev(),s=n.locale??cV,i=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=js(t,r==null?void 0:r.in);if(!FH(o))throw new RangeError("Invalid time value");let A=e.match(EV).map(B=>{const C=B[0];if(C==="p"||C==="P"){const b=mV[C];return b(B,s.formatLong)}return B}).join("").match(CV).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const C=B[0];if(C==="'")return{isToken:!1,value:SV(B)};if(JE[C])return{isToken:!0,value:B};if(C.match(IV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:B}});s.localize.preprocessor&&(A=s.localize.preprocessor(o,A));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return A.map(B=>{if(!B.isToken)return B.value;const C=B.value;(xV(C)||yV(C))&&bV(C,e,String(t));const b=JE[C[0]];return b(o,C,s.localize,c)}).join("")}function SV(t){const e=t.match(_V);return e?e[1].replace(NV,"'"):t}function FV(t,e,r){return BH(t,-14,r)}function TV(t,e,r){return CH(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E2=function(t,e){return E2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},E2(t,e)};function ua(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _2=function(){return _2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_2.apply(this,arguments)};function Is(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(d){try{c(n.next(d))}catch(f){a(f)}}function A(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,A)}c((n=n.apply(t,[])).next())})}function ws(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return A([c,d])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Hm(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var Ho=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),tv=function(t,e){return Ho.fromClientRect(t,e.getBoundingClientRect())},UV=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Ho(0,0,n,s)},rv=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},pn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},t_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vm=0;Vm<t_.length;Vm++)PV[t_.charCodeAt(Vm)]=Vm;var r_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Km=0;Km<r_.length;Km++)Zh[r_.charCodeAt(Km)]=Km;var QV=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=Zh[t.charCodeAt(n)],a=Zh[t.charCodeAt(n+1)],o=Zh[t.charCodeAt(n+2)],A=Zh[t.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},LV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},jV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},vc=5,cB=11,wy=2,kV=cB-vc,iU=65536>>vc,RV=1<<vc,vy=RV-1,DV=1024>>vc,OV=iU+DV,MV=OV,HV=32,VV=MV+HV,KV=65536>>cB,qV=1<<kV,GV=qV-1,n_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},zV=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},$V=function(t,e){var r=QV(t),n=Array.isArray(r)?jV(r):new Uint32Array(r),s=Array.isArray(r)?LV(r):new Uint16Array(r),i=24,a=n_(s,i/2,n[4]/2),o=n[5]===2?n_(s,(i+n[4])/2):zV(n,Math.ceil((i+n[4])/4));return new WV(n[0],n[1],n[2],n[3],a,o)},WV=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>vc],r=(r<<wy)+(e&vy),this.data[r];if(e<=65535)return r=this.index[iU+(e-55296>>vc)],r=(r<<wy)+(e&vy),this.data[r];if(e<this.highStart)return r=VV-KV+(e>>cB),r=this.index[r],r+=e>>vc&GV,r=this.index[r],r=(r<<wy)+(e&vy),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),s_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qm=0;qm<s_.length;qm++)XV[s_.charCodeAt(qm)]=qm;var JV="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",i_=50,YV=1,aU=2,oU=3,ZV=4,e7=5,a_=7,AU=8,o_=9,KA=10,N2=11,A_=12,I2=13,t7=14,ef=15,S2=16,Gm=17,Ph=18,r7=19,l_=20,F2=21,Qh=22,yy=23,Cu=24,ni=25,tf=26,rf=27,Eu=28,n7=29,lc=30,s7=31,zm=32,$m=33,T2=34,U2=35,P2=36,pp=37,Q2=38,zg=39,$g=40,xy=41,lU=42,i7=43,a7=[9001,65288],cU="!",nr="×",Wm="÷",L2=$V(JV),co=[lc,P2],j2=[YV,aU,oU,e7],uU=[KA,AU],c_=[rf,tf],o7=j2.concat(uU),u_=[Q2,zg,$g,T2,U2],A7=[ef,I2],l7=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=L2.get(i);if(o>i_?(s.push(!0),o-=i_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(S2);if(o===ZV||o===N2){if(a===0)return n.push(a),r.push(lc);var A=r[a-1];return o7.indexOf(A)===-1?(n.push(n[a-1]),r.push(A)):(n.push(a),r.push(lc))}if(n.push(a),o===s7)return r.push(e==="strict"?F2:pp);if(o===lU||o===n7)return r.push(lc);if(o===i7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(pp):r.push(lc);r.push(o)}),[n,r,s]},by=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==KA)break}if(s===KA)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=r;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==KA)break}if(o!==KA)break}return!1},d_=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===KA)r--;else return n}return 0},c7=function(t,e,r,n,s){if(r[n]===0)return nr;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return nr;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,d=e[o];if(A===aU&&d===oU)return nr;if(j2.indexOf(A)!==-1)return cU;if(j2.indexOf(d)!==-1||uU.indexOf(d)!==-1)return nr;if(d_(i,e)===AU)return Wm;if(L2.get(t[i])===N2||(A===zm||A===$m)&&L2.get(t[o])===N2||A===a_||d===a_||A===o_||[KA,I2,ef].indexOf(A)===-1&&d===o_||[Gm,Ph,r7,Cu,Eu].indexOf(d)!==-1||d_(i,e)===Qh||by(yy,Qh,i,e)||by([Gm,Ph],F2,i,e)||by(A_,A_,i,e))return nr;if(A===KA)return Wm;if(A===yy||d===yy)return nr;if(d===S2||A===S2)return Wm;if([I2,ef,F2].indexOf(d)!==-1||A===t7||c===P2&&A7.indexOf(A)!==-1||A===Eu&&d===P2||d===l_||co.indexOf(d)!==-1&&A===ni||co.indexOf(A)!==-1&&d===ni||A===rf&&[pp,zm,$m].indexOf(d)!==-1||[pp,zm,$m].indexOf(A)!==-1&&d===tf||co.indexOf(A)!==-1&&c_.indexOf(d)!==-1||c_.indexOf(A)!==-1&&co.indexOf(d)!==-1||[rf,tf].indexOf(A)!==-1&&(d===ni||[Qh,ef].indexOf(d)!==-1&&e[o+1]===ni)||[Qh,ef].indexOf(A)!==-1&&d===ni||A===ni&&[ni,Eu,Cu].indexOf(d)!==-1)return nr;if([ni,Eu,Cu,Gm,Ph].indexOf(d)!==-1)for(var f=i;f>=0;){var m=e[f];if(m===ni)return nr;if([Eu,Cu].indexOf(m)!==-1)f--;else break}if([rf,tf].indexOf(d)!==-1)for(var f=[Gm,Ph].indexOf(A)!==-1?a:i;f>=0;){var m=e[f];if(m===ni)return nr;if([Eu,Cu].indexOf(m)!==-1)f--;else break}if(Q2===A&&[Q2,zg,T2,U2].indexOf(d)!==-1||[zg,T2].indexOf(A)!==-1&&[zg,$g].indexOf(d)!==-1||[$g,U2].indexOf(A)!==-1&&d===$g||u_.indexOf(A)!==-1&&[l_,tf].indexOf(d)!==-1||u_.indexOf(d)!==-1&&A===rf||co.indexOf(A)!==-1&&co.indexOf(d)!==-1||A===Cu&&co.indexOf(d)!==-1||co.concat(ni).indexOf(A)!==-1&&d===Qh&&a7.indexOf(t[o])===-1||co.concat(ni).indexOf(d)!==-1&&A===Ph)return nr;if(A===xy&&d===xy){for(var g=r[i],B=1;g>0&&(g--,e[g]===xy);)B++;if(B%2!==0)return nr}return A===zm&&d===$m?nr:Wm},u7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=l7(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ni,lc,lU].indexOf(o)!==-1?pp:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,a]},d7=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===cU,this.start=n,this.end=s}return t.prototype.slice=function(){return pn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),h7=function(t,e){var r=rv(t),n=u7(r,e),s=n[0],i=n[1],a=n[2],o=r.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=nr;c<o&&(d=c7(r,i,s,++c,a))===nr;);if(d!==nr||c===o){var f=new d7(r,d,A,c);return A=c,{value:f,done:!1}}return{done:!0,value:null}}}},f7=1,p7=2,qp=4,h_=8,V0=10,f_=47,Bf=92,m7=9,g7=32,Xm=34,Lh=61,w7=35,v7=36,y7=37,Jm=39,Ym=40,jh=41,x7=95,Vs=45,b7=33,B7=60,C7=62,E7=64,_7=91,N7=93,I7=61,S7=123,Zm=63,F7=125,p_=124,T7=126,U7=128,m_=65533,By=42,fc=43,P7=44,Q7=58,L7=59,mp=46,j7=0,k7=8,R7=11,D7=14,O7=31,M7=127,Ia=-1,dU=48,hU=97,fU=101,H7=102,V7=117,K7=122,pU=65,mU=69,gU=70,q7=85,G7=90,vs=function(t){return t>=dU&&t<=57},z7=function(t){return t>=55296&&t<=57343},_u=function(t){return vs(t)||t>=pU&&t<=gU||t>=hU&&t<=H7},$7=function(t){return t>=hU&&t<=K7},W7=function(t){return t>=pU&&t<=G7},X7=function(t){return $7(t)||W7(t)},J7=function(t){return t>=U7},eg=function(t){return t===V0||t===m7||t===g7},K0=function(t){return X7(t)||J7(t)||t===x7},g_=function(t){return K0(t)||vs(t)||t===Vs},Y7=function(t){return t>=j7&&t<=k7||t===R7||t>=D7&&t<=O7||t===M7},TA=function(t,e){return t!==Bf?!1:e!==V0},tg=function(t,e,r){return t===Vs?K0(e)||TA(e,r):K0(t)?!0:!!(t===Bf&&TA(t,e))},Cy=function(t,e,r){return t===fc||t===Vs?vs(e)?!0:e===mp&&vs(r):vs(t===mp?e:t)},Z7=function(t){var e=0,r=1;(t[e]===fc||t[e]===Vs)&&(t[e]===Vs&&(r=-1),e++);for(var n=[];vs(t[e]);)n.push(t[e++]);var s=n.length?parseInt(pn.apply(void 0,n),10):0;t[e]===mp&&e++;for(var i=[];vs(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(pn.apply(void 0,i),10):0;(t[e]===mU||t[e]===fU)&&e++;var A=1;(t[e]===fc||t[e]===Vs)&&(t[e]===Vs&&(A=-1),e++);for(var c=[];vs(t[e]);)c.push(t[e++]);var d=c.length?parseInt(pn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,A*d)},e9={type:2},t9={type:3},r9={type:4},n9={type:13},s9={type:8},i9={type:21},a9={type:9},o9={type:10},A9={type:11},l9={type:12},c9={type:14},rg={type:23},u9={type:1},d9={type:25},h9={type:24},f9={type:26},p9={type:27},m9={type:28},g9={type:29},w9={type:31},k2={type:32},wU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(rv(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==k2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Xm:return this.consumeStringToken(Xm);case w7:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(g_(r)||TA(n,s)){var i=tg(r,n,s)?p7:f7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case v7:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),n9;break;case Jm:return this.consumeStringToken(Jm);case Ym:return e9;case jh:return t9;case By:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),c9;break;case fc:if(Cy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case P7:return r9;case Vs:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Cy(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(tg(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Vs&&c===C7)return this.consumeCodePoint(),this.consumeCodePoint(),h9;break;case mp:if(Cy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case f_:if(this.peekCodePoint(0)===By)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===By&&(d=this.consumeCodePoint(),d===f_))return this.consumeToken();if(d===Ia)return this.consumeToken()}break;case Q7:return f9;case L7:return p9;case B7:if(this.peekCodePoint(0)===b7&&this.peekCodePoint(1)===Vs&&this.peekCodePoint(2)===Vs)return this.consumeCodePoint(),this.consumeCodePoint(),d9;break;case E7:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(tg(f,m,g)){var a=this.consumeName();return{type:7,value:a}}break;case _7:return m9;case Bf:if(TA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case N7:return g9;case I7:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),s9;break;case S7:return A9;case F7:return l9;case V7:case q7:var B=this.peekCodePoint(0),C=this.peekCodePoint(1);return B===fc&&(_u(C)||C===Zm)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case p_:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),a9;if(this.peekCodePoint(0)===p_)return this.consumeCodePoint(),i9;break;case T7:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),o9;break;case Ia:return k2}return eg(e)?(this.consumeWhiteSpace(),w9):vs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):K0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:pn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();_u(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Zm&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(pn.apply(void 0,e.map(function(A){return A===Zm?dU:A})),16),i=parseInt(pn.apply(void 0,e.map(function(A){return A===Zm?gU:A})),16);return{type:30,start:s,end:i}}var a=parseInt(pn.apply(void 0,e),16);if(this.peekCodePoint(0)===Vs&&_u(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];_u(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(pn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ym?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ym?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Jm||r===Xm){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===jh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),rg)}for(;;){var s=this.consumeCodePoint();if(s===Ia||s===jh)return{type:22,value:pn.apply(void 0,e)};if(eg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===jh?(this.consumeCodePoint(),{type:22,value:pn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),rg);if(s===Xm||s===Jm||s===Ym||Y7(s))return this.consumeBadUrlRemnants(),rg;if(s===Bf)if(TA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),rg;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;eg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===jh||e===Ia)return;TA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=pn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Ia||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===V0)return this._value.splice(0,n),u9;if(s===Bf){var i=this._value[n+1];i!==Ia&&i!==void 0&&(i===V0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):TA(s,i)&&(r+=this.consumeStringSlice(n),r+=pn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=qp,n=this.peekCodePoint(0);for((n===fc||n===Vs)&&e.push(this.consumeCodePoint());vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===mp&&vs(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=h_;vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===mU||n===fU)&&((s===fc||s===Vs)&&vs(i)||vs(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=h_;vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Z7(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(tg(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===y7?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(_u(e)){for(var r=pn(e);_u(this.peekCodePoint(0))&&r.length<6;)r+=pn(this.consumeCodePoint());eg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||z7(n)||n>1114111?m_:n}return e===Ia?m_:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(g_(r))e+=pn(r);else if(TA(r,this.peekCodePoint(0)))e+=pn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),vU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new wU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||y9(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?k2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Gp=function(t){return t.type===15},Xd=function(t){return t.type===17},Ir=function(t){return t.type===20},v9=function(t){return t.type===0},R2=function(t,e){return Ir(t)&&t.value===e},yU=function(t){return t.type!==31},Qd=function(t){return t.type!==31&&t.type!==4},Va=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},y9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},wl=function(t){return t.type===17||t.type===15},Cn=function(t){return t.type===16||wl(t)},xU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},is={type:17,number:0,flags:qp},uB={type:16,number:50,flags:qp},qA={type:16,number:100,flags:qp},nf=function(t,e,r){var n=t[0],s=t[1];return[kr(n,e),kr(typeof s<"u"?s:n,r)]},kr=function(t,e){if(t.type===16)return t.number/100*e;if(Gp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},bU="deg",BU="grad",CU="rad",EU="turn",nv={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case bU:return Math.PI*e.number/180;case BU:return Math.PI/200*e.number;case CU:return e.number;case EU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},_U=function(t){return t.type===15&&(t.unit===bU||t.unit===BU||t.unit===CU||t.unit===EU)},NU=function(t){var e=t.filter(Ir).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[is,is];case"to top":case"bottom":return Ti(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[is,qA];case"to right":case"left":return Ti(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[qA,qA];case"to bottom":case"top":return Ti(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[qA,is];case"to left":case"right":return Ti(270)}return 0},Ti=function(t){return Math.PI*t/180},ol={name:"color",parse:function(t,e){if(e.type===18){var r=x9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return GA(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return GA(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return GA(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return GA(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=Uo[e.value.toUpperCase()];if(typeof o<"u")return o}return Uo.TRANSPARENT}},Al=function(t){return(255&t)===0},Dn=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},GA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},w_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},v_=function(t,e){var r=e.filter(Qd);if(r.length===3){var n=r.map(w_),s=n[0],i=n[1],a=n[2];return GA(s,i,a,1)}if(r.length===4){var o=r.map(w_),s=o[0],i=o[1],a=o[2],A=o[3];return GA(s,i,a,A)}return 0};function Ey(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var y_=function(t,e){var r=e.filter(Qd),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Ti(n.number):nv.parse(t,n))/(Math.PI*2),A=Cn(s)?s.number/100:0,c=Cn(i)?i.number/100:0,d=typeof a<"u"&&Cn(a)?kr(a,1):1;if(A===0)return GA(c*255,c*255,c*255,1);var f=c<=.5?c*(A+1):c+A-c*A,m=c*2-f,g=Ey(m,f,o+1/3),B=Ey(m,f,o),C=Ey(m,f,o-1/3);return GA(g*255,B*255,C*255,d)},x9={hsl:y_,hsla:y_,rgb:v_,rgba:v_},Cf=function(t,e){return ol.parse(t,vU.create(e).parseComponentValue())},Uo={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},b9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ir(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},B9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},sv=function(t,e){var r=ol.parse(t,e[0]),n=e[1];return n&&Cn(n)?{color:r,stop:n}:{color:r,stop:null}},x_=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=is),n.stop===null&&(n.stop=qA);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=kr(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var d=s[a];if(d===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,m=s[c-1],g=(d-m)/(f+1),B=1;B<=f;B++)s[c+B-1]=g*B;c=null}}return t.map(function(C,b){var y=C.color;return{color:y,stop:Math.max(Math.min(1,s[b]/e),0)}})},C9=function(t,e,r){var n=e/2,s=r/2,i=kr(t[0],e)-n,a=s-kr(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},E9=function(t,e,r){var n=typeof t=="number"?t:C9(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,A=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},Ji=function(t,e){return Math.sqrt(t*t+e*e)},b_=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],d=Ji(r-A,n-c);return(s?d<a.optimumDistance:d>a.optimumDistance)?{optimumCorner:o,optimumDistance:d}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},_9=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(Ji(e,r),Ji(e,r-s),Ji(e-n,r),Ji(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=b_(n,s,e,r,!0),c=A[0],d=A[1];i=Ji(c-e,(d-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(Ji(e,r),Ji(e,r-s),Ji(e-n,r),Ji(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),f=b_(n,s,e,r,!1),c=f[0],d=f[1];i=Ji(c-e,(d-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=kr(t.size[0],n),a=t.size.length===2?kr(t.size[1],s):i),[i,a]},N9=function(t,e){var r=Ti(180),n=[];return Va(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=NU(s);return}else if(_U(a)){r=nv.parse(t,a);return}}var o=sv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},ng=function(t,e){var r=Ti(180),n=[];return Va(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=NU(s);return}else if(_U(a)){r=(nv.parse(t,a)+Ti(270))%Ti(360);return}}var o=sv(t,s);n.push(o)}),{angle:r,stops:n,type:1}},I9=function(t,e){var r=Ti(180),n=[],s=1,i=0,a=3,o=[];return Va(e).forEach(function(A,c){var d=A[0];if(c===0){if(Ir(d)&&d.value==="linear"){s=1;return}else if(Ir(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var f=ol.parse(t,d.values[0]);n.push({stop:is,color:f})}else if(d.name==="to"){var f=ol.parse(t,d.values[0]);n.push({stop:qA,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(Qd);if(m.length===2){var f=ol.parse(t,m[1]),g=m[0];Xd(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:f})}}}}),s===1?{angle:(r+Ti(180))%Ti(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},IU="closest-side",SU="farthest-side",FU="closest-corner",TU="farthest-corner",UU="circle",PU="ellipse",QU="cover",LU="contain",S9=function(t,e){var r=0,n=3,s=[],i=[];return Va(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(f,m){if(c)if(Ir(m))switch(m.value){case"center":return i.push(uB),f;case"top":case"left":return i.push(is),f;case"right":case"bottom":return i.push(qA),f}else(Cn(m)||wl(m))&&i.push(m);else if(Ir(m))switch(m.value){case UU:return r=0,!1;case PU:return r=1,!1;case"at":return c=!0,!1;case IU:return n=0,!1;case QU:case SU:return n=1,!1;case LU:case FU:return n=2,!1;case TU:return n=3,!1}else if(wl(m)||Cn(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return f},A)}if(A){var d=sv(t,a);s.push(d)}}),{size:n,shape:r,stops:s,position:i,type:2}},sg=function(t,e){var r=0,n=3,s=[],i=[];return Va(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(d,f){if(Ir(f))switch(f.value){case"center":return i.push(uB),!1;case"top":case"left":return i.push(is),!1;case"right":case"bottom":return i.push(qA),!1}else if(Cn(f)||wl(f))return i.push(f),!1;return d},A):o===1&&(A=a.reduce(function(d,f){if(Ir(f))switch(f.value){case UU:return r=0,!1;case PU:return r=1,!1;case LU:case IU:return n=0,!1;case SU:return n=1,!1;case FU:return n=2,!1;case QU:case TU:return n=3,!1}else if(wl(f)||Cn(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},A)),A){var c=sv(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},F9=function(t){return t.type===1},T9=function(t){return t.type===2},dB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=jU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function U9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!jU[t.name])}var jU={"linear-gradient":N9,"-moz-linear-gradient":ng,"-ms-linear-gradient":ng,"-o-linear-gradient":ng,"-webkit-linear-gradient":ng,"radial-gradient":S9,"-moz-radial-gradient":sg,"-ms-radial-gradient":sg,"-o-radial-gradient":sg,"-webkit-radial-gradient":sg,"-webkit-gradient":I9},P9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Qd(n)&&U9(n)}).map(function(n){return dB.parse(t,n)})}},Q9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ir(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},L9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Va(e).map(function(r){return r.filter(Cn)}).map(xU)}},j9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Va(e).map(function(r){return r.filter(Ir).map(function(n){return n.value}).join(" ")}).map(k9)}},k9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},md;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(md||(md={}));var R9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Va(e).map(function(r){return r.filter(D9)})}},D9=function(t){return Ir(t)||Cn(t)},iv=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},O9=iv("top"),M9=iv("right"),H9=iv("bottom"),V9=iv("left"),av=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return xU(r.filter(Cn))}}},K9=av("top-left"),q9=av("top-right"),G9=av("bottom-right"),z9=av("bottom-left"),ov=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},$9=ov("top"),W9=ov("right"),X9=ov("bottom"),J9=ov("left"),Av=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Gp(r)?r.number:0}}},Y9=Av("top"),Z9=Av("right"),eK=Av("bottom"),tK=Av("left"),rK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},sK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ir).reduce(function(r,n){return r|iK(n.value)},0)}},iK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},aK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},oK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},q0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(q0||(q0={}));var AK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return q0.STRICT;case"normal":default:return q0.NORMAL}}},lK={name:"line-height",initialValue:"normal",prefix:!1,type:4},B_=function(t,e){return Ir(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Cn(t)?kr(t,e):e},cK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:dB.parse(t,e)}},uK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},D2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lv=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},dK=lv("top"),hK=lv("right"),fK=lv("bottom"),pK=lv("left"),mK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ir).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},gK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},cv=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},wK=cv("top"),vK=cv("right"),yK=cv("bottom"),xK=cv("left"),bK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},BK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},CK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&R2(e[0],"none")?[]:Va(e).map(function(r){for(var n={color:Uo.TRANSPARENT,offsetX:is,offsetY:is,blur:is},s=0,i=0;i<r.length;i++){var a=r[i];wl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=ol.parse(t,a)}return n})}},EK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_K={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=SK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},NK=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},IK=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},SK={matrix:NK,matrix3d:IK},C_={type:16,number:50,flags:qp},FK=[C_,C_],TK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Cn);return r.length!==2?FK:[r[0],r[1]]}},UK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ef;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ef||(Ef={}));var PK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ef.BREAK_ALL;case"keep-all":return Ef.KEEP_ALL;case"normal":default:return Ef.NORMAL}}},QK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Xd(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},kU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},LK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Xd(e)?e.number:1}},jK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},kK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ir).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},RK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},DK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},OK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Xd(e))return e.number;if(Ir(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},MK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ir).map(function(r){return r.value})}},HK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Tn=function(t,e){return(t&e)!==0},VK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},KK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(yU),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&Xd(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},qK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(yU),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Ir(i)&&i.value!=="none"){var o=a&&Xd(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},GK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Gp).map(function(r){return kU.parse(t,r)})}},zK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(v9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},E_=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},$K={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&R2(e[0],"none")?[]:Va(e).map(function(r){for(var n={color:255,offsetX:is,offsetY:is,blur:is,spread:is,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];R2(a,"inset")?n.inset=!0:wl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=ol.parse(t,a)}return n})}},WK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ir).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},XK={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},JK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Gp(e)?e.number:0}},YK=function(){function t(e,r){var n,s;this.animationDuration=vt(e,GK,r.animationDuration),this.backgroundClip=vt(e,b9,r.backgroundClip),this.backgroundColor=vt(e,B9,r.backgroundColor),this.backgroundImage=vt(e,P9,r.backgroundImage),this.backgroundOrigin=vt(e,Q9,r.backgroundOrigin),this.backgroundPosition=vt(e,L9,r.backgroundPosition),this.backgroundRepeat=vt(e,j9,r.backgroundRepeat),this.backgroundSize=vt(e,R9,r.backgroundSize),this.borderTopColor=vt(e,O9,r.borderTopColor),this.borderRightColor=vt(e,M9,r.borderRightColor),this.borderBottomColor=vt(e,H9,r.borderBottomColor),this.borderLeftColor=vt(e,V9,r.borderLeftColor),this.borderTopLeftRadius=vt(e,K9,r.borderTopLeftRadius),this.borderTopRightRadius=vt(e,q9,r.borderTopRightRadius),this.borderBottomRightRadius=vt(e,G9,r.borderBottomRightRadius),this.borderBottomLeftRadius=vt(e,z9,r.borderBottomLeftRadius),this.borderTopStyle=vt(e,$9,r.borderTopStyle),this.borderRightStyle=vt(e,W9,r.borderRightStyle),this.borderBottomStyle=vt(e,X9,r.borderBottomStyle),this.borderLeftStyle=vt(e,J9,r.borderLeftStyle),this.borderTopWidth=vt(e,Y9,r.borderTopWidth),this.borderRightWidth=vt(e,Z9,r.borderRightWidth),this.borderBottomWidth=vt(e,eK,r.borderBottomWidth),this.borderLeftWidth=vt(e,tK,r.borderLeftWidth),this.boxShadow=vt(e,$K,r.boxShadow),this.color=vt(e,rK,r.color),this.direction=vt(e,nK,r.direction),this.display=vt(e,sK,r.display),this.float=vt(e,aK,r.cssFloat),this.fontFamily=vt(e,RK,r.fontFamily),this.fontSize=vt(e,DK,r.fontSize),this.fontStyle=vt(e,HK,r.fontStyle),this.fontVariant=vt(e,MK,r.fontVariant),this.fontWeight=vt(e,OK,r.fontWeight),this.letterSpacing=vt(e,oK,r.letterSpacing),this.lineBreak=vt(e,AK,r.lineBreak),this.lineHeight=vt(e,lK,r.lineHeight),this.listStyleImage=vt(e,cK,r.listStyleImage),this.listStylePosition=vt(e,uK,r.listStylePosition),this.listStyleType=vt(e,D2,r.listStyleType),this.marginTop=vt(e,dK,r.marginTop),this.marginRight=vt(e,hK,r.marginRight),this.marginBottom=vt(e,fK,r.marginBottom),this.marginLeft=vt(e,pK,r.marginLeft),this.opacity=vt(e,LK,r.opacity);var i=vt(e,mK,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=vt(e,gK,r.overflowWrap),this.paddingTop=vt(e,wK,r.paddingTop),this.paddingRight=vt(e,vK,r.paddingRight),this.paddingBottom=vt(e,yK,r.paddingBottom),this.paddingLeft=vt(e,xK,r.paddingLeft),this.paintOrder=vt(e,WK,r.paintOrder),this.position=vt(e,BK,r.position),this.textAlign=vt(e,bK,r.textAlign),this.textDecorationColor=vt(e,jK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=vt(e,kK,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=vt(e,CK,r.textShadow),this.textTransform=vt(e,EK,r.textTransform),this.transform=vt(e,_K,r.transform),this.transformOrigin=vt(e,TK,r.transformOrigin),this.visibility=vt(e,UK,r.visibility),this.webkitTextStrokeColor=vt(e,XK,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=vt(e,JK,r.webkitTextStrokeWidth),this.wordBreak=vt(e,PK,r.wordBreak),this.zIndex=vt(e,QK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Al(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Tn(this.display,4)||Tn(this.display,33554432)||Tn(this.display,268435456)||Tn(this.display,536870912)||Tn(this.display,67108864)||Tn(this.display,134217728)},t}(),ZK=function(){function t(e,r){this.content=vt(e,VK,r.content),this.quotes=vt(e,zK,r.quotes)}return t}(),__=function(){function t(e,r){this.counterIncrement=vt(e,KK,r.counterIncrement),this.counterReset=vt(e,qK,r.counterReset)}return t}(),vt=function(t,e,r){var n=new wU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new vU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Ir(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return nv.parse(t,i.parseComponentValue());case"color":return ol.parse(t,i.parseComponentValue());case"image":return dB.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return wl(o)?o:is;case"length-percentage":var A=i.parseComponentValue();return Cn(A)?A:is;case"time":return kU.parse(t,i.parseComponentValue())}break}},eq="data-html2canvas-debug",tq=function(t){var e=t.getAttribute(eq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},O2=function(t,e){var r=tq(t);return r===1||e===r},Ka=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,O2(r,3))debugger;this.styles=new YK(e,window.getComputedStyle(r,null)),V2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=tv(this.context,r),O2(r,4)&&(this.flags|=16)}return t}(),rq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",N_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ig=0;ig<N_.length;ig++)sf[N_.charCodeAt(ig)]=ig;var nq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=sf[t.charCodeAt(n)],a=sf[t.charCodeAt(n+1)],o=sf[t.charCodeAt(n+2)],A=sf[t.charCodeAt(n+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},sq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},iq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},yc=5,hB=11,_y=2,aq=hB-yc,RU=65536>>yc,oq=1<<yc,Ny=oq-1,Aq=1024>>yc,lq=RU+Aq,cq=lq,uq=32,dq=cq+uq,hq=65536>>hB,fq=1<<aq,pq=fq-1,I_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},mq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},gq=function(t,e){var r=nq(t),n=Array.isArray(r)?iq(r):new Uint32Array(r),s=Array.isArray(r)?sq(r):new Uint16Array(r),i=24,a=I_(s,i/2,n[4]/2),o=n[5]===2?I_(s,(i+n[4])/2):mq(n,Math.ceil((i+n[4])/4));return new wq(n[0],n[1],n[2],n[3],a,o)},wq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>yc],r=(r<<_y)+(e&Ny),this.data[r];if(e<=65535)return r=this.index[RU+(e-55296>>yc)],r=(r<<_y)+(e&Ny),this.data[r];if(e<this.highStart)return r=dq-hq+(e>>hB),r=this.index[r],r+=e>>yc&pq,r=this.index[r],r=(r<<_y)+(e&Ny),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),S_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ag=0;ag<S_.length;ag++)vq[S_.charCodeAt(ag)]=ag;var yq=1,Iy=2,Sy=3,F_=4,T_=5,xq=7,U_=8,Fy=9,Ty=10,P_=11,Q_=12,L_=13,j_=14,Uy=15,bq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Bq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Cq=gq(rq),Ei="×",Py="÷",Eq=function(t){return Cq.get(t)},_q=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===Iy&&a===Sy)return Ei;if(i===Iy||i===Sy||i===F_||a===Iy||a===Sy||a===F_)return Py;if(i===U_&&[U_,Fy,P_,Q_].indexOf(a)!==-1||(i===P_||i===Fy)&&(a===Fy||a===Ty)||(i===Q_||i===Ty)&&a===Ty||a===L_||a===T_||a===xq||i===yq)return Ei;if(i===L_&&a===j_){for(;s===T_;)s=e[--n];if(s===j_)return Ei}if(i===Uy&&a===Uy){for(var o=0;s===Uy;)o++,s=e[--n];if(o%2===0)return Ei}return Py},Nq=function(t){var e=bq(t),r=e.length,n=0,s=0,i=e.map(Eq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ei;n<r&&(a=_q(e,i,++n))===Ei;);if(a!==Ei||n===r){var o=Bq.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Iq=function(t){for(var e=Nq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Sq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},Fq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=rv(n.data).map(function(A){return pn(A)}),i=0,a={},o=s.every(function(A,c){r.setStart(n,i),r.setEnd(n,i+A.length);var d=r.getBoundingClientRect();i+=A.length;var f=d.x>a.x||d.y>a.y;return a=d,c===0?!0:f});return t.body.removeChild(e),o},Tq=function(){return typeof new Image().crossOrigin<"u"},Uq=function(){return typeof new XMLHttpRequest().responseType=="string"},Pq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},k_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Qq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=M2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),R_(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",k_(A)?R_(M2(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),k_(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},M2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},R_=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Zn={get SUPPORT_RANGE_BOUNDS(){var t=Sq(document);return Object.defineProperty(Zn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Zn.SUPPORT_RANGE_BOUNDS&&Fq(document);return Object.defineProperty(Zn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Pq(document);return Object.defineProperty(Zn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Qq(document):Promise.resolve(!1);return Object.defineProperty(Zn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Tq();return Object.defineProperty(Zn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Uq();return Object.defineProperty(Zn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Zn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Zn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},_f=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Lq=function(t,e,r,n){var s=Rq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Zn.SUPPORT_RANGE_BOUNDS){var A=D_(n,a,o.length).getClientRects();if(A.length>1){var c=fB(o),d=0;c.forEach(function(m){i.push(new _f(m,Ho.fromDOMRectList(t,D_(n,d+a,m.length).getClientRects()))),d+=m.length})}else i.push(new _f(o,Ho.fromDOMRectList(t,A)))}else{var f=n.splitText(o.length);i.push(new _f(o,jq(t,n))),n=f}else Zn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},jq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=tv(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return Ho.EMPTY},D_=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},fB=function(t){if(Zn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Iq(t)},kq=function(t,e){if(Zn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Oq(t,e)},Rq=function(t,e){return e.letterSpacing!==0?fB(t):kq(t,e)},Dq=[32,160,4961,65792,65793,4153,4241],Oq=function(t,e){for(var r=h7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=rv(a),A="";o.forEach(function(c){Dq.indexOf(c)===-1?A+=pn(c):(A.length&&n.push(A),n.push(pn(c)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)i();return n},Mq=function(){function t(e,r,n){this.text=Hq(r.data,n.textTransform),this.textBounds=Lq(e,this.text,n,r)}return t}(),Hq=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Vq,Kq);case 2:return t.toUpperCase();default:return t}},Vq=/(^|\s|:|-|\(|\))([a-z])/g,Kq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},DU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ka),OU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ka),MU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=tv(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ka),HU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ka),H2=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ka),qq=[{type:15,flags:0,unit:"px",number:3}],Gq=[{type:16,flags:0,number:50}],zq=function(t){return t.width>t.height?new Ho(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ho(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},$q=function(t){var e=t.type===Wq?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},G0="checkbox",z0="radio",Wq="password",O_=707406591,pB=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=$q(n),(s.type===G0||s.type===z0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=zq(s.bounds)),s.type){case G0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=qq;break;case z0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Gq;break}return s}return e}(Ka),VU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Ka),KU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ka),qU=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=zU(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Cf(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Uo.TRANSPARENT,a=n.contentWindow.document.body?Cf(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Uo.TRANSPARENT;s.backgroundColor=Al(i)?Al(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Ka),Xq=["OL","UL","MENU"],Wg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,$U(s)&&s.data.trim().length>0)r.textNodes.push(new Mq(t,s,r.styles));else if(id(s))if(YU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Wg(t,o,r,n)});else{var a=GU(t,s);a.styles.isVisible()&&(Jq(s,a,n)?a.flags|=4:Yq(a.styles)&&(a.flags|=2),Xq.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Wg(t,s.shadowRoot,a,n):!$0(s)&&!WU(s)&&!W0(s)&&Wg(t,s,a,n))}},GU=function(t,e){return K2(e)?new DU(t,e):XU(e)?new OU(t,e):WU(e)?new MU(t,e):Zq(e)?new HU(t,e):eG(e)?new H2(t,e):tG(e)?new pB(t,e):W0(e)?new VU(t,e):$0(e)?new KU(t,e):JU(e)?new qU(t,e):new Ka(t,e)},zU=function(t,e){var r=GU(t,e);return r.flags|=4,Wg(t,e,r,r),r},Jq=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||mB(t)&&r.styles.isTransparent()},Yq=function(t){return t.isPositioned()||t.isFloating()},$U=function(t){return t.nodeType===Node.TEXT_NODE},id=function(t){return t.nodeType===Node.ELEMENT_NODE},V2=function(t){return id(t)&&typeof t.style<"u"&&!Xg(t)},Xg=function(t){return typeof t.className=="object"},Zq=function(t){return t.tagName==="LI"},eG=function(t){return t.tagName==="OL"},tG=function(t){return t.tagName==="INPUT"},rG=function(t){return t.tagName==="HTML"},WU=function(t){return t.tagName==="svg"},mB=function(t){return t.tagName==="BODY"},XU=function(t){return t.tagName==="CANVAS"},M_=function(t){return t.tagName==="VIDEO"},K2=function(t){return t.tagName==="IMG"},JU=function(t){return t.tagName==="IFRAME"},H_=function(t){return t.tagName==="STYLE"},nG=function(t){return t.tagName==="SCRIPT"},$0=function(t){return t.tagName==="TEXTAREA"},W0=function(t){return t.tagName==="SELECT"},YU=function(t){return t.tagName==="SLOT"},V_=function(t){return t.tagName.indexOf("-")>0},sG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var A=r.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=r.counters[o.counter];a.push(o.counter),A||(A=r.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),K_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},q_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},iG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},aG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Nu=function(t,e,r,n,s,i){return t<e||t>r?gp(t,s,i.length>0):n.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=n.values[A];return a},"")+i},ZU=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},fn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(ZU(Math.abs(t),i,n,function(a){return pn(Math.floor(a%i)+e)})+s)},Jl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return ZU(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Hu=1,NA=2,IA=4,af=8,uo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return gp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&Tn(i,Hu)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&Tn(i,NA)||c===1&&A===1&&Tn(i,IA)&&t>100||c===1&&A>1&&Tn(i,af)?o=e[c]+(A>0?r[A-1]:"")+o:c===1&&A>0&&(o=r[A-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},G_="十百千萬",z_="拾佰仟萬",$_="マイナス",Qy="마이너스",gp=function(t,e,r){var n=r?". ":"",s=r?"、":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var o=fn(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Jl(t,"〇一二三四五六七八九",s);case 6:return Nu(t,1,3999,K_,3,n).toLowerCase();case 7:return Nu(t,1,3999,K_,3,n);case 8:return fn(t,945,969,!1,n);case 9:return fn(t,97,122,!1,n);case 10:return fn(t,65,90,!1,n);case 11:return fn(t,1632,1641,!0,n);case 12:case 49:return Nu(t,1,9999,q_,3,n);case 35:return Nu(t,1,9999,q_,3,n).toLowerCase();case 13:return fn(t,2534,2543,!0,n);case 14:case 30:return fn(t,6112,6121,!0,n);case 15:return Jl(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Jl(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return uo(t,"零一二三四五六七八九",G_,"負",s,NA|IA|af);case 47:return uo(t,"零壹貳參肆伍陸柒捌玖",z_,"負",s,Hu|NA|IA|af);case 42:return uo(t,"零一二三四五六七八九",G_,"负",s,NA|IA|af);case 41:return uo(t,"零壹贰叁肆伍陆柒捌玖",z_,"负",s,Hu|NA|IA|af);case 26:return uo(t,"〇一二三四五六七八九","十百千万",$_,s,0);case 25:return uo(t,"零壱弐参四伍六七八九","拾百千万",$_,s,Hu|NA|IA);case 31:return uo(t,"영일이삼사오육칠팔구","십백천만",Qy,i,Hu|NA|IA);case 33:return uo(t,"零一二三四五六七八九","十百千萬",Qy,i,0);case 32:return uo(t,"零壹貳參四五六七八九","拾百千",Qy,i,Hu|NA|IA);case 18:return fn(t,2406,2415,!0,n);case 20:return Nu(t,1,19999,aG,3,n);case 21:return fn(t,2790,2799,!0,n);case 22:return fn(t,2662,2671,!0,n);case 22:return Nu(t,1,10999,iG,3,n);case 23:return Jl(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Jl(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return fn(t,3302,3311,!0,n);case 28:return Jl(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Jl(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return fn(t,3792,3801,!0,n);case 37:return fn(t,6160,6169,!0,n);case 38:return fn(t,4160,4169,!0,n);case 39:return fn(t,2918,2927,!0,n);case 40:return fn(t,1776,1785,!0,n);case 43:return fn(t,3046,3055,!0,n);case 44:return fn(t,3174,3183,!0,n);case 45:return fn(t,3664,3673,!0,n);case 46:return fn(t,3872,3881,!0,n);case 3:default:return fn(t,48,57,!0,n)}},e3="data-html2canvas-ignore",W_=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new sG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=oG(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=cG(s).then(function(){return Is(n,void 0,void 0,function(){var d,f;return ws(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(fG),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,lG(A)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(A,f)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(dG(document.doctype)+"<html></html>"),hG(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(O2(e,2))debugger;if(XU(e))return this.createCanvasClone(e);if(M_(e))return this.createVideoClone(e);if(H_(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return K2(r)&&(K2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),V_(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Ly(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!id(r)||!nG(r)&&!r.hasAttribute(e3)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!id(r)||!H_(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(id(i)&&YU(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if($U(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&id(e)&&(V2(e)||Xg(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&V2(s)&&(this.clonedReferenceElement=s),mB(s)&&gG(s);var A=this.counters.parse(new __(this.context,i)),c=this.resolvePseudoContent(e,s,a,Nf.BEFORE);V_(e)&&(r=!0),M_(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Nf.AFTER);return d&&s.appendChild(d),this.counters.pop(A),(i&&(this.options.copyStyles||Xg(e))&&!JU(e)||r)&&Ly(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),($0(e)||W0(e))&&($0(s)||W0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new __(this.context,n));var A=new ZK(this.context,n),c=o.createElement("html2canvaspseudoelement");Ly(n,c),A.content.forEach(function(f){if(f.type===0)c.appendChild(o.createTextNode(f.value));else if(f.type===22){var m=o.createElement("img");m.src=f.value,m.style.opacity="1",c.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var g=f.values.filter(Ir);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(f.name==="counter"){var B=f.values.filter(Qd),C=B[0],b=B[1];if(C&&Ir(C)){var y=i.counters.getCounterValue(C.value),w=b&&Ir(b)?D2.parse(i.context,b.value):3;c.appendChild(o.createTextNode(gp(y,w,!1)))}}else if(f.name==="counters"){var N=f.values.filter(Qd),C=N[0],R=N[1],b=N[2];if(C&&Ir(C)){var V=i.counters.getCounterValues(C.value),O=b&&Ir(b)?D2.parse(i.context,b.value):3,T=R&&R.type===0?R.value:"",_=V.map(function(S){return gp(S,O,!1)}).join(T);c.appendChild(o.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":c.appendChild(o.createTextNode(E_(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(E_(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(f.value))}}),c.className=q2+" "+G2;var d=s===Nf.BEFORE?" "+q2:" "+G2;return Xg(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Nf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Nf||(Nf={}));var oG=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(e3,"true"),t.body.appendChild(r),r},AG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},lG=function(t){return Promise.all([].slice.call(t.images,0).map(AG))},cG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},uG=["all","d","content"],Ly=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);uG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},dG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},hG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},fG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},pG=":before",mG=":after",q2="___html2canvas___pseudoelement_before",G2="___html2canvas___pseudoelement_after",X_=`{
    content: "" !important;
    display: none !important;
}`,gG=function(t){wG(t,"."+q2+pG+X_+`
         .`+G2+mG+X_)},wG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},t3=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),vG=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ky(e)||BG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Is(this,void 0,void 0,function(){var r,n,s,i,a=this;return ws(this,function(o){switch(o.label){case 0:return r=t3.isSameOrigin(e),n=!jy(e)&&this._options.useCORS===!0&&Zn.SUPPORT_CORS_IMAGES&&!r,s=!jy(e)&&!r&&!ky(e)&&typeof this._options.proxy=="string"&&Zn.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!jy(e)&&!ky(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var d=new Image;d.onload=function(){return A(d)},d.onerror=c,(CG(i)||n)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return A(d)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=Zn.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(m){return a(m)},!1),f.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;A.timeout=d,A.ontimeout=function(){return a("Timed out ("+d+"ms) proxying "+s)}}A.send()})},t}(),yG=/^data:image\/svg\+xml/i,xG=/^data:image\/.*;base64,/i,bG=/^data:image\/.*/i,BG=function(t){return Zn.SUPPORT_SVG_DRAWING||!EG(t)},jy=function(t){return bG.test(t)},CG=function(t){return xG.test(t)},ky=function(t){return t.substr(0,4)==="blob"},EG=function(t){return t.substr(-3).toLowerCase()==="svg"||yG.test(t)},mt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Iu=function(t,e,r){return new mt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},og=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Iu(this.start,this.startControl,e),s=Iu(this.startControl,this.endControl,e),i=Iu(this.endControl,this.end,e),a=Iu(n,s,e),o=Iu(s,i,e),A=Iu(a,o,e);return r?new t(this.start,n,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ii=function(t){return t.type===1},_G=function(){function t(e){var r=e.styles,n=e.bounds,s=nf(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=nf(r.borderTopRightRadius,n.width,n.height),A=o[0],c=o[1],d=nf(r.borderBottomRightRadius,n.width,n.height),f=d[0],m=d[1],g=nf(r.borderBottomLeftRadius,n.width,n.height),B=g[0],C=g[1],b=[];b.push((i+A)/n.width),b.push((B+f)/n.width),b.push((a+C)/n.height),b.push((c+m)/n.height);var y=Math.max.apply(Math,b);y>1&&(i/=y,a/=y,A/=y,c/=y,f/=y,m/=y,B/=y,C/=y);var w=n.width-A,N=n.height-m,R=n.width-f,V=n.height-C,O=r.borderTopWidth,T=r.borderRightWidth,_=r.borderBottomWidth,L=r.borderLeftWidth,D=kr(r.paddingTop,e.bounds.width),S=kr(r.paddingRight,e.bounds.width),I=kr(r.paddingBottom,e.bounds.width),F=kr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Gr(n.left+L/3,n.top+O/3,i-L/3,a-O/3,vr.TOP_LEFT):new mt(n.left+L/3,n.top+O/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Gr(n.left+w,n.top+O/3,A-T/3,c-O/3,vr.TOP_RIGHT):new mt(n.left+n.width-T/3,n.top+O/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?Gr(n.left+R,n.top+N,f-T/3,m-_/3,vr.BOTTOM_RIGHT):new mt(n.left+n.width-T/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=B>0||C>0?Gr(n.left+L/3,n.top+V,B-L/3,C-_/3,vr.BOTTOM_LEFT):new mt(n.left+L/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Gr(n.left+L*2/3,n.top+O*2/3,i-L*2/3,a-O*2/3,vr.TOP_LEFT):new mt(n.left+L*2/3,n.top+O*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Gr(n.left+w,n.top+O*2/3,A-T*2/3,c-O*2/3,vr.TOP_RIGHT):new mt(n.left+n.width-T*2/3,n.top+O*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?Gr(n.left+R,n.top+N,f-T*2/3,m-_*2/3,vr.BOTTOM_RIGHT):new mt(n.left+n.width-T*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=B>0||C>0?Gr(n.left+L*2/3,n.top+V,B-L*2/3,C-_*2/3,vr.BOTTOM_LEFT):new mt(n.left+L*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=i>0||a>0?Gr(n.left+L/2,n.top+O/2,i-L/2,a-O/2,vr.TOP_LEFT):new mt(n.left+L/2,n.top+O/2),this.topRightBorderStroke=i>0||a>0?Gr(n.left+w,n.top+O/2,A-T/2,c-O/2,vr.TOP_RIGHT):new mt(n.left+n.width-T/2,n.top+O/2),this.bottomRightBorderStroke=f>0||m>0?Gr(n.left+R,n.top+N,f-T/2,m-_/2,vr.BOTTOM_RIGHT):new mt(n.left+n.width-T/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=B>0||C>0?Gr(n.left+L/2,n.top+V,B-L/2,C-_/2,vr.BOTTOM_LEFT):new mt(n.left+L/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||a>0?Gr(n.left,n.top,i,a,vr.TOP_LEFT):new mt(n.left,n.top),this.topRightBorderBox=A>0||c>0?Gr(n.left+w,n.top,A,c,vr.TOP_RIGHT):new mt(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||m>0?Gr(n.left+R,n.top+N,f,m,vr.BOTTOM_RIGHT):new mt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=B>0||C>0?Gr(n.left,n.top+V,B,C,vr.BOTTOM_LEFT):new mt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?Gr(n.left+L,n.top+O,Math.max(0,i-L),Math.max(0,a-O),vr.TOP_LEFT):new mt(n.left+L,n.top+O),this.topRightPaddingBox=A>0||c>0?Gr(n.left+Math.min(w,n.width-T),n.top+O,w>n.width+T?0:Math.max(0,A-T),Math.max(0,c-O),vr.TOP_RIGHT):new mt(n.left+n.width-T,n.top+O),this.bottomRightPaddingBox=f>0||m>0?Gr(n.left+Math.min(R,n.width-L),n.top+Math.min(N,n.height-_),Math.max(0,f-T),Math.max(0,m-_),vr.BOTTOM_RIGHT):new mt(n.left+n.width-T,n.top+n.height-_),this.bottomLeftPaddingBox=B>0||C>0?Gr(n.left+L,n.top+Math.min(V,n.height-_),Math.max(0,B-L),Math.max(0,C-_),vr.BOTTOM_LEFT):new mt(n.left+L,n.top+n.height-_),this.topLeftContentBox=i>0||a>0?Gr(n.left+L+F,n.top+O+D,Math.max(0,i-(L+F)),Math.max(0,a-(O+D)),vr.TOP_LEFT):new mt(n.left+L+F,n.top+O+D),this.topRightContentBox=A>0||c>0?Gr(n.left+Math.min(w,n.width+L+F),n.top+O+D,w>n.width+L+F?0:A-L+F,c-(O+D),vr.TOP_RIGHT):new mt(n.left+n.width-(T+S),n.top+O+D),this.bottomRightContentBox=f>0||m>0?Gr(n.left+Math.min(R,n.width-(L+F)),n.top+Math.min(N,n.height+O+D),Math.max(0,f-(T+S)),m-(_+I),vr.BOTTOM_RIGHT):new mt(n.left+n.width-(T+S),n.top+n.height-(_+I)),this.bottomLeftContentBox=B>0||C>0?Gr(n.left+L+F,n.top+V,Math.max(0,B-(L+F)),C-(_+I),vr.BOTTOM_LEFT):new mt(n.left+L+F,n.top+n.height-(_+I))}return t}(),vr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vr||(vr={}));var Gr=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,A=t+r,c=e+n;switch(s){case vr.TOP_LEFT:return new og(new mt(t,c),new mt(t,c-o),new mt(A-a,e),new mt(A,e));case vr.TOP_RIGHT:return new og(new mt(t,e),new mt(t+a,e),new mt(A,c-o),new mt(A,c));case vr.BOTTOM_RIGHT:return new og(new mt(A,e),new mt(A,e+o),new mt(t+a,c),new mt(t,c));case vr.BOTTOM_LEFT:default:return new og(new mt(A,c),new mt(A-a,c),new mt(t,e+o),new mt(t,e))}},X0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},NG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},J0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},IG=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Ag=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),SG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),FG=function(t){return t.type===0},r3=function(t){return t.type===1},TG=function(t){return t.type===2},J_=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},UG=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},n3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),s3=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new _G(this.container),this.container.styles.opacity<1&&this.effects.push(new SG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new IG(n,s,i))}if(this.container.styles.overflowX!==0){var a=X0(this.curves),o=J0(this.curves);J_(a,o)?this.effects.push(new Ag(a,6)):(this.effects.push(new Ag(a,2)),this.effects.push(new Ag(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(A){return!r3(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=X0(n.curves),o=J0(n.curves);J_(a,o)||s.unshift(new Ag(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(A){return Tn(A.target,e)})},t}(),z2=function(t,e,r,n){t.container.elements.forEach(function(s){var i=Tn(s.flags,4),a=Tn(s.flags,2),o=new s3(s,t);Tn(s.styles.display,2048)&&n.push(o);var A=Tn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,d=new n3(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var m=0;c.negativeZIndex.some(function(B,C){return f>B.element.container.styles.zIndex.order?(m=C,!1):m>0}),c.negativeZIndex.splice(m,0,d)}else if(f>0){var g=0;c.positiveZIndex.some(function(B,C){return f>=B.element.container.styles.zIndex.order?(g=C+1,!1):g>0}),c.positiveZIndex.splice(g,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);z2(o,d,i?d:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),z2(o,e,r,A);Tn(s.flags,8)&&i3(s,A)})},i3=function(t,e){for(var r=t instanceof H2?t.start:1,n=t instanceof H2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof HU&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=gp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},PG=function(t){var e=new s3(t,null),r=new n3(e),n=[];return z2(e,r,r,n),i3(e.container,n),r},Y_=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ui(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ui(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ui(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},QG=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ui(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ui(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ui(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},LG=function(t,e){switch(e){case 0:return Ui(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ui(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ui(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ui(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},jG=function(t,e){switch(e){case 0:return lg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return lg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return lg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return lg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},lg=function(t,e){var r=[];return Ii(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ii(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ui=function(t,e,r,n){var s=[];return Ii(t)?s.push(t.subdivide(.5,!1)):s.push(t),Ii(r)?s.push(r.subdivide(.5,!0)):s.push(r),Ii(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Ii(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},a3=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Y0=function(t){var e=t.styles,r=t.bounds,n=kr(e.paddingLeft,r.width),s=kr(e.paddingRight,r.width),i=kr(e.paddingTop,r.width),a=kr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},kG=function(t,e){return t===0?e.bounds:t===2?Y0(e):a3(e)},RG=function(t,e){return t===0?e.bounds:t===2?Y0(e):a3(e)},Ry=function(t,e,r){var n=kG(Vu(t.styles.backgroundOrigin,e),t),s=RG(Vu(t.styles.backgroundClip,e),t),i=DG(Vu(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],A=nf(Vu(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=OG(Vu(t.styles.backgroundRepeat,e),A,i,n,s),d=Math.round(n.left+A[0]),f=Math.round(n.top+A[1]);return[c,d,f,a,o]},Su=function(t){return Ir(t)&&t.value===md.AUTO},cg=function(t){return typeof t=="number"},DG=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(Cn(a)&&o&&Cn(o))return[kr(a,r.width),kr(o,r.height)];var A=cg(i);if(Ir(a)&&(a.value===md.CONTAIN||a.value===md.COVER)){if(cg(i)){var c=r.width/r.height;return c<i!=(a.value===md.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var d=cg(n),f=cg(s),m=d||f;if(Su(a)&&(!o||Su(o))){if(d&&f)return[n,s];if(!A&&!m)return[r.width,r.height];if(m&&A){var g=d?n:s*i,B=f?s:n/i;return[g,B]}var C=d?n:r.width,b=f?s:r.height;return[C,b]}if(A){var y=0,w=0;return Cn(a)?y=kr(a,r.width):Cn(o)&&(w=kr(o,r.height)),Su(a)?y=w*i:(!o||Su(o))&&(w=y/i),[y,w]}var N=null,R=null;if(Cn(a)?N=kr(a,r.width):o&&Cn(o)&&(R=kr(o,r.height)),N!==null&&(!o||Su(o))&&(R=d&&f?N/n*s:r.height),R!==null&&Su(a)&&(N=d&&f?R/s*n:r.width),N!==null&&R!==null)return[N,R];throw new Error("Unable to calculate background-size for element")},Vu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},OG=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],A=r[1];switch(t){case 2:return[new mt(Math.round(n.left),Math.round(n.top+a)),new mt(Math.round(n.left+n.width),Math.round(n.top+a)),new mt(Math.round(n.left+n.width),Math.round(A+n.top+a)),new mt(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new mt(Math.round(n.left+i),Math.round(n.top)),new mt(Math.round(n.left+i+o),Math.round(n.top)),new mt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new mt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new mt(Math.round(n.left+i),Math.round(n.top+a)),new mt(Math.round(n.left+i+o),Math.round(n.top+a)),new mt(Math.round(n.left+i+o),Math.round(n.top+a+A)),new mt(Math.round(n.left+i),Math.round(n.top+a+A))];default:return[new mt(Math.round(s.left),Math.round(s.top)),new mt(Math.round(s.left+s.width),Math.round(s.top)),new mt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new mt(Math.round(s.left),Math.round(s.height+s.top))]}},MG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Z_="Hidden Text",HG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=MG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Z_)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Z_)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),o3=function(){function t(e,r){this.context=e,this.options=r}return t}(),VG=1e4,KG=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new HG(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),TG(r)&&(this.ctx.globalAlpha=r.opacity),FG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),r3(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Is(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Is(this,void 0,void 0,function(){return ws(this,function(n){switch(n.label){case 0:if(Tn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=fB(r.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,r.bounds.top+s),o+i.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=WG(r.fontFamily).join(", "),i=Gp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return Is(this,void 0,void 0,function(){var s,i,a,o,A,c,d,f,m=this;return ws(this,function(g){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,d=A.middle,f=n.paintOrder,r.textBounds.forEach(function(B){f.forEach(function(C){switch(C){case 0:m.ctx.fillStyle=Dn(n.color),m.renderTextWithLetterSpacing(B,n.letterSpacing,c);var b=n.textShadow;b.length&&B.text.trim().length&&(b.slice(0).reverse().forEach(function(y){m.ctx.shadowColor=Dn(y.color),m.ctx.shadowOffsetX=y.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=y.offsetY.number*m.options.scale,m.ctx.shadowBlur=y.blur.number,m.renderTextWithLetterSpacing(B,n.letterSpacing,c)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Dn(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:m.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top+c),B.bounds.width,1);break;case 2:m.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top),B.bounds.width,1);break;case 3:m.ctx.fillRect(B.bounds.left,Math.ceil(B.bounds.top+d),B.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&B.text.trim().length&&(m.ctx.strokeStyle=Dn(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(B.text,B.bounds.left,B.bounds.top+c)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=Y0(r),a=J0(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A,w,w,c,d,f,m,R,g,B,V,C,b,y,w,N,R,V;return ws(this,function(O){switch(O.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,O.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:O.sent(),O.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof DU))return[3,8];O.label=5;case 5:return O.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=O.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return O.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof OU&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof MU))return[3,12];O.label=9;case 9:return O.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=O.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return O.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof qU&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=O.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),O.label=14;case 14:if(n instanceof pB&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===G0?n.checked&&(this.ctx.save(),this.path([new mt(n.bounds.left+f*.39363,n.bounds.top+f*.79),new mt(n.bounds.left+f*.16,n.bounds.top+f*.5549),new mt(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new mt(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new mt(n.bounds.left+f*.72983,n.bounds.top+f*.23),new mt(n.bounds.left+f*.84,n.bounds.top+f*.34085),new mt(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Dn(O_),this.ctx.fill(),this.ctx.restore()):n.type===z0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Dn(O_),this.ctx.fill(),this.ctx.restore())),qG(n)&&n.value.length){switch(m=this.createFontStyle(i),R=m[0],g=m[1],B=this.fontMetrics.getMetrics(R,g).baseline,this.ctx.font=R,this.ctx.fillStyle=Dn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=zG(n.styles.textAlign),V=Y0(n),C=0,n.styles.textAlign){case 1:C+=V.width/2;break;case 2:C+=V.width;break}b=V.add(C,0,0,-V.height/2+1),this.ctx.save(),this.path([new mt(V.left,V.top),new mt(V.left+V.width,V.top),new mt(V.left+V.width,V.top+V.height),new mt(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new _f(n.value,b),i.letterSpacing,B),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Tn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,N=y.url,O.label=15;case 15:return O.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return w=O.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return O.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(R=this.createFontStyle(i)[0],this.ctx.font=R,this.ctx.fillStyle=Dn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new Ho(n.bounds.left,n.bounds.top+kr(n.styles.paddingTop,n.bounds.width),n.bounds.width,B_(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new _f(r.listValue,V),i.letterSpacing,B_(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),O.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Is(this,void 0,void 0,function(){var n,s,y,i,a,y,o,A,y,c,d,y,f,m,y,g,B,y,C,b,y;return ws(this,function(w){switch(w.label){case 0:if(Tn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(y=s[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),i=0,a=r.nonInlineLevel,w.label=7;case 7:return i<a.length?(y=a[i],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return i++,[3,7];case 10:o=0,A=r.nonPositionedFloats,w.label=11;case 11:return o<A.length?(y=A[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(y=d[c],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:f=0,m=r.inlineLevel,w.label=19;case 19:return f<m.length?(y=m[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:g=0,B=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return g<B.length?(y=B[g],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return g++,[3,23];case 26:C=0,b=r.positiveZIndex,w.label=27;case 27:return C<b.length?(y=b[C],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Ii(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Ii(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A;return ws(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var f,m,g,D,ne,se,F,Y,_,B,D,ne,se,F,Y,C,b,y,w,N,R,V,O,T,_,L,D,S,I,F,Y,ue,ne,se,z,ce,ae,Ce,P,k,W,re;return ws(this,function(oe){switch(oe.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,i.context.cache.match(m)];case 2:return f=oe.sent(),[3,4];case 3:return oe.sent(),i.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(g=Ry(r,n,[f.width,f.height,f.width/f.height]),D=g[0],ne=g[1],se=g[2],F=g[3],Y=g[4],_=i.ctx.createPattern(i.resizeImage(f,F,Y),"repeat"),i.renderRepeat(D,_,ne,se)),[3,6];case 5:F9(d)?(B=Ry(r,n,[null,null,null]),D=B[0],ne=B[1],se=B[2],F=B[3],Y=B[4],C=E9(d.angle,F,Y),b=C[0],y=C[1],w=C[2],N=C[3],R=C[4],V=document.createElement("canvas"),V.width=F,V.height=Y,O=V.getContext("2d"),T=O.createLinearGradient(y,N,w,R),x_(d.stops,b).forEach(function(Z){return T.addColorStop(Z.stop,Dn(Z.color))}),O.fillStyle=T,O.fillRect(0,0,F,Y),F>0&&Y>0&&(_=i.ctx.createPattern(V,"repeat"),i.renderRepeat(D,_,ne,se))):T9(d)&&(L=Ry(r,n,[null,null,null]),D=L[0],S=L[1],I=L[2],F=L[3],Y=L[4],ue=d.position.length===0?[uB]:d.position,ne=kr(ue[0],F),se=kr(ue[ue.length-1],Y),z=_9(d,ne,se,F,Y),ce=z[0],ae=z[1],ce>0&&ae>0&&(Ce=i.ctx.createRadialGradient(S+ne,I+se,0,S+ne,I+se,ce),x_(d.stops,ce*2).forEach(function(Z){return Ce.addColorStop(Z.stop,Dn(Z.color))}),i.path(D),i.ctx.fillStyle=Ce,ce!==ae?(P=r.bounds.left+.5*r.bounds.width,k=r.bounds.top+.5*r.bounds.height,W=ae/ce,re=1/W,i.ctx.save(),i.ctx.translate(P,k),i.ctx.transform(1,0,0,W,0,0),i.ctx.translate(-P,-k),i.ctx.fillRect(S,re*(I-k)+k,F,Y*re),i.ctx.restore()):i.ctx.fill())),oe.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Is(this,void 0,void 0,function(){return ws(this,function(i){return this.path(Y_(s,n)),this.ctx.fillStyle=Dn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return Is(this,void 0,void 0,function(){var a,o;return ws(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=QG(i,s),this.path(a),this.ctx.fillStyle=Dn(r),this.ctx.fill(),o=LG(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Is(this,void 0,void 0,function(){var n,s,i,a,o,A,c,d,f=this;return ws(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Al(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=GG(Vu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Al(n.backgroundColor)||(this.ctx.fillStyle=Dn(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){f.ctx.save();var B=X0(r.curves),C=g.inset?0:VG,b=UG(B,-C+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(f.path(B),f.ctx.clip(),f.mask(b)):(f.mask(B),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=g.offsetX.number+C,f.ctx.shadowOffsetY=g.offsetY.number,f.ctx.shadowColor=Dn(g.color),f.ctx.shadowBlur=g.blur.number,f.ctx.fillStyle=g.inset?Dn(g.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:o=0,A=0,c=i,m.label=3;case 3:return A<c.length?(d=c[A],d.style!==0&&!Al(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return Is(this,void 0,void 0,function(){var o,A,c,d,f,m,g,B,C,b,y,w,N,R,V,O,V,O;return ws(this,function(T){return this.ctx.save(),o=jG(i,s),A=Y_(i,s),a===2&&(this.path(A),this.ctx.clip()),Ii(A[0])?(c=A[0].start.x,d=A[0].start.y):(c=A[0].x,d=A[0].y),Ii(A[1])?(f=A[1].end.x,m=A[1].end.y):(f=A[1].x,m=A[1].y),s===0||s===2?g=Math.abs(c-f):g=Math.abs(d-m),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),B=n<3?n*3:n*2,C=n<3?n*2:n,a===3&&(B=n,C=n),b=!0,g<=B*2?b=!1:g<=B*2+C?(y=g/(2*B+C),B*=y,C*=y):(w=Math.floor((g+C)/(B+C)),N=(g-w*B)/(w-1),R=(g-(w+1)*B)/w,C=R<=0||Math.abs(C-N)<Math.abs(C-R)?N:R),b&&(a===3?this.ctx.setLineDash([0,B+C]):this.ctx.setLineDash([B,C])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Dn(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Ii(A[0])&&(V=A[3],O=A[0],this.ctx.beginPath(),this.formatPath([new mt(V.end.x,V.end.y),new mt(O.start.x,O.start.y)]),this.ctx.stroke()),Ii(A[1])&&(V=A[1],O=A[2],this.ctx.beginPath(),this.formatPath([new mt(V.end.x,V.end.y),new mt(O.start.x,O.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Is(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Dn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=PG(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(o3),qG=function(t){return t instanceof KU||t instanceof VU?!0:t instanceof pB&&t.type!==z0&&t.type!==G0},GG=function(t,e){switch(t){case 0:return X0(e);case 2:return NG(e);case 1:default:return J0(e)}},zG=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},$G=["-apple-system","system-ui"],WG=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return $G.indexOf(e)===-1}):t},XG=function(t){ua(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Is(this,void 0,void 0,function(){var n,s;return ws(this,function(i){switch(i.label){case 0:return n=M2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,JG(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Dn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(o3),JG=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},YG=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Hm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Hm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Hm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Hm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),ZG=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new YG({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new vG(this,e)}return t.instanceCount=1,t}(),gB=function(t,e){return e===void 0&&(e={}),ez(t,e)};typeof window<"u"&&t3.setContext(window);var ez=function(t,e){return Is(void 0,void 0,void 0,function(){var r,n,s,i,a,o,A,c,d,f,m,g,B,C,b,y,w,N,R,V,T,O,T,_,L,D,S,I,F,Y,ue,ne,se,z,ce,ae,Ce,P,k,W;return ws(this,function(re){switch(re.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(L=e.imageTimeout)!==null&&L!==void 0?L:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=_2({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},s),a={windowWidth:(I=e.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(Y=e.scrollX)!==null&&Y!==void 0?Y:n.pageXOffset,scrollY:(ue=e.scrollY)!==null&&ue!==void 0?ue:n.pageYOffset},o=new Ho(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new ZG(i,o),c=(ne=e.foreignObjectRendering)!==null&&ne!==void 0?ne:!1,d={allowTaint:(se=e.allowTaint)!==null&&se!==void 0?se:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new W_(A,t,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=re.sent(),B=mB(m)||rG(m)?UV(m.ownerDocument):tv(A,m),C=B.width,b=B.height,y=B.left,w=B.top,N=tz(A,m,e.backgroundColor),R={canvas:e.canvas,backgroundColor:N,scale:(ce=(z=e.scale)!==null&&z!==void 0?z:n.devicePixelRatio)!==null&&ce!==void 0?ce:1,x:((ae=e.x)!==null&&ae!==void 0?ae:0)+y,y:((Ce=e.y)!==null&&Ce!==void 0?Ce:0)+w,width:(P=e.width)!==null&&P!==void 0?P:Math.ceil(C),height:(k=e.height)!==null&&k!==void 0?k:Math.ceil(b)},c?(A.logger.debug("Document cloned, using foreign object rendering"),T=new XG(A,R),[4,T.render(m)]):[3,3];case 2:return V=re.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+y+","+w+" with size "+C+"x"+b+" using computed rendering"),A.logger.debug("Starting DOM parsing"),O=zU(A,m),N===O.styles.backgroundColor&&(O.styles.backgroundColor=Uo.TRANSPARENT),A.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),T=new KG(A,R),[4,T.render(O)];case 4:V=re.sent(),re.label=5;case 5:return(!((W=e.removeContainer)!==null&&W!==void 0)||W)&&(W_.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,V]}})})},tz=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Cf(t,getComputedStyle(n.documentElement).backgroundColor):Uo.TRANSPARENT,i=n.body?Cf(t,getComputedStyle(n.body).backgroundColor):Uo.TRANSPARENT,a=typeof r=="string"?Cf(t,r):r===null?Uo.TRANSPARENT:4294967295;return e===n.documentElement?Al(s)?Al(i)?a:i:s:a};const wB=Object.freeze(Object.defineProperty({__proto__:null,default:gB},Symbol.toStringTag,{value:"Module"})),rz="modulepreload",nz=function(t){return"/"+t},eN={},Po=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(A=>{if(A=nz(A),A in eN)return;eN[A]=!0;const c=A.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":rz,c||(f.as="script"),f.crossOrigin="",f.href=A,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Er(t){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(t)}var xs=Uint8Array,oi=Uint16Array,vB=Int32Array,uv=new xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dv=new xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$2=new xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A3=function(t,e){for(var r=new oi(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new vB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},l3=A3(uv,2),c3=l3.b,W2=l3.r;c3[28]=258,W2[258]=28;var u3=A3(dv,0),sz=u3.b,tN=u3.r,X2=new oi(32768);for(var Vr=0;Vr<32768;++Vr){var EA=(Vr&43690)>>1|(Vr&21845)<<1;EA=(EA&52428)>>2|(EA&13107)<<2,EA=(EA&61680)>>4|(EA&3855)<<4,X2[Vr]=((EA&65280)>>8|(EA&255)<<8)>>1}var Oa=function(t,e,r){for(var n=t.length,s=0,i=new oi(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new oi(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new oi(1<<e);var A=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],f=a[t[s]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)o[X2[f]>>A]=c}else for(o=new oi(n),s=0;s<n;++s)t[s]&&(o[s]=X2[a[t[s]-1]++]>>15-t[s]);return o},vl=new xs(288);for(var Vr=0;Vr<144;++Vr)vl[Vr]=8;for(var Vr=144;Vr<256;++Vr)vl[Vr]=9;for(var Vr=256;Vr<280;++Vr)vl[Vr]=7;for(var Vr=280;Vr<288;++Vr)vl[Vr]=8;var wp=new xs(32);for(var Vr=0;Vr<32;++Vr)wp[Vr]=5;var iz=Oa(vl,9,0),az=Oa(vl,9,1),oz=Oa(wp,5,0),Az=Oa(wp,5,1),Dy=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},$i=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Oy=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},yB=function(t){return(t+7)/8|0},d3=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new xs(t.subarray(e,r))},lz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zi=function(t,e,r){var n=new Error(e||lz[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Zi),!r)throw n;return n},cz=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new xs(0);var a=!r,o=a||e.i!=2,A=e.i;a&&(r=new xs(s*3));var c=function(be){var Te=r.length;if(be>Te){var Ve=new xs(Math.max(Te*2,be));Ve.set(r),r=Ve}},d=e.f||0,f=e.p||0,m=e.b||0,g=e.l,B=e.d,C=e.m,b=e.n,y=s*8;do{if(!g){d=$i(t,f,1);var w=$i(t,f+1,3);if(f+=3,w)if(w==1)g=az,B=Az,C=9,b=5;else if(w==2){var O=$i(t,f,31)+257,T=$i(t,f+10,15)+4,_=O+$i(t,f+5,31)+1;f+=14;for(var L=new xs(_),D=new xs(19),S=0;S<T;++S)D[$2[S]]=$i(t,f+S*3,7);f+=T*3;for(var I=Dy(D),F=(1<<I)-1,Y=Oa(D,I,1),S=0;S<_;){var ue=Y[$i(t,f,F)];f+=ue&15;var N=ue>>4;if(N<16)L[S++]=N;else{var ne=0,se=0;for(N==16?(se=3+$i(t,f,3),f+=2,ne=L[S-1]):N==17?(se=3+$i(t,f,7),f+=3):N==18&&(se=11+$i(t,f,127),f+=7);se--;)L[S++]=ne}}var z=L.subarray(0,O),ce=L.subarray(O);C=Dy(z),b=Dy(ce),g=Oa(z,C,1),B=Oa(ce,b,1)}else Zi(1);else{var N=yB(f)+4,R=t[N-4]|t[N-3]<<8,V=N+R;if(V>s){A&&Zi(0);break}o&&c(m+R),r.set(t.subarray(N,V),m),e.b=m+=R,e.p=f=V*8,e.f=d;continue}if(f>y){A&&Zi(0);break}}o&&c(m+131072);for(var ae=(1<<C)-1,Ce=(1<<b)-1,P=f;;P=f){var ne=g[Oy(t,f)&ae],k=ne>>4;if(f+=ne&15,f>y){A&&Zi(0);break}if(ne||Zi(2),k<256)r[m++]=k;else if(k==256){P=f,g=null;break}else{var W=k-254;if(k>264){var S=k-257,re=uv[S];W=$i(t,f,(1<<re)-1)+c3[S],f+=re}var oe=B[Oy(t,f)&Ce],Z=oe>>4;oe||Zi(3),f+=oe&15;var ce=sz[Z];if(Z>3){var re=dv[Z];ce+=Oy(t,f)&(1<<re)-1,f+=re}if(f>y){A&&Zi(0);break}o&&c(m+131072);var ee=m+W;if(m<ce){var de=i-ce,xe=Math.min(ce,ee);for(de+m<0&&Zi(3);m<xe;++m)r[m]=n[de+m]}for(;m<ee;++m)r[m]=r[m-ce]}}e.l=g,e.p=P,e.b=m,e.f=d,g&&(d=1,e.m=C,e.d=B,e.n=b)}while(!d);return m!=r.length&&a?d3(r,0,m):r.subarray(0,m)},ho=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},kh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},My=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:f3,l:0};if(s==1){var a=new xs(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(V,O){return V.f-O.f}),r.push({s:-1,f:25001});var o=r[0],A=r[1],c=0,d=1,f=2;for(r[0]={s:-1,f:o.f+A.f,l:o,r:A};d!=s-1;)o=r[r[c].f<r[f].f?c++:f++],A=r[c!=d&&r[c].f<r[f].f?c++:f++],r[d++]={s:-1,f:o.f+A.f,l:o,r:A};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var g=new oi(m+1),B=J2(r[d-1],g,0);if(B>e){var n=0,C=0,b=B-e,y=1<<b;for(i.sort(function(O,T){return g[T.s]-g[O.s]||O.f-T.f});n<s;++n){var w=i[n].s;if(g[w]>e)C+=y-(1<<B-g[w]),g[w]=e;else break}for(C>>=b;C>0;){var N=i[n].s;g[N]<e?C-=1<<e-g[N]++-1:++n}for(;n>=0&&C;--n){var R=i[n].s;g[R]==e&&(--g[R],++C)}B=e}return{t:new xs(g),l:B}},J2=function(t,e,r){return t.s==-1?Math.max(J2(t.l,e,r+1),J2(t.r,e,r+1)):e[t.s]=r},rN=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new oi(++e),n=0,s=t[0],i=1,a=function(A){r[n++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Rh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},h3=function(t,e,r){var n=r.length,s=yB(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},nN=function(t,e,r,n,s,i,a,o,A,c,d){ho(e,d++,r),++s[256];for(var f=My(s,15),m=f.t,g=f.l,B=My(i,15),C=B.t,b=B.l,y=rN(m),w=y.c,N=y.n,R=rN(C),V=R.c,O=R.n,T=new oi(19),_=0;_<w.length;++_)++T[w[_]&31];for(var _=0;_<V.length;++_)++T[V[_]&31];for(var L=My(T,7),D=L.t,S=L.l,I=19;I>4&&!D[$2[I-1]];--I);var F=c+5<<3,Y=Rh(s,vl)+Rh(i,wp)+a,ue=Rh(s,m)+Rh(i,C)+a+14+3*I+Rh(T,D)+2*T[16]+3*T[17]+7*T[18];if(A>=0&&F<=Y&&F<=ue)return h3(e,d,t.subarray(A,A+c));var ne,se,z,ce;if(ho(e,d,1+(ue<Y)),d+=2,ue<Y){ne=Oa(m,g,0),se=m,z=Oa(C,b,0),ce=C;var ae=Oa(D,S,0);ho(e,d,N-257),ho(e,d+5,O-1),ho(e,d+10,I-4),d+=14;for(var _=0;_<I;++_)ho(e,d+3*_,D[$2[_]]);d+=3*I;for(var Ce=[w,V],P=0;P<2;++P)for(var k=Ce[P],_=0;_<k.length;++_){var W=k[_]&31;ho(e,d,ae[W]),d+=D[W],W>15&&(ho(e,d,k[_]>>5&127),d+=k[_]>>12)}}else ne=iz,se=vl,z=oz,ce=wp;for(var _=0;_<o;++_){var re=n[_];if(re>255){var W=re>>18&31;kh(e,d,ne[W+257]),d+=se[W+257],W>7&&(ho(e,d,re>>23&31),d+=uv[W]);var oe=re&31;kh(e,d,z[oe]),d+=ce[oe],oe>3&&(kh(e,d,re>>5&8191),d+=dv[oe])}else kh(e,d,ne[re]),d+=se[re]}return kh(e,d,ne[256]),d+se[256]},uz=new vB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),f3=new xs(0),dz=function(t,e,r,n,s,i){var a=i.z||t.length,o=new xs(n+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(n,o.length-s),c=i.l,d=(i.r||0)&7;if(e){d&&(A[0]=i.r>>3);for(var f=uz[e-1],m=f>>13,g=f&8191,B=(1<<r)-1,C=i.p||new oi(32768),b=i.h||new oi(B+1),y=Math.ceil(r/3),w=2*y,N=function(te){return(t[te]^t[te+1]<<y^t[te+2]<<w)&B},R=new vB(25e3),V=new oi(288),O=new oi(32),T=0,_=0,L=i.i||0,D=0,S=i.w||0,I=0;L+2<a;++L){var F=N(L),Y=L&32767,ue=b[F];if(C[Y]=ue,b[F]=Y,S<=L){var ne=a-L;if((T>7e3||D>24576)&&(ne>423||!c)){d=nN(t,A,0,R,V,O,_,D,I,L-I,d),D=T=_=0,I=L;for(var se=0;se<286;++se)V[se]=0;for(var se=0;se<30;++se)O[se]=0}var z=2,ce=0,ae=g,Ce=Y-ue&32767;if(ne>2&&F==N(L-Ce))for(var P=Math.min(m,ne)-1,k=Math.min(32767,L),W=Math.min(258,ne);Ce<=k&&--ae&&Y!=ue;){if(t[L+z]==t[L+z-Ce]){for(var re=0;re<W&&t[L+re]==t[L+re-Ce];++re);if(re>z){if(z=re,ce=Ce,re>P)break;for(var oe=Math.min(Ce,re-2),Z=0,se=0;se<oe;++se){var ee=L-Ce+se&32767,de=C[ee],xe=ee-de&32767;xe>Z&&(Z=xe,ue=ee)}}}Y=ue,ue=C[Y],Ce+=Y-ue&32767}if(ce){R[D++]=268435456|W2[z]<<18|tN[ce];var be=W2[z]&31,Te=tN[ce]&31;_+=uv[be]+dv[Te],++V[257+be],++O[Te],S=L+z,++T}else R[D++]=t[L],++V[t[L]]}}for(L=Math.max(L,S);L<a;++L)R[D++]=t[L],++V[t[L]];d=nN(t,A,c,R,V,O,_,D,I,L-I,d),c||(i.r=d&7|A[d/8|0]<<3,d-=7,i.h=b,i.p=C,i.i=L,i.w=S)}else{for(var L=i.w||0;L<a+c;L+=65535){var Ve=L+65535;Ve>=a&&(A[d/8|0]=c,Ve=a),d=h3(A,d+1,t.subarray(L,Ve))}i.i=a}return d3(o,0,n+yB(d)+s)},p3=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},hz=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new xs(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return dz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},m3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},fz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=p3();s.p(e.dictionary),m3(t,2,s.d())}},pz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zi(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Y2(t,e){e||(e={});var r=p3();r.p(t);var n=hz(t,e,e.dictionary?6:2,4);return fz(n,e),m3(n,n.length-4,r.d()),n}function mz(t,e){return cz(t.subarray(pz(t),-4),{i:2},e,e)}var gz=typeof TextDecoder<"u"&&new TextDecoder,wz=0;try{gz.decode(f3,{stream:!0}),wz=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Hy(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var Ur={log:Hy,warn:function(t){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):Hy.call(null,arguments))},error:function(t){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):Hy(t))}};function Vy(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){sc(n.response,e,r)},n.onerror=function(){Ur.error("could not download file")},n.send()}function sN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ug(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var If,Z2,sc=kt.saveAs||((typeof window>"u"?"undefined":Er(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=kt.URL||kt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?sN(s.href)?Vy(t,e,r):ug(s,s.target="_blank"):ug(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){ug(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(sN(t))Vy(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){ug(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Er(i)!=="object"&&(Ur.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Vy(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(kt.HTMLElement)||kt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Er(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var A=kt.URL||kt.webkitURL,c=A.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function g3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ky(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=fs(r,n,s,i,e[0],7,-680876936),i=fs(i,r,n,s,e[1],12,-389564586),s=fs(s,i,r,n,e[2],17,606105819),n=fs(n,s,i,r,e[3],22,-1044525330),r=fs(r,n,s,i,e[4],7,-176418897),i=fs(i,r,n,s,e[5],12,1200080426),s=fs(s,i,r,n,e[6],17,-1473231341),n=fs(n,s,i,r,e[7],22,-45705983),r=fs(r,n,s,i,e[8],7,1770035416),i=fs(i,r,n,s,e[9],12,-1958414417),s=fs(s,i,r,n,e[10],17,-42063),n=fs(n,s,i,r,e[11],22,-1990404162),r=fs(r,n,s,i,e[12],7,1804603682),i=fs(i,r,n,s,e[13],12,-40341101),s=fs(s,i,r,n,e[14],17,-1502002290),r=ps(r,n=fs(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ps(i,r,n,s,e[6],9,-1069501632),s=ps(s,i,r,n,e[11],14,643717713),n=ps(n,s,i,r,e[0],20,-373897302),r=ps(r,n,s,i,e[5],5,-701558691),i=ps(i,r,n,s,e[10],9,38016083),s=ps(s,i,r,n,e[15],14,-660478335),n=ps(n,s,i,r,e[4],20,-405537848),r=ps(r,n,s,i,e[9],5,568446438),i=ps(i,r,n,s,e[14],9,-1019803690),s=ps(s,i,r,n,e[3],14,-187363961),n=ps(n,s,i,r,e[8],20,1163531501),r=ps(r,n,s,i,e[13],5,-1444681467),i=ps(i,r,n,s,e[2],9,-51403784),s=ps(s,i,r,n,e[7],14,1735328473),r=ms(r,n=ps(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ms(i,r,n,s,e[8],11,-2022574463),s=ms(s,i,r,n,e[11],16,1839030562),n=ms(n,s,i,r,e[14],23,-35309556),r=ms(r,n,s,i,e[1],4,-1530992060),i=ms(i,r,n,s,e[4],11,1272893353),s=ms(s,i,r,n,e[7],16,-155497632),n=ms(n,s,i,r,e[10],23,-1094730640),r=ms(r,n,s,i,e[13],4,681279174),i=ms(i,r,n,s,e[0],11,-358537222),s=ms(s,i,r,n,e[3],16,-722521979),n=ms(n,s,i,r,e[6],23,76029189),r=ms(r,n,s,i,e[9],4,-640364487),i=ms(i,r,n,s,e[12],11,-421815835),s=ms(s,i,r,n,e[15],16,530742520),r=gs(r,n=ms(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=gs(i,r,n,s,e[7],10,1126891415),s=gs(s,i,r,n,e[14],15,-1416354905),n=gs(n,s,i,r,e[5],21,-57434055),r=gs(r,n,s,i,e[12],6,1700485571),i=gs(i,r,n,s,e[3],10,-1894986606),s=gs(s,i,r,n,e[10],15,-1051523),n=gs(n,s,i,r,e[1],21,-2054922799),r=gs(r,n,s,i,e[8],6,1873313359),i=gs(i,r,n,s,e[15],10,-30611744),s=gs(s,i,r,n,e[6],15,-1560198380),n=gs(n,s,i,r,e[13],21,1309151649),r=gs(r,n,s,i,e[4],6,-145523070),i=gs(i,r,n,s,e[11],10,-1120210379),s=gs(s,i,r,n,e[2],15,718787259),n=gs(n,s,i,r,e[9],21,-343485551),t[0]=zA(r,t[0]),t[1]=zA(n,t[1]),t[2]=zA(s,t[2]),t[3]=zA(i,t[3])}function hv(t,e,r,n,s,i){return e=zA(zA(e,t),zA(n,i)),zA(e<<s|e>>>32-s,r)}function fs(t,e,r,n,s,i,a){return hv(e&r|~e&n,t,e,s,i,a)}function ps(t,e,r,n,s,i,a){return hv(e&n|r&~n,t,e,s,i,a)}function ms(t,e,r,n,s,i,a){return hv(e^r^n,t,e,s,i,a)}function gs(t,e,r,n,s,i,a){return hv(r^(e|~n),t,e,s,i,a)}function w3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Ky(n,vz(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Ky(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,Ky(n,s),n}function vz(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}If=kt.atob.bind(kt),Z2=kt.btoa.bind(kt);var iN="0123456789abcdef".split("");function yz(t){for(var e="",r=0;r<4;r++)e+=iN[t>>8*r+4&15]+iN[t>>8*r&15];return e}function xz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ex(t){return w3(t).map(xz).join("")}var bz=function(t){for(var e=0;e<t.length;e++)t[e]=yz(t[e]);return t.join("")}(w3("hello"))!="5d41402abc4b2a76b9719d911017c592";function zA(t,e){if(bz){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function tx(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var d=o[A];c=(c+d+a.charCodeAt(A))%256,o[A]=o[c],o[c]=d}r=t,n=o}else o=n;var f=e.length,m=0,g=0,B="";for(A=0;A<f;A++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,a=o[(o[m]+o[g])%256],B+=String.fromCharCode(e.charCodeAt(A)^a);return B}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var aN={print:4,modify:8,copy:16,"annot-forms":32};function Ku(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(aN.perm!==void 0)throw new Error("Invalid permission: "+o);s+=aN[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=ex(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=tx(this.encryptionKey,this.padding)}function qu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function oN(t){if(Er(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){kt.console&&Ur.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vp(t){if(!(this instanceof vp))return new vp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function v3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function OA(t,e,r,n,s){if(!(this instanceof OA))return new OA(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,v3.call(this,n,s)}function pc(t,e,r,n,s){if(!(this instanceof pc))return new pc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,v3.call(this,n,s)}function Ut(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",d=null;Er(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=oN;var B="1.3",C=g.__private__.getPdfVersion=function(){return B};g.__private__.setPdfVersion=function(v){B=v};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return b};var y=g.__private__.getPageFormat=function(v){return b[v]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function R(){this.saveGraphicsState(),G(new De(Je,0,0,-Je,0,cs()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),c="n",N=w.ADVANCED}function V(){this.restoreGraphicsState(),c="S",N=w.COMPAT}var O=g.__private__.combineFontStyleAndFontWeight=function(v,M){if(v=="bold"&&M=="normal"||v=="bold"&&M==400||v=="normal"&&M=="italic"||v=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(v=M==400||M==="normal"?v==="italic"?"italic":"normal":M!=700&&M!=="bold"||v!=="normal"?(M==700?"bold":M)+""+v:"bold"),v};g.advancedAPI=function(v){var M=N===w.COMPAT;return M&&R.call(this),typeof v!="function"||(v(this),M&&V.call(this)),this},g.compatAPI=function(v){var M=N===w.ADVANCED;return M&&V.call(this),typeof v!="function"||(v(this),M&&R.call(this)),this},g.isAdvancedAPI=function(){return N===w.ADVANCED};var T,_=function(v){if(N!==w.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=g.roundToPrecision=g.__private__.roundToPrecision=function(v,M){var le=e||M;if(isNaN(v)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(le).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof A=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,A)}:A==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,16)};var D=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return L(v,2)},S=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return L(v,3)},I=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?v*Je:N===w.ADVANCED?v:void 0},F=function(v){return N===w.COMPAT?cs()-v:N===w.ADVANCED?v:void 0},Y=function(v){return I(F(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ue,ne="00000000000000000000000000000000",se=g.__private__.getFileId=function(){return ne},z=g.__private__.setFileId=function(v){return ne=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Or=new Ku(d.userPermissions,d.userPassword,d.ownerPassword,ne)),ne};g.setFileId=function(v){return z(v),this},g.getFileId=function(){return se()};var ce=g.__private__.convertDateToPDFDate=function(v){var M=v.getTimezoneOffset(),le=M<0?"+":"-",he=Math.floor(Math.abs(M/60)),we=Math.abs(M%60),je=[le,W(he),"'",W(we),"'"].join("");return["D:",v.getFullYear(),W(v.getMonth()+1),W(v.getDate()),W(v.getHours()),W(v.getMinutes()),W(v.getSeconds()),je].join("")},ae=g.__private__.convertPDFDateToDate=function(v){var M=parseInt(v.substr(2,4),10),le=parseInt(v.substr(6,2),10)-1,he=parseInt(v.substr(8,2),10),we=parseInt(v.substr(10,2),10),je=parseInt(v.substr(12,2),10),$e=parseInt(v.substr(14,2),10);return new Date(M,le,he,we,je,$e,0)},Ce=g.__private__.setCreationDate=function(v){var M;if(v===void 0&&(v=new Date),v instanceof Date)M=ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=v}return ue=M},P=g.__private__.getCreationDate=function(v){var M=ue;return v==="jsDate"&&(M=ae(ue)),M};g.setCreationDate=function(v){return Ce(v),this},g.getCreationDate=function(v){return P(v)};var k,W=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},re=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},oe=0,Z=[],ee=[],de=0,xe=[],be=[],Te=!1,Ve=ee,te=function(){oe=0,de=0,ee=[],Z=[],xe=[],et=at(),nt=at()};g.__private__.setCustomOutputDestination=function(v){Te=!0,Ve=v};var Ae=function(v){Te||(Ve=v)};g.__private__.resetCustomOutputDestination=function(){Te=!1,Ve=ee};var G=g.__private__.out=function(v){return v=v.toString(),de+=v.length+1,Ve.push(v),Ve},Re=g.__private__.write=function(v){return G(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Le=g.__private__.getArrayBuffer=function(v){for(var M=v.length,le=new ArrayBuffer(M),he=new Uint8Array(le);M--;)he[M]=v.charCodeAt(M);return le},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Fe};var Pe=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return Pe=N===w.ADVANCED?v/Je:v,this};var Xe,Ge=g.__private__.getFontSize=g.getFontSize=function(){return N===w.COMPAT?Pe:Pe*Je},it=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return it=v,this},g.__private__.getR2L=g.getR2L=function(){return it};var Be,Ke=g.__private__.setZoomMode=function(v){var M=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Xe=v;else if(isNaN(v)){if(M.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Xe=v}else Xe=parseInt(v,10)};g.__private__.getZoomMode=function(){return Xe};var ze,tt=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Be=v};g.__private__.getPageMode=function(){return Be};var pt=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ze=v};g.__private__.getLayoutMode=function(){return ze},g.__private__.setDisplayMode=g.setDisplayMode=function(v,M,le){return Ke(v),pt(M),tt(le),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(ot).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[v]},g.__private__.getDocumentProperties=function(){return ot},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var M in ot)ot.hasOwnProperty(M)&&v[M]&&(ot[M]=v[M]);return this},g.__private__.setDocumentProperty=function(v,M){if(Object.keys(ot).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[v]=M};var rt,Je,Ot,Pt,Pr,Jt={},dr={},Gn=[],qt={},As={},ar={},pr={},cn=null,mr=0,Ft=[],$t=new oN(g),ls=t.hotfixes||[],qr={},hr={},Se=[],De=function v(M,le,he,we,je,$e){if(!(this instanceof v))return new v(M,le,he,we,je,$e);isNaN(M)&&(M=1),isNaN(le)&&(le=0),isNaN(he)&&(he=0),isNaN(we)&&(we=1),isNaN(je)&&(je=0),isNaN($e)&&($e=0),this._matrix=[M,le,he,we,je,$e]};Object.defineProperty(De.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(De.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(De.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(De.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(De.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(De.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(De.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(De.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(De.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(De.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(De.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(De.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(De.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(De.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(De.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(De.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),De.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},De.prototype.multiply=function(v){var M=v.sx*this.sx+v.shy*this.shx,le=v.sx*this.shy+v.shy*this.sy,he=v.shx*this.sx+v.sy*this.shx,we=v.shx*this.shy+v.sy*this.sy,je=v.tx*this.sx+v.ty*this.shx+this.tx,$e=v.tx*this.shy+v.ty*this.sy+this.ty;return new De(M,le,he,we,je,$e)},De.prototype.decompose=function(){var v=this.sx,M=this.shy,le=this.shx,he=this.sy,we=this.tx,je=this.ty,$e=Math.sqrt(v*v+M*M),lt=(v/=$e)*le+(M/=$e)*he;le-=v*lt,he-=M*lt;var h=Math.sqrt(le*le+he*he);return lt/=h,v*(he/=h)<M*(le/=h)&&(v=-v,M=-M,lt=-lt,$e=-$e),{scale:new De($e,0,0,h,0,0),translate:new De(1,0,0,1,we,je),rotate:new De(v,M,-M,v,0,0),skew:new De(1,0,lt,1,0,0)}},De.prototype.toString=function(v){return this.join(" ")},De.prototype.inversed=function(){var v=this.sx,M=this.shy,le=this.shx,he=this.sy,we=this.tx,je=this.ty,$e=1/(v*he-M*le),lt=he*$e,h=-M*$e,E=-le*$e,Q=v*$e;return new De(lt,h,E,Q,-lt*we-E*je,-h*we-Q*je)},De.prototype.applyToPoint=function(v){var M=v.x*this.sx+v.y*this.shx+this.tx,le=v.x*this.shy+v.y*this.sy+this.ty;return new to(M,le)},De.prototype.applyToRectangle=function(v){var M=this.applyToPoint(v),le=this.applyToPoint(new to(v.x+v.w,v.y+v.h));return new iA(M.x,M.y,le.x-M.x,le.y-M.y)},De.prototype.clone=function(){var v=this.sx,M=this.shy,le=this.shx,he=this.sy,we=this.tx,je=this.ty;return new De(v,M,le,he,we,je)},g.Matrix=De;var Et=g.matrixMult=function(v,M){return M.multiply(v)},ft=new De(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ft;var ut=function(v,M){if(!As[v]){var le=(M instanceof OA?"Sh":"P")+(Object.keys(qt).length+1).toString(10);M.id=le,As[v]=le,qt[le]=M,$t.publish("addPattern",M)}};g.ShadingPattern=OA,g.TilingPattern=pc,g.addShadingPattern=function(v,M){return _("addShadingPattern()"),ut(v,M),this},g.beginTilingPattern=function(v){_("beginTilingPattern()"),aA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,M){_("endTilingPattern()"),M.stream=be[k].join(`
`),ut(v,M),$t.publish("endTilingPattern",M),Se.pop().restore()};var Nt=g.__private__.newObject=function(){var v=at();return Bt(v,!0),v},at=g.__private__.newObjectDeferred=function(){return oe++,Z[oe]=function(){return de},oe},Bt=function(v,M){return M=typeof M=="boolean"&&M,Z[v]=de,M&&G(v+" 0 obj"),v},ve=g.__private__.newAdditionalObject=function(){var v={objId:at(),content:""};return xe.push(v),v},et=at(),nt=at(),jt=g.__private__.decodeColorString=function(v){var M=v.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length===5&&(M[4]==="k"||M[4]==="K")&&(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var le=parseFloat(M[0]);M=[le,le,le,"r"]}for(var he="#",we=0;we<3;we++)he+=("0"+Math.floor(255*parseFloat(M[we])).toString(16)).slice(-2);return he},Wt=g.__private__.encodeColorString=function(v){var M;typeof v=="string"&&(v={ch1:v});var le=v.ch1,he=v.ch2,we=v.ch3,je=v.ch4,$e=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var lt=new g3(le);if(lt.ok)le=lt.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var h=parseInt(le.substr(1),16);le=h>>16&255,he=h>>8&255,we=255&h}if(he===void 0||je===void 0&&le===he&&he===we)if(typeof le=="string")M=le+" "+$e[0];else switch(v.precision){case 2:M=D(le/255)+" "+$e[0];break;case 3:default:M=S(le/255)+" "+$e[0]}else if(je===void 0||Er(je)==="object"){if(je&&!isNaN(je.a)&&je.a===0)return M=["1.","1.","1.",$e[1]].join(" ");if(typeof le=="string")M=[le,he,we,$e[1]].join(" ");else switch(v.precision){case 2:M=[D(le/255),D(he/255),D(we/255),$e[1]].join(" ");break;default:case 3:M=[S(le/255),S(he/255),S(we/255),$e[1]].join(" ")}}else if(typeof le=="string")M=[le,he,we,je,$e[2]].join(" ");else switch(v.precision){case 2:M=[D(le),D(he),D(we),D(je),$e[2]].join(" ");break;case 3:default:M=[S(le),S(he),S(we),S(je),$e[2]].join(" ")}return M},Ct=g.__private__.getFilters=function(){return a},gt=g.__private__.putStream=function(v){var M=(v=v||{}).data||"",le=v.filters||Ct(),he=v.alreadyAppliedFilters||[],we=v.addLength1||!1,je=M.length,$e=v.objectId,lt=function(Ht){return Ht};if(d!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(lt=Or.encryptor($e,0));var h={};le===!0&&(le=["FlateEncode"]);var E=v.additionalKeyValues||[],Q=(h=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(M,le):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(he)?he.join(" "):he.toString());if(h.data.length!==0&&(E.push({key:"Length",value:h.data.length}),we===!0&&E.push({key:"Length1",value:je})),Q.length!=0)if(Q.split("/").length-1==1)E.push({key:"Filter",value:Q});else{E.push({key:"Filter",value:"["+Q+"]"});for(var $=0;$<E.length;$+=1)if(E[$].key==="DecodeParms"){for(var ge=[],Ne=0;Ne<h.reverseChain.split("/").length-1;Ne+=1)ge.push("null");ge.push(E[$].value),E[$].value="["+ge.join(" ")+"]"}}G("<<");for(var We=0;We<E.length;We++)G("/"+E[We].key+" "+E[We].value);G(">>"),h.data.length!==0&&(G("stream"),G(lt(h.data)),G("endstream"))},Bs=g.__private__.putPage=function(v){var M=v.number,le=v.data,he=v.objId,we=v.contentsObjId;Bt(he,!0),G("<</Type /Page"),G("/Parent "+v.rootDictionaryObjId+" 0 R"),G("/Resources "+v.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&G("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&G("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&G("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&G("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&G("/UserUnit "+v.userUnit),$t.publish("putPage",{objId:he,pageContext:Ft[M],pageNumber:M,page:le}),G("/Contents "+we+" 0 R"),G(">>"),G("endobj");var je=le.join(`
`);return N===w.ADVANCED&&(je+=`
Q`),Bt(we,!0),gt({data:je,filters:Ct(),objectId:we}),G("endobj"),he},fa=g.__private__.putPages=function(){var v,M,le=[];for(v=1;v<=mr;v++)Ft[v].objId=at(),Ft[v].contentsObjId=at();for(v=1;v<=mr;v++)le.push(Bs({number:v,data:be[v],objId:Ft[v].objId,contentsObjId:Ft[v].contentsObjId,mediaBox:Ft[v].mediaBox,cropBox:Ft[v].cropBox,bleedBox:Ft[v].bleedBox,trimBox:Ft[v].trimBox,artBox:Ft[v].artBox,userUnit:Ft[v].userUnit,rootDictionaryObjId:et,resourceDictionaryObjId:nt}));Bt(et,!0),G("<</Type /Pages");var he="/Kids [";for(M=0;M<mr;M++)he+=le[M]+" 0 R ";G(he+"]"),G("/Count "+mr),G(">>"),G("endobj"),$t.publish("postPutPages")},pa=function(v){$t.publish("putFont",{font:v,out:G,newObject:Nt,putStream:gt}),v.isAlreadyPutted!==!0&&(v.objectNumber=Nt(),G("<<"),G("/Type /Font"),G("/BaseFont /"+qu(v.postScriptName)),G("/Subtype /Type1"),typeof v.encoding=="string"&&G("/Encoding /"+v.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},ma=function(){for(var v in Jt)Jt.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&pa(Jt[v])},Ga=function(v){v.objectNumber=Nt();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var le=v.pages[1].join(`
`);gt({data:le,additionalKeyValues:M,objectId:v.objectNumber}),G("endobj")},za=function(){for(var v in qr)qr.hasOwnProperty(v)&&Ga(qr[v])},$c=function(v,M){var le,he=[],we=1/(M-1);for(le=0;le<1;le+=we)he.push(le);if(he.push(1),v[0].offset!=0){var je={offset:0,color:v[0].color};v.unshift(je)}if(v[v.length-1].offset!=1){var $e={offset:1,color:v[v.length-1].color};v.push($e)}for(var lt="",h=0,E=0;E<he.length;E++){for(le=he[E];le>v[h+1].offset;)h++;var Q=v[h].offset,$=(le-Q)/(v[h+1].offset-Q),ge=v[h].color,Ne=v[h+1].color;lt+=re(Math.round((1-$)*ge[0]+$*Ne[0]).toString(16))+re(Math.round((1-$)*ge[1]+$*Ne[1]).toString(16))+re(Math.round((1-$)*ge[2]+$*Ne[2]).toString(16))}return lt.trim()},Go=function(v,M){M||(M=21);var le=Nt(),he=$c(v.colors,M),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+M+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt({data:he,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),G("endobj"),v.objectNumber=Nt(),G("<< /ShadingType "+v.type),G("/ColorSpace /DeviceRGB");var je="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?je+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):je+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),G(je+="]"),v.matrix&&G("/Matrix ["+v.matrix.toString()+"]"),G("/Function "+le+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Wc=function(v,M){var le=at(),he=Nt();M.push({resourcesOid:le,objectOid:he}),v.objectNumber=he;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),we.push({key:"XStep",value:T(v.xStep)}),we.push({key:"YStep",value:T(v.yStep)}),we.push({key:"Resources",value:le+" 0 R"}),v.matrix&&we.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),gt({data:v.stream,additionalKeyValues:we,objectId:v.objectNumber}),G("endobj")},ga=function(v){var M;for(M in qt)qt.hasOwnProperty(M)&&(qt[M]instanceof OA?Go(qt[M]):qt[M]instanceof pc&&Wc(qt[M],v))},wa=function(v){for(var M in v.objectNumber=Nt(),G("<<"),v)switch(M){case"opacity":G("/ca "+D(v[M]));break;case"stroke-opacity":G("/CA "+D(v[M]))}G(">>"),G("endobj")},ki=function(){var v;for(v in ar)ar.hasOwnProperty(v)&&wa(ar[v])},$a=function(){for(var v in G("/XObject <<"),qr)qr.hasOwnProperty(v)&&qr[v].objectNumber>=0&&G("/"+v+" "+qr[v].objectNumber+" 0 R");$t.publish("putXobjectDict"),G(">>")},Zd=function(){Or.oid=Nt(),G("<<"),G("/Filter /Standard"),G("/V "+Or.v),G("/R "+Or.r),G("/U <"+Or.toHexString(Or.U)+">"),G("/O <"+Or.toHexString(Or.O)+">"),G("/P "+Or.P),G(">>"),G("endobj")},Fl=function(){for(var v in G("/Font <<"),Jt)Jt.hasOwnProperty(v)&&(f===!1||f===!0&&m.hasOwnProperty(v))&&G("/"+v+" "+Jt[v].objectNumber+" 0 R");G(">>")},Xc=function(){if(Object.keys(qt).length>0){for(var v in G("/Shading <<"),qt)qt.hasOwnProperty(v)&&qt[v]instanceof OA&&qt[v].objectNumber>=0&&G("/"+v+" "+qt[v].objectNumber+" 0 R");$t.publish("putShadingPatternDict"),G(">>")}},Wa=function(v){if(Object.keys(qt).length>0){for(var M in G("/Pattern <<"),qt)qt.hasOwnProperty(M)&&qt[M]instanceof g.TilingPattern&&qt[M].objectNumber>=0&&qt[M].objectNumber<v&&G("/"+M+" "+qt[M].objectNumber+" 0 R");$t.publish("putTilingPatternDict"),G(">>")}},Tl=function(){if(Object.keys(ar).length>0){var v;for(v in G("/ExtGState <<"),ar)ar.hasOwnProperty(v)&&ar[v].objectNumber>=0&&G("/"+v+" "+ar[v].objectNumber+" 0 R");$t.publish("putGStateDict"),G(">>")}},Dr=function(v){Bt(v.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fl(),Xc(),Wa(v.objectOid),Tl(),$a(),G(">>"),G("endobj")},Ul=function(){var v=[];ma(),ki(),za(),ga(v),$t.publish("putResources"),v.forEach(Dr),Dr({resourcesOid:nt,objectOid:Number.MAX_SAFE_INTEGER}),$t.publish("postPutResources")},Pl=function(){$t.publish("putAdditionalObjects");for(var v=0;v<xe.length;v++){var M=xe[v];Bt(M.objId,!0),G(M.content),G("endobj")}$t.publish("postPutAdditionalObjects")},Jc=function(v){dr[v.fontName]=dr[v.fontName]||{},dr[v.fontName][v.fontStyle]=v.id},Ql=function(v,M,le,he,we){var je={id:"F"+(Object.keys(Jt).length+1).toString(10),postScriptName:v,fontName:M,fontStyle:le,encoding:he,isStandardFont:we||!1,metadata:{}};return $t.publish("addFont",{font:je,instance:this}),Jt[je.id]=je,Jc(je),je.id},Yc=function(v){for(var M=0,le=Fe.length;M<le;M++){var he=Ql.call(this,v[M][0],v[M][1],v[M][2],Fe[M][3],!0);f===!1&&(m[he]=!0);var we=v[M][0].split("-");Jc({id:he,fontName:we[0],fontStyle:we[1]||""})}$t.publish("addFonts",{fonts:Jt,dictionary:dr})},ks=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(he){var M=he.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var le="Error in function "+M.split(`
`)[0].split("<")[0]+": "+he.message;if(!kt.console)throw new Error(le);kt.console.error(le,he),kt.alert&&alert(le)}},v.foo.bar=v,v.foo},zo=function(v,M){var le,he,we,je,$e,lt,h,E,Q;if(we=(M=M||{}).sourceEncoding||"Unicode",$e=M.outputEncoding,(M.autoencode||$e)&&Jt[rt].metadata&&Jt[rt].metadata[we]&&Jt[rt].metadata[we].encoding&&(je=Jt[rt].metadata[we].encoding,!$e&&Jt[rt].encoding&&($e=Jt[rt].encoding),!$e&&je.codePages&&($e=je.codePages[0]),typeof $e=="string"&&($e=je[$e]),$e)){for(h=!1,lt=[],le=0,he=v.length;le<he;le++)(E=$e[v.charCodeAt(le)])?lt.push(String.fromCharCode(E)):lt.push(v[le]),lt[le].charCodeAt(0)>>8&&(h=!0);v=lt.join("")}for(le=v.length;h===void 0&&le!==0;)v.charCodeAt(le-1)>>8&&(h=!0),le--;if(!h)return v;for(lt=M.noBOM?[]:[254,255],le=0,he=v.length;le<he;le++){if((Q=(E=v.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(Q),lt.push(E-(Q<<8))}return String.fromCharCode.apply(void 0,lt)},sn=g.__private__.pdfEscape=g.pdfEscape=function(v,M){return zo(v,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cs=g.__private__.beginPage=function(v){be[++mr]=[],Ft[mr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ll(mr),Ae(be[k])},Xa=function(v,M){var le,he,we;switch(r=M||r,typeof v=="string"&&(le=y(v.toLowerCase()),Array.isArray(le)&&(he=le[0],we=le[1])),Array.isArray(v)&&(he=v[0]*Je,we=v[1]*Je),isNaN(he)&&(he=s[0],we=s[1]),(he>14400||we>14400)&&(Ur.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),he=Math.min(14400,he),we=Math.min(14400,we)),s=[he,we],r.substr(0,1)){case"l":we>he&&(s=[we,he]);break;case"p":he>we&&(s=[we,he])}Cs(s),Ol(Dl),G(zn),Vl!==0&&G(Vl+" J"),sA!==0&&G(sA+" j"),$t.publish("addPage",{pageNumber:mr})},$o=function(v){v>0&&v<=mr&&(be.splice(v,1),Ft.splice(v,1),mr--,k>mr&&(k=mr),this.setPage(k))},Ll=function(v){v>0&&v<=mr&&(k=v)},yr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return be.length-1},Ja=function(v,M,le){var he,we=void 0;return le=le||{},v=v!==void 0?v:Jt[rt].fontName,M=M!==void 0?M:Jt[rt].fontStyle,he=v.toLowerCase(),dr[he]!==void 0&&dr[he][M]!==void 0?we=dr[he][M]:dr[v]!==void 0&&dr[v][M]!==void 0?we=dr[v][M]:le.disableWarning===!1&&Ur.warn("Unable to look up font label for font '"+v+"', '"+M+"'. Refer to getFontList() for available fonts."),we||le.noFallback||(we=dr.times[M])==null&&(we=dr.times.normal),we},Ya=g.__private__.putInfo=function(){var v=Nt(),M=function(he){return he};for(var le in d!==null&&(M=Or.encryptor(v,0)),G("<<"),G("/Producer ("+sn(M("jsPDF "+Ut.version))+")"),ot)ot.hasOwnProperty(le)&&ot[le]&&G("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+sn(M(ot[le]))+")");G("/CreationDate ("+sn(M(ue))+")"),G(">>"),G("endobj")},Ri=g.__private__.putCatalog=function(v){var M=(v=v||{}).rootDictionaryObjId||et;switch(Nt(),G("<<"),G("/Type /Catalog"),G("/Pages "+M+" 0 R"),Xe||(Xe="fullwidth"),Xe){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+Xe;le.substr(le.length-1)==="%"&&(Xe=parseInt(Xe)/100),typeof Xe=="number"&&G("/OpenAction [3 0 R /XYZ null null "+D(Xe)+"]")}switch(ze||(ze="continuous"),ze){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}Be&&G("/PageMode /"+Be),$t.publish("putCatalog"),G(">>"),G("endobj")},eh=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(oe+1)),G("/Root "+oe+" 0 R"),G("/Info "+(oe-1)+" 0 R"),d!==null&&G("/Encrypt "+Or.oid+" 0 R"),G("/ID [ <"+ne+"> <"+ne+"> ]"),G(">>")},Zc=g.__private__.putHeader=function(){G("%PDF-"+B),G("%ºß¬à")},th=g.__private__.putXRef=function(){var v="0000000000";G("xref"),G("0 "+(oe+1)),G("0000000000 65535 f ");for(var M=1;M<=oe;M++)typeof Z[M]=="function"?G((v+Z[M]()).slice(-10)+" 00000 n "):Z[M]!==void 0?G((v+Z[M]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Di=g.__private__.buildDocument=function(){te(),Ae(ee),$t.publish("buildDocument"),Zc(),fa(),Pl(),Ul(),d!==null&&Zd(),Ya(),Ri();var v=de;return th(),eh(),G("startxref"),G(""+v),G("%%EOF"),Ae(be[k]),ee.join(`
`)},Wo=g.__private__.getBlob=function(v){return new Blob([Le(v)],{type:"application/pdf"})},Xo=g.output=g.__private__.output=ks(function(v,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",v){case void 0:return Di();case"save":g.save(M.filename);break;case"arraybuffer":return Le(Di());case"blob":return Wo(Di());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(Wo(Di()))||void 0;Ur.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",he=Di();try{le=Z2(he)}catch{le=Z2(unescape(encodeURIComponent(he)))}return"data:application/pdf;filename="+M.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(we=M.pdfObjectUrl,je="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",lt=kt.open();return lt!==null&&lt.document.write($e),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',E=kt.open();if(E!==null){E.document.write(h);var Q=this;E.document.documentElement.querySelector("#pdfViewer").onload=function(){E.document.title=M.filename,E.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Q.output("bloburl"))}}return E}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',ge=kt.open();if(ge!==null&&(ge.document.write($),ge.document.title=M.filename),ge||typeof safari>"u")return ge;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",M);default:return null}}),va=function(v){return Array.isArray(ls)===!0&&ls.indexOf(v)>-1};switch(n){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=va("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Je=n}var Or=null;Ce(),z();var eu=function(v){return d!==null?Or.encryptor(v,0):function(M){return M}},jl=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[v].objId,pageNumber:v,pageContext:Ft[v]}},Rt=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in Ft)if(Ft[M].objId===v)break;return jl(M)},ya=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ft[k].objId,pageNumber:k,pageContext:Ft[k]}};g.addPage=function(){return Xa.apply(this,arguments),this},g.setPage=function(){return Ll.apply(this,arguments),Ae.call(this,be[k]),this},g.insertPage=function(v){return this.addPage(),this.movePage(k,v),this},g.movePage=function(v,M){var le,he;if(v>M){le=be[v],he=Ft[v];for(var we=v;we>M;we--)be[we]=be[we-1],Ft[we]=Ft[we-1];be[M]=le,Ft[M]=he,this.setPage(M)}else if(v<M){le=be[v],he=Ft[v];for(var je=v;je<M;je++)be[je]=be[je+1],Ft[je]=Ft[je+1];be[M]=le,Ft[M]=he,this.setPage(M)}return this},g.deletePage=function(){return $o.apply(this,arguments),this},g.__private__.text=g.text=function(v,M,le,he,we){var je,$e,lt,h,E,Q,$,ge,Ne,We=(he=he||{}).scope||this;if(typeof v=="number"&&typeof M=="number"&&(typeof le=="string"||Array.isArray(le))){var Ht=le;le=M,M=v,v=Ht}if(arguments[3]instanceof De?(_("The transform parameter of text() with a Matrix value"),Ne=we):(lt=arguments[4],h=arguments[5],Er($=arguments[3])==="object"&&$!==null||(typeof lt=="string"&&(h=lt,lt=null),typeof $=="string"&&(h=$,$=null),typeof $=="number"&&(lt=$,$=null),he={flags:$,angle:lt,align:h})),isNaN(M)||isNaN(le)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return We;var tr="",Vt=!1,wr=typeof he.lineHeightFactor=="number"?he.lineHeightFactor:gr,Fr=We.internal.scaleFactor;function Ki(Qr){return Qr=Qr.split("	").join(Array(he.TabLen||9).join(" ")),sn(Qr,$)}function $n(Qr){for(var Lr,dn=Qr.concat(),Nn=[],ao=dn.length;ao--;)typeof(Lr=dn.shift())=="string"?Nn.push(Lr):Array.isArray(Qr)&&(Lr.length===1||Lr[1]===void 0&&Lr[2]===void 0)?Nn.push(Lr[0]):Nn.push([Lr[0],Lr[1],Lr[2]]);return Nn}function Ca(Qr,Lr){var dn;if(typeof Qr=="string")dn=Lr(Qr)[0];else if(Array.isArray(Qr)){for(var Nn,ao,ch=Qr.concat(),hu=[],Jp=ch.length;Jp--;)typeof(Nn=ch.shift())=="string"?hu.push(Lr(Nn)[0]):Array.isArray(Nn)&&typeof Nn[0]=="string"&&(ao=Lr(Nn[0],Nn[1],Nn[2]),hu.push([ao[0],ao[1],ao[2]]));dn=hu}return dn}var Ea=!1,nh=!0;if(typeof v=="string")Ea=!0;else if(Array.isArray(v)){var sh=v.concat();$e=[];for(var iu,Wn=sh.length;Wn--;)(typeof(iu=sh.shift())!="string"||Array.isArray(iu)&&typeof iu[0]!="string")&&(nh=!1);Ea=nh}if(Ea===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var au=Pe/We.internal.scaleFactor,ou=au*(wr-1);switch(he.baseline){case"bottom":le-=ou;break;case"top":le+=au-ou;break;case"hanging":le+=au-2*ou;break;case"middle":le+=au/2-ou}if((Q=he.maxWidth||0)>0&&(typeof v=="string"?v=We.splitTextToSize(v,Q):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Qr,Lr){return Qr.concat(We.splitTextToSize(Lr,Q))},[]))),je={text:v,x:M,y:le,options:he,mutex:{pdfEscape:sn,activeFontKey:rt,fonts:Jt,activeFontSize:Pe}},$t.publish("preProcessText",je),v=je.text,lt=(he=je.options).angle,!(Ne instanceof De)&&lt&&typeof lt=="number"){lt*=Math.PI/180,he.rotationDirection===0&&(lt=-lt),N===w.ADVANCED&&(lt=-lt);var Au=Math.cos(lt),ih=Math.sin(lt);Ne=new De(Au,ih,-ih,Au,0,0)}else lt&&lt instanceof De&&(Ne=lt);N!==w.ADVANCED||Ne||(Ne=ft),(E=he.charSpace||eo)!==void 0&&(tr+=T(I(E))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ge=he.horizontalScale)!==void 0&&(tr+=T(100*ge)+` Tz
`),he.lang;var Rs=-1,fv=he.renderingMode!==void 0?he.renderingMode:he.stroke,ah=We.internal.getCurrentPageInfo().pageContext;switch(fv){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var zp=ah.usedRenderingMode!==void 0?ah.usedRenderingMode:-1;Rs!==-1?tr+=Rs+` Tr
`:zp!==-1&&(tr+=`0 Tr
`),Rs!==-1&&(ah.usedRenderingMode=Rs),h=he.align||"left";var mi,lu=Pe*wr,$p=We.internal.pageSize.getWidth(),Wp=Jt[rt];E=he.charSpace||eo,Q=he.maxWidth||0,$=Object.assign({autoencode:!0,noBOM:!0},he.flags);var lA=[],Kl=function(Qr){return We.getStringUnitWidth(Qr,{font:Wp,charSpace:E,fontSize:Pe,doKerning:!1})*Pe/Fr};if(Object.prototype.toString.call(v)==="[object Array]"){var Ds;$e=$n(v),h!=="left"&&(mi=$e.map(Kl));var Es,cA=0;if(h==="right"){M-=mi[0],v=[],Wn=$e.length;for(var no=0;no<Wn;no++)no===0?(Es=Zs(M),Ds=_n(le)):(Es=I(cA-mi[no]),Ds=-lu),v.push([$e[no],Es,Ds]),cA=mi[no]}else if(h==="center"){M-=mi[0]/2,v=[],Wn=$e.length;for(var so=0;so<Wn;so++)so===0?(Es=Zs(M),Ds=_n(le)):(Es=I((cA-mi[so])/2),Ds=-lu),v.push([$e[so],Es,Ds]),cA=mi[so]}else if(h==="left"){v=[],Wn=$e.length;for(var cu=0;cu<Wn;cu++)v.push($e[cu])}else if(h==="justify"&&Wp.encoding==="Identity-H"){v=[],Wn=$e.length,Q=Q!==0?Q:$p;for(var io=0,un=0;un<Wn;un++)if(Ds=un===0?_n(le):-lu,Es=un===0?Zs(M):io,un<Wn-1){var oh=I((Q-mi[un])/($e[un].split(" ").length-1)),_s=$e[un].split(" ");v.push([_s[0]+" ",Es,Ds]),io=0;for(var gi=1;gi<_s.length;gi++){var uu=(Kl(_s[gi-1]+" "+_s[gi])-Kl(_s[gi]))*Fr+oh;gi==_s.length-1?v.push([_s[gi],uu,0]):v.push([_s[gi]+" ",uu,0]),io-=uu}}else v.push([$e[un],Es,Ds]);v.push(["",io,0])}else{if(h!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Wn=$e.length,Q=Q!==0?Q:$p,un=0;un<Wn;un++)Ds=un===0?_n(le):-lu,Es=un===0?Zs(M):0,un<Wn-1?lA.push(T(I((Q-mi[un])/($e[un].split(" ").length-1)))):lA.push(0),v.push([$e[un],Es,Ds])}}var Xp=typeof he.R2L=="boolean"?he.R2L:it;Xp===!0&&(v=Ca(v,function(Qr,Lr,dn){return[Qr.split("").reverse().join(""),Lr,dn]})),je={text:v,x:M,y:le,options:he,mutex:{pdfEscape:sn,activeFontKey:rt,fonts:Jt,activeFontSize:Pe}},$t.publish("postProcessText",je),v=je.text,Vt=je.mutex.isHex||!1;var Ah=Jt[rt].encoding;Ah!=="WinAnsiEncoding"&&Ah!=="StandardEncoding"||(v=Ca(v,function(Qr,Lr,dn){return[Ki(Qr),Lr,dn]})),$e=$n(v),v=[];for(var ql,Gl,uA,zl=0,du=1,$l=Array.isArray($e[0])?du:zl,dA="",lh=function(Qr,Lr,dn){var Nn="";return dn instanceof De?(dn=typeof he.angle=="number"?Et(dn,new De(1,0,0,1,Qr,Lr)):Et(new De(1,0,0,1,Qr,Lr),dn),N===w.ADVANCED&&(dn=Et(new De(1,0,0,-1,0,0),dn)),Nn=dn.join(" ")+` Tm
`):Nn=T(Qr)+" "+T(Lr)+` Td
`,Nn},wi=0;wi<$e.length;wi++){switch(dA="",$l){case du:uA=(Vt?"<":"(")+$e[wi][0]+(Vt?">":")"),ql=parseFloat($e[wi][1]),Gl=parseFloat($e[wi][2]);break;case zl:uA=(Vt?"<":"(")+$e[wi]+(Vt?">":")"),ql=Zs(M),Gl=_n(le)}lA!==void 0&&lA[wi]!==void 0&&(dA=lA[wi]+` Tw
`),wi===0?v.push(dA+lh(ql,Gl,Ne)+uA):$l===zl?v.push(dA+uA):$l===du&&v.push(dA+lh(ql,Gl,Ne)+uA)}v=$l===zl?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var vi=`BT
/`;return vi+=rt+" "+Pe+` Tf
`,vi+=T(Pe*wr)+` TL
`,vi+=Hi+`
`,vi+=tr,vi+=v,G(vi+="ET"),m[rt]=!0,We};var rh=g.__private__.clip=g.clip=function(v){return G(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return rh("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var pi=g.__private__.isValidStyle=function(v){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(M=!0),M};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return pi(v)&&(c=v),this};var tu=g.__private__.getStyle=g.getStyle=function(v){var M=c;switch(v){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=v}return M},Js=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(v){return Jo("f",v),this},g.fillEvenOdd=function(v){return Jo("f*",v),this},g.fillStroke=function(v){return Jo("B",v),this},g.fillStrokeEvenOdd=function(v){return Jo("B*",v),this};var Jo=function(v,M){Er(M)==="object"?Zo(M,v):G(v)},kl=function(v){v===null||N===w.ADVANCED&&v===void 0||(v=tu(v),G(v))};function Yo(v,M,le,he,we){var je=new pc(M||this.boundingBox,le||this.xStep,he||this.yStep,this.gState,we||this.matrix);je.stream=this.stream;var $e=v+"$$"+this.cloneIndex+++"$$";return ut($e,je),je}var Zo=function(v,M){var le=As[v.key],he=qt[le];if(he instanceof OA)G("q"),G(ru(M)),he.gState&&g.setGState(he.gState),G(v.matrix.toString()+" cm"),G("/"+le+" sh"),G("Q");else if(he instanceof pc){var we=new De(1,0,0,-1,0,cs());v.matrix&&(we=we.multiply(v.matrix||ft),le=Yo.call(he,v.key,v.boundingBox,v.xStep,v.yStep,we).id),G("q"),G("/Pattern cs"),G("/"+le+" scn"),he.gState&&g.setGState(he.gState),G(M),G("Q")}},ru=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Oi=g.moveTo=function(v,M){return G(T(I(v))+" "+T(Y(M))+" m"),this},Ys=g.lineTo=function(v,M){return G(T(I(v))+" "+T(Y(M))+" l"),this},Mi=g.curveTo=function(v,M,le,he,we,je){return G([T(I(v)),T(Y(M)),T(I(le)),T(Y(he)),T(I(we)),T(Y(je)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,M,le,he,we){if(isNaN(v)||isNaN(M)||isNaN(le)||isNaN(he)||!pi(we))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[le-v,he-M]],v,M,[1,1],we||"S"):this.lines([[le-v,he-M]],v,M,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,M,le,he,we,je){var $e,lt,h,E,Q,$,ge,Ne,We,Ht,tr,Vt;if(typeof v=="number"&&(Vt=le,le=M,M=v,v=Vt),he=he||[1,1],je=je||!1,isNaN(M)||isNaN(le)||!Array.isArray(v)||!Array.isArray(he)||!pi(we)||typeof je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Oi(M,le),$e=he[0],lt=he[1],E=v.length,Ht=M,tr=le,h=0;h<E;h++)(Q=v[h]).length===2?(Ht=Q[0]*$e+Ht,tr=Q[1]*lt+tr,Ys(Ht,tr)):($=Q[0]*$e+Ht,ge=Q[1]*lt+tr,Ne=Q[2]*$e+Ht,We=Q[3]*lt+tr,Ht=Q[4]*$e+Ht,tr=Q[5]*lt+tr,Mi($,ge,Ne,We,Ht,tr));return je&&Js(),kl(we),this},g.path=function(v){for(var M=0;M<v.length;M++){var le=v[M],he=le.c;switch(le.op){case"m":Oi(he[0],he[1]);break;case"l":Ys(he[0],he[1]);break;case"c":Mi.apply(this,he);break;case"h":Js()}}return this},g.__private__.rect=g.rect=function(v,M,le,he,we){if(isNaN(v)||isNaN(M)||isNaN(le)||isNaN(he)||!pi(we))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(he=-he),G([T(I(v)),T(Y(M)),T(I(le)),T(I(he)),"re"].join(" ")),kl(we),this},g.__private__.triangle=g.triangle=function(v,M,le,he,we,je,$e){if(isNaN(v)||isNaN(M)||isNaN(le)||isNaN(he)||isNaN(we)||isNaN(je)||!pi($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-v,he-M],[we-le,je-he],[v-we,M-je]],v,M,[1,1],$e,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,M,le,he,we,je,$e){if(isNaN(v)||isNaN(M)||isNaN(le)||isNaN(he)||isNaN(we)||isNaN(je)||!pi($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*le),je=Math.min(je,.5*he),this.lines([[le-2*we,0],[we*lt,0,we,je-je*lt,we,je],[0,he-2*je],[0,je*lt,-we*lt,je,-we,je],[2*we-le,0],[-we*lt,0,-we,-je*lt,-we,-je],[0,2*je-he],[0,-je*lt,we*lt,-je,we,-je]],v+we,M,[1,1],$e,!0),this},g.__private__.ellipse=g.ellipse=function(v,M,le,he,we){if(isNaN(v)||isNaN(M)||isNaN(le)||isNaN(he)||!pi(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var je=4/3*(Math.SQRT2-1)*le,$e=4/3*(Math.SQRT2-1)*he;return Oi(v+le,M),Mi(v+le,M-$e,v+je,M-he,v,M-he),Mi(v-je,M-he,v-le,M-$e,v-le,M),Mi(v-le,M+$e,v-je,M+he,v,M+he),Mi(v+je,M+he,v+le,M+$e,v+le,M),kl(we),this},g.__private__.circle=g.circle=function(v,M,le,he){if(isNaN(v)||isNaN(M)||isNaN(le)||!pi(he))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,M,le,le,he)},g.setFont=function(v,M,le){return le&&(M=O(M,le)),rt=Ja(v,M,{disableWarning:!1}),this};var Rl=g.__private__.getFont=g.getFont=function(){return Jt[Ja.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,M,le={};for(v in dr)if(dr.hasOwnProperty(v))for(M in le[v]=[],dr[v])dr[v].hasOwnProperty(M)&&le[v].push(M);return le},g.addFont=function(v,M,le,he,we){var je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&je.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&je.indexOf(arguments[3])==-1&&(le=O(le,he)),we=we||"Identity-H",Ql.call(this,v,M,le,we)};var gr,Dl=t.lineWidth||.200025,eA=g.__private__.getLineWidth=g.getLineWidth=function(){return Dl},Ol=g.__private__.setLineWidth=g.setLineWidth=function(v){return Dl=v,G(T(I(v))+" w"),this};g.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(v,M){if(v=v||[],M=M||0,isNaN(M)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(le){return T(I(le))}).join(" "),M=T(I(M)),G("["+v+"] "+M+" d"),this};var Ml=g.__private__.getLineHeight=g.getLineHeight=function(){return Pe*gr};g.__private__.getLineHeight=g.getLineHeight=function(){return Pe*gr};var Hl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(gr=v),this},Za=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return gr};Hl(t.lineHeight);var Zs=g.__private__.getHorizontalCoordinate=function(v){return I(v)},_n=g.__private__.getVerticalCoordinate=function(v){return N===w.ADVANCED?v:Ft[k].mediaBox.topRightY-Ft[k].mediaBox.bottomLeftY-I(v)},nu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return T(Zs(v))},xa=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return T(_n(v))},zn=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return jt(zn)},g.__private__.setStrokeColor=g.setDrawColor=function(v,M,le,he){return zn=Wt({ch1:v,ch2:M,ch3:le,ch4:he,pdfColorType:"draw",precision:2}),G(zn),this};var tA=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return jt(tA)},g.__private__.setFillColor=g.setFillColor=function(v,M,le,he){return tA=Wt({ch1:v,ch2:M,ch3:le,ch4:he,pdfColorType:"fill",precision:2}),G(tA),this};var Hi=t.textColor||"0 g",rA=g.__private__.getTextColor=g.getTextColor=function(){return jt(Hi)};g.__private__.setTextColor=g.setTextColor=function(v,M,le,he){return Hi=Wt({ch1:v,ch2:M,ch3:le,ch4:he,pdfColorType:"text",precision:3}),this};var eo=t.charSpace,nA=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(eo||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return eo=v,this};var Vl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var M=g.CapJoinStyles[v];if(M===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vl=M,G(M+" J"),this};var sA=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var M=g.CapJoinStyles[v];if(M===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sA=M,G(M+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(T(I(v))+" M"),this},g.GState=vp,g.setGState=function(v){(v=typeof v=="string"?ar[pr[v]]:ba(null,v)).equals(cn)||(G("/"+v.id+" gs"),cn=v)};var ba=function(v,M){if(!v||!pr[v]){var le=!1;for(var he in ar)if(ar.hasOwnProperty(he)&&ar[he].equals(M)){le=!0;break}if(le)M=ar[he];else{var we="GS"+(Object.keys(ar).length+1).toString(10);ar[we]=M,M.id=we}return v&&(pr[v]=M.id),$t.publish("addGState",M),M}};g.addGState=function(v,M){return ba(v,M),this},g.saveGraphicsState=function(){return G("q"),Gn.push({key:rt,size:Pe,color:Hi}),this},g.restoreGraphicsState=function(){G("Q");var v=Gn.pop();return rt=v.key,Pe=v.size,Hi=v.color,cn=null,this},g.setCurrentTransformationMatrix=function(v){return G(v.toString()+" cm"),this},g.comment=function(v){return G("#"+v),this};var to=function(v,M){var le=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(je){isNaN(je)||(le=parseFloat(je))}});var he=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return he},set:function(je){isNaN(je)||(he=parseFloat(je))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(je){we=je.toString()}}),this},iA=function(v,M,le,he){to.call(this,v,M),this.type="rect";var we=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function($e){isNaN($e)||(we=parseFloat($e))}});var je=he||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return je},set:function($e){isNaN($e)||(je=parseFloat($e))}}),this},ro=function(){this.page=mr,this.currentPage=k,this.pages=be.slice(0),this.pagesContext=Ft.slice(0),this.x=Ot,this.y=Pt,this.matrix=Pr,this.width=Ba(k),this.height=cs(k),this.outputDestination=Ve,this.id="",this.objectNumber=-1};ro.prototype.restore=function(){mr=this.page,k=this.currentPage,Ft=this.pagesContext,be=this.pages,Ot=this.x,Pt=this.y,Pr=this.matrix,oA(k,this.width),AA(k,this.height),Ve=this.outputDestination};var aA=function(v,M,le,he,we){Se.push(new ro),mr=k=0,be=[],Ot=v,Pt=M,Pr=we,Cs([le,he])},su=function(v){if(hr[v])Se.pop().restore();else{var M=new ro,le="Xo"+(Object.keys(qr).length+1).toString(10);M.id=le,hr[v]=le,qr[le]=M,$t.publish("addFormObject",M),Se.pop().restore()}};for(var Vi in g.beginFormObject=function(v,M,le,he,we){return aA(v,M,le,he,we),this},g.endFormObject=function(v){return su(v),this},g.doFormObject=function(v,M){var le=qr[hr[v]];return G("q"),G(M.toString()+" cm"),G("/"+le.id+" Do"),G("Q"),this},g.getFormObject=function(v){var M=qr[hr[v]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},g.save=function(v,M){return v=v||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(sc(Wo(Di()),v),typeof sc.unload=="function"&&kt.setTimeout&&setTimeout(sc.unload,911),this):new Promise(function(le,he){try{var we=sc(Wo(Di()),v);typeof sc.unload=="function"&&kt.setTimeout&&setTimeout(sc.unload,911),le(we)}catch(je){he(je.message)}})},Ut.API)Ut.API.hasOwnProperty(Vi)&&(Vi==="events"&&Ut.API.events.length?function(v,M){var le,he,we;for(we=M.length-1;we!==-1;we--)le=M[we][0],he=M[we][1],v.subscribe.apply(v,[le].concat(typeof he=="function"?[he]:he))}($t,Ut.API.events):g[Vi]=Ut.API[Vi]);var Ba=g.getPageWidth=function(v){return(Ft[v=v||k].mediaBox.topRightX-Ft[v].mediaBox.bottomLeftX)/Je},oA=g.setPageWidth=function(v,M){Ft[v].mediaBox.topRightX=M*Je+Ft[v].mediaBox.bottomLeftX},cs=g.getPageHeight=function(v){return(Ft[v=v||k].mediaBox.topRightY-Ft[v].mediaBox.bottomLeftY)/Je},AA=g.setPageHeight=function(v,M){Ft[v].mediaBox.topRightY=M*Je+Ft[v].mediaBox.bottomLeftY};return g.internal={pdfEscape:sn,getStyle:tu,getFont:Rl,getFontSize:Ge,getCharSpace:nA,getTextColor:rA,getLineHeight:Ml,getLineHeightFactor:Za,getLineWidth:eA,write:Re,getHorizontalCoordinate:Zs,getVerticalCoordinate:_n,getCoordinateString:nu,getVerticalCoordinateString:xa,collections:{},newObject:Nt,newAdditionalObject:ve,newObjectDeferred:at,newObjectDeferredBegin:Bt,getFilters:Ct,putStream:gt,events:$t,scaleFactor:Je,pageSize:{getWidth:function(){return Ba(k)},setWidth:function(v){oA(k,v)},getHeight:function(){return cs(k)},setHeight:function(v){AA(k,v)}},encryptionOptions:d,encryption:Or,getEncryptor:eu,output:Xo,getNumberOfPages:yr,pages:be,out:G,f2:D,f3:S,getPageInfo:jl,getPageInfoByObjId:Rt,getCurrentPageInfo:ya,getPDFVersion:C,Point:to,Rectangle:iA,Matrix:De,hasHotfix:va},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ba(k)},set:function(v){oA(k,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return cs(k)},set:function(v){AA(k,v)},enumerable:!0,configurable:!0}),Yc.call(g,Fe),rt="F1",Xa(s,r),$t.publish("initialized"),g}Ku.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ku.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ku.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ku.prototype.processOwnerPassword=function(t,e){return tx(ex(e).substr(0,5),t)},Ku.prototype.encryptor=function(t,e){var r=ex(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return tx(r,n)}},vp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Er(t)!==Er(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Ut.API={events:[]},Ut.version="3.0.1";var on=Ut.API,xB=1,zc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kt=function(t){return t.toFixed(2)},_A=function(t){return t.toFixed(5)};on.__acroform__={};var Xs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},AN=function(t){return t*xB},Sa=function(t){var e=new x3,r=xt.internal.getHeight(t)||0,n=xt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Kt(n)),Number(Kt(r))],e},Bz=on.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Cz=on.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Ez=on.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},gn=on.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ez(t,e-1)},wn=on.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bz(t,e-1)},vn=on.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Cz(t,e-1)},_z=on.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=r(s)||0,A.lowerLeft_Y=n(i+o)||0,A.upperRight_X=r(s+a)||0,A.upperRight_Y=n(i)||0,[Number(Kt(A.lowerLeft_X)),Number(Kt(A.lowerLeft_Y)),Number(Kt(A.upperRight_X)),Number(Kt(A.upperRight_Y))]},Nz=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=rx(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Kt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Sa(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},rx=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(S){return S.split(`
`)}):s.map(function(S){return[S]});var i=r,a=xt.internal.getHeight(t)||0;a=a<0?-a:a;var o=xt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(S,I,F){if(S+1<s.length){var Y=I+" "+s[S+1][0];return dg(Y,t,F).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,f=dg("3",t,i).height,m=t.multiline?a-i:(a-f)/2,g=m+=2,B=0,C=0,b=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+dg(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var R=!1;if(s[N].length!==1&&b!==s[N].length-1){if((f+2)*(w+2)+2>a)continue e;y+=s[N][b],R=!0,C=N,N--}else{y=(y+=s[N][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var V=parseInt(N),O=A(V,y,i),T=N>=s.length-1;if(O&&!T){y+=" ",b=0;continue}if(O||T){if(T)C=V;else if(t.multiline&&(f+2)*(w+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(w+2)+2>a)continue e;C=V}}for(var _="",L=B;L<=C;L++){var D=s[L];if(t.multiline){if(L===C){_+=D[b]+" ",b=(b+1)%D.length;continue}if(L===B){_+=D[D.length-1]+" ";continue}}_+=D[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=dg(_,t,i).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}e+=Kt(c)+" "+Kt(g)+` Td
`,e+="("+zc(_)+`) Tj
`,e+=-Kt(c)+` 0 Td
`,g=-(i+2),d=0,B=R?C:C+1,w++,y=""}break}return n.text=e,n.fontSize=i,n},dg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Iz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Sz=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Fz=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),Er(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Tz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(da.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Iz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new b3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Sz(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=_z(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=xt.createDefaultAppearanceStream(o),Er(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Nz(o);A.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var B=g[a];typeof B=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B+" ",s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B)}}else typeof(B=g)=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B,s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B);f+=">>"}A.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&Fz(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},y3=on.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Er(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+zc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qy=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+zc(n(t))+")"},La=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};La.prototype.toString=function(){return this.objId+" 0 R"},La.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},La.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:y3(s,this.objId,this.scope)}):s instanceof La?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var x3=function(){La.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Xs(x3,La);var b3=function(){La.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+zc(r(t))+")"}},set:function(r){t=r}})};Xs(b3,La);var da=function t(){La.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gn(e,3)},set:function(y){y?this.F=wn(e,3):this.F=vn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Z0)return;i="FieldObject"+t.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+zc(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(y){A=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/xB:c},set:function(y){c=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Z0||this instanceof ll))return qy(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Fn?m:qy(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Fn?y:y.substr(0,1)==="("?Fu(y.substr(1,y.length-2)):Fu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fn?Fu(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Fn?"/"+y:y}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Fn?g:qy(g,this.objId,this.scope)},set:function(y){y=y.toString(),g=this instanceof Fn?y:y.substr(0,1)==="("?Fu(y.substr(1,y.length-2)):Fu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fn?Fu(g.substr(1,g.length-1)):g},set:function(y){y=y.toString(),g=this instanceof Fn?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var B,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(y){y=!!y,C=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(B)return B},set:function(y){B=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,1)},set:function(y){y?this.Ff=wn(this.Ff,1):this.Ff=vn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,2)},set:function(y){y?this.Ff=wn(this.Ff,2):this.Ff=vn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,3)},set:function(y){y?this.Ff=wn(this.Ff,3):this.Ff=vn(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Xs(da,La);var xc=function(){da.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return y3(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,18)},set:function(r){r?this.Ff=wn(this.Ff,18):this.Ff=vn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=wn(this.Ff,19):this.Ff=vn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,20)},set:function(r){r?(this.Ff=wn(this.Ff,20),e.sort()):this.Ff=vn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,22)},set:function(r){r?this.Ff=wn(this.Ff,22):this.Ff=vn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(r){r?this.Ff=wn(this.Ff,23):this.Ff=vn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,27)},set:function(r){r?this.Ff=wn(this.Ff,27):this.Ff=vn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xs(xc,da);var bc=function(){xc.call(this),this.fontName="helvetica",this.combo=!1};Xs(bc,xc);var Bc=function(){bc.call(this),this.combo=!0};Xs(Bc,bc);var Sf=function(){Bc.call(this),this.edit=!0};Xs(Sf,Bc);var Fn=function(){da.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,15)},set:function(r){r?this.Ff=wn(this.Ff,15):this.Ff=vn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,16)},set:function(r){r?this.Ff=wn(this.Ff,16):this.Ff=vn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,17)},set:function(r){r?this.Ff=wn(this.Ff,17):this.Ff=vn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(r){r?this.Ff=wn(this.Ff,26):this.Ff=vn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+zc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Er(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Xs(Fn,da);var Ff=function(){Fn.call(this),this.pushButton=!0};Xs(Ff,Fn);var Cc=function(){Fn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xs(Cc,Fn);var Z0=function(){var t,e;da.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+zc(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Er(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xs(Z0,da),Cc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Cc.prototype.createOption=function(t){var e=new Z0;return e.Parent=this,e.optionName=t,this.Kids.push(e),Uz.call(this.scope,e),e};var Tf=function(){Fn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};Xs(Tf,Fn);var ll=function(){da.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,13)},set:function(e){e?this.Ff=wn(this.Ff,13):this.Ff=vn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,21)},set:function(e){e?this.Ff=wn(this.Ff,21):this.Ff=vn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,23)},set:function(e){e?this.Ff=wn(this.Ff,23):this.Ff=vn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,24)},set:function(e){e?this.Ff=wn(this.Ff,24):this.Ff=vn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,25)},set:function(e){e?this.Ff=wn(this.Ff,25):this.Ff=vn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,26)},set:function(e){e?this.Ff=wn(this.Ff,26):this.Ff=vn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xs(ll,da);var Uf=function(){ll.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gn(this.Ff,14)},set:function(t){t?this.Ff=wn(this.Ff,14):this.Ff=vn(this.Ff,14)}}),this.password=!0};Xs(Uf,ll);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=rx(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Kt(xt.internal.getWidth(t))+" "+Kt(xt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Kt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Sa(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=xt.internal.getHeight(t),a=xt.internal.getWidth(t),o=rx(t,t.caption);return s.push("1 g"),s.push("0 0 "+Kt(a)+" "+Kt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Kt(a-1)+" "+Kt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Kt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Kt(xt.internal.getWidth(t))+" "+Kt(xt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Circle.YesNormal,e.D[t]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Sa(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=xt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+_A(xt.internal.getWidth(t)/2)+" "+_A(xt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*xt.internal.Bezier_C).toFixed(5)),a=Number((n*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_A(xt.internal.getWidth(t)/2)+" "+_A(xt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+_A(xt.internal.getWidth(t)/2)+" "+_A(xt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=[],n=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_A(xt.internal.getWidth(t)/2)+" "+_A(xt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Cross.YesNormal,e.D[t]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Sa(t);e.scope=t.scope;var r=[],n=xt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Kt(xt.internal.getWidth(t)-2)+" "+Kt(xt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Kt(n.x1.x)+" "+Kt(n.x1.y)+" m"),r.push(Kt(n.x2.x)+" "+Kt(n.x2.y)+" l"),r.push(Kt(n.x4.x)+" "+Kt(n.x4.y)+" m"),r.push(Kt(n.x3.x)+" "+Kt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=xt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Kt(xt.internal.getWidth(t))+" "+Kt(xt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Kt(xt.internal.getWidth(t)-2)+" "+Kt(xt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Kt(r.x1.x)+" "+Kt(r.x1.y)+" m"),n.push(Kt(r.x2.x)+" "+Kt(r.x2.y)+" l"),n.push(Kt(r.x4.x)+" "+Kt(r.x4.y)+" m"),n.push(Kt(r.x3.x)+" "+Kt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Sa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Kt(xt.internal.getWidth(t))+" "+Kt(xt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};xt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=xt.internal.getWidth(t),r=xt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},xt.internal.getWidth=function(t){var e=0;return Er(t)==="object"&&(e=AN(t.Rect[2])),e},xt.internal.getHeight=function(t){var e=0;return Er(t)==="object"&&(e=AN(t.Rect[3])),e};var Uz=on.addField=function(t){if(Tz(this,t),!(t instanceof da))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};on.AcroFormChoiceField=xc,on.AcroFormListBox=bc,on.AcroFormComboBox=Bc,on.AcroFormEditBox=Sf,on.AcroFormButton=Fn,on.AcroFormPushButton=Ff,on.AcroFormRadioButton=Cc,on.AcroFormCheckBox=Tf,on.AcroFormTextField=ll,on.AcroFormPasswordField=Uf,on.AcroFormAppearance=xt,on.AcroForm={ChoiceField:xc,ListBox:bc,ComboBox:Bc,EditBox:Sf,Button:Fn,PushButton:Ff,RadioButton:Cc,CheckBox:Tf,TextField:ll,PasswordField:Uf,Appearance:xt},Ut.AcroForm={ChoiceField:xc,ListBox:bc,ComboBox:Bc,EditBox:Sf,Button:Fn,PushButton:Ff,RadioButton:Cc,CheckBox:Tf,TextField:ll,PasswordField:Uf,Appearance:xt};var Pz=Ut.AcroForm;function B3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(S,I){var F,Y,ue,ne,se,z=e;if((I=I||e)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(O(S))for(se in r)for(ue=r[se],F=0;F<ue.length;F+=1){for(ne=!0,Y=0;Y<ue[F].length;Y+=1)if(ue[F][Y]!==void 0&&ue[F][Y]!==S[Y]){ne=!1;break}if(ne===!0){z=se;break}}else for(se in r)for(ue=r[se],F=0;F<ue.length;F+=1){for(ne=!0,Y=0;Y<ue[F].length;Y+=1)if(ue[F][Y]!==void 0&&ue[F][Y]!==S.charCodeAt(Y)){ne=!1;break}if(ne===!0){z=se;break}}return z===e&&I!==e&&(z=I),z},s=function S(I){for(var F=this.internal.write,Y=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:I.width}),ne.push({key:"Height",value:I.height}),I.colorSpace===b.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===b.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var se="",z=0,ce=I.transparency.length;z<ce;z++)se+=I.transparency[z]+" "+I.transparency[z]+" ";ne.push({key:"Mask",value:"["+se+"]"})}I.sMask!==void 0&&ne.push({key:"SMask",value:I.objectId+1+" 0 R"});var ae=I.filter!==void 0?["/"+I.filter]:void 0;if(Y({data:I.data,additionalKeyValues:ne,alreadyAppliedFilters:ae,objectId:I.objectId}),F("endobj"),"sMask"in I&&I.sMask!==void 0){var Ce="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,P={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:Ce,data:I.sMask};"filter"in I&&(P.filter=I.filter),S.call(this,P)}if(I.colorSpace===b.INDEXED){var k=this.internal.newObject();Y({data:_(new Uint8Array(I.palette)),objectId:k}),F("endobj")}},i=function(){var S=this.internal.collections.addImage_images;for(var I in S)s.call(this,S[I])},a=function(){var S,I=this.internal.collections.addImage_images,F=this.internal.write;for(var Y in I)F("/I"+(S=I[Y]).index,S.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},A=function(){var S=this.internal.collections.addImage_images;return o.call(this),S},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(S){return typeof t["process"+S.toUpperCase()]=="function"},f=function(S){return Er(S)==="object"&&S.nodeType===1},m=function(S,I){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var F=""+S.getAttribute("src");if(F.indexOf("data:image/")===0)return If(unescape(F).split("base64,").pop());var Y=t.loadFile(F,!0);if(Y!==void 0)return Y}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ue;switch(I){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;case"JPEG":case"JPG":default:ue="image/jpeg"}return If(S.toDataURL(ue,1).split("base64,").pop())}},g=function(S){var I=this.internal.collections.addImage_images;if(I){for(var F in I)if(S===I[F].alias)return I[F]}},B=function(S,I,F){return S||I||(S=-96,I=-96),S<0&&(S=-1*F.width*72/S/this.internal.scaleFactor),I<0&&(I=-1*F.height*72/I/this.internal.scaleFactor),S===0&&(S=I*F.width/F.height),I===0&&(I=S*F.height/F.width),[S,I]},C=function(S,I,F,Y,ue,ne){var se=B.call(this,F,Y,ue),z=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,ae=A.call(this);if(F=se[0],Y=se[1],ae[ue.index]=ue,ne){ne*=Math.PI/180;var Ce=Math.cos(ne),P=Math.sin(ne),k=function(re){return re.toFixed(4)},W=[k(Ce),k(P),k(-1*P),k(Ce),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,z(S),ce(I+Y),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([z(F),"0","0",z(Y),"0","0","cm"].join(" "))):this.internal.write([z(F),"0","0",z(Y),z(S),ce(I+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(S){var I,F,Y=0;if(typeof S=="string")for(F=S.length,I=0;I<F;I++)Y=(Y<<5)-Y+S.charCodeAt(I),Y|=0;else if(O(S))for(F=S.byteLength/2,I=0;I<F;I++)Y=(Y<<5)-Y+S[I],Y|=0;return Y},N=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var I=!0;return S.length===0&&(I=!1),S.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(I=!1),I},R=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var I=S.indexOf(",");return I<0?null:S.substring(0,I).trim().endsWith("base64")?S.substring(I+1):null},V=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(S){return V()&&S instanceof ArrayBuffer};var O=t.__addimage__.isArrayBufferView=function(S){return V()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(S){for(var I=S.length,F=new Uint8Array(I),Y=0;Y<I;Y++)F[Y]=S.charCodeAt(Y);return F},_=t.__addimage__.arrayBufferToBinaryString=function(S){for(var I="",F=O(S)?S:new Uint8Array(S),Y=0;Y<F.length;Y+=8192)I+=String.fromCharCode.apply(null,F.subarray(Y,Y+8192));return I};t.addImage=function(){var S,I,F,Y,ue,ne,se,z,ce;if(typeof arguments[1]=="number"?(I=e,F=arguments[1],Y=arguments[2],ue=arguments[3],ne=arguments[4],se=arguments[5],z=arguments[6],ce=arguments[7]):(I=arguments[1],F=arguments[2],Y=arguments[3],ue=arguments[4],ne=arguments[5],se=arguments[6],z=arguments[7],ce=arguments[8]),Er(S=arguments[0])==="object"&&!f(S)&&"imageData"in S){var ae=S;S=ae.imageData,I=ae.format||I||e,F=ae.x||F||0,Y=ae.y||Y||0,ue=ae.w||ae.width||ue,ne=ae.h||ae.height||ne,se=ae.alias||se,z=ae.compression||z,ce=ae.rotation||ae.angle||ce}var Ce=this.internal.getFilters();if(z===void 0&&Ce.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(F)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=L.call(this,S,I,se,z);return C.call(this,F,Y,ue,ne,P,ce),this};var L=function(S,I,F,Y){var ue,ne,se;if(typeof S=="string"&&n(S)===e){S=unescape(S);var z=D(S,!1);(z!==""||(z=t.loadFile(S,!0))!==void 0)&&(S=z)}if(f(S)&&(S=m(S,I)),I=n(S,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((se=F)==null||se.length===0)&&(F=function(ce){return typeof ce=="string"||O(ce)?w(ce):O(ce.data)?w(ce.data):null}(S)),(ue=g.call(this,F))||(V()&&(S instanceof Uint8Array||I==="RGBA"||(ne=S,S=T(S))),ue=this["process"+I.toUpperCase()](S,c.call(this),F,function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in t.image_compression?ce:y.NONE}(Y),ne)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},D=t.__addimage__.convertBase64ToBinaryString=function(S,I){I=typeof I!="boolean"||I;var F,Y="";if(typeof S=="string"){var ue;F=(ue=R(S))!==null&&ue!==void 0?ue:S;try{Y=If(F)}catch(ne){if(I)throw N(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(S){var I,F,Y="";if(f(S)&&(S=m(S)),typeof S=="string"&&n(S)===e&&((Y=D(S,!1))===""&&(Y=t.loadFile(S)||""),S=Y),F=n(S),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!V()||S instanceof Uint8Array||(S=T(S)),!(I=this["process"+F.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=F,I}})(Ut.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Ut.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,f=0;f<c.length&&!d;f++)switch((n=c[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){n=c[m];var g=this.internal.pdfEscape,B=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(C.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(y(n.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+g(y(w))+") >>",C.content=i;var N=C.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(C.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var R=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(B(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var V=this.annotations._nameMap[n.options.name];n.options.pageNumber=V.page,n.options.top=V.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(B(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var O=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+O+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(r),y:c(n),w:A(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,A=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;a=Math.ceil(c*d)}else o=A,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=A/2),i.align==="right"&&(n-=A),this.link(n,s-c,o,a,i),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ut.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},o=t.__arabicParser__.isArabicEndLetter=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(C){return a(C)&&s.indexOf(C.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(C){return a(C)&&i(C)&&e[C.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(C){var b=0,y=r,w="",N=0;for(b=0;b<C.length;b+=1)y[C.charCodeAt(b)]!==void 0?(N++,typeof(y=y[C.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(y),y=r,N=0),b===C.length-1&&(y=r,w+=C.charAt(b-(N-1)),b-=N-1,N=0)):(y=r,w+=C.charAt(b-N),b-=N,N=0);return w};t.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&n[C.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(C,b,y){return a(C)?i(C)===!1?-1:!c(C)||!a(b)&&!a(y)||!a(y)&&o(b)||o(C)&&!a(b)||o(C)&&A(b)||o(C)&&o(b)?0:d(C)&&a(b)&&!o(b)&&a(y)&&c(y)?3:o(C)||!a(y)?1:2:-1},g=function(C){var b=0,y=0,w=0,N="",R="",V="",O=(C=C||"").split("\\s+"),T=[];for(b=0;b<O.length;b+=1){for(T.push(""),y=0;y<O[b].length;y+=1)N=O[b][y],R=O[b][y-1],V=O[b][y+1],a(N)?(w=m(N,R,V),T[b]+=w!==-1?String.fromCharCode(e[N.charCodeAt(0)][w]):N):T[b]+=N;T[b]=f(T[b])}return T.join(" ")},B=t.__arabicParser__.processArabic=t.processArabic=function(){var C,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var w=0;for(y=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?y.push([g(b[w][0]),b[w][1],b[w][2]]):y.push([g(b[w])]);C=y}else C=g(b);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};t.events.push(["preProcessText",B])}(Ut.API),Ut.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ut.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(C){A=C}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(C){c=C}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(C){d=C}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(C){m=C}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(C){g=C}});var B=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return B},set:function(C){B=C}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,g=0,B=0,C=0,b=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var y=c.maxWidth;y>0?typeof A=="string"?A=this.splitTextToSize(A,y):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(N,R){return N.concat(b.splitTextToSize(R,y))},[])):A=Array.isArray(A)?A:[A];for(var w=0;w<A.length;w++)g<(C=this.getStringUnitWidth(A[w],{font:f})*d)&&(g=C);return g!==0&&(B=A.length),{w:g/=m,h:Math.max((B*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=f.top,g&&m&&(this.printHeaderRow(A.lineNumber,!0),A.y+=m[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-d,A.y+d,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+d,{align:"center",baseline:"top",maxWidth:A.width-d-d}):this.text(A.text,A.x+d,A.y+d,{align:"left",baseline:"top",maxWidth:A.width-d-d})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,d,f,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,B,C,b,y=[],w=[],N=[],R={},V={},O=[],T=[],_=(m=m||{}).autoSize||!1,L=m.printHeaders!==!1,D=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,S=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,F=m.headerBackgroundColor||"#c8c8c8",Y=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=Y,this.setFontSize(D),f==null)w=y=Object.keys(d[0]),N=y.map(function(){return"left"});else if(Array.isArray(f)&&Er(f[0])==="object")for(y=f.map(function(ae){return ae.name}),w=f.map(function(ae){return ae.prompt||ae.name||""}),N=f.map(function(ae){return ae.align||"left"}),g=0;g<f.length;g+=1)V[f[g].name]=f[g].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,N=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(g=0;g<y.length;g+=1){for(R[b=y[g]]=d.map(function(ae){return ae[b]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(w[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),B=R[b],this.setFont(void 0,"normal"),C=0;C<B.length;C+=1)O.push(this.getTextDimensions(B[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[b]=Math.max.apply(null,O)+I+I,O=[]}if(L){var ue={};for(g=0;g<y.length;g+=1)ue[y[g]]={},ue[y[g]].text=w[g],ue[y[g]].align=N[g];var ne=o.call(this,ue,V);T=y.map(function(ae){return new i(A,c,V[ae],ne,ue[ae].text,void 0,ue[ae].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var se=f.reduce(function(ae,Ce){return ae[Ce.name]=Ce.align,ae},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var z=o.call(this,d[g],V);for(C=0;C<y.length;C+=1){var ce=d[g][y[C]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:C,data:ce},this),a.call(this,new i(A,c,V[y[C]],z,ce,g+2,se[y[C]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(A).map(function(g){var B=A[g];return this.splitTextToSize(B.hasOwnProperty("text")?B.text:B,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*f/m+d+d},this).reduce(function(g,B){return Math.max(g,B)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=A;var B=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(B)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Ut.API);var C3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},E3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nx=B3(E3),_3=[100,200,300,400,500,600,700,800,900],Qz=B3(_3);function sx(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return C3[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof nx[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function lN(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Lz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function uN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jz(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Lz,r.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=sx(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+uN(i)+"' and default family '"+n+"'.");if(a=function(A,c){if(c[A])return c[A];var d=nx[A],f=d<=nx.normal?-1:1,m=lN(c,E3,d,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+A);return m}(i.stretch,a),a=function(A,c){if(c[A])return c[A];for(var d=C3[A],f=0;f<d.length;++f)if(c[d[f]])return c[d[f]];throw new Error("Could not find a matching font-style for "+A)}(i.style,a),!(a=function(A,c){if(c[A])return c[A];if(A===400&&c[500])return c[500];if(A===500&&c[400])return c[400];var d=Qz[A],f=lN(c,_3,d,A<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+A);return f}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+uN(i)+"'.");return a}function dN(t){return t.trimLeft()}function kz(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Rz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var hg,hN,fN,Gy=["times"];(function(t){var e,r,n,s,i,a,o,A,c,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new A,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new d}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var k=P;Object.defineProperty(this,"pdf",{get:function(){return k}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Ae){W=!!Ae}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Ae){re=!!Ae}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Ae){isNaN(Ae)||(oe=Ae)}});var Z=0;Object.defineProperty(this,"posY",{get:function(){return Z},set:function(Ae){isNaN(Ae)||(Z=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ae){var G;typeof Ae=="number"?G=[Ae,Ae,Ae,Ae]:((G=new Array(4))[0]=Ae[0],G[1]=Ae.length>=2?Ae[1]:G[0],G[2]=Ae.length>=3?Ae[2]:G[0],G[3]=Ae.length>=4?Ae[3]:G[1]),c.margin=G}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(Ae){ee=Ae}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(Ae){de=Ae}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Ae){xe=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ae){Ae instanceof d&&(c=Ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ae){c.path=Ae}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Ae){be=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var G;G=m(Ae),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var G=m(Ae);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var Te=null;function Ve(Ae,G){if(Te===null){var Re=function(Le){var Fe=[];return Object.keys(Le).forEach(function(Pe){Le[Pe].forEach(function(Xe){var Ge=null;switch(Xe){case"bold":Ge={family:Pe,weight:"bold"};break;case"italic":Ge={family:Pe,style:"italic"};break;case"bolditalic":Ge={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:Pe}}Ge!==null&&(Ge.ref={name:Pe,style:Xe},Fe.push(Ge))})}),Fe}(Ae.getFontList());Te=function(Le){for(var Fe={},Pe=0;Pe<Le.length;++Pe){var Xe=sx(Le[Pe]),Ge=Xe.family,it=Xe.stretch,Be=Xe.style,Ke=Xe.weight;Fe[Ge]=Fe[Ge]||{},Fe[Ge][it]=Fe[Ge][it]||{},Fe[Ge][it][Be]=Fe[Ge][it][Be]||{},Fe[Ge][it][Be][Ke]=Xe}return Fe}(Re.concat(G))}return Te}var te=null;Object.defineProperty(this,"fontFaces",{get:function(){return te},set:function(Ae){Te=null,te=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var G;if(this.ctx.font=Ae,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var Re=G[1];G[2];var Le=G[3],Fe=G[4];G[5];var Pe=G[6],Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Xe==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var Ge=function(ot){var rt,Je,Ot=[],Pt=ot.trim();if(Pt==="")return Gy;if(Pt in cN)return[cN[Pt]];for(;Pt!=="";){switch(Je=null,rt=(Pt=dN(Pt)).charAt(0)){case'"':case"'":Je=kz(Pt.substring(1),rt);break;default:Je=Rz(Pt)}if(Je===null||(Ot.push(Je[0]),(Pt=dN(Je[1]))!==""&&Pt.charAt(0)!==","))return Gy;Pt=Pt.replace(/^,/,"")}return Ot}(Pe);if(this.fontFaces){var it=jz(Ve(this.pdf,this.fontFaces),Ge.map(function(ot){return{family:ot,stretch:"normal",weight:Le,style:Re}}));this.pdf.setFont(it.ref.name,it.ref.style)}else{var Be="";(Le==="bold"||parseInt(Le,10)>=700||Re==="bold")&&(Be="bold"),Re==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var Ke="",ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tt=0;tt<Ge.length;tt++){if(this.pdf.internal.getFont(Ge[tt],Be,{noFallback:!0,disableWarning:!0})!==void 0){Ke=Ge[tt];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(Ge[tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=Ge[tt],Be="bold";else if(this.pdf.internal.getFont(Ge[tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=Ge[tt],Be="normal";break}}if(Ke===""){for(var pt=0;pt<Ge.length;pt++)if(ze[Ge[pt]]){Ke=ze[Ge[pt]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){R.call(this,"fill",!1)},f.prototype.stroke=function(){R.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,k){if(isNaN(P)||isNaN(k))throw Ur.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(P,k)},f.prototype.closePath=function(){var P=new a(0,0),k=0;for(k=this.path.length-1;k!==-1;k--)if(this.path[k].type==="begin"&&Er(this.path[k+1])==="object"&&typeof this.path[k+1].x=="number"){P=new a(this.path[k+1].x,this.path[k+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},f.prototype.lineTo=function(P,k){if(isNaN(P)||isNaN(k))throw Ur.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(W.x,W.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,k,W,re){if(isNaN(W)||isNaN(re)||isNaN(P)||isNaN(k))throw Ur.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new a(W,re)),Z=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"qct",x1:Z.x,y1:Z.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new a(oe.x,oe.y)},f.prototype.bezierCurveTo=function(P,k,W,re,oe,Z){if(isNaN(oe)||isNaN(Z)||isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re))throw Ur.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new a(oe,Z)),de=this.ctx.transform.applyToPoint(new a(P,k)),xe=this.ctx.transform.applyToPoint(new a(W,re));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:xe.x,y2:xe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(ee.x,ee.y)},f.prototype.arc=function(P,k,W,re,oe,Z){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re)||isNaN(oe))throw Ur.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Z=!!Z,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new a(P,k));P=ee.x,k=ee.y;var de=this.ctx.transform.applyToPoint(new a(0,W)),xe=this.ctx.transform.applyToPoint(new a(0,0));W=Math.sqrt(Math.pow(de.x-xe.x,2)+Math.pow(de.y-xe.y,2))}Math.abs(oe-re)>=2*Math.PI&&(re=0,oe=2*Math.PI),this.path.push({type:"arc",x:P,y:k,radius:W,startAngle:re,endAngle:oe,counterclockwise:Z})},f.prototype.arcTo=function(P,k,W,re,oe){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,k,W,re){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re))throw Ur.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,k),this.lineTo(P+W,k),this.lineTo(P+W,k+re),this.lineTo(P,k+re),this.lineTo(P,k),this.lineTo(P+W,k),this.lineTo(P,k)},f.prototype.fillRect=function(P,k,W,re){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re))throw Ur.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,k,W,re),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},f.prototype.strokeRect=function(P,k,W,re){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re))throw Ur.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");B.call(this)||(this.beginPath(),this.rect(P,k,W,re),this.stroke())},f.prototype.clearRect=function(P,k,W,re){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re))throw Ur.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,k,W,re))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(k),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(k),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var k,W,re,oe;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))k=0,W=0,re=0,oe=0;else{var Z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Z!==null)k=parseInt(Z[1]),W=parseInt(Z[2]),re=parseInt(Z[3]),oe=1;else if((Z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)k=parseInt(Z[1]),W=parseInt(Z[2]),re=parseInt(Z[3]),oe=parseFloat(Z[4]);else{if(oe=1,typeof P=="string"&&P.charAt(0)!=="#"){var ee=new g3(P);P=ee.ok?ee.toHex():"#000000"}P.length===4?(k=P.substring(1,2),k+=k,W=P.substring(2,3),W+=W,re=P.substring(3,4),re+=re):(k=P.substring(1,3),W=P.substring(3,5),re=P.substring(5,7)),k=parseInt(k,16),W=parseInt(W,16),re=parseInt(re,16)}}return{r:k,g:W,b:re,a:oe,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},B=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,k,W,re){if(isNaN(k)||isNaN(W)||typeof P!="string")throw Ur.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var oe=z(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;I.call(this,{text:P,x:k,y:W,scale:Z,angle:oe,align:this.textAlign,maxWidth:re})}},f.prototype.strokeText=function(P,k,W,re){if(isNaN(k)||isNaN(W)||typeof P!="string")throw Ur.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!B.call(this)){re=isNaN(re)?void 0:re;var oe=z(this.ctx.transform.rotation),Z=this.ctx.transform.scaleX;I.call(this,{text:P,x:k,y:W,scale:Z,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:re})}},f.prototype.measureText=function(P){if(typeof P!="string")throw Ur.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var k=this.pdf,W=this.pdf.internal.scaleFactor,re=k.internal.getFontSize(),oe=k.getStringUnitWidth(P)*re/k.internal.scaleFactor,Z=function(ee){var de=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new Z({width:oe*=Math.round(96*W/72*1e4)/1e4})},f.prototype.scale=function(P,k){if(isNaN(P)||isNaN(k))throw Ur.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new A(P,0,0,k,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.rotate=function(P){if(isNaN(P))throw Ur.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var k=new A(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(k)},f.prototype.translate=function(P,k){if(isNaN(P)||isNaN(k))throw Ur.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new A(1,0,0,1,P,k);this.ctx.transform=this.ctx.transform.multiply(W)},f.prototype.transform=function(P,k,W,re,oe,Z){if(isNaN(P)||isNaN(k)||isNaN(W)||isNaN(re)||isNaN(oe)||isNaN(Z))throw Ur.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new A(P,k,W,re,oe,Z);this.ctx.transform=this.ctx.transform.multiply(ee)},f.prototype.setTransform=function(P,k,W,re,oe,Z){P=isNaN(P)?1:P,k=isNaN(k)?0:k,W=isNaN(W)?0:W,re=isNaN(re)?1:re,oe=isNaN(oe)?0:oe,Z=isNaN(Z)?0:Z,this.ctx.transform=new A(P,k,W,re,oe,Z)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,k,W,re,oe,Z,ee,de,xe){var be=this.pdf.getImageProperties(P),Te=1,Ve=1,te=1,Ae=1;re!==void 0&&de!==void 0&&(te=de/re,Ae=xe/oe,Te=be.width/re*de/re,Ve=be.height/oe*xe/oe),Z===void 0&&(Z=k,ee=W,k=0,W=0),re!==void 0&&de===void 0&&(de=re,xe=oe),re===void 0&&de===void 0&&(de=be.width,xe=be.height);for(var G,Re=this.ctx.transform.decompose(),Le=z(Re.rotate.shx),Fe=new A,Pe=(Fe=(Fe=(Fe=Fe.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new o(Z-k*te,ee-W*Ae,re*Te,oe*Ve)),Xe=b.call(this,Pe),Ge=[],it=0;it<Xe.length;it+=1)Ge.indexOf(Xe[it])===-1&&Ge.push(Xe[it]);if(N(Ge),this.autoPaging)for(var Be=Ge[0],Ke=Ge[Ge.length-1],ze=Be;ze<Ke+1;ze++){this.pdf.setPage(ze);var tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=ze===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=ze===1?0:ot+(ze-2)*rt;if(this.ctx.clip_path.length!==0){var Ot=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(G,this.posX+this.margin[3],-Je+pt+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=Ot}var Pt=JSON.parse(JSON.stringify(Pe));Pt=w([Pt],this.posX+this.margin[3],-Je+pt+this.ctx.prevPageLastElemOffset)[0];var Pr=(ze>Be||ze<Ke)&&C.call(this);Pr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,rt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Le),Pr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Le)};var b=function(P,k,W){var re=[];k=k||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":re.push(Math.floor((P.y+oe)/W)+1);break;case"arc":re.push(Math.floor((P.y+oe-P.radius)/W)+1),re.push(Math.floor((P.y+oe+P.radius)/W)+1);break;case"qct":var Z=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);re.push(Math.floor((Z.y+oe)/W)+1),re.push(Math.floor((Z.y+Z.h+oe)/W)+1);break;case"bct":var ee=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);re.push(Math.floor((ee.y+oe)/W)+1),re.push(Math.floor((ee.y+ee.h+oe)/W)+1);break;case"rect":re.push(Math.floor((P.y+oe)/W)+1),re.push(Math.floor((P.y+P.h+oe)/W)+1)}for(var de=0;de<re.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<re[de];)y.call(this);return re},y=function(){var P=this.fillStyle,k=this.strokeStyle,W=this.font,re=this.lineCap,oe=this.lineWidth,Z=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=k,this.font=W,this.lineCap=re,this.lineWidth=oe,this.lineJoin=Z},w=function(P,k,W){for(var re=0;re<P.length;re++)switch(P[re].type){case"bct":P[re].x2+=k,P[re].y2+=W;case"qct":P[re].x1+=k,P[re].y1+=W;case"mt":case"lt":case"arc":default:P[re].x+=k,P[re].y+=W}return P},N=function(P){return P.sort(function(k,W){return k-W})},R=function(P,k){for(var W,re,oe=this.fillStyle,Z=this.strokeStyle,ee=this.lineCap,de=this.lineWidth,xe=Math.abs(de*this.ctx.transform.scaleX),be=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),te=[],Ae=0;Ae<Ve.length;Ae++)if(Ve[Ae].x!==void 0)for(var G=b.call(this,Ve[Ae]),Re=0;Re<G.length;Re+=1)te.indexOf(G[Re])===-1&&te.push(G[Re]);for(var Le=0;Le<te.length;Le++)for(;this.pdf.internal.getNumberOfPages()<te[Le];)y.call(this);if(N(te),this.autoPaging)for(var Fe=te[0],Pe=te[te.length-1],Xe=Fe;Xe<Pe+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=oe,this.strokeStyle=Z,this.lineCap=ee,this.lineWidth=xe,this.lineJoin=be;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Xe===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Xe===1?0:Be+(Xe-2)*Ke;if(this.ctx.clip_path.length!==0){var tt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(W,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),V.call(this,P,!0),this.path=tt}if(re=JSON.parse(JSON.stringify(Te)),this.path=w(re,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),k===!1||Xe===0){var pt=(Xe>Fe||Xe<Pe)&&C.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,Ke,null).clip().discardPath()),V.call(this,P,k),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=xe,V.call(this,P,k),this.lineWidth=de;this.path=Te},V=function(P,k){if((P!=="stroke"||k||!B.call(this))&&(P==="stroke"||k||!g.call(this))){for(var W,re,oe=[],Z=this.path,ee=0;ee<Z.length;ee++){var de=Z[ee];switch(de.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:de,deltas:[],abs:[]});break;case"lt":var xe=oe.length;if(Z[ee-1]&&!isNaN(Z[ee-1].x)&&(W=[de.x-Z[ee-1].x,de.y-Z[ee-1].y],xe>0)){for(;xe>=0;xe--)if(oe[xe-1].close!==!0&&oe[xe-1].begin!==!0){oe[xe-1].deltas.push(W),oe[xe-1].abs.push(de);break}}break;case"bct":W=[de.x1-Z[ee-1].x,de.y1-Z[ee-1].y,de.x2-Z[ee-1].x,de.y2-Z[ee-1].y,de.x-Z[ee-1].x,de.y-Z[ee-1].y],oe[oe.length-1].deltas.push(W);break;case"qct":var be=Z[ee-1].x+2/3*(de.x1-Z[ee-1].x),Te=Z[ee-1].y+2/3*(de.y1-Z[ee-1].y),Ve=de.x+2/3*(de.x1-de.x),te=de.y+2/3*(de.y1-de.y),Ae=de.x,G=de.y;W=[be-Z[ee-1].x,Te-Z[ee-1].y,Ve-Z[ee-1].x,te-Z[ee-1].y,Ae-Z[ee-1].x,G-Z[ee-1].y],oe[oe.length-1].deltas.push(W);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(de)}}re=k?null:P==="stroke"?"stroke":"fill";for(var Re=!1,Le=0;Le<oe.length;Le++)if(oe[Le].arc)for(var Fe=oe[Le].abs,Pe=0;Pe<Fe.length;Pe++){var Xe=Fe[Pe];Xe.type==="arc"?_.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,k,!Re):F.call(this,Xe.x,Xe.y),Re=!0}else if(oe[Le].close===!0)this.pdf.internal.out("h"),Re=!1;else if(oe[Le].begin!==!0){var Ge=oe[Le].start.x,it=oe[Le].start.y;Y.call(this,oe[Le].deltas,Ge,it),Re=!0}re&&L.call(this,re),k&&D.call(this)}},O=function(P){var k=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=k*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-W;case"top":return P+k-W;case"hanging":return P+k-2*W;case"middle":return P+k/2-W;case"ideographic":return P;case"alphabetic":default:return P}},T=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(k,W){this.colorStops.push([k,W])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(P,k,W,re,oe,Z,ee,de,xe){for(var be=ne.call(this,W,re,oe,Z),Te=0;Te<be.length;Te++){var Ve=be[Te];Te===0&&(xe?S.call(this,Ve.x1+P,Ve.y1+k):F.call(this,Ve.x1+P,Ve.y1+k)),ue.call(this,P,k,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}de?D.call(this):L.call(this,ee)},L=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(P,k){this.pdf.internal.out(r(P)+" "+n(k)+" m")},I=function(P){var k;switch(P.align){case"right":case"end":k="right";break;case"center":k="center";break;case"left":case"start":default:k="left"}var W=this.pdf.getTextDimensions(P.text),re=O.call(this,P.y),oe=T.call(this,re)-W.h,Z=this.ctx.transform.applyToPoint(new a(P.x,re)),ee=this.ctx.transform.decompose(),de=new A;de=(de=(de=de.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var xe,be,Te,Ve=this.ctx.transform.applyToRectangle(new o(P.x,re,W.w,W.h)),te=de.applyToRectangle(new o(P.x,oe,W.w,W.h)),Ae=b.call(this,te),G=[],Re=0;Re<Ae.length;Re+=1)G.indexOf(Ae[Re])===-1&&G.push(Ae[Re]);if(N(G),this.autoPaging)for(var Le=G[0],Fe=G[G.length-1],Pe=Le;Pe<Fe+1;Pe++){this.pdf.setPage(Pe);var Xe=Pe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[2],Be=it-this.margin[0],Ke=this.pdf.internal.pageSize.width-this.margin[1],ze=Ke-this.margin[3],tt=Pe===1?0:Ge+(Pe-2)*Be;if(this.ctx.clip_path.length!==0){var pt=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(xe,this.posX+this.margin[3],-1*tt+Xe),V.call(this,"fill",!0),this.path=pt}var ot=w([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-tt+Xe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale);var rt=this.autoPaging!=="text";if(rt||ot.y+ot.h<=it){if(rt||ot.y>=Xe&&ot.x<=Ke){var Je=rt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Ke-ot.x)[0],Ot=w([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-tt+Xe+this.ctx.prevPageLastElemOffset)[0],Pt=rt&&(Pe>Le||Pe<Fe)&&C.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Be,null).clip().discardPath()),this.pdf.text(Je,Ot.x,Ot.y,{angle:P.angle,align:k,renderingMode:P.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else ot.y<it&&(this.ctx.prevPageLastElemOffset+=it-ot.y);P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)}else P.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale),this.pdf.text(P.text,Z.x+this.posX,Z.y+this.posY,{angle:P.angle,align:k,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)},F=function(P,k,W,re){W=W||0,re=re||0,this.pdf.internal.out(r(P+W)+" "+n(k+re)+" l")},Y=function(P,k,W){return this.pdf.lines(P,k,W,null,null)},ue=function(P,k,W,re,oe,Z,ee,de){this.pdf.internal.out([e(s(W+P)),e(i(re+k)),e(s(oe+P)),e(i(Z+k)),e(s(ee+P)),e(i(de+k)),"c"].join(" "))},ne=function(P,k,W,re){for(var oe=2*Math.PI,Z=Math.PI/2;k>W;)k-=oe;var ee=Math.abs(W-k);ee<oe&&re&&(ee=oe-ee);for(var de=[],xe=re?-1:1,be=k;ee>1e-5;){var Te=be+xe*Math.min(ee,Z);de.push(se.call(this,P,be,Te)),ee-=Math.abs(Te-be),be=Te}return de},se=function(P,k,W){var re=(W-k)/2,oe=P*Math.cos(re),Z=P*Math.sin(re),ee=oe,de=-Z,xe=ee*ee+de*de,be=xe+ee*oe+de*Z,Te=4/3*(Math.sqrt(2*xe*be)-be)/(ee*Z-de*oe),Ve=ee-Te*de,te=de+Te*ee,Ae=Ve,G=-te,Re=re+k,Le=Math.cos(Re),Fe=Math.sin(Re);return{x1:P*Math.cos(k),y1:P*Math.sin(k),x2:Ve*Le-te*Fe,y2:Ve*Fe+te*Le,x3:Ae*Le-G*Fe,y3:Ae*Fe+G*Le,x4:P*Math.cos(W),y4:P*Math.sin(W)}},z=function(P){return 180*P/Math.PI},ce=function(P,k,W,re,oe,Z){var ee=P+.5*(W-P),de=k+.5*(re-k),xe=oe+.5*(W-oe),be=Z+.5*(re-Z),Te=Math.min(P,oe,ee,xe),Ve=Math.max(P,oe,ee,xe),te=Math.min(k,Z,de,be),Ae=Math.max(k,Z,de,be);return new o(Te,te,Ve-Te,Ae-te)},ae=function(P,k,W,re,oe,Z,ee,de){var xe,be,Te,Ve,te,Ae,G,Re,Le,Fe,Pe,Xe,Ge,it,Be=W-P,Ke=re-k,ze=oe-W,tt=Z-re,pt=ee-oe,ot=de-Z;for(be=0;be<41;be++)Le=(G=(Te=P+(xe=be/40)*Be)+xe*((te=W+xe*ze)-Te))+xe*(te+xe*(oe+xe*pt-te)-G),Fe=(Re=(Ve=k+xe*Ke)+xe*((Ae=re+xe*tt)-Ve))+xe*(Ae+xe*(Z+xe*ot-Ae)-Re),be==0?(Pe=Le,Xe=Fe,Ge=Le,it=Fe):(Pe=Math.min(Pe,Le),Xe=Math.min(Xe,Fe),Ge=Math.max(Ge,Le),it=Math.max(it,Fe));return new o(Math.round(Pe),Math.round(Xe),Math.round(Ge-Pe),Math.round(it-Xe))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,k,W=(P=this.ctx.lineDash,k=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:k}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Ut.API),function(t){var e=function(i){var a,o,A,c,d,f,m,g,B,C;for(o=[],A=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>A;A+=4)(d=(i.charCodeAt(A)<<24)+(i.charCodeAt(A+1)<<16)+(i.charCodeAt(A+2)<<8)+i.charCodeAt(A+3))!==0?(f=(d=((d=((d=((d=(d-(C=d%85))/85)-(B=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(f+33,m+33,g+33,B+33,C+33)):o.push(122);return function(b,y){for(var w=y;w>0;w--)b.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var a,o,A,c,d,f=String,m="length",g=255,B="charCodeAt",C="slice",b="replace";for(i[C](-2),i=i[C](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),A=[],c=0,d=(i+=a="uuuuu"[C](i[m]%5||5))[m];d>c;c+=5)o=52200625*(i[B](c)-33)+614125*(i[B](c+1)-33)+7225*(i[B](c+2)-33)+85*(i[B](c+3)-33)+(i[B](c+4)-33),A.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(y,w){for(var N=w;N>0;N--)y.pop()}(A,a[m]),f.fromCharCode.apply(f,A)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",A=0;A<i.length;A+=2)o+=String.fromCharCode("0x"+(i[A]+i[A+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=Y2(a)).reduce(function(A,c){return A+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,A=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":A=r(A),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=n(A),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=s(A),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:A,reverseChain:c.reverse().join(" ")}}}(Ut.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,d){var f=new XMLHttpRequest,m=0,g=function(B){var C=B.length,b=[],y=String.fromCharCode;for(m=0;m<C;m+=1)b.push(y(255&B.charCodeAt(m)));return b.join("")};if(f.open("GET",A,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?d(g(this.responseText)):d(void 0)}),f.send(null),c&&f.status===200)return g(f.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(Ut.API),function(t){function e(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):Po(()=>Promise.resolve().then(()=>wB),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):Po(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=Er(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var A=document.createElement(a);for(var c in o.className&&(A.className=o.className),o.innerHTML&&o.dompurify&&(A.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)A.style[c]=o.style[c];return A},i=function a(o){var A=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),A);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(A){switch(n(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(A){return this.set({src:s("div",{innerHTML:a,dompurify:A})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function A(c,d){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(A(m,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,o(this.prop.container,A)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var g=c[m],B=g.src.find(function(C){return C.format==="truetype"});B&&A.addFont(B.url,g.ref.name,g.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,A.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(A){if(A in i.template.prop)return function(){this.prop[A]=a[A]};switch(A){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[A]=a[A]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var A=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(A):A})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(A,c){return Math.floor(A*c/72*96)}return this.then(function(){(a=a||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,A,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),A!=null&&(this.progress.n=A),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,A,c){return this.setProgress(a?this.progress.val+a:null,o||null,A?this.progress.n+A:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var A=this;return this.thenCore(a,o,function(c,d){return A.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return A.updateProgress(null,c),f}).then(c,d).then(function(f){return A.updateProgress(1),f})})},i.prototype.thenCore=function(a,o,A){A=A||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=A.call(c,a,o);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(A){o=o.thenCore(A)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ut.getPageSize=function(a,o,A){if(Er(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,A=c.format||A}o=o||"mm",A=A||"a4",a=(""+(a||"P")).toLowerCase();var d,f=(""+A).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,B=0,C=0;if(m.hasOwnProperty(f))B=m[f][1]/d,C=m[f][0]/d;else try{B=A[1],C=A[0]}catch{throw new Error("Invalid format: "+A)}if(a==="p"||a==="portrait")a="p",C>B&&(g=C,C=B,B=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",B>C&&(g=C,C=B,B=g)}return{width:C,height:B,unit:o,k:d,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(sx):null;var A=new i(o);return o.worker?A:A.from(a).doCallback()}}(Ut.API),Ut.API.addJS=function(t){return fN=t,this.internal.events.subscribe("postPutResources",function(){hg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hg!==void 0&&hN!==void 0&&this.internal.out("/Names <</JavaScript "+hg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var A=o[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var f=r.internal.newObject();d.push(f);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Ut.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var A,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(A=function(f){for(var m,g=256*f.charCodeAt(4)+f.charCodeAt(5),B=f.length,C={width:0,height:0,numcomponents:1},b=4;b<B;b+=2){if(b+=g,e.indexOf(f.charCodeAt(b+1))!==-1){m=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),C={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:m,numcomponents:f.charCodeAt(b+9)};break}g=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return C}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return d}}(Ut.API);var Tu,fg,pN,mN,gN,Dz=function(){var t,e,r;function n(i){var a,o,A,c,d,f,m,g,B,C,b,y,w,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),B=(function(){var R,V;for(V=[],R=0;R<4;++R)V.push(String.fromCharCode(this.data[this.pos++]));return V}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*d/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(B==="fdAT"&&(this.pos+=4,a-=4),i=(f!=null?f.data:void 0)||this.imgData,y=0;0<=a?y<a:y>a;0<=a?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((C=A-this.transparency.indexed.length)>0)for(w=0;0<=C?w<C:w>C;0<=C?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(b=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,b.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,b.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),A=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,m,g,B){var C,b,y,w,N,R,V,O,T,_,L,D,S,I,F,Y,ue,ne,se,z,ce,ae=Math.ceil((c.width-f)/g),Ce=Math.ceil((c.height-m)/B),P=c.width==ae&&c.height==Ce;for(I=a*ae,D=P?o:new Uint8Array(I*Ce),R=i.length,S=0,b=0;S<Ce&&A<R;){switch(i[A++]){case 0:for(w=ue=0;ue<I;w=ue+=1)D[b++]=i[A++];break;case 1:for(w=ne=0;ne<I;w=ne+=1)C=i[A++],N=w<a?0:D[b-a],D[b++]=(C+N)%256;break;case 2:for(w=se=0;se<I;w=se+=1)C=i[A++],y=(w-w%a)/a,F=S&&D[(S-1)*I+y*a+w%a],D[b++]=(F+C)%256;break;case 3:for(w=z=0;z<I;w=z+=1)C=i[A++],y=(w-w%a)/a,N=w<a?0:D[b-a],F=S&&D[(S-1)*I+y*a+w%a],D[b++]=(C+Math.floor((N+F)/2))%256;break;case 4:for(w=ce=0;ce<I;w=ce+=1)C=i[A++],y=(w-w%a)/a,N=w<a?0:D[b-a],S===0?F=Y=0:(F=D[(S-1)*I+y*a+w%a],Y=y&&D[(S-1)*I+(y-1)*a+w%a]),V=N+F-Y,O=Math.abs(V-N),_=Math.abs(V-F),L=Math.abs(V-Y),T=O<=_&&O<=L?N:_<=L?F:Y,D[b++]=(C+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[A-1])}if(!P){var k=((m+S*B)*c.width+f)*a,W=S*I;for(w=0;w<ae;w+=1){for(var re=0;re<a;re+=1)o[k++]=D[W++];k+=(g-1)*a}}S++}}return i=mz(i),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var i,a,o,A,c,d,f,m,g;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),A=0,i=0,a=f=0,m=o.length;f<m;a=f+=3)c[A++]=o[a],c[A++]=o[a+1],c[A++]=o[a+2],c[A++]=(g=d[i++])!=null?g:255;return c},n.prototype.copyToImageData=function(i,a){var o,A,c,d,f,m,g,B,C,b,y;if(A=this.colors,C=null,o=this.hasAlphaChannel,this.palette.length&&(C=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),A=4,o=!0),B=(c=i.data||i).length,f=C||a,d=m=0,A===1)for(;d<B;)g=C?4*a[d/4]:m,b=f[g++],c[d++]=b,c[d++]=b,c[d++]=b,c[d++]=o?f[g++]:255,m=g;else for(;d<B;)g=C?4*a[d/4]:m,c[d++]=f[g++],c[d++]=f[g++],c[d++]=f[g++],c[d++]=o?f[g++]:255,m=g},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{e=kt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,o,A,c,d,f,m,g;if(this.animation){for(g=[],o=d=0,f=(m=this.animation.frames).length;d<f;o=++d)a=m[o],A=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(A,c),a.imageData=A,g.push(a.image=t(A));return g}},n.prototype.renderFrame=function(i,a){var o,A,c;return o=(A=this.animation.frames)[a],c=A[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var a,o,A,c,d,f,m=this;return o=0,f=this.animation,c=f.numFrames,A=f.frames,d=f.numPlays,(a=function(){var g,B;if(g=o++%c,B=A[g],m.renderFrame(i,g),c>1&&o/c<d)return m.animation._timeout=setTimeout(a,B.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Oz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,d=[],f=0,m=null,g=0,B=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,B=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=t[e++];f=t[e++]|t[e++]<<8,m=t[e++],!(1&C)&&(m=null),g=C>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,R=t[e++],V=R>>6&1,O=1<<(7&R)+1,T=o,_=A,L=!1;R>>7&&(L=!0,T=e,_=O,e+=3*O);var D=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}d.push({x:b,y,width:w,height:N,has_local_palette:L,palette_offset:T,palette_size:_,data_offset:D,data_length:e-D,transparent_index:m,interlaced:!!V,delay:f,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return B},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,F){var Y=this.frameInfo(I),ue=Y.width*Y.height,ne=new Uint8Array(ue);wN(t,Y.data_offset,ne,ue);var se=Y.palette_offset,z=Y.transparent_index;z===null&&(z=256);var ce=Y.width,ae=r-ce,Ce=ce,P=4*(Y.y*r+Y.x),k=4*((Y.y+Y.height)*r+Y.x),W=P,re=4*ae;Y.interlaced===!0&&(re+=4*r*7);for(var oe=8,Z=0,ee=ne.length;Z<ee;++Z){var de=ne[Z];if(Ce===0&&(Ce=ce,(W+=re)>=k&&(re=4*ae+4*r*(oe-1),W=P+(ce+ae)*(oe<<1),oe>>=1)),de===z)W+=4;else{var xe=t[se+3*de],be=t[se+3*de+1],Te=t[se+3*de+2];F[W++]=Te,F[W++]=be,F[W++]=xe,F[W++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function(I,F){var Y=this.frameInfo(I),ue=Y.width*Y.height,ne=new Uint8Array(ue);wN(t,Y.data_offset,ne,ue);var se=Y.palette_offset,z=Y.transparent_index;z===null&&(z=256);var ce=Y.width,ae=r-ce,Ce=ce,P=4*(Y.y*r+Y.x),k=4*((Y.y+Y.height)*r+Y.x),W=P,re=4*ae;Y.interlaced===!0&&(re+=4*r*7);for(var oe=8,Z=0,ee=ne.length;Z<ee;++Z){var de=ne[Z];if(Ce===0&&(Ce=ce,(W+=re)>=k&&(re=4*ae+4*r*(oe-1),W=P+(ce+ae)*(oe<<1),oe>>=1)),de===z)W+=4;else{var xe=t[se+3*de],be=t[se+3*de+1],Te=t[se+3*de+2];F[W++]=xe,F[W++]=be,F[W++]=Te,F[W++]=255}--Ce}}}function wN(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,d=0,f=0,m=0,g=t[e++],B=new Int32Array(4096),C=null;;){for(;d<16&&g!==0;)f|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<A)break;var b=f&c;if(f>>=A,d-=A,b!==i){if(b===a)break;for(var y=b<o?b:C,w=0,N=y;N>i;)N=B[N]>>8,++w;var R=N;if(m+w+(y!==b?1:0)>n)return void Ur.log("Warning, gif stream longer than expected.");r[m++]=R;var V=m+=w;for(y!==b&&(r[m++]=R),N=y;w--;)N=B[N],r[--V]=255&N,N>>=8;C!==null&&o<4096&&(B[o++]=C<<8|R,o>=c+1&&A<12&&(++A,c=c<<1|1)),C=b}else o=a+1,c=(1<<(A=s+1))-1,C=null}return m!==n&&Ur.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zy(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),d=new Array(64),f=new Array(65535),m=new Array(65535),g=new Array(64),B=new Array(64),C=[],b=0,y=7,w=new Array(64),N=new Array(64),R=new Array(64),V=new Array(256),O=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(P,k){for(var W=0,re=0,oe=new Array,Z=1;Z<=16;Z++){for(var ee=1;ee<=P[Z];ee++)oe[k[re]]=[],oe[k[re]][0]=W,oe[k[re]][1]=Z,re++,W++;W*=2}return oe}function se(P){for(var k=P[0],W=P[1]-1;W>=0;)k&1<<W&&(b|=1<<y),W--,--y<0&&(b==255?(z(255),z(0)):z(b),y=7,b=0)}function z(P){C.push(P)}function ce(P){z(P>>8&255),z(255&P)}function ae(P,k,W,re,oe){for(var Z,ee=oe[0],de=oe[240],xe=function(Fe,Pe){var Xe,Ge,it,Be,Ke,ze,tt,pt,ot,rt,Je=0;for(ot=0;ot<8;++ot){Xe=Fe[Je],Ge=Fe[Je+1],it=Fe[Je+2],Be=Fe[Je+3],Ke=Fe[Je+4],ze=Fe[Je+5],tt=Fe[Je+6];var Ot=Xe+(pt=Fe[Je+7]),Pt=Xe-pt,Pr=Ge+tt,Jt=Ge-tt,dr=it+ze,Gn=it-ze,qt=Be+Ke,As=Be-Ke,ar=Ot+qt,pr=Ot-qt,cn=Pr+dr,mr=Pr-dr;Fe[Je]=ar+cn,Fe[Je+4]=ar-cn;var Ft=.707106781*(mr+pr);Fe[Je+2]=pr+Ft,Fe[Je+6]=pr-Ft;var $t=.382683433*((ar=As+Gn)-(mr=Jt+Pt)),ls=.5411961*ar+$t,qr=1.306562965*mr+$t,hr=.707106781*(cn=Gn+Jt),Se=Pt+hr,De=Pt-hr;Fe[Je+5]=De+ls,Fe[Je+3]=De-ls,Fe[Je+1]=Se+qr,Fe[Je+7]=Se-qr,Je+=8}for(Je=0,ot=0;ot<8;++ot){Xe=Fe[Je],Ge=Fe[Je+8],it=Fe[Je+16],Be=Fe[Je+24],Ke=Fe[Je+32],ze=Fe[Je+40],tt=Fe[Je+48];var Et=Xe+(pt=Fe[Je+56]),ft=Xe-pt,ut=Ge+tt,Nt=Ge-tt,at=it+ze,Bt=it-ze,ve=Be+Ke,et=Be-Ke,nt=Et+ve,jt=Et-ve,Wt=ut+at,Ct=ut-at;Fe[Je]=nt+Wt,Fe[Je+32]=nt-Wt;var gt=.707106781*(Ct+jt);Fe[Je+16]=jt+gt,Fe[Je+48]=jt-gt;var Bs=.382683433*((nt=et+Bt)-(Ct=Nt+ft)),fa=.5411961*nt+Bs,pa=1.306562965*Ct+Bs,ma=.707106781*(Wt=Bt+Nt),Ga=ft+ma,za=ft-ma;Fe[Je+40]=za+fa,Fe[Je+24]=za-fa,Fe[Je+8]=Ga+pa,Fe[Je+56]=Ga-pa,Je++}for(ot=0;ot<64;++ot)rt=Fe[ot]*Pe[ot],g[ot]=rt>0?rt+.5|0:rt-.5|0;return g}(P,k),be=0;be<64;++be)B[T[be]]=xe[be];var Te=B[0]-W;W=B[0],Te==0?se(re[0]):(se(re[m[Z=32767+Te]]),se(f[Z]));for(var Ve=63;Ve>0&&B[Ve]==0;)Ve--;if(Ve==0)return se(ee),W;for(var te,Ae=1;Ae<=Ve;){for(var G=Ae;B[Ae]==0&&Ae<=Ve;)++Ae;var Re=Ae-G;if(Re>=16){te=Re>>4;for(var Le=1;Le<=te;++Le)se(de);Re&=15}Z=32767+B[Ae],se(oe[(Re<<4)+m[Z]]),se(f[Z]),Ae++}return Ve!=63&&se(ee),W}function Ce(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(k){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var oe=a((W[re]*k+50)/100);oe=Math.min(Math.max(oe,1),255),o[T[re]]=oe}for(var Z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var de=a((Z[ee]*k+50)/100);de=Math.min(Math.max(de,1),255),A[T[ee]]=de}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Te=0;Te<8;Te++)for(var Ve=0;Ve<8;Ve++)c[be]=1/(o[T[be]]*xe[Te]*xe[Ve]*8),d[be]=1/(A[T[be]]*xe[Te]*xe[Ve]*8),be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,k){k&&Ce(k),C=new Array,b=0,y=7,ce(65496),ce(65504),ce(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),ce(1),ce(1),z(0),z(0),function(){ce(65499),ce(132),z(0);for(var Ge=0;Ge<64;Ge++)z(o[Ge]);z(1);for(var it=0;it<64;it++)z(A[it])}(),function(Ge,it){ce(65472),ce(17),z(8),ce(it),ce(Ge),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(P.width,P.height),function(){ce(65476),ce(418),z(0);for(var Ge=0;Ge<16;Ge++)z(_[Ge+1]);for(var it=0;it<=11;it++)z(L[it]);z(16);for(var Be=0;Be<16;Be++)z(D[Be+1]);for(var Ke=0;Ke<=161;Ke++)z(S[Ke]);z(1);for(var ze=0;ze<16;ze++)z(I[ze+1]);for(var tt=0;tt<=11;tt++)z(F[tt]);z(17);for(var pt=0;pt<16;pt++)z(Y[pt+1]);for(var ot=0;ot<=161;ot++)z(ue[ot])}(),ce(65498),ce(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var W=0,re=0,oe=0;b=0,y=7,this.encode.displayName="_encode_";for(var Z,ee,de,xe,be,Te,Ve,te,Ae,G=P.data,Re=P.width,Le=P.height,Fe=4*Re,Pe=0;Pe<Le;){for(Z=0;Z<Fe;){for(be=Fe*Pe+Z,Ve=-1,te=0,Ae=0;Ae<64;Ae++)Te=be+(te=Ae>>3)*Fe+(Ve=4*(7&Ae)),Pe+te>=Le&&(Te-=Fe*(Pe+1+te-Le)),Z+Ve>=Fe&&(Te-=Z+Ve-Fe+4),ee=G[Te++],de=G[Te++],xe=G[Te++],w[Ae]=(O[ee]+O[de+256>>0]+O[xe+512>>0]>>16)-128,N[Ae]=(O[ee+768>>0]+O[de+1024>>0]+O[xe+1280>>0]>>16)-128,R[Ae]=(O[ee+1280>>0]+O[de+1536>>0]+O[xe+1792>>0]>>16)-128;W=ae(w,c,W,e,n),re=ae(N,d,re,r,s),oe=ae(R,d,oe,r,s),Z+=32}Pe+=8}if(y>=0){var Xe=[];Xe[1]=y+1,Xe[0]=(1<<y+1)-1,se(Xe)}return ce(65497),new Uint8Array(C)},t=t||50,function(){for(var P=String.fromCharCode,k=0;k<256;k++)V[k]=P(k)}(),e=ne(_,L),r=ne(I,F),n=ne(D,S),s=ne(Y,ue),function(){for(var P=1,k=2,W=1;W<=15;W++){for(var re=P;re<k;re++)m[32767+re]=W,f[32767+re]=[],f[32767+re][1]=W,f[32767+re][0]=re;for(var oe=-(k-1);oe<=-P;oe++)m[32767+oe]=W,f[32767+oe]=[],f[32767+oe][1]=W,f[32767+oe][0]=k-1+oe;P<<=1,k<<=1}}(),function(){for(var P=0;P<256;P++)O[P]=19595*P,O[P+256>>0]=38470*P,O[P+512>>0]=7471*P+32768,O[P+768>>0]=-11059*P,O[P+1024>>0]=-21709*P,O[P+1280>>0]=32768*P+8421375,O[P+1536>>0]=-27439*P,O[P+1792>>0]=-5329*P}(),Ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function vN(t){function e(_){if(!_)throw Error("assert :P")}function r(_,L,D){for(var S=0;4>S;S++)if(_[L+S]!=D.charCodeAt(S))return!0;return!1}function n(_,L,D,S,I){for(var F=0;F<I;F++)_[L+F]=D[S+F]}function s(_,L,D,S){for(var I=0;I<S;I++)_[L+I]=D}function i(_){return new Int32Array(_)}function a(_,L){for(var D=[],S=0;S<_;S++)D.push(new L);return D}function o(_,L){var D=[];return function S(I,F,Y){for(var ue=Y[F],ne=0;ne<ue&&(I.push(Y.length>F+1?[]:new L),!(Y.length<F+1));ne++)S(I[ne],F+1,Y)}(D,0,_),D}var A=function(){var _=this;function L(u,p){for(var x=1<<p-1>>>0;u&x;)x>>>=1;return x?(u&x-1)+x:u}function D(u,p,x,U,H){e(!(U%x));do u[p+(U-=x)]=H;while(0<U)}function S(u,p,x,U,H){if(e(2328>=H),512>=H)var K=i(512);else if((K=i(H))==null)return 0;return function(q,X,J,ie,fe,Ee){var _e,ye,He=X,Qe=1<<J,pe=i(16),me=i(16);for(e(fe!=0),e(ie!=null),e(q!=null),e(0<J),ye=0;ye<fe;++ye){if(15<ie[ye])return 0;++pe[ie[ye]]}if(pe[0]==fe)return 0;for(me[1]=0,_e=1;15>_e;++_e){if(pe[_e]>1<<_e)return 0;me[_e+1]=me[_e]+pe[_e]}for(ye=0;ye<fe;++ye)_e=ie[ye],0<ie[ye]&&(Ee[me[_e]++]=ye);if(me[15]==1)return(ie=new I).g=0,ie.value=Ee[0],D(q,He,1,Qe,ie),Qe;var Oe,qe=-1,Me=Qe-1,wt=0,At=1,Qt=1,dt=1<<J;for(ye=0,_e=1,fe=2;_e<=J;++_e,fe<<=1){if(At+=Qt<<=1,0>(Qt-=pe[_e]))return 0;for(;0<pe[_e];--pe[_e])(ie=new I).g=_e,ie.value=Ee[ye++],D(q,He+wt,fe,dt,ie),wt=L(wt,_e)}for(_e=J+1,fe=2;15>=_e;++_e,fe<<=1){if(At+=Qt<<=1,0>(Qt-=pe[_e]))return 0;for(;0<pe[_e];--pe[_e]){if(ie=new I,(wt&Me)!=qe){for(He+=dt,Oe=1<<(qe=_e)-J;15>qe&&!(0>=(Oe-=pe[qe]));)++qe,Oe<<=1;Qe+=dt=1<<(Oe=qe-J),q[X+(qe=wt&Me)].g=Oe+J,q[X+qe].value=He-X-qe}ie.g=_e-J,ie.value=Ee[ye++],D(q,He+(wt>>J),fe,dt,ie),wt=L(wt,_e)}}return At!=2*me[15]-1?0:Qe}(u,p,x,U,H,K)}function I(){this.value=this.g=0}function F(){this.value=this.g=0}function Y(){this.G=a(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Wn,F)}function ue(u,p,x,U){e(u!=null),e(p!=null),e(2147483648>U),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=p,u.pa=x,u.Jd=p,u.Yc=x+U,u.Zc=4<=U?x+U-4+1:x,Z(u)}function ne(u,p){for(var x=0;0<p--;)x|=de(u,128)<<p;return x}function se(u,p){var x=ne(u,p);return ee(u)?-x:x}function z(u,p,x,U){var H,K=0;for(e(u!=null),e(p!=null),e(4294967288>U),u.Sb=U,u.Ra=0,u.u=0,u.h=0,4<U&&(U=4),H=0;H<U;++H)K+=p[x+H]<<8*H;u.Ra=K,u.bb=U,u.oa=p,u.pa=x}function ce(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Au-8>>>0,++u.bb,u.u-=8;W(u)&&(u.h=1,u.u=0)}function ae(u,p){if(e(0<=p),!u.h&&p<=ou){var x=k(u)&au[p];return u.u+=p,ce(u),x}return u.h=1,u.u=0}function Ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function k(u){return u.Ra>>>(u.u&Au-1)>>>0}function W(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Au}function re(u,p){u.u=p,u.h=W(u)}function oe(u){u.u>=ih&&(e(u.u>=ih),ce(u))}function Z(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ee(u){return ne(u,1)}function de(u,p){var x=u.Ca;0>u.b&&Z(u);var U=u.b,H=x*p>>>8,K=(u.I>>>U>H)+0;for(K?(x-=H,u.I-=H+1<<U>>>0):x=H+1,U=x,H=0;256<=U;)H+=8,U>>=8;return U=7^H+Rs[U],u.b-=U,u.Ca=(x<<U)-1,K}function xe(u,p,x){u[p+0]=x>>24&255,u[p+1]=x>>16&255,u[p+2]=x>>8&255,u[p+3]=x>>0&255}function be(u,p){return u[p+0]<<0|u[p+1]<<8}function Te(u,p){return be(u,p)|u[p+2]<<16}function Ve(u,p){return be(u,p)|be(u,p+2)<<16}function te(u,p){var x=1<<p;return e(u!=null),e(0<p),u.X=i(x),u.X==null?0:(u.Mb=32-p,u.Xa=p,1)}function Ae(u,p){e(u!=null),e(p!=null),e(u.Xa==p.Xa),n(p.X,0,u.X,0,1<<p.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Re(u,p,x,U){e(x!=null),e(U!=null);var H=x[0],K=U[0];return H==0&&(H=(u*K+p/2)/p),K==0&&(K=(p*H+u/2)/u),0>=H||0>=K?0:(x[0]=H,U[0]=K,1)}function Le(u,p){return u+(1<<p)-1>>>p}function Fe(u,p){return((4278255360&u)+(4278255360&p)>>>0&4278255360)+((16711935&u)+(16711935&p)>>>0&16711935)>>>0}function Pe(u,p){_[p]=function(x,U,H,K,q,X,J){var ie;for(ie=0;ie<q;++ie){var fe=_[u](X[J+ie-1],H,K+ie);X[J+ie]=Fe(x[U+ie],fe)}}}function Xe(){this.ud=this.hd=this.jd=0}function Ge(u,p){return((4278124286&(u^p))>>>1)+(u&p)>>>0}function it(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Be(u,p){return it(u+(u-p+.5>>1))}function Ke(u,p,x){return Math.abs(p-x)-Math.abs(u-x)}function ze(u,p,x,U,H,K,q){for(U=K[q-1],x=0;x<H;++x)K[q+x]=U=Fe(u[p+x],U)}function tt(u,p,x,U,H){var K;for(K=0;K<x;++K){var q=u[p+K],X=q>>8&255,J=16711935&(J=(J=16711935&q)+((X<<16)+X));U[H+K]=(4278255360&q)+J>>>0}}function pt(u,p){p.jd=u>>0&255,p.hd=u>>8&255,p.ud=u>>16&255}function ot(u,p,x,U,H,K){var q;for(q=0;q<U;++q){var X=p[x+q],J=X>>>8,ie=X,fe=255&(fe=(fe=X>>>16)+((u.jd<<24>>24)*(J<<24>>24)>>>5));ie=255&(ie=(ie=ie+((u.hd<<24>>24)*(J<<24>>24)>>>5))+((u.ud<<24>>24)*(fe<<24>>24)>>>5)),H[K+q]=(4278255360&X)+(fe<<16)+ie}}function rt(u,p,x,U,H){_[p]=function(K,q,X,J,ie,fe,Ee,_e,ye){for(J=Ee;J<_e;++J)for(Ee=0;Ee<ye;++Ee)ie[fe++]=H(X[U(K[q++])])},_[u]=function(K,q,X,J,ie,fe,Ee){var _e=8>>K.b,ye=K.Ea,He=K.K[0],Qe=K.w;if(8>_e)for(K=(1<<K.b)-1,Qe=(1<<_e)-1;q<X;++q){var pe,me=0;for(pe=0;pe<ye;++pe)pe&K||(me=U(J[ie++])),fe[Ee++]=H(He[me&Qe]),me>>=_e}else _["VP8LMapColor"+x](J,ie,He,Qe,fe,Ee,q,X,ye)}}function Je(u,p,x,U,H){for(x=p+x;p<x;){var K=u[p++];U[H++]=K>>16&255,U[H++]=K>>8&255,U[H++]=K>>0&255}}function Ot(u,p,x,U,H){for(x=p+x;p<x;){var K=u[p++];U[H++]=K>>16&255,U[H++]=K>>8&255,U[H++]=K>>0&255,U[H++]=K>>24&255}}function Pt(u,p,x,U,H){for(x=p+x;p<x;){var K=(q=u[p++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;U[H++]=K,U[H++]=q}}function Pr(u,p,x,U,H){for(x=p+x;p<x;){var K=(q=u[p++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;U[H++]=K,U[H++]=q}}function Jt(u,p,x,U,H){for(x=p+x;p<x;){var K=u[p++];U[H++]=K>>0&255,U[H++]=K>>8&255,U[H++]=K>>16&255}}function dr(u,p,x,U,H,K){if(K==0)for(x=p+x;p<x;)xe(U,((K=u[p++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),H+=32;else n(U,H,u,p,x)}function Gn(u,p){_[p][0]=_[u+"0"],_[p][1]=_[u+"1"],_[p][2]=_[u+"2"],_[p][3]=_[u+"3"],_[p][4]=_[u+"4"],_[p][5]=_[u+"5"],_[p][6]=_[u+"6"],_[p][7]=_[u+"7"],_[p][8]=_[u+"8"],_[p][9]=_[u+"9"],_[p][10]=_[u+"10"],_[p][11]=_[u+"11"],_[p][12]=_[u+"12"],_[p][13]=_[u+"13"],_[p][14]=_[u+"0"],_[p][15]=_[u+"0"]}function qt(u){return u==gv||u==wv||u==nm||u==vv}function As(){this.eb=[],this.size=this.A=this.fb=0}function ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new ar,this.sd=null}function cn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ft(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function $t(u,p){var x=u.T,U=p.ba.f.RGBA,H=U.eb,K=U.fb+u.ka*U.A,q=xi[p.ba.S],X=u.y,J=u.O,ie=u.f,fe=u.N,Ee=u.ea,_e=u.W,ye=p.cc,He=p.dc,Qe=p.Mc,pe=p.Nc,me=u.ka,Oe=u.ka+u.T,qe=u.U,Me=qe+1>>1;for(me==0?q(X,J,null,null,ie,fe,Ee,_e,ie,fe,Ee,_e,H,K,null,null,qe):(q(p.ec,p.fc,X,J,ye,He,Qe,pe,ie,fe,Ee,_e,H,K-U.A,H,K,qe),++x);me+2<Oe;me+=2)ye=ie,He=fe,Qe=Ee,pe=_e,fe+=u.Rc,_e+=u.Rc,K+=2*U.A,q(X,(J+=2*u.fa)-u.fa,X,J,ye,He,Qe,pe,ie,fe,Ee,_e,H,K-U.A,H,K,qe);return J+=u.fa,u.j+Oe<u.o?(n(p.ec,p.fc,X,J,qe),n(p.cc,p.dc,ie,fe,Me),n(p.Mc,p.Nc,Ee,_e,Me),x--):1&Oe||q(X,J,null,null,ie,fe,Ee,_e,ie,fe,Ee,_e,H,K+U.A,null,null,qe),x}function ls(u,p,x){var U=u.F,H=[u.J];if(U!=null){var K=u.U,q=p.ba.S,X=q==rm||q==nm;p=p.ba.f.RGBA;var J=[0],ie=u.ka;J[0]=u.T,u.Kb&&(ie==0?--J[0]:(--ie,H[0]-=u.width),u.j+u.ka+u.T==u.o&&(J[0]=u.o-u.j-ie));var fe=p.eb;ie=p.fb+ie*p.A,u=Lr(U,H[0],u.width,K,J,fe,ie+(X?0:3),p.A),e(x==J),u&&qt(q)&&vi(fe,ie,X,K,J,p.A)}return 0}function qr(u){var p=u.ma,x=p.ba.S,U=11>x,H=x==em||x==tm||x==rm||x==mv||x==12||qt(x);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!nh(p.Oa,u,H?11:12))return 0;if(H&&qt(x)&&$e(),u.da)alert("todo:use_scaling");else{if(U){if(p.Ib=Ft,u.Kb){if(x=u.U+1>>1,p.memory=i(u.U+2*x),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+u.U,p.Mc=p.cc,p.Nc=p.dc+x,p.Ib=$t,$e()}}else alert("todo:EmitYUV");H&&(p.Jb=ls,U&&we())}if(U&&!TB){for(u=0;256>u;++u)Z3[u]=89858*(u-128)+im>>sm,rP[u]=-22014*(u-128)+im,tP[u]=-45773*(u-128),eP[u]=113618*(u-128)+im>>sm;for(u=dh;u<bv;++u)p=76283*(u-16)+im>>sm,nP[u-dh]=wr(p,255),sP[u-dh]=wr(p+8>>4,15);TB=1}return 1}function hr(u){var p=u.ma,x=u.U,U=u.T;return e(!(1&u.ka)),0>=x||0>=U?0:(x=p.Ib(u,p),p.Jb!=null&&p.Jb(u,p,x),p.Dc+=x,1)}function Se(u){u.ma.memory=null}function De(u,p,x,U){return ae(u,8)!=47?0:(p[0]=ae(u,14)+1,x[0]=ae(u,14)+1,U[0]=ae(u,1),ae(u,3)!=0?0:!u.h)}function Et(u,p){if(4>u)return u+1;var x=u-2>>1;return(2+(1&u)<<x)+ae(p,x)+1}function ft(u,p){return 120<p?p-120:1<=(x=((x=D3[p-1])>>4)*u+(8-(15&x)))?x:1;var x}function ut(u,p,x){var U=k(x),H=u[p+=255&U].g-8;return 0<H&&(re(x,x.u+8),U=k(x),p+=u[p].value,p+=U&(1<<H)-1),re(x,x.u+u[p].g),u[p].value}function Nt(u,p,x){return x.g+=u.g,x.value+=u.value<<p>>>0,e(8>=x.g),u.g}function at(u,p,x){var U=u.xc;return e((p=U==0?0:u.vc[u.md*(x>>U)+(p>>U)])<u.Wb),u.Ya[p]}function Bt(u,p,x,U){var H=u.ab,K=u.c*p,q=u.C;p=q+p;var X=x,J=U;for(U=u.Ta,x=u.Ua;0<H--;){var ie=u.gc[H],fe=q,Ee=p,_e=X,ye=J,He=(J=U,X=x,ie.Ea);switch(e(fe<Ee),e(Ee<=ie.nc),ie.hc){case 2:zp(_e,ye,(Ee-fe)*He,J,X);break;case 0:var Qe=fe,pe=Ee,me=J,Oe=X,qe=(dt=ie).Ea;Qe==0&&(fv(_e,ye,null,null,1,me,Oe),ze(_e,ye+1,0,0,qe-1,me,Oe+1),ye+=qe,Oe+=qe,++Qe);for(var Me=1<<dt.b,wt=Me-1,At=Le(qe,dt.b),Qt=dt.K,dt=dt.w+(Qe>>dt.b)*At;Qe<pe;){var fr=Qt,xr=dt,lr=1;for(ah(_e,ye,me,Oe-qe,1,me,Oe);lr<qe;){var rr=(lr&~wt)+Me;rr>qe&&(rr=qe),(0,lA[fr[xr++]>>8&15])(_e,ye+ +lr,me,Oe+lr-qe,rr-lr,me,Oe+lr),lr=rr}ye+=qe,Oe+=qe,++Qe&wt||(dt+=At)}Ee!=ie.nc&&n(J,X-He,J,X+(Ee-fe-1)*He,He);break;case 1:for(He=_e,pe=ye,qe=(_e=ie.Ea)-(Oe=_e&~(me=(ye=1<<ie.b)-1)),Qe=Le(_e,ie.b),Me=ie.K,ie=ie.w+(fe>>ie.b)*Qe;fe<Ee;){for(wt=Me,At=ie,Qt=new Xe,dt=pe+Oe,fr=pe+_e;pe<dt;)pt(wt[At++],Qt),Kl(Qt,He,pe,ye,J,X),pe+=ye,X+=ye;pe<fr&&(pt(wt[At++],Qt),Kl(Qt,He,pe,qe,J,X),pe+=qe,X+=qe),++fe&me||(ie+=Qe)}break;case 3:if(_e==J&&ye==X&&0<ie.b){for(pe=J,_e=He=X+(Ee-fe)*He-(Oe=(Ee-fe)*Le(ie.Ea,ie.b)),ye=J,me=X,Qe=[],Oe=(qe=Oe)-1;0<=Oe;--Oe)Qe[Oe]=ye[me+Oe];for(Oe=qe-1;0<=Oe;--Oe)pe[_e+Oe]=Qe[Oe];mi(ie,fe,Ee,J,He,J,X)}else mi(ie,fe,Ee,_e,ye,J,X)}X=U,J=x}J!=x&&n(U,x,X,J,K)}function ve(u,p){var x=u.V,U=u.Ba+u.c*u.C,H=p-u.C;if(e(p<=u.l.o),e(16>=H),0<H){var K=u.l,q=u.Ta,X=u.Ua,J=K.width;if(Bt(u,H,x,U),H=X=[X],e((x=u.C)<(U=p)),e(K.v<K.va),U>K.o&&(U=K.o),x<K.j){var ie=K.j-x;x=K.j,H[0]+=ie*J}if(x>=U?x=0:(H[0]+=4*K.v,K.ka=x-K.j,K.U=K.va-K.v,K.T=U-x,x=1),x){if(X=X[0],11>(x=u.ca).S){var fe=x.f.RGBA,Ee=(U=x.S,H=K.U,K=K.T,ie=fe.eb,fe.A),_e=K;for(fe=fe.fb+u.Ma*fe.A;0<_e--;){var ye=q,He=X,Qe=H,pe=ie,me=fe;switch(U){case Zp:Ds(ye,He,Qe,pe,me);break;case em:Es(ye,He,Qe,pe,me);break;case gv:Es(ye,He,Qe,pe,me),vi(pe,me,0,Qe,1,0);break;case bB:so(ye,He,Qe,pe,me);break;case tm:dr(ye,He,Qe,pe,me,1);break;case wv:dr(ye,He,Qe,pe,me,1),vi(pe,me,0,Qe,1,0);break;case rm:dr(ye,He,Qe,pe,me,0);break;case nm:dr(ye,He,Qe,pe,me,0),vi(pe,me,1,Qe,1,0);break;case mv:cA(ye,He,Qe,pe,me);break;case vv:cA(ye,He,Qe,pe,me),Qr(pe,me,Qe,1,0);break;case BB:no(ye,He,Qe,pe,me);break;default:e(0)}X+=J,fe+=Ee}u.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=x.height)}}u.C=p,e(u.C<=u.i)}function et(u){var p;if(0<u.ua)return 0;for(p=0;p<u.Wb;++p){var x=u.Ya[p].G,U=u.Ya[p].H;if(0<x[1][U[1]+0].g||0<x[2][U[2]+0].g||0<x[3][U[3]+0].g)return 0}return 1}function nt(u,p,x,U,H,K){if(u.Z!=0){var q=u.qd,X=u.rd;for(e(fA[u.Z]!=null);p<x;++p)fA[u.Z](q,X,U,H,U,H,K),q=U,X=H,H+=K;u.qd=q,u.rd=X}}function jt(u,p){var x=u.l.ma,U=x.Z==0||x.Z==1?u.l.j:u.C;if(U=u.C<U?U:u.C,e(p<=u.l.o),p>U){var H=u.l.width,K=x.ca,q=x.tb+H*U,X=u.V,J=u.Ba+u.c*U,ie=u.gc;e(u.ab==1),e(ie[0].hc==3),$p(ie[0],U,p,X,J,K,q),nt(x,U,p,K,q,H)}u.C=u.Ma=p}function Wt(u,p,x,U,H,K,q){var X=u.$/U,J=u.$%U,ie=u.m,fe=u.s,Ee=x+u.$,_e=Ee;H=x+U*H;var ye=x+U*K,He=280+fe.ua,Qe=u.Pb?X:16777216,pe=0<fe.ua?fe.Wa:null,me=fe.wc,Oe=Ee<ye?at(fe,J,X):null;e(u.C<K),e(ye<=H);var qe=!1;e:for(;;){for(;qe||Ee<ye;){var Me=0;if(X>=Qe){var wt=Ee-x;e((Qe=u).Pb),Qe.wd=Qe.m,Qe.xd=wt,0<Qe.s.ua&&Ae(Qe.s.Wa,Qe.s.vb),Qe=X+M3}if(J&me||(Oe=at(fe,J,X)),e(Oe!=null),Oe.Qb&&(p[Ee]=Oe.qb,qe=!0),!qe)if(oe(ie),Oe.jc){Me=ie,wt=p;var At=Ee,Qt=Oe.pd[k(Me)&Wn-1];e(Oe.jc),256>Qt.g?(re(Me,Me.u+Qt.g),wt[At]=Qt.value,Me=0):(re(Me,Me.u+Qt.g-256),e(256<=Qt.value),Me=Qt.value),Me==0&&(qe=!0)}else Me=ut(Oe.G[0],Oe.H[0],ie);if(ie.h)break;if(qe||256>Me){if(!qe)if(Oe.nd)p[Ee]=(Oe.qb|Me<<8)>>>0;else{if(oe(ie),qe=ut(Oe.G[1],Oe.H[1],ie),oe(ie),wt=ut(Oe.G[2],Oe.H[2],ie),At=ut(Oe.G[3],Oe.H[3],ie),ie.h)break;p[Ee]=(At<<24|qe<<16|Me<<8|wt)>>>0}if(qe=!1,++Ee,++J>=U&&(J=0,++X,q!=null&&X<=K&&!(X%16)&&q(u,X),pe!=null))for(;_e<Ee;)Me=p[_e++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me}else if(280>Me){if(Me=Et(Me-256,ie),wt=ut(Oe.G[4],Oe.H[4],ie),oe(ie),wt=ft(U,wt=Et(wt,ie)),ie.h)break;if(Ee-x<wt||H-Ee<Me)break e;for(At=0;At<Me;++At)p[Ee+At]=p[Ee+At-wt];for(Ee+=Me,J+=Me;J>=U;)J-=U,++X,q!=null&&X<=K&&!(X%16)&&q(u,X);if(e(Ee<=H),J&me&&(Oe=at(fe,J,X)),pe!=null)for(;_e<Ee;)Me=p[_e++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me}else{if(!(Me<He))break e;for(qe=Me-280,e(pe!=null);_e<Ee;)Me=p[_e++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me;Me=Ee,e(!(qe>>>(wt=pe).Xa)),p[Me]=wt.X[qe],qe=!0}qe||e(ie.h==W(ie))}if(u.Pb&&ie.h&&Ee<H)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Ae(u.s.vb,u.s.Wa);else{if(ie.h)break e;q!=null&&q(u,X>K?K:X),u.a=0,u.$=Ee-x}return 1}return u.a=3,0}function Ct(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var p=u.Wa;p!=null&&(p.X=null),u.vb=null,e(u!=null)}function gt(){var u=new su;return u==null?null:(u.a=0,u.xb=_B,Gn("Predictor","VP8LPredictors"),Gn("Predictor","VP8LPredictors_C"),Gn("PredictorAdd","VP8LPredictorsAdd"),Gn("PredictorAdd","VP8LPredictorsAdd_C"),zp=tt,Kl=ot,Ds=Je,Es=Ot,cA=Pt,no=Pr,so=Jt,_.VP8LMapColor32b=lu,_.VP8LMapColor8b=Wp,u)}function Bs(u,p,x,U,H){var K=1,q=[u],X=[p],J=U.m,ie=U.s,fe=null,Ee=0;e:for(;;){if(x)for(;K&&ae(J,1);){var _e=q,ye=X,He=U,Qe=1,pe=He.m,me=He.gc[He.ab],Oe=ae(pe,2);if(He.Oc&1<<Oe)K=0;else{switch(He.Oc|=1<<Oe,me.hc=Oe,me.Ea=_e[0],me.nc=ye[0],me.K=[null],++He.ab,e(4>=He.ab),Oe){case 0:case 1:me.b=ae(pe,3)+2,Qe=Bs(Le(me.Ea,me.b),Le(me.nc,me.b),0,He,me.K),me.K=me.K[0];break;case 3:var qe,Me=ae(pe,8)+1,wt=16<Me?0:4<Me?1:2<Me?2:3;if(_e[0]=Le(me.Ea,wt),me.b=wt,qe=Qe=Bs(Me,1,0,He,me.K)){var At,Qt=Me,dt=me,fr=1<<(8>>dt.b),xr=i(fr);if(xr==null)qe=0;else{var lr=dt.K[0],rr=dt.w;for(xr[0]=dt.K[0][0],At=1;At<1*Qt;++At)xr[At]=Fe(lr[rr+At],xr[At-1]);for(;At<4*fr;++At)xr[At]=0;dt.K[0]=null,dt.K[0]=xr,qe=1}}Qe=qe;break;case 2:break;default:e(0)}K=Qe}}if(q=q[0],X=X[0],K&&ae(J,1)&&!(K=1<=(Ee=ae(J,4))&&11>=Ee)){U.a=3;break e}var Tr;if(Tr=K)t:{var Nr,zt,xn,Os=U,bn=q,Ms=X,br=Ee,ti=x,ri=Os.m,Ln=Os.s,Xn=[null],Ns=1,bi=0,_a=O3[br];r:for(;;){if(ti&&ae(ri,1)){var jn=ae(ri,3)+2,Ao=Le(bn,jn),Wl=Le(Ms,jn),fu=Ao*Wl;if(!Bs(Ao,Wl,0,Os,Xn))break r;for(Xn=Xn[0],Ln.xc=jn,Nr=0;Nr<fu;++Nr){var pA=Xn[Nr]>>8&65535;Xn[Nr]=pA,pA>=Ns&&(Ns=pA+1)}}if(ri.h)break r;for(zt=0;5>zt;++zt){var an=CB[zt];!zt&&0<br&&(an+=1<<br),bi<an&&(bi=an)}var Bv=a(Ns*_a,I),QB=Ns,LB=a(QB,Y);if(LB==null)var om=null;else e(65536>=QB),om=LB;var hh=i(bi);if(om==null||hh==null||Bv==null){Os.a=1;break r}var Am=Bv;for(Nr=xn=0;Nr<Ns;++Nr){var Gi=om[Nr],pu=Gi.G,mu=Gi.H,jB=0,lm=1,kB=0;for(zt=0;5>zt;++zt){an=CB[zt],pu[zt]=Am,mu[zt]=xn,!zt&&0<br&&(an+=1<<br);s:{var cm,Cv=an,um=Os,fh=hh,oP=Am,AP=xn,Ev=0,mA=um.m,lP=ae(mA,1);if(s(fh,0,0,Cv),lP){var cP=ae(mA,1)+1,uP=ae(mA,1),RB=ae(mA,uP==0?1:8);fh[RB]=1,cP==2&&(fh[RB=ae(mA,8)]=1);var dm=1}else{var DB=i(19),OB=ae(mA,4)+4;if(19<OB){um.a=3;var hm=0;break s}for(cm=0;cm<OB;++cm)DB[R3[cm]]=ae(mA,3);var _v=void 0,ph=void 0,MB=um,dP=DB,fm=Cv,HB=fh,Nv=0,gA=MB.m,VB=8,KB=a(128,I);n:for(;S(KB,0,7,dP,19);){if(ae(gA,1)){var hP=2+2*ae(gA,3);if((_v=2+ae(gA,hP))>fm)break n}else _v=fm;for(ph=0;ph<fm&&_v--;){oe(gA);var qB=KB[0+(127&k(gA))];re(gA,gA.u+qB.g);var gu=qB.value;if(16>gu)HB[ph++]=gu,gu!=0&&(VB=gu);else{var fP=gu==16,GB=gu-16,pP=j3[GB],zB=ae(gA,L3[GB])+pP;if(ph+zB>fm)break n;for(var mP=fP?VB:0;0<zB--;)HB[ph++]=mP}}Nv=1;break n}Nv||(MB.a=3),dm=Nv}(dm=dm&&!mA.h)&&(Ev=S(oP,AP,8,fh,Cv)),dm&&Ev!=0?hm=Ev:(um.a=3,hm=0)}if(hm==0)break r;if(lm&&k3[zt]==1&&(lm=Am[xn].g==0),jB+=Am[xn].g,xn+=hm,3>=zt){var mh,Iv=hh[0];for(mh=1;mh<an;++mh)hh[mh]>Iv&&(Iv=hh[mh]);kB+=Iv}}if(Gi.nd=lm,Gi.Qb=0,lm&&(Gi.qb=(pu[3][mu[3]+0].value<<24|pu[1][mu[1]+0].value<<16|pu[2][mu[2]+0].value)>>>0,jB==0&&256>pu[0][mu[0]+0].value&&(Gi.Qb=1,Gi.qb+=pu[0][mu[0]+0].value<<8)),Gi.jc=!Gi.Qb&&6>kB,Gi.jc){var pm,lo=Gi;for(pm=0;pm<Wn;++pm){var wA=pm,vA=lo.pd[wA],mm=lo.G[0][lo.H[0]+wA];256<=mm.value?(vA.g=mm.g+256,vA.value=mm.value):(vA.g=0,vA.value=0,wA>>=Nt(mm,8,vA),wA>>=Nt(lo.G[1][lo.H[1]+wA],16,vA),wA>>=Nt(lo.G[2][lo.H[2]+wA],0,vA),Nt(lo.G[3][lo.H[3]+wA],24,vA))}}}Ln.vc=Xn,Ln.Wb=Ns,Ln.Ya=om,Ln.yc=Bv,Tr=1;break t}Tr=0}if(!(K=Tr)){U.a=3;break e}if(0<Ee){if(ie.ua=1<<Ee,!te(ie.Wa,Ee)){U.a=1,K=0;break e}}else ie.ua=0;var Sv=U,$B=q,gP=X,Fv=Sv.s,Tv=Fv.xc;if(Sv.c=$B,Sv.i=gP,Fv.md=Le($B,Tv),Fv.wc=Tv==0?-1:(1<<Tv)-1,x){U.xb=$3;break e}if((fe=i(q*X))==null){U.a=1,K=0;break e}K=(K=Wt(U,fe,0,q,X,X,null))&&!J.h;break e}return K?(H!=null?H[0]=fe:(e(fe==null),e(x)),U.$=0,x||Ct(ie)):Ct(ie),K}function fa(u,p){var x=u.c*u.i,U=x+p+16*p;return e(u.c<=p),u.V=i(U),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+x+p,1)}function pa(u,p){var x=u.C,U=p-x,H=u.V,K=u.Ba+u.c*x;for(e(p<=u.l.o);0<U;){var q=16<U?16:U,X=u.l.ma,J=u.l.width,ie=J*q,fe=X.ca,Ee=X.tb+J*x,_e=u.Ta,ye=u.Ua;Bt(u,q,H,K),dn(_e,ye,fe,Ee,ie),nt(X,x,x+q,fe,Ee,J),U-=q,H+=q*u.c,x+=q}e(x==p),u.C=u.Ma=p}function ma(){this.ub=this.yd=this.td=this.Rb=0}function Ga(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function za(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function $c(){this.Yb=function(){var u=[];return function p(x,U,H){for(var K=H[U],q=0;q<K&&(x.push(H.length>U+1?[]:0),!(H.length<U+1));q++)p(x[q],U+1,H)}(u,0,[3,11]),u}()}function Go(){this.jb=i(3),this.Wc=o([4,8],$c),this.Xc=o([4,17],$c)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ga(){this.ld=this.La=this.dd=this.tc=0}function wa(){this.Na=this.la=0}function ki(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $a(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zd(){this.uc=this.M=this.Nb=0,this.wa=Array(new ga),this.Y=0,this.ya=Array(new $a),this.aa=0,this.l=new Wa}function Fl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Xc(){this.cb=this.a=0,this.sc="",this.m=new Ce,this.Od=new ma,this.Kc=new Ga,this.ed=new Wc,this.Qa=new za,this.Ic=this.$c=this.Aa=0,this.D=new Zd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Ce),this.ia=0,this.pb=a(4,ki),this.Pa=new Go,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fl),this.Hd=0,this.rb=Array(new wa),this.sb=0,this.wa=Array(new ga),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $a),this.L=this.aa=0,this.gd=o([4,2],ga),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tl(){var u=new Xc;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,uh||(uh=Jc)),u}function Dr(u,p,x){return u.a==0&&(u.a=p,u.sc=x,u.cb=0),0}function Ul(u,p,x){return 3<=x&&u[p+0]==157&&u[p+1]==1&&u[p+2]==42}function Pl(u,p){if(u==null)return 0;if(u.a=0,u.sc="OK",p==null)return Dr(u,2,"null VP8Io passed to VP8GetHeaders()");var x=p.data,U=p.w,H=p.ha;if(4>H)return Dr(u,7,"Truncated header.");var K=x[U+0]|x[U+1]<<8|x[U+2]<<16,q=u.Od;if(q.Rb=!(1&K),q.td=K>>1&7,q.yd=K>>4&1,q.ub=K>>5,3<q.td)return Dr(u,3,"Incorrect keyframe parameters.");if(!q.yd)return Dr(u,4,"Frame not displayable.");U+=3,H-=3;var X=u.Kc;if(q.Rb){if(7>H)return Dr(u,7,"cannot parse picture header");if(!Ul(x,U,H))return Dr(u,3,"Bad code word");X.c=16383&(x[U+4]<<8|x[U+3]),X.Td=x[U+4]>>6,X.i=16383&(x[U+6]<<8|x[U+5]),X.Ud=x[U+6]>>6,U+=7,H-=7,u.za=X.c+15>>4,u.Ub=X.i+15>>4,p.width=X.c,p.height=X.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,s((K=u.Pa).jb,0,255,K.jb.length),e((K=u.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,s(K.Zb,0,0,K.Zb.length),s(K.Lb,0,0,K.Lb)}if(q.ub>H)return Dr(u,7,"bad partition length");ue(K=u.m,x,U,q.ub),U+=q.ub,H-=q.ub,q.Rb&&(X.Ld=ee(K),X.Kd=ee(K)),X=u.Qa;var J,ie=u.Pa;if(e(K!=null),e(X!=null),X.Cb=ee(K),X.Cb){if(X.Bb=ee(K),ee(K)){for(X.Fb=ee(K),J=0;4>J;++J)X.Zb[J]=ee(K)?se(K,7):0;for(J=0;4>J;++J)X.Lb[J]=ee(K)?se(K,6):0}if(X.Bb)for(J=0;3>J;++J)ie.jb[J]=ee(K)?ne(K,8):255}else X.Bb=0;if(K.Ka)return Dr(u,3,"cannot parse segment header");if((X=u.ed).zd=ee(K),X.Tb=ne(K,6),X.wb=ne(K,3),X.Pc=ee(K),X.Pc&&ee(K)){for(ie=0;4>ie;++ie)ee(K)&&(X.vd[ie]=se(K,6));for(ie=0;4>ie;++ie)ee(K)&&(X.od[ie]=se(K,6))}if(u.L=X.Tb==0?0:X.zd?1:2,K.Ka)return Dr(u,3,"cannot parse filter header");var fe=H;if(H=J=U,U=J+fe,X=fe,u.Xb=(1<<ne(u.m,2))-1,fe<3*(ie=u.Xb))x=7;else{for(J+=3*ie,X-=3*ie,fe=0;fe<ie;++fe){var Ee=x[H+0]|x[H+1]<<8|x[H+2]<<16;Ee>X&&(Ee=X),ue(u.Jc[+fe],x,J,Ee),J+=Ee,X-=Ee,H+=3}ue(u.Jc[+ie],x,J,X),x=J<U?0:5}if(x!=0)return Dr(u,x,"cannot parse partitions");for(x=ne(J=u.m,7),H=ee(J)?se(J,4):0,U=ee(J)?se(J,4):0,X=ee(J)?se(J,4):0,ie=ee(J)?se(J,4):0,J=ee(J)?se(J,4):0,fe=u.Qa,Ee=0;4>Ee;++Ee){if(fe.Cb){var _e=fe.Zb[Ee];fe.Fb||(_e+=x)}else{if(0<Ee){u.pb[Ee]=u.pb[0];continue}_e=x}var ye=u.pb[Ee];ye.Sc[0]=yv[wr(_e+H,127)],ye.Sc[1]=xv[wr(_e+0,127)],ye.Eb[0]=2*yv[wr(_e+U,127)],ye.Eb[1]=101581*xv[wr(_e+X,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=yv[wr(_e+ie,117)],ye.Qc[1]=xv[wr(_e+J,127)],ye.lc=_e+J}if(!q.Rb)return Dr(u,4,"Not a key frame.");for(ee(K),q=u.Pa,x=0;4>x;++x){for(H=0;8>H;++H)for(U=0;3>U;++U)for(X=0;11>X;++X)ie=de(K,G3[x][H][U][X])?ne(K,8):K3[x][H][U][X],q.Wc[x][H].Yb[U][X]=ie;for(H=0;17>H;++H)q.Xc[x][H]=q.Wc[x][z3[H]]}return u.kc=ee(K),u.kc&&(u.Bd=ne(K,8)),u.cb=1}function Jc(u,p,x,U,H,K,q){var X=p[H].Yb[x];for(x=0;16>H;++H){if(!de(u,X[x+0]))return H;for(;!de(u,X[x+1]);)if(X=p[++H].Yb[0],x=0,H==16)return 16;var J=p[H+1].Yb;if(de(u,X[x+2])){var ie=u,fe=0;if(de(ie,(_e=X)[(Ee=x)+3]))if(de(ie,_e[Ee+6])){for(X=0,Ee=2*(fe=de(ie,_e[Ee+8]))+(_e=de(ie,_e[Ee+9+fe])),fe=0,_e=H3[Ee];_e[X];++X)fe+=fe+de(ie,_e[X]);fe+=3+(8<<Ee)}else de(ie,_e[Ee+7])?(fe=7+2*de(ie,165),fe+=de(ie,145)):fe=5+de(ie,159);else fe=de(ie,_e[Ee+4])?3+de(ie,_e[Ee+5]):2;X=J[2]}else fe=1,X=J[1];J=q+V3[H],0>(ie=u).b&&Z(ie);var Ee,_e=ie.b,ye=(Ee=ie.Ca>>1)-(ie.I>>_e)>>31;--ie.b,ie.Ca+=ye,ie.Ca|=1,ie.I-=(Ee+1&ye)<<_e,K[J]=((fe^ye)-ye)*U[(0<H)+0]}return 16}function Ql(u){var p=u.rb[u.sb-1];p.la=0,p.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function Yc(u,p){if(u==null)return 0;if(p==null)return Dr(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Pl(u,p))return 0;if(e(u.cb),p.ac==null||p.ac(p)){p.ob&&(u.L=0);var x=am[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=p.v-x>>4,u.zb=p.j-x>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=p.o+15+x>>4,u.Hb=p.va+15+x>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var U=u.ed;for(x=0;4>x;++x){var H;if(u.Qa.Cb){var K=u.Qa.Lb[x];u.Qa.Fb||(K+=U.Tb)}else K=U.Tb;for(H=0;1>=H;++H){var q=u.gd[x][H],X=K;if(U.Pc&&(X+=U.vd[0],H&&(X+=U.od[0])),0<(X=0>X?0:63<X?63:X)){var J=X;0<U.wb&&(J=4<U.wb?J>>2:J>>1)>9-U.wb&&(J=9-U.wb),1>J&&(J=1),q.dd=J,q.tc=2*X+J,q.ld=40<=X?2:15<=X?1:0}else q.tc=0;q.La=H}}}x=0}else Dr(u,6,"Frame setup failed"),x=u.a;if(x=x==0){if(x){u.$c=0,0<u.Aa||(u.Ic=aP);e:{x=u.Ic,U=4*(J=u.za);var ie=32*J,fe=J+1,Ee=0<u.L?J*(0<u.Aa?2:1):0,_e=(u.Aa==2?2:1)*J;if((q=U+832+(H=3*(16*x+am[u.L])/2*ie)+(K=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=q)x=0;else{if(q>u.Vb){if(u.Vb=0,u.Ec=i(q),u.Fc=0,u.Ec==null){x=Dr(u,1,"no memory during frame initialization.");break e}u.Vb=q}q=u.Ec,X=u.Fc,u.Ac=q,u.Bc=X,X+=U,u.Gd=a(ie,Fl),u.Hd=0,u.rb=a(fe+1,wa),u.sb=1,u.wa=Ee?a(Ee,ga):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=J),e(!0),u.oc=q,u.pc=X,X+=832,u.ya=a(_e,$a),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=J),u.R=16*J,u.B=8*J,J=(ie=am[u.L])*u.R,ie=ie/2*u.B,u.sa=q,u.ta=X+J,u.qa=u.sa,u.ra=u.ta+16*x*u.R+ie,u.Ha=u.qa,u.Ia=u.ra+8*x*u.B+ie,u.$c=0,X+=H,u.mb=K?q:null,u.nb=K?X:null,e(X+K<=u.Fc+u.Vb),Ql(u),s(u.Ac,u.Bc,0,U),x=1}}if(x){if(p.ka=0,p.y=u.sa,p.O=u.ta,p.f=u.qa,p.N=u.ra,p.ea=u.Ha,p.Vd=u.Ia,p.fa=u.R,p.Rc=u.B,p.F=null,p.J=0,!Jp){for(x=-255;255>=x;++x)Nn[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)ao[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)ch[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)hu[255+x]=0>x?0:255<x?255:x;Jp=1}cu=Ya,io=$o,oh=Ll,_s=yr,gi=Ja,un=Xa,uu=tA,Xp=Hi,Ah=nA,ql=Vl,Gl=rA,uA=eo,zl=sA,du=ba,$l=Za,dA=Zs,lh=_n,wi=nu,qi[0]=pi,qi[1]=eh,qi[2]=ya,qi[3]=rh,qi[4]=tu,qi[5]=Jo,qi[6]=Js,qi[7]=kl,qi[8]=Zo,qi[9]=Yo,hA[0]=va,hA[1]=th,hA[2]=Di,hA[3]=Wo,hA[4]=Or,hA[5]=eu,hA[6]=jl,oo[0]=Mi,oo[1]=Zc,oo[2]=ru,oo[3]=Oi,oo[4]=gr,oo[5]=Rl,oo[6]=Dl,x=1}else x=0}x&&(x=function(ye,He){for(ye.M=0;ye.M<ye.Va;++ye.M){var Qe,pe=ye.Jc[ye.M&ye.Xb],me=ye.m,Oe=ye;for(Qe=0;Qe<Oe.za;++Qe){var qe=me,Me=Oe,wt=Me.Ac,At=Me.Bc+4*Qe,Qt=Me.zc,dt=Me.ya[Me.aa+Qe];if(Me.Qa.Bb?dt.$b=de(qe,Me.Pa.jb[0])?2+de(qe,Me.Pa.jb[2]):de(qe,Me.Pa.jb[1]):dt.$b=0,Me.kc&&(dt.Ad=de(qe,Me.Bd)),dt.Za=!de(qe,145)+0,dt.Za){var fr=dt.Ob,xr=0;for(Me=0;4>Me;++Me){var lr,rr=Qt[0+Me];for(lr=0;4>lr;++lr){rr=q3[wt[At+lr]][rr];for(var Tr=EB[de(qe,rr[0])];0<Tr;)Tr=EB[2*Tr+de(qe,rr[Tr])];rr=-Tr,wt[At+lr]=rr}n(fr,xr,wt,At,4),xr+=4,Qt[0+Me]=rr}}else rr=de(qe,156)?de(qe,128)?1:3:de(qe,163)?2:0,dt.Ob[0]=rr,s(wt,At,rr,4),s(Qt,0,rr,4);dt.Dd=de(qe,142)?de(qe,114)?de(qe,183)?1:3:2:0}if(Oe.m.Ka)return Dr(ye,7,"Premature end-of-partition0 encountered.");for(;ye.ja<ye.za;++ye.ja){if(Oe=pe,qe=(me=ye).rb[me.sb-1],wt=me.rb[me.sb+me.ja],Qe=me.ya[me.aa+me.ja],At=me.kc?Qe.Ad:0)qe.la=wt.la=0,Qe.Za||(qe.Na=wt.Na=0),Qe.Hc=0,Qe.Gc=0,Qe.ia=0;else{var Nr,zt;if(qe=wt,wt=Oe,At=me.Pa.Xc,Qt=me.ya[me.aa+me.ja],dt=me.pb[Qt.$b],Me=Qt.ad,fr=0,xr=me.rb[me.sb-1],rr=lr=0,s(Me,fr,0,384),Qt.Za)var xn=0,Os=At[3];else{Tr=i(16);var bn=qe.Na+xr.Na;if(bn=uh(wt,At[1],bn,dt.Eb,0,Tr,0),qe.Na=xr.Na=(0<bn)+0,1<bn)cu(Tr,0,Me,fr);else{var Ms=Tr[0]+3>>3;for(Tr=0;256>Tr;Tr+=16)Me[fr+Tr]=Ms}xn=1,Os=At[0]}var br=15&qe.la,ti=15&xr.la;for(Tr=0;4>Tr;++Tr){var ri=1&ti;for(Ms=zt=0;4>Ms;++Ms)br=br>>1|(ri=(bn=uh(wt,Os,bn=ri+(1&br),dt.Sc,xn,Me,fr))>xn)<<7,zt=zt<<2|(3<bn?3:1<bn?2:Me[fr+0]!=0),fr+=16;br>>=4,ti=ti>>1|ri<<7,lr=(lr<<8|zt)>>>0}for(Os=br,xn=ti>>4,Nr=0;4>Nr;Nr+=2){for(zt=0,br=qe.la>>4+Nr,ti=xr.la>>4+Nr,Tr=0;2>Tr;++Tr){for(ri=1&ti,Ms=0;2>Ms;++Ms)bn=ri+(1&br),br=br>>1|(ri=0<(bn=uh(wt,At[2],bn,dt.Qc,0,Me,fr)))<<3,zt=zt<<2|(3<bn?3:1<bn?2:Me[fr+0]!=0),fr+=16;br>>=2,ti=ti>>1|ri<<5}rr|=zt<<4*Nr,Os|=br<<4<<Nr,xn|=(240&ti)<<Nr}qe.la=Os,xr.la=xn,Qt.Hc=lr,Qt.Gc=rr,Qt.ia=43690&rr?0:dt.ia,At=!(lr|rr)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Qe.$b][Qe.Za],me.wa[me.Y+me.ja].La|=!At),Oe.Ka)return Dr(ye,7,"Premature end-of-file encountered.")}if(Ql(ye),me=He,Oe=1,Qe=(pe=ye).D,qe=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Qe.M=pe.M,Qe.uc=qe,Ca(pe,Qe),Oe=1,Qe=(zt=pe.D).Nb,qe=(rr=am[pe.L])*pe.R,wt=rr/2*pe.B,Tr=16*Qe*pe.R,Ms=8*Qe*pe.B,At=pe.sa,Qt=pe.ta-qe+Tr,dt=pe.qa,Me=pe.ra-wt+Ms,fr=pe.Ha,xr=pe.Ia-wt+Ms,ti=(br=zt.M)==0,lr=br>=pe.Va-1,pe.Aa==2&&Ca(pe,zt),zt.uc)for(ri=(bn=pe).D.M,e(bn.D.uc),zt=bn.yb;zt<bn.Hb;++zt){xn=zt,Os=ri;var Ln=(Xn=(an=bn).D).Nb;Nr=an.R;var Xn=Xn.wa[Xn.Y+xn],Ns=an.sa,bi=an.ta+16*Ln*Nr+16*xn,_a=Xn.dd,jn=Xn.tc;if(jn!=0)if(e(3<=jn),an.L==1)0<xn&&dA(Ns,bi,Nr,jn+4),Xn.La&&wi(Ns,bi,Nr,jn),0<Os&&$l(Ns,bi,Nr,jn+4),Xn.La&&lh(Ns,bi,Nr,jn);else{var Ao=an.B,Wl=an.qa,fu=an.ra+8*Ln*Ao+8*xn,pA=an.Ha,an=an.Ia+8*Ln*Ao+8*xn;Ln=Xn.ld,0<xn&&(Xp(Ns,bi,Nr,jn+4,_a,Ln),ql(Wl,fu,pA,an,Ao,jn+4,_a,Ln)),Xn.La&&(uA(Ns,bi,Nr,jn,_a,Ln),du(Wl,fu,pA,an,Ao,jn,_a,Ln)),0<Os&&(uu(Ns,bi,Nr,jn+4,_a,Ln),Ah(Wl,fu,pA,an,Ao,jn+4,_a,Ln)),Xn.La&&(Gl(Ns,bi,Nr,jn,_a,Ln),zl(Wl,fu,pA,an,Ao,jn,_a,Ln))}}if(pe.ia&&alert("todo:DitherRow"),me.put!=null){if(zt=16*br,br=16*(br+1),ti?(me.y=pe.sa,me.O=pe.ta+Tr,me.f=pe.qa,me.N=pe.ra+Ms,me.ea=pe.Ha,me.W=pe.Ia+Ms):(zt-=rr,me.y=At,me.O=Qt,me.f=dt,me.N=Me,me.ea=fr,me.W=xr),lr||(br-=rr),br>me.o&&(br=me.o),me.F=null,me.J=null,pe.Fa!=null&&0<pe.Fa.length&&zt<br&&(me.J=AA(pe,me,zt,br-zt),me.F=pe.mb,me.F==null&&me.F.length==0)){Oe=Dr(pe,3,"Could not decode alpha data.");break e}zt<me.j&&(rr=me.j-zt,zt=me.j,e(!(1&rr)),me.O+=pe.R*rr,me.N+=pe.B*(rr>>1),me.W+=pe.B*(rr>>1),me.F!=null&&(me.J+=me.width*rr)),zt<br&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=zt-me.j,me.U=me.va-me.v,me.T=br-zt,Oe=me.put(me))}Qe+1!=pe.Ic||lr||(n(pe.sa,pe.ta-qe,At,Qt+16*pe.R,qe),n(pe.qa,pe.ra-wt,dt,Me+8*pe.B,wt),n(pe.Ha,pe.Ia-wt,fr,xr+8*pe.B,wt))}if(!Oe)return Dr(ye,6,"Output aborted.")}return 1}(u,p)),p.bc!=null&&p.bc(p),x&=1}return x?(u.cb=0,x):0}function ks(u,p,x,U,H){H=u[p+x+32*U]+(H>>3),u[p+x+32*U]=-256&H?0>H?0:255:H}function zo(u,p,x,U,H,K){ks(u,p,0,x,U+H),ks(u,p,1,x,U+K),ks(u,p,2,x,U-K),ks(u,p,3,x,U-H)}function sn(u){return(20091*u>>16)+u}function Cs(u,p,x,U){var H,K=0,q=i(16);for(H=0;4>H;++H){var X=u[p+0]+u[p+8],J=u[p+0]-u[p+8],ie=(35468*u[p+4]>>16)-sn(u[p+12]),fe=sn(u[p+4])+(35468*u[p+12]>>16);q[K+0]=X+fe,q[K+1]=J+ie,q[K+2]=J-ie,q[K+3]=X-fe,K+=4,p++}for(H=K=0;4>H;++H)X=(u=q[K+0]+4)+q[K+8],J=u-q[K+8],ie=(35468*q[K+4]>>16)-sn(q[K+12]),ks(x,U,0,0,X+(fe=sn(q[K+4])+(35468*q[K+12]>>16))),ks(x,U,1,0,J+ie),ks(x,U,2,0,J-ie),ks(x,U,3,0,X-fe),K++,U+=32}function Xa(u,p,x,U){var H=u[p+0]+4,K=35468*u[p+4]>>16,q=sn(u[p+4]),X=35468*u[p+1]>>16;zo(x,U,0,H+q,u=sn(u[p+1]),X),zo(x,U,1,H+K,u,X),zo(x,U,2,H-K,u,X),zo(x,U,3,H-q,u,X)}function $o(u,p,x,U,H){Cs(u,p,x,U),H&&Cs(u,p+16,x,U+4)}function Ll(u,p,x,U){io(u,p+0,x,U,1),io(u,p+32,x,U+128,1)}function yr(u,p,x,U){var H;for(u=u[p+0]+4,H=0;4>H;++H)for(p=0;4>p;++p)ks(x,U,p,H,u)}function Ja(u,p,x,U){u[p+0]&&_s(u,p+0,x,U),u[p+16]&&_s(u,p+16,x,U+4),u[p+32]&&_s(u,p+32,x,U+128),u[p+48]&&_s(u,p+48,x,U+128+4)}function Ya(u,p,x,U){var H,K=i(16);for(H=0;4>H;++H){var q=u[p+0+H]+u[p+12+H],X=u[p+4+H]+u[p+8+H],J=u[p+4+H]-u[p+8+H],ie=u[p+0+H]-u[p+12+H];K[0+H]=q+X,K[8+H]=q-X,K[4+H]=ie+J,K[12+H]=ie-J}for(H=0;4>H;++H)q=(u=K[0+4*H]+3)+K[3+4*H],X=K[1+4*H]+K[2+4*H],J=K[1+4*H]-K[2+4*H],ie=u-K[3+4*H],x[U+0]=q+X>>3,x[U+16]=ie+J>>3,x[U+32]=q-X>>3,x[U+48]=ie-J>>3,U+=64}function Ri(u,p,x){var U,H=p-32,K=ei,q=255-u[H-1];for(U=0;U<x;++U){var X,J=K,ie=q+u[p-1];for(X=0;X<x;++X)u[p+X]=J[ie+u[H+X]];p+=32}}function eh(u,p){Ri(u,p,4)}function Zc(u,p){Ri(u,p,8)}function th(u,p){Ri(u,p,16)}function Di(u,p){var x;for(x=0;16>x;++x)n(u,p+32*x,u,p-32,16)}function Wo(u,p){var x;for(x=16;0<x;--x)s(u,p,u[p-1],16),p+=32}function Xo(u,p,x){var U;for(U=0;16>U;++U)s(p,x+32*U,u,16)}function va(u,p){var x,U=16;for(x=0;16>x;++x)U+=u[p-1+32*x]+u[p+x-32];Xo(U>>5,u,p)}function Or(u,p){var x,U=8;for(x=0;16>x;++x)U+=u[p-1+32*x];Xo(U>>4,u,p)}function eu(u,p){var x,U=8;for(x=0;16>x;++x)U+=u[p+x-32];Xo(U>>4,u,p)}function jl(u,p){Xo(128,u,p)}function Rt(u,p,x){return u+2*p+x+2>>2}function ya(u,p){var x,U=p-32;for(U=new Uint8Array([Rt(u[U-1],u[U+0],u[U+1]),Rt(u[U+0],u[U+1],u[U+2]),Rt(u[U+1],u[U+2],u[U+3]),Rt(u[U+2],u[U+3],u[U+4])]),x=0;4>x;++x)n(u,p+32*x,U,0,U.length)}function rh(u,p){var x=u[p-1],U=u[p-1+32],H=u[p-1+64],K=u[p-1+96];xe(u,p+0,16843009*Rt(u[p-1-32],x,U)),xe(u,p+32,16843009*Rt(x,U,H)),xe(u,p+64,16843009*Rt(U,H,K)),xe(u,p+96,16843009*Rt(H,K,K))}function pi(u,p){var x,U=4;for(x=0;4>x;++x)U+=u[p+x-32]+u[p-1+32*x];for(U>>=3,x=0;4>x;++x)s(u,p+32*x,U,4)}function tu(u,p){var x=u[p-1+0],U=u[p-1+32],H=u[p-1+64],K=u[p-1-32],q=u[p+0-32],X=u[p+1-32],J=u[p+2-32],ie=u[p+3-32];u[p+0+96]=Rt(U,H,u[p-1+96]),u[p+1+96]=u[p+0+64]=Rt(x,U,H),u[p+2+96]=u[p+1+64]=u[p+0+32]=Rt(K,x,U),u[p+3+96]=u[p+2+64]=u[p+1+32]=u[p+0+0]=Rt(q,K,x),u[p+3+64]=u[p+2+32]=u[p+1+0]=Rt(X,q,K),u[p+3+32]=u[p+2+0]=Rt(J,X,q),u[p+3+0]=Rt(ie,J,X)}function Js(u,p){var x=u[p+1-32],U=u[p+2-32],H=u[p+3-32],K=u[p+4-32],q=u[p+5-32],X=u[p+6-32],J=u[p+7-32];u[p+0+0]=Rt(u[p+0-32],x,U),u[p+1+0]=u[p+0+32]=Rt(x,U,H),u[p+2+0]=u[p+1+32]=u[p+0+64]=Rt(U,H,K),u[p+3+0]=u[p+2+32]=u[p+1+64]=u[p+0+96]=Rt(H,K,q),u[p+3+32]=u[p+2+64]=u[p+1+96]=Rt(K,q,X),u[p+3+64]=u[p+2+96]=Rt(q,X,J),u[p+3+96]=Rt(X,J,J)}function Jo(u,p){var x=u[p-1+0],U=u[p-1+32],H=u[p-1+64],K=u[p-1-32],q=u[p+0-32],X=u[p+1-32],J=u[p+2-32],ie=u[p+3-32];u[p+0+0]=u[p+1+64]=K+q+1>>1,u[p+1+0]=u[p+2+64]=q+X+1>>1,u[p+2+0]=u[p+3+64]=X+J+1>>1,u[p+3+0]=J+ie+1>>1,u[p+0+96]=Rt(H,U,x),u[p+0+64]=Rt(U,x,K),u[p+0+32]=u[p+1+96]=Rt(x,K,q),u[p+1+32]=u[p+2+96]=Rt(K,q,X),u[p+2+32]=u[p+3+96]=Rt(q,X,J),u[p+3+32]=Rt(X,J,ie)}function kl(u,p){var x=u[p+0-32],U=u[p+1-32],H=u[p+2-32],K=u[p+3-32],q=u[p+4-32],X=u[p+5-32],J=u[p+6-32],ie=u[p+7-32];u[p+0+0]=x+U+1>>1,u[p+1+0]=u[p+0+64]=U+H+1>>1,u[p+2+0]=u[p+1+64]=H+K+1>>1,u[p+3+0]=u[p+2+64]=K+q+1>>1,u[p+0+32]=Rt(x,U,H),u[p+1+32]=u[p+0+96]=Rt(U,H,K),u[p+2+32]=u[p+1+96]=Rt(H,K,q),u[p+3+32]=u[p+2+96]=Rt(K,q,X),u[p+3+64]=Rt(q,X,J),u[p+3+96]=Rt(X,J,ie)}function Yo(u,p){var x=u[p-1+0],U=u[p-1+32],H=u[p-1+64],K=u[p-1+96];u[p+0+0]=x+U+1>>1,u[p+2+0]=u[p+0+32]=U+H+1>>1,u[p+2+32]=u[p+0+64]=H+K+1>>1,u[p+1+0]=Rt(x,U,H),u[p+3+0]=u[p+1+32]=Rt(U,H,K),u[p+3+32]=u[p+1+64]=Rt(H,K,K),u[p+3+64]=u[p+2+64]=u[p+0+96]=u[p+1+96]=u[p+2+96]=u[p+3+96]=K}function Zo(u,p){var x=u[p-1+0],U=u[p-1+32],H=u[p-1+64],K=u[p-1+96],q=u[p-1-32],X=u[p+0-32],J=u[p+1-32],ie=u[p+2-32];u[p+0+0]=u[p+2+32]=x+q+1>>1,u[p+0+32]=u[p+2+64]=U+x+1>>1,u[p+0+64]=u[p+2+96]=H+U+1>>1,u[p+0+96]=K+H+1>>1,u[p+3+0]=Rt(X,J,ie),u[p+2+0]=Rt(q,X,J),u[p+1+0]=u[p+3+32]=Rt(x,q,X),u[p+1+32]=u[p+3+64]=Rt(U,x,q),u[p+1+64]=u[p+3+96]=Rt(H,U,x),u[p+1+96]=Rt(K,H,U)}function ru(u,p){var x;for(x=0;8>x;++x)n(u,p+32*x,u,p-32,8)}function Oi(u,p){var x;for(x=0;8>x;++x)s(u,p,u[p-1],8),p+=32}function Ys(u,p,x){var U;for(U=0;8>U;++U)s(p,x+32*U,u,8)}function Mi(u,p){var x,U=8;for(x=0;8>x;++x)U+=u[p+x-32]+u[p-1+32*x];Ys(U>>4,u,p)}function Rl(u,p){var x,U=4;for(x=0;8>x;++x)U+=u[p+x-32];Ys(U>>3,u,p)}function gr(u,p){var x,U=4;for(x=0;8>x;++x)U+=u[p-1+32*x];Ys(U>>3,u,p)}function Dl(u,p){Ys(128,u,p)}function eA(u,p,x){var U=u[p-x],H=u[p+0],K=3*(H-U)+pv[1020+u[p-2*x]-u[p+x]],q=Yp[112+(K+4>>3)];u[p-x]=ei[255+U+Yp[112+(K+3>>3)]],u[p+0]=ei[255+H-q]}function Ol(u,p,x,U){var H=u[p+0],K=u[p+x];return yi[255+u[p-2*x]-u[p-x]]>U||yi[255+K-H]>U}function Ml(u,p,x,U){return 4*yi[255+u[p-x]-u[p+0]]+yi[255+u[p-2*x]-u[p+x]]<=U}function Hl(u,p,x,U,H){var K=u[p-3*x],q=u[p-2*x],X=u[p-x],J=u[p+0],ie=u[p+x],fe=u[p+2*x],Ee=u[p+3*x];return 4*yi[255+X-J]+yi[255+q-ie]>U?0:yi[255+u[p-4*x]-K]<=H&&yi[255+K-q]<=H&&yi[255+q-X]<=H&&yi[255+Ee-fe]<=H&&yi[255+fe-ie]<=H&&yi[255+ie-J]<=H}function Za(u,p,x,U){var H=2*U+1;for(U=0;16>U;++U)Ml(u,p+U,x,H)&&eA(u,p+U,x)}function Zs(u,p,x,U){var H=2*U+1;for(U=0;16>U;++U)Ml(u,p+U*x,1,H)&&eA(u,p+U*x,1)}function _n(u,p,x,U){var H;for(H=3;0<H;--H)Za(u,p+=4*x,x,U)}function nu(u,p,x,U){var H;for(H=3;0<H;--H)Zs(u,p+=4,x,U)}function xa(u,p,x,U,H,K,q,X){for(K=2*K+1;0<H--;){if(Hl(u,p,x,K,q))if(Ol(u,p,x,X))eA(u,p,x);else{var J=u,ie=p,fe=x,Ee=J[ie-2*fe],_e=J[ie-fe],ye=J[ie+0],He=J[ie+fe],Qe=J[ie+2*fe],pe=27*(Oe=pv[1020+3*(ye-_e)+pv[1020+Ee-He]])+63>>7,me=18*Oe+63>>7,Oe=9*Oe+63>>7;J[ie-3*fe]=ei[255+J[ie-3*fe]+Oe],J[ie-2*fe]=ei[255+Ee+me],J[ie-fe]=ei[255+_e+pe],J[ie+0]=ei[255+ye-pe],J[ie+fe]=ei[255+He-me],J[ie+2*fe]=ei[255+Qe-Oe]}p+=U}}function zn(u,p,x,U,H,K,q,X){for(K=2*K+1;0<H--;){if(Hl(u,p,x,K,q))if(Ol(u,p,x,X))eA(u,p,x);else{var J=u,ie=p,fe=x,Ee=J[ie-fe],_e=J[ie+0],ye=J[ie+fe],He=Yp[112+((Qe=3*(_e-Ee))+4>>3)],Qe=Yp[112+(Qe+3>>3)],pe=He+1>>1;J[ie-2*fe]=ei[255+J[ie-2*fe]+pe],J[ie-fe]=ei[255+Ee+Qe],J[ie+0]=ei[255+_e-He],J[ie+fe]=ei[255+ye-pe]}p+=U}}function tA(u,p,x,U,H,K){xa(u,p,x,1,16,U,H,K)}function Hi(u,p,x,U,H,K){xa(u,p,1,x,16,U,H,K)}function rA(u,p,x,U,H,K){var q;for(q=3;0<q;--q)zn(u,p+=4*x,x,1,16,U,H,K)}function eo(u,p,x,U,H,K){var q;for(q=3;0<q;--q)zn(u,p+=4,1,x,16,U,H,K)}function nA(u,p,x,U,H,K,q,X){xa(u,p,H,1,8,K,q,X),xa(x,U,H,1,8,K,q,X)}function Vl(u,p,x,U,H,K,q,X){xa(u,p,1,H,8,K,q,X),xa(x,U,1,H,8,K,q,X)}function sA(u,p,x,U,H,K,q,X){zn(u,p+4*H,H,1,8,K,q,X),zn(x,U+4*H,H,1,8,K,q,X)}function ba(u,p,x,U,H,K,q,X){zn(u,p+4,1,H,8,K,q,X),zn(x,U+4,1,H,8,K,q,X)}function to(){this.ba=new pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function iA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ro(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function aA(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new I}function su(){this.xb=this.a=0,this.l=new Wa,this.ca=new pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new aA,this.ab=0,this.gc=a(4,ro),this.Oc=0}function Vi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ba(u,p,x,U,H,K,q){for(u=u==null?0:u[p+0],p=0;p<q;++p)H[K+p]=u+x[U+p]&255,u=H[K+p]}function oA(u,p,x,U,H,K,q){var X;if(u==null)Ba(null,null,x,U,H,K,q);else for(X=0;X<q;++X)H[K+X]=u[p+X]+x[U+X]&255}function cs(u,p,x,U,H,K,q){if(u==null)Ba(null,null,x,U,H,K,q);else{var X,J=u[p+0],ie=J,fe=J;for(X=0;X<q;++X)ie=fe+(J=u[p+X])-ie,fe=x[U+X]+(-256&ie?0>ie?0:255:ie)&255,ie=J,H[K+X]=fe}}function AA(u,p,x,U){var H=p.width,K=p.o;if(e(u!=null&&p!=null),0>x||0>=U||x+U>K)return null;if(!u.Cc){if(u.ga==null){var q;if(u.ga=new Vi,(q=u.ga==null)||(q=p.width*p.o,e(u.Gb.length==0),u.Gb=i(q),u.Uc=0,u.Gb==null?q=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,q=1),q=!q),!q){q=u.ga;var X=u.Fa,J=u.P,ie=u.qc,fe=u.mb,Ee=u.nb,_e=J+1,ye=ie-1,He=q.l;if(e(X!=null&&fe!=null&&p!=null),fA[0]=null,fA[1]=Ba,fA[2]=oA,fA[3]=cs,q.ca=fe,q.tb=Ee,q.c=p.width,q.i=p.height,e(0<q.c&&0<q.i),1>=ie)p=0;else if(q.$a=X[J+0]>>0&3,q.Z=X[J+0]>>2&3,q.Lc=X[J+0]>>4&3,J=X[J+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||J)p=0;else if(He.put=hr,He.ac=qr,He.bc=Se,He.ma=q,He.width=p.width,He.height=p.height,He.Da=p.Da,He.v=p.v,He.va=p.va,He.j=p.j,He.o=p.o,q.$a)e:{e(q.$a==1),p=gt();t:for(;;){if(p==null){p=0;break e}if(e(q!=null),q.mc=p,p.c=q.c,p.i=q.i,p.l=q.l,p.l.ma=q,p.l.width=q.c,p.l.height=q.i,p.a=0,z(p.m,X,_e,ye),!Bs(q.c,q.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&et(p.s)?(q.ic=1,X=p.c*p.i,p.Ta=null,p.Ua=0,p.V=i(X),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(q.ic=0,p=fa(p,q.c)),!p))break t;p=1;break e}q.mc=null,p=0}else p=ye>=q.c*q.i;q=!p}if(q)return null;u.ga.Lc!=1?u.Ga=0:U=K-x}e(u.ga!=null),e(x+U<=K);e:{if(p=(X=u.ga).c,K=X.l.o,X.$a==0){if(_e=u.rc,ye=u.Vc,He=u.Fa,J=u.P+1+x*p,ie=u.mb,fe=u.nb+x*p,e(J<=u.P+u.qc),X.Z!=0)for(e(fA[X.Z]!=null),q=0;q<U;++q)fA[X.Z](_e,ye,He,J,ie,fe,p),_e=ie,ye=fe,fe+=p,J+=p;else for(q=0;q<U;++q)n(ie,fe,He,J,p),_e=ie,ye=fe,fe+=p,J+=p;u.rc=_e,u.Vc=ye}else{if(e(X.mc!=null),p=x+U,e((q=X.mc)!=null),e(p<=q.i),q.C>=p)p=1;else if(X.ic||we(),X.ic){X=q.V,_e=q.Ba,ye=q.c;var Qe=q.i,pe=(He=1,J=q.$/ye,ie=q.$%ye,fe=q.m,Ee=q.s,q.$),me=ye*Qe,Oe=ye*p,qe=Ee.wc,Me=pe<Oe?at(Ee,ie,J):null;e(pe<=me),e(p<=Qe),e(et(Ee));t:for(;;){for(;!fe.h&&pe<Oe;){if(ie&qe||(Me=at(Ee,ie,J)),e(Me!=null),oe(fe),256>(Qe=ut(Me.G[0],Me.H[0],fe)))X[_e+pe]=Qe,++pe,++ie>=ye&&(ie=0,++J<=p&&!(J%16)&&jt(q,J));else{if(!(280>Qe)){He=0;break t}Qe=Et(Qe-256,fe);var wt,At=ut(Me.G[4],Me.H[4],fe);if(oe(fe),!(pe>=(At=ft(ye,At=Et(At,fe)))&&me-pe>=Qe)){He=0;break t}for(wt=0;wt<Qe;++wt)X[_e+pe+wt]=X[_e+pe+wt-At];for(pe+=Qe,ie+=Qe;ie>=ye;)ie-=ye,++J<=p&&!(J%16)&&jt(q,J);pe<Oe&&ie&qe&&(Me=at(Ee,ie,J))}e(fe.h==W(fe))}jt(q,J>p?p:J);break t}!He||fe.h&&pe<me?(He=0,q.a=fe.h?5:3):q.$=pe,p=He}else p=Wt(q,q.V,q.Ba,q.c,q.i,p,pa);if(!p){U=0;break e}}x+U>=K&&(u.Cc=1),U=1}if(!U)return null;if(u.Cc&&((U=u.ga)!=null&&(U.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+x*H}function v(u,p,x,U,H,K){for(;0<H--;){var q,X=u,J=p+(x?1:0),ie=u,fe=p+(x?0:3);for(q=0;q<U;++q){var Ee=ie[fe+4*q];Ee!=255&&(Ee*=32897,X[J+4*q+0]=X[J+4*q+0]*Ee>>23,X[J+4*q+1]=X[J+4*q+1]*Ee>>23,X[J+4*q+2]=X[J+4*q+2]*Ee>>23)}p+=K}}function M(u,p,x,U,H){for(;0<U--;){var K;for(K=0;K<x;++K){var q=u[p+2*K+0],X=15&(ie=u[p+2*K+1]),J=4369*X,ie=(240&ie|ie>>4)*J>>16;u[p+2*K+0]=(240&q|q>>4)*J>>16&240|(15&q|q<<4)*J>>16>>4&15,u[p+2*K+1]=240&ie|X}p+=H}}function le(u,p,x,U,H,K,q,X){var J,ie,fe=255;for(ie=0;ie<H;++ie){for(J=0;J<U;++J){var Ee=u[p+J];K[q+4*J]=Ee,fe&=Ee}p+=x,q+=X}return fe!=255}function he(u,p,x,U,H){var K;for(K=0;K<H;++K)x[U+K]=u[p+K]>>8}function we(){vi=v,Qr=M,Lr=le,dn=he}function je(u,p,x){_[u]=function(U,H,K,q,X,J,ie,fe,Ee,_e,ye,He,Qe,pe,me,Oe,qe){var Me,wt=qe-1>>1,At=X[J+0]|ie[fe+0]<<16,Qt=Ee[_e+0]|ye[He+0]<<16;e(U!=null);var dt=3*At+Qt+131074>>2;for(p(U[H+0],255&dt,dt>>16,Qe,pe),K!=null&&(dt=3*Qt+At+131074>>2,p(K[q+0],255&dt,dt>>16,me,Oe)),Me=1;Me<=wt;++Me){var fr=X[J+Me]|ie[fe+Me]<<16,xr=Ee[_e+Me]|ye[He+Me]<<16,lr=At+fr+Qt+xr+524296,rr=lr+2*(fr+Qt)>>3;dt=rr+At>>1,At=(lr=lr+2*(At+xr)>>3)+fr>>1,p(U[H+2*Me-1],255&dt,dt>>16,Qe,pe+(2*Me-1)*x),p(U[H+2*Me-0],255&At,At>>16,Qe,pe+(2*Me-0)*x),K!=null&&(dt=lr+Qt>>1,At=rr+xr>>1,p(K[q+2*Me-1],255&dt,dt>>16,me,Oe+(2*Me-1)*x),p(K[q+2*Me+0],255&At,At>>16,me,Oe+(2*Me+0)*x)),At=fr,Qt=xr}1&qe||(dt=3*At+Qt+131074>>2,p(U[H+qe-1],255&dt,dt>>16,Qe,pe+(qe-1)*x),K!=null&&(dt=3*Qt+At+131074>>2,p(K[q+qe-1],255&dt,dt>>16,me,Oe+(qe-1)*x)))}}function $e(){xi[Zp]=W3,xi[em]=NB,xi[bB]=X3,xi[tm]=IB,xi[rm]=SB,xi[mv]=FB,xi[BB]=J3,xi[gv]=NB,xi[wv]=IB,xi[nm]=SB,xi[vv]=FB}function lt(u){return u&-16384?0>u?0:255:u>>Y3}function h(u,p){return lt((19077*u>>8)+(26149*p>>8)-14234)}function E(u,p,x){return lt((19077*u>>8)-(6419*p>>8)-(13320*x>>8)+8708)}function Q(u,p){return lt((19077*u>>8)+(33050*p>>8)-17685)}function $(u,p,x,U,H){U[H+0]=h(u,x),U[H+1]=E(u,p,x),U[H+2]=Q(u,p)}function ge(u,p,x,U,H){U[H+0]=Q(u,p),U[H+1]=E(u,p,x),U[H+2]=h(u,x)}function Ne(u,p,x,U,H){var K=E(u,p,x);p=K<<3&224|Q(u,p)>>3,U[H+0]=248&h(u,x)|K>>5,U[H+1]=p}function We(u,p,x,U,H){var K=240&Q(u,p)|15;U[H+0]=240&h(u,x)|E(u,p,x)>>4,U[H+1]=K}function Ht(u,p,x,U,H){U[H+0]=255,$(u,p,x,U,H+1)}function tr(u,p,x,U,H){ge(u,p,x,U,H),U[H+3]=255}function Vt(u,p,x,U,H){$(u,p,x,U,H),U[H+3]=255}function wr(u,p){return 0>u?0:u>p?p:u}function Fr(u,p,x){_[u]=function(U,H,K,q,X,J,ie,fe,Ee){for(var _e=fe+(-2&Ee)*x;fe!=_e;)p(U[H+0],K[q+0],X[J+0],ie,fe),p(U[H+1],K[q+0],X[J+0],ie,fe+x),H+=2,++q,++J,fe+=2*x;1&Ee&&p(U[H+0],K[q+0],X[J+0],ie,fe)}}function Ki(u,p,x){return x==0?u==0?p==0?6:5:p==0?4:0:x}function $n(u,p,x,U,H){switch(u>>>30){case 3:io(p,x,U,H,0);break;case 2:un(p,x,U,H);break;case 1:_s(p,x,U,H)}}function Ca(u,p){var x,U,H=p.M,K=p.Nb,q=u.oc,X=u.pc+40,J=u.oc,ie=u.pc+584,fe=u.oc,Ee=u.pc+600;for(x=0;16>x;++x)q[X+32*x-1]=129;for(x=0;8>x;++x)J[ie+32*x-1]=129,fe[Ee+32*x-1]=129;for(0<H?q[X-1-32]=J[ie-1-32]=fe[Ee-1-32]=129:(s(q,X-32-1,127,21),s(J,ie-32-1,127,9),s(fe,Ee-32-1,127,9)),U=0;U<u.za;++U){var _e=p.ya[p.aa+U];if(0<U){for(x=-1;16>x;++x)n(q,X+32*x-4,q,X+32*x+12,4);for(x=-1;8>x;++x)n(J,ie+32*x-4,J,ie+32*x+4,4),n(fe,Ee+32*x-4,fe,Ee+32*x+4,4)}var ye=u.Gd,He=u.Hd+U,Qe=_e.ad,pe=_e.Hc;if(0<H&&(n(q,X-32,ye[He].y,0,16),n(J,ie-32,ye[He].f,0,8),n(fe,Ee-32,ye[He].ea,0,8)),_e.Za){var me=q,Oe=X-32+16;for(0<H&&(U>=u.za-1?s(me,Oe,ye[He].y[15],4):n(me,Oe,ye[He+1].y,0,4)),x=0;4>x;x++)me[Oe+128+x]=me[Oe+256+x]=me[Oe+384+x]=me[Oe+0+x];for(x=0;16>x;++x,pe<<=2)me=q,Oe=X+UB[x],qi[_e.Ob[x]](me,Oe),$n(pe,Qe,16*+x,me,Oe)}else if(me=Ki(U,H,_e.Ob[0]),hA[me](q,X),pe!=0)for(x=0;16>x;++x,pe<<=2)$n(pe,Qe,16*+x,q,X+UB[x]);for(x=_e.Gc,me=Ki(U,H,_e.Dd),oo[me](J,ie),oo[me](fe,Ee),pe=Qe,me=J,Oe=ie,255&(_e=x>>0)&&(170&_e?oh(pe,256,me,Oe):gi(pe,256,me,Oe)),_e=fe,pe=Ee,255&(x>>=8)&&(170&x?oh(Qe,320,_e,pe):gi(Qe,320,_e,pe)),H<u.Ub-1&&(n(ye[He].y,0,q,X+480,16),n(ye[He].f,0,J,ie+224,8),n(ye[He].ea,0,fe,Ee+224,8)),x=8*K*u.B,ye=u.sa,He=u.ta+16*U+16*K*u.R,Qe=u.qa,_e=u.ra+8*U+x,pe=u.Ha,me=u.Ia+8*U+x,x=0;16>x;++x)n(ye,He+x*u.R,q,X+32*x,16);for(x=0;8>x;++x)n(Qe,_e+x*u.B,J,ie+32*x,8),n(pe,me+x*u.B,fe,Ee+32*x,8)}}function Ea(u,p,x,U,H,K,q,X,J){var ie=[0],fe=[0],Ee=0,_e=J!=null?J.kd:0,ye=J??new iA;if(u==null||12>x)return 7;ye.data=u,ye.w=p,ye.ha=x,p=[p],x=[x],ye.gb=[ye.gb];e:{var He=p,Qe=x,pe=ye.gb;if(e(u!=null),e(Qe!=null),e(pe!=null),pe[0]=0,12<=Qe[0]&&!r(u,He[0],"RIFF")){if(r(u,He[0]+8,"WEBP")){pe=3;break e}var me=Ve(u,He[0]+4);if(12>me||4294967286<me){pe=3;break e}if(_e&&me>Qe[0]-8){pe=7;break e}pe[0]=me,He[0]+=12,Qe[0]-=12}pe=0}if(pe!=0)return pe;for(me=0<ye.gb[0],x=x[0];;){e:{var Oe=u;Qe=p,pe=x;var qe=ie,Me=fe,wt=He=[0];if((dt=Ee=[Ee])[0]=0,8>pe[0])pe=7;else{if(!r(Oe,Qe[0],"VP8X")){if(Ve(Oe,Qe[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var At=Ve(Oe,Qe[0]+8),Qt=1+Te(Oe,Qe[0]+12);if(2147483648<=Qt*(Oe=1+Te(Oe,Qe[0]+15))){pe=3;break e}wt!=null&&(wt[0]=At),qe!=null&&(qe[0]=Qt),Me!=null&&(Me[0]=Oe),Qe[0]+=18,pe[0]-=18,dt[0]=1}pe=0}}if(Ee=Ee[0],He=He[0],pe!=0)return pe;if(Qe=!!(2&He),!me&&Ee)return 3;if(K!=null&&(K[0]=!!(16&He)),q!=null&&(q[0]=Qe),X!=null&&(X[0]=0),q=ie[0],He=fe[0],Ee&&Qe&&J==null){pe=0;break}if(4>x){pe=7;break}if(me&&Ee||!me&&!Ee&&!r(u,p[0],"ALPH")){x=[x],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{At=u,pe=p,me=x;var dt=ye.gb;qe=ye.na,Me=ye.P,wt=ye.Sa,Qt=22,e(At!=null),e(me!=null),Oe=pe[0];var fr=me[0];for(e(qe!=null),e(wt!=null),qe[0]=null,Me[0]=null,wt[0]=0;;){if(pe[0]=Oe,me[0]=fr,8>fr){pe=7;break e}var xr=Ve(At,Oe+4);if(4294967286<xr){pe=3;break e}var lr=8+xr+1&-2;if(Qt+=lr,0<dt&&Qt>dt){pe=3;break e}if(!r(At,Oe,"VP8 ")||!r(At,Oe,"VP8L")){pe=0;break e}if(fr[0]<lr){pe=7;break e}r(At,Oe,"ALPH")||(qe[0]=At,Me[0]=Oe+8,wt[0]=xr),Oe+=lr,fr-=lr}}if(x=x[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],pe!=0)break}x=[x],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(dt=u,pe=p,me=x,qe=ye.gb[0],Me=ye.Ja,wt=ye.xa,At=pe[0],Oe=!r(dt,At,"VP8 "),Qt=!r(dt,At,"VP8L"),e(dt!=null),e(me!=null),e(Me!=null),e(wt!=null),8>me[0])pe=7;else{if(Oe||Qt){if(dt=Ve(dt,At+4),12<=qe&&dt>qe-12){pe=3;break e}if(_e&&dt>me[0]-8){pe=7;break e}Me[0]=dt,pe[0]+=8,me[0]-=8,wt[0]=Qt}else wt[0]=5<=me[0]&&dt[At+0]==47&&!(dt[At+4]>>5),Me[0]=me[0];pe=0}if(x=x[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],p=p[0],pe!=0)break;if(4294967286<ye.Ja)return 3;if(X==null||Qe||(X[0]=ye.xa?2:1),q=[q],He=[He],ye.xa){if(5>x){pe=7;break}X=q,_e=He,Qe=K,u==null||5>x?u=0:5<=x&&u[p+0]==47&&!(u[p+4]>>5)?(me=[0],dt=[0],qe=[0],z(Me=new P,u,p,x),De(Me,me,dt,qe)?(X!=null&&(X[0]=me[0]),_e!=null&&(_e[0]=dt[0]),Qe!=null&&(Qe[0]=qe[0]),u=1):u=0):u=0}else{if(10>x){pe=7;break}X=He,u==null||10>x||!Ul(u,p+3,x-3)?u=0:(_e=u[p+0]|u[p+1]<<8|u[p+2]<<16,Qe=16383&(u[p+7]<<8|u[p+6]),u=16383&(u[p+9]<<8|u[p+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=ye.Ja||!Qe||!u?u=0:(q&&(q[0]=Qe),X&&(X[0]=u),u=1))}if(!u||(q=q[0],He=He[0],Ee&&(ie[0]!=q||fe[0]!=He)))return 3;J!=null&&(J[0]=ye,J.offset=p-J.w,e(4294967286>p-J.w),e(J.offset==J.ha-x));break}return pe==0||pe==7&&Ee&&J==null?(K!=null&&(K[0]|=ye.na!=null&&0<ye.na.length),U!=null&&(U[0]=q),H!=null&&(H[0]=He),0):pe}function nh(u,p,x){var U=p.width,H=p.height,K=0,q=0,X=U,J=H;if(p.Da=u!=null&&0<u.Da,p.Da&&(X=u.cd,J=u.bd,K=u.v,q=u.j,11>x||(K&=-2,q&=-2),0>K||0>q||0>=X||0>=J||K+X>U||q+J>H))return 0;if(p.v=K,p.j=q,p.va=K+X,p.o=q+J,p.U=X,p.T=J,p.da=u!=null&&0<u.da,p.da){if(!Re(X,J,x=[u.ib],K=[u.hb]))return 0;p.ib=x[0],p.hb=K[0]}return p.ob=u!=null&&u.ob,p.Kb=u==null||!u.Sd,p.da&&(p.ob=p.ib<3*U/4&&p.hb<3*H/4,p.Kb=0),1}function sh(u){if(u==null)return 2;if(11>u.S){var p=u.f.RGBA;p.fb+=(u.height-1)*p.A,p.A=-p.A}else p=u.f.kb,u=u.height,p.O+=(u-1)*p.fa,p.fa=-p.fa,p.N+=(u-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(u-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(u-1)*p.lb,p.lb=-p.lb);return 0}function iu(u,p,x,U){if(U==null||0>=u||0>=p)return 2;if(x!=null){if(x.Da){var H=x.cd,K=x.bd,q=-2&x.v,X=-2&x.j;if(0>q||0>X||0>=H||0>=K||q+H>u||X+K>p)return 2;u=H,p=K}if(x.da){if(!Re(u,p,H=[x.ib],K=[x.hb]))return 2;u=H[0],p=K[0]}}U.width=u,U.height=p;e:{var J=U.width,ie=U.height;if(u=U.S,0>=J||0>=ie||!(u>=Zp&&13>u))u=2;else{if(0>=U.Rd&&U.sd==null){q=K=H=p=0;var fe=(X=J*PB[u])*ie;if(11>u||(K=(ie+1)/2*(p=(J+1)/2),u==12&&(q=(H=J)*ie)),(ie=i(fe+2*K+q))==null){u=1;break e}U.sd=ie,11>u?((J=U.f.RGBA).eb=ie,J.fb=0,J.A=X,J.size=fe):((J=U.f.kb).y=ie,J.O=0,J.fa=X,J.Fd=fe,J.f=ie,J.N=0+fe,J.Ab=p,J.Cd=K,J.ea=ie,J.W=0+fe+K,J.Db=p,J.Ed=K,u==12&&(J.F=ie,J.J=0+fe+2*K),J.Tc=q,J.lb=H)}if(p=1,H=U.S,K=U.width,q=U.height,H>=Zp&&13>H)if(11>H)u=U.f.RGBA,p&=(X=Math.abs(u.A))*(q-1)+K<=u.size,p&=X>=K*PB[H],p&=u.eb!=null;else{u=U.f.kb,X=(K+1)/2,fe=(q+1)/2,J=Math.abs(u.fa),ie=Math.abs(u.Ab);var Ee=Math.abs(u.Db),_e=Math.abs(u.lb),ye=_e*(q-1)+K;p&=J*(q-1)+K<=u.Fd,p&=ie*(fe-1)+X<=u.Cd,p=(p&=Ee*(fe-1)+X<=u.Ed)&J>=K&ie>=X&Ee>=X,p&=u.y!=null,p&=u.f!=null,p&=u.ea!=null,H==12&&(p&=_e>=K,p&=ye<=u.Tc,p&=u.F!=null)}else p=0;u=p?0:2}}return u!=0||x!=null&&x.fd&&(u=sh(U)),u}var Wn=64,au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ou=24,Au=32,ih=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(u){return u},_.Predictor2=function(u,p,x){return p[x+0]},_.Predictor3=function(u,p,x){return p[x+1]},_.Predictor4=function(u,p,x){return p[x-1]},_.Predictor5=function(u,p,x){return Ge(Ge(u,p[x+1]),p[x+0])},_.Predictor6=function(u,p,x){return Ge(u,p[x-1])},_.Predictor7=function(u,p,x){return Ge(u,p[x+0])},_.Predictor8=function(u,p,x){return Ge(p[x-1],p[x+0])},_.Predictor9=function(u,p,x){return Ge(p[x+0],p[x+1])},_.Predictor10=function(u,p,x){return Ge(Ge(u,p[x-1]),Ge(p[x+0],p[x+1]))},_.Predictor11=function(u,p,x){var U=p[x+0];return 0>=Ke(U>>24&255,u>>24&255,(p=p[x-1])>>24&255)+Ke(U>>16&255,u>>16&255,p>>16&255)+Ke(U>>8&255,u>>8&255,p>>8&255)+Ke(255&U,255&u,255&p)?U:u},_.Predictor12=function(u,p,x){var U=p[x+0];return(it((u>>24&255)+(U>>24&255)-((p=p[x-1])>>24&255))<<24|it((u>>16&255)+(U>>16&255)-(p>>16&255))<<16|it((u>>8&255)+(U>>8&255)-(p>>8&255))<<8|it((255&u)+(255&U)-(255&p)))>>>0},_.Predictor13=function(u,p,x){var U=p[x-1];return(Be((u=Ge(u,p[x+0]))>>24&255,U>>24&255)<<24|Be(u>>16&255,U>>16&255)<<16|Be(u>>8&255,U>>8&255)<<8|Be(u>>0&255,U>>0&255))>>>0};var fv=_.PredictorAdd0;_.PredictorAdd1=ze,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var ah=_.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var zp,mi=_.ColorIndexInverseTransform,lu=_.MapARGB,$p=_.VP8LColorIndexInverseTransformAlpha,Wp=_.MapAlpha,lA=_.VP8LPredictorsAdd=[];lA.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Kl,Ds,Es,cA,no,so,cu,io,un,oh,_s,gi,uu,Xp,Ah,ql,Gl,uA,zl,du,$l,dA,lh,wi,vi,Qr,Lr,dn,Nn=i(511),ao=i(2041),ch=i(225),hu=i(767),Jp=0,pv=ao,Yp=ch,ei=hu,yi=Nn,Zp=0,em=1,bB=2,tm=3,rm=4,mv=5,BB=6,gv=7,wv=8,nm=9,vv=10,L3=[2,3,7],j3=[3,3,11],CB=[280,256,256,256,40],k3=[0,1,1,1,0],R3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],D3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],O3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],M3=8,yv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uh=null,H3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],V3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],EB=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],K3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],q3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],G3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],z3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hA=[],qi=[],oo=[],$3=1,_B=2,fA=[],xi=[];je("UpsampleRgbLinePair",$,3),je("UpsampleBgrLinePair",ge,3),je("UpsampleRgbaLinePair",Vt,4),je("UpsampleBgraLinePair",tr,4),je("UpsampleArgbLinePair",Ht,4),je("UpsampleRgba4444LinePair",We,2),je("UpsampleRgb565LinePair",Ne,2);var W3=_.UpsampleRgbLinePair,X3=_.UpsampleBgrLinePair,NB=_.UpsampleRgbaLinePair,IB=_.UpsampleBgraLinePair,SB=_.UpsampleArgbLinePair,FB=_.UpsampleRgba4444LinePair,J3=_.UpsampleRgb565LinePair,sm=16,im=1<<sm-1,dh=-227,bv=482,Y3=6,TB=0,Z3=i(256),eP=i(256),tP=i(256),rP=i(256),nP=i(bv-dh),sP=i(bv-dh);Fr("YuvToRgbRow",$,3),Fr("YuvToBgrRow",ge,3),Fr("YuvToRgbaRow",Vt,4),Fr("YuvToBgraRow",tr,4),Fr("YuvToArgbRow",Ht,4),Fr("YuvToRgba4444Row",We,2),Fr("YuvToRgb565Row",Ne,2);var UB=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],am=[0,2,8],iP=[8,7,6,4,4,2,2,2,1,1,1,1],aP=1;this.WebPDecodeRGBA=function(u,p,x,U,H){var K=em,q=new to,X=new pr;q.ba=X,X.S=K,X.width=[X.width],X.height=[X.height];var J=X.width,ie=X.height,fe=new cn;if(fe==null||u==null)var Ee=2;else e(fe!=null),Ee=Ea(u,p,x,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Ee!=0?J=0:(J!=null&&(J[0]=fe.width[0]),ie!=null&&(ie[0]=fe.height[0]),J=1),J){X.width=X.width[0],X.height=X.height[0],U!=null&&(U[0]=X.width),H!=null&&(H[0]=X.height);e:{if(U=new Wa,(H=new iA).data=u,H.w=p,H.ha=x,H.kd=1,p=[0],e(H!=null),((u=Ea(H.data,H.w,H.ha,null,null,null,p,null,H))==0||u==7)&&p[0]&&(u=4),(p=u)==0){if(e(q!=null),U.data=H.data,U.w=H.w+H.offset,U.ha=H.ha-H.offset,U.put=hr,U.ac=qr,U.bc=Se,U.ma=q,H.xa){if((u=gt())==null){q=1;break e}if(function(_e,ye){var He=[0],Qe=[0],pe=[0];t:for(;;){if(_e==null)return 0;if(ye==null)return _e.a=2,0;if(_e.l=ye,_e.a=0,z(_e.m,ye.data,ye.w,ye.ha),!De(_e.m,He,Qe,pe)){_e.a=3;break t}if(_e.xb=_B,ye.width=He[0],ye.height=Qe[0],!Bs(He[0],Qe[0],1,_e,null))break t;return 1}return e(_e.a!=0),0}(u,U)){if(U=(p=iu(U.width,U.height,q.Oa,q.ba))==0){t:{U=u;r:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((x=U.l)!=null),e((H=x.ma)!=null),U.xb!=0){if(U.ca=H.ba,U.tb=H.tb,e(U.ca!=null),!nh(H.Oa,x,tm)){U.a=2;break r}if(!fa(U,x.width)||x.da)break r;if((x.da||qt(U.ca.S))&&we(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&we()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!te(U.s.vb,U.s.Wa.Xa)){U.a=1;break r}U.xb=0}if(!Wt(U,U.V,U.Ba,U.c,U.i,x.o,ve))break r;H.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(p=u.a)}else p=u.a}else{if((u=new Tl)==null){q=1;break e}if(u.Fa=H.na,u.P=H.P,u.qc=H.Sa,Pl(u,U)){if((p=iu(U.width,U.height,q.Oa,q.ba))==0){if(u.Aa=0,x=q.Oa,e((H=u)!=null),x!=null){if(0<(J=0>(J=x.Md)?0:100<J?255:255*J/100)){for(ie=fe=0;4>ie;++ie)12>(Ee=H.pb[ie]).lc&&(Ee.ia=J*iP[0>Ee.lc?0:Ee.lc]>>3),fe|=Ee.ia;fe&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=x.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}Yc(u,U)||(p=u.a)}}else p=u.a}p==0&&q.Oa!=null&&q.Oa.fd&&(p=sh(q.ba))}q=p}K=q!=0?null:11>K?X.f.RGBA.eb:X.f.kb.y}else K=null;return K};var PB=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(_,L){for(var D="",S=0;S<4;S++)D+=String.fromCharCode(_[L++]);return D}function d(_,L){return(_[L+0]<<0|_[L+1]<<8|_[L+2]<<16)>>>0}function f(_,L){return(_[L+0]<<0|_[L+1]<<8|_[L+2]<<16|_[L+3]<<24)>>>0}new A;var m=[0],g=[0],B=[],C=new A,b=t,y=function(_,L){var D={},S=0,I=!1,F=0,Y=0;if(D.frames=[],!function(k,W,re,oe){for(var Z=0;Z<oe;Z++)if(k[W+Z]!=re.charCodeAt(Z))return!0;return!1}(_,L,"RIFF",4)){for(f(_,L+=4),L+=8;L<_.length;){var ue=c(_,L),ne=f(_,L+=4);L+=4;var se=ne+(1&ne);switch(ue){case"VP8 ":case"VP8L":D.frames[S]===void 0&&(D.frames[S]={}),(ae=D.frames[S]).src_off=I?Y:L-8,ae.src_size=F+ne+8,S++,I&&(I=!1,F=0,Y=0);break;case"VP8X":(ae=D.header={}).feature_flags=_[L];var z=L+4;ae.canvas_width=1+d(_,z),z+=3,ae.canvas_height=1+d(_,z),z+=3;break;case"ALPH":I=!0,F=se+8,Y=L-8;break;case"ANIM":(ae=D.header).bgcolor=f(_,L),z=L+4,ae.loop_count=(Ce=_)[(P=z)+0]<<0|Ce[P+1]<<8,z+=2;break;case"ANMF":var ce,ae;(ae=D.frames[S]={}).offset_x=2*d(_,L),L+=3,ae.offset_y=2*d(_,L),L+=3,ae.width=1+d(_,L),L+=3,ae.height=1+d(_,L),L+=3,ae.duration=d(_,L),L+=3,ce=_[L++],ae.dispose=1&ce,ae.blend=ce>>1&1}ue!="ANMF"&&(L+=se)}var Ce,P;return D}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,N=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],g=[w.canvas_width];for(var R=0;R<N.length&&N[R].blend!=0;R++);}var V=N[0],O=C.WebPDecodeRGBA(b,V.src_off,V.src_size,g,m);V.rgba=O,V.imgwidth=g[0],V.imgheight=m[0];for(var T=0;T<g[0]*m[0]*4;T++)B[T]=O[T];return this.width=g,this.height=m,this.data=B,this}(function(t){var e=function(){return typeof Y2=="function"},r=function(m,g,B,C){var b=4,y=a;switch(C){case t.image_compression.FAST:b=1,y=i;break;case t.image_compression.MEDIUM:b=6,y=o;break;case t.image_compression.SLOW:b=9,y=A}m=n(m,g,B,y);var w=Y2(m,{level:b});return t.__addimage__.arrayBufferToBinaryString(w)},n=function(m,g,B,C){for(var b,y,w,N=m.length/g,R=new Uint8Array(m.length+N),V=d(),O=0;O<N;O+=1){if(w=O*g,b=m.subarray(w,w+g),C)R.set(C(b,B,y),w+O);else{for(var T,_=V.length,L=[];T<_;T+=1)L[T]=V[T](b,B,y);var D=f(L.concat());R.set(L[D],w+O)}y=b}return R},s=function(m){var g=Array.apply([],m);return g.unshift(0),g},i=function(m,g){var B,C=[],b=m.length;C[0]=1;for(var y=0;y<b;y+=1)B=m[y-g]||0,C[y+1]=m[y]-B+256&255;return C},a=function(m,g,B){var C,b=[],y=m.length;b[0]=2;for(var w=0;w<y;w+=1)C=B&&B[w]||0,b[w+1]=m[w]-C+256&255;return b},o=function(m,g,B){var C,b,y=[],w=m.length;y[0]=3;for(var N=0;N<w;N+=1)C=m[N-g]||0,b=B&&B[N]||0,y[N+1]=m[N]+256-(C+b>>>1)&255;return y},A=function(m,g,B){var C,b,y,w,N=[],R=m.length;N[0]=4;for(var V=0;V<R;V+=1)C=m[V-g]||0,b=B&&B[V]||0,y=B&&B[V-g]||0,w=c(C,b,y),N[V+1]=m[V]-w+256&255;return N},c=function(m,g,B){if(m===g&&g===B)return m;var C=Math.abs(g-B),b=Math.abs(m-B),y=Math.abs(m+g-B-B);return C<=b&&C<=y?m:b<=y?g:B},d=function(){return[s,i,a,o,A]},f=function(m){var g=m.map(function(B){return B.reduce(function(C,b){return C+Math.abs(b)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,B,C){var b,y,w,N,R,V,O,T,_,L,D,S,I,F,Y,ue=this.decode.FLATE_DECODE,ne="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(w=new Dz(m)).imgData,y=w.bits,b=w.colorSpace,R=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){_=(T=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,D=new Uint8Array(_*w.colors),L=new Uint8Array(_);var se,z=w.pixelBitlength-w.bits;for(F=0,Y=0;F<_;F++){for(I=T[F],se=0;se<z;)D[Y++]=I>>>se&255,se+=w.bits;L[F]=I>>>se&255}}if(w.bits===16){_=(T=new Uint32Array(w.decodePixels().buffer)).length,D=new Uint8Array(_*(32/w.pixelBitlength)*w.colors),L=new Uint8Array(_*(32/w.pixelBitlength)),S=w.colors>1,F=0,Y=0;for(var ce=0;F<_;)I=T[F++],D[Y++]=I>>>0&255,S&&(D[Y++]=I>>>16&255,I=T[F++],D[Y++]=I>>>0&255),L[ce++]=I>>>16&255;y=8}C!==t.image_compression.NONE&&e()?(m=r(D,w.width*w.colors,w.colors,C),O=r(L,w.width,1,C)):(m=D,O=L,ue=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,V=w.palette,w.transparency.indexed)){var ae=w.transparency.indexed,Ce=0;for(F=0,_=ae.length;F<_;++F)Ce+=ae[F];if((Ce/=255)===_-1&&ae.indexOf(0)!==-1)N=[ae.indexOf(0)];else if(Ce!==_){for(T=w.decodePixels(),L=new Uint8Array(T.length),F=0,_=T.length;F<_;F++)L[F]=ae[T[F]];O=r(L,w.width,1)}}var P=function(k){var W;switch(k){case t.image_compression.FAST:W=11;break;case t.image_compression.MEDIUM:W=13;break;case t.image_compression.SLOW:W=14;break;default:W=12}return W}(C);return ue===this.decode.FLATE_DECODE&&(ne="/Predictor "+P+" "),ne+="/Colors "+R+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:B,data:m,index:g,filter:ue,decodeParameters:ne,transparency:N,palette:V,sMask:O,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:b}}}})(Ut.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new Oz(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},d=new zy(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(Ut.API),Wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ur.log("bit decode error:"+r)}},Wi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Wi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Wi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Wi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,d=n*this.width*4+4*s;this.data[d]=A,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},Wi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=A,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Wi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Wi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},Wi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Wi(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new zy(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Ut.API),vN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new vN(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new zy(100).encode(A,100);return t.processJPEG.call(this,c,r,n,s)}}(Ut.API),Ut.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var d=n[c],f=n[c+1],m=n[c+2],g=n[c+3];i[o++]=d,i[o++]=f,i[o++]=m,a[A++]=g}var B=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:B,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Ut.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Tu=Ut.API,fg=Tu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,f=e.doKerning!==!1,m=0,g=t.length,B=0,C=o[0]||A,b=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(m=f&&Er(c[n])==="object"&&!isNaN(parseInt(c[n][B],10))?c[n][B]/d:0,b.push((o[n]||C)/A+m)),B=n;return b},pN=Tu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Tu.processArabic&&(t=Tu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:fg.apply(this,arguments).reduce(function(i,a){return i+a},0)},mN=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},gN=function(t,e,r){r||(r={});var n,s,i,a,o,A,c,d=[],f=[d],m=r.textIndent||0,g=0,B=0,C=t.split(" "),b=fg.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?C[0].length+2:r.lineIndent||0){var y=Array(A).join(" "),w=[];C.map(function(R){(R=R.split(/\s*\n/)).length>1?w=w.concat(R.map(function(V,O){return(O&&V.length?`
`:"")+V})):w.push(R[0])}),C=w,A=pN.apply(this,[y,r])}for(i=0,a=C.length;i<a;i++){var N=0;if(n=C[i],A&&n[0]==`
`&&(n=n.substr(1),N=1),m+g+(B=(s=fg.apply(this,[n,r])).reduce(function(R,V){return R+V},0))>e||N){if(B>e){for(o=mN.apply(this,[n,s,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);B=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(R,V){return R+V},0)}else d=[n];f.push(d),m=B+A,g=b}else d.push(n),m+=g+B,g=b}return c=A?function(R,V){return(V?y:"")+R.join(" ")}:function(R){return R.join(" ")},f.map(c)},Tu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,A,c=[];for(o=0,A=n.length;o<A;o++)c=c.concat(gN.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},a=t.__fontmetrics__.compress=function(f){var m,g,B,C,b=["{"];for(var y in f){if(m=f[y],isNaN(parseInt(y,10))?g="'"+y+"'":(y=parseInt(y,10),g=(g=i(y).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(B=i(m).slice(3),C="-"):(B=i(m).slice(2),C=""),B=C+B.slice(0,-1)+n[B.slice(-1)];else{if(Er(m)!=="object")throw new Error("Don't know what to do with value type "+Er(m)+".");B=a(m)}b.push(g+B)}return b.push("}"),b.join("")},o=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,B,C,b={},y=1,w=b,N=[],R="",V="",O=f.length-1,T=1;T<O;T+=1)(C=f[T])=="'"?m?(B=m.join(""),m=void 0):m=[]:m?m.push(C):C=="{"?(N.push([w,B]),w={},B=void 0):C=="}"?((g=N.pop())[0][g[1]]=w,B=void 0,w=g[0]):C=="-"?y=-1:B===void 0?r.hasOwnProperty(C)?(R+=r[C],B=parseInt(R,16)*y,y=1,R=""):R+=C:r.hasOwnProperty(C)?(V+=r[C],w[B]=parseInt(V,16)*y,y=1,B=void 0,V=""):V+=C;return b},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var m=f.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var B=c.Unicode[m.postScriptName];B&&(m.metadata.Unicode.encoding=B,m.encoding=B.codePages[0])}])}(Ut.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(If(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Ut),function(t){function e(){return(kt.canvg?Promise.resolve(kt.canvg):Po(()=>import("./index.es-B48_Xuzx.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ut.API.addSvgAsImage=function(r,n,s,i,a,o,A,c){if(isNaN(n)||isNaN(s))throw Ur.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Ur.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(B){return B.fromString(f,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(B){return B.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,s,i,a,A,c)})}}(),Ut.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Ut.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,d=0,f=0;function m(B,C){var b,y=!1;for(b=0;b<B.length;b+=1)B[b]===C&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(f=0;f<g;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Er(t)==="object"){for(s in t)if(i=t[s],m(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(n=!1);n===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+A.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var B,C=[];for(B in r)r[B].explicitSet===!0&&(r[B].type==="name"?C.push("/"+B+" /"+r[B].value):C.push("/"+B+" "+r[B].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Ut.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],f=0,m=i.length;f<m;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(i){var a,o,A,c,d,f,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],f=0,m=(o=Object.keys(i).sort(function(g,B){return g-B})).length;f<m;f++)a=o[f],A.length>=100&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",B=0;B<m.length;B++)g+=String.fromCharCode(m[B]);var C=c();d({data:g,addLength1:!0,objectId:C}),A("endobj");var b=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var y=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+qu(o.fontName)),A("/FontFile2 "+C+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var w=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+qu(o.fontName)),A("/FontDescriptor "+y+" 0 R"),A("/W "+t.API.PDFObject.convert(f)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+b+" 0 R"),A("/BaseFont /"+qu(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+w+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,m="",g=0;g<f.length;g++)m+=String.fromCharCode(f[g]);var B=c();d({data:m,addLength1:!0,objectId:B}),A("endobj");var C=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:C}),A("endobj");var b=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+B+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+qu(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+qu(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,d=i.options||{},f=i.mutex||{},m=f.pdfEscape,g=f.activeFontKey,B=f.fonts,C=g,b="",y=0,w="",N=B[C].encoding;if(B[C].encoding!=="Identity-H")return{text:o,x:A,y:c,options:d,mutex:f};for(w=o,C=g,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)B[C].metadata.hasOwnProperty("cmap")&&(a=B[C].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),a||w[y].charCodeAt(0)<256&&B[C].metadata.hasOwnProperty("Unicode")?b+=w[y]:b+="";var R="";return parseInt(C.slice(1))<14||N==="WinAnsiEncoding"?R=m(b,C).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(R=r(b,B[C])),f.isHex=!0,{text:R,x:A,y:c,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(Ut),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ut.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,A,c,d,f=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],B={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var R=function(S){var I=S.charCodeAt(),F=I>>8,Y=C[F];return Y!==void 0?f[256*Y+(255&I)]:F===252||F===253?"AL":y.test(F)?"L":F===8?"R":"N"},V=function(S){for(var I,F=0;F<S.length;F++){if((I=R(S.charAt(F)))==="L")return!1;if(I==="R")return!0}return!1},O=function(S,I,F,Y){var ue,ne,se,z,ce=I[Y];switch(ce){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(ce="AN");break;case"AL":w=!0,ce="R";break;case"WS":ce="N";break;case"CS":Y<1||Y+1>=I.length||(ue=F[Y-1])!=="EN"&&ue!=="AN"||(ne=I[Y+1])!=="EN"&&ne!=="AN"?ce="N":w&&(ne="AN"),ce=ne===ue?ne:"N";break;case"ES":ce=(ue=Y>0?F[Y-1]:"B")==="EN"&&Y+1<I.length&&I[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&F[Y-1]==="EN"){ce="EN";break}if(w){ce="N";break}for(se=Y+1,z=I.length;se<z&&I[se]==="ET";)se++;ce=se<z&&I[se]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(z=I.length,se=Y+1;se<z&&I[se]==="NSM";)se++;if(se<z){var ae=S[Y],Ce=ae>=1425&&ae<=2303||ae===64286;if(ue=I[se],Ce&&(ue==="R"||ue==="AL")){ce="R";break}}}ce=Y<1||(ue=I[Y-1])==="B"?"N":F[Y-1];break;case"B":w=!1,s=!0,ce=N;break;case"S":i=!0,ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":ce="N"}return ce},T=function(S,I,F){var Y=S.split("");return F&&_(Y,F,{hiLevel:N}),Y.reverse(),I&&I.reverse(),Y.join("")},_=function(S,I,F){var Y,ue,ne,se,z,ce=-1,ae=S.length,Ce=0,P=[],k=N?g:m,W=[];for(w=!1,s=!1,i=!1,ue=0;ue<ae;ue++)W[ue]=R(S[ue]);for(ne=0;ne<ae;ne++){if(z=Ce,P[ne]=O(S,W,P,ne),Y=240&(Ce=k[z][B[P[ne]]]),Ce&=15,I[ne]=se=k[Ce][5],Y>0)if(Y===16){for(ue=ce;ue<ne;ue++)I[ue]=1;ce=-1}else ce=-1;if(k[Ce][6])ce===-1&&(ce=ne);else if(ce>-1){for(ue=ce;ue<ne;ue++)I[ue]=se;ce=-1}W[ne]==="B"&&(I[ne]=0),F.hiLevel|=se}i&&function(re,oe,Z){for(var ee=0;ee<Z;ee++)if(re[ee]==="S"){oe[ee]=N;for(var de=ee-1;de>=0&&re[de]==="WS";de--)oe[de]=N}}(W,I,ae)},L=function(S,I,F,Y,ue){if(!(ue.hiLevel<S)){if(S===1&&N===1&&!s)return I.reverse(),void(F&&F.reverse());for(var ne,se,z,ce,ae=I.length,Ce=0;Ce<ae;){if(Y[Ce]>=S){for(z=Ce+1;z<ae&&Y[z]>=S;)z++;for(ce=Ce,se=z-1;ce<se;ce++,se--)ne=I[ce],I[ce]=I[se],I[se]=ne,F&&(ne=F[ce],F[ce]=F[se],F[se]=ne);Ce=z}Ce++}}},D=function(S,I,F){var Y=S.split(""),ue={hiLevel:N};return F||(F=[]),_(Y,F,ue),function(ne,se,z){if(z.hiLevel!==0&&d)for(var ce,ae=0;ae<ne.length;ae++)se[ae]===1&&(ce=b.indexOf(ne[ae]))>=0&&(ne[ae]=b[ce+1])}(Y,F,ue),L(2,Y,I,F,ue),L(1,Y,I,F,ue),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(S,I,F){if(function(ue,ne){if(ne)for(var se=0;se<ue.length;se++)ne[se]=se;o===void 0&&(o=V(ue)),c===void 0&&(c=V(ue))}(S,I),a||!A||c)if(a&&A&&o^c)N=o?1:0,S=T(S,I,F);else if(!a&&A&&c)N=o?1:0,S=D(S,I,F),S=T(S,I);else if(!a||o||A||c){if(a&&!A&&o^c)S=T(S,I),o?(N=0,S=D(S,I,F)):(N=1,S=D(S,I,F),S=T(S,I));else if(a&&o&&!A&&c)N=1,S=D(S,I,F),S=T(S,I);else if(!a&&!A&&o^c){var Y=d;o?(N=1,S=D(S,I,F),N=0,d=!1,S=D(S,I,F),d=Y):(N=0,S=D(S,I,F),S=T(S,I),N=1,d=!1,S=D(S,I,F),d=Y,S=T(S,I))}}else N=0,S=D(S,I,F);else N=o?1:0,S=D(S,I,F);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,A=S.isOutputVisual,o=S.isInputRtl,c=S.isOutputRtl,d=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Ut),Ut.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new yl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new t$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Mz(this.contents),this.head=new Vz(this),this.name=new $z(this),this.cmap=new N3(this),this.toUnicode={},this.hhea=new Kz(this),this.maxp=new Wz(this),this.hmtx=new Xz(this),this.post=new Gz(this),this.os2=new qz(this),this.loca=new e$(this),this.glyf=new Jz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ha,yl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),Mz=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,A,c,d,f,m,g,B,C;for(C in g=Object.keys(r).length,A=Math.log(2),f=16*Math.floor(Math.log(g)/A),a=Math.floor(f/A),d=16*g-f,(s=new yl).writeInt(this.scalarType),s.writeShort(g),s.writeShort(f),s.writeShort(a),s.writeShort(d),i=16*g,c=s.pos+i,o=null,B=[],r)for(m=r[C],s.writeString(C),s.writeInt(t(m)),s.writeInt(c),s.writeInt(m.length),B=B.concat(m),C==="head"&&(o=c),c+=m.length;c%4;)B.push(0),c++;return s.write(B),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=I3.call(r);r.length%4;)r.push(0);for(i=new yl(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),Hz={}.hasOwnProperty,qa=function(t,e){for(var r in e)Hz.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ha=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Vz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new yl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),yN=function(){function t(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,C,b,y,w,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,i=function(){var R,V;for(V=[],A=R=0;0<=m?R<m:R>m;A=0<=m?++R:--R)V.push(e.readUInt16());return V}(),e.pos+=2,C=function(){var R,V;for(V=[],A=R=0;0<=m?R<m:R>m;A=0<=m?++R:--R)V.push(e.readUInt16());return V}(),c=function(){var R,V;for(V=[],A=R=0;0<=m?R<m:R>m;A=0<=m?++R:--R)V.push(e.readUInt16());return V}(),d=function(){var R,V;for(V=[],A=R=0;0<=m?R<m:R>m;A=0<=m?++R:--R)V.push(e.readUInt16());return V}(),s=(this.length-e.pos+this.offset)/2,o=function(){var R,V;for(V=[],A=R=0;0<=s?R<s:R>s;A=0<=s?++R:--R)V.push(e.readUInt16());return V}(),A=y=0,N=i.length;y<N;A=++y)for(b=i[A],n=w=B=C[A];B<=b?w<=b:w>=b;n=B<=b?++w:--w)d[A]===0?a=n+c[A]:(a=o[d[A]/2+(n-B)-(m-A)]||0)!==0&&(a+=c[A]),this.codeMap[n]=65535&a}e.pos=f}return t.encode=function(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,C,b,y,w,N,R,V,O,T,_,L,D,S,I,F,Y,ue,ne,se,z,ce,ae,Ce,P,k,W,re,oe,Z,ee,de,xe,be,Te;switch(Y=new yl,a=Object.keys(e).sort(function(Ve,te){return Ve-te}),r){case"macroman":for(C=0,b=function(){var Ve=[];for(B=0;B<256;++B)Ve.push(0);return Ve}(),w={0:0},i={},ue=0,ce=a.length;ue<ce;ue++)w[de=e[s=a[ue]]]==null&&(w[de]=++C),i[s]={old:e[s],new:w[e[s]]},b[s]=w[e[s]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(b),{charMap:i,subtable:Y.data,maxGlyphID:C+1};case"unicode":for(I=[],f=[],N=0,w={},n={},y=c=null,ne=0,ae=a.length;ne<ae;ne++)w[V=e[s=a[ne]]]==null&&(w[V]=++N),n[s]={old:V,new:w[V]},o=w[V]-s,y!=null&&o===c||(y&&f.push(y),I.push(s),c=o),y=s;for(y&&f.push(y),f.push(65535),I.push(65535),D=2*(L=I.length),_=2*Math.pow(Math.log(L)/Math.LN2,2),m=Math.log(_/2)/Math.LN2,T=2*L-_,A=[],O=[],g=[],B=se=0,Ce=I.length;se<Ce;B=++se){if(S=I[B],d=f[B],S===65535){A.push(0),O.push(0);break}if(S-(F=n[S].new)>=32768)for(A.push(0),O.push(2*(g.length+L-B)),s=z=S;S<=d?z<=d:z>=d;s=S<=d?++z:--z)g.push(n[s].new);else A.push(F-S),O.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*L+2*g.length),Y.writeUInt16(0),Y.writeUInt16(D),Y.writeUInt16(_),Y.writeUInt16(m),Y.writeUInt16(T),Z=0,P=f.length;Z<P;Z++)s=f[Z],Y.writeUInt16(s);for(Y.writeUInt16(0),ee=0,k=I.length;ee<k;ee++)s=I[ee],Y.writeUInt16(s);for(xe=0,W=A.length;xe<W;xe++)o=A[xe],Y.writeUInt16(o);for(be=0,re=O.length;be<re;be++)R=O[be],Y.writeUInt16(R);for(Te=0,oe=g.length;Te<oe;Te++)C=g[Te],Y.writeUInt16(C);return{charMap:n,subtable:Y.data,maxGlyphID:N+1}}},t}(),N3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new yN(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=yN.encode(r,n),(i=new yl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Kz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),qz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Gz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,A,c;for(c=[],a=o=0,A=this.file.maxp.numGlyphs;0<=A?o<A:o>A;a=0<=A?++o:--o)c.push(r.readUInt32());return c}).call(this)}},e}(),zz=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},$z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,o,A,c,d,f,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),A=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+A+r.readShort()});for(c={},a=f=0,m=s.length;f<m;a=++f)i=s[a],r.pos=i.offset,d=r.readString(i.length),o=new zz(d,i),c[g=i.nameID]==null&&(c[g]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Wz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,o,A,c;for(r.pos=this.offset,this.metrics=[],n=0,A=this.file.hhea.numberOfMetrics;0<=A?n<A:n>A;n=0<=A?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,m,g;for(g=[],d=0,f=(m=this.metrics).length;d<f;d++)a=m[d],g.push(a.advance);return g}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),I3=[].slice,Jz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,o,A,c,d,f,m;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(A=new yl(n.read(i))).readShort(),d=A.readShort(),m=A.readShort(),c=A.readShort(),f=A.readShort(),this.cache[r]=o===-1?new Zz(A,d,m,c,f):new Yz(A,o,d,m,c,f),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,o,A,c;for(o=[],a=[],A=0,c=n.length;A<c;A++)i=r[n[A]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),Yz=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Zz=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new yl(I3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),e$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,ha),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var A=this.offsets[o],c=this.offsets[o+1]-A;c>0&&(i+=c)}for(var d=new Array(4*s.length),f=0;f<s.length;++f)d[4*f+3]=255&s[f],d[4*f+2]=(65280&s[f])>>8,d[4*f+1]=(16711680&s[f])>>16,d[4*f]=(4278190080&s[f])>>24;return d},e}(),t$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in A=this.glyphsFor(r))n=A[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,A,c,d,f,m,g,B,C,b,y;for(s in n=N3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},y=n.charMap)g[(A=y[s]).old]=A.new;for(B in m=n.maxGlyphID,a)B in g||(g[B]=m++);return d=function(w){var N,R;for(N in R={},w)R[w[N]]=N;return R}(g),f=Object.keys(d).sort(function(w,N){return w-N}),C=function(){var w,N,R;for(R=[],w=0,N=f.length;w<N;w++)o=f[w],R.push(d[o]);return R}(),i=this.font.glyf.encode(a,C,g),c=this.font.loca.encode(i.offsets,C),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();Ut.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,A,c;for(c=[],o=0,A=r.length;o<A;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const ix=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Pz,AcroFormAppearance:xt,AcroFormButton:Fn,AcroFormCheckBox:Tf,AcroFormChoiceField:xc,AcroFormComboBox:Bc,AcroFormEditBox:Sf,AcroFormListBox:bc,AcroFormPasswordField:Uf,AcroFormPushButton:Ff,AcroFormRadioButton:Cc,AcroFormTextField:ll,GState:vp,ShadingPattern:OA,TilingPattern:pc,default:Ut,jsPDF:Ut},Symbol.toStringTag,{value:"Module"}));async function r$(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Lt.now()};return ss(ct(Ue,"inventory_batches"),e)}async function S3(t,e){await en(Tt(Ue,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Lt.now()})}async function n$(t,e){const r=Xt(ct(Ue,"batch_allocations"),Ar("saleDate",">=",t),Ar("saleDate","<=",e)),n=await St(r),s={};return n.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function s$(t){const e=Tt(Ue,"salesV2",t),r=await Sl(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)){for(const o of n.items)if(Array.isArray(o==null?void 0:o.allocations))for(const A of o.allocations){const c=String((A==null?void 0:A.batchId)||"").trim(),d=Number((A==null?void 0:A.qty)||0);c&&d&&s.push({batchId:c,qty:d})}}if(Array.isArray(n.allocations))for(const o of n.allocations){const A=String((o==null?void 0:o.batchId)||"").trim(),c=Number((o==null?void 0:o.qty)||0);A&&c&&s.push({batchId:A,qty:c})}if(s.length===0)return await al(Ue,async o=>{o.delete(e)}),{restored:0};const i=new Map;for(const o of s)i.set(o.batchId,Number((i.get(o.batchId)||0)+o.qty));let a=0;return await al(Ue,async o=>{const A=Array.from(i.entries()),c=A.map(([f])=>Tt(Ue,"inventory_batches",f)),d=await Promise.all(c.map(f=>o.get(f)));A.forEach(([f,m],g)=>{const B=d[g];if(!B.exists())return;const C=B.data(),b=Number((C==null?void 0:C.remaining)??0),y=Number((b+Number(m||0)).toFixed(3));o.update(c[g],{remaining:y}),a+=Number(m||0)}),o.delete(e)}),{restored:a}}var F3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},xN=_o.createContext&&_o.createContext(F3),i$=["attr","size","title"];function a$(t,e){if(t==null)return{};var r=o$(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ew.apply(this,arguments)}function bN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bN(Object(r),!0).forEach(function(n){A$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A$(t,e,r){return e=l$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l$(t){var e=c$(t,"string");return typeof e=="symbol"?e:e+""}function c$(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T3(t){return t&&t.map((e,r)=>_o.createElement(e.tag,tw({key:r},e.attr),T3(e.child)))}function u$(t){return e=>_o.createElement(d$,ew({attr:tw({},t.attr)},e),T3(t.child))}function d$(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=a$(t,i$),o=s||r.size||"1em",A;return r.className&&(A=r.className),t.className&&(A=(A?A+" ":"")+t.className),_o.createElement("svg",ew({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:A,style:tw(tw({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&_o.createElement("title",null,i),t.children)};return xN!==void 0?_o.createElement(xN.Consumer,null,r=>e(r)):e(F3)}function h$(t){return u$({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Jd({onClick:t,loading:e,className:r=""}){return l.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-sm
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[l.jsx(h$,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function Yd(){const[t,e]=j.useState(0),r=j.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Ci=t=>Math.round((Number(t)||0)*100)/100,pg=t=>Math.round((Number(t)||0)*1e3)/1e3,Dh=t=>Number(t??0).toFixed(2),$y=t=>Number(t??0).toFixed(3),BN=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?Zt(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const a=Number((s==null?void 0:s.qty)??0),o=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*a-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:a,amount:Ci(o),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function f$({role:t}){const[e,r]=j.useState([]),[n,s]=j.useState([]),[i,a]=j.useState(null),[o,A]=j.useState(!0),[c,d]=j.useState(""),[f,m]=j.useState("ALL"),[g,B]=j.useState(null),[C,b]=j.useState(0),[y,w]=j.useState(0),[N,R]=j.useState(""),[V,O]=j.useState(0),[T,_]=j.useState("0"),L=Zt(new Date,"yyyy-MM-dd"),D=j.useRef(null),{refreshKey:S,refresh:I}=Yd();j.useEffect(()=>{const Z=Xt(ct(Ue,"salesV2"),Ar("date","==",L)),ee=C2(Z,de=>{const xe=[];de.forEach(be=>{const Te=BN(be.data(),be.id);xe.push(...Te)}),r(xe),A(!1)});return()=>ee()},[L,S]),j.useEffect(()=>{const Z=Xt(ct(Ue,"salesV2"),Ar("status","==","FLOTANTE")),ee=C2(Z,de=>{const xe=[];de.forEach(be=>{const Te=BN(be.data(),be.id);xe.push(...Te)}),s(xe)});return()=>ee()},[S]),j.useEffect(()=>{(async()=>{const ee=Xt(ct(Ue,"daily_closures"),Ar("date","==",L)),de=await St(ee);if(de.empty)a(null);else{const xe=de.docs[0];a({id:xe.id,...xe.data()})}})()},[L,S]);const F=_o.useMemo(()=>{if(f==="FLOTANTE"){const Z=[...e,...n],ee=new Map;for(const de of Z)de.status==="FLOTANTE"&&ee.set(de.id,de);return Array.from(ee.values())}if(f==="ALL"){const Z=[...e,...n],ee=new Map;for(const de of Z)ee.set(de.id,de);return Array.from(ee.values())}return e.filter(Z=>Z.status==="PROCESADA")},[f,e,n]);Ci(F.reduce((Z,ee)=>Z+(ee.amountSuggested||0),0));const Y=Ci(F.reduce((Z,ee)=>Z+(ee.amount||0),0)),ue=pg(F.reduce((Z,ee)=>Z+(ee.quantity||0),0)),ne=Ci(F.reduce((Z,ee)=>Z+Number(ee.cogsAmount??0),0)),se=Ci(Y-ne),z={};F.forEach(Z=>{const ee=Z.productName||"(sin nombre)";z[ee]||(z[ee]={totalQuantity:0,totalAmount:0}),z[ee].totalQuantity=pg(z[ee].totalQuantity+(Z.quantity||0)),z[ee].totalAmount=Ci(z[ee].totalAmount+(Z.amount||0))});const ce=Object.entries(z).map(([Z,ee])=>({productName:Z,totalQuantity:ee.totalQuantity,totalAmount:ee.totalAmount})),ae=async()=>{try{const Z=F.filter(te=>te.status==="FLOTANTE"),ee=Z.length>0?Z:e.filter(te=>te.status!=="PROCESADA");if(ee.length===0){d("No hay ventas para procesar.");return}const de={totalCharged:Ci(ee.reduce((te,Ae)=>te+(Ae.amount||0),0)),totalSuggested:Ci(ee.reduce((te,Ae)=>te+(Ae.amountSuggested||0),0)),totalUnits:pg(ee.reduce((te,Ae)=>te+(Ae.quantity||0),0)),totalCOGS:Ci(ee.reduce((te,Ae)=>te+Number(Ae.cogsAmount??0),0))},xe=Ci(de.totalCharged-de.totalSuggested),be=Ci(de.totalCharged-de.totalCOGS),Te=await ss(ct(Ue,"daily_closures"),{date:L,createdAt:Lt.now(),totalCharged:de.totalCharged,totalSuggested:de.totalSuggested,totalDifference:xe,totalUnits:de.totalUnits,totalCOGS:de.totalCOGS,grossProfit:be,products:ee.map(te=>({productName:te.productName,quantity:te.quantity,amount:te.amount})),salesV2:ee.map(te=>({id:te.id,productName:te.productName,quantity:te.quantity,amount:te.amount,amountSuggested:te.amountSuggested,userEmail:te.userEmail,clientName:te.clientName,amountReceived:te.amountReceived,change:te.change,status:te.status,cogsAmount:te.cogsAmount??0,avgUnitCost:te.avgUnitCost??null,allocations:te.allocations??[],date:te.date})),productSummary:Object.entries(ee.reduce((te,Ae)=>{const G=Ae.productName||"(sin nombre)";return te[G]||(te[G]={totalQuantity:0,totalAmount:0}),te[G].totalQuantity=pg(te[G].totalQuantity+(Ae.quantity||0)),te[G].totalAmount=Ci(te[G].totalAmount+(Ae.amount||0)),te},{})).map(([te,Ae])=>({productName:te,totalQuantity:Ae.totalQuantity,totalAmount:Ae.totalAmount}))}),Ve=Yw(Ue);ee.forEach(te=>{Ve.update(Tt(Ue,"salesV2",te.id.split("#")[0]),{status:"PROCESADA",closureId:Te.id,closureDate:L})}),await Ve.commit(),d(`✅ Cierre guardado. Ventas procesadas: ${ee.length}.`)}catch(Z){console.error(Z),d("❌ Error al guardar el cierre.")}},Ce=async Z=>{if(window.confirm("¿Revertir esta venta? Esta acción no se puede deshacer."))try{await en(Tt(Ue,"salesV2",Z.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d("↩️ Venta revertida a FLOTANTE.")}catch(ee){console.error(ee),d("❌ No se pudo revertir la venta.")}},P=Z=>{B(Z),b(Z.quantity),w(Z.amount),R(Z.clientName),O(Z.amountReceived),_(Z.change)},k=async()=>{if(g)try{await en(Tt(Ue,"salesV2",g.id.split("#")[0]),{quantity:C,amount:y,amountCharged:y,clientName:N,amountReceived:V,change:T}),B(null),d("✅ Venta actualizada.")}catch(Z){console.error(Z),d("❌ No se pudo actualizar la venta.")}},W=async Z=>{if(window.confirm("¿Eliminar esta venta? Se restaurará el stock en los lotes asignados."))try{const{restored:ee}=await s$(Z.split("#")[0]);d(`🗑️ Venta eliminada. Stock restaurado: ${Number(ee).toFixed(2)}.`)}catch(ee){console.error(ee),d("❌ No se pudo eliminar la venta.")}},re=async()=>{if(D.current){D.current.classList.add("force-pdf-colors");try{const ee=(await gB(D.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),de=new Ut;de.addImage(ee,"PNG",10,10,190,0),de.save(`cierre_${L}.pdf`)}finally{D.current.classList.remove("force-pdf-colors")}}},oe=!t||t==="admin";return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",L]}),l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx(Jd,{onClick:I,loading:o})}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:Z=>m(Z.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:D,children:[l.jsxs("table",{className:"min-w-full border text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[F.map(Z=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Z.status})}),l.jsx("td",{className:"border p-1",children:Z.productName}),l.jsx("td",{className:"border p-1",children:$y(Z.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Dh(Z.amount)]}),l.jsx("td",{className:"border p-1",children:Z.date}),l.jsx("td",{className:"border p-1",children:Z.userEmail}),l.jsx("td",{className:"border p-1",children:Z.status==="FLOTANTE"?l.jsxs("div",{className:"flex gap-2 justify-center",children:[oe&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>P(Z),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>W(Z.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!oe&&l.jsx("span",{className:"text-gray-400 text-xs",children:"—"})]}):Z.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:oe?l.jsx("button",{onClick:()=>Ce(Z.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:"—"})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},Z.id)),F.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[l.jsxs("div",{children:[" ","Total unidades: ",l.jsx("strong",{children:$y(ue)})]}),l.jsxs("div",{children:[" ","Total cobrado: ",l.jsxs("strong",{children:["C$",Dh(Y)]})]})]}),(ne>0||se!==Y)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",l.jsxs("strong",{children:["C$",Dh(ne)]})]}),l.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",Dh(se)]})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-2",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsxs("tbody",{children:[ce.map(Z=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:Z.productName}),l.jsx("td",{className:"border p-1",children:$y(Z.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Dh(Z.totalAmount)]})]},Z.productName)),ce.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ae,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del día"}),l.jsx("button",{onClick:re,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&l.jsx("p",{className:"mt-2 text-sm",children:c}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[g.productName," • ",g.userEmail]}),l.jsx("label",{className:"text-sm",children:"Cantidad"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:C,onChange:Z=>b(parseFloat(Z.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:y,onChange:Z=>w(parseFloat(Z.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:N,onChange:Z=>R(Z.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:V,onChange:Z=>O(parseFloat(Z.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:T,onChange:Z=>_(Z.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>B(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:k,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Bi=t=>Number(t??0).toFixed(2),Uu=t=>Number(t??0).toFixed(3);function p$(){var w,N,R,V;const t=async O=>{if(!window.confirm(`¿Eliminar el cierre del ${O.date}?`))return;const T=window.confirm("¿También quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(T){const _=await St(Xt(ct(Ue,"salesV2"),Ar("closureId","==",O.id)));if(!_.empty){const L=Yw(Ue);_.forEach(D=>{L.update(Tt(Ue,"salesV2",D.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await L.commit()}}await Ts(Tt(Ue,"daily_closures",O.id)),(c==null?void 0:c.id)===O.id&&d(null),await B(),m(`🗑️ Cierre eliminado${T?" y ventas reabiertas.":"."}`)}catch(_){console.error(_),m("❌ No se pudo eliminar el cierre.")}},[e,r]=j.useState(Zt(FV(new Date),"yyyy-MM-dd")),[n,s]=j.useState(Zt(new Date,"yyyy-MM-dd")),[i,a]=j.useState(!0),[o,A]=j.useState([]),[c,d]=j.useState(null),[f,m]=j.useState(""),g=j.useRef(null),B=async()=>{try{a(!0);const O=Xt(ct(Ue,"daily_closures"),Ar("date",">=",e),Ar("date","<=",n)),T=await St(O),_=[];T.forEach(L=>_.push({id:L.id,...L.data()})),_.sort((L,D)=>L.date<D.date?1:L.date>D.date?-1:0),A(_)}catch(O){console.error(O),m("❌ Error cargando el historial.")}finally{a(!1)}};j.useEffect(()=>{B()},[]);const C=async O=>{O.preventDefault(),B()},b=j.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const O=Number(c.totalUnits??0),T=Number(c.totalSuggested??0),_=Number(c.totalCharged??0),L=Number(c.totalDifference??(isFinite(_-T)?_-T:0)),D=Number(c.totalCOGS??0),S=Number(c.grossProfit??(isFinite(_-D)?_-D:0));return{units:O,sug:T,chg:_,diff:L,cogs:D,profit:S}},[c]),y=async()=>{if(!g.current||!c)return;const O=g.current;O.classList.add("force-pdf-colors");try{const[{default:T},{jsPDF:_}]=await Promise.all([Po(()=>Promise.resolve().then(()=>wB),void 0),Po(()=>Promise.resolve().then(()=>ix),void 0)]),D=(await T(O,{backgroundColor:"#ffffff",onclone:F=>{const Y=F.defaultView;F.body.querySelectorAll("*").forEach(ne=>{const se=Y.getComputedStyle(ne);se.color&&(ne.style.color=se.color),se.backgroundColor&&se.backgroundColor!=="rgba(0, 0, 0, 0)"&&(ne.style.backgroundColor=se.backgroundColor),se.borderColor&&(ne.style.borderColor=se.borderColor)})}})).toDataURL("image/png"),{jsPDF:S}=await Po(async()=>{const{jsPDF:F}=await Promise.resolve().then(()=>ix);return{jsPDF:F}},void 0),I=new S;I.addImage(D,"PNG",10,10,190,0),I.save(`cierre_${c.date}.pdf`)}finally{O.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histórico de cierres"}),l.jsxs("form",{onSubmit:C,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:O=>r(O.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:O=>s(O.target.value)})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?l.jsx("p",{children:"Cargando..."}):o.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Monto de venta"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsx("tbody",{children:o.map(O=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:O.date}),l.jsx("td",{className:"border p-1",children:Uu(O.totalUnits)}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.totalCharged)]}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.totalCOGS)]}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.grossProfit??Number(O.totalCharged??0)-Number(O.totalCOGS??0))]}),l.jsx("td",{className:"border p-1",children:l.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(O),children:"Ver detalle"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(O),children:"Eliminar"})]})})]},O.id))})]}),c&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),l.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:g,className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Uu(b.units)})]})}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{children:["Monto al costo:"," ",l.jsxs("strong",{children:["C$",Bi(b.cogs)]})]}),l.jsxs("div",{children:["Ganancia sin gastos:"," ",l.jsxs("strong",{children:["C$",Bi(b.profit)]})]})]}),(w=c.salesV2)!=null&&w.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto de ventas"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),l.jsx("tbody",{children:c.salesV2.map((O,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:O.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Uu(O.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.amount)]}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.cogsAmount)]}),l.jsx("td",{className:"border p-1",children:O.date??"—"}),l.jsx("td",{className:"border p-1",children:O.userEmail??""})]},T))})]})]}):(N=c.sales)!=null&&N.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Paga con"}),l.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),l.jsx("tbody",{children:c.sales.map((O,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:O.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Uu(O.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.amount)]}),l.jsx("td",{className:"border p-1",children:O.userEmail??""}),l.jsx("td",{className:"border p-1",children:O.clientName??""}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.amountReceived)]}),l.jsx("td",{className:"border p-1",children:typeof O.change=="number"?Bi(O.change):O.change??"0"})]},T))})]})]}):(R=c.products)!=null&&R.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"})]})}),l.jsx("tbody",{children:c.products.map((O,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:O.productName}),l.jsx("td",{className:"border p-1",children:Uu(O.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.amount)]})]},T))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(V=c.productSummary)!=null&&V.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsx("tbody",{children:c.productSummary.map((O,T)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:O.productName}),l.jsx("td",{className:"border p-1",children:Uu(O.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Bi(O.totalAmount)]})]},T))})]})]}):null]})]}),f&&l.jsx("p",{className:"mt-3 text-sm",children:f})]})}function m$(){const[t,e]=j.useState(""),[r,n]=j.useState(""),[s,i]=j.useState(""),[a,o]=j.useState(!1),[A,c]=j.useState("vendedor_pollo"),[d,f]=j.useState(""),[m,g]=j.useState([]),[B,C]=j.useState(!0),[b,y]=j.useState(null),[w,N]=j.useState("vendedor_pollo"),[R,V]=j.useState(!1),O=ue=>!ue||ue==="vendedor"?"vendedor_pollo":ue==="admin"||ue==="vendedor_pollo"||ue==="vendedor_ropa"?ue:"vendedor_pollo",T=async()=>{C(!0);const ue=await St(ct(Ue,"users")),ne=[];ue.forEach(se=>{const z=se.data();ne.push({id:se.id,email:z.email??"",name:z.name??"",role:O(z.role)})}),g(ne),C(!1)};j.useEffect(()=>{T()},[]);const _=()=>{e(""),n(""),i(""),c("vendedor_pollo")},L=async ue=>{if(ue.preventDefault(),f(""),s.length<4){f("❌ La contraseña debe tener al menos 4 caracteres.");return}if(!t.trim()){f("❌ El nombre es obligatorio.");return}try{const ne=db(),se=ub(ne.options,"Secondary"),z=YF(se),ce=await OD(z,r,s);await XT(Tt(ct(Ue,"users"),ce.user.uid),{email:r,name:t.trim(),role:O(A)}),await MF(z),await LR(se);const ae=O(A);g(Ce=>[{id:ce.user.uid,email:r,name:t.trim(),role:ae},...Ce]),f("✅ Usuario creado correctamente."),_(),V(!1)}catch(ne){console.error(ne),f("❌ Error al crear el usuario: "+ne.message)}},D=ue=>{y(ue.id),N(O(ue.role))},S=()=>{y(null),N("vendedor_pollo")},I=async()=>{if(!b)return;const ue=Tt(Ue,"users",b),ne=O(w);await en(ue,{role:ne}),g(se=>se.map(z=>z.id===b?{...z,role:ne}:z)),S()},F=async ue=>{confirm("¿Eliminar este usuario del listado?")&&(await Ts(Tt(Ue,"users",ue)),g(se=>se.filter(z=>z.id!==ue)))},Y=ue=>{const ne=ue==="admin"?"admin":ue==="vendedor_ropa"?"vendedor_ropa":ue==="vendedor_pollo"||ue==="vendedor"?"vendedor_pollo":ue,se=ne==="admin"?"bg-blue-100 text-blue-700":ne==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700";return l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se}`,children:ne})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),l.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>V(!0),type:"button",children:"Crear usuario"})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Email"}),l.jsx("th",{className:"p-2 border",children:"Rol"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:B?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando…"})}):m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(ue=>{const ne=b===ue.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ue.name||"—"}),l.jsx("td",{className:"p-2 border",children:ue.email}),l.jsx("td",{className:"p-2 border",children:ne?l.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:se=>N(se.target.value),children:[l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),l.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]}):Y(ue.role)}),l.jsx("td",{className:"p-2 border space-x-2",children:ne?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:I,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:S,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>D(ue),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>F(ue.id),children:"Eliminar"})]})})]},ue.id)})})]})}),d&&l.jsx("p",{className:"text-sm mt-2",children:d}),R&&l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>V(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>V(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:ue=>e(ue.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrónico"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:ue=>n(ue.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-1 relative",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contraseña (mínimo 6 caracteres)"}),l.jsx("input",{type:a?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:s,onChange:ue=>i(ue.target.value),required:!0}),l.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>o(ue=>!ue),children:a?"🙈":"👁️"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ue=>c(ue.target.value),children:[l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),l.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>V(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),d&&l.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const g$=t=>`C$${(Number(t)||0).toFixed(2)}`;function w$(){const[t,e]=j.useState(""),[r,n]=j.useState(0),[s,i]=j.useState(""),[a,o]=j.useState(""),[A,c]=j.useState(""),[d,f]=j.useState([]),[m,g]=j.useState(!0),[B,C]=j.useState(!1),[b,y]=j.useState(null),[w,N]=j.useState(""),[R,V]=j.useState(""),[O,T]=j.useState(""),[_,L]=j.useState(0),[D,S]=j.useState(!1),I=async()=>{g(!0);const ae=await St(ct(Ue,"products")),Ce=[];ae.forEach(P=>{const k=P.data();Ce.push({id:P.id,name:k.name??"",price:Number(k.price??0),category:k.category??"",measurement:k.measurement??"",active:k.active!==!1})}),f(Ce),g(!1)};j.useEffect(()=>{I()},[]);const F=async ae=>{if(ae.preventDefault(),i(""),!t||r<=0||!A){i("❌ Completa nombre, precio válido y unidad de medida");return}try{const Ce={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:A,active:!0},P=await ss(ct(Ue,"products"),Ce);f(k=>[{id:P.id,...Ce},...k]),i("✅ Producto registrado con exito."),e(""),n(0),c(""),o(""),S(!1)}catch(Ce){i("❌ Error: "+Ce.message)}},Y=ae=>{y(ae.id),N(ae.name),V(ae.category),T(ae.measurement),L(ae.price)},ue=()=>{y(null),N(""),V(""),T(""),L(0)},ne=async()=>{if(!b)return;const ae=Tt(Ue,"products",b);await en(ae,{name:w,category:R,measurement:O,price:parseFloat((_||0).toFixed(2))}),f(Ce=>Ce.map(P=>P.id===b?{...P,name:w,category:R,measurement:O,price:parseFloat((_||0).toFixed(2))}:P)),ue()},se=async ae=>{const Ce=Tt(Ue,"products",ae.id),P=ae.active===!1;await en(Ce,{active:P}),f(k=>k.map(W=>W.id===ae.id?{...W,active:P}:W))},z=async ae=>{const Ce=Xt(ct(Ue,"inventory_batches"),Ar("productId","==",ae),$T(1));if(!(await St(Ce)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactívalo para ocultarlo.`);return}confirm("¿Eliminar este producto definitivamente?")&&(await Ts(Tt(Ue,"products",ae)),f(W=>W.filter(re=>re.id!==ae)))},ce=B?d:d.filter(ae=>ae.active!==!1);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{i(""),S(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),D&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),l.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cerrar"})]}),l.jsxs("form",{onSubmit:F,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categoría"}),l.jsxs("select",{value:a,onChange:ae=>o(ae.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:ae=>e(ae.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),l.jsxs("select",{value:A,onChange:ae=>c(ae.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:ae=>n(parseFloat(ae.target.value)),onFocus:ae=>ae.target.value==="0"?n(NaN):null})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&l.jsx("p",{className:"text-sm mt-2",children:s})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:B,onChange:ae=>C(ae.target.checked)}),"Mostrar inactivos"]})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Categoría"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Precio"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:m?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando…"})}):ce.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):ce.map(ae=>{const Ce=b===ae.id,P=ae.active!==!1;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Ce?l.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:k=>N(k.target.value)}):ae.name}),l.jsx("td",{className:"p-2 border",children:Ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:R,onChange:k=>V(k.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]}):ae.category}),l.jsx("td",{className:"p-2 border",children:Ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:k=>T(k.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]}):ae.measurement}),l.jsx("td",{className:"p-2 border",children:Ce?l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(_)?"":_,onChange:k=>L(parseFloat(k.target.value))}):g$(ae.price)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${P?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:P?"Activo":"Inactivo"})}),l.jsx("td",{className:"p-2 border space-x-2",children:Ce?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ne,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ue,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Y(ae),children:"Editar"}),l.jsx("button",{className:`px-2 py-1 rounded ${P?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>se(ae),children:P?"Desactivar":"Activar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(ae.id),children:"Eliminar"})]})})]},ae.id)})})]})})]})}const Jn=[];for(let t=0;t<256;++t)Jn.push((t+256).toString(16).slice(1));function v$(t,e=0){return(Jn[t[e+0]]+Jn[t[e+1]]+Jn[t[e+2]]+Jn[t[e+3]]+"-"+Jn[t[e+4]]+Jn[t[e+5]]+"-"+Jn[t[e+6]]+Jn[t[e+7]]+"-"+Jn[t[e+8]]+Jn[t[e+9]]+"-"+Jn[t[e+10]]+Jn[t[e+11]]+Jn[t[e+12]]+Jn[t[e+13]]+Jn[t[e+14]]+Jn[t[e+15]]).toLowerCase()}let Wy;const y$=new Uint8Array(16);function x$(){if(!Wy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wy=crypto.getRandomValues.bind(crypto)}return Wy(y$)}const b$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CN={randomUUID:b$};function B$(t,e,r){var s;if(CN.randomUUID&&!t)return CN.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??x$();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,v$(n)}async function C$(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=ct(t,"inventory_batches"),i=Xt(s,Ar("productName","==",e)),A=(await St(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,d)=>{var C,b;const f=c.data.date??"",m=d.data.date??"";if(f!==m)return f<m?-1:1;const g=((C=c.data.createdAt)==null?void 0:C.seconds)??0,B=((b=d.data.createdAt)==null?void 0:b.seconds)??0;return g-B}).map(c=>Tt(t,"inventory_batches",c.id));return al(t,async c=>{let d=Number(r);const f=[],m=await Promise.all(A.map(b=>c.get(b)));for(let b=0;b<A.length&&d>0;b++){const y=A[b],w=m[b];if(!w.exists())continue;const N=w.data(),R=Number(N.quantity??0),V=Number(N.remaining??R??0),O=Number(N.purchasePrice??0);if(V<=0)continue;const T=Math.min(V,d),_=Number((V-T).toFixed(3));c.update(y,{remaining:_}),f.push({batchId:y.id,qty:T,unitCost:O,lineCost:Number((T*O).toFixed(2))}),d=Number((d-T).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const g=Number(f.reduce((b,y)=>b+y.lineCost,0).toFixed(2)),B=f.reduce((b,y)=>b+y.qty,0),C=B>0?Number((g/B).toFixed(4)):0;return{allocations:f,avgUnitCost:C,cogsAmount:g}})}const U3=3,E$=.5*10**-U3;function rs(t){const e=Number(t??0);return Number(e.toFixed(U3))}function Xy(t,e){return rs((t??0)+(e??0))}function mg(t,e){return rs(t)+E$>=rs(e)}async function _$(t,e){const r=await St(ct(Ue,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await en(Tt(Ue,"inventory_batches",i.id),{productId:e}),s++)}return s}function EN({user:t}){const[e,r]=j.useState([]),[n,s]=j.useState([]),[i,a]=j.useState(""),[o,A]=j.useState(Zt(new Date,"yyyy-MM-dd")),[c,d]=j.useState(""),[f,m]=j.useState([]),[g,B]=j.useState(0),[C,b]=j.useState(0),[y,w]=j.useState("0"),[N,R]=j.useState(""),[V,O]=j.useState(!1),[T,_]=j.useState({}),L=k=>Math.round(k*100)/100,D=k=>rs(k).toFixed(3),S=async k=>{if(!k)return 0;const W=Xt(ct(Ue,"inventory_batches"),Ar("productId","==",k)),re=await St(W);let oe=0;return re.forEach(Z=>{const ee=Z.data();oe=Xy(oe,Number(ee.remaining||0))}),rs(oe)},I=async k=>{if(!k)return 0;const W=await St(ct(Ue,"inventory_batches"));let re=0;return W.forEach(oe=>{const Z=oe.data();(Z.productName||"").trim().toLowerCase()===k.trim().toLowerCase()&&(re=Xy(re,Number(Z.remaining||0)))}),rs(re)};j.useEffect(()=>{(async()=>{const k=await St(ct(Ue,"products")),W=[];k.forEach(re=>{const oe=re.data();(oe==null?void 0:oe.active)!==!1&&W.push({id:re.id,productName:oe.name??oe.productName??"(sin nombre)",price:Number(oe.price??0),measurement:oe.measurement??"(sin unidad)",category:oe.category??"(sin categoría)"})}),r(W)})()},[]),j.useEffect(()=>{(async()=>{const k=await St(ct(Ue,"inventory_batches")),W={};k.forEach(re=>{const oe=re.data(),Z=oe.productId,ee=Number(oe.remaining||0);Z&&(W[Z]=Xy(W[Z]||0,ee))}),Object.keys(W).forEach(re=>W[re]=rs(W[re])),_(W)})()},[]),j.useEffect(()=>{(async()=>{const k=await St(ct(Ue,"users")),W=[];k.forEach(re=>{const oe=re.data();W.push({id:re.id,email:oe.email??"(sin email)",role:oe.role??"USER"})}),s(W)})()},[]);const F=async()=>{if(!i)return;const k=e.find(re=>re.id===i);if(!k)return;if(f.some(re=>re.productId===k.id)){a("");return}const W=await S(k.id);m(re=>[...re,{productId:k.id,productName:k.productName,measurement:k.measurement,price:Number(k.price||0),stock:W,qty:0,discount:0}]),a("")},Y=k=>{m(W=>W.filter(re=>re.productId!==k))},ue=async(k,W)=>{m(re=>re.map(oe=>{if(oe.productId!==k)return oe;const Z=(oe.measurement||"").toLowerCase()!=="lb",ee=W===""?0:Number(W),de=Z?Math.max(0,Math.round(ee)):rs(ee);return{...oe,qty:de}}))},ne=(k,W)=>{m(re=>re.map(oe=>{if(oe.productId!==k)return oe;const Z=Math.max(0,Math.floor(Number(W||0)));return{...oe,discount:Z}}))},se=j.useMemo(()=>{let k=0;for(const W of f){const re=Number(W.price||0)*Number(W.qty||0),oe=Math.max(0,re-Math.max(0,Number(W.discount||0)));k+=oe}return L(k)},[f]);j.useEffect(()=>{B(se)},[se]),j.useEffect(()=>{const k=Number(C)||0,W=Number(g)||0;w((k-W).toFixed(2))},[C,g]);const z=k=>{k.key===","&&(k.preventDefault(),k.target.value+=".")},ce=async()=>{if(f.length===0)return"Agrega al menos un producto.";for(const k of f){if(!k.qty||k.qty<=0)return`Cantidad inválida para "${k.productName}".`;const W=await S(k.productId);if(!mg(W,k.qty)){const re=await I(k.productName);if(mg(re,0)&&!mg(W,0)){const oe=await _$(k.productName,k.productId),Z=await S(k.productId);if(!mg(Z,k.qty))return`Stock insuficiente tras corregir ${oe} lote(s) para "${k.productName}".`}else return`Stock insuficiente para "${k.productName}". Disponible: ${W}`}}return null},ae=async k=>{var re,oe;k.preventDefault(),R("");const W=await ce();if(W){R("❌ "+W);return}try{O(!0);const Z=[];for(const xe of f){const be=xe.qty,{allocations:Te,avgUnitCost:Ve,cogsAmount:te}=await C$(Ue,xe.productName,be,!1),Ae=Number(xe.price||0)*Number(be||0),G=Math.max(0,Number(xe.discount||0)),Re=Math.max(0,Ae-G);Z.push({productId:xe.productId,productName:xe.productName,measurement:xe.measurement,unitPrice:Number(xe.price||0),qty:be,discount:G,lineTotal:L(Ae),lineFinal:L(Re),allocations:Te,avgUnitCost:Ve,cogsAmount:te})}const ee=Z.reduce((xe,be)=>xe+be.lineFinal,0),de=Z.reduce((xe,be)=>xe+Number(be.qty||0),0);await ss(ct(Ue,"salesV2"),{id:B$(),quantity:de,amount:ee,amountCharged:ee,amountReceived:Number(C)||0,change:y,clientName:c.trim(),timestamp:Lt.now(),date:o,userEmail:((re=n[0])==null?void 0:re.email)??"sin usuario",vendor:((oe=n[0])==null?void 0:oe.role)??"sin usuario",status:"FLOTANTE",items:Z,itemsTotal:ee}),R("✅ Venta registrada y asignada a inventario (FIFO)."),m([]),a(""),B(0),b(0),w("0"),d(""),A(Zt(new Date,"yyyy-MM-dd"))}catch(Z){console.error(Z),R(`❌ ${(Z==null?void 0:Z.message)||"Error al registrar la venta."}`)}finally{O(!1)}},Ce=j.useMemo(()=>new Set(f.map(k=>k.productId)),[f]),P=j.useMemo(()=>e.filter(k=>(T[k.id]||0)>0),[e,T]);return l.jsxs("div",{className:"relative",children:[l.jsxs("form",{onSubmit:ae,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-5xl space-y-4`,children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:i,onChange:k=>a(k.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),P.map(k=>l.jsxs("option",{value:k.id,disabled:Ce.has(k.id),title:Ce.has(k.id)?"Ya está en la lista":`Disponible: ${D(T[k.id]||0)}`,children:[k.productName," — ",k.measurement," — C$ ",k.price," (disp:"," ",D(T[k.id]||0),")"]},k.id))]}),l.jsx("button",{type:"button",onClick:F,disabled:!i||Ce.has(i),className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:o,onChange:k=>A(k.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),l.jsx("input",{className:"w-full border border-gray-300 p-2 rounded",value:c,onChange:k=>d(k.target.value),placeholder:"Opcional"})]})]}),l.jsx("div",{className:"rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{className:"text-center",children:[l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),l.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"—"})]})}),l.jsx("tbody",{children:f.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):f.map(k=>{const W=Number(k.price||0)*Number(k.qty||0),re=Math.max(0,W-Math.max(0,Number(k.discount||0))),oe=(k.measurement||"").toLowerCase()!=="lb",Z=rs(Number(k.stock)-Number(k.qty||0));return l.jsxs("tr",{className:"text-center",children:[l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[k.productName," — ",k.measurement]}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(k.price).toFixed(2)]}),l.jsx("td",{className:"p-2 border whitespace-nowrap",children:Z.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:oe?1:.01,inputMode:oe?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:k.qty===0?"":k.qty,onKeyDown:z,onChange:ee=>ue(k.productId,ee.target.value),placeholder:"0",title:"Cantidad"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:k.discount===0?"":k.discount,onChange:ee=>ne(k.productId,ee.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),l.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(re).toFixed(2)]}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>Y(k.productId),title:"Quitar",children:"✕"})})]},k.productId)})})]})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"💵 Monto total"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:`C$ ${g.toFixed(2)}`,readOnly:!0,title:"Suma de (precio × cantidad − descuento) de cada producto."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded",value:C===0?"":C,onChange:k=>b(Number(k.target.value||0))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:`C$ ${y}`,readOnly:!0})]})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:f.length===0||V,children:V?"Guardando...":"Guardar venta"}),N&&l.jsx("p",{className:`text-sm mt-2 ${N.startsWith("✅")?"text-green-600":N.startsWith("⚠️")?"text-yellow-600":"text-red-600"}`,children:N})]}),V&&l.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("span",{className:"font-semibold",children:"Guardando venta…"})]})})})]})}const kn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function N$(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[s,i]=j.useState(!0),[a,o]=j.useState(""),{refreshKey:A,refresh:c}=Yd(),[d,f]=j.useState(Zt(Kp(new Date),"yyyy-MM-dd")),[m,g]=j.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[B,C]=j.useState(""),[b,y]=j.useState(!1),[w,N]=j.useState(""),[R,V]=j.useState(0),[O,T]=j.useState(0),[_,L]=j.useState(0),[D,S]=j.useState(Zt(new Date,"yyyy-MM-dd")),[I,F]=j.useState(0),[Y,ue]=j.useState(0),[ne,se]=j.useState(""),[z,ce]=j.useState(null),[ae,Ce]=j.useState(""),[P,k]=j.useState(0),[W,re]=j.useState(0),[oe,Z]=j.useState(0),[ee,de]=j.useState(""),[xe,be]=j.useState(0),[Te,Ve]=j.useState(0);j.useEffect(()=>{(async()=>{i(!0),console.log("Refrescando...",A);const Be=await St(ct(Ue,"products")),Ke=[];Be.forEach(ot=>{const rt=ot.data();Ke.push({id:ot.id,name:rt.name??rt.productName??"(sin nombre)",category:rt.category??"(sin categoría)",measurement:rt.measurement??"lb",price:Number(rt.price??0)})}),e(Ke);const ze=Xt(ct(Ue,"inventory_batches"),di("date","desc")),tt=await St(ze),pt=[];tt.forEach(ot=>{const rt=ot.data(),Je=rs(Number(rt.quantity||0)),Ot=Number(rt.purchasePrice||0),Pt=Number(rt.salePrice||0),Pr=Number((Je*Ot).toFixed(2)),Jt=Number((Je*Pt).toFixed(2));pt.push({id:ot.id,productId:rt.productId,productName:rt.productName,category:rt.category,unit:rt.unit,quantity:Je,remaining:rs(Number(rt.remaining||0)),purchasePrice:Ot,salePrice:Pt,invoiceTotal:rt.invoiceTotal!=null?Number(rt.invoiceTotal):Pr,expectedTotal:rt.expectedTotal!=null?Number(rt.expectedTotal):Jt,date:rt.date,createdAt:rt.createdAt,status:rt.status,notes:rt.notes,paidAmount:Number(rt.paidAmount||0),paidAt:rt.paidAt})}),n(pt),i(!1)})()},[A]),j.useEffect(()=>{const Be=t.find(Ke=>Ke.id===w);Be&&L(Number(Be.price||0))},[w,t,A]),j.useEffect(()=>{F(Math.floor(R*O*100)/100)},[R,O,A]),j.useEffect(()=>{ue(Math.floor(R*_*100)/100)},[R,_,A]);const te=Be=>{const Ke=(Be||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ke)||Ke==="lb"},Ae=j.useMemo(()=>r.filter(Be=>!(d&&Be.date<d||m&&Be.date>m||B&&Be.productId!==B)),[r,d,m,B]),G=j.useMemo(()=>{const Be=Ae.reduce((Ot,Pt)=>Ot+Number(Pt.invoiceTotal||0),0),Ke=Ae.reduce((Ot,Pt)=>Ot+Number(Pt.expectedTotal||0),0);let ze=0,tt=0,pt=0,ot=0;for(const Ot of Ae)te(Ot.unit)?(ze+=Ot.quantity,tt+=Ot.remaining):(pt+=Ot.quantity,ot+=Ot.remaining);const rt=Ae.reduce((Ot,Pt)=>Ot+Pt.quantity,0),Je=Ae.reduce((Ot,Pt)=>Ot+Pt.remaining,0);return{lbsIng:ze,lbsRem:tt,udsIng:pt,udsRem:ot,qty:rt,rem:Je,totalFacturado:Be,totalEsperado:Ke}},[Ae]),Re=async Be=>{Be.preventDefault();const Ke=t.find(ze=>ze.id===w);if(!Ke||R<=0||O<=0){o("Completa producto, cantidad y costo.");return}try{const ze=rs(R),tt=await r$({productId:Ke.id,productName:Ke.name,category:Ke.category,unit:Ke.measurement,quantity:ze,purchasePrice:O,salePrice:_,invoiceTotal:I,expectedTotal:Y,date:D,notes:ne});n(pt=>[{id:tt.id,productId:Ke.id,productName:Ke.name,category:Ke.category,unit:Ke.measurement,quantity:ze,remaining:ze,purchasePrice:O,salePrice:_,invoiceTotal:I,expectedTotal:Y,date:D,createdAt:Lt.now(),status:"PENDIENTE",notes:ne},...pt]),o("✅ Lote creado"),N(""),V(0),T(0),L(Ke.price||0),F(0),ue(0),se(""),y(!1)}catch(ze){console.error(ze),o("❌ Error al crear lote")}},Le=async Be=>{confirm(`Marcar PAGADO el lote del ${Be.date} (${Be.productName})?`)&&(await S3(Be.id),n(ze=>ze.map(tt=>tt.id===Be.id?{...tt,status:"PAGADO"}:tt)))},Fe=Be=>{ce(Be.id),Ce(Be.date),k(rs(Be.quantity)),re(Be.purchasePrice),Z(Be.salePrice),de(Be.notes||""),be(Number((Be.quantity*Be.purchasePrice).toFixed(2))),Ve(Number((Be.quantity*Be.salePrice).toFixed(2)))},Pe=()=>{ce(null),Ce(""),k(0),re(0),Z(0),de(""),be(0),Ve(0)};j.useEffect(()=>{z&&be(Math.floor(P*W*100)/100)},[z,P,W,A]),j.useEffect(()=>{z&&Ve(Math.floor(P*oe*100)/100)},[z,P,oe,A]);const Xe=async()=>{if(!z)return;const Be=r.find(pt=>pt.id===z);if(!Be)return;const Ke=rs(Be.quantity-Be.remaining),ze=Math.max(0,rs(P-Ke)),tt=Tt(Ue,"inventory_batches",z);await en(tt,{date:ae,quantity:rs(P),purchasePrice:W,salePrice:oe,invoiceTotal:xe,expectedTotal:Te,notes:ee,remaining:ze}),n(pt=>pt.map(ot=>ot.id===z?{...ot,date:ae,quantity:rs(P),purchasePrice:W,salePrice:oe,invoiceTotal:xe,expectedTotal:Te,notes:ee,remaining:ze}:ot)),Pe(),o("✅ Lote actualizado")},Ge=async Be=>{confirm(`¿Eliminar el lote del ${Be.date} (${Be.productName})?`)&&(await Ts(Tt(Ue,"inventory_batches",Be.id)),n(ze=>ze.filter(tt=>tt.id!==Be.id)),o("🗑️ Lote eliminado"))},it=()=>{const Be=(d?`Desde ${d}`:"Desde inicio")+" — "+(m?`Hasta ${m}`:"Hasta hoy"),Ke=Ae.map(pt=>{const ot=Number(pt.invoiceTotal||0),rt=Number(pt.expectedTotal||0);return`
      <tr>
        <td>${pt.date}</td>
        <td>${(pt.category||"").toUpperCase()}</td>
        <td>${pt.productName}</td>
        <td>${(pt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${pt.quantity.toFixed(3)}</td>
        <td style="text-align:right">${pt.remaining.toFixed(3)}</td>
        <td style="text-align:right">${kn(pt.purchasePrice)}</td>
        <td style="text-align:right">${kn(pt.salePrice)}</td>
        <td style="text-align:right">${kn(ot)}</td>
        <td style="text-align:right">${kn(rt)}</td>
        <td>${pt.status}</td>
      </tr>`}).join(""),ze=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${Be}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${G.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${G.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${G.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${G.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${kn(G.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${kn(G.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${kn(Number((G.totalEsperado-G.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${Ke||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,tt=window.open("","_blank");tt&&(tt.document.open(),tt.document.write(ze),tt.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario (Pollo)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>y(!0),children:"Crear Lote"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:Be=>f(Be.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:Be=>g(Be.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:B,onChange:Be=>C(Be.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(Be=>l.jsxs("option",{value:Be.id,children:[Be.name," — ",Be.category]},Be.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{f(""),g(""),C("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:it,children:"Imprimir PDF"}),l.jsx("div",{className:"ml-auto",children:l.jsx(Jd,{onClick:()=>c(),loading:s})})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",G.lbsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",G.udsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",G.totalEsperado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",G.lbsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",G.udsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",G.totalFacturado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(G.totalEsperado-G.totalFacturado).toFixed(2)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Total ganancia"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando…"})}):Ae.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):Ae.map(Be=>{const Ke=z===Be.id,ze=Number(Be.invoiceTotal||0),tt=Number(Be.expectedTotal||0);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Ke?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ae,onChange:pt=>Ce(pt.target.value)}):Be.date}),l.jsx("td",{className:"p-2 border",children:Be.category.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Be.productName}),l.jsx("td",{className:"p-2 border",children:Be.unit.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Ke?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(P)?"":P,onChange:pt=>{const ot=pt.target.value.replace(",","."),rt=parseFloat(ot),Je=Number.isFinite(rt)?parseFloat(rt.toFixed(3)):0;k(Math.max(0,Je))}}):Be.quantity.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Ke?Be.remaining:Be.remaining.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Ke?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:pt=>{const ot=pt.target.value.replace(",","."),rt=parseFloat(ot),Je=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;re(Math.max(0,Je))}}):kn(Be.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Ke?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe)?"":oe,onChange:pt=>{const ot=pt.target.value.replace(",","."),rt=parseFloat(ot),Je=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;Z(Math.max(0,Je))}}):kn(Be.salePrice)}),l.jsx("td",{className:"p-2 border",children:kn(Ke?xe:ze)}),l.jsx("td",{className:"p-2 border",children:kn(Ke?Te:tt)}),l.jsx("td",{className:"p-2 border",children:kn(Ke?Te-xe:tt-ze)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Be.status})}),l.jsx("td",{className:"flex space-x-2 justify-center",children:Ke?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Xe,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[Be.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>Le(Be),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Fe(Be),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ge(Be),children:"Borrar"})]})})]},Be.id)})})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a}),b&&Xf.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Lote"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:Re,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:Be=>N(Be.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(Be=>l.jsxs("option",{value:Be.id,children:[Be.name," — ",Be.category," — ",Be.measurement," — Precio:"," ",kn(Be.price)]},Be.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:D,onChange:Be=>S(Be.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:Be=>{const Ke=Be.target.value.replace(",","."),ze=parseFloat(Ke),tt=Number.isFinite(ze)?parseFloat(ze.toFixed(3)):0;V(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:Be=>{const Ke=Be.target.value.replace(",","."),ze=parseFloat(Ke),tt=Number.isFinite(ze)?parseFloat(ze.toFixed(2)):0;T(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:Be=>{const Ke=Be.target.value.replace(",","."),ze=parseFloat(Ke),tt=Number.isFinite(ze)?parseFloat(ze.toFixed(2)):0;L(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:kn(I),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:kn(Y),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),l.jsx("input",{className:"w-full border p-2 rounded",value:ne,onChange:Be=>se(Be.target.value)})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body)]})}const fo=t=>`C$${(Number(t)||0).toFixed(2)}`;function I$(){const t=TV(new Date),[e,r]=j.useState(Zt(t,"yyyy-MM")),[n,s]=j.useState([]),[i,a]=j.useState(!1),[o,A]=j.useState(""),c=j.useRef(null),d=j.useMemo(()=>{const[b,y]=e.split("-").map(R=>parseInt(R,10)),w=Zt(Kp(new Date(b,y-1,1)),"yyyy-MM-dd"),N=Zt(Vp(new Date(b,y-1,1)),"yyyy-MM-dd");return{from:w,to:N}},[e]),f=async()=>{a(!0);try{const b=await n$(d.from,d.to),y=[];for(const w of b){const N=Tt(Ue,"inventory_batches",w.batchId),R=await Sl(N);if(!R.exists())continue;const V=R.data();y.push({batchId:w.batchId,batchDate:w.batchDate,productName:w.productName,soldQty:Number(w.quantity||0),soldAmount:Number(w.amountCharged||0),status:V.status??"PENDIENTE",purchasePrice:Number(V.purchasePrice||0),salePrice:Number(V.salePrice||0),supplier:V.supplier})}s(y)}catch(b){console.error(b),A("❌ Error al cargar liquidaciones")}finally{a(!1)}};j.useEffect(()=>{f()},[e]);const m=async b=>{confirm("Marcar este lote como PAGADO?")&&(await S3(b),s(w=>w.map(N=>N.batchId===b?{...N,status:"PAGADO"}:N)))},g=j.useMemo(()=>{const b=n.reduce((R,V)=>R+V.soldQty,0),y=n.reduce((R,V)=>R+V.soldAmount,0),w=n.reduce((R,V)=>R+V.soldQty*V.purchasePrice,0),N=y-w;return{q:b,amt:y,cogs:w,profit:N}},[n]),B=j.useMemo(()=>{const b=new Map;for(const y of n){const w=y.productName||"(sin nombre)";b.has(w)||b.set(w,{productName:w,qty:0,revenue:0,cogs:0,profit:0});const N=b.get(w);N.qty+=y.soldQty,N.revenue+=y.soldAmount;const R=y.soldQty*y.purchasePrice;N.cogs+=R,N.profit=N.revenue-N.cogs}return Array.from(b.values()).sort((y,w)=>y.productName.localeCompare(w.productName))},[n]),C=async()=>{if(!c.current)return;const b=c.current;b.classList.add("force-pdf-colors");try{const[{default:y},{jsPDF:w}]=await Promise.all([Po(()=>Promise.resolve().then(()=>wB),void 0),Po(()=>Promise.resolve().then(()=>ix),void 0)]),R=(await y(b,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),V=new w("p","mm","a4"),O=190,T=V.getImageProperties(R),_=O,L=T.height*_/T.width;V.addImage(R,"PNG",10,10,_,L),V.save(`liquidaciones_${e}.pdf`)}catch(y){console.error(y),alert("No se pudo generar el PDF")}finally{b.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),l.jsx("button",{onClick:C,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[l.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),l.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:b=>r(b.target.value)}),l.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),l.jsxs("div",{ref:c,children:[l.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",g.q]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",fo(g.amt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",fo(g.cogs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",fo(g.profit)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Vendido"}),l.jsx("th",{className:"p-2 border",children:"Monto vendido"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:i?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando…"})}):n.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(b=>{const y=b.soldQty*b.purchasePrice,w=b.soldAmount-y;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:b.batchDate}),l.jsx("td",{className:"p-2 border",children:b.productName}),l.jsx("td",{className:"p-2 border",children:b.supplier||"-"}),l.jsx("td",{className:"p-2 border",children:b.soldQty}),l.jsx("td",{className:"p-2 border",children:fo(b.soldAmount)}),l.jsx("td",{className:"p-2 border",children:fo(y)}),l.jsx("td",{className:`p-2 border ${w>=0?"text-green-700":"text-red-700"}`,children:fo(w)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${b.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:b.status})}),l.jsx("td",{className:"p-2 border",children:b.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>m(b.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},b.batchId)})})]})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),l.jsx("th",{className:"p-2 border",children:"Ingreso"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),l.jsx("tbody",{children:B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):B.map(b=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:b.productName}),l.jsx("td",{className:"p-2 border",children:b.qty}),l.jsx("td",{className:"p-2 border",children:fo(b.revenue)}),l.jsx("td",{className:"p-2 border",children:fo(b.cogs)}),l.jsx("td",{className:`p-2 border ${b.profit>=0?"text-green-700":"text-red-700"}`,children:fo(b.profit)})]},b.productName))})]})})]}),o&&l.jsx("p",{className:"mt-2 text-sm",children:o})]})}const po=t=>`C$${Number(t??0).toFixed(2)}`,S$=()=>Zt(new Date,"yyyy-MM-dd"),Jy=t=>Number(t||0).toFixed(3);function F$(){const[t,e]=j.useState(()=>{const b=new Date,y=new Date(b.getFullYear(),b.getMonth(),1);return Zt(y,"yyyy-MM-dd")}),[r,n]=j.useState(S$()),[s,i]=j.useState(!0),[a,o]=j.useState([]),[A,c]=j.useState([]),{refreshKey:d,refresh:f}=Yd();j.useEffect(()=>{(async()=>{i(!0);const y=Xt(ct(Ue,"salesV2"),Ar("date",">=",t),Ar("date","<=",r)),w=await St(y),N=[];w.forEach(T=>{const _=T.data(),L=_.date??"";if(Array.isArray(_.items)&&_.items.length>0){_.items.forEach((D,S)=>{const I=String(D.productName??"(sin nombre)"),F=Number(D.qty??0),Y=Number(D.lineFinal??0)||Math.max(0,Number(D.unitPrice||0)*F-Number(D.discount||0));N.push({id:`${T.id}#${S}`,date:L,productName:I,quantity:F,amount:Y,allocations:Array.isArray(D.allocations)?D.allocations:_.allocations,avgUnitCost:Number(D.avgUnitCost??_.avgUnitCost??0)})});return}N.push({id:T.id,date:L,productName:_.productName??"(sin nombre)",quantity:Number(_.quantity??0),amount:Number(_.amount??_.amountCharged??0),allocations:Array.isArray(_.allocations)?_.allocations:[],avgUnitCost:Number(_.avgUnitCost??0)})}),o(N);const R=Xt(ct(Ue,"expenses"),Ar("date",">=",t),Ar("date","<=",r)),V=await St(R),O=[];V.forEach(T=>{const _=T.data();O.push({id:T.id,date:_.date??"",category:_.category??"(sin categoría)",description:_.description??"",amount:Number(_.amount??0),status:_.status??"PAGADO",createdAt:_.createdAt})}),c(O),i(!1)})()},[t,r,d]);const m=j.useMemo(()=>{const b=a.reduce((V,O)=>V+(O.amount||0),0);let y=0;a.forEach(V=>{var O;(O=V.allocations)!=null&&O.length?y+=V.allocations.reduce((T,_)=>T+Number(_.lineCost||0),0):V.avgUnitCost&&V.quantity&&(y+=Number(V.avgUnitCost)*Number(V.quantity))});const w=b-y,N=A.reduce((V,O)=>V+(O.amount||0),0),R=w-N;return{revenue:b,cogsReal:y,grossProfit:w,expensesSum:N,netProfit:R}},[a,A]),g=j.useMemo(()=>a.reduce((b,y)=>b+(Number(y.quantity)||0),0),[a]),B=j.useMemo(()=>{var y;const b=new Map;for(const w of a){const N=w.productName||"(sin nombre)";b.has(N)||b.set(N,{productName:N,units:0,revenue:0,cogs:0,profit:0,firstDate:w.date||"",lastDate:w.date||""});const R=b.get(N);R.units+=Number(w.quantity||0),R.revenue+=Number(w.amount||0),(!R.firstDate||w.date<(R.firstDate||w.date))&&(R.firstDate=w.date),(!R.lastDate||w.date>(R.lastDate||w.date))&&(R.lastDate=w.date);let V=0;(y=w.allocations)!=null&&y.length?V=w.allocations.reduce((O,T)=>O+Number(T.lineCost||0),0):w.avgUnitCost&&(V=Number(w.avgUnitCost)*Number(w.quantity||0)),R.cogs+=V,R.profit=R.revenue-R.cogs}return Array.from(b.values()).sort((w,N)=>w.productName.localeCompare(N.productName))},[a]),C=j.useMemo(()=>[...B].sort((b,y)=>y.units-b.units).slice(0,3).map((b,y)=>({idx:y+1,name:b.productName,units:b.units})),[B]);return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow ",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(Jd,{onClick:f,loading:s})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:b=>e(b.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:b=>n(b.target.value)})]})]}),s?l.jsx("p",{children:"Cargando…"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3",children:[l.jsx(Oh,{title:"Ventas Totales",value:po(m.revenue)}),l.jsx(Oh,{title:"Costo de Mercaderia",value:po(m.cogsReal)}),l.jsx(Oh,{title:"Ganancia antes de Gastos",value:po(m.grossProfit),positive:!0}),l.jsx(Oh,{title:"Gastos del Negocio",value:po(m.expensesSum)}),l.jsx(Oh,{title:"Ganancia despues de Gastos",value:po(m.netProfit),positive:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6",children:[l.jsx(T$,{title:"Libras Vendidas",value:Jy(g)}),l.jsx(U$,{title:"Productos más vendidos",items:C.map(b=>({key:`${b.idx}`,label:`${b.idx}. ${b.name}`,value:`(${Jy(b.units)})`}))})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Fechas"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Ingreso"}),l.jsx("th",{className:"border p-2",children:"Costo"}),l.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),l.jsxs("tbody",{children:[B.map(b=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:b.productName}),l.jsx("td",{className:"border p-1",children:b.firstDate&&b.lastDate?b.firstDate===b.lastDate?b.firstDate:`${b.firstDate} – ${b.lastDate}`:"—"}),l.jsx("td",{className:"border p-1",children:Jy(b.units)}),l.jsx("td",{className:"border p-1",children:po(b.revenue)}),l.jsx("td",{className:"border p-1",children:po(b.cogs)}),l.jsx("td",{className:`border p-1 ${b.profit>=0?"text-green-700":"text-red-700"}`,children:po(b.profit)})]},b.productName)),B.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categoría"}),l.jsx("th",{className:"border p-2",children:"Descripción"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"})]})}),l.jsxs("tbody",{children:[A.map(b=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:b.date}),l.jsx("td",{className:"border p-1",children:b.category}),l.jsx("td",{className:"border p-1",children:b.description}),l.jsx("td",{className:"border p-1",children:po(b.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${b.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:b.status})})]},b.id)),A.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function Oh({title:t,value:e,positive:r}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs text-gray-500",children:t}),l.jsx("div",{className:`text-xl font-bold ${r?"text-green-700":""}`,children:e})]})}function T$({title:t,value:e}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-[11px] text-gray-500",children:t}),l.jsx("div",{className:"text-base font-semibold",children:e})]})}function U$({title:t,items:e}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),l.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?l.jsx("li",{className:"text-gray-500",children:"—"}):e.map(r=>l.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}const P$=t=>`C$${Number(t??0).toFixed(2)}`;function Q$(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[s,i]=j.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=j.useState("Varios"),[A,c]=j.useState(""),[d,f]=j.useState(0),[m,g]=j.useState("PENDIENTE"),[B,C]=j.useState(""),[b,y]=j.useState(null),[w,N]=j.useState(""),[R,V]=j.useState(""),[O,T]=j.useState(""),[_,L]=j.useState(0),D=async()=>{const se=Xt(ct(Ue,"expenses"),di("createdAt","desc")),z=await St(se),ce=[];z.forEach(ae=>ce.push({id:ae.id,...ae.data()})),e(ce)};j.useEffect(()=>{(async()=>(n(!0),await D(),n(!1)))()},[]);const S=async()=>{try{await ss(ct(Ue,"expenses"),{date:s,category:a,description:A,amount:Number(d)||0,status:m,createdAt:Lt.now()}),C("✅ Gasto registrado."),i(Zt(new Date,"yyyy-MM-dd")),o("Varios"),c(""),f(0),g("PENDIENTE"),await D()}catch(se){console.error(se),C("❌ No se pudo registrar el gasto.")}},I=async se=>{confirm("¿Eliminar gasto?")&&(await Ts(Tt(Ue,"expenses",se)),e(z=>z.filter(ce=>ce.id!==se)))},F=async se=>{if(se.status==="PAGADO")return;const z=Tt(Ue,"expenses",se.id);await en(z,{status:"PAGADO",paidAt:Lt.now()}),e(ce=>ce.map(ae=>ae.id===se.id?{...ae,status:"PAGADO",paidAt:Lt.now()}:ae))},Y=se=>{y(se.id),N(se.date||""),V(se.category||"Varios"),T(se.description||""),L(Number(se.amount||0))},ue=()=>{y(null),N(""),V("Varios"),T(""),L(0)},ne=async()=>{if(!b)return;const se=Tt(Ue,"expenses",b);await en(se,{date:w,category:R,description:O,amount:Number(_)||0}),e(z=>z.map(ce=>ce.id===b?{...ce,date:w,category:R,description:O,amount:Number(_)||0}:ce)),ue()};return l.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gastos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:s,onChange:se=>i(se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Categoría"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:a,onChange:se=>o(se.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Descripción"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:A,onChange:se=>c(se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"border rounded px-3 py-2 w-full",onKeyDown:se=>{se.key===","&&(se.preventDefault(),se.target.value+=".")},value:d===0?"":d,onChange:se=>f(parseFloat((se.target.value||"0").replace(",",".")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Estado"}),l.jsxs("select",{className:"border rounded px-3 py-2 w-full",value:m,onChange:se=>g(se.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]})]}),l.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Registrar gasto"}),B&&l.jsx("p",{className:"mt-2 text-sm",children:B}),l.jsx("h3",{className:"font-semibold mt-6 mb-2",children:"Listado"}),r?l.jsx("p",{children:"Cargando…"}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categoría"}),l.jsx("th",{className:"border p-2",children:"Descripción"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[t.map(se=>{const z=b===se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:w,onChange:ce=>N(ce.target.value)}):se.date}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:R,onChange:ce=>V(ce.target.value)}):se.category}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:O,onChange:ce=>T(ce.target.value)}):se.description}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{type:"number",step:"0.01",className:"border rounded px-2 py-1 w-full text-right",value:Number.isNaN(_)?"":_,onChange:ce=>L(parseFloat(ce.target.value||"0"))}):P$(se.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),l.jsx("td",{className:"border p-1 space-x-1",children:z?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:ne,className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Guardar"}),l.jsx("button",{onClick:ue,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[se.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>F(se),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Pagar"}),l.jsx("button",{onClick:()=>Y(se),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Editar"}),l.jsx("button",{onClick:()=>I(se.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]})})]},se.id)}),t.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin gastos aún."})})]})]})]})}function rw(t){return(t||"").trim().toLowerCase()}async function P3(){const t=await St(ct(Ue,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=rw(n.name??n.productName);s&&e.set(s,r.id)}),e}async function L$(t=!1){const e=await P3(),r=await St(ct(Ue,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=rw(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await en(Tt(Ue,"inventory_batches",s.id),{productId:o}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function j$(t,e=!1){const r=rw(t),s=(await P3()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await St(ct(Ue,"inventory_batches"));let a=0;for(const o of i.docs){const A=o.data();rw(A.productName)===r&&A.productId!==s&&(e||await en(Tt(Ue,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function k$(){const[t,e]=j.useState(!1),[r,n]=j.useState(""),s=async()=>{try{e(!0),n("");const A=await L$(!1);n(`✅ Hecho. Revisados: ${A.checked}, Corregidos: ${A.fixed}, Ok: ${A.alreadyOk}, Sin nombre: ${A.missingName}, Sin match: ${A.withoutMatch}. (Mira consola para detalles)`)}catch(A){n("❌ Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}},[i,a]=j.useState(""),o=async()=>{if(!i.trim()){n("⚠️ Escribe el nombre del producto.");return}try{e(!0),n("");const A=await j$(i.trim(),!1);n(`✅ Hecho. Corregidos ${A} lote(s) para "${i}".`)}catch(A){n("❌ Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}};return l.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migración de Lotes"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",l.jsx("code",{children:"inventory_batches.productId"})," basándose en el nombre del producto. Úsalo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo…":"Corregir TODOS los lotes"})}),l.jsx("hr",{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),l.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:A=>a(A.target.value)}),l.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo…":"Corregir lotes de ese producto"})]}),r&&l.jsx("p",{className:"text-sm",children:r})]})}const mo=t=>`C$ ${Number(t||0).toFixed(2)}`,Mh=t=>Number(t||0).toFixed(3);function R$(){var f,m,g,B,C;const[t,e]=j.useState([]),[r,n]=j.useState(!0),[s,i]=j.useState(null),a=j.useRef(null);j.useEffect(()=>{(async()=>{n(!0);const b=Xt(ct(Ue,"invoices"),di("date","desc")),y=await St(b),w=[];y.forEach(N=>{const R=N.data();w.push({id:N.id,...R,batches:R.batches||[],expenses:R.expenses||[],totals:R.totals||{lbs:R.totalLbs||0,units:R.totalUnits||0,amount:R.totalAmount||0,expenses:R.totalExpenses||0,finalAmount:R.finalAmount||0}})}),e(w),n(!1)})()},[]);const o=async b=>{const y=b.status==="PAGADA"?"PENDIENTE":"PAGADA";await en(Tt(Ue,"invoices",b.id),{status:y}),e(w=>w.map(N=>N.id===b.id?{...N,status:y}:N)),(s==null?void 0:s.id)===b.id&&i({...b,status:y})},A=async b=>{if(window.confirm(`¿Eliminar factura del ${b.date}?`))try{const y=Tt(Ue,"invoices",b.id),w=await Sl(y),N=w.exists()?w.data():null,R=Yw(Ue),V=(N==null?void 0:N.batches)||[];for(const O of V){const T=O.batchId||O.id;if(!T)continue;const _=Tt(Ue,"inventory_batches",T);R.update(_,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}R.delete(y),await R.commit(),e(O=>O.filter(T=>T.id!==b.id)),(s==null?void 0:s.id)===b.id&&i(null)}catch(y){console.error(y),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const b=a.current,y=await gB(b,{backgroundColor:"#ffffff"}),w=y.toDataURL("image/png"),N=new Ut("p","mm","a4"),R=N.internal.pageSize.getWidth(),V=y.height*R/y.width;N.addImage(w,"PNG",0,0,R,V),N.save(`factura_${s.number||s.date}.pdf`)},d=b=>b.totals||{lbs:b.totalLbs||0,units:b.totalUnits||0,amount:b.totalAmount||0,expenses:b.totalExpenses||0,finalAmount:b.finalAmount||0};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturación"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"N° factura"}),l.jsx("th",{className:"p-2 border",children:"Descripción"}),l.jsx("th",{className:"p-2 border",children:"Libras"}),l.jsx("th",{className:"p-2 border",children:"Unidades"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Gastos"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando…"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin facturas"})}):t.map(b=>{const y=d(b);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:b.date}),l.jsx("td",{className:"p-2 border",children:b.number||"—"}),l.jsx("td",{className:"p-2 border",children:b.description||"—"}),l.jsx("td",{className:"p-2 border",children:Mh(y.lbs)}),l.jsx("td",{className:"p-2 border",children:Mh(y.units)}),l.jsx("td",{className:"p-2 border",children:mo(y.amount)}),l.jsx("td",{className:"p-2 border",children:mo(y.expenses)}),l.jsx("td",{className:"p-2 border",children:mo(y.finalAmount)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${b.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:b.status})}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(b),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(b),children:b.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(b),children:"Eliminar"})]})})]},b.id)})})]})}),s&&l.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?`— ${s.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),l.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Mh(((f=s.totals)==null?void 0:f.lbs)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Mh(((m=s.totals)==null?void 0:m.units)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto:"})," ",mo(((g=s.totals)==null?void 0:g.amount)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",mo(((B=s.totals)==null?void 0:B.expenses)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto final:"})," ",mo(((C=s.totals)==null?void 0:C.finalAmount)||0)]})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),l.jsxs("table",{className:"min-w-full text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"})]})}),l.jsx("tbody",{children:s.batches&&s.batches.length>0?s.batches.map((b,y)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:b.productName||"(sin nombre)"}),l.jsx("td",{className:"p-2 border",children:(b.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Mh(b.quantity)}),l.jsx("td",{className:"p-2 border",children:mo(b.salePrice)}),l.jsx("td",{className:"p-2 border",children:mo(b.amount)})]},y)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin items"})})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripción"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:s.expenses&&s.expenses.length>0?s.expenses.map((b,y)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:b.date}),l.jsx("td",{className:"p-2 border",children:b.description}),l.jsx("td",{className:"p-2 border",children:mo(b.amount)})]},y)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]})]})]})}const Pu=t=>`C$${Number(t||0).toFixed(2)}`,Yy=t=>Number(t||0).toFixed(3),D$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function O$({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=j.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=j.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[A,c]=j.useState(""),[d,f]=j.useState(n.map(I=>I.id)),[m,g]=j.useState([]),[B,C]=j.useState([]),[b,y]=j.useState(!1),[w,N]=j.useState(!1),[R,V]=j.useState("");j.useEffect(()=>{(async()=>{try{y(!0);const I=Xt(ct(Ue,"expenses"),di("date","desc")),F=await St(I),Y=[];F.forEach(ue=>{const ne=ue.data();Y.push({id:ue.id,date:ne.date,description:ne.description,amount:Number(ne.amount||0)})}),g(Y)}catch(I){console.error(I)}finally{y(!1)}})()},[]);const O=j.useMemo(()=>n.filter(I=>d.includes(I.id)),[n,d]),T=j.useMemo(()=>{let I=0,F=0,Y=0;for(const se of O){D$(se.unit)?I+=Number(se.quantity||0):F+=Number(se.quantity||0);const z=se.expectedTotal??Number((Number(se.quantity||0)*Number(se.salePrice||0)).toFixed(2));Y+=Number(z||0)}const ue=m.filter(se=>B.includes(se.id)).reduce((se,z)=>se+Number(z.amount||0),0),ne=Y-ue;return{totalLbs:I,totalUnits:F,totalAmount:Y,totalGastos:ue,finalAmount:ne}},[O,m,B]),_=(I,F)=>{f(Y=>F?[...new Set([...Y,I])]:Y.filter(ue=>ue!==I))},L=(I,F)=>{C(Y=>F?[...new Set([...Y,I])]:Y.filter(ue=>ue!==I))},D=I=>{f(I?n.map(F=>F.id):[])},S=async()=>{if(V(""),O.length===0){V("Selecciona al menos 1 lote pagado.");return}try{N(!0);const I={number:a.trim(),date:s,description:A.trim(),status:"PENDIENTE",createdAt:Lt.now(),totalLbs:Number(T.totalLbs.toFixed(3)),totalUnits:Number(T.totalUnits.toFixed(3)),totalAmount:Number(T.totalAmount.toFixed(2)),totalExpenses:Number(T.totalGastos.toFixed(2)),finalAmount:Number(T.finalAmount.toFixed(2)),batches:O.map(F=>{var Y;return{id:F.id,productId:F.productId,productName:F.productName,unit:F.unit,quantity:Number(Number(F.quantity||0).toFixed(3)),salePrice:Number(Number(F.salePrice||0).toFixed(2)),amount:Number((Number(F.quantity||0)*Number(F.salePrice||0)).toFixed(2)),batchDate:F.date,paidAt:(Y=F.paidAt)!=null&&Y.toDate?Zt(F.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:m.filter(F=>B.includes(F.id)).map(F=>({id:F.id,date:F.date||null,description:F.description||"",amount:Number(Number(F.amount||0).toFixed(2))}))};await ss(ct(Ue,"invoices"),I),V("✅ Factura creada."),r()}catch(I){console.error(I),V(`❌ Error al crear factura: ${(I==null?void 0:I.message)||"desconocido"}`)}finally{N(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),l.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:s,onChange:I=>i(I.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Número"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:a,onChange:I=>o(I.target.value),placeholder:"FAC-001"})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripción"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:A,onChange:I=>c(I.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:n.length>0&&d.length===n.length,onChange:I=>D(I.target.checked)}),"Seleccionar todos"]})]}),n.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):l.jsx("div",{className:"border rounded",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha lote"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),l.jsx("tbody",{children:n.map(I=>{var ue;const F=d.includes(I.id),Y=I.expectedTotal??Number((Number(I.quantity||0)*Number(I.salePrice||0)).toFixed(2));return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:F,onChange:ne=>_(I.id,ne.target.checked)})}),l.jsx("td",{className:"p-2 border",children:I.date}),l.jsx("td",{className:"p-2 border",children:I.productName}),l.jsx("td",{className:"p-2 border",children:(I.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Yy(I.quantity)}),l.jsx("td",{className:"p-2 border",children:Pu(I.salePrice)}),l.jsx("td",{className:"p-2 border",children:Pu(Y)}),l.jsx("td",{className:"p-2 border",children:(ue=I.paidAt)!=null&&ue.toDate?Zt(I.paidAt.toDate(),"yyyy-MM-dd"):"—"})]},I.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),b&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando…"})]}),m.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos registrados o no están disponibles."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripción"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:m.map(I=>{const F=B.includes(I.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:F,onChange:Y=>L(I.id,Y.target.checked)})}),l.jsx("td",{className:"p-2 border",children:I.date||"—"}),l.jsx("td",{className:"p-2 border",children:I.description||"—"}),l.jsx("td",{className:"p-2 border",children:Pu(Number(I.amount||0))})]},I.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm mb-4",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:Yy(T.totalLbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Yy(T.totalUnits)})]}),l.jsxs("div",{children:["Total monto: ",l.jsx("strong",{children:Pu(T.totalAmount)})]}),l.jsxs("div",{children:["Total gastos: ",l.jsx("strong",{children:Pu(T.totalGastos)})]}),l.jsxs("div",{className:"md:col-span-2",children:["Monto final (monto - gastos):"," ",l.jsx("strong",{children:Pu(T.finalAmount)})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:w,onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:w?"Creando…":"Crear factura"}),l.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),R&&l.jsx("span",{className:"text-sm ml-2",children:R})]})]})})}const Yl=t=>`C$ ${Number(t||0).toFixed(2)}`,Qu=t=>Number(t||0).toFixed(3),M$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function H$(){const[t,e]=j.useState([]),[r,n]=j.useState(!0),[s,i]=j.useState(Zt(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[a,o]=j.useState(Zt(new Date,"yyyy-MM-dd")),[A,c]=j.useState(""),[d,f]=j.useState(!1),{refreshKey:m,refresh:g}=Yd();j.useEffect(()=>{(async()=>{n(!0);const w=Xt(ct(Ue,"inventory_batches"),Ar("status","==","PAGADO"),di("date","desc")),N=await St(w),R=[];N.forEach(V=>{const O=V.data();R.push({id:V.id,productId:O.productId,productName:O.productName,category:O.category,unit:O.unit,quantity:Number(O.quantity||0),remaining:Number(O.remaining||0),purchasePrice:Number(O.purchasePrice||0),salePrice:Number(O.salePrice||0),invoiceTotal:Number(O.invoiceTotal||0),expectedTotal:Number(O.expectedTotal||Number(O.quantity||0)*Number(O.salePrice||0)),date:O.date,status:O.status,paidAt:O.paidAt})}),e(R),n(!1)})()},[m]);const B=j.useMemo(()=>t.filter(w=>!(s&&w.date<s||a&&w.date>a||A&&w.productId!==A)),[t,s,a,A]),C=j.useMemo(()=>{let w=0,N=0,R=0,V=0,O=0,T=0;for(const _ of B)M$(_.unit)?(w+=_.quantity,N+=_.remaining):(R+=_.quantity,V+=_.remaining),O+=Number(_.expectedTotal||0),T+=Number(_.invoiceTotal||0);return{lbsIng:w,lbsRem:N,udsIng:R,udsRem:V,totalEsperado:O,totalFact:T,gross:O-T}},[B]),b=async w=>{window.confirm(`Marcar PENDIENTE el lote ${w.productName} (${w.date})?`)&&(await en(Tt(Ue,"inventory_batches",w.id),{status:"PENDIENTE"}),e(N=>N.map(R=>R.id===w.id?{...R,status:"PENDIENTE"}:R)))},y=j.useMemo(()=>{const w=new Map;return t.forEach(N=>w.set(N.productId,{id:N.productId,name:N.productName})),Array.from(w.values())},[t]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),l.jsx(Jd,{onClick:g,loading:r})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:w=>i(w.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:w=>o(w.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:w=>c(w.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),y.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(""),o(""),c("")},children:"Quitar filtro"}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>f(!0),children:"Crear factura"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Qu(C.lbsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Qu(C.udsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Yl(C.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Qu(C.lbsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Qu(C.udsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Yl(C.totalFact)]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Yl(C.gross)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando…"})}):B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):B.map(w=>{var N;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:w.date}),l.jsx("td",{className:"p-2 border",children:(w.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:w.productName}),l.jsx("td",{className:"p-2 border",children:(w.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Qu(w.quantity)}),l.jsx("td",{className:"p-2 border",children:Qu(w.remaining)}),l.jsx("td",{className:"p-2 border",children:Yl(w.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Yl(w.salePrice)}),l.jsx("td",{className:"p-2 border",children:Yl(w.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:Yl(w.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:(N=w.paidAt)!=null&&N.toDate?Zt(w.paidAt.toDate(),"yyyy-MM-dd"):"—"}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>b(w),children:"Marcar PENDIENTE"})})]},w.id)})})]})}),d&&l.jsx(O$,{paidBatches:B,onClose:()=>f(!1),onCreated:()=>f(!1)})]})}const Rn=t=>`C$ ${(Number(t)||0).toFixed(2)}`,V$=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function gg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function K$(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function q$(t){const e="ROP",r=gg(t.subcat).slice(0,3)||"GEN",n=K$(t.gender),s=gg(t.color).slice(0,3)||"COL",i=gg(t.size)||"TLL",a=gg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${o}`}const Hh=/^[A-Za-z0-9._-]{0,32}$/;function G$(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[s,i]=j.useState(!0),[a,o]=j.useState(""),[A,c]=j.useState(Zt(Kp(new Date),"yyyy-MM-dd")),[d,f]=j.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[m,g]=j.useState(""),[B,C]=j.useState(""),[b,y]=j.useState(Zt(new Date,"yyyy-MM-dd")),[w,N]=j.useState(0),[R,V]=j.useState(0),[O,T]=j.useState(0),[_,L]=j.useState(0),[D,S]=j.useState(0),[I,F]=j.useState(""),[Y,ue]=j.useState(""),[ne,se]=j.useState(""),[z,ce]=j.useState(""),[ae,Ce]=j.useState(""),[P,k]=j.useState(""),[W,re]=j.useState(""),[oe,Z]=j.useState(!1),[ee,de]=j.useState(""),[xe,be]=j.useState("Camisa"),[Te,Ve]=j.useState(null),[te,Ae]=j.useState(""),[G,Re]=j.useState(0),[Le,Fe]=j.useState(0),[Pe,Xe]=j.useState(0),[Ge,it]=j.useState(0),[Be,Ke]=j.useState(0),[ze,tt]=j.useState(""),[pt,ot]=j.useState(""),[rt,Je]=j.useState(""),[Ot,Pt]=j.useState(""),[Pr,Jt]=j.useState(""),[dr,Gn]=j.useState(""),[qt,As]=j.useState(""),[ar,pr]=j.useState(null),[cn,mr]=j.useState({x:0,y:0}),[Ft,$t]=j.useState(!1);j.useEffect(()=>{const ve=()=>pr(null),et=nt=>nt.key==="Escape"&&pr(null);return document.addEventListener("click",ve),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",ve),document.removeEventListener("keydown",et)}},[]);const ls=(ve,et,nt=192,jt=160)=>{let Ct=ve;ve+nt+8>window.innerWidth&&(Ct=ve-nt),Ct=Math.max(8,Math.min(Ct,window.innerWidth-nt-8));let gt=et;return et+jt+8>window.innerHeight&&(gt=window.innerHeight-jt-8),gt=Math.max(8,Math.min(gt,window.innerHeight-jt-8)),{x:Ct,y:gt}},qr=(ve,et)=>{ve.stopPropagation();const nt=ve.currentTarget.getBoundingClientRect(),jt=nt.right,Wt=nt.bottom,Ct=ls(jt,Wt);mr(Ct),pr(gt=>gt===et?null:et)};j.useEffect(()=>{const ve=()=>pr(null),et=nt=>{nt.key==="Escape"&&pr(null)};return document.addEventListener("click",ve),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",ve),document.removeEventListener("keydown",et)}},[]),j.useEffect(()=>{if(!ar)return;const ve=()=>pr(null);return window.addEventListener("scroll",ve,!0),window.addEventListener("resize",ve),()=>{window.removeEventListener("scroll",ve,!0),window.removeEventListener("resize",ve)}},[ar]),j.useEffect(()=>{(async()=>{const ve=await St(ct(Ue,"products_clothes")),et=[];ve.forEach(Ct=>{const gt=Ct.data();et.push({id:Ct.id,name:gt.name??"(sin nombre)",category:gt.category??"(sin categoría)",measurement:gt.measurement??"unidad",price:Number(gt.price??0),sku:gt.sku||"",size:gt.size||"",color:gt.color||"",gender:gt.gender||"",brand:gt.brand||""})}),e(et);const nt=Xt(ct(Ue,"inventory_clothes_batches"),di("date","desc")),jt=await St(nt),Wt=[];jt.forEach(Ct=>{const gt=Ct.data();Wt.push({id:Ct.id,productId:gt.productId,productName:gt.productName,category:gt.category,unit:gt.unit,quantity:Number(gt.quantity||0),remaining:Number(gt.remaining??gt.quantity??0),purchasePrice:Number(gt.purchasePrice||0),salePrice:Number(gt.salePrice||0),invoiceTotal:Number(gt.invoiceTotal??Number(gt.quantity||0)*Number(gt.purchasePrice||0)),expectedTotal:Number(gt.expectedTotal??Number(gt.quantity||0)*Number(gt.salePrice||0)),date:gt.date,createdAt:gt.createdAt,status:gt.status,notes:gt.notes||"",sku:gt.sku||"",size:gt.size||"",color:gt.color||"",gender:gt.gender||"",brand:gt.brand||"",clientCode:gt.clientCode||""})}),n(Wt),i(!1)})()},[]),j.useEffect(()=>{const ve=t.find(et=>et.id===B);ve&&(T(Number(ve.price||0)),ve.sku&&ue(ve.sku),ve.size&&se(et=>et||ve.size),ve.color&&ce(et=>et||ve.color),ve.gender&&Ce(et=>et||ve.gender),ve.brand&&k(et=>et||ve.brand))},[B,t]),j.useEffect(()=>{L(Math.floor(w*R*100)/100)},[w,R]),j.useEffect(()=>{S(Math.floor(w*O*100)/100)},[w,O]),j.useEffect(()=>{const ve=t.find(jt=>jt.id===B);if(ve!=null&&ve.sku){ue(ve.sku);return}const et=oe&&xe?xe:(ve==null?void 0:ve.category)||"";if(!et&&!ae&&!z&&!ne&&!P){ue("");return}const nt=q$({subcat:et,gender:ae||"",color:z||"",size:ne||"",brand:P||""});ue(nt)},[oe,xe,B,ae,z,ne,P,t]);const hr=j.useMemo(()=>r.filter(ve=>!(A&&ve.date<A||d&&ve.date>d||m&&ve.productId!==m)),[r,A,d,m]),Se=j.useMemo(()=>{const ve=hr.reduce((Wt,Ct)=>Wt+(Ct.invoiceTotal||0),0),et=hr.reduce((Wt,Ct)=>Wt+(Ct.expectedTotal||0),0),nt=hr.reduce((Wt,Ct)=>Wt+Ct.quantity,0),jt=hr.reduce((Wt,Ct)=>Wt+Ct.remaining,0);return{udsIng:nt,udsRem:jt,totalFacturado:ve,totalEsperado:et}},[hr]),De=async ve=>{ve.preventDefault(),o("");const et=!!B&&!oe,nt=t.find(gt=>gt.id===B),jt=et?(nt==null?void 0:nt.name)||"":ee||"",Wt=et?(nt==null?void 0:nt.category)||"":xe||"General",Ct=et&&(nt==null?void 0:nt.measurement)||"unidad";if(!jt||w<=0||R<=0){o("Completa nombre/cantidad/costo.");return}if(W&&!Hh.test(W)){o("Código del cliente inválido (solo A-Z, 0-9, . _ - , máx 32).");return}try{const gt=await ss(ct(Ue,"inventory_clothes_batches"),{productId:et?nt.id:"",productName:jt,category:Wt,unit:Ct,quantity:w,remaining:w,purchasePrice:R,salePrice:O,invoiceTotal:_,expectedTotal:D,date:b,createdAt:Lt.now(),status:"PENDIENTE",notes:I||"",sku:Y||"",size:ne||"",color:z||"",gender:ae||"",brand:P||"",clientCode:W||""});n(Bs=>[{id:gt.id,productId:et?nt.id:"",productName:jt,category:Wt,unit:Ct,quantity:w,remaining:w,purchasePrice:R,salePrice:O,invoiceTotal:_,expectedTotal:D,date:b,createdAt:Lt.now(),status:"PENDIENTE",notes:I||"",sku:Y||"",size:ne||"",color:z||"",gender:ae||"",brand:P||"",clientCode:W||""},...Bs]),o("✅ Lote de ropa creado"),C(""),y(Zt(new Date,"yyyy-MM-dd")),N(0),V(0),T(0),L(0),S(0),F(""),ue(""),se(""),ce(""),Ce(""),k(""),re(""),Z(!1),de(""),be("Camisa")}catch(gt){console.error(gt),o("❌ Error al crear lote")}},Et=async ve=>{confirm(`Marcar PAGADO el lote del ${ve.date} (${ve.productName})?`)&&(await en(Tt(Ue,"inventory_clothes_batches",ve.id),{status:"PAGADO"}),n(nt=>nt.map(jt=>jt.id===ve.id?{...jt,status:"PAGADO"}:jt)))},ft=ve=>{Ve(ve.id),Ae(ve.date),Re(ve.quantity),Fe(ve.purchasePrice),Xe(ve.salePrice),it(Number((ve.quantity*ve.purchasePrice).toFixed(2))),Ke(Number((ve.quantity*ve.salePrice).toFixed(2))),tt(ve.notes||""),ot(ve.sku||""),Je(ve.size||""),Pt(ve.color||""),Jt(ve.gender||""),Gn(ve.brand||""),As(ve.clientCode||"")},ut=()=>{Ve(null),Ae(""),Re(0),Fe(0),Xe(0),it(0),Ke(0),tt(""),ot(""),Je(""),Pt(""),Jt(""),Gn(""),As("")};j.useEffect(()=>{Te&&it(Math.floor(G*Le*100)/100)},[Te,G,Le]),j.useEffect(()=>{Te&&Ke(Math.floor(G*Pe*100)/100)},[Te,G,Pe]);const Nt=async()=>{if(!Te)return;const ve=r.find(Wt=>Wt.id===Te);if(!ve)return;const et=Math.max(0,ve.quantity-ve.remaining),nt=Math.max(0,G-et);if(qt&&!Hh.test(qt)){o("Código del cliente inválido (solo A-Z, 0-9, . _ - , máx 32).");return}const jt=Tt(Ue,"inventory_clothes_batches",Te);await en(jt,{date:te,quantity:G,purchasePrice:Le,salePrice:Pe,invoiceTotal:Ge,expectedTotal:Be,notes:ze,remaining:nt,sku:pt,size:rt,color:Ot,gender:Pr||"",brand:dr||"",clientCode:qt||""}),n(Wt=>Wt.map(Ct=>Ct.id===Te?{...Ct,date:te,quantity:G,purchasePrice:Le,salePrice:Pe,invoiceTotal:Ge,expectedTotal:Be,notes:ze,remaining:nt,sku:pt,size:rt,color:Ot,gender:Pr||"",brand:dr||"",clientCode:qt||""}:Ct)),ut(),o("✅ Lote actualizado")},at=async ve=>{confirm(`¿Eliminar el lote del ${ve.date} (${ve.productName})?`)&&(await Ts(Tt(Ue,"inventory_clothes_batches",ve.id)),n(nt=>nt.filter(jt=>jt.id!==ve.id)),o("🗑️ Lote eliminado"))},Bt=()=>{const ve=(A?`Desde ${A}`:"Desde inicio")+" — "+(d?`Hasta ${d}`:"Hasta hoy"),et=Ct=>(Ct||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=hr.map(Ct=>`
      <tr>
        <td>${Ct.date}</td>
        <td>${(Ct.category||"").toUpperCase()}</td>
        <td>${et(Ct.productName)}</td>
        <td>${et(Ct.sku||"")}</td>
        <td>${et(Ct.size||"")}</td>
        <td>${et(Ct.color||"")}</td>
        <td>${et(Ct.clientCode||"")}</td>
        <td>${et(Ct.gender||"")}</td>
        <td>${(Ct.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Ct.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Ct.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Rn(Ct.purchasePrice)}</td>
        <td style="text-align:right">${Rn(Ct.salePrice)}</td>
        <td style="text-align:right">${Rn(Ct.invoiceTotal||0)}</td>
        <td style="text-align:right">${Rn(Ct.expectedTotal||0)}</td>
        <td>${et((Ct.notes||"").slice(0,120))}</td>
        <td>${Ct.status}</td>
      </tr>`).join(""),jt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${ve}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Se.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Se.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Rn(Se.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Rn(Se.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Rn(Number((Se.totalEsperado-Se.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Código Cliente</th>
        <th>Género</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${nt||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Wt=window.open("","_blank");Wt&&(Wt.document.open(),Wt.document.write(jt),Wt.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>$t(!0),type:"button",children:"Crear Inventario"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:ve=>c(ve.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:ve=>f(ve.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:ve=>g(ve.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(ve=>l.jsxs("option",{value:ve.id,children:[ve.name," — ",ve.category]},ve.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),g("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Bt,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Se.udsIng.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Se.udsRem.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Rn(Se.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Rn(Se.totalFacturado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Rn(Number((Se.totalEsperado-Se.totalFacturado).toFixed(2)))]})]})}),l.jsx("div",{className:"bg-white rounded shadow border",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Código Cliente"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Género"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),l.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando…"})}):hr.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):hr.map(ve=>{const et=Te===ve.id;return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:te,onChange:nt=>Ae(nt.target.value)}):ve.date}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(ve.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:l.jsx("span",{className:"block truncate",title:ve.productName,children:ve.productName})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:et?l.jsx("input",{className:"w-full border p-1 rounded",value:pt,onChange:nt=>ot(nt.target.value)}):l.jsx("span",{className:"block truncate",title:ve.sku||"",children:ve.sku||"—"})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?l.jsx("input",{className:"w-full border p-1 rounded",value:rt,onChange:nt=>Je(nt.target.value)}):ve.size||"—"}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?l.jsx("input",{className:"w-full border p-1 rounded",value:Ot,onChange:nt=>Pt(nt.target.value)}):ve.color||"—"}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:et?l.jsx("input",{className:"w-full border p-1 rounded",value:qt,onChange:nt=>{const jt=nt.target.value;Hh.test(jt)&&As(jt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"A–Z 0–9 . _ - (máx 32)"}):l.jsx("span",{className:"block truncate",title:ve.clientCode||"",children:ve.clientCode||"—"})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:et?l.jsx("select",{className:"w-full border p-1 rounded",value:Pr,onChange:nt=>Jt(nt.target.value),children:V$.map(nt=>l.jsx("option",{value:nt,children:nt||"—"},nt))}):ve.gender||"—"}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(ve.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:nt=>Re(Math.max(0,parseInt(nt.target.value||"0",10)))}):ve.quantity.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?ve.remaining:ve.remaining.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Le)?"":Le,onChange:nt=>Fe(Math.max(0,parseFloat(nt.target.value||"0")))}):Rn(ve.purchasePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Pe)?"":Pe,onChange:nt=>Xe(Math.max(0,parseFloat(nt.target.value||"0")))}):Rn(ve.salePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Rn(et?Ge:ve.invoiceTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Rn(et?Be:ve.expectedTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:et?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ze,onChange:nt=>tt(nt.target.value),maxLength:500}):l.jsx("span",{className:"block truncate",title:ve.notes||"",children:ve.notes||"—"})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${ve.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Nt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ut,children:"Cancelar"})]}):l.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:nt=>qr(nt,ve.id),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},ve.id)})})]})})}),ar&&Xf.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:()=>pr(null),className:"fixed inset-0 z-[60]"}),l.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:cn.x,top:cn.y},onClick:ve=>ve.stopPropagation(),role:"menu","aria-orientation":"vertical",children:l.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const ve=hr.find(et=>et.id===ar);return(ve==null?void 0:ve.status)==="PENDIENTE"?l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{pr(null),Et(ve)},children:"✅ Pagar"}):null})(),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const ve=hr.find(et=>et.id===ar);ve&&(pr(null),ft(ve))},children:"✏️ Editar"}),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const ve=hr.find(et=>et.id===ar);ve&&(pr(null),at(ve))},children:"🗑️ Borrar"})]})})]}),document.body),Ft&&Xf.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>$t(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$t(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:De,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:ve=>C(ve.target.value),children:[l.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(ve=>l.jsxs("option",{value:ve.id,children:[ve.name," — ",ve.category," — ",ve.sku?`SKU: ${ve.sku}`:""]},ve.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:ve=>y(ve.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:ve=>N(Math.max(0,parseInt(ve.target.value||"0",10))),placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:ve=>V(Math.max(0,parseFloat(ve.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ve=>T(Math.max(0,parseFloat(ve.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Y,readOnly:!0,placeholder:"Se genera automáticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/género/talla/color/marca."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ne,readOnly:!0,onChange:ve=>se(ve.target.value),placeholder:"XS/S/M/L/XL/10/12…"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:z,readOnly:!0,onChange:ve=>ce(ve.target.value),placeholder:"Negro, Azul, Rojo…"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ae,readOnly:!0,onChange:ve=>Ce(ve.target.value),placeholder:"Masculino, Femenino, Otro…"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:P,onChange:ve=>k(ve.target.value),placeholder:"Shein, Usado, Otro…"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Código del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:W,onChange:ve=>{const et=ve.target.value;Hh.test(et)&&re(et)},title:"Solo letras, números, punto, guion y guion_bajo (máx 32)"}),!Hh.test(W)&&W.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato inválido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:I,onChange:ve=>F(ve.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes…"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[I.length,"/500"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(_),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(D),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$t(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const z$=["Camisa","Blusa","Vestido","Jean","Pantalón","Short","Falda","Conjunto","Abrigo","Suéter","Accesorio"],$$=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrón","Morado","Naranja"],W$=["XS","S","M","L","XL","2XL"],X$=["2","4","6","8","10","12","14"],J$=["26","28","30","32","34","36","38"],Y$=["Shein","Usado","Otro"],Z$=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function wg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function eW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function tW(t){const e="ROP",r=wg(t.subcat).slice(0,3)||"GEN",n=eW(t.gender),s=wg(t.color).slice(0,3)||"COL",i=wg(t.size)||"TLL",a=wg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const rW=/^[A-Za-z0-9._-]{0,32}$/;function nW(){const[t,e]=j.useState(""),[r,n]=j.useState("Camisa"),[s,i]=j.useState(""),[a,o]=j.useState(""),[A,c]=j.useState("Shein"),[d,f]=j.useState(""),[m,g]=j.useState(""),[B,C]=j.useState(""),[b,y]=j.useState(""),[w,N]=j.useState([]),[R,V]=j.useState(!0),[O,T]=j.useState(""),{refreshKey:_,refresh:L}=Yd(),[D,S]=j.useState(!1),I=j.useMemo(()=>r.toLowerCase()==="jean"?J$:d==="NINO"||d==="NINA"?X$:W$,[r,d]);j.useEffect(()=>{C(tW({subcat:r,gender:d,color:a,size:s,brand:A}))},[r,d,a,s,A]),j.useEffect(()=>{(async()=>{V(!0);const ne=Xt(ct(Ue,"products_clothes"),di("createdAt","desc")),se=await St(ne),z=[];se.forEach(ce=>{const ae=ce.data();z.push({id:ce.id,name:ae.name??"(sin nombre)",category:ae.category??"",measurement:ae.measurement??"unidad",sku:ae.sku??"",size:ae.size||"",color:ae.color||"",brand:ae.brand||"",gender:ae.gender||"",clientCode:ae.clientCode||"",notes:ae.notes||"",createdAt:ae.createdAt??Lt.now()})}),N(z),V(!1)})()},[_]);const F=()=>{e(""),n("Camisa"),i(""),o(""),c("Shein"),f(""),g(""),y("")},Y=async ne=>{if(ne.preventDefault(),T(""),!t.trim()){T("Ingresa el nombre del producto.");return}if(m&&!rW.test(m)){T("Código del cliente inválido");return}try{const se=await ss(ct(Ue,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:m||"",notes:b||"",createdAt:Lt.now()});N(z=>[{id:se.id,name:t.trim(),category:r,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:m||"",notes:b||"",createdAt:Lt.now()},...z]),F(),S(!1),T("✅ Producto de ropa creado")}catch(se){console.error(se),T("❌ Error al crear producto")}},ue=async ne=>{confirm(`¿Eliminar el producto "${ne.name}"?`)&&(await Ts(Tt(Ue,"products_clothes",ne.id)),N(z=>z.filter(ce=>ce.id!==ne.id)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Jd,{onClick:L,loading:R}),l.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{S(!0)},children:[l.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),D&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),l.jsxs("form",{onSubmit:Y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:ne=>e(ne.target.value),placeholder:"Ej: Blusa floral"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Subcategoría"}),l.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:ne=>n(ne.target.value),children:z$.map(ne=>l.jsx("option",{value:ne,children:ne},ne))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Género"}),l.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:ne=>f(ne.target.value),children:Z$.map(ne=>l.jsx("option",{value:ne,children:ne||"—"},ne))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:ne=>i(ne.target.value),children:[l.jsx("option",{value:"",children:"—"}),I.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ne=>o(ne.target.value),children:[l.jsx("option",{value:"",children:"—"}),$$.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),l.jsx("select",{className:"w-full border p-2 rounded",value:A,onChange:ne=>c(ne.target.value),children:Y$.map(ne=>l.jsx("option",{value:ne,children:ne},ne))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:B,readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Código cliente"}),l.jsx("input",{className:"w-full border p-2 rounded",value:m,onChange:ne=>g(ne.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:ne=>y(ne.target.value),maxLength:500})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[l.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Subcat."}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Talla"}),l.jsx("th",{className:"p-2 border",children:"Color"}),l.jsx("th",{className:"p-2 border",children:"Marca"}),l.jsx("th",{className:"p-2 border",children:"Género"}),l.jsx("th",{className:"p-2 border",children:"Código Cliente"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:R?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando…"})}):w.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):w.map(ne=>{var se;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(se=ne.createdAt)!=null&&se.toDate?ne.createdAt.toDate().toISOString().slice(0,10):"—"}),l.jsx("td",{className:"p-2 border",children:ne.category}),l.jsx("td",{className:"p-2 border",children:ne.name}),l.jsx("td",{className:"p-2 border",children:ne.sku}),l.jsx("td",{className:"p-2 border",children:ne.size||"—"}),l.jsx("td",{className:"p-2 border",children:ne.color||"—"}),l.jsx("td",{className:"p-2 border",children:ne.brand||"—"}),l.jsx("td",{className:"p-2 border",children:ne.gender||"—"}),l.jsx("td",{className:"p-2 border",children:ne.clientCode||"—"}),l.jsx("td",{className:"p-2 border",children:ne.notes||"—"}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ue(ne),children:"Borrar"})})]},ne.id)})})]})}),O&&l.jsx("p",{className:"mt-2 text-sm",children:O})]})}async function sW(t){const{productId:e,quantity:r,saleDate:n,saleId:s}=t,i=Math.max(0,Math.floor(Number(r||0)));if(!e||i<=0)throw new Error("Parámetros inválidos para allocateSaleFIFOClothes");const a=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",e)),c=(await St(a)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,m)=>{var y,w;const g=String(f.data.date||""),B=String(m.data.date||"");if(g!==B)return g<B?-1:1;const C=((y=f.data.createdAt)==null?void 0:y.seconds)??0,b=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return C-b}).map(f=>Tt(Ue,"inventory_clothes_batches",f.id)),d=[];return await al(Ue,async f=>{const m=await Promise.all(c.map(B=>f.get(B)));let g=i;for(let B=0;B<c.length&&g>0;B++){const C=c[B],b=m[B];if(!b.exists())continue;const y=b.data(),w=Math.max(0,Math.floor(Number(y.quantity||0))),N=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):w;if(N<=0)continue;const R=Math.min(N,g),V=Math.max(0,N-R);f.update(C,{remaining:V}),d.push({batchId:C.id,qty:R,batchDate:String(y.date||""),productName:String(y.productName||"")}),g-=R}if(g>0)throw new Error(`Inventario insuficiente. Faltan ${g} unidades.`);if(s)for(const B of d)await ss(ct(Ue,"batch_clothes_allocations"),{saleId:s,saleDate:n,productId:e,productName:B.productName??"",batchId:B.batchId,batchDate:B.batchDate??"",quantity:B.qty,createdAt:Lt.now()})}),{allocations:d}}async function ax(t){const e=Tt(Ue,"sales_clothes",t),r=await Sl(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)&&n.items.length>0){const o={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const A of Object.keys(n.allocationsByItem)){const c=n.allocationsByItem[A],d=String((c==null?void 0:c.productId)||A||"");if(!d)continue;const f=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];o[d]=f.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const A of n.allocationsByItem){const c=String((A==null?void 0:A.productId)||"");if(!c)continue;const d=Array.isArray(A==null?void 0:A.allocations)?A.allocations:[];o[c]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const A of n.items){const c=String((A==null?void 0:A.productId)||"");if(!c)continue;const d=Math.max(0,Math.floor(Number((A==null?void 0:A.qty)||(A==null?void 0:A.quantity)||0))),f=Array.isArray(A==null?void 0:A.allocations)?A.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):o[c]||[];s.push({productId:c,productName:String((A==null?void 0:A.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const o=n.item||{},A=String(o.productId||n.productId||""),c=Math.max(0,Math.floor(Number(o.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];A&&c>0&&s.push({productId:A,productName:String(o.productName||n.productName||""),qty:c,allocations:d.length?d:void 0})}return s.length===0?(await al(Ue,async o=>{o.delete(e)}),{restored:0}):s.every(o=>Array.isArray(o.allocations)&&o.allocations.length>0)?(await al(Ue,async A=>{const c=[];for(const f of s)for(const m of f.allocations||[])c.push({ref:Tt(Ue,"inventory_clothes_batches",m.batchId),addBack:Math.max(0,Math.floor(Number(m.qty||0)))});const d=await Promise.all(c.map(f=>A.get(f.ref)));for(let f=0;f<c.length;f++){const m=d[f];if(!m.exists())continue;const g=m.data(),B=Math.max(0,Math.floor(Number(g.remaining||0)));A.update(c[f].ref,{remaining:B+c[f].addBack})}A.delete(e)}),{restored:s.reduce((A,c)=>A+(c.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await al(Ue,async o=>{const A={};for(const g of s){if(!g.productId||g.qty<=0)continue;const B=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",g.productId)),b=(await St(B)).docs.map(y=>{const w=y.data(),N=Math.max(0,Math.floor(Number(w.quantity||0))),R=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):N;return{id:y.id,date:String(w.date||""),quantity:N,remaining:R}}).sort((y,w)=>y.date.localeCompare(w.date));A[g.productId]=b}const c=[];for(const g of s){if(!g.productId||g.qty<=0)continue;if(Array.isArray(g.allocations)&&g.allocations.length>0){for(const b of g.allocations)c.push({id:b.batchId,addBack:Math.max(0,Math.floor(Number(b.qty||0)))});continue}const B=A[g.productId]||[];let C=g.qty;for(const b of B){if(C<=0)break;const y=Math.max(0,b.quantity-b.remaining);if(y<=0)continue;const w=Math.min(y,C);c.push({id:b.id,addBack:w}),C-=w}for(const b of B){if(C<=0)break;const y=Math.min(C,g.qty);c.push({id:b.id,addBack:y}),C-=y}}const d={};for(const g of c)d[g.id]=(d[g.id]||0)+Math.max(0,Math.floor(Number(g.addBack||0)));const f=Object.keys(d).map(g=>Tt(Ue,"inventory_clothes_batches",g)),m=await Promise.all(f.map(g=>o.get(g)));for(let g=0;g<f.length;g++){const B=m[g];if(!B.exists())continue;const C=B.data(),b=Math.max(0,Math.floor(Number(C.remaining||0))),y=Math.max(0,Math.floor(Number(d[f[g].id]||0)));o.update(f[g],{remaining:b+y})}o.delete(e)}),{restored:s.reduce((o,A)=>o+A.qty,0)})}const _N=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],go=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function NN(t){const e=Xt(ct(Ue,"ar_movements"),Ar("ref.saleId","==",t)),r=await St(e);await Promise.all(r.docs.map(n=>Ts(Tt(Ue,"ar_movements",n.id))))}function iW(){const[t,e]=j.useState(!1),[r,n]=j.useState(!1),[s,i]=j.useState(null),[a,o]=j.useState([]),A=async Se=>{e(!0),n(!0),i(Se),o([]);try{const Et=(await St(Xt(ct(Ue,"sales_clothes"),Ar("__name__","==",Se)))).docs[0],ft=Et==null?void 0:Et.data(),Nt=(Array.isArray(ft==null?void 0:ft.items)?ft.items:ft!=null&&ft.item?[ft.item]:[]).map(at=>({productName:String(at.productName||""),qty:Number(at.qty||0),unitPrice:Number(at.unitPrice||0),discount:Number(at.discount||0),total:Number(at.total||0)}));o(Nt)}catch(De){console.error(De)}finally{n(!1)}},[c,d]=j.useState(""),[f,m]=j.useState("+505 "),[g,B]=j.useState(""),[C,b]=j.useState(""),[y,w]=j.useState("ACTIVO"),[N,R]=j.useState(0),[V,O]=j.useState([]),[T,_]=j.useState(!0),[L,D]=j.useState(""),[S,I]=j.useState(null),[F,Y]=j.useState(""),[ue,ne]=j.useState("+505 "),[se,z]=j.useState(""),[ce,ae]=j.useState(""),[Ce,P]=j.useState("ACTIVO"),[k,W]=j.useState(0),[re,oe]=j.useState(!1),[Z,ee]=j.useState(null),[de,xe]=j.useState(!1),[be,Te]=j.useState([]),[Ve,te]=j.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[Ae,G]=j.useState(!1),[Re,Le]=j.useState(0),[Fe,Pe]=j.useState(new Date().toISOString().slice(0,10)),[Xe,Ge]=j.useState(""),[it,Be]=j.useState(!1),[Ke,ze]=j.useState(null),[tt,pt]=j.useState(""),[ot,rt]=j.useState(0),[Je,Ot]=j.useState(""),[Pt,Pr]=j.useState(!1);j.useEffect(()=>{(async()=>{const Se=Xt(ct(Ue,"customers_clothes"),di("createdAt","desc")),De=await St(Se),Et=[];De.forEach(ft=>{const ut=ft.data();Et.push({id:ft.id,name:ut.name??"",phone:ut.phone??"+505 ",place:ut.place??"",notes:ut.notes??"",status:ut.status??"ACTIVO",creditLimit:Number(ut.creditLimit??0),createdAt:ut.createdAt??Lt.now(),balance:0})});for(const ft of Et)try{const ut=Xt(ct(Ue,"ar_movements"),Ar("customerId","==",ft.id)),Nt=await St(ut);let at=0;Nt.forEach(Bt=>at+=Number(Bt.data().amount||0)),ft.balance=at}catch{ft.balance=0}O(Et),_(!1)})()},[]);const Jt=()=>{d(""),m("+505 "),B(""),b(""),w("ACTIVO"),R(0)},dr=async Se=>{if(Se.preventDefault(),D(""),!c.trim()){D("Ingresa el nombre.");return}const De=vg(f);if(De.length<6){D("Teléfono incompleto.");return}try{const Et=await ss(ct(Ue,"customers_clothes"),{name:c.trim(),phone:De,place:g||"",notes:C||"",status:y,creditLimit:Number(N||0),createdAt:Lt.now()});O(ft=>[{id:Et.id,name:c.trim(),phone:De,place:g||"",notes:C||"",status:y,creditLimit:Number(N||0),createdAt:Lt.now(),balance:0},...ft]),Jt(),Pr(!1),D("✅ Cliente creado")}catch(Et){console.error(Et),D("❌ Error al crear cliente")}},Gn=Se=>{I(Se.id),Y(Se.name),ne(Se.phone||"+505 "),z(Se.place||""),ae(Se.notes||""),P(Se.status||"ACTIVO"),W(Number(Se.creditLimit||0))},qt=()=>{I(null),Y(""),ne("+505 "),z(""),ae(""),P("ACTIVO"),W(0)},As=async()=>{if(!S)return;const Se=vg(ue);if(!F.trim()){D("Ingresa el nombre.");return}try{await en(Tt(Ue,"customers_clothes",S),{name:F.trim(),phone:Se,place:se||"",notes:ce||"",status:Ce,creditLimit:Number(k||0)}),O(De=>De.map(Et=>Et.id===S?{...Et,name:F.trim(),phone:Se,place:se||"",notes:ce||"",status:Ce,creditLimit:Number(k||0)}:Et)),qt(),D("✅ Cliente actualizado")}catch(De){console.error(De),D("❌ Error al actualizar")}},ar=async Se=>{if(confirm(`¿Eliminar al cliente "${Se.name}"?
Se devolverán al inventario todas las prendas de sus compras y se borrarán sus movimientos.`))try{_(!0);const Et=Xt(ct(Ue,"sales_clothes"),Ar("customerId","==",Se.id)),ft=await St(Et);for(const at of ft.docs){const Bt=at.id;try{await ax(Bt)}catch(ve){console.warn("restoreSaleAndDeleteClothes error",ve);try{await Ts(Tt(Ue,"sales_clothes",Bt))}catch{}}await NN(Bt)}const ut=Xt(ct(Ue,"ar_movements"),Ar("customerId","==",Se.id)),Nt=await St(ut);await Promise.all(Nt.docs.map(at=>Ts(Tt(Ue,"ar_movements",at.id)))),await Ts(Tt(Ue,"customers_clothes",Se.id)),O(at=>at.filter(Bt=>Bt.id!==Se.id)),D("🗑️ Cliente eliminado y prendas devueltas al inventario")}catch(Et){console.error(Et),D("❌ No se pudo eliminar el cliente.")}finally{_(!1)}},pr=async Se=>{ee(Se),Te([]),te({saldoActual:0,totalAbonado:0,totalCargos:0}),oe(!0),G(!1),Le(0),Pe(new Date().toISOString().slice(0,10)),Ge(""),ze(null),xe(!0);try{const De=Xt(ct(Ue,"ar_movements"),Ar("customerId","==",Se.id)),Et=await St(De),ft=[];Et.forEach(ut=>{var at,Bt;const Nt=ut.data();ft.push({id:ut.id,date:Nt.date??((Bt=(at=Nt.createdAt)==null?void 0:at.toDate)!=null&&Bt.call(at)?Nt.createdAt.toDate().toISOString().slice(0,10):""),type:Nt.type??"CARGO",amount:Number(Nt.amount||0),ref:Nt.ref||{},comment:Nt.comment||"",createdAt:Nt.createdAt})}),ft.sort((ut,Nt)=>{var ve,et;if(ut.date!==Nt.date)return ut.date.localeCompare(Nt.date);const at=((ve=ut.createdAt)==null?void 0:ve.seconds)||0,Bt=((et=Nt.createdAt)==null?void 0:et.seconds)||0;return at-Bt}),Te(ft),cn(ft)}catch(De){console.error(De),D("❌ No se pudo cargar el estado de cuenta")}finally{xe(!1)}},cn=Se=>{const De=Se.reduce((ut,Nt)=>ut+(Number(Nt.amount)||0),0),Et=Se.filter(ut=>Number(ut.amount)<0).reduce((ut,Nt)=>ut+Math.abs(Number(Nt.amount)||0),0),ft=Se.filter(ut=>Number(ut.amount)>0).reduce((ut,Nt)=>ut+Number(Nt.amount)||0,0);te({saldoActual:De,totalAbonado:Et,totalCargos:ft})},mr=async()=>{if(!Z)return;D("");const Se=Number(Re||0);if(!(Se>0)){D("Ingresa un monto de abono mayor a 0.");return}const De=parseFloat(Se.toFixed(2));if(!Fe){D("Selecciona la fecha del abono.");return}try{Be(!0);const Et={customerId:Z.id,type:"ABONO",amount:-De,date:Fe,comment:Xe||"",createdAt:Lt.now()},ut={id:(await ss(ct(Ue,"ar_movements"),Et)).id,date:Fe,type:"ABONO",amount:-De,comment:Xe||"",createdAt:Lt.now()},Nt=[...be,ut].sort((at,Bt)=>{var nt,jt;if(at.date!==Bt.date)return at.date.localeCompare(Bt.date);const ve=((nt=at.createdAt)==null?void 0:nt.seconds)||0,et=((jt=Bt.createdAt)==null?void 0:jt.seconds)||0;return ve-et});Te(Nt),cn(Nt),O(at=>at.map(Bt=>Bt.id===Z.id?{...Bt,balance:(Bt.balance||0)-De}:Bt)),ee(at=>at&&{...at,balance:(at.balance||0)-De}),Le(0),Ge(""),Pe(new Date().toISOString().slice(0,10)),G(!1),D("✅ Abono registrado")}catch(Et){console.error(Et),D("❌ Error al registrar el abono")}finally{Be(!1)}},Ft=Se=>{ze(Se.id),pt(Se.date||new Date().toISOString().slice(0,10)),rt(Math.abs(Number(Se.amount||0))),Ot(Se.comment||"")},$t=()=>{ze(null),pt(""),rt(0),Ot("")},ls=async()=>{if(!Ke)return;const Se=be.findIndex(ut=>ut.id===Ke);if(Se===-1)return;const De=be[Se],Et=Number(ot||0);if(!(Et>0)){D("El monto debe ser mayor a 0.");return}const ft=De.type==="ABONO"?-parseFloat(Et.toFixed(2)):+parseFloat(Et.toFixed(2));try{await en(Tt(Ue,"ar_movements",Ke),{date:tt,amount:ft,comment:Je||""});const ut=[...be];ut[Se]={...De,date:tt,amount:ft,comment:Je||""},ut.sort((at,Bt)=>{var nt,jt;if(at.date!==Bt.date)return at.date.localeCompare(Bt.date);const ve=((nt=at.createdAt)==null?void 0:nt.seconds)||0,et=((jt=Bt.createdAt)==null?void 0:jt.seconds)||0;return ve-et}),Te(ut),cn(ut);const Nt=ut.reduce((at,Bt)=>at+(Number(Bt.amount)||0),0);O(at=>at.map(Bt=>Bt.id===(Z==null?void 0:Z.id)?{...Bt,balance:Nt}:Bt)),ee(at=>at&&{...at,balance:Nt}),$t(),D("✅ Movimiento actualizado")}catch(ut){console.error(ut),D("❌ Error al actualizar movimiento")}},qr=async Se=>{var Et,ft;if(confirm(`¿Eliminar este movimiento (${Se.type==="ABONO"?"Abono":"Compra"}) del ${Se.date}?${Se.type==="CARGO"&&((Et=Se.ref)!=null&&Et.saleId)?`
Se devolverán al inventario las prendas de esa venta.`:""}`))try{if(_(!0),Se.type==="CARGO"&&((ft=Se.ref)!=null&&ft.saleId)){try{await ax(Se.ref.saleId)}catch(at){console.warn("restoreSaleAndDeleteClothes error",at),_(!1),D("❌ No se pudo devolver inventario de la venta.");return}await NN(Se.ref.saleId)}else await Ts(Tt(Ue,"ar_movements",Se.id));const ut=be.filter(at=>{var Bt,ve;return Se.type==="CARGO"&&((Bt=Se.ref)!=null&&Bt.saleId)?((ve=at.ref)==null?void 0:ve.saleId)!==Se.ref.saleId:at.id!==Se.id});Te(ut),cn(ut);const Nt=ut.reduce((at,Bt)=>at+(Number(Bt.amount)||0),0);O(at=>at.map(Bt=>Bt.id===(Z==null?void 0:Z.id)?{...Bt,balance:Nt}:Bt)),ee(at=>at&&{...at,balance:Nt}),D("🗑️ Movimiento eliminado")}catch(ut){console.error(ut),D("❌ Error al eliminar movimiento")}finally{_(!1)}},hr=j.useMemo(()=>[...V].sort((Se,De)=>{var Et,ft;return Se.status!==De.status?Se.status==="BLOQUEADO"?1:-1:(((Et=De.createdAt)==null?void 0:Et.seconds)||0)-(((ft=Se.createdAt)==null?void 0:ft.seconds)||0)}),[V]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Pr(!0),type:"button",children:"Crear Cliente"})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Teléfono"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Límite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:T?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando…"})}):hr.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):hr.map(Se=>{var Et;const De=S===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(Et=Se.createdAt)!=null&&Et.toDate?Se.createdAt.toDate().toISOString().slice(0,10):"—"}),l.jsx("td",{className:"p-2 border",children:De?l.jsx("input",{className:"w-full border p-1 rounded",value:F,onChange:ft=>Y(ft.target.value)}):Se.name}),l.jsx("td",{className:"p-2 border",children:De?l.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:ft=>ne(vg(ft.target.value))}):Se.phone}),l.jsx("td",{className:"p-2 border",children:De?l.jsxs("select",{className:"w-full border p-1 rounded",value:se,onChange:ft=>z(ft.target.value),children:[l.jsx("option",{value:"",children:"—"}),_N.map(ft=>l.jsx("option",{value:ft,children:ft},ft))]}):Se.place||"—"}),l.jsx("td",{className:"p-2 border",children:De?l.jsxs("select",{className:"w-full border p-1 rounded",value:Ce,onChange:ft=>P(ft.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Se.status})}),l.jsx("td",{className:"p-2 border",children:De?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:ft=>W(Math.max(0,Number(ft.target.value||0)))}):go(Se.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:go(Se.balance||0)}),l.jsx("td",{className:"p-2 border",children:De?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ce,onChange:ft=>ae(ft.target.value),maxLength:500}):l.jsx("span",{title:Se.notes||"",children:(Se.notes||"").length>40?(Se.notes||"").slice(0,40)+"…":Se.notes||"—"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:De?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:As,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:qt,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Gn(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ar(Se),children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>pr(Se),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Se.id)})})]})}),L&&l.jsx("p",{className:"mt-2 text-sm",children:L}),Pt&&Xf.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Pr(!1)}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Pr(!1),type:"button",children:"Cerrar"})]}),l.jsxs("form",{onSubmit:dr,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: María López",value:c,onChange:Se=>d(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Teléfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:Se=>m(vg(Se.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:g,onChange:Se=>B(Se.target.value),children:[l.jsx("option",{value:"",children:"—"}),_N.map(Se=>l.jsx("option",{value:Se,children:Se},Se))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Se=>w(Se.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Límite de crédito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:N===0?"":N,onChange:Se=>R(Math.max(0,Number(Se.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:C,onChange:Se=>b(Se.target.value),maxLength:500,placeholder:"Notas del cliente…"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[C.length,"/500"]})]}),l.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Pr(!1),children:"Cancelar"}),l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),re&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta — ",(Z==null?void 0:Z.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Le(0),Pe(new Date().toISOString().slice(0,10)),Ge(""),G(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>oe(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:go(Ve.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:go(Ve.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:go(Ve.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:de?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando…"})}):be.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):be.map(Se=>{var Et,ft;const De=Ke===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:De?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:tt,onChange:ut=>pt(ut.target.value)}):Se.date||"—"}),l.jsx("td",{className:"p-2 border",children:Se.amount>=0?(Et=Se.ref)!=null&&Et.saleId?l.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>A(Se.ref.saleId),children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(ft=Se.ref)!=null&&ft.saleId?`Venta #${Se.ref.saleId}`:"—"}),l.jsx("td",{className:"p-2 border",children:De?l.jsx("input",{className:"w-full border p-1 rounded",value:Je,onChange:ut=>Ot(ut.target.value),placeholder:"Comentario"}):l.jsx("span",{title:Se.comment||"",children:(Se.comment||"").length>40?(Se.comment||"").slice(0,40)+"…":Se.comment||"—"})}),l.jsx("td",{className:"p-2 border font-semibold",children:De?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ot)?"":ot,onChange:ut=>{const Nt=Number(ut.target.value||0),at=Number.isFinite(Nt)?Math.max(0,parseFloat(Nt.toFixed(2))):0;rt(at)},placeholder:"0.00",title:Se.type==="ABONO"?"Se guardará como negativo":"Se guardará como positivo"}):go(Se.amount)}),l.jsx("td",{className:"p-2 border",children:De?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ls,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:$t,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ft(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>qr(Se),children:"Borrar"})]})})]},Se.id)})})]})})]})}),Ae&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono — ",(Z==null?void 0:Z.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Fe,onChange:Se=>Pe(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Re===0?"":Re,onChange:Se=>{const De=Number(Se.target.value||0),Et=Number.isFinite(De)?Math.max(0,parseFloat(De.toFixed(2))):0;Le(Et)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrará como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Xe,onChange:Se=>Ge(Se.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Xe.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),disabled:it,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:mr,disabled:it,children:it?"Guardando...":"Guardar abono"})]})]})}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?`— #${s}`:""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando…"})}):a.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin ítems en esta venta."})}):a.map((Se,De)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:Se.productName}),l.jsx("td",{className:"p-2 border text-right",children:Se.qty}),l.jsx("td",{className:"p-2 border text-right",children:go(Se.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:go(Se.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:go(Se.total)})]},De))})]})})]})})]})}const Lu=t=>`C$ ${(Number(t)||0).toFixed(2)}`,aW=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function oW(t){if(!t)return 0;const e=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",t)),r=await St(e);let n="0000-00-00",s=-1,i=0;return r.forEach(a=>{const o=a.data(),A=String(o.date||"0000-00-00"),c=Number(o.salePrice||0),d=o.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;A>n?(n=A,s=f,i=c):A===n&&f>s&&(s=f,i=c)}),Number(i||0)}async function IN(t){if(!t)return 0;const e=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",t)),r=await St(e);let n=0;return r.forEach(s=>n+=Number(s.data().remaining||0)),n}function SN(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function AW(){const[t,e]=j.useState([]),[r,n]=j.useState([]),[s,i]=j.useState({}),[a,o]=j.useState("CONTADO"),[A,c]=j.useState(""),[d,f]=j.useState(""),[m,g]=j.useState(new Date().toISOString().slice(0,10)),[B,C]=j.useState(""),[b,y]=j.useState([]),w=j.useMemo(()=>b.reduce((te,Ae)=>te+(Ae.qty||0),0),[b]),N=j.useMemo(()=>{const te=b.reduce((Ae,G)=>{const Re=Math.max(0,(Number(G.unitPrice)||0)*(G.qty||0)-(Number(G.discount)||0));return Ae+Re},0);return Math.floor(te*100)/100},[b]),[R,V]=j.useState(0),[O,T]=j.useState(""),[_,L]=j.useState(!1),[D,S]=j.useState(!1),[I,F]=j.useState(""),[Y,ue]=j.useState("+505 "),[ne,se]=j.useState(""),[z,ce]=j.useState(""),[ae,Ce]=j.useState("ACTIVO"),[P,k]=j.useState(0),W=()=>{F(""),ue("+505 "),se(""),ce(""),Ce("ACTIVO"),k(0)};j.useEffect(()=>{(async()=>{const te=Xt(ct(Ue,"customers_clothes"),di("createdAt","desc")),Ae=await St(te),G=[];Ae.forEach(it=>{const Be=it.data();G.push({id:it.id,name:Be.name??"",phone:Be.phone??"+505 ",place:Be.place??"",status:Be.status??"ACTIVO",creditLimit:Number(Be.creditLimit??0),balance:0})});for(const it of G)try{const Be=Xt(ct(Ue,"ar_movements"),Ar("customerId","==",it.id)),Ke=await St(Be);let ze=0;Ke.forEach(tt=>ze+=Number(tt.data().amount||0)),it.balance=ze}catch{it.balance=0}e(G);const Re=Xt(ct(Ue,"products_clothes"),di("createdAt","desc")),Le=await St(Re),Fe=[];Le.forEach(it=>{const Be=it.data();Fe.push({id:it.id,name:Be.name??"(sin nombre)",sku:Be.sku??""})}),n(Fe);const Pe=Xt(ct(Ue,"inventory_clothes_batches"),Ar("remaining",">",0)),Xe=await St(Pe),Ge={};Xe.forEach(it=>{const Be=it.data(),Ke=Be.productId||"",ze=Number(Be.remaining||0);Ke&&(Ge[Ke]=(Ge[Ke]||0)+ze)}),i(Ge)})()},[]);const re=j.useMemo(()=>t.find(te=>te.id===A),[t,A]),oe=(re==null?void 0:re.balance)||0,Z=a==="CREDITO"?oe+Math.max(0,Number(N||0))-Math.max(0,Number(R||0)):0,ee=async te=>{if(!te)return;if(b.some(Fe=>Fe.productId===te)){C("");return}const Ae=r.find(Fe=>Fe.id===te);if(!Ae){C("");return}let G=await oW(te);G||(G=Number((Ae==null?void 0:Ae.price)||0));const Re=await IN(te),Le={productId:te,productName:Ae.name||"",sku:Ae.sku||"",unitPrice:Number(G)||0,available:Number(Re)||0,qty:0,discount:0};y(Fe=>[...Fe,Le]),C("")},de=(te,Ae)=>{y(G=>G.map(Re=>{if(Re.productId!==te)return Re;if(Ae==="")return{...Re,qty:0};const Le=Math.max(0,Math.floor(Number(Ae)));return{...Re,qty:Le}}))},xe=(te,Ae)=>{y(G=>G.map(Re=>{if(Re.productId!==te)return Re;if(Ae==="")return{...Re,discount:0};const Le=Math.max(0,Math.floor(Number(Ae)));return{...Re,discount:Le}}))},be=te=>y(Ae=>Ae.filter(G=>G.productId!==te)),Te=async()=>{if(!m)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const te=b.filter(Ae=>(Ae.qty||0)>0);if(te.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(N>0))return"El total debe ser mayor a cero.";if(a==="CONTADO"){if(!d.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!A)return"Selecciona un cliente (crédito).";if(R<0)return"El pago inicial no puede ser negativo.";if(R>N)return"El pago inicial no puede superar el total.";if((re==null?void 0:re.status)==="BLOQUEADO")return"El cliente está BLOQUEADO. No se puede facturar a crédito."}for(const Ae of te){const G=await IN(Ae.productId);if(Ae.qty>G)return`Inventario insuficiente para "${Ae.productName}". Disponible: ${G} unidades.`;const Re=(Number(Ae.unitPrice)||0)*(Ae.qty||0),Le=Number(Ae.discount)||0;if(!Number.isInteger(Le)||Le<0)return`El descuento en "${Ae.productName}" debe ser entero y ≥ 0.`;if(Le>Re)return`El descuento en "${Ae.productName}" no puede exceder C$ ${Re.toFixed(2)}.`}return null},Ve=async te=>{te.preventDefault(),T("");const Ae=await Te();if(Ae){T("❌ "+Ae);return}try{L(!0);const G=b.filter(Pe=>(Pe.qty||0)>0).map(Pe=>{const Xe=(Number(Pe.unitPrice)||0)*(Pe.qty||0),Ge=Math.max(0,Math.floor(Number(Pe.discount)||0)),it=Math.max(0,Xe-Ge);return{productId:Pe.productId,productName:Pe.productName,sku:Pe.sku||"",qty:Pe.qty,unitPrice:Number(Pe.unitPrice)||0,discount:Ge,total:Math.floor(it*100)/100}}),Re={type:a,date:m,createdAt:Lt.now(),itemsTotal:Number(N)||0,total:Number(N)||0,quantity:Number(w)||0,items:G};a==="CONTADO"?Re.customerName=d.trim():(Re.customerId=A,Re.downPayment=Number(R)||0);const Le=await ss(ct(Ue,"sales_clothes"),Re);if(a==="CREDITO"&&A){const Pe={customerId:A,date:m,createdAt:Lt.now(),ref:{saleId:Le.id}};await ss(ct(Ue,"ar_movements"),{...Pe,type:"CARGO",amount:Number(N)||0}),Number(R)>0&&await ss(ct(Ue,"ar_movements"),{...Pe,type:"ABONO",amount:-Number(R)})}const Fe={};for(const Pe of G)if(Pe.qty>0){const{allocations:Xe}=await sW({productId:Pe.productId,quantity:Pe.qty,saleDate:m,saleId:Le.id});Fe[Pe.productId]={productId:Pe.productId,allocations:Xe}}await en(Tt(Ue,"sales_clothes",Le.id),{allocationsByItem:Fe}),o("CONTADO"),c(""),f(""),g(new Date().toISOString().slice(0,10)),y([]),V(0),a==="CREDITO"&&A&&e(Pe=>Pe.map(Xe=>Xe.id===A?{...Xe,balance:(Xe.balance||0)+(Number(N)||0)-(Number(R)||0)}:Xe)),T("✅ Venta registrada"),(async()=>{const Pe=Xt(ct(Ue,"inventory_clothes_batches"),Ar("remaining",">",0)),Xe=await St(Pe),Ge={};Xe.forEach(it=>{const Be=it.data(),Ke=Be.productId||"",ze=Number(Be.remaining||0);Ke&&(Ge[Ke]=(Ge[Ke]||0)+ze)}),i(Ge)})()}catch(G){console.error(G),T("❌ Error al guardar la venta")}finally{L(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),l.jsxs("form",{onSubmit:Ve,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:te=>o(te.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crédito"})]})]}),a==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:d,onChange:te=>f(te.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crédito)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border p-2 rounded",value:A,onChange:te=>c(te.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(te=>l.jsxs("option",{value:te.status==="ACTIVO"?te.id:"",disabled:te.status==="BLOQUEADO",children:[te.name," | ",te.phone," | Saldo: ",Lu(te.balance||0)]},te.id))]}),l.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>S(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(oe)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:te=>V(Math.max(0,Number(te.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(Z)})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:m,onChange:te=>g(te.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:async te=>{const Ae=te.target.value;C(Ae),await ee(Ae)},children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(te=>{const Ae=b.some(Le=>Le.productId===te.id),G=s[te.id]||0,Re=Ae||G<=0;return l.jsxs("option",{value:Re?"":te.id,disabled:Re,children:[te.name," ",te.sku?`— ${te.sku}`:""," ",G>0?`(disp: ${G})`:"(sin stock)",Ae?" (seleccionado)":""]},te.id)})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("div",{className:"border rounded overflow-hidden",children:[l.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[l.jsx("div",{className:"col-span-4",children:"Producto"}),l.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),l.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),l.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),l.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),l.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),l.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?l.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(te=>{const Ae=Math.max(0,(te.available||0)-(te.qty||0)),G=(Number(te.unitPrice)||0)*(te.qty||0),Re=Math.max(0,G-(Number(te.discount)||0));return l.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[l.jsx("div",{className:"col-span-4",children:l.jsxs("div",{className:"font-medium",children:[te.productName,te.sku?` — ${te.sku}`:""]})}),l.jsx("div",{className:"col-span-2 text-right",children:Lu(te.unitPrice)}),l.jsx("div",{className:"col-span-2 text-right",children:Ae}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(te.qty)||te.qty===0?"":te.qty,onChange:Le=>de(te.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(te.discount)||te.discount===0?"":te.discount,onChange:Le=>xe(te.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),l.jsx("div",{className:"col-span-1 text-right",children:Lu(Re)}),l.jsx("div",{className:"col-span-1 text-center",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>be(te.productId),title:"Quitar producto",children:"✕"})})]},te.productId)})]}),b.length>0&&l.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),l.jsx("span",{className:"font-semibold",children:w})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total: "}),l.jsx("span",{className:"font-semibold",children:Lu(N)})]})]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:_,children:_?"Guardando...":"Registrar venta"})})]}),O&&l.jsx("p",{className:"mt-2 text-sm",children:O}),D&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:I,onChange:te=>F(te.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Teléfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:Y,onChange:te=>ue(SN(te.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:te=>se(te.target.value),children:[l.jsx("option",{value:"",children:"—"}),aW.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:te=>Ce(te.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Límite de crédito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:P===0?"":P,onChange:te=>k(Math.max(0,Number(te.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:z,onChange:te=>ce(te.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{W(),S(!1)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(T(""),!I.trim()){T("Ingresa el nombre del nuevo cliente.");return}const te=SN(Y);try{const Ae=await ss(ct(Ue,"customers_clothes"),{name:I.trim(),phone:te,place:ne||"",notes:z||"",status:ae,creditLimit:Number(P||0),createdAt:Lt.now()}),G={id:Ae.id,name:I.trim(),phone:te,place:ne||"",status:ae,creditLimit:Number(P||0),balance:0};e(Re=>[G,...Re]),c(Ae.id),W(),S(!1),T("✅ Cliente creado")}catch(Ae){console.error(Ae),T("❌ Error al crear cliente")}},children:"Guardar cliente"})]})]})}),_&&l.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[l.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),l.jsx("span",{className:"font-medium",children:"Guardando venta…"})]})})]})}const In=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Jg(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function lW(t,e){const r=Jg(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},s=Number(t.quantity??n.qty??0),i=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:s,unitPrice:Number(n.unitPrice??(i&&s?i/s:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function cW(t,e,r,n){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((A,c)=>A.date.localeCompare(c.date));const i=[...e].sort((o,A)=>o.date.localeCompare(A.date));let a=0;for(const o of i)for(const A of o.items||[]){const c=s[A.productId];if(!c)continue;let d=Number(A.qty||0);if(!(d<=0))for(const f of c.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const m=Math.min(f.qtyLeft,d);o.date>=r&&o.date<=n&&(a+=m*f.cost),f.qtyLeft-=m,d-=m}}return a}function uW(){const{refreshKey:t,refresh:e}=Yd(),[r,n]=j.useState(Zt(Kp(new Date),"yyyy-MM-dd")),[s,i]=j.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[a,o]=j.useState([]),[A,c]=j.useState([]),[d,f]=j.useState([]),[m,g]=j.useState([]),[B,C]=j.useState([]),[b,y]=j.useState([]),[w,N]=j.useState(!0),[R,V]=j.useState(""),[O,T]=j.useState(!1),[_,L]=j.useState(null),[D,S]=j.useState([]),[I,F]=j.useState(!1),[Y,ue]=j.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});j.useEffect(()=>{(async()=>{N(!0),V("");try{const P=await St(ct(Ue,"sales_clothes")),k=[],W=[];P.forEach(te=>{const Ae=te.data(),G=lW(Ae,te.id);G&&(G.date<=s&&k.push(G),G.date>=r&&G.date<=s&&W.push(G))}),c(k),o(W);const re=await St(ct(Ue,"inventory_clothes_batches")),oe=[];re.forEach(te=>{const Ae=te.data(),G=Jg(Ae);!G||G>s||oe.push({id:te.id,productId:Ae.productId,productName:Ae.productName||"",date:G,quantity:Number(Ae.quantity||0),remaining:Number(Ae.remaining||0),purchasePrice:Number(Ae.purchasePrice||0)})}),f(oe);const Z=await St(ct(Ue,"expenses_clothes")),ee=[];Z.forEach(te=>{const Ae=te.data(),G=Jg(Ae);G&&G>=r&&G<=s&&ee.push({id:te.id,date:G,category:Ae.category||"",description:Ae.description||"",amount:Number(Ae.amount||0),status:Ae.status||""})}),g(ee);const de=await St(ct(Ue,"ar_movements")),xe=[],be={};de.forEach(te=>{const Ae=te.data(),G=Jg(Ae);if(!G)return;const Re=Ae.customerId,Le=Number(Ae.amount||0);Re&&(be[Re]=(be[Re]||0)+Le),Ae.type==="ABONO"&&G>=r&&G<=s&&xe.push({id:te.id,customerId:Re,type:"ABONO",amount:Le,date:G})}),C(xe);const Te=await St(ct(Ue,"customers_clothes")),Ve=[];Te.forEach(te=>{const Ae=te.data();Ve.push({id:te.id,name:Ae.name||"",balance:be[te.id]||0})}),y(Ve)}catch(P){console.error(P),V("❌ Error cargando datos del dashboard.")}finally{N(!1)}})()},[r,s,t]);const ne=j.useMemo(()=>{try{return cW(d,A,r,s)}catch(P){return console.error(P),0}},[d,A,r,s]),se=j.useMemo(()=>{const P=a.reduce((be,Te)=>be+(Te.total||0),0),k=m.reduce((be,Te)=>be+(Te.amount||0),0),W=P-ne,re=W-k,oe=B.reduce((be,Te)=>be+Math.abs(Te.amount||0),0),Z=b.filter(be=>(be.balance||0)>0),ee=Z.reduce((be,Te)=>be+(Te.balance||0),0);let de=0,xe=0;for(const be of a){const Te=(be.items||[]).reduce((Ve,te)=>Ve+(Number(te.qty)||0),0);be.type==="CONTADO"?de+=Te:xe+=Te}return{ventasTotales:P,costoMercaderia:ne,gastosPeriodo:k,gananciaAntes:W,gananciaDespues:re,abonosRecibidos:oe,saldosPendientes:ee,clientesConSaldo:Z.length,prendasCash:de,prendasCredito:xe}},[a,m,B,b,ne]),z=j.useMemo(()=>{const P={};for(const k of a){if(k.type!=="CREDITO"||!k.customerId)continue;const W=(k.items||[]).reduce((re,oe)=>re+(Number(oe.qty)||0),0);P[k.customerId]=(P[k.customerId]||0)+W}return b.filter(k=>(k.balance||0)>0).map(k=>({customerId:k.id,name:k.name,prendasCredito:P[k.id]||0,saldo:k.balance||0})).sort((k,W)=>W.saldo-k.saldo)},[b,a]),ce=j.useMemo(()=>{const P={};return b.forEach(k=>P[k.id]=k.name),P},[b]),ae=j.useMemo(()=>[...a].sort((P,k)=>k.date.localeCompare(P.date)).map(P=>{var re;const k=(P.items||[]).reduce((oe,Z)=>oe+(Number(Z.qty)||0),0);let W="Cash";return P.type==="CREDITO"&&P.customerId?W=ce[P.customerId]||"—":P.type==="CONTADO"&&(W=((re=P.customerName)==null?void 0:re.trim())||"Cash"),{id:P.id,date:P.date,type:P.type==="CREDITO"?"Crédito":"Cash",customer:W,piezas:k,total:Number(P.total||0)}}),[a,ce]),Ce=async P=>{T(!0),L({id:P.customerId,name:P.name}),S([]),F(!0),ue({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const k=[];let W=0,re=0,oe=0;for(const xe of a)if(!(xe.type!=="CREDITO"||xe.customerId!==P.customerId))for(const be of xe.items||[]){const Te=Number(be.qty||0),Ve=Number(be.unitPrice||0),te=Te*Ve,Ae=Math.max(0,Number(be.discount||0)),G=Math.max(0,te-Ae);k.push({saleId:xe.id,date:xe.date,productName:be.productName,sku:be.sku||"",qty:Te,unitPrice:Ve,lineTotal:te,discount:Ae,lineFinal:G}),W+=te,re+=Ae,oe+=G}let Z=0;for(const xe of B)xe.customerId===P.customerId&&(Z+=Math.abs(xe.amount||0));const ee=b.find(xe=>xe.id===P.customerId),de=(ee==null?void 0:ee.balance)||0;S(k),ue({totalBruto:W,totalDescuento:re,totalFiado:oe,saldoActual:de,abonadoPeriodo:Z})}catch(k){console.error(k),V("❌ No se pudo cargar el detalle del cliente.")}finally{F(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(Jd,{onClick:e,loading:w})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:P=>n(P.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:P=>i(P.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:In(se.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crédito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadería (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:In(se.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:In(se.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),l.jsx("div",{className:"text-xl font-semibold",children:In(se.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia después de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:In(se.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:In(se.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:In(se.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:se.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:se.prendasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crédito (vendidas)"}),l.jsx("div",{className:"text-xl font-semibold",children:se.prendasCredito})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Prendas Crédito (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando…"})}):z.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):z.map(P=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:P.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ce({customerId:P.customerId,name:P.name}),title:"Ver piezas fiadas del periodo",children:P.prendasCredito})}),l.jsx("td",{className:"p-2 border font-semibold",children:In(P.saldo)})]},P.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando…"})}):ae.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):ae.map(P=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:P.date}),l.jsx("td",{className:"p-2 border",children:P.customer}),l.jsx("td",{className:"p-2 border",children:P.type}),l.jsx("td",{className:"p-2 border",children:P.piezas}),l.jsx("td",{className:"p-2 border",children:In(P.total)})]},P.id))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categoría"}),l.jsx("th",{className:"p-2 border",children:"Descripción"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando…"})}):m.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):m.sort((P,k)=>P.date.localeCompare(k.date)).map(P=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:P.date}),l.jsx("td",{className:"p-2 border",children:P.category||"—"}),l.jsx("td",{className:"p-2 border",children:P.description?l.jsx("span",{title:P.description,children:P.description.length>40?P.description.slice(0,40)+"…":P.description}):"—"}),l.jsx("td",{className:"p-2 border",children:In(P.amount)}),l.jsx("td",{className:"p-2 border",children:P.status||"—"})]},P.id))})]})}),R&&l.jsx("p",{className:"mt-2 text-sm",children:R}),O&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente — ",(_==null?void 0:_.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>T(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:In(Y.totalBruto)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:In(Y.totalDescuento)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:In(Y.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:In(Y.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:In(Y.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Pieza"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Cant."}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"})," ",l.jsx("th",{className:"p-2 border",children:"Descuento"})," ",l.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),l.jsx("tbody",{children:I?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando…"})}):D.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):D.sort((P,k)=>P.date.localeCompare(k.date)).map((P,k)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:P.date}),l.jsx("td",{className:"p-2 border",children:P.productName}),l.jsx("td",{className:"p-2 border",children:P.sku||"—"}),l.jsx("td",{className:"p-2 border",children:P.qty}),l.jsx("td",{className:"p-2 border",children:In(P.unitPrice)}),l.jsx("td",{className:"p-2 border",children:In(P.lineTotal)}),l.jsx("td",{className:"p-2 border",children:In(P.discount)}),l.jsx("td",{className:"p-2 border",children:In(P.lineFinal)})]},`${P.saleId}-${k}`))})]})})]})})]})}const FN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],yg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function dW(){const[t,e]=j.useState(Zt(Kp(new Date),"yyyy-MM-dd")),[r,n]=j.useState(Zt(Vp(new Date),"yyyy-MM-dd")),[s,i]=j.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=j.useState(""),[A,c]=j.useState(""),[d,f]=j.useState(0),[m,g]=j.useState("PENDIENTE"),[B,C]=j.useState(""),[b,y]=j.useState([]),[w,N]=j.useState(!0),[R,V]=j.useState(""),[O,T]=j.useState(null),[_,L]=j.useState(""),[D,S]=j.useState(""),[I,F]=j.useState(""),[Y,ue]=j.useState(0),[ne,se]=j.useState("PENDIENTE"),[z,ce]=j.useState("");j.useEffect(()=>{(async()=>{N(!0);try{const ee=Xt(ct(Ue,"expenses_clothes"),di("date","desc")),de=await St(ee),xe=[];de.forEach(be=>{const Te=be.data();xe.push({id:be.id,date:Te.date||Zt(new Date,"yyyy-MM-dd"),category:Te.category||"",description:Te.description||"",amount:Number(Te.amount||0),status:Te.status||"PENDIENTE",notes:Te.notes||"",createdAt:Te.createdAt??Lt.now()})}),y(xe)}catch(ee){console.error(ee),V("❌ Error al cargar gastos")}finally{N(!1)}})()},[]);const ae=j.useMemo(()=>b.filter(ee=>!(t&&ee.date<t||r&&ee.date>r)),[b,t,r]),Ce=j.useMemo(()=>{const ee=ae.reduce((be,Te)=>be+(Te.amount||0),0),de=ae.filter(be=>be.status==="PAGADO").reduce((be,Te)=>be+(Te.amount||0),0),xe=ee-de;return{total:ee,pagado:de,pendiente:xe}},[ae]),P=()=>{i(Zt(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),g("PENDIENTE"),C("")},k=async ee=>{if(ee.preventDefault(),V(""),!a){V("Selecciona una categoría.");return}if(!A.trim()){V("Ingresa una descripción.");return}if(!d||d<=0){V("Ingresa un monto válido.");return}try{const de=await ss(ct(Ue,"expenses_clothes"),{date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:m,notes:B||"",createdAt:Lt.now()});y(xe=>[{id:de.id,date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:m,notes:B||"",createdAt:Lt.now()},...xe]),P(),V("✅ Gasto registrado")}catch(de){console.error(de),V("❌ Error al guardar gasto")}},W=ee=>{T(ee.id),L(ee.date),S(ee.category||""),F(ee.description||""),ue(Number(ee.amount||0)),se(ee.status||"PENDIENTE"),ce(ee.notes||"")},re=()=>{T(null),L(""),S(""),F(""),ue(0),se("PENDIENTE"),ce("")},oe=async()=>{if(O){if(!D){V("Selecciona una categoría.");return}if(!I.trim()){V("Ingresa una descripción.");return}if(!Y||Y<=0){V("Ingresa un monto válido.");return}try{await en(Tt(Ue,"expenses_clothes",O),{date:_,category:D,description:I.trim(),amount:Number(Y.toFixed(2)),status:ne,notes:z||""}),y(ee=>ee.map(de=>de.id===O?{...de,date:_,category:D,description:I.trim(),amount:Number(Y.toFixed(2)),status:ne,notes:z||""}:de)),re(),V("✅ Gasto actualizado")}catch(ee){console.error(ee),V("❌ Error al actualizar gasto")}}},Z=async ee=>{confirm(`¿Eliminar el gasto "${ee.description}"?`)&&(await Ts(Tt(Ue,"expenses_clothes",ee.id)),y(xe=>xe.filter(be=>be.id!==ee.id)),V("🗑️ Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:ee=>e(ee.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ee=>n(ee.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",yg(Ce.total)]}),l.jsxs("div",{children:["Pagado: ",yg(Ce.pagado)]}),l.jsxs("div",{children:["Pendiente: ",yg(Ce.pendiente)]})]})]}),l.jsxs("form",{onSubmit:k,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:ee=>i(ee.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categoría"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ee=>o(ee.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),FN.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripción"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto…",value:A,onChange:ee=>c(ee.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:ee=>f(Math.max(0,Number(ee.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ee=>g(ee.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:ee=>C(ee.target.value),maxLength:500,placeholder:"Comentario / nota opcional…"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categoría"}),l.jsx("th",{className:"p-2 border",children:"Descripción"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando…"})}):ae.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ae.slice().sort((ee,de)=>ee.date.localeCompare(de.date)).map(ee=>{const de=O===ee.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:de?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:_,onChange:xe=>L(xe.target.value)}):ee.date}),l.jsx("td",{className:"p-2 border",children:de?l.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:xe=>S(xe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),FN.map(xe=>l.jsx("option",{value:xe,children:xe},xe))]}):ee.category||"—"}),l.jsx("td",{className:"p-2 border",children:de?l.jsx("input",{className:"w-full border p-1 rounded",value:I,onChange:xe=>F(xe.target.value)}):l.jsx("span",{title:ee.description,children:ee.description.length>40?ee.description.slice(0,40)+"…":ee.description})}),l.jsx("td",{className:"p-2 border",children:de?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y)?"":Y,onChange:xe=>ue(Math.max(0,Number(xe.target.value||0)))}):yg(ee.amount)}),l.jsx("td",{className:"p-2 border",children:de?l.jsxs("select",{className:"w-full border p-1 rounded",value:ne,onChange:xe=>se(xe.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ee.status})}),l.jsx("td",{className:"p-2 border",children:de?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:z,onChange:xe=>ce(xe.target.value),maxLength:500}):l.jsx("span",{title:ee.notes||"",children:(ee.notes||"").length>40?(ee.notes||"").slice(0,40)+"…":ee.notes||"—"})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:de?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:oe,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:re,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>W(ee),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(ee),children:"Borrar"})]})})})]},ee.id)})})]})}),R&&l.jsx("p",{className:"mt-2 text-sm",children:R})]})}const Xi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hW(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):""}function fW(t,e){const r=hW(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function pW(t,e){if(e<=0)return;const r=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",t)),n=await St(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await en(Tt(Ue,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: faltó inventario",i)}async function mW(t,e){if(e<=0)return;const r=Xt(ct(Ue,"inventory_clothes_batches"),Ar("productId","==",t)),n=await St(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const A=Math.min(o,i);i-=A,await en(Tt(Ue,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+A).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvió todo",i)}async function Q3(t){const e=Xt(ct(Ue,"ar_movements"),Ar("ref.saleId","==",t)),r=await St(e);await Promise.all(r.docs.map(n=>Ts(Tt(Ue,"ar_movements",n.id))))}async function gW(t,e,r){if(await Q3(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Lt.now(),ref:{saleId:t.id}},{addDoc:s}=await Po(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>wH);return{addDoc:a}},void 0);await s(ct(Ue,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(ct(Ue,"ar_movements"),{...n,type:"ABONO",amount:-i})}function wW(){const[t,e]=j.useState(!1),[r,n]=j.useState(!1),[s,i]=j.useState(null),[a,o]=j.useState([]),A=async te=>{e(!0),n(!0),i(te),o([]);try{const G=(await St(Xt(ct(Ue,"sales_clothes"),Ar("__name__","==",te)))).docs[0],Re=G==null?void 0:G.data(),Fe=(Array.isArray(Re==null?void 0:Re.items)?Re.items:Re!=null&&Re.item?[Re.item]:[]).map(Pe=>({productName:String(Pe.productName||""),qty:Number(Pe.qty||0),unitPrice:Number(Pe.unitPrice||0),discount:Number(Pe.discount||0),total:Number(Pe.total||0)}));o(Fe)}catch(Ae){console.error(Ae)}finally{n(!1)}},[c,d]=j.useState(Zt(new Date,"yyyy-MM-01")),[f,m]=j.useState(Zt(new Date,"yyyy-MM-dd")),[g,B]=j.useState([]),[C,b]=j.useState([]),[y,w]=j.useState(!0),[N,R]=j.useState(""),[V,O]=j.useState(""),[T,_]=j.useState(""),[L,D]=j.useState(null),[S,I]=j.useState(!1),[F,Y]=j.useState(null),[ue,ne]=j.useState(0),se=15,[z,ce]=j.useState(1),ae=j.useMemo(()=>{const te={};return g.forEach(Ae=>te[Ae.id]=Ae.name),te},[g]);j.useEffect(()=>{(async()=>{w(!0),R("");try{const te=await St(ct(Ue,"customers_clothes")),Ae=[];te.forEach(Le=>Ae.push({id:Le.id,name:Le.data().name||""})),B(Ae);const G=await St(Xt(ct(Ue,"sales_clothes"),di("createdAt","desc"))),Re=[];G.forEach(Le=>{const Fe=fW(Le.data(),Le.id);Fe&&Fe.date>=c&&Fe.date<=f&&Re.push(Fe)}),b(Re.sort((Le,Fe)=>Fe.date.localeCompare(Le.date))),ce(1)}catch(te){console.error(te),R("❌ Error cargando transacciones.")}finally{w(!1)}})()},[c,f]);const Ce=j.useMemo(()=>C.filter(te=>!(V&&te.customerId!==V||T&&te.type!==T)),[C,V,T]),P=j.useMemo(()=>{let te=0,Ae=0,G=0,Re=0;for(const Le of Ce)Le.type==="CONTADO"?(te+=Le.item.qty,G+=Le.total):(Ae+=Le.item.qty,Re+=Le.total);return{piezasCash:te,piezasCredito:Ae,montoCash:G,montoCredito:Re}},[Ce]),k=Math.max(1,Math.ceil(Ce.length/se)),W=j.useMemo(()=>{const te=(z-1)*se;return Ce.slice(te,te+se)},[Ce,z]),re=te=>{D(null),Y(te),ne(te.item.qty||0),I(!0)},oe=async te=>{if(D(null),!!window.confirm("¿Eliminar esta venta? Esta acción no se puede deshacer."))try{w(!0),await ax(te.id),await Q3(te.id),b(Ae=>Ae.filter(G=>G.id!==te.id)),R("✅ Venta eliminada")}catch(Ae){console.error(Ae),R("❌ No se pudo eliminar la venta.")}finally{w(!1)}},Z=async()=>{if(!F)return;const te=Number(F.item.qty||0),Ae=Math.max(1,Math.floor(Number(ue)||0));if(Ae===te){I(!1);return}const G=Number(F.item.unitPrice||0),Re=Number((G*Ae).toFixed(2));try{w(!0);const Le=Ae-te;Le>0?await pW(F.item.productId,Le):Le<0&&await mW(F.item.productId,-Le);const Fe=Tt(Ue,"sales_clothes",F.id);await en(Fe,{quantity:Ae,total:Re,itemsTotal:Re,"item.qty":Ae,"item.total":Re,updatedAt:Lt.now()});const Pe=Math.min(Number(F.downPayment||0),Re);await gW(F,Re,Pe),b(Xe=>Xe.map(Ge=>Ge.id===F.id?{...Ge,quantity:Ae,total:Re,item:{...Ge.item,qty:Ae,total:Re},downPayment:Pe}:Ge)),R("✅ Venta actualizada"),I(!1)}catch(Le){console.error(Le),R("❌ No se pudo actualizar la venta.")}finally{w(!1)}},ee=()=>{const te=`Reporte de transacciones (Ropa) — ${c} a ${f}`,Ae=Fe=>(Fe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G=Ce.map(Fe=>{const Pe=Fe.customerName||(Fe.customerId?ae[Fe.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Fe.date}</td>
          <td>${Ae(Pe)}</td>
          <td>${Fe.type==="CREDITO"?"Crédito":"Cash"}</td>
          <td style="text-align:right">${Fe.item.qty}</td>
          <td style="text-align:right">${Xi(Fe.total)}</td>
        </tr>`}).join(""),Re=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ae(te)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ae(te)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${P.piezasCash}</div>
        <div><b>Piezas Crédito:</b> ${P.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Xi(P.montoCash)}</div>
        <div><b>Monto Crédito:</b> ${Xi(P.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${G||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Le=window.open("","_blank");Le&&(Le.document.open(),Le.document.write(Re),Le.document.close())},de=()=>ce(1),xe=()=>ce(te=>Math.max(1,te-1)),be=()=>ce(te=>Math.min(k,te+1)),Te=()=>ce(k),Ve=()=>{const te=[];if(k<=7)for(let G=1;G<=k;G++)te.push(G);else{const G=Math.max(1,z-2),Re=Math.min(k,z+2);te.push(1),G>2&&te.push(-1);for(let Le=G;Le<=Re;Le++)Le!==1&&Le!==k&&te.push(Le);Re<k-1&&te.push(-2),te.push(k)}return l.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:de,disabled:z===1,children:"« Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:xe,disabled:z===1,children:"‹ Anterior"}),te.map((G,Re)=>typeof G=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${G===z?"bg-blue-600 text-white":""}`,onClick:()=>ce(G),children:G},Re):l.jsx("span",{className:"px-2",children:"…"},Re)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:be,disabled:z===k,children:"Siguiente ›"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Te,disabled:z===k,children:"Último »"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Página ",z," de ",k," • ",Ce.length," transacción(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:te=>{d(te.target.value),ce(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:te=>{m(te.target.value),ce(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crédito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:V,onChange:te=>{O(te.target.value),ce(1)},children:[l.jsx("option",{value:"",children:"Todos"}),g.map(te=>l.jsx("option",{value:te.id,children:te.name},te.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:T,onChange:te=>{_(te.target.value),ce(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crédito"})]})]}),l.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ee,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:P.piezasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crédito"}),l.jsx("div",{className:"text-xl font-semibold",children:P.piezasCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:Xi(P.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crédito"}),l.jsx("div",{className:"text-xl font-semibold",children:Xi(P.montoCredito)})]})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando…"})}):W.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):W.map(te=>{const Ae=te.customerName||(te.customerId?ae[te.customerId]:"")||"Nombre cliente";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:te.date}),l.jsx("td",{className:"p-2 border",children:Ae}),l.jsx("td",{className:"p-2 border",children:te.type==="CREDITO"?"Crédito":"Cash"}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transacción",onClick:()=>A(te.id),children:te.item.qty})}),l.jsx("td",{className:"p-2 border",children:Xi(te.total)}),l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>D(G=>G===te.id?null:te.id),title:"Acciones",children:"⋮"}),L===te.id&&l.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>re(te),children:"Editar"}),l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>oe(te),children:"Eliminar"})]})]})]},te.id)})})]}),Ve()]}),N&&l.jsx("p",{className:"mt-2 text-sm",children:N}),S&&F&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),l.jsxs("div",{className:"font-semibold",children:[F.item.productName," ",F.item.sku?`— ${F.item.sku}`:""]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:ue,onChange:te=>ne(Math.max(1,Math.floor(Number(te.target.value||0))))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),l.jsx("div",{className:"text-lg font-semibold",children:Xi(F.item.unitPrice)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),l.jsx("div",{className:"text-lg font-semibold",children:Xi(Number(F.item.unitPrice)*Number(ue||0))})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{I(!1),Y(null)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Z,children:"Guardar cambios"})]})]})}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?`— #${s}`:""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),l.jsx("th",{className:"p-2 border text-right",children:"Precio"}),l.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),l.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),l.jsx("tbody",{children:r?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando…"})}):a.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin ítems en esta venta."})}):a.map((te,Ae)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border text-left",children:te.productName}),l.jsx("td",{className:"p-2 border text-right",children:te.qty}),l.jsx("td",{className:"p-2 border text-right",children:Xi(te.unitPrice)}),l.jsx("td",{className:"p-2 border text-right",children:Xi(te.discount||0)}),l.jsx("td",{className:"p-2 border text-right",children:Xi(te.total)})]},Ae))})]})})]})})]})}function vW(){const[t,e]=j.useState(null),[r,n]=j.useState(""),[s,i]=j.useState(!0);if(j.useEffect(()=>{const o=OF(Zw,async A=>{if(i(!0),A){e(A);try{const c=Tt(Ue,"users",A.uid),d=await Sl(c),f=d.exists()?d.data().role:"";n(f||"")}catch{n("")}}else e(null),n("");i(!1)});return()=>o()},[]),s)return l.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const a=()=>r==="admin"?l.jsx(ju,{to:"bills",replace:!0}):r==="vendedor_pollo"?l.jsx(ju,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?l.jsx(ju,{to:"salesClothes",replace:!0}):l.jsx(ju,{to:"/",replace:!0});return l.jsx(ik,{children:l.jsxs(jj,{children:[l.jsx(Hr,{path:"/",element:l.jsx(yH,{})}),l.jsxs(Hr,{path:"/admin",element:l.jsx(hn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa"],children:l.jsx(xH,{role:r})}),children:[l.jsx(Hr,{index:!0,element:l.jsx(a,{})}),l.jsx(Hr,{path:"bills",element:l.jsx(hn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(f$,{})})}),l.jsx(Hr,{path:"salesV2",element:l.jsx(hn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(EN,{user:t})})}),l.jsx(Hr,{path:"financialDashboard",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(F$,{})})}),l.jsx(Hr,{path:"expenses",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(Q$,{})})}),l.jsx(Hr,{path:"billing",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(R$,{})})}),l.jsx(Hr,{path:"batches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(N$,{})})}),l.jsx(Hr,{path:"paidBatches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(H$,{})})}),l.jsx(Hr,{path:"fix",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(k$,{})})}),l.jsx(Hr,{path:"transactionclose",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(I$,{})})}),l.jsx(Hr,{path:"billhistoric",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(p$,{})})}),l.jsx(Hr,{path:"users",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(m$,{})})}),l.jsx(Hr,{path:"products",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(w$,{})})}),l.jsx(Hr,{path:"salesClothes",element:l.jsx(hn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(AW,{})})}),l.jsx(Hr,{path:"TransactionsReportClothes",element:l.jsx(hn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(wW,{})})}),l.jsx(Hr,{path:"financialDashboardClothes",element:l.jsx(hn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(uW,{})})}),l.jsx(Hr,{path:"ExpensesClothes",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(dW,{})})}),l.jsx(Hr,{path:"inventoryClothesBatches",element:l.jsx(hn,{allowedRoles:["admin"],children:l.jsx(G$,{})})}),l.jsx(Hr,{path:"productsClothes",element:l.jsx(hn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(nW,{})})}),l.jsx(Hr,{path:"CustomersClothes",element:l.jsx(hn,{allowedRoles:["admin","vendedor_ropa"],children:l.jsx(iW,{})})})]}),l.jsx(Hr,{path:"/salesV2",element:l.jsx(hn,{allowedRoles:["admin","vendedor_pollo"],children:l.jsx(EN,{user:t})})}),l.jsx(Hr,{path:"*",element:l.jsx(ju,{to:"/"})})]})})}Zy.createRoot(document.getElementById("root")).render(l.jsx(_o.StrictMode,{children:l.jsx(vW,{})}));export{Er as _,yW as c,wP as g};
