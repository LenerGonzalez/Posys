(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var EW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kN={exports:{}},ov={},DN={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=Symbol.for("react.element"),EP=Symbol.for("react.portal"),_P=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),IP=Symbol.for("react.profiler"),SP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),TP=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),PP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),ZB=Symbol.iterator;function LP(t){return t===null||typeof t!="object"?null:(t=ZB&&t[ZB]||t["@@iterator"],typeof t=="function"?t:null)}var RN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MN=Object.assign,ON={};function kd(t,e,r){this.props=t,this.context=e,this.refs=ON,this.updater=r||RN}kd.prototype.isReactComponent={};kd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HN(){}HN.prototype=kd.prototype;function ux(t,e,r){this.props=t,this.context=e,this.refs=ON,this.updater=r||RN}var dx=ux.prototype=new HN;dx.constructor=ux;MN(dx,kd.prototype);dx.isPureReactComponent=!0;var eC=Array.isArray,VN=Object.prototype.hasOwnProperty,hx={current:null},KN={key:!0,ref:!0,__self:!0,__source:!0};function qN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)VN.call(e,n)&&!KN.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:bp,type:t,key:i,ref:a,props:s,_owner:hx.current}}function jP(t,e){return{$$typeof:bp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fx(t){return typeof t=="object"&&t!==null&&t.$$typeof===bp}function kP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var tC=/\/+/g;function jw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kP(""+t.key):e.toString(36)}function Eg(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bp:case EP:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+jw(a,0):n,eC(s)?(r="",t!=null&&(r=t.replace(tC,"$&/")+"/"),Eg(s,e,r,"",function(c){return c})):s!=null&&(fx(s)&&(s=jP(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(tC,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",eC(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+jw(i,o);a+=Eg(i,e,r,l,s)}else if(l=LP(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+jw(i,o++),a+=Eg(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vm(t,e,r){if(t==null)return t;var n=[],s=0;return Eg(t,n,"","",function(i){return e.call(r,i,s++)}),n}function DP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ls={current:null},_g={transition:null},RP={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:_g,ReactCurrentOwner:hx};function GN(){throw Error("act(...) is not supported in production builds of React.")}tr.Children={map:vm,forEach:function(t,e,r){vm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vm(t,function(){e++}),e},toArray:function(t){return vm(t,function(e){return e})||[]},only:function(t){if(!fx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tr.Component=kd;tr.Fragment=_P;tr.Profiler=IP;tr.PureComponent=ux;tr.StrictMode=NP;tr.Suspense=UP;tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;tr.act=GN;tr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=MN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)VN.call(e,l)&&!KN.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:bp,type:t.type,key:s,ref:i,props:n,_owner:a}};tr.createContext=function(t){return t={$$typeof:FP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SP,_context:t},t.Consumer=t};tr.createElement=qN;tr.createFactory=function(t){var e=qN.bind(null,t);return e.type=t,e};tr.createRef=function(){return{current:null}};tr.forwardRef=function(t){return{$$typeof:TP,render:t}};tr.isValidElement=fx;tr.lazy=function(t){return{$$typeof:QP,_payload:{_status:-1,_result:t},_init:DP}};tr.memo=function(t,e){return{$$typeof:PP,type:t,compare:e===void 0?null:e}};tr.startTransition=function(t){var e=_g.transition;_g.transition={};try{t()}finally{_g.transition=e}};tr.unstable_act=GN;tr.useCallback=function(t,e){return Ls.current.useCallback(t,e)};tr.useContext=function(t){return Ls.current.useContext(t)};tr.useDebugValue=function(){};tr.useDeferredValue=function(t){return Ls.current.useDeferredValue(t)};tr.useEffect=function(t,e){return Ls.current.useEffect(t,e)};tr.useId=function(){return Ls.current.useId()};tr.useImperativeHandle=function(t,e,r){return Ls.current.useImperativeHandle(t,e,r)};tr.useInsertionEffect=function(t,e){return Ls.current.useInsertionEffect(t,e)};tr.useLayoutEffect=function(t,e){return Ls.current.useLayoutEffect(t,e)};tr.useMemo=function(t,e){return Ls.current.useMemo(t,e)};tr.useReducer=function(t,e,r){return Ls.current.useReducer(t,e,r)};tr.useRef=function(t){return Ls.current.useRef(t)};tr.useState=function(t){return Ls.current.useState(t)};tr.useSyncExternalStore=function(t,e,r){return Ls.current.useSyncExternalStore(t,e,r)};tr.useTransition=function(){return Ls.current.useTransition()};tr.version="18.3.1";DN.exports=tr;var Q=DN.exports;const No=CP(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=Q,OP=Symbol.for("react.element"),HP=Symbol.for("react.fragment"),VP=Object.prototype.hasOwnProperty,KP=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qP={key:!0,ref:!0,__self:!0,__source:!0};function zN(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)VP.call(e,n)&&!qP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:OP,type:t,key:i,ref:a,props:s,_owner:KP.current}}ov.Fragment=HP;ov.jsx=zN;ov.jsxs=zN;kN.exports=ov;var A=kN.exports,n1={},$N={exports:{}},pi={},WN={exports:{}},XN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ce){var ie=W.length;W.push(ce);e:for(;0<ie;){var Ee=ie-1>>>1,P=W[Ee];if(0<s(P,ce))W[Ee]=ce,W[ie]=P,ie=Ee;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var ce=W[0],ie=W.pop();if(ie!==ce){W[0]=ie;e:for(var Ee=0,P=W.length,k=P>>>1;Ee<k;){var z=2*(Ee+1)-1,te=W[z],$=z+1,ne=W[$];if(0>s(te,ie))$<P&&0>s(ne,te)?(W[Ee]=ne,W[$]=ie,Ee=$):(W[Ee]=te,W[z]=ie,Ee=z);else if($<P&&0>s(ne,ie))W[Ee]=ne,W[$]=ie,Ee=$;else break e}}return ce}function s(W,ce){var ie=W.sortIndex-ce.sortIndex;return ie!==0?ie:W.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,m=3,p=!1,b=!1,B=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(W){for(var ce=r(c);ce!==null;){if(ce.callback===null)n(c);else if(ce.startTime<=W)n(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=r(c)}}function O(W){if(B=!1,N(W),!b)if(r(l)!==null)b=!0,re(R);else{var ce=r(c);ce!==null&&ue(O,ce.startTime-W)}}function R(W,ce){b=!1,B&&(B=!1,y(E),E=-1),p=!0;var ie=m;try{for(N(ce),h=r(l);h!==null&&(!(h.expirationTime>ce)||W&&!I());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,m=h.priorityLevel;var P=Ee(h.expirationTime<=ce);ce=t.unstable_now(),typeof P=="function"?h.callback=P:h===r(l)&&n(l),N(ce)}else n(l);h=r(l)}if(h!==null)var k=!0;else{var z=r(c);z!==null&&ue(O,z.startTime-ce),k=!1}return k}finally{h=null,m=ie,p=!1}}var M=!1,F=null,E=-1,L=5,D=-1;function I(){return!(t.unstable_now()-D<L)}function U(){if(F!==null){var W=t.unstable_now();D=W;var ce=!0;try{ce=F(!0,W)}finally{ce?T():(M=!1,F=null)}}else M=!1}var T;if(typeof w=="function")T=function(){w(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=U,T=function(){le.postMessage(null)}}else T=function(){_(U,0)};function re(W){F=W,M||(M=!0,T())}function ue(W,ce){E=_(function(){W(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,re(R))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var ce=3;break;default:ce=m}var ie=m;m=ce;try{return W()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ce){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=m;m=W;try{return ce()}finally{m=ie}},t.unstable_scheduleCallback=function(W,ce,ie){var Ee=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ee+ie:Ee):ie=Ee,W){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ie+P,W={id:u++,callback:ce,priorityLevel:W,startTime:ie,expirationTime:P,sortIndex:-1},ie>Ee?(W.sortIndex=ie,e(c,W),r(l)===null&&W===r(c)&&(B?(y(E),E=-1):B=!0,ue(O,ie-Ee))):(W.sortIndex=P,e(l,W),b||p||(b=!0,re(R))),W},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(W){var ce=m;return function(){var ie=m;m=ce;try{return W.apply(this,arguments)}finally{m=ie}}}})(XN);WN.exports=XN;var GP=WN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zP=Q,ui=GP;function et(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JN=new Set,Lf={};function Oc(t,e){wd(t,e),wd(t+"Capture",e)}function wd(t,e){for(Lf[t]=e,t=0;t<e.length;t++)JN.add(e[t])}var Lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s1=Object.prototype.hasOwnProperty,$P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rC={},nC={};function WP(t){return s1.call(nC,t)?!0:s1.call(rC,t)?!1:$P.test(t)?nC[t]=!0:(rC[t]=!0,!1)}function XP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JP(t,e,r,n){if(e===null||typeof e>"u"||XP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function js(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var As={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){As[t]=new js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];As[e]=new js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){As[t]=new js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){As[t]=new js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){As[t]=new js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){As[t]=new js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){As[t]=new js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){As[t]=new js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){As[t]=new js(t,5,!1,t.toLowerCase(),null,!1,!1)});var px=/[\-:]([a-z])/g;function mx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(px,mx);As[e]=new js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(px,mx);As[e]=new js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(px,mx);As[e]=new js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){As[t]=new js(t,1,!1,t.toLowerCase(),null,!1,!1)});As.xlinkHref=new js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){As[t]=new js(t,1,!1,t.toLowerCase(),null,!0,!0)});function gx(t,e,r,n){var s=As.hasOwnProperty(e)?As[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JP(e,r,s,n)&&(r=null),n||s===null?WP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ko=zP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wm=Symbol.for("react.element"),$u=Symbol.for("react.portal"),Wu=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),i1=Symbol.for("react.profiler"),YN=Symbol.for("react.provider"),ZN=Symbol.for("react.context"),wx=Symbol.for("react.forward_ref"),a1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),yx=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),eI=Symbol.for("react.offscreen"),sC=Symbol.iterator;function yh(t){return t===null||typeof t!="object"?null:(t=sC&&t[sC]||t["@@iterator"],typeof t=="function"?t:null)}var nn=Object.assign,kw;function qh(t){if(kw===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);kw=e&&e[1]||""}return`
`+kw+t}var Dw=!1;function Rw(t,e){if(!t||Dw)return"";Dw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Dw=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?qh(t):""}function YP(t){switch(t.tag){case 5:return qh(t.type);case 16:return qh("Lazy");case 13:return qh("Suspense");case 19:return qh("SuspenseList");case 0:case 2:case 15:return t=Rw(t.type,!1),t;case 11:return t=Rw(t.type.render,!1),t;case 1:return t=Rw(t.type,!0),t;default:return""}}function A1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wu:return"Fragment";case $u:return"Portal";case i1:return"Profiler";case vx:return"StrictMode";case a1:return"Suspense";case o1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZN:return(t.displayName||"Context")+".Consumer";case YN:return(t._context.displayName||"Context")+".Provider";case wx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yx:return e=t.displayName||null,e!==null?e:A1(t.type)||"Memo";case TA:e=t._payload,t=t._init;try{return A1(t(e))}catch{}}return null}function ZP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A1(e);case 8:return e===vx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eQ(t){var e=tI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ym(t){t._valueTracker||(t._valueTracker=eQ(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=tI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function r0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l1(t,e){var r=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function iC(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nI(t,e){e=e.checked,e!=null&&gx(t,"checked",e,!1)}function c1(t,e){nI(t,e);var r=dl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?u1(t,e.type,r):e.hasOwnProperty("defaultValue")&&u1(t,e.type,dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function u1(t,e,r){(e!=="number"||r0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Gh=Array.isArray;function Ad(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function d1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(et(92));if(Gh(r)){if(1<r.length)throw Error(et(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dl(r)}}function sI(t,e){var r=dl(e.value),n=dl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function AC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function h1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xm,aI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var lf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tQ=["Webkit","ms","Moz","O"];Object.keys(lf).forEach(function(t){tQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lf[e]=lf[t]})});function oI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||lf.hasOwnProperty(t)&&lf[t]?(""+e).trim():e+"px"}function AI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=oI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var rQ=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f1(t,e){if(e){if(rQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function p1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m1=null;function xx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g1=null,ld=null,cd=null;function lC(t){if(t=Ep(t)){if(typeof g1!="function")throw Error(et(280));var e=t.stateNode;e&&(e=dv(e),g1(t.stateNode,t.type,e))}}function lI(t){ld?cd?cd.push(t):cd=[t]:ld=t}function cI(){if(ld){var t=ld,e=cd;if(cd=ld=null,lC(t),e)for(t=0;t<e.length;t++)lC(e[t])}}function uI(t,e){return t(e)}function dI(){}var Mw=!1;function hI(t,e,r){if(Mw)return t(e,r);Mw=!0;try{return uI(t,e,r)}finally{Mw=!1,(ld!==null||cd!==null)&&(dI(),cI())}}function kf(t,e){var r=t.stateNode;if(r===null)return null;var n=dv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(et(231,e,typeof r));return r}var v1=!1;if(Lo)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){v1=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{v1=!1}function nQ(t,e,r,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var cf=!1,n0=null,s0=!1,w1=null,sQ={onError:function(t){cf=!0,n0=t}};function iQ(t,e,r,n,s,i,a,o,l){cf=!1,n0=null,nQ.apply(sQ,arguments)}function aQ(t,e,r,n,s,i,a,o,l){if(iQ.apply(this,arguments),cf){if(cf){var c=n0;cf=!1,n0=null}else throw Error(et(198));s0||(s0=!0,w1=c)}}function Hc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function fI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cC(t){if(Hc(t)!==t)throw Error(et(188))}function oQ(t){var e=t.alternate;if(!e){if(e=Hc(t),e===null)throw Error(et(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return cC(s),t;if(i===n)return cC(s),e;i=i.sibling}throw Error(et(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?t:e}function pI(t){return t=oQ(t),t!==null?mI(t):null}function mI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mI(t);if(e!==null)return e;t=t.sibling}return null}var gI=ui.unstable_scheduleCallback,uC=ui.unstable_cancelCallback,AQ=ui.unstable_shouldYield,lQ=ui.unstable_requestPaint,vn=ui.unstable_now,cQ=ui.unstable_getCurrentPriorityLevel,bx=ui.unstable_ImmediatePriority,vI=ui.unstable_UserBlockingPriority,i0=ui.unstable_NormalPriority,uQ=ui.unstable_LowPriority,wI=ui.unstable_IdlePriority,Av=null,Da=null;function dQ(t){if(Da&&typeof Da.onCommitFiberRoot=="function")try{Da.onCommitFiberRoot(Av,t,void 0,(t.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:pQ,hQ=Math.log,fQ=Math.LN2;function pQ(t){return t>>>=0,t===0?32:31-(hQ(t)/fQ|0)|0}var bm=64,Bm=4194304;function zh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function a0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=zh(o):(i&=a,i!==0&&(n=zh(i)))}else a=r&~s,a!==0?n=zh(a):i!==0&&(n=zh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sa(e),s=1<<r,n|=t[r],e&=~s;return n}function mQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-sa(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=mQ(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function y1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yI(){var t=bm;return bm<<=1,!(bm&4194240)&&(bm=64),t}function Ow(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Bp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sa(e),t[e]=r}function vQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-sa(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Bx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sa(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Nr=0;function xI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bI,Cx,BI,CI,EI,x1=!1,Cm=[],XA=null,JA=null,YA=null,Df=new Map,Rf=new Map,QA=[],wQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dC(t,e){switch(t){case"focusin":case"focusout":XA=null;break;case"dragenter":case"dragleave":JA=null;break;case"mouseover":case"mouseout":YA=null;break;case"pointerover":case"pointerout":Df.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rf.delete(e.pointerId)}}function bh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ep(e),e!==null&&Cx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yQ(t,e,r,n,s){switch(e){case"focusin":return XA=bh(XA,t,e,r,n,s),!0;case"dragenter":return JA=bh(JA,t,e,r,n,s),!0;case"mouseover":return YA=bh(YA,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Df.set(i,bh(Df.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Rf.set(i,bh(Rf.get(i)||null,t,e,r,n,s)),!0}return!1}function _I(t){var e=dc(t.target);if(e!==null){var r=Hc(e);if(r!==null){if(e=r.tag,e===13){if(e=fI(r),e!==null){t.blockedOn=e,EI(t.priority,function(){BI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ng(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=b1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);m1=n,r.target.dispatchEvent(n),m1=null}else return e=Ep(r),e!==null&&Cx(e),t.blockedOn=r,!1;e.shift()}return!0}function hC(t,e,r){Ng(t)&&r.delete(e)}function xQ(){x1=!1,XA!==null&&Ng(XA)&&(XA=null),JA!==null&&Ng(JA)&&(JA=null),YA!==null&&Ng(YA)&&(YA=null),Df.forEach(hC),Rf.forEach(hC)}function Bh(t,e){t.blockedOn===e&&(t.blockedOn=null,x1||(x1=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,xQ)))}function Mf(t){function e(s){return Bh(s,t)}if(0<Cm.length){Bh(Cm[0],t);for(var r=1;r<Cm.length;r++){var n=Cm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(XA!==null&&Bh(XA,t),JA!==null&&Bh(JA,t),YA!==null&&Bh(YA,t),Df.forEach(e),Rf.forEach(e),r=0;r<QA.length;r++)n=QA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<QA.length&&(r=QA[0],r.blockedOn===null);)_I(r),r.blockedOn===null&&QA.shift()}var ud=Ko.ReactCurrentBatchConfig,o0=!0;function bQ(t,e,r,n){var s=Nr,i=ud.transition;ud.transition=null;try{Nr=1,Ex(t,e,r,n)}finally{Nr=s,ud.transition=i}}function BQ(t,e,r,n){var s=Nr,i=ud.transition;ud.transition=null;try{Nr=4,Ex(t,e,r,n)}finally{Nr=s,ud.transition=i}}function Ex(t,e,r,n){if(o0){var s=b1(t,e,r,n);if(s===null)Jw(t,e,n,A0,r),dC(t,n);else if(yQ(s,t,e,r,n))n.stopPropagation();else if(dC(t,n),e&4&&-1<wQ.indexOf(t)){for(;s!==null;){var i=Ep(s);if(i!==null&&bI(i),i=b1(t,e,r,n),i===null&&Jw(t,e,n,A0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Jw(t,e,n,null,r)}}var A0=null;function b1(t,e,r,n){if(A0=null,t=xx(n),t=dc(t),t!==null)if(e=Hc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=fI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return A0=t,null}function NI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cQ()){case bx:return 1;case vI:return 4;case i0:case uQ:return 16;case wI:return 536870912;default:return 16}default:return 16}}var VA=null,_x=null,Ig=null;function II(){if(Ig)return Ig;var t,e=_x,r=e.length,n,s="value"in VA?VA.value:VA.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Ig=s.slice(t,1<n?1-n:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Em(){return!0}function fC(){return!1}function mi(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Em:fC,this.isPropagationStopped=fC,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Em)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Em)},persist:function(){},isPersistent:Em}),e}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=mi(Dd),Cp=nn({},Dd,{view:0,detail:0}),CQ=mi(Cp),Hw,Vw,Ch,lv=nn({},Cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ix,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ch&&(Ch&&t.type==="mousemove"?(Hw=t.screenX-Ch.screenX,Vw=t.screenY-Ch.screenY):Vw=Hw=0,Ch=t),Hw)},movementY:function(t){return"movementY"in t?t.movementY:Vw}}),pC=mi(lv),EQ=nn({},lv,{dataTransfer:0}),_Q=mi(EQ),NQ=nn({},Cp,{relatedTarget:0}),Kw=mi(NQ),IQ=nn({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),SQ=mi(IQ),FQ=nn({},Dd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TQ=mi(FQ),UQ=nn({},Dd,{data:0}),mC=mi(UQ),PQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LQ[t])?!!e[t]:!1}function Ix(){return jQ}var kQ=nn({},Cp,{key:function(t){if(t.key){var e=PQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ix,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DQ=mi(kQ),RQ=nn({},lv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gC=mi(RQ),MQ=nn({},Cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ix}),OQ=mi(MQ),HQ=nn({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),VQ=mi(HQ),KQ=nn({},lv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qQ=mi(KQ),GQ=[9,13,27,32],Sx=Lo&&"CompositionEvent"in window,uf=null;Lo&&"documentMode"in document&&(uf=document.documentMode);var zQ=Lo&&"TextEvent"in window&&!uf,SI=Lo&&(!Sx||uf&&8<uf&&11>=uf),vC=" ",wC=!1;function FI(t,e){switch(t){case"keyup":return GQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xu=!1;function $Q(t,e){switch(t){case"compositionend":return TI(e);case"keypress":return e.which!==32?null:(wC=!0,vC);case"textInput":return t=e.data,t===vC&&wC?null:t;default:return null}}function WQ(t,e){if(Xu)return t==="compositionend"||!Sx&&FI(t,e)?(t=II(),Ig=_x=VA=null,Xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SI&&e.locale!=="ko"?null:e.data;default:return null}}var XQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XQ[t.type]:e==="textarea"}function UI(t,e,r,n){lI(n),e=l0(e,"onChange"),0<e.length&&(r=new Nx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var df=null,Of=null;function JQ(t){VI(t,0)}function cv(t){var e=Zu(t);if(rI(e))return t}function YQ(t,e){if(t==="change")return e}var PI=!1;if(Lo){var qw;if(Lo){var Gw="oninput"in document;if(!Gw){var xC=document.createElement("div");xC.setAttribute("oninput","return;"),Gw=typeof xC.oninput=="function"}qw=Gw}else qw=!1;PI=qw&&(!document.documentMode||9<document.documentMode)}function bC(){df&&(df.detachEvent("onpropertychange",QI),Of=df=null)}function QI(t){if(t.propertyName==="value"&&cv(Of)){var e=[];UI(e,Of,t,xx(t)),hI(JQ,e)}}function ZQ(t,e,r){t==="focusin"?(bC(),df=e,Of=r,df.attachEvent("onpropertychange",QI)):t==="focusout"&&bC()}function eL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cv(Of)}function tL(t,e){if(t==="click")return cv(e)}function rL(t,e){if(t==="input"||t==="change")return cv(e)}function nL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oa=typeof Object.is=="function"?Object.is:nL;function Hf(t,e){if(oa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!s1.call(e,s)||!oa(t[s],e[s]))return!1}return!0}function BC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CC(t,e){var r=BC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BC(r)}}function LI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jI(){for(var t=window,e=r0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=r0(t.document)}return e}function Fx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sL(t){var e=jI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&LI(r.ownerDocument.documentElement,r)){if(n!==null&&Fx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=CC(r,i);var a=CC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iL=Lo&&"documentMode"in document&&11>=document.documentMode,Ju=null,B1=null,hf=null,C1=!1;function EC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;C1||Ju==null||Ju!==r0(n)||(n=Ju,"selectionStart"in n&&Fx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hf&&Hf(hf,n)||(hf=n,n=l0(B1,"onSelect"),0<n.length&&(e=new Nx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ju)))}function _m(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yu={animationend:_m("Animation","AnimationEnd"),animationiteration:_m("Animation","AnimationIteration"),animationstart:_m("Animation","AnimationStart"),transitionend:_m("Transition","TransitionEnd")},zw={},kI={};Lo&&(kI=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function uv(t){if(zw[t])return zw[t];if(!Yu[t])return t;var e=Yu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in kI)return zw[t]=e[r];return t}var DI=uv("animationend"),RI=uv("animationiteration"),MI=uv("animationstart"),OI=uv("transitionend"),HI=new Map,_C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(t,e){HI.set(t,e),Oc(e,[t])}for(var $w=0;$w<_C.length;$w++){var Ww=_C[$w],aL=Ww.toLowerCase(),oL=Ww[0].toUpperCase()+Ww.slice(1);Bl(aL,"on"+oL)}Bl(DI,"onAnimationEnd");Bl(RI,"onAnimationIteration");Bl(MI,"onAnimationStart");Bl("dblclick","onDoubleClick");Bl("focusin","onFocus");Bl("focusout","onBlur");Bl(OI,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AL=new Set("cancel close invalid load scroll toggle".split(" ").concat($h));function NC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,aQ(n,e,void 0,t),t.currentTarget=null}function VI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;NC(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;NC(s,o,c),i=l}}}if(s0)throw t=w1,s0=!1,w1=null,t}function Hr(t,e){var r=e[S1];r===void 0&&(r=e[S1]=new Set);var n=t+"__bubble";r.has(n)||(KI(e,t,2,!1),r.add(n))}function Xw(t,e,r){var n=0;e&&(n|=4),KI(r,t,n,e)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function Vf(t){if(!t[Nm]){t[Nm]=!0,JN.forEach(function(r){r!=="selectionchange"&&(AL.has(r)||Xw(r,!1,t),Xw(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nm]||(e[Nm]=!0,Xw("selectionchange",!1,e))}}function KI(t,e,r,n){switch(NI(e)){case 1:var s=bQ;break;case 4:s=BQ;break;default:s=Ex}r=s.bind(null,e,r,t),s=void 0,!v1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Jw(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=dc(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}hI(function(){var c=i,u=xx(r),h=[];e:{var m=HI.get(t);if(m!==void 0){var p=Nx,b=t;switch(t){case"keypress":if(Sg(r)===0)break e;case"keydown":case"keyup":p=DQ;break;case"focusin":b="focus",p=Kw;break;case"focusout":b="blur",p=Kw;break;case"beforeblur":case"afterblur":p=Kw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_Q;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=OQ;break;case DI:case RI:case MI:p=SQ;break;case OI:p=VQ;break;case"scroll":p=CQ;break;case"wheel":p=qQ;break;case"copy":case"cut":case"paste":p=TQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gC}var B=(e&4)!==0,_=!B&&t==="scroll",y=B?m!==null?m+"Capture":null:m;B=[];for(var w=c,N;w!==null;){N=w;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,y!==null&&(O=kf(w,y),O!=null&&B.push(Kf(w,O,N)))),_)break;w=w.return}0<B.length&&(m=new p(m,b,null,r,u),h.push({event:m,listeners:B}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==m1&&(b=r.relatedTarget||r.fromElement)&&(dc(b)||b[jo]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=c,b=b?dc(b):null,b!==null&&(_=Hc(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(B=pC,O="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(B=gC,O="onPointerLeave",y="onPointerEnter",w="pointer"),_=p==null?m:Zu(p),N=b==null?m:Zu(b),m=new B(O,w+"leave",p,r,u),m.target=_,m.relatedTarget=N,O=null,dc(u)===c&&(B=new B(y,w+"enter",b,r,u),B.target=N,B.relatedTarget=_,O=B),_=O,p&&b)t:{for(B=p,y=b,w=0,N=B;N;N=yu(N))w++;for(N=0,O=y;O;O=yu(O))N++;for(;0<w-N;)B=yu(B),w--;for(;0<N-w;)y=yu(y),N--;for(;w--;){if(B===y||y!==null&&B===y.alternate)break t;B=yu(B),y=yu(y)}B=null}else B=null;p!==null&&IC(h,m,p,B,!1),b!==null&&_!==null&&IC(h,_,b,B,!0)}}e:{if(m=c?Zu(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var R=YQ;else if(yC(m))if(PI)R=rL;else{R=eL;var M=ZQ}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=tL);if(R&&(R=R(t,c))){UI(h,R,r,u);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&u1(m,"number",m.value)}switch(M=c?Zu(c):window,t){case"focusin":(yC(M)||M.contentEditable==="true")&&(Ju=M,B1=c,hf=null);break;case"focusout":hf=B1=Ju=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,EC(h,r,u);break;case"selectionchange":if(iL)break;case"keydown":case"keyup":EC(h,r,u)}var F;if(Sx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xu?FI(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(SI&&r.locale!=="ko"&&(Xu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xu&&(F=II()):(VA=u,_x="value"in VA?VA.value:VA.textContent,Xu=!0)),M=l0(c,E),0<M.length&&(E=new mC(E,t,null,r,u),h.push({event:E,listeners:M}),F?E.data=F:(F=TI(r),F!==null&&(E.data=F)))),(F=zQ?$Q(t,r):WQ(t,r))&&(c=l0(c,"onBeforeInput"),0<c.length&&(u=new mC("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=F))}VI(h,e)})}function Kf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function l0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=kf(t,r),i!=null&&n.unshift(Kf(t,i,s)),i=kf(t,e),i!=null&&n.push(Kf(t,i,s))),t=t.return}return n}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=kf(r,i),l!=null&&a.unshift(Kf(r,l,o))):s||(l=kf(r,i),l!=null&&a.push(Kf(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var lL=/\r\n?/g,cL=/\u0000|\uFFFD/g;function SC(t){return(typeof t=="string"?t:""+t).replace(lL,`
`).replace(cL,"")}function Im(t,e,r){if(e=SC(e),SC(t)!==e&&r)throw Error(et(425))}function c0(){}var E1=null,_1=null;function N1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I1=typeof setTimeout=="function"?setTimeout:void 0,uL=typeof clearTimeout=="function"?clearTimeout:void 0,FC=typeof Promise=="function"?Promise:void 0,dL=typeof queueMicrotask=="function"?queueMicrotask:typeof FC<"u"?function(t){return FC.resolve(null).then(t).catch(hL)}:I1;function hL(t){setTimeout(function(){throw t})}function Yw(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mf(e)}function ZA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Rd=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Rd,qf="__reactProps$"+Rd,jo="__reactContainer$"+Rd,S1="__reactEvents$"+Rd,fL="__reactListeners$"+Rd,pL="__reactHandles$"+Rd;function dc(t){var e=t[Pa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[Pa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=TC(t);t!==null;){if(r=t[Pa])return r;t=TC(t)}return e}t=r,r=t.parentNode}return null}function Ep(t){return t=t[Pa]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(et(33))}function dv(t){return t[qf]||null}var F1=[],ed=-1;function Cl(t){return{current:t}}function qr(t){0>ed||(t.current=F1[ed],F1[ed]=null,ed--)}function Dr(t,e){ed++,F1[ed]=t.current,t.current=e}var hl={},Bs=Cl(hl),$s=Cl(!1),Nc=hl;function yd(t,e){var r=t.type.contextTypes;if(!r)return hl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ws(t){return t=t.childContextTypes,t!=null}function u0(){qr($s),qr(Bs)}function UC(t,e,r){if(Bs.current!==hl)throw Error(et(168));Dr(Bs,e),Dr($s,r)}function qI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(et(108,ZP(t)||"Unknown",s));return nn({},r,n)}function d0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,Nc=Bs.current,Dr(Bs,t),Dr($s,$s.current),!0}function PC(t,e,r){var n=t.stateNode;if(!n)throw Error(et(169));r?(t=qI(t,e,Nc),n.__reactInternalMemoizedMergedChildContext=t,qr($s),qr(Bs),Dr(Bs,t)):qr($s),Dr($s,r)}var yo=null,hv=!1,Zw=!1;function GI(t){yo===null?yo=[t]:yo.push(t)}function mL(t){hv=!0,GI(t)}function El(){if(!Zw&&yo!==null){Zw=!0;var t=0,e=Nr;try{var r=yo;for(Nr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}yo=null,hv=!1}catch(s){throw yo!==null&&(yo=yo.slice(t+1)),gI(bx,El),s}finally{Nr=e,Zw=!1}}return null}var td=[],rd=0,h0=null,f0=0,Ii=[],Si=0,Ic=null,xo=1,bo="";function tc(t,e){td[rd++]=f0,td[rd++]=h0,h0=t,f0=e}function zI(t,e,r){Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,Ic=t;var n=xo;t=bo;var s=32-sa(n)-1;n&=~(1<<s),r+=1;var i=32-sa(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,xo=1<<32-sa(e)+s|r<<s|n,bo=i+t}else xo=1<<i|r<<s|n,bo=t}function Tx(t){t.return!==null&&(tc(t,1),zI(t,1,0))}function Ux(t){for(;t===h0;)h0=td[--rd],td[rd]=null,f0=td[--rd],td[rd]=null;for(;t===Ic;)Ic=Ii[--Si],Ii[Si]=null,bo=Ii[--Si],Ii[Si]=null,xo=Ii[--Si],Ii[Si]=null}var ci=null,oi=null,Wr=!1,na=null;function $I(t,e){var r=Ti(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function QC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ci=t,oi=ZA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ci=t,oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ic!==null?{id:xo,overflow:bo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ti(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ci=t,oi=null,!0):!1;default:return!1}}function T1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U1(t){if(Wr){var e=oi;if(e){var r=e;if(!QC(t,e)){if(T1(t))throw Error(et(418));e=ZA(r.nextSibling);var n=ci;e&&QC(t,e)?$I(n,r):(t.flags=t.flags&-4097|2,Wr=!1,ci=t)}}else{if(T1(t))throw Error(et(418));t.flags=t.flags&-4097|2,Wr=!1,ci=t}}}function LC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ci=t}function Sm(t){if(t!==ci)return!1;if(!Wr)return LC(t),Wr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!N1(t.type,t.memoizedProps)),e&&(e=oi)){if(T1(t))throw WI(),Error(et(418));for(;e;)$I(t,e),e=ZA(e.nextSibling)}if(LC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(et(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){oi=ZA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}oi=null}}else oi=ci?ZA(t.stateNode.nextSibling):null;return!0}function WI(){for(var t=oi;t;)t=ZA(t.nextSibling)}function xd(){oi=ci=null,Wr=!1}function Px(t){na===null?na=[t]:na.push(t)}var gL=Ko.ReactCurrentBatchConfig;function Eh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,t))}return t}function Fm(t,e){throw t=Object.prototype.toString.call(e),Error(et(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jC(t){var e=t._init;return e(t._payload)}function XI(t){function e(y,w){if(t){var N=y.deletions;N===null?(y.deletions=[w],y.flags|=16):N.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=nl(y,w),y.index=0,y.sibling=null,y}function i(y,w,N){return y.index=N,t?(N=y.alternate,N!==null?(N=N.index,N<w?(y.flags|=2,w):N):(y.flags|=2,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,w,N,O){return w===null||w.tag!==6?(w=ay(N,y.mode,O),w.return=y,w):(w=s(w,N),w.return=y,w)}function l(y,w,N,O){var R=N.type;return R===Wu?u(y,w,N.props.children,O,N.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&jC(R)===w.type)?(O=s(w,N.props),O.ref=Eh(y,w,N),O.return=y,O):(O=jg(N.type,N.key,N.props,null,y.mode,O),O.ref=Eh(y,w,N),O.return=y,O)}function c(y,w,N,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=oy(N,y.mode,O),w.return=y,w):(w=s(w,N.children||[]),w.return=y,w)}function u(y,w,N,O,R){return w===null||w.tag!==7?(w=wc(N,y.mode,O,R),w.return=y,w):(w=s(w,N),w.return=y,w)}function h(y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ay(""+w,y.mode,N),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wm:return N=jg(w.type,w.key,w.props,null,y.mode,N),N.ref=Eh(y,null,w),N.return=y,N;case $u:return w=oy(w,y.mode,N),w.return=y,w;case TA:var O=w._init;return h(y,O(w._payload),N)}if(Gh(w)||yh(w))return w=wc(w,y.mode,N,null),w.return=y,w;Fm(y,w)}return null}function m(y,w,N,O){var R=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return R!==null?null:o(y,w,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case wm:return N.key===R?l(y,w,N,O):null;case $u:return N.key===R?c(y,w,N,O):null;case TA:return R=N._init,m(y,w,R(N._payload),O)}if(Gh(N)||yh(N))return R!==null?null:u(y,w,N,O,null);Fm(y,N)}return null}function p(y,w,N,O,R){if(typeof O=="string"&&O!==""||typeof O=="number")return y=y.get(N)||null,o(w,y,""+O,R);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wm:return y=y.get(O.key===null?N:O.key)||null,l(w,y,O,R);case $u:return y=y.get(O.key===null?N:O.key)||null,c(w,y,O,R);case TA:var M=O._init;return p(y,w,N,M(O._payload),R)}if(Gh(O)||yh(O))return y=y.get(N)||null,u(w,y,O,R,null);Fm(w,O)}return null}function b(y,w,N,O){for(var R=null,M=null,F=w,E=w=0,L=null;F!==null&&E<N.length;E++){F.index>E?(L=F,F=null):L=F.sibling;var D=m(y,F,N[E],O);if(D===null){F===null&&(F=L);break}t&&F&&D.alternate===null&&e(y,F),w=i(D,w,E),M===null?R=D:M.sibling=D,M=D,F=L}if(E===N.length)return r(y,F),Wr&&tc(y,E),R;if(F===null){for(;E<N.length;E++)F=h(y,N[E],O),F!==null&&(w=i(F,w,E),M===null?R=F:M.sibling=F,M=F);return Wr&&tc(y,E),R}for(F=n(y,F);E<N.length;E++)L=p(F,y,E,N[E],O),L!==null&&(t&&L.alternate!==null&&F.delete(L.key===null?E:L.key),w=i(L,w,E),M===null?R=L:M.sibling=L,M=L);return t&&F.forEach(function(I){return e(y,I)}),Wr&&tc(y,E),R}function B(y,w,N,O){var R=yh(N);if(typeof R!="function")throw Error(et(150));if(N=R.call(N),N==null)throw Error(et(151));for(var M=R=null,F=w,E=w=0,L=null,D=N.next();F!==null&&!D.done;E++,D=N.next()){F.index>E?(L=F,F=null):L=F.sibling;var I=m(y,F,D.value,O);if(I===null){F===null&&(F=L);break}t&&F&&I.alternate===null&&e(y,F),w=i(I,w,E),M===null?R=I:M.sibling=I,M=I,F=L}if(D.done)return r(y,F),Wr&&tc(y,E),R;if(F===null){for(;!D.done;E++,D=N.next())D=h(y,D.value,O),D!==null&&(w=i(D,w,E),M===null?R=D:M.sibling=D,M=D);return Wr&&tc(y,E),R}for(F=n(y,F);!D.done;E++,D=N.next())D=p(F,y,E,D.value,O),D!==null&&(t&&D.alternate!==null&&F.delete(D.key===null?E:D.key),w=i(D,w,E),M===null?R=D:M.sibling=D,M=D);return t&&F.forEach(function(U){return e(y,U)}),Wr&&tc(y,E),R}function _(y,w,N,O){if(typeof N=="object"&&N!==null&&N.type===Wu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case wm:e:{for(var R=N.key,M=w;M!==null;){if(M.key===R){if(R=N.type,R===Wu){if(M.tag===7){r(y,M.sibling),w=s(M,N.props.children),w.return=y,y=w;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&jC(R)===M.type){r(y,M.sibling),w=s(M,N.props),w.ref=Eh(y,M,N),w.return=y,y=w;break e}r(y,M);break}else e(y,M);M=M.sibling}N.type===Wu?(w=wc(N.props.children,y.mode,O,N.key),w.return=y,y=w):(O=jg(N.type,N.key,N.props,null,y.mode,O),O.ref=Eh(y,w,N),O.return=y,y=O)}return a(y);case $u:e:{for(M=N.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){r(y,w.sibling),w=s(w,N.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=oy(N,y.mode,O),w.return=y,y=w}return a(y);case TA:return M=N._init,_(y,w,M(N._payload),O)}if(Gh(N))return b(y,w,N,O);if(yh(N))return B(y,w,N,O);Fm(y,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(r(y,w.sibling),w=s(w,N),w.return=y,y=w):(r(y,w),w=ay(N,y.mode,O),w.return=y,y=w),a(y)):r(y,w)}return _}var bd=XI(!0),JI=XI(!1),p0=Cl(null),m0=null,nd=null,Qx=null;function Lx(){Qx=nd=m0=null}function jx(t){var e=p0.current;qr(p0),t._currentValue=e}function P1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function dd(t,e){m0=t,Qx=nd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gs=!0),t.firstContext=null)}function ki(t){var e=t._currentValue;if(Qx!==t)if(t={context:t,memoizedValue:e,next:null},nd===null){if(m0===null)throw Error(et(308));nd=t,m0.dependencies={lanes:0,firstContext:t}}else nd=nd.next=t;return e}var hc=null;function kx(t){hc===null?hc=[t]:hc.push(t)}function YI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,kx(e)):(r.next=s.next,s.next=r),e.interleaved=r,ko(t,n)}function ko(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var UA=!1;function Dx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function el(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,dr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ko(t,r)}return s=n.interleaved,s===null?(e.next=e,kx(n)):(e.next=s.next,s.next=e),n.interleaved=e,ko(t,r)}function Fg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bx(t,r)}}function kC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function g0(t,e,r,n){var s=t.updateQueue;UA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,u=c=l=null,o=i;do{var m=o.lane,p=o.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,B=o;switch(m=e,p=r,B.tag){case 1:if(b=B.payload,typeof b=="function"){h=b.call(p,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=B.payload,m=typeof b=="function"?b.call(p,h,m):b,m==null)break e;h=nn({},h,m);break e;case 2:UA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fc|=a,t.lanes=a,t.memoizedState=h}}function DC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(et(191,s));s.call(n)}}}var _p={},Ra=Cl(_p),Gf=Cl(_p),zf=Cl(_p);function fc(t){if(t===_p)throw Error(et(174));return t}function Rx(t,e){switch(Dr(zf,e),Dr(Gf,t),Dr(Ra,_p),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:h1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=h1(e,t)}qr(Ra),Dr(Ra,e)}function Bd(){qr(Ra),qr(Gf),qr(zf)}function eS(t){fc(zf.current);var e=fc(Ra.current),r=h1(e,t.type);e!==r&&(Dr(Gf,t),Dr(Ra,r))}function Mx(t){Gf.current===t&&(qr(Ra),qr(Gf))}var tn=Cl(0);function v0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ey=[];function Ox(){for(var t=0;t<ey.length;t++)ey[t]._workInProgressVersionPrimary=null;ey.length=0}var Tg=Ko.ReactCurrentDispatcher,ty=Ko.ReactCurrentBatchConfig,Sc=0,rn=null,Tn=null,Vn=null,w0=!1,ff=!1,$f=0,vL=0;function ds(){throw Error(et(321))}function Hx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!oa(t[r],e[r]))return!1;return!0}function Vx(t,e,r,n,s,i){if(Sc=i,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tg.current=t===null||t.memoizedState===null?bL:BL,t=r(n,s),ff){i=0;do{if(ff=!1,$f=0,25<=i)throw Error(et(301));i+=1,Vn=Tn=null,e.updateQueue=null,Tg.current=CL,t=r(n,s)}while(ff)}if(Tg.current=y0,e=Tn!==null&&Tn.next!==null,Sc=0,Vn=Tn=rn=null,w0=!1,e)throw Error(et(300));return t}function Kx(){var t=$f!==0;return $f=0,t}function Ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?rn.memoizedState=Vn=t:Vn=Vn.next=t,Vn}function Di(){if(Tn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var e=Vn===null?rn.memoizedState:Vn.next;if(e!==null)Vn=e,Tn=t;else{if(t===null)throw Error(et(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Vn===null?rn.memoizedState=Vn=t:Vn=Vn.next=t}return Vn}function Wf(t,e){return typeof e=="function"?e(t):e}function ry(t){var e=Di(),r=e.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=t;var n=Tn,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((Sc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,rn.lanes|=u,Fc|=u}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,oa(n,e.memoizedState)||(Gs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,rn.lanes|=i,Fc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ny(t){var e=Di(),r=e.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);oa(i,e.memoizedState)||(Gs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function tS(){}function rS(t,e){var r=rn,n=Di(),s=e(),i=!oa(n.memoizedState,s);if(i&&(n.memoizedState=s,Gs=!0),n=n.queue,qx(iS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Vn!==null&&Vn.memoizedState.tag&1){if(r.flags|=2048,Xf(9,sS.bind(null,r,n,s,e),void 0,null),Kn===null)throw Error(et(349));Sc&30||nS(r,e,s)}return s}function nS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function sS(t,e,r,n){e.value=r,e.getSnapshot=n,aS(e)&&oS(t)}function iS(t,e,r){return r(function(){aS(e)&&oS(t)})}function aS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!oa(t,r)}catch{return!0}}function oS(t){var e=ko(t,1);e!==null&&ia(e,t,1,-1)}function RC(t){var e=Ua();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:t},e.queue=t,t=t.dispatch=xL.bind(null,rn,t),[e.memoizedState,t]}function Xf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function AS(){return Di().memoizedState}function Ug(t,e,r,n){var s=Ua();rn.flags|=t,s.memoizedState=Xf(1|e,r,void 0,n===void 0?null:n)}function fv(t,e,r,n){var s=Di();n=n===void 0?null:n;var i=void 0;if(Tn!==null){var a=Tn.memoizedState;if(i=a.destroy,n!==null&&Hx(n,a.deps)){s.memoizedState=Xf(e,r,i,n);return}}rn.flags|=t,s.memoizedState=Xf(1|e,r,i,n)}function MC(t,e){return Ug(8390656,8,t,e)}function qx(t,e){return fv(2048,8,t,e)}function lS(t,e){return fv(4,2,t,e)}function cS(t,e){return fv(4,4,t,e)}function uS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dS(t,e,r){return r=r!=null?r.concat([t]):null,fv(4,4,uS.bind(null,e,t),r)}function Gx(){}function hS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function fS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pS(t,e,r){return Sc&21?(oa(r,e)||(r=yI(),rn.lanes|=r,Fc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gs=!0),t.memoizedState=r)}function wL(t,e){var r=Nr;Nr=r!==0&&4>r?r:4,t(!0);var n=ty.transition;ty.transition={};try{t(!1),e()}finally{Nr=r,ty.transition=n}}function mS(){return Di().memoizedState}function yL(t,e,r){var n=rl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gS(t))vS(e,r);else if(r=YI(t,e,r,n),r!==null){var s=Ps();ia(r,t,n,s),wS(r,e,n)}}function xL(t,e,r){var n=rl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gS(t))vS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,oa(o,a)){var l=e.interleaved;l===null?(s.next=s,kx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=YI(t,e,s,n),r!==null&&(s=Ps(),ia(r,t,n,s),wS(r,e,n))}}function gS(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function vS(t,e){ff=w0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bx(t,r)}}var y0={readContext:ki,useCallback:ds,useContext:ds,useEffect:ds,useImperativeHandle:ds,useInsertionEffect:ds,useLayoutEffect:ds,useMemo:ds,useReducer:ds,useRef:ds,useState:ds,useDebugValue:ds,useDeferredValue:ds,useTransition:ds,useMutableSource:ds,useSyncExternalStore:ds,useId:ds,unstable_isNewReconciler:!1},bL={readContext:ki,useCallback:function(t,e){return Ua().memoizedState=[t,e===void 0?null:e],t},useContext:ki,useEffect:MC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ug(4194308,4,uS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ug(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ug(4,2,t,e)},useMemo:function(t,e){var r=Ua();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ua();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=yL.bind(null,rn,t),[n.memoizedState,t]},useRef:function(t){var e=Ua();return t={current:t},e.memoizedState=t},useState:RC,useDebugValue:Gx,useDeferredValue:function(t){return Ua().memoizedState=t},useTransition:function(){var t=RC(!1),e=t[0];return t=wL.bind(null,t[1]),Ua().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=rn,s=Ua();if(Wr){if(r===void 0)throw Error(et(407));r=r()}else{if(r=e(),Kn===null)throw Error(et(349));Sc&30||nS(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,MC(iS.bind(null,n,i,t),[t]),n.flags|=2048,Xf(9,sS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ua(),e=Kn.identifierPrefix;if(Wr){var r=bo,n=xo;r=(n&~(1<<32-sa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=$f++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=vL++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BL={readContext:ki,useCallback:hS,useContext:ki,useEffect:qx,useImperativeHandle:dS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:fS,useReducer:ry,useRef:AS,useState:function(){return ry(Wf)},useDebugValue:Gx,useDeferredValue:function(t){var e=Di();return pS(e,Tn.memoizedState,t)},useTransition:function(){var t=ry(Wf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:rS,useId:mS,unstable_isNewReconciler:!1},CL={readContext:ki,useCallback:hS,useContext:ki,useEffect:qx,useImperativeHandle:dS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:fS,useReducer:ny,useRef:AS,useState:function(){return ny(Wf)},useDebugValue:Gx,useDeferredValue:function(t){var e=Di();return Tn===null?e.memoizedState=t:pS(e,Tn.memoizedState,t)},useTransition:function(){var t=ny(Wf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:rS,useId:mS,unstable_isNewReconciler:!1};function ea(t,e){if(t&&t.defaultProps){e=nn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Q1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:nn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pv={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ps(),n=rl(t),s=Io(r,n);s.tag=2,e!=null&&(s.callback=e),e=el(t,s,n),e!==null&&(ia(e,t,n,r),Fg(e,t,n))}};function OC(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Hf(r,n)||!Hf(s,i):!0}function yS(t,e,r){var n=!1,s=hl,i=e.contextType;return typeof i=="object"&&i!==null?i=ki(i):(s=Ws(e)?Nc:Bs.current,n=e.contextTypes,i=(n=n!=null)?yd(t,s):hl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function HC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&pv.enqueueReplaceState(e,e.state,null)}function L1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Dx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ki(i):(i=Ws(e)?Nc:Bs.current,s.context=yd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Q1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pv.enqueueReplaceState(s,s.state,null),g0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cd(t,e){try{var r="",n=e;do r+=YP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sy(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function j1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var EL=typeof WeakMap=="function"?WeakMap:Map;function xS(t,e,r){r=Io(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){b0||(b0=!0,G1=n),j1(t,e)},r}function bS(t,e,r){r=Io(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){j1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){j1(t,e),typeof n!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function VC(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new EL;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=RL.bind(null,t,e,r),e.then(t,t))}function KC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qC(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Io(-1,1),e.tag=2,el(r,e,1))),r.lanes|=1),t)}var _L=Ko.ReactCurrentOwner,Gs=!1;function Fs(t,e,r,n){e.child=t===null?JI(e,null,r,n):bd(e,t.child,r,n)}function GC(t,e,r,n,s){r=r.render;var i=e.ref;return dd(e,s),n=Vx(t,e,r,n,i,s),r=Kx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Wr&&r&&Tx(e),e.flags|=1,Fs(t,e,n,s),e.child)}function zC(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!eb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,BS(t,e,i,n,s)):(t=jg(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hf,r(a,n)&&t.ref===e.ref)return Do(t,e,s)}return e.flags|=1,t=nl(i,n),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Hf(i,n)&&t.ref===e.ref)if(Gs=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Gs=!0);else return e.lanes=t.lanes,Do(t,e,s)}return k1(t,e,r,n,s)}function CS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dr(id,ai),ai|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dr(id,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Dr(id,ai),ai|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Dr(id,ai),ai|=n;return Fs(t,e,s,r),e.child}function ES(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function k1(t,e,r,n,s){var i=Ws(r)?Nc:Bs.current;return i=yd(e,i),dd(e,s),r=Vx(t,e,r,n,i,s),n=Kx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Wr&&n&&Tx(e),e.flags|=1,Fs(t,e,r,s),e.child)}function $C(t,e,r,n,s){if(Ws(r)){var i=!0;d0(e)}else i=!1;if(dd(e,s),e.stateNode===null)Pg(t,e),yS(e,r,n),L1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=ki(c):(c=Ws(r)?Nc:Bs.current,c=yd(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&HC(e,a,n,c),UA=!1;var m=e.memoizedState;a.state=m,g0(e,n,a,s),l=e.memoizedState,o!==n||m!==l||$s.current||UA?(typeof u=="function"&&(Q1(e,r,u,n),l=e.memoizedState),(o=UA||OC(e,r,o,n,m,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ZI(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ea(e.type,o),a.props=c,h=e.pendingProps,m=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=ki(l):(l=Ws(r)?Nc:Bs.current,l=yd(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==l)&&HC(e,a,n,l),UA=!1,m=e.memoizedState,a.state=m,g0(e,n,a,s);var b=e.memoizedState;o!==h||m!==b||$s.current||UA?(typeof p=="function"&&(Q1(e,r,p,n),b=e.memoizedState),(c=UA||OC(e,r,c,n,m,b,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),a.props=n,a.state=b,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return D1(t,e,r,n,i,s)}function D1(t,e,r,n,s,i){ES(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&PC(e,r,!1),Do(t,e,i);n=e.stateNode,_L.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=bd(e,t.child,null,i),e.child=bd(e,null,o,i)):Fs(t,e,o,i),e.memoizedState=n.state,s&&PC(e,r,!0),e.child}function _S(t){var e=t.stateNode;e.pendingContext?UC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&UC(t,e.context,!1),Rx(t,e.containerInfo)}function WC(t,e,r,n,s){return xd(),Px(s),e.flags|=256,Fs(t,e,r,n),e.child}var R1={dehydrated:null,treeContext:null,retryLane:0};function M1(t){return{baseLanes:t,cachePool:null,transitions:null}}function NS(t,e,r){var n=e.pendingProps,s=tn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dr(tn,s&1),t===null)return U1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=vv(a,n,0,null),t=wc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=M1(r),e.memoizedState=R1,t):zx(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return NL(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=nl(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=nl(o,i):(i=wc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?M1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=R1,n}return i=t.child,t=i.sibling,n=nl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zx(t,e){return e=vv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tm(t,e,r,n){return n!==null&&Px(n),bd(e,t.child,null,r),t=zx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NL(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=sy(Error(et(422))),Tm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=vv({mode:"visible",children:n.children},s,0,null),i=wc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&bd(e,t.child,null,a),e.child.memoizedState=M1(a),e.memoizedState=R1,i);if(!(e.mode&1))return Tm(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(et(419)),n=sy(i,n,void 0),Tm(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gs||o){if(n=Kn,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ko(t,s),ia(n,t,s,-1))}return Zx(),n=sy(Error(et(421))),Tm(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ML.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,oi=ZA(s.nextSibling),ci=e,Wr=!0,na=null,t!==null&&(Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,xo=t.id,bo=t.overflow,Ic=e),e=zx(e,n.children),e.flags|=4096,e)}function XC(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),P1(t.return,e,r)}function iy(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function IS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Fs(t,e,n.children,r),n=tn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XC(t,r,e);else if(t.tag===19)XC(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Dr(tn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&v0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),iy(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&v0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}iy(e,!0,r,null,i);break;case"together":iy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Do(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(et(153));if(e.child!==null){for(t=e.child,r=nl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=nl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function IL(t,e,r){switch(e.tag){case 3:_S(e),xd();break;case 5:eS(e);break;case 1:Ws(e.type)&&d0(e);break;case 4:Rx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Dr(p0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Dr(tn,tn.current&1),e.flags|=128,null):r&e.child.childLanes?NS(t,e,r):(Dr(tn,tn.current&1),t=Do(t,e,r),t!==null?t.sibling:null);Dr(tn,tn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return IS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dr(tn,tn.current),n)break;return null;case 22:case 23:return e.lanes=0,CS(t,e,r)}return Do(t,e,r)}var SS,O1,FS,TS;SS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};O1=function(){};FS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,fc(Ra.current);var i=null;switch(r){case"input":s=l1(t,s),n=l1(t,n),i=[];break;case"select":s=nn({},s,{value:void 0}),n=nn({},n,{value:void 0}),i=[];break;case"textarea":s=d1(t,s),n=d1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=c0)}f1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Hr("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};TS=function(t,e,r,n){r!==n&&(e.flags|=4)};function _h(t,e){if(!Wr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function SL(t,e,r){var n=e.pendingProps;switch(Ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(e),null;case 1:return Ws(e.type)&&u0(),hs(e),null;case 3:return n=e.stateNode,Bd(),qr($s),qr(Bs),Ox(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,na!==null&&(W1(na),na=null))),O1(t,e),hs(e),null;case 5:Mx(e);var s=fc(zf.current);if(r=e.type,t!==null&&e.stateNode!=null)FS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(et(166));return hs(e),null}if(t=fc(Ra.current),Sm(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Pa]=e,n[qf]=i,t=(e.mode&1)!==0,r){case"dialog":Hr("cancel",n),Hr("close",n);break;case"iframe":case"object":case"embed":Hr("load",n);break;case"video":case"audio":for(s=0;s<$h.length;s++)Hr($h[s],n);break;case"source":Hr("error",n);break;case"img":case"image":case"link":Hr("error",n),Hr("load",n);break;case"details":Hr("toggle",n);break;case"input":iC(n,i),Hr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Hr("invalid",n);break;case"textarea":oC(n,i),Hr("invalid",n)}f1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,o,t),s=["children",""+o]):Lf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Hr("scroll",n)}switch(r){case"input":ym(n),aC(n,i,!0);break;case"textarea":ym(n),AC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=c0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Pa]=e,t[qf]=n,SS(t,e,!1,!1),e.stateNode=t;e:{switch(a=p1(r,n),r){case"dialog":Hr("cancel",t),Hr("close",t),s=n;break;case"iframe":case"object":case"embed":Hr("load",t),s=n;break;case"video":case"audio":for(s=0;s<$h.length;s++)Hr($h[s],t);s=n;break;case"source":Hr("error",t),s=n;break;case"img":case"image":case"link":Hr("error",t),Hr("load",t),s=n;break;case"details":Hr("toggle",t),s=n;break;case"input":iC(t,n),s=l1(t,n),Hr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=nn({},n,{value:void 0}),Hr("invalid",t);break;case"textarea":oC(t,n),s=d1(t,n),Hr("invalid",t);break;default:s=n}f1(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?AI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aI(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&jf(t,l):typeof l=="number"&&jf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Hr("scroll",t):l!=null&&gx(t,i,l,a))}switch(r){case"input":ym(t),aC(t,n,!1);break;case"textarea":ym(t),AC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Ad(t,!!n.multiple,i,!1):n.defaultValue!=null&&Ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=c0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hs(e),null;case 6:if(t&&e.stateNode!=null)TS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(et(166));if(r=fc(zf.current),fc(Ra.current),Sm(e)){if(n=e.stateNode,r=e.memoizedProps,n[Pa]=e,(i=n.nodeValue!==r)&&(t=ci,t!==null))switch(t.tag){case 3:Im(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Im(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pa]=e,e.stateNode=n}return hs(e),null;case 13:if(qr(tn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wr&&oi!==null&&e.mode&1&&!(e.flags&128))WI(),xd(),e.flags|=98560,i=!1;else if(i=Sm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(et(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(et(317));i[Pa]=e}else xd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hs(e),i=!1}else na!==null&&(W1(na),na=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||tn.current&1?Qn===0&&(Qn=3):Zx())),e.updateQueue!==null&&(e.flags|=4),hs(e),null);case 4:return Bd(),O1(t,e),t===null&&Vf(e.stateNode.containerInfo),hs(e),null;case 10:return jx(e.type._context),hs(e),null;case 17:return Ws(e.type)&&u0(),hs(e),null;case 19:if(qr(tn),i=e.memoizedState,i===null)return hs(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)_h(i,!1);else{if(Qn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=v0(t),a!==null){for(e.flags|=128,_h(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Dr(tn,tn.current&1|2),e.child}t=t.sibling}i.tail!==null&&vn()>Ed&&(e.flags|=128,n=!0,_h(i,!1),e.lanes=4194304)}else{if(!n)if(t=v0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_h(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Wr)return hs(e),null}else 2*vn()-i.renderingStartTime>Ed&&r!==1073741824&&(e.flags|=128,n=!0,_h(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vn(),e.sibling=null,r=tn.current,Dr(tn,n?r&1|2:r&1),e):(hs(e),null);case 22:case 23:return Yx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ai&1073741824&&(hs(e),e.subtreeFlags&6&&(e.flags|=8192)):hs(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function FL(t,e){switch(Ux(e),e.tag){case 1:return Ws(e.type)&&u0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bd(),qr($s),qr(Bs),Ox(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mx(e),null;case 13:if(qr(tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(et(340));xd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qr(tn),null;case 4:return Bd(),null;case 10:return jx(e.type._context),null;case 22:case 23:return Yx(),null;case 24:return null;default:return null}}var Um=!1,xs=!1,TL=typeof WeakSet=="function"?WeakSet:Set,bt=null;function sd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ln(t,e,n)}else r.current=null}function H1(t,e,r){try{r()}catch(n){ln(t,e,n)}}var JC=!1;function UL(t,e){if(E1=o0,t=jI(),Fx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(o=a+s),h!==i||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++c===s&&(o=a),m===i&&++u===n&&(l=a),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(_1={focusedElem:t,selectionRange:r},o0=!1,bt=e;bt!==null;)if(e=bt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,bt=t;else for(;bt!==null;){e=bt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var B=b.memoizedProps,_=b.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?B:ea(e.type,B),_);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(O){ln(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}return b=JC,JC=!1,b}function pf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&H1(e,r,i)}s=s.next}while(s!==n)}}function mv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function V1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function US(t){var e=t.alternate;e!==null&&(t.alternate=null,US(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pa],delete e[qf],delete e[S1],delete e[fL],delete e[pL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PS(t){return t.tag===5||t.tag===3||t.tag===4}function YC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function K1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=c0));else if(n!==4&&(t=t.child,t!==null))for(K1(t,e,r),t=t.sibling;t!==null;)K1(t,e,r),t=t.sibling}function q1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(q1(t,e,r),t=t.sibling;t!==null;)q1(t,e,r),t=t.sibling}var Zn=null,ra=!1;function bA(t,e,r){for(r=r.child;r!==null;)QS(t,e,r),r=r.sibling}function QS(t,e,r){if(Da&&typeof Da.onCommitFiberUnmount=="function")try{Da.onCommitFiberUnmount(Av,r)}catch{}switch(r.tag){case 5:xs||sd(r,e);case 6:var n=Zn,s=ra;Zn=null,bA(t,e,r),Zn=n,ra=s,Zn!==null&&(ra?(t=Zn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Zn.removeChild(r.stateNode));break;case 18:Zn!==null&&(ra?(t=Zn,r=r.stateNode,t.nodeType===8?Yw(t.parentNode,r):t.nodeType===1&&Yw(t,r),Mf(t)):Yw(Zn,r.stateNode));break;case 4:n=Zn,s=ra,Zn=r.stateNode.containerInfo,ra=!0,bA(t,e,r),Zn=n,ra=s;break;case 0:case 11:case 14:case 15:if(!xs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&H1(r,e,a),s=s.next}while(s!==n)}bA(t,e,r);break;case 1:if(!xs&&(sd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ln(r,e,o)}bA(t,e,r);break;case 21:bA(t,e,r);break;case 22:r.mode&1?(xs=(n=xs)||r.memoizedState!==null,bA(t,e,r),xs=n):bA(t,e,r);break;default:bA(t,e,r)}}function ZC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TL),e.forEach(function(n){var s=OL.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Zn=o.stateNode,ra=!1;break e;case 3:Zn=o.stateNode.containerInfo,ra=!0;break e;case 4:Zn=o.stateNode.containerInfo,ra=!0;break e}o=o.return}if(Zn===null)throw Error(et(160));QS(i,a,s),Zn=null,ra=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ln(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LS(e,t),e=e.sibling}function LS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),Sa(t),n&4){try{pf(3,t,t.return),mv(3,t)}catch(B){ln(t,t.return,B)}try{pf(5,t,t.return)}catch(B){ln(t,t.return,B)}}break;case 1:Wi(e,t),Sa(t),n&512&&r!==null&&sd(r,r.return);break;case 5:if(Wi(e,t),Sa(t),n&512&&r!==null&&sd(r,r.return),t.flags&32){var s=t.stateNode;try{jf(s,"")}catch(B){ln(t,t.return,B)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&nI(s,i),p1(o,a);var c=p1(o,i);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?AI(s,h):u==="dangerouslySetInnerHTML"?aI(s,h):u==="children"?jf(s,h):gx(s,u,h,c)}switch(o){case"input":c1(s,i);break;case"textarea":sI(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ad(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ad(s,!!i.multiple,i.defaultValue,!0):Ad(s,!!i.multiple,i.multiple?[]:"",!1))}s[qf]=i}catch(B){ln(t,t.return,B)}}break;case 6:if(Wi(e,t),Sa(t),n&4){if(t.stateNode===null)throw Error(et(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(B){ln(t,t.return,B)}}break;case 3:if(Wi(e,t),Sa(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mf(e.containerInfo)}catch(B){ln(t,t.return,B)}break;case 4:Wi(e,t),Sa(t);break;case 13:Wi(e,t),Sa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xx=vn())),n&4&&ZC(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(xs=(c=xs)||u,Wi(e,t),xs=c):Wi(e,t),Sa(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(bt=t,u=t.child;u!==null;){for(h=bt=u;bt!==null;){switch(m=bt,p=m.child,m.tag){case 0:case 11:case 14:case 15:pf(4,m,m.return);break;case 1:sd(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(B){ln(n,r,B)}}break;case 5:sd(m,m.return);break;case 22:if(m.memoizedState!==null){t5(h);continue}}p!==null?(p.return=m,bt=p):t5(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=oI("display",a))}catch(B){ln(t,t.return,B)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){ln(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wi(e,t),Sa(t),n&4&&ZC(t);break;case 21:break;default:Wi(e,t),Sa(t)}}function Sa(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(PS(r)){var n=r;break e}r=r.return}throw Error(et(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jf(s,""),n.flags&=-33);var i=YC(t);q1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=YC(t);K1(t,o,a);break;default:throw Error(et(161))}}catch(l){ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PL(t,e,r){bt=t,jS(t)}function jS(t,e,r){for(var n=(t.mode&1)!==0;bt!==null;){var s=bt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Um;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||xs;o=Um;var c=xs;if(Um=a,(xs=l)&&!c)for(bt=s;bt!==null;)a=bt,l=a.child,a.tag===22&&a.memoizedState!==null?r5(s):l!==null?(l.return=a,bt=l):r5(s);for(;i!==null;)bt=i,jS(i),i=i.sibling;bt=s,Um=o,xs=c}e5(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,bt=i):e5(t)}}function e5(t){for(;bt!==null;){var e=bt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xs||mv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ea(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&DC(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}DC(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Mf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}xs||e.flags&512&&V1(e)}catch(m){ln(e,e.return,m)}}if(e===t){bt=null;break}if(r=e.sibling,r!==null){r.return=e.return,bt=r;break}bt=e.return}}function t5(t){for(;bt!==null;){var e=bt;if(e===t){bt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,bt=r;break}bt=e.return}}function r5(t){for(;bt!==null;){var e=bt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mv(4,e)}catch(l){ln(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){ln(e,s,l)}}var i=e.return;try{V1(e)}catch(l){ln(e,i,l)}break;case 5:var a=e.return;try{V1(e)}catch(l){ln(e,a,l)}}}catch(l){ln(e,e.return,l)}if(e===t){bt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,bt=o;break}bt=e.return}}var QL=Math.ceil,x0=Ko.ReactCurrentDispatcher,$x=Ko.ReactCurrentOwner,Li=Ko.ReactCurrentBatchConfig,dr=0,Kn=null,Nn=null,os=0,ai=0,id=Cl(0),Qn=0,Jf=null,Fc=0,gv=0,Wx=0,mf=null,qs=null,Xx=0,Ed=1/0,wo=null,b0=!1,G1=null,tl=null,Pm=!1,KA=null,B0=0,gf=0,z1=null,Qg=-1,Lg=0;function Ps(){return dr&6?vn():Qg!==-1?Qg:Qg=vn()}function rl(t){return t.mode&1?dr&2&&os!==0?os&-os:gL.transition!==null?(Lg===0&&(Lg=yI()),Lg):(t=Nr,t!==0||(t=window.event,t=t===void 0?16:NI(t.type)),t):1}function ia(t,e,r,n){if(50<gf)throw gf=0,z1=null,Error(et(185));Bp(t,r,n),(!(dr&2)||t!==Kn)&&(t===Kn&&(!(dr&2)&&(gv|=r),Qn===4&&LA(t,os)),Xs(t,n),r===1&&dr===0&&!(e.mode&1)&&(Ed=vn()+500,hv&&El()))}function Xs(t,e){var r=t.callbackNode;gQ(t,e);var n=a0(t,t===Kn?os:0);if(n===0)r!==null&&uC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&uC(r),e===1)t.tag===0?mL(n5.bind(null,t)):GI(n5.bind(null,t)),dL(function(){!(dr&6)&&El()}),r=null;else{switch(xI(n)){case 1:r=bx;break;case 4:r=vI;break;case 16:r=i0;break;case 536870912:r=wI;break;default:r=i0}r=KS(r,kS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function kS(t,e){if(Qg=-1,Lg=0,dr&6)throw Error(et(327));var r=t.callbackNode;if(hd()&&t.callbackNode!==r)return null;var n=a0(t,t===Kn?os:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=C0(t,n);else{e=n;var s=dr;dr|=2;var i=RS();(Kn!==t||os!==e)&&(wo=null,Ed=vn()+500,vc(t,e));do try{kL();break}catch(o){DS(t,o)}while(!0);Lx(),x0.current=i,dr=s,Nn!==null?e=0:(Kn=null,os=0,e=Qn)}if(e!==0){if(e===2&&(s=y1(t),s!==0&&(n=s,e=$1(t,s))),e===1)throw r=Jf,vc(t,0),LA(t,n),Xs(t,vn()),r;if(e===6)LA(t,n);else{if(s=t.current.alternate,!(n&30)&&!LL(s)&&(e=C0(t,n),e===2&&(i=y1(t),i!==0&&(n=i,e=$1(t,i))),e===1))throw r=Jf,vc(t,0),LA(t,n),Xs(t,vn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(et(345));case 2:rc(t,qs,wo);break;case 3:if(LA(t,n),(n&130023424)===n&&(e=Xx+500-vn(),10<e)){if(a0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ps(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=I1(rc.bind(null,t,qs,wo),e);break}rc(t,qs,wo);break;case 4:if(LA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-sa(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=vn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QL(n/1960))-n,10<n){t.timeoutHandle=I1(rc.bind(null,t,qs,wo),n);break}rc(t,qs,wo);break;case 5:rc(t,qs,wo);break;default:throw Error(et(329))}}}return Xs(t,vn()),t.callbackNode===r?kS.bind(null,t):null}function $1(t,e){var r=mf;return t.current.memoizedState.isDehydrated&&(vc(t,e).flags|=256),t=C0(t,e),t!==2&&(e=qs,qs=r,e!==null&&W1(e)),t}function W1(t){qs===null?qs=t:qs.push.apply(qs,t)}function LL(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!oa(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function LA(t,e){for(e&=~Wx,e&=~gv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sa(e),n=1<<r;t[r]=-1,e&=~n}}function n5(t){if(dr&6)throw Error(et(327));hd();var e=a0(t,0);if(!(e&1))return Xs(t,vn()),null;var r=C0(t,e);if(t.tag!==0&&r===2){var n=y1(t);n!==0&&(e=n,r=$1(t,n))}if(r===1)throw r=Jf,vc(t,0),LA(t,e),Xs(t,vn()),r;if(r===6)throw Error(et(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rc(t,qs,wo),Xs(t,vn()),null}function Jx(t,e){var r=dr;dr|=1;try{return t(e)}finally{dr=r,dr===0&&(Ed=vn()+500,hv&&El())}}function Tc(t){KA!==null&&KA.tag===0&&!(dr&6)&&hd();var e=dr;dr|=1;var r=Li.transition,n=Nr;try{if(Li.transition=null,Nr=1,t)return t()}finally{Nr=n,Li.transition=r,dr=e,!(dr&6)&&El()}}function Yx(){ai=id.current,qr(id)}function vc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,uL(r)),Nn!==null)for(r=Nn.return;r!==null;){var n=r;switch(Ux(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&u0();break;case 3:Bd(),qr($s),qr(Bs),Ox();break;case 5:Mx(n);break;case 4:Bd();break;case 13:qr(tn);break;case 19:qr(tn);break;case 10:jx(n.type._context);break;case 22:case 23:Yx()}r=r.return}if(Kn=t,Nn=t=nl(t.current,null),os=ai=e,Qn=0,Jf=null,Wx=gv=Fc=0,qs=mf=null,hc!==null){for(e=0;e<hc.length;e++)if(r=hc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}hc=null}return t}function DS(t,e){do{var r=Nn;try{if(Lx(),Tg.current=y0,w0){for(var n=rn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}w0=!1}if(Sc=0,Vn=Tn=rn=null,ff=!1,$f=0,$x.current=null,r===null||r.return===null){Qn=1,Jf=e,Nn=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=os,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=KC(a);if(p!==null){p.flags&=-257,qC(p,a,o,i,e),p.mode&1&&VC(i,c,e),e=p,l=c;var b=e.updateQueue;if(b===null){var B=new Set;B.add(l),e.updateQueue=B}else b.add(l);break e}else{if(!(e&1)){VC(i,c,e),Zx();break e}l=Error(et(426))}}else if(Wr&&o.mode&1){var _=KC(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),qC(_,a,o,i,e),Px(Cd(l,o));break e}}i=l=Cd(l,o),Qn!==4&&(Qn=2),mf===null?mf=[i]:mf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=xS(i,l,e);kC(i,y);break e;case 1:o=l;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(tl===null||!tl.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=bS(i,o,e);kC(i,O);break e}}i=i.return}while(i!==null)}OS(r)}catch(R){e=R,Nn===r&&r!==null&&(Nn=r=r.return);continue}break}while(!0)}function RS(){var t=x0.current;return x0.current=y0,t===null?y0:t}function Zx(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),Kn===null||!(Fc&268435455)&&!(gv&268435455)||LA(Kn,os)}function C0(t,e){var r=dr;dr|=2;var n=RS();(Kn!==t||os!==e)&&(wo=null,vc(t,e));do try{jL();break}catch(s){DS(t,s)}while(!0);if(Lx(),dr=r,x0.current=n,Nn!==null)throw Error(et(261));return Kn=null,os=0,Qn}function jL(){for(;Nn!==null;)MS(Nn)}function kL(){for(;Nn!==null&&!AQ();)MS(Nn)}function MS(t){var e=VS(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?OS(t):Nn=e,$x.current=null}function OS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=FL(r,e),r!==null){r.flags&=32767,Nn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qn=6,Nn=null;return}}else if(r=SL(r,e,ai),r!==null){Nn=r;return}if(e=e.sibling,e!==null){Nn=e;return}Nn=e=t}while(e!==null);Qn===0&&(Qn=5)}function rc(t,e,r){var n=Nr,s=Li.transition;try{Li.transition=null,Nr=1,DL(t,e,r,n)}finally{Li.transition=s,Nr=n}return null}function DL(t,e,r,n){do hd();while(KA!==null);if(dr&6)throw Error(et(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(et(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(vQ(t,i),t===Kn&&(Nn=Kn=null,os=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pm||(Pm=!0,KS(i0,function(){return hd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Li.transition,Li.transition=null;var a=Nr;Nr=1;var o=dr;dr|=4,$x.current=null,UL(t,r),LS(r,t),sL(_1),o0=!!E1,_1=E1=null,t.current=r,PL(r),lQ(),dr=o,Nr=a,Li.transition=i}else t.current=r;if(Pm&&(Pm=!1,KA=t,B0=s),i=t.pendingLanes,i===0&&(tl=null),dQ(r.stateNode),Xs(t,vn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(b0)throw b0=!1,t=G1,G1=null,t;return B0&1&&t.tag!==0&&hd(),i=t.pendingLanes,i&1?t===z1?gf++:(gf=0,z1=t):gf=0,El(),null}function hd(){if(KA!==null){var t=xI(B0),e=Li.transition,r=Nr;try{if(Li.transition=null,Nr=16>t?16:t,KA===null)var n=!1;else{if(t=KA,KA=null,B0=0,dr&6)throw Error(et(331));var s=dr;for(dr|=4,bt=t.current;bt!==null;){var i=bt,a=i.child;if(bt.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(bt=c;bt!==null;){var u=bt;switch(u.tag){case 0:case 11:case 15:pf(8,u,i)}var h=u.child;if(h!==null)h.return=u,bt=h;else for(;bt!==null;){u=bt;var m=u.sibling,p=u.return;if(US(u),u===c){bt=null;break}if(m!==null){m.return=p,bt=m;break}bt=p}}}var b=i.alternate;if(b!==null){var B=b.child;if(B!==null){b.child=null;do{var _=B.sibling;B.sibling=null,B=_}while(B!==null)}}bt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,bt=a;else e:for(;bt!==null;){if(i=bt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,bt=y;break e}bt=i.return}}var w=t.current;for(bt=w;bt!==null;){a=bt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,bt=N;else e:for(a=w;bt!==null;){if(o=bt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mv(9,o)}}catch(R){ln(o,o.return,R)}if(o===a){bt=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,bt=O;break e}bt=o.return}}if(dr=s,El(),Da&&typeof Da.onPostCommitFiberRoot=="function")try{Da.onPostCommitFiberRoot(Av,t)}catch{}n=!0}return n}finally{Nr=r,Li.transition=e}}return!1}function s5(t,e,r){e=Cd(r,e),e=xS(t,e,1),t=el(t,e,1),e=Ps(),t!==null&&(Bp(t,1,e),Xs(t,e))}function ln(t,e,r){if(t.tag===3)s5(t,t,r);else for(;e!==null;){if(e.tag===3){s5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tl===null||!tl.has(n))){t=Cd(r,t),t=bS(e,t,1),e=el(e,t,1),t=Ps(),e!==null&&(Bp(e,1,t),Xs(e,t));break}}e=e.return}}function RL(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ps(),t.pingedLanes|=t.suspendedLanes&r,Kn===t&&(os&r)===r&&(Qn===4||Qn===3&&(os&130023424)===os&&500>vn()-Xx?vc(t,0):Wx|=r),Xs(t,e)}function HS(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var r=Ps();t=ko(t,e),t!==null&&(Bp(t,e,r),Xs(t,r))}function ML(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),HS(t,r)}function OL(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(et(314))}n!==null&&n.delete(e),HS(t,r)}var VS;VS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$s.current)Gs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gs=!1,IL(t,e,r);Gs=!!(t.flags&131072)}else Gs=!1,Wr&&e.flags&1048576&&zI(e,f0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pg(t,e),t=e.pendingProps;var s=yd(e,Bs.current);dd(e,r),s=Vx(null,e,n,t,s,r);var i=Kx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(i=!0,d0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dx(e),s.updater=pv,e.stateNode=s,s._reactInternals=e,L1(e,n,t,r),e=D1(null,e,n,!0,i,r)):(e.tag=0,Wr&&i&&Tx(e),Fs(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=VL(n),t=ea(n,t),s){case 0:e=k1(null,e,n,t,r);break e;case 1:e=$C(null,e,n,t,r);break e;case 11:e=GC(null,e,n,t,r);break e;case 14:e=zC(null,e,n,ea(n.type,t),r);break e}throw Error(et(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),k1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),$C(t,e,n,s,r);case 3:e:{if(_S(e),t===null)throw Error(et(387));n=e.pendingProps,i=e.memoizedState,s=i.element,ZI(t,e),g0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cd(Error(et(423)),e),e=WC(t,e,n,r,s);break e}else if(n!==s){s=Cd(Error(et(424)),e),e=WC(t,e,n,r,s);break e}else for(oi=ZA(e.stateNode.containerInfo.firstChild),ci=e,Wr=!0,na=null,r=JI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xd(),n===s){e=Do(t,e,r);break e}Fs(t,e,n,r)}e=e.child}return e;case 5:return eS(e),t===null&&U1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,N1(n,s)?a=null:i!==null&&N1(n,i)&&(e.flags|=32),ES(t,e),Fs(t,e,a,r),e.child;case 6:return t===null&&U1(e),null;case 13:return NS(t,e,r);case 4:return Rx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bd(e,null,n,r):Fs(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),GC(t,e,n,s,r);case 7:return Fs(t,e,e.pendingProps,r),e.child;case 8:return Fs(t,e,e.pendingProps.children,r),e.child;case 12:return Fs(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Dr(p0,n._currentValue),n._currentValue=a,i!==null)if(oa(i.value,a)){if(i.children===s.children&&!$s.current){e=Do(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Io(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),P1(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(et(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),P1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Fs(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,dd(e,r),s=ki(s),n=n(s),e.flags|=1,Fs(t,e,n,r),e.child;case 14:return n=e.type,s=ea(n,e.pendingProps),s=ea(n.type,s),zC(t,e,n,s,r);case 15:return BS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),Pg(t,e),e.tag=1,Ws(n)?(t=!0,d0(e)):t=!1,dd(e,r),yS(e,n,s),L1(e,n,s,r),D1(null,e,n,!0,t,r);case 19:return IS(t,e,r);case 22:return CS(t,e,r)}throw Error(et(156,e.tag))};function KS(t,e){return gI(t,e)}function HL(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(t,e,r,n){return new HL(t,e,r,n)}function eb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VL(t){if(typeof t=="function")return eb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wx)return 11;if(t===yx)return 14}return 2}function nl(t,e){var r=t.alternate;return r===null?(r=Ti(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function jg(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")eb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wu:return wc(r.children,s,i,e);case vx:a=8,s|=8;break;case i1:return t=Ti(12,r,e,s|2),t.elementType=i1,t.lanes=i,t;case a1:return t=Ti(13,r,e,s),t.elementType=a1,t.lanes=i,t;case o1:return t=Ti(19,r,e,s),t.elementType=o1,t.lanes=i,t;case eI:return vv(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YN:a=10;break e;case ZN:a=9;break e;case wx:a=11;break e;case yx:a=14;break e;case TA:a=16,n=null;break e}throw Error(et(130,t==null?t:typeof t,""))}return e=Ti(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function wc(t,e,r,n){return t=Ti(7,t,n,e),t.lanes=r,t}function vv(t,e,r,n){return t=Ti(22,t,n,e),t.elementType=eI,t.lanes=r,t.stateNode={isHidden:!1},t}function ay(t,e,r){return t=Ti(6,t,null,e),t.lanes=r,t}function oy(t,e,r){return e=Ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KL(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ow(0),this.expirationTimes=Ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ow(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tb(t,e,r,n,s,i,a,o,l){return t=new KL(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ti(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dx(i),t}function qL(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$u,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function qS(t){if(!t)return hl;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(et(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(t.tag===1){var r=t.type;if(Ws(r))return qI(t,r,e)}return e}function GS(t,e,r,n,s,i,a,o,l){return t=tb(r,n,!0,t,s,i,a,o,l),t.context=qS(null),r=t.current,n=Ps(),s=rl(r),i=Io(n,s),i.callback=e??null,el(r,i,s),t.current.lanes=s,Bp(t,s,n),Xs(t,n),t}function wv(t,e,r,n){var s=e.current,i=Ps(),a=rl(s);return r=qS(r),e.context===null?e.context=r:e.pendingContext=r,e=Io(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=el(s,e,a),t!==null&&(ia(t,s,a,i),Fg(t,s,a)),a}function E0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function rb(t,e){i5(t,e),(t=t.alternate)&&i5(t,e)}function GL(){return null}var zS=typeof reportError=="function"?reportError:function(t){console.error(t)};function nb(t){this._internalRoot=t}yv.prototype.render=nb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(et(409));wv(t,e,null,null)};yv.prototype.unmount=nb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tc(function(){wv(null,t,null,null)}),e[jo]=null}};function yv(t){this._internalRoot=t}yv.prototype.unstable_scheduleHydration=function(t){if(t){var e=CI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<QA.length&&e!==0&&e<QA[r].priority;r++);QA.splice(r,0,t),r===0&&_I(t)}};function sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a5(){}function zL(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=E0(a);i.call(c)}}var a=GS(e,n,t,0,null,!1,!1,"",a5);return t._reactRootContainer=a,t[jo]=a.current,Vf(t.nodeType===8?t.parentNode:t),Tc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=E0(l);o.call(c)}}var l=tb(t,0,!1,null,null,!1,!1,"",a5);return t._reactRootContainer=l,t[jo]=l.current,Vf(t.nodeType===8?t.parentNode:t),Tc(function(){wv(e,l,r,n)}),l}function bv(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=E0(a);o.call(l)}}wv(e,a,t,s)}else a=zL(r,e,t,s,n);return E0(a)}bI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zh(e.pendingLanes);r!==0&&(Bx(e,r|1),Xs(e,vn()),!(dr&6)&&(Ed=vn()+500,El()))}break;case 13:Tc(function(){var n=ko(t,1);if(n!==null){var s=Ps();ia(n,t,1,s)}}),rb(t,1)}};Cx=function(t){if(t.tag===13){var e=ko(t,134217728);if(e!==null){var r=Ps();ia(e,t,134217728,r)}rb(t,134217728)}};BI=function(t){if(t.tag===13){var e=rl(t),r=ko(t,e);if(r!==null){var n=Ps();ia(r,t,e,n)}rb(t,e)}};CI=function(){return Nr};EI=function(t,e){var r=Nr;try{return Nr=t,e()}finally{Nr=r}};g1=function(t,e,r){switch(e){case"input":if(c1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=dv(n);if(!s)throw Error(et(90));rI(n),c1(n,s)}}}break;case"textarea":sI(t,r);break;case"select":e=r.value,e!=null&&Ad(t,!!r.multiple,e,!1)}};uI=Jx;dI=Tc;var $L={usingClientEntryPoint:!1,Events:[Ep,Zu,dv,lI,cI,Jx]},Nh={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WL={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pI(t),t===null?null:t.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Av=Qm.inject(WL),Da=Qm}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$L;pi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sb(e))throw Error(et(200));return qL(t,e,null,r)};pi.createRoot=function(t,e){if(!sb(t))throw Error(et(299));var r=!1,n="",s=zS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tb(t,1,!1,null,null,r,!1,n,s),t[jo]=e.current,Vf(t.nodeType===8?t.parentNode:t),new nb(e)};pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(et(188)):(t=Object.keys(t).join(","),Error(et(268,t)));return t=pI(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t){return Tc(t)};pi.hydrate=function(t,e,r){if(!xv(e))throw Error(et(200));return bv(null,t,e,!0,r)};pi.hydrateRoot=function(t,e,r){if(!sb(t))throw Error(et(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=zS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=GS(e,null,t,1,r??null,s,!1,i,a),t[jo]=e.current,Vf(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new yv(e)};pi.render=function(t,e,r){if(!xv(e))throw Error(et(200));return bv(null,t,e,!1,r)};pi.unmountComponentAtNode=function(t){if(!xv(t))throw Error(et(40));return t._reactRootContainer?(Tc(function(){bv(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};pi.unstable_batchedUpdates=Jx;pi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xv(r))throw Error(et(200));if(t==null||t._reactInternals===void 0)throw Error(et(38));return bv(t,e,r,!1,n)};pi.version="18.3.1-next-f1338f8080-20240426";function $S(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($S)}catch(t){console.error(t)}}$S(),$N.exports=pi;var Yf=$N.exports,o5=Yf;n1.createRoot=o5.createRoot,n1.hydrateRoot=o5.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A5="popstate";function XL(t={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return X1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Zf(s)}return YL(e,r,null,t)}function Zr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Aa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JL(){return Math.random().toString(36).substring(2,10)}function l5(t,e){return{usr:t.state,key:t.key,idx:e}}function X1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Md(e):e,state:r,key:e&&e.key||n||JL()}}function Zf({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Md(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function YL(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let _=u(),y=_==null?null:_-c;c=_,l&&l({action:o,location:B.location,delta:y})}function m(_,y){o="PUSH";let w=X1(B.location,_,y);c=u()+1;let N=l5(w,c),O=B.createHref(w);try{a.pushState(N,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(O)}i&&l&&l({action:o,location:B.location,delta:1})}function p(_,y){o="REPLACE";let w=X1(B.location,_,y);c=u();let N=l5(w,c),O=B.createHref(w);a.replaceState(N,"",O),i&&l&&l({action:o,location:B.location,delta:0})}function b(_){return ZL(_)}let B={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(A5,h),l=_,()=>{s.removeEventListener(A5,h),l=null}},createHref(_){return e(s,_)},createURL:b,encodeLocation(_){let y=b(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(_){return a.go(_)}};return B}function ZL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Zf(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function WS(t,e,r="/"){return ej(t,e,r,!1)}function ej(t,e,r,n){let s=typeof e=="string"?Md(e):e,i=Ro(s.pathname||"/",r);if(i==null)return null;let a=XS(t);tj(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=dj(i);o=cj(a[l],c,n)}return o}function XS(t,e=[],r=[],n="",s=!1){let i=(a,o,l=s,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Zr(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=So([n,u.relativePath]),m=r.concat(u);a.children&&a.children.length>0&&(Zr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),XS(a.children,e,m,h,l)),!(a.path==null&&!a.index)&&e.push({path:h,score:Aj(h,a.index),routesMeta:m})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of JS(a.path))i(a,o,!0,c)}),e}function JS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=JS(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function tj(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:lj(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var rj=/^:[\w-]+$/,nj=3,sj=2,ij=1,aj=10,oj=-2,c5=t=>t==="*";function Aj(t,e){let r=t.split("/"),n=r.length;return r.some(c5)&&(n+=oj),e&&(n+=sj),r.filter(s=>!c5(s)).reduce((s,i)=>s+(rj.test(i)?nj:i===""?ij:aj),n)}function lj(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function cj(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:So([i,h.pathname]),pathnameBase:mj(So([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=So([i,h.pathnameBase]))}return a}function _0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=uj(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},m)=>{if(u==="*"){let b=o[m]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const p=o[m];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function uj(t,e=!1,r=!0){Aa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function dj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function hj(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Md(t):t;return{pathname:r?r.startsWith("/")?r:fj(r,e):e,search:gj(n),hash:vj(s)}}function fj(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ay(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ib(t){let e=pj(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ab(t,e,r,n=!1){let s;typeof t=="string"?s=Md(t):(s={...t},Zr(!s.pathname||!s.pathname.includes("?"),Ay("?","pathname","search",s)),Zr(!s.pathname||!s.pathname.includes("#"),Ay("#","pathname","hash",s)),Zr(!s.search||!s.search.includes("#"),Ay("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let h=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=hj(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var So=t=>t.join("/").replace(/\/\/+/g,"/"),mj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YS=["POST","PUT","PATCH","DELETE"];new Set(YS);var yj=["GET",...YS];new Set(yj);var Od=Q.createContext(null);Od.displayName="DataRouter";var Bv=Q.createContext(null);Bv.displayName="DataRouterState";Q.createContext(!1);var ZS=Q.createContext({isTransitioning:!1});ZS.displayName="ViewTransition";var xj=Q.createContext(new Map);xj.displayName="Fetchers";var bj=Q.createContext(null);bj.displayName="Await";var ua=Q.createContext(null);ua.displayName="Navigation";var Np=Q.createContext(null);Np.displayName="Location";var da=Q.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var ob=Q.createContext(null);ob.displayName="RouteError";function Bj(t,{relative:e}={}){Zr(Hd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=Q.useContext(ua),{hash:s,pathname:i,search:a}=Ip(t,{relative:e}),o=i;return r!=="/"&&(o=i==="/"?r:So([r,i])),n.createHref({pathname:o,search:a,hash:s})}function Hd(){return Q.useContext(Np)!=null}function _l(){return Zr(Hd(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Np).location}var eF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tF(t){Q.useContext(ua).static||Q.useLayoutEffect(t)}function Cv(){let{isDataRoute:t}=Q.useContext(da);return t?Dj():Cj()}function Cj(){Zr(Hd(),"useNavigate() may be used only in the context of a <Router> component.");let t=Q.useContext(Od),{basename:e,navigator:r}=Q.useContext(ua),{matches:n}=Q.useContext(da),{pathname:s}=_l(),i=JSON.stringify(ib(n)),a=Q.useRef(!1);return tF(()=>{a.current=!0}),Q.useCallback((l,c={})=>{if(Aa(a.current,eF),!a.current)return;if(typeof l=="number"){r.go(l);return}let u=ab(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:So([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,i,s,t])}var Ej=Q.createContext(null);function _j(t){let e=Q.useContext(da).outlet;return e&&Q.createElement(Ej.Provider,{value:t},e)}function Ip(t,{relative:e}={}){let{matches:r}=Q.useContext(da),{pathname:n}=_l(),s=JSON.stringify(ib(r));return Q.useMemo(()=>ab(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function Nj(t,e){return rF(t,e)}function rF(t,e,r,n){var y;Zr(Hd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Q.useContext(ua),{matches:i}=Q.useContext(da),a=i[i.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";nF(l,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=_l(),m;if(e){let w=typeof e=="string"?Md(e):e;Zr(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=h;let p=m.pathname||"/",b=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let B=WS(t,{pathname:b});Aa(u||B!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Aa(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Uj(B&&B.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:So([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:So([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&_?Q.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function Ij(){let t=kj(),e=wj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:i},"ErrorBoundary")," or"," ",Q.createElement("code",{style:i},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),r?Q.createElement("pre",{style:s},r):null,a)}var Sj=Q.createElement(Ij,null),Fj=class extends Q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Q.createElement(da.Provider,{value:this.props.routeContext},Q.createElement(ob.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tj({routeContext:t,match:e,children:r}){let n=Q.useContext(Od);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(da.Provider,{value:t},r)}function Uj(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Zr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,o=-1;if(r)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:h}=r,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||m){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let h,m=!1,p=null,b=null;r&&(h=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||Sj,a&&(o<0&&u===0?(nF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):o===u&&(m=!0,b=c.route.hydrateFallbackElement||null)));let B=e.concat(s.slice(0,u+1)),_=()=>{let y;return h?y=p:m?y=b:c.route.Component?y=Q.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,Q.createElement(Tj,{match:c,routeContext:{outlet:l,matches:B,isDataRoute:r!=null},children:y})};return r&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?Q.createElement(Fj,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:_(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):_()},null)}function Ab(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pj(t){let e=Q.useContext(Od);return Zr(e,Ab(t)),e}function Qj(t){let e=Q.useContext(Bv);return Zr(e,Ab(t)),e}function Lj(t){let e=Q.useContext(da);return Zr(e,Ab(t)),e}function lb(t){let e=Lj(t),r=e.matches[e.matches.length-1];return Zr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function jj(){return lb("useRouteId")}function kj(){var n;let t=Q.useContext(ob),e=Qj("useRouteError"),r=lb("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Dj(){let{router:t}=Pj("useNavigate"),e=lb("useNavigate"),r=Q.useRef(!1);return tF(()=>{r.current=!0}),Q.useCallback(async(s,i={})=>{Aa(r.current,eF),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var u5={};function nF(t,e,r){!e&&!u5[t]&&(u5[t]=!0,Aa(!1,r))}Q.memo(Rj);function Rj({routes:t,future:e,state:r}){return rF(t,void 0,r,e)}function Du({to:t,replace:e,state:r,relative:n}){Zr(Hd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=Q.useContext(ua);Aa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=Q.useContext(da),{pathname:a}=_l(),o=Cv(),l=ab(t,ib(i),a,n==="path"),c=JSON.stringify(l);return Q.useEffect(()=>{o(JSON.parse(c),{replace:e,state:r,relative:n})},[o,c,n,e,r]),null}function Mj(t){return _j(t.context)}function Vr(t){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oj({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Zr(!Hd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=Q.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Md(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:m="default"}=r,p=Q.useMemo(()=>{let b=Ro(l,a);return b==null?null:{location:{pathname:b,search:c,hash:u,state:h,key:m},navigationType:n}},[a,l,c,u,h,m,n]);return Aa(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:Q.createElement(ua.Provider,{value:o},Q.createElement(Np.Provider,{children:e,value:p}))}function Hj({children:t,location:e}){return Nj(J1(t),e)}function J1(t,e=[]){let r=[];return Q.Children.forEach(t,(n,s)=>{if(!Q.isValidElement(n))return;let i=[...e,s];if(n.type===Q.Fragment){r.push.apply(r,J1(n.props.children,i));return}Zr(n.type===Vr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=J1(n.props.children,i)),r.push(a)}),r}var kg="get",Dg="application/x-www-form-urlencoded";function Ev(t){return t!=null&&typeof t.tagName=="string"}function Vj(t){return Ev(t)&&t.tagName.toLowerCase()==="button"}function Kj(t){return Ev(t)&&t.tagName.toLowerCase()==="form"}function qj(t){return Ev(t)&&t.tagName.toLowerCase()==="input"}function Gj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zj(t,e){return t.button===0&&(!e||e==="_self")&&!Gj(t)}var Lm=null;function $j(){if(Lm===null)try{new FormData(document.createElement("form"),0),Lm=!1}catch{Lm=!0}return Lm}var Wj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ly(t){return t!=null&&!Wj.has(t)?(Aa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dg}"`),null):t}function Xj(t,e){let r,n,s,i,a;if(Kj(t)){let o=t.getAttribute("action");n=o?Ro(o,e):null,r=t.getAttribute("method")||kg,s=ly(t.getAttribute("enctype"))||Dg,i=new FormData(t)}else if(Vj(t)||qj(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ro(l,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||kg,s=ly(t.getAttribute("formenctype"))||ly(o.getAttribute("enctype"))||Dg,i=new FormData(o,t),!$j()){let{name:c,type:u,value:h}=t;if(u==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,h)}}else{if(Ev(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kg,n=null,s=Dg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jj(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Yj(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ek(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await Yj(i,r);return a.links?a.links():[]}return[]}));return sk(n.flat(1).filter(Zj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function d5(t,e,r,n,s,i){let a=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,o=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):i==="data"?e.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function tk(t,e,{includeHydrateFallback:r}={}){return rk(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function rk(t){return[...new Set(t)]}function nk(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function sk(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(nk(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function sF(){let t=Q.useContext(Od);return cb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ik(){let t=Q.useContext(Bv);return cb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ub=Q.createContext(void 0);ub.displayName="FrameworkContext";function iF(){let t=Q.useContext(ub);return cb(t,"You must render this element inside a <HydratedRouter> element"),t}function ak(t,e){let r=Q.useContext(ub),[n,s]=Q.useState(!1),[i,a]=Q.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,m=Q.useRef(null);Q.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let B=y=>{y.forEach(w=>{a(w.isIntersecting)})},_=new IntersectionObserver(B,{threshold:.5});return m.current&&_.observe(m.current),()=>{_.disconnect()}}},[t]),Q.useEffect(()=>{if(n){let B=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(B)}}},[n]);let p=()=>{s(!0)},b=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Ih(o,p),onBlur:Ih(l,b),onMouseEnter:Ih(c,p),onMouseLeave:Ih(u,b),onTouchStart:Ih(h,p)}]:[!1,m,{}]}function Ih(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function ok({page:t,...e}){let{router:r}=sF(),n=Q.useMemo(()=>WS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?Q.createElement(lk,{page:t,matches:n,...e}):null}function Ak(t){let{manifest:e,routeModules:r}=iF(),[n,s]=Q.useState([]);return Q.useEffect(()=>{let i=!1;return ek(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function lk({page:t,matches:e,...r}){let n=_l(),{manifest:s,routeModules:i}=iF(),{basename:a}=sF(),{loaderData:o,matches:l}=ik(),c=Q.useMemo(()=>d5(t,e,l,s,n,"data"),[t,e,l,s,n]),u=Q.useMemo(()=>d5(t,e,l,s,n,"assets"),[t,e,l,s,n]),h=Q.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let b=new Set,B=!1;if(e.forEach(y=>{var N;let w=s.routes[y.route.id];!w||!w.hasLoader||(!c.some(O=>O.route.id===y.route.id)&&y.route.id in o&&((N=i[y.route.id])!=null&&N.shouldRevalidate)||w.hasClientLoader?B=!0:b.add(y.route.id))}),b.size===0)return[];let _=Jj(t,a,"data");return B&&b.size>0&&_.searchParams.set("_routes",e.filter(y=>b.has(y.route.id)).map(y=>y.route.id).join(",")),[_.pathname+_.search]},[a,o,n,s,c,e,t,i]),m=Q.useMemo(()=>tk(u,s),[u,s]),p=Ak(u);return Q.createElement(Q.Fragment,null,h.map(b=>Q.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),m.map(b=>Q.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),p.map(({key:b,link:B})=>Q.createElement("link",{key:b,nonce:r.nonce,...B})))}function ck(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var aF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aF&&(window.__reactRouterVersion="7.8.1")}catch{}function uk({basename:t,children:e,window:r}){let n=Q.useRef();n.current==null&&(n.current=XL({window:r,v5Compat:!0}));let s=n.current,[i,a]=Q.useState({action:s.action,location:s.location}),o=Q.useCallback(l=>{Q.startTransition(()=>a(l))},[a]);return Q.useLayoutEffect(()=>s.listen(o),[s,o]),Q.createElement(Oj,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var oF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AF=Q.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...m},p){let{basename:b}=Q.useContext(ua),B=typeof c=="string"&&oF.test(c),_,y=!1;if(typeof c=="string"&&B&&(_=c,aF))try{let L=new URL(window.location.href),D=c.startsWith("//")?new URL(L.protocol+c):new URL(c),I=Ro(D.pathname,b);D.origin===L.origin&&I!=null?c=I+D.search+D.hash:y=!0}catch{Aa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Bj(c,{relative:s}),[N,O,R]=ak(n,m),M=fk(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:h});function F(L){e&&e(L),L.defaultPrevented||M(L)}let E=Q.createElement("a",{...m,...R,href:_||w,onClick:y||i?e:F,ref:ck(p,O),target:l,"data-discover":!B&&r==="render"?"true":void 0});return N&&!B?Q.createElement(Q.Fragment,null,E,Q.createElement(ok,{page:w})):E});AF.displayName="Link";var jr=Q.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:l,...c},u){let h=Ip(a,{relative:c.relative}),m=_l(),p=Q.useContext(Bv),{navigator:b,basename:B}=Q.useContext(ua),_=p!=null&&wk(h)&&o===!0,y=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,w=m.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&B&&(N=Ro(N,B)||N);const O=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let R=w===y||!s&&w.startsWith(y)&&w.charAt(O)==="/",M=N!=null&&(N===y||!s&&N.startsWith(y)&&N.charAt(y.length)==="/"),F={isActive:R,isPending:M,isTransitioning:_},E=R?e:void 0,L;typeof n=="function"?L=n(F):L=[n,R?"active":null,M?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(F):i;return Q.createElement(AF,{...c,"aria-current":E,className:L,ref:u,style:D,to:a,viewTransition:o},typeof l=="function"?l(F):l)});jr.displayName="NavLink";var dk=Q.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=kg,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...m},p)=>{let b=gk(),B=vk(o,{relative:c}),_=a.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&oF.test(o),w=N=>{if(l&&l(N),N.defaultPrevented)return;N.preventDefault();let O=N.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||a;b(O||N.currentTarget,{fetcherKey:e,method:R,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return Q.createElement("form",{ref:p,method:_,action:B,onSubmit:n?l:w,...m,"data-discover":!y&&t==="render"?"true":void 0})});dk.displayName="Form";function hk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lF(t){let e=Q.useContext(Od);return Zr(e,hk(t)),e}function fk(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=Cv(),l=_l(),c=Ip(t,{relative:i});return Q.useCallback(u=>{if(zj(u,e)){u.preventDefault();let h=r!==void 0?r:Zf(l)===Zf(c);o(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[l,o,c,r,n,e,t,s,i,a])}var pk=0,mk=()=>`__${String(++pk)}__`;function gk(){let{router:t}=lF("useSubmit"),{basename:e}=Q.useContext(ua),r=jj();return Q.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:l,body:c}=Xj(n,e);if(s.navigate===!1){let u=s.fetcherKey||mk();await t.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function vk(t,{relative:e}={}){let{basename:r}=Q.useContext(ua),n=Q.useContext(da);Zr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ip(t||".",{relative:e})},a=_l();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:So([r,i.pathname])),Zf(i)}function wk(t,{relative:e}={}){let r=Q.useContext(ZS);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lF("useViewTransitionState"),s=Ip(t,{relative:e});if(!r.isTransitioning)return!1;let i=Ro(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Ro(r.nextLocation.pathname,n)||r.nextLocation.pathname;return _0(s.pathname,a)!=null||_0(s.pathname,i)!=null}var h5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},yk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},uF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|o>>4;let m=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(m=64)),n.push(r[u],r[h],r[m],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||h==null)throw new xk;const m=i<<2|o>>4;if(n.push(m),c!==64){const p=o<<4&240|c>>2;if(n.push(p),h!==64){const b=c<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bk=function(t){const e=cF(t);return uF.encodeByteArray(e,!0)},N0=function(t){return bk(t).replace(/\./g,"")},dF=function(t){try{return uF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=()=>Bk().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof h5>"u")return;const t=h5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_k=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dF(t[1]);return e&&JSON.parse(e)},_v=()=>{try{return Ck()||Ek()||_k()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hF=t=>{var e,r;return(r=(e=_v())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Nk=t=>{const e=hF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fF=()=>{var t;return(t=_v())===null||t===void 0?void 0:t.config},pF=t=>{var e;return(e=_v())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[N0(JSON.stringify(r)),N0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function Tk(){var t;const e=(t=_v())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lk(){const t=Ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mF(){return!Tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gF(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="FirebaseError";class qo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kk,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sp.prototype.create)}}class Sp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Dk(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new qo(s,o,n)}}function Dk(t,e){return t.replace(Rk,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Rk=/\{\$([^}]+)}/g;function Mk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function I0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(f5(i)&&f5(a)){if(!I0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function f5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Wh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Xh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Ok(t,e){const r=new Hk(t,e);return r.subscribe.bind(r)}class Hk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Vk(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=cy),s.error===void 0&&(s.error=cy),s.complete===void 0&&(s.complete=cy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Uc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Ik;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gk(e))try{this.getOrInitializeService({instanceIdentifier:nc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=nc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nc){return this.instances.has(e)}getOptions(e=nc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=nc){return this.component?this.component.multipleInstances?e:nc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qk(t){return t===nc?void 0:t}function Gk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Kk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ir||(ir={}));const $k={debug:ir.DEBUG,verbose:ir.VERBOSE,info:ir.INFO,warn:ir.WARN,error:ir.ERROR,silent:ir.SILENT},Wk=ir.INFO,Xk={[ir.DEBUG]:"log",[ir.VERBOSE]:"log",[ir.INFO]:"info",[ir.WARN]:"warn",[ir.ERROR]:"error"},Jk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Xk[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let db=class{constructor(e){this.name=e,this._logLevel=Wk,this._logHandler=Jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ir))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ir.DEBUG,...e),this._logHandler(this,ir.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ir.VERBOSE,...e),this._logHandler(this,ir.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ir.INFO,...e),this._logHandler(this,ir.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ir.WARN,...e),this._logHandler(this,ir.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ir.ERROR,...e),this._logHandler(this,ir.ERROR,...e)}};const Yk=(t,e)=>e.some(r=>t instanceof r);let p5,m5;function Zk(){return p5||(p5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eD(){return m5||(m5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vF=new WeakMap,Y1=new WeakMap,wF=new WeakMap,uy=new WeakMap,hb=new WeakMap;function tD(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(sl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&vF.set(r,t)}).catch(()=>{}),hb.set(e,t),e}function rD(t){if(Y1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Y1.set(t,e)}let Z1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Y1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nD(t){Z1=t(Z1)}function sD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(dy(this),e,...r);return wF.set(n,e.sort?e.sort():[e]),sl(n)}:eD().includes(t)?function(...e){return t.apply(dy(this),e),sl(vF.get(this))}:function(...e){return sl(t.apply(dy(this),e))}}function iD(t){return typeof t=="function"?sD(t):(t instanceof IDBTransaction&&rD(t),Yk(t,Zk())?new Proxy(t,Z1):t)}function sl(t){if(t instanceof IDBRequest)return tD(t);if(uy.has(t))return uy.get(t);const e=iD(t);return e!==t&&(uy.set(t,e),hb.set(e,t)),e}const dy=t=>hb.get(t);function aD(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=sl(a);return n&&a.addEventListener("upgradeneeded",l=>{n(sl(a.result),l.oldVersion,l.newVersion,sl(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const oD=["get","getKey","getAll","getAllKeys","count"],AD=["put","add","delete","clear"],hy=new Map;function g5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hy.get(e))return hy.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=AD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||oD.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return hy.set(e,i),i}nD(t=>({...t,get:(e,r,n)=>g5(e,r)||t.get(e,r,n),has:(e,r)=>!!g5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(cD(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function cD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const e2="@firebase/app",v5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new db("@firebase/app"),uD="@firebase/app-compat",dD="@firebase/analytics-compat",hD="@firebase/analytics",fD="@firebase/app-check-compat",pD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",vD="@firebase/database",wD="@firebase/data-connect",yD="@firebase/database-compat",xD="@firebase/functions",bD="@firebase/functions-compat",BD="@firebase/installations",CD="@firebase/installations-compat",ED="@firebase/messaging",_D="@firebase/messaging-compat",ND="@firebase/performance",ID="@firebase/performance-compat",SD="@firebase/remote-config",FD="@firebase/remote-config-compat",TD="@firebase/storage",UD="@firebase/storage-compat",PD="@firebase/firestore",QD="@firebase/vertexai-preview",LD="@firebase/firestore-compat",jD="firebase",kD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="[DEFAULT]",DD={[e2]:"fire-core",[uD]:"fire-core-compat",[hD]:"fire-analytics",[dD]:"fire-analytics-compat",[pD]:"fire-app-check",[fD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[vD]:"fire-rtdb",[wD]:"fire-data-connect",[yD]:"fire-rtdb-compat",[xD]:"fire-fn",[bD]:"fire-fn-compat",[BD]:"fire-iid",[CD]:"fire-iid-compat",[ED]:"fire-fcm",[_D]:"fire-fcm-compat",[ND]:"fire-perf",[ID]:"fire-perf-compat",[SD]:"fire-rc",[FD]:"fire-rc-compat",[TD]:"fire-gcs",[UD]:"fire-gcs-compat",[PD]:"fire-fst",[LD]:"fire-fst-compat",[QD]:"fire-vertex","fire-js":"fire-js",[jD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,r2=new Map,n2=new Map;function w5(t,e){try{t.container.addComponent(e)}catch(r){Mo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nd(t){const e=t.name;if(n2.has(e))return Mo.debug(`There were multiple attempts to register component ${e}.`),!1;n2.set(e,t);for(const r of _d.values())w5(r,t);for(const r of r2.values())w5(r,t);return!0}function fb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Qa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},il=new Sp("app","Firebase",RD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw il.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=kD;function pb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:t2,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw il.create("bad-app-name",{appName:String(s)});if(r||(r=fF()),!r)throw il.create("no-options");const i=_d.get(s);if(i){if(I0(r,i.options)&&I0(n,i.config))return i;throw il.create("duplicate-app",{appName:s})}const a=new zk(s);for(const l of n2.values())a.addComponent(l);const o=new MD(r,n,a);return _d.set(s,o),o}function mb(t=t2){const e=_d.get(t);if(!e&&t===t2&&fF())return pb();if(!e)throw il.create("no-app",{appName:t});return e}async function OD(t){let e=!1;const r=t.name;_d.has(r)?(e=!0,_d.delete(r)):r2.has(r)&&t.decRefCount()<=0&&(r2.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function al(t,e,r){var n;let s=(n=DD[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mo.warn(o.join(" "));return}Nd(new Uc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="firebase-heartbeat-database",VD=1,ep="firebase-heartbeat-store";let fy=null;function yF(){return fy||(fy=aD(HD,VD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ep)}catch(r){console.warn(r)}}}}).catch(t=>{throw il.create("idb-open",{originalErrorMessage:t.message})})),fy}async function KD(t){try{const r=(await yF()).transaction(ep),n=await r.objectStore(ep).get(xF(t));return await r.done,n}catch(e){if(e instanceof qo)Mo.warn(e.message);else{const r=il.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mo.warn(r.message)}}}async function y5(t,e){try{const n=(await yF()).transaction(ep,"readwrite");await n.objectStore(ep).put(e,xF(t)),await n.done}catch(r){if(r instanceof qo)Mo.warn(r.message);else{const n=il.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Mo.warn(n.message)}}}function xF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=1024,GD=30*24*60*60*1e3;class zD{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new WD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=x5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=GD}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Mo.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=x5(),{heartbeatsToSend:n,unsentEntries:s}=$D(this._heartbeatsCache.heartbeats),i=N0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Mo.warn(r),""}}}function x5(){return new Date().toISOString().substring(0,10)}function $D(t,e=qD){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),b5(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),b5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class WD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gF()?jk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await KD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return y5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return y5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function b5(t){return N0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){Nd(new Uc("platform-logger",e=>new lD(e),"PRIVATE")),Nd(new Uc("heartbeat",e=>new zD(e),"PRIVATE")),al(e2,v5,t),al(e2,v5,"esm2017"),al("fire-js","")}XD("");function gb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function bF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JD=bF,BF=new Sp("auth","Firebase",bF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new db("@firebase/auth");function YD(t,...e){S0.logLevel<=ir.WARN&&S0.warn(`Auth (${Vd}): ${t}`,...e)}function Rg(t,...e){S0.logLevel<=ir.ERROR&&S0.error(`Auth (${Vd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,...e){throw vb(t,...e)}function Ma(t,...e){return vb(t,...e)}function CF(t,e,r){const n=Object.assign(Object.assign({},JD()),{[e]:r});return new Sp("auth","Firebase",n).create(e,{appName:t.name})}function Fo(t){return CF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return BF.create(t,...e)}function Ot(t,e,...r){if(!t)throw vb(e,...r)}function Bo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rg(e),new Error(e)}function Oo(t,e){t||Bo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZD(){return B5()==="http:"||B5()==="https:"}function B5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZD()||Pk()||"connection"in navigator)?navigator.onLine:!0}function tR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,r){this.shortDelay=e,this.longDelay=r,Oo(r>e,"Short delay should be less than long delay!"),this.isMobile=Fk()||Qk()}get(){return eR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){Oo(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Tp(3e4,6e4);function Nl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Il(t,e,r,n,s={}){return _F(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Fp(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Uk()||(c.referrerPolicy="no-referrer"),EF.fetch()(NF(t,t.config.apiHost,r,o),c)})}async function _F(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},rR),e);try{const s=new iR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw jm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jm(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw jm(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw jm(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw CF(t,u,c);la(t,u)}}catch(s){if(s instanceof qo)throw s;la(t,"network-request-failed",{message:String(s)})}}async function Up(t,e,r,n,s={}){const i=await Il(t,e,r,n,s);return"mfaPendingCredential"in i&&la(t,"multi-factor-auth-required",{_serverResponse:i}),i}function NF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?wb(t.config,s):`${t.config.apiScheme}://${s}`}function sR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ma(this.auth,"network-request-failed")),nR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ma(t,e,n);return s.customData._tokenResponse=r,s}function C5(t){return t!==void 0&&t.enterprise!==void 0}class aR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return sR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oR(t,e){return Il(t,"GET","/v2/recaptchaConfig",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return Il(t,"POST","/v1/accounts:delete",e)}async function IF(t,e){return Il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lR(t,e=!1){const r=cn(t),n=await r.getIdToken(e),s=yb(n);Ot(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:vf(py(s.auth_time)),issuedAtTime:vf(py(s.iat)),expirationTime:vf(py(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function py(t){return Number(t)*1e3}function yb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Rg("JWT malformed, contained fewer than 3 sections"),null;try{const s=dF(r);return s?JSON.parse(s):(Rg("Failed to decode base64 JWT payload"),null)}catch(s){return Rg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E5(t){const e=yb(t);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof qo&&cR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function cR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=vf(this.lastLoginAt),this.creationTime=vf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await tp(t,IF(r,{idToken:n}));Ot(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SF(i.providerUserInfo):[],o=hR(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new i2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function dR(t){const e=cn(t);await F0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function SF(t){return t.map(e=>{var{providerId:r}=e,n=gb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e){const r=await _F(t,{},async()=>{const n=Fp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=NF(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",EF.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function pR(t,e){return Il(t,"POST","/v2/accounts:revokeToken",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ot(e.length!==0,"internal-error");const r=E5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await fR(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new fd;return n&&(Ot(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ot(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ot(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fd,this.toJSON())}_performRefresh(){return Bo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t,e){Ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Co{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=gb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await tp(this,this.stsTokenManager.getToken(this.auth,e));return Ot(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return lR(this,e)}reload(){return dR(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Co(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await F0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qa(this.auth.app))return Promise.reject(Fo(this.auth));const e=await this.getIdToken();return await tp(this,AR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,b=(a=r.photoURL)!==null&&a!==void 0?a:void 0,B=(o=r.tenantId)!==null&&o!==void 0?o:void 0,_=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:N,emailVerified:O,isAnonymous:R,providerData:M,stsTokenManager:F}=r;Ot(N&&F,e,"internal-error");const E=fd.fromJSON(this.name,F);Ot(typeof N=="string",e,"internal-error"),BA(h,e.name),BA(m,e.name),Ot(typeof O=="boolean",e,"internal-error"),Ot(typeof R=="boolean",e,"internal-error"),BA(p,e.name),BA(b,e.name),BA(B,e.name),BA(_,e.name),BA(y,e.name),BA(w,e.name);const L=new Co({uid:N,auth:e,email:m,emailVerified:O,displayName:h,isAnonymous:R,photoURL:b,phoneNumber:p,tenantId:B,stsTokenManager:E,createdAt:y,lastLoginAt:w});return M&&Array.isArray(M)&&(L.providerData=M.map(D=>Object.assign({},D))),_&&(L._redirectEventId=_),L}static async _fromIdTokenResponse(e,r,n=!1){const s=new fd;s.updateFromServerResponse(r);const i=new Co({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await F0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ot(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new fd;o.updateFromIdToken(n);const l=new Co({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new i2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new Map;function Eo(t){Oo(t instanceof Function,"Expected a class definition");let e=_5.get(t);return e?(Oo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}FF.type="NONE";const N5=FF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e,r){return`firebase:${t}:${e}:${r}`}class pd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Mg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mg("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Co._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new pd(Eo(N5),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Eo(N5);const a=Mg(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const h=Co._fromJSON(e,u);c!==i&&(o=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pd(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new pd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jF(e))return"Blackberry";if(kF(e))return"Webos";if(UF(e))return"Safari";if((e.includes("chrome/")||PF(e))&&!e.includes("edge/"))return"Chrome";if(LF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function TF(t=Ln()){return/firefox\//i.test(t)}function UF(t=Ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PF(t=Ln()){return/crios\//i.test(t)}function QF(t=Ln()){return/iemobile/i.test(t)}function LF(t=Ln()){return/android/i.test(t)}function jF(t=Ln()){return/blackberry/i.test(t)}function kF(t=Ln()){return/webos/i.test(t)}function xb(t=Ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mR(t=Ln()){var e;return xb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gR(){return Lk()&&document.documentMode===10}function DF(t=Ln()){return xb(t)||LF(t)||kF(t)||jF(t)||/windows phone/i.test(t)||QF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e=[]){let r;switch(t){case"Browser":r=I5(Ln());break;case"Worker":r=`${I5(Ln())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Il(t,"GET","/v2/passwordPolicy",Nl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class xR{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:yR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S5(this),this.idTokenSubscription=new S5(this),this.beforeStateQueue=new vR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Eo(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await pd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await IF(this,{idToken:e}),n=await Co._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Qa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await F0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qa(this.app))return Promise.reject(Fo(this));const r=e?cn(e):null;return r&&Ot(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qa(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qa(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),r=new xR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await pR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Eo(e)||this._popupRedirectResolver;Ot(r,this,"argument-error"),this.redirectPersistenceManager=await pd.create(this,[Eo(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&YD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Vc(t){return cn(t)}class S5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(r=>this.observer=r)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BR(t){Nv=t}function MF(t){return Nv.loadJS(t)}function CR(){return Nv.recaptchaEnterpriseScript}function ER(){return Nv.gapiScript}function _R(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const NR="recaptcha-enterprise",IR="NO_RECAPTCHA";class SR{constructor(e){this.type=NR,this.auth=Vc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{oR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new aR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;C5(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(IR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&C5(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CR();l.length!==0&&(l+=o),MF(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function F5(t,e,r,n=!1){const s=new SR(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function a2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await F5(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F5(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){const r=fb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(I0(i,e??{}))return s;la(s,"already-initialized")}return r.initialize({options:e})}function TR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function UR(t,e,r){const n=Vc(t);Ot(n._canInitEmulator,n,"emulator-config-failed"),Ot(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=OF(e),{host:a,port:o}=PR(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),QR()}function OF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PR(t){const e=OF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:T5(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:T5(a)}}}function T5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Bo("not implemented")}_getIdTokenResponse(e){return Bo("not implemented")}_linkToIdToken(e,r){return Bo("not implemented")}_getReauthenticationResolver(e){return Bo("not implemented")}}async function LR(t,e){return Il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Up(t,"POST","/v1/accounts:signInWithPassword",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}async function DR(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends bb{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new rp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new rp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(e,r,"signInWithPassword",jR);case"emailLink":return kR(e,{email:this._email,oobCode:this._password});default:la(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(e,n,"signUpPassword",LR);case"emailLink":return DR(e,{idToken:r,email:this._email,oobCode:this._password});default:la(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t,e){return Up(t,"POST","/v1/accounts:signInWithIdp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="http://localhost";class Pc extends bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):la("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=gb(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Pc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return md(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,md(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,md(e,r)}buildRequest(){const e={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OR(t){const e=Wh(Xh(t)).link,r=e?Wh(Xh(e)).deep_link_id:null,n=Wh(Xh(t)).deep_link_id;return(n?Wh(Xh(n)).link:null)||n||r||e||t}class Bb{constructor(e){var r,n,s,i,a,o;const l=Wh(Xh(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,h=MR((s=l.mode)!==null&&s!==void 0?s:null);Ot(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=OR(e);try{return new Bb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.providerId=Kd.PROVIDER_ID}static credential(e,r){return rp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Bb.parseLink(r);return Ot(n,"argument-error"),rp._fromEmailAndCode(e,n.code,n.tenantId)}}Kd.PROVIDER_ID="password";Kd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends HF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Pp{constructor(){super("facebook.com")}static credential(e){return Pc._fromParams({providerId:jA.PROVIDER_ID,signInMethod:jA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jA.credentialFromTaggedObject(e)}static credentialFromError(e){return jA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jA.credential(e.oauthAccessToken)}catch{return null}}}jA.FACEBOOK_SIGN_IN_METHOD="facebook.com";jA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Pp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pc._fromParams({providerId:kA.PROVIDER_ID,signInMethod:kA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return kA.credentialFromTaggedObject(e)}static credentialFromError(e){return kA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return kA.credential(r,n)}catch{return null}}}kA.GOOGLE_SIGN_IN_METHOD="google.com";kA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Pp{constructor(){super("github.com")}static credential(e){return Pc._fromParams({providerId:DA.PROVIDER_ID,signInMethod:DA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return DA.credentialFromTaggedObject(e)}static credentialFromError(e){return DA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return DA.credential(e.oauthAccessToken)}catch{return null}}}DA.GITHUB_SIGN_IN_METHOD="github.com";DA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends Pp{constructor(){super("twitter.com")}static credential(e,r){return Pc._fromParams({providerId:RA.PROVIDER_ID,signInMethod:RA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return RA.credentialFromTaggedObject(e)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return RA.credential(r,n)}catch{return null}}}RA.TWITTER_SIGN_IN_METHOD="twitter.com";RA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return Up(t,"POST","/v1/accounts:signUp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Co._fromIdTokenResponse(e,n,s),a=U5(n);return new Qc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=U5(n);return new Qc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function U5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends qo{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,T0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new T0(e,r,n,s)}}function VF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?T0._fromErrorAndOperation(t,i,e,n):i})}async function VR(t,e,r=!1){const n=await tp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Qc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e,r=!1){const{auth:n}=t;if(Qa(n.app))return Promise.reject(Fo(n));const s="reauthenticate";try{const i=await tp(t,VF(n,s,e,t),r);Ot(i.idToken,n,"internal-error");const a=yb(i.idToken);Ot(a,n,"internal-error");const{sub:o}=a;return Ot(t.uid===o,n,"user-mismatch"),Qc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&la(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n="signIn",s=await VF(t,n,e),i=await Qc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function qR(t,e){return KF(Vc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t){const e=Vc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GR(t,e,r){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),a=await a2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qF(t),l}),o=await Qc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function zR(t,e,r){return Qa(t.app)?Promise.reject(Fo(t)):qR(cn(t),Kd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qF(t),n})}function $R(t,e,r,n){return cn(t).onIdTokenChanged(e,r,n)}function WR(t,e,r){return cn(t).beforeAuthStateChanged(e,r)}function GF(t,e,r,n){return cn(t).onAuthStateChanged(e,r,n)}function zF(t){return cn(t).signOut()}const U0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(U0,"1"),this.storage.removeItem(U0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,JR=10;class WF extends $F{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);gR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}WF.type="LOCAL";const YR=WF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF extends $F{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XF.type="SESSION";const JF=XF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Iv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await ZR(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Cb("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){return window}function t6(t){Oa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){return typeof Oa().WorkerGlobalScope<"u"&&typeof Oa().importScripts=="function"}async function r6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s6(){return YF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="firebaseLocalStorageDb",i6=1,P0="firebaseLocalStorage",e4="fbase_key";class Qp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Sv(t,e){return t.transaction([P0],e?"readwrite":"readonly").objectStore(P0)}function a6(){const t=indexedDB.deleteDatabase(ZF);return new Qp(t).toPromise()}function o2(){const t=indexedDB.open(ZF,i6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(P0,{keyPath:e4})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(P0)?e(n):(n.close(),await a6(),e(await o2()))})})}async function P5(t,e,r){const n=Sv(t,!0).put({[e4]:e,value:r});return new Qp(n).toPromise()}async function o6(t,e){const r=Sv(t,!1).get(e),n=await new Qp(r).toPromise();return n===void 0?null:n.value}function Q5(t,e){const r=Sv(t,!0).delete(e);return new Qp(r).toPromise()}const A6=800,l6=3;class t4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await o2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>l6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iv._getInstance(s6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await r6(),!this.activeServiceWorker)return;this.sender=new e6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await o2();return await P5(e,U0,"1"),await Q5(e,U0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>P5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>o6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sv(s,!1).getAll();return new Qp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t4.type="LOCAL";const c6=t4;new Tp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t,e){return e?Eo(e):(Ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return md(e,this._buildIdpRequest())}_linkToIdToken(e,r){return md(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return md(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function d6(t){return KF(t.auth,new Eb(t),t.bypassAuthState)}function h6(t){const{auth:e,user:r}=t;return Ot(r,e,"internal-error"),KR(r,new Eb(t),t.bypassAuthState)}async function f6(t){const{auth:e,user:r}=t;return Ot(r,e,"internal-error"),VR(r,new Eb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d6;case"linkViaPopup":case"linkViaRedirect":return f6;case"reauthViaPopup":case"reauthViaRedirect":return h6;default:la(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new Tp(2e3,1e4);class ad extends r4{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ad.currentPopupAction&&ad.currentPopupAction.cancel(),ad.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){Oo(this.filter.length===1,"Popup operations only handle one event");const e=Cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ad.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p6.get())};e()}}ad.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="pendingRedirect",Og=new Map;class g6 extends r4{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Og.get(this.auth._key());if(!e){try{const n=await v6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Og.set(this.auth._key(),e)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v6(t,e){const r=x6(e),n=y6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function w6(t,e){Og.set(t._key(),e)}function y6(t){return Eo(t._redirectPersistence)}function x6(t){return Mg(m6,t.config.apiKey,t.name)}async function b6(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),s=u6(n,e),a=await new g6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=10*60*1e3;class C6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!n4(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ma(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B6&&this.cachedEventUids.clear(),this.cachedEventUids.has(L5(e))}saveEventToCache(e){this.cachedEventUids.add(L5(e)),this.lastProcessedEventTime=Date.now()}}function L5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e={}){return Il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I6=/^https?/;async function S6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _6(t);for(const r of e)try{if(F6(r))return}catch{}la(t,"unauthorized-domain")}function F6(t){const e=s2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!I6.test(r))return!1;if(N6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=new Tp(3e4,6e4);function j5(){const t=Oa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function U6(t){return new Promise((e,r)=>{var n,s,i;function a(){j5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j5(),r(Ma(t,"network-request-failed"))},timeout:T6.get()})}if(!((s=(n=Oa().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Oa().gapi)===null||i===void 0)&&i.load)a();else{const o=_R("iframefcb");return Oa()[o]=()=>{gapi.load?a():r(Ma(t,"network-request-failed"))},MF(`${ER()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Hg=null,e})}let Hg=null;function P6(t){return Hg=Hg||U6(t),Hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Tp(5e3,15e3),L6="__/auth/iframe",j6="emulator/auth/iframe",k6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R6(t){const e=t.config;Ot(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?wb(e,j6):`https://${t.config.authDomain}/${L6}`,n={apiKey:e.apiKey,appName:t.name,v:Vd},s=D6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Fp(n).slice(1)}`}async function M6(t){const e=await P6(t),r=Oa().gapi;return Ot(r,t,"internal-error"),e.open({where:document.body,url:R6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Ma(t,"network-request-failed"),o=Oa().setTimeout(()=>{i(a)},Q6.get());function l(){Oa().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H6=500,V6=600,K6="_blank",q6="http://localhost";class k5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G6(t,e,r,n=H6,s=V6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},O6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=Ln().toLowerCase();r&&(o=PF(c)?K6:r),TF(c)&&(e=e||q6,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,b])=>`${m}${p}=${b},`,"");if(mR(c)&&o!=="_self")return z6(e||"",o),new k5(null);const h=window.open(e||"",o,u);Ot(h,t,"popup-blocked");try{h.focus()}catch{}return new k5(h)}function z6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="__/auth/handler",W6="emulator/auth/handler",X6=encodeURIComponent("fac");async function D5(t,e,r,n,s,i){Ot(t.config.authDomain,t,"auth-domain-config-required"),Ot(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Vd,eventId:s};if(e instanceof HF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Mk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))a[u]=h}if(e instanceof Pp){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${X6}=${encodeURIComponent(l)}`:"";return`${J6(t)}?${Fp(o).slice(1)}${c}`}function J6({config:t}){return t.emulator?wb(t,W6):`https://${t.authDomain}/${$6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="webStorageSupport";class Y6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JF,this._completeRedirectFn=b6,this._overrideRedirectResult=w6}async _openPopup(e,r,n,s){var i;Oo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await D5(e,r,n,s2(),s);return G6(e,a,Cb())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await D5(e,r,n,s2(),s);return t6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Oo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M6(e),n=new C6(e);return r.register("authEvent",s=>(Ot(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(my,{type:my},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[my];a!==void 0&&r(!!a),la(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=S6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return DF()||UF()||xb()}}const Z6=Y6;var R5="@firebase/auth",M5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rM(t){Nd(new Uc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Ot(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RF(t)},c=new bR(n,s,i,l);return TR(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nd(new Uc("auth-internal",e=>{const r=Vc(e.getProvider("auth").getImmediate());return(n=>new eM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),al(R5,M5,tM(t)),al(R5,M5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=5*60,sM=pF("authIdTokenMaxAge")||nM;let O5=null;const iM=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>sM)return;const s=r==null?void 0:r.token;O5!==s&&(O5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function s4(t=mb()){const e=fb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=FR(t,{popupRedirectResolver:Z6,persistence:[c6,YR,JF]}),n=pF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=iM(i.toString());WR(r,a,()=>a(r.currentUser)),$R(r,o=>a(o))}}const s=hF("auth");return s&&UR(r,`http://${s}`),r}function aM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BR({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ma("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",aM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rM("Browser");var oM="firebase",AM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */al(oM,AM,"app");var H5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yc,i4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,E){function L(){}L.prototype=E.prototype,F.D=E.prototype,F.prototype=new L,F.prototype.constructor=F,F.C=function(D,I,U){for(var T=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)T[ee-2]=arguments[ee];return E.prototype[I].apply(D,T)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(F,E,L){L||(L=0);var D=Array(16);if(typeof E=="string")for(var I=0;16>I;++I)D[I]=E.charCodeAt(L++)|E.charCodeAt(L++)<<8|E.charCodeAt(L++)<<16|E.charCodeAt(L++)<<24;else for(I=0;16>I;++I)D[I]=E[L++]|E[L++]<<8|E[L++]<<16|E[L++]<<24;E=F.g[0],L=F.g[1],I=F.g[2];var U=F.g[3],T=E+(U^L&(I^U))+D[0]+3614090360&4294967295;E=L+(T<<7&4294967295|T>>>25),T=U+(I^E&(L^I))+D[1]+3905402710&4294967295,U=E+(T<<12&4294967295|T>>>20),T=I+(L^U&(E^L))+D[2]+606105819&4294967295,I=U+(T<<17&4294967295|T>>>15),T=L+(E^I&(U^E))+D[3]+3250441966&4294967295,L=I+(T<<22&4294967295|T>>>10),T=E+(U^L&(I^U))+D[4]+4118548399&4294967295,E=L+(T<<7&4294967295|T>>>25),T=U+(I^E&(L^I))+D[5]+1200080426&4294967295,U=E+(T<<12&4294967295|T>>>20),T=I+(L^U&(E^L))+D[6]+2821735955&4294967295,I=U+(T<<17&4294967295|T>>>15),T=L+(E^I&(U^E))+D[7]+4249261313&4294967295,L=I+(T<<22&4294967295|T>>>10),T=E+(U^L&(I^U))+D[8]+1770035416&4294967295,E=L+(T<<7&4294967295|T>>>25),T=U+(I^E&(L^I))+D[9]+2336552879&4294967295,U=E+(T<<12&4294967295|T>>>20),T=I+(L^U&(E^L))+D[10]+4294925233&4294967295,I=U+(T<<17&4294967295|T>>>15),T=L+(E^I&(U^E))+D[11]+2304563134&4294967295,L=I+(T<<22&4294967295|T>>>10),T=E+(U^L&(I^U))+D[12]+1804603682&4294967295,E=L+(T<<7&4294967295|T>>>25),T=U+(I^E&(L^I))+D[13]+4254626195&4294967295,U=E+(T<<12&4294967295|T>>>20),T=I+(L^U&(E^L))+D[14]+2792965006&4294967295,I=U+(T<<17&4294967295|T>>>15),T=L+(E^I&(U^E))+D[15]+1236535329&4294967295,L=I+(T<<22&4294967295|T>>>10),T=E+(I^U&(L^I))+D[1]+4129170786&4294967295,E=L+(T<<5&4294967295|T>>>27),T=U+(L^I&(E^L))+D[6]+3225465664&4294967295,U=E+(T<<9&4294967295|T>>>23),T=I+(E^L&(U^E))+D[11]+643717713&4294967295,I=U+(T<<14&4294967295|T>>>18),T=L+(U^E&(I^U))+D[0]+3921069994&4294967295,L=I+(T<<20&4294967295|T>>>12),T=E+(I^U&(L^I))+D[5]+3593408605&4294967295,E=L+(T<<5&4294967295|T>>>27),T=U+(L^I&(E^L))+D[10]+38016083&4294967295,U=E+(T<<9&4294967295|T>>>23),T=I+(E^L&(U^E))+D[15]+3634488961&4294967295,I=U+(T<<14&4294967295|T>>>18),T=L+(U^E&(I^U))+D[4]+3889429448&4294967295,L=I+(T<<20&4294967295|T>>>12),T=E+(I^U&(L^I))+D[9]+568446438&4294967295,E=L+(T<<5&4294967295|T>>>27),T=U+(L^I&(E^L))+D[14]+3275163606&4294967295,U=E+(T<<9&4294967295|T>>>23),T=I+(E^L&(U^E))+D[3]+4107603335&4294967295,I=U+(T<<14&4294967295|T>>>18),T=L+(U^E&(I^U))+D[8]+1163531501&4294967295,L=I+(T<<20&4294967295|T>>>12),T=E+(I^U&(L^I))+D[13]+2850285829&4294967295,E=L+(T<<5&4294967295|T>>>27),T=U+(L^I&(E^L))+D[2]+4243563512&4294967295,U=E+(T<<9&4294967295|T>>>23),T=I+(E^L&(U^E))+D[7]+1735328473&4294967295,I=U+(T<<14&4294967295|T>>>18),T=L+(U^E&(I^U))+D[12]+2368359562&4294967295,L=I+(T<<20&4294967295|T>>>12),T=E+(L^I^U)+D[5]+4294588738&4294967295,E=L+(T<<4&4294967295|T>>>28),T=U+(E^L^I)+D[8]+2272392833&4294967295,U=E+(T<<11&4294967295|T>>>21),T=I+(U^E^L)+D[11]+1839030562&4294967295,I=U+(T<<16&4294967295|T>>>16),T=L+(I^U^E)+D[14]+4259657740&4294967295,L=I+(T<<23&4294967295|T>>>9),T=E+(L^I^U)+D[1]+2763975236&4294967295,E=L+(T<<4&4294967295|T>>>28),T=U+(E^L^I)+D[4]+1272893353&4294967295,U=E+(T<<11&4294967295|T>>>21),T=I+(U^E^L)+D[7]+4139469664&4294967295,I=U+(T<<16&4294967295|T>>>16),T=L+(I^U^E)+D[10]+3200236656&4294967295,L=I+(T<<23&4294967295|T>>>9),T=E+(L^I^U)+D[13]+681279174&4294967295,E=L+(T<<4&4294967295|T>>>28),T=U+(E^L^I)+D[0]+3936430074&4294967295,U=E+(T<<11&4294967295|T>>>21),T=I+(U^E^L)+D[3]+3572445317&4294967295,I=U+(T<<16&4294967295|T>>>16),T=L+(I^U^E)+D[6]+76029189&4294967295,L=I+(T<<23&4294967295|T>>>9),T=E+(L^I^U)+D[9]+3654602809&4294967295,E=L+(T<<4&4294967295|T>>>28),T=U+(E^L^I)+D[12]+3873151461&4294967295,U=E+(T<<11&4294967295|T>>>21),T=I+(U^E^L)+D[15]+530742520&4294967295,I=U+(T<<16&4294967295|T>>>16),T=L+(I^U^E)+D[2]+3299628645&4294967295,L=I+(T<<23&4294967295|T>>>9),T=E+(I^(L|~U))+D[0]+4096336452&4294967295,E=L+(T<<6&4294967295|T>>>26),T=U+(L^(E|~I))+D[7]+1126891415&4294967295,U=E+(T<<10&4294967295|T>>>22),T=I+(E^(U|~L))+D[14]+2878612391&4294967295,I=U+(T<<15&4294967295|T>>>17),T=L+(U^(I|~E))+D[5]+4237533241&4294967295,L=I+(T<<21&4294967295|T>>>11),T=E+(I^(L|~U))+D[12]+1700485571&4294967295,E=L+(T<<6&4294967295|T>>>26),T=U+(L^(E|~I))+D[3]+2399980690&4294967295,U=E+(T<<10&4294967295|T>>>22),T=I+(E^(U|~L))+D[10]+4293915773&4294967295,I=U+(T<<15&4294967295|T>>>17),T=L+(U^(I|~E))+D[1]+2240044497&4294967295,L=I+(T<<21&4294967295|T>>>11),T=E+(I^(L|~U))+D[8]+1873313359&4294967295,E=L+(T<<6&4294967295|T>>>26),T=U+(L^(E|~I))+D[15]+4264355552&4294967295,U=E+(T<<10&4294967295|T>>>22),T=I+(E^(U|~L))+D[6]+2734768916&4294967295,I=U+(T<<15&4294967295|T>>>17),T=L+(U^(I|~E))+D[13]+1309151649&4294967295,L=I+(T<<21&4294967295|T>>>11),T=E+(I^(L|~U))+D[4]+4149444226&4294967295,E=L+(T<<6&4294967295|T>>>26),T=U+(L^(E|~I))+D[11]+3174756917&4294967295,U=E+(T<<10&4294967295|T>>>22),T=I+(E^(U|~L))+D[2]+718787259&4294967295,I=U+(T<<15&4294967295|T>>>17),T=L+(U^(I|~E))+D[9]+3951481745&4294967295,F.g[0]=F.g[0]+E&4294967295,F.g[1]=F.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,F.g[2]=F.g[2]+I&4294967295,F.g[3]=F.g[3]+U&4294967295}n.prototype.u=function(F,E){E===void 0&&(E=F.length);for(var L=E-this.blockSize,D=this.B,I=this.h,U=0;U<E;){if(I==0)for(;U<=L;)s(this,F,U),U+=this.blockSize;if(typeof F=="string"){for(;U<E;)if(D[I++]=F.charCodeAt(U++),I==this.blockSize){s(this,D),I=0;break}}else for(;U<E;)if(D[I++]=F[U++],I==this.blockSize){s(this,D),I=0;break}}this.h=I,this.o+=E},n.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var E=1;E<F.length-8;++E)F[E]=0;var L=8*this.o;for(E=F.length-8;E<F.length;++E)F[E]=L&255,L/=256;for(this.u(F),F=Array(16),E=L=0;4>E;++E)for(var D=0;32>D;D+=8)F[L++]=this.g[E]>>>D&255;return F};function i(F,E){var L=o;return Object.prototype.hasOwnProperty.call(L,F)?L[F]:L[F]=E(F)}function a(F,E){this.h=E;for(var L=[],D=!0,I=F.length-1;0<=I;I--){var U=F[I]|0;D&&U==E||(L[I]=U,D=!1)}this.g=L}var o={};function l(F){return-128<=F&&128>F?i(F,function(E){return new a([E|0],0>E?-1:0)}):new a([F|0],0>F?-1:0)}function c(F){if(isNaN(F)||!isFinite(F))return h;if(0>F)return _(c(-F));for(var E=[],L=1,D=0;F>=L;D++)E[D]=F/L|0,L*=4294967296;return new a(E,0)}function u(F,E){if(F.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(F.charAt(0)=="-")return _(u(F.substring(1),E));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=c(Math.pow(E,8)),D=h,I=0;I<F.length;I+=8){var U=Math.min(8,F.length-I),T=parseInt(F.substring(I,I+U),E);8>U?(U=c(Math.pow(E,U)),D=D.j(U).add(c(T))):(D=D.j(L),D=D.add(c(T)))}return D}var h=l(0),m=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(B(this))return-_(this).m();for(var F=0,E=1,L=0;L<this.g.length;L++){var D=this.i(L);F+=(0<=D?D:4294967296+D)*E,E*=4294967296}return F},t.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(b(this))return"0";if(B(this))return"-"+_(this).toString(F);for(var E=c(Math.pow(F,6)),L=this,D="";;){var I=O(L,E).g;L=y(L,I.j(E));var U=((0<L.g.length?L.g[0]:L.h)>>>0).toString(F);if(L=I,b(L))return U+D;for(;6>U.length;)U="0"+U;D=U+D}},t.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function b(F){if(F.h!=0)return!1;for(var E=0;E<F.g.length;E++)if(F.g[E]!=0)return!1;return!0}function B(F){return F.h==-1}t.l=function(F){return F=y(this,F),B(F)?-1:b(F)?0:1};function _(F){for(var E=F.g.length,L=[],D=0;D<E;D++)L[D]=~F.g[D];return new a(L,~F.h).add(m)}t.abs=function(){return B(this)?_(this):this},t.add=function(F){for(var E=Math.max(this.g.length,F.g.length),L=[],D=0,I=0;I<=E;I++){var U=D+(this.i(I)&65535)+(F.i(I)&65535),T=(U>>>16)+(this.i(I)>>>16)+(F.i(I)>>>16);D=T>>>16,U&=65535,T&=65535,L[I]=T<<16|U}return new a(L,L[L.length-1]&-2147483648?-1:0)};function y(F,E){return F.add(_(E))}t.j=function(F){if(b(this)||b(F))return h;if(B(this))return B(F)?_(this).j(_(F)):_(_(this).j(F));if(B(F))return _(this.j(_(F)));if(0>this.l(p)&&0>F.l(p))return c(this.m()*F.m());for(var E=this.g.length+F.g.length,L=[],D=0;D<2*E;D++)L[D]=0;for(D=0;D<this.g.length;D++)for(var I=0;I<F.g.length;I++){var U=this.i(D)>>>16,T=this.i(D)&65535,ee=F.i(I)>>>16,le=F.i(I)&65535;L[2*D+2*I]+=T*le,w(L,2*D+2*I),L[2*D+2*I+1]+=U*le,w(L,2*D+2*I+1),L[2*D+2*I+1]+=T*ee,w(L,2*D+2*I+1),L[2*D+2*I+2]+=U*ee,w(L,2*D+2*I+2)}for(D=0;D<E;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=E;D<2*E;D++)L[D]=0;return new a(L,0)};function w(F,E){for(;(F[E]&65535)!=F[E];)F[E+1]+=F[E]>>>16,F[E]&=65535,E++}function N(F,E){this.g=F,this.h=E}function O(F,E){if(b(E))throw Error("division by zero");if(b(F))return new N(h,h);if(B(F))return E=O(_(F),E),new N(_(E.g),_(E.h));if(B(E))return E=O(F,_(E)),new N(_(E.g),E.h);if(30<F.g.length){if(B(F)||B(E))throw Error("slowDivide_ only works with positive integers.");for(var L=m,D=E;0>=D.l(F);)L=R(L),D=R(D);var I=M(L,1),U=M(D,1);for(D=M(D,2),L=M(L,2);!b(D);){var T=U.add(D);0>=T.l(F)&&(I=I.add(L),U=T),D=M(D,1),L=M(L,1)}return E=y(F,I.j(E)),new N(I,E)}for(I=h;0<=F.l(E);){for(L=Math.max(1,Math.floor(F.m()/E.m())),D=Math.ceil(Math.log(L)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),U=c(L),T=U.j(E);B(T)||0<T.l(F);)L-=D,U=c(L),T=U.j(E);b(U)&&(U=m),I=I.add(U),F=y(F,T)}return new N(I,F)}t.A=function(F){return O(this,F).h},t.and=function(F){for(var E=Math.max(this.g.length,F.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)&F.i(D);return new a(L,this.h&F.h)},t.or=function(F){for(var E=Math.max(this.g.length,F.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)|F.i(D);return new a(L,this.h|F.h)},t.xor=function(F){for(var E=Math.max(this.g.length,F.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)^F.i(D);return new a(L,this.h^F.h)};function R(F){for(var E=F.g.length+1,L=[],D=0;D<E;D++)L[D]=F.i(D)<<1|F.i(D-1)>>>31;return new a(L,F.h)}function M(F,E){var L=E>>5;E%=32;for(var D=F.g.length-L,I=[],U=0;U<D;U++)I[U]=0<E?F.i(U+L)>>>E|F.i(U+L+1)<<32-E:F.i(U+L);return new a(I,F.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,i4=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,yc=a}).apply(typeof H5<"u"?H5:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a4,Jh,o4,Vg,A2,A4,l4,c4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,j){return f==Array.prototype||f==Object.prototype||(f[C]=j.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var C=0;C<f.length;++C){var j=f[C];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function s(f,C){if(C)e:{var j=n;f=f.split(".");for(var J=0;J<f.length-1;J++){var we=f[J];if(!(we in j))break e;j=j[we]}f=f[f.length-1],J=j[f],C=C(J),C!=J&&C!=null&&e(j,f,{configurable:!0,writable:!0,value:C})}}function i(f,C){f instanceof String&&(f+="");var j=0,J=!1,we={next:function(){if(!J&&j<f.length){var Se=j++;return{value:C(Se,f[Se]),done:!1}}return J=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}s("Array.prototype.values",function(f){return f||function(){return i(this,function(C,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function c(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function u(f,C,j){return f.call.apply(f.bind,arguments)}function h(f,C,j){if(!f)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,J),f.apply(C,we)}}return function(){return f.apply(C,arguments)}}function m(f,C,j){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function p(f,C){var j=Array.prototype.slice.call(arguments,1);return function(){var J=j.slice();return J.push.apply(J,arguments),f.apply(this,J)}}function b(f,C){function j(){}j.prototype=C.prototype,f.aa=C.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(J,we,Se){for(var Ye=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Ye[qt-2]=arguments[qt];return C.prototype[we].apply(J,Ye)}}function B(f){const C=f.length;if(0<C){const j=Array(C);for(let J=0;J<C;J++)j[J]=f[J];return j}return[]}function _(f,C){for(let j=1;j<arguments.length;j++){const J=arguments[j];if(l(J)){const we=f.length||0,Se=J.length||0;f.length=we+Se;for(let Ye=0;Ye<Se;Ye++)f[we+Ye]=J[Ye]}else f.push(J)}}class y{constructor(C,j){this.i=C,this.j=j,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function w(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var R=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(f,C,j){for(const J in f)C.call(j,f[J],J,f)}function F(f,C){for(const j in f)C.call(void 0,f[j],j,f)}function E(f){const C={};for(const j in f)C[j]=f[j];return C}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,C){let j,J;for(let we=1;we<arguments.length;we++){J=arguments[we];for(j in J)f[j]=J[j];for(let Se=0;Se<L.length;Se++)j=L[Se],Object.prototype.hasOwnProperty.call(J,j)&&(f[j]=J[j])}}function I(f){var C=1;f=f.split(":");const j=[];for(;0<C&&f.length;)j.push(f.shift()),C--;return f.length&&j.push(f.join(":")),j}function U(f){o.setTimeout(()=>{throw f},0)}function T(){var f=ce;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class ee{constructor(){this.h=this.g=null}add(C,j){const J=le.get();J.set(C,j),this.h?this.h.next=J:this.g=J,this.h=J}}var le=new y(()=>new re,f=>f.reset());class re{constructor(){this.next=this.g=this.h=null}set(C,j){this.h=C,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,W=!1,ce=new ee,ie=()=>{const f=o.Promise.resolve(void 0);ue=()=>{f.then(Ee)}};var Ee=()=>{for(var f;f=T();){try{f.h.call(f.g)}catch(j){U(j)}var C=le;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}W=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};o.addEventListener("test",j,C),o.removeEventListener("test",j,C)}catch{}return f}();function te(f,C){if(k.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,J=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(R){e:{try{O(C.nodeName);var we=!0;break e}catch{}we=!1}we||(C=null)}}else j=="mouseover"?C=f.fromElement:j=="mouseout"&&(C=f.toElement);this.relatedTarget=C,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:$[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&te.aa.h.call(this)}}b(te,k);var $={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),X=0;function de(f,C,j,J,we){this.listener=f,this.proxy=null,this.src=C,this.type=j,this.capture=!!J,this.ha=we,this.key=++X,this.da=this.fa=!1}function ge(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ce(f){this.src=f,this.g={},this.h=0}Ce.prototype.add=function(f,C,j,J,we){var Se=f.toString();f=this.g[Se],f||(f=this.g[Se]=[],this.h++);var Ye=Te(f,C,J,we);return-1<Ye?(C=f[Ye],j||(C.fa=!1)):(C=new de(C,this.src,Se,!!J,we),C.fa=j,f.push(C)),C};function Ue(f,C){var j=C.type;if(j in f.g){var J=f.g[j],we=Array.prototype.indexOf.call(J,C,void 0),Se;(Se=0<=we)&&Array.prototype.splice.call(J,we,1),Se&&(ge(C),f.g[j].length==0&&(delete f.g[j],f.h--))}}function Te(f,C,j,J){for(var we=0;we<f.length;++we){var Se=f[we];if(!Se.da&&Se.listener==C&&Se.capture==!!j&&Se.ha==J)return we}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),oe={};function G(f,C,j,J,we){if(Array.isArray(C)){for(var Se=0;Se<C.length;Se++)G(f,C[Se],j,J,we);return null}return j=Ge(j),f&&f[ne]?f.K(C,j,c(J)?!!J.capture:!1,we):Me(f,C,j,!1,J,we)}function Me(f,C,j,J,we,Se){if(!C)throw Error("Invalid event type");var Ye=c(we)?!!we.capture:!!we,qt=nt(f);if(qt||(f[ae]=qt=new Ce(f)),j=qt.add(C,j,J,Ye,Se),j.proxy)return j;if(J=ke(),j.proxy=J,J.src=f,J.listener=j,f.addEventListener)z||(we=Ye),we===void 0&&(we=!1),f.addEventListener(C.toString(),J,we);else if(f.attachEvent)f.attachEvent(We(C.toString()),J);else if(f.addListener&&f.removeListener)f.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return j}function ke(){function f(j){return C.call(f.src,f.listener,j)}const C=ze;return f}function Qe(f,C,j,J,we){if(Array.isArray(C))for(var Se=0;Se<C.length;Se++)Qe(f,C[Se],j,J,we);else J=c(J)?!!J.capture:!!J,j=Ge(j),f&&f[ne]?(f=f.i,C=String(C).toString(),C in f.g&&(Se=f.g[C],j=Te(Se,j,J,we),-1<j&&(ge(Se[j]),Array.prototype.splice.call(Se,j,1),Se.length==0&&(delete f.g[C],f.h--)))):f&&(f=nt(f))&&(C=f.g[C.toString()],f=-1,C&&(f=Te(C,j,J,we)),(j=-1<f?C[f]:null)&&je(j))}function je(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[ne])Ue(C.i,f);else{var j=f.type,J=f.proxy;C.removeEventListener?C.removeEventListener(j,J,f.capture):C.detachEvent?C.detachEvent(We(j),J):C.addListener&&C.removeListener&&C.removeListener(J),(j=nt(C))?(Ue(j,f),j.h==0&&(j.src=null,C[ae]=null)):ge(f)}}}function We(f){return f in oe?oe[f]:oe[f]="on"+f}function ze(f,C){if(f.da)f=!0;else{C=new te(C,this);var j=f.listener,J=f.ha||f.src;f.fa&&je(f),f=j.call(J,C)}return f}function nt(f){return f=f[ae],f instanceof Ce?f:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(f){return typeof f=="function"?f:(f[xe]||(f[xe]=function(C){return f.handleEvent(C)}),f[xe])}function $e(){P.call(this),this.i=new Ce(this),this.M=this,this.F=null}b($e,P),$e.prototype[ne]=!0,$e.prototype.removeEventListener=function(f,C,j,J){Qe(this,f,C,j,J)};function tt(f,C){var j,J=f.F;if(J)for(j=[];J;J=J.F)j.push(J);if(f=f.M,J=C.type||C,typeof C=="string")C=new k(C,f);else if(C instanceof k)C.target=C.target||f;else{var we=C;C=new k(J,f),D(C,we)}if(we=!0,j)for(var Se=j.length-1;0<=Se;Se--){var Ye=C.g=j[Se];we=ct(Ye,J,!0,C)&&we}if(Ye=C.g=f,we=ct(Ye,J,!0,C)&&we,we=ct(Ye,J,!1,C)&&we,j)for(Se=0;Se<j.length;Se++)Ye=C.g=j[Se],we=ct(Ye,J,!1,C)&&we}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var j=f.g[C],J=0;J<j.length;J++)ge(j[J]);delete f.g[C],f.h--}}this.F=null},$e.prototype.K=function(f,C,j,J){return this.i.add(String(f),C,!1,j,J)},$e.prototype.L=function(f,C,j,J){return this.i.add(String(f),C,!0,j,J)};function ct(f,C,j,J){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var we=!0,Se=0;Se<C.length;++Se){var Ye=C[Se];if(Ye&&!Ye.da&&Ye.capture==j){var qt=Ye.listener,rr=Ye.ha||Ye.src;Ye.fa&&Ue(f.i,Ye),we=qt.call(rr,J)!==!1&&we}}return we&&!J.defaultPrevented}function At(f,C,j){if(typeof f=="function")j&&(f=m(f,j));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(f,C||0)}function he(f){f.g=At(()=>{f.g=null,f.i&&(f.i=!1,he(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class _e extends P{constructor(C,j){super(),this.m=C,this.l=j,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function at(f){P.call(this),this.h=f,this.g={}}b(at,P);var xt=[];function or(f){M(f.g,function(C,j){this.g.hasOwnProperty(j)&&je(C)},f),f.g={}}at.prototype.N=function(){at.aa.N.call(this),or(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=o.JSON.stringify,kt=o.JSON.parse,un=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Vt(){}Vt.prototype.h=null;function ls(f){return f.h||(f.h=f.i())}function Ar(){}var mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){k.call(this,"d")}b(dn,k);function gr(){k.call(this,"c")}b(gr,k);var Ut={},Xt=null;function cs(){return Xt=Xt||new $e}Ut.La="serverreachability";function Gr(f){k.call(this,Ut.La,f)}b(Gr,k);function fr(f){const C=cs();tt(C,new Gr(C))}Ut.STAT_EVENT="statevent";function Pe(f,C){k.call(this,Ut.STAT_EVENT,f),this.stat=C}b(Pe,k);function He(f){const C=cs();tt(C,new Pe(C,f))}Ut.Ma="timingevent";function Nt(f,C){k.call(this,Ut.Ma,f),this.size=C}b(Nt,k);function mt(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},C)}function ht(){this.g=!0}ht.prototype.xa=function(){this.g=!1};function St(f,C,j,J,we,Se){f.info(function(){if(f.g)if(Se)for(var Ye="",qt=Se.split("&"),rr=0;rr<qt.length;rr++){var Gt=qt[rr].split("=");if(1<Gt.length){var wr=Gt[0];Gt=Gt[1];var Tr=wr.split("_");Ye=2<=Tr.length&&Tr[1]=="type"?Ye+(wr+"="+Gt+"&"):Ye+(wr+"=redacted&")}}else Ye=null;else Ye=Se;return"XMLHTTP REQ ("+J+") [attempt "+we+"]: "+C+`
`+j+`
`+Ye})}function ot(f,C,j,J,we,Se,Ye){f.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+we+"]: "+C+`
`+j+`
`+Se+" "+Ye})}function Et(f,C,j,J){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+rt(f,j)+(J?" "+J:"")})}function be(f,C){f.info(function(){return"TIMEOUT: "+C})}ht.prototype.info=function(){};function rt(f,C){if(!f.g)return C;if(!C)return null;try{var j=JSON.parse(C);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var J=j[f];if(!(2>J.length)){var we=J[1];if(Array.isArray(we)&&!(1>we.length)){var Se=we[0];if(Se!="noop"&&Se!="stop"&&Se!="close")for(var Ye=1;Ye<we.length;Ye++)we[Ye]=""}}}}return Kt(j)}catch{return C}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jt;function _t(){}b(_t,Vt),_t.prototype.g=function(){return new XMLHttpRequest},_t.prototype.i=function(){return{}},Jt=new _t;function vt(f,C,j,J){this.j=f,this.i=C,this.l=j,this.R=J||1,this.U=new at(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cs}function Cs(){this.i=null,this.g="",this.h=!1}var ma={},ga={};function va(f,C,j){f.L=1,f.v=Za(Es(C)),f.m=j,f.P=!0,$a(f,null)}function $a(f,C){f.F=Date.now(),$o(f),f.A=Es(f.v);var j=f.A,J=f.R;Array.isArray(J)||(J=[String(J)]),Mt(j.i,"t",J),f.C=0,j=f.j.J,f.h=new Cs,f.g=H(f.j,j?C:null,!f.m),0<f.O&&(f.M=new _e(m(f.Y,f,f.g),f.O)),C=f.U,j=f.g,J=f.ca;var we="readystatechange";Array.isArray(we)||(we&&(xt[0]=we.toString()),we=xt);for(var Se=0;Se<we.length;Se++){var Ye=G(j,we[Se],J||C.handleEvent,!1,C.h||C);if(!Ye)break;C.g[Ye.key]=Ye}C=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),fr(),St(f.i,f.u,f.A,f.l,f.R,f.m)}vt.prototype.ca=function(f){f=f.target;const C=this.M;C&&In(f)==3?C.j():this.Y(f)},vt.prototype.Y=function(f){try{if(f==this.g)e:{const Tr=In(this.g);var C=this.g.Ba();const Gi=this.g.Z();if(!(3>Tr)&&(Tr!=3||this.g&&(this.h.h||this.g.oa()||iu(this.g)))){this.J||Tr!=4||C==7||(C==8||0>=Gi?fr(3):fr(2)),wa(this);var j=this.g.Z();this.X=j;t:if(Wa(this)){var J=iu(this.g);f="";var we=J.length,Se=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ya(this);var Ye="";break t}this.h.i=new o.TextDecoder}for(C=0;C<we;C++)this.h.h=!0,f+=this.h.i.decode(J[C],{stream:!(Se&&C==we-1)});J.length=0,this.h.g+=f,this.C=0,Ye=this.h.g}else Ye=this.g.oa();if(this.o=j==200,ot(this.i,this.u,this.A,this.l,this.R,Tr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,rr=this.g;if((qt=rr.g?rr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(qt)){var Gt=qt;break t}}Gt=null}if(j=Gt)Et(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,j);else{this.o=!1,this.s=3,He(12),Ri(this),ya(this);break e}}if(this.P){j=!0;let Wn;for(;!this.J&&this.C<Ye.length;)if(Wn=Xc(this,Ye),Wn==ga){Tr==4&&(this.s=4,He(14),j=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==ma){this.s=4,He(15),Et(this.i,this.l,Ye,"[Invalid Chunk]"),j=!1;break}else Et(this.i,this.l,Wn,null),Xa(this,Wn);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tr!=4||Ye.length!=0||this.h.h||(this.s=1,He(16),j=!1),this.o=this.o&&j,!j)Et(this.i,this.l,Ye,"[Invalid Chunked Response]"),Ri(this),ya(this);else if(0<Ye.length&&!this.W){this.W=!0;var wr=this.j;wr.g==this&&wr.ba&&!wr.M&&(wr.j.info("Great, no buffering proxy detected. Bytes received: "+Ye.length),AA(wr),wr.M=!0,He(11))}}else Et(this.i,this.l,Ye,null),Xa(this,Ye);Tr==4&&Ri(this),this.o&&!this.J&&(Tr==4?Ea(this.j,this):(this.o=!1,$o(this)))}else Ba(this.g),j==400&&0<Ye.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Ri(this),ya(this)}}}catch{}finally{}};function Wa(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Xc(f,C){var j=f.C,J=C.indexOf(`
`,j);return J==-1?ga:(j=Number(C.substring(j,J)),isNaN(j)?ma:(J+=1,J+j>C.length?ga:(C=C.slice(J,J+j),f.C=J+j,C)))}vt.prototype.cancel=function(){this.J=!0,Ri(this)};function $o(f){f.S=Date.now()+f.I,Jc(f,f.I)}function Jc(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=mt(m(f.ba,f),C)}function wa(f){f.B&&(o.clearTimeout(f.B),f.B=null)}vt.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(be(this.i,this.A),this.L!=2&&(fr(),He(17)),Ri(this),this.s=2,ya(this)):Jc(this,this.S-f)};function ya(f){f.j.G==0||f.J||Ea(f.j,f)}function Ri(f){wa(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,or(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Xa(f,C){try{var j=f.j;if(j.G!=0&&(j.g==f||Ul(j.h,f))){if(!f.K&&Ul(j.h,f)&&j.G==3){try{var J=j.Da.g.parse(C)}catch{J=null}if(Array.isArray(J)&&J.length==3){var we=J;if(we[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)qi(j),sA(j);else break e;so(j),He(18)}}else j.za=we[1],0<j.za-j.T&&37500>we[2]&&j.F&&j.v==0&&!j.C&&(j.C=mt(m(j.Za,j),6e3));if(1>=Ja(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else us(j,11)}else if((f.K||j.g==f)&&qi(j),!w(C))for(we=j.Da.g.parse(C),C=0;C<we.length;C++){let Gt=we[C];if(j.T=Gt[0],Gt=Gt[1],j.G==2)if(Gt[0]=="c"){j.K=Gt[1],j.ia=Gt[2];const wr=Gt[3];wr!=null&&(j.la=wr,j.j.info("VER="+j.la));const Tr=Gt[4];Tr!=null&&(j.Aa=Tr,j.j.info("SVER="+j.Aa));const Gi=Gt[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(J=1.5*Gi,j.L=J,j.j.info("backChannelRequestTimeoutMs_="+J)),J=j;const Wn=f.g;if(Wn){const _a=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var Se=J.h;Se.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(Se.j=Se.l,Se.g=new Set,Se.h&&(Rr(Se,Se.h),Se.h=null))}if(J.D){const Na=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(J.ya=Na,xr(J.I,J.D,Na))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),J=j;var Ye=f;if(J.qa=v(J,J.J?J.ia:null,J.W),Ye.K){Pl(J.h,Ye);var qt=Ye,rr=J.L;rr&&(qt.I=rr),qt.B&&(wa(qt),$o(qt)),J.g=Ye}else oA(J);0<j.i.length&&iA(j)}else Gt[0]!="stop"&&Gt[0]!="close"||us(j,7);else j.G==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?us(j,7):Ki(j):Gt[0]!="noop"&&j.l&&j.l.ta(Gt),j.v=0)}}fr(4)}catch{}}var rh=class{constructor(f,C){this.g=f,this.map=C}};function Tl(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ja(f){return f.h?1:f.g?f.g.size:0}function Ul(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function Rr(f,C){f.g?f.g.add(C):f.h=C}function Pl(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}Tl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ql(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const j of f.g.values())C=C.concat(j.D);return C}return B(f.i)}function Zc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var C=[],j=f.length,J=0;J<j;J++)C.push(f[J]);return C}C=[],j=0;for(J in f)C[j++]=f[J];return C}function Ll(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var C=[];f=f.length;for(var j=0;j<f;j++)C.push(j);return C}C=[],j=0;for(const J in f)C[j++]=J;return C}}}function eu(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var j=Ll(f),J=Zc(f),we=J.length,Se=0;Se<we;Se++)C.call(void 0,J[Se],j&&j[Se],f)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(f,C){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var J=f[j].indexOf("="),we=null;if(0<=J){var Se=f[j].substring(0,J);we=f[j].substring(J+1)}else Se=f[j];C(Se,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function an(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof an){this.h=f.h,Ya(this,f.j),this.o=f.o,this.g=f.g,Xo(this,f.s),this.l=f.l;var C=f.i,j=new xa;j.i=C.i,C.g&&(j.g=new Map(C.g),j.h=C.h),jl(this,j),this.m=f.m}else f&&(C=String(f).match(Ds))?(this.h=!1,Ya(this,C[1]||"",!0),this.o=eo(C[2]||""),this.g=eo(C[3]||"",!0),Xo(this,C[4]),this.l=eo(C[5]||"",!0),jl(this,C[6]||"",!0),this.m=eo(C[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}an.prototype.toString=function(){var f=[],C=this.j;C&&f.push(Mi(C,tu,!0),":");var j=this.g;return(j||C=="file")&&(f.push("//"),(C=this.o)&&f.push(Mi(C,tu,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Mi(j,j.charAt(0)=="/"?Oi:sh,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Mi(j,Yo)),f.join("")};function Es(f){return new an(f)}function Ya(f,C,j){f.j=j?eo(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function Xo(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function jl(f,C,j){C instanceof xa?(f.i=C,ih(f.i,f.h)):(j||(C=Mi(C,Jo)),f.i=new xa(C,f.h))}function xr(f,C,j){f.i.set(C,j)}function Za(f){return xr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function eo(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Mi(f,C,j){return typeof f=="string"?(f=encodeURI(f).replace(C,nh),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function nh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var tu=/[#\/\?@]/g,sh=/[#\?:]/g,Oi=/[#\?]/g,Jo=/[#\?@]/g,Yo=/#/g;function xa(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function Mr(f){f.g||(f.g=new Map,f.h=0,f.i&&Wo(f.i,function(C,j){f.add(decodeURIComponent(C.replace(/\+/g," ")),j)}))}t=xa.prototype,t.add=function(f,C){Mr(this),this.i=null,f=ba(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(C),this.h+=1,this};function ru(f,C){Mr(f),C=ba(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function kl(f,C){return Mr(f),C=ba(f,C),f.g.has(C)}t.forEach=function(f,C){Mr(this),this.g.forEach(function(j,J){j.forEach(function(we){f.call(C,we,J,this)},this)},this)},t.na=function(){Mr(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),j=[];for(let J=0;J<C.length;J++){const we=f[J];for(let Se=0;Se<we.length;Se++)j.push(C[J])}return j},t.V=function(f){Mr(this);let C=[];if(typeof f=="string")kl(this,f)&&(C=C.concat(this.g.get(ba(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)C=C.concat(f[j])}return C},t.set=function(f,C){return Mr(this),this.i=null,f=ba(this,f),kl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function Mt(f,C,j){ru(f,C),0<j.length&&(f.i=null,f.g.set(ba(f,C),B(j)),f.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var j=0;j<C.length;j++){var J=C[j];const Se=encodeURIComponent(String(J)),Ye=this.V(J);for(J=0;J<Ye.length;J++){var we=Se;Ye[J]!==""&&(we+="="+encodeURIComponent(String(Ye[J]))),f.push(we)}}return this.i=f.join("&")};function ba(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function ih(f,C){C&&!f.j&&(Mr(f),f.i=null,f.g.forEach(function(j,J){var we=J.toLowerCase();J!=we&&(ru(this,J),Mt(this,we,j))},f)),f.j=C}function gi(f,C){const j=new ht;if(o.Image){const J=new Image;J.onload=p(Ys,j,"TestLoadImage: loaded",!0,C,J),J.onerror=p(Ys,j,"TestLoadImage: error",!1,C,J),J.onabort=p(Ys,j,"TestLoadImage: abort",!1,C,J),J.ontimeout=p(Ys,j,"TestLoadImage: timeout",!1,C,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=f}else C(!1)}function nu(f,C){const j=new ht,J=new AbortController,we=setTimeout(()=>{J.abort(),Ys(j,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:J.signal}).then(Se=>{clearTimeout(we),Se.ok?Ys(j,"TestPingServer: ok",!0,C):Ys(j,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(we),Ys(j,"TestPingServer: error",!1,C)})}function Ys(f,C,j,J,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),J(j)}catch{}}function Zo(){this.g=new un}function Dl(f,C,j){const J=j||"";try{eu(f,function(we,Se){let Ye=we;c(we)&&(Ye=Kt(we)),C.push(J+Se+"="+encodeURIComponent(Ye))})}catch(we){throw C.push(J+"type="+encodeURIComponent("_badmap")),we}}function eA(f){this.l=f.Ub||null,this.j=f.eb||!1}b(eA,Vt),eA.prototype.g=function(){return new tA(this.l,this.j)},eA.prototype.i=function(f){return function(){return f}}({});function tA(f,C){$e.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tA,$e),t=tA.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,Zs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Hi(this):Zs(this),this.readyState==3&&su(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Hi(this))},t.Qa=function(f){this.g&&(this.response=f,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Zs(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var j=C.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=C.next();return f.join(`\r
`)};function Zs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(tA.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Vi(f){let C="";return M(f,function(j,J){C+=J,C+=":",C+=j,C+=`\r
`}),C}function Rl(f,C,j){e:{for(J in j){var J=!1;break e}J=!0}J||(j=Vi(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):xr(f,C,j))}function vr(f){$e.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(vr,$e);var Ml=/^https?$/i,rA=["POST","PUT"];t=vr.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,j,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jt.g(),this.v=this.o?ls(this.o):ls(Jt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Se){Ol(this,Se);return}if(f=j||"",j=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var we in J)j.set(we,J[we]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Se of J.keys())j.set(Se,J.get(Se));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(j.keys()).find(Se=>Se.toLowerCase()=="content-type"),we=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(rA,C,void 0))||J||we||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Se,Ye]of j)this.g.setRequestHeader(Se,Ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ei(this),this.u=!0,this.g.send(f),this.u=!1}catch(Se){Ol(this,Se)}};function Ol(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,Hl(f),to(f)}function Hl(f){f.A||(f.A=!0,tt(f,"complete"),tt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,tt(this,"complete"),tt(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),vr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vl(this):this.bb())},t.bb=function(){Vl(this)};function Vl(f){if(f.h&&typeof a<"u"&&(!f.v[1]||In(f)!=4||f.Z()!=2)){if(f.u&&In(f)==4)At(f.Ea,0,f);else if(tt(f,"readystatechange"),In(f)==4){f.h=!1;try{const Ye=f.Z();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var j;if(!(j=C)){var J;if(J=Ye===0){var we=String(f.D).match(Ds)[1]||null;!we&&o.self&&o.self.location&&(we=o.self.location.protocol.slice(0,-1)),J=!Ml.test(we?we.toLowerCase():"")}j=J}if(j)tt(f,"complete"),tt(f,"success");else{f.m=6;try{var Se=2<In(f)?f.g.statusText:""}catch{Se=""}f.l=Se+" ["+f.Z()+"]",Hl(f)}}finally{to(f)}}}}function to(f,C){if(f.g){ei(f);const j=f.g,J=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||tt(f,"ready");try{j.onreadystatechange=J}catch{}}}function ei(f){f.I&&(o.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function In(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),kt(C)}};function iu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ba(f){const C={};f=(f.g&&2<=In(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<f.length;J++){if(w(f[J]))continue;var j=I(f[J]);const we=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Se=C[we]||[];C[we]=Se,Se.push(j)}F(C,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $n(f,C,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||C}function nA(f){this.Aa=0,this.i=[],this.j=new ht,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$n("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$n("baseRetryDelayMs",5e3,f),this.cb=$n("retryDelaySeedMs",1e4,f),this.Wa=$n("forwardChannelMaxRetries",2,f),this.wa=$n("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Tl(f&&f.concurrentRequestLimit),this.Da=new Zo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nA.prototype,t.la=8,t.G=1,t.connect=function(f,C,j,J){He(0),this.W=f,this.H=C||{},j&&J!==void 0&&(this.H.OSID=j,this.H.OAID=J),this.F=this.X,this.I=v(this,null,this.W),iA(this)};function Ki(f){if(ro(f),f.G==3){var C=f.U++,j=Es(f.I);if(xr(j,"SID",f.K),xr(j,"RID",C),xr(j,"TYPE","terminate"),Ca(f,j),C=new vt(f,f.j,C),C.L=2,C.v=Za(Es(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=C.v,j=!0),j||(C.g=H(C.j,null),C.g.ea(C.v)),C.F=Date.now(),$o(C)}cA(f)}function sA(f){f.g&&(AA(f),f.g.cancel(),f.g=null)}function ro(f){sA(f),f.u&&(o.clearTimeout(f.u),f.u=null),qi(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function iA(f){if(!Yc(f.h)&&!f.s){f.s=!0;var C=f.Ga;ue||ie(),W||(ue(),W=!0),ce.add(C,f),f.B=0}}function Kl(f,C){return Ja(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=mt(m(f.Ga,f,C),lA(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const we=new vt(this,this.j,f);let Se=this.o;if(this.S&&(Se?(Se=E(Se),D(Se,this.S)):Se=this.S),this.m!==null||this.O||(we.H=Se,Se=null),this.P)e:{for(var C=0,j=0;j<this.i.length;j++){t:{var J=this.i[j];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(C+=J,4096<C){C=j;break e}if(C===4096||j===this.i.length-1){C=j+1;break e}}C=1e3}else C=1e3;C=no(this,we,C),j=Es(this.I),xr(j,"RID",f),xr(j,"CVER",22),this.D&&xr(j,"X-HTTP-Session-Id",this.D),Ca(this,j),Se&&(this.O?C="headers="+encodeURIComponent(String(Vi(Se)))+"&"+C:this.m&&Rl(j,this.m,Se)),Rr(this.h,we),this.Ua&&xr(j,"TYPE","init"),this.P?(xr(j,"$req",C),xr(j,"SID","null"),we.T=!0,va(we,j,null)):va(we,j,C),this.G=2}}else this.G==3&&(f?aA(this,f):this.i.length==0||Yc(this.h)||aA(this))};function aA(f,C){var j;C?j=C.l:j=f.U++;const J=Es(f.I);xr(J,"SID",f.K),xr(J,"RID",j),xr(J,"AID",f.T),Ca(f,J),f.m&&f.o&&Rl(J,f.m,f.o),j=new vt(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),C&&(f.i=C.D.concat(f.i)),C=no(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Rr(f.h,j),va(j,J,C)}function Ca(f,C){f.H&&M(f.H,function(j,J){xr(C,J,j)}),f.l&&eu({},function(j,J){xr(C,J,j)})}function no(f,C,j){j=Math.min(f.i.length,j);var J=f.l?m(f.l.Na,f.l,f):null;e:{var we=f.i;let Se=-1;for(;;){const Ye=["count="+j];Se==-1?0<j?(Se=we[0].g,Ye.push("ofs="+Se)):Se=0:Ye.push("ofs="+Se);let qt=!0;for(let rr=0;rr<j;rr++){let Gt=we[rr].g;const wr=we[rr].map;if(Gt-=Se,0>Gt)Se=Math.max(0,we[rr].g-100),qt=!1;else try{Dl(wr,Ye,"req"+Gt+"_")}catch{J&&J(wr)}}if(qt){J=Ye.join("&");break e}}}return f=f.i.splice(0,j),C.D=f,J}function oA(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;ue||ie(),W||(ue(),W=!0),ce.add(C,f),f.v=0}}function so(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=mt(m(f.Fa,f),lA(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=mt(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),sA(this),au(this))};function AA(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function au(f){f.g=new vt(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=Es(f.qa);xr(C,"RID","rpc"),xr(C,"SID",f.K),xr(C,"AID",f.T),xr(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&xr(C,"TO",f.ja),xr(C,"TYPE","xmlhttp"),Ca(f,C),f.m&&f.o&&Rl(C,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Za(Es(C)),j.m=null,j.P=!0,$a(j,f)}t.Za=function(){this.C!=null&&(this.C=null,sA(this),so(this),He(19))};function qi(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Ea(f,C){var j=null;if(f.g==C){qi(f),AA(f),f.g=null;var J=2}else if(Ul(f.h,C))j=C.D,Pl(f.h,C),J=1;else return;if(f.G!=0){if(C.o)if(J==1){j=C.m?C.m.length:0,C=Date.now()-C.F;var we=f.B;J=cs(),tt(J,new Nt(J,j)),iA(f)}else oA(f);else if(we=C.s,we==3||we==0&&0<C.X||!(J==1&&Kl(f,C)||J==2&&so(f)))switch(j&&0<j.length&&(C=f.h,C.i=C.i.concat(j)),we){case 1:us(f,5);break;case 4:us(f,10);break;case 3:us(f,6);break;default:us(f,2)}}}function lA(f,C){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*C}function us(f,C){if(f.j.info("Error code "+C),C==2){var j=m(f.fb,f),J=f.Xa;const we=!J;J=new an(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ya(J,"https"),Za(J),we?gi(J.toString(),j):nu(J.toString(),j)}else He(2);f.G=0,f.l&&f.l.sa(C),cA(f),ro(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function cA(f){if(f.G=0,f.ka=[],f.l){const C=Ql(f.h);(C.length!=0||f.i.length!=0)&&(_(f.ka,C),_(f.ka,f.i),f.h.i.length=0,B(f.i),f.i.length=0),f.l.ra()}}function v(f,C,j){var J=j instanceof an?Es(j):new an(j);if(J.g!="")C&&(J.g=C+"."+J.g),Xo(J,J.s);else{var we=o.location;J=we.protocol,C=C?C+"."+we.hostname:we.hostname,we=+we.port;var Se=new an(null);J&&Ya(Se,J),C&&(Se.g=C),we&&Xo(Se,we),j&&(Se.l=j),J=Se}return j=f.D,C=f.ya,j&&C&&xr(J,j,C),xr(J,"VER",f.la),Ca(f,J),J}function H(f,C,j){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new vr(new eA({eb:j})):new vr(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ae(){}t=Ae.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fe(){}fe.prototype.g=function(f,C){return new ye(f,C)};function ye(f,C){$e.call(this),this.g=new nA(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!w(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!w(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new ut(this)}b(ye,$e),ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ye.prototype.close=function(){Ki(this.g)},ye.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Kt(f),f=j);C.i.push(new rh(C.Ya++,f)),C.G==3&&iA(C)},ye.prototype.N=function(){this.g.l=null,delete this.j,Ki(this.g),delete this.g,ye.aa.N.call(this)};function Re(f){dn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const j in C){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}b(Re,dn);function Je(){gr.call(this),this.status=1}b(Je,gr);function ut(f){this.g=f}b(ut,Ae),ut.prototype.ua=function(){tt(this.g,"a")},ut.prototype.ta=function(f){tt(this.g,new Re(f))},ut.prototype.sa=function(f){tt(this.g,new Je)},ut.prototype.ra=function(){tt(this.g,"b")},fe.prototype.createWebChannel=fe.prototype.g,ye.prototype.send=ye.prototype.o,ye.prototype.open=ye.prototype.m,ye.prototype.close=ye.prototype.close,c4=function(){return new fe},l4=function(){return cs()},A4=Ut,A2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Vg=st,Dt.COMPLETE="complete",o4=Dt,Ar.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Jh=Ar,vr.prototype.listenOnce=vr.prototype.L,vr.prototype.getLastError=vr.prototype.Ka,vr.prototype.getLastErrorCode=vr.prototype.Ba,vr.prototype.getStatus=vr.prototype.Z,vr.prototype.getResponseJson=vr.prototype.Oa,vr.prototype.getResponseText=vr.prototype.oa,vr.prototype.send=vr.prototype.ea,vr.prototype.setWithCredentials=vr.prototype.Ha,a4=vr}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});const V5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new db("@firebase/firestore");function Ru(){return Lc.logLevel}function Ze(t,...e){if(Lc.logLevel<=ir.DEBUG){const r=e.map(_b);Lc.debug(`Firestore (${qd}): ${t}`,...r)}}function Ts(t,...e){if(Lc.logLevel<=ir.ERROR){const r=e.map(_b);Lc.error(`Firestore (${qd}): ${t}`,...r)}}function fl(t,...e){if(Lc.logLevel<=ir.WARN){const r=e.map(_b);Lc.warn(`Firestore (${qd}): ${t}`,...r)}}function _b(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t="Unexpected state"){const e=`FIRESTORE (${qd}) INTERNAL ASSERTION FAILED: `+t;throw Ts(e),new Error(e)}function It(t,e){t||Ct()}function Ht(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends qo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ts.UNAUTHENTICATED))}shutdown(){}}class lM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class cM{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){It(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new aa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new aa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(It(typeof n.accessToken=="string"),new u4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string"),new ts(e)}}class uM{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dM{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new uM(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){It(this.o===void 0);const n=i=>{i.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Ze("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(It(typeof r.token=="string"),this.R=r.token,new hM(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=pM(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function $t(t,e){return t<e?-1:t>e?1:0}function Id(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function h4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new it(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new it(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new it(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new jt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new jt(0,0))}static max(){return new Ft(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ct(),n===void 0?n=e.length-r:n>e.length-r&&Ct(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return np.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof np?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class hr extends np{construct(e,r,n){return new hr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new it(Oe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new hr(r)}static emptyPath(){return new hr([])}}const mM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends np{construct(e,r,n){return new Jr(e,r,n)}static isValidIdentifier(e){return mM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new it(Oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new it(Oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new it(Oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new it(Oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(r)}static emptyPath(){return new Jr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.path=e}static fromPath(e){return new pt(hr.fromString(e))}static fromName(e){return new pt(hr.fromString(e).popFirst(5))}static empty(){return new pt(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return hr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new hr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function l2(t){return t.fields.find(e=>e.kind===2)}function sc(t){return t.fields.filter(e=>e.kind!==2)}Q0.UNKNOWN_ID=-1;class Kg{constructor(e,r){this.fieldPath=e,this.kind=r}}class sp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new sp(0,di.min())}}function gM(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ft.fromTimestamp(n===1e9?new jt(r+1,0):new jt(r,n));return new di(s,pt.empty(),e)}function f4(t){return new di(t.readTime,t.key,-1)}class di{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new di(Ft.min(),pt.empty(),-1)}static max(){return new di(Ft.max(),pt.empty(),-1)}}function Ib(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=pt.comparator(t.documentKey,e.documentKey),r!==0?r:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){if(t.code!==Oe.FAILED_PRECONDITION||t.message!==p4)throw t;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Fe((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Fe?r:Fe.resolve(r)}catch(r){return Fe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Fe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Fe.reject(r)}static resolve(e){return new Fe((r,n)=>{r(e)})}static reject(e){return new Fe((r,n)=>{n(e)})}static waitFor(e){return new Fe((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Fe.resolve(!1);for(const n of e)r=r.next(s=>s?Fe.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Fe((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Fe((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new aa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new wf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Sb(n.target.error);this.V.reject(new wf(e,s))}}static open(e,r,n,s){try{return new Fv(r,e.transaction(s,n))}catch(i){throw new wf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new wM(r)}}class ol{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ol.S(Ln())===12.2&&Ts("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gF())return!1;if(ol.v())return!0;const e=Ln(),r=ol.S(e),n=0<r&&r<10,s=g4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ze("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new wf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new it(Oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new it(Oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new wf(e,a))},s.onupgradeneeded=i=>{Ze("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Fv.open(this.db,e,i?"readonly":"readwrite",n),l=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Fe.reject(c))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Ze("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g4(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class vM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oc(this.B.delete())}}class wf extends it{constructor(e,r){super(Oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Sl(t){return t.name==="IndexedDbTransactionError"}class wM{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ze("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oc(n)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(r=>(r===void 0&&(r=null),Ze("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),oc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Fe((a,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{a(l.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,l)=>{a.push(l)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Fe((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){Ze("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Fe((n,s)=>{r.onerror=i=>{const a=Sb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Fe((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const l=new vM(o),c=r(o.primaryKey,o.value,l);if(c instanceof Fe){const u=c.catch(h=>(l.done(),Fe.reject(h)));n.push(u)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}}).next(()=>Fe.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function oc(t){return new Fe((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Sb(n.target.error);r(s)}})}let K5=!1;function Sb(t){const e=ol.S(Ln());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return K5||(K5=!0,setTimeout(()=>{throw n},0)),n}}return t}class yM{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ze("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Ze("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Sl(r)?Ze("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Kc(r)}await this.X(6e4)})}}class xM{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Fe.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Ze("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(Ze("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=f4(i);Ib(a,n)>0&&(n=a)}),new di(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ui.oe=-1;function Lp(t){return t==null}function ip(t){return t===0&&1/t==-1/0}function bM(t){return typeof t=="number"&&Number.isInteger(t)&&!ip(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=q5(e)),e=BM(t.get(r),e);return q5(e)}function BM(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function q5(t){return t+""}function La(t){const e=t.length;if(It(e>=2),e===2)return It(t.charAt(0)===""&&t.charAt(1)===""),hr.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Ct(),t.charAt(a+1)){case"":const o=t.substring(i,a);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Ct()}i=a+2}return new hr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){return[t,Qs(e)]}function v4(t,e,r){return[t,Qs(e),r]}const CM={},EM=["prefixPath","collectionGroup","readTime","documentId"],_M=["prefixPath","collectionGroup","documentId"],NM=["collectionGroup","readTime","prefixPath","documentId"],IM=["canonicalId","targetId"],SM=["targetId","path"],FM=["path","targetId"],TM=["collectionId","parent"],UM=["indexId","uid"],PM=["uid","sequenceNumber"],QM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LM=["indexId","uid","orderedDocumentKey"],jM=["userId","collectionPath","documentId"],kM=["userId","collectionPath","largestBatchId"],DM=["userId","collectionGroup","largestBatchId"],w4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RM=[...w4,"documentOverlays"],y4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x4=y4,Fb=[...x4,"indexConfiguration","indexState","indexEntries"],MM=Fb,OM=[...Fb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends m4{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function jn(t,e){const r=Ht(t);return ol.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function qc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function b4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,r){this.comparator=e,this.root=r||rs.EMPTY}insert(e,r){return new en(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dm(this.root,e,this.comparator,!0)}}class Dm{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??rs.RED,this.left=s??rs.EMPTY,this.right=i??rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new rs(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return rs.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1;rs.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(e,r,n,s,i){return this}insert(e,r,n){return new rs(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new $5(this.data.getIterator())}getIteratorFrom(e){return new $5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Fr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Fr(this.comparator);return r.data=e,r}}class $5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new zs([])}unionWith(e){let r=new Fr(Jr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Id(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B4("Invalid base64 string: "+i):i}}(e);return new bn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new bn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const HM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(t){if(It(!!t),typeof t=="string"){let e=0;const r=HM.exec(t);if(It(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:$r(t.seconds),nanos:$r(t.nanos)}}function $r(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pl(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ub(t){const e=t.mapValue.fields.__previous_value__;return Tb(e)?Ub(e):e}function ap(t){const e=Ho(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class ml{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gg={nullValue:"NULL_VALUE"};function jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tb(t)?4:C4(t)?9007199254740991:Tv(t)?10:11:Ct()}function Va(t,e){if(t===e)return!0;const r=jc(t);if(r!==jc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ap(t).isEqual(ap(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ho(s.timestampValue),o=Ho(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return pl(s.bytesValue).isEqual(pl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $r(s.geoPointValue.latitude)===$r(i.geoPointValue.latitude)&&$r(s.geoPointValue.longitude)===$r(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $r(s.integerValue)===$r(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=$r(s.doubleValue),o=$r(i.doubleValue);return a===o?ip(a)===ip(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Id(t.arrayValue.values||[],e.arrayValue.values||[],Va);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(z5(a)!==z5(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Va(a[l],o[l])))return!1;return!0}(t,e);default:return Ct()}}function op(t,e){return(t.values||[]).find(r=>Va(r,e))!==void 0}function gl(t,e){if(t===e)return 0;const r=jc(t),n=jc(e);if(r!==n)return $t(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=$r(i.integerValue||i.doubleValue),l=$r(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return W5(t.timestampValue,e.timestampValue);case 4:return W5(ap(t),ap(e));case 5:return $t(t.stringValue,e.stringValue);case 6:return function(i,a){const o=pl(i),l=pl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=$t(o[c],l[c]);if(u!==0)return u}return $t(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=$t($r(i.latitude),$r(a.latitude));return o!==0?o:$t($r(i.longitude),$r(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const h=i.fields||{},m=a.fields||{},p=(o=h.value)===null||o===void 0?void 0:o.arrayValue,b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,B=$t(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return B!==0?B:X5(p,b)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===qA.mapValue&&a===qA.mapValue)return 0;if(i===qA.mapValue)return 1;if(a===qA.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=$t(l[h],u[h]);if(m!==0)return m;const p=gl(o[l[h]],c[u[h]]);if(p!==0)return p}return $t(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ct()}}function W5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const r=Ho(t),n=Ho(e),s=$t(r.seconds,n.seconds);return s!==0?s:$t(r.nanos,n.nanos)}function X5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=gl(r[s],n[s]);if(i)return i}return $t(r.length,n.length)}function Sd(t){return u2(t)}function u2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ho(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return pl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return pt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=u2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${u2(r.fields[a])}`;return s+"}"}(t.mapValue):Ct()}function Ap(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d2(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function J5(t){return!!t&&"nullValue"in t}function Y5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zg(t){return!!t&&"mapValue"in t}function Tv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function yf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=yf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=yf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function C4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const E4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function KM(t){return"nullValue"in t?Gg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ap(ml.empty(),pt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tv(t)?E4:{mapValue:{}}:Ct()}function qM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ap(ml.empty(),pt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?E4:"mapValue"in t?Tv(t)?{mapValue:{}}:qA:Ct()}function Z5(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function eE(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!zg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(r)}setAll(e){let r=Jr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=yf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());zg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Va(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];zg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){qc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new ss(yf(this.value))}}function _4(t){const e=[];return qc(t.fields,(r,n)=>{const s=new Jr([r]);if(zg(n)){const i=_4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Xr(e,0,Ft.min(),Ft.min(),Ft.min(),ss.empty(),0)}static newFoundDocument(e,r,n,s){return new Xr(e,1,r,Ft.min(),n,s,0)}static newNoDocument(e,r){return new Xr(e,2,r,Ft.min(),Ft.min(),ss.empty(),0)}static newUnknownDocument(e,r){return new Xr(e,3,r,Ft.min(),Ft.min(),ss.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,r){this.position=e,this.inclusive=r}}function tE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=pt.comparator(pt.fromName(a.referenceValue),r.key):n=gl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function rE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Va(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,r="asc"){this.field=e,this.dir=r}}function GM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{}class ar extends N4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new zM(e,r,n):r==="array-contains"?new XM(e,n):r==="in"?new P4(e,n):r==="not-in"?new JM(e,n):r==="array-contains-any"?new YM(e,n):new ar(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new $M(e,n):new WM(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(gl(r,this.value)):r!==null&&jc(this.value)===jc(r)&&this.matchesComparison(gl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends N4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Er(e,r)}matches(e){return Td(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Td(t){return t.op==="and"}function h2(t){return t.op==="or"}function Pb(t){return I4(t)&&Td(t)}function I4(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function f2(t){if(t instanceof ar)return t.field.canonicalString()+t.op.toString()+Sd(t.value);if(Pb(t))return t.filters.map(e=>f2(e)).join(",");{const e=t.filters.map(r=>f2(r)).join(",");return`${t.op}(${e})`}}function S4(t,e){return t instanceof ar?function(n,s){return s instanceof ar&&n.op===s.op&&n.field.isEqual(s.field)&&Va(n.value,s.value)}(t,e):t instanceof Er?function(n,s){return s instanceof Er&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&S4(a,s.filters[o]),!0):!1}(t,e):void Ct()}function F4(t,e){const r=t.filters.concat(e);return Er.create(r,t.op)}function T4(t){return t instanceof ar?function(r){return`${r.field.canonicalString()} ${r.op} ${Sd(r.value)}`}(t):t instanceof Er?function(r){return r.op.toString()+" {"+r.getFilters().map(T4).join(" ,")+"}"}(t):"Filter"}class zM extends ar{constructor(e,r,n){super(e,r,n),this.key=pt.fromName(n.referenceValue)}matches(e){const r=pt.comparator(e.key,this.key);return this.matchesComparison(r)}}class $M extends ar{constructor(e,r){super(e,"in",r),this.keys=U4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class WM extends ar{constructor(e,r){super(e,"not-in",r),this.keys=U4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function U4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>pt.fromName(n.referenceValue))}class XM extends ar{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return lp(r)&&op(r.arrayValue,this.value)}}class P4 extends ar{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&op(this.value.arrayValue,r)}}class JM extends ar{constructor(e,r){super(e,"not-in",r)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!op(this.value.arrayValue,r)}}class YM extends ar{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!lp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>op(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function p2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new ZM(t,e,r,n,s,i,a)}function kc(t){const e=Ht(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>f2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Lp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sd(n)).join(",")),e.ue=r}return e.ue}function jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!GM(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!S4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rE(t.startAt,e.startAt)&&rE(t.endAt,e.endAt)}function L0(t){return pt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function j0(t,e){return t.filters.filter(r=>r instanceof ar&&r.field.isEqual(e))}function nE(t,e,r){let n=Gg,s=!0;for(const i of j0(t,e)){let a=Gg,o=!0;switch(i.op){case"<":case"<=":a=KM(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Gg}Z5({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];Z5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function sE(t,e,r){let n=qA,s=!0;for(const i of j0(t,e)){let a=qA,o=!0;switch(i.op){case">=":case">":a=qM(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=qA}eE({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];eE({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eO(t,e,r,n,s,i,a,o){return new Gd(t,e,r,n,s,i,a,o)}function kp(t){return new Gd(t)}function iE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q4(t){return t.collectionGroup!==null}function xf(t){const e=Ht(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Fr(Jr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new cp(i,n))}),r.has(Jr.keyField().canonicalString())||e.ce.push(new cp(Jr.keyField(),n))}return e.ce}function ji(t){const e=Ht(t);return e.le||(e.le=tO(e,xf(t))),e.le}function tO(t,e){if(t.limitType==="F")return p2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new cp(s.field,i)});const r=t.endAt?new Fd(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Fd(t.startAt.position,t.startAt.inclusive):null;return p2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function m2(t,e){const r=t.filters.concat([e]);return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function k0(t,e,r){return new Gd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Uv(t,e){return jp(ji(t),ji(e))&&t.limitType===e.limitType}function L4(t){return`${kc(ji(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>T4(s)).join(", ")}]`),Lp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Sd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Sd(s)).join(",")),`Target(${n})`}(ji(t))}; limitType=${t.limitType})`}function Dp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of xf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=tE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,xf(n),s)||n.endAt&&!function(a,o,l){const c=tE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,xf(n),s))}(t,e)}function rO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j4(t){return(e,r)=>{let n=!1;for(const s of xf(t)){const i=nO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function nO(t,e,r){const n=t.field.isKeyField()?pt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?gl(l,c):Ct()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return b4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new en(pt.comparator);function Ai(){return sO}const k4=new en(pt.comparator);function Yh(...t){let e=k4;for(const r of t)e=e.insert(r.key,r);return e}function D4(t){let e=k4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ja(){return bf()}function R4(){return bf()}function bf(){return new Fl(t=>t.toString(),(t,e)=>t.isEqual(e))}const iO=new en(pt.comparator),aO=new Fr(pt.comparator);function er(...t){let e=aO;for(const r of t)e=e.add(r);return e}const oO=new Fr($t);function AO(){return oO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ip(e)?"-0":e}}function M4(t){return{integerValue:""+t}}function lO(t,e){return bM(e)?M4(e):Qb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this._=void 0}}function cO(t,e,r){return t instanceof up?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tb(i)&&(i=Ub(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Ud?H4(t,e):t instanceof Pd?V4(t,e):function(s,i){const a=O4(s,i),o=aE(a)+aE(s.Pe);return d2(a)&&d2(s.Pe)?M4(o):Qb(s.serializer,o)}(t,e)}function uO(t,e,r){return t instanceof Ud?H4(t,e):t instanceof Pd?V4(t,e):r}function O4(t,e){return t instanceof dp?function(n){return d2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class up extends Pv{}class Ud extends Pv{constructor(e){super(),this.elements=e}}function H4(t,e){const r=K4(e);for(const n of t.elements)r.some(s=>Va(s,n))||r.push(n);return{arrayValue:{values:r}}}class Pd extends Pv{constructor(e){super(),this.elements=e}}function V4(t,e){let r=K4(e);for(const n of t.elements)r=r.filter(s=>!Va(s,n));return{arrayValue:{values:r}}}class dp extends Pv{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function aE(t){return $r(t.integerValue||t.doubleValue)}function K4(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,r){this.field=e,this.transform=r}}function hO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Ud&&s instanceof Ud||n instanceof Pd&&s instanceof Pd?Id(n.elements,s.elements,Va):n instanceof dp&&s instanceof dp?Va(n.Pe,s.Pe):n instanceof up&&s instanceof up}(t.transform,e.transform)}class fO{constructor(e,r){this.version=e,this.transformResults=r}}class Yr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qv{}function q4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $d(t.key,Yr.none()):new zd(t.key,t.data,Yr.none());{const r=t.data,n=ss.empty();let s=new Fr(Jr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Go(t.key,n,new zs(s.toArray()),Yr.none())}}function pO(t,e,r){t instanceof zd?function(s,i,a){const o=s.value.clone(),l=AE(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Go?function(s,i,a){if(!$g(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=AE(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(G4(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Bf(t,e,r,n){return t instanceof zd?function(i,a,o,l){if(!$g(i.precondition,a))return o;const c=i.value.clone(),u=lE(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Go?function(i,a,o,l){if(!$g(i.precondition,a))return o;const c=lE(i.fieldTransforms,l,a),u=a.data;return u.setAll(G4(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(i,a,o){return $g(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function mO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=O4(n.transform,s||null);i!=null&&(r===null&&(r=ss.empty()),r.set(n.field,i))}return r||null}function oE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Id(n,s,(i,a)=>hO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zd extends Qv{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Go extends Qv{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function G4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function AE(t,e,r){const n=new Map;It(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,uO(a,o,r[s]))}return n}function lE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,cO(i,a,e))}return n}class $d extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lb extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Bf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Bf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=R4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=q4(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Ft.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),er())}isEqual(e){return this.batchId===e.batchId&&Id(this.mutations,e.mutations,(r,n)=>oE(r,n))&&Id(this.baseMutations,e.baseMutations,(r,n)=>oE(r,n))}}class kb{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){It(e.mutations.length===n.length);let s=function(){return iO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new kb(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,lr;function z4(t){switch(t){default:return Ct();case Oe.CANCELLED:case Oe.UNKNOWN:case Oe.DEADLINE_EXCEEDED:case Oe.RESOURCE_EXHAUSTED:case Oe.INTERNAL:case Oe.UNAVAILABLE:case Oe.UNAUTHENTICATED:return!1;case Oe.INVALID_ARGUMENT:case Oe.NOT_FOUND:case Oe.ALREADY_EXISTS:case Oe.PERMISSION_DENIED:case Oe.FAILED_PRECONDITION:case Oe.ABORTED:case Oe.OUT_OF_RANGE:case Oe.UNIMPLEMENTED:case Oe.DATA_LOSS:return!0}}function $4(t){if(t===void 0)return Ts("GRPC error has no .code"),Oe.UNKNOWN;switch(t){case En.OK:return Oe.OK;case En.CANCELLED:return Oe.CANCELLED;case En.UNKNOWN:return Oe.UNKNOWN;case En.DEADLINE_EXCEEDED:return Oe.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return Oe.RESOURCE_EXHAUSTED;case En.INTERNAL:return Oe.INTERNAL;case En.UNAVAILABLE:return Oe.UNAVAILABLE;case En.UNAUTHENTICATED:return Oe.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return Oe.INVALID_ARGUMENT;case En.NOT_FOUND:return Oe.NOT_FOUND;case En.ALREADY_EXISTS:return Oe.ALREADY_EXISTS;case En.PERMISSION_DENIED:return Oe.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return Oe.FAILED_PRECONDITION;case En.ABORTED:return Oe.ABORTED;case En.OUT_OF_RANGE:return Oe.OUT_OF_RANGE;case En.UNIMPLEMENTED:return Oe.UNIMPLEMENTED;case En.DATA_LOSS:return Oe.DATA_LOSS;default:return Ct()}}(lr=En||(En={}))[lr.OK=0]="OK",lr[lr.CANCELLED=1]="CANCELLED",lr[lr.UNKNOWN=2]="UNKNOWN",lr[lr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lr[lr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lr[lr.NOT_FOUND=5]="NOT_FOUND",lr[lr.ALREADY_EXISTS=6]="ALREADY_EXISTS",lr[lr.PERMISSION_DENIED=7]="PERMISSION_DENIED",lr[lr.UNAUTHENTICATED=16]="UNAUTHENTICATED",lr[lr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lr[lr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lr[lr.ABORTED=10]="ABORTED",lr[lr.OUT_OF_RANGE=11]="OUT_OF_RANGE",lr[lr.UNIMPLEMENTED=12]="UNIMPLEMENTED",lr[lr.INTERNAL=13]="INTERNAL",lr[lr.UNAVAILABLE=14]="UNAVAILABLE",lr[lr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new yc([4294967295,4294967295],0);function cE(t){const e=vO().encode(t),r=new i4;return r.update(e),new Uint8Array(r.digest())}function uE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yc([r,n],0),new yc([s,i],0)]}class Rb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Zh(`Invalid padding: ${r}`);if(n<0)throw new Zh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Zh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Zh(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=yc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(yc.fromNumber(n)));return s.compare(wO)===1&&(s=new yc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=cE(e),[n,s]=uE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Rb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=cE(e),[n,s]=uE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Lv(Ft.min(),s,new en($t),Ai(),er())}}class Rp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Rp(n,r,er(),er(),er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class W4{constructor(e,r){this.targetId=e,this.me=r}}class X4{constructor(e,r,n=bn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class dE{constructor(){this.fe=0,this.ge=fE(),this.pe=bn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=er(),r=er(),n=er();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ct()}}),new Rp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=fE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=hE(),this.Qe=new en($t)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ct()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(L0(i))if(n===0){const a=new pt(i.path);this.Ue(r,a,Xr.newNoDocument(a,Ft.min()))}else It(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=pl(n).toUint8Array()}catch(l){if(l instanceof B4)return fl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Rb(a,s,i)}catch(l){return fl(l instanceof Zh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&L0(o.target)){const l=new pt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Xr.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=er();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Lv(e,r,this.Qe,this.ke,n);return this.ke=Ai(),this.qe=hE(),this.Qe=new en($t),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new dE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Fr($t),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ze("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function hE(){return new en(pt.comparator)}function fE(){return new en(pt.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},bO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class CO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function g2(t,e){return t.useProto3Json||Lp(e)?e:{value:e}}function Qd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EO(t,e){return Qd(t,e.toTimestamp())}function qn(t){return It(!!t),Ft.fromTimestamp(function(r){const n=Ho(r);return new jt(n.seconds,n.nanos)}(t))}function Mb(t,e){return v2(t,e).canonicalString()}function v2(t,e){const r=function(s){return new hr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Y4(t){const e=hr.fromString(t);return It(oT(e)),e}function hp(t,e){return Mb(t.databaseId,e.path)}function To(t,e){const r=Y4(e);if(r.get(1)!==t.databaseId.projectId)throw new it(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new it(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new pt(tT(r))}function Z4(t,e){return Mb(t.databaseId,e)}function eT(t){const e=Y4(t);return e.length===4?hr.emptyPath():tT(e)}function w2(t){return new hr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tT(t){return It(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pE(t,e,r){return{name:hp(t,e),fields:r.value.mapValue.fields}}function _O(t,e,r){const n=To(t,e.name),s=qn(e.updateTime),i=e.createTime?qn(e.createTime):Ft.min(),a=new ss({mapValue:{fields:e.fields}}),o=Xr.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function NO(t,e){return"found"in e?function(n,s){It(!!s.found),s.found.name,s.found.updateTime;const i=To(n,s.found.name),a=qn(s.found.updateTime),o=s.found.createTime?qn(s.found.createTime):Ft.min(),l=new ss({mapValue:{fields:s.found.fields}});return Xr.newFoundDocument(i,a,o,l)}(t,e):"missing"in e?function(n,s){It(!!s.missing),It(!!s.readTime);const i=To(n,s.missing),a=qn(s.readTime);return Xr.newNoDocument(i,a)}(t,e):Ct()}function IO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ct()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(It(u===void 0||typeof u=="string"),bn.fromBase64String(u||"")):(It(u===void 0||u instanceof Buffer||u instanceof Uint8Array),bn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Oe.UNKNOWN:$4(c.code);return new it(u,c.message||"")}(a);r=new X4(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=To(t,n.document.name),i=qn(n.document.updateTime),a=n.document.createTime?qn(n.document.createTime):Ft.min(),o=new ss({mapValue:{fields:n.document.fields}}),l=Xr.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Wg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=To(t,n.document),i=n.readTime?qn(n.readTime):Ft.min(),a=Xr.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Wg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=To(t,n.document),i=n.removedTargetIds||[];r=new Wg([],i,s,null)}else{if(!("filter"in e))return Ct();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new gO(s,i),o=n.targetId;r=new W4(o,a)}}return r}function fp(t,e){let r;if(e instanceof zd)r={update:pE(t,e.key,e.value)};else if(e instanceof $d)r={delete:hp(t,e.key)};else if(e instanceof Go)r={update:pE(t,e.key,e.data),updateMask:QO(e.fieldMask)};else{if(!(e instanceof Lb))return Ct();r={verify:hp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof up)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ud)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Pd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dp)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Ct()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:EO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ct()}(t,e.precondition)),r}function y2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Yr.updateTime(qn(i.updateTime)):i.exists!==void 0?Yr.exists(i.exists):Yr.none()}(e.currentDocument):Yr.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let l=null;if("setToServerValue"in o)It(o.setToServerValue==="REQUEST_TIME"),l=new up;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new Ud(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new Pd(u)}else"increment"in o?l=new dp(a,o.increment):Ct();const c=Jr.fromServerFormat(o.fieldPath);return new dO(c,l)}(t,s)):[];if(e.update){e.update.name;const s=To(t,e.update.name),i=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new zs(c.map(u=>Jr.fromServerFormat(u)))}(e.updateMask);return new Go(s,i,a,r,n)}return new zd(s,i,r,n)}if(e.delete){const s=To(t,e.delete);return new $d(s,r)}if(e.verify){const s=To(t,e.verify);return new Lb(s,r)}return Ct()}function SO(t,e){return t&&t.length>0?(It(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?qn(s.updateTime):qn(i);return a.isEqual(Ft.min())&&(a=qn(i)),new fO(a,s.transformResults||[])}(r,e))):[]}function rT(t,e){return{documents:[Z4(t,e.path)]}}function nT(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Z4(t,s);const i=function(c){if(c.length!==0)return aT(Er.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:Ou(m.field),direction:TO(m.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=g2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function sT(t){let e=eT(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){It(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(h){const m=iT(h);return m instanceof Er&&Pb(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(b){return new cp(Hu(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Lp(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Fd(p,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Fd(p,m)}(r.endAt)),eO(e,s,a,i,o,"F",l,c)}function FO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function iT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Hu(r.unaryFilter.field);return ar.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Hu(r.unaryFilter.field);return ar.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hu(r.unaryFilter.field);return ar.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hu(r.unaryFilter.field);return ar.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(t):t.fieldFilter!==void 0?function(r){return ar.create(Hu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Er.create(r.compositeFilter.filters.map(n=>iT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ct()}}(r.compositeFilter.op))}(t):Ct()}function TO(t){return xO[t]}function UO(t){return bO[t]}function PO(t){return BO[t]}function Ou(t){return{fieldPath:t.canonicalString()}}function Hu(t){return Jr.fromServerFormat(t.fieldPath)}function aT(t){return t instanceof ar?function(r){if(r.op==="=="){if(Y5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NAN"}};if(J5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Y5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NOT_NAN"}};if(J5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(r.field),op:UO(r.op),value:r.value}}}(t):t instanceof Er?function(r){const n=r.getFilters().map(s=>aT(s));return n.length===1?n[0]:{compositeFilter:{op:PO(r.op),filters:n}}}(t):Ct()}function QO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,r,n,s,i=Ft.min(),a=Ft.min(),o=bn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.ct=e}}function LO(t,e){let r;if(e.document)r=_O(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=pt.fromSegments(e.noDocument.path),s=Rc(e.noDocument.readTime);r=Xr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ct();{const n=pt.fromSegments(e.unknownDocument.path),s=Rc(e.unknownDocument.version);r=Xr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new jt(s[0],s[1]);return Ft.fromTimestamp(i)}(e.readTime)),r}function mE(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:D0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:hp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Qd(i,a.version.toTimestamp()),createTime:Qd(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Dc(e.version)};else{if(!e.isUnknownDocument())return Ct();n.unknownDocument={path:r.path.toArray(),version:Dc(e.version)}}return n}function D0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(t){const e=new jt(t.seconds,t.nanoseconds);return Ft.fromTimestamp(e)}function Ac(t,e){const r=(e.baseMutations||[]).map(i=>y2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>y2(t.ct,i)),s=jt.fromMillis(e.localWriteTimeMs);return new jb(e.batchId,s,r,n)}function ef(t){const e=Rc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Rc(t.lastLimboFreeSnapshotVersion):Ft.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return It(i.documents.length===1),ji(kp(eT(i.documents[0])))}(t.query):function(i){return ji(sT(i))}(t.query),new _o(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,bn.fromBase64String(t.resumeToken))}function lT(t,e){const r=Dc(e.snapshotVersion),n=Dc(e.lastLimboFreeSnapshotVersion);let s;s=L0(e.target)?rT(t.ct,e.target):nT(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function cT(t){const e=sT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k0(e,e.limit,"L"):e}function gy(t,e){return new Db(e.largestBatchId,y2(t.ct,e.overlayMutation))}function gE(t,e){const r=e.path.lastSegment();return[t,Qs(e.path.popLast()),r]}function vE(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Dc(n.readTime),documentKey:Qs(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{getBundleMetadata(e,r){return wE(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Rc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return wE(e).put(function(s){return{bundleId:s.id,createTime:Dc(qn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return yE(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:cT(i.bundledQuery),readTime:Rc(i.readTime)}}(n)})}saveNamedQuery(e,r){return yE(e).put(function(s){return{name:s.name,readTime:Dc(qn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function wE(t){return jn(t,"bundles")}function yE(t){return jn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new jv(e,n)}getOverlay(e,r){return Sh(e).get(gE(this.userId,r)).next(n=>n?gy(this.serializer,n):null)}getOverlays(e,r){const n=ja();return Fe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Db(r,a);s.push(this.ht(e,o))}),Fe.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Qs(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Sh(e).j("collectionPathOverlayIndex",o))}),Fe.waitFor(i)}getOverlaysForCollection(e,r,n){const s=ja(),i=Qs(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const l of o){const c=gy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=ja();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Sh(e).J({index:"collectionGroupOverlayIndex",range:o},(l,c,u)=>{const h=gy(this.serializer,c);i.size()<s||h.largestBatchId===a?(i.set(h.getKey(),h),a=h.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Sh(e).put(function(s,i,a){const[o,l,c]=gE(i,a.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:fp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Sh(t){return jn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{Pt(e){return jn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?bn.fromUint8Array(n):bn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At($r(e.integerValue));else if("doubleValue"in e){const n=$r(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),ip(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ho(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(pl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?C4(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Tv(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Ct()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At($r(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),pt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}lc.vt=new lc;function DO(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function xE(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=DO(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class RO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=xE(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=xE(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class MO{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class OO{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fh{constructor(){this.jt=new RO,this.Ht=new MO(this.jt),this.Jt=new OO(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new cc(this.indexId,this.documentKey,this.arrayValue,n)}}function CA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=bE(t.arrayValue,e.arrayValue),r!==0?r:(r=bE(t.directionalValue,e.directionalValue),r!==0?r:pt.comparator(t.documentKey,e.documentKey)))}function bE(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.Xt=new Fr((r,n)=>Jr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(It(e.collectionGroup===this.collectionId),this.nn)return!1;const r=l2(e);if(r!==void 0&&!this.sn(r))return!1;const n=sc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[i];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Fr(Jr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Kg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Kg(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Kg(n.field,n.dir==="asc"?0:1)));return new Q0(Q0.UNKNOWN_ID,this.collectionId,r,sp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){var e,r;if(It(t instanceof ar||t instanceof Er),t instanceof ar){if(t instanceof P4){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>ar.create(t.field,"==",i)))||[];return Er.create(s,"or")}return t}const n=t.filters.map(s=>uT(s));return Er.create(n,t.op)}function HO(t){if(t.getFilters().length===0)return[];const e=B2(uT(t));return It(dT(e)),x2(e)||b2(e)?[e]:e.getFilters()}function x2(t){return t instanceof ar}function b2(t){return t instanceof Er&&Pb(t)}function dT(t){return x2(t)||b2(t)||function(r){if(r instanceof Er&&h2(r)){for(const n of r.getFilters())if(!x2(n)&&!b2(n))return!1;return!0}return!1}(t)}function B2(t){if(It(t instanceof ar||t instanceof Er),t instanceof ar)return t;if(t.filters.length===1)return B2(t.filters[0]);const e=t.filters.map(n=>B2(n));let r=Er.create(e,t.op);return r=R0(r),dT(r)?r:(It(r instanceof Er),It(Td(r)),It(r.filters.length>1),r.filters.reduce((n,s)=>Ob(n,s)))}function Ob(t,e){let r;return It(t instanceof ar||t instanceof Er),It(e instanceof ar||e instanceof Er),r=t instanceof ar?e instanceof ar?function(s,i){return Er.create([s,i],"and")}(t,e):CE(t,e):e instanceof ar?CE(e,t):function(s,i){if(It(s.filters.length>0&&i.filters.length>0),Td(s)&&Td(i))return F4(s,i.getFilters());const a=h2(s)?s:i,o=h2(s)?i:s,l=a.filters.map(c=>Ob(c,o));return Er.create(l,"or")}(t,e),R0(r)}function CE(t,e){if(Td(e))return F4(e,t.getFilters());{const r=e.filters.map(n=>Ob(t,n));return Er.create(r,"or")}}function R0(t){if(It(t instanceof ar||t instanceof Er),t instanceof ar)return t;const e=t.getFilters();if(e.length===1)return R0(e[0]);if(I4(t))return t;const r=e.map(s=>R0(s)),n=[];return r.forEach(s=>{s instanceof ar?n.push(s):s instanceof Er&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Er.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.un=new Hb}addToCollectionParentIndex(e,r){return this.un.add(r),Fe.resolve()}getCollectionParents(e,r){return Fe.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Fe.resolve()}deleteFieldIndex(e,r){return Fe.resolve()}deleteAllFieldIndexes(e){return Fe.resolve()}createTargetIndexes(e,r){return Fe.resolve()}getDocumentsMatchingTarget(e,r){return Fe.resolve(null)}getIndexType(e,r){return Fe.resolve(0)}getFieldIndexes(e,r){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,r){return Fe.resolve(di.min())}getMinOffsetFromCollectionGroup(e,r){return Fe.resolve(di.min())}updateCollectionGroup(e,r,n){return Fe.resolve()}updateIndexEntries(e,r){return Fe.resolve()}}class Hb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Fr(hr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Fr(hr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Uint8Array(0);class KO{constructor(e,r){this.databaseId=r,this.cn=new Hb,this.ln=new Fl(n=>kc(n),(n,s)=>jp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Qs(s)};return EE(e).put(i)}return Fe.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[h4(r),""],!1,!0);return EE(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(La(a.parent))}return n})}addFieldIndex(e,r){const n=Th(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=Bu(e);return i.next(o=>{a.put(vE(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Th(e),s=Bu(e),i=bu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Th(e),n=bu(e),s=Bu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Fe.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new BE(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=bu(e);let s=!0;const i=new Map;return Fe.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=er();const o=[];return Fe.forEach(i,(l,c)=>{Ze("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(l)} to execute ${kc(r)}`);const u=function(N,O){const R=l2(O);if(R===void 0)return null;for(const M of j0(N,R.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(c,l),h=function(N,O){const R=new Map;for(const M of sc(O))for(const F of j0(N,M.fieldPath))switch(F.op){case"==":case"in":R.set(M.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return R.set(M.fieldPath.canonicalString(),F.value),Array.from(R.values())}return null}(c,l),m=function(N,O){const R=[];let M=!0;for(const F of sc(O)){const E=F.kind===0?nE(N,F.fieldPath,N.startAt):sE(N,F.fieldPath,N.startAt);R.push(E.value),M&&(M=E.inclusive)}return new Fd(R,M)}(c,l),p=function(N,O){const R=[];let M=!0;for(const F of sc(O)){const E=F.kind===0?sE(N,F.fieldPath,N.endAt):nE(N,F.fieldPath,N.endAt);R.push(E.value),M&&(M=E.inclusive)}return new Fd(R,M)}(c,l),b=this.In(l,c,m),B=this.In(l,c,p),_=this.Tn(l,c,h),y=this.En(l.indexId,u,b,m.inclusive,B,p.inclusive,_);return Fe.forEach(y,w=>n.G(w,r.limit).next(N=>{N.forEach(O=>{const R=pt.fromSegments(O.documentKey);a.has(R)||(a=a.add(R),o.push(R))})}))}).next(()=>o)}return Fe.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=HO(Er.create(e.filters,"and")).map(n=>p2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,i.length),c=l/(r!=null?r.length:1),u=[];for(let h=0;h<l;++h){const m=r?this.dn(r[h/c]):Rm,p=this.An(e,m,n[h%c],s),b=this.Rn(e,m,i[h%c],a),B=o.map(_=>this.An(e,m,_,!0));u.push(...this.createRange(p,b,B))}return u}An(e,r,n,s){const i=new cc(e,pt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new cc(e,pt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new BE(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Fe.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(l){let c=new Fr(Jr.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Fh;for(const s of sc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);lc.vt.It(i,a)}return n.zt()}dn(e){const r=new Fh;return lc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Fh;return lc.vt.It(Ap(this.databaseId,r),n.Yt(function(i){const a=sc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Fh);let i=0;for(const a of sc(e)){const o=n[i++];for(const l of s)if(this.fn(r,a.fieldPath)&&lp(o))s=this.gn(s,a,o);else{const c=l.Yt(a.kind);lc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const l=new Fh;l.seed(o.zt()),lc.vt.It(a,l.Yt(r.kind)),i.push(l)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof ar&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Th(e),s=Bu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Fe.forEach(i,o=>s.get([o.indexId,this.uid]).next(l=>{a.push(function(u,h){const m=h?new sp(h.sequenceNumber,new di(Rc(h.readTime),new pt(La(h.documentKey)),h.largestBatchId)):sp.empty(),p=u.fields.map(([b,B])=>new Kg(Jr.fromServerFormat(b),B));return new Q0(u.indexId,u.collectionGroup,p,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:$t(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Th(e),i=Bu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Fe.forEach(o,l=>i.put(vE(l.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Fe.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Fe.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Fe.forEach(o,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?Fe.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,r,n,s){return bu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return bu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=bu(e);let i=new Fr(CA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new cc(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new Fr(CA);const s=this.Vn(r,e);if(s==null)return n;const i=l2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(lp(a))for(const o of a.arrayValue.values||[])n=n.add(new cc(r.indexId,e.key,this.dn(o),s))}else n=n.add(new cc(r.indexId,e.key,Rm,s));return n}bn(e,r,n,s,i){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(l,c,u,h,m){const p=l.getIterator(),b=c.getIterator();let B=xu(p),_=xu(b);for(;B||_;){let y=!1,w=!1;if(B&&_){const N=u(B,_);N<0?w=!0:N>0&&(y=!0)}else B!=null?w=!0:y=!0;y?(h(_),_=xu(b)):w?(m(B),B=xu(p)):(B=xu(p),_=xu(b))}}(s,i,CA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Fe.waitFor(a)}yn(e){let r=1;return Bu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>CA(a,o)).filter((a,o,l)=>!o||CA(a,l[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=CA(a,e),l=CA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(a),s.push(a.Zt());else if(l>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Rm,[]],l=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Rm,[]];i.push(IDBKeyRange.bound(o,l))}return i}Cn(e,r){return CA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(_E)}getMinOffset(e,r){return Fe.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Ct())).next(_E)}}function EE(t){return jn(t,"collectionParents")}function bu(t){return jn(t,"indexEntries")}function Th(t){return jn(t,"indexConfiguration")}function Bu(t){return jn(t,"indexState")}function _E(t){It(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Ib(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new di(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},(u,h,m)=>(o++,m.delete()));i.push(l.next(()=>{It(o===1)}));const c=[];for(const u of r.mutations){const h=v4(e,u.key.path,r.batchId);i.push(s.delete(h)),c.push(u.key)}return Fe.waitFor(i).next(()=>c)}function M0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ct();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class kv{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){It(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kv(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return EA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Vu(e),a=EA(e);return a.add({}).next(o=>{It(typeof o=="number");const l=new jb(o,r,n,s),c=function(p,b,B){const _=B.baseMutations.map(w=>fp(p.ct,w)),y=B.mutations.map(w=>fp(p.ct,w));return{userId:b,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.serializer,this.userId,l),u=[];let h=new Fr((m,p)=>$t(m.canonicalString(),p.canonicalString()));for(const m of s){const p=v4(this.userId,m.key.path,o);h=h.add(m.key.path.popLast()),u.push(a.put(c)),u.push(i.put(p,CM))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),Fe.waitFor(u).next(()=>l)})}lookupMutationBatch(e,r){return EA(e).get(r).next(n=>n?(It(n.userId===this.userId),Ac(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Fe.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return EA(e).J({index:"userMutationsIndex",range:s},(a,o,l)=>{o.userId===this.userId&&(It(o.batchId>=n),i=Ac(this.serializer,o)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return EA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return EA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ac(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=qg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Vu(e).J({range:s},(a,o,l)=>{const[c,u,h]=a,m=La(u);if(c===this.userId&&r.path.isEqual(m))return EA(e).get(h).next(p=>{if(!p)throw Ct();It(p.userId===this.userId),i.push(Ac(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Fr($t);const s=[];return r.forEach(i=>{const a=qg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),l=Vu(e).J({range:o},(c,u,h)=>{const[m,p,b]=c,B=La(p);m===this.userId&&i.path.isEqual(B)?n=n.add(b):h.done()});s.push(l)}),Fe.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=qg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new Fr($t);return Vu(e).J({range:a},(l,c,u)=>{const[h,m,p]=l,b=La(m);h===this.userId&&n.isPrefixOf(b)?b.length===s&&(o=o.add(p)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(EA(e).get(i).next(a=>{if(a===null)throw Ct();It(a.userId===this.userId),n.push(Ac(this.serializer,a))}))}),Fe.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return hT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Fe.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Fe.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Vu(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const l=La(i[1]);s.push(l)}else o.done()}).next(()=>{It(s.length===0)})})}containsKey(e,r){return fT(e,this.userId,r)}Nn(e){return pT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fT(t,e,r){const n=qg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Vu(t).J({range:i,H:!0},(o,l,c)=>{const[u,h,m]=o;u===e&&h===s&&(a=!0),c.done()}).next(()=>a)}function EA(t){return jn(t,"mutations")}function Vu(t){return jn(t,"documentMutations")}function pT(t){return jn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mc(0)}static kn(){return new Mc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Mc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Ft.fromTimestamp(new jt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Cu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(It(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Cu(e).J((a,o)=>{const l=ef(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>Fe.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Cu(e).J((n,s)=>{const i=ef(s);r(i)})}qn(e){return IE(e).get("targetGlobalKey").next(r=>(It(r!==null),r))}Qn(e,r){return IE(e).put("targetGlobalKey",r)}Kn(e,r){return Cu(e).put(lT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=kc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cu(e).J({range:s,index:"queryTargetsIndex"},(a,o,l)=>{const c=ef(o);jp(r,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=MA(e);return r.forEach(a=>{const o=Qs(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Fe.waitFor(s)}removeMatchingKeys(e,r,n){const s=MA(e);return Fe.forEach(r,i=>{const a=Qs(i.path);return Fe.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=MA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=MA(e);let i=er();return s.J({range:n,H:!0},(a,o,l)=>{const c=La(a[1]),u=new pt(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=Qs(r.path),s=IDBKeyRange.bound([n],[h4(n)],!1,!0);let i=0;return MA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],l,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Cu(e).get(r).next(n=>n?ef(n):null)}}function Cu(t){return jn(t,"targets")}function IE(t){return jn(t,"targetGlobal")}function MA(t){return jn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE([t,e],[r,n]){const s=$t(t,r);return s===0?$t(e,n):s}class GO{constructor(e){this.Un=e,this.buffer=new Fr(SE),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();SE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class zO{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Sl(r)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Kc(r)}await this.Hn(3e5)})}}class $O{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Fe.resolve(Ui.oe);const n=new GO(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(NE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Ru()<=ir.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function WO(t,e){return new $O(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.db=e,this.garbageCollector=WO(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Mm(e,n)}removeReference(e,r,n){return Mm(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Mm(e,r)}nr(e,r){return function(s,i){let a=!1;return pT(s).Y(o=>fT(s,o,i).next(l=>(l&&(a=!0),Fe.resolve(!l)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const l=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Ft.min()),MA(e).delete(function(h){return[0,Qs(h.path)]}(a))))});s.push(l)}}).next(()=>Fe.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Mm(e,r)}tr(e,r){const n=MA(e);let s,i=Ui.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:l,sequenceNumber:c})=>{a===0?(i!==Ui.oe&&r(new pt(La(s)),i),i=c,s=l):i=Ui.oe}).next(()=>{i!==Ui.oe&&r(new pt(La(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mm(t,e){return MA(t).put(function(n,s){return{targetId:0,path:Qs(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.changes=new Fl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Fe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Jl(e).put(n)}removeEntry(e,r,n){return Jl(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],D0(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Xr.newInvalidDocument(r);return Jl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Xr.newInvalidDocument(r)};return Jl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uh(r))},(s,i)=>{n={document:this.ir(r,i),size:M0(i)}}).next(()=>n)}getEntries(e,r){let n=Ai();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Ai(),s=new en(pt.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,M0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Fe.resolve();let s=new Fr(UE);r.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Uh(s.first()),Uh(s.last())),a=s.getIterator();let o=a.getNext();return Jl(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const h=pt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&UE(o,h)<0;)n(o,null),o=a.getNext();o&&o.isEqual(h)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$(Uh(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),D0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jl(e).U(IDBKeyRange.bound(o,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Ai();for(const h of c){const m=this.ir(pt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(Dp(r,m)||s.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=Ai();const a=TE(r,n),o=TE(r,di.max());return Jl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(l,c,u)=>{const h=this.ir(pt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new YO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return FE(e).get("remoteDocumentGlobalKey").next(r=>(It(!!r),r))}rr(e,r){return FE(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=LO(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ft.min())))return n}return Xr.newInvalidDocument(e)}}function gT(t){return new JO(t)}class YO extends mT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Fl(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Fr((i,a)=>$t(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const l=mE(this.cr.serializer,a);s=s.add(i.path.popLast());const c=M0(l);n+=c-o.size,r.push(this.cr.addEntry(e,i,l))}else if(n-=o.size,this.trackRemovals){const l=mE(this.cr.serializer,a.convertToNoDocument(Ft.min()));r.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Fe.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function FE(t){return jn(t,"remoteDocumentGlobal")}function Jl(t){return jn(t,"remoteDocumentsV14")}function Uh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TE(t,e){const r=e.documentKey.path.toArray();return[t,D0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function UE(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=$t(r[i],n[i]),s)return s;return s=$t(r.length,n.length),s||(s=$t(r[r.length-2],n[n.length-2]),s||$t(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Bf(n.mutation,s,zs.empty(),jt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,er()).next(()=>n))}getLocalViewOfDocuments(e,r,n=er()){const s=ja();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Yh();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=ja();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,er()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Ai();const a=bf(),o=function(){return bf()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Go)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Bf(u.mutation,c,u.mutation.getFieldMask(),jt.now())):a.set(c.key,zs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var h;return o.set(c,new ZO(u,(h=a.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,r){const n=bf();let s=new en((a,o)=>a-o),i=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||zs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const h=(s.get(o.batchId)||er()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,h=R4();u.forEach(m=>{if(!i.has(m)){const p=q4(r.get(m),n.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Fe.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return pt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Q4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Fe.resolve(ja());let o=-1,l=i;return a.next(c=>Fe.forEach(c,(u,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),i.get(u)?Fe.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,er())).next(u=>({batchId:o,changes:D4(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new pt(r)).next(n=>{let s=Yh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Yh();return this.indexManager.getCollectionParents(e,i).next(o=>Fe.forEach(o,l=>{const c=function(h,m){return new Gd(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Xr.newInvalidDocument(u)))});let o=Yh();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Bf(u.mutation,c,zs.empty(),jt.now()),Dp(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Fe.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:qn(s.createTime)}}(r)),Fe.resolve()}getNamedQuery(e,r){return Fe.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:cT(s.bundledQuery),readTime:qn(s.readTime)}}(r)),Fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.overlays=new en(pt.comparator),this.Ir=new Map}getOverlay(e,r){return Fe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ja();return Fe.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Fe.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Fe.resolve()}getOverlaysForCollection(e,r,n){const s=ja(),i=r.length+1,a=new pt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Fe.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new en((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=ja(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=ja(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Fe.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Db(r,n));let i=this.Ir.get(r);i===void 0&&(i=er(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return Fe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Tr=new Fr(Hn.Er),this.dr=new Fr(Hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Hn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Hn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new pt(new hr([])),n=new Hn(r,e),s=new Hn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new pt(new hr([])),n=new Hn(r,e),s=new Hn(r,e+1);let i=er();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Hn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Hn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return pt.comparator(e.key,r.key)||$t(e.wr,r.wr)}static Ar(e,r){return $t(e.wr,r.wr)||pt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Fr(Hn.Er)}checkEmpty(e){return Fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jb(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Hn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Fe.resolve(a)}lookupMutationBatch(e,r){return Fe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Fe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Hn(r,0),s=new Hn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Fe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Fr($t);return r.forEach(s=>{const i=new Hn(s,0),a=new Hn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Fe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;pt.isDocumentKey(i)||(i=i.child(""));const a=new Hn(new pt(i),0);let o=new Fr($t);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Fe.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){It(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Fe.forEach(r.mutations,s=>{const i=new Hn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Hn(r,0),s=this.br.firstAfterOrEqual(n);return Fe.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fe.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.Mr=e,this.docs=function(){return new en(pt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Fe.resolve(n?n.document.mutableCopy():Xr.newInvalidDocument(r))}getEntries(e,r){let n=Ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Xr.newInvalidDocument(s))}),Fe.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ai();const a=r.path,o=new pt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ib(f4(u),n)<=0||(s.has(u.key)||Dp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Fe.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ct()}Or(e,r){return Fe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new i8(this)}getSize(e){return Fe.resolve(this.size)}}class i8 extends mT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Fe.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.persistence=e,this.Nr=new Fl(r=>kc(r),jp),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vb,this.targetCount=0,this.kr=Mc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Fe.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Mc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Fe.resolve()}updateTargetData(e,r){return this.Kn(r),Fe.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Fe.waitFor(i).next(()=>s)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Fe.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Fe.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Fe.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Fe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Fe.resolve(n)}containsKey(e,r){return Fe.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ui(0),this.Kr=!1,this.Kr=!0,this.$r=new r8,this.referenceDelegate=e(this),this.Ur=new a8(this),this.indexManager=new VO,this.remoteDocumentCache=function(s){return new s8(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new AT(r),this.Gr=new e8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new t8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new n8(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ze("MemoryPersistence","Starting transaction:",e);const s=new o8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Fe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class o8 extends m4{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Jr=new Vb,this.Yr=null}static Zr(e){return new Dv(e)}get Xr(){if(this.Yr)return this.Yr;throw Ct()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Fe.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Fe.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Fe.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.Xr,n=>{const s=pt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Ft.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Fe.or([()=>Fe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Fv("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G5,{unique:!0}),l.createObjectStore("documentMutations")}(e),PE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=Fe.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),PE(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G5,{unique:!0});const h=c.store("mutations"),m=u.map(p=>h.put(p));return Fe.waitFor(m)})}(e,i))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:jM});c.createIndex("collectionPathOverlayIndex",kM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",DM,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:EM});c.createIndex("documentKeyIndex",_M),c.createIndex("collectionGroupIndex",NM)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:UM}).createIndex("sequenceNumberIndex",PM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:QM}).createIndex("documentKeyIndex",LM,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=M0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Fe.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Fe.forEach(o,l=>{It(l.userId===i.userId);const c=Ac(this.serializer,l);return hT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const l=new hr(a),c=function(h){return[0,Qs(h)]}(l);i.push(r.get(c).next(u=>u?Fe.resolve():(h=>r.put({targetId:0,path:Qs(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>Fe.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:TM});const n=r.store("collectionParents"),s=new Hb,i=a=>{if(s.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:Qs(l)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const l=new hr(a);return i(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,l],c)=>{const u=La(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=ef(s),a=lT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),l=function(h){return h.document?new pt(hr.fromString(h.document.name).popFirst(5)):h.noDocument?pt.fromSegments(h.noDocument.path):h.unknownDocument?pt.fromSegments(h.unknownDocument.path):Ct()}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Fe.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=gT(this.serializer),i=new wT(Dv.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(l=>{var c;let u=(c=o.get(l.userId))!==null&&c!==void 0?c:er();Ac(this.serializer,l).keys().forEach(h=>u=u.add(h)),o.set(l.userId,u)}),Fe.forEach(o,(l,c)=>{const u=new ts(c),h=jv.lt(this.serializer,u),m=i.getIndexManager(u),p=kv.lt(u,this.serializer,m,i.referenceDelegate);return new vT(s,p,h,m).recalculateAndSaveOverlaysForDocumentKeys(new c2(r,Ui.oe),l).next()})})}}function PE(t){t.createObjectStore("targetDocuments",{keyPath:SM}).createIndex("documentTargetsIndex",FM,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IM,{unique:!0}),t.createObjectStore("targetGlobal")}const vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kb{constructor(e,r,n,s,i,a,o,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!Kb.D())throw new it(Oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XO(this,s),this.Ai=r+"main",this.serializer=new AT(l),this.Ri=new ol(this.Ai,this.hi,new A8(this.serializer)),this.$r=new kO,this.Ur=new qO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gT(this.serializer),this.Gr=new jO,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Ts("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it(Oe.FAILED_PRECONDITION,vy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ui(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Sl(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ph(e).get("owner").next(r=>Fe.resolve(this.vi(r)))}Ci(e){return Om(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=jn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Fe.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Fe.resolve(!0):Ph(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new it(Oe.FAILED_PRECONDITION,vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Om(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Ze("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new c2(e,Ui.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Om(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return kv.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KO(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ze("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(l){return l===17?OM:l===16?MM:l===15?Fb:l===14?x4:l===13?y4:l===12?RM:l===11?w4:void Ct()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new c2(o,this.Qr?this.Qr.next():Ui.oe),r==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw Ts(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new it(Oe.FAILED_PRECONDITION,p4);return n(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Ph(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new it(Oe.FAILED_PRECONDITION,vy)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ph(e).put("owner",r)}static D(){return ol.D()}bi(e){const r=Ph(e);return r.get("owner").next(n=>this.vi(n)?(Ze("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Fe.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ts(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;mF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ze("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ts("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ts("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ph(t){return jn(t,"owner")}function Om(t){return jn(t,"clientMetadata")}function l8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=er(),s=er();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mF()?8:g4(Ln())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new c8;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ru()<=ir.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",Mu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Fe.resolve()):(Ru()<=ir.DEBUG&&Ze("QueryEngine","Query:",Mu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ru()<=ir.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",Mu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(r))):Fe.resolve())}Yi(e,r){if(iE(r))return Fe.resolve(null);let n=ji(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=k0(r,null,"F"),n=ji(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=er(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,k0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return iE(r)||s.isEqual(Ft.min())?Fe.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Fe.resolve(null):(Ru()<=ir.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mu(r)),this.rs(e,a,r,gM(s,-1)).next(o=>o))})}ts(e,r){let n=new Fr(j4(e));return r.forEach((s,i)=>{Dp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ru()<=ir.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Mu(r)),this.Ji.getDocumentsMatchingQuery(e,r,di.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new en($t),this._s=new Fl(i=>kc(i),jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function xT(t,e,r,n){return new u8(t,e,r,n)}async function bT(t,e){const r=Ht(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=er();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function d8(t,e){const r=Ht(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const h=c.batch,m=h.keys();let p=Fe.resolve();return m.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(B=>{const _=c.docVersions.get(b);It(_!==null),B.version.compareTo(_)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),u.addEntry(B)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=er();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function BT(t){const e=Ht(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function h8(t,e){const r=Ht(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,h)=>{const m=s.get(h);if(!m)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(bn.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(h,p),function(B,_,y){return B.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,p,u)&&o.push(r.Ur.updateTargetData(i,p))});let l=Ai(),c=er();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(f8(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Ft.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(h=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Fe.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function f8(t,e,r){let n=er(),s=er();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Ai();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Ft.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ze("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function p8(t,e){const r=Ht(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function m8(t,e){const r=Ht(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Fe.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new _o(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function C2(t,e,r){const n=Ht(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Sl(a))throw a;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function QE(t,e,r){const n=Ht(t);let s=Ft.min(),i=er();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=Ht(l),m=h._s.get(u);return m!==void 0?Fe.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(n,a,ji(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Ft.min(),r?i:er())).next(o=>(g8(n,rO(e),o),{documents:o,Ts:i})))}function g8(t,e,r){let n=t.us.get(e)||Ft.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class LE{constructor(){this.activeTargetIds=AO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CT{constructor(){this.so=new LE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm=null;function wy(){return Hm===null?Hm=function(){return 268435456+Math.round(2147483648*Math.random())}():Hm++,"0x"+Hm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="WebChannelConnection";class x8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=wy(),l=this.xo(r,n.toUriEncodedString());Ze("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(Ze("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw fl("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=w8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=wy();return new Promise((a,o)=>{const l=new a4;l.setWithCredentials(!0),l.listenOnce(o4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vg.NO_ERROR:const u=l.getResponseJson();Ze(fs,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Vg.TIMEOUT:Ze(fs,`RPC '${e}' ${i} timed out`),o(new it(Oe.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const h=l.getStatus();if(Ze(fs,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const b=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(Oe).indexOf(y)>=0?y:Oe.UNKNOWN}(p.status);o(new it(b,p.message))}else o(new it(Oe.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new it(Oe.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{Ze(fs,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Ze(fs,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=wy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=c4(),o=l4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");Ze(fs,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=a.createWebChannel(u,l);let m=!1,p=!1;const b=new y8({Io:_=>{p?Ze(fs,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(Ze(fs,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Ze(fs,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),B=(_,y,w)=>{_.listen(y,N=>{try{w(N)}catch(O){setTimeout(()=>{throw O},0)}})};return B(h,Jh.EventType.OPEN,()=>{p||(Ze(fs,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),B(h,Jh.EventType.CLOSE,()=>{p||(p=!0,Ze(fs,`RPC '${e}' stream ${s} transport closed`),b.So())}),B(h,Jh.EventType.ERROR,_=>{p||(p=!0,fl(fs,`RPC '${e}' stream ${s} transport errored:`,_),b.So(new it(Oe.UNAVAILABLE,"The operation could not be completed")))}),B(h,Jh.EventType.MESSAGE,_=>{var y;if(!p){const w=_.data[0];It(!!w);const N=w,O=N.error||((y=N[0])===null||y===void 0?void 0:y.error);if(O){Ze(fs,`RPC '${e}' stream ${s} received error:`,O);const R=O.status;let M=function(L){const D=En[L];if(D!==void 0)return $4(D)}(R),F=O.message;M===void 0&&(M=Oe.INTERNAL,F="Unknown error status: "+R+" with message "+O.message),p=!0,b.So(new it(M,F)),h.close()}else Ze(fs,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),B(o,A4.STAT_EVENT,_=>{_.stat===A2.PROXY?Ze(fs,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===A2.NOPROXY&&Ze(fs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return typeof window<"u"?window:null}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){return new CO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Ze("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gb(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Oe.RESOURCE_EXHAUSTED?(Ts(r.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new it(Oe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B8 extends ET{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=IO(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ft.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ft.min():a.readTime?qn(a.readTime):Ft.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=w2(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=L0(l)?{documents:rT(i,l)}:{query:nT(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=J4(i,a.resumeToken);const c=g2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ft.min())>0){o.readTime=Qd(i,a.snapshotVersion.toTimestamp());const c=g2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=FO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=w2(this.serializer),r.removeTarget=e,this.a_(r)}}class C8 extends ET{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return It(!!e.streamToken),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=SO(e.writeResults,e.commitTime),n=qn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=w2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>fp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new it(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,v2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new it(Oe.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,v2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new it(Oe.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ts(r),this.D_=!1):Ze("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Gc(this)&&(Ze("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ht(l);c.L_.add(4),await Mp(c),c.q_.set("Unknown"),c.L_.delete(4),await Mv(c)}(this))})}),this.q_=new _8(n,s)}}async function Mv(t){if(Gc(t))for(const e of t.B_)await e(!0)}async function Mp(t){for(const e of t.B_)await e(!1)}function _T(t,e){const r=Ht(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Xb(r)?Wb(r):Wd(r).r_()&&$b(r,e))}function zb(t,e){const r=Ht(t),n=Wd(r);r.N_.delete(e),n.r_()&&NT(r,e),r.N_.size===0&&(n.r_()?n.o_():Gc(r)&&r.q_.set("Unknown"))}function $b(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Wd(t).A_(e)}function NT(t,e){t.Q_.xe(e),Wd(t).R_(e)}function Wb(t){t.Q_=new yO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wd(t).start(),t.q_.v_()}function Xb(t){return Gc(t)&&!Wd(t).n_()&&t.N_.size>0}function Gc(t){return Ht(t).L_.size===0}function IT(t){t.Q_=void 0}async function I8(t){t.q_.set("Online")}async function S8(t){t.N_.forEach((e,r)=>{$b(t,e)})}async function F8(t,e){IT(t),Xb(t)?(t.q_.M_(e),Wb(t)):t.q_.set("Unknown")}async function T8(t,e,r){if(t.q_.set("Online"),e instanceof X4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await O0(t,n)}else if(e instanceof Wg?t.Q_.Ke(e):e instanceof W4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ft.min()))try{const n=await BT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(bn.EMPTY_BYTE_STRING,u.snapshotVersion)),NT(i,l);const h=new _o(u.target,l,c,u.sequenceNumber);$b(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Ze("RemoteStore","Failed to raise snapshot:",n),await O0(t,n)}}async function O0(t,e,r){if(!Sl(e))throw e;t.L_.add(1),await Mp(t),t.q_.set("Offline"),r||(r=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ze("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Mv(t)})}function ST(t,e){return e().catch(r=>O0(t,r,e))}async function Op(t){const e=Ht(t),r=vl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U8(e);)try{const s=await p8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,P8(e,s)}catch(s){await O0(e,s)}FT(e)&&TT(e)}function U8(t){return Gc(t)&&t.O_.length<10}function P8(t,e){t.O_.push(e);const r=vl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function FT(t){return Gc(t)&&!vl(t).n_()&&t.O_.length>0}function TT(t){vl(t).start()}async function Q8(t){vl(t).p_()}async function L8(t){const e=vl(t);for(const r of t.O_)e.m_(r.mutations)}async function j8(t,e,r){const n=t.O_.shift(),s=kb.from(n,e,r);await ST(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Op(t)}async function k8(t,e){e&&vl(t).V_&&await async function(n,s){if(function(a){return z4(a)&&a!==Oe.ABORTED}(s.code)){const i=n.O_.shift();vl(n).s_(),await ST(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Op(n)}}(t,e),FT(t)&&TT(t)}async function kE(t,e){const r=Ht(t);r.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const n=Gc(r);r.L_.add(3),await Mp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Mv(r)}async function D8(t,e){const r=Ht(t);e?(r.L_.delete(2),await Mv(r)):e||(r.L_.add(2),await Mp(r),r.q_.set("Unknown"))}function Wd(t){return t.K_||(t.K_=function(r,n,s){const i=Ht(r);return i.w_(),new B8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:I8.bind(null,t),Ro:S8.bind(null,t),mo:F8.bind(null,t),d_:T8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xb(t)?Wb(t):t.q_.set("Unknown")):(await t.K_.stop(),IT(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(r,n,s){const i=Ht(r);return i.w_(),new C8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q8.bind(null,t),mo:k8.bind(null,t),f_:L8.bind(null,t),g_:j8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Op(t)):(await t.U_.stop(),t.O_.length>0&&(Ze("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Jb(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(Oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yb(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),Sl(t))return new it(Oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||pt.comparator(r.key,n.key):(r,n)=>pt.comparator(r.key,n.key),this.keyedMap=Yh(),this.sortedSet=new en(this.comparator)}static emptySet(e){return new gd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof gd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new gd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.W_=new en(pt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ct():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ld{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Ld(e,r,gd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class M8{constructor(){this.queries=RE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Ht(r),i=s.queries;s.queries=RE(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new it(Oe.ABORTED,"Firestore shutting down"))}}function RE(){return new Fl(t=>L4(t),Uv)}async function Zb(t,e){const r=Ht(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new R8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=Yb(a,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&tB(r)}async function eB(t,e){const r=Ht(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function O8(t,e){const r=Ht(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&tB(r)}function H8(t,e,r){const n=Ht(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function tB(t){t.Y_.forEach(e=>{e.next()})}var E2,ME;(ME=E2||(E2={})).ea="default",ME.Cache="cache";class rB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ld(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==E2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class V8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=er(),this.mutatedKeys=er(),this.Aa=j4(e),this.Ra=new gd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new DE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const m=s.get(u),p=Dp(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),B=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?b!==B&&(n.track({type:3,doc:p}),_=!0):this.ga(m,p)||(n.track({type:2,doc:p}),_=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!m&&p?(n.track({type:0,doc:p}),_=!0):m&&!p&&(n.track({type:1,doc:m}),_=!0,(l||c)&&(o=!0)),_&&(p?(a=a.add(p),i=B?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,h)=>function(p,b){const B=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return B(p)-B(b)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Ld(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new DE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=er(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new PT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new UT(n))}),r}ba(e){this.Ta=e.Ts,this.da=er();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ld.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class K8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class q8{constructor(e){this.key=e,this.va=!1}}class G8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Fl(o=>L4(o),Uv),this.Ma=new Map,this.xa=new Set,this.Oa=new en(pt.comparator),this.Na=new Map,this.La=new Vb,this.Ba={},this.ka=new Map,this.qa=Mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function z8(t,e,r=!0){const n=RT(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await QT(n,e,r,!0),s}async function $8(t,e){const r=RT(t);await QT(r,e,!0,!1)}async function QT(t,e,r,n){const s=await m8(t.localStore,ji(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await W8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&_T(t.remoteStore,s),o}async function W8(t,e,r,n,s){t.Ka=(h,m,p)=>async function(B,_,y,w){let N=_.view.ma(y);N.ns&&(N=await QE(B.localStore,_.query,!1).then(({documents:F})=>_.view.ma(F,N)));const O=w&&w.targetChanges.get(_.targetId),R=w&&w.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(N,B.isPrimaryClient,O,R);return HE(B,_.targetId,M.wa),M.snapshot}(t,h,m,p);const i=await QE(t.localStore,e,!0),a=new V8(e,i.Ts),o=a.ma(i.documents),l=Rp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);HE(t,r,c.wa);const u=new K8(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function X8(t,e,r){const n=Ht(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Uv(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await C2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&zb(n.remoteStore,s.targetId),_2(n,s.targetId)}).catch(Kc)):(_2(n,s.targetId),await C2(n.localStore,s.targetId,!0))}async function J8(t,e){const r=Ht(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zb(r.remoteStore,n.targetId))}async function Y8(t,e,r){const n=MT(t);try{const s=await function(a,o){const l=Ht(a),c=jt.now(),u=o.reduce((p,b)=>p.add(b.key),er());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=Ai(),B=er();return l.cs.getEntries(p,u).next(_=>{b=_,b.forEach((y,w)=>{w.isValidDocument()||(B=B.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(_=>{h=_;const y=[];for(const w of o){const N=mO(w,h.get(w.key).overlayedDocument);N!=null&&y.push(new Go(w.key,N,_4(N.value.mapValue),Yr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,y,o)}).next(_=>{m=_;const y=_.applyToLocalDocumentSet(h,B);return l.documentOverlayCache.saveOverlays(p,_.batchId,y)})}).then(()=>({batchId:m.batchId,changes:D4(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new en($t)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Hp(n,s.changes),await Op(n.remoteStore)}catch(s){const i=Yb(s,"Failed to persist write");r.reject(i)}}async function LT(t,e){const r=Ht(t);try{const n=await h8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?It(a.va):s.removedDocuments.size>0&&(It(a.va),a.va=!1))}),await Hp(r,n,e)}catch(n){await Kc(n)}}function OE(t,e,r){const n=Ht(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=Ht(a);l.onlineState=o;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(o)&&(c=!0)}),c&&tB(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Z8(t,e,r){const n=Ht(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new en(pt.comparator);a=a.insert(i,Xr.newNoDocument(i,Ft.min()));const o=er().add(i),l=new Lv(Ft.min(),new Map,new en($t),a,o);await LT(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),nB(n)}else await C2(n.localStore,e,!1).then(()=>_2(n,e,r)).catch(Kc)}async function eH(t,e){const r=Ht(t),n=e.batch.batchId;try{const s=await d8(r.localStore,e);kT(r,n,null),jT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Hp(r,s)}catch(s){await Kc(s)}}async function tH(t,e,r){const n=Ht(t);try{const s=await function(a,o){const l=Ht(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(It(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);kT(n,e,r),jT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Hp(n,s)}catch(s){await Kc(s)}}function jT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function kT(t,e,r){const n=Ht(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function _2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||DT(t,n)})}function DT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zb(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),nB(t))}function HE(t,e,r){for(const n of r)n instanceof UT?(t.La.addReference(n.key,e),rH(t,n)):n instanceof PT?(Ze("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||DT(t,n.key)):Ct()}function rH(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ze("SyncEngine","New document in limbo: "+r),t.xa.add(n),nB(t))}function nB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new pt(hr.fromString(e)),n=t.qa.next();t.Na.set(n,new q8(r)),t.Oa=t.Oa.insert(r,n),_T(t.remoteStore,new _o(ji(kp(r.path)),n,"TargetPurposeLimboResolution",Ui.oe))}}async function Hp(t,e,r){const n=Ht(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=qb.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=Ht(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Fe.forEach(c,m=>Fe.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>Fe.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Sl(h))throw h;Ze("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=u.os.get(m),b=p.snapshotVersion,B=p.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(m,B)}}}(n.localStore,i))}async function nH(t,e){const r=Ht(t);if(!r.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const n=await bT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new it(Oe.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hp(r,n.hs)}}function sH(t,e){const r=Ht(t),n=r.Na.get(e);if(n&&n.va)return er().add(n.key);{let s=er();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function RT(t){const e=Ht(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z8.bind(null,e),e.Ca.d_=O8.bind(null,e.eventManager),e.Ca.$a=H8.bind(null,e.eventManager),e}function MT(t){const e=Ht(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tH.bind(null,e),e}class pp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rv(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xT(this.persistence,new yT,e.initialUser,this.serializer)}Ga(e){return new wT(Dv.Zr,this.serializer)}Wa(e){return new CT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pp.provider={build:()=>new pp};class iH extends pp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await MT(this.Ja.syncEngine),await Op(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return xT(this.persistence,new yT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new zO(n,e.asyncQueue,r)}Ha(e,r){const n=new xM(r,this.persistence);return new yM(e.asyncQueue,n)}Ga(e){const r=l8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new Kb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,b8(),Xg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new CT}}class H0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>OE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),await D8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M8}()}createDatastore(e){const r=Rv(e.databaseInfo.databaseId),n=function(i){return new x8(i)}(e.databaseInfo);return function(i,a,o,l){return new E8(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new N8(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>OE(this.syncEngine,r,0),function(){return jE.D()?new jE:new v8}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const h=new G8(s,i,a,o,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Ht(s);Ze("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Mp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}H0.provider={build:()=>new H0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new it(Oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=Ht(s),o={documents:i.map(h=>hp(a.serializer,h))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,hr.emptyPath(),o,i.length),c=new Map;l.forEach(h=>{const m=NO(a.serializer,h);c.set(m.key.toString(),m)});const u=[];return i.forEach(h=>{const m=c.get(h.toString());It(!!m),u.push(m)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new $d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=pt.fromPath(n);this.mutations.push(new Lb(s,this.precondition(s)))}),await async function(n,s){const i=Ht(n),a={writes:s.map(o=>fp(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,hr.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Ct();r=Ft.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new it(Oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ft.min())?Yr.exists(!1):Yr.updateTime(r):Yr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ft.min()))throw new it(Oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yr.updateTime(r)}return Yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new Gb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new aH(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Lp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!z4(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=ts.UNAUTHENTICATED,this.clientId=Nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Ze("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ze("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Yb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yy(t,e){t.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await bT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function VE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await lH(t);Ze("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>kE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>kE(e.remoteStore,s)),t._onlineComponents=e}async function lH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ze("FirestoreClient","Using user provided OfflineComponentProvider");try{await yy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Oe.FAILED_PRECONDITION||s.code===Oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;fl("Error using user provided cache. Falling back to memory cache: "+r),await yy(t,new pp)}}else Ze("FirestoreClient","Using default OfflineComponentProvider"),await yy(t,new pp);return t._offlineComponents}async function iB(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ze("FirestoreClient","Using user provided OnlineComponentProvider"),await VE(t,t._uninitializedComponentsProvider._online)):(Ze("FirestoreClient","Using default OnlineComponentProvider"),await VE(t,new H0))),t._onlineComponents}function cH(t){return iB(t).then(e=>e.syncEngine)}function uH(t){return iB(t).then(e=>e.datastore)}async function V0(t){const e=await iB(t),r=e.eventManager;return r.onListen=z8.bind(null,e.syncEngine),r.onUnlisten=X8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=$8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=J8.bind(null,e.syncEngine),r}function dH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new sB({next:m=>{u.Za(),a.enqueueAndForget(()=>eB(i,h));const p=m.docs.has(o);!p&&m.fromCache?c.reject(new it(Oe.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new it(Oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new rB(kp(o.path),u,{includeMetadataChanges:!0,_a:!0});return Zb(i,h)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}function hH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new sB({next:m=>{u.Za(),a.enqueueAndForget(()=>eB(i,h)),m.fromCache&&l.source==="server"?c.reject(new it(Oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new rB(o,u,{includeMetadataChanges:!0,_a:!0});return Zb(i,h)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,r){if(!r)throw new it(Oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VT(t,e,r,n){if(e===!0&&n===!0)throw new it(Oe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function qE(t){if(!pt.isDocumentKey(t))throw new it(Oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){if(pt.isDocumentKey(t))throw new it(Oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct()}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new it(Oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ov(t);throw new it(Oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new it(Oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new it(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new it(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new it(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new it(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(Oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it(Oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new d4;switch(n.type){case"firstParty":return new dM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it(Oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=KE.get(r);n&&(Ze("ComponentProvider","Removing Datastore"),KE.delete(r),n.terminate())}(this),Promise.resolve()}}function KT(t,e,r,n={}){var s;const i=(t=Gn(t,Hv))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=ts.MOCK_USER;else{o=Sk(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new it(Oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ts(c)}t._authCredentials=new lM(new u4(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class zn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Uo extends Ka{constructor(e,r,n){super(e,r,kp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new pt(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function dt(t,e,...r){if(t=cn(t),HT("collection","path",e),t instanceof Hv){const n=hr.fromString(e,...r);return GE(n),new Uo(t,null,n)}{if(!(t instanceof zn||t instanceof Uo))throw new it(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(hr.fromString(e,...r));return GE(n),new Uo(t.firestore,null,n)}}function Pt(t,e,...r){if(t=cn(t),arguments.length===1&&(e=Nb.newId()),HT("doc","path",e),t instanceof Hv){const n=hr.fromString(e,...r);return qE(n),new zn(t,null,new pt(n))}{if(!(t instanceof zn||t instanceof Uo))throw new it(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(hr.fromString(e,...r));return qE(n),new zn(t.firestore,t instanceof Uo?t.converter:null,new pt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gb(this,"async_queue_retry"),this.Vu=()=>{const n=Xg();n&&Ze("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Xg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Xg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;Ze("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Ts("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Jb.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ct()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function WE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class hi extends Hv{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new $E,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function qT(t,e){const r=typeof t=="object"?t:mb(),n=typeof t=="string"?t:"(default)",s=fb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Nk("firestore");i&&KT(s,...i)}return s}function zc(t){if(t._terminated)throw new it(Oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GT(t),t._firestoreClient}function GT(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new VM(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,OT(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new AH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function zT(t,e){fl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return fH(t,H0.provider,{build:n=>new iH(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function fH(t,e,r){if((t=Gn(t,hi))._firestoreClient||t._terminated)throw new it(Oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new it(Oe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wl(bn.fromBase64String(e))}catch(r){throw new it(Oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wl(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new it(Oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new it(Oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new it(Oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=/^__.*__$/;class mH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,r,this.fieldTransforms):new zd(e,this.data,r,this.fieldTransforms)}}class $T{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Go(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function WT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class aB{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aB(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WT(this.Cu)&&pH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Rv(e)}Qu(e,r,n,s=!1){return new aB({Cu:e,methodName:r,qu:n,path:Jr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(t){const e=t._freezeSettings(),r=Rv(t._databaseId);return new gH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Gv(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);lB("Data must be an object, but it was:",a,n);const o=XT(n,a);let l,c;if(i.merge)l=new zs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const m=N2(e,h,r);if(!a.contains(m))throw new it(Oe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YT(u,m)||u.push(m)}l=new zs(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new mH(new ss(o),l,c)}class zv extends Vv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zv}}function oB(t,e,r,n){const s=t.Qu(1,e,r);lB("Data must be an object, but it was:",s,n);const i=[],a=ss.empty();qc(n,(l,c)=>{const u=cB(e,l,r);c=cn(c);const h=s.Nu(u);if(c instanceof zv)i.push(u);else{const m=Vp(c,h);m!=null&&(i.push(u),a.set(u,m))}});const o=new zs(i);return new $T(a,o,s.fieldTransforms)}function AB(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[N2(e,n,r)],l=[s];if(i.length%2!=0)throw new it(Oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(N2(e,i[m])),l.push(i[m+1]);const c=[],u=ss.empty();for(let m=o.length-1;m>=0;--m)if(!YT(c,o[m])){const p=o[m];let b=l[m];b=cn(b);const B=a.Nu(p);if(b instanceof zv)c.push(p);else{const _=Vp(b,B);_!=null&&(c.push(p),u.set(p,_))}}const h=new zs(c);return new $T(u,h,a.fieldTransforms)}function vH(t,e,r,n=!1){return Vp(r,t.Qu(n?4:3,e))}function Vp(t,e){if(JT(t=cn(t)))return lB("Unsupported field value:",e,t),XT(t,e);if(t instanceof Vv)return function(n,s){if(!WT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Vp(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=cn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return lO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=jt.fromDate(n);return{timestampValue:Qd(s.serializer,i)}}if(n instanceof jt){const i=new jt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Qd(s.serializer,i)}}if(n instanceof Kv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wl)return{bytesValue:J4(s.serializer,n._byteString)};if(n instanceof zn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof qv)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return Qb(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Ov(n)}`)}(t,e)}function XT(t,e){const r={};return b4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qc(t,(n,s)=>{const i=Vp(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function JT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Kv||t instanceof wl||t instanceof zn||t instanceof Vv||t instanceof qv)}function lB(t,e,r){if(!JT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Ov(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function N2(t,e,r){if((e=cn(e))instanceof $c)return e._internalPath;if(typeof e=="string")return cB(t,e);throw K0("Field path arguments must be of type string or ",t,!1,void 0,r)}const wH=new RegExp("[~\\*/\\[\\]]");function cB(t,e,r){if(e.search(wH)>=0)throw K0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $c(...e.split("."))._internalPath}catch{throw K0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function K0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new it(Oe.INVALID_ARGUMENT,o+t+l)}function YT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field($v("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class yH extends q0{data(){return super.data()}}function $v(t,e){return typeof e=="string"?cB(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new it(Oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uB{}class Wv extends uB{}function Yt(t,e,...r){let n=[];e instanceof uB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Xv).length,o=i.filter(l=>l instanceof Kp).length;if(a>1||a>0&&o>0)throw new it(Oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Kp extends Wv{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Kp(e,r,n)}_apply(e){const r=this._parse(e);return tU(e._query,r),new Ka(e.firestore,e.converter,m2(e._query,r))}_parse(e){const r=Xd(e.firestore);return function(i,a,o,l,c,u,h){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new it(Oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){JE(h,u);const p=[];for(const b of h)p.push(XE(l,i,b));m={arrayValue:{values:p}}}else m=XE(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||JE(h,u),m=vH(o,a,h,u==="in"||u==="not-in");return ar.create(c,u,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function cr(t,e,r){const n=e,s=$v("where",t);return Kp._create(s,n,r)}class Xv extends uB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Xv(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Er.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)tU(a,l),a=m2(a,l)}(e._query,r),new Ka(e.firestore,e.converter,m2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jv extends Wv{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Jv(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new it(Oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new it(Oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cp(i,a)}(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Gd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function fi(t,e="asc"){const r=e,n=$v("orderBy",t);return Jv._create(n,r)}class Yv extends Wv{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Yv(e,r,n)}_apply(e){return new Ka(e.firestore,e.converter,k0(e._query,this._limit,this._limitType))}}function eU(t){return Yv._create("limit",t,"F")}function XE(t,e,r){if(typeof(r=cn(r))=="string"){if(r==="")throw new it(Oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q4(e)&&r.indexOf("/")!==-1)throw new it(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(hr.fromString(r));if(!pt.isDocumentKey(n))throw new it(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ap(t,new pt(n))}if(r instanceof zn)return Ap(t,r._key);throw new it(Oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ov(r)}.`)}function JE(t,e){if(!Array.isArray(t)||t.length===0)throw new it(Oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tU(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new it(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class dB{convertValue(e,r="none"){switch(jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return qc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>$r(a.doubleValue));return new qv(i)}convertGeoPoint(e){return new Kv($r(e.latitude),$r(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ub(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){const r=Ho(e);return new jt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=hr.fromString(e);It(oT(n));const s=new ml(n.get(1),n.get(3)),i=new pt(n.popFirst(5));return s.isEqual(r)||Ts(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class xH extends dB{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ew extends q0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field($v("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Cf extends ew{data(e={}){return super.data(e)}}class hB{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new pc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Cf(this._firestore,this._userDataWriter,n.key,n,new pc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new it(Oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Cf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Cf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:bH(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function bH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){t=Gn(t,zn);const e=Gn(t.firestore,hi);return dH(zc(e),t._key).then(r=>nU(e,t,r))}class tw extends dB{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,r)}}function Tt(t){t=Gn(t,Ka);const e=Gn(t.firestore,hi),r=zc(e),n=new tw(e);return ZT(t._query),hH(r,t._query).then(s=>new hB(e,n,t,s))}function rU(t,e,r){t=Gn(t,zn);const n=Gn(t.firestore,hi),s=Zv(t.converter,e,r);return Jd(n,[Gv(Xd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Yr.none())])}function sn(t,e,r,...n){t=Gn(t,zn);const s=Gn(t.firestore,hi),i=Xd(s);let a;return a=typeof(e=cn(e))=="string"||e instanceof $c?AB(i,"updateDoc",t._key,e,r,n):oB(i,"updateDoc",t._key,e),Jd(s,[a.toMutation(t._key,Yr.exists(!0))])}function Us(t){return Jd(Gn(t.firestore,hi),[new $d(t._key,Yr.none())])}function is(t,e){const r=Gn(t.firestore,hi),n=Pt(t),s=Zv(t.converter,e);return Jd(r,[Gv(Xd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Yr.exists(!1))]).then(()=>n)}function I2(t,...e){var r,n,s;t=cn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||WE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(WE(e[a])){const h=e[a];e[a]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[a+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[a+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof zn)c=Gn(t.firestore,hi),u=kp(t._key.path),l={next:h=>{e[a]&&e[a](nU(c,t,h))},error:e[a+1],complete:e[a+2]};else{const h=Gn(t,Ka);c=Gn(h.firestore,hi),u=h._query;const m=new tw(c);l={next:p=>{e[a]&&e[a](new hB(c,m,h,p))},error:e[a+1],complete:e[a+2]},ZT(t._query)}return function(m,p,b,B){const _=new sB(B),y=new rB(p,_,b);return m.asyncQueue.enqueueAndForget(async()=>Zb(await V0(m),y)),()=>{_.Za(),m.asyncQueue.enqueueAndForget(async()=>eB(await V0(m),y))}}(zc(c),u,o,l)}function Jd(t,e){return function(n,s){const i=new aa;return n.asyncQueue.enqueueAndForget(async()=>Y8(await cH(n),s,i)),i.promise}(zc(t),e)}function nU(t,e,r){const n=r.docs.get(e._key),s=new tw(t);return new ew(t,s,e._key,n,new pc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Xd(e)}set(e,r,n){this._verifyNotCommitted();const s=OA(e,this._firestore),i=Zv(s.converter,r,n),a=Gv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Yr.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=OA(e,this._firestore);let a;return a=typeof(r=cn(r))=="string"||r instanceof $c?AB(this._dataReader,"WriteBatch.update",i._key,r,n,s):oB(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=OA(e,this._firestore);return this._mutations=this._mutations.concat(new $d(r._key,Yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(Oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OA(t,e){if((t=cn(t)).firestore!==e)throw new it(Oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Xd(r)}get(r){const n=OA(r,this._firestore),s=new xH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Ct();const a=i[0];if(a.isFoundDocument())return new q0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new q0(this._firestore,s,n._key,null,n.converter);throw Ct()})}set(r,n,s){const i=OA(r,this._firestore),a=Zv(i.converter,n,s),o=Gv(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=OA(r,this._firestore);let o;return o=typeof(n=cn(n))=="string"||n instanceof $c?AB(this._dataReader,"Transaction.update",a._key,n,s,i):oB(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=OA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=OA(e,this._firestore),n=new tw(this._firestore);return super.get(e).then(s=>new ew(this._firestore,n,r._key,s._document,new pc(!1,!1),r.converter))}}function Al(t,e,r){t=Gn(t,hi);const n=Object.assign(Object.assign({},BH),r);return function(i){if(i.maxAttempts<1)throw new it(Oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const l=new aa;return i.asyncQueue.enqueueAndForget(async()=>{const c=await uH(i);new oH(i.asyncQueue,c,o,a,l).au()}),l.promise}(zc(t),s=>e(new iU(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){return zc(t=Gn(t,hi)),new sU(t,e=>Jd(t,e))}(function(e,r=!0){(function(s){qd=s})(Vd),Nd(new Uc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new hi(new cM(n.getProvider("auth-internal")),new fM(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new it(Oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),al(V5,"4.7.3",e),al(V5,"4.7.3","esm2017")})();const CH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:dB,Bytes:wl,CollectionReference:Uo,DocumentReference:zn,DocumentSnapshot:ew,FieldPath:$c,FieldValue:Vv,Firestore:hi,FirestoreError:it,GeoPoint:Kv,Query:Ka,QueryCompositeFilterConstraint:Xv,QueryConstraint:Wv,QueryDocumentSnapshot:Cf,QueryFieldFilterConstraint:Kp,QueryLimitConstraint:Yv,QueryOrderByConstraint:Jv,QuerySnapshot:hB,SnapshotMetadata:pc,Timestamp:jt,Transaction:iU,VectorValue:qv,WriteBatch:sU,_AutoId:Nb,_ByteString:bn,_DatabaseId:ml,_DocumentKey:pt,_EmptyAuthCredentialsProvider:d4,_FieldPath:Jr,_cast:Gn,_logWarn:fl,_validateIsNotUsedTogether:VT,addDoc:is,collection:dt,connectFirestoreEmulator:KT,deleteDoc:Us,doc:Pt,enableIndexedDbPersistence:zT,ensureFirestoreConfigured:zc,executeWrite:Jd,getDoc:zo,getDocs:Tt,getFirestore:qT,limit:eU,onSnapshot:I2,orderBy:fi,query:Yt,runTransaction:Al,setDoc:rU,updateDoc:sn,where:cr,writeBatch:rw},Symbol.toStringTag,{value:"Module"})),EH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},aU=pb(EH),Le=qT(aU),nw=s4(aU);zT(Le).catch(t=>{t.code==="failed-precondition"?console.warn("⚠️ Ya hay otra pestaña usando persistencia."):t.code==="unimplemented"?console.warn("⚠️ El navegador no soporta persistencia offline."):console.error("❌ Error en persistencia offline:",t)});function _H(){const[t,e]=Q.useState(""),[r,n]=Q.useState(""),[s,i]=Q.useState(!1),[a,o]=Q.useState(""),[l,c]=Q.useState(!1),u=Cv(),h=p=>{if(localStorage.setItem("role",p),p==="admin")return u("/admin");if(p==="vendedor_pollo")return u("/admin/salesV2");if(p==="vendedor_ropa")return u("/admin/salesClothes")},m=async p=>{if(p.preventDefault(),o(""),!t.trim()){o("Ingresa el correo.");return}if(r.length<6){o("La contraseña debe tener al menos 6 caracteres.");return}try{c(!0);const b=await zR(nw,t,r),B=b.user.uid,_=await zo(Pt(Le,"users",B));if(!_.exists()){o("Tu usuario no tiene perfil en la base de datos.");return}const y=_.data(),w=y.role||"",N=y.name||"";if(!["admin","vendedor_pollo","vendedor_ropa"].includes(w)){o("Rol no válido. Consulta al administrador.");return}localStorage.setItem("user_email",b.user.email||""),N&&localStorage.setItem("user_name",N),h(w)}catch(b){const B=String((b==null?void 0:b.code)||"");o(B==="auth/invalid-credential"||B==="auth/wrong-password"?"Credenciales incorrectas.":B==="auth/user-not-found"?"Usuario no encontrado.":B==="auth/too-many-requests"?"Demasiados intentos. Intenta más tarde.":(b==null?void 0:b.message)||"Error al iniciar sesión.")}finally{c(!1)}};return A.jsx("div",{className:"min-h-screen grid place-items-center ",children:A.jsxs("form",{onSubmit:m,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[A.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesión"}),A.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrónico"}),A.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:p=>e(p.target.value),autoComplete:"username"}),A.jsx("label",{className:"block text-sm font-semibold",children:"Contraseña"}),A.jsxs("div",{className:"flex gap-2 mb-2",children:[A.jsx("input",{type:s?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:p=>n(p.target.value),minLength:6,autoComplete:"current-password"}),A.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>i(p=>!p),children:s?"Ocultar":"Mostrar"})]}),A.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mínimo 6 caracteres (requisito de Firebase)."}),A.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:l,children:l?"Entrando...":"Entrar"}),a&&A.jsx("p",{className:`mt-3 text-sm ${a.startsWith("Error")||a.includes("no válido")?"text-red-600":"text-gray-700"}`,children:a})]})})}function pn({children:t,allowedRoles:e}){const[r,n]=Q.useState(!0),[s,i]=Q.useState(!1);return Q.useEffect(()=>{const a=GF(nw,async o=>{if(o){const l=Pt(Le,"users",o.uid),c=await zo(l);if(c.exists()){const u=c.data().role;i(e.includes(u))}}n(!1)});return()=>a()},[e]),r?A.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:A.jsx(Du,{to:"/"})}function NH({role:t}){const e="/admin",r=({isActive:W})=>`block rounded px-3 py-2 text-sm ${W?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=Cv(),[s,i]=Q.useState(!1),[a,o]=Q.useState(!1),[l,c]=Q.useState(!1),[u,h]=Q.useState(!1),[m,p]=Q.useState(!1),[b,B]=Q.useState(!1),[_,y]=Q.useState(!1),[w,N]=Q.useState(!1),[O,R]=Q.useState(!1),[M,F]=Q.useState(!1),[E,L]=Q.useState(!1),[D,I]=Q.useState(!1),U=async()=>{await zF(nw),n("/")},T=({open:W,onClick:ce,children:ie})=>A.jsxs("button",{type:"button",onClick:ce,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[A.jsx("span",{children:ie}),A.jsx("span",{className:"text-xs",children:W?"▾":"▸"})]}),ee=({open:W,onClick:ce,title:ie})=>A.jsxs("button",{type:"button",onClick:ce,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[A.jsx("span",{className:"text-blue-500 font-medium ",children:ie}),A.jsx("span",{className:"text-xs",children:W?"▾":"▸"})]}),le=t==="admin",re=t==="vendedor_pollo"||t==="vendedor",ue=t==="vendedor_ropa";return A.jsxs("div",{className:"min-h-screen flex",children:[A.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[A.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir menú":"Colapsar menú",children:s?A.jsx("span",{title:"Expandir menú",children:"▶"}):A.jsx("span",{title:"Colapsar menú",children:"◀"})}),!s&&A.jsxs(A.Fragment,{children:[A.jsxs("nav",{className:"space-y-1",children:[le&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"border rounded mb-1",children:[A.jsx(T,{open:a,onClick:()=>o(W=>!W),children:"Operaciones Pollo"}),a&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:l,onClick:()=>c(W=>!W),title:"Inventario"}),l&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(jr,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),A.jsx(jr,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),A.jsx(ee,{open:u,onClick:()=>h(W=>!W),title:"Finanzas"}),u&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(jr,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),A.jsx(jr,{to:`${e}/billing`,className:r,children:"Facturacion"}),A.jsx(jr,{to:`${e}/expenses`,className:r,children:"Gastos"}),A.jsx(jr,{to:`${e}/salesV2`,className:r,children:"Venta"}),A.jsx(jr,{to:`${e}/bills`,className:r,children:"Cierre"}),A.jsx(jr,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),A.jsx(ee,{open:m,onClick:()=>p(W=>!W),title:"Productos"}),m&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),A.jsxs("div",{className:"border rounded mb-1",children:[A.jsx(T,{open:b,onClick:()=>B(W=>!W),children:"Operaciones Ropa"}),b&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:_,onClick:()=>y(W=>!W),title:"Inventario"}),_&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),A.jsx(ee,{open:w,onClick:()=>N(W=>!W),title:"Productos"}),w&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),A.jsx(ee,{open:O,onClick:()=>R(W=>!W),title:"Clientes"}),O&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),A.jsx(ee,{open:M,onClick:()=>F(W=>!W),title:"Finanzas"}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),A.jsxs("div",{className:"border rounded",children:[A.jsx(T,{open:D,onClick:()=>I(W=>!W),children:"Operaciones Otras"}),D&&A.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[A.jsx(jr,{to:`${e}/users`,className:r,children:"Usuarios"}),A.jsx(jr,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),A.jsx(jr,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),re&&A.jsxs("div",{className:"border rounded",children:[A.jsx(T,{open:u,onClick:()=>h(W=>!W),children:"Finanzas (Pollo)"}),u&&A.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[A.jsx(jr,{to:`${e}/salesV2`,className:r,children:"Venta"}),A.jsx(jr,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),ue&&A.jsxs("div",{className:"border rounded",children:[A.jsx(T,{open:b,onClick:()=>B(W=>!W),children:"Operaciones Ropa"}),b&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:M,onClick:()=>F(W=>!W),title:"Ventas"}),M&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(jr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),A.jsx(jr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),A.jsx(ee,{open:w,onClick:()=>N(W=>!W),title:"Productos"}),w&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),A.jsx(ee,{open:O,onClick:()=>R(W=>!W),title:"Clientes"}),O&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(jr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),A.jsx("button",{onClick:U,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesión"})]})]}),A.jsx("main",{className:"flex-1 p-6",children:A.jsx(Mj,{})})]})}const oU=6048e5,IH=864e5,YE=Symbol.for("constructDateFrom");function ca(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&YE in t?t[YE](e):t instanceof Date?new t.constructor(e):new Date(e)}function ks(t,e){return ca(e||t,t)}function SH(t,e,r){const n=ks(t,r==null?void 0:r.in);return isNaN(e)?ca(t,NaN):(n.setDate(n.getDate()+e),n)}function FH(t,e,r){const n=ks(t,r==null?void 0:r.in);if(isNaN(e))return ca(t,NaN);const s=n.getDate(),i=ca(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let TH={};function sw(){return TH}function mp(t,e){var o,l,c,u;const r=sw(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ks(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function G0(t,e){return mp(t,{...e,weekStartsOn:1})}function AU(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=ca(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=G0(s),a=ca(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=G0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function ZE(t){const e=ks(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function UH(t,...e){const r=ca.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function e_(t,e){const r=ks(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function PH(t,e,r){const[n,s]=UH(r==null?void 0:r.in,t,e),i=e_(n),a=e_(s),o=+i-ZE(i),l=+a-ZE(a);return Math.round((o-l)/IH)}function QH(t,e){const r=AU(t,e),n=ca(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),G0(n)}function LH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jH(t){return!(!LH(t)&&typeof t!="number"||isNaN(+ks(t)))}function Yd(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Zd(t,e){const r=ks(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function kH(t,e){const r=ks(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const DH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RH=(t,e,r)=>{let n;const s=DH[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xy(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const MH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VH={date:xy({formats:MH,defaultWidth:"full"}),time:xy({formats:OH,defaultWidth:"full"}),dateTime:xy({formats:HH,defaultWidth:"full"})},KH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qH=(t,e,r,n)=>KH[t];function Qh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const GH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$H={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YH=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ZH={ordinalNumber:YH,era:Qh({values:GH,defaultWidth:"wide"}),quarter:Qh({values:zH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Qh({values:$H,defaultWidth:"wide"}),day:Qh({values:WH,defaultWidth:"wide"}),dayPeriod:Qh({values:XH,defaultWidth:"wide",formattingValues:JH,defaultFormattingWidth:"wide"})};function Lh(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?tV(o,h=>h.test(a)):eV(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function eV(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function tV(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function rV(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const nV=/^(\d+)(th|st|nd|rd)?/i,sV=/\d+/i,iV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aV={any:[/^b/i,/^(a|c)/i]},oV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AV={any:[/1/i,/2/i,/3/i,/4/i]},lV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pV={ordinalNumber:rV({matchPattern:nV,parsePattern:sV,valueCallback:t=>parseInt(t,10)}),era:Lh({matchPatterns:iV,defaultMatchWidth:"wide",parsePatterns:aV,defaultParseWidth:"any"}),quarter:Lh({matchPatterns:oV,defaultMatchWidth:"wide",parsePatterns:AV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Lh({matchPatterns:lV,defaultMatchWidth:"wide",parsePatterns:cV,defaultParseWidth:"any"}),day:Lh({matchPatterns:uV,defaultMatchWidth:"wide",parsePatterns:dV,defaultParseWidth:"any"}),dayPeriod:Lh({matchPatterns:hV,defaultMatchWidth:"any",parsePatterns:fV,defaultParseWidth:"any"})},mV={code:"en-US",formatDistance:RH,formatLong:VH,formatRelative:qH,localize:ZH,match:pV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gV(t,e){const r=ks(t,e==null?void 0:e.in);return PH(r,kH(r))+1}function vV(t,e){const r=ks(t,e==null?void 0:e.in),n=+G0(r)-+QH(r);return Math.round(n/oU)+1}function lU(t,e){var u,h,m,p;const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=sw(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=ca((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=mp(a,e),l=ca((e==null?void 0:e.in)||t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=mp(l,e);return+r>=+o?n+1:+r>=+c?n:n-1}function wV(t,e){var o,l,c,u;const r=sw(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=lU(t,e),i=ca((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),mp(i,e)}function yV(t,e){const r=ks(t,e==null?void 0:e.in),n=+mp(r,e)-+wV(r,e);return Math.round(n/oU)+1}function Cr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const _A={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Cr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Cr(r+1,2)},d(t,e){return Cr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Cr(t.getHours()%12||12,e.length)},H(t,e){return Cr(t.getHours(),e.length)},m(t,e){return Cr(t.getMinutes(),e.length)},s(t,e){return Cr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Cr(s,e.length)}},Eu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},t_={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return _A.y(t,e)},Y:function(t,e,r,n){const s=lU(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Cr(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Cr(i,e.length)},R:function(t,e){const r=AU(t);return Cr(r,e.length)},u:function(t,e){const r=t.getFullYear();return Cr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Cr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Cr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return _A.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Cr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=yV(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Cr(s,e.length)},I:function(t,e,r){const n=vV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Cr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):_A.d(t,e)},D:function(t,e,r){const n=gV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Cr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Cr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Cr(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Cr(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Eu.noon:n===0?s=Eu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Eu.evening:n>=12?s=Eu.afternoon:n>=4?s=Eu.morning:s=Eu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return _A.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):_A.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Cr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Cr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):_A.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):_A.s(t,e)},S:function(t,e){return _A.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return n_(n);case"XXXX":case"XX":return ic(n);case"XXXXX":case"XXX":default:return ic(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return n_(n);case"xxxx":case"xx":return ic(n);case"xxxxx":case"xxx":default:return ic(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+r_(n,":");case"OOOO":default:return"GMT"+ic(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+r_(n,":");case"zzzz":default:return"GMT"+ic(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Cr(n,e.length)},T:function(t,e,r){return Cr(+t,e.length)}};function r_(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Cr(i,2)}function n_(t,e){return t%60===0?(t>0?"-":"+")+Cr(Math.abs(t)/60,2):ic(t,e)}function ic(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Cr(Math.trunc(n/60),2),i=Cr(n%60,2);return r+s+e+i}const s_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return s_(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",s_(n,e)).replace("{{time}}",cU(s,e))},bV={p:cU,P:xV},BV=/^D+$/,CV=/^Y+$/,EV=["D","DD","YY","YYYY"];function _V(t){return BV.test(t)}function NV(t){return CV.test(t)}function IV(t,e,r){const n=SV(t,e,r);if(console.warn(n),EV.includes(t))throw new RangeError(n)}function SV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UV=/^'([^]*?)'?$/,PV=/''/g,QV=/[a-zA-Z]/;function Zt(t,e,r){var u,h,m,p;const n=sw(),s=n.locale??mV,i=n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,a=n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,o=ks(t,r==null?void 0:r.in);if(!jH(o))throw new RangeError("Invalid time value");let l=e.match(TV).map(b=>{const B=b[0];if(B==="p"||B==="P"){const _=bV[B];return _(b,s.formatLong)}return b}).join("").match(FV).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const B=b[0];if(B==="'")return{isToken:!1,value:LV(b)};if(t_[B])return{isToken:!0,value:b};if(B.match(QV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(b=>{if(!b.isToken)return b.value;const B=b.value;(NV(B)||_V(B))&&IV(B,e,String(t));const _=t_[B[0]];return _(o,B,s.localize,c)}).join("")}function LV(t){const e=t.match(UV);return e?e[1].replace(PV,"'"):t}function jV(t,e,r){return SH(t,-14,r)}function kV(t,e,r){return FH(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S2=function(t,e){return S2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},S2(t,e)};function ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");S2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var F2=function(){return F2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},F2.apply(this,arguments)};function Ss(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,[])).next())})}function ws(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vm(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var Vo=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),iw=function(t,e){return Vo.fromClientRect(t,e.getBoundingClientRect())},DV=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Vo(0,0,n,s)},aw=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},gn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},i_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Km=0;Km<i_.length;Km++)RV[i_.charCodeAt(Km)]=Km;var a_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qm=0;qm<a_.length;qm++)tf[a_.charCodeAt(qm)]=qm;var MV=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=tf[t.charCodeAt(n)],a=tf[t.charCodeAt(n+1)],o=tf[t.charCodeAt(n+2)],l=tf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},OV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},HV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xc=5,fB=11,by=2,VV=fB-xc,uU=65536>>xc,KV=1<<xc,By=KV-1,qV=1024>>xc,GV=uU+qV,zV=GV,$V=32,WV=zV+$V,XV=65536>>fB,JV=1<<VV,YV=JV-1,o_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},ZV=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},e7=function(t,e){var r=MV(t),n=Array.isArray(r)?HV(r):new Uint32Array(r),s=Array.isArray(r)?OV(r):new Uint16Array(r),i=24,a=o_(s,i/2,n[4]/2),o=n[5]===2?o_(s,(i+n[4])/2):ZV(n,Math.ceil((i+n[4])/4));return new t7(n[0],n[1],n[2],n[3],a,o)},t7=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xc],r=(r<<by)+(e&By),this.data[r];if(e<=65535)return r=this.index[uU+(e-55296>>xc)],r=(r<<by)+(e&By),this.data[r];if(e<this.highStart)return r=WV-XV+(e>>fB),r=this.index[r],r+=e>>xc&YV,r=this.index[r],r=(r<<by)+(e&By),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),A_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gm=0;Gm<A_.length;Gm++)r7[A_.charCodeAt(Gm)]=Gm;var n7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",l_=50,s7=1,dU=2,hU=3,i7=4,a7=5,c_=7,fU=8,u_=9,GA=10,T2=11,d_=12,U2=13,o7=14,rf=15,P2=16,zm=17,jh=18,A7=19,h_=20,Q2=21,kh=22,Cy=23,_u=24,ii=25,nf=26,sf=27,Nu=28,l7=29,uc=30,c7=31,$m=32,Wm=33,L2=34,j2=35,k2=36,gp=37,D2=38,Jg=39,Yg=40,Ey=41,pU=42,u7=43,d7=[9001,65288],mU="!",sr="×",Xm="÷",R2=e7(n7),ho=[uc,k2],M2=[s7,dU,hU,a7],gU=[GA,fU],f_=[sf,nf],h7=M2.concat(gU),p_=[D2,Jg,Yg,L2,j2],f7=[rf,U2],p7=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=R2.get(i);if(o>l_?(s.push(!0),o-=l_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(P2);if(o===i7||o===T2){if(a===0)return n.push(a),r.push(uc);var l=r[a-1];return h7.indexOf(l)===-1?(n.push(n[a-1]),r.push(l)):(n.push(a),r.push(uc))}if(n.push(a),o===c7)return r.push(e==="strict"?Q2:gp);if(o===pU||o===l7)return r.push(uc);if(o===u7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(gp):r.push(uc);r.push(o)}),[n,r,s]},_y=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==GA)break}if(s===GA)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==GA)break}if(o!==GA)break}return!1},m_=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===GA)r--;else return n}return 0},m7=function(t,e,r,n,s){if(r[n]===0)return sr;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return sr;var a=i-1,o=i+1,l=e[i],c=a>=0?e[a]:0,u=e[o];if(l===dU&&u===hU)return sr;if(M2.indexOf(l)!==-1)return mU;if(M2.indexOf(u)!==-1||gU.indexOf(u)!==-1)return sr;if(m_(i,e)===fU)return Xm;if(R2.get(t[i])===T2||(l===$m||l===Wm)&&R2.get(t[o])===T2||l===c_||u===c_||l===u_||[GA,U2,rf].indexOf(l)===-1&&u===u_||[zm,jh,A7,_u,Nu].indexOf(u)!==-1||m_(i,e)===kh||_y(Cy,kh,i,e)||_y([zm,jh],Q2,i,e)||_y(d_,d_,i,e))return sr;if(l===GA)return Xm;if(l===Cy||u===Cy)return sr;if(u===P2||l===P2)return Xm;if([U2,rf,Q2].indexOf(u)!==-1||l===o7||c===k2&&f7.indexOf(l)!==-1||l===Nu&&u===k2||u===h_||ho.indexOf(u)!==-1&&l===ii||ho.indexOf(l)!==-1&&u===ii||l===sf&&[gp,$m,Wm].indexOf(u)!==-1||[gp,$m,Wm].indexOf(l)!==-1&&u===nf||ho.indexOf(l)!==-1&&f_.indexOf(u)!==-1||f_.indexOf(l)!==-1&&ho.indexOf(u)!==-1||[sf,nf].indexOf(l)!==-1&&(u===ii||[kh,rf].indexOf(u)!==-1&&e[o+1]===ii)||[kh,rf].indexOf(l)!==-1&&u===ii||l===ii&&[ii,Nu,_u].indexOf(u)!==-1)return sr;if([ii,Nu,_u,zm,jh].indexOf(u)!==-1)for(var h=i;h>=0;){var m=e[h];if(m===ii)return sr;if([Nu,_u].indexOf(m)!==-1)h--;else break}if([sf,nf].indexOf(u)!==-1)for(var h=[zm,jh].indexOf(l)!==-1?a:i;h>=0;){var m=e[h];if(m===ii)return sr;if([Nu,_u].indexOf(m)!==-1)h--;else break}if(D2===l&&[D2,Jg,L2,j2].indexOf(u)!==-1||[Jg,L2].indexOf(l)!==-1&&[Jg,Yg].indexOf(u)!==-1||[Yg,j2].indexOf(l)!==-1&&u===Yg||p_.indexOf(l)!==-1&&[h_,nf].indexOf(u)!==-1||p_.indexOf(u)!==-1&&l===sf||ho.indexOf(l)!==-1&&ho.indexOf(u)!==-1||l===_u&&ho.indexOf(u)!==-1||ho.concat(ii).indexOf(l)!==-1&&u===kh&&d7.indexOf(t[o])===-1||ho.concat(ii).indexOf(u)!==-1&&l===jh)return sr;if(l===Ey&&u===Ey){for(var p=r[i],b=1;p>0&&(p--,e[p]===Ey);)b++;if(b%2!==0)return sr}return l===$m&&u===Wm?sr:Xm},g7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=p7(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ii,uc,pU].indexOf(o)!==-1?gp:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,a]},v7=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===mU,this.start=n,this.end=s}return t.prototype.slice=function(){return gn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),w7=function(t,e){var r=aw(t),n=g7(r,e),s=n[0],i=n[1],a=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=sr;c<o&&(u=m7(r,i,s,++c,a))===sr;);if(u!==sr||c===o){var h=new v7(r,u,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},y7=1,x7=2,qp=4,g_=8,z0=10,v_=47,Ef=92,b7=9,B7=32,Jm=34,Dh=61,C7=35,E7=36,_7=37,Ym=39,Zm=40,Rh=41,N7=95,Ks=45,I7=33,S7=60,F7=62,T7=64,U7=91,P7=93,Q7=61,L7=123,eg=63,j7=125,w_=124,k7=126,D7=128,y_=65533,Ny=42,mc=43,R7=44,M7=58,O7=59,vp=46,H7=0,V7=8,K7=11,q7=14,G7=31,z7=127,Fa=-1,vU=48,wU=97,yU=101,$7=102,W7=117,X7=122,xU=65,bU=69,BU=70,J7=85,Y7=90,ys=function(t){return t>=vU&&t<=57},Z7=function(t){return t>=55296&&t<=57343},Iu=function(t){return ys(t)||t>=xU&&t<=BU||t>=wU&&t<=$7},e9=function(t){return t>=wU&&t<=X7},t9=function(t){return t>=xU&&t<=Y7},r9=function(t){return e9(t)||t9(t)},n9=function(t){return t>=D7},tg=function(t){return t===z0||t===b7||t===B7},$0=function(t){return r9(t)||n9(t)||t===N7},x_=function(t){return $0(t)||ys(t)||t===Ks},s9=function(t){return t>=H7&&t<=V7||t===K7||t>=q7&&t<=G7||t===z7},PA=function(t,e){return t!==Ef?!1:e!==z0},rg=function(t,e,r){return t===Ks?$0(e)||PA(e,r):$0(t)?!0:!!(t===Ef&&PA(t,e))},Iy=function(t,e,r){return t===mc||t===Ks?ys(e)?!0:e===vp&&ys(r):ys(t===vp?e:t)},i9=function(t){var e=0,r=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(r=-1),e++);for(var n=[];ys(t[e]);)n.push(t[e++]);var s=n.length?parseInt(gn.apply(void 0,n),10):0;t[e]===vp&&e++;for(var i=[];ys(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(gn.apply(void 0,i),10):0;(t[e]===bU||t[e]===yU)&&e++;var l=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(l=-1),e++);for(var c=[];ys(t[e]);)c.push(t[e++]);var u=c.length?parseInt(gn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,l*u)},a9={type:2},o9={type:3},A9={type:4},l9={type:13},c9={type:8},u9={type:21},d9={type:9},h9={type:10},f9={type:11},p9={type:12},m9={type:14},ng={type:23},g9={type:1},v9={type:25},w9={type:24},y9={type:26},x9={type:27},b9={type:28},B9={type:29},C9={type:31},O2={type:32},CU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(aw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==O2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Jm:return this.consumeStringToken(Jm);case C7:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(x_(r)||PA(n,s)){var i=rg(r,n,s)?x7:y7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case E7:if(this.peekCodePoint(0)===Dh)return this.consumeCodePoint(),l9;break;case Ym:return this.consumeStringToken(Ym);case Zm:return a9;case Rh:return o9;case Ny:if(this.peekCodePoint(0)===Dh)return this.consumeCodePoint(),m9;break;case mc:if(Iy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case R7:return A9;case Ks:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Iy(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(rg(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ks&&c===F7)return this.consumeCodePoint(),this.consumeCodePoint(),w9;break;case vp:if(Iy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case v_:if(this.peekCodePoint(0)===Ny)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ny&&(u=this.consumeCodePoint(),u===v_))return this.consumeToken();if(u===Fa)return this.consumeToken()}break;case M7:return y9;case O7:return x9;case S7:if(this.peekCodePoint(0)===I7&&this.peekCodePoint(1)===Ks&&this.peekCodePoint(2)===Ks)return this.consumeCodePoint(),this.consumeCodePoint(),v9;break;case T7:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(rg(h,m,p)){var a=this.consumeName();return{type:7,value:a}}break;case U7:return b9;case Ef:if(PA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case P7:return B9;case Q7:if(this.peekCodePoint(0)===Dh)return this.consumeCodePoint(),c9;break;case L7:return f9;case j7:return p9;case W7:case J7:var b=this.peekCodePoint(0),B=this.peekCodePoint(1);return b===mc&&(Iu(B)||B===eg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case w_:if(this.peekCodePoint(0)===Dh)return this.consumeCodePoint(),d9;if(this.peekCodePoint(0)===w_)return this.consumeCodePoint(),u9;break;case k7:if(this.peekCodePoint(0)===Dh)return this.consumeCodePoint(),h9;break;case Fa:return O2}return tg(e)?(this.consumeWhiteSpace(),C9):ys(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):$0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:gn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Iu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===eg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(gn.apply(void 0,e.map(function(l){return l===eg?vU:l})),16),i=parseInt(gn.apply(void 0,e.map(function(l){return l===eg?BU:l})),16);return{type:30,start:s,end:i}}var a=parseInt(gn.apply(void 0,e),16);if(this.peekCodePoint(0)===Ks&&Iu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Iu(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(gn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Ym||r===Jm){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Rh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ng)}for(;;){var s=this.consumeCodePoint();if(s===Fa||s===Rh)return{type:22,value:gn.apply(void 0,e)};if(tg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Rh?(this.consumeCodePoint(),{type:22,value:gn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ng);if(s===Jm||s===Ym||s===Zm||s9(s))return this.consumeBadUrlRemnants(),ng;if(s===Ef)if(PA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ng;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;tg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Rh||e===Fa)return;PA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=gn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Fa||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===z0)return this._value.splice(0,n),g9;if(s===Ef){var i=this._value[n+1];i!==Fa&&i!==void 0&&(i===z0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):PA(s,i)&&(r+=this.consumeStringSlice(n),r+=gn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=qp,n=this.peekCodePoint(0);for((n===mc||n===Ks)&&e.push(this.consumeCodePoint());ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===vp&&ys(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=g_;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===bU||n===yU)&&((s===mc||s===Ks)&&ys(i)||ys(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=g_;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[i9(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(rg(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===_7?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Iu(e)){for(var r=gn(e);Iu(this.peekCodePoint(0))&&r.length<6;)r+=gn(this.consumeCodePoint());tg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Z7(n)||n>1114111?y_:n}return e===Fa?y_:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(x_(r))e+=gn(r);else if(PA(r,this.peekCodePoint(0)))e+=gn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),EU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new CU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||_9(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?O2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Gp=function(t){return t.type===15},eh=function(t){return t.type===17},Sr=function(t){return t.type===20},E9=function(t){return t.type===0},H2=function(t,e){return Sr(t)&&t.value===e},_U=function(t){return t.type!==31},jd=function(t){return t.type!==31&&t.type!==4},qa=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},_9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},yl=function(t){return t.type===17||t.type===15},_n=function(t){return t.type===16||yl(t)},NU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},as={type:17,number:0,flags:qp},pB={type:16,number:50,flags:qp},zA={type:16,number:100,flags:qp},af=function(t,e,r){var n=t[0],s=t[1];return[kr(n,e),kr(typeof s<"u"?s:n,r)]},kr=function(t,e){if(t.type===16)return t.number/100*e;if(Gp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},IU="deg",SU="grad",FU="rad",TU="turn",ow={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case IU:return Math.PI*e.number/180;case SU:return Math.PI/200*e.number;case FU:return e.number;case TU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},UU=function(t){return t.type===15&&(t.unit===IU||t.unit===SU||t.unit===FU||t.unit===TU)},PU=function(t){var e=t.filter(Sr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[as,as];case"to top":case"bottom":return Pi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[as,zA];case"to right":case"left":return Pi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[zA,zA];case"to bottom":case"top":return Pi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[zA,as];case"to left":case"right":return Pi(270)}return 0},Pi=function(t){return Math.PI*t/180},ll={name:"color",parse:function(t,e){if(e.type===18){var r=N9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=Po[e.value.toUpperCase()];if(typeof o<"u")return o}return Po.TRANSPARENT}},cl=function(t){return(255&t)===0},On=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},$A=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},b_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},B_=function(t,e){var r=e.filter(jd);if(r.length===3){var n=r.map(b_),s=n[0],i=n[1],a=n[2];return $A(s,i,a,1)}if(r.length===4){var o=r.map(b_),s=o[0],i=o[1],a=o[2],l=o[3];return $A(s,i,a,l)}return 0};function Sy(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var C_=function(t,e){var r=e.filter(jd),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Pi(n.number):ow.parse(t,n))/(Math.PI*2),l=_n(s)?s.number/100:0,c=_n(i)?i.number/100:0,u=typeof a<"u"&&_n(a)?kr(a,1):1;if(l===0)return $A(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,m=c*2-h,p=Sy(m,h,o+1/3),b=Sy(m,h,o),B=Sy(m,h,o-1/3);return $A(p*255,b*255,B*255,u)},N9={hsl:C_,hsla:C_,rgb:B_,rgba:B_},_f=function(t,e){return ll.parse(t,EU.create(e).parseComponentValue())},Po={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},I9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Sr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Aw=function(t,e){var r=ll.parse(t,e[0]),n=e[1];return n&&_n(n)?{color:r,stop:n}:{color:r,stop:null}},E_=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=as),n.stop===null&&(n.stop=zA);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var l=kr(o,e);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var h=a-c,m=s[c-1],p=(u-m)/(h+1),b=1;b<=h;b++)s[c+b-1]=p*b;c=null}}return t.map(function(B,_){var y=B.color;return{color:y,stop:Math.max(Math.min(1,s[_]/e),0)}})},F9=function(t,e,r){var n=e/2,s=r/2,i=kr(t[0],e)-n,a=s-kr(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},T9=function(t,e,r){var n=typeof t=="number"?t:F9(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-l,a+l]},Zi=function(t,e){return Math.sqrt(t*t+e*e)},__=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var l=o[0],c=o[1],u=Zi(r-l,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},U9=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=__(n,s,e,r,!0),c=l[0],u=l[1];i=Zi(c-e,(u-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=__(n,s,e,r,!1),c=h[0],u=h[1];i=Zi(c-e,(u-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=kr(t.size[0],n),a=t.size.length===2?kr(t.size[1],s):i),[i,a]},P9=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=PU(s);return}else if(UU(a)){r=ow.parse(t,a);return}}var o=Aw(t,s);n.push(o)}),{angle:r,stops:n,type:1}},sg=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=PU(s);return}else if(UU(a)){r=(ow.parse(t,a)+Pi(270))%Pi(360);return}}var o=Aw(t,s);n.push(o)}),{angle:r,stops:n,type:1}},Q9=function(t,e){var r=Pi(180),n=[],s=1,i=0,a=3,o=[];return qa(e).forEach(function(l,c){var u=l[0];if(c===0){if(Sr(u)&&u.value==="linear"){s=1;return}else if(Sr(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var h=ll.parse(t,u.values[0]);n.push({stop:as,color:h})}else if(u.name==="to"){var h=ll.parse(t,u.values[0]);n.push({stop:zA,color:h})}else if(u.name==="color-stop"){var m=u.values.filter(jd);if(m.length===2){var h=ll.parse(t,m[1]),p=m[0];eh(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(r+Pi(180))%Pi(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},QU="closest-side",LU="farthest-side",jU="closest-corner",kU="farthest-corner",DU="circle",RU="ellipse",MU="cover",OU="contain",L9=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,o){var l=!0;if(o===0){var c=!1;l=a.reduce(function(h,m){if(c)if(Sr(m))switch(m.value){case"center":return i.push(pB),h;case"top":case"left":return i.push(as),h;case"right":case"bottom":return i.push(zA),h}else(_n(m)||yl(m))&&i.push(m);else if(Sr(m))switch(m.value){case DU:return r=0,!1;case RU:return r=1,!1;case"at":return c=!0,!1;case QU:return n=0,!1;case MU:case LU:return n=1,!1;case OU:case jU:return n=2,!1;case kU:return n=3,!1}else if(yl(m)||_n(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var u=Aw(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},ig=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(u,h){if(Sr(h))switch(h.value){case"center":return i.push(pB),!1;case"top":case"left":return i.push(as),!1;case"right":case"bottom":return i.push(zA),!1}else if(_n(h)||yl(h))return i.push(h),!1;return u},l):o===1&&(l=a.reduce(function(u,h){if(Sr(h))switch(h.value){case DU:return r=0,!1;case RU:return r=1,!1;case OU:case QU:return n=0,!1;case LU:return n=1,!1;case jU:return n=2,!1;case MU:case kU:return n=3,!1}else if(yl(h)||_n(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},l)),l){var c=Aw(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},j9=function(t){return t.type===1},k9=function(t){return t.type===2},mB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=HU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function D9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!HU[t.name])}var HU={"linear-gradient":P9,"-moz-linear-gradient":sg,"-ms-linear-gradient":sg,"-o-linear-gradient":sg,"-webkit-linear-gradient":sg,"radial-gradient":L9,"-moz-radial-gradient":ig,"-ms-radial-gradient":ig,"-o-radial-gradient":ig,"-webkit-radial-gradient":ig,"-webkit-gradient":Q9},R9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return jd(n)&&D9(n)}).map(function(n){return mB.parse(t,n)})}},M9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Sr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},O9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return qa(e).map(function(r){return r.filter(_n)}).map(NU)}},H9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(Sr).map(function(n){return n.value}).join(" ")}).map(V9)}},V9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},vd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(vd||(vd={}));var K9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(q9)})}},q9=function(t){return Sr(t)||_n(t)},lw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},G9=lw("top"),z9=lw("right"),$9=lw("bottom"),W9=lw("left"),cw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return NU(r.filter(_n))}}},X9=cw("top-left"),J9=cw("top-right"),Y9=cw("bottom-right"),Z9=cw("bottom-left"),uw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},eK=uw("top"),tK=uw("right"),rK=uw("bottom"),nK=uw("left"),dw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Gp(r)?r.number:0}}},sK=dw("top"),iK=dw("right"),aK=dw("bottom"),oK=dw("left"),AK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},cK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Sr).reduce(function(r,n){return r|uK(n.value)},0)}},uK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},dK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},hK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},W0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(W0||(W0={}));var fK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return W0.STRICT;case"normal":default:return W0.NORMAL}}},pK={name:"line-height",initialValue:"normal",prefix:!1,type:4},N_=function(t,e){return Sr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:_n(t)?kr(t,e):e},mK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:mB.parse(t,e)}},gK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},V2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},vK=hw("top"),wK=hw("right"),yK=hw("bottom"),xK=hw("left"),bK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Sr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},BK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},fw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},CK=fw("top"),EK=fw("right"),_K=fw("bottom"),NK=fw("left"),IK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},SK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},FK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:Po.TRANSPARENT,offsetX:as,offsetY:as,blur:as},s=0,i=0;i<r.length;i++){var a=r[i];yl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=ll.parse(t,a)}return n})}},TK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},UK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=LK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},PK=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},QK=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},LK={matrix:PK,matrix3d:QK},I_={type:16,number:50,flags:qp},jK=[I_,I_],kK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(_n);return r.length!==2?jK:[r[0],r[1]]}},DK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Nf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Nf||(Nf={}));var RK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Nf.BREAK_ALL;case"keep-all":return Nf.KEEP_ALL;case"normal":default:return Nf.NORMAL}}},MK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(eh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},VU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},OK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return eh(e)?e.number:1}},HK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},VK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Sr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},KK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},qK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},GK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(eh(e))return e.number;if(Sr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},zK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Sr).map(function(r){return r.value})}},$K={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pn=function(t,e){return(t&e)!==0},WK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},XK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(_U),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var l=o&&eh(o)?o.number:1;n.push({counter:a.value,increment:l})}}return n}},JK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(_U),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Sr(i)&&i.value!=="none"){var o=a&&eh(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},YK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Gp).map(function(r){return VU.parse(t,r)})}},ZK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(E9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},S_=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},eq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:255,offsetX:as,offsetY:as,blur:as,spread:as,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];H2(a,"inset")?n.inset=!0:yl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=ll.parse(t,a)}return n})}},tq={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Sr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},rq={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nq={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Gp(e)?e.number:0}},sq=function(){function t(e,r){var n,s;this.animationDuration=yt(e,YK,r.animationDuration),this.backgroundClip=yt(e,I9,r.backgroundClip),this.backgroundColor=yt(e,S9,r.backgroundColor),this.backgroundImage=yt(e,R9,r.backgroundImage),this.backgroundOrigin=yt(e,M9,r.backgroundOrigin),this.backgroundPosition=yt(e,O9,r.backgroundPosition),this.backgroundRepeat=yt(e,H9,r.backgroundRepeat),this.backgroundSize=yt(e,K9,r.backgroundSize),this.borderTopColor=yt(e,G9,r.borderTopColor),this.borderRightColor=yt(e,z9,r.borderRightColor),this.borderBottomColor=yt(e,$9,r.borderBottomColor),this.borderLeftColor=yt(e,W9,r.borderLeftColor),this.borderTopLeftRadius=yt(e,X9,r.borderTopLeftRadius),this.borderTopRightRadius=yt(e,J9,r.borderTopRightRadius),this.borderBottomRightRadius=yt(e,Y9,r.borderBottomRightRadius),this.borderBottomLeftRadius=yt(e,Z9,r.borderBottomLeftRadius),this.borderTopStyle=yt(e,eK,r.borderTopStyle),this.borderRightStyle=yt(e,tK,r.borderRightStyle),this.borderBottomStyle=yt(e,rK,r.borderBottomStyle),this.borderLeftStyle=yt(e,nK,r.borderLeftStyle),this.borderTopWidth=yt(e,sK,r.borderTopWidth),this.borderRightWidth=yt(e,iK,r.borderRightWidth),this.borderBottomWidth=yt(e,aK,r.borderBottomWidth),this.borderLeftWidth=yt(e,oK,r.borderLeftWidth),this.boxShadow=yt(e,eq,r.boxShadow),this.color=yt(e,AK,r.color),this.direction=yt(e,lK,r.direction),this.display=yt(e,cK,r.display),this.float=yt(e,dK,r.cssFloat),this.fontFamily=yt(e,KK,r.fontFamily),this.fontSize=yt(e,qK,r.fontSize),this.fontStyle=yt(e,$K,r.fontStyle),this.fontVariant=yt(e,zK,r.fontVariant),this.fontWeight=yt(e,GK,r.fontWeight),this.letterSpacing=yt(e,hK,r.letterSpacing),this.lineBreak=yt(e,fK,r.lineBreak),this.lineHeight=yt(e,pK,r.lineHeight),this.listStyleImage=yt(e,mK,r.listStyleImage),this.listStylePosition=yt(e,gK,r.listStylePosition),this.listStyleType=yt(e,V2,r.listStyleType),this.marginTop=yt(e,vK,r.marginTop),this.marginRight=yt(e,wK,r.marginRight),this.marginBottom=yt(e,yK,r.marginBottom),this.marginLeft=yt(e,xK,r.marginLeft),this.opacity=yt(e,OK,r.opacity);var i=yt(e,bK,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=yt(e,BK,r.overflowWrap),this.paddingTop=yt(e,CK,r.paddingTop),this.paddingRight=yt(e,EK,r.paddingRight),this.paddingBottom=yt(e,_K,r.paddingBottom),this.paddingLeft=yt(e,NK,r.paddingLeft),this.paintOrder=yt(e,tq,r.paintOrder),this.position=yt(e,SK,r.position),this.textAlign=yt(e,IK,r.textAlign),this.textDecorationColor=yt(e,HK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=yt(e,VK,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=yt(e,FK,r.textShadow),this.textTransform=yt(e,TK,r.textTransform),this.transform=yt(e,UK,r.transform),this.transformOrigin=yt(e,kK,r.transformOrigin),this.visibility=yt(e,DK,r.visibility),this.webkitTextStrokeColor=yt(e,rq,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=yt(e,nq,r.webkitTextStrokeWidth),this.wordBreak=yt(e,RK,r.wordBreak),this.zIndex=yt(e,MK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return cl(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Pn(this.display,4)||Pn(this.display,33554432)||Pn(this.display,268435456)||Pn(this.display,536870912)||Pn(this.display,67108864)||Pn(this.display,134217728)},t}(),iq=function(){function t(e,r){this.content=yt(e,WK,r.content),this.quotes=yt(e,ZK,r.quotes)}return t}(),F_=function(){function t(e,r){this.counterIncrement=yt(e,XK,r.counterIncrement),this.counterReset=yt(e,JK,r.counterReset)}return t}(),yt=function(t,e,r){var n=new CU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new EU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Sr(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return ow.parse(t,i.parseComponentValue());case"color":return ll.parse(t,i.parseComponentValue());case"image":return mB.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return yl(o)?o:as;case"length-percentage":var l=i.parseComponentValue();return _n(l)?l:as;case"time":return VU.parse(t,i.parseComponentValue())}break}},aq="data-html2canvas-debug",oq=function(t){var e=t.getAttribute(aq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K2=function(t,e){var r=oq(t);return r===1||e===r},Ga=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,K2(r,3))debugger;this.styles=new sq(e,window.getComputedStyle(r,null)),z2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=iw(this.context,r),K2(r,4)&&(this.flags|=16)}return t}(),Aq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",T_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",of=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ag=0;ag<T_.length;ag++)of[T_.charCodeAt(ag)]=ag;var lq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=of[t.charCodeAt(n)],a=of[t.charCodeAt(n+1)],o=of[t.charCodeAt(n+2)],l=of[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},cq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},uq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},bc=5,gB=11,Fy=2,dq=gB-bc,KU=65536>>bc,hq=1<<bc,Ty=hq-1,fq=1024>>bc,pq=KU+fq,mq=pq,gq=32,vq=mq+gq,wq=65536>>gB,yq=1<<dq,xq=yq-1,U_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},bq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Bq=function(t,e){var r=lq(t),n=Array.isArray(r)?uq(r):new Uint32Array(r),s=Array.isArray(r)?cq(r):new Uint16Array(r),i=24,a=U_(s,i/2,n[4]/2),o=n[5]===2?U_(s,(i+n[4])/2):bq(n,Math.ceil((i+n[4])/4));return new Cq(n[0],n[1],n[2],n[3],a,o)},Cq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>bc],r=(r<<Fy)+(e&Ty),this.data[r];if(e<=65535)return r=this.index[KU+(e-55296>>bc)],r=(r<<Fy)+(e&Ty),this.data[r];if(e<this.highStart)return r=vq-wq+(e>>gB),r=this.index[r],r+=e>>bc&xq,r=this.index[r],r=(r<<Fy)+(e&Ty),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),P_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var og=0;og<P_.length;og++)Eq[P_.charCodeAt(og)]=og;var _q=1,Uy=2,Py=3,Q_=4,L_=5,Nq=7,j_=8,Qy=9,Ly=10,k_=11,D_=12,R_=13,M_=14,jy=15,Iq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Sq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Fq=Bq(Aq),Ni="×",ky="÷",Tq=function(t){return Fq.get(t)},Uq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===Uy&&a===Py)return Ni;if(i===Uy||i===Py||i===Q_||a===Uy||a===Py||a===Q_)return ky;if(i===j_&&[j_,Qy,k_,D_].indexOf(a)!==-1||(i===k_||i===Qy)&&(a===Qy||a===Ly)||(i===D_||i===Ly)&&a===Ly||a===R_||a===L_||a===Nq||i===_q)return Ni;if(i===R_&&a===M_){for(;s===L_;)s=e[--n];if(s===M_)return Ni}if(i===jy&&a===jy){for(var o=0;s===jy;)o++,s=e[--n];if(o%2===0)return Ni}return ky},Pq=function(t){var e=Iq(t),r=e.length,n=0,s=0,i=e.map(Tq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ni;n<r&&(a=Uq(e,i,++n))===Ni;);if(a!==Ni||n===r){var o=Sq.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Qq=function(t){for(var e=Pq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Lq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},jq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=aw(n.data).map(function(l){return gn(l)}),i=0,a={},o=s.every(function(l,c){r.setStart(n,i),r.setEnd(n,i+l.length);var u=r.getBoundingClientRect();i+=l.length;var h=u.x>a.x||u.y>a.y;return a=u,c===0?!0:h});return t.body.removeChild(e),o},kq=function(){return typeof new Image().crossOrigin<"u"},Dq=function(){return typeof new XMLHttpRequest().responseType=="string"},Rq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},O_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Mq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=q2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),H_(a).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",O_(l)?H_(q2(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),O_(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},q2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},H_=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},es={get SUPPORT_RANGE_BOUNDS(){var t=Lq(document);return Object.defineProperty(es,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=es.SUPPORT_RANGE_BOUNDS&&jq(document);return Object.defineProperty(es,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Rq(document);return Object.defineProperty(es,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Mq(document):Promise.resolve(!1);return Object.defineProperty(es,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=kq();return Object.defineProperty(es,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Dq();return Object.defineProperty(es,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(es,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(es,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},If=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Oq=function(t,e,r,n){var s=Kq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(es.SUPPORT_RANGE_BOUNDS){var l=V_(n,a,o.length).getClientRects();if(l.length>1){var c=vB(o),u=0;c.forEach(function(m){i.push(new If(m,Vo.fromDOMRectList(t,V_(n,u+a,m.length).getClientRects()))),u+=m.length})}else i.push(new If(o,Vo.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);i.push(new If(o,Hq(t,n))),n=h}else es.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},Hq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=iw(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return Vo.EMPTY},V_=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},vB=function(t){if(es.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Qq(t)},Vq=function(t,e){if(es.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Gq(t,e)},Kq=function(t,e){return e.letterSpacing!==0?vB(t):Vq(t,e)},qq=[32,160,4961,65792,65793,4153,4241],Gq=function(t,e){for(var r=w7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=aw(a),l="";o.forEach(function(c){qq.indexOf(c)===-1?l+=gn(c):(l.length&&n.push(l),n.push(gn(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)i();return n},zq=function(){function t(e,r,n){this.text=$q(r.data,n.textTransform),this.textBounds=Oq(e,this.text,n,r)}return t}(),$q=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Wq,Xq);case 2:return t.toUpperCase();default:return t}},Wq=/(^|\s|:|-|\(|\))([a-z])/g,Xq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},qU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ga),GU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ga),zU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=iw(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ga),$U=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),G2=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ga),Jq=[{type:15,flags:0,unit:"px",number:3}],Yq=[{type:16,flags:0,number:50}],Zq=function(t){return t.width>t.height?new Vo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Vo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},eG=function(t){var e=t.type===tG?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},X0="checkbox",J0="radio",tG="password",K_=707406591,wB=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=eG(n),(s.type===X0||s.type===J0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Zq(s.bounds)),s.type){case X0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Jq;break;case J0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Yq;break}return s}return e}(Ga),WU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Ga),XU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),JU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=ZU(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?_f(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Po.TRANSPARENT,a=n.contentWindow.document.body?_f(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Po.TRANSPARENT;s.backgroundColor=cl(i)?cl(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Ga),rG=["OL","UL","MENU"],Zg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,e3(s)&&s.data.trim().length>0)r.textNodes.push(new zq(t,s,r.styles));else if(od(s))if(s3(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Zg(t,o,r,n)});else{var a=YU(t,s);a.styles.isVisible()&&(nG(s,a,n)?a.flags|=4:sG(a.styles)&&(a.flags|=2),rG.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Zg(t,s.shadowRoot,a,n):!Y0(s)&&!t3(s)&&!Z0(s)&&Zg(t,s,a,n))}},YU=function(t,e){return $2(e)?new qU(t,e):r3(e)?new GU(t,e):t3(e)?new zU(t,e):iG(e)?new $U(t,e):aG(e)?new G2(t,e):oG(e)?new wB(t,e):Z0(e)?new WU(t,e):Y0(e)?new XU(t,e):n3(e)?new JU(t,e):new Ga(t,e)},ZU=function(t,e){var r=YU(t,e);return r.flags|=4,Zg(t,e,r,r),r},nG=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||yB(t)&&r.styles.isTransparent()},sG=function(t){return t.isPositioned()||t.isFloating()},e3=function(t){return t.nodeType===Node.TEXT_NODE},od=function(t){return t.nodeType===Node.ELEMENT_NODE},z2=function(t){return od(t)&&typeof t.style<"u"&&!e0(t)},e0=function(t){return typeof t.className=="object"},iG=function(t){return t.tagName==="LI"},aG=function(t){return t.tagName==="OL"},oG=function(t){return t.tagName==="INPUT"},AG=function(t){return t.tagName==="HTML"},t3=function(t){return t.tagName==="svg"},yB=function(t){return t.tagName==="BODY"},r3=function(t){return t.tagName==="CANVAS"},q_=function(t){return t.tagName==="VIDEO"},$2=function(t){return t.tagName==="IMG"},n3=function(t){return t.tagName==="IFRAME"},G_=function(t){return t.tagName==="STYLE"},lG=function(t){return t.tagName==="SCRIPT"},Y0=function(t){return t.tagName==="TEXTAREA"},Z0=function(t){return t.tagName==="SELECT"},s3=function(t){return t.tagName==="SLOT"},z_=function(t){return t.tagName.indexOf("-")>0},cG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var l=r.counters[o.counter];a.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),a},t}(),$_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},W_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},uG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},dG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Su=function(t,e,r,n,s,i){return t<e||t>r?wp(t,s,i.length>0):n.integers.reduce(function(a,o,l){for(;t>=o;)t-=o,a+=n.values[l];return a},"")+i},i3=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},mn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(i3(Math.abs(t),i,n,function(a){return gn(Math.floor(a%i)+e)})+s)},Yl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return i3(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Ku=1,SA=2,FA=4,Af=8,fo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return wp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var c=a%10;c===0&&Pn(i,Ku)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Pn(i,SA)||c===1&&l===1&&Pn(i,FA)&&t>100||c===1&&l>1&&Pn(i,Af)?o=e[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},X_="十百千萬",J_="拾佰仟萬",Y_="マイナス",Dy="마이너스",wp=function(t,e,r){var n=r?". ":"",s=r?"、":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var o=mn(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Yl(t,"〇一二三四五六七八九",s);case 6:return Su(t,1,3999,$_,3,n).toLowerCase();case 7:return Su(t,1,3999,$_,3,n);case 8:return mn(t,945,969,!1,n);case 9:return mn(t,97,122,!1,n);case 10:return mn(t,65,90,!1,n);case 11:return mn(t,1632,1641,!0,n);case 12:case 49:return Su(t,1,9999,W_,3,n);case 35:return Su(t,1,9999,W_,3,n).toLowerCase();case 13:return mn(t,2534,2543,!0,n);case 14:case 30:return mn(t,6112,6121,!0,n);case 15:return Yl(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Yl(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return fo(t,"零一二三四五六七八九",X_,"負",s,SA|FA|Af);case 47:return fo(t,"零壹貳參肆伍陸柒捌玖",J_,"負",s,Ku|SA|FA|Af);case 42:return fo(t,"零一二三四五六七八九",X_,"负",s,SA|FA|Af);case 41:return fo(t,"零壹贰叁肆伍陆柒捌玖",J_,"负",s,Ku|SA|FA|Af);case 26:return fo(t,"〇一二三四五六七八九","十百千万",Y_,s,0);case 25:return fo(t,"零壱弐参四伍六七八九","拾百千万",Y_,s,Ku|SA|FA);case 31:return fo(t,"영일이삼사오육칠팔구","십백천만",Dy,i,Ku|SA|FA);case 33:return fo(t,"零一二三四五六七八九","十百千萬",Dy,i,0);case 32:return fo(t,"零壹貳參四五六七八九","拾百千",Dy,i,Ku|SA|FA);case 18:return mn(t,2406,2415,!0,n);case 20:return Su(t,1,19999,dG,3,n);case 21:return mn(t,2790,2799,!0,n);case 22:return mn(t,2662,2671,!0,n);case 22:return Su(t,1,10999,uG,3,n);case 23:return Yl(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Yl(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return mn(t,3302,3311,!0,n);case 28:return Yl(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Yl(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return mn(t,3792,3801,!0,n);case 37:return mn(t,6160,6169,!0,n);case 38:return mn(t,4160,4169,!0,n);case 39:return mn(t,2918,2927,!0,n);case 40:return mn(t,1776,1785,!0,n);case 43:return mn(t,3046,3055,!0,n);case 44:return mn(t,3174,3183,!0,n);case 45:return mn(t,3664,3673,!0,n);case 46:return mn(t,3872,3881,!0,n);case 3:default:return mn(t,48,57,!0,n)}},a3="data-html2canvas-ignore",Z_=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new cG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=hG(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=mG(s).then(function(){return Ss(n,void 0,void 0,function(){var u,h;return ws(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(yG),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,pG(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(vG(document.doctype)+"<html></html>"),wG(this.referenceElement.ownerDocument,i,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(K2(e,2))debugger;if(r3(e))return this.createCanvasClone(e);if(q_(e))return this.createVideoClone(e);if(G_(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return $2(r)&&($2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),z_(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Ry(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!od(r)||!lG(r)&&!r.hasAttribute(a3)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!od(r)||!G_(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(od(i)&&s3(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(e3(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&od(e)&&(z2(e)||e0(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&z2(s)&&(this.clonedReferenceElement=s),yB(s)&&BG(s);var l=this.counters.parse(new F_(this.context,i)),c=this.resolvePseudoContent(e,s,a,Sf.BEFORE);z_(e)&&(r=!0),q_(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,o,Sf.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||e0(e))&&!n3(e)||r)&&Ry(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Y0(e)||Z0(e))&&(Y0(s)||Z0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new F_(this.context,n));var l=new iq(this.context,n),c=o.createElement("html2canvaspseudoelement");Ry(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",c.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(Sr);p.length&&c.appendChild(o.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(jd),B=b[0],_=b[1];if(B&&Sr(B)){var y=i.counters.getCounterValue(B.value),w=_&&Sr(_)?V2.parse(i.context,_.value):3;c.appendChild(o.createTextNode(wp(y,w,!1)))}}else if(h.name==="counters"){var N=h.values.filter(jd),B=N[0],O=N[1],_=N[2];if(B&&Sr(B)){var R=i.counters.getCounterValues(B.value),M=_&&Sr(_)?V2.parse(i.context,_.value):3,F=O&&O.type===0?O.value:"",E=R.map(function(I){return wp(I,M,!1)}).join(F);c.appendChild(o.createTextNode(E))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(S_(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(S_(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=W2+" "+X2;var u=s===Sf.BEFORE?" "+W2:" "+X2;return e0(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Sf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Sf||(Sf={}));var hG=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(a3,"true"),t.body.appendChild(r),r},fG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},pG=function(t){return Promise.all([].slice.call(t.images,0).map(fG))},mG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},gG=["all","d","content"],Ry=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);gG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},vG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},wG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},yG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},xG=":before",bG=":after",W2="___html2canvas___pseudoelement_before",X2="___html2canvas___pseudoelement_after",eN=`{
    content: "" !important;
    display: none !important;
}`,BG=function(t){CG(t,"."+W2+xG+eN+`
         .`+X2+bG+eN)},CG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},o3=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),EG=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Oy(e)||SG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ss(this,void 0,void 0,function(){var r,n,s,i,a=this;return ws(this,function(o){switch(o.label){case 0:return r=o3.isSameOrigin(e),n=!My(e)&&this._options.useCORS===!0&&es.SUPPORT_CORS_IMAGES&&!r,s=!My(e)&&!r&&!Oy(e)&&typeof this._options.proxy=="string"&&es.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!My(e)&&!Oy(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(FG(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=es.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")i(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(m){return a(m)},!1),h.readAsDataURL(l.response)}else a("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}l.send()})},t}(),_G=/^data:image\/svg\+xml/i,NG=/^data:image\/.*;base64,/i,IG=/^data:image\/.*/i,SG=function(t){return es.SUPPORT_SVG_DRAWING||!TG(t)},My=function(t){return IG.test(t)},FG=function(t){return NG.test(t)},Oy=function(t){return t.substr(0,4)==="blob"},TG=function(t){return t.substr(-3).toLowerCase()==="svg"||_G.test(t)},gt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Fu=function(t,e,r){return new gt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Ag=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Fu(this.start,this.startControl,e),s=Fu(this.startControl,this.endControl,e),i=Fu(this.endControl,this.end,e),a=Fu(n,s,e),o=Fu(s,i,e),l=Fu(a,o,e);return r?new t(this.start,n,a,l):new t(l,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Fi=function(t){return t.type===1},UG=function(){function t(e){var r=e.styles,n=e.bounds,s=af(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=af(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],u=af(r.borderBottomRightRadius,n.width,n.height),h=u[0],m=u[1],p=af(r.borderBottomLeftRadius,n.width,n.height),b=p[0],B=p[1],_=[];_.push((i+l)/n.width),_.push((b+h)/n.width),_.push((a+B)/n.height),_.push((c+m)/n.height);var y=Math.max.apply(Math,_);y>1&&(i/=y,a/=y,l/=y,c/=y,h/=y,m/=y,b/=y,B/=y);var w=n.width-l,N=n.height-m,O=n.width-h,R=n.height-B,M=r.borderTopWidth,F=r.borderRightWidth,E=r.borderBottomWidth,L=r.borderLeftWidth,D=kr(r.paddingTop,e.bounds.width),I=kr(r.paddingRight,e.bounds.width),U=kr(r.paddingBottom,e.bounds.width),T=kr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?zr(n.left+L/3,n.top+M/3,i-L/3,a-M/3,yr.TOP_LEFT):new gt(n.left+L/3,n.top+M/3),this.topRightBorderDoubleOuterBox=i>0||a>0?zr(n.left+w,n.top+M/3,l-F/3,c-M/3,yr.TOP_RIGHT):new gt(n.left+n.width-F/3,n.top+M/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?zr(n.left+O,n.top+N,h-F/3,m-E/3,yr.BOTTOM_RIGHT):new gt(n.left+n.width-F/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=b>0||B>0?zr(n.left+L/3,n.top+R,b-L/3,B-E/3,yr.BOTTOM_LEFT):new gt(n.left+L/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?zr(n.left+L*2/3,n.top+M*2/3,i-L*2/3,a-M*2/3,yr.TOP_LEFT):new gt(n.left+L*2/3,n.top+M*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?zr(n.left+w,n.top+M*2/3,l-F*2/3,c-M*2/3,yr.TOP_RIGHT):new gt(n.left+n.width-F*2/3,n.top+M*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?zr(n.left+O,n.top+N,h-F*2/3,m-E*2/3,yr.BOTTOM_RIGHT):new gt(n.left+n.width-F*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||B>0?zr(n.left+L*2/3,n.top+R,b-L*2/3,B-E*2/3,yr.BOTTOM_LEFT):new gt(n.left+L*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=i>0||a>0?zr(n.left+L/2,n.top+M/2,i-L/2,a-M/2,yr.TOP_LEFT):new gt(n.left+L/2,n.top+M/2),this.topRightBorderStroke=i>0||a>0?zr(n.left+w,n.top+M/2,l-F/2,c-M/2,yr.TOP_RIGHT):new gt(n.left+n.width-F/2,n.top+M/2),this.bottomRightBorderStroke=h>0||m>0?zr(n.left+O,n.top+N,h-F/2,m-E/2,yr.BOTTOM_RIGHT):new gt(n.left+n.width-F/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=b>0||B>0?zr(n.left+L/2,n.top+R,b-L/2,B-E/2,yr.BOTTOM_LEFT):new gt(n.left+L/2,n.top+n.height-E/2),this.topLeftBorderBox=i>0||a>0?zr(n.left,n.top,i,a,yr.TOP_LEFT):new gt(n.left,n.top),this.topRightBorderBox=l>0||c>0?zr(n.left+w,n.top,l,c,yr.TOP_RIGHT):new gt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?zr(n.left+O,n.top+N,h,m,yr.BOTTOM_RIGHT):new gt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||B>0?zr(n.left,n.top+R,b,B,yr.BOTTOM_LEFT):new gt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?zr(n.left+L,n.top+M,Math.max(0,i-L),Math.max(0,a-M),yr.TOP_LEFT):new gt(n.left+L,n.top+M),this.topRightPaddingBox=l>0||c>0?zr(n.left+Math.min(w,n.width-F),n.top+M,w>n.width+F?0:Math.max(0,l-F),Math.max(0,c-M),yr.TOP_RIGHT):new gt(n.left+n.width-F,n.top+M),this.bottomRightPaddingBox=h>0||m>0?zr(n.left+Math.min(O,n.width-L),n.top+Math.min(N,n.height-E),Math.max(0,h-F),Math.max(0,m-E),yr.BOTTOM_RIGHT):new gt(n.left+n.width-F,n.top+n.height-E),this.bottomLeftPaddingBox=b>0||B>0?zr(n.left+L,n.top+Math.min(R,n.height-E),Math.max(0,b-L),Math.max(0,B-E),yr.BOTTOM_LEFT):new gt(n.left+L,n.top+n.height-E),this.topLeftContentBox=i>0||a>0?zr(n.left+L+T,n.top+M+D,Math.max(0,i-(L+T)),Math.max(0,a-(M+D)),yr.TOP_LEFT):new gt(n.left+L+T,n.top+M+D),this.topRightContentBox=l>0||c>0?zr(n.left+Math.min(w,n.width+L+T),n.top+M+D,w>n.width+L+T?0:l-L+T,c-(M+D),yr.TOP_RIGHT):new gt(n.left+n.width-(F+I),n.top+M+D),this.bottomRightContentBox=h>0||m>0?zr(n.left+Math.min(O,n.width-(L+T)),n.top+Math.min(N,n.height+M+D),Math.max(0,h-(F+I)),m-(E+U),yr.BOTTOM_RIGHT):new gt(n.left+n.width-(F+I),n.top+n.height-(E+U)),this.bottomLeftContentBox=b>0||B>0?zr(n.left+L+T,n.top+R,Math.max(0,b-(L+T)),B-(E+U),yr.BOTTOM_LEFT):new gt(n.left+L+T,n.top+n.height-(E+U))}return t}(),yr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(yr||(yr={}));var zr=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,l=t+r,c=e+n;switch(s){case yr.TOP_LEFT:return new Ag(new gt(t,c),new gt(t,c-o),new gt(l-a,e),new gt(l,e));case yr.TOP_RIGHT:return new Ag(new gt(t,e),new gt(t+a,e),new gt(l,c-o),new gt(l,c));case yr.BOTTOM_RIGHT:return new Ag(new gt(l,e),new gt(l,e+o),new gt(t+a,c),new gt(t,c));case yr.BOTTOM_LEFT:default:return new Ag(new gt(l,c),new gt(l-a,c),new gt(t,e+o),new gt(t,e))}},ev=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},PG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},tv=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},QG=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),lg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),jG=function(t){return t.type===0},A3=function(t){return t.type===1},kG=function(t){return t.type===2},tN=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},DG=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},l3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),c3=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new UG(this.container),this.container.styles.opacity<1&&this.effects.push(new LG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new QG(n,s,i))}if(this.container.styles.overflowX!==0){var a=ev(this.curves),o=tv(this.curves);tN(a,o)?this.effects.push(new lg(a,6)):(this.effects.push(new lg(a,2)),this.effects.push(new lg(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(l){return!A3(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=ev(n.curves),o=tv(n.curves);tN(a,o)||s.unshift(new lg(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(l){return Pn(l.target,e)})},t}(),J2=function(t,e,r,n){t.container.elements.forEach(function(s){var i=Pn(s.flags,4),a=Pn(s.flags,2),o=new c3(s,t);Pn(s.styles.display,2048)&&n.push(o);var l=Pn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new l3(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var m=0;c.negativeZIndex.some(function(b,B){return h>b.element.container.styles.zIndex.order?(m=B,!1):m>0}),c.negativeZIndex.splice(m,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(b,B){return h>=b.element.container.styles.zIndex.order?(p=B+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);J2(o,u,i?u:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),J2(o,e,r,l);Pn(s.flags,8)&&u3(s,l)})},u3=function(t,e){for(var r=t instanceof G2?t.start:1,n=t instanceof G2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof $U&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=wp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},RG=function(t){var e=new c3(t,null),r=new l3(e),n=[];return J2(e,r,r,n),u3(e.container,n),r},rN=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},MG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Qi(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},OG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},HG=function(t,e){switch(e){case 0:return cg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return cg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return cg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return cg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},cg=function(t,e){var r=[];return Fi(t)?r.push(t.subdivide(.5,!1)):r.push(t),Fi(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Qi=function(t,e,r,n){var s=[];return Fi(t)?s.push(t.subdivide(.5,!1)):s.push(t),Fi(r)?s.push(r.subdivide(.5,!0)):s.push(r),Fi(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Fi(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},d3=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},rv=function(t){var e=t.styles,r=t.bounds,n=kr(e.paddingLeft,r.width),s=kr(e.paddingRight,r.width),i=kr(e.paddingTop,r.width),a=kr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},VG=function(t,e){return t===0?e.bounds:t===2?rv(e):d3(e)},KG=function(t,e){return t===0?e.bounds:t===2?rv(e):d3(e)},Hy=function(t,e,r){var n=VG(qu(t.styles.backgroundOrigin,e),t),s=KG(qu(t.styles.backgroundClip,e),t),i=qG(qu(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],l=af(qu(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=GG(qu(t.styles.backgroundRepeat,e),l,i,n,s),u=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,u,h,a,o]},Tu=function(t){return Sr(t)&&t.value===vd.AUTO},ug=function(t){return typeof t=="number"},qG=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(_n(a)&&o&&_n(o))return[kr(a,r.width),kr(o,r.height)];var l=ug(i);if(Sr(a)&&(a.value===vd.CONTAIN||a.value===vd.COVER)){if(ug(i)){var c=r.width/r.height;return c<i!=(a.value===vd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=ug(n),h=ug(s),m=u||h;if(Tu(a)&&(!o||Tu(o))){if(u&&h)return[n,s];if(!l&&!m)return[r.width,r.height];if(m&&l){var p=u?n:s*i,b=h?s:n/i;return[p,b]}var B=u?n:r.width,_=h?s:r.height;return[B,_]}if(l){var y=0,w=0;return _n(a)?y=kr(a,r.width):_n(o)&&(w=kr(o,r.height)),Tu(a)?y=w*i:(!o||Tu(o))&&(w=y/i),[y,w]}var N=null,O=null;if(_n(a)?N=kr(a,r.width):o&&_n(o)&&(O=kr(o,r.height)),N!==null&&(!o||Tu(o))&&(O=u&&h?N/n*s:r.height),O!==null&&Tu(a)&&(N=u&&h?O/s*n:r.width),N!==null&&O!==null)return[N,O];throw new Error("Unable to calculate background-size for element")},qu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},GG=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],l=r[1];switch(t){case 2:return[new gt(Math.round(n.left),Math.round(n.top+a)),new gt(Math.round(n.left+n.width),Math.round(n.top+a)),new gt(Math.round(n.left+n.width),Math.round(l+n.top+a)),new gt(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new gt(Math.round(n.left+i),Math.round(n.top)),new gt(Math.round(n.left+i+o),Math.round(n.top)),new gt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new gt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new gt(Math.round(n.left+i),Math.round(n.top+a)),new gt(Math.round(n.left+i+o),Math.round(n.top+a)),new gt(Math.round(n.left+i+o),Math.round(n.top+a+l)),new gt(Math.round(n.left+i),Math.round(n.top+a+l))];default:return[new gt(Math.round(s.left),Math.round(s.top)),new gt(Math.round(s.left+s.width),Math.round(s.top)),new gt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new gt(Math.round(s.left),Math.round(s.height+s.top))]}},zG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nN="Hidden Text",$G=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=zG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(nN)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(nN)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),h3=function(){function t(e,r){this.context=e,this.options=r}return t}(),WG=1e4,XG=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new $G(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),kG(r)&&(this.ctx.globalAlpha=r.opacity),jG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),A3(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Ss(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Ss(this,void 0,void 0,function(){return ws(this,function(n){switch(n.label){case 0:if(Pn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=vB(r.text);a.reduce(function(o,l){return i.ctx.fillText(l,o,r.bounds.top+s),o+i.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=tz(r.fontFamily).join(", "),i=Gp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return Ss(this,void 0,void 0,function(){var s,i,a,o,l,c,u,h,m=this;return ws(this,function(p){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),c=l.baseline,u=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(B){switch(B){case 0:m.ctx.fillStyle=On(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,c);var _=n.textShadow;_.length&&b.text.trim().length&&(_.slice(0).reverse().forEach(function(y){m.ctx.shadowColor=On(y.color),m.ctx.shadowOffsetX=y.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=y.offsetY.number*m.options.scale,m.ctx.shadowBlur=y.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,c)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=On(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+c),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+u),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=On(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+c)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=rv(r),a=tv(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Ss(this,void 0,void 0,function(){var n,s,i,a,o,l,w,w,c,u,h,m,O,p,b,R,B,_,y,w,N,O,R;return ws(this,function(M){switch(M.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,M.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,i)]):[3,4];case 2:M.sent(),M.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof qU))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=M.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof GU&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof zU))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=M.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof JU&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=M.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),M.label=14;case 14:if(n instanceof wB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===X0?n.checked&&(this.ctx.save(),this.path([new gt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new gt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new gt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new gt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new gt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new gt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new gt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=On(K_),this.ctx.fill(),this.ctx.restore()):n.type===J0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=On(K_),this.ctx.fill(),this.ctx.restore())),JG(n)&&n.value.length){switch(m=this.createFontStyle(i),O=m[0],p=m[1],b=this.fontMetrics.getMetrics(O,p).baseline,this.ctx.font=O,this.ctx.fillStyle=On(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ZG(n.styles.textAlign),R=rv(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}_=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new gt(R.left,R.top),new gt(R.left+R.width,R.top),new gt(R.left+R.width,R.top+R.height),new gt(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new If(n.value,_),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,N=y.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return w=M.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(O=this.createFontStyle(i)[0],this.ctx.font=O,this.ctx.fillStyle=On(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new Vo(n.bounds.left,n.bounds.top+kr(n.styles.paddingTop,n.bounds.width),n.bounds.width,N_(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new If(r.listValue,R),i.letterSpacing,N_(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Ss(this,void 0,void 0,function(){var n,s,y,i,a,y,o,l,y,c,u,y,h,m,y,p,b,y,B,_,y;return ws(this,function(w){switch(w.label){case 0:if(Pn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(y=s[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),i=0,a=r.nonInlineLevel,w.label=7;case 7:return i<a.length?(y=a[i],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return i++,[3,7];case 10:o=0,l=r.nonPositionedFloats,w.label=11;case 11:return o<l.length?(y=l[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,w.label=15;case 15:return c<u.length?(y=u[c],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,m=r.inlineLevel,w.label=19;case 19:return h<m.length?(y=m[h],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:p=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<b.length?(y=b[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:B=0,_=r.positiveZIndex,w.label=27;case 27:return B<_.length?(y=_[B],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Fi(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Fi(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return Ss(this,void 0,void 0,function(){var n,s,i,a,o,l;return ws(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var h,m,p,D,re,ue,T,ee,E,b,D,re,ue,T,ee,B,_,y,w,N,O,R,M,F,E,L,D,I,U,T,ee,le,re,ue,W,ce,ie,Ee,P,k,z,te;return ws(this,function($){switch($.label){case 0:if(u.type!==0)return[3,5];h=void 0,m=u.url,$.label=1;case 1:return $.trys.push([1,3,,4]),[4,i.context.cache.match(m)];case 2:return h=$.sent(),[3,4];case 3:return $.sent(),i.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(p=Hy(r,n,[h.width,h.height,h.width/h.height]),D=p[0],re=p[1],ue=p[2],T=p[3],ee=p[4],E=i.ctx.createPattern(i.resizeImage(h,T,ee),"repeat"),i.renderRepeat(D,E,re,ue)),[3,6];case 5:j9(u)?(b=Hy(r,n,[null,null,null]),D=b[0],re=b[1],ue=b[2],T=b[3],ee=b[4],B=T9(u.angle,T,ee),_=B[0],y=B[1],w=B[2],N=B[3],O=B[4],R=document.createElement("canvas"),R.width=T,R.height=ee,M=R.getContext("2d"),F=M.createLinearGradient(y,N,w,O),E_(u.stops,_).forEach(function(ne){return F.addColorStop(ne.stop,On(ne.color))}),M.fillStyle=F,M.fillRect(0,0,T,ee),T>0&&ee>0&&(E=i.ctx.createPattern(R,"repeat"),i.renderRepeat(D,E,re,ue))):k9(u)&&(L=Hy(r,n,[null,null,null]),D=L[0],I=L[1],U=L[2],T=L[3],ee=L[4],le=u.position.length===0?[pB]:u.position,re=kr(le[0],T),ue=kr(le[le.length-1],ee),W=U9(u,re,ue,T,ee),ce=W[0],ie=W[1],ce>0&&ie>0&&(Ee=i.ctx.createRadialGradient(I+re,U+ue,0,I+re,U+ue,ce),E_(u.stops,ce*2).forEach(function(ne){return Ee.addColorStop(ne.stop,On(ne.color))}),i.path(D),i.ctx.fillStyle=Ee,ce!==ie?(P=r.bounds.left+.5*r.bounds.width,k=r.bounds.top+.5*r.bounds.height,z=ie/ce,te=1/z,i.ctx.save(),i.ctx.translate(P,k),i.ctx.transform(1,0,0,z,0,0),i.ctx.translate(-P,-k),i.ctx.fillRect(I,te*(U-k)+k,T,ee*te),i.ctx.restore()):i.ctx.fill())),$.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(l=o[a],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Ss(this,void 0,void 0,function(){return ws(this,function(i){return this.path(rN(s,n)),this.ctx.fillStyle=On(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return Ss(this,void 0,void 0,function(){var a,o;return ws(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return a=MG(i,s),this.path(a),this.ctx.fillStyle=On(r),this.ctx.fill(),o=OG(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Ss(this,void 0,void 0,function(){var n,s,i,a,o,l,c,u,h=this;return ws(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!cl(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=YG(qu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),cl(n.backgroundColor)||(this.ctx.fillStyle=On(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var b=ev(r.curves),B=p.inset?0:WG,_=DG(b,-B+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(b),h.ctx.clip(),h.mask(_)):(h.mask(b),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=p.offsetX.number+B,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=On(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?On(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,c=i,m.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!cl(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return Ss(this,void 0,void 0,function(){var o,l,c,u,h,m,p,b,B,_,y,w,N,O,R,M,R,M;return ws(this,function(F){return this.ctx.save(),o=HG(i,s),l=rN(i,s),a===2&&(this.path(l),this.ctx.clip()),Fi(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Fi(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),s===0||s===2?p=Math.abs(c-h):p=Math.abs(u-m),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,B=n<3?n*2:n,a===3&&(b=n,B=n),_=!0,p<=b*2?_=!1:p<=b*2+B?(y=p/(2*b+B),b*=y,B*=y):(w=Math.floor((p+B)/(b+B)),N=(p-w*b)/(w-1),O=(p-(w+1)*b)/w,B=O<=0||Math.abs(B-N)<Math.abs(B-O)?N:O),_&&(a===3?this.ctx.setLineDash([0,b+B]):this.ctx.setLineDash([b,B])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=On(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Fi(l[0])&&(R=l[3],M=l[0],this.ctx.beginPath(),this.formatPath([new gt(R.end.x,R.end.y),new gt(M.start.x,M.start.y)]),this.ctx.stroke()),Fi(l[1])&&(R=l[1],M=l[2],this.ctx.beginPath(),this.formatPath([new gt(R.end.x,R.end.y),new gt(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Ss(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=On(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=RG(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(h3),JG=function(t){return t instanceof XU||t instanceof WU?!0:t instanceof wB&&t.type!==J0&&t.type!==X0},YG=function(t,e){switch(t){case 0:return ev(e);case 2:return PG(e);case 1:default:return tv(e)}},ZG=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ez=["-apple-system","system-ui"],tz=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return ez.indexOf(e)===-1}):t},rz=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Ss(this,void 0,void 0,function(){var n,s;return ws(this,function(i){switch(i.label){case 0:return n=q2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,nz(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=On(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(h3),nz=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},sz=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Vm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),iz=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new sz({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new EG(this,e)}return t.instanceCount=1,t}(),xB=function(t,e){return e===void 0&&(e={}),az(t,e)};typeof window<"u"&&o3.setContext(window);var az=function(t,e){return Ss(void 0,void 0,void 0,function(){var r,n,s,i,a,o,l,c,u,h,m,p,b,B,_,y,w,N,O,R,F,M,F,E,L,D,I,U,T,ee,le,re,ue,W,ce,ie,Ee,P,k,z;return ws(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(L=e.imageTimeout)!==null&&L!==void 0?L:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=F2({logging:(I=e.logging)!==null&&I!==void 0?I:!0,cache:e.cache},s),a={windowWidth:(U=e.windowWidth)!==null&&U!==void 0?U:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(ee=e.scrollX)!==null&&ee!==void 0?ee:n.pageXOffset,scrollY:(le=e.scrollY)!==null&&le!==void 0?le:n.pageYOffset},o=new Vo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),l=new iz(i,o),c=(re=e.foreignObjectRendering)!==null&&re!==void 0?re:!1,u={allowTaint:(ue=e.allowTaint)!==null&&ue!==void 0?ue:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new Z_(l,t,u),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),b=yB(m)||AG(m)?DV(m.ownerDocument):iw(l,m),B=b.width,_=b.height,y=b.left,w=b.top,N=oz(l,m,e.backgroundColor),O={canvas:e.canvas,backgroundColor:N,scale:(ce=(W=e.scale)!==null&&W!==void 0?W:n.devicePixelRatio)!==null&&ce!==void 0?ce:1,x:((ie=e.x)!==null&&ie!==void 0?ie:0)+y,y:((Ee=e.y)!==null&&Ee!==void 0?Ee:0)+w,width:(P=e.width)!==null&&P!==void 0?P:Math.ceil(B),height:(k=e.height)!==null&&k!==void 0?k:Math.ceil(_)},c?(l.logger.debug("Document cloned, using foreign object rendering"),F=new rz(l,O),[4,F.render(m)]):[3,3];case 2:return R=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+w+" with size "+B+"x"+_+" using computed rendering"),l.logger.debug("Starting DOM parsing"),M=ZU(l,m),N===M.styles.backgroundColor&&(M.styles.backgroundColor=Po.TRANSPARENT),l.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),F=new XG(l,O),[4,F.render(M)];case 4:R=te.sent(),te.label=5;case 5:return(!((z=e.removeContainer)!==null&&z!==void 0)||z)&&(Z_.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,R]}})})},oz=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?_f(t,getComputedStyle(n.documentElement).backgroundColor):Po.TRANSPARENT,i=n.body?_f(t,getComputedStyle(n.body).backgroundColor):Po.TRANSPARENT,a=typeof r=="string"?_f(t,r):r===null?Po.TRANSPARENT:4294967295;return e===n.documentElement?cl(s)?cl(i)?a:i:s:a};const bB=Object.freeze(Object.defineProperty({__proto__:null,default:xB},Symbol.toStringTag,{value:"Module"})),Az="modulepreload",lz=function(t){return"/"+t},sN={},Qo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=lz(l),l in sN)return;sN[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Az,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function _r(t){"@babel/helpers - typeof";return _r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(t)}var bs=Uint8Array,li=Uint16Array,BB=Int32Array,pw=new bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mw=new bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y2=new bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f3=function(t,e){for(var r=new li(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new BB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},p3=f3(pw,2),m3=p3.b,Z2=p3.r;m3[28]=258,Z2[258]=28;var g3=f3(mw,0),cz=g3.b,iN=g3.r,ex=new li(32768);for(var Kr=0;Kr<32768;++Kr){var NA=(Kr&43690)>>1|(Kr&21845)<<1;NA=(NA&52428)>>2|(NA&13107)<<2,NA=(NA&61680)>>4|(NA&3855)<<4,ex[Kr]=((NA&65280)>>8|(NA&255)<<8)>>1}var Ha=function(t,e,r){for(var n=t.length,s=0,i=new li(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new li(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new li(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],h=a[t[s]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)o[ex[h]>>l]=c}else for(o=new li(n),s=0;s<n;++s)t[s]&&(o[s]=ex[a[t[s]-1]++]>>15-t[s]);return o},xl=new bs(288);for(var Kr=0;Kr<144;++Kr)xl[Kr]=8;for(var Kr=144;Kr<256;++Kr)xl[Kr]=9;for(var Kr=256;Kr<280;++Kr)xl[Kr]=7;for(var Kr=280;Kr<288;++Kr)xl[Kr]=8;var yp=new bs(32);for(var Kr=0;Kr<32;++Kr)yp[Kr]=5;var uz=Ha(xl,9,0),dz=Ha(xl,9,1),hz=Ha(yp,5,0),fz=Ha(yp,5,1),Vy=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Xi=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Ky=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},CB=function(t){return(t+7)/8|0},v3=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new bs(t.subarray(e,r))},pz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ta=function(t,e,r){var n=new Error(e||pz[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ta),!r)throw n;return n},mz=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new bs(0);var a=!r,o=a||e.i!=2,l=e.i;a&&(r=new bs(s*3));var c=function(Ce){var Ue=r.length;if(Ce>Ue){var Te=new bs(Math.max(Ue*2,Ce));Te.set(r),r=Te}},u=e.f||0,h=e.p||0,m=e.b||0,p=e.l,b=e.d,B=e.m,_=e.n,y=s*8;do{if(!p){u=Xi(t,h,1);var w=Xi(t,h+1,3);if(h+=3,w)if(w==1)p=dz,b=fz,B=9,_=5;else if(w==2){var M=Xi(t,h,31)+257,F=Xi(t,h+10,15)+4,E=M+Xi(t,h+5,31)+1;h+=14;for(var L=new bs(E),D=new bs(19),I=0;I<F;++I)D[Y2[I]]=Xi(t,h+I*3,7);h+=F*3;for(var U=Vy(D),T=(1<<U)-1,ee=Ha(D,U,1),I=0;I<E;){var le=ee[Xi(t,h,T)];h+=le&15;var N=le>>4;if(N<16)L[I++]=N;else{var re=0,ue=0;for(N==16?(ue=3+Xi(t,h,3),h+=2,re=L[I-1]):N==17?(ue=3+Xi(t,h,7),h+=3):N==18&&(ue=11+Xi(t,h,127),h+=7);ue--;)L[I++]=re}}var W=L.subarray(0,M),ce=L.subarray(M);B=Vy(W),_=Vy(ce),p=Ha(W,B,1),b=Ha(ce,_,1)}else ta(1);else{var N=CB(h)+4,O=t[N-4]|t[N-3]<<8,R=N+O;if(R>s){l&&ta(0);break}o&&c(m+O),r.set(t.subarray(N,R),m),e.b=m+=O,e.p=h=R*8,e.f=u;continue}if(h>y){l&&ta(0);break}}o&&c(m+131072);for(var ie=(1<<B)-1,Ee=(1<<_)-1,P=h;;P=h){var re=p[Ky(t,h)&ie],k=re>>4;if(h+=re&15,h>y){l&&ta(0);break}if(re||ta(2),k<256)r[m++]=k;else if(k==256){P=h,p=null;break}else{var z=k-254;if(k>264){var I=k-257,te=pw[I];z=Xi(t,h,(1<<te)-1)+m3[I],h+=te}var $=b[Ky(t,h)&Ee],ne=$>>4;$||ta(3),h+=$&15;var ce=cz[ne];if(ne>3){var te=mw[ne];ce+=Ky(t,h)&(1<<te)-1,h+=te}if(h>y){l&&ta(0);break}o&&c(m+131072);var X=m+z;if(m<ce){var de=i-ce,ge=Math.min(ce,X);for(de+m<0&&ta(3);m<ge;++m)r[m]=n[de+m]}for(;m<X;++m)r[m]=r[m-ce]}}e.l=p,e.p=P,e.b=m,e.f=u,p&&(u=1,e.m=B,e.d=b,e.n=_)}while(!u);return m!=r.length&&a?v3(r,0,m):r.subarray(0,m)},po=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Mh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},qy=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:y3,l:0};if(s==1){var a=new bs(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(R,M){return R.f-M.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=r[r[c].f<r[h].f?c++:h++],l=r[c!=u&&r[c].f<r[h].f?c++:h++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new li(m+1),b=tx(r[u-1],p,0);if(b>e){var n=0,B=0,_=b-e,y=1<<_;for(i.sort(function(M,F){return p[F.s]-p[M.s]||M.f-F.f});n<s;++n){var w=i[n].s;if(p[w]>e)B+=y-(1<<b-p[w]),p[w]=e;else break}for(B>>=_;B>0;){var N=i[n].s;p[N]<e?B-=1<<e-p[N]++-1:++n}for(;n>=0&&B;--n){var O=i[n].s;p[O]==e&&(--p[O],++B)}b=e}return{t:new bs(p),l:b}},tx=function(t,e,r){return t.s==-1?Math.max(tx(t.l,e,r+1),tx(t.r,e,r+1)):e[t.s]=r},aN=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new li(++e),n=0,s=t[0],i=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Oh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},w3=function(t,e,r){var n=r.length,s=CB(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},oN=function(t,e,r,n,s,i,a,o,l,c,u){po(e,u++,r),++s[256];for(var h=qy(s,15),m=h.t,p=h.l,b=qy(i,15),B=b.t,_=b.l,y=aN(m),w=y.c,N=y.n,O=aN(B),R=O.c,M=O.n,F=new li(19),E=0;E<w.length;++E)++F[w[E]&31];for(var E=0;E<R.length;++E)++F[R[E]&31];for(var L=qy(F,7),D=L.t,I=L.l,U=19;U>4&&!D[Y2[U-1]];--U);var T=c+5<<3,ee=Oh(s,xl)+Oh(i,yp)+a,le=Oh(s,m)+Oh(i,B)+a+14+3*U+Oh(F,D)+2*F[16]+3*F[17]+7*F[18];if(l>=0&&T<=ee&&T<=le)return w3(e,u,t.subarray(l,l+c));var re,ue,W,ce;if(po(e,u,1+(le<ee)),u+=2,le<ee){re=Ha(m,p,0),ue=m,W=Ha(B,_,0),ce=B;var ie=Ha(D,I,0);po(e,u,N-257),po(e,u+5,M-1),po(e,u+10,U-4),u+=14;for(var E=0;E<U;++E)po(e,u+3*E,D[Y2[E]]);u+=3*U;for(var Ee=[w,R],P=0;P<2;++P)for(var k=Ee[P],E=0;E<k.length;++E){var z=k[E]&31;po(e,u,ie[z]),u+=D[z],z>15&&(po(e,u,k[E]>>5&127),u+=k[E]>>12)}}else re=uz,ue=xl,W=hz,ce=yp;for(var E=0;E<o;++E){var te=n[E];if(te>255){var z=te>>18&31;Mh(e,u,re[z+257]),u+=ue[z+257],z>7&&(po(e,u,te>>23&31),u+=pw[z]);var $=te&31;Mh(e,u,W[$]),u+=ce[$],$>3&&(Mh(e,u,te>>5&8191),u+=mw[$])}else Mh(e,u,re[te]),u+=ue[te]}return Mh(e,u,re[256]),u+ue[256]},gz=new BB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),y3=new bs(0),vz=function(t,e,r,n,s,i){var a=i.z||t.length,o=new bs(n+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var h=gz[e-1],m=h>>13,p=h&8191,b=(1<<r)-1,B=i.p||new li(32768),_=i.h||new li(b+1),y=Math.ceil(r/3),w=2*y,N=function(ae){return(t[ae]^t[ae+1]<<y^t[ae+2]<<w)&b},O=new BB(25e3),R=new li(288),M=new li(32),F=0,E=0,L=i.i||0,D=0,I=i.w||0,U=0;L+2<a;++L){var T=N(L),ee=L&32767,le=_[T];if(B[ee]=le,_[T]=ee,I<=L){var re=a-L;if((F>7e3||D>24576)&&(re>423||!c)){u=oN(t,l,0,O,R,M,E,D,U,L-U,u),D=F=E=0,U=L;for(var ue=0;ue<286;++ue)R[ue]=0;for(var ue=0;ue<30;++ue)M[ue]=0}var W=2,ce=0,ie=p,Ee=ee-le&32767;if(re>2&&T==N(L-Ee))for(var P=Math.min(m,re)-1,k=Math.min(32767,L),z=Math.min(258,re);Ee<=k&&--ie&&ee!=le;){if(t[L+W]==t[L+W-Ee]){for(var te=0;te<z&&t[L+te]==t[L+te-Ee];++te);if(te>W){if(W=te,ce=Ee,te>P)break;for(var $=Math.min(Ee,te-2),ne=0,ue=0;ue<$;++ue){var X=L-Ee+ue&32767,de=B[X],ge=X-de&32767;ge>ne&&(ne=ge,le=X)}}}ee=le,le=B[ee],Ee+=ee-le&32767}if(ce){O[D++]=268435456|Z2[W]<<18|iN[ce];var Ce=Z2[W]&31,Ue=iN[ce]&31;E+=pw[Ce]+mw[Ue],++R[257+Ce],++M[Ue],I=L+W,++F}else O[D++]=t[L],++R[t[L]]}}for(L=Math.max(L,I);L<a;++L)O[D++]=t[L],++R[t[L]];u=oN(t,l,c,O,R,M,E,D,U,L-U,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=_,i.p=B,i.i=L,i.w=I)}else{for(var L=i.w||0;L<a+c;L+=65535){var Te=L+65535;Te>=a&&(l[u/8|0]=c,Te=a),u=w3(l,u+1,t.subarray(L,Te))}i.i=a}return v3(o,0,n+CB(u)+s)},x3=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wz=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new bs(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return vz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},b3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},yz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=x3();s.p(e.dictionary),b3(t,2,s.d())}},xz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ta(6,"invalid zlib data"),(t[1]>>5&1)==1&&ta(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function rx(t,e){e||(e={});var r=x3();r.p(t);var n=wz(t,e,e.dictionary?6:2,4);return yz(n,e),b3(n,n.length-4,r.d()),n}function bz(t,e){return mz(t.subarray(xz(t),-4),{i:2},e,e)}var Bz=typeof TextDecoder<"u"&&new TextDecoder,Cz=0;try{Bz.decode(y3,{stream:!0}),Cz=1}catch{}var Rt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Gy(){Rt.console&&typeof Rt.console.log=="function"&&Rt.console.log.apply(Rt.console,arguments)}var Pr={log:Gy,warn:function(t){Rt.console&&(typeof Rt.console.warn=="function"?Rt.console.warn.apply(Rt.console,arguments):Gy.call(null,arguments))},error:function(t){Rt.console&&(typeof Rt.console.error=="function"?Rt.console.error.apply(Rt.console,arguments):Gy(t))}};function zy(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ac(n.response,e,r)},n.onerror=function(){Pr.error("could not download file")},n.send()}function AN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ff,nx,ac=Rt.saveAs||((typeof window>"u"?"undefined":_r(window))!=="object"||window!==Rt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Rt.URL||Rt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?AN(s.href)?zy(t,e,r):dg(s,s.target="_blank"):dg(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){dg(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(AN(t))zy(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){dg(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:_r(i)!=="object"&&(Pr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return zy(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(Rt.HTMLElement)||Rt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":_r(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var l=Rt.URL||Rt.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function B3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $y(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=ps(r,n,s,i,e[0],7,-680876936),i=ps(i,r,n,s,e[1],12,-389564586),s=ps(s,i,r,n,e[2],17,606105819),n=ps(n,s,i,r,e[3],22,-1044525330),r=ps(r,n,s,i,e[4],7,-176418897),i=ps(i,r,n,s,e[5],12,1200080426),s=ps(s,i,r,n,e[6],17,-1473231341),n=ps(n,s,i,r,e[7],22,-45705983),r=ps(r,n,s,i,e[8],7,1770035416),i=ps(i,r,n,s,e[9],12,-1958414417),s=ps(s,i,r,n,e[10],17,-42063),n=ps(n,s,i,r,e[11],22,-1990404162),r=ps(r,n,s,i,e[12],7,1804603682),i=ps(i,r,n,s,e[13],12,-40341101),s=ps(s,i,r,n,e[14],17,-1502002290),r=ms(r,n=ps(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ms(i,r,n,s,e[6],9,-1069501632),s=ms(s,i,r,n,e[11],14,643717713),n=ms(n,s,i,r,e[0],20,-373897302),r=ms(r,n,s,i,e[5],5,-701558691),i=ms(i,r,n,s,e[10],9,38016083),s=ms(s,i,r,n,e[15],14,-660478335),n=ms(n,s,i,r,e[4],20,-405537848),r=ms(r,n,s,i,e[9],5,568446438),i=ms(i,r,n,s,e[14],9,-1019803690),s=ms(s,i,r,n,e[3],14,-187363961),n=ms(n,s,i,r,e[8],20,1163531501),r=ms(r,n,s,i,e[13],5,-1444681467),i=ms(i,r,n,s,e[2],9,-51403784),s=ms(s,i,r,n,e[7],14,1735328473),r=gs(r,n=ms(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=gs(i,r,n,s,e[8],11,-2022574463),s=gs(s,i,r,n,e[11],16,1839030562),n=gs(n,s,i,r,e[14],23,-35309556),r=gs(r,n,s,i,e[1],4,-1530992060),i=gs(i,r,n,s,e[4],11,1272893353),s=gs(s,i,r,n,e[7],16,-155497632),n=gs(n,s,i,r,e[10],23,-1094730640),r=gs(r,n,s,i,e[13],4,681279174),i=gs(i,r,n,s,e[0],11,-358537222),s=gs(s,i,r,n,e[3],16,-722521979),n=gs(n,s,i,r,e[6],23,76029189),r=gs(r,n,s,i,e[9],4,-640364487),i=gs(i,r,n,s,e[12],11,-421815835),s=gs(s,i,r,n,e[15],16,530742520),r=vs(r,n=gs(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=vs(i,r,n,s,e[7],10,1126891415),s=vs(s,i,r,n,e[14],15,-1416354905),n=vs(n,s,i,r,e[5],21,-57434055),r=vs(r,n,s,i,e[12],6,1700485571),i=vs(i,r,n,s,e[3],10,-1894986606),s=vs(s,i,r,n,e[10],15,-1051523),n=vs(n,s,i,r,e[1],21,-2054922799),r=vs(r,n,s,i,e[8],6,1873313359),i=vs(i,r,n,s,e[15],10,-30611744),s=vs(s,i,r,n,e[6],15,-1560198380),n=vs(n,s,i,r,e[13],21,1309151649),r=vs(r,n,s,i,e[4],6,-145523070),i=vs(i,r,n,s,e[11],10,-1120210379),s=vs(s,i,r,n,e[2],15,718787259),n=vs(n,s,i,r,e[9],21,-343485551),t[0]=WA(r,t[0]),t[1]=WA(n,t[1]),t[2]=WA(s,t[2]),t[3]=WA(i,t[3])}function gw(t,e,r,n,s,i){return e=WA(WA(e,t),WA(n,i)),WA(e<<s|e>>>32-s,r)}function ps(t,e,r,n,s,i,a){return gw(e&r|~e&n,t,e,s,i,a)}function ms(t,e,r,n,s,i,a){return gw(e&n|r&~n,t,e,s,i,a)}function gs(t,e,r,n,s,i,a){return gw(e^r^n,t,e,s,i,a)}function vs(t,e,r,n,s,i,a){return gw(r^(e|~n),t,e,s,i,a)}function C3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$y(n,Ez(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for($y(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,$y(n,s),n}function Ez(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Ff=Rt.atob.bind(Rt),nx=Rt.btoa.bind(Rt);var lN="0123456789abcdef".split("");function _z(t){for(var e="",r=0;r<4;r++)e+=lN[t>>8*r+4&15]+lN[t>>8*r&15];return e}function Nz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function sx(t){return C3(t).map(Nz).join("")}var Iz=function(t){for(var e=0;e<t.length;e++)t[e]=_z(t[e]);return t.join("")}(C3("hello"))!="5d41402abc4b2a76b9719d911017c592";function WA(t,e){if(Iz){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ix(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}r=t,n=o}else o=n;var h=e.length,m=0,p=0,b="";for(l=0;l<h;l++)p=(p+(u=o[m=(m+1)%256]))%256,o[m]=o[p],o[p]=u,a=o[(o[m]+o[p])%256],b+=String.fromCharCode(e.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var cN={print:4,modify:8,copy:16,"annot-forms":32};function Gu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(cN.perm!==void 0)throw new Error("Invalid permission: "+o);s+=cN[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=sx(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ix(this.encryptionKey,this.padding)}function zu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function uN(t){if(_r(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){Rt.console&&Pr.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function xp(t){if(!(this instanceof xp))return new xp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function E3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function HA(t,e,r,n,s){if(!(this instanceof HA))return new HA(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,E3.call(this,n,s)}function gc(t,e,r,n,s){if(!(this instanceof gc))return new gc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,E3.call(this,n,s)}function Qt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,c="S",u=null;_r(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=uN;var b="1.3",B=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(v){b=v};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return _};var y=p.__private__.getPageFormat=function(v){return _[v]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function O(){this.saveGraphicsState(),G(new He(_e,0,0,-_e,0,us()*_e).toString()+" cm"),this.setFontSize(this.getFontSize()/_e),c="n",N=w.ADVANCED}function R(){this.restoreGraphicsState(),c="S",N=w.COMPAT}var M=p.__private__.combineFontStyleAndFontWeight=function(v,H){if(v=="bold"&&H=="normal"||v=="bold"&&H==400||v=="normal"&&H=="italic"||v=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(v=H==400||H==="normal"?v==="italic"?"italic":"normal":H!=700&&H!=="bold"||v!=="normal"?(H==700?"bold":H)+""+v:"bold"),v};p.advancedAPI=function(v){var H=N===w.COMPAT;return H&&O.call(this),typeof v!="function"||(v(this),H&&R.call(this)),this},p.compatAPI=function(v){var H=N===w.ADVANCED;return H&&R.call(this),typeof v!="function"||(v(this),H&&O.call(this)),this},p.isAdvancedAPI=function(){return N===w.ADVANCED};var F,E=function(v){if(N!==w.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=p.roundToPrecision=p.__private__.roundToPrecision=function(v,H){var Ae=e||H;if(isNaN(v)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Ae).replace(/0+$/,"")};F=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,16)};var D=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return L(v,2)},I=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return L(v,3)},U=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?v*_e:N===w.ADVANCED?v:void 0},T=function(v){return N===w.COMPAT?us()-v:N===w.ADVANCED?v:void 0},ee=function(v){return U(T(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var le,re="00000000000000000000000000000000",ue=p.__private__.getFileId=function(){return re},W=p.__private__.setFileId=function(v){return re=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Mr=new Gu(u.userPermissions,u.userPassword,u.ownerPassword,re)),re};p.setFileId=function(v){return W(v),this},p.getFileId=function(){return ue()};var ce=p.__private__.convertDateToPDFDate=function(v){var H=v.getTimezoneOffset(),Ae=H<0?"+":"-",fe=Math.floor(Math.abs(H/60)),ye=Math.abs(H%60),Re=[Ae,z(fe),"'",z(ye),"'"].join("");return["D:",v.getFullYear(),z(v.getMonth()+1),z(v.getDate()),z(v.getHours()),z(v.getMinutes()),z(v.getSeconds()),Re].join("")},ie=p.__private__.convertPDFDateToDate=function(v){var H=parseInt(v.substr(2,4),10),Ae=parseInt(v.substr(6,2),10)-1,fe=parseInt(v.substr(8,2),10),ye=parseInt(v.substr(10,2),10),Re=parseInt(v.substr(12,2),10),Je=parseInt(v.substr(14,2),10);return new Date(H,Ae,fe,ye,Re,Je,0)},Ee=p.__private__.setCreationDate=function(v){var H;if(v===void 0&&(v=new Date),v instanceof Date)H=ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=v}return le=H},P=p.__private__.getCreationDate=function(v){var H=le;return v==="jsDate"&&(H=ie(le)),H};p.setCreationDate=function(v){return Ee(v),this},p.getCreationDate=function(v){return P(v)};var k,z=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},$=0,ne=[],X=[],de=0,ge=[],Ce=[],Ue=!1,Te=X,ae=function(){$=0,de=0,X=[],ne=[],ge=[],rt=ot(),st=ot()};p.__private__.setCustomOutputDestination=function(v){Ue=!0,Te=v};var oe=function(v){Ue||(Te=v)};p.__private__.resetCustomOutputDestination=function(){Ue=!1,Te=X};var G=p.__private__.out=function(v){return v=v.toString(),de+=v.length+1,Te.push(v),Te},Me=p.__private__.write=function(v){return G(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},ke=p.__private__.getArrayBuffer=function(v){for(var H=v.length,Ae=new ArrayBuffer(H),fe=new Uint8Array(Ae);H--;)fe[H]=v.charCodeAt(H);return Ae},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Qe};var je=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return je=N===w.ADVANCED?v/_e:v,this};var We,ze=p.__private__.getFontSize=p.getFontSize=function(){return N===w.COMPAT?je:je*_e},nt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return nt=v,this},p.__private__.getR2L=p.getR2L=function(){return nt};var xe,Ge=p.__private__.setZoomMode=function(v){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))We=v;else if(isNaN(v)){if(H.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');We=v}else We=parseInt(v,10)};p.__private__.getZoomMode=function(){return We};var $e,tt=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');xe=v};p.__private__.getPageMode=function(){return xe};var ct=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');$e=v};p.__private__.getLayoutMode=function(){return $e},p.__private__.setDisplayMode=p.setDisplayMode=function(v,H,Ae){return Ge(v),ct(H),tt(Ae),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(At).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[v]},p.__private__.getDocumentProperties=function(){return At},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var H in At)At.hasOwnProperty(H)&&v[H]&&(At[H]=v[H]);return this},p.__private__.setDocumentProperty=function(v,H){if(Object.keys(At).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[v]=H};var he,_e,at,xt,or,Kt={},kt={},un=[],Vt={},ls={},Ar={},mr={},dn=null,gr=0,Ut=[],Xt=new uN(p),cs=t.hotfixes||[],Gr={},fr={},Pe=[],He=function v(H,Ae,fe,ye,Re,Je){if(!(this instanceof v))return new v(H,Ae,fe,ye,Re,Je);isNaN(H)&&(H=1),isNaN(Ae)&&(Ae=0),isNaN(fe)&&(fe=0),isNaN(ye)&&(ye=1),isNaN(Re)&&(Re=0),isNaN(Je)&&(Je=0),this._matrix=[H,Ae,fe,ye,Re,Je]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(v)},He.prototype.multiply=function(v){var H=v.sx*this.sx+v.shy*this.shx,Ae=v.sx*this.shy+v.shy*this.sy,fe=v.shx*this.sx+v.sy*this.shx,ye=v.shx*this.shy+v.sy*this.sy,Re=v.tx*this.sx+v.ty*this.shx+this.tx,Je=v.tx*this.shy+v.ty*this.sy+this.ty;return new He(H,Ae,fe,ye,Re,Je)},He.prototype.decompose=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,ye=this.tx,Re=this.ty,Je=Math.sqrt(v*v+H*H),ut=(v/=Je)*Ae+(H/=Je)*fe;Ae-=v*ut,fe-=H*ut;var f=Math.sqrt(Ae*Ae+fe*fe);return ut/=f,v*(fe/=f)<H*(Ae/=f)&&(v=-v,H=-H,ut=-ut,Je=-Je),{scale:new He(Je,0,0,f,0,0),translate:new He(1,0,0,1,ye,Re),rotate:new He(v,H,-H,v,0,0),skew:new He(1,0,ut,1,0,0)}},He.prototype.toString=function(v){return this.join(" ")},He.prototype.inversed=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,ye=this.tx,Re=this.ty,Je=1/(v*fe-H*Ae),ut=fe*Je,f=-H*Je,C=-Ae*Je,j=v*Je;return new He(ut,f,C,j,-ut*ye-C*Re,-f*ye-j*Re)},He.prototype.applyToPoint=function(v){var H=v.x*this.sx+v.y*this.shx+this.tx,Ae=v.x*this.shy+v.y*this.sy+this.ty;return new no(H,Ae)},He.prototype.applyToRectangle=function(v){var H=this.applyToPoint(v),Ae=this.applyToPoint(new no(v.x+v.w,v.y+v.h));return new oA(H.x,H.y,Ae.x-H.x,Ae.y-H.y)},He.prototype.clone=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,ye=this.tx,Re=this.ty;return new He(v,H,Ae,fe,ye,Re)},p.Matrix=He;var Nt=p.matrixMult=function(v,H){return H.multiply(v)},mt=new He(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=mt;var ht=function(v,H){if(!ls[v]){var Ae=(H instanceof HA?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);H.id=Ae,ls[v]=Ae,Vt[Ae]=H,Xt.publish("addPattern",H)}};p.ShadingPattern=HA,p.TilingPattern=gc,p.addShadingPattern=function(v,H){return E("addShadingPattern()"),ht(v,H),this},p.beginTilingPattern=function(v){E("beginTilingPattern()"),AA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,H){E("endTilingPattern()"),H.stream=Ce[k].join(`
`),ht(v,H),Xt.publish("endTilingPattern",H),Pe.pop().restore()};var St=p.__private__.newObject=function(){var v=ot();return Et(v,!0),v},ot=p.__private__.newObjectDeferred=function(){return $++,ne[$]=function(){return de},$},Et=function(v,H){return H=typeof H=="boolean"&&H,ne[v]=de,H&&G(v+" 0 obj"),v},be=p.__private__.newAdditionalObject=function(){var v={objId:ot(),content:""};return ge.push(v),v},rt=ot(),st=ot(),Dt=p.__private__.decodeColorString=function(v){var H=v.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var Ae=parseFloat(H[0]);H=[Ae,Ae,Ae,"r"]}for(var fe="#",ye=0;ye<3;ye++)fe+=("0"+Math.floor(255*parseFloat(H[ye])).toString(16)).slice(-2);return fe},Jt=p.__private__.encodeColorString=function(v){var H;typeof v=="string"&&(v={ch1:v});var Ae=v.ch1,fe=v.ch2,ye=v.ch3,Re=v.ch4,Je=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var ut=new B3(Ae);if(ut.ok)Ae=ut.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var f=parseInt(Ae.substr(1),16);Ae=f>>16&255,fe=f>>8&255,ye=255&f}if(fe===void 0||Re===void 0&&Ae===fe&&fe===ye)if(typeof Ae=="string")H=Ae+" "+Je[0];else switch(v.precision){case 2:H=D(Ae/255)+" "+Je[0];break;case 3:default:H=I(Ae/255)+" "+Je[0]}else if(Re===void 0||_r(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return H=["1.","1.","1.",Je[1]].join(" ");if(typeof Ae=="string")H=[Ae,fe,ye,Je[1]].join(" ");else switch(v.precision){case 2:H=[D(Ae/255),D(fe/255),D(ye/255),Je[1]].join(" ");break;default:case 3:H=[I(Ae/255),I(fe/255),I(ye/255),Je[1]].join(" ")}}else if(typeof Ae=="string")H=[Ae,fe,ye,Re,Je[2]].join(" ");else switch(v.precision){case 2:H=[D(Ae),D(fe),D(ye),D(Re),Je[2]].join(" ");break;case 3:default:H=[I(Ae),I(fe),I(ye),I(Re),Je[2]].join(" ")}return H},_t=p.__private__.getFilters=function(){return a},vt=p.__private__.putStream=function(v){var H=(v=v||{}).data||"",Ae=v.filters||_t(),fe=v.alreadyAppliedFilters||[],ye=v.addLength1||!1,Re=H.length,Je=v.objectId,ut=function(qt){return qt};if(u!==null&&Je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ut=Mr.encryptor(Je,0));var f={};Ae===!0&&(Ae=["FlateEncode"]);var C=v.additionalKeyValues||[],j=(f=Qt.API.processDataByFilters!==void 0?Qt.API.processDataByFilters(H,Ae):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(f.data.length!==0&&(C.push({key:"Length",value:f.data.length}),ye===!0&&C.push({key:"Length1",value:Re})),j.length!=0)if(j.split("/").length-1==1)C.push({key:"Filter",value:j});else{C.push({key:"Filter",value:"["+j+"]"});for(var J=0;J<C.length;J+=1)if(C[J].key==="DecodeParms"){for(var we=[],Se=0;Se<f.reverseChain.split("/").length-1;Se+=1)we.push("null");we.push(C[J].value),C[J].value="["+we.join(" ")+"]"}}G("<<");for(var Ye=0;Ye<C.length;Ye++)G("/"+C[Ye].key+" "+C[Ye].value);G(">>"),f.data.length!==0&&(G("stream"),G(ut(f.data)),G("endstream"))},Cs=p.__private__.putPage=function(v){var H=v.number,Ae=v.data,fe=v.objId,ye=v.contentsObjId;Et(fe,!0),G("<</Type /Page"),G("/Parent "+v.rootDictionaryObjId+" 0 R"),G("/Resources "+v.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(F(v.mediaBox.bottomLeftX))+" "+parseFloat(F(v.mediaBox.bottomLeftY))+" "+F(v.mediaBox.topRightX)+" "+F(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&G("/CropBox ["+F(v.cropBox.bottomLeftX)+" "+F(v.cropBox.bottomLeftY)+" "+F(v.cropBox.topRightX)+" "+F(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&G("/BleedBox ["+F(v.bleedBox.bottomLeftX)+" "+F(v.bleedBox.bottomLeftY)+" "+F(v.bleedBox.topRightX)+" "+F(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&G("/TrimBox ["+F(v.trimBox.bottomLeftX)+" "+F(v.trimBox.bottomLeftY)+" "+F(v.trimBox.topRightX)+" "+F(v.trimBox.topRightY)+"]"),v.artBox!==null&&G("/ArtBox ["+F(v.artBox.bottomLeftX)+" "+F(v.artBox.bottomLeftY)+" "+F(v.artBox.topRightX)+" "+F(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&G("/UserUnit "+v.userUnit),Xt.publish("putPage",{objId:fe,pageContext:Ut[H],pageNumber:H,page:Ae}),G("/Contents "+ye+" 0 R"),G(">>"),G("endobj");var Re=Ae.join(`
`);return N===w.ADVANCED&&(Re+=`
Q`),Et(ye,!0),vt({data:Re,filters:_t(),objectId:ye}),G("endobj"),fe},ma=p.__private__.putPages=function(){var v,H,Ae=[];for(v=1;v<=gr;v++)Ut[v].objId=ot(),Ut[v].contentsObjId=ot();for(v=1;v<=gr;v++)Ae.push(Cs({number:v,data:Ce[v],objId:Ut[v].objId,contentsObjId:Ut[v].contentsObjId,mediaBox:Ut[v].mediaBox,cropBox:Ut[v].cropBox,bleedBox:Ut[v].bleedBox,trimBox:Ut[v].trimBox,artBox:Ut[v].artBox,userUnit:Ut[v].userUnit,rootDictionaryObjId:rt,resourceDictionaryObjId:st}));Et(rt,!0),G("<</Type /Pages");var fe="/Kids [";for(H=0;H<gr;H++)fe+=Ae[H]+" 0 R ";G(fe+"]"),G("/Count "+gr),G(">>"),G("endobj"),Xt.publish("postPutPages")},ga=function(v){Xt.publish("putFont",{font:v,out:G,newObject:St,putStream:vt}),v.isAlreadyPutted!==!0&&(v.objectNumber=St(),G("<<"),G("/Type /Font"),G("/BaseFont /"+zu(v.postScriptName)),G("/Subtype /Type1"),typeof v.encoding=="string"&&G("/Encoding /"+v.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},va=function(){for(var v in Kt)Kt.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&ga(Kt[v])},$a=function(v){v.objectNumber=St();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[F(v.x),F(v.y),F(v.x+v.width),F(v.y+v.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Ae=v.pages[1].join(`
`);vt({data:Ae,additionalKeyValues:H,objectId:v.objectNumber}),G("endobj")},Wa=function(){for(var v in Gr)Gr.hasOwnProperty(v)&&$a(Gr[v])},Xc=function(v,H){var Ae,fe=[],ye=1/(H-1);for(Ae=0;Ae<1;Ae+=ye)fe.push(Ae);if(fe.push(1),v[0].offset!=0){var Re={offset:0,color:v[0].color};v.unshift(Re)}if(v[v.length-1].offset!=1){var Je={offset:1,color:v[v.length-1].color};v.push(Je)}for(var ut="",f=0,C=0;C<fe.length;C++){for(Ae=fe[C];Ae>v[f+1].offset;)f++;var j=v[f].offset,J=(Ae-j)/(v[f+1].offset-j),we=v[f].color,Se=v[f+1].color;ut+=te(Math.round((1-J)*we[0]+J*Se[0]).toString(16))+te(Math.round((1-J)*we[1]+J*Se[1]).toString(16))+te(Math.round((1-J)*we[2]+J*Se[2]).toString(16))}return ut.trim()},$o=function(v,H){H||(H=21);var Ae=St(),fe=Xc(v.colors,H),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+H+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt({data:fe,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),G("endobj"),v.objectNumber=St(),G("<< /ShadingType "+v.type),G("/ColorSpace /DeviceRGB");var Re="/Coords ["+F(parseFloat(v.coords[0]))+" "+F(parseFloat(v.coords[1]))+" ";v.type===2?Re+=F(parseFloat(v.coords[2]))+" "+F(parseFloat(v.coords[3])):Re+=F(parseFloat(v.coords[2]))+" "+F(parseFloat(v.coords[3]))+" "+F(parseFloat(v.coords[4]))+" "+F(parseFloat(v.coords[5])),G(Re+="]"),v.matrix&&G("/Matrix ["+v.matrix.toString()+"]"),G("/Function "+Ae+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Jc=function(v,H){var Ae=ot(),fe=St();H.push({resourcesOid:Ae,objectOid:fe}),v.objectNumber=fe;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+v.boundingBox.map(F).join(" ")+"]"}),ye.push({key:"XStep",value:F(v.xStep)}),ye.push({key:"YStep",value:F(v.yStep)}),ye.push({key:"Resources",value:Ae+" 0 R"}),v.matrix&&ye.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),vt({data:v.stream,additionalKeyValues:ye,objectId:v.objectNumber}),G("endobj")},wa=function(v){var H;for(H in Vt)Vt.hasOwnProperty(H)&&(Vt[H]instanceof HA?$o(Vt[H]):Vt[H]instanceof gc&&Jc(Vt[H],v))},ya=function(v){for(var H in v.objectNumber=St(),G("<<"),v)switch(H){case"opacity":G("/ca "+D(v[H]));break;case"stroke-opacity":G("/CA "+D(v[H]))}G(">>"),G("endobj")},Ri=function(){var v;for(v in Ar)Ar.hasOwnProperty(v)&&ya(Ar[v])},Xa=function(){for(var v in G("/XObject <<"),Gr)Gr.hasOwnProperty(v)&&Gr[v].objectNumber>=0&&G("/"+v+" "+Gr[v].objectNumber+" 0 R");Xt.publish("putXobjectDict"),G(">>")},rh=function(){Mr.oid=St(),G("<<"),G("/Filter /Standard"),G("/V "+Mr.v),G("/R "+Mr.r),G("/U <"+Mr.toHexString(Mr.U)+">"),G("/O <"+Mr.toHexString(Mr.O)+">"),G("/P "+Mr.P),G(">>"),G("endobj")},Tl=function(){for(var v in G("/Font <<"),Kt)Kt.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&G("/"+v+" "+Kt[v].objectNumber+" 0 R");G(">>")},Yc=function(){if(Object.keys(Vt).length>0){for(var v in G("/Shading <<"),Vt)Vt.hasOwnProperty(v)&&Vt[v]instanceof HA&&Vt[v].objectNumber>=0&&G("/"+v+" "+Vt[v].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),G(">>")}},Ja=function(v){if(Object.keys(Vt).length>0){for(var H in G("/Pattern <<"),Vt)Vt.hasOwnProperty(H)&&Vt[H]instanceof p.TilingPattern&&Vt[H].objectNumber>=0&&Vt[H].objectNumber<v&&G("/"+H+" "+Vt[H].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),G(">>")}},Ul=function(){if(Object.keys(Ar).length>0){var v;for(v in G("/ExtGState <<"),Ar)Ar.hasOwnProperty(v)&&Ar[v].objectNumber>=0&&G("/"+v+" "+Ar[v].objectNumber+" 0 R");Xt.publish("putGStateDict"),G(">>")}},Rr=function(v){Et(v.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Tl(),Yc(),Ja(v.objectOid),Ul(),Xa(),G(">>"),G("endobj")},Pl=function(){var v=[];va(),Ri(),Wa(),wa(v),Xt.publish("putResources"),v.forEach(Rr),Rr({resourcesOid:st,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources")},Ql=function(){Xt.publish("putAdditionalObjects");for(var v=0;v<ge.length;v++){var H=ge[v];Et(H.objId,!0),G(H.content),G("endobj")}Xt.publish("postPutAdditionalObjects")},Zc=function(v){kt[v.fontName]=kt[v.fontName]||{},kt[v.fontName][v.fontStyle]=v.id},Ll=function(v,H,Ae,fe,ye){var Re={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:v,fontName:H,fontStyle:Ae,encoding:fe,isStandardFont:ye||!1,metadata:{}};return Xt.publish("addFont",{font:Re,instance:this}),Kt[Re.id]=Re,Zc(Re),Re.id},eu=function(v){for(var H=0,Ae=Qe.length;H<Ae;H++){var fe=Ll.call(this,v[H][0],v[H][1],v[H][2],Qe[H][3],!0);h===!1&&(m[fe]=!0);var ye=v[H][0].split("-");Zc({id:fe,fontName:ye[0],fontStyle:ye[1]||""})}Xt.publish("addFonts",{fonts:Kt,dictionary:kt})},Ds=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(fe){var H=fe.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var Ae="Error in function "+H.split(`
`)[0].split("<")[0]+": "+fe.message;if(!Rt.console)throw new Error(Ae);Rt.console.error(Ae,fe),Rt.alert&&alert(Ae)}},v.foo.bar=v,v.foo},Wo=function(v,H){var Ae,fe,ye,Re,Je,ut,f,C,j;if(ye=(H=H||{}).sourceEncoding||"Unicode",Je=H.outputEncoding,(H.autoencode||Je)&&Kt[he].metadata&&Kt[he].metadata[ye]&&Kt[he].metadata[ye].encoding&&(Re=Kt[he].metadata[ye].encoding,!Je&&Kt[he].encoding&&(Je=Kt[he].encoding),!Je&&Re.codePages&&(Je=Re.codePages[0]),typeof Je=="string"&&(Je=Re[Je]),Je)){for(f=!1,ut=[],Ae=0,fe=v.length;Ae<fe;Ae++)(C=Je[v.charCodeAt(Ae)])?ut.push(String.fromCharCode(C)):ut.push(v[Ae]),ut[Ae].charCodeAt(0)>>8&&(f=!0);v=ut.join("")}for(Ae=v.length;f===void 0&&Ae!==0;)v.charCodeAt(Ae-1)>>8&&(f=!0),Ae--;if(!f)return v;for(ut=H.noBOM?[]:[254,255],Ae=0,fe=v.length;Ae<fe;Ae++){if((j=(C=v.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ut.push(j),ut.push(C-(j<<8))}return String.fromCharCode.apply(void 0,ut)},an=p.__private__.pdfEscape=p.pdfEscape=function(v,H){return Wo(v,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Es=p.__private__.beginPage=function(v){Ce[++gr]=[],Ut[gr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},jl(gr),oe(Ce[k])},Ya=function(v,H){var Ae,fe,ye;switch(r=H||r,typeof v=="string"&&(Ae=y(v.toLowerCase()),Array.isArray(Ae)&&(fe=Ae[0],ye=Ae[1])),Array.isArray(v)&&(fe=v[0]*_e,ye=v[1]*_e),isNaN(fe)&&(fe=s[0],ye=s[1]),(fe>14400||ye>14400)&&(Pr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),ye=Math.min(14400,ye)),s=[fe,ye],r.substr(0,1)){case"l":ye>fe&&(s=[ye,fe]);break;case"p":fe>ye&&(s=[ye,fe])}Es(s),Ol(Ml),G($n),Kl!==0&&G(Kl+" J"),aA!==0&&G(aA+" j"),Xt.publish("addPage",{pageNumber:gr})},Xo=function(v){v>0&&v<=gr&&(Ce.splice(v,1),Ut.splice(v,1),gr--,k>gr&&(k=gr),this.setPage(k))},jl=function(v){v>0&&v<=gr&&(k=v)},xr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ce.length-1},Za=function(v,H,Ae){var fe,ye=void 0;return Ae=Ae||{},v=v!==void 0?v:Kt[he].fontName,H=H!==void 0?H:Kt[he].fontStyle,fe=v.toLowerCase(),kt[fe]!==void 0&&kt[fe][H]!==void 0?ye=kt[fe][H]:kt[v]!==void 0&&kt[v][H]!==void 0?ye=kt[v][H]:Ae.disableWarning===!1&&Pr.warn("Unable to look up font label for font '"+v+"', '"+H+"'. Refer to getFontList() for available fonts."),ye||Ae.noFallback||(ye=kt.times[H])==null&&(ye=kt.times.normal),ye},eo=p.__private__.putInfo=function(){var v=St(),H=function(fe){return fe};for(var Ae in u!==null&&(H=Mr.encryptor(v,0)),G("<<"),G("/Producer ("+an(H("jsPDF "+Qt.version))+")"),At)At.hasOwnProperty(Ae)&&At[Ae]&&G("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+an(H(At[Ae]))+")");G("/CreationDate ("+an(H(le))+")"),G(">>"),G("endobj")},Mi=p.__private__.putCatalog=function(v){var H=(v=v||{}).rootDictionaryObjId||rt;switch(St(),G("<<"),G("/Type /Catalog"),G("/Pages "+H+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+We;Ae.substr(Ae.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&G("/OpenAction [3 0 R /XYZ null null "+D(We)+"]")}switch($e||($e="continuous"),$e){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}xe&&G("/PageMode /"+xe),Xt.publish("putCatalog"),G(">>"),G("endobj")},nh=p.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+($+1)),G("/Root "+$+" 0 R"),G("/Info "+($-1)+" 0 R"),u!==null&&G("/Encrypt "+Mr.oid+" 0 R"),G("/ID [ <"+re+"> <"+re+"> ]"),G(">>")},tu=p.__private__.putHeader=function(){G("%PDF-"+b),G("%ºß¬à")},sh=p.__private__.putXRef=function(){var v="0000000000";G("xref"),G("0 "+($+1)),G("0000000000 65535 f ");for(var H=1;H<=$;H++)typeof ne[H]=="function"?G((v+ne[H]()).slice(-10)+" 00000 n "):ne[H]!==void 0?G((v+ne[H]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Oi=p.__private__.buildDocument=function(){ae(),oe(X),Xt.publish("buildDocument"),tu(),ma(),Ql(),Pl(),u!==null&&rh(),eo(),Mi();var v=de;return sh(),nh(),G("startxref"),G(""+v),G("%%EOF"),oe(Ce[k]),X.join(`
`)},Jo=p.__private__.getBlob=function(v){return new Blob([ke(v)],{type:"application/pdf"})},Yo=p.output=p.__private__.output=Ds(function(v,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",v){case void 0:return Oi();case"save":p.save(H.filename);break;case"arraybuffer":return ke(Oi());case"blob":return Jo(Oi());case"bloburi":case"bloburl":if(Rt.URL!==void 0&&typeof Rt.URL.createObjectURL=="function")return Rt.URL&&Rt.URL.createObjectURL(Jo(Oi()))||void 0;Pr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",fe=Oi();try{Ae=nx(fe)}catch{Ae=nx(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+H.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(ye=H.pdfObjectUrl,Re="");var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",ut=Rt.open();return ut!==null&&ut.document.write(Je),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rt)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',C=Rt.open();if(C!==null){C.document.write(f);var j=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=H.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(j.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var J='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',we=Rt.open();if(we!==null&&(we.document.write(J),we.document.title=H.filename),we||typeof safari>"u")return we;break;case"datauri":case"dataurl":return Rt.document.location.href=this.output("datauristring",H);default:return null}}),xa=function(v){return Array.isArray(cs)===!0&&cs.indexOf(v)>-1};switch(n){case"pt":_e=1;break;case"mm":_e=72/25.4;break;case"cm":_e=72/2.54;break;case"in":_e=72;break;case"px":_e=xa("px_scaling")==1?.75:96/72;break;case"pc":case"em":_e=12;break;case"ex":_e=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);_e=n}var Mr=null;Ee(),W();var ru=function(v){return u!==null?Mr.encryptor(v,0):function(H){return H}},kl=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ut[v].objId,pageNumber:v,pageContext:Ut[v]}},Mt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Ut)if(Ut[H].objId===v)break;return kl(H)},ba=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ut[k].objId,pageNumber:k,pageContext:Ut[k]}};p.addPage=function(){return Ya.apply(this,arguments),this},p.setPage=function(){return jl.apply(this,arguments),oe.call(this,Ce[k]),this},p.insertPage=function(v){return this.addPage(),this.movePage(k,v),this},p.movePage=function(v,H){var Ae,fe;if(v>H){Ae=Ce[v],fe=Ut[v];for(var ye=v;ye>H;ye--)Ce[ye]=Ce[ye-1],Ut[ye]=Ut[ye-1];Ce[H]=Ae,Ut[H]=fe,this.setPage(H)}else if(v<H){Ae=Ce[v],fe=Ut[v];for(var Re=v;Re<H;Re++)Ce[Re]=Ce[Re+1],Ut[Re]=Ut[Re+1];Ce[H]=Ae,Ut[H]=fe,this.setPage(H)}return this},p.deletePage=function(){return Xo.apply(this,arguments),this},p.__private__.text=p.text=function(v,H,Ae,fe,ye){var Re,Je,ut,f,C,j,J,we,Se,Ye=(fe=fe||{}).scope||this;if(typeof v=="number"&&typeof H=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var qt=Ae;Ae=H,H=v,v=qt}if(arguments[3]instanceof He?(E("The transform parameter of text() with a Matrix value"),Se=ye):(ut=arguments[4],f=arguments[5],_r(J=arguments[3])==="object"&&J!==null||(typeof ut=="string"&&(f=ut,ut=null),typeof J=="string"&&(f=J,J=null),typeof J=="number"&&(ut=J,J=null),fe={flags:J,angle:ut,align:f})),isNaN(H)||isNaN(Ae)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Ye;var rr="",Gt=!1,wr=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:vr,Tr=Ye.internal.scaleFactor;function Gi(Qr){return Qr=Qr.split("	").join(Array(fe.TabLen||9).join(" ")),an(Qr,J)}function Wn(Qr){for(var Lr,fn=Qr.concat(),Sn=[],Ao=fn.length;Ao--;)typeof(Lr=fn.shift())=="string"?Sn.push(Lr):Array.isArray(Qr)&&(Lr.length===1||Lr[1]===void 0&&Lr[2]===void 0)?Sn.push(Lr[0]):Sn.push([Lr[0],Lr[1],Lr[2]]);return Sn}function _a(Qr,Lr){var fn;if(typeof Qr=="string")fn=Lr(Qr)[0];else if(Array.isArray(Qr)){for(var Sn,Ao,hh=Qr.concat(),pu=[],Yp=hh.length;Yp--;)typeof(Sn=hh.shift())=="string"?pu.push(Lr(Sn)[0]):Array.isArray(Sn)&&typeof Sn[0]=="string"&&(Ao=Lr(Sn[0],Sn[1],Sn[2]),pu.push([Ao[0],Ao[1],Ao[2]]));fn=pu}return fn}var Na=!1,ah=!0;if(typeof v=="string")Na=!0;else if(Array.isArray(v)){var oh=v.concat();Je=[];for(var ou,Xn=oh.length;Xn--;)(typeof(ou=oh.shift())!="string"||Array.isArray(ou)&&typeof ou[0]!="string")&&(ah=!1);Na=ah}if(Na===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Au=je/Ye.internal.scaleFactor,lu=Au*(wr-1);switch(fe.baseline){case"bottom":Ae-=lu;break;case"top":Ae+=Au-lu;break;case"hanging":Ae+=Au-2*lu;break;case"middle":Ae+=Au/2-lu}if((j=fe.maxWidth||0)>0&&(typeof v=="string"?v=Ye.splitTextToSize(v,j):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Qr,Lr){return Qr.concat(Ye.splitTextToSize(Lr,j))},[]))),Re={text:v,x:H,y:Ae,options:fe,mutex:{pdfEscape:an,activeFontKey:he,fonts:Kt,activeFontSize:je}},Xt.publish("preProcessText",Re),v=Re.text,ut=(fe=Re.options).angle,!(Se instanceof He)&&ut&&typeof ut=="number"){ut*=Math.PI/180,fe.rotationDirection===0&&(ut=-ut),N===w.ADVANCED&&(ut=-ut);var cu=Math.cos(ut),Ah=Math.sin(ut);Se=new He(cu,Ah,-Ah,cu,0,0)}else ut&&ut instanceof He&&(Se=ut);N!==w.ADVANCED||Se||(Se=mt),(C=fe.charSpace||ro)!==void 0&&(rr+=F(U(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(we=fe.horizontalScale)!==void 0&&(rr+=F(100*we)+` Tz
`),fe.lang;var Rs=-1,vw=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,lh=Ye.internal.getCurrentPageInfo().pageContext;switch(vw){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var $p=lh.usedRenderingMode!==void 0?lh.usedRenderingMode:-1;Rs!==-1?rr+=Rs+` Tr
`:$p!==-1&&(rr+=`0 Tr
`),Rs!==-1&&(lh.usedRenderingMode=Rs),f=fe.align||"left";var vi,uu=je*wr,Wp=Ye.internal.pageSize.getWidth(),Xp=Kt[he];C=fe.charSpace||ro,j=fe.maxWidth||0,J=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var uA=[],ql=function(Qr){return Ye.getStringUnitWidth(Qr,{font:Xp,charSpace:C,fontSize:je,doKerning:!1})*je/Tr};if(Object.prototype.toString.call(v)==="[object Array]"){var Ms;Je=Wn(v),f!=="left"&&(vi=Je.map(ql));var _s,dA=0;if(f==="right"){H-=vi[0],v=[],Xn=Je.length;for(var io=0;io<Xn;io++)io===0?(_s=ei(H),Ms=In(Ae)):(_s=U(dA-vi[io]),Ms=-uu),v.push([Je[io],_s,Ms]),dA=vi[io]}else if(f==="center"){H-=vi[0]/2,v=[],Xn=Je.length;for(var ao=0;ao<Xn;ao++)ao===0?(_s=ei(H),Ms=In(Ae)):(_s=U((dA-vi[ao])/2),Ms=-uu),v.push([Je[ao],_s,Ms]),dA=vi[ao]}else if(f==="left"){v=[],Xn=Je.length;for(var du=0;du<Xn;du++)v.push(Je[du])}else if(f==="justify"&&Xp.encoding==="Identity-H"){v=[],Xn=Je.length,j=j!==0?j:Wp;for(var oo=0,hn=0;hn<Xn;hn++)if(Ms=hn===0?In(Ae):-uu,_s=hn===0?ei(H):oo,hn<Xn-1){var ch=U((j-vi[hn])/(Je[hn].split(" ").length-1)),Ns=Je[hn].split(" ");v.push([Ns[0]+" ",_s,Ms]),oo=0;for(var wi=1;wi<Ns.length;wi++){var hu=(ql(Ns[wi-1]+" "+Ns[wi])-ql(Ns[wi]))*Tr+ch;wi==Ns.length-1?v.push([Ns[wi],hu,0]):v.push([Ns[wi]+" ",hu,0]),oo-=hu}}else v.push([Je[hn],_s,Ms]);v.push(["",oo,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Xn=Je.length,j=j!==0?j:Wp,hn=0;hn<Xn;hn++)Ms=hn===0?In(Ae):-uu,_s=hn===0?ei(H):0,hn<Xn-1?uA.push(F(U((j-vi[hn])/(Je[hn].split(" ").length-1)))):uA.push(0),v.push([Je[hn],_s,Ms])}}var Jp=typeof fe.R2L=="boolean"?fe.R2L:nt;Jp===!0&&(v=_a(v,function(Qr,Lr,fn){return[Qr.split("").reverse().join(""),Lr,fn]})),Re={text:v,x:H,y:Ae,options:fe,mutex:{pdfEscape:an,activeFontKey:he,fonts:Kt,activeFontSize:je}},Xt.publish("postProcessText",Re),v=Re.text,Gt=Re.mutex.isHex||!1;var uh=Kt[he].encoding;uh!=="WinAnsiEncoding"&&uh!=="StandardEncoding"||(v=_a(v,function(Qr,Lr,fn){return[Gi(Qr),Lr,fn]})),Je=Wn(v),v=[];for(var Gl,zl,hA,$l=0,fu=1,Wl=Array.isArray(Je[0])?fu:$l,fA="",dh=function(Qr,Lr,fn){var Sn="";return fn instanceof He?(fn=typeof fe.angle=="number"?Nt(fn,new He(1,0,0,1,Qr,Lr)):Nt(new He(1,0,0,1,Qr,Lr),fn),N===w.ADVANCED&&(fn=Nt(new He(1,0,0,-1,0,0),fn)),Sn=fn.join(" ")+` Tm
`):Sn=F(Qr)+" "+F(Lr)+` Td
`,Sn},yi=0;yi<Je.length;yi++){switch(fA="",Wl){case fu:hA=(Gt?"<":"(")+Je[yi][0]+(Gt?">":")"),Gl=parseFloat(Je[yi][1]),zl=parseFloat(Je[yi][2]);break;case $l:hA=(Gt?"<":"(")+Je[yi]+(Gt?">":")"),Gl=ei(H),zl=In(Ae)}uA!==void 0&&uA[yi]!==void 0&&(fA=uA[yi]+` Tw
`),yi===0?v.push(fA+dh(Gl,zl,Se)+hA):Wl===$l?v.push(fA+hA):Wl===fu&&v.push(fA+dh(Gl,zl,Se)+hA)}v=Wl===$l?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xi=`BT
/`;return xi+=he+" "+je+` Tf
`,xi+=F(je*wr)+` TL
`,xi+=Ki+`
`,xi+=rr,xi+=v,G(xi+="ET"),m[he]=!0,Ye};var ih=p.__private__.clip=p.clip=function(v){return G(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return ih("evenodd")},p.__private__.discardPath=p.discardPath=function(){return G("n"),this};var gi=p.__private__.isValidStyle=function(v){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(H=!0),H};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return gi(v)&&(c=v),this};var nu=p.__private__.getStyle=p.getStyle=function(v){var H=c;switch(v){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=v}return H},Ys=p.close=function(){return G("h"),this};p.stroke=function(){return G("S"),this},p.fill=function(v){return Zo("f",v),this},p.fillEvenOdd=function(v){return Zo("f*",v),this},p.fillStroke=function(v){return Zo("B",v),this},p.fillStrokeEvenOdd=function(v){return Zo("B*",v),this};var Zo=function(v,H){_r(H)==="object"?tA(H,v):G(v)},Dl=function(v){v===null||N===w.ADVANCED&&v===void 0||(v=nu(v),G(v))};function eA(v,H,Ae,fe,ye){var Re=new gc(H||this.boundingBox,Ae||this.xStep,fe||this.yStep,this.gState,ye||this.matrix);Re.stream=this.stream;var Je=v+"$$"+this.cloneIndex+++"$$";return ht(Je,Re),Re}var tA=function(v,H){var Ae=ls[v.key],fe=Vt[Ae];if(fe instanceof HA)G("q"),G(su(H)),fe.gState&&p.setGState(fe.gState),G(v.matrix.toString()+" cm"),G("/"+Ae+" sh"),G("Q");else if(fe instanceof gc){var ye=new He(1,0,0,-1,0,us());v.matrix&&(ye=ye.multiply(v.matrix||mt),Ae=eA.call(fe,v.key,v.boundingBox,v.xStep,v.yStep,ye).id),G("q"),G("/Pattern cs"),G("/"+Ae+" scn"),fe.gState&&p.setGState(fe.gState),G(H),G("Q")}},su=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Hi=p.moveTo=function(v,H){return G(F(U(v))+" "+F(ee(H))+" m"),this},Zs=p.lineTo=function(v,H){return G(F(U(v))+" "+F(ee(H))+" l"),this},Vi=p.curveTo=function(v,H,Ae,fe,ye,Re){return G([F(U(v)),F(ee(H)),F(U(Ae)),F(ee(fe)),F(U(ye)),F(ee(Re)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,H,Ae,fe,ye){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(ye))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[Ae-v,fe-H]],v,H,[1,1],ye||"S"):this.lines([[Ae-v,fe-H]],v,H,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,H,Ae,fe,ye,Re){var Je,ut,f,C,j,J,we,Se,Ye,qt,rr,Gt;if(typeof v=="number"&&(Gt=Ae,Ae=H,H=v,v=Gt),fe=fe||[1,1],Re=Re||!1,isNaN(H)||isNaN(Ae)||!Array.isArray(v)||!Array.isArray(fe)||!gi(ye)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hi(H,Ae),Je=fe[0],ut=fe[1],C=v.length,qt=H,rr=Ae,f=0;f<C;f++)(j=v[f]).length===2?(qt=j[0]*Je+qt,rr=j[1]*ut+rr,Zs(qt,rr)):(J=j[0]*Je+qt,we=j[1]*ut+rr,Se=j[2]*Je+qt,Ye=j[3]*ut+rr,qt=j[4]*Je+qt,rr=j[5]*ut+rr,Vi(J,we,Se,Ye,qt,rr));return Re&&Ys(),Dl(ye),this},p.path=function(v){for(var H=0;H<v.length;H++){var Ae=v[H],fe=Ae.c;switch(Ae.op){case"m":Hi(fe[0],fe[1]);break;case"l":Zs(fe[0],fe[1]);break;case"c":Vi.apply(this,fe);break;case"h":Ys()}}return this},p.__private__.rect=p.rect=function(v,H,Ae,fe,ye){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(fe=-fe),G([F(U(v)),F(ee(H)),F(U(Ae)),F(U(fe)),"re"].join(" ")),Dl(ye),this},p.__private__.triangle=p.triangle=function(v,H,Ae,fe,ye,Re,Je){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||isNaN(ye)||isNaN(Re)||!gi(Je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-v,fe-H],[ye-Ae,Re-fe],[v-ye,H-Re]],v,H,[1,1],Je,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,H,Ae,fe,ye,Re,Je){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||isNaN(ye)||isNaN(Re)||!gi(Je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*Ae),Re=Math.min(Re,.5*fe),this.lines([[Ae-2*ye,0],[ye*ut,0,ye,Re-Re*ut,ye,Re],[0,fe-2*Re],[0,Re*ut,-ye*ut,Re,-ye,Re],[2*ye-Ae,0],[-ye*ut,0,-ye,-Re*ut,-ye,-Re],[0,2*Re-fe],[0,-Re*ut,ye*ut,-Re,ye,-Re]],v+ye,H,[1,1],Je,!0),this},p.__private__.ellipse=p.ellipse=function(v,H,Ae,fe,ye){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*Ae,Je=4/3*(Math.SQRT2-1)*fe;return Hi(v+Ae,H),Vi(v+Ae,H-Je,v+Re,H-fe,v,H-fe),Vi(v-Re,H-fe,v-Ae,H-Je,v-Ae,H),Vi(v-Ae,H+Je,v-Re,H+fe,v,H+fe),Vi(v+Re,H+fe,v+Ae,H+Je,v+Ae,H),Dl(ye),this},p.__private__.circle=p.circle=function(v,H,Ae,fe){if(isNaN(v)||isNaN(H)||isNaN(Ae)||!gi(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,H,Ae,Ae,fe)},p.setFont=function(v,H,Ae){return Ae&&(H=M(H,Ae)),he=Za(v,H,{disableWarning:!1}),this};var Rl=p.__private__.getFont=p.getFont=function(){return Kt[Za.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,H,Ae={};for(v in kt)if(kt.hasOwnProperty(v))for(H in Ae[v]=[],kt[v])kt[v].hasOwnProperty(H)&&Ae[v].push(H);return Ae},p.addFont=function(v,H,Ae,fe,ye){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(Ae=M(Ae,fe)),ye=ye||"Identity-H",Ll.call(this,v,H,Ae,ye)};var vr,Ml=t.lineWidth||.200025,rA=p.__private__.getLineWidth=p.getLineWidth=function(){return Ml},Ol=p.__private__.setLineWidth=p.setLineWidth=function(v){return Ml=v,G(F(U(v))+" w"),this};p.__private__.setLineDash=Qt.API.setLineDash=Qt.API.setLineDashPattern=function(v,H){if(v=v||[],H=H||0,isNaN(H)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Ae){return F(U(Ae))}).join(" "),H=F(U(H)),G("["+v+"] "+H+" d"),this};var Hl=p.__private__.getLineHeight=p.getLineHeight=function(){return je*vr};p.__private__.getLineHeight=p.getLineHeight=function(){return je*vr};var Vl=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(vr=v),this},to=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vr};Vl(t.lineHeight);var ei=p.__private__.getHorizontalCoordinate=function(v){return U(v)},In=p.__private__.getVerticalCoordinate=function(v){return N===w.ADVANCED?v:Ut[k].mediaBox.topRightY-Ut[k].mediaBox.bottomLeftY-U(v)},iu=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return F(ei(v))},Ba=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return F(In(v))},$n=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Dt($n)},p.__private__.setStrokeColor=p.setDrawColor=function(v,H,Ae,fe){return $n=Jt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"draw",precision:2}),G($n),this};var nA=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Dt(nA)},p.__private__.setFillColor=p.setFillColor=function(v,H,Ae,fe){return nA=Jt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"fill",precision:2}),G(nA),this};var Ki=t.textColor||"0 g",sA=p.__private__.getTextColor=p.getTextColor=function(){return Dt(Ki)};p.__private__.setTextColor=p.setTextColor=function(v,H,Ae,fe){return Ki=Jt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"text",precision:3}),this};var ro=t.charSpace,iA=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ro||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ro=v,this};var Kl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var H=p.CapJoinStyles[v];if(H===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=H,G(H+" J"),this};var aA=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var H=p.CapJoinStyles[v];if(H===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aA=H,G(H+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(F(U(v))+" M"),this},p.GState=xp,p.setGState=function(v){(v=typeof v=="string"?Ar[mr[v]]:Ca(null,v)).equals(dn)||(G("/"+v.id+" gs"),dn=v)};var Ca=function(v,H){if(!v||!mr[v]){var Ae=!1;for(var fe in Ar)if(Ar.hasOwnProperty(fe)&&Ar[fe].equals(H)){Ae=!0;break}if(Ae)H=Ar[fe];else{var ye="GS"+(Object.keys(Ar).length+1).toString(10);Ar[ye]=H,H.id=ye}return v&&(mr[v]=H.id),Xt.publish("addGState",H),H}};p.addGState=function(v,H){return Ca(v,H),this},p.saveGraphicsState=function(){return G("q"),un.push({key:he,size:je,color:Ki}),this},p.restoreGraphicsState=function(){G("Q");var v=un.pop();return he=v.key,je=v.size,Ki=v.color,dn=null,this},p.setCurrentTransformationMatrix=function(v){return G(v.toString()+" cm"),this},p.comment=function(v){return G("#"+v),this};var no=function(v,H){var Ae=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(Re){isNaN(Re)||(Ae=parseFloat(Re))}});var fe=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(Re){isNaN(Re)||(fe=parseFloat(Re))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Re){ye=Re.toString()}}),this},oA=function(v,H,Ae,fe){no.call(this,v,H),this.type="rect";var ye=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Je){isNaN(Je)||(ye=parseFloat(Je))}});var Re=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function(Je){isNaN(Je)||(Re=parseFloat(Je))}}),this},so=function(){this.page=gr,this.currentPage=k,this.pages=Ce.slice(0),this.pagesContext=Ut.slice(0),this.x=at,this.y=xt,this.matrix=or,this.width=Ea(k),this.height=us(k),this.outputDestination=Te,this.id="",this.objectNumber=-1};so.prototype.restore=function(){gr=this.page,k=this.currentPage,Ut=this.pagesContext,Ce=this.pages,at=this.x,xt=this.y,or=this.matrix,lA(k,this.width),cA(k,this.height),Te=this.outputDestination};var AA=function(v,H,Ae,fe,ye){Pe.push(new so),gr=k=0,Ce=[],at=v,xt=H,or=ye,Es([Ae,fe])},au=function(v){if(fr[v])Pe.pop().restore();else{var H=new so,Ae="Xo"+(Object.keys(Gr).length+1).toString(10);H.id=Ae,fr[v]=Ae,Gr[Ae]=H,Xt.publish("addFormObject",H),Pe.pop().restore()}};for(var qi in p.beginFormObject=function(v,H,Ae,fe,ye){return AA(v,H,Ae,fe,ye),this},p.endFormObject=function(v){return au(v),this},p.doFormObject=function(v,H){var Ae=Gr[fr[v]];return G("q"),G(H.toString()+" cm"),G("/"+Ae.id+" Do"),G("Q"),this},p.getFormObject=function(v){var H=Gr[fr[v]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},p.save=function(v,H){return v=v||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(ac(Jo(Oi()),v),typeof ac.unload=="function"&&Rt.setTimeout&&setTimeout(ac.unload,911),this):new Promise(function(Ae,fe){try{var ye=ac(Jo(Oi()),v);typeof ac.unload=="function"&&Rt.setTimeout&&setTimeout(ac.unload,911),Ae(ye)}catch(Re){fe(Re.message)}})},Qt.API)Qt.API.hasOwnProperty(qi)&&(qi==="events"&&Qt.API.events.length?function(v,H){var Ae,fe,ye;for(ye=H.length-1;ye!==-1;ye--)Ae=H[ye][0],fe=H[ye][1],v.subscribe.apply(v,[Ae].concat(typeof fe=="function"?[fe]:fe))}(Xt,Qt.API.events):p[qi]=Qt.API[qi]);var Ea=p.getPageWidth=function(v){return(Ut[v=v||k].mediaBox.topRightX-Ut[v].mediaBox.bottomLeftX)/_e},lA=p.setPageWidth=function(v,H){Ut[v].mediaBox.topRightX=H*_e+Ut[v].mediaBox.bottomLeftX},us=p.getPageHeight=function(v){return(Ut[v=v||k].mediaBox.topRightY-Ut[v].mediaBox.bottomLeftY)/_e},cA=p.setPageHeight=function(v,H){Ut[v].mediaBox.topRightY=H*_e+Ut[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:an,getStyle:nu,getFont:Rl,getFontSize:ze,getCharSpace:iA,getTextColor:sA,getLineHeight:Hl,getLineHeightFactor:to,getLineWidth:rA,write:Me,getHorizontalCoordinate:ei,getVerticalCoordinate:In,getCoordinateString:iu,getVerticalCoordinateString:Ba,collections:{},newObject:St,newAdditionalObject:be,newObjectDeferred:ot,newObjectDeferredBegin:Et,getFilters:_t,putStream:vt,events:Xt,scaleFactor:_e,pageSize:{getWidth:function(){return Ea(k)},setWidth:function(v){lA(k,v)},getHeight:function(){return us(k)},setHeight:function(v){cA(k,v)}},encryptionOptions:u,encryption:Mr,getEncryptor:ru,output:Yo,getNumberOfPages:xr,pages:Ce,out:G,f2:D,f3:I,getPageInfo:kl,getPageInfoByObjId:Mt,getCurrentPageInfo:ba,getPDFVersion:B,Point:no,Rectangle:oA,Matrix:He,hasHotfix:xa},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ea(k)},set:function(v){lA(k,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return us(k)},set:function(v){cA(k,v)},enumerable:!0,configurable:!0}),eu.call(p,Qe),he="F1",Ya(s,r),Xt.publish("initialized"),p}Gu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Gu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Gu.prototype.processOwnerPassword=function(t,e){return ix(sx(e).substr(0,5),t)},Gu.prototype.encryptor=function(t,e){var r=sx(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ix(r,n)}},xp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||_r(t)!==_r(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Qt.API={events:[]},Qt.version="3.0.1";var An=Qt.API,EB=1,Wc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},IA=function(t){return t.toFixed(5)};An.__acroform__={};var Js=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},dN=function(t){return t*EB},Ta=function(t){var e=new N3,r=Bt.internal.getHeight(t)||0,n=Bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(zt(n)),Number(zt(r))],e},Sz=An.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Fz=An.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Tz=An.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},wn=An.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Tz(t,e-1)},yn=An.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Sz(t,e-1)},xn=An.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fz(t,e-1)},Uz=An.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=r(s+a)||0,l.upperRight_Y=n(i)||0,[Number(zt(l.lowerLeft_X)),Number(zt(l.lowerLeft_Y)),Number(zt(l.upperRight_X)),Number(zt(l.upperRight_Y))]},Pz=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=ax(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+zt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ta(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},ax=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(I){return I.split(`
`)}):s.map(function(I){return[I]});var i=r,a=Bt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Bt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(I,U,T){if(I+1<s.length){var ee=U+" "+s[I+1][0];return hg(ee,t,T).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,h=hg("3",t,i).height,m=t.multiline?a-i:(a-h)/2,p=m+=2,b=0,B=0,_=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+hg(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var O=!1;if(s[N].length!==1&&_!==s[N].length-1){if((h+2)*(w+2)+2>a)continue e;y+=s[N][_],O=!0,B=N,N--}else{y=(y+=s[N][_]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var R=parseInt(N),M=l(R,y,i),F=N>=s.length-1;if(M&&!F){y+=" ",_=0;continue}if(M||F){if(F)B=R;else if(t.multiline&&(h+2)*(w+2)+2>a)continue e}else{if(!t.multiline||(h+2)*(w+2)+2>a)continue e;B=R}}for(var E="",L=b;L<=B;L++){var D=s[L];if(t.multiline){if(L===B){E+=D[_]+" ",_=(_+1)%D.length;continue}if(L===b){E+=D[D.length-1]+" ";continue}}E+=D[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=hg(E,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=zt(c)+" "+zt(p)+` Td
`,e+="("+Wc(E)+`) Tj
`,e+=-zt(c)+` 0 Td
`,p=-(i+2),u=0,b=O?B:B+1,w++,y=""}break}return n.text=e,n.fontSize=i,n},hg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Qz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lz=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},jz=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),_r(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},kz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Qz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new I3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Lz(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Uz(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Bt.createDefaultAppearanceStream(o),_r(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Pz(o);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var p=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var b=p[a];typeof b=="function"&&(b=b.call(s,o)),h+="/"+a+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(s,o)),h+="/"+a+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&jz(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},_3=An.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),_r(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Wc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wy=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Wc(n(t))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:_3(s,this.objId,this.scope)}):s instanceof ka?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var N3=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Js(N3,ka);var I3=function(){ka.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wc(r(t))+")"}},set:function(r){t=r}})};Js(I3,ka);var fa=function t(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wn(e,3)},set:function(y){y?this.F=yn(e,3):this.F=xn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof nv)return;i="FieldObject"+t.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Wc(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/EB:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof nv||this instanceof ul))return Wy(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Un?m:Wy(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Un?y:y.substr(0,1)==="("?Uu(y.substr(1,y.length-2)):Uu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Un?Uu(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Un?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Un?p:Wy(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Un?y:y.substr(0,1)==="("?Uu(y.substr(1,y.length-2)):Uu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Un?Uu(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Un?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,B=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return B},set:function(y){y=!!y,B=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(y){b=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,1)},set:function(y){y?this.Ff=yn(this.Ff,1):this.Ff=xn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,2)},set:function(y){y?this.Ff=yn(this.Ff,2):this.Ff=xn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,3)},set:function(y){y?this.Ff=yn(this.Ff,3):this.Ff=xn(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');_=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(_){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Js(fa,ka);var Bc=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _3(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var l,c=[];l=a.exec(i);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,18)},set:function(r){r?this.Ff=yn(this.Ff,18):this.Ff=xn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=yn(this.Ff,19):this.Ff=xn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,20)},set:function(r){r?(this.Ff=yn(this.Ff,20),e.sort()):this.Ff=xn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,22)},set:function(r){r?this.Ff=yn(this.Ff,22):this.Ff=xn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(r){r?this.Ff=yn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,27)},set:function(r){r?this.Ff=yn(this.Ff,27):this.Ff=xn(this.Ff,27)}}),this.hasAppearanceStream=!1};Js(Bc,fa);var Cc=function(){Bc.call(this),this.fontName="helvetica",this.combo=!1};Js(Cc,Bc);var Ec=function(){Cc.call(this),this.combo=!0};Js(Ec,Cc);var Tf=function(){Ec.call(this),this.edit=!0};Js(Tf,Ec);var Un=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,15)},set:function(r){r?this.Ff=yn(this.Ff,15):this.Ff=xn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,16)},set:function(r){r?this.Ff=yn(this.Ff,16):this.Ff=xn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,17)},set:function(r){r?this.Ff=yn(this.Ff,17):this.Ff=xn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(r){r?this.Ff=yn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Wc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){_r(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Js(Un,fa);var Uf=function(){Un.call(this),this.pushButton=!0};Js(Uf,Un);var _c=function(){Un.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Js(_c,Un);var nv=function(){var t,e;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Wc(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){_r(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Js(nv,fa),_c.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},_c.prototype.createOption=function(t){var e=new nv;return e.Parent=this,e.optionName=t,this.Kids.push(e),Dz.call(this.scope,e),e};var Pf=function(){Un.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};Js(Pf,Un);var ul=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,13)},set:function(e){e?this.Ff=yn(this.Ff,13):this.Ff=xn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,21)},set:function(e){e?this.Ff=yn(this.Ff,21):this.Ff=xn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(e){e?this.Ff=yn(this.Ff,23):this.Ff=xn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,24)},set:function(e){e?this.Ff=yn(this.Ff,24):this.Ff=xn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,25)},set:function(e){e?this.Ff=yn(this.Ff,25):this.Ff=xn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(e){e?this.Ff=yn(this.Ff,26):this.Ff=xn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Js(ul,fa);var Qf=function(){ul.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,14)},set:function(t){t?this.Ff=yn(this.Ff,14):this.Ff=xn(this.Ff,14)}}),this.password=!0};Js(Qf,ul);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=ax(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+zt(Bt.internal.getWidth(t))+" "+zt(Bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+zt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=Bt.internal.getHeight(t),a=Bt.internal.getWidth(t),o=ax(t,t.caption);return s.push("1 g"),s.push("0 0 "+zt(a)+" "+zt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+zt(a-1)+" "+zt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+zt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(Bt.internal.getWidth(t))+" "+zt(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Circle.YesNormal,e.D[t]=Bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Bt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+IA(Bt.internal.getWidth(t)/2)+" "+IA(Bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Bt.internal.Bezier_C).toFixed(5)),a=Number((n*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(Bt.internal.getWidth(t)/2)+" "+IA(Bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+IA(Bt.internal.getWidth(t)/2)+" "+IA(Bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(Bt.internal.getWidth(t)/2)+" "+IA(Bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Cross.YesNormal,e.D[t]=Bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=Bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+zt(Bt.internal.getWidth(t)-2)+" "+zt(Bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(zt(n.x1.x)+" "+zt(n.x1.y)+" m"),r.push(zt(n.x2.x)+" "+zt(n.x2.y)+" l"),r.push(zt(n.x4.x)+" "+zt(n.x4.y)+" m"),r.push(zt(n.x3.x)+" "+zt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=Bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(Bt.internal.getWidth(t))+" "+zt(Bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+zt(Bt.internal.getWidth(t)-2)+" "+zt(Bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(zt(r.x1.x)+" "+zt(r.x1.y)+" m"),n.push(zt(r.x2.x)+" "+zt(r.x2.y)+" l"),n.push(zt(r.x4.x)+" "+zt(r.x4.y)+" m"),n.push(zt(r.x3.x)+" "+zt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(Bt.internal.getWidth(t))+" "+zt(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Bt.internal.getWidth(t),r=Bt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Bt.internal.getWidth=function(t){var e=0;return _r(t)==="object"&&(e=dN(t.Rect[2])),e},Bt.internal.getHeight=function(t){var e=0;return _r(t)==="object"&&(e=dN(t.Rect[3])),e};var Dz=An.addField=function(t){if(kz(this,t),!(t instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};An.AcroFormChoiceField=Bc,An.AcroFormListBox=Cc,An.AcroFormComboBox=Ec,An.AcroFormEditBox=Tf,An.AcroFormButton=Un,An.AcroFormPushButton=Uf,An.AcroFormRadioButton=_c,An.AcroFormCheckBox=Pf,An.AcroFormTextField=ul,An.AcroFormPasswordField=Qf,An.AcroFormAppearance=Bt,An.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Ec,EditBox:Tf,Button:Un,PushButton:Uf,RadioButton:_c,CheckBox:Pf,TextField:ul,PasswordField:Qf,Appearance:Bt},Qt.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Ec,EditBox:Tf,Button:Un,PushButton:Uf,RadioButton:_c,CheckBox:Pf,TextField:ul,PasswordField:Qf,Appearance:Bt};var Rz=Qt.AcroForm;function S3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(I,U){var T,ee,le,re,ue,W=e;if((U=U||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(M(I))for(ue in r)for(le=r[ue],T=0;T<le.length;T+=1){for(re=!0,ee=0;ee<le[T].length;ee+=1)if(le[T][ee]!==void 0&&le[T][ee]!==I[ee]){re=!1;break}if(re===!0){W=ue;break}}else for(ue in r)for(le=r[ue],T=0;T<le.length;T+=1){for(re=!0,ee=0;ee<le[T].length;ee+=1)if(le[T][ee]!==void 0&&le[T][ee]!==I.charCodeAt(ee)){re=!1;break}if(re===!0){W=ue;break}}return W===e&&U!==e&&(W=U),W},s=function I(U){for(var T=this.internal.write,ee=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:U.width}),re.push({key:"Height",value:U.height}),U.colorSpace===_.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===_.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var ue="",W=0,ce=U.transparency.length;W<ce;W++)ue+=U.transparency[W]+" "+U.transparency[W]+" ";re.push({key:"Mask",value:"["+ue+"]"})}U.sMask!==void 0&&re.push({key:"SMask",value:U.objectId+1+" 0 R"});var ie=U.filter!==void 0?["/"+U.filter]:void 0;if(ee({data:U.data,additionalKeyValues:re,alreadyAppliedFilters:ie,objectId:U.objectId}),T("endobj"),"sMask"in U&&U.sMask!==void 0){var Ee="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,P={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:Ee,data:U.sMask};"filter"in U&&(P.filter=U.filter),I.call(this,P)}if(U.colorSpace===_.INDEXED){var k=this.internal.newObject();ee({data:E(new Uint8Array(U.palette)),objectId:k}),T("endobj")}},i=function(){var I=this.internal.collections.addImage_images;for(var U in I)s.call(this,I[U])},a=function(){var I,U=this.internal.collections.addImage_images,T=this.internal.write;for(var ee in U)T("/I"+(I=U[ee]).index,I.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var I=this.internal.collections.addImage_images;return o.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(I){return typeof t["process"+I.toUpperCase()]=="function"},h=function(I){return _r(I)==="object"&&I.nodeType===1},m=function(I,U){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var T=""+I.getAttribute("src");if(T.indexOf("data:image/")===0)return Ff(unescape(T).split("base64,").pop());var ee=t.loadFile(T,!0);if(ee!==void 0)return ee}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var le;switch(U){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;case"JPEG":case"JPG":default:le="image/jpeg"}return Ff(I.toDataURL(le,1).split("base64,").pop())}},p=function(I){var U=this.internal.collections.addImage_images;if(U){for(var T in U)if(I===U[T].alias)return U[T]}},b=function(I,U,T){return I||U||(I=-96,U=-96),I<0&&(I=-1*T.width*72/I/this.internal.scaleFactor),U<0&&(U=-1*T.height*72/U/this.internal.scaleFactor),I===0&&(I=U*T.width/T.height),U===0&&(U=I*T.height/T.width),[I,U]},B=function(I,U,T,ee,le,re){var ue=b.call(this,T,ee,le),W=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,ie=l.call(this);if(T=ue[0],ee=ue[1],ie[le.index]=le,re){re*=Math.PI/180;var Ee=Math.cos(re),P=Math.sin(re),k=function(te){return te.toFixed(4)},z=[k(Ee),k(P),k(-1*P),k(Ee),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,W(I),ce(U+ee),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([W(T),"0","0",W(ee),"0","0","cm"].join(" "))):this.internal.write([W(T),"0","0",W(ee),W(I),ce(U+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(I){var U,T,ee=0;if(typeof I=="string")for(T=I.length,U=0;U<T;U++)ee=(ee<<5)-ee+I.charCodeAt(U),ee|=0;else if(M(I))for(T=I.byteLength/2,U=0;U<T;U++)ee=(ee<<5)-ee+I[U],ee|=0;return ee},N=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var U=!0;return I.length===0&&(U=!1),I.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(U=!1),U},O=t.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var U=I.indexOf(",");return U<0?null:I.substring(0,U).trim().endsWith("base64")?I.substring(U+1):null},R=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return R()&&I instanceof ArrayBuffer};var M=t.__addimage__.isArrayBufferView=function(I){return R()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},F=t.__addimage__.binaryStringToUint8Array=function(I){for(var U=I.length,T=new Uint8Array(U),ee=0;ee<U;ee++)T[ee]=I.charCodeAt(ee);return T},E=t.__addimage__.arrayBufferToBinaryString=function(I){for(var U="",T=M(I)?I:new Uint8Array(I),ee=0;ee<T.length;ee+=8192)U+=String.fromCharCode.apply(null,T.subarray(ee,ee+8192));return U};t.addImage=function(){var I,U,T,ee,le,re,ue,W,ce;if(typeof arguments[1]=="number"?(U=e,T=arguments[1],ee=arguments[2],le=arguments[3],re=arguments[4],ue=arguments[5],W=arguments[6],ce=arguments[7]):(U=arguments[1],T=arguments[2],ee=arguments[3],le=arguments[4],re=arguments[5],ue=arguments[6],W=arguments[7],ce=arguments[8]),_r(I=arguments[0])==="object"&&!h(I)&&"imageData"in I){var ie=I;I=ie.imageData,U=ie.format||U||e,T=ie.x||T||0,ee=ie.y||ee||0,le=ie.w||ie.width||le,re=ie.h||ie.height||re,ue=ie.alias||ue,W=ie.compression||W,ce=ie.rotation||ie.angle||ce}var Ee=this.internal.getFilters();if(W===void 0&&Ee.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(T)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var P=L.call(this,I,U,ue,W);return B.call(this,T,ee,le,re,P,ce),this};var L=function(I,U,T,ee){var le,re,ue;if(typeof I=="string"&&n(I)===e){I=unescape(I);var W=D(I,!1);(W!==""||(W=t.loadFile(I,!0))!==void 0)&&(I=W)}if(h(I)&&(I=m(I,U)),U=n(I,U),!u(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((ue=T)==null||ue.length===0)&&(T=function(ce){return typeof ce=="string"||M(ce)?w(ce):M(ce.data)?w(ce.data):null}(I)),(le=p.call(this,T))||(R()&&(I instanceof Uint8Array||U==="RGBA"||(re=I,I=F(I))),le=this["process"+U.toUpperCase()](I,c.call(this),T,function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in t.image_compression?ce:y.NONE}(ee),re)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},D=t.__addimage__.convertBase64ToBinaryString=function(I,U){U=typeof U!="boolean"||U;var T,ee="";if(typeof I=="string"){var le;T=(le=O(I))!==null&&le!==void 0?le:I;try{ee=Ff(T)}catch(re){if(U)throw N(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(I){var U,T,ee="";if(h(I)&&(I=m(I)),typeof I=="string"&&n(I)===e&&((ee=D(I,!1))===""&&(ee=t.loadFile(I)||""),I=ee),T=n(I),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!R()||I instanceof Uint8Array||(I=F(I)),!(U=this["process"+T.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=T,U}})(Qt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Qt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){n=c[m];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var B=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(B.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",i+=" /Popup "+_.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+p(y(w))+") >>",B.content=i;var N=B.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",_.content=i,this.internal.write(B.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(b(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var M=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+M+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,s-c,o,a,i),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Qt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(B){return e[B.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(B){return typeof B=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(B)},o=t.__arabicParser__.isArabicEndLetter=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(B){return a(B)&&s.indexOf(B.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(B){var _=0,y=r,w="",N=0;for(_=0;_<B.length;_+=1)y[B.charCodeAt(_)]!==void 0?(N++,typeof(y=y[B.charCodeAt(_)])=="number"&&(w+=String.fromCharCode(y),y=r,N=0),_===B.length-1&&(y=r,w+=B.charAt(_-(N-1)),_-=N-1,N=0)):(y=r,w+=B.charAt(_-N),_-=N,N=0);return w};t.__arabicParser__.isArabicDiacritic=function(B){return B!==void 0&&n[B.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(B,_,y){return a(B)?i(B)===!1?-1:!c(B)||!a(_)&&!a(y)||!a(y)&&o(_)||o(B)&&!a(_)||o(B)&&l(_)||o(B)&&o(_)?0:u(B)&&a(_)&&!o(_)&&a(y)&&c(y)?3:o(B)||!a(y)?1:2:-1},p=function(B){var _=0,y=0,w=0,N="",O="",R="",M=(B=B||"").split("\\s+"),F=[];for(_=0;_<M.length;_+=1){for(F.push(""),y=0;y<M[_].length;y+=1)N=M[_][y],O=M[_][y-1],R=M[_][y+1],a(N)?(w=m(N,O,R),F[_]+=w!==-1?String.fromCharCode(e[N.charCodeAt(0)][w]):N):F[_]+=N;F[_]=h(F[_])}return F.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var B,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(_)){var w=0;for(y=[],w=0;w<_.length;w+=1)Array.isArray(_[w])?y.push([p(_[w][0]),_[w][1],_[w][2]]):y.push([p(_[w])]);B=y}else B=p(_);return typeof arguments[0]=="string"?B:(arguments[0].text=B,arguments[0])};t.events.push(["preProcessText",b])}(Qt.API),Qt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Qt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(B){l=B}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(B){c=B}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(B){u=B}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(B){h=B}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(B){m=B}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(B){p=B}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(B){b=B}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,p=0,b=0,B=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,O){return N.concat(_.splitTextToSize(O,y))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)p<(B=this.getStringUnitWidth(l[w],{font:h})*u)&&(p=B);return p!==0&&(b=l.length),{w:p/=m,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,b,B,_,y=[],w=[],N=[],O={},R={},M=[],F=[],E=(m=m||{}).autoSize||!1,L=m.printHeaders!==!1,D=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,I=m.margins||Object.assign({width:this.getPageWidth()},e),U=typeof m.padding=="number"?m.padding:3,T=m.headerBackgroundColor||"#c8c8c8",ee=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=ee,this.setFontSize(D),h==null)w=y=Object.keys(u[0]),N=y.map(function(){return"left"});else if(Array.isArray(h)&&_r(h[0])==="object")for(y=h.map(function(ie){return ie.name}),w=h.map(function(ie){return ie.prompt||ie.name||""}),N=h.map(function(ie){return ie.align||"left"}),p=0;p<h.length;p+=1)R[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=y=h,N=y.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(O[_=y[p]]=u.map(function(ie){return ie[_]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=O[_],this.setFont(void 0,"normal"),B=0;B<b.length;B+=1)M.push(this.getTextDimensions(b[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[_]=Math.max.apply(null,M)+U+U,M=[]}if(L){var le={};for(p=0;p<y.length;p+=1)le[y[p]]={},le[y[p]].text=w[p],le[y[p]].align=N[p];var re=o.call(this,le,R);F=y.map(function(ie){return new i(l,c,R[ie],re,le[ie].text,void 0,le[ie].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var ue=h.reduce(function(ie,Ee){return ie[Ee.name]=Ee.align,ie},{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var W=o.call(this,u[p],R);for(B=0;B<y.length;B+=1){var ce=u[p][y[B]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:B,data:ce},this),a.call(this,new i(l,c,R[y[B]],W,ce,p+2,ue[y[B]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var b=l[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+u+u},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Qt.API);var F3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},T3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ox=S3(T3),U3=[100,200,300,400,500,600,700,800,900],Mz=S3(U3);function Ax(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return F3[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof ox[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function hN(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Oz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Hz(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Oz,r.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=Ax(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+pN(i)+"' and default family '"+n+"'.");if(a=function(l,c){if(c[l])return c[l];var u=ox[l],h=u<=ox.normal?-1:1,m=hN(c,T3,u,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(i.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=F3[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Mz[l],h=hN(c,U3,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+pN(i)+"'.");return a}function mN(t){return t.trimLeft()}function Vz(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Kz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var fg,gN,vN,Xy=["times"];(function(t){var e,r,n,s,i,a,o,l,c,u=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var k=P;Object.defineProperty(this,"pdf",{get:function(){return k}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(oe){z=!!oe}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(oe){te=!!oe}});var $=0;Object.defineProperty(this,"posX",{get:function(){return $},set:function(oe){isNaN(oe)||($=oe)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(oe){isNaN(oe)||(ne=oe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(oe){var G;typeof oe=="number"?G=[oe,oe,oe,oe]:((G=new Array(4))[0]=oe[0],G[1]=oe.length>=2?oe[1]:G[0],G[2]=oe.length>=3?oe[2]:G[0],G[3]=oe.length>=4?oe[3]:G[1]),c.margin=G}});var X=!1;Object.defineProperty(this,"autoPaging",{get:function(){return X},set:function(oe){X=oe}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(oe){de=oe}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(oe){ge=oe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(oe){oe instanceof u&&(c=oe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(oe){c.path=oe}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(oe){Ce=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var G;G=m(oe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var G=m(oe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var Ue=null;function Te(oe,G){if(Ue===null){var Me=function(ke){var Qe=[];return Object.keys(ke).forEach(function(je){ke[je].forEach(function(We){var ze=null;switch(We){case"bold":ze={family:je,weight:"bold"};break;case"italic":ze={family:je,style:"italic"};break;case"bolditalic":ze={family:je,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:je}}ze!==null&&(ze.ref={name:je,style:We},Qe.push(ze))})}),Qe}(oe.getFontList());Ue=function(ke){for(var Qe={},je=0;je<ke.length;++je){var We=Ax(ke[je]),ze=We.family,nt=We.stretch,xe=We.style,Ge=We.weight;Qe[ze]=Qe[ze]||{},Qe[ze][nt]=Qe[ze][nt]||{},Qe[ze][nt][xe]=Qe[ze][nt][xe]||{},Qe[ze][nt][xe][Ge]=We}return Qe}(Me.concat(G))}return Ue}var ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return ae},set:function(oe){Ue=null,ae=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var G;if(this.ctx.font=oe,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var Me=G[1];G[2];var ke=G[3],Qe=G[4];G[5];var je=G[6],We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(We==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var ze=function(At){var he,_e,at=[],xt=At.trim();if(xt==="")return Xy;if(xt in fN)return[fN[xt]];for(;xt!=="";){switch(_e=null,he=(xt=mN(xt)).charAt(0)){case'"':case"'":_e=Vz(xt.substring(1),he);break;default:_e=Kz(xt)}if(_e===null||(at.push(_e[0]),(xt=mN(_e[1]))!==""&&xt.charAt(0)!==","))return Xy;xt=xt.replace(/^,/,"")}return at}(je);if(this.fontFaces){var nt=Hz(Te(this.pdf,this.fontFaces),ze.map(function(At){return{family:At,stretch:"normal",weight:ke,style:Me}}));this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var xe="";(ke==="bold"||parseInt(ke,10)>=700||Me==="bold")&&(xe="bold"),Me==="italic"&&(xe+="italic"),xe.length===0&&(xe="normal");for(var Ge="",$e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tt=0;tt<ze.length;tt++){if(this.pdf.internal.getFont(ze[tt],xe,{noFallback:!0,disableWarning:!0})!==void 0){Ge=ze[tt];break}if(xe==="bolditalic"&&this.pdf.internal.getFont(ze[tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=ze[tt],xe="bold";else if(this.pdf.internal.getFont(ze[tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=ze[tt],xe="normal";break}}if(Ge===""){for(var ct=0;ct<ze.length;ct++)if($e[ze[ct]]){Ge=$e[ze[ct]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,Ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,Ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};h.prototype.setLineDash=function(P){this.lineDash=P},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){O.call(this,"fill",!1)},h.prototype.stroke=function(){O.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(P,k){if(isNaN(P)||isNaN(k))throw Pr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(P,k)},h.prototype.closePath=function(){var P=new a(0,0),k=0;for(k=this.path.length-1;k!==-1;k--)if(this.path[k].type==="begin"&&_r(this.path[k+1])==="object"&&typeof this.path[k+1].x=="number"){P=new a(this.path[k+1].x,this.path[k+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},h.prototype.lineTo=function(P,k){if(isNaN(P)||isNaN(k))throw Pr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(z.x,z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},h.prototype.quadraticCurveTo=function(P,k,z,te){if(isNaN(z)||isNaN(te)||isNaN(P)||isNaN(k))throw Pr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $=this.ctx.transform.applyToPoint(new a(z,te)),ne=this.ctx.transform.applyToPoint(new a(P,k));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:$.x,y:$.y}),this.ctx.lastPoint=new a($.x,$.y)},h.prototype.bezierCurveTo=function(P,k,z,te,$,ne){if(isNaN($)||isNaN(ne)||isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te))throw Pr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var X=this.ctx.transform.applyToPoint(new a($,ne)),de=this.ctx.transform.applyToPoint(new a(P,k)),ge=this.ctx.transform.applyToPoint(new a(z,te));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:ge.x,y2:ge.y,x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},h.prototype.arc=function(P,k,z,te,$,ne){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te)||isNaN($))throw Pr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var X=this.ctx.transform.applyToPoint(new a(P,k));P=X.x,k=X.y;var de=this.ctx.transform.applyToPoint(new a(0,z)),ge=this.ctx.transform.applyToPoint(new a(0,0));z=Math.sqrt(Math.pow(de.x-ge.x,2)+Math.pow(de.y-ge.y,2))}Math.abs($-te)>=2*Math.PI&&(te=0,$=2*Math.PI),this.path.push({type:"arc",x:P,y:k,radius:z,startAngle:te,endAngle:$,counterclockwise:ne})},h.prototype.arcTo=function(P,k,z,te,$){throw new Error("arcTo not implemented.")},h.prototype.rect=function(P,k,z,te){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te))throw Pr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,k),this.lineTo(P+z,k),this.lineTo(P+z,k+te),this.lineTo(P,k+te),this.lineTo(P,k),this.lineTo(P+z,k),this.lineTo(P,k)},h.prototype.fillRect=function(P,k,z,te){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te))throw Pr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var $={};this.lineCap!=="butt"&&($.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&($.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,k,z,te),this.fill(),$.hasOwnProperty("lineCap")&&(this.lineCap=$.lineCap),$.hasOwnProperty("lineJoin")&&(this.lineJoin=$.lineJoin)}},h.prototype.strokeRect=function(P,k,z,te){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te))throw Pr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(P,k,z,te),this.stroke())},h.prototype.clearRect=function(P,k,z,te){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te))throw Pr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,k,z,te))},h.prototype.save=function(P){P=typeof P!="boolean"||P;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(k),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(k),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var k,z,te,$;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))k=0,z=0,te=0,$=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ne!==null)k=parseInt(ne[1]),z=parseInt(ne[2]),te=parseInt(ne[3]),$=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)k=parseInt(ne[1]),z=parseInt(ne[2]),te=parseInt(ne[3]),$=parseFloat(ne[4]);else{if($=1,typeof P=="string"&&P.charAt(0)!=="#"){var X=new B3(P);P=X.ok?X.toHex():"#000000"}P.length===4?(k=P.substring(1,2),k+=k,z=P.substring(2,3),z+=z,te=P.substring(3,4),te+=te):(k=P.substring(1,3),z=P.substring(3,5),te=P.substring(5,7)),k=parseInt(k,16),z=parseInt(z,16),te=parseInt(te,16)}}return{r:k,g:z,b:te,a:$,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(P,k,z,te){if(isNaN(k)||isNaN(z)||typeof P!="string")throw Pr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var $=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;U.call(this,{text:P,x:k,y:z,scale:ne,angle:$,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(P,k,z,te){if(isNaN(k)||isNaN(z)||typeof P!="string")throw Pr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var $=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;U.call(this,{text:P,x:k,y:z,scale:ne,renderingMode:"stroke",angle:$,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(P){if(typeof P!="string")throw Pr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var k=this.pdf,z=this.pdf.internal.scaleFactor,te=k.internal.getFontSize(),$=k.getStringUnitWidth(P)*te/k.internal.scaleFactor,ne=function(X){var de=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new ne({width:$*=Math.round(96*z/72*1e4)/1e4})},h.prototype.scale=function(P,k){if(isNaN(P)||isNaN(k))throw Pr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(P,0,0,k,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.rotate=function(P){if(isNaN(P))throw Pr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var k=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(k)},h.prototype.translate=function(P,k){if(isNaN(P)||isNaN(k))throw Pr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,P,k);this.ctx.transform=this.ctx.transform.multiply(z)},h.prototype.transform=function(P,k,z,te,$,ne){if(isNaN(P)||isNaN(k)||isNaN(z)||isNaN(te)||isNaN($)||isNaN(ne))throw Pr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var X=new l(P,k,z,te,$,ne);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.setTransform=function(P,k,z,te,$,ne){P=isNaN(P)?1:P,k=isNaN(k)?0:k,z=isNaN(z)?0:z,te=isNaN(te)?1:te,$=isNaN($)?0:$,ne=isNaN(ne)?0:ne,this.ctx.transform=new l(P,k,z,te,$,ne)};var B=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(P,k,z,te,$,ne,X,de,ge){var Ce=this.pdf.getImageProperties(P),Ue=1,Te=1,ae=1,oe=1;te!==void 0&&de!==void 0&&(ae=de/te,oe=ge/$,Ue=Ce.width/te*de/te,Te=Ce.height/$*ge/$),ne===void 0&&(ne=k,X=z,k=0,z=0),te!==void 0&&de===void 0&&(de=te,ge=$),te===void 0&&de===void 0&&(de=Ce.width,ge=Ce.height);for(var G,Me=this.ctx.transform.decompose(),ke=W(Me.rotate.shx),Qe=new l,je=(Qe=(Qe=(Qe=Qe.multiply(Me.translate)).multiply(Me.skew)).multiply(Me.scale)).applyToRectangle(new o(ne-k*ae,X-z*oe,te*Ue,$*Te)),We=_.call(this,je),ze=[],nt=0;nt<We.length;nt+=1)ze.indexOf(We[nt])===-1&&ze.push(We[nt]);if(N(ze),this.autoPaging)for(var xe=ze[0],Ge=ze[ze.length-1],$e=xe;$e<Ge+1;$e++){this.pdf.setPage($e);var tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=$e===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=$e===1?0:At+($e-2)*he;if(this.ctx.clip_path.length!==0){var at=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(G,this.posX+this.margin[3],-_e+ct+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=at}var xt=JSON.parse(JSON.stringify(je));xt=w([xt],this.posX+this.margin[3],-_e+ct+this.ctx.prevPageLastElemOffset)[0];var or=($e>xe||$e<Ge)&&B.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,he,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,ke),or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",je.x,je.y,je.w,je.h,null,null,ke)};var _=function(P,k,z){var te=[];k=k||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":te.push(Math.floor((P.y+$)/z)+1);break;case"arc":te.push(Math.floor((P.y+$-P.radius)/z)+1),te.push(Math.floor((P.y+$+P.radius)/z)+1);break;case"qct":var ne=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);te.push(Math.floor((ne.y+$)/z)+1),te.push(Math.floor((ne.y+ne.h+$)/z)+1);break;case"bct":var X=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);te.push(Math.floor((X.y+$)/z)+1),te.push(Math.floor((X.y+X.h+$)/z)+1);break;case"rect":te.push(Math.floor((P.y+$)/z)+1),te.push(Math.floor((P.y+P.h+$)/z)+1)}for(var de=0;de<te.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<te[de];)y.call(this);return te},y=function(){var P=this.fillStyle,k=this.strokeStyle,z=this.font,te=this.lineCap,$=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=k,this.font=z,this.lineCap=te,this.lineWidth=$,this.lineJoin=ne},w=function(P,k,z){for(var te=0;te<P.length;te++)switch(P[te].type){case"bct":P[te].x2+=k,P[te].y2+=z;case"qct":P[te].x1+=k,P[te].y1+=z;case"mt":case"lt":case"arc":default:P[te].x+=k,P[te].y+=z}return P},N=function(P){return P.sort(function(k,z){return k-z})},O=function(P,k){for(var z,te,$=this.fillStyle,ne=this.strokeStyle,X=this.lineCap,de=this.lineWidth,ge=Math.abs(de*this.ctx.transform.scaleX),Ce=this.lineJoin,Ue=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),ae=[],oe=0;oe<Te.length;oe++)if(Te[oe].x!==void 0)for(var G=_.call(this,Te[oe]),Me=0;Me<G.length;Me+=1)ae.indexOf(G[Me])===-1&&ae.push(G[Me]);for(var ke=0;ke<ae.length;ke++)for(;this.pdf.internal.getNumberOfPages()<ae[ke];)y.call(this);if(N(ae),this.autoPaging)for(var Qe=ae[0],je=ae[ae.length-1],We=Qe;We<je+1;We++){this.pdf.setPage(We),this.fillStyle=$,this.strokeStyle=ne,this.lineCap=X,this.lineWidth=ge,this.lineJoin=Ce;var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=We===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=We===1?0:xe+(We-2)*Ge;if(this.ctx.clip_path.length!==0){var tt=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(z,this.posX+this.margin[3],-$e+nt+this.ctx.prevPageLastElemOffset),R.call(this,P,!0),this.path=tt}if(te=JSON.parse(JSON.stringify(Ue)),this.path=w(te,this.posX+this.margin[3],-$e+nt+this.ctx.prevPageLastElemOffset),k===!1||We===0){var ct=(We>Qe||We<je)&&B.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,Ge,null).clip().discardPath()),R.call(this,P,k),ct&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=ge,R.call(this,P,k),this.lineWidth=de;this.path=Ue},R=function(P,k){if((P!=="stroke"||k||!b.call(this))&&(P==="stroke"||k||!p.call(this))){for(var z,te,$=[],ne=this.path,X=0;X<ne.length;X++){var de=ne[X];switch(de.type){case"begin":$.push({begin:!0});break;case"close":$.push({close:!0});break;case"mt":$.push({start:de,deltas:[],abs:[]});break;case"lt":var ge=$.length;if(ne[X-1]&&!isNaN(ne[X-1].x)&&(z=[de.x-ne[X-1].x,de.y-ne[X-1].y],ge>0)){for(;ge>=0;ge--)if($[ge-1].close!==!0&&$[ge-1].begin!==!0){$[ge-1].deltas.push(z),$[ge-1].abs.push(de);break}}break;case"bct":z=[de.x1-ne[X-1].x,de.y1-ne[X-1].y,de.x2-ne[X-1].x,de.y2-ne[X-1].y,de.x-ne[X-1].x,de.y-ne[X-1].y],$[$.length-1].deltas.push(z);break;case"qct":var Ce=ne[X-1].x+2/3*(de.x1-ne[X-1].x),Ue=ne[X-1].y+2/3*(de.y1-ne[X-1].y),Te=de.x+2/3*(de.x1-de.x),ae=de.y+2/3*(de.y1-de.y),oe=de.x,G=de.y;z=[Ce-ne[X-1].x,Ue-ne[X-1].y,Te-ne[X-1].x,ae-ne[X-1].y,oe-ne[X-1].x,G-ne[X-1].y],$[$.length-1].deltas.push(z);break;case"arc":$.push({deltas:[],abs:[],arc:!0}),Array.isArray($[$.length-1].abs)&&$[$.length-1].abs.push(de)}}te=k?null:P==="stroke"?"stroke":"fill";for(var Me=!1,ke=0;ke<$.length;ke++)if($[ke].arc)for(var Qe=$[ke].abs,je=0;je<Qe.length;je++){var We=Qe[je];We.type==="arc"?E.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,k,!Me):T.call(this,We.x,We.y),Me=!0}else if($[ke].close===!0)this.pdf.internal.out("h"),Me=!1;else if($[ke].begin!==!0){var ze=$[ke].start.x,nt=$[ke].start.y;ee.call(this,$[ke].deltas,ze,nt),Me=!0}te&&L.call(this,te),k&&D.call(this)}},M=function(P){var k=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=k*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-z;case"top":return P+k-z;case"hanging":return P+k-2*z;case"middle":return P+k/2-z;case"ideographic":return P;case"alphabetic":default:return P}},F=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(k,z){this.colorStops.push([k,z])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(P,k,z,te,$,ne,X,de,ge){for(var Ce=re.call(this,z,te,$,ne),Ue=0;Ue<Ce.length;Ue++){var Te=Ce[Ue];Ue===0&&(ge?I.call(this,Te.x1+P,Te.y1+k):T.call(this,Te.x1+P,Te.y1+k)),le.call(this,P,k,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}de?D.call(this):L.call(this,X)},L=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(P,k){this.pdf.internal.out(r(P)+" "+n(k)+" m")},U=function(P){var k;switch(P.align){case"right":case"end":k="right";break;case"center":k="center";break;case"left":case"start":default:k="left"}var z=this.pdf.getTextDimensions(P.text),te=M.call(this,P.y),$=F.call(this,te)-z.h,ne=this.ctx.transform.applyToPoint(new a(P.x,te)),X=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(X.translate)).multiply(X.skew)).multiply(X.scale);for(var ge,Ce,Ue,Te=this.ctx.transform.applyToRectangle(new o(P.x,te,z.w,z.h)),ae=de.applyToRectangle(new o(P.x,$,z.w,z.h)),oe=_.call(this,ae),G=[],Me=0;Me<oe.length;Me+=1)G.indexOf(oe[Me])===-1&&G.push(oe[Me]);if(N(G),this.autoPaging)for(var ke=G[0],Qe=G[G.length-1],je=ke;je<Qe+1;je++){this.pdf.setPage(je);var We=je===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],xe=nt-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],$e=Ge-this.margin[3],tt=je===1?0:ze+(je-2)*xe;if(this.ctx.clip_path.length!==0){var ct=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ge,this.posX+this.margin[3],-1*tt+We),R.call(this,"fill",!0),this.path=ct}var At=w([JSON.parse(JSON.stringify(ae))],this.posX+this.margin[3],-tt+We+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ue=this.lineWidth,this.lineWidth=Ue*P.scale);var he=this.autoPaging!=="text";if(he||At.y+At.h<=nt){if(he||At.y>=We&&At.x<=Ge){var _e=he?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Ge-At.x)[0],at=w([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-tt+We+this.ctx.prevPageLastElemOffset)[0],xt=he&&(je>ke||je<Qe)&&B.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,xe,null).clip().discardPath()),this.pdf.text(_e,at.x,at.y,{angle:P.angle,align:k,renderingMode:P.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else At.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-At.y);P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ue)}else P.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*P.scale),Ue=this.lineWidth,this.lineWidth=Ue*P.scale),this.pdf.text(P.text,ne.x+this.posX,ne.y+this.posY,{angle:P.angle,align:k,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ue)},T=function(P,k,z,te){z=z||0,te=te||0,this.pdf.internal.out(r(P+z)+" "+n(k+te)+" l")},ee=function(P,k,z){return this.pdf.lines(P,k,z,null,null)},le=function(P,k,z,te,$,ne,X,de){this.pdf.internal.out([e(s(z+P)),e(i(te+k)),e(s($+P)),e(i(ne+k)),e(s(X+P)),e(i(de+k)),"c"].join(" "))},re=function(P,k,z,te){for(var $=2*Math.PI,ne=Math.PI/2;k>z;)k-=$;var X=Math.abs(z-k);X<$&&te&&(X=$-X);for(var de=[],ge=te?-1:1,Ce=k;X>1e-5;){var Ue=Ce+ge*Math.min(X,ne);de.push(ue.call(this,P,Ce,Ue)),X-=Math.abs(Ue-Ce),Ce=Ue}return de},ue=function(P,k,z){var te=(z-k)/2,$=P*Math.cos(te),ne=P*Math.sin(te),X=$,de=-ne,ge=X*X+de*de,Ce=ge+X*$+de*ne,Ue=4/3*(Math.sqrt(2*ge*Ce)-Ce)/(X*ne-de*$),Te=X-Ue*de,ae=de+Ue*X,oe=Te,G=-ae,Me=te+k,ke=Math.cos(Me),Qe=Math.sin(Me);return{x1:P*Math.cos(k),y1:P*Math.sin(k),x2:Te*ke-ae*Qe,y2:Te*Qe+ae*ke,x3:oe*ke-G*Qe,y3:oe*Qe+G*ke,x4:P*Math.cos(z),y4:P*Math.sin(z)}},W=function(P){return 180*P/Math.PI},ce=function(P,k,z,te,$,ne){var X=P+.5*(z-P),de=k+.5*(te-k),ge=$+.5*(z-$),Ce=ne+.5*(te-ne),Ue=Math.min(P,$,X,ge),Te=Math.max(P,$,X,ge),ae=Math.min(k,ne,de,Ce),oe=Math.max(k,ne,de,Ce);return new o(Ue,ae,Te-Ue,oe-ae)},ie=function(P,k,z,te,$,ne,X,de){var ge,Ce,Ue,Te,ae,oe,G,Me,ke,Qe,je,We,ze,nt,xe=z-P,Ge=te-k,$e=$-z,tt=ne-te,ct=X-$,At=de-ne;for(Ce=0;Ce<41;Ce++)ke=(G=(Ue=P+(ge=Ce/40)*xe)+ge*((ae=z+ge*$e)-Ue))+ge*(ae+ge*($+ge*ct-ae)-G),Qe=(Me=(Te=k+ge*Ge)+ge*((oe=te+ge*tt)-Te))+ge*(oe+ge*(ne+ge*At-oe)-Me),Ce==0?(je=ke,We=Qe,ze=ke,nt=Qe):(je=Math.min(je,ke),We=Math.min(We,Qe),ze=Math.max(ze,ke),nt=Math.max(nt,Qe));return new o(Math.round(je),Math.round(We),Math.round(ze-je),Math.round(nt-We))},Ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,k,z=(P=this.ctx.lineDash,k=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:k}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Qt.API),function(t){var e=function(i){var a,o,l,c,u,h,m,p,b,B;for(o=[],l=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(B=u%85))/85)-(b=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,o.push(h+33,m+33,p+33,b+33,B+33)):o.push(122);return function(_,y){for(var w=y;w>0;w--)_.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var a,o,l,c,u,h=String,m="length",p=255,b="charCodeAt",B="slice",_="replace";for(i[B](-2),i=i[B](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],c=0,u=(i+=a="uuuuu"[B](i[m]%5||5))[m];u>c;c+=5)o=52200625*(i[b](c)-33)+614125*(i[b](c+1)-33)+7225*(i[b](c+2)-33)+85*(i[b](c+3)-33)+(i[b](c+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,w){for(var N=w;N>0;N--)y.pop()}(l,a[m]),h.fromCharCode.apply(h,l)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=rx(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,l=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Qt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var h=new XMLHttpRequest,m=0,p=function(b){var B=b.length,_=[],y=String.fromCharCode;for(m=0;m<B;m+=1)_.push(y(255&b.charCodeAt(m)));return _.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return p(h.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(Qt.API),function(t){function e(){return(Rt.html2canvas?Promise.resolve(Rt.html2canvas):Qo(()=>Promise.resolve().then(()=>bB),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Rt.DOMPurify?Promise.resolve(Rt.DOMPurify):Qo(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=_r(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var p=c[m],b=p.src.find(function(B){return B.format==="truetype"});b&&l.addFont(b.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},i.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Qt.getPageSize=function(a,o,l){if(_r(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,b=0,B=0;if(m.hasOwnProperty(h))b=m[h][1]/u,B=m[h][0]/u;else try{b=l[1],B=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",B>b&&(p=B,B=b,b=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>B&&(p=B,B=b,b=p)}return{width:B,height:b,unit:o,k:u,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Ax):null;var l=new i(o);return o.worker?l:l.from(a).doCallback()}}(Qt.API),Qt.API.addJS=function(t){return vN=t,this.internal.events.subscribe("postPutResources",function(){fg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fg!==void 0&&gN!==void 0&&this.internal.out("/Names <</JavaScript "+fg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Qt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,B={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=p,e.indexOf(h.charCodeAt(_+1))!==-1){m=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),B={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:m,numcomponents:h.charCodeAt(_+9)};break}p=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return B}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(Qt.API);var Pu,pg,wN,yN,xN,qz=function(){var t,e,r;function n(i){var a,o,l,c,u,h,m,p,b,B,_,y,w,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(a=this.readUInt32(),b=(function(){var O,R;for(R=[],O=0;O<4;++O)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),i=(h!=null?h.data:void 0)||this.imgData,y=0;0<=a?y<a:y>a;0<=a?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((B=l-this.transparency.indexed.length)>0)for(w=0;0<=B?w<B:w>B;0<=B?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(_=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,_.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,m,p,b){var B,_,y,w,N,O,R,M,F,E,L,D,I,U,T,ee,le,re,ue,W,ce,ie=Math.ceil((c.width-h)/p),Ee=Math.ceil((c.height-m)/b),P=c.width==ie&&c.height==Ee;for(U=a*ie,D=P?o:new Uint8Array(U*Ee),O=i.length,I=0,_=0;I<Ee&&l<O;){switch(i[l++]){case 0:for(w=le=0;le<U;w=le+=1)D[_++]=i[l++];break;case 1:for(w=re=0;re<U;w=re+=1)B=i[l++],N=w<a?0:D[_-a],D[_++]=(B+N)%256;break;case 2:for(w=ue=0;ue<U;w=ue+=1)B=i[l++],y=(w-w%a)/a,T=I&&D[(I-1)*U+y*a+w%a],D[_++]=(T+B)%256;break;case 3:for(w=W=0;W<U;w=W+=1)B=i[l++],y=(w-w%a)/a,N=w<a?0:D[_-a],T=I&&D[(I-1)*U+y*a+w%a],D[_++]=(B+Math.floor((N+T)/2))%256;break;case 4:for(w=ce=0;ce<U;w=ce+=1)B=i[l++],y=(w-w%a)/a,N=w<a?0:D[_-a],I===0?T=ee=0:(T=D[(I-1)*U+y*a+w%a],ee=y&&D[(I-1)*U+(y-1)*a+w%a]),R=N+T-ee,M=Math.abs(R-N),E=Math.abs(R-T),L=Math.abs(R-ee),F=M<=E&&M<=L?N:E<=L?T:ee,D[_++]=(B+F)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!P){var k=((m+I*b)*c.width+h)*a,z=I*U;for(w=0;w<ie;w+=1){for(var te=0;te<a;te+=1)o[k++]=D[z++];k+=(p-1)*a}}I++}}return i=bz(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,a,o,l,c,u,h,m,p;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,a=h=0,m=o.length;h<m;a=h+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(p=u[i++])!=null?p:255;return c},n.prototype.copyToImageData=function(i,a){var o,l,c,u,h,m,p,b,B,_,y;if(l=this.colors,B=null,o=this.hasAlphaChannel,this.palette.length&&(B=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(c=i.data||i).length,h=B||a,u=m=0,l===1)for(;u<b;)p=B?4*a[u/4]:m,_=h[p++],c[u++]=_,c[u++]=_,c[u++]=_,c[u++]=o?h[p++]:255,m=p;else for(;u<b;)p=B?4*a[u/4]:m,c[u++]=h[p++],c[u++]=h[p++],c[u++]=h[p++],c[u++]=o?h[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Rt)==="[object Window]"){try{e=Rt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,o,l,c,u,h,m,p;if(this.animation){for(p=[],o=u=0,h=(m=this.animation.frames).length;u<h;o=++u)a=m[o],l=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,p.push(a.image=t(l));return p}},n.prototype.renderFrame=function(i,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var a,o,l,c,u,h,m=this;return o=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(a=function(){var p,b;if(p=o++%c,b=l[p],m.renderFrame(i,p),c>1&&o/c<u)return m.animation._timeout=setTimeout(a,b.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Gz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var c=!0,u=[],h=0,m=null,p=0,b=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var B=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],!(1&B)&&(m=null),p=B>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,O=t[e++],R=O>>6&1,M=1<<(7&O)+1,F=o,E=l,L=!1;O>>7&&(L=!0,F=e,E=M,e+=3*M);var D=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}u.push({x:_,y,width:w,height:N,has_local_palette:L,palette_offset:F,palette_size:E,data_offset:D,data_length:e-D,transparent_index:m,interlaced:!!R,delay:h,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(U){if(U<0||U>=u.length)throw new Error("Frame index out of range.");return u[U]},this.decodeAndBlitFrameBGRA=function(U,T){var ee=this.frameInfo(U),le=ee.width*ee.height,re=new Uint8Array(le);bN(t,ee.data_offset,re,le);var ue=ee.palette_offset,W=ee.transparent_index;W===null&&(W=256);var ce=ee.width,ie=r-ce,Ee=ce,P=4*(ee.y*r+ee.x),k=4*((ee.y+ee.height)*r+ee.x),z=P,te=4*ie;ee.interlaced===!0&&(te+=4*r*7);for(var $=8,ne=0,X=re.length;ne<X;++ne){var de=re[ne];if(Ee===0&&(Ee=ce,(z+=te)>=k&&(te=4*ie+4*r*($-1),z=P+(ce+ie)*($<<1),$>>=1)),de===W)z+=4;else{var ge=t[ue+3*de],Ce=t[ue+3*de+1],Ue=t[ue+3*de+2];T[z++]=Ue,T[z++]=Ce,T[z++]=ge,T[z++]=255}--Ee}},this.decodeAndBlitFrameRGBA=function(U,T){var ee=this.frameInfo(U),le=ee.width*ee.height,re=new Uint8Array(le);bN(t,ee.data_offset,re,le);var ue=ee.palette_offset,W=ee.transparent_index;W===null&&(W=256);var ce=ee.width,ie=r-ce,Ee=ce,P=4*(ee.y*r+ee.x),k=4*((ee.y+ee.height)*r+ee.x),z=P,te=4*ie;ee.interlaced===!0&&(te+=4*r*7);for(var $=8,ne=0,X=re.length;ne<X;++ne){var de=re[ne];if(Ee===0&&(Ee=ce,(z+=te)>=k&&(te=4*ie+4*r*($-1),z=P+(ce+ie)*($<<1),$>>=1)),de===W)z+=4;else{var ge=t[ue+3*de],Ce=t[ue+3*de+1],Ue=t[ue+3*de+2];T[z++]=ge,T[z++]=Ce,T[z++]=Ue,T[z++]=255}--Ee}}}function bN(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,u=0,h=0,m=0,p=t[e++],b=new Int32Array(4096),B=null;;){for(;u<16&&p!==0;)h|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var _=h&c;if(h>>=l,u-=l,_!==i){if(_===a)break;for(var y=_<o?_:B,w=0,N=y;N>i;)N=b[N]>>8,++w;var O=N;if(m+w+(y!==_?1:0)>n)return void Pr.log("Warning, gif stream longer than expected.");r[m++]=O;var R=m+=w;for(y!==_&&(r[m++]=O),N=y;w--;)N=b[N],r[--R]=255&N,N>>=8;B!==null&&o<4096&&(b[o++]=B<<8|O,o>=c+1&&l<12&&(++l,c=c<<1|1)),B=_}else o=a+1,c=(1<<(l=s+1))-1,B=null}return m!==n&&Pr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jy(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),b=new Array(64),B=[],_=0,y=7,w=new Array(64),N=new Array(64),O=new Array(64),R=new Array(256),M=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(P,k){for(var z=0,te=0,$=new Array,ne=1;ne<=16;ne++){for(var X=1;X<=P[ne];X++)$[k[te]]=[],$[k[te]][0]=z,$[k[te]][1]=ne,te++,z++;z*=2}return $}function ue(P){for(var k=P[0],z=P[1]-1;z>=0;)k&1<<z&&(_|=1<<y),z--,--y<0&&(_==255?(W(255),W(0)):W(_),y=7,_=0)}function W(P){B.push(P)}function ce(P){W(P>>8&255),W(255&P)}function ie(P,k,z,te,$){for(var ne,X=$[0],de=$[240],ge=function(Qe,je){var We,ze,nt,xe,Ge,$e,tt,ct,At,he,_e=0;for(At=0;At<8;++At){We=Qe[_e],ze=Qe[_e+1],nt=Qe[_e+2],xe=Qe[_e+3],Ge=Qe[_e+4],$e=Qe[_e+5],tt=Qe[_e+6];var at=We+(ct=Qe[_e+7]),xt=We-ct,or=ze+tt,Kt=ze-tt,kt=nt+$e,un=nt-$e,Vt=xe+Ge,ls=xe-Ge,Ar=at+Vt,mr=at-Vt,dn=or+kt,gr=or-kt;Qe[_e]=Ar+dn,Qe[_e+4]=Ar-dn;var Ut=.707106781*(gr+mr);Qe[_e+2]=mr+Ut,Qe[_e+6]=mr-Ut;var Xt=.382683433*((Ar=ls+un)-(gr=Kt+xt)),cs=.5411961*Ar+Xt,Gr=1.306562965*gr+Xt,fr=.707106781*(dn=un+Kt),Pe=xt+fr,He=xt-fr;Qe[_e+5]=He+cs,Qe[_e+3]=He-cs,Qe[_e+1]=Pe+Gr,Qe[_e+7]=Pe-Gr,_e+=8}for(_e=0,At=0;At<8;++At){We=Qe[_e],ze=Qe[_e+8],nt=Qe[_e+16],xe=Qe[_e+24],Ge=Qe[_e+32],$e=Qe[_e+40],tt=Qe[_e+48];var Nt=We+(ct=Qe[_e+56]),mt=We-ct,ht=ze+tt,St=ze-tt,ot=nt+$e,Et=nt-$e,be=xe+Ge,rt=xe-Ge,st=Nt+be,Dt=Nt-be,Jt=ht+ot,_t=ht-ot;Qe[_e]=st+Jt,Qe[_e+32]=st-Jt;var vt=.707106781*(_t+Dt);Qe[_e+16]=Dt+vt,Qe[_e+48]=Dt-vt;var Cs=.382683433*((st=rt+Et)-(_t=St+mt)),ma=.5411961*st+Cs,ga=1.306562965*_t+Cs,va=.707106781*(Jt=Et+St),$a=mt+va,Wa=mt-va;Qe[_e+40]=Wa+ma,Qe[_e+24]=Wa-ma,Qe[_e+8]=$a+ga,Qe[_e+56]=$a-ga,_e++}for(At=0;At<64;++At)he=Qe[At]*je[At],p[At]=he>0?he+.5|0:he-.5|0;return p}(P,k),Ce=0;Ce<64;++Ce)b[F[Ce]]=ge[Ce];var Ue=b[0]-z;z=b[0],Ue==0?ue(te[0]):(ue(te[m[ne=32767+Ue]]),ue(h[ne]));for(var Te=63;Te>0&&b[Te]==0;)Te--;if(Te==0)return ue(X),z;for(var ae,oe=1;oe<=Te;){for(var G=oe;b[oe]==0&&oe<=Te;)++oe;var Me=oe-G;if(Me>=16){ae=Me>>4;for(var ke=1;ke<=ae;++ke)ue(de);Me&=15}ne=32767+b[oe],ue($[(Me<<4)+m[ne]]),ue(h[ne]),oe++}return Te!=63&&ue(X),z}function Ee(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(k){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var $=a((z[te]*k+50)/100);$=Math.min(Math.max($,1),255),o[F[te]]=$}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var de=a((ne[X]*k+50)/100);de=Math.min(Math.max(de,1),255),l[F[X]]=de}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ue=0;Ue<8;Ue++)for(var Te=0;Te<8;Te++)c[Ce]=1/(o[F[Ce]]*ge[Ue]*ge[Te]*8),u[Ce]=1/(l[F[Ce]]*ge[Ue]*ge[Te]*8),Ce++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,k){k&&Ee(k),B=new Array,_=0,y=7,ce(65496),ce(65504),ce(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ce(1),ce(1),W(0),W(0),function(){ce(65499),ce(132),W(0);for(var ze=0;ze<64;ze++)W(o[ze]);W(1);for(var nt=0;nt<64;nt++)W(l[nt])}(),function(ze,nt){ce(65472),ce(17),W(8),ce(nt),ce(ze),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(P.width,P.height),function(){ce(65476),ce(418),W(0);for(var ze=0;ze<16;ze++)W(E[ze+1]);for(var nt=0;nt<=11;nt++)W(L[nt]);W(16);for(var xe=0;xe<16;xe++)W(D[xe+1]);for(var Ge=0;Ge<=161;Ge++)W(I[Ge]);W(1);for(var $e=0;$e<16;$e++)W(U[$e+1]);for(var tt=0;tt<=11;tt++)W(T[tt]);W(17);for(var ct=0;ct<16;ct++)W(ee[ct+1]);for(var At=0;At<=161;At++)W(le[At])}(),ce(65498),ce(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var z=0,te=0,$=0;_=0,y=7,this.encode.displayName="_encode_";for(var ne,X,de,ge,Ce,Ue,Te,ae,oe,G=P.data,Me=P.width,ke=P.height,Qe=4*Me,je=0;je<ke;){for(ne=0;ne<Qe;){for(Ce=Qe*je+ne,Te=-1,ae=0,oe=0;oe<64;oe++)Ue=Ce+(ae=oe>>3)*Qe+(Te=4*(7&oe)),je+ae>=ke&&(Ue-=Qe*(je+1+ae-ke)),ne+Te>=Qe&&(Ue-=ne+Te-Qe+4),X=G[Ue++],de=G[Ue++],ge=G[Ue++],w[oe]=(M[X]+M[de+256>>0]+M[ge+512>>0]>>16)-128,N[oe]=(M[X+768>>0]+M[de+1024>>0]+M[ge+1280>>0]>>16)-128,O[oe]=(M[X+1280>>0]+M[de+1536>>0]+M[ge+1792>>0]>>16)-128;z=ie(w,c,z,e,n),te=ie(N,u,te,r,s),$=ie(O,u,$,r,s),ne+=32}je+=8}if(y>=0){var We=[];We[1]=y+1,We[0]=(1<<y+1)-1,ue(We)}return ce(65497),new Uint8Array(B)},t=t||50,function(){for(var P=String.fromCharCode,k=0;k<256;k++)R[k]=P(k)}(),e=re(E,L),r=re(U,T),n=re(D,I),s=re(ee,le),function(){for(var P=1,k=2,z=1;z<=15;z++){for(var te=P;te<k;te++)m[32767+te]=z,h[32767+te]=[],h[32767+te][1]=z,h[32767+te][0]=te;for(var $=-(k-1);$<=-P;$++)m[32767+$]=z,h[32767+$]=[],h[32767+$][1]=z,h[32767+$][0]=k-1+$;P<<=1,k<<=1}}(),function(){for(var P=0;P<256;P++)M[P]=19595*P,M[P+256>>0]=38470*P,M[P+512>>0]=7471*P+32768,M[P+768>>0]=-11059*P,M[P+1024>>0]=-21709*P,M[P+1280>>0]=32768*P+8421375,M[P+1536>>0]=-27439*P,M[P+1792>>0]=-5329*P}(),Ee(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ji(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function BN(t){function e(E){if(!E)throw Error("assert :P")}function r(E,L,D){for(var I=0;4>I;I++)if(E[L+I]!=D.charCodeAt(I))return!0;return!1}function n(E,L,D,I,U){for(var T=0;T<U;T++)E[L+T]=D[I+T]}function s(E,L,D,I){for(var U=0;U<I;U++)E[L+U]=D}function i(E){return new Int32Array(E)}function a(E,L){for(var D=[],I=0;I<E;I++)D.push(new L);return D}function o(E,L){var D=[];return function I(U,T,ee){for(var le=ee[T],re=0;re<le&&(U.push(ee.length>T+1?[]:new L),!(ee.length<T+1));re++)I(U[re],T+1,ee)}(D,0,E),D}var l=function(){var E=this;function L(d,g){for(var x=1<<g-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function D(d,g,x,S,V){e(!(S%x));do d[g+(S-=x)]=V;while(0<S)}function I(d,g,x,S,V){if(e(2328>=V),512>=V)var K=i(512);else if((K=i(V))==null)return 0;return function(q,Y,Z,se,pe,Ne){var Ie,Be,qe=Y,De=1<<Z,me=i(16),ve=i(16);for(e(pe!=0),e(se!=null),e(q!=null),e(0<Z),Be=0;Be<pe;++Be){if(15<se[Be])return 0;++me[se[Be]]}if(me[0]==pe)return 0;for(ve[1]=0,Ie=1;15>Ie;++Ie){if(me[Ie]>1<<Ie)return 0;ve[Ie+1]=ve[Ie]+me[Ie]}for(Be=0;Be<pe;++Be)Ie=se[Be],0<se[Be]&&(Ne[ve[Ie]++]=Be);if(ve[15]==1)return(se=new U).g=0,se.value=Ne[0],D(q,qe,1,De,se),De;var Ve,Xe=-1,Ke=De-1,wt=0,lt=1,Lt=1,ft=1<<Z;for(Be=0,Ie=1,pe=2;Ie<=Z;++Ie,pe<<=1){if(lt+=Lt<<=1,0>(Lt-=me[Ie]))return 0;for(;0<me[Ie];--me[Ie])(se=new U).g=Ie,se.value=Ne[Be++],D(q,qe+wt,pe,ft,se),wt=L(wt,Ie)}for(Ie=Z+1,pe=2;15>=Ie;++Ie,pe<<=1){if(lt+=Lt<<=1,0>(Lt-=me[Ie]))return 0;for(;0<me[Ie];--me[Ie]){if(se=new U,(wt&Ke)!=Xe){for(qe+=ft,Ve=1<<(Xe=Ie)-Z;15>Xe&&!(0>=(Ve-=me[Xe]));)++Xe,Ve<<=1;De+=ft=1<<(Ve=Xe-Z),q[Y+(Xe=wt&Ke)].g=Ve+Z,q[Y+Xe].value=qe-Y-Xe}se.g=Ie-Z,se.value=Ne[Be++],D(q,qe+(wt>>Z),pe,ft,se),wt=L(wt,Ie)}}return lt!=2*ve[15]-1?0:De}(d,g,x,S,V,K)}function U(){this.value=this.g=0}function T(){this.value=this.g=0}function ee(){this.G=a(5,U),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Xn,T)}function le(d,g,x,S){e(d!=null),e(g!=null),e(2147483648>S),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=x,d.Jd=g,d.Yc=x+S,d.Zc=4<=S?x+S-4+1:x,ne(d)}function re(d,g){for(var x=0;0<g--;)x|=de(d,128)<<g;return x}function ue(d,g){var x=re(d,g);return X(d)?-x:x}function W(d,g,x,S){var V,K=0;for(e(d!=null),e(g!=null),e(4294967288>S),d.Sb=S,d.Ra=0,d.u=0,d.h=0,4<S&&(S=4),V=0;V<S;++V)K+=g[x+V]<<8*V;d.Ra=K,d.bb=S,d.oa=g,d.pa=x}function ce(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<cu-8>>>0,++d.bb,d.u-=8;z(d)&&(d.h=1,d.u=0)}function ie(d,g){if(e(0<=g),!d.h&&g<=lu){var x=k(d)&Au[g];return d.u+=g,ce(d),x}return d.h=1,d.u=0}function Ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function k(d){return d.Ra>>>(d.u&cu-1)>>>0}function z(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>cu}function te(d,g){d.u=g,d.h=z(d)}function $(d){d.u>=Ah&&(e(d.u>=Ah),ce(d))}function ne(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function X(d){return re(d,1)}function de(d,g){var x=d.Ca;0>d.b&&ne(d);var S=d.b,V=x*g>>>8,K=(d.I>>>S>V)+0;for(K?(x-=V,d.I-=V+1<<S>>>0):x=V+1,S=x,V=0;256<=S;)V+=8,S>>=8;return S=7^V+Rs[S],d.b-=S,d.Ca=(x<<S)-1,K}function ge(d,g,x){d[g+0]=x>>24&255,d[g+1]=x>>16&255,d[g+2]=x>>8&255,d[g+3]=x>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function Ue(d,g){return Ce(d,g)|d[g+2]<<16}function Te(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function ae(d,g){var x=1<<g;return e(d!=null),e(0<g),d.X=i(x),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function oe(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),n(g.X,0,d.X,0,1<<g.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Me(d,g,x,S){e(x!=null),e(S!=null);var V=x[0],K=S[0];return V==0&&(V=(d*K+g/2)/g),K==0&&(K=(g*V+d/2)/d),0>=V||0>=K?0:(x[0]=V,S[0]=K,1)}function ke(d,g){return d+(1<<g)-1>>>g}function Qe(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function je(d,g){E[g]=function(x,S,V,K,q,Y,Z){var se;for(se=0;se<q;++se){var pe=E[d](Y[Z+se-1],V,K+se);Y[Z+se]=Qe(x[S+se],pe)}}}function We(){this.ud=this.hd=this.jd=0}function ze(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function nt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function xe(d,g){return nt(d+(d-g+.5>>1))}function Ge(d,g,x){return Math.abs(g-x)-Math.abs(d-x)}function $e(d,g,x,S,V,K,q){for(S=K[q-1],x=0;x<V;++x)K[q+x]=S=Qe(d[g+x],S)}function tt(d,g,x,S,V){var K;for(K=0;K<x;++K){var q=d[g+K],Y=q>>8&255,Z=16711935&(Z=(Z=16711935&q)+((Y<<16)+Y));S[V+K]=(4278255360&q)+Z>>>0}}function ct(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function At(d,g,x,S,V,K){var q;for(q=0;q<S;++q){var Y=g[x+q],Z=Y>>>8,se=Y,pe=255&(pe=(pe=Y>>>16)+((d.jd<<24>>24)*(Z<<24>>24)>>>5));se=255&(se=(se=se+((d.hd<<24>>24)*(Z<<24>>24)>>>5))+((d.ud<<24>>24)*(pe<<24>>24)>>>5)),V[K+q]=(4278255360&Y)+(pe<<16)+se}}function he(d,g,x,S,V){E[g]=function(K,q,Y,Z,se,pe,Ne,Ie,Be){for(Z=Ne;Z<Ie;++Z)for(Ne=0;Ne<Be;++Ne)se[pe++]=V(Y[S(K[q++])])},E[d]=function(K,q,Y,Z,se,pe,Ne){var Ie=8>>K.b,Be=K.Ea,qe=K.K[0],De=K.w;if(8>Ie)for(K=(1<<K.b)-1,De=(1<<Ie)-1;q<Y;++q){var me,ve=0;for(me=0;me<Be;++me)me&K||(ve=S(Z[se++])),pe[Ne++]=V(qe[ve&De]),ve>>=Ie}else E["VP8LMapColor"+x](Z,se,qe,De,pe,Ne,q,Y,Be)}}function _e(d,g,x,S,V){for(x=g+x;g<x;){var K=d[g++];S[V++]=K>>16&255,S[V++]=K>>8&255,S[V++]=K>>0&255}}function at(d,g,x,S,V){for(x=g+x;g<x;){var K=d[g++];S[V++]=K>>16&255,S[V++]=K>>8&255,S[V++]=K>>0&255,S[V++]=K>>24&255}}function xt(d,g,x,S,V){for(x=g+x;g<x;){var K=(q=d[g++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;S[V++]=K,S[V++]=q}}function or(d,g,x,S,V){for(x=g+x;g<x;){var K=(q=d[g++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;S[V++]=K,S[V++]=q}}function Kt(d,g,x,S,V){for(x=g+x;g<x;){var K=d[g++];S[V++]=K>>0&255,S[V++]=K>>8&255,S[V++]=K>>16&255}}function kt(d,g,x,S,V,K){if(K==0)for(x=g+x;g<x;)ge(S,((K=d[g++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else n(S,V,d,g,x)}function un(d,g){E[g][0]=E[d+"0"],E[g][1]=E[d+"1"],E[g][2]=E[d+"2"],E[g][3]=E[d+"3"],E[g][4]=E[d+"4"],E[g][5]=E[d+"5"],E[g][6]=E[d+"6"],E[g][7]=E[d+"7"],E[g][8]=E[d+"8"],E[g][9]=E[d+"9"],E[g][10]=E[d+"10"],E[g][11]=E[d+"11"],E[g][12]=E[d+"12"],E[g][13]=E[d+"13"],E[g][14]=E[d+"0"],E[g][15]=E[d+"0"]}function Vt(d){return d==xw||d==bw||d==sm||d==Bw}function ls(){this.eb=[],this.size=this.A=this.fb=0}function Ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function mr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ls,this.f.kb=new Ar,this.sd=null}function dn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ut(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Xt(d,g){var x=d.T,S=g.ba.f.RGBA,V=S.eb,K=S.fb+d.ka*S.A,q=Bi[g.ba.S],Y=d.y,Z=d.O,se=d.f,pe=d.N,Ne=d.ea,Ie=d.W,Be=g.cc,qe=g.dc,De=g.Mc,me=g.Nc,ve=d.ka,Ve=d.ka+d.T,Xe=d.U,Ke=Xe+1>>1;for(ve==0?q(Y,Z,null,null,se,pe,Ne,Ie,se,pe,Ne,Ie,V,K,null,null,Xe):(q(g.ec,g.fc,Y,Z,Be,qe,De,me,se,pe,Ne,Ie,V,K-S.A,V,K,Xe),++x);ve+2<Ve;ve+=2)Be=se,qe=pe,De=Ne,me=Ie,pe+=d.Rc,Ie+=d.Rc,K+=2*S.A,q(Y,(Z+=2*d.fa)-d.fa,Y,Z,Be,qe,De,me,se,pe,Ne,Ie,V,K-S.A,V,K,Xe);return Z+=d.fa,d.j+Ve<d.o?(n(g.ec,g.fc,Y,Z,Xe),n(g.cc,g.dc,se,pe,Ke),n(g.Mc,g.Nc,Ne,Ie,Ke),x--):1&Ve||q(Y,Z,null,null,se,pe,Ne,Ie,se,pe,Ne,Ie,V,K+S.A,null,null,Xe),x}function cs(d,g,x){var S=d.F,V=[d.J];if(S!=null){var K=d.U,q=g.ba.S,Y=q==nm||q==sm;g=g.ba.f.RGBA;var Z=[0],se=d.ka;Z[0]=d.T,d.Kb&&(se==0?--Z[0]:(--se,V[0]-=d.width),d.j+d.ka+d.T==d.o&&(Z[0]=d.o-d.j-se));var pe=g.eb;se=g.fb+se*g.A,d=Lr(S,V[0],d.width,K,Z,pe,se+(Y?0:3),g.A),e(x==Z),d&&Vt(q)&&xi(pe,se,Y,K,Z,g.A)}return 0}function Gr(d){var g=d.ma,x=g.ba.S,S=11>x,V=x==tm||x==rm||x==nm||x==yw||x==12||Vt(x);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!ah(g.Oa,d,V?11:12))return 0;if(V&&Vt(x)&&Je(),d.da)alert("todo:use_scaling");else{if(S){if(g.Ib=Ut,d.Kb){if(x=d.U+1>>1,g.memory=i(d.U+2*x),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+x,g.Ib=Xt,Je()}}else alert("todo:EmitYUV");V&&(g.Jb=cs,S&&ye())}if(S&&!LB){for(d=0;256>d;++d)iP[d]=89858*(d-128)+am>>im,AP[d]=-22014*(d-128)+am,oP[d]=-45773*(d-128),aP[d]=113618*(d-128)+am>>im;for(d=ph;d<_w;++d)g=76283*(d-16)+am>>im,lP[d-ph]=wr(g,255),cP[d-ph]=wr(g+8>>4,15);LB=1}return 1}function fr(d){var g=d.ma,x=d.U,S=d.T;return e(!(1&d.ka)),0>=x||0>=S?0:(x=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,x),g.Dc+=x,1)}function Pe(d){d.ma.memory=null}function He(d,g,x,S){return ie(d,8)!=47?0:(g[0]=ie(d,14)+1,x[0]=ie(d,14)+1,S[0]=ie(d,1),ie(d,3)!=0?0:!d.h)}function Nt(d,g){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+ie(g,x)+1}function mt(d,g){return 120<g?g-120:1<=(x=((x=q3[g-1])>>4)*d+(8-(15&x)))?x:1;var x}function ht(d,g,x){var S=k(x),V=d[g+=255&S].g-8;return 0<V&&(te(x,x.u+8),S=k(x),g+=d[g].value,g+=S&(1<<V)-1),te(x,x.u+d[g].g),d[g].value}function St(d,g,x){return x.g+=d.g,x.value+=d.value<<g>>>0,e(8>=x.g),d.g}function ot(d,g,x){var S=d.xc;return e((g=S==0?0:d.vc[d.md*(x>>S)+(g>>S)])<d.Wb),d.Ya[g]}function Et(d,g,x,S){var V=d.ab,K=d.c*g,q=d.C;g=q+g;var Y=x,Z=S;for(S=d.Ta,x=d.Ua;0<V--;){var se=d.gc[V],pe=q,Ne=g,Ie=Y,Be=Z,qe=(Z=S,Y=x,se.Ea);switch(e(pe<Ne),e(Ne<=se.nc),se.hc){case 2:$p(Ie,Be,(Ne-pe)*qe,Z,Y);break;case 0:var De=pe,me=Ne,ve=Z,Ve=Y,Xe=(ft=se).Ea;De==0&&(vw(Ie,Be,null,null,1,ve,Ve),$e(Ie,Be+1,0,0,Xe-1,ve,Ve+1),Be+=Xe,Ve+=Xe,++De);for(var Ke=1<<ft.b,wt=Ke-1,lt=ke(Xe,ft.b),Lt=ft.K,ft=ft.w+(De>>ft.b)*lt;De<me;){var pr=Lt,br=ft,ur=1;for(lh(Ie,Be,ve,Ve-Xe,1,ve,Ve);ur<Xe;){var nr=(ur&~wt)+Ke;nr>Xe&&(nr=Xe),(0,uA[pr[br++]>>8&15])(Ie,Be+ +ur,ve,Ve+ur-Xe,nr-ur,ve,Ve+ur),ur=nr}Be+=Xe,Ve+=Xe,++De&wt||(ft+=lt)}Ne!=se.nc&&n(Z,Y-qe,Z,Y+(Ne-pe-1)*qe,qe);break;case 1:for(qe=Ie,me=Be,Xe=(Ie=se.Ea)-(Ve=Ie&~(ve=(Be=1<<se.b)-1)),De=ke(Ie,se.b),Ke=se.K,se=se.w+(pe>>se.b)*De;pe<Ne;){for(wt=Ke,lt=se,Lt=new We,ft=me+Ve,pr=me+Ie;me<ft;)ct(wt[lt++],Lt),ql(Lt,qe,me,Be,Z,Y),me+=Be,Y+=Be;me<pr&&(ct(wt[lt++],Lt),ql(Lt,qe,me,Xe,Z,Y),me+=Xe,Y+=Xe),++pe&ve||(se+=De)}break;case 3:if(Ie==Z&&Be==Y&&0<se.b){for(me=Z,Ie=qe=Y+(Ne-pe)*qe-(Ve=(Ne-pe)*ke(se.Ea,se.b)),Be=Z,ve=Y,De=[],Ve=(Xe=Ve)-1;0<=Ve;--Ve)De[Ve]=Be[ve+Ve];for(Ve=Xe-1;0<=Ve;--Ve)me[Ie+Ve]=De[Ve];vi(se,pe,Ne,Z,qe,Z,Y)}else vi(se,pe,Ne,Ie,Be,Z,Y)}Y=S,Z=x}Z!=x&&n(S,x,Y,Z,K)}function be(d,g){var x=d.V,S=d.Ba+d.c*d.C,V=g-d.C;if(e(g<=d.l.o),e(16>=V),0<V){var K=d.l,q=d.Ta,Y=d.Ua,Z=K.width;if(Et(d,V,x,S),V=Y=[Y],e((x=d.C)<(S=g)),e(K.v<K.va),S>K.o&&(S=K.o),x<K.j){var se=K.j-x;x=K.j,V[0]+=se*Z}if(x>=S?x=0:(V[0]+=4*K.v,K.ka=x-K.j,K.U=K.va-K.v,K.T=S-x,x=1),x){if(Y=Y[0],11>(x=d.ca).S){var pe=x.f.RGBA,Ne=(S=x.S,V=K.U,K=K.T,se=pe.eb,pe.A),Ie=K;for(pe=pe.fb+d.Ma*pe.A;0<Ie--;){var Be=q,qe=Y,De=V,me=se,ve=pe;switch(S){case em:Ms(Be,qe,De,me,ve);break;case tm:_s(Be,qe,De,me,ve);break;case xw:_s(Be,qe,De,me,ve),xi(me,ve,0,De,1,0);break;case _B:ao(Be,qe,De,me,ve);break;case rm:kt(Be,qe,De,me,ve,1);break;case bw:kt(Be,qe,De,me,ve,1),xi(me,ve,0,De,1,0);break;case nm:kt(Be,qe,De,me,ve,0);break;case sm:kt(Be,qe,De,me,ve,0),xi(me,ve,1,De,1,0);break;case yw:dA(Be,qe,De,me,ve);break;case Bw:dA(Be,qe,De,me,ve),Qr(me,ve,De,1,0);break;case NB:io(Be,qe,De,me,ve);break;default:e(0)}Y+=Z,pe+=Ne}d.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=g,e(d.C<=d.i)}function rt(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var x=d.Ya[g].G,S=d.Ya[g].H;if(0<x[1][S[1]+0].g||0<x[2][S[2]+0].g||0<x[3][S[3]+0].g)return 0}return 1}function st(d,g,x,S,V,K){if(d.Z!=0){var q=d.qd,Y=d.rd;for(e(mA[d.Z]!=null);g<x;++g)mA[d.Z](q,Y,S,V,S,V,K),q=S,Y=V,V+=K;d.qd=q,d.rd=Y}}function Dt(d,g){var x=d.l.ma,S=x.Z==0||x.Z==1?d.l.j:d.C;if(S=d.C<S?S:d.C,e(g<=d.l.o),g>S){var V=d.l.width,K=x.ca,q=x.tb+V*S,Y=d.V,Z=d.Ba+d.c*S,se=d.gc;e(d.ab==1),e(se[0].hc==3),Wp(se[0],S,g,Y,Z,K,q),st(x,S,g,K,q,V)}d.C=d.Ma=g}function Jt(d,g,x,S,V,K,q){var Y=d.$/S,Z=d.$%S,se=d.m,pe=d.s,Ne=x+d.$,Ie=Ne;V=x+S*V;var Be=x+S*K,qe=280+pe.ua,De=d.Pb?Y:16777216,me=0<pe.ua?pe.Wa:null,ve=pe.wc,Ve=Ne<Be?ot(pe,Z,Y):null;e(d.C<K),e(Be<=V);var Xe=!1;e:for(;;){for(;Xe||Ne<Be;){var Ke=0;if(Y>=De){var wt=Ne-x;e((De=d).Pb),De.wd=De.m,De.xd=wt,0<De.s.ua&&oe(De.s.Wa,De.s.vb),De=Y+z3}if(Z&ve||(Ve=ot(pe,Z,Y)),e(Ve!=null),Ve.Qb&&(g[Ne]=Ve.qb,Xe=!0),!Xe)if($(se),Ve.jc){Ke=se,wt=g;var lt=Ne,Lt=Ve.pd[k(Ke)&Xn-1];e(Ve.jc),256>Lt.g?(te(Ke,Ke.u+Lt.g),wt[lt]=Lt.value,Ke=0):(te(Ke,Ke.u+Lt.g-256),e(256<=Lt.value),Ke=Lt.value),Ke==0&&(Xe=!0)}else Ke=ht(Ve.G[0],Ve.H[0],se);if(se.h)break;if(Xe||256>Ke){if(!Xe)if(Ve.nd)g[Ne]=(Ve.qb|Ke<<8)>>>0;else{if($(se),Xe=ht(Ve.G[1],Ve.H[1],se),$(se),wt=ht(Ve.G[2],Ve.H[2],se),lt=ht(Ve.G[3],Ve.H[3],se),se.h)break;g[Ne]=(lt<<24|Xe<<16|Ke<<8|wt)>>>0}if(Xe=!1,++Ne,++Z>=S&&(Z=0,++Y,q!=null&&Y<=K&&!(Y%16)&&q(d,Y),me!=null))for(;Ie<Ne;)Ke=g[Ie++],me.X[(506832829*Ke&4294967295)>>>me.Mb]=Ke}else if(280>Ke){if(Ke=Nt(Ke-256,se),wt=ht(Ve.G[4],Ve.H[4],se),$(se),wt=mt(S,wt=Nt(wt,se)),se.h)break;if(Ne-x<wt||V-Ne<Ke)break e;for(lt=0;lt<Ke;++lt)g[Ne+lt]=g[Ne+lt-wt];for(Ne+=Ke,Z+=Ke;Z>=S;)Z-=S,++Y,q!=null&&Y<=K&&!(Y%16)&&q(d,Y);if(e(Ne<=V),Z&ve&&(Ve=ot(pe,Z,Y)),me!=null)for(;Ie<Ne;)Ke=g[Ie++],me.X[(506832829*Ke&4294967295)>>>me.Mb]=Ke}else{if(!(Ke<qe))break e;for(Xe=Ke-280,e(me!=null);Ie<Ne;)Ke=g[Ie++],me.X[(506832829*Ke&4294967295)>>>me.Mb]=Ke;Ke=Ne,e(!(Xe>>>(wt=me).Xa)),g[Ke]=wt.X[Xe],Xe=!0}Xe||e(se.h==z(se))}if(d.Pb&&se.h&&Ne<V)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&oe(d.s.vb,d.s.Wa);else{if(se.h)break e;q!=null&&q(d,Y>K?K:Y),d.a=0,d.$=Ne-x}return 1}return d.a=3,0}function _t(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function vt(){var d=new au;return d==null?null:(d.a=0,d.xb=FB,un("Predictor","VP8LPredictors"),un("Predictor","VP8LPredictors_C"),un("PredictorAdd","VP8LPredictorsAdd"),un("PredictorAdd","VP8LPredictorsAdd_C"),$p=tt,ql=At,Ms=_e,_s=at,dA=xt,io=or,ao=Kt,E.VP8LMapColor32b=uu,E.VP8LMapColor8b=Xp,d)}function Cs(d,g,x,S,V){var K=1,q=[d],Y=[g],Z=S.m,se=S.s,pe=null,Ne=0;e:for(;;){if(x)for(;K&&ie(Z,1);){var Ie=q,Be=Y,qe=S,De=1,me=qe.m,ve=qe.gc[qe.ab],Ve=ie(me,2);if(qe.Oc&1<<Ve)K=0;else{switch(qe.Oc|=1<<Ve,ve.hc=Ve,ve.Ea=Ie[0],ve.nc=Be[0],ve.K=[null],++qe.ab,e(4>=qe.ab),Ve){case 0:case 1:ve.b=ie(me,3)+2,De=Cs(ke(ve.Ea,ve.b),ke(ve.nc,ve.b),0,qe,ve.K),ve.K=ve.K[0];break;case 3:var Xe,Ke=ie(me,8)+1,wt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Ie[0]=ke(ve.Ea,wt),ve.b=wt,Xe=De=Cs(Ke,1,0,qe,ve.K)){var lt,Lt=Ke,ft=ve,pr=1<<(8>>ft.b),br=i(pr);if(br==null)Xe=0;else{var ur=ft.K[0],nr=ft.w;for(br[0]=ft.K[0][0],lt=1;lt<1*Lt;++lt)br[lt]=Qe(ur[nr+lt],br[lt-1]);for(;lt<4*pr;++lt)br[lt]=0;ft.K[0]=null,ft.K[0]=br,Xe=1}}De=Xe;break;case 2:break;default:e(0)}K=De}}if(q=q[0],Y=Y[0],K&&ie(Z,1)&&!(K=1<=(Ne=ie(Z,4))&&11>=Ne)){S.a=3;break e}var Ur;if(Ur=K)t:{var Ir,Wt,Bn,Os=S,Cn=q,Hs=Y,Br=Ne,ri=x,ni=Os.m,kn=Os.s,Jn=[null],Is=1,Ci=0,Ia=G3[Br];r:for(;;){if(ri&&ie(ni,1)){var Dn=ie(ni,3)+2,co=ke(Cn,Dn),Xl=ke(Hs,Dn),mu=co*Xl;if(!Cs(co,Xl,0,Os,Jn))break r;for(Jn=Jn[0],kn.xc=Dn,Ir=0;Ir<mu;++Ir){var gA=Jn[Ir]>>8&65535;Jn[Ir]=gA,gA>=Is&&(Is=gA+1)}}if(ni.h)break r;for(Wt=0;5>Wt;++Wt){var on=IB[Wt];!Wt&&0<Br&&(on+=1<<Br),Ci<on&&(Ci=on)}var Nw=a(Is*Ia,U),DB=Is,RB=a(DB,ee);if(RB==null)var Am=null;else e(65536>=DB),Am=RB;var mh=i(Ci);if(Am==null||mh==null||Nw==null){Os.a=1;break r}var lm=Nw;for(Ir=Bn=0;Ir<Is;++Ir){var $i=Am[Ir],gu=$i.G,vu=$i.H,MB=0,cm=1,OB=0;for(Wt=0;5>Wt;++Wt){on=IB[Wt],gu[Wt]=lm,vu[Wt]=Bn,!Wt&&0<Br&&(on+=1<<Br);s:{var um,Iw=on,dm=Os,gh=mh,hP=lm,fP=Bn,Sw=0,vA=dm.m,pP=ie(vA,1);if(s(gh,0,0,Iw),pP){var mP=ie(vA,1)+1,gP=ie(vA,1),HB=ie(vA,gP==0?1:8);gh[HB]=1,mP==2&&(gh[HB=ie(vA,8)]=1);var hm=1}else{var VB=i(19),KB=ie(vA,4)+4;if(19<KB){dm.a=3;var fm=0;break s}for(um=0;um<KB;++um)VB[K3[um]]=ie(vA,3);var Fw=void 0,vh=void 0,qB=dm,vP=VB,pm=Iw,GB=gh,Tw=0,wA=qB.m,zB=8,$B=a(128,U);n:for(;I($B,0,7,vP,19);){if(ie(wA,1)){var wP=2+2*ie(wA,3);if((Fw=2+ie(wA,wP))>pm)break n}else Fw=pm;for(vh=0;vh<pm&&Fw--;){$(wA);var WB=$B[0+(127&k(wA))];te(wA,wA.u+WB.g);var wu=WB.value;if(16>wu)GB[vh++]=wu,wu!=0&&(zB=wu);else{var yP=wu==16,XB=wu-16,xP=H3[XB],JB=ie(wA,O3[XB])+xP;if(vh+JB>pm)break n;for(var bP=yP?zB:0;0<JB--;)GB[vh++]=bP}}Tw=1;break n}Tw||(qB.a=3),hm=Tw}(hm=hm&&!vA.h)&&(Sw=I(hP,fP,8,gh,Iw)),hm&&Sw!=0?fm=Sw:(dm.a=3,fm=0)}if(fm==0)break r;if(cm&&V3[Wt]==1&&(cm=lm[Bn].g==0),MB+=lm[Bn].g,Bn+=fm,3>=Wt){var wh,Uw=mh[0];for(wh=1;wh<on;++wh)mh[wh]>Uw&&(Uw=mh[wh]);OB+=Uw}}if($i.nd=cm,$i.Qb=0,cm&&($i.qb=(gu[3][vu[3]+0].value<<24|gu[1][vu[1]+0].value<<16|gu[2][vu[2]+0].value)>>>0,MB==0&&256>gu[0][vu[0]+0].value&&($i.Qb=1,$i.qb+=gu[0][vu[0]+0].value<<8)),$i.jc=!$i.Qb&&6>OB,$i.jc){var mm,uo=$i;for(mm=0;mm<Xn;++mm){var yA=mm,xA=uo.pd[yA],gm=uo.G[0][uo.H[0]+yA];256<=gm.value?(xA.g=gm.g+256,xA.value=gm.value):(xA.g=0,xA.value=0,yA>>=St(gm,8,xA),yA>>=St(uo.G[1][uo.H[1]+yA],16,xA),yA>>=St(uo.G[2][uo.H[2]+yA],0,xA),St(uo.G[3][uo.H[3]+yA],24,xA))}}}kn.vc=Jn,kn.Wb=Is,kn.Ya=Am,kn.yc=Nw,Ur=1;break t}Ur=0}if(!(K=Ur)){S.a=3;break e}if(0<Ne){if(se.ua=1<<Ne,!ae(se.Wa,Ne)){S.a=1,K=0;break e}}else se.ua=0;var Pw=S,YB=q,BP=Y,Qw=Pw.s,Lw=Qw.xc;if(Pw.c=YB,Pw.i=BP,Qw.md=ke(YB,Lw),Qw.wc=Lw==0?-1:(1<<Lw)-1,x){S.xb=eP;break e}if((pe=i(q*Y))==null){S.a=1,K=0;break e}K=(K=Jt(S,pe,0,q,Y,Y,null))&&!Z.h;break e}return K?(V!=null?V[0]=pe:(e(pe==null),e(x)),S.$=0,x||_t(se)):_t(se),K}function ma(d,g){var x=d.c*d.i,S=x+g+16*g;return e(d.c<=g),d.V=i(S),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+g,1)}function ga(d,g){var x=d.C,S=g-x,V=d.V,K=d.Ba+d.c*x;for(e(g<=d.l.o);0<S;){var q=16<S?16:S,Y=d.l.ma,Z=d.l.width,se=Z*q,pe=Y.ca,Ne=Y.tb+Z*x,Ie=d.Ta,Be=d.Ua;Et(d,q,V,K),fn(Ie,Be,pe,Ne,se),st(Y,x,x+q,pe,Ne,Z),S-=q,V+=q*d.c,x+=q}e(x==g),d.C=d.Ma=g}function va(){this.ub=this.yd=this.td=this.Rb=0}function $a(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wa(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Xc(){this.Yb=function(){var d=[];return function g(x,S,V){for(var K=V[S],q=0;q<K&&(x.push(V.length>S+1?[]:0),!(V.length<S+1));q++)g(x[q],S+1,V)}(d,0,[3,11]),d}()}function $o(){this.jb=i(3),this.Wc=o([4,8],Xc),this.Xc=o([4,17],Xc)}function Jc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function wa(){this.ld=this.La=this.dd=this.tc=0}function ya(){this.Na=this.la=0}function Ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xa(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rh(){this.uc=this.M=this.Nb=0,this.wa=Array(new wa),this.Y=0,this.ya=Array(new Xa),this.aa=0,this.l=new Ja}function Tl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Yc(){this.cb=this.a=0,this.sc="",this.m=new Ee,this.Od=new va,this.Kc=new $a,this.ed=new Jc,this.Qa=new Wa,this.Ic=this.$c=this.Aa=0,this.D=new rh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Ee),this.ia=0,this.pb=a(4,Ri),this.Pa=new $o,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tl),this.Hd=0,this.rb=Array(new ya),this.sb=0,this.wa=Array(new wa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xa),this.L=this.aa=0,this.gd=o([4,2],wa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ja(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ul(){var d=new Yc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,fh||(fh=Zc)),d}function Rr(d,g,x){return d.a==0&&(d.a=g,d.sc=x,d.cb=0),0}function Pl(d,g,x){return 3<=x&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function Ql(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Rr(d,2,"null VP8Io passed to VP8GetHeaders()");var x=g.data,S=g.w,V=g.ha;if(4>V)return Rr(d,7,"Truncated header.");var K=x[S+0]|x[S+1]<<8|x[S+2]<<16,q=d.Od;if(q.Rb=!(1&K),q.td=K>>1&7,q.yd=K>>4&1,q.ub=K>>5,3<q.td)return Rr(d,3,"Incorrect keyframe parameters.");if(!q.yd)return Rr(d,4,"Frame not displayable.");S+=3,V-=3;var Y=d.Kc;if(q.Rb){if(7>V)return Rr(d,7,"cannot parse picture header");if(!Pl(x,S,V))return Rr(d,3,"Bad code word");Y.c=16383&(x[S+4]<<8|x[S+3]),Y.Td=x[S+4]>>6,Y.i=16383&(x[S+6]<<8|x[S+5]),Y.Ud=x[S+6]>>6,S+=7,V-=7,d.za=Y.c+15>>4,d.Ub=Y.i+15>>4,g.width=Y.c,g.height=Y.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,s((K=d.Pa).jb,0,255,K.jb.length),e((K=d.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,s(K.Zb,0,0,K.Zb.length),s(K.Lb,0,0,K.Lb)}if(q.ub>V)return Rr(d,7,"bad partition length");le(K=d.m,x,S,q.ub),S+=q.ub,V-=q.ub,q.Rb&&(Y.Ld=X(K),Y.Kd=X(K)),Y=d.Qa;var Z,se=d.Pa;if(e(K!=null),e(Y!=null),Y.Cb=X(K),Y.Cb){if(Y.Bb=X(K),X(K)){for(Y.Fb=X(K),Z=0;4>Z;++Z)Y.Zb[Z]=X(K)?ue(K,7):0;for(Z=0;4>Z;++Z)Y.Lb[Z]=X(K)?ue(K,6):0}if(Y.Bb)for(Z=0;3>Z;++Z)se.jb[Z]=X(K)?re(K,8):255}else Y.Bb=0;if(K.Ka)return Rr(d,3,"cannot parse segment header");if((Y=d.ed).zd=X(K),Y.Tb=re(K,6),Y.wb=re(K,3),Y.Pc=X(K),Y.Pc&&X(K)){for(se=0;4>se;++se)X(K)&&(Y.vd[se]=ue(K,6));for(se=0;4>se;++se)X(K)&&(Y.od[se]=ue(K,6))}if(d.L=Y.Tb==0?0:Y.zd?1:2,K.Ka)return Rr(d,3,"cannot parse filter header");var pe=V;if(V=Z=S,S=Z+pe,Y=pe,d.Xb=(1<<re(d.m,2))-1,pe<3*(se=d.Xb))x=7;else{for(Z+=3*se,Y-=3*se,pe=0;pe<se;++pe){var Ne=x[V+0]|x[V+1]<<8|x[V+2]<<16;Ne>Y&&(Ne=Y),le(d.Jc[+pe],x,Z,Ne),Z+=Ne,Y-=Ne,V+=3}le(d.Jc[+se],x,Z,Y),x=Z<S?0:5}if(x!=0)return Rr(d,x,"cannot parse partitions");for(x=re(Z=d.m,7),V=X(Z)?ue(Z,4):0,S=X(Z)?ue(Z,4):0,Y=X(Z)?ue(Z,4):0,se=X(Z)?ue(Z,4):0,Z=X(Z)?ue(Z,4):0,pe=d.Qa,Ne=0;4>Ne;++Ne){if(pe.Cb){var Ie=pe.Zb[Ne];pe.Fb||(Ie+=x)}else{if(0<Ne){d.pb[Ne]=d.pb[0];continue}Ie=x}var Be=d.pb[Ne];Be.Sc[0]=Cw[wr(Ie+V,127)],Be.Sc[1]=Ew[wr(Ie+0,127)],Be.Eb[0]=2*Cw[wr(Ie+S,127)],Be.Eb[1]=101581*Ew[wr(Ie+Y,127)]>>16,8>Be.Eb[1]&&(Be.Eb[1]=8),Be.Qc[0]=Cw[wr(Ie+se,117)],Be.Qc[1]=Ew[wr(Ie+Z,127)],Be.lc=Ie+Z}if(!q.Rb)return Rr(d,4,"Not a key frame.");for(X(K),q=d.Pa,x=0;4>x;++x){for(V=0;8>V;++V)for(S=0;3>S;++S)for(Y=0;11>Y;++Y)se=de(K,Y3[x][V][S][Y])?re(K,8):X3[x][V][S][Y],q.Wc[x][V].Yb[S][Y]=se;for(V=0;17>V;++V)q.Xc[x][V]=q.Wc[x][Z3[V]]}return d.kc=X(K),d.kc&&(d.Bd=re(K,8)),d.cb=1}function Zc(d,g,x,S,V,K,q){var Y=g[V].Yb[x];for(x=0;16>V;++V){if(!de(d,Y[x+0]))return V;for(;!de(d,Y[x+1]);)if(Y=g[++V].Yb[0],x=0,V==16)return 16;var Z=g[V+1].Yb;if(de(d,Y[x+2])){var se=d,pe=0;if(de(se,(Ie=Y)[(Ne=x)+3]))if(de(se,Ie[Ne+6])){for(Y=0,Ne=2*(pe=de(se,Ie[Ne+8]))+(Ie=de(se,Ie[Ne+9+pe])),pe=0,Ie=$3[Ne];Ie[Y];++Y)pe+=pe+de(se,Ie[Y]);pe+=3+(8<<Ne)}else de(se,Ie[Ne+7])?(pe=7+2*de(se,165),pe+=de(se,145)):pe=5+de(se,159);else pe=de(se,Ie[Ne+4])?3+de(se,Ie[Ne+5]):2;Y=Z[2]}else pe=1,Y=Z[1];Z=q+W3[V],0>(se=d).b&&ne(se);var Ne,Ie=se.b,Be=(Ne=se.Ca>>1)-(se.I>>Ie)>>31;--se.b,se.Ca+=Be,se.Ca|=1,se.I-=(Ne+1&Be)<<Ie,K[Z]=((pe^Be)-Be)*S[(0<V)+0]}return 16}function Ll(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,s(d.zc,0,0,d.zc.length),d.ja=0}function eu(d,g){if(d==null)return 0;if(g==null)return Rr(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Ql(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var x=om[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-x>>4,d.zb=g.j-x>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+x>>4,d.Hb=g.va+15+x>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var S=d.ed;for(x=0;4>x;++x){var V;if(d.Qa.Cb){var K=d.Qa.Lb[x];d.Qa.Fb||(K+=S.Tb)}else K=S.Tb;for(V=0;1>=V;++V){var q=d.gd[x][V],Y=K;if(S.Pc&&(Y+=S.vd[0],V&&(Y+=S.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var Z=Y;0<S.wb&&(Z=4<S.wb?Z>>2:Z>>1)>9-S.wb&&(Z=9-S.wb),1>Z&&(Z=1),q.dd=Z,q.tc=2*Y+Z,q.ld=40<=Y?2:15<=Y?1:0}else q.tc=0;q.La=V}}}x=0}else Rr(d,6,"Frame setup failed"),x=d.a;if(x=x==0){if(x){d.$c=0,0<d.Aa||(d.Ic=dP);e:{x=d.Ic,S=4*(Z=d.za);var se=32*Z,pe=Z+1,Ne=0<d.L?Z*(0<d.Aa?2:1):0,Ie=(d.Aa==2?2:1)*Z;if((q=S+832+(V=3*(16*x+om[d.L])/2*se)+(K=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=q)x=0;else{if(q>d.Vb){if(d.Vb=0,d.Ec=i(q),d.Fc=0,d.Ec==null){x=Rr(d,1,"no memory during frame initialization.");break e}d.Vb=q}q=d.Ec,Y=d.Fc,d.Ac=q,d.Bc=Y,Y+=S,d.Gd=a(se,Tl),d.Hd=0,d.rb=a(pe+1,ya),d.sb=1,d.wa=Ne?a(Ne,wa):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Z),e(!0),d.oc=q,d.pc=Y,Y+=832,d.ya=a(Ie,Xa),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Z),d.R=16*Z,d.B=8*Z,Z=(se=om[d.L])*d.R,se=se/2*d.B,d.sa=q,d.ta=Y+Z,d.qa=d.sa,d.ra=d.ta+16*x*d.R+se,d.Ha=d.qa,d.Ia=d.ra+8*x*d.B+se,d.$c=0,Y+=V,d.mb=K?q:null,d.nb=K?Y:null,e(Y+K<=d.Fc+d.Vb),Ll(d),s(d.Ac,d.Bc,0,S),x=1}}if(x){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Yp){for(x=-255;255>=x;++x)Sn[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)Ao[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)hh[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)pu[255+x]=0>x?0:255<x?255:x;Yp=1}du=eo,oo=Xo,ch=jl,Ns=xr,wi=Za,hn=Ya,hu=nA,Jp=Ki,uh=iA,Gl=Kl,zl=sA,hA=ro,$l=aA,fu=Ca,Wl=to,fA=ei,dh=In,yi=iu,zi[0]=gi,zi[1]=nh,zi[2]=ba,zi[3]=ih,zi[4]=nu,zi[5]=Zo,zi[6]=Ys,zi[7]=Dl,zi[8]=tA,zi[9]=eA,pA[0]=xa,pA[1]=sh,pA[2]=Oi,pA[3]=Jo,pA[4]=Mr,pA[5]=ru,pA[6]=kl,lo[0]=Vi,lo[1]=tu,lo[2]=su,lo[3]=Hi,lo[4]=vr,lo[5]=Rl,lo[6]=Ml,x=1}else x=0}x&&(x=function(Be,qe){for(Be.M=0;Be.M<Be.Va;++Be.M){var De,me=Be.Jc[Be.M&Be.Xb],ve=Be.m,Ve=Be;for(De=0;De<Ve.za;++De){var Xe=ve,Ke=Ve,wt=Ke.Ac,lt=Ke.Bc+4*De,Lt=Ke.zc,ft=Ke.ya[Ke.aa+De];if(Ke.Qa.Bb?ft.$b=de(Xe,Ke.Pa.jb[0])?2+de(Xe,Ke.Pa.jb[2]):de(Xe,Ke.Pa.jb[1]):ft.$b=0,Ke.kc&&(ft.Ad=de(Xe,Ke.Bd)),ft.Za=!de(Xe,145)+0,ft.Za){var pr=ft.Ob,br=0;for(Ke=0;4>Ke;++Ke){var ur,nr=Lt[0+Ke];for(ur=0;4>ur;++ur){nr=J3[wt[lt+ur]][nr];for(var Ur=SB[de(Xe,nr[0])];0<Ur;)Ur=SB[2*Ur+de(Xe,nr[Ur])];nr=-Ur,wt[lt+ur]=nr}n(pr,br,wt,lt,4),br+=4,Lt[0+Ke]=nr}}else nr=de(Xe,156)?de(Xe,128)?1:3:de(Xe,163)?2:0,ft.Ob[0]=nr,s(wt,lt,nr,4),s(Lt,0,nr,4);ft.Dd=de(Xe,142)?de(Xe,114)?de(Xe,183)?1:3:2:0}if(Ve.m.Ka)return Rr(Be,7,"Premature end-of-partition0 encountered.");for(;Be.ja<Be.za;++Be.ja){if(Ve=me,Xe=(ve=Be).rb[ve.sb-1],wt=ve.rb[ve.sb+ve.ja],De=ve.ya[ve.aa+ve.ja],lt=ve.kc?De.Ad:0)Xe.la=wt.la=0,De.Za||(Xe.Na=wt.Na=0),De.Hc=0,De.Gc=0,De.ia=0;else{var Ir,Wt;if(Xe=wt,wt=Ve,lt=ve.Pa.Xc,Lt=ve.ya[ve.aa+ve.ja],ft=ve.pb[Lt.$b],Ke=Lt.ad,pr=0,br=ve.rb[ve.sb-1],nr=ur=0,s(Ke,pr,0,384),Lt.Za)var Bn=0,Os=lt[3];else{Ur=i(16);var Cn=Xe.Na+br.Na;if(Cn=fh(wt,lt[1],Cn,ft.Eb,0,Ur,0),Xe.Na=br.Na=(0<Cn)+0,1<Cn)du(Ur,0,Ke,pr);else{var Hs=Ur[0]+3>>3;for(Ur=0;256>Ur;Ur+=16)Ke[pr+Ur]=Hs}Bn=1,Os=lt[0]}var Br=15&Xe.la,ri=15&br.la;for(Ur=0;4>Ur;++Ur){var ni=1&ri;for(Hs=Wt=0;4>Hs;++Hs)Br=Br>>1|(ni=(Cn=fh(wt,Os,Cn=ni+(1&Br),ft.Sc,Bn,Ke,pr))>Bn)<<7,Wt=Wt<<2|(3<Cn?3:1<Cn?2:Ke[pr+0]!=0),pr+=16;Br>>=4,ri=ri>>1|ni<<7,ur=(ur<<8|Wt)>>>0}for(Os=Br,Bn=ri>>4,Ir=0;4>Ir;Ir+=2){for(Wt=0,Br=Xe.la>>4+Ir,ri=br.la>>4+Ir,Ur=0;2>Ur;++Ur){for(ni=1&ri,Hs=0;2>Hs;++Hs)Cn=ni+(1&Br),Br=Br>>1|(ni=0<(Cn=fh(wt,lt[2],Cn,ft.Qc,0,Ke,pr)))<<3,Wt=Wt<<2|(3<Cn?3:1<Cn?2:Ke[pr+0]!=0),pr+=16;Br>>=2,ri=ri>>1|ni<<5}nr|=Wt<<4*Ir,Os|=Br<<4<<Ir,Bn|=(240&ri)<<Ir}Xe.la=Os,br.la=Bn,Lt.Hc=ur,Lt.Gc=nr,Lt.ia=43690&nr?0:ft.ia,lt=!(ur|nr)}if(0<ve.L&&(ve.wa[ve.Y+ve.ja]=ve.gd[De.$b][De.Za],ve.wa[ve.Y+ve.ja].La|=!lt),Ve.Ka)return Rr(Be,7,"Premature end-of-file encountered.")}if(Ll(Be),ve=qe,Ve=1,De=(me=Be).D,Xe=0<me.L&&me.M>=me.zb&&me.M<=me.Va,me.Aa==0)e:{if(De.M=me.M,De.uc=Xe,_a(me,De),Ve=1,De=(Wt=me.D).Nb,Xe=(nr=om[me.L])*me.R,wt=nr/2*me.B,Ur=16*De*me.R,Hs=8*De*me.B,lt=me.sa,Lt=me.ta-Xe+Ur,ft=me.qa,Ke=me.ra-wt+Hs,pr=me.Ha,br=me.Ia-wt+Hs,ri=(Br=Wt.M)==0,ur=Br>=me.Va-1,me.Aa==2&&_a(me,Wt),Wt.uc)for(ni=(Cn=me).D.M,e(Cn.D.uc),Wt=Cn.yb;Wt<Cn.Hb;++Wt){Bn=Wt,Os=ni;var kn=(Jn=(on=Cn).D).Nb;Ir=on.R;var Jn=Jn.wa[Jn.Y+Bn],Is=on.sa,Ci=on.ta+16*kn*Ir+16*Bn,Ia=Jn.dd,Dn=Jn.tc;if(Dn!=0)if(e(3<=Dn),on.L==1)0<Bn&&fA(Is,Ci,Ir,Dn+4),Jn.La&&yi(Is,Ci,Ir,Dn),0<Os&&Wl(Is,Ci,Ir,Dn+4),Jn.La&&dh(Is,Ci,Ir,Dn);else{var co=on.B,Xl=on.qa,mu=on.ra+8*kn*co+8*Bn,gA=on.Ha,on=on.Ia+8*kn*co+8*Bn;kn=Jn.ld,0<Bn&&(Jp(Is,Ci,Ir,Dn+4,Ia,kn),Gl(Xl,mu,gA,on,co,Dn+4,Ia,kn)),Jn.La&&(hA(Is,Ci,Ir,Dn,Ia,kn),fu(Xl,mu,gA,on,co,Dn,Ia,kn)),0<Os&&(hu(Is,Ci,Ir,Dn+4,Ia,kn),uh(Xl,mu,gA,on,co,Dn+4,Ia,kn)),Jn.La&&(zl(Is,Ci,Ir,Dn,Ia,kn),$l(Xl,mu,gA,on,co,Dn,Ia,kn))}}if(me.ia&&alert("todo:DitherRow"),ve.put!=null){if(Wt=16*Br,Br=16*(Br+1),ri?(ve.y=me.sa,ve.O=me.ta+Ur,ve.f=me.qa,ve.N=me.ra+Hs,ve.ea=me.Ha,ve.W=me.Ia+Hs):(Wt-=nr,ve.y=lt,ve.O=Lt,ve.f=ft,ve.N=Ke,ve.ea=pr,ve.W=br),ur||(Br-=nr),Br>ve.o&&(Br=ve.o),ve.F=null,ve.J=null,me.Fa!=null&&0<me.Fa.length&&Wt<Br&&(ve.J=cA(me,ve,Wt,Br-Wt),ve.F=me.mb,ve.F==null&&ve.F.length==0)){Ve=Rr(me,3,"Could not decode alpha data.");break e}Wt<ve.j&&(nr=ve.j-Wt,Wt=ve.j,e(!(1&nr)),ve.O+=me.R*nr,ve.N+=me.B*(nr>>1),ve.W+=me.B*(nr>>1),ve.F!=null&&(ve.J+=ve.width*nr)),Wt<Br&&(ve.O+=ve.v,ve.N+=ve.v>>1,ve.W+=ve.v>>1,ve.F!=null&&(ve.J+=ve.v),ve.ka=Wt-ve.j,ve.U=ve.va-ve.v,ve.T=Br-Wt,Ve=ve.put(ve))}De+1!=me.Ic||ur||(n(me.sa,me.ta-Xe,lt,Lt+16*me.R,Xe),n(me.qa,me.ra-wt,ft,Ke+8*me.B,wt),n(me.Ha,me.Ia-wt,pr,br+8*me.B,wt))}if(!Ve)return Rr(Be,6,"Output aborted.")}return 1}(d,g)),g.bc!=null&&g.bc(g),x&=1}return x?(d.cb=0,x):0}function Ds(d,g,x,S,V){V=d[g+x+32*S]+(V>>3),d[g+x+32*S]=-256&V?0>V?0:255:V}function Wo(d,g,x,S,V,K){Ds(d,g,0,x,S+V),Ds(d,g,1,x,S+K),Ds(d,g,2,x,S-K),Ds(d,g,3,x,S-V)}function an(d){return(20091*d>>16)+d}function Es(d,g,x,S){var V,K=0,q=i(16);for(V=0;4>V;++V){var Y=d[g+0]+d[g+8],Z=d[g+0]-d[g+8],se=(35468*d[g+4]>>16)-an(d[g+12]),pe=an(d[g+4])+(35468*d[g+12]>>16);q[K+0]=Y+pe,q[K+1]=Z+se,q[K+2]=Z-se,q[K+3]=Y-pe,K+=4,g++}for(V=K=0;4>V;++V)Y=(d=q[K+0]+4)+q[K+8],Z=d-q[K+8],se=(35468*q[K+4]>>16)-an(q[K+12]),Ds(x,S,0,0,Y+(pe=an(q[K+4])+(35468*q[K+12]>>16))),Ds(x,S,1,0,Z+se),Ds(x,S,2,0,Z-se),Ds(x,S,3,0,Y-pe),K++,S+=32}function Ya(d,g,x,S){var V=d[g+0]+4,K=35468*d[g+4]>>16,q=an(d[g+4]),Y=35468*d[g+1]>>16;Wo(x,S,0,V+q,d=an(d[g+1]),Y),Wo(x,S,1,V+K,d,Y),Wo(x,S,2,V-K,d,Y),Wo(x,S,3,V-q,d,Y)}function Xo(d,g,x,S,V){Es(d,g,x,S),V&&Es(d,g+16,x,S+4)}function jl(d,g,x,S){oo(d,g+0,x,S,1),oo(d,g+32,x,S+128,1)}function xr(d,g,x,S){var V;for(d=d[g+0]+4,V=0;4>V;++V)for(g=0;4>g;++g)Ds(x,S,g,V,d)}function Za(d,g,x,S){d[g+0]&&Ns(d,g+0,x,S),d[g+16]&&Ns(d,g+16,x,S+4),d[g+32]&&Ns(d,g+32,x,S+128),d[g+48]&&Ns(d,g+48,x,S+128+4)}function eo(d,g,x,S){var V,K=i(16);for(V=0;4>V;++V){var q=d[g+0+V]+d[g+12+V],Y=d[g+4+V]+d[g+8+V],Z=d[g+4+V]-d[g+8+V],se=d[g+0+V]-d[g+12+V];K[0+V]=q+Y,K[8+V]=q-Y,K[4+V]=se+Z,K[12+V]=se-Z}for(V=0;4>V;++V)q=(d=K[0+4*V]+3)+K[3+4*V],Y=K[1+4*V]+K[2+4*V],Z=K[1+4*V]-K[2+4*V],se=d-K[3+4*V],x[S+0]=q+Y>>3,x[S+16]=se+Z>>3,x[S+32]=q-Y>>3,x[S+48]=se-Z>>3,S+=64}function Mi(d,g,x){var S,V=g-32,K=ti,q=255-d[V-1];for(S=0;S<x;++S){var Y,Z=K,se=q+d[g-1];for(Y=0;Y<x;++Y)d[g+Y]=Z[se+d[V+Y]];g+=32}}function nh(d,g){Mi(d,g,4)}function tu(d,g){Mi(d,g,8)}function sh(d,g){Mi(d,g,16)}function Oi(d,g){var x;for(x=0;16>x;++x)n(d,g+32*x,d,g-32,16)}function Jo(d,g){var x;for(x=16;0<x;--x)s(d,g,d[g-1],16),g+=32}function Yo(d,g,x){var S;for(S=0;16>S;++S)s(g,x+32*S,d,16)}function xa(d,g){var x,S=16;for(x=0;16>x;++x)S+=d[g-1+32*x]+d[g+x-32];Yo(S>>5,d,g)}function Mr(d,g){var x,S=8;for(x=0;16>x;++x)S+=d[g-1+32*x];Yo(S>>4,d,g)}function ru(d,g){var x,S=8;for(x=0;16>x;++x)S+=d[g+x-32];Yo(S>>4,d,g)}function kl(d,g){Yo(128,d,g)}function Mt(d,g,x){return d+2*g+x+2>>2}function ba(d,g){var x,S=g-32;for(S=new Uint8Array([Mt(d[S-1],d[S+0],d[S+1]),Mt(d[S+0],d[S+1],d[S+2]),Mt(d[S+1],d[S+2],d[S+3]),Mt(d[S+2],d[S+3],d[S+4])]),x=0;4>x;++x)n(d,g+32*x,S,0,S.length)}function ih(d,g){var x=d[g-1],S=d[g-1+32],V=d[g-1+64],K=d[g-1+96];ge(d,g+0,16843009*Mt(d[g-1-32],x,S)),ge(d,g+32,16843009*Mt(x,S,V)),ge(d,g+64,16843009*Mt(S,V,K)),ge(d,g+96,16843009*Mt(V,K,K))}function gi(d,g){var x,S=4;for(x=0;4>x;++x)S+=d[g+x-32]+d[g-1+32*x];for(S>>=3,x=0;4>x;++x)s(d,g+32*x,S,4)}function nu(d,g){var x=d[g-1+0],S=d[g-1+32],V=d[g-1+64],K=d[g-1-32],q=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],se=d[g+3-32];d[g+0+96]=Mt(S,V,d[g-1+96]),d[g+1+96]=d[g+0+64]=Mt(x,S,V),d[g+2+96]=d[g+1+64]=d[g+0+32]=Mt(K,x,S),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Mt(q,K,x),d[g+3+64]=d[g+2+32]=d[g+1+0]=Mt(Y,q,K),d[g+3+32]=d[g+2+0]=Mt(Z,Y,q),d[g+3+0]=Mt(se,Z,Y)}function Ys(d,g){var x=d[g+1-32],S=d[g+2-32],V=d[g+3-32],K=d[g+4-32],q=d[g+5-32],Y=d[g+6-32],Z=d[g+7-32];d[g+0+0]=Mt(d[g+0-32],x,S),d[g+1+0]=d[g+0+32]=Mt(x,S,V),d[g+2+0]=d[g+1+32]=d[g+0+64]=Mt(S,V,K),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Mt(V,K,q),d[g+3+32]=d[g+2+64]=d[g+1+96]=Mt(K,q,Y),d[g+3+64]=d[g+2+96]=Mt(q,Y,Z),d[g+3+96]=Mt(Y,Z,Z)}function Zo(d,g){var x=d[g-1+0],S=d[g-1+32],V=d[g-1+64],K=d[g-1-32],q=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],se=d[g+3-32];d[g+0+0]=d[g+1+64]=K+q+1>>1,d[g+1+0]=d[g+2+64]=q+Y+1>>1,d[g+2+0]=d[g+3+64]=Y+Z+1>>1,d[g+3+0]=Z+se+1>>1,d[g+0+96]=Mt(V,S,x),d[g+0+64]=Mt(S,x,K),d[g+0+32]=d[g+1+96]=Mt(x,K,q),d[g+1+32]=d[g+2+96]=Mt(K,q,Y),d[g+2+32]=d[g+3+96]=Mt(q,Y,Z),d[g+3+32]=Mt(Y,Z,se)}function Dl(d,g){var x=d[g+0-32],S=d[g+1-32],V=d[g+2-32],K=d[g+3-32],q=d[g+4-32],Y=d[g+5-32],Z=d[g+6-32],se=d[g+7-32];d[g+0+0]=x+S+1>>1,d[g+1+0]=d[g+0+64]=S+V+1>>1,d[g+2+0]=d[g+1+64]=V+K+1>>1,d[g+3+0]=d[g+2+64]=K+q+1>>1,d[g+0+32]=Mt(x,S,V),d[g+1+32]=d[g+0+96]=Mt(S,V,K),d[g+2+32]=d[g+1+96]=Mt(V,K,q),d[g+3+32]=d[g+2+96]=Mt(K,q,Y),d[g+3+64]=Mt(q,Y,Z),d[g+3+96]=Mt(Y,Z,se)}function eA(d,g){var x=d[g-1+0],S=d[g-1+32],V=d[g-1+64],K=d[g-1+96];d[g+0+0]=x+S+1>>1,d[g+2+0]=d[g+0+32]=S+V+1>>1,d[g+2+32]=d[g+0+64]=V+K+1>>1,d[g+1+0]=Mt(x,S,V),d[g+3+0]=d[g+1+32]=Mt(S,V,K),d[g+3+32]=d[g+1+64]=Mt(V,K,K),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=K}function tA(d,g){var x=d[g-1+0],S=d[g-1+32],V=d[g-1+64],K=d[g-1+96],q=d[g-1-32],Y=d[g+0-32],Z=d[g+1-32],se=d[g+2-32];d[g+0+0]=d[g+2+32]=x+q+1>>1,d[g+0+32]=d[g+2+64]=S+x+1>>1,d[g+0+64]=d[g+2+96]=V+S+1>>1,d[g+0+96]=K+V+1>>1,d[g+3+0]=Mt(Y,Z,se),d[g+2+0]=Mt(q,Y,Z),d[g+1+0]=d[g+3+32]=Mt(x,q,Y),d[g+1+32]=d[g+3+64]=Mt(S,x,q),d[g+1+64]=d[g+3+96]=Mt(V,S,x),d[g+1+96]=Mt(K,V,S)}function su(d,g){var x;for(x=0;8>x;++x)n(d,g+32*x,d,g-32,8)}function Hi(d,g){var x;for(x=0;8>x;++x)s(d,g,d[g-1],8),g+=32}function Zs(d,g,x){var S;for(S=0;8>S;++S)s(g,x+32*S,d,8)}function Vi(d,g){var x,S=8;for(x=0;8>x;++x)S+=d[g+x-32]+d[g-1+32*x];Zs(S>>4,d,g)}function Rl(d,g){var x,S=4;for(x=0;8>x;++x)S+=d[g+x-32];Zs(S>>3,d,g)}function vr(d,g){var x,S=4;for(x=0;8>x;++x)S+=d[g-1+32*x];Zs(S>>3,d,g)}function Ml(d,g){Zs(128,d,g)}function rA(d,g,x){var S=d[g-x],V=d[g+0],K=3*(V-S)+ww[1020+d[g-2*x]-d[g+x]],q=Zp[112+(K+4>>3)];d[g-x]=ti[255+S+Zp[112+(K+3>>3)]],d[g+0]=ti[255+V-q]}function Ol(d,g,x,S){var V=d[g+0],K=d[g+x];return bi[255+d[g-2*x]-d[g-x]]>S||bi[255+K-V]>S}function Hl(d,g,x,S){return 4*bi[255+d[g-x]-d[g+0]]+bi[255+d[g-2*x]-d[g+x]]<=S}function Vl(d,g,x,S,V){var K=d[g-3*x],q=d[g-2*x],Y=d[g-x],Z=d[g+0],se=d[g+x],pe=d[g+2*x],Ne=d[g+3*x];return 4*bi[255+Y-Z]+bi[255+q-se]>S?0:bi[255+d[g-4*x]-K]<=V&&bi[255+K-q]<=V&&bi[255+q-Y]<=V&&bi[255+Ne-pe]<=V&&bi[255+pe-se]<=V&&bi[255+se-Z]<=V}function to(d,g,x,S){var V=2*S+1;for(S=0;16>S;++S)Hl(d,g+S,x,V)&&rA(d,g+S,x)}function ei(d,g,x,S){var V=2*S+1;for(S=0;16>S;++S)Hl(d,g+S*x,1,V)&&rA(d,g+S*x,1)}function In(d,g,x,S){var V;for(V=3;0<V;--V)to(d,g+=4*x,x,S)}function iu(d,g,x,S){var V;for(V=3;0<V;--V)ei(d,g+=4,x,S)}function Ba(d,g,x,S,V,K,q,Y){for(K=2*K+1;0<V--;){if(Vl(d,g,x,K,q))if(Ol(d,g,x,Y))rA(d,g,x);else{var Z=d,se=g,pe=x,Ne=Z[se-2*pe],Ie=Z[se-pe],Be=Z[se+0],qe=Z[se+pe],De=Z[se+2*pe],me=27*(Ve=ww[1020+3*(Be-Ie)+ww[1020+Ne-qe]])+63>>7,ve=18*Ve+63>>7,Ve=9*Ve+63>>7;Z[se-3*pe]=ti[255+Z[se-3*pe]+Ve],Z[se-2*pe]=ti[255+Ne+ve],Z[se-pe]=ti[255+Ie+me],Z[se+0]=ti[255+Be-me],Z[se+pe]=ti[255+qe-ve],Z[se+2*pe]=ti[255+De-Ve]}g+=S}}function $n(d,g,x,S,V,K,q,Y){for(K=2*K+1;0<V--;){if(Vl(d,g,x,K,q))if(Ol(d,g,x,Y))rA(d,g,x);else{var Z=d,se=g,pe=x,Ne=Z[se-pe],Ie=Z[se+0],Be=Z[se+pe],qe=Zp[112+((De=3*(Ie-Ne))+4>>3)],De=Zp[112+(De+3>>3)],me=qe+1>>1;Z[se-2*pe]=ti[255+Z[se-2*pe]+me],Z[se-pe]=ti[255+Ne+De],Z[se+0]=ti[255+Ie-qe],Z[se+pe]=ti[255+Be-me]}g+=S}}function nA(d,g,x,S,V,K){Ba(d,g,x,1,16,S,V,K)}function Ki(d,g,x,S,V,K){Ba(d,g,1,x,16,S,V,K)}function sA(d,g,x,S,V,K){var q;for(q=3;0<q;--q)$n(d,g+=4*x,x,1,16,S,V,K)}function ro(d,g,x,S,V,K){var q;for(q=3;0<q;--q)$n(d,g+=4,1,x,16,S,V,K)}function iA(d,g,x,S,V,K,q,Y){Ba(d,g,V,1,8,K,q,Y),Ba(x,S,V,1,8,K,q,Y)}function Kl(d,g,x,S,V,K,q,Y){Ba(d,g,1,V,8,K,q,Y),Ba(x,S,1,V,8,K,q,Y)}function aA(d,g,x,S,V,K,q,Y){$n(d,g+4*V,V,1,8,K,q,Y),$n(x,S+4*V,V,1,8,K,q,Y)}function Ca(d,g,x,S,V,K,q,Y){$n(d,g+4,1,V,8,K,q,Y),$n(x,S+4,1,V,8,K,q,Y)}function no(){this.ba=new mr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function oA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function so(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function AA(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new U}function au(){this.xb=this.a=0,this.l=new Ja,this.ca=new mr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new AA,this.ab=0,this.gc=a(4,so),this.Oc=0}function qi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ja,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ea(d,g,x,S,V,K,q){for(d=d==null?0:d[g+0],g=0;g<q;++g)V[K+g]=d+x[S+g]&255,d=V[K+g]}function lA(d,g,x,S,V,K,q){var Y;if(d==null)Ea(null,null,x,S,V,K,q);else for(Y=0;Y<q;++Y)V[K+Y]=d[g+Y]+x[S+Y]&255}function us(d,g,x,S,V,K,q){if(d==null)Ea(null,null,x,S,V,K,q);else{var Y,Z=d[g+0],se=Z,pe=Z;for(Y=0;Y<q;++Y)se=pe+(Z=d[g+Y])-se,pe=x[S+Y]+(-256&se?0>se?0:255:se)&255,se=Z,V[K+Y]=pe}}function cA(d,g,x,S){var V=g.width,K=g.o;if(e(d!=null&&g!=null),0>x||0>=S||x+S>K)return null;if(!d.Cc){if(d.ga==null){var q;if(d.ga=new qi,(q=d.ga==null)||(q=g.width*g.o,e(d.Gb.length==0),d.Gb=i(q),d.Uc=0,d.Gb==null?q=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,q=1),q=!q),!q){q=d.ga;var Y=d.Fa,Z=d.P,se=d.qc,pe=d.mb,Ne=d.nb,Ie=Z+1,Be=se-1,qe=q.l;if(e(Y!=null&&pe!=null&&g!=null),mA[0]=null,mA[1]=Ea,mA[2]=lA,mA[3]=us,q.ca=pe,q.tb=Ne,q.c=g.width,q.i=g.height,e(0<q.c&&0<q.i),1>=se)g=0;else if(q.$a=Y[Z+0]>>0&3,q.Z=Y[Z+0]>>2&3,q.Lc=Y[Z+0]>>4&3,Z=Y[Z+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||Z)g=0;else if(qe.put=fr,qe.ac=Gr,qe.bc=Pe,qe.ma=q,qe.width=g.width,qe.height=g.height,qe.Da=g.Da,qe.v=g.v,qe.va=g.va,qe.j=g.j,qe.o=g.o,q.$a)e:{e(q.$a==1),g=vt();t:for(;;){if(g==null){g=0;break e}if(e(q!=null),q.mc=g,g.c=q.c,g.i=q.i,g.l=q.l,g.l.ma=q,g.l.width=q.c,g.l.height=q.i,g.a=0,W(g.m,Y,Ie,Be),!Cs(q.c,q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&rt(g.s)?(q.ic=1,Y=g.c*g.i,g.Ta=null,g.Ua=0,g.V=i(Y),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(q.ic=0,g=ma(g,q.c)),!g))break t;g=1;break e}q.mc=null,g=0}else g=Be>=q.c*q.i;q=!g}if(q)return null;d.ga.Lc!=1?d.Ga=0:S=K-x}e(d.ga!=null),e(x+S<=K);e:{if(g=(Y=d.ga).c,K=Y.l.o,Y.$a==0){if(Ie=d.rc,Be=d.Vc,qe=d.Fa,Z=d.P+1+x*g,se=d.mb,pe=d.nb+x*g,e(Z<=d.P+d.qc),Y.Z!=0)for(e(mA[Y.Z]!=null),q=0;q<S;++q)mA[Y.Z](Ie,Be,qe,Z,se,pe,g),Ie=se,Be=pe,pe+=g,Z+=g;else for(q=0;q<S;++q)n(se,pe,qe,Z,g),Ie=se,Be=pe,pe+=g,Z+=g;d.rc=Ie,d.Vc=Be}else{if(e(Y.mc!=null),g=x+S,e((q=Y.mc)!=null),e(g<=q.i),q.C>=g)g=1;else if(Y.ic||ye(),Y.ic){Y=q.V,Ie=q.Ba,Be=q.c;var De=q.i,me=(qe=1,Z=q.$/Be,se=q.$%Be,pe=q.m,Ne=q.s,q.$),ve=Be*De,Ve=Be*g,Xe=Ne.wc,Ke=me<Ve?ot(Ne,se,Z):null;e(me<=ve),e(g<=De),e(rt(Ne));t:for(;;){for(;!pe.h&&me<Ve;){if(se&Xe||(Ke=ot(Ne,se,Z)),e(Ke!=null),$(pe),256>(De=ht(Ke.G[0],Ke.H[0],pe)))Y[Ie+me]=De,++me,++se>=Be&&(se=0,++Z<=g&&!(Z%16)&&Dt(q,Z));else{if(!(280>De)){qe=0;break t}De=Nt(De-256,pe);var wt,lt=ht(Ke.G[4],Ke.H[4],pe);if($(pe),!(me>=(lt=mt(Be,lt=Nt(lt,pe)))&&ve-me>=De)){qe=0;break t}for(wt=0;wt<De;++wt)Y[Ie+me+wt]=Y[Ie+me+wt-lt];for(me+=De,se+=De;se>=Be;)se-=Be,++Z<=g&&!(Z%16)&&Dt(q,Z);me<Ve&&se&Xe&&(Ke=ot(Ne,se,Z))}e(pe.h==z(pe))}Dt(q,Z>g?g:Z);break t}!qe||pe.h&&me<ve?(qe=0,q.a=pe.h?5:3):q.$=me,g=qe}else g=Jt(q,q.V,q.Ba,q.c,q.i,g,ga);if(!g){S=0;break e}}x+S>=K&&(d.Cc=1),S=1}if(!S)return null;if(d.Cc&&((S=d.ga)!=null&&(S.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*V}function v(d,g,x,S,V,K){for(;0<V--;){var q,Y=d,Z=g+(x?1:0),se=d,pe=g+(x?0:3);for(q=0;q<S;++q){var Ne=se[pe+4*q];Ne!=255&&(Ne*=32897,Y[Z+4*q+0]=Y[Z+4*q+0]*Ne>>23,Y[Z+4*q+1]=Y[Z+4*q+1]*Ne>>23,Y[Z+4*q+2]=Y[Z+4*q+2]*Ne>>23)}g+=K}}function H(d,g,x,S,V){for(;0<S--;){var K;for(K=0;K<x;++K){var q=d[g+2*K+0],Y=15&(se=d[g+2*K+1]),Z=4369*Y,se=(240&se|se>>4)*Z>>16;d[g+2*K+0]=(240&q|q>>4)*Z>>16&240|(15&q|q<<4)*Z>>16>>4&15,d[g+2*K+1]=240&se|Y}g+=V}}function Ae(d,g,x,S,V,K,q,Y){var Z,se,pe=255;for(se=0;se<V;++se){for(Z=0;Z<S;++Z){var Ne=d[g+Z];K[q+4*Z]=Ne,pe&=Ne}g+=x,q+=Y}return pe!=255}function fe(d,g,x,S,V){var K;for(K=0;K<V;++K)x[S+K]=d[g+K]>>8}function ye(){xi=v,Qr=H,Lr=Ae,fn=fe}function Re(d,g,x){E[d]=function(S,V,K,q,Y,Z,se,pe,Ne,Ie,Be,qe,De,me,ve,Ve,Xe){var Ke,wt=Xe-1>>1,lt=Y[Z+0]|se[pe+0]<<16,Lt=Ne[Ie+0]|Be[qe+0]<<16;e(S!=null);var ft=3*lt+Lt+131074>>2;for(g(S[V+0],255&ft,ft>>16,De,me),K!=null&&(ft=3*Lt+lt+131074>>2,g(K[q+0],255&ft,ft>>16,ve,Ve)),Ke=1;Ke<=wt;++Ke){var pr=Y[Z+Ke]|se[pe+Ke]<<16,br=Ne[Ie+Ke]|Be[qe+Ke]<<16,ur=lt+pr+Lt+br+524296,nr=ur+2*(pr+Lt)>>3;ft=nr+lt>>1,lt=(ur=ur+2*(lt+br)>>3)+pr>>1,g(S[V+2*Ke-1],255&ft,ft>>16,De,me+(2*Ke-1)*x),g(S[V+2*Ke-0],255&lt,lt>>16,De,me+(2*Ke-0)*x),K!=null&&(ft=ur+Lt>>1,lt=nr+br>>1,g(K[q+2*Ke-1],255&ft,ft>>16,ve,Ve+(2*Ke-1)*x),g(K[q+2*Ke+0],255&lt,lt>>16,ve,Ve+(2*Ke+0)*x)),lt=pr,Lt=br}1&Xe||(ft=3*lt+Lt+131074>>2,g(S[V+Xe-1],255&ft,ft>>16,De,me+(Xe-1)*x),K!=null&&(ft=3*Lt+lt+131074>>2,g(K[q+Xe-1],255&ft,ft>>16,ve,Ve+(Xe-1)*x)))}}function Je(){Bi[em]=tP,Bi[tm]=TB,Bi[_B]=rP,Bi[rm]=UB,Bi[nm]=PB,Bi[yw]=QB,Bi[NB]=nP,Bi[xw]=TB,Bi[bw]=UB,Bi[sm]=PB,Bi[Bw]=QB}function ut(d){return d&-16384?0>d?0:255:d>>sP}function f(d,g){return ut((19077*d>>8)+(26149*g>>8)-14234)}function C(d,g,x){return ut((19077*d>>8)-(6419*g>>8)-(13320*x>>8)+8708)}function j(d,g){return ut((19077*d>>8)+(33050*g>>8)-17685)}function J(d,g,x,S,V){S[V+0]=f(d,x),S[V+1]=C(d,g,x),S[V+2]=j(d,g)}function we(d,g,x,S,V){S[V+0]=j(d,g),S[V+1]=C(d,g,x),S[V+2]=f(d,x)}function Se(d,g,x,S,V){var K=C(d,g,x);g=K<<3&224|j(d,g)>>3,S[V+0]=248&f(d,x)|K>>5,S[V+1]=g}function Ye(d,g,x,S,V){var K=240&j(d,g)|15;S[V+0]=240&f(d,x)|C(d,g,x)>>4,S[V+1]=K}function qt(d,g,x,S,V){S[V+0]=255,J(d,g,x,S,V+1)}function rr(d,g,x,S,V){we(d,g,x,S,V),S[V+3]=255}function Gt(d,g,x,S,V){J(d,g,x,S,V),S[V+3]=255}function wr(d,g){return 0>d?0:d>g?g:d}function Tr(d,g,x){E[d]=function(S,V,K,q,Y,Z,se,pe,Ne){for(var Ie=pe+(-2&Ne)*x;pe!=Ie;)g(S[V+0],K[q+0],Y[Z+0],se,pe),g(S[V+1],K[q+0],Y[Z+0],se,pe+x),V+=2,++q,++Z,pe+=2*x;1&Ne&&g(S[V+0],K[q+0],Y[Z+0],se,pe)}}function Gi(d,g,x){return x==0?d==0?g==0?6:5:g==0?4:0:x}function Wn(d,g,x,S,V){switch(d>>>30){case 3:oo(g,x,S,V,0);break;case 2:hn(g,x,S,V);break;case 1:Ns(g,x,S,V)}}function _a(d,g){var x,S,V=g.M,K=g.Nb,q=d.oc,Y=d.pc+40,Z=d.oc,se=d.pc+584,pe=d.oc,Ne=d.pc+600;for(x=0;16>x;++x)q[Y+32*x-1]=129;for(x=0;8>x;++x)Z[se+32*x-1]=129,pe[Ne+32*x-1]=129;for(0<V?q[Y-1-32]=Z[se-1-32]=pe[Ne-1-32]=129:(s(q,Y-32-1,127,21),s(Z,se-32-1,127,9),s(pe,Ne-32-1,127,9)),S=0;S<d.za;++S){var Ie=g.ya[g.aa+S];if(0<S){for(x=-1;16>x;++x)n(q,Y+32*x-4,q,Y+32*x+12,4);for(x=-1;8>x;++x)n(Z,se+32*x-4,Z,se+32*x+4,4),n(pe,Ne+32*x-4,pe,Ne+32*x+4,4)}var Be=d.Gd,qe=d.Hd+S,De=Ie.ad,me=Ie.Hc;if(0<V&&(n(q,Y-32,Be[qe].y,0,16),n(Z,se-32,Be[qe].f,0,8),n(pe,Ne-32,Be[qe].ea,0,8)),Ie.Za){var ve=q,Ve=Y-32+16;for(0<V&&(S>=d.za-1?s(ve,Ve,Be[qe].y[15],4):n(ve,Ve,Be[qe+1].y,0,4)),x=0;4>x;x++)ve[Ve+128+x]=ve[Ve+256+x]=ve[Ve+384+x]=ve[Ve+0+x];for(x=0;16>x;++x,me<<=2)ve=q,Ve=Y+jB[x],zi[Ie.Ob[x]](ve,Ve),Wn(me,De,16*+x,ve,Ve)}else if(ve=Gi(S,V,Ie.Ob[0]),pA[ve](q,Y),me!=0)for(x=0;16>x;++x,me<<=2)Wn(me,De,16*+x,q,Y+jB[x]);for(x=Ie.Gc,ve=Gi(S,V,Ie.Dd),lo[ve](Z,se),lo[ve](pe,Ne),me=De,ve=Z,Ve=se,255&(Ie=x>>0)&&(170&Ie?ch(me,256,ve,Ve):wi(me,256,ve,Ve)),Ie=pe,me=Ne,255&(x>>=8)&&(170&x?ch(De,320,Ie,me):wi(De,320,Ie,me)),V<d.Ub-1&&(n(Be[qe].y,0,q,Y+480,16),n(Be[qe].f,0,Z,se+224,8),n(Be[qe].ea,0,pe,Ne+224,8)),x=8*K*d.B,Be=d.sa,qe=d.ta+16*S+16*K*d.R,De=d.qa,Ie=d.ra+8*S+x,me=d.Ha,ve=d.Ia+8*S+x,x=0;16>x;++x)n(Be,qe+x*d.R,q,Y+32*x,16);for(x=0;8>x;++x)n(De,Ie+x*d.B,Z,se+32*x,8),n(me,ve+x*d.B,pe,Ne+32*x,8)}}function Na(d,g,x,S,V,K,q,Y,Z){var se=[0],pe=[0],Ne=0,Ie=Z!=null?Z.kd:0,Be=Z??new oA;if(d==null||12>x)return 7;Be.data=d,Be.w=g,Be.ha=x,g=[g],x=[x],Be.gb=[Be.gb];e:{var qe=g,De=x,me=Be.gb;if(e(d!=null),e(De!=null),e(me!=null),me[0]=0,12<=De[0]&&!r(d,qe[0],"RIFF")){if(r(d,qe[0]+8,"WEBP")){me=3;break e}var ve=Te(d,qe[0]+4);if(12>ve||4294967286<ve){me=3;break e}if(Ie&&ve>De[0]-8){me=7;break e}me[0]=ve,qe[0]+=12,De[0]-=12}me=0}if(me!=0)return me;for(ve=0<Be.gb[0],x=x[0];;){e:{var Ve=d;De=g,me=x;var Xe=se,Ke=pe,wt=qe=[0];if((ft=Ne=[Ne])[0]=0,8>me[0])me=7;else{if(!r(Ve,De[0],"VP8X")){if(Te(Ve,De[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var lt=Te(Ve,De[0]+8),Lt=1+Ue(Ve,De[0]+12);if(2147483648<=Lt*(Ve=1+Ue(Ve,De[0]+15))){me=3;break e}wt!=null&&(wt[0]=lt),Xe!=null&&(Xe[0]=Lt),Ke!=null&&(Ke[0]=Ve),De[0]+=18,me[0]-=18,ft[0]=1}me=0}}if(Ne=Ne[0],qe=qe[0],me!=0)return me;if(De=!!(2&qe),!ve&&Ne)return 3;if(K!=null&&(K[0]=!!(16&qe)),q!=null&&(q[0]=De),Y!=null&&(Y[0]=0),q=se[0],qe=pe[0],Ne&&De&&Z==null){me=0;break}if(4>x){me=7;break}if(ve&&Ne||!ve&&!Ne&&!r(d,g[0],"ALPH")){x=[x],Be.na=[Be.na],Be.P=[Be.P],Be.Sa=[Be.Sa];e:{lt=d,me=g,ve=x;var ft=Be.gb;Xe=Be.na,Ke=Be.P,wt=Be.Sa,Lt=22,e(lt!=null),e(ve!=null),Ve=me[0];var pr=ve[0];for(e(Xe!=null),e(wt!=null),Xe[0]=null,Ke[0]=null,wt[0]=0;;){if(me[0]=Ve,ve[0]=pr,8>pr){me=7;break e}var br=Te(lt,Ve+4);if(4294967286<br){me=3;break e}var ur=8+br+1&-2;if(Lt+=ur,0<ft&&Lt>ft){me=3;break e}if(!r(lt,Ve,"VP8 ")||!r(lt,Ve,"VP8L")){me=0;break e}if(pr[0]<ur){me=7;break e}r(lt,Ve,"ALPH")||(Xe[0]=lt,Ke[0]=Ve+8,wt[0]=br),Ve+=ur,pr-=ur}}if(x=x[0],Be.na=Be.na[0],Be.P=Be.P[0],Be.Sa=Be.Sa[0],me!=0)break}x=[x],Be.Ja=[Be.Ja],Be.xa=[Be.xa];e:if(ft=d,me=g,ve=x,Xe=Be.gb[0],Ke=Be.Ja,wt=Be.xa,lt=me[0],Ve=!r(ft,lt,"VP8 "),Lt=!r(ft,lt,"VP8L"),e(ft!=null),e(ve!=null),e(Ke!=null),e(wt!=null),8>ve[0])me=7;else{if(Ve||Lt){if(ft=Te(ft,lt+4),12<=Xe&&ft>Xe-12){me=3;break e}if(Ie&&ft>ve[0]-8){me=7;break e}Ke[0]=ft,me[0]+=8,ve[0]-=8,wt[0]=Lt}else wt[0]=5<=ve[0]&&ft[lt+0]==47&&!(ft[lt+4]>>5),Ke[0]=ve[0];me=0}if(x=x[0],Be.Ja=Be.Ja[0],Be.xa=Be.xa[0],g=g[0],me!=0)break;if(4294967286<Be.Ja)return 3;if(Y==null||De||(Y[0]=Be.xa?2:1),q=[q],qe=[qe],Be.xa){if(5>x){me=7;break}Y=q,Ie=qe,De=K,d==null||5>x?d=0:5<=x&&d[g+0]==47&&!(d[g+4]>>5)?(ve=[0],ft=[0],Xe=[0],W(Ke=new P,d,g,x),He(Ke,ve,ft,Xe)?(Y!=null&&(Y[0]=ve[0]),Ie!=null&&(Ie[0]=ft[0]),De!=null&&(De[0]=Xe[0]),d=1):d=0):d=0}else{if(10>x){me=7;break}Y=qe,d==null||10>x||!Pl(d,g+3,x-3)?d=0:(Ie=d[g+0]|d[g+1]<<8|d[g+2]<<16,De=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=Be.Ja||!De||!d?d=0:(q&&(q[0]=De),Y&&(Y[0]=d),d=1))}if(!d||(q=q[0],qe=qe[0],Ne&&(se[0]!=q||pe[0]!=qe)))return 3;Z!=null&&(Z[0]=Be,Z.offset=g-Z.w,e(4294967286>g-Z.w),e(Z.offset==Z.ha-x));break}return me==0||me==7&&Ne&&Z==null?(K!=null&&(K[0]|=Be.na!=null&&0<Be.na.length),S!=null&&(S[0]=q),V!=null&&(V[0]=qe),0):me}function ah(d,g,x){var S=g.width,V=g.height,K=0,q=0,Y=S,Z=V;if(g.Da=d!=null&&0<d.Da,g.Da&&(Y=d.cd,Z=d.bd,K=d.v,q=d.j,11>x||(K&=-2,q&=-2),0>K||0>q||0>=Y||0>=Z||K+Y>S||q+Z>V))return 0;if(g.v=K,g.j=q,g.va=K+Y,g.o=q+Z,g.U=Y,g.T=Z,g.da=d!=null&&0<d.da,g.da){if(!Me(Y,Z,x=[d.ib],K=[d.hb]))return 0;g.ib=x[0],g.hb=K[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*S/4&&g.hb<3*V/4,g.Kb=0),1}function oh(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function ou(d,g,x,S){if(S==null||0>=d||0>=g)return 2;if(x!=null){if(x.Da){var V=x.cd,K=x.bd,q=-2&x.v,Y=-2&x.j;if(0>q||0>Y||0>=V||0>=K||q+V>d||Y+K>g)return 2;d=V,g=K}if(x.da){if(!Me(d,g,V=[x.ib],K=[x.hb]))return 2;d=V[0],g=K[0]}}S.width=d,S.height=g;e:{var Z=S.width,se=S.height;if(d=S.S,0>=Z||0>=se||!(d>=em&&13>d))d=2;else{if(0>=S.Rd&&S.sd==null){q=K=V=g=0;var pe=(Y=Z*kB[d])*se;if(11>d||(K=(se+1)/2*(g=(Z+1)/2),d==12&&(q=(V=Z)*se)),(se=i(pe+2*K+q))==null){d=1;break e}S.sd=se,11>d?((Z=S.f.RGBA).eb=se,Z.fb=0,Z.A=Y,Z.size=pe):((Z=S.f.kb).y=se,Z.O=0,Z.fa=Y,Z.Fd=pe,Z.f=se,Z.N=0+pe,Z.Ab=g,Z.Cd=K,Z.ea=se,Z.W=0+pe+K,Z.Db=g,Z.Ed=K,d==12&&(Z.F=se,Z.J=0+pe+2*K),Z.Tc=q,Z.lb=V)}if(g=1,V=S.S,K=S.width,q=S.height,V>=em&&13>V)if(11>V)d=S.f.RGBA,g&=(Y=Math.abs(d.A))*(q-1)+K<=d.size,g&=Y>=K*kB[V],g&=d.eb!=null;else{d=S.f.kb,Y=(K+1)/2,pe=(q+1)/2,Z=Math.abs(d.fa),se=Math.abs(d.Ab);var Ne=Math.abs(d.Db),Ie=Math.abs(d.lb),Be=Ie*(q-1)+K;g&=Z*(q-1)+K<=d.Fd,g&=se*(pe-1)+Y<=d.Cd,g=(g&=Ne*(pe-1)+Y<=d.Ed)&Z>=K&se>=Y&Ne>=Y,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,V==12&&(g&=Ie>=K,g&=Be<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||x!=null&&x.fd&&(d=oh(S)),d}var Xn=64,Au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],lu=24,cu=32,Ah=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];je("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(d){return d},E.Predictor2=function(d,g,x){return g[x+0]},E.Predictor3=function(d,g,x){return g[x+1]},E.Predictor4=function(d,g,x){return g[x-1]},E.Predictor5=function(d,g,x){return ze(ze(d,g[x+1]),g[x+0])},E.Predictor6=function(d,g,x){return ze(d,g[x-1])},E.Predictor7=function(d,g,x){return ze(d,g[x+0])},E.Predictor8=function(d,g,x){return ze(g[x-1],g[x+0])},E.Predictor9=function(d,g,x){return ze(g[x+0],g[x+1])},E.Predictor10=function(d,g,x){return ze(ze(d,g[x-1]),ze(g[x+0],g[x+1]))},E.Predictor11=function(d,g,x){var S=g[x+0];return 0>=Ge(S>>24&255,d>>24&255,(g=g[x-1])>>24&255)+Ge(S>>16&255,d>>16&255,g>>16&255)+Ge(S>>8&255,d>>8&255,g>>8&255)+Ge(255&S,255&d,255&g)?S:d},E.Predictor12=function(d,g,x){var S=g[x+0];return(nt((d>>24&255)+(S>>24&255)-((g=g[x-1])>>24&255))<<24|nt((d>>16&255)+(S>>16&255)-(g>>16&255))<<16|nt((d>>8&255)+(S>>8&255)-(g>>8&255))<<8|nt((255&d)+(255&S)-(255&g)))>>>0},E.Predictor13=function(d,g,x){var S=g[x-1];return(xe((d=ze(d,g[x+0]))>>24&255,S>>24&255)<<24|xe(d>>16&255,S>>16&255)<<16|xe(d>>8&255,S>>8&255)<<8|xe(d>>0&255,S>>0&255))>>>0};var vw=E.PredictorAdd0;E.PredictorAdd1=$e,je("Predictor2","PredictorAdd2"),je("Predictor3","PredictorAdd3"),je("Predictor4","PredictorAdd4"),je("Predictor5","PredictorAdd5"),je("Predictor6","PredictorAdd6"),je("Predictor7","PredictorAdd7"),je("Predictor8","PredictorAdd8"),je("Predictor9","PredictorAdd9"),je("Predictor10","PredictorAdd10"),je("Predictor11","PredictorAdd11"),je("Predictor12","PredictorAdd12"),je("Predictor13","PredictorAdd13");var lh=E.PredictorAdd2;he("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),he("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var $p,vi=E.ColorIndexInverseTransform,uu=E.MapARGB,Wp=E.VP8LColorIndexInverseTransformAlpha,Xp=E.MapAlpha,uA=E.VP8LPredictorsAdd=[];uA.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var ql,Ms,_s,dA,io,ao,du,oo,hn,ch,Ns,wi,hu,Jp,uh,Gl,zl,hA,$l,fu,Wl,fA,dh,yi,xi,Qr,Lr,fn,Sn=i(511),Ao=i(2041),hh=i(225),pu=i(767),Yp=0,ww=Ao,Zp=hh,ti=pu,bi=Sn,em=0,tm=1,_B=2,rm=3,nm=4,yw=5,NB=6,xw=7,bw=8,sm=9,Bw=10,O3=[2,3,7],H3=[3,3,11],IB=[280,256,256,256,40],V3=[0,1,1,1,0],K3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],q3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],z3=8,Cw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ew=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fh=null,$3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],W3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],SB=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],X3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],J3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Y3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pA=[],zi=[],lo=[],eP=1,FB=2,mA=[],Bi=[];Re("UpsampleRgbLinePair",J,3),Re("UpsampleBgrLinePair",we,3),Re("UpsampleRgbaLinePair",Gt,4),Re("UpsampleBgraLinePair",rr,4),Re("UpsampleArgbLinePair",qt,4),Re("UpsampleRgba4444LinePair",Ye,2),Re("UpsampleRgb565LinePair",Se,2);var tP=E.UpsampleRgbLinePair,rP=E.UpsampleBgrLinePair,TB=E.UpsampleRgbaLinePair,UB=E.UpsampleBgraLinePair,PB=E.UpsampleArgbLinePair,QB=E.UpsampleRgba4444LinePair,nP=E.UpsampleRgb565LinePair,im=16,am=1<<im-1,ph=-227,_w=482,sP=6,LB=0,iP=i(256),aP=i(256),oP=i(256),AP=i(256),lP=i(_w-ph),cP=i(_w-ph);Tr("YuvToRgbRow",J,3),Tr("YuvToBgrRow",we,3),Tr("YuvToRgbaRow",Gt,4),Tr("YuvToBgraRow",rr,4),Tr("YuvToArgbRow",qt,4),Tr("YuvToRgba4444Row",Ye,2),Tr("YuvToRgb565Row",Se,2);var jB=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],om=[0,2,8],uP=[8,7,6,4,4,2,2,2,1,1,1,1],dP=1;this.WebPDecodeRGBA=function(d,g,x,S,V){var K=tm,q=new no,Y=new mr;q.ba=Y,Y.S=K,Y.width=[Y.width],Y.height=[Y.height];var Z=Y.width,se=Y.height,pe=new dn;if(pe==null||d==null)var Ne=2;else e(pe!=null),Ne=Na(d,g,x,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Ne!=0?Z=0:(Z!=null&&(Z[0]=pe.width[0]),se!=null&&(se[0]=pe.height[0]),Z=1),Z){Y.width=Y.width[0],Y.height=Y.height[0],S!=null&&(S[0]=Y.width),V!=null&&(V[0]=Y.height);e:{if(S=new Ja,(V=new oA).data=d,V.w=g,V.ha=x,V.kd=1,g=[0],e(V!=null),((d=Na(V.data,V.w,V.ha,null,null,null,g,null,V))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(q!=null),S.data=V.data,S.w=V.w+V.offset,S.ha=V.ha-V.offset,S.put=fr,S.ac=Gr,S.bc=Pe,S.ma=q,V.xa){if((d=vt())==null){q=1;break e}if(function(Ie,Be){var qe=[0],De=[0],me=[0];t:for(;;){if(Ie==null)return 0;if(Be==null)return Ie.a=2,0;if(Ie.l=Be,Ie.a=0,W(Ie.m,Be.data,Be.w,Be.ha),!He(Ie.m,qe,De,me)){Ie.a=3;break t}if(Ie.xb=FB,Be.width=qe[0],Be.height=De[0],!Cs(qe[0],De[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0}(d,S)){if(S=(g=ou(S.width,S.height,q.Oa,q.ba))==0){t:{S=d;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((x=S.l)!=null),e((V=x.ma)!=null),S.xb!=0){if(S.ca=V.ba,S.tb=V.tb,e(S.ca!=null),!ah(V.Oa,x,rm)){S.a=2;break r}if(!ma(S,x.width)||x.da)break r;if((x.da||Vt(S.ca.S))&&ye(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&ye()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!ae(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Jt(S,S.V,S.Ba,S.c,S.i,x.o,be))break r;V.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(g=d.a)}else g=d.a}else{if((d=new Ul)==null){q=1;break e}if(d.Fa=V.na,d.P=V.P,d.qc=V.Sa,Ql(d,S)){if((g=ou(S.width,S.height,q.Oa,q.ba))==0){if(d.Aa=0,x=q.Oa,e((V=d)!=null),x!=null){if(0<(Z=0>(Z=x.Md)?0:100<Z?255:255*Z/100)){for(se=pe=0;4>se;++se)12>(Ne=V.pb[se]).lc&&(Ne.ia=Z*uP[0>Ne.lc?0:Ne.lc]>>3),pe|=Ne.ia;pe&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=x.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}eu(d,S)||(g=d.a)}}else g=d.a}g==0&&q.Oa!=null&&q.Oa.fd&&(g=oh(q.ba))}q=g}K=q!=0?null:11>K?Y.f.RGBA.eb:Y.f.kb.y}else K=null;return K};var kB=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,L){for(var D="",I=0;I<4;I++)D+=String.fromCharCode(E[L++]);return D}function u(E,L){return(E[L+0]<<0|E[L+1]<<8|E[L+2]<<16)>>>0}function h(E,L){return(E[L+0]<<0|E[L+1]<<8|E[L+2]<<16|E[L+3]<<24)>>>0}new l;var m=[0],p=[0],b=[],B=new l,_=t,y=function(E,L){var D={},I=0,U=!1,T=0,ee=0;if(D.frames=[],!function(k,z,te,$){for(var ne=0;ne<$;ne++)if(k[z+ne]!=te.charCodeAt(ne))return!0;return!1}(E,L,"RIFF",4)){for(h(E,L+=4),L+=8;L<E.length;){var le=c(E,L),re=h(E,L+=4);L+=4;var ue=re+(1&re);switch(le){case"VP8 ":case"VP8L":D.frames[I]===void 0&&(D.frames[I]={}),(ie=D.frames[I]).src_off=U?ee:L-8,ie.src_size=T+re+8,I++,U&&(U=!1,T=0,ee=0);break;case"VP8X":(ie=D.header={}).feature_flags=E[L];var W=L+4;ie.canvas_width=1+u(E,W),W+=3,ie.canvas_height=1+u(E,W),W+=3;break;case"ALPH":U=!0,T=ue+8,ee=L-8;break;case"ANIM":(ie=D.header).bgcolor=h(E,L),W=L+4,ie.loop_count=(Ee=E)[(P=W)+0]<<0|Ee[P+1]<<8,W+=2;break;case"ANMF":var ce,ie;(ie=D.frames[I]={}).offset_x=2*u(E,L),L+=3,ie.offset_y=2*u(E,L),L+=3,ie.width=1+u(E,L),L+=3,ie.height=1+u(E,L),L+=3,ie.duration=u(E,L),L+=3,ce=E[L++],ie.dispose=1&ce,ie.blend=ce>>1&1}le!="ANMF"&&(L+=ue)}var Ee,P;return D}}(_,0);y.response=_,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,N=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],p=[w.canvas_width];for(var O=0;O<N.length&&N[O].blend!=0;O++);}var R=N[0],M=B.WebPDecodeRGBA(_,R.src_off,R.src_size,p,m);R.rgba=M,R.imgwidth=p[0],R.imgheight=m[0];for(var F=0;F<p[0]*m[0]*4;F++)b[F]=M[F];return this.width=p,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof rx=="function"},r=function(m,p,b,B){var _=4,y=a;switch(B){case t.image_compression.FAST:_=1,y=i;break;case t.image_compression.MEDIUM:_=6,y=o;break;case t.image_compression.SLOW:_=9,y=l}m=n(m,p,b,y);var w=rx(m,{level:_});return t.__addimage__.arrayBufferToBinaryString(w)},n=function(m,p,b,B){for(var _,y,w,N=m.length/p,O=new Uint8Array(m.length+N),R=u(),M=0;M<N;M+=1){if(w=M*p,_=m.subarray(w,w+p),B)O.set(B(_,b,y),w+M);else{for(var F,E=R.length,L=[];F<E;F+=1)L[F]=R[F](_,b,y);var D=h(L.concat());O.set(L[D],w+M)}y=_}return O},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var b,B=[],_=m.length;B[0]=1;for(var y=0;y<_;y+=1)b=m[y-p]||0,B[y+1]=m[y]-b+256&255;return B},a=function(m,p,b){var B,_=[],y=m.length;_[0]=2;for(var w=0;w<y;w+=1)B=b&&b[w]||0,_[w+1]=m[w]-B+256&255;return _},o=function(m,p,b){var B,_,y=[],w=m.length;y[0]=3;for(var N=0;N<w;N+=1)B=m[N-p]||0,_=b&&b[N]||0,y[N+1]=m[N]+256-(B+_>>>1)&255;return y},l=function(m,p,b){var B,_,y,w,N=[],O=m.length;N[0]=4;for(var R=0;R<O;R+=1)B=m[R-p]||0,_=b&&b[R]||0,y=b&&b[R-p]||0,w=c(B,_,y),N[R+1]=m[R]-w+256&255;return N},c=function(m,p,b){if(m===p&&p===b)return m;var B=Math.abs(p-b),_=Math.abs(m-b),y=Math.abs(m+p-b-b);return B<=_&&B<=y?m:_<=y?p:b},u=function(){return[s,i,a,o,l]},h=function(m){var p=m.map(function(b){return b.reduce(function(B,_){return B+Math.abs(_)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,b,B){var _,y,w,N,O,R,M,F,E,L,D,I,U,T,ee,le=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(w=new qz(m)).imgData,y=w.bits,_=w.colorSpace,O=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){E=(F=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,D=new Uint8Array(E*w.colors),L=new Uint8Array(E);var ue,W=w.pixelBitlength-w.bits;for(T=0,ee=0;T<E;T++){for(U=F[T],ue=0;ue<W;)D[ee++]=U>>>ue&255,ue+=w.bits;L[T]=U>>>ue&255}}if(w.bits===16){E=(F=new Uint32Array(w.decodePixels().buffer)).length,D=new Uint8Array(E*(32/w.pixelBitlength)*w.colors),L=new Uint8Array(E*(32/w.pixelBitlength)),I=w.colors>1,T=0,ee=0;for(var ce=0;T<E;)U=F[T++],D[ee++]=U>>>0&255,I&&(D[ee++]=U>>>16&255,U=F[T++],D[ee++]=U>>>0&255),L[ce++]=U>>>16&255;y=8}B!==t.image_compression.NONE&&e()?(m=r(D,w.width*w.colors,w.colors,B),M=r(L,w.width,1,B)):(m=D,M=L,le=void 0)}if(w.colorType===3&&(_=this.color_spaces.INDEXED,R=w.palette,w.transparency.indexed)){var ie=w.transparency.indexed,Ee=0;for(T=0,E=ie.length;T<E;++T)Ee+=ie[T];if((Ee/=255)===E-1&&ie.indexOf(0)!==-1)N=[ie.indexOf(0)];else if(Ee!==E){for(F=w.decodePixels(),L=new Uint8Array(F.length),T=0,E=F.length;T<E;T++)L[T]=ie[F[T]];M=r(L,w.width,1)}}var P=function(k){var z;switch(k){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(B);return le===this.decode.FLATE_DECODE&&(re="/Predictor "+P+" "),re+="/Colors "+O+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:b,data:m,index:p,filter:le,decodeParameters:re,transparency:N,palette:R,sMask:M,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:_}}}})(Qt.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new Gz(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new Jy(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(Qt.API),Ji.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ji.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Pr.log("bit decode error:"+r)}},Ji.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ji.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ji.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Ji.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},Ji.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},Ji.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ji.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},Ji.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Ji(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new Jy(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(Qt.API),BN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new BN(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new Jy(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(Qt.API),Qt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var u=n[c],h=n[c+1],m=n[c+2],p=n[c+3];i[o++]=u,i[o++]=h,i[o++]=m,a[l++]=p}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Qt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pu=Qt.API,pg=Pu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,m=0,p=t.length,b=0,B=o[0]||l,_=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(m=h&&_r(c[n])==="object"&&!isNaN(parseInt(c[n][b],10))?c[n][b]/u:0,_.push((o[n]||B)/l+m)),b=n;return _},wN=Pu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Pu.processArabic&&(t=Pu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:pg.apply(this,arguments).reduce(function(i,a){return i+a},0)},yN=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},xN=function(t,e,r){r||(r={});var n,s,i,a,o,l,c,u=[],h=[u],m=r.textIndent||0,p=0,b=0,B=t.split(" "),_=pg.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?B[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),w=[];B.map(function(O){(O=O.split(/\s*\n/)).length>1?w=w.concat(O.map(function(R,M){return(M&&R.length?`
`:"")+R})):w.push(O[0])}),B=w,l=wN.apply(this,[y,r])}for(i=0,a=B.length;i<a;i++){var N=0;if(n=B[i],l&&n[0]==`
`&&(n=n.substr(1),N=1),m+p+(b=(s=pg.apply(this,[n,r])).reduce(function(O,R){return O+R},0))>e||N){if(b>e){for(o=yN.apply(this,[n,s,e-(m+p),e]),u.push(o.shift()),u=[o.pop()];o.length;)h.push([o.shift()]);b=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(O,R){return O+R},0)}else u=[n];h.push(u),m=b+l,p=_}else u.push(n),m+=p+b,p=_}return c=l?function(O,R){return(R?y:"")+O.join(" ")}:function(O){return O.join(" ")},h.map(c)},Pu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(xN.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},a=t.__fontmetrics__.compress=function(h){var m,p,b,B,_=["{"];for(var y in h){if(m=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(b=i(m).slice(3),B="-"):(b=i(m).slice(2),B=""),b=B+b.slice(0,-1)+n[b.slice(-1)];else{if(_r(m)!=="object")throw new Error("Don't know what to do with value type "+_r(m)+".");b=a(m)}_.push(p+b)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,b,B,_={},y=1,w=_,N=[],O="",R="",M=h.length-1,F=1;F<M;F+=1)(B=h[F])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(B):B=="{"?(N.push([w,b]),w={},b=void 0):B=="}"?((p=N.pop())[0][p[1]]=w,b=void 0,w=p[0]):B=="-"?y=-1:b===void 0?r.hasOwnProperty(B)?(O+=r[B],b=parseInt(O,16)*y,y=1,O=""):O+=B:r.hasOwnProperty(B)?(R+=r[B],w[b]=parseInt(R,16)*y,y=1,b=void 0,R=""):R+=B;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var b=c.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(Qt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ff(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Qt),function(t){function e(){return(Rt.canvg?Promise.resolve(Rt.canvg):Qo(()=>import("./index.es-D2MljepP.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Qt.API.addSvgAsImage=function(r,n,s,i,a,o,l,c){if(isNaN(n)||isNaN(s))throw Pr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Pr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,s,i,a,l,c)})}}(),Qt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Qt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,h=0;function m(b,B){var _,y=!1;for(_=0;_<b.length;_+=1)b[_]===B&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(h=0;h<p;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(_r(t)==="object"){for(s in t)if(i=t[s],m(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,B=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?B.push("/"+b+" /"+r[b].value):B.push("/"+b+" "+r[b].value));B.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+B.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Qt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(o=a.metadata.characterToGlyph(i.charCodeAt(h)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var a,o,l,c,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(i).sort(function(p,b){return p-b})).length;h<m;h++)a=o[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",b=0;b<m.length;b++)p+=String.fromCharCode(m[b]);var B=c();u({data:p,addLength1:!0,objectId:B}),l("endobj");var _=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+zu(o.fontName)),l("/FontFile2 "+B+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var w=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+zu(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+zu(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var b=c();u({data:m,addLength1:!0,objectId:b}),l("endobj");var B=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:B}),l("endobj");var _=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+zu(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+B+" 0 R/BaseFont/"+zu(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,c=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,p=h.activeFontKey,b=h.fonts,B=p,_="",y=0,w="",N=b[B].encoding;if(b[B].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:h};for(w=o,B=p,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)b[B].metadata.hasOwnProperty("cmap")&&(a=b[B].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),a||w[y].charCodeAt(0)<256&&b[B].metadata.hasOwnProperty("Unicode")?_+=w[y]:_+="";var O="";return parseInt(B.slice(1))<14||N==="WinAnsiEncoding"?O=m(_,B).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(O=r(_,b[B])),h.isHex=!0,{text:O,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])}(Qt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Qt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,l,c,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},B={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var O=function(I){var U=I.charCodeAt(),T=U>>8,ee=B[T];return ee!==void 0?h[256*ee+(255&U)]:T===252||T===253?"AL":y.test(T)?"L":T===8?"R":"N"},R=function(I){for(var U,T=0;T<I.length;T++){if((U=O(I.charAt(T)))==="L")return!1;if(U==="R")return!0}return!1},M=function(I,U,T,ee){var le,re,ue,W,ce=U[ee];switch(ce){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(ce="AN");break;case"AL":w=!0,ce="R";break;case"WS":ce="N";break;case"CS":ee<1||ee+1>=U.length||(le=T[ee-1])!=="EN"&&le!=="AN"||(re=U[ee+1])!=="EN"&&re!=="AN"?ce="N":w&&(re="AN"),ce=re===le?re:"N";break;case"ES":ce=(le=ee>0?T[ee-1]:"B")==="EN"&&ee+1<U.length&&U[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&T[ee-1]==="EN"){ce="EN";break}if(w){ce="N";break}for(ue=ee+1,W=U.length;ue<W&&U[ue]==="ET";)ue++;ce=ue<W&&U[ue]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(W=U.length,ue=ee+1;ue<W&&U[ue]==="NSM";)ue++;if(ue<W){var ie=I[ee],Ee=ie>=1425&&ie<=2303||ie===64286;if(le=U[ue],Ee&&(le==="R"||le==="AL")){ce="R";break}}}ce=ee<1||(le=U[ee-1])==="B"?"N":T[ee-1];break;case"B":w=!1,s=!0,ce=N;break;case"S":i=!0,ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":ce="N"}return ce},F=function(I,U,T){var ee=I.split("");return T&&E(ee,T,{hiLevel:N}),ee.reverse(),U&&U.reverse(),ee.join("")},E=function(I,U,T){var ee,le,re,ue,W,ce=-1,ie=I.length,Ee=0,P=[],k=N?p:m,z=[];for(w=!1,s=!1,i=!1,le=0;le<ie;le++)z[le]=O(I[le]);for(re=0;re<ie;re++){if(W=Ee,P[re]=M(I,z,P,re),ee=240&(Ee=k[W][b[P[re]]]),Ee&=15,U[re]=ue=k[Ee][5],ee>0)if(ee===16){for(le=ce;le<re;le++)U[le]=1;ce=-1}else ce=-1;if(k[Ee][6])ce===-1&&(ce=re);else if(ce>-1){for(le=ce;le<re;le++)U[le]=ue;ce=-1}z[re]==="B"&&(U[re]=0),T.hiLevel|=ue}i&&function(te,$,ne){for(var X=0;X<ne;X++)if(te[X]==="S"){$[X]=N;for(var de=X-1;de>=0&&te[de]==="WS";de--)$[de]=N}}(z,U,ie)},L=function(I,U,T,ee,le){if(!(le.hiLevel<I)){if(I===1&&N===1&&!s)return U.reverse(),void(T&&T.reverse());for(var re,ue,W,ce,ie=U.length,Ee=0;Ee<ie;){if(ee[Ee]>=I){for(W=Ee+1;W<ie&&ee[W]>=I;)W++;for(ce=Ee,ue=W-1;ce<ue;ce++,ue--)re=U[ce],U[ce]=U[ue],U[ue]=re,T&&(re=T[ce],T[ce]=T[ue],T[ue]=re);Ee=W}Ee++}}},D=function(I,U,T){var ee=I.split(""),le={hiLevel:N};return T||(T=[]),E(ee,T,le),function(re,ue,W){if(W.hiLevel!==0&&u)for(var ce,ie=0;ie<re.length;ie++)ue[ie]===1&&(ce=_.indexOf(re[ie]))>=0&&(re[ie]=_[ce+1])}(ee,T,le),L(2,ee,U,T,le),L(1,ee,U,T,le),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(I,U,T){if(function(le,re){if(re)for(var ue=0;ue<le.length;ue++)re[ue]=ue;o===void 0&&(o=R(le)),c===void 0&&(c=R(le))}(I,U),a||!l||c)if(a&&l&&o^c)N=o?1:0,I=F(I,U,T);else if(!a&&l&&c)N=o?1:0,I=D(I,U,T),I=F(I,U);else if(!a||o||l||c){if(a&&!l&&o^c)I=F(I,U),o?(N=0,I=D(I,U,T)):(N=1,I=D(I,U,T),I=F(I,U));else if(a&&o&&!l&&c)N=1,I=D(I,U,T),I=F(I,U);else if(!a&&!l&&o^c){var ee=u;o?(N=1,I=D(I,U,T),N=0,u=!1,I=D(I,U,T),u=ee):(N=0,I=D(I,U,T),I=F(I,U),N=1,u=!1,I=D(I,U,T),u=ee,I=F(I,U))}}else N=0,I=D(I,U,T);else N=o?1:0,I=D(I,U,T);return I},this.__bidiEngine__.setOptions=function(I){I&&(a=I.isInputVisual,l=I.isOutputVisual,o=I.isInputRtl,c=I.isOutputRtl,u=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Qt),Qt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new bl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new o$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zz(this.contents),this.head=new Wz(this),this.name=new e$(this),this.cmap=new P3(this),this.toUnicode={},this.hhea=new Xz(this),this.maxp=new t$(this),this.hmtx=new r$(this),this.post=new Yz(this),this.os2=new Jz(this),this.loca=new a$(this),this.glyf=new n$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var pa,bl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),zz=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,l,c,u,h,m,p,b,B;for(B in p=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),a=Math.floor(h/l),u=16*p-h,(s=new bl).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(a),s.writeShort(u),i=16*p,c=s.pos+i,o=null,b=[],r)for(m=r[B],s.writeString(B),s.writeInt(t(m)),s.writeInt(c),s.writeInt(m.length),b=b.concat(m),B==="head"&&(o=c),c+=m.length;c%4;)b.push(0),c++;return s.write(b),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=Q3.call(r);r.length%4;)r.push(0);for(i=new bl(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),$z={}.hasOwnProperty,za=function(t,e){for(var r in e)$z.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};pa=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Wz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new bl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),CN=function(){function t(e,r){var n,s,i,a,o,l,c,u,h,m,p,b,B,_,y,w,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,i=function(){var O,R;for(R=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)R.push(e.readUInt16());return R}(),e.pos+=2,B=function(){var O,R;for(R=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)R.push(e.readUInt16());return R}(),c=function(){var O,R;for(R=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)R.push(e.readUInt16());return R}(),u=function(){var O,R;for(R=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)R.push(e.readUInt16());return R}(),s=(this.length-e.pos+this.offset)/2,o=function(){var O,R;for(R=[],l=O=0;0<=s?O<s:O>s;l=0<=s?++O:--O)R.push(e.readUInt16());return R}(),l=y=0,N=i.length;y<N;l=++y)for(_=i[l],n=w=b=B[l];b<=_?w<=_:w>=_;n=b<=_?++w:--w)u[l]===0?a=n+c[l]:(a=o[u[l]/2+(n-b)-(m-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=h}return t.encode=function(e,r){var n,s,i,a,o,l,c,u,h,m,p,b,B,_,y,w,N,O,R,M,F,E,L,D,I,U,T,ee,le,re,ue,W,ce,ie,Ee,P,k,z,te,$,ne,X,de,ge,Ce,Ue;switch(ee=new bl,a=Object.keys(e).sort(function(Te,ae){return Te-ae}),r){case"macroman":for(B=0,_=function(){var Te=[];for(b=0;b<256;++b)Te.push(0);return Te}(),w={0:0},i={},le=0,ce=a.length;le<ce;le++)w[de=e[s=a[le]]]==null&&(w[de]=++B),i[s]={old:e[s],new:w[e[s]]},_[s]=w[e[s]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(_),{charMap:i,subtable:ee.data,maxGlyphID:B+1};case"unicode":for(U=[],h=[],N=0,w={},n={},y=c=null,re=0,ie=a.length;re<ie;re++)w[R=e[s=a[re]]]==null&&(w[R]=++N),n[s]={old:R,new:w[R]},o=w[R]-s,y!=null&&o===c||(y&&h.push(y),U.push(s),c=o),y=s;for(y&&h.push(y),h.push(65535),U.push(65535),D=2*(L=U.length),E=2*Math.pow(Math.log(L)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,F=2*L-E,l=[],M=[],p=[],b=ue=0,Ee=U.length;ue<Ee;b=++ue){if(I=U[b],u=h[b],I===65535){l.push(0),M.push(0);break}if(I-(T=n[I].new)>=32768)for(l.push(0),M.push(2*(p.length+L-b)),s=W=I;I<=u?W<=u:W>=u;s=I<=u?++W:--W)p.push(n[s].new);else l.push(T-I),M.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*L+2*p.length),ee.writeUInt16(0),ee.writeUInt16(D),ee.writeUInt16(E),ee.writeUInt16(m),ee.writeUInt16(F),ne=0,P=h.length;ne<P;ne++)s=h[ne],ee.writeUInt16(s);for(ee.writeUInt16(0),X=0,k=U.length;X<k;X++)s=U[X],ee.writeUInt16(s);for(ge=0,z=l.length;ge<z;ge++)o=l[ge],ee.writeUInt16(o);for(Ce=0,te=M.length;Ce<te;Ce++)O=M[Ce],ee.writeUInt16(O);for(Ue=0,$=p.length;Ue<$;Ue++)B=p[Ue],ee.writeUInt16(B);return{charMap:n,subtable:ee.data,maxGlyphID:N+1}}},t}(),P3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new CN(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=CN.encode(r,n),(i=new bl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Jz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Yz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(r.readUInt32());return c}).call(this)}},e}(),Zz=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},e$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,o,l,c,u,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},a=h=0,m=s.length;h<m;a=++h)i=s[a],r.pos=i.offset,u=r.readString(i.length),o=new Zz(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),t$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),r$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,o,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,m,p;for(p=[],u=0,h=(m=this.metrics).length;u<h;u++)a=m[u],p.push(a.advance);return p}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Q3=[].slice,n$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,o,l,c,u,h,m;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(l=new bl(n.read(i))).readShort(),u=l.readShort(),m=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new i$(l,u,m,c,h):new s$(l,o,u,m,c,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,o,l,c;for(o=[],a=[],l=0,c=n.length;l<c;l++)i=r[n[l]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),s$=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),i$=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new bl(Q3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),a$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},e}(),o$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,l,c,u,h,m,p,b,B,_,y;for(s in n=P3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},y=n.charMap)p[(l=y[s]).old]=l.new;for(b in m=n.maxGlyphID,a)b in p||(p[b]=m++);return u=function(w){var N,O;for(N in O={},w)O[w[N]]=N;return O}(p),h=Object.keys(u).sort(function(w,N){return w-N}),B=function(){var w,N,O;for(O=[],w=0,N=h.length;w<N;w++)o=h[w],O.push(u[o]);return O}(),i=this.font.glyf.encode(a,B,p),c=this.font.loca.encode(i.offsets,B),_={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();Qt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const lx=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Rz,AcroFormAppearance:Bt,AcroFormButton:Un,AcroFormCheckBox:Pf,AcroFormChoiceField:Bc,AcroFormComboBox:Ec,AcroFormEditBox:Tf,AcroFormListBox:Cc,AcroFormPasswordField:Qf,AcroFormPushButton:Uf,AcroFormRadioButton:_c,AcroFormTextField:ul,GState:xp,ShadingPattern:HA,TilingPattern:gc,default:Qt,jsPDF:Qt},Symbol.toStringTag,{value:"Module"}));async function A$(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:jt.now()};return is(dt(Le,"inventory_batches"),e)}async function L3(t,e){await sn(Pt(Le,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:jt.now()})}async function l$(t,e){const r=Yt(dt(Le,"batch_allocations"),cr("saleDate",">=",t),cr("saleDate","<=",e)),n=await Tt(r),s={};return n.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function c$(t){const e=Pt(Le,"salesV2",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)){for(const o of n.items)if(Array.isArray(o==null?void 0:o.allocations))for(const l of o.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&s.push({batchId:c,qty:u})}}if(Array.isArray(n.allocations))for(const o of n.allocations){const l=String((o==null?void 0:o.batchId)||"").trim(),c=Number((o==null?void 0:o.qty)||0);l&&c&&s.push({batchId:l,qty:c})}if(s.length===0)return await Al(Le,async o=>{o.delete(e)}),{restored:0};const i=new Map;for(const o of s)i.set(o.batchId,Number((i.get(o.batchId)||0)+o.qty));let a=0;return await Al(Le,async o=>{const l=Array.from(i.entries()),c=l.map(([h])=>Pt(Le,"inventory_batches",h)),u=await Promise.all(c.map(h=>o.get(h)));l.forEach(([h,m],p)=>{const b=u[p];if(!b.exists())return;const B=b.data(),_=Number((B==null?void 0:B.remaining)??0),y=Number((_+Number(m||0)).toFixed(3));o.update(c[p],{remaining:y}),a+=Number(m||0)}),o.delete(e)}),{restored:a}}function th(){const[t,e]=Q.useState(0),r=Q.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const _i=t=>Math.round((Number(t)||0)*100)/100,mg=t=>Math.round((Number(t)||0)*1e3)/1e3,Hh=t=>Number(t??0).toFixed(2),Yy=t=>Number(t??0).toFixed(3),EN=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?Zt(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const a=Number((s==null?void 0:s.qty)??0),o=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*a-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:a,amount:_i(o),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function u$({role:t}){const[e,r]=Q.useState([]),[n,s]=Q.useState([]),[i,a]=Q.useState(null),[o,l]=Q.useState(!0),[c,u]=Q.useState(""),[h,m]=Q.useState("ALL"),[p,b]=Q.useState(null),[B,_]=Q.useState(0),[y,w]=Q.useState(0),[N,O]=Q.useState(""),[R,M]=Q.useState(0),[F,E]=Q.useState("0"),L=Zt(new Date,"yyyy-MM-dd"),D=Q.useRef(null),{refreshKey:I}=th();Q.useEffect(()=>{const $=Yt(dt(Le,"salesV2"),cr("date","==",L)),ne=I2($,X=>{const de=[];X.forEach(ge=>{const Ce=EN(ge.data(),ge.id);de.push(...Ce)}),r(de),l(!1)});return()=>ne()},[L,I]),Q.useEffect(()=>{const $=Yt(dt(Le,"salesV2"),cr("status","==","FLOTANTE")),ne=I2($,X=>{const de=[];X.forEach(ge=>{const Ce=EN(ge.data(),ge.id);de.push(...Ce)}),s(de)});return()=>ne()},[I]),Q.useEffect(()=>{(async()=>{const ne=Yt(dt(Le,"daily_closures"),cr("date","==",L)),X=await Tt(ne);if(X.empty)a(null);else{const de=X.docs[0];a({id:de.id,...de.data()})}})()},[L,I]);const U=No.useMemo(()=>{if(h==="FLOTANTE"){const $=[...e,...n],ne=new Map;for(const X of $)X.status==="FLOTANTE"&&ne.set(X.id,X);return Array.from(ne.values())}if(h==="ALL"){const $=[...e,...n],ne=new Map;for(const X of $)ne.set(X.id,X);return Array.from(ne.values())}return e.filter($=>$.status==="PROCESADA")},[h,e,n]);_i(U.reduce(($,ne)=>$+(ne.amountSuggested||0),0));const T=_i(U.reduce(($,ne)=>$+(ne.amount||0),0)),ee=mg(U.reduce(($,ne)=>$+(ne.quantity||0),0)),le=_i(U.reduce(($,ne)=>$+Number(ne.cogsAmount??0),0)),re=_i(T-le),ue={};U.forEach($=>{const ne=$.productName||"(sin nombre)";ue[ne]||(ue[ne]={totalQuantity:0,totalAmount:0}),ue[ne].totalQuantity=mg(ue[ne].totalQuantity+($.quantity||0)),ue[ne].totalAmount=_i(ue[ne].totalAmount+($.amount||0))});const W=Object.entries(ue).map(([$,ne])=>({productName:$,totalQuantity:ne.totalQuantity,totalAmount:ne.totalAmount})),ce=async()=>{try{const $=U.filter(Te=>Te.status==="FLOTANTE"),ne=$.length>0?$:e.filter(Te=>Te.status!=="PROCESADA");if(ne.length===0){u("No hay ventas para procesar.");return}const X={totalCharged:_i(ne.reduce((Te,ae)=>Te+(ae.amount||0),0)),totalSuggested:_i(ne.reduce((Te,ae)=>Te+(ae.amountSuggested||0),0)),totalUnits:mg(ne.reduce((Te,ae)=>Te+(ae.quantity||0),0)),totalCOGS:_i(ne.reduce((Te,ae)=>Te+Number(ae.cogsAmount??0),0))},de=_i(X.totalCharged-X.totalSuggested),ge=_i(X.totalCharged-X.totalCOGS),Ce=await is(dt(Le,"daily_closures"),{date:L,createdAt:jt.now(),totalCharged:X.totalCharged,totalSuggested:X.totalSuggested,totalDifference:de,totalUnits:X.totalUnits,totalCOGS:X.totalCOGS,grossProfit:ge,products:ne.map(Te=>({productName:Te.productName,quantity:Te.quantity,amount:Te.amount})),salesV2:ne.map(Te=>({id:Te.id,productName:Te.productName,quantity:Te.quantity,amount:Te.amount,amountSuggested:Te.amountSuggested,userEmail:Te.userEmail,clientName:Te.clientName,amountReceived:Te.amountReceived,change:Te.change,status:Te.status,cogsAmount:Te.cogsAmount??0,avgUnitCost:Te.avgUnitCost??null,allocations:Te.allocations??[],date:Te.date})),productSummary:Object.entries(ne.reduce((Te,ae)=>{const oe=ae.productName||"(sin nombre)";return Te[oe]||(Te[oe]={totalQuantity:0,totalAmount:0}),Te[oe].totalQuantity=mg(Te[oe].totalQuantity+(ae.quantity||0)),Te[oe].totalAmount=_i(Te[oe].totalAmount+(ae.amount||0)),Te},{})).map(([Te,ae])=>({productName:Te,totalQuantity:ae.totalQuantity,totalAmount:ae.totalAmount}))}),Ue=rw(Le);ne.forEach(Te=>{Ue.update(Pt(Le,"salesV2",Te.id.split("#")[0]),{status:"PROCESADA",closureId:Ce.id,closureDate:L})}),await Ue.commit(),u(`✅ Cierre guardado. Ventas procesadas: ${ne.length}.`)}catch($){console.error($),u("❌ Error al guardar el cierre.")}},ie=async $=>{if(window.confirm("¿Revertir esta venta? Esta acción no se puede deshacer."))try{await sn(Pt(Le,"salesV2",$.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),u("↩️ Venta revertida a FLOTANTE.")}catch(ne){console.error(ne),u("❌ No se pudo revertir la venta.")}},Ee=$=>{b($),_($.quantity),w($.amount),O($.clientName),M($.amountReceived),E($.change)},P=async()=>{if(p)try{await sn(Pt(Le,"salesV2",p.id.split("#")[0]),{quantity:B,amount:y,amountCharged:y,clientName:N,amountReceived:R,change:F}),b(null),u("✅ Venta actualizada.")}catch($){console.error($),u("❌ No se pudo actualizar la venta.")}},k=async $=>{if(window.confirm("¿Eliminar esta venta? Se restaurará el stock en los lotes asignados."))try{const{restored:ne}=await c$($.split("#")[0]);u(`🗑️ Venta eliminada. Stock restaurado: ${Number(ne).toFixed(2)}.`)}catch(ne){console.error(ne),u("❌ No se pudo eliminar la venta.")}},z=async()=>{if(D.current){D.current.classList.add("force-pdf-colors");try{const ne=(await xB(D.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),X=new Qt;X.addImage(ne,"PNG",10,10,190,0),X.save(`cierre_${L}.pdf`)}finally{D.current.classList.remove("force-pdf-colors")}}},te=!t||t==="admin";return A.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[A.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",L]}),A.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[A.jsx("label",{className:"text-sm",children:"Filtrar:"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:$=>m($.target.value),children:[A.jsx("option",{value:"ALL",children:"Todas"}),A.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),A.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?A.jsx("p",{children:"Cargando ventas..."}):A.jsxs("div",{ref:D,children:[A.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Estado"}),A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Fecha venta"}),A.jsx("th",{className:"border p-2",children:"Vendedor"}),A.jsx("th",{className:"border p-2",children:"Acciones"})]})}),A.jsxs("tbody",{children:[U.map($=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:$.status})}),A.jsx("td",{className:"border p-1",children:$.productName}),A.jsx("td",{className:"border p-1",children:Yy($.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Hh($.amount)]}),A.jsx("td",{className:"border p-1",children:$.date}),A.jsx("td",{className:"border p-1",children:$.userEmail}),A.jsx("td",{className:"border p-1",children:$.status==="FLOTANTE"?A.jsxs("div",{className:"flex gap-2 justify-center",children:[te&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>Ee($),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),A.jsx("button",{onClick:()=>k($.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!te&&A.jsx("span",{className:"text-gray-400 text-xs",children:"—"})]}):$.status==="PROCESADA"?A.jsx("div",{className:"flex gap-2 justify-center",children:te?A.jsx("button",{onClick:()=>ie($.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):A.jsx("span",{className:"text-gray-400 text-xs",children:"—"})}):A.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},$.id)),U.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[A.jsxs("div",{children:[" ","Total Libras/Unidades: ",A.jsx("strong",{children:Yy(ee)})]}),A.jsxs("div",{children:[" ","Total cobrado: ",A.jsxs("strong",{children:["C$",Hh(T)]})]})]}),(le>0||re!==T)&&A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[A.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",A.jsxs("strong",{children:["C$",Hh(le)]})]}),A.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",A.jsxs("strong",{children:["C$",Hh(re)]})]})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),A.jsxs("tbody",{children:[W.map($=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:$.productName}),A.jsx("td",{className:"border p-1",children:Yy($.totalQuantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Hh($.totalAmount)]})]},$.productName)),W.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:ce,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del día"}),A.jsx("button",{onClick:z,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&A.jsx("p",{className:"mt-2 text-sm",children:c}),p&&A.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),A.jsxs("div",{className:"text-sm text-gray-500",children:[p.productName," • ",p.userEmail]}),A.jsx("label",{className:"text-sm",children:"Cantidad"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:B,onChange:$=>_(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Monto cobrado"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:y,onChange:$=>w(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Cliente"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:N,onChange:$=>O($.target.value)}),A.jsx("label",{className:"text-sm",children:"Paga con"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:R,onChange:$=>M(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Vuelto"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:F,onChange:$=>E($.target.value)}),A.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[A.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),A.jsx("button",{onClick:P,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Ei=t=>Number(t??0).toFixed(2),Qu=t=>Number(t??0).toFixed(3);function d$(){var w,N,O,R;const t=async M=>{if(!window.confirm(`¿Eliminar el cierre del ${M.date}?`))return;const F=window.confirm("¿También quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(F){const E=await Tt(Yt(dt(Le,"salesV2"),cr("closureId","==",M.id)));if(!E.empty){const L=rw(Le);E.forEach(D=>{L.update(Pt(Le,"salesV2",D.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await L.commit()}}await Us(Pt(Le,"daily_closures",M.id)),(c==null?void 0:c.id)===M.id&&u(null),await b(),m(`🗑️ Cierre eliminado${F?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),m("❌ No se pudo eliminar el cierre.")}},[e,r]=Q.useState(Zt(jV(new Date),"yyyy-MM-dd")),[n,s]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[i,a]=Q.useState(!0),[o,l]=Q.useState([]),[c,u]=Q.useState(null),[h,m]=Q.useState(""),p=Q.useRef(null),b=async()=>{try{a(!0);const M=Yt(dt(Le,"daily_closures"),cr("date",">=",e),cr("date","<=",n)),F=await Tt(M),E=[];F.forEach(L=>E.push({id:L.id,...L.data()})),E.sort((L,D)=>L.date<D.date?1:L.date>D.date?-1:0),l(E)}catch(M){console.error(M),m("❌ Error cargando el historial.")}finally{a(!1)}};Q.useEffect(()=>{b()},[]);const B=async M=>{M.preventDefault(),b()},_=Q.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const M=Number(c.totalUnits??0),F=Number(c.totalSuggested??0),E=Number(c.totalCharged??0),L=Number(c.totalDifference??(isFinite(E-F)?E-F:0)),D=Number(c.totalCOGS??0),I=Number(c.grossProfit??(isFinite(E-D)?E-D:0));return{units:M,sug:F,chg:E,diff:L,cogs:D,profit:I}},[c]),y=async()=>{if(!p.current||!c)return;const M=p.current;M.classList.add("force-pdf-colors");try{const[{default:F},{jsPDF:E}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>bB),void 0),Qo(()=>Promise.resolve().then(()=>lx),void 0)]),D=(await F(M,{backgroundColor:"#ffffff",onclone:T=>{const ee=T.defaultView;T.body.querySelectorAll("*").forEach(re=>{const ue=ee.getComputedStyle(re);ue.color&&(re.style.color=ue.color),ue.backgroundColor&&ue.backgroundColor!=="rgba(0, 0, 0, 0)"&&(re.style.backgroundColor=ue.backgroundColor),ue.borderColor&&(re.style.borderColor=ue.borderColor)})}})).toDataURL("image/png"),{jsPDF:I}=await Qo(async()=>{const{jsPDF:T}=await Promise.resolve().then(()=>lx);return{jsPDF:T}},void 0),U=new I;U.addImage(D,"PNG",10,10,190,0),U.save(`cierre_${c.date}.pdf`)}finally{M.classList.remove("force-pdf-colors")}};return A.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histórico de cierres"}),A.jsxs("form",{onSubmit:B,className:"flex flex-wrap items-end gap-3 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:M=>r(M.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:M=>s(M.target.value)})]}),A.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?A.jsx("p",{children:"Cargando..."}):o.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):A.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Fecha"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Monto de venta"}),A.jsx("th",{className:"border p-2",children:"Monto al costo"}),A.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),A.jsx("th",{className:"border p-2",children:"Acciones"})]})}),A.jsx("tbody",{children:o.map(M=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.date}),A.jsx("td",{className:"border p-1",children:Qu(M.totalUnits)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalCharged)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalCOGS)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.grossProfit??Number(M.totalCharged??0)-Number(M.totalCOGS??0))]}),A.jsx("td",{className:"border p-1",children:A.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[A.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>u(M),children:"Ver detalle"}),A.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(M),children:"Eliminar"})]})})]},M.id))})]}),c&&A.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[A.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),A.jsx("button",{onClick:()=>u(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),A.jsx("button",{onClick:y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),A.jsxs("div",{ref:p,className:"space-y-4",children:[A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:A.jsxs("div",{children:["Total Libras/Unidades: ",A.jsx("strong",{children:Qu(_.units)})]})}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[A.jsxs("div",{children:["Monto al costo:"," ",A.jsxs("strong",{children:["C$",Ei(_.cogs)]})]}),A.jsxs("div",{children:["Ganancia sin gastos:"," ",A.jsxs("strong",{children:["C$",Ei(_.profit)]})]})]}),(w=c.salesV2)!=null&&w.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto de ventas"}),A.jsx("th",{className:"border p-2",children:"Monto al costo"}),A.jsx("th",{className:"border p-2",children:"Fecha venta"}),A.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),A.jsx("tbody",{children:c.salesV2.map((M,F)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName??"(sin nombre)"}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.cogsAmount)]}),A.jsx("td",{className:"border p-1",children:M.date??"—"}),A.jsx("td",{className:"border p-1",children:M.userEmail??""})]},F))})]})]}):(N=c.sales)!=null&&N.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Vendedor"}),A.jsx("th",{className:"border p-2",children:"Cliente"}),A.jsx("th",{className:"border p-2",children:"Paga con"}),A.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),A.jsx("tbody",{children:c.sales.map((M,F)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName??"(sin nombre)"}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]}),A.jsx("td",{className:"border p-1",children:M.userEmail??""}),A.jsx("td",{className:"border p-1",children:M.clientName??""}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amountReceived)]}),A.jsx("td",{className:"border p-1",children:typeof M.change=="number"?Ei(M.change):M.change??"0"})]},F))})]})]}):(O=c.products)!=null&&O.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto"})]})}),A.jsx("tbody",{children:c.products.map((M,F)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]})]},F))})]})]}):A.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(R=c.productSummary)!=null&&R.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),A.jsx("tbody",{children:c.productSummary.map((M,F)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName}),A.jsx("td",{className:"border p-1",children:Qu(M.totalQuantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalAmount)]})]},F))})]})]}):null]})]}),h&&A.jsx("p",{className:"mt-3 text-sm",children:h})]})}function h$(){const[t,e]=Q.useState(""),[r,n]=Q.useState(""),[s,i]=Q.useState(""),[a,o]=Q.useState(!1),[l,c]=Q.useState("vendedor_pollo"),[u,h]=Q.useState(""),[m,p]=Q.useState([]),[b,B]=Q.useState(!0),[_,y]=Q.useState(null),[w,N]=Q.useState("vendedor_pollo"),[O,R]=Q.useState(!1),M=le=>!le||le==="vendedor"?"vendedor_pollo":le==="admin"||le==="vendedor_pollo"||le==="vendedor_ropa"?le:"vendedor_pollo",F=async()=>{B(!0);const le=await Tt(dt(Le,"users")),re=[];le.forEach(ue=>{const W=ue.data();re.push({id:ue.id,email:W.email??"",name:W.name??"",role:M(W.role)})}),p(re),B(!1)};Q.useEffect(()=>{F()},[]);const E=()=>{e(""),n(""),i(""),c("vendedor_pollo")},L=async le=>{if(le.preventDefault(),h(""),s.length<4){h("❌ La contraseña debe tener al menos 4 caracteres.");return}if(!t.trim()){h("❌ El nombre es obligatorio.");return}try{const re=mb(),ue=pb(re.options,"Secondary"),W=s4(ue),ce=await GR(W,r,s);await rU(Pt(dt(Le,"users"),ce.user.uid),{email:r,name:t.trim(),role:M(l)}),await zF(W),await OD(ue);const ie=M(l);p(Ee=>[{id:ce.user.uid,email:r,name:t.trim(),role:ie},...Ee]),h("✅ Usuario creado correctamente."),E(),R(!1)}catch(re){console.error(re),h("❌ Error al crear el usuario: "+re.message)}},D=le=>{y(le.id),N(M(le.role))},I=()=>{y(null),N("vendedor_pollo")},U=async()=>{if(!_)return;const le=Pt(Le,"users",_),re=M(w);await sn(le,{role:re}),p(ue=>ue.map(W=>W.id===_?{...W,role:re}:W)),I()},T=async le=>{confirm("¿Eliminar este usuario del listado?")&&(await Us(Pt(Le,"users",le)),p(ue=>ue.filter(W=>W.id!==le)))},ee=le=>{const re=le==="admin"?"admin":le==="vendedor_ropa"?"vendedor_ropa":le==="vendedor_pollo"||le==="vendedor"?"vendedor_pollo":le,ue=re==="admin"?"bg-blue-100 text-blue-700":re==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700";return A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue}`,children:re})};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),A.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>R(!0),type:"button",children:"Crear usuario"})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Email"}),A.jsx("th",{className:"p-2 border",children:"Rol"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:b?A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando…"})}):m.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(le=>{const re=_===le.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:le.name||"—"}),A.jsx("td",{className:"p-2 border",children:le.email}),A.jsx("td",{className:"p-2 border",children:re?A.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:ue=>N(ue.target.value),children:[A.jsx("option",{value:"admin",children:"Admin"}),A.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),A.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]}):ee(le.role)}),A.jsx("td",{className:"p-2 border space-x-2",children:re?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:U,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:I,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>D(le),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>T(le.id),children:"Eliminar"})]})})]},le.id)})})]})}),u&&A.jsx("p",{className:"text-sm mt-2",children:u}),O&&A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>R(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:L,className:"space-y-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:le=>e(le.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrónico"}),A.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:le=>n(le.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-1 relative",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contraseña (mínimo 6 caracteres)"}),A.jsx("input",{type:a?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:s,onChange:le=>i(le.target.value),required:!0}),A.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>o(le=>!le),children:a?"🙈":"👁️"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:l,onChange:le=>c(le.target.value),children:[A.jsx("option",{value:"admin",children:"Admin"}),A.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),A.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),u&&A.jsx("p",{className:"text-sm mt-2",children:u})]})]})]})}const f$=t=>`C$${(Number(t)||0).toFixed(2)}`;function p$(){const[t,e]=Q.useState(""),[r,n]=Q.useState(0),[s,i]=Q.useState(""),[a,o]=Q.useState(""),[l,c]=Q.useState(""),[u,h]=Q.useState([]),[m,p]=Q.useState(!0),[b,B]=Q.useState(!1),[_,y]=Q.useState(null),[w,N]=Q.useState(""),[O,R]=Q.useState(""),[M,F]=Q.useState(""),[E,L]=Q.useState(0),[D,I]=Q.useState(!1),U=async()=>{p(!0);const ie=await Tt(dt(Le,"products")),Ee=[];ie.forEach(P=>{const k=P.data();Ee.push({id:P.id,name:k.name??"",price:Number(k.price??0),category:k.category??"",measurement:k.measurement??"",active:k.active!==!1})}),h(Ee),p(!1)};Q.useEffect(()=>{U()},[]);const T=async ie=>{if(ie.preventDefault(),i(""),!t||r<=0||!l){i("❌ Completa nombre, precio válido y unidad de medida");return}try{const Ee={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:l,active:!0},P=await is(dt(Le,"products"),Ee);h(k=>[{id:P.id,...Ee},...k]),i("✅ Producto registrado con exito."),e(""),n(0),c(""),o(""),I(!1)}catch(Ee){i("❌ Error: "+Ee.message)}},ee=ie=>{y(ie.id),N(ie.name),R(ie.category),F(ie.measurement),L(ie.price)},le=()=>{y(null),N(""),R(""),F(""),L(0)},re=async()=>{if(!_)return;const ie=Pt(Le,"products",_);await sn(ie,{name:w,category:O,measurement:M,price:parseFloat((E||0).toFixed(2))}),h(Ee=>Ee.map(P=>P.id===_?{...P,name:w,category:O,measurement:M,price:parseFloat((E||0).toFixed(2))}:P)),le()},ue=async ie=>{const Ee=Pt(Le,"products",ie.id),P=ie.active===!1;await sn(Ee,{active:P}),h(k=>k.map(z=>z.id===ie.id?{...z,active:P}:z))},W=async ie=>{const Ee=Yt(dt(Le,"inventory_batches"),cr("productId","==",ie),eU(1));if(!(await Tt(Ee)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactívalo para ocultarlo.`);return}confirm("¿Eliminar este producto definitivamente?")&&(await Us(Pt(Le,"products",ie)),h(z=>z.filter(te=>te.id!==ie)))},ce=b?u:u.filter(ie=>ie.active!==!1);return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),A.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{i(""),I(!0)},children:[A.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),D&&A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>I(!1)}),A.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[A.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cerrar"})]}),A.jsxs("form",{onSubmit:T,className:"space-y-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categoría"}),A.jsxs("select",{value:a,onChange:ie=>o(ie.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"pollo",children:"Pollo"}),A.jsx("option",{value:"cerdo",children:"Cerdo"}),A.jsx("option",{value:"huevo",children:"Huevos"}),A.jsx("option",{value:"ropa",children:"Ropa"}),A.jsx("option",{value:"otros",children:"Otros"})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:ie=>e(ie.target.value)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),A.jsxs("select",{value:l,onChange:ie=>c(ie.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"lb",children:"Libra"}),A.jsx("option",{value:"kg",children:"Kilogramo"}),A.jsx("option",{value:"unidad",children:"Unidad"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:ie=>n(parseFloat(ie.target.value)),onFocus:ie=>ie.target.value==="0"?n(NaN):null})]}),A.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&A.jsx("p",{className:"text-sm mt-2",children:s})]})]})]}),A.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[A.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),A.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[A.jsx("input",{type:"checkbox",checked:b,onChange:ie=>B(ie.target.checked)}),"Mostrar inactivos"]})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Categoría"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Precio"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:m?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando…"})}):ce.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):ce.map(ie=>{const Ee=_===ie.id,P=ie.active!==!1;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Ee?A.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:k=>N(k.target.value)}):ie.name}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:k=>R(k.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"pollo",children:"Pollo"}),A.jsx("option",{value:"cerdo",children:"Cerdo"}),A.jsx("option",{value:"huevo",children:"Huevos"}),A.jsx("option",{value:"ropa",children:"Ropa"}),A.jsx("option",{value:"otros",children:"Otros"})]}):ie.category}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsxs("select",{className:"w-full border p-1 rounded",value:M,onChange:k=>F(k.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"lb",children:"Libra"}),A.jsx("option",{value:"kg",children:"Kilogramo"}),A.jsx("option",{value:"unidad",children:"Unidad"})]}):ie.measurement}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:k=>L(parseFloat(k.target.value))}):f$(ie.price)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${P?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:P?"Activo":"Inactivo"})}),A.jsx("td",{className:"p-2 border space-x-2",children:Ee?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:re,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:le,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ee(ie),children:"Editar"}),A.jsx("button",{className:`px-2 py-1 rounded ${P?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>ue(ie),children:P?"Desactivar":"Activar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>W(ie.id),children:"Eliminar"})]})})]},ie.id)})})]})})]})}const Yn=[];for(let t=0;t<256;++t)Yn.push((t+256).toString(16).slice(1));function m$(t,e=0){return(Yn[t[e+0]]+Yn[t[e+1]]+Yn[t[e+2]]+Yn[t[e+3]]+"-"+Yn[t[e+4]]+Yn[t[e+5]]+"-"+Yn[t[e+6]]+Yn[t[e+7]]+"-"+Yn[t[e+8]]+Yn[t[e+9]]+"-"+Yn[t[e+10]]+Yn[t[e+11]]+Yn[t[e+12]]+Yn[t[e+13]]+Yn[t[e+14]]+Yn[t[e+15]]).toLowerCase()}let Zy;const g$=new Uint8Array(16);function v$(){if(!Zy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zy=crypto.getRandomValues.bind(crypto)}return Zy(g$)}const w$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_N={randomUUID:w$};function y$(t,e,r){var s;if(_N.randomUUID&&!t)return _N.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??v$();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,m$(n)}async function x$(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=dt(t,"inventory_batches"),i=Yt(s,cr("productName","==",e)),l=(await Tt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var B,_;const h=c.data.date??"",m=u.data.date??"";if(h!==m)return h<m?-1:1;const p=((B=c.data.createdAt)==null?void 0:B.seconds)??0,b=((_=u.data.createdAt)==null?void 0:_.seconds)??0;return p-b}).map(c=>Pt(t,"inventory_batches",c.id));return Al(t,async c=>{let u=Number(r);const h=[],m=await Promise.all(l.map(_=>c.get(_)));for(let _=0;_<l.length&&u>0;_++){const y=l[_],w=m[_];if(!w.exists())continue;const N=w.data(),O=Number(N.quantity??0),R=Number(N.remaining??O??0),M=Number(N.purchasePrice??0);if(R<=0)continue;const F=Math.min(R,u),E=Number((R-F).toFixed(3));c.update(y,{remaining:E}),h.push({batchId:y.id,qty:F,unitCost:M,lineCost:Number((F*M).toFixed(2))}),u=Number((u-F).toFixed(3))}if(u>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${u} unidades.`);const p=Number(h.reduce((_,y)=>_+y.lineCost,0).toFixed(2)),b=h.reduce((_,y)=>_+y.qty,0),B=b>0?Number((p/b).toFixed(4)):0;return{allocations:h,avgUnitCost:B,cogsAmount:p}})}const j3=3,b$=.5*10**-j3;function ns(t){const e=Number(t??0);return Number(e.toFixed(j3))}function e1(t,e){return ns((t??0)+(e??0))}function gg(t,e){return ns(t)+b$>=ns(e)}async function B$(t,e){const r=await Tt(dt(Le,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await sn(Pt(Le,"inventory_batches",i.id),{productId:e}),s++)}return s}function NN({user:t}){const[e,r]=Q.useState([]),[n,s]=Q.useState([]),[i,a]=Q.useState(""),[o,l]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[c,u]=Q.useState(""),[h,m]=Q.useState([]),[p,b]=Q.useState(0),[B,_]=Q.useState(0),[y,w]=Q.useState("0"),[N,O]=Q.useState(""),[R,M]=Q.useState(!1),[F,E]=Q.useState({}),L=k=>Math.round(k*100)/100,D=k=>ns(k).toFixed(3),I=async k=>{if(!k)return 0;const z=Yt(dt(Le,"inventory_batches"),cr("productId","==",k)),te=await Tt(z);let $=0;return te.forEach(ne=>{const X=ne.data();$=e1($,Number(X.remaining||0))}),ns($)},U=async k=>{if(!k)return 0;const z=await Tt(dt(Le,"inventory_batches"));let te=0;return z.forEach($=>{const ne=$.data();(ne.productName||"").trim().toLowerCase()===k.trim().toLowerCase()&&(te=e1(te,Number(ne.remaining||0)))}),ns(te)};Q.useEffect(()=>{(async()=>{const k=await Tt(dt(Le,"products")),z=[];k.forEach(te=>{const $=te.data();($==null?void 0:$.active)!==!1&&z.push({id:te.id,productName:$.name??$.productName??"(sin nombre)",price:Number($.price??0),measurement:$.measurement??"(sin unidad)",category:$.category??"(sin categoría)"})}),r(z)})()},[]),Q.useEffect(()=>{(async()=>{const k=await Tt(dt(Le,"inventory_batches")),z={};k.forEach(te=>{const $=te.data(),ne=$.productId,X=Number($.remaining||0);ne&&(z[ne]=e1(z[ne]||0,X))}),Object.keys(z).forEach(te=>z[te]=ns(z[te])),E(z)})()},[]),Q.useEffect(()=>{(async()=>{const k=await Tt(dt(Le,"users")),z=[];k.forEach(te=>{const $=te.data();z.push({id:te.id,email:$.email??"(sin email)",role:$.role??"USER"})}),s(z)})()},[]);const T=async()=>{if(!i)return;const k=e.find(te=>te.id===i);if(!k)return;if(h.some(te=>te.productId===k.id)){a("");return}const z=await I(k.id);m(te=>[...te,{productId:k.id,productName:k.productName,measurement:k.measurement,price:Number(k.price||0),stock:z,qty:0,discount:0}]),a("")},ee=k=>{m(z=>z.filter(te=>te.productId!==k))},le=async(k,z)=>{m(te=>te.map($=>{if($.productId!==k)return $;const ne=($.measurement||"").toLowerCase()!=="lb",X=z===""?0:Number(z),de=ne?Math.max(0,Math.round(X)):ns(X);return{...$,qty:de}}))},re=(k,z)=>{m(te=>te.map($=>{if($.productId!==k)return $;const ne=Math.max(0,Math.floor(Number(z||0)));return{...$,discount:ne}}))},ue=Q.useMemo(()=>{let k=0;for(const z of h){const te=Number(z.price||0)*Number(z.qty||0),$=Math.max(0,te-Math.max(0,Number(z.discount||0)));k+=$}return L(k)},[h]);Q.useEffect(()=>{b(ue)},[ue]),Q.useEffect(()=>{const k=Number(B)||0,z=Number(p)||0;w((k-z).toFixed(2))},[B,p]);const W=k=>{k.key===","&&(k.preventDefault(),k.target.value+=".")},ce=async()=>{if(h.length===0)return"Agrega al menos un producto.";for(const k of h){if(!k.qty||k.qty<=0)return`Cantidad inválida para "${k.productName}".`;const z=await I(k.productId);if(!gg(z,k.qty)){const te=await U(k.productName);if(gg(te,0)&&!gg(z,0)){const $=await B$(k.productName,k.productId),ne=await I(k.productId);if(!gg(ne,k.qty))return`Stock insuficiente tras corregir ${$} lote(s) para "${k.productName}".`}else return`Stock insuficiente para "${k.productName}". Disponible: ${z}`}}return null},ie=async k=>{var te,$;k.preventDefault(),O("");const z=await ce();if(z){O("❌ "+z);return}try{M(!0);const ne=[];for(const ge of h){const Ce=ge.qty,{allocations:Ue,avgUnitCost:Te,cogsAmount:ae}=await x$(Le,ge.productName,Ce,!1),oe=Number(ge.price||0)*Number(Ce||0),G=Math.max(0,Number(ge.discount||0)),Me=Math.max(0,oe-G);ne.push({productId:ge.productId,productName:ge.productName,measurement:ge.measurement,unitPrice:Number(ge.price||0),qty:Ce,discount:G,lineTotal:L(oe),lineFinal:L(Me),allocations:Ue,avgUnitCost:Te,cogsAmount:ae})}const X=ne.reduce((ge,Ce)=>ge+Ce.lineFinal,0),de=ne.reduce((ge,Ce)=>ge+Number(Ce.qty||0),0);await is(dt(Le,"salesV2"),{id:y$(),quantity:de,amount:X,amountCharged:X,amountReceived:Number(B)||0,change:y,clientName:c.trim(),timestamp:jt.now(),date:o,userEmail:((te=n[0])==null?void 0:te.email)??"sin usuario",vendor:(($=n[0])==null?void 0:$.role)??"sin usuario",status:"FLOTANTE",items:ne,itemsTotal:X}),O("✅ Venta registrada y asignada a inventario (FIFO)."),m([]),a(""),b(0),_(0),w("0"),u(""),l(Zt(new Date,"yyyy-MM-dd"))}catch(ne){console.error(ne),O(`❌ ${(ne==null?void 0:ne.message)||"Error al registrar la venta."}`)}finally{M(!1)}},Ee=Q.useMemo(()=>new Set(h.map(k=>k.productId)),[h]),P=Q.useMemo(()=>e.filter(k=>(F[k.id]||0)>0),[e,F]);return A.jsxs("div",{className:"relative",children:[A.jsxs("form",{onSubmit:ie,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-5xl space-y-4`,children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:i,onChange:k=>a(k.target.value),children:[A.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),P.map(k=>A.jsxs("option",{value:k.id,disabled:Ee.has(k.id),title:Ee.has(k.id)?"Ya está en la lista":`Disponible: ${D(F[k.id]||0)}`,children:[k.productName," — ",k.measurement," — C$ ",k.price," (disp:"," ",D(F[k.id]||0),")"]},k.id))]}),A.jsx("button",{type:"button",onClick:T,disabled:!i||Ee.has(i),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),A.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:o,onChange:k=>l(k.target.value)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),A.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:c,onChange:k=>u(k.target.value),placeholder:"Opcional"})]})]}),A.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:A.jsxs("table",{className:"min-w-full text-sm r",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{className:"text-center",children:[A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"—"})]})}),A.jsx("tbody",{children:h.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):h.map(k=>{const z=Number(k.price||0)*Number(k.qty||0),te=Math.max(0,z-Math.max(0,Number(k.discount||0))),$=(k.measurement||"").toLowerCase()!=="lb",ne=ns(Number(k.stock)-Number(k.qty||0));return A.jsxs("tr",{className:"text-center",children:[A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[k.productName," — ",k.measurement]}),A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(k.price).toFixed(2)]}),A.jsx("td",{className:"p-2 border whitespace-nowrap",children:ne.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"number",step:$?1:.01,inputMode:$?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:k.qty===0?"":k.qty,onKeyDown:W,onChange:X=>le(k.productId,X.target.value),placeholder:"0",title:"Cantidad"})}),A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:k.discount===0?"":k.discount,onChange:X=>re(k.productId,X.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(te).toFixed(2)]}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>ee(k.productId),title:"Quitar",children:"✕"})})]},k.productId)})})]})}),A.jsxs("div",{className:"space-y-1 ",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:"💵 Monto total"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${p.toFixed(2)}`,readOnly:!0,title:"Suma de (precio × cantidad − descuento) de cada producto."})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:B===0?"":B,onChange:k=>_(Number(k.target.value||0))})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${y}`,readOnly:!0})]})]}),A.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:h.length===0||R,children:R?"Guardando...":"Guardar venta"}),N&&A.jsx("p",{className:`text-sm mt-2 ${N.startsWith("✅")?"text-green-600":N.startsWith("⚠️")?"text-yellow-600":"text-red-600"}`,children:N})]}),R&&A.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:A.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("span",{className:"font-semibold",children:"Guardando venta…"})]})})})]})}var k3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IN=No.createContext&&No.createContext(k3),C$=["attr","size","title"];function E$(t,e){if(t==null)return{};var r=_$(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function SN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function iv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(r),!0).forEach(function(n){N$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N$(t,e,r){return e=I$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I$(t){var e=S$(t,"string");return typeof e=="symbol"?e:e+""}function S$(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D3(t){return t&&t.map((e,r)=>No.createElement(e.tag,iv({key:r},e.attr),D3(e.child)))}function F$(t){return e=>No.createElement(T$,sv({attr:iv({},t.attr)},e),D3(t.child))}function T$(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=E$(t,C$),o=s||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),No.createElement("svg",sv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:iv(iv({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&No.createElement("title",null,i),t.children)};return IN!==void 0?No.createElement(IN.Consumer,null,r=>e(r)):e(k3)}function U$(t){return F$({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function zp({onClick:t,loading:e,className:r=""}){return A.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[A.jsx(U$,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const Rn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function P$(){const[t,e]=Q.useState([]),[r,n]=Q.useState([]),[s,i]=Q.useState(!0),[a,o]=Q.useState(""),{refreshKey:l,refresh:c}=th(),[u,h]=Q.useState(Zt(Zd(new Date),"yyyy-MM-dd")),[m,p]=Q.useState(Zt(Yd(new Date),"yyyy-MM-dd")),[b,B]=Q.useState(""),[_,y]=Q.useState(!1),[w,N]=Q.useState(""),[O,R]=Q.useState(0),[M,F]=Q.useState(0),[E,L]=Q.useState(0),[D,I]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[U,T]=Q.useState(0),[ee,le]=Q.useState(0),[re,ue]=Q.useState(""),[W,ce]=Q.useState(null),[ie,Ee]=Q.useState(""),[P,k]=Q.useState(0),[z,te]=Q.useState(0),[$,ne]=Q.useState(0),[X,de]=Q.useState(""),[ge,Ce]=Q.useState(0),[Ue,Te]=Q.useState(0);Q.useEffect(()=>{(async()=>{i(!0),console.log("Refrescando...",l);const xe=await Tt(dt(Le,"products")),Ge=[];xe.forEach(At=>{const he=At.data();Ge.push({id:At.id,name:he.name??he.productName??"(sin nombre)",category:he.category??"(sin categoría)",measurement:he.measurement??"lb",price:Number(he.price??0)})}),e(Ge);const $e=Yt(dt(Le,"inventory_batches"),fi("date","desc")),tt=await Tt($e),ct=[];tt.forEach(At=>{const he=At.data(),_e=ns(Number(he.quantity||0)),at=Number(he.purchasePrice||0),xt=Number(he.salePrice||0),or=Number((_e*at).toFixed(2)),Kt=Number((_e*xt).toFixed(2));ct.push({id:At.id,productId:he.productId,productName:he.productName,category:he.category,unit:he.unit,quantity:_e,remaining:ns(Number(he.remaining||0)),purchasePrice:at,salePrice:xt,invoiceTotal:he.invoiceTotal!=null?Number(he.invoiceTotal):or,expectedTotal:he.expectedTotal!=null?Number(he.expectedTotal):Kt,date:he.date,createdAt:he.createdAt,status:he.status,notes:he.notes,paidAmount:Number(he.paidAmount||0),paidAt:he.paidAt})}),n(ct),i(!1)})()},[l]),Q.useEffect(()=>{const xe=t.find(Ge=>Ge.id===w);xe&&L(Number(xe.price||0))},[w,t,l]),Q.useEffect(()=>{T(Math.floor(O*M*100)/100)},[O,M,l]),Q.useEffect(()=>{le(Math.floor(O*E*100)/100)},[O,E,l]);const ae=xe=>{const Ge=(xe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ge)||Ge==="lb"},oe=Q.useMemo(()=>r.filter(xe=>!(u&&xe.date<u||m&&xe.date>m||b&&xe.productId!==b)),[r,u,m,b]),G=Q.useMemo(()=>{const xe=oe.reduce((at,xt)=>at+Number(xt.invoiceTotal||0),0),Ge=oe.reduce((at,xt)=>at+Number(xt.expectedTotal||0),0);let $e=0,tt=0,ct=0,At=0;for(const at of oe)ae(at.unit)?($e+=at.quantity,tt+=at.remaining):(ct+=at.quantity,At+=at.remaining);const he=oe.reduce((at,xt)=>at+xt.quantity,0),_e=oe.reduce((at,xt)=>at+xt.remaining,0);return{lbsIng:$e,lbsRem:tt,udsIng:ct,udsRem:At,qty:he,rem:_e,totalFacturado:xe,totalEsperado:Ge}},[oe]),Me=async xe=>{xe.preventDefault();const Ge=t.find($e=>$e.id===w);if(!Ge||O<=0||M<=0){o("Completa producto, cantidad y costo.");return}try{const $e=ns(O),tt=await A$({productId:Ge.id,productName:Ge.name,category:Ge.category,unit:Ge.measurement,quantity:$e,purchasePrice:M,salePrice:E,invoiceTotal:U,expectedTotal:ee,date:D,notes:re});n(ct=>[{id:tt.id,productId:Ge.id,productName:Ge.name,category:Ge.category,unit:Ge.measurement,quantity:$e,remaining:$e,purchasePrice:M,salePrice:E,invoiceTotal:U,expectedTotal:ee,date:D,createdAt:jt.now(),status:"PENDIENTE",notes:re},...ct]),o("✅ Lote creado"),N(""),R(0),F(0),L(Ge.price||0),T(0),le(0),ue(""),y(!1)}catch($e){console.error($e),o("❌ Error al crear lote")}},ke=async xe=>{confirm(`Marcar PAGADO el lote del ${xe.date} (${xe.productName})?`)&&(await L3(xe.id),n($e=>$e.map(tt=>tt.id===xe.id?{...tt,status:"PAGADO"}:tt)))},Qe=xe=>{ce(xe.id),Ee(xe.date),k(ns(xe.quantity)),te(xe.purchasePrice),ne(xe.salePrice),de(xe.notes||""),Ce(Number((xe.quantity*xe.purchasePrice).toFixed(2))),Te(Number((xe.quantity*xe.salePrice).toFixed(2)))},je=()=>{ce(null),Ee(""),k(0),te(0),ne(0),de(""),Ce(0),Te(0)};Q.useEffect(()=>{W&&Ce(Math.floor(P*z*100)/100)},[W,P,z,l]),Q.useEffect(()=>{W&&Te(Math.floor(P*$*100)/100)},[W,P,$,l]);const We=async()=>{if(!W)return;const xe=r.find(ct=>ct.id===W);if(!xe)return;const Ge=ns(xe.quantity-xe.remaining),$e=Math.max(0,ns(P-Ge)),tt=Pt(Le,"inventory_batches",W);await sn(tt,{date:ie,quantity:ns(P),purchasePrice:z,salePrice:$,invoiceTotal:ge,expectedTotal:Ue,notes:X,remaining:$e}),n(ct=>ct.map(At=>At.id===W?{...At,date:ie,quantity:ns(P),purchasePrice:z,salePrice:$,invoiceTotal:ge,expectedTotal:Ue,notes:X,remaining:$e}:At)),je(),o("✅ Lote actualizado")},ze=async xe=>{confirm(`¿Eliminar el lote del ${xe.date} (${xe.productName})?`)&&(await Us(Pt(Le,"inventory_batches",xe.id)),n($e=>$e.filter(tt=>tt.id!==xe.id)),o("🗑️ Lote eliminado"))},nt=()=>{const xe=(u?`Desde ${u}`:"Desde inicio")+" — "+(m?`Hasta ${m}`:"Hasta hoy"),Ge=oe.map(ct=>{const At=Number(ct.invoiceTotal||0),he=Number(ct.expectedTotal||0);return`
      <tr>
        <td>${ct.date}</td>
        <td>${(ct.category||"").toUpperCase()}</td>
        <td>${ct.productName}</td>
        <td>${(ct.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${ct.quantity.toFixed(3)}</td>
        <td style="text-align:right">${ct.remaining.toFixed(3)}</td>
        <td style="text-align:right">${Rn(ct.purchasePrice)}</td>
        <td style="text-align:right">${Rn(ct.salePrice)}</td>
        <td style="text-align:right">${Rn(At)}</td>
        <td style="text-align:right">${Rn(he)}</td>
        <td>${ct.status}</td>
      </tr>`}).join(""),$e=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${xe}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${G.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${G.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${G.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${G.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${Rn(G.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${Rn(G.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${Rn(Number((G.totalEsperado-G.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${Ge||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,tt=window.open("","_blank");tt&&(tt.document.open(),tt.document.write($e),tt.document.close())};return A.jsxs("div",{className:"max-w-6xl mx-auto shadows-2xl",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Inventario (Pollo)"}),A.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>y(!0),children:"Crear Lote"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:xe=>h(xe.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:xe=>p(xe.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:xe=>B(xe.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),t.map(xe=>A.jsxs("option",{value:xe.id,children:[xe.name," — ",xe.category]},xe.id))]})]}),A.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{h(""),p(""),B("")},children:"Quitar filtro"}),A.jsx("button",{className:"px-3 py-1 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:nt,children:"Imprimir PDF"}),A.jsx("div",{className:"ml-auto",children:A.jsx(zp,{onClick:()=>c(),loading:s})})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",G.lbsIng.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",G.udsIng.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",G.totalEsperado.toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",G.lbsRem.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",G.udsRem.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",G.totalFacturado.toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(G.totalEsperado-G.totalFacturado).toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",oe.length.toLocaleString()]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Ingresado"}),A.jsx("th",{className:"p-2 border",children:"Restantes"}),A.jsx("th",{className:"p-2 border",children:"Precio Compra"}),A.jsx("th",{className:"p-2 border",children:"Precio Venta"}),A.jsx("th",{className:"p-2 border",children:"Total factura"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Total ganancia"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:s?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando…"})}):oe.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):oe.map(xe=>{const Ge=W===xe.id,$e=Number(xe.invoiceTotal||0),tt=Number(xe.expectedTotal||0);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Ge?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:ct=>Ee(ct.target.value)}):xe.date}),A.jsx("td",{className:"p-2 border",children:xe.category.toUpperCase()}),A.jsx("td",{className:"p-2 border",children:xe.productName}),A.jsx("td",{className:"p-2 border",children:xe.unit.toUpperCase()}),A.jsx("td",{className:"p-2 border",children:Ge?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(P)?"":P,onChange:ct=>{const At=ct.target.value.replace(",","."),he=parseFloat(At),_e=Number.isFinite(he)?parseFloat(he.toFixed(3)):0;k(Math.max(0,_e))}}):xe.quantity.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:Ge?xe.remaining:xe.remaining.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:Ge?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(z)?"":z,onChange:ct=>{const At=ct.target.value.replace(",","."),he=parseFloat(At),_e=Number.isFinite(he)?parseFloat(he.toFixed(2)):0;te(Math.max(0,_e))}}):Rn(xe.purchasePrice)}),A.jsx("td",{className:"p-2 border",children:Ge?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN($)?"":$,onChange:ct=>{const At=ct.target.value.replace(",","."),he=parseFloat(At),_e=Number.isFinite(he)?parseFloat(he.toFixed(2)):0;ne(Math.max(0,_e))}}):Rn(xe.salePrice)}),A.jsx("td",{className:"p-2 border",children:Rn(Ge?ge:$e)}),A.jsx("td",{className:"p-2 border",children:Rn(Ge?Ue:tt)}),A.jsx("td",{className:"p-2 border",children:Rn(Ge?Ue-ge:tt-$e)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})}),A.jsx("td",{className:"flex space-x-2 justify-center",children:Ge?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:We,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:je,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[xe.status==="PENDIENTE"&&A.jsx("button",{onClick:()=>ke(xe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Qe(xe),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ze(xe),children:"Borrar"})]})})]},xe.id)})})]})}),a&&A.jsx("p",{className:"mt-2 text-sm",children:a}),_&&Yf.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Lote"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:Me,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:xe=>N(xe.target.value),children:[A.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(xe=>A.jsxs("option",{value:xe.id,children:[xe.name," — ",xe.category," — ",xe.measurement," — Precio:"," ",Rn(xe.price)]},xe.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:D,onChange:xe=>I(xe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:xe=>{const Ge=xe.target.value.replace(",","."),$e=parseFloat(Ge),tt=Number.isFinite($e)?parseFloat($e.toFixed(3)):0;R(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:xe=>{const Ge=xe.target.value.replace(",","."),$e=parseFloat(Ge),tt=Number.isFinite($e)?parseFloat($e.toFixed(2)):0;F(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:E===0?"":E,onChange:xe=>{const Ge=xe.target.value.replace(",","."),$e=parseFloat(Ge),tt=Number.isFinite($e)?parseFloat($e.toFixed(2)):0;L(tt)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(U),readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Rn(ee),readOnly:!0})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),A.jsx("input",{className:"w-full border p-2 rounded",value:re,onChange:xe=>ue(xe.target.value)})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body)]})}const mo=t=>`C$${(Number(t)||0).toFixed(2)}`;function Q$(){const t=kV(new Date),[e,r]=Q.useState(Zt(t,"yyyy-MM")),[n,s]=Q.useState([]),[i,a]=Q.useState(!1),[o,l]=Q.useState(""),c=Q.useRef(null),u=Q.useMemo(()=>{const[_,y]=e.split("-").map(O=>parseInt(O,10)),w=Zt(Zd(new Date(_,y-1,1)),"yyyy-MM-dd"),N=Zt(Yd(new Date(_,y-1,1)),"yyyy-MM-dd");return{from:w,to:N}},[e]),h=async()=>{a(!0);try{const _=await l$(u.from,u.to),y=[];for(const w of _){const N=Pt(Le,"inventory_batches",w.batchId),O=await zo(N);if(!O.exists())continue;const R=O.data();y.push({batchId:w.batchId,batchDate:w.batchDate,productName:w.productName,soldQty:Number(w.quantity||0),soldAmount:Number(w.amountCharged||0),status:R.status??"PENDIENTE",purchasePrice:Number(R.purchasePrice||0),salePrice:Number(R.salePrice||0),supplier:R.supplier})}s(y)}catch(_){console.error(_),l("❌ Error al cargar liquidaciones")}finally{a(!1)}};Q.useEffect(()=>{h()},[e]);const m=async _=>{confirm("Marcar este lote como PAGADO?")&&(await L3(_),s(w=>w.map(N=>N.batchId===_?{...N,status:"PAGADO"}:N)))},p=Q.useMemo(()=>{const _=n.reduce((O,R)=>O+R.soldQty,0),y=n.reduce((O,R)=>O+R.soldAmount,0),w=n.reduce((O,R)=>O+R.soldQty*R.purchasePrice,0),N=y-w;return{q:_,amt:y,cogs:w,profit:N}},[n]),b=Q.useMemo(()=>{const _=new Map;for(const y of n){const w=y.productName||"(sin nombre)";_.has(w)||_.set(w,{productName:w,qty:0,revenue:0,cogs:0,profit:0});const N=_.get(w);N.qty+=y.soldQty,N.revenue+=y.soldAmount;const O=y.soldQty*y.purchasePrice;N.cogs+=O,N.profit=N.revenue-N.cogs}return Array.from(_.values()).sort((y,w)=>y.productName.localeCompare(w.productName))},[n]),B=async()=>{if(!c.current)return;const _=c.current;_.classList.add("force-pdf-colors");try{const[{default:y},{jsPDF:w}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>bB),void 0),Qo(()=>Promise.resolve().then(()=>lx),void 0)]),O=(await y(_,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),R=new w("p","mm","a4"),M=190,F=R.getImageProperties(O),E=M,L=F.height*E/F.width;R.addImage(O,"PNG",10,10,E,L),R.save(`liquidaciones_${e}.pdf`)}catch(y){console.error(y),alert("No se pudo generar el PDF")}finally{_.classList.remove("force-pdf-colors")}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),A.jsx("button",{onClick:B,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[A.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),A.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:_=>r(_.target.value)}),A.jsx("button",{onClick:h,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),A.jsxs("div",{ref:c,children:[A.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",p.q]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",mo(p.amt)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",mo(p.cogs)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",mo(p.profit)]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Proveedor"}),A.jsx("th",{className:"p-2 border",children:"Vendido"}),A.jsx("th",{className:"p-2 border",children:"Monto vendido"}),A.jsx("th",{className:"p-2 border",children:"COGS"}),A.jsx("th",{className:"p-2 border",children:"Utilidad"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:i?A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando…"})}):n.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(_=>{const y=_.soldQty*_.purchasePrice,w=_.soldAmount-y;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:_.batchDate}),A.jsx("td",{className:"p-2 border",children:_.productName}),A.jsx("td",{className:"p-2 border",children:_.supplier||"-"}),A.jsx("td",{className:"p-2 border",children:_.soldQty}),A.jsx("td",{className:"p-2 border",children:mo(_.soldAmount)}),A.jsx("td",{className:"p-2 border",children:mo(y)}),A.jsx("td",{className:`p-2 border ${w>=0?"text-green-700":"text-red-700"}`,children:mo(w)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_.status})}),A.jsx("td",{className:"p-2 border",children:_.status==="PENDIENTE"&&A.jsx("button",{onClick:()=>m(_.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},_.batchId)})})]})}),A.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),A.jsx("th",{className:"p-2 border",children:"Ingreso"}),A.jsx("th",{className:"p-2 border",children:"COGS"}),A.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),A.jsx("tbody",{children:b.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):b.map(_=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:_.productName}),A.jsx("td",{className:"p-2 border",children:_.qty}),A.jsx("td",{className:"p-2 border",children:mo(_.revenue)}),A.jsx("td",{className:"p-2 border",children:mo(_.cogs)}),A.jsx("td",{className:`p-2 border ${_.profit>=0?"text-green-700":"text-red-700"}`,children:mo(_.profit)})]},_.productName))})]})})]}),o&&A.jsx("p",{className:"mt-2 text-sm",children:o})]})}const go=t=>`C$${Number(t??0).toFixed(2)}`,L$=()=>Zt(new Date,"yyyy-MM-dd"),vg=t=>Number(t||0).toFixed(3);function j$(){const[t,e]=Q.useState(()=>{const R=new Date,M=new Date(R.getFullYear(),R.getMonth(),1);return Zt(M,"yyyy-MM-dd")}),[r,n]=Q.useState(L$()),[s,i]=Q.useState(!0),[a,o]=Q.useState([]),[l,c]=Q.useState([]),{refreshKey:u,refresh:h}=th();Q.useEffect(()=>{(async()=>{i(!0);const M=Yt(dt(Le,"salesV2"),cr("date",">=",t),cr("date","<=",r)),F=await Tt(M),E=[];F.forEach(U=>{const T=U.data(),ee=T.date??"";if(Array.isArray(T.items)&&T.items.length>0){T.items.forEach((le,re)=>{const ue=String(le.productName??"(sin nombre)"),W=Number(le.qty??0),ce=Number(le.lineFinal??0)||Math.max(0,Number(le.unitPrice||0)*W-Number(le.discount||0));E.push({id:`${U.id}#${re}`,date:ee,productName:ue,quantity:W,amount:ce,allocations:Array.isArray(le.allocations)?le.allocations:T.allocations,avgUnitCost:Number(le.avgUnitCost??T.avgUnitCost??0),measurement:le.measurement??T.measurement??""})});return}E.push({id:U.id,date:ee,productName:T.productName??"(sin nombre)",quantity:Number(T.quantity??0),amount:Number(T.amount??T.amountCharged??0),allocations:Array.isArray(T.allocations)?T.allocations:[],avgUnitCost:Number(T.avgUnitCost??0),measurement:T.measurement??""})}),o(E);const L=Yt(dt(Le,"expenses"),cr("date",">=",t),cr("date","<=",r)),D=await Tt(L),I=[];D.forEach(U=>{const T=U.data();I.push({id:U.id,date:T.date??"",category:T.category??"(sin categoría)",description:T.description??"",amount:Number(T.amount??0),status:T.status??"PAGADO",createdAt:T.createdAt})}),c(I),i(!1)})()},[t,r,u]);const m=Q.useMemo(()=>{const R=a.reduce((D,I)=>D+(I.amount||0),0);let M=0;a.forEach(D=>{var I;(I=D.allocations)!=null&&I.length?M+=D.allocations.reduce((U,T)=>U+Number(T.lineCost||0),0):D.avgUnitCost&&D.quantity&&(M+=Number(D.avgUnitCost)*Number(D.quantity))});const F=R-M,E=l.reduce((D,I)=>D+(I.amount||0),0),L=F-E;return{revenue:R,cogsReal:M,grossProfit:F,expensesSum:E,netProfit:L}},[a,l]),p=R=>String(R??"").toLowerCase().trim(),b=R=>Number(R.qty??R.quantity??0),B=R=>["lb","lbs","libra","libras"].includes(p(R)),_=R=>["unidad","unidades","ud","uds","pieza","piezas"].includes(p(R)),y=Q.useMemo(()=>a.reduce((R,M)=>B(M.measurement)?R+b(M):R,0),[a]),w=Q.useMemo(()=>a.reduce((R,M)=>_(M.measurement)?R+b(M):R,0),[a]),N=Q.useMemo(()=>{var M;const R=new Map;for(const F of a){const E=F.productName||"(sin nombre)";R.has(E)||R.set(E,{productName:E,units:0,revenue:0,cogs:0,profit:0,firstDate:F.date||"",lastDate:F.date||""});const L=R.get(E);L.units+=Number(F.quantity||0),L.revenue+=Number(F.amount||0),(!L.firstDate||F.date<(L.firstDate||F.date))&&(L.firstDate=F.date),(!L.lastDate||F.date>(L.lastDate||F.date))&&(L.lastDate=F.date);let D=0;(M=F.allocations)!=null&&M.length?D=F.allocations.reduce((I,U)=>I+Number(U.lineCost||0),0):F.avgUnitCost&&(D=Number(F.avgUnitCost)*Number(F.quantity||0)),L.cogs+=D,L.profit=L.revenue-L.cogs}return Array.from(R.values()).sort((F,E)=>F.productName.localeCompare(E.productName))},[a]),O=Q.useMemo(()=>[...N].sort((R,M)=>M.units-R.units).slice(0,3).map((R,M)=>({idx:M+1,name:R.productName,units:R.units})),[N]);return A.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl ",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas: Ingresos y Egresos"}),A.jsx(zp,{onClick:h,loading:s})]}),A.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:R=>e(R.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:R=>n(R.target.value)})]})]}),s?A.jsx("p",{children:"Cargando…"}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-4 bg-gray-50",children:[A.jsx(Vh,{title:"Ventas",value:go(m.revenue)}),A.jsx(Vh,{title:"Costo",value:go(m.cogsReal)}),A.jsx(Vh,{title:"Ganancia Bruta",value:go(m.grossProfit),positive:!0}),A.jsx(Vh,{title:"Gastos",value:go(m.expensesSum)}),A.jsx(Vh,{title:"Ganancia Neta",value:go(m.netProfit),positive:!0})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-4 bg-gray-50",children:[A.jsx(FN,{title:"Libras Vendidas",value:vg(y)}),A.jsx(FN,{title:"Unidades Vendidas",value:vg(w)}),A.jsx(k$,{title:"Productos más vendidos",items:O.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${vg(R.units)})`}))})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Fechas"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Ingreso"}),A.jsx("th",{className:"border p-2",children:"Costo"}),A.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),A.jsxs("tbody",{children:[N.map(R=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:R.productName}),A.jsx("td",{className:"border p-1",children:R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate} – ${R.lastDate}`:"—"}),A.jsx("td",{className:"border p-1",children:vg(R.units)}),A.jsx("td",{className:"border p-1",children:go(R.revenue)}),A.jsx("td",{className:"border p-1",children:go(R.cogs)}),A.jsx("td",{className:`border p-1 ${R.profit>=0?"text-green-700":"text-red-700"}`,children:go(R.profit)})]},R.productName)),N.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Fecha"}),A.jsx("th",{className:"border p-2",children:"Categoría"}),A.jsx("th",{className:"border p-2",children:"Descripción"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Estado"})]})}),A.jsxs("tbody",{children:[l.map(R=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:R.date}),A.jsx("td",{className:"border p-1",children:R.category}),A.jsx("td",{className:"border p-1",children:R.description}),A.jsx("td",{className:"border p-1",children:go(R.amount)}),A.jsx("td",{className:"border p-1",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})})]},R.id)),l.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function Vh({title:t,value:e,positive:r}){return A.jsxs("div",{className:"border rounded-2xl p-3",children:[A.jsx("div",{className:"text-[17px] text-gray-500",children:t}),A.jsx("div",{className:`text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function FN({title:t,value:e}){return A.jsxs("div",{className:"border rounded-lg p-3",children:[A.jsx("div",{className:"text-[17px] text-gray-500",children:t}),A.jsx("div",{className:"text-[20px] font-semibold",children:e})]})}function k$({title:t,items:e}){return A.jsxs("div",{className:"border rounded-lg p-3",children:[A.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),A.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?A.jsx("li",{className:"text-gray-500",children:"—"}):e.map(r=>A.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}const TN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],wg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function D$(){const[t,e]=Q.useState(Zt(Zd(new Date),"yyyy-MM-dd")),[r,n]=Q.useState(Zt(Yd(new Date),"yyyy-MM-dd")),[s,i]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=Q.useState(""),[l,c]=Q.useState(""),[u,h]=Q.useState(0),[m,p]=Q.useState("PENDIENTE"),[b,B]=Q.useState(""),[_,y]=Q.useState([]),[w,N]=Q.useState(!0),[O,R]=Q.useState(""),[M,F]=Q.useState(null),[E,L]=Q.useState(""),[D,I]=Q.useState(""),[U,T]=Q.useState(""),[ee,le]=Q.useState(0),[re,ue]=Q.useState("PENDIENTE"),[W,ce]=Q.useState("");Q.useEffect(()=>{(async()=>{N(!0);try{const X=Yt(dt(Le,"expenses"),fi("date","desc")),de=await Tt(X),ge=[];de.forEach(Ce=>{const Ue=Ce.data();ge.push({id:Ce.id,date:Ue.date||Zt(new Date,"yyyy-MM-dd"),category:Ue.category||"",description:Ue.description||"",amount:Number(Ue.amount||0),status:Ue.status||"PENDIENTE",notes:Ue.notes||"",createdAt:Ue.createdAt??jt.now()})}),y(ge)}catch(X){console.error(X),R("❌ Error al cargar gastos")}finally{N(!1)}})()},[]);const ie=Q.useMemo(()=>_.filter(X=>!(t&&X.date<t||r&&X.date>r)),[_,t,r]),Ee=Q.useMemo(()=>{const X=ie.reduce((Ce,Ue)=>Ce+(Ue.amount||0),0),de=ie.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,Ue)=>Ce+(Ue.amount||0),0),ge=X-de;return{total:X,pagado:de,pendiente:ge}},[ie]),P=()=>{i(Zt(new Date,"yyyy-MM-dd")),o(""),c(""),h(0),p("PENDIENTE"),B("")},k=async X=>{if(X.preventDefault(),R(""),!a){R("Selecciona una categoría.");return}if(!l.trim()){R("Ingresa una descripción.");return}if(!u||u<=0){R("Ingresa un monto válido.");return}try{const de=await is(dt(Le,"expenses"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:jt.now()});y(ge=>[{id:de.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:jt.now()},...ge]),P(),R("✅ Gasto registrado")}catch(de){console.error(de),R("❌ Error al guardar gasto")}},z=X=>{F(X.id),L(X.date),I(X.category||""),T(X.description||""),le(Number(X.amount||0)),ue(X.status||"PENDIENTE"),ce(X.notes||"")},te=()=>{F(null),L(""),I(""),T(""),le(0),ue("PENDIENTE"),ce("")},$=async()=>{if(M){if(!D){R("Selecciona una categoría.");return}if(!U.trim()){R("Ingresa una descripción.");return}if(!ee||ee<=0){R("Ingresa un monto válido.");return}try{await sn(Pt(Le,"expenses",M),{date:E,category:D,description:U.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}),y(X=>X.map(de=>de.id===M?{...de,date:E,category:D,description:U.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}:de)),te(),R("✅ Gasto actualizado")}catch(X){console.error(X),R("❌ Error al actualizar gasto")}}},ne=async X=>{confirm(`¿Eliminar el gasto "${X.description}"?`)&&(await Us(Pt(Le,"expenses",X.id)),y(ge=>ge.filter(Ce=>Ce.id!==X.id)),R("🗑️ Gasto borrado"))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Pollo)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:X=>e(X.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:X=>n(X.target.value)})]}),A.jsxs("div",{className:"ml-auto text-sm",children:[A.jsx("div",{className:"font-semibold",children:"Totales del rango"}),A.jsxs("div",{children:["Total: ",wg(Ee.total)]}),A.jsxs("div",{children:["Pagado: ",wg(Ee.pagado)]}),A.jsxs("div",{children:["Pendiente: ",wg(Ee.pendiente)]})]})]}),A.jsxs("form",{onSubmit:k,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:X=>i(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Categoría"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:X=>o(X.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),TN.map(X=>A.jsx("option",{value:X,children:X},X))]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Descripción"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto…",value:l,onChange:X=>c(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:X=>h(Math.max(0,Number(X.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:X=>p(X.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:X=>B(X.target.value),maxLength:500,placeholder:"Comentario / nota opcional…"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categoría"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando…"})}):ie.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ie.slice().sort((X,de)=>X.date.localeCompare(de.date)).map(X=>{const de=M===X.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ge=>L(ge.target.value)}):X.date}),A.jsx("td",{className:"p-2 border",children:de?A.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:ge=>I(ge.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),TN.map(ge=>A.jsx("option",{value:ge,children:ge},ge))]}):X.category||"—"}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{className:"w-full border p-1 rounded",value:U,onChange:ge=>T(ge.target.value)}):A.jsx("span",{title:X.description,children:X.description.length>40?X.description.slice(0,40)+"…":X.description})}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ge=>le(Math.max(0,Number(ge.target.value||0)))}):wg(X.amount)}),A.jsx("td",{className:"p-2 border",children:de?A.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ge=>ue(ge.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:X.status})}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:W,onChange:ge=>ce(ge.target.value),maxLength:500}):A.jsx("span",{title:X.notes||"",children:(X.notes||"").length>40?(X.notes||"").slice(0,40)+"…":X.notes||"—"})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:de?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:te,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(X),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ne(X),children:"Borrar"})]})})})]},X.id)})})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O})]})}function av(t){return(t||"").trim().toLowerCase()}async function R3(){const t=await Tt(dt(Le,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=av(n.name??n.productName);s&&e.set(s,r.id)}),e}async function R$(t=!1){const e=await R3(),r=await Tt(dt(Le,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=av(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await sn(Pt(Le,"inventory_batches",s.id),{productId:o}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function M$(t,e=!1){const r=av(t),s=(await R3()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Tt(dt(Le,"inventory_batches"));let a=0;for(const o of i.docs){const l=o.data();av(l.productName)===r&&l.productId!==s&&(e||await sn(Pt(Le,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function O$(){const[t,e]=Q.useState(!1),[r,n]=Q.useState(""),s=async()=>{try{e(!0),n("");const l=await R$(!1);n(`✅ Hecho. Revisados: ${l.checked}, Corregidos: ${l.fixed}, Ok: ${l.alreadyOk}, Sin nombre: ${l.missingName}, Sin match: ${l.withoutMatch}. (Mira consola para detalles)`)}catch(l){n("❌ Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}},[i,a]=Q.useState(""),o=async()=>{if(!i.trim()){n("⚠️ Escribe el nombre del producto.");return}try{e(!0),n("");const l=await M$(i.trim(),!1);n(`✅ Hecho. Corregidos ${l} lote(s) para "${i}".`)}catch(l){n("❌ Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}};return A.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[A.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migración de Lotes"}),A.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",A.jsx("code",{children:"inventory_batches.productId"})," basándose en el nombre del producto. Úsalo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),A.jsx("div",{className:"space-y-2",children:A.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo…":"Corregir TODOS los lotes"})}),A.jsx("hr",{}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),A.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:l=>a(l.target.value)}),A.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo…":"Corregir lotes de ese producto"})]}),r&&A.jsx("p",{className:"text-sm",children:r})]})}const Or=t=>`C$ ${Number(t??0).toFixed(2)}`,Zl=t=>Number(t??0).toFixed(3);async function H$(t){const e=new Set;for(const n of t)for(const s of n.batches||[]){const i=(s.batchId||s.id||"").trim();if(!i)continue;(s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)&&e.add(i)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const s=await zo(Pt(Le,"inventory_batches",n));if(s.exists()){const i=s.data();r.set(n,Number(i.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(s=>{if((s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)){const i=(s.batchId||s.id||"").trim(),a=i?r.get(i):void 0;if(a!==void 0)return{...s,purchasePrice:a}}return s})}))}function t1(t){var B,_;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],s=Number(((B=t.totals)==null?void 0:B.lbs)??t.totalLbs??0),i=Number(((_=t.totals)==null?void 0:_.units)??t.totalUnits??0);let a=0,o=0;for(const y of e){const w=Number(y.quantity??0);let N=y.expectedTotal!==void 0&&y.expectedTotal!==null?Number(y.expectedTotal):w*Number(y.salePrice??0);isFinite(N)||(N=0);let O=w*Number(y.purchasePrice??Number.NaN);isFinite(O)||(O=y.invoiceTotal!==void 0&&y.invoiceTotal!==null?Number(y.invoiceTotal):0),a+=N,o+=O}const l=r.reduce((y,w)=>y+Number(w.amount||0),0),c=n.filter(y=>y.type==="DEBITO").reduce((y,w)=>y+Number(w.amount||0),0),u=n.filter(y=>y.type==="CREDITO").reduce((y,w)=>y+Number(w.amount||0),0),h=t.totalDebits!==void 0?Number(t.totalDebits):c,m=t.totalCredits!==void 0?Number(t.totalCredits):u,p=a-o,b=a-l-h+m;return{lbs:s,units:i,expectedSum:a,invoicedSum:o,expenses:l,debits:h,credits:m,grossProfit:p,finalAmount:b}}function V$(){const[t,e]=Q.useState([]),[r,n]=Q.useState(!0),[s,i]=Q.useState(null),a=Q.useRef(null);Q.useEffect(()=>{(async()=>{n(!0);const u=Yt(dt(Le,"invoices"),fi("date","desc")),h=await Tt(u),m=[];h.forEach(b=>{const B=b.data();m.push({id:b.id,...B,batches:B.batches||[],expenses:B.expenses||[],adjustments:B.adjustments||[],totals:B.totals||{lbs:B.totalLbs||0,units:B.totalUnits||0,amount:B.totalAmount||0,expenses:B.totalExpenses||0,finalAmount:B.finalAmount||0,invoiceTotal:B.invoiceTotal||0},totalDebits:B.totalDebits||0,totalCredits:B.totalCredits||0})});const p=await H$(m);e(p),n(!1)})()},[]);const o=async u=>{const h=u.status==="PAGADA"?"PENDIENTE":"PAGADA";await sn(Pt(Le,"invoices",u.id),{status:h}),e(m=>m.map(p=>p.id===u.id?{...p,status:h}:p)),(s==null?void 0:s.id)===u.id&&i({...u,status:h})},l=async u=>{if(window.confirm(`¿Eliminar factura del ${u.date}?`))try{const h=Pt(Le,"invoices",u.id),m=await zo(h),p=m.exists()?m.data():null,b=rw(Le),B=(p==null?void 0:p.batches)||[];for(const _ of B){const y=_.batchId||_.id;if(!y)continue;const w=Pt(Le,"inventory_batches",y);b.update(w,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}b.delete(h),await b.commit(),e(_=>_.filter(y=>y.id!==u.id)),(s==null?void 0:s.id)===u.id&&i(null)}catch(h){console.error(h),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const u=a.current,h=await xB(u,{backgroundColor:"#ffffff",onclone:_=>{const y=_.body;y.style.background="#ffffff",y.querySelectorAll("*").forEach(w=>{const N=_.defaultView.getComputedStyle(w);N.boxShadow&&N.boxShadow!=="none"&&(w.style.boxShadow="none")})},scale:2}),m=h.toDataURL("image/png"),p=new Qt("p","mm","a4"),b=p.internal.pageSize.getWidth(),B=h.height*b/h.width;p.addImage(m,"PNG",0,0,b,B),p.save(`factura_${s.number||s.date}.pdf`)};return A.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturación"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:A.jsxs("table",{className:"min-w-full w-full- text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"N° factura"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Libras"}),A.jsx("th",{className:"p-2 border",children:"Unidades"}),A.jsx("th",{className:"p-2 border",children:"Facturado"}),A.jsx("th",{className:"p-2 border",children:"Ventas"}),A.jsx("th",{className:"p-2 border",children:"Gastos"}),A.jsx("th",{className:"p-2 border",children:"Débitos"}),A.jsx("th",{className:"p-2 border",children:"Créditos"}),A.jsx("th",{className:"p-2 border",children:"Monto final"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando…"})}):t.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(u=>{const h=t1(u);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.date}),A.jsx("td",{className:"p-2 border",children:u.number||"—"}),A.jsx("td",{className:"p-2 border",children:u.description||"—"}),A.jsx("td",{className:"p-2 border",children:Zl(h.lbs)}),A.jsx("td",{className:"p-2 border",children:Zl(h.units)}),A.jsx("td",{className:"p-2 border",children:Or(h.invoicedSum)}),A.jsx("td",{className:"p-2 border",children:Or(h.expectedSum)}),A.jsx("td",{className:"p-2 border",children:Or(h.expenses)}),A.jsx("td",{className:"p-2 border",children:Or(h.debits)}),A.jsx("td",{className:"p-2 border",children:Or(h.credits)}),A.jsx("td",{className:"p-2 border",children:Or(h.finalAmount)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:u.status})}),A.jsx("td",{className:"p-2 border",children:A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(u),children:"Ver"}),A.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(u),children:u.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),A.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>l(u),children:"Eliminar"})]})})]},u.id)})})]})}),s&&A.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?`— ${s.number}`:""]}),A.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),A.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const u=t1(s);return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Zl(u.lbs)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Zl(u.units)]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Or(u.invoicedSum)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Or(u.expectedSum)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Or(u.grossProfit)]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Or(u.expenses)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Débitos:"})," ",Or(u.debits)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Créditos:"})," ",Or(u.credits)]})]})]})})(),A.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),A.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Cantidad"}),A.jsx("th",{className:"p-2 border",children:"Precio venta"}),A.jsx("th",{className:"p-2 border",children:"Total facturado"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),A.jsx("tbody",{children:(s.batches||[]).map((u,h)=>{const m=Number(u.quantity??0),p=u.expectedTotal!==void 0&&u.expectedTotal!==null?Number(u.expectedTotal):m*Number(u.salePrice??0);let b=m*Number(u.purchasePrice??Number.NaN);isFinite(b)||(b=u.invoiceTotal!==void 0&&u.invoiceTotal!==null?Number(u.invoiceTotal):0);const B=p-b;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.productName||"(sin nombre)"}),A.jsx("td",{className:"p-2 border",children:(u.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:Zl(u.quantity)}),A.jsx("td",{className:"p-2 border",children:Or(u.salePrice)}),A.jsx("td",{className:"p-2 border",children:Or(b)}),A.jsx("td",{className:"p-2 border",children:Or(p)}),A.jsx("td",{className:"p-2 border",children:Or(B)})]},h)})})]}),A.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),A.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:(s.expenses||[]).length>0?(s.expenses||[]).map((u,h)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.date}),A.jsx("td",{className:"p-2 border",children:u.description}),A.jsx("td",{className:"p-2 border",children:Or(u.amount)})]},h)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),A.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crédito/débito)"}),A.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),A.jsx("tbody",{children:(s.adjustments||[]).length>0?(s.adjustments||[]).map((u,h)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.description}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:u.type})}),A.jsx("td",{className:"p-2 border",children:Or(u.amount)}),A.jsx("td",{className:"p-2 border",children:s.date})]},h)):A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const u=t1(s);return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:["Total libras: ",A.jsx("strong",{children:Zl(u.lbs)})]}),A.jsxs("div",{children:["Total unidades: ",A.jsx("strong",{children:Zl(u.units)})]})]}),A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsxs("div",{children:["Total facturado (costo):"," ",A.jsx("strong",{children:Or(u.invoicedSum)})]}),A.jsxs("div",{children:["Total esperado (ventas):"," ",A.jsx("strong",{children:Or(u.expectedSum)})]}),A.jsxs("div",{children:["Ganancia bruta (esperado − facturado):"," ",A.jsx("strong",{children:Or(u.grossProfit)})]})]}),A.jsxs("div",{className:"space-y-1 text-right",children:[A.jsxs("div",{children:["Gastos: ",A.jsx("strong",{children:Or(u.expenses)})]}),A.jsxs("div",{children:["Débitos: ",A.jsx("strong",{children:Or(u.debits)})]}),A.jsxs("div",{children:["Créditos: ",A.jsx("strong",{children:Or(u.credits)})]})]}),A.jsx("div",{className:"md:col-span-3 mt-3",children:A.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[A.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado − gastos − débitos + créditos):"}),A.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Or(u.finalAmount)})]})})]})})()]})]})}const si=t=>`C$${Number(t||0).toFixed(2)}`,Lu=t=>Number(t||0).toFixed(3),K$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),r1=()=>{const t=new Date;return Zt(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},yg=()=>Zt(new Date,"yyyy-MM-dd");function q$({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=Q.useState(r1()),[a,o]=Q.useState(yg()),[l,c]=Q.useState(""),u=Q.useMemo(()=>{const he=new Map;return n.forEach(_e=>he.set(_e.productId,{id:_e.productId,name:_e.productName})),Array.from(he.values()).sort((_e,at)=>_e.name.localeCompare(at.name))},[n]),h=Q.useMemo(()=>n.filter(he=>!(s&&he.date<s||a&&he.date>a||l&&he.productId!==l)),[n,s,a,l]),[m,p]=Q.useState(yg()),[b,B]=Q.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[_,y]=Q.useState(""),[w,N]=Q.useState(()=>h.map(he=>he.id));Q.useEffect(()=>{N(he=>he.filter(_e=>h.some(at=>at.id===_e)))},[h]);const[O,R]=Q.useState([]),[M,F]=Q.useState([]),[E,L]=Q.useState(!1),[D,I]=Q.useState(r1()),[U,T]=Q.useState(yg());Q.useEffect(()=>{(async()=>{try{L(!0);const he=Yt(dt(Le,"expenses"),fi("date","desc")),_e=await Tt(he),at=[];_e.forEach(xt=>{const or=xt.data();at.push({id:xt.id,date:or.date,description:or.description,amount:Number(or.amount||0)})}),R(at)}catch(he){console.error(he)}finally{L(!1)}})()},[]);const ee=Q.useMemo(()=>O.filter(he=>!(!he.date||D&&he.date<D||U&&he.date>U)),[O,D,U]),[le,re]=Q.useState([]),[ue,W]=Q.useState(!1),[ce,ie]=Q.useState(""),[Ee,P]=Q.useState("DEBITO"),[k,z]=Q.useState(""),te=()=>{const he=Number(k);!ce.trim()||!isFinite(he)||he<=0||(re(_e=>[..._e,{id:`${Date.now()}_${_e.length+1}`,description:ce.trim(),type:Ee,amount:Number(he.toFixed(2))}]),ie(""),z(""))},[$,ne]=Q.useState(null),[X,de]=Q.useState(""),[ge,Ce]=Q.useState("DEBITO"),[Ue,Te]=Q.useState(""),ae=he=>{ne(he.id),de(he.description),Ce(he.type),Te(he.amount.toFixed(2))},oe=()=>{ne(null),de(""),Ce("DEBITO"),Te("")},G=()=>{if(!$)return;const he=Number(Ue);!isFinite(he)||he<=0||(re(_e=>_e.map(at=>at.id===$?{...at,description:X.trim(),type:ge,amount:Number(he.toFixed(2))}:at)),oe())},Me=he=>{re(_e=>_e.filter(at=>at.id!==he)),$===he&&oe()},ke=(he,_e)=>{N(at=>_e?[...new Set([...at,he])]:at.filter(xt=>xt!==he))},Qe=he=>{N(he?h.map(_e=>_e.id):[])},je=(he,_e)=>{F(at=>_e?[...new Set([...at,he])]:at.filter(xt=>xt!==he))},We=Q.useMemo(()=>h.filter(he=>w.includes(he.id)),[h,w]),ze=Q.useMemo(()=>le.filter(he=>he.type==="DEBITO").reduce((he,_e)=>he+_e.amount,0),[le]),nt=Q.useMemo(()=>le.filter(he=>he.type==="CREDITO").reduce((he,_e)=>he+_e.amount,0),[le]),xe=Q.useMemo(()=>{let he=0,_e=0,at=0,xt=0;for(const kt of We){K$(kt.unit)?he+=Number(kt.quantity||0):_e+=Number(kt.quantity||0);const un=kt.expectedTotal??Number((Number(kt.quantity||0)*Number(kt.salePrice||0)).toFixed(2)),Vt=kt.invoiceTotal!==void 0&&kt.invoiceTotal!==null?Number(kt.invoiceTotal):Number((Number(kt.quantity||0)*Number(kt.purchasePrice||0)).toFixed(2));at+=Number(un||0),xt+=Number(Vt||0)}const or=ee.filter(kt=>M.includes(kt.id)).reduce((kt,un)=>kt+Number(un.amount||0),0),Kt=at-or-ze+nt;return{totalLbs:he,totalUnits:_e,totalExpected:Number(at.toFixed(2)),totalInvoiced:Number(xt.toFixed(2)),totalGastos:Number(or.toFixed(2)),debits:Number(ze.toFixed(2)),credits:Number(nt.toFixed(2)),finalAmount:Number(Kt.toFixed(2)),grossProfit:Number((at-xt).toFixed(2))}},[We,ee,M,ze,nt]),[Ge,$e]=Q.useState(!1),[tt,ct]=Q.useState(""),At=async()=>{if(ct(""),We.length===0){ct("Selecciona al menos 1 lote pagado.");return}try{$e(!0);const he={number:b.trim(),date:m,description:_.trim(),status:"PENDIENTE",createdAt:jt.now(),totalLbs:Number(Lu(xe.totalLbs)),totalUnits:Number(Lu(xe.totalUnits)),totalAmount:xe.totalExpected,invoiceTotal:xe.totalInvoiced,totalExpenses:xe.totalGastos,totalDebits:xe.debits,totalCredits:xe.credits,finalAmount:xe.finalAmount,batches:We.map(_e=>{var at;return{id:_e.id,productId:_e.productId,productName:_e.productName,unit:_e.unit,quantity:Number(Lu(_e.quantity)),salePrice:Number(Number(_e.salePrice||0).toFixed(2)),purchasePrice:Number(Number(_e.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(_e.quantity||0)*Number(_e.salePrice||0)).toFixed(2)),invoiceTotal:_e.invoiceTotal!==void 0&&_e.invoiceTotal!==null?Number(_e.invoiceTotal):Number((Number(_e.quantity||0)*Number(_e.purchasePrice||0)).toFixed(2)),batchDate:_e.date,paidAt:(at=_e.paidAt)!=null&&at.toDate?Zt(_e.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:ee.filter(_e=>M.includes(_e.id)).map(_e=>({id:_e.id,date:_e.date||null,description:_e.description||"",amount:Number(Number(_e.amount||0).toFixed(2))})),adjustments:le.map(_e=>({id:_e.id,description:_e.description,type:_e.type,amount:Number(_e.amount.toFixed(2))}))};await is(dt(Le,"invoices"),he),ct("✅ Factura creada."),r()}catch(he){console.error(he),ct(`❌ Error al crear factura: ${(he==null?void 0:he.message)||"desconocido"}`)}finally{$e(!1)}};return A.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[A.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),A.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:m,onChange:he=>p(he.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Número"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:he=>B(he.target.value),placeholder:"FAC-001"})]}),A.jsxs("div",{className:"md:col-span-1",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Descripción"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:_,onChange:he=>y(he.target.value),placeholder:"Comentarios de la factura"})]})]}),A.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:A.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:he=>i(he.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:he=>o(he.target.value)})]}),A.jsxs("div",{className:"min-w-[220px]",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:l,onChange:he=>c(he.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),u.map(he=>A.jsx("option",{value:he.id,children:he.name},he.id))]})]}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(r1()),o(yg()),c("")},children:"Quitar filtro"})]})}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),A.jsxs("label",{className:"text-sm flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:h.length>0&&w.length===h.length,onChange:he=>Qe(he.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),h.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):A.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Sel"}),A.jsx("th",{className:"p-2 border",children:"Fecha lote"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Cantidad"}),A.jsx("th",{className:"p-2 border",children:"Precio venta"}),A.jsx("th",{className:"p-2 border",children:"Total facturado"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),A.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),A.jsx("tbody",{children:h.map(he=>{var Kt;const _e=w.includes(he.id),at=he.expectedTotal??Number((Number(he.quantity||0)*Number(he.salePrice||0)).toFixed(2)),xt=he.invoiceTotal!==void 0&&he.invoiceTotal!==null?Number(he.invoiceTotal):Number((Number(he.quantity||0)*Number(he.purchasePrice||0)).toFixed(2)),or=at-xt;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"checkbox",checked:_e,onChange:kt=>ke(he.id,kt.target.checked)})}),A.jsx("td",{className:"p-2 border",children:he.date}),A.jsx("td",{className:"p-2 border",children:he.productName}),A.jsx("td",{className:"p-2 border",children:(he.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:Lu(he.quantity)}),A.jsx("td",{className:"p-2 border",children:si(he.salePrice)}),A.jsx("td",{className:"p-2 border",children:si(xt)}),A.jsx("td",{className:"p-2 border",children:si(at)}),A.jsx("td",{className:"p-2 border",children:si(or)}),A.jsx("td",{className:"p-2 border",children:(Kt=he.paidAt)!=null&&Kt.toDate?Zt(he.paidAt.toDate(),"yyyy-MM-dd"):"—"})]},he.id)})})]})})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&A.jsx("span",{className:"text-xs text-gray-500",children:"Cargando…"}),A.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:D,onChange:he=>I(he.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:U,onChange:he=>T(he.target.value)})]})]})]}),ee.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):A.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Sel"}),A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:ee.map(he=>{const _e=M.includes(he.id);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"checkbox",checked:_e,onChange:at=>je(he.id,at.target.checked)})}),A.jsx("td",{className:"p-2 border",children:he.date||"—"}),A.jsx("td",{className:"p-2 border",children:he.description||"—"}),A.jsx("td",{className:"p-2 border",children:si(Number(he.amount||0))})]},he.id)})})]})})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Notas Crédito/Débito (Cargos extras)"}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>W(!0),children:"Crear Cargo"})]}),le.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):A.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:le.map(he=>{const _e=$===he.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:_e?A.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:X,onChange:at=>de(at.target.value)}):A.jsx("span",{title:he.description,children:he.description.length>60?`${he.description.slice(0,60)}…`:he.description})}),A.jsx("td",{className:"p-2 border",children:_e?A.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ge,onChange:at=>Ce(at.target.value),children:[A.jsx("option",{value:"DEBITO",children:"Débito"}),A.jsx("option",{value:"CREDITO",children:"Crédito"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:he.type})}),A.jsx("td",{className:"p-2 border",children:_e?A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Ue,onChange:at=>Te(at.target.value)}):si(he.amount)}),A.jsx("td",{className:"p-2 border",children:_e?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:G,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:oe,children:"Cancelar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Me(he.id),children:"Eliminar"})]}):A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ae(he),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Me(he.id),children:"Eliminar"})]})})]},he.id)})})]})})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:["Total libras: ",A.jsx("strong",{children:Lu(xe.totalLbs)})]}),A.jsxs("div",{children:["Total unidades: ",A.jsx("strong",{children:Lu(xe.totalUnits)})]})]}),A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsxs("div",{children:["Total facturado (costo):"," ",A.jsx("strong",{children:si(xe.totalInvoiced)})]}),A.jsxs("div",{children:["Total esperado (ventas):"," ",A.jsx("strong",{children:si(xe.totalExpected)})]}),A.jsxs("div",{children:["Ganancia bruta (esperado − facturado):"," ",A.jsx("strong",{children:si(xe.grossProfit)})]})]}),A.jsxs("div",{className:"space-y-1 text-right",children:[A.jsxs("div",{children:["Gastos: ",A.jsx("strong",{children:si(xe.totalGastos)})]}),A.jsxs("div",{children:["Débitos: ",A.jsx("strong",{children:si(xe.debits)})]}),A.jsxs("div",{children:["Créditos: ",A.jsx("strong",{children:si(xe.credits)})]})]}),A.jsx("div",{className:"md:col-span-3 mt-3",children:A.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado − gastos − débitos + créditos):"," ",A.jsx("span",{className:"text-blue-700",children:si(xe.finalAmount)})]})})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{disabled:Ge,onClick:At,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ge?"Creando…":"Crear factura"}),A.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),tt&&A.jsx("span",{className:"text-sm ml-2",children:tt})]}),Ge&&A.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[A.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura…"})]})]}),ue&&A.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:A.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[A.jsxs("div",{className:"flex items-center mb-3",children:[A.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),A.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>W(!1),children:"Cerrar"})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción"}),A.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ce,onChange:he=>ie(he.target.value),placeholder:"Detalle del cargo"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),A.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ee,onChange:he=>P(he.target.value),children:[A.jsx("option",{value:"DEBITO",children:"Débito"}),A.jsx("option",{value:"CREDITO",children:"Crédito"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:k,onChange:he=>z(he.target.value),placeholder:"0.00"})]})]}),A.jsx("div",{className:"flex justify-end",children:A.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:te,children:"Agregar"})})]})]})})]})}const ec=t=>`C$ ${Number(t||0).toFixed(2)}`,ju=t=>Number(t||0).toFixed(3),G$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function z$(){const[t,e]=Q.useState([]),[r,n]=Q.useState(!0),[s,i]=Q.useState(Zt(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[a,o]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[l,c]=Q.useState(""),[u,h]=Q.useState(!1),{refreshKey:m,refresh:p}=th();Q.useEffect(()=>{(async()=>{n(!0);const w=Yt(dt(Le,"inventory_batches"),cr("status","==","PAGADO"),fi("date","desc")),N=await Tt(w),O=[];N.forEach(R=>{const M=R.data();O.push({id:R.id,productId:M.productId,productName:M.productName,category:M.category,unit:M.unit,quantity:Number(M.quantity||0),remaining:Number(M.remaining||0),purchasePrice:Number(M.purchasePrice||0),salePrice:Number(M.salePrice||0),invoiceTotal:Number(M.invoiceTotal||0),expectedTotal:Number(M.expectedTotal||Number(M.quantity||0)*Number(M.salePrice||0)),date:M.date,status:M.status,paidAt:M.paidAt})}),e(O),n(!1)})()},[m]);const b=Q.useMemo(()=>t.filter(w=>!(s&&w.date<s||a&&w.date>a||l&&w.productId!==l)),[t,s,a,l]),B=Q.useMemo(()=>{let w=0,N=0,O=0,R=0,M=0,F=0;for(const E of b)G$(E.unit)?(w+=E.quantity,N+=E.remaining):(O+=E.quantity,R+=E.remaining),M+=Number(E.expectedTotal||0),F+=Number(E.invoiceTotal||0);return{lbsIng:w,lbsRem:N,udsIng:O,udsRem:R,totalEsperado:M,totalFact:F,gross:M-F}},[b]),_=async w=>{window.confirm(`Marcar PENDIENTE el lote ${w.productName} (${w.date})?`)&&(await sn(Pt(Le,"inventory_batches",w.id),{status:"PENDIENTE"}),e(N=>N.map(O=>O.id===w.id?{...O,status:"PENDIENTE"}:O)))},y=Q.useMemo(()=>{const w=new Map;return t.forEach(N=>w.set(N.productId,{id:N.productId,name:N.productName})),Array.from(w.values())},[t]);return A.jsxs("div",{className:"max-w-7xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),A.jsx(zp,{onClick:p,loading:r})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:w=>i(w.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:w=>o(w.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:l,onChange:w=>c(w.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),y.map(w=>A.jsx("option",{value:w.id,children:w.name},w.id))]})]}),A.jsx("button",{className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{i(""),o(""),c("")},children:"Quitar filtro"}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>h(!0),children:"Crear factura"})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ju(B.lbsIng)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ju(B.udsIng)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ec(B.totalEsperado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ju(B.lbsRem)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ju(B.udsRem)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ec(B.totalFact)]}),A.jsxs("div",{className:"col-span-3",children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ec(B.gross)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",b.length.toLocaleString()]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow-2xl border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Ingresado"}),A.jsx("th",{className:"p-2 border",children:"Restantes"}),A.jsx("th",{className:"p-2 border",children:"Precio Compra"}),A.jsx("th",{className:"p-2 border",children:"Precio Venta"}),A.jsx("th",{className:"p-2 border",children:"Total factura"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Fecha pago"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando…"})}):b.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):b.map(w=>{var N;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:w.date}),A.jsx("td",{className:"p-2 border",children:(w.category||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:w.productName}),A.jsx("td",{className:"p-2 border",children:(w.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:ju(w.quantity)}),A.jsx("td",{className:"p-2 border",children:ju(w.remaining)}),A.jsx("td",{className:"p-2 border",children:ec(w.purchasePrice)}),A.jsx("td",{className:"p-2 border",children:ec(w.salePrice)}),A.jsx("td",{className:"p-2 border",children:ec(w.invoiceTotal||0)}),A.jsx("td",{className:"p-2 border",children:ec(w.expectedTotal||0)}),A.jsx("td",{className:"p-2 border",children:(N=w.paidAt)!=null&&N.toDate?Zt(w.paidAt.toDate(),"yyyy-MM-dd"):"—"}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_(w),children:"Marcar PENDIENTE"})})]},w.id)})})]})}),u&&A.jsx(q$,{paidBatches:b,onClose:()=>h(!1),onCreated:()=>h(!1)})]})}const Mn=t=>`C$ ${(Number(t)||0).toFixed(2)}`,$$=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function xg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function W$(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function X$(t){const e="ROP",r=xg(t.subcat).slice(0,3)||"GEN",n=W$(t.gender),s=xg(t.color).slice(0,3)||"COL",i=xg(t.size)||"TLL",a=xg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${o}`}const Kh=/^[A-Za-z0-9._-]{0,32}$/;function J$(){const[t,e]=Q.useState([]),[r,n]=Q.useState([]),[s,i]=Q.useState(!0),[a,o]=Q.useState(""),[l,c]=Q.useState(Zt(Zd(new Date),"yyyy-MM-dd")),[u,h]=Q.useState(Zt(Yd(new Date),"yyyy-MM-dd")),[m,p]=Q.useState(""),[b,B]=Q.useState(""),[_,y]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[w,N]=Q.useState(0),[O,R]=Q.useState(0),[M,F]=Q.useState(0),[E,L]=Q.useState(0),[D,I]=Q.useState(0),[U,T]=Q.useState(""),[ee,le]=Q.useState(""),[re,ue]=Q.useState(""),[W,ce]=Q.useState(""),[ie,Ee]=Q.useState(""),[P,k]=Q.useState(""),[z,te]=Q.useState(""),[$,ne]=Q.useState(!1),[X,de]=Q.useState(""),[ge,Ce]=Q.useState("Camisa"),[Ue,Te]=Q.useState(null),[ae,oe]=Q.useState(""),[G,Me]=Q.useState(0),[ke,Qe]=Q.useState(0),[je,We]=Q.useState(0),[ze,nt]=Q.useState(0),[xe,Ge]=Q.useState(0),[$e,tt]=Q.useState(""),[ct,At]=Q.useState(""),[he,_e]=Q.useState(""),[at,xt]=Q.useState(""),[or,Kt]=Q.useState(""),[kt,un]=Q.useState(""),[Vt,ls]=Q.useState(""),[Ar,mr]=Q.useState(null),[dn,gr]=Q.useState({x:0,y:0}),[Ut,Xt]=Q.useState(!1);Q.useEffect(()=>{const be=()=>mr(null),rt=st=>st.key==="Escape"&&mr(null);return document.addEventListener("click",be),document.addEventListener("keydown",rt),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",rt)}},[]);const cs=(be,rt,st=192,Dt=160)=>{let _t=be;be+st+8>window.innerWidth&&(_t=be-st),_t=Math.max(8,Math.min(_t,window.innerWidth-st-8));let vt=rt;return rt+Dt+8>window.innerHeight&&(vt=window.innerHeight-Dt-8),vt=Math.max(8,Math.min(vt,window.innerHeight-Dt-8)),{x:_t,y:vt}},Gr=(be,rt)=>{be.stopPropagation();const st=be.currentTarget.getBoundingClientRect(),Dt=st.right,Jt=st.bottom,_t=cs(Dt,Jt);gr(_t),mr(vt=>vt===rt?null:rt)};Q.useEffect(()=>{const be=()=>mr(null),rt=st=>{st.key==="Escape"&&mr(null)};return document.addEventListener("click",be),document.addEventListener("keydown",rt),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",rt)}},[]),Q.useEffect(()=>{if(!Ar)return;const be=()=>mr(null);return window.addEventListener("scroll",be,!0),window.addEventListener("resize",be),()=>{window.removeEventListener("scroll",be,!0),window.removeEventListener("resize",be)}},[Ar]),Q.useEffect(()=>{(async()=>{const be=await Tt(dt(Le,"products_clothes")),rt=[];be.forEach(_t=>{const vt=_t.data();rt.push({id:_t.id,name:vt.name??"(sin nombre)",category:vt.category??"(sin categoría)",measurement:vt.measurement??"unidad",price:Number(vt.price??0),sku:vt.sku||"",size:vt.size||"",color:vt.color||"",gender:vt.gender||"",brand:vt.brand||""})}),e(rt);const st=Yt(dt(Le,"inventory_clothes_batches"),fi("date","desc")),Dt=await Tt(st),Jt=[];Dt.forEach(_t=>{const vt=_t.data();Jt.push({id:_t.id,productId:vt.productId,productName:vt.productName,category:vt.category,unit:vt.unit,quantity:Number(vt.quantity||0),remaining:Number(vt.remaining??vt.quantity??0),purchasePrice:Number(vt.purchasePrice||0),salePrice:Number(vt.salePrice||0),invoiceTotal:Number(vt.invoiceTotal??Number(vt.quantity||0)*Number(vt.purchasePrice||0)),expectedTotal:Number(vt.expectedTotal??Number(vt.quantity||0)*Number(vt.salePrice||0)),date:vt.date,createdAt:vt.createdAt,status:vt.status,notes:vt.notes||"",sku:vt.sku||"",size:vt.size||"",color:vt.color||"",gender:vt.gender||"",brand:vt.brand||"",clientCode:vt.clientCode||""})}),n(Jt),i(!1)})()},[]),Q.useEffect(()=>{const be=t.find(rt=>rt.id===b);be&&(F(Number(be.price||0)),be.sku&&le(be.sku),be.size&&ue(rt=>rt||be.size),be.color&&ce(rt=>rt||be.color),be.gender&&Ee(rt=>rt||be.gender),be.brand&&k(rt=>rt||be.brand))},[b,t]),Q.useEffect(()=>{L(Math.floor(w*O*100)/100)},[w,O]),Q.useEffect(()=>{I(Math.floor(w*M*100)/100)},[w,M]),Q.useEffect(()=>{const be=t.find(Dt=>Dt.id===b);if(be!=null&&be.sku){le(be.sku);return}const rt=$&&ge?ge:(be==null?void 0:be.category)||"";if(!rt&&!ie&&!W&&!re&&!P){le("");return}const st=X$({subcat:rt,gender:ie||"",color:W||"",size:re||"",brand:P||""});le(st)},[$,ge,b,ie,W,re,P,t]);const fr=Q.useMemo(()=>r.filter(be=>!(l&&be.date<l||u&&be.date>u||m&&be.productId!==m)),[r,l,u,m]),Pe=Q.useMemo(()=>{const be=fr.reduce((Jt,_t)=>Jt+(_t.invoiceTotal||0),0),rt=fr.reduce((Jt,_t)=>Jt+(_t.expectedTotal||0),0),st=fr.reduce((Jt,_t)=>Jt+_t.quantity,0),Dt=fr.reduce((Jt,_t)=>Jt+_t.remaining,0);return{udsIng:st,udsRem:Dt,totalFacturado:be,totalEsperado:rt}},[fr]),He=async be=>{be.preventDefault(),o("");const rt=!!b&&!$,st=t.find(vt=>vt.id===b),Dt=rt?(st==null?void 0:st.name)||"":X||"",Jt=rt?(st==null?void 0:st.category)||"":ge||"General",_t=rt&&(st==null?void 0:st.measurement)||"unidad";if(!Dt||w<=0||O<=0){o("Completa nombre/cantidad/costo.");return}if(z&&!Kh.test(z)){o("Código del cliente inválido (solo A-Z, 0-9, . _ - , máx 32).");return}try{const vt=await is(dt(Le,"inventory_clothes_batches"),{productId:rt?st.id:"",productName:Dt,category:Jt,unit:_t,quantity:w,remaining:w,purchasePrice:O,salePrice:M,invoiceTotal:E,expectedTotal:D,date:_,createdAt:jt.now(),status:"PENDIENTE",notes:U||"",sku:ee||"",size:re||"",color:W||"",gender:ie||"",brand:P||"",clientCode:z||""});n(Cs=>[{id:vt.id,productId:rt?st.id:"",productName:Dt,category:Jt,unit:_t,quantity:w,remaining:w,purchasePrice:O,salePrice:M,invoiceTotal:E,expectedTotal:D,date:_,createdAt:jt.now(),status:"PENDIENTE",notes:U||"",sku:ee||"",size:re||"",color:W||"",gender:ie||"",brand:P||"",clientCode:z||""},...Cs]),o("✅ Lote de ropa creado"),B(""),y(Zt(new Date,"yyyy-MM-dd")),N(0),R(0),F(0),L(0),I(0),T(""),le(""),ue(""),ce(""),Ee(""),k(""),te(""),ne(!1),de(""),Ce("Camisa")}catch(vt){console.error(vt),o("❌ Error al crear lote")}},Nt=async be=>{confirm(`Marcar PAGADO el lote del ${be.date} (${be.productName})?`)&&(await sn(Pt(Le,"inventory_clothes_batches",be.id),{status:"PAGADO"}),n(st=>st.map(Dt=>Dt.id===be.id?{...Dt,status:"PAGADO"}:Dt)))},mt=be=>{Te(be.id),oe(be.date),Me(be.quantity),Qe(be.purchasePrice),We(be.salePrice),nt(Number((be.quantity*be.purchasePrice).toFixed(2))),Ge(Number((be.quantity*be.salePrice).toFixed(2))),tt(be.notes||""),At(be.sku||""),_e(be.size||""),xt(be.color||""),Kt(be.gender||""),un(be.brand||""),ls(be.clientCode||"")},ht=()=>{Te(null),oe(""),Me(0),Qe(0),We(0),nt(0),Ge(0),tt(""),At(""),_e(""),xt(""),Kt(""),un(""),ls("")};Q.useEffect(()=>{Ue&&nt(Math.floor(G*ke*100)/100)},[Ue,G,ke]),Q.useEffect(()=>{Ue&&Ge(Math.floor(G*je*100)/100)},[Ue,G,je]);const St=async()=>{if(!Ue)return;const be=r.find(Jt=>Jt.id===Ue);if(!be)return;const rt=Math.max(0,be.quantity-be.remaining),st=Math.max(0,G-rt);if(Vt&&!Kh.test(Vt)){o("Código del cliente inválido (solo A-Z, 0-9, . _ - , máx 32).");return}const Dt=Pt(Le,"inventory_clothes_batches",Ue);await sn(Dt,{date:ae,quantity:G,purchasePrice:ke,salePrice:je,invoiceTotal:ze,expectedTotal:xe,notes:$e,remaining:st,sku:ct,size:he,color:at,gender:or||"",brand:kt||"",clientCode:Vt||""}),n(Jt=>Jt.map(_t=>_t.id===Ue?{..._t,date:ae,quantity:G,purchasePrice:ke,salePrice:je,invoiceTotal:ze,expectedTotal:xe,notes:$e,remaining:st,sku:ct,size:he,color:at,gender:or||"",brand:kt||"",clientCode:Vt||""}:_t)),ht(),o("✅ Lote actualizado")},ot=async be=>{confirm(`¿Eliminar el lote del ${be.date} (${be.productName})?`)&&(await Us(Pt(Le,"inventory_clothes_batches",be.id)),n(st=>st.filter(Dt=>Dt.id!==be.id)),o("🗑️ Lote eliminado"))},Et=()=>{const be=(l?`Desde ${l}`:"Desde inicio")+" — "+(u?`Hasta ${u}`:"Hasta hoy"),rt=_t=>(_t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),st=fr.map(_t=>`
      <tr>
        <td>${_t.date}</td>
        <td>${(_t.category||"").toUpperCase()}</td>
        <td>${rt(_t.productName)}</td>
        <td>${rt(_t.sku||"")}</td>
        <td>${rt(_t.size||"")}</td>
        <td>${rt(_t.color||"")}</td>
        <td>${rt(_t.clientCode||"")}</td>
        <td>${rt(_t.gender||"")}</td>
        <td>${(_t.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${_t.quantity.toFixed(0)}</td>
        <td style="text-align:right">${_t.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Mn(_t.purchasePrice)}</td>
        <td style="text-align:right">${Mn(_t.salePrice)}</td>
        <td style="text-align:right">${Mn(_t.invoiceTotal||0)}</td>
        <td style="text-align:right">${Mn(_t.expectedTotal||0)}</td>
        <td>${rt((_t.notes||"").slice(0,120))}</td>
        <td>${_t.status}</td>
      </tr>`).join(""),Dt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${be}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Pe.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Pe.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Mn(Pe.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Mn(Pe.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Mn(Number((Pe.totalEsperado-Pe.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Código Cliente</th>
        <th>Género</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${st||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Jt=window.open("","_blank");Jt&&(Jt.document.open(),Jt.document.write(Dt),Jt.document.close())};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Xt(!0),type:"button",children:"Crear Inventario"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:be=>c(be.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:be=>h(be.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:be=>p(be.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),t.map(be=>A.jsxs("option",{value:be.id,children:[be.name," — ",be.category]},be.id))]})]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),h(""),p("")},children:"Quitar filtro"}),A.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Et,children:"Imprimir PDF"})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Pe.udsIng.toFixed(0)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Pe.udsRem.toFixed(0)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Mn(Pe.totalEsperado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Mn(Pe.totalFacturado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Mn(Number((Pe.totalEsperado-Pe.totalFacturado).toFixed(2)))]})]})}),A.jsx("div",{className:"bg-white rounded shadow border",children:A.jsx("div",{className:"w-full overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[A.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Código Cliente"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Género"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),A.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),A.jsx("tbody",{className:"whitespace-nowrap",children:s?A.jsx("tr",{children:A.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando…"})}):fr.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):fr.map(be=>{const rt=Ue===be.id;return A.jsxs("tr",{className:"text-left",children:[A.jsx("td",{className:"p-2 md:p-3 border align-top",children:rt?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ae,onChange:st=>oe(st.target.value)}):be.date}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(be.category||"").toUpperCase()}),A.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:A.jsx("span",{className:"block truncate",title:be.productName,children:be.productName})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:rt?A.jsx("input",{className:"w-full border p-1 rounded",value:ct,onChange:st=>At(st.target.value)}):A.jsx("span",{className:"block truncate",title:be.sku||"",children:be.sku||"—"})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:rt?A.jsx("input",{className:"w-full border p-1 rounded",value:he,onChange:st=>_e(st.target.value)}):be.size||"—"}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:rt?A.jsx("input",{className:"w-full border p-1 rounded",value:at,onChange:st=>xt(st.target.value)}):be.color||"—"}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:rt?A.jsx("input",{className:"w-full border p-1 rounded",value:Vt,onChange:st=>{const Dt=st.target.value;Kh.test(Dt)&&ls(Dt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"A–Z 0–9 . _ - (máx 32)"}):A.jsx("span",{className:"block truncate",title:be.clientCode||"",children:be.clientCode||"—"})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:rt?A.jsx("select",{className:"w-full border p-1 rounded",value:or,onChange:st=>Kt(st.target.value),children:$$.map(st=>A.jsx("option",{value:st,children:st||"—"},st))}):be.gender||"—"}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(be.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:rt?A.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:st=>Me(Math.max(0,parseInt(st.target.value||"0",10)))}):be.quantity.toFixed(0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:rt?be.remaining:be.remaining.toFixed(0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:rt?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(ke)?"":ke,onChange:st=>Qe(Math.max(0,parseFloat(st.target.value||"0")))}):Mn(be.purchasePrice)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:rt?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(je)?"":je,onChange:st=>We(Math.max(0,parseFloat(st.target.value||"0")))}):Mn(be.salePrice)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Mn(rt?ze:be.invoiceTotal||0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Mn(rt?xe:be.expectedTotal||0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:rt?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:$e,onChange:st=>tt(st.target.value),maxLength:500}):A.jsx("span",{className:"block truncate",title:be.notes||"",children:be.notes||"—"})}),A.jsx("td",{className:"p-2 md:p-3 border align-top",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:be.status})}),A.jsx("td",{className:"p-2 md:p-3 border align-top",children:rt?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:St,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ht,children:"Cancelar"})]}):A.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:st=>Gr(st,be.id),children:A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[A.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),A.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),A.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},be.id)})})]})})}),Ar&&Yf.createPortal(A.jsxs(A.Fragment,{children:[A.jsx("div",{onClick:()=>mr(null),className:"fixed inset-0 z-[60]"}),A.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:dn.x,top:dn.y},onClick:be=>be.stopPropagation(),role:"menu","aria-orientation":"vertical",children:A.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const be=fr.find(rt=>rt.id===Ar);return(be==null?void 0:be.status)==="PENDIENTE"?A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{mr(null),Nt(be)},children:"✅ Pagar"}):null})(),A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const be=fr.find(rt=>rt.id===Ar);be&&(mr(null),mt(be))},children:"✏️ Editar"}),A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const be=fr.find(rt=>rt.id===Ar);be&&(mr(null),ot(be))},children:"🗑️ Borrar"})]})})]}),document.body),Ut&&Yf.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Xt(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Xt(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:He,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:be=>B(be.target.value),children:[A.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(be=>A.jsxs("option",{value:be.id,children:[be.name," — ",be.category," — ",be.sku?`SKU: ${be.sku}`:""]},be.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_,onChange:be=>y(be.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),A.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:be=>N(Math.max(0,parseInt(be.target.value||"0",10))),placeholder:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:be=>R(Math.max(0,parseFloat(be.target.value||"0")))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:be=>F(Math.max(0,parseFloat(be.target.value||"0")))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ee,readOnly:!0,placeholder:"Se genera automáticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/género/talla/color/marca."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:re,readOnly:!0,onChange:be=>ue(be.target.value),placeholder:"XS/S/M/L/XL/10/12…"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,onChange:be=>ce(be.target.value),placeholder:"Negro, Azul, Rojo…"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ie,readOnly:!0,onChange:be=>Ee(be.target.value),placeholder:"Masculino, Femenino, Otro…"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:P,onChange:be=>k(be.target.value),placeholder:"Shein, Usado, Otro…"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Código del cliente (opcional)"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:z,onChange:be=>{const rt=be.target.value;Kh.test(rt)&&te(rt)},title:"Solo letras, números, punto, guion y guion_bajo (máx 32)"}),!Kh.test(z)&&z.length>0&&A.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato inválido"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:U,onChange:be=>T(be.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes…"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[U.length,"/500"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(E),readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(D),readOnly:!0})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Xt(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),a&&A.jsx("p",{className:"mt-2 text-sm",children:a})]})}const Y$=["Camisa","Blusa","Vestido","Jean","Pantalón","Short","Falda","Conjunto","Abrigo","Suéter","Accesorio"],Z$=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrón","Morado","Naranja"],eW=["XS","S","M","L","XL","2XL"],tW=["2","4","6","8","10","12","14"],rW=["26","28","30","32","34","36","38"],nW=["Shein","Usado","Otro"],sW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function bg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function iW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function aW(t){const e="ROP",r=bg(t.subcat).slice(0,3)||"GEN",n=iW(t.gender),s=bg(t.color).slice(0,3)||"COL",i=bg(t.size)||"TLL",a=bg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const oW=/^[A-Za-z0-9._-]{0,32}$/;function AW(){const[t,e]=Q.useState(""),[r,n]=Q.useState("Camisa"),[s,i]=Q.useState(""),[a,o]=Q.useState(""),[l,c]=Q.useState("Shein"),[u,h]=Q.useState(""),[m,p]=Q.useState(""),[b,B]=Q.useState(""),[_,y]=Q.useState(""),[w,N]=Q.useState([]),[O,R]=Q.useState(!0),[M,F]=Q.useState(""),{refreshKey:E,refresh:L}=th(),[D,I]=Q.useState(!1),U=Q.useMemo(()=>r.toLowerCase()==="jean"?rW:u==="NINO"||u==="NINA"?tW:eW,[r,u]);Q.useEffect(()=>{B(aW({subcat:r,gender:u,color:a,size:s,brand:l}))},[r,u,a,s,l]),Q.useEffect(()=>{(async()=>{R(!0);const re=Yt(dt(Le,"products_clothes"),fi("createdAt","desc")),ue=await Tt(re),W=[];ue.forEach(ce=>{const ie=ce.data();W.push({id:ce.id,name:ie.name??"(sin nombre)",category:ie.category??"",measurement:ie.measurement??"unidad",sku:ie.sku??"",size:ie.size||"",color:ie.color||"",brand:ie.brand||"",gender:ie.gender||"",clientCode:ie.clientCode||"",notes:ie.notes||"",createdAt:ie.createdAt??jt.now()})}),N(W),R(!1)})()},[E]);const T=()=>{e(""),n("Camisa"),i(""),o(""),c("Shein"),h(""),p(""),y("")},ee=async re=>{if(re.preventDefault(),F(""),!t.trim()){F("Ingresa el nombre del producto.");return}if(m&&!oW.test(m)){F("Código del cliente inválido");return}try{const ue=await is(dt(Le,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:m||"",notes:_||"",createdAt:jt.now()});N(W=>[{id:ue.id,name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:m||"",notes:_||"",createdAt:jt.now()},...W]),T(),I(!1),F("✅ Producto de ropa creado")}catch(ue){console.error(ue),F("❌ Error al crear producto")}},le=async re=>{confirm(`¿Eliminar el producto "${re.name}"?`)&&(await Us(Pt(Le,"products_clothes",re.id)),N(W=>W.filter(ce=>ce.id!==re.id)))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx(zp,{onClick:L,loading:O}),A.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{I(!0)},children:[A.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),D&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),A.jsxs("form",{onSubmit:ee,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:re=>e(re.target.value),placeholder:"Ej: Blusa floral"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Subcategoría"}),A.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:re=>n(re.target.value),children:Y$.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Género"}),A.jsx("select",{className:"w-full border p-2 rounded",value:u,onChange:re=>h(re.target.value),children:sW.map(re=>A.jsx("option",{value:re,children:re||"—"},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:re=>i(re.target.value),children:[A.jsx("option",{value:"",children:"—"}),U.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:re=>o(re.target.value),children:[A.jsx("option",{value:"",children:"—"}),Z$.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),A.jsx("select",{className:"w-full border p-2 rounded",value:l,onChange:re=>c(re.target.value),children:nW.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:b,readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Código cliente"}),A.jsx("input",{className:"w-full border p-2 rounded",value:m,onChange:re=>p(re.target.value)})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:_,onChange:re=>y(re.target.value),maxLength:500})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[A.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Subcat."}),A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"SKU"}),A.jsx("th",{className:"p-2 border",children:"Talla"}),A.jsx("th",{className:"p-2 border",children:"Color"}),A.jsx("th",{className:"p-2 border",children:"Marca"}),A.jsx("th",{className:"p-2 border",children:"Género"}),A.jsx("th",{className:"p-2 border",children:"Código Cliente"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:O?A.jsx("tr",{children:A.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando…"})}):w.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):w.map(re=>{var ue;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:(ue=re.createdAt)!=null&&ue.toDate?re.createdAt.toDate().toISOString().slice(0,10):"—"}),A.jsx("td",{className:"p-2 border",children:re.category}),A.jsx("td",{className:"p-2 border",children:re.name}),A.jsx("td",{className:"p-2 border",children:re.sku}),A.jsx("td",{className:"p-2 border",children:re.size||"—"}),A.jsx("td",{className:"p-2 border",children:re.color||"—"}),A.jsx("td",{className:"p-2 border",children:re.brand||"—"}),A.jsx("td",{className:"p-2 border",children:re.gender||"—"}),A.jsx("td",{className:"p-2 border",children:re.clientCode||"—"}),A.jsx("td",{className:"p-2 border",children:re.notes||"—"}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>le(re),children:"Borrar"})})]},re.id)})})]})}),M&&A.jsx("p",{className:"mt-2 text-sm",children:M})]})}async function lW(t){const{productId:e,quantity:r,saleDate:n,saleId:s}=t,i=Math.max(0,Math.floor(Number(r||0)));if(!e||i<=0)throw new Error("Parámetros inválidos para allocateSaleFIFOClothes");const a=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",e)),c=(await Tt(a)).docs.map(h=>({id:h.id,data:h.data()})).sort((h,m)=>{var y,w;const p=String(h.data.date||""),b=String(m.data.date||"");if(p!==b)return p<b?-1:1;const B=((y=h.data.createdAt)==null?void 0:y.seconds)??0,_=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return B-_}).map(h=>Pt(Le,"inventory_clothes_batches",h.id)),u=[];return await Al(Le,async h=>{const m=await Promise.all(c.map(b=>h.get(b)));let p=i;for(let b=0;b<c.length&&p>0;b++){const B=c[b],_=m[b];if(!_.exists())continue;const y=_.data(),w=Math.max(0,Math.floor(Number(y.quantity||0))),N=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):w;if(N<=0)continue;const O=Math.min(N,p),R=Math.max(0,N-O);h.update(B,{remaining:R}),u.push({batchId:B.id,qty:O,batchDate:String(y.date||""),productName:String(y.productName||"")}),p-=O}if(p>0)throw new Error(`Inventario insuficiente. Faltan ${p} unidades.`);if(s)for(const b of u)await is(dt(Le,"batch_clothes_allocations"),{saleId:s,saleDate:n,productId:e,productName:b.productName??"",batchId:b.batchId,batchDate:b.batchDate??"",quantity:b.qty,createdAt:jt.now()})}),{allocations:u}}async function cx(t){const e=Pt(Le,"sales_clothes",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)&&n.items.length>0){const o={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const l of Object.keys(n.allocationsByItem)){const c=n.allocationsByItem[l],u=String((c==null?void 0:c.productId)||l||"");if(!u)continue;const h=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];o[u]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const l of n.allocationsByItem){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Array.isArray(l==null?void 0:l.allocations)?l.allocations:[];o[c]=u.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const l of n.items){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Math.max(0,Math.floor(Number((l==null?void 0:l.qty)||(l==null?void 0:l.quantity)||0))),h=Array.isArray(l==null?void 0:l.allocations)?l.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):o[c]||[];s.push({productId:c,productName:String((l==null?void 0:l.productName)||""),qty:u,allocations:h.length?h:void 0})}}else{const o=n.item||{},l=String(o.productId||n.productId||""),c=Math.max(0,Math.floor(Number(o.qty??n.quantity??0))),u=Array.isArray(n.allocations)?n.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];l&&c>0&&s.push({productId:l,productName:String(o.productName||n.productName||""),qty:c,allocations:u.length?u:void 0})}return s.length===0?(await Al(Le,async o=>{o.delete(e)}),{restored:0}):s.every(o=>Array.isArray(o.allocations)&&o.allocations.length>0)?(await Al(Le,async l=>{const c=[];for(const h of s)for(const m of h.allocations||[])c.push({ref:Pt(Le,"inventory_clothes_batches",m.batchId),addBack:Math.max(0,Math.floor(Number(m.qty||0)))});const u=await Promise.all(c.map(h=>l.get(h.ref)));for(let h=0;h<c.length;h++){const m=u[h];if(!m.exists())continue;const p=m.data(),b=Math.max(0,Math.floor(Number(p.remaining||0)));l.update(c[h].ref,{remaining:b+c[h].addBack})}l.delete(e)}),{restored:s.reduce((l,c)=>l+(c.allocations||[]).reduce((u,h)=>u+h.qty,0),0)}):(await Al(Le,async o=>{const l={};for(const p of s){if(!p.productId||p.qty<=0)continue;const b=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",p.productId)),_=(await Tt(b)).docs.map(y=>{const w=y.data(),N=Math.max(0,Math.floor(Number(w.quantity||0))),O=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):N;return{id:y.id,date:String(w.date||""),quantity:N,remaining:O}}).sort((y,w)=>y.date.localeCompare(w.date));l[p.productId]=_}const c=[];for(const p of s){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const _ of p.allocations)c.push({id:_.batchId,addBack:Math.max(0,Math.floor(Number(_.qty||0)))});continue}const b=l[p.productId]||[];let B=p.qty;for(const _ of b){if(B<=0)break;const y=Math.max(0,_.quantity-_.remaining);if(y<=0)continue;const w=Math.min(y,B);c.push({id:_.id,addBack:w}),B-=w}for(const _ of b){if(B<=0)break;const y=Math.min(B,p.qty);c.push({id:_.id,addBack:y}),B-=y}}const u={};for(const p of c)u[p.id]=(u[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(u).map(p=>Pt(Le,"inventory_clothes_batches",p)),m=await Promise.all(h.map(p=>o.get(p)));for(let p=0;p<h.length;p++){const b=m[p];if(!b.exists())continue;const B=b.data(),_=Math.max(0,Math.floor(Number(B.remaining||0))),y=Math.max(0,Math.floor(Number(u[h[p].id]||0)));o.update(h[p],{remaining:_+y})}o.delete(e)}),{restored:s.reduce((o,l)=>o+l.qty,0)})}const UN=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],vo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Bg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function PN(t){const e=Yt(dt(Le,"ar_movements"),cr("ref.saleId","==",t)),r=await Tt(e);await Promise.all(r.docs.map(n=>Us(Pt(Le,"ar_movements",n.id))))}function cW(){const[t,e]=Q.useState(!1),[r,n]=Q.useState(!1),[s,i]=Q.useState(null),[a,o]=Q.useState([]),l=async Pe=>{e(!0),n(!0),i(Pe),o([]);try{const Nt=(await Tt(Yt(dt(Le,"sales_clothes"),cr("__name__","==",Pe)))).docs[0],mt=Nt==null?void 0:Nt.data(),St=(Array.isArray(mt==null?void 0:mt.items)?mt.items:mt!=null&&mt.item?[mt.item]:[]).map(ot=>({productName:String(ot.productName||""),qty:Number(ot.qty||0),unitPrice:Number(ot.unitPrice||0),discount:Number(ot.discount||0),total:Number(ot.total||0)}));o(St)}catch(He){console.error(He)}finally{n(!1)}},[c,u]=Q.useState(""),[h,m]=Q.useState("+505 "),[p,b]=Q.useState(""),[B,_]=Q.useState(""),[y,w]=Q.useState("ACTIVO"),[N,O]=Q.useState(0),[R,M]=Q.useState([]),[F,E]=Q.useState(!0),[L,D]=Q.useState(""),[I,U]=Q.useState(null),[T,ee]=Q.useState(""),[le,re]=Q.useState("+505 "),[ue,W]=Q.useState(""),[ce,ie]=Q.useState(""),[Ee,P]=Q.useState("ACTIVO"),[k,z]=Q.useState(0),[te,$]=Q.useState(!1),[ne,X]=Q.useState(null),[de,ge]=Q.useState(!1),[Ce,Ue]=Q.useState([]),[Te,ae]=Q.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[oe,G]=Q.useState(!1),[Me,ke]=Q.useState(0),[Qe,je]=Q.useState(new Date().toISOString().slice(0,10)),[We,ze]=Q.useState(""),[nt,xe]=Q.useState(!1),[Ge,$e]=Q.useState(null),[tt,ct]=Q.useState(""),[At,he]=Q.useState(0),[_e,at]=Q.useState(""),[xt,or]=Q.useState(!1);Q.useEffect(()=>{(async()=>{const Pe=Yt(dt(Le,"customers_clothes"),fi("createdAt","desc")),He=await Tt(Pe),Nt=[];He.forEach(mt=>{const ht=mt.data();Nt.push({id:mt.id,name:ht.name??"",phone:ht.phone??"+505 ",place:ht.place??"",notes:ht.notes??"",status:ht.status??"ACTIVO",creditLimit:Number(ht.creditLimit??0),createdAt:ht.createdAt??jt.now(),balance:0})});for(const mt of Nt)try{const ht=Yt(dt(Le,"ar_movements"),cr("customerId","==",mt.id)),St=await Tt(ht);let ot=0;St.forEach(Et=>ot+=Number(Et.data().amount||0)),mt.balance=ot}catch{mt.balance=0}M(Nt),E(!1)})()},[]);const Kt=()=>{u(""),m("+505 "),b(""),_(""),w("ACTIVO"),O(0)},kt=async Pe=>{if(Pe.preventDefault(),D(""),!c.trim()){D("Ingresa el nombre.");return}const He=Bg(h);if(He.length<6){D("Teléfono incompleto.");return}try{const Nt=await is(dt(Le,"customers_clothes"),{name:c.trim(),phone:He,place:p||"",notes:B||"",status:y,creditLimit:Number(N||0),createdAt:jt.now()});M(mt=>[{id:Nt.id,name:c.trim(),phone:He,place:p||"",notes:B||"",status:y,creditLimit:Number(N||0),createdAt:jt.now(),balance:0},...mt]),Kt(),or(!1),D("✅ Cliente creado")}catch(Nt){console.error(Nt),D("❌ Error al crear cliente")}},un=Pe=>{U(Pe.id),ee(Pe.name),re(Pe.phone||"+505 "),W(Pe.place||""),ie(Pe.notes||""),P(Pe.status||"ACTIVO"),z(Number(Pe.creditLimit||0))},Vt=()=>{U(null),ee(""),re("+505 "),W(""),ie(""),P("ACTIVO"),z(0)},ls=async()=>{if(!I)return;const Pe=Bg(le);if(!T.trim()){D("Ingresa el nombre.");return}try{await sn(Pt(Le,"customers_clothes",I),{name:T.trim(),phone:Pe,place:ue||"",notes:ce||"",status:Ee,creditLimit:Number(k||0)}),M(He=>He.map(Nt=>Nt.id===I?{...Nt,name:T.trim(),phone:Pe,place:ue||"",notes:ce||"",status:Ee,creditLimit:Number(k||0)}:Nt)),Vt(),D("✅ Cliente actualizado")}catch(He){console.error(He),D("❌ Error al actualizar")}},Ar=async Pe=>{if(confirm(`¿Eliminar al cliente "${Pe.name}"?
Se devolverán al inventario todas las prendas de sus compras y se borrarán sus movimientos.`))try{E(!0);const Nt=Yt(dt(Le,"sales_clothes"),cr("customerId","==",Pe.id)),mt=await Tt(Nt);for(const ot of mt.docs){const Et=ot.id;try{await cx(Et)}catch(be){console.warn("restoreSaleAndDeleteClothes error",be);try{await Us(Pt(Le,"sales_clothes",Et))}catch{}}await PN(Et)}const ht=Yt(dt(Le,"ar_movements"),cr("customerId","==",Pe.id)),St=await Tt(ht);await Promise.all(St.docs.map(ot=>Us(Pt(Le,"ar_movements",ot.id)))),await Us(Pt(Le,"customers_clothes",Pe.id)),M(ot=>ot.filter(Et=>Et.id!==Pe.id)),D("🗑️ Cliente eliminado y prendas devueltas al inventario")}catch(Nt){console.error(Nt),D("❌ No se pudo eliminar el cliente.")}finally{E(!1)}},mr=async Pe=>{X(Pe),Ue([]),ae({saldoActual:0,totalAbonado:0,totalCargos:0}),$(!0),G(!1),ke(0),je(new Date().toISOString().slice(0,10)),ze(""),$e(null),ge(!0);try{const He=Yt(dt(Le,"ar_movements"),cr("customerId","==",Pe.id)),Nt=await Tt(He),mt=[];Nt.forEach(ht=>{var ot,Et;const St=ht.data();mt.push({id:ht.id,date:St.date??((Et=(ot=St.createdAt)==null?void 0:ot.toDate)!=null&&Et.call(ot)?St.createdAt.toDate().toISOString().slice(0,10):""),type:St.type??"CARGO",amount:Number(St.amount||0),ref:St.ref||{},comment:St.comment||"",createdAt:St.createdAt})}),mt.sort((ht,St)=>{var be,rt;if(ht.date!==St.date)return ht.date.localeCompare(St.date);const ot=((be=ht.createdAt)==null?void 0:be.seconds)||0,Et=((rt=St.createdAt)==null?void 0:rt.seconds)||0;return ot-Et}),Ue(mt),dn(mt)}catch(He){console.error(He),D("❌ No se pudo cargar el estado de cuenta")}finally{ge(!1)}},dn=Pe=>{const He=Pe.reduce((ht,St)=>ht+(Number(St.amount)||0),0),Nt=Pe.filter(ht=>Number(ht.amount)<0).reduce((ht,St)=>ht+Math.abs(Number(St.amount)||0),0),mt=Pe.filter(ht=>Number(ht.amount)>0).reduce((ht,St)=>ht+Number(St.amount)||0,0);ae({saldoActual:He,totalAbonado:Nt,totalCargos:mt})},gr=async()=>{if(!ne)return;D("");const Pe=Number(Me||0);if(!(Pe>0)){D("Ingresa un monto de abono mayor a 0.");return}const He=parseFloat(Pe.toFixed(2));if(!Qe){D("Selecciona la fecha del abono.");return}try{xe(!0);const Nt={customerId:ne.id,type:"ABONO",amount:-He,date:Qe,comment:We||"",createdAt:jt.now()},ht={id:(await is(dt(Le,"ar_movements"),Nt)).id,date:Qe,type:"ABONO",amount:-He,comment:We||"",createdAt:jt.now()},St=[...Ce,ht].sort((ot,Et)=>{var st,Dt;if(ot.date!==Et.date)return ot.date.localeCompare(Et.date);const be=((st=ot.createdAt)==null?void 0:st.seconds)||0,rt=((Dt=Et.createdAt)==null?void 0:Dt.seconds)||0;return be-rt});Ue(St),dn(St),M(ot=>ot.map(Et=>Et.id===ne.id?{...Et,balance:(Et.balance||0)-He}:Et)),X(ot=>ot&&{...ot,balance:(ot.balance||0)-He}),ke(0),ze(""),je(new Date().toISOString().slice(0,10)),G(!1),D("✅ Abono registrado")}catch(Nt){console.error(Nt),D("❌ Error al registrar el abono")}finally{xe(!1)}},Ut=Pe=>{$e(Pe.id),ct(Pe.date||new Date().toISOString().slice(0,10)),he(Math.abs(Number(Pe.amount||0))),at(Pe.comment||"")},Xt=()=>{$e(null),ct(""),he(0),at("")},cs=async()=>{if(!Ge)return;const Pe=Ce.findIndex(ht=>ht.id===Ge);if(Pe===-1)return;const He=Ce[Pe],Nt=Number(At||0);if(!(Nt>0)){D("El monto debe ser mayor a 0.");return}const mt=He.type==="ABONO"?-parseFloat(Nt.toFixed(2)):+parseFloat(Nt.toFixed(2));try{await sn(Pt(Le,"ar_movements",Ge),{date:tt,amount:mt,comment:_e||""});const ht=[...Ce];ht[Pe]={...He,date:tt,amount:mt,comment:_e||""},ht.sort((ot,Et)=>{var st,Dt;if(ot.date!==Et.date)return ot.date.localeCompare(Et.date);const be=((st=ot.createdAt)==null?void 0:st.seconds)||0,rt=((Dt=Et.createdAt)==null?void 0:Dt.seconds)||0;return be-rt}),Ue(ht),dn(ht);const St=ht.reduce((ot,Et)=>ot+(Number(Et.amount)||0),0);M(ot=>ot.map(Et=>Et.id===(ne==null?void 0:ne.id)?{...Et,balance:St}:Et)),X(ot=>ot&&{...ot,balance:St}),Xt(),D("✅ Movimiento actualizado")}catch(ht){console.error(ht),D("❌ Error al actualizar movimiento")}},Gr=async Pe=>{var Nt,mt;if(confirm(`¿Eliminar este movimiento (${Pe.type==="ABONO"?"Abono":"Compra"}) del ${Pe.date}?${Pe.type==="CARGO"&&((Nt=Pe.ref)!=null&&Nt.saleId)?`
Se devolverán al inventario las prendas de esa venta.`:""}`))try{if(E(!0),Pe.type==="CARGO"&&((mt=Pe.ref)!=null&&mt.saleId)){try{await cx(Pe.ref.saleId)}catch(ot){console.warn("restoreSaleAndDeleteClothes error",ot),E(!1),D("❌ No se pudo devolver inventario de la venta.");return}await PN(Pe.ref.saleId)}else await Us(Pt(Le,"ar_movements",Pe.id));const ht=Ce.filter(ot=>{var Et,be;return Pe.type==="CARGO"&&((Et=Pe.ref)!=null&&Et.saleId)?((be=ot.ref)==null?void 0:be.saleId)!==Pe.ref.saleId:ot.id!==Pe.id});Ue(ht),dn(ht);const St=ht.reduce((ot,Et)=>ot+(Number(Et.amount)||0),0);M(ot=>ot.map(Et=>Et.id===(ne==null?void 0:ne.id)?{...Et,balance:St}:Et)),X(ot=>ot&&{...ot,balance:St}),D("🗑️ Movimiento eliminado")}catch(ht){console.error(ht),D("❌ Error al eliminar movimiento")}finally{E(!1)}},fr=Q.useMemo(()=>[...R].sort((Pe,He)=>{var Nt,mt;return Pe.status!==He.status?Pe.status==="BLOQUEADO"?1:-1:(((Nt=He.createdAt)==null?void 0:Nt.seconds)||0)-(((mt=Pe.createdAt)==null?void 0:mt.seconds)||0)}),[R]);return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>or(!0),type:"button",children:"Crear Cliente"})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Teléfono"}),A.jsx("th",{className:"p-2 border",children:"Lugar"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Límite"}),A.jsx("th",{className:"p-2 border",children:"Saldo"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:F?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando…"})}):fr.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):fr.map(Pe=>{var Nt;const He=I===Pe.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:(Nt=Pe.createdAt)!=null&&Nt.toDate?Pe.createdAt.toDate().toISOString().slice(0,10):"—"}),A.jsx("td",{className:"p-2 border",children:He?A.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:mt=>ee(mt.target.value)}):Pe.name}),A.jsx("td",{className:"p-2 border",children:He?A.jsx("input",{className:"w-full border p-1 rounded",value:le,onChange:mt=>re(Bg(mt.target.value))}):Pe.phone}),A.jsx("td",{className:"p-2 border",children:He?A.jsxs("select",{className:"w-full border p-1 rounded",value:ue,onChange:mt=>W(mt.target.value),children:[A.jsx("option",{value:"",children:"—"}),UN.map(mt=>A.jsx("option",{value:mt,children:mt},mt))]}):Pe.place||"—"}),A.jsx("td",{className:"p-2 border",children:He?A.jsxs("select",{className:"w-full border p-1 rounded",value:Ee,onChange:mt=>P(mt.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Pe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Pe.status})}),A.jsx("td",{className:"p-2 border",children:He?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:mt=>z(Math.max(0,Number(mt.target.value||0)))}):vo(Pe.creditLimit||0)}),A.jsx("td",{className:"p-2 border font-semibold",children:vo(Pe.balance||0)}),A.jsx("td",{className:"p-2 border",children:He?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ce,onChange:mt=>ie(mt.target.value),maxLength:500}):A.jsx("span",{title:Pe.notes||"",children:(Pe.notes||"").length>40?(Pe.notes||"").slice(0,40)+"…":Pe.notes||"—"})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:He?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ls,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Vt,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>un(Pe),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ar(Pe),children:"Borrar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>mr(Pe),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Pe.id)})})]})}),L&&A.jsx("p",{className:"mt-2 text-sm",children:L}),xt&&Yf.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>or(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>or(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:kt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: María López",value:c,onChange:Pe=>u(Pe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Teléfono"}),A.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:Pe=>m(Bg(Pe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:Pe=>b(Pe.target.value),children:[A.jsx("option",{value:"",children:"—"}),UN.map(Pe=>A.jsx("option",{value:Pe,children:Pe},Pe))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Pe=>w(Pe.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Límite de crédito (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:N===0?"":N,onChange:Pe=>O(Math.max(0,Number(Pe.target.value||0))),placeholder:"Ej: 2000"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:Pe=>_(Pe.target.value),maxLength:500,placeholder:"Notas del cliente…"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>or(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),te&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta — ",(ne==null?void 0:ne.name)||""]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{ke(0),je(new Date().toISOString().slice(0,10)),ze(""),G(!0)},children:"Abonar"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$(!1),children:"Cerrar"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Te.saldoActual)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Te.totalAbonado)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Te.saldoActual)})]})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Referencia"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:de?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando…"})}):Ce.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Ce.map(Pe=>{var Nt,mt;const He=Ge===Pe.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:He?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:tt,onChange:ht=>ct(ht.target.value)}):Pe.date||"—"}),A.jsx("td",{className:"p-2 border",children:Pe.amount>=0?(Nt=Pe.ref)!=null&&Nt.saleId?A.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>l(Pe.ref.saleId),children:"COMPRA (CARGO)"}):A.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):A.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),A.jsx("td",{className:"p-2 border",children:(mt=Pe.ref)!=null&&mt.saleId?`Venta #${Pe.ref.saleId}`:"—"}),A.jsx("td",{className:"p-2 border",children:He?A.jsx("input",{className:"w-full border p-1 rounded",value:_e,onChange:ht=>at(ht.target.value),placeholder:"Comentario"}):A.jsx("span",{title:Pe.comment||"",children:(Pe.comment||"").length>40?(Pe.comment||"").slice(0,40)+"…":Pe.comment||"—"})}),A.jsx("td",{className:"p-2 border font-semibold",children:He?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(At)?"":At,onChange:ht=>{const St=Number(ht.target.value||0),ot=Number.isFinite(St)?Math.max(0,parseFloat(St.toFixed(2))):0;he(ot)},placeholder:"0.00",title:Pe.type==="ABONO"?"Se guardará como negativo":"Se guardará como positivo"}):vo(Pe.amount)}),A.jsx("td",{className:"p-2 border",children:He?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:cs,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Xt,children:"Cancelar"})]}):A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ut(Pe),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Gr(Pe),children:"Borrar"})]})})]},Pe.id)})})]})})]})}),oe&&A.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono — ",(ne==null?void 0:ne.name)||""]}),A.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Qe,onChange:Pe=>je(Pe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Me===0?"":Me,onChange:Pe=>{const He=Number(Pe.target.value||0),Nt=Number.isFinite(He)?Math.max(0,parseFloat(He.toFixed(2))):0;ke(Nt)},placeholder:"0.00"}),A.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrará como ABONO negativo)."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:We,onChange:Pe=>ze(Pe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[We.length,"/250"]})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),disabled:nt,children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:gr,disabled:nt,children:nt?"Guardando...":"Guardar abono"})]})]})}),t&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?`— #${s}`:""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),A.jsx("th",{className:"p-2 border text-right",children:"Precio"}),A.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),A.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando…"})}):a.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin ítems en esta venta."})}):a.map((Pe,He)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border text-left",children:Pe.productName}),A.jsx("td",{className:"p-2 border text-right",children:Pe.qty}),A.jsx("td",{className:"p-2 border text-right",children:vo(Pe.unitPrice)}),A.jsx("td",{className:"p-2 border text-right",children:vo(Pe.discount||0)}),A.jsx("td",{className:"p-2 border text-right",children:vo(Pe.total)})]},He))})]})})]})})]})}const ku=t=>`C$ ${(Number(t)||0).toFixed(2)}`,uW=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function dW(t){if(!t)return 0;const e=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",t)),r=await Tt(e);let n="0000-00-00",s=-1,i=0;return r.forEach(a=>{const o=a.data(),l=String(o.date||"0000-00-00"),c=Number(o.salePrice||0),u=o.createdAt,h=((u==null?void 0:u.seconds)??0)*1e3+((u==null?void 0:u.nanoseconds)??0)/1e6;l>n?(n=l,s=h,i=c):l===n&&h>s&&(s=h,i=c)}),Number(i||0)}async function QN(t){if(!t)return 0;const e=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",t)),r=await Tt(e);let n=0;return r.forEach(s=>n+=Number(s.data().remaining||0)),n}function LN(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function hW(){const[t,e]=Q.useState([]),[r,n]=Q.useState([]),[s,i]=Q.useState({}),[a,o]=Q.useState("CONTADO"),[l,c]=Q.useState(""),[u,h]=Q.useState(""),[m,p]=Q.useState(new Date().toISOString().slice(0,10)),[b,B]=Q.useState(""),[_,y]=Q.useState([]),w=Q.useMemo(()=>_.reduce((ae,oe)=>ae+(oe.qty||0),0),[_]),N=Q.useMemo(()=>{const ae=_.reduce((oe,G)=>{const Me=Math.max(0,(Number(G.unitPrice)||0)*(G.qty||0)-(Number(G.discount)||0));return oe+Me},0);return Math.floor(ae*100)/100},[_]),[O,R]=Q.useState(0),[M,F]=Q.useState(""),[E,L]=Q.useState(!1),[D,I]=Q.useState(!1),[U,T]=Q.useState(""),[ee,le]=Q.useState("+505 "),[re,ue]=Q.useState(""),[W,ce]=Q.useState(""),[ie,Ee]=Q.useState("ACTIVO"),[P,k]=Q.useState(0),z=()=>{T(""),le("+505 "),ue(""),ce(""),Ee("ACTIVO"),k(0)};Q.useEffect(()=>{(async()=>{const ae=Yt(dt(Le,"customers_clothes"),fi("createdAt","desc")),oe=await Tt(ae),G=[];oe.forEach(nt=>{const xe=nt.data();G.push({id:nt.id,name:xe.name??"",phone:xe.phone??"+505 ",place:xe.place??"",status:xe.status??"ACTIVO",creditLimit:Number(xe.creditLimit??0),balance:0})});for(const nt of G)try{const xe=Yt(dt(Le,"ar_movements"),cr("customerId","==",nt.id)),Ge=await Tt(xe);let $e=0;Ge.forEach(tt=>$e+=Number(tt.data().amount||0)),nt.balance=$e}catch{nt.balance=0}e(G);const Me=Yt(dt(Le,"products_clothes"),fi("createdAt","desc")),ke=await Tt(Me),Qe=[];ke.forEach(nt=>{const xe=nt.data();Qe.push({id:nt.id,name:xe.name??"(sin nombre)",sku:xe.sku??""})}),n(Qe);const je=Yt(dt(Le,"inventory_clothes_batches"),cr("remaining",">",0)),We=await Tt(je),ze={};We.forEach(nt=>{const xe=nt.data(),Ge=xe.productId||"",$e=Number(xe.remaining||0);Ge&&(ze[Ge]=(ze[Ge]||0)+$e)}),i(ze)})()},[]);const te=Q.useMemo(()=>t.find(ae=>ae.id===l),[t,l]),$=(te==null?void 0:te.balance)||0,ne=a==="CREDITO"?$+Math.max(0,Number(N||0))-Math.max(0,Number(O||0)):0,X=async ae=>{if(!ae)return;if(_.some(Qe=>Qe.productId===ae)){B("");return}const oe=r.find(Qe=>Qe.id===ae);if(!oe){B("");return}let G=await dW(ae);G||(G=Number((oe==null?void 0:oe.price)||0));const Me=await QN(ae),ke={productId:ae,productName:oe.name||"",sku:oe.sku||"",unitPrice:Number(G)||0,available:Number(Me)||0,qty:0,discount:0};y(Qe=>[...Qe,ke]),B("")},de=(ae,oe)=>{y(G=>G.map(Me=>{if(Me.productId!==ae)return Me;if(oe==="")return{...Me,qty:0};const ke=Math.max(0,Math.floor(Number(oe)));return{...Me,qty:ke}}))},ge=(ae,oe)=>{y(G=>G.map(Me=>{if(Me.productId!==ae)return Me;if(oe==="")return{...Me,discount:0};const ke=Math.max(0,Math.floor(Number(oe)));return{...Me,discount:ke}}))},Ce=ae=>y(oe=>oe.filter(G=>G.productId!==ae)),Ue=async()=>{if(!m)return"Selecciona la fecha.";if(_.length===0)return"Agrega al menos un producto.";const ae=_.filter(oe=>(oe.qty||0)>0);if(ae.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(N>0))return"El total debe ser mayor a cero.";if(a==="CONTADO"){if(!u.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!l)return"Selecciona un cliente (crédito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>N)return"El pago inicial no puede superar el total.";if((te==null?void 0:te.status)==="BLOQUEADO")return"El cliente está BLOQUEADO. No se puede facturar a crédito."}for(const oe of ae){const G=await QN(oe.productId);if(oe.qty>G)return`Inventario insuficiente para "${oe.productName}". Disponible: ${G} unidades.`;const Me=(Number(oe.unitPrice)||0)*(oe.qty||0),ke=Number(oe.discount)||0;if(!Number.isInteger(ke)||ke<0)return`El descuento en "${oe.productName}" debe ser entero y ≥ 0.`;if(ke>Me)return`El descuento en "${oe.productName}" no puede exceder C$ ${Me.toFixed(2)}.`}return null},Te=async ae=>{ae.preventDefault(),F("");const oe=await Ue();if(oe){F("❌ "+oe);return}try{L(!0);const G=_.filter(je=>(je.qty||0)>0).map(je=>{const We=(Number(je.unitPrice)||0)*(je.qty||0),ze=Math.max(0,Math.floor(Number(je.discount)||0)),nt=Math.max(0,We-ze);return{productId:je.productId,productName:je.productName,sku:je.sku||"",qty:je.qty,unitPrice:Number(je.unitPrice)||0,discount:ze,total:Math.floor(nt*100)/100}}),Me={type:a,date:m,createdAt:jt.now(),itemsTotal:Number(N)||0,total:Number(N)||0,quantity:Number(w)||0,items:G};a==="CONTADO"?Me.customerName=u.trim():(Me.customerId=l,Me.downPayment=Number(O)||0);const ke=await is(dt(Le,"sales_clothes"),Me);if(a==="CREDITO"&&l){const je={customerId:l,date:m,createdAt:jt.now(),ref:{saleId:ke.id}};await is(dt(Le,"ar_movements"),{...je,type:"CARGO",amount:Number(N)||0}),Number(O)>0&&await is(dt(Le,"ar_movements"),{...je,type:"ABONO",amount:-Number(O)})}const Qe={};for(const je of G)if(je.qty>0){const{allocations:We}=await lW({productId:je.productId,quantity:je.qty,saleDate:m,saleId:ke.id});Qe[je.productId]={productId:je.productId,allocations:We}}await sn(Pt(Le,"sales_clothes",ke.id),{allocationsByItem:Qe}),o("CONTADO"),c(""),h(""),p(new Date().toISOString().slice(0,10)),y([]),R(0),a==="CREDITO"&&l&&e(je=>je.map(We=>We.id===l?{...We,balance:(We.balance||0)+(Number(N)||0)-(Number(O)||0)}:We)),F("✅ Venta registrada"),(async()=>{const je=Yt(dt(Le,"inventory_clothes_batches"),cr("remaining",">",0)),We=await Tt(je),ze={};We.forEach(nt=>{const xe=nt.data(),Ge=xe.productId||"",$e=Number(xe.remaining||0);Ge&&(ze[Ge]=(ze[Ge]||0)+$e)}),i(ze)})()}catch(G){console.error(G),F("❌ Error al guardar la venta")}finally{L(!1)}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),A.jsxs("form",{onSubmit:Te,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ae=>o(ae.target.value),children:[A.jsx("option",{value:"CONTADO",children:"Contado"}),A.jsx("option",{value:"CREDITO",children:"Crédito"})]})]}),a==="CONTADO"?A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:u,onChange:ae=>h(ae.target.value)})]}):A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crédito)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("select",{className:"flex-1 border p-2 rounded",value:l,onChange:ae=>c(ae.target.value),children:[A.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(ae=>A.jsxs("option",{value:ae.status==="ACTIVO"?ae.id:"",disabled:ae.status==="BLOQUEADO",children:[ae.name," | ",ae.phone," | Saldo: ",ku(ae.balance||0)]},ae.id))]}),A.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>I(!0),children:"Crear Cliente"})]}),A.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-lg font-semibold",children:ku($)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ae=>R(Math.max(0,Number(ae.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),A.jsx("div",{className:"text-lg font-semibold",children:ku(ne)})]})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:m,onChange:ae=>p(ae.target.value)})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:async ae=>{const oe=ae.target.value;B(oe),await X(oe)},children:[A.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(ae=>{const oe=_.some(ke=>ke.productId===ae.id),G=s[ae.id]||0,Me=oe||G<=0;return A.jsxs("option",{value:Me?"":ae.id,disabled:Me,children:[ae.name," ",ae.sku?`— ${ae.sku}`:""," ",G>0?`(disp: ${G})`:"(sin stock)",oe?" (seleccionado)":""]},ae.id)})]}),A.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsxs("div",{className:"border rounded overflow-hidden",children:[A.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[A.jsx("div",{className:"col-span-4",children:"Producto"}),A.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),A.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),A.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),A.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),A.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),A.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),_.length===0?A.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):_.map(ae=>{const oe=Math.max(0,(ae.available||0)-(ae.qty||0)),G=(Number(ae.unitPrice)||0)*(ae.qty||0),Me=Math.max(0,G-(Number(ae.discount)||0));return A.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[A.jsx("div",{className:"col-span-4",children:A.jsxs("div",{className:"font-medium",children:[ae.productName,ae.sku?` — ${ae.sku}`:""]})}),A.jsx("div",{className:"col-span-2 text-right",children:ku(ae.unitPrice)}),A.jsx("div",{className:"col-span-2 text-right",children:oe}),A.jsx("div",{className:"col-span-1",children:A.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ae.qty)||ae.qty===0?"":ae.qty,onChange:ke=>de(ae.productId,ke.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),A.jsx("div",{className:"col-span-1",children:A.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ae.discount)||ae.discount===0?"":ae.discount,onChange:ke=>ge(ae.productId,ke.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),A.jsx("div",{className:"col-span-1 text-right",children:ku(Me)}),A.jsx("div",{className:"col-span-1 text-center",children:A.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>Ce(ae.productId),title:"Quitar producto",children:"✕"})})]},ae.productId)})]}),_.length>0&&A.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),A.jsx("span",{className:"font-semibold",children:w})]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-gray-600",children:"Total: "}),A.jsx("span",{className:"font-semibold",children:ku(N)})]})]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:E,children:E?"Guardando...":"Registrar venta"})})]}),M&&A.jsx("p",{className:"mt-2 text-sm",children:M}),D&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[A.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",value:U,onChange:ae=>T(ae.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Teléfono"}),A.jsx("input",{className:"w-full border p-2 rounded",value:ee,onChange:ae=>le(LN(ae.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:re,onChange:ae=>ue(ae.target.value),children:[A.jsx("option",{value:"",children:"—"}),uW.map(ae=>A.jsx("option",{value:ae,children:ae},ae))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:ae=>Ee(ae.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Límite de crédito (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:P===0?"":P,onChange:ae=>k(Math.max(0,Number(ae.target.value||0))),placeholder:"Ej: 2000"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:W,onChange:ae=>ce(ae.target.value),maxLength:500})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{z(),I(!1)},children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(F(""),!U.trim()){F("Ingresa el nombre del nuevo cliente.");return}const ae=LN(ee);try{const oe=await is(dt(Le,"customers_clothes"),{name:U.trim(),phone:ae,place:re||"",notes:W||"",status:ie,creditLimit:Number(P||0),createdAt:jt.now()}),G={id:oe.id,name:U.trim(),phone:ae,place:re||"",status:ie,creditLimit:Number(P||0),balance:0};e(Me=>[G,...Me]),c(oe.id),z(),I(!1),F("✅ Cliente creado")}catch(oe){console.error(oe),F("❌ Error al crear cliente")}},children:"Guardar cliente"})]})]})}),E&&A.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[A.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("span",{className:"font-medium",children:"Guardando venta…"})]})})]})}const Fn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function t0(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function fW(t,e){const r=t0(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},s=Number(t.quantity??n.qty??0),i=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:s,unitPrice:Number(n.unitPrice??(i&&s?i/s:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function pW(t,e,r,n){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((l,c)=>l.date.localeCompare(c.date));const i=[...e].sort((o,l)=>o.date.localeCompare(l.date));let a=0;for(const o of i)for(const l of o.items||[]){const c=s[l.productId];if(!c)continue;let u=Number(l.qty||0);if(!(u<=0))for(const h of c.lots){if(u<=0)break;if(h.qtyLeft<=0)continue;const m=Math.min(h.qtyLeft,u);o.date>=r&&o.date<=n&&(a+=m*h.cost),h.qtyLeft-=m,u-=m}}return a}function mW(){const{refreshKey:t,refresh:e}=th(),[r,n]=Q.useState(Zt(Zd(new Date),"yyyy-MM-dd")),[s,i]=Q.useState(Zt(Yd(new Date),"yyyy-MM-dd")),[a,o]=Q.useState([]),[l,c]=Q.useState([]),[u,h]=Q.useState([]),[m,p]=Q.useState([]),[b,B]=Q.useState([]),[_,y]=Q.useState([]),[w,N]=Q.useState(!0),[O,R]=Q.useState(""),[M,F]=Q.useState(!1),[E,L]=Q.useState(null),[D,I]=Q.useState([]),[U,T]=Q.useState(!1),[ee,le]=Q.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});Q.useEffect(()=>{(async()=>{N(!0),R("");try{const P=await Tt(dt(Le,"sales_clothes")),k=[],z=[];P.forEach(ae=>{const oe=ae.data(),G=fW(oe,ae.id);G&&(G.date<=s&&k.push(G),G.date>=r&&G.date<=s&&z.push(G))}),c(k),o(z);const te=await Tt(dt(Le,"inventory_clothes_batches")),$=[];te.forEach(ae=>{const oe=ae.data(),G=t0(oe);!G||G>s||$.push({id:ae.id,productId:oe.productId,productName:oe.productName||"",date:G,quantity:Number(oe.quantity||0),remaining:Number(oe.remaining||0),purchasePrice:Number(oe.purchasePrice||0)})}),h($);const ne=await Tt(dt(Le,"expenses_clothes")),X=[];ne.forEach(ae=>{const oe=ae.data(),G=t0(oe);G&&G>=r&&G<=s&&X.push({id:ae.id,date:G,category:oe.category||"",description:oe.description||"",amount:Number(oe.amount||0),status:oe.status||""})}),p(X);const de=await Tt(dt(Le,"ar_movements")),ge=[],Ce={};de.forEach(ae=>{const oe=ae.data(),G=t0(oe);if(!G)return;const Me=oe.customerId,ke=Number(oe.amount||0);Me&&(Ce[Me]=(Ce[Me]||0)+ke),oe.type==="ABONO"&&G>=r&&G<=s&&ge.push({id:ae.id,customerId:Me,type:"ABONO",amount:ke,date:G})}),B(ge);const Ue=await Tt(dt(Le,"customers_clothes")),Te=[];Ue.forEach(ae=>{const oe=ae.data();Te.push({id:ae.id,name:oe.name||"",balance:Ce[ae.id]||0})}),y(Te)}catch(P){console.error(P),R("❌ Error cargando datos del dashboard.")}finally{N(!1)}})()},[r,s,t]);const re=Q.useMemo(()=>{try{return pW(u,l,r,s)}catch(P){return console.error(P),0}},[u,l,r,s]),ue=Q.useMemo(()=>{const P=a.reduce((Ce,Ue)=>Ce+(Ue.total||0),0),k=m.reduce((Ce,Ue)=>Ce+(Ue.amount||0),0),z=P-re,te=z-k,$=b.reduce((Ce,Ue)=>Ce+Math.abs(Ue.amount||0),0),ne=_.filter(Ce=>(Ce.balance||0)>0),X=ne.reduce((Ce,Ue)=>Ce+(Ue.balance||0),0);let de=0,ge=0;for(const Ce of a){const Ue=(Ce.items||[]).reduce((Te,ae)=>Te+(Number(ae.qty)||0),0);Ce.type==="CONTADO"?de+=Ue:ge+=Ue}return{ventasTotales:P,costoMercaderia:re,gastosPeriodo:k,gananciaAntes:z,gananciaDespues:te,abonosRecibidos:$,saldosPendientes:X,clientesConSaldo:ne.length,prendasCash:de,prendasCredito:ge}},[a,m,b,_,re]),W=Q.useMemo(()=>{const P={};for(const k of a){if(k.type!=="CREDITO"||!k.customerId)continue;const z=(k.items||[]).reduce((te,$)=>te+(Number($.qty)||0),0);P[k.customerId]=(P[k.customerId]||0)+z}return _.filter(k=>(k.balance||0)>0).map(k=>({customerId:k.id,name:k.name,prendasCredito:P[k.id]||0,saldo:k.balance||0})).sort((k,z)=>z.saldo-k.saldo)},[_,a]),ce=Q.useMemo(()=>{const P={};return _.forEach(k=>P[k.id]=k.name),P},[_]),ie=Q.useMemo(()=>[...a].sort((P,k)=>k.date.localeCompare(P.date)).map(P=>{var te;const k=(P.items||[]).reduce(($,ne)=>$+(Number(ne.qty)||0),0);let z="Cash";return P.type==="CREDITO"&&P.customerId?z=ce[P.customerId]||"—":P.type==="CONTADO"&&(z=((te=P.customerName)==null?void 0:te.trim())||"Cash"),{id:P.id,date:P.date,type:P.type==="CREDITO"?"Crédito":"Cash",customer:z,piezas:k,total:Number(P.total||0)}}),[a,ce]),Ee=async P=>{F(!0),L({id:P.customerId,name:P.name}),I([]),T(!0),le({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const k=[];let z=0,te=0,$=0;for(const ge of a)if(!(ge.type!=="CREDITO"||ge.customerId!==P.customerId))for(const Ce of ge.items||[]){const Ue=Number(Ce.qty||0),Te=Number(Ce.unitPrice||0),ae=Ue*Te,oe=Math.max(0,Number(Ce.discount||0)),G=Math.max(0,ae-oe);k.push({saleId:ge.id,date:ge.date,productName:Ce.productName,sku:Ce.sku||"",qty:Ue,unitPrice:Te,lineTotal:ae,discount:oe,lineFinal:G}),z+=ae,te+=oe,$+=G}let ne=0;for(const ge of b)ge.customerId===P.customerId&&(ne+=Math.abs(ge.amount||0));const X=_.find(ge=>ge.id===P.customerId),de=(X==null?void 0:X.balance)||0;I(k),le({totalBruto:z,totalDescuento:te,totalFiado:$,saldoActual:de,abonadoPeriodo:ne})}catch(k){console.error(k),R("❌ No se pudo cargar el detalle del cliente.")}finally{T(!1)}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),A.jsx(zp,{onClick:e,loading:w})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:P=>n(P.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:P=>i(P.target.value)})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ue.ventasTotales)}),A.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crédito del periodo."})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadería (FIFO)"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ue.costoMercaderia)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),A.jsx("div",{className:"text-xl font-semibold text-green-600",children:Fn(ue.gananciaAntes)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ue.gastosPeriodo)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia después de Gastos"}),A.jsx("div",{className:"text-xl font-semibold text-green-600",children:Fn(ue.gananciaDespues)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ue.abonosRecibidos)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ue.saldosPendientes)}),A.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),A.jsx("div",{className:"text-xl font-semibold",children:ue.clientesConSaldo})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:ue.prendasCash})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crédito (vendidas)"}),A.jsx("div",{className:"text-xl font-semibold",children:ue.prendasCredito})]})]}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Prendas Crédito (periodo)"}),A.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando…"})}):W.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):W.map(P=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:P.name}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ee({customerId:P.customerId,name:P.name}),title:"Ver piezas fiadas del periodo",children:P.prendasCredito})}),A.jsx("td",{className:"p-2 border font-semibold",children:Fn(P.saldo)})]},P.customerId))})]})}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Piezas"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando…"})}):ie.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):ie.map(P=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:P.date}),A.jsx("td",{className:"p-2 border",children:P.customer}),A.jsx("td",{className:"p-2 border",children:P.type}),A.jsx("td",{className:"p-2 border",children:P.piezas}),A.jsx("td",{className:"p-2 border",children:Fn(P.total)})]},P.id))})]})}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categoría"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando…"})}):m.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):m.sort((P,k)=>P.date.localeCompare(k.date)).map(P=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:P.date}),A.jsx("td",{className:"p-2 border",children:P.category||"—"}),A.jsx("td",{className:"p-2 border",children:P.description?A.jsx("span",{title:P.description,children:P.description.length>40?P.description.slice(0,40)+"…":P.description}):"—"}),A.jsx("td",{className:"p-2 border",children:Fn(P.amount)}),A.jsx("td",{className:"p-2 border",children:P.status||"—"})]},P.id))})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O}),M&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente — ",(E==null?void 0:E.name)||""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ee.totalBruto)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ee.totalDescuento)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ee.totalFiado)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ee.saldoActual)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Fn(ee.abonadoPeriodo)})]})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha compra"}),A.jsx("th",{className:"p-2 border",children:"Pieza"}),A.jsx("th",{className:"p-2 border",children:"SKU"}),A.jsx("th",{className:"p-2 border",children:"Cant."}),A.jsx("th",{className:"p-2 border",children:"P. Unit"}),A.jsx("th",{className:"p-2 border",children:"Monto"})," ",A.jsx("th",{className:"p-2 border",children:"Descuento"})," ",A.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),A.jsx("tbody",{children:U?A.jsx("tr",{children:A.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando…"})}):D.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):D.sort((P,k)=>P.date.localeCompare(k.date)).map((P,k)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:P.date}),A.jsx("td",{className:"p-2 border",children:P.productName}),A.jsx("td",{className:"p-2 border",children:P.sku||"—"}),A.jsx("td",{className:"p-2 border",children:P.qty}),A.jsx("td",{className:"p-2 border",children:Fn(P.unitPrice)}),A.jsx("td",{className:"p-2 border",children:Fn(P.lineTotal)}),A.jsx("td",{className:"p-2 border",children:Fn(P.discount)}),A.jsx("td",{className:"p-2 border",children:Fn(P.lineFinal)})]},`${P.saleId}-${k}`))})]})})]})})]})}const jN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],Cg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function gW(){const[t,e]=Q.useState(Zt(Zd(new Date),"yyyy-MM-dd")),[r,n]=Q.useState(Zt(Yd(new Date),"yyyy-MM-dd")),[s,i]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[a,o]=Q.useState(""),[l,c]=Q.useState(""),[u,h]=Q.useState(0),[m,p]=Q.useState("PENDIENTE"),[b,B]=Q.useState(""),[_,y]=Q.useState([]),[w,N]=Q.useState(!0),[O,R]=Q.useState(""),[M,F]=Q.useState(null),[E,L]=Q.useState(""),[D,I]=Q.useState(""),[U,T]=Q.useState(""),[ee,le]=Q.useState(0),[re,ue]=Q.useState("PENDIENTE"),[W,ce]=Q.useState("");Q.useEffect(()=>{(async()=>{N(!0);try{const X=Yt(dt(Le,"expenses_clothes"),fi("date","desc")),de=await Tt(X),ge=[];de.forEach(Ce=>{const Ue=Ce.data();ge.push({id:Ce.id,date:Ue.date||Zt(new Date,"yyyy-MM-dd"),category:Ue.category||"",description:Ue.description||"",amount:Number(Ue.amount||0),status:Ue.status||"PENDIENTE",notes:Ue.notes||"",createdAt:Ue.createdAt??jt.now()})}),y(ge)}catch(X){console.error(X),R("❌ Error al cargar gastos")}finally{N(!1)}})()},[]);const ie=Q.useMemo(()=>_.filter(X=>!(t&&X.date<t||r&&X.date>r)),[_,t,r]),Ee=Q.useMemo(()=>{const X=ie.reduce((Ce,Ue)=>Ce+(Ue.amount||0),0),de=ie.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,Ue)=>Ce+(Ue.amount||0),0),ge=X-de;return{total:X,pagado:de,pendiente:ge}},[ie]),P=()=>{i(Zt(new Date,"yyyy-MM-dd")),o(""),c(""),h(0),p("PENDIENTE"),B("")},k=async X=>{if(X.preventDefault(),R(""),!a){R("Selecciona una categoría.");return}if(!l.trim()){R("Ingresa una descripción.");return}if(!u||u<=0){R("Ingresa un monto válido.");return}try{const de=await is(dt(Le,"expenses_clothes"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:jt.now()});y(ge=>[{id:de.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:jt.now()},...ge]),P(),R("✅ Gasto registrado")}catch(de){console.error(de),R("❌ Error al guardar gasto")}},z=X=>{F(X.id),L(X.date),I(X.category||""),T(X.description||""),le(Number(X.amount||0)),ue(X.status||"PENDIENTE"),ce(X.notes||"")},te=()=>{F(null),L(""),I(""),T(""),le(0),ue("PENDIENTE"),ce("")},$=async()=>{if(M){if(!D){R("Selecciona una categoría.");return}if(!U.trim()){R("Ingresa una descripción.");return}if(!ee||ee<=0){R("Ingresa un monto válido.");return}try{await sn(Pt(Le,"expenses_clothes",M),{date:E,category:D,description:U.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}),y(X=>X.map(de=>de.id===M?{...de,date:E,category:D,description:U.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}:de)),te(),R("✅ Gasto actualizado")}catch(X){console.error(X),R("❌ Error al actualizar gasto")}}},ne=async X=>{confirm(`¿Eliminar el gasto "${X.description}"?`)&&(await Us(Pt(Le,"expenses_clothes",X.id)),y(ge=>ge.filter(Ce=>Ce.id!==X.id)),R("🗑️ Gasto borrado"))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:X=>e(X.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:X=>n(X.target.value)})]}),A.jsxs("div",{className:"ml-auto text-sm",children:[A.jsx("div",{className:"font-semibold",children:"Totales del rango"}),A.jsxs("div",{children:["Total: ",Cg(Ee.total)]}),A.jsxs("div",{children:["Pagado: ",Cg(Ee.pagado)]}),A.jsxs("div",{children:["Pendiente: ",Cg(Ee.pendiente)]})]})]}),A.jsxs("form",{onSubmit:k,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:X=>i(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Categoría"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:X=>o(X.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),jN.map(X=>A.jsx("option",{value:X,children:X},X))]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Descripción"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto…",value:l,onChange:X=>c(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:X=>h(Math.max(0,Number(X.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:X=>p(X.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:X=>B(X.target.value),maxLength:500,placeholder:"Comentario / nota opcional…"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categoría"}),A.jsx("th",{className:"p-2 border",children:"Descripción"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando…"})}):ie.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ie.slice().sort((X,de)=>X.date.localeCompare(de.date)).map(X=>{const de=M===X.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ge=>L(ge.target.value)}):X.date}),A.jsx("td",{className:"p-2 border",children:de?A.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:ge=>I(ge.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),jN.map(ge=>A.jsx("option",{value:ge,children:ge},ge))]}):X.category||"—"}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{className:"w-full border p-1 rounded",value:U,onChange:ge=>T(ge.target.value)}):A.jsx("span",{title:X.description,children:X.description.length>40?X.description.slice(0,40)+"…":X.description})}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ge=>le(Math.max(0,Number(ge.target.value||0)))}):Cg(X.amount)}),A.jsx("td",{className:"p-2 border",children:de?A.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ge=>ue(ge.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:X.status})}),A.jsx("td",{className:"p-2 border",children:de?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:W,onChange:ge=>ce(ge.target.value),maxLength:500}):A.jsx("span",{title:X.notes||"",children:(X.notes||"").length>40?(X.notes||"").slice(0,40)+"…":X.notes||"—"})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:de?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:te,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(X),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ne(X),children:"Borrar"})]})})})]},X.id)})})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O})]})}const Yi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vW(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Zt(t.createdAt.toDate(),"yyyy-MM-dd"):""}function wW(t,e){const r=vW(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function yW(t,e){if(e<=0)return;const r=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",t)),n=await Tt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await sn(Pt(Le,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: faltó inventario",i)}async function xW(t,e){if(e<=0)return;const r=Yt(dt(Le,"inventory_clothes_batches"),cr("productId","==",t)),n=await Tt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const l=Math.min(o,i);i-=l,await sn(Pt(Le,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+l).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvió todo",i)}async function M3(t){const e=Yt(dt(Le,"ar_movements"),cr("ref.saleId","==",t)),r=await Tt(e);await Promise.all(r.docs.map(n=>Us(Pt(Le,"ar_movements",n.id))))}async function bW(t,e,r){if(await M3(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:jt.now(),ref:{saleId:t.id}},{addDoc:s}=await Qo(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>CH);return{addDoc:a}},void 0);await s(dt(Le,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(dt(Le,"ar_movements"),{...n,type:"ABONO",amount:-i})}function BW(){const[t,e]=Q.useState(!1),[r,n]=Q.useState(!1),[s,i]=Q.useState(null),[a,o]=Q.useState([]),l=async ae=>{e(!0),n(!0),i(ae),o([]);try{const G=(await Tt(Yt(dt(Le,"sales_clothes"),cr("__name__","==",ae)))).docs[0],Me=G==null?void 0:G.data(),Qe=(Array.isArray(Me==null?void 0:Me.items)?Me.items:Me!=null&&Me.item?[Me.item]:[]).map(je=>({productName:String(je.productName||""),qty:Number(je.qty||0),unitPrice:Number(je.unitPrice||0),discount:Number(je.discount||0),total:Number(je.total||0)}));o(Qe)}catch(oe){console.error(oe)}finally{n(!1)}},[c,u]=Q.useState(Zt(new Date,"yyyy-MM-01")),[h,m]=Q.useState(Zt(new Date,"yyyy-MM-dd")),[p,b]=Q.useState([]),[B,_]=Q.useState([]),[y,w]=Q.useState(!0),[N,O]=Q.useState(""),[R,M]=Q.useState(""),[F,E]=Q.useState(""),[L,D]=Q.useState(null),[I,U]=Q.useState(!1),[T,ee]=Q.useState(null),[le,re]=Q.useState(0),ue=15,[W,ce]=Q.useState(1),ie=Q.useMemo(()=>{const ae={};return p.forEach(oe=>ae[oe.id]=oe.name),ae},[p]);Q.useEffect(()=>{(async()=>{w(!0),O("");try{const ae=await Tt(dt(Le,"customers_clothes")),oe=[];ae.forEach(ke=>oe.push({id:ke.id,name:ke.data().name||""})),b(oe);const G=await Tt(Yt(dt(Le,"sales_clothes"),fi("createdAt","desc"))),Me=[];G.forEach(ke=>{const Qe=wW(ke.data(),ke.id);Qe&&Qe.date>=c&&Qe.date<=h&&Me.push(Qe)}),_(Me.sort((ke,Qe)=>Qe.date.localeCompare(ke.date))),ce(1)}catch(ae){console.error(ae),O("❌ Error cargando transacciones.")}finally{w(!1)}})()},[c,h]);const Ee=Q.useMemo(()=>B.filter(ae=>!(R&&ae.customerId!==R||F&&ae.type!==F)),[B,R,F]),P=Q.useMemo(()=>{let ae=0,oe=0,G=0,Me=0;for(const ke of Ee)ke.type==="CONTADO"?(ae+=ke.item.qty,G+=ke.total):(oe+=ke.item.qty,Me+=ke.total);return{piezasCash:ae,piezasCredito:oe,montoCash:G,montoCredito:Me}},[Ee]),k=Math.max(1,Math.ceil(Ee.length/ue)),z=Q.useMemo(()=>{const ae=(W-1)*ue;return Ee.slice(ae,ae+ue)},[Ee,W]),te=ae=>{D(null),ee(ae),re(ae.item.qty||0),U(!0)},$=async ae=>{if(D(null),!!window.confirm("¿Eliminar esta venta? Esta acción no se puede deshacer."))try{w(!0),await cx(ae.id),await M3(ae.id),_(oe=>oe.filter(G=>G.id!==ae.id)),O("✅ Venta eliminada")}catch(oe){console.error(oe),O("❌ No se pudo eliminar la venta.")}finally{w(!1)}},ne=async()=>{if(!T)return;const ae=Number(T.item.qty||0),oe=Math.max(1,Math.floor(Number(le)||0));if(oe===ae){U(!1);return}const G=Number(T.item.unitPrice||0),Me=Number((G*oe).toFixed(2));try{w(!0);const ke=oe-ae;ke>0?await yW(T.item.productId,ke):ke<0&&await xW(T.item.productId,-ke);const Qe=Pt(Le,"sales_clothes",T.id);await sn(Qe,{quantity:oe,total:Me,itemsTotal:Me,"item.qty":oe,"item.total":Me,updatedAt:jt.now()});const je=Math.min(Number(T.downPayment||0),Me);await bW(T,Me,je),_(We=>We.map(ze=>ze.id===T.id?{...ze,quantity:oe,total:Me,item:{...ze.item,qty:oe,total:Me},downPayment:je}:ze)),O("✅ Venta actualizada"),U(!1)}catch(ke){console.error(ke),O("❌ No se pudo actualizar la venta.")}finally{w(!1)}},X=()=>{const ae=`Reporte de transacciones (Ropa) — ${c} a ${h}`,oe=Qe=>(Qe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G=Ee.map(Qe=>{const je=Qe.customerName||(Qe.customerId?ie[Qe.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Qe.date}</td>
          <td>${oe(je)}</td>
          <td>${Qe.type==="CREDITO"?"Crédito":"Cash"}</td>
          <td style="text-align:right">${Qe.item.qty}</td>
          <td style="text-align:right">${Yi(Qe.total)}</td>
        </tr>`}).join(""),Me=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${oe(ae)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${oe(ae)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${P.piezasCash}</div>
        <div><b>Piezas Crédito:</b> ${P.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Yi(P.montoCash)}</div>
        <div><b>Monto Crédito:</b> ${Yi(P.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${G||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ke=window.open("","_blank");ke&&(ke.document.open(),ke.document.write(Me),ke.document.close())},de=()=>ce(1),ge=()=>ce(ae=>Math.max(1,ae-1)),Ce=()=>ce(ae=>Math.min(k,ae+1)),Ue=()=>ce(k),Te=()=>{const ae=[];if(k<=7)for(let G=1;G<=k;G++)ae.push(G);else{const G=Math.max(1,W-2),Me=Math.min(k,W+2);ae.push(1),G>2&&ae.push(-1);for(let ke=G;ke<=Me;ke++)ke!==1&&ke!==k&&ae.push(ke);Me<k-1&&ae.push(-2),ae.push(k)}return A.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:de,disabled:W===1,children:"« Primero"}),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ge,disabled:W===1,children:"‹ Anterior"}),ae.map((G,Me)=>typeof G=="number"?A.jsx("button",{className:`px-3 py-1 border rounded ${G===W?"bg-blue-600 text-white":""}`,onClick:()=>ce(G),children:G},Me):A.jsx("span",{className:"px-2",children:"…"},Me)),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ce,disabled:W===k,children:"Siguiente ›"}),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ue,disabled:W===k,children:"Último »"})]}),A.jsxs("div",{className:"text-sm text-gray-600",children:["Página ",W," de ",k," • ",Ee.length," transacción(es)"]})]})};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:ae=>{u(ae.target.value),ce(1)}})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:h,onChange:ae=>{m(ae.target.value),ce(1)}})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Cliente (crédito)"}),A.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:R,onChange:ae=>{M(ae.target.value),ce(1)},children:[A.jsx("option",{value:"",children:"Todos"}),p.map(ae=>A.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Tipo"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:F,onChange:ae=>{E(ae.target.value),ce(1)},children:[A.jsx("option",{value:"",children:"Todos"}),A.jsx("option",{value:"CONTADO",children:"Cash"}),A.jsx("option",{value:"CREDITO",children:"Crédito"})]})]}),A.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:X,children:"Exportar PDF"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:P.piezasCash})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crédito"}),A.jsx("div",{className:"text-xl font-semibold",children:P.piezasCredito})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:Yi(P.montoCash)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crédito"}),A.jsx("div",{className:"text-xl font-semibold",children:Yi(P.montoCredito)})]})]}),A.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Piezas"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando…"})}):z.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):z.map(ae=>{const oe=ae.customerName||(ae.customerId?ie[ae.customerId]:"")||"Nombre cliente";return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:ae.date}),A.jsx("td",{className:"p-2 border",children:oe}),A.jsx("td",{className:"p-2 border",children:ae.type==="CREDITO"?"Crédito":"Cash"}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transacción",onClick:()=>l(ae.id),children:ae.item.qty})}),A.jsx("td",{className:"p-2 border",children:Yi(ae.total)}),A.jsxs("td",{className:"p-2 border relative",children:[A.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>D(G=>G===ae.id?null:ae.id),title:"Acciones",children:"⋮"}),L===ae.id&&A.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[A.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>te(ae),children:"Editar"}),A.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>$(ae),children:"Eliminar"})]})]})]},ae.id)})})]}),Te()]}),N&&A.jsx("p",{className:"mt-2 text-sm",children:N}),I&&T&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[A.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),A.jsxs("div",{className:"font-semibold",children:[T.item.productName," ",T.item.sku?`— ${T.item.sku}`:""]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),A.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:le,onChange:ae=>re(Math.max(1,Math.floor(Number(ae.target.value||0))))})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),A.jsx("div",{className:"text-lg font-semibold",children:Yi(T.item.unitPrice)})]}),A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),A.jsx("div",{className:"text-lg font-semibold",children:Yi(Number(T.item.unitPrice)*Number(le||0))})]})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{U(!1),ee(null)},children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ne,children:"Guardar cambios"})]})]})}),t&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?`— #${s}`:""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),A.jsx("th",{className:"p-2 border text-right",children:"Precio"}),A.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),A.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando…"})}):a.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin ítems en esta venta."})}):a.map((ae,oe)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border text-left",children:ae.productName}),A.jsx("td",{className:"p-2 border text-right",children:ae.qty}),A.jsx("td",{className:"p-2 border text-right",children:Yi(ae.unitPrice)}),A.jsx("td",{className:"p-2 border text-right",children:Yi(ae.discount||0)}),A.jsx("td",{className:"p-2 border text-right",children:Yi(ae.total)})]},oe))})]})})]})})]})}function CW(){const[t,e]=Q.useState(null),[r,n]=Q.useState(""),[s,i]=Q.useState(!0);if(Q.useEffect(()=>{const o=GF(nw,async l=>{if(i(!0),l){e(l);try{const c=Pt(Le,"users",l.uid),u=await zo(c),h=u.exists()?u.data().role:"";n(h||"")}catch{n("")}}else e(null),n("");i(!1)});return()=>o()},[]),s)return A.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const a=()=>r==="admin"?A.jsx(Du,{to:"FinancialDashboard",replace:!0}):r==="vendedor_pollo"?A.jsx(Du,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?A.jsx(Du,{to:"salesClothes",replace:!0}):A.jsx(Du,{to:"/",replace:!0});return A.jsx(uk,{children:A.jsxs(Hj,{children:[A.jsx(Vr,{path:"/",element:A.jsx(_H,{})}),A.jsxs(Vr,{path:"/admin",element:A.jsx(pn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa"],children:A.jsx(NH,{role:r})}),children:[A.jsx(Vr,{index:!0,element:A.jsx(a,{})}),A.jsx(Vr,{path:"bills",element:A.jsx(pn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(u$,{})})}),A.jsx(Vr,{path:"salesV2",element:A.jsx(pn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(NN,{user:t})})}),A.jsx(Vr,{path:"financialDashboard",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(j$,{})})}),A.jsx(Vr,{path:"expenses",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(D$,{})})}),A.jsx(Vr,{path:"billing",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(V$,{})})}),A.jsx(Vr,{path:"batches",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(P$,{})})}),A.jsx(Vr,{path:"paidBatches",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(z$,{})})}),A.jsx(Vr,{path:"fix",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(O$,{})})}),A.jsx(Vr,{path:"transactionclose",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(Q$,{})})}),A.jsx(Vr,{path:"billhistoric",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(d$,{})})}),A.jsx(Vr,{path:"users",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(h$,{})})}),A.jsx(Vr,{path:"products",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(p$,{})})}),A.jsx(Vr,{path:"salesClothes",element:A.jsx(pn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(hW,{})})}),A.jsx(Vr,{path:"TransactionsReportClothes",element:A.jsx(pn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(BW,{})})}),A.jsx(Vr,{path:"financialDashboardClothes",element:A.jsx(pn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(mW,{})})}),A.jsx(Vr,{path:"ExpensesClothes",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(gW,{})})}),A.jsx(Vr,{path:"inventoryClothesBatches",element:A.jsx(pn,{allowedRoles:["admin"],children:A.jsx(J$,{})})}),A.jsx(Vr,{path:"productsClothes",element:A.jsx(pn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(AW,{})})}),A.jsx(Vr,{path:"CustomersClothes",element:A.jsx(pn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(cW,{})})})]}),A.jsx(Vr,{path:"/salesV2",element:A.jsx(pn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(NN,{user:t})})}),A.jsx(Vr,{path:"*",element:A.jsx(Du,{to:"/"})})]})})}n1.createRoot(document.getElementById("root")).render(A.jsx(No.StrictMode,{children:A.jsx(CW,{})}));export{_r as _,EW as c,CP as g};
