var Sce=Object.defineProperty;var Ice=(t,e,r)=>e in t?Sce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ta=(t,e,r)=>Ice(t,typeof e!="symbol"?e+"":e,r);function Bce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Nrt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xq={exports:{}},tI={},vq={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb=Symbol.for("react.element"),Tce=Symbol.for("react.portal"),Pce=Symbol.for("react.fragment"),jce=Symbol.for("react.strict_mode"),kce=Symbol.for("react.profiler"),Fce=Symbol.for("react.provider"),Oce=Symbol.for("react.context"),Dce=Symbol.for("react.forward_ref"),Rce=Symbol.for("react.suspense"),Mce=Symbol.for("react.memo"),Lce=Symbol.for("react.lazy"),aM=Symbol.iterator;function Uce(t){return t===null||typeof t!="object"?null:(t=aM&&t[aM]||t["@@iterator"],typeof t=="function"?t:null)}var yq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bq=Object.assign,wq={};function fv(t,e,r){this.props=t,this.context=e,this.refs=wq,this.updater=r||yq}fv.prototype.isReactComponent={};fv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nq(){}Nq.prototype=fv.prototype;function cF(t,e,r){this.props=t,this.context=e,this.refs=wq,this.updater=r||yq}var uF=cF.prototype=new Nq;uF.constructor=cF;bq(uF,fv.prototype);uF.isPureReactComponent=!0;var sM=Array.isArray,_q=Object.prototype.hasOwnProperty,dF={current:null},Cq={key:!0,ref:!0,__self:!0,__source:!0};function Eq(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)_q.call(e,n)&&!Cq.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Nb,type:t,key:s,ref:i,props:a,_owner:dF.current}}function Qce(t,e){return{$$typeof:Nb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function AF(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nb}function Vce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var iM=/\/+/g;function G3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vce(""+t.key):e.toString(36)}function z_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Nb:case Tce:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+G3(i,0):n,sM(a)?(r="",t!=null&&(r=t.replace(iM,"$&/")+"/"),z_(a,e,r,"",function(u){return u})):a!=null&&(AF(a)&&(a=Qce(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(iM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",sM(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+G3(s,l);i+=z_(s,e,r,c,a)}else if(c=Uce(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+G3(s,l++),i+=z_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function zw(t,e,r){if(t==null)return t;var n=[],a=0;return z_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Hce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vl={current:null},W_={transition:null},$ce={ReactCurrentDispatcher:Vl,ReactCurrentBatchConfig:W_,ReactCurrentOwner:dF};function Sq(){throw Error("act(...) is not supported in production builds of React.")}In.Children={map:zw,forEach:function(t,e,r){zw(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return zw(t,function(){e++}),e},toArray:function(t){return zw(t,function(e){return e})||[]},only:function(t){if(!AF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};In.Component=fv;In.Fragment=Pce;In.Profiler=kce;In.PureComponent=cF;In.StrictMode=jce;In.Suspense=Rce;In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$ce;In.act=Sq;In.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=bq({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=dF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_q.call(e,c)&&!Cq.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Nb,type:t.type,key:a,ref:s,props:n,_owner:i}};In.createContext=function(t){return t={$$typeof:Oce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fce,_context:t},t.Consumer=t};In.createElement=Eq;In.createFactory=function(t){var e=Eq.bind(null,t);return e.type=t,e};In.createRef=function(){return{current:null}};In.forwardRef=function(t){return{$$typeof:Dce,render:t}};In.isValidElement=AF;In.lazy=function(t){return{$$typeof:Lce,_payload:{_status:-1,_result:t},_init:Hce}};In.memo=function(t,e){return{$$typeof:Mce,type:t,compare:e===void 0?null:e}};In.startTransition=function(t){var e=W_.transition;W_.transition={};try{t()}finally{W_.transition=e}};In.unstable_act=Sq;In.useCallback=function(t,e){return Vl.current.useCallback(t,e)};In.useContext=function(t){return Vl.current.useContext(t)};In.useDebugValue=function(){};In.useDeferredValue=function(t){return Vl.current.useDeferredValue(t)};In.useEffect=function(t,e){return Vl.current.useEffect(t,e)};In.useId=function(){return Vl.current.useId()};In.useImperativeHandle=function(t,e,r){return Vl.current.useImperativeHandle(t,e,r)};In.useInsertionEffect=function(t,e){return Vl.current.useInsertionEffect(t,e)};In.useLayoutEffect=function(t,e){return Vl.current.useLayoutEffect(t,e)};In.useMemo=function(t,e){return Vl.current.useMemo(t,e)};In.useReducer=function(t,e,r){return Vl.current.useReducer(t,e,r)};In.useRef=function(t){return Vl.current.useRef(t)};In.useState=function(t){return Vl.current.useState(t)};In.useSyncExternalStore=function(t,e,r){return Vl.current.useSyncExternalStore(t,e,r)};In.useTransition=function(){return Vl.current.useTransition()};In.version="18.3.1";vq.exports=In;var v=vq.exports;const ao=Ff(v),Kce=Bce({__proto__:null,default:ao},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gce=v,qce=Symbol.for("react.element"),zce=Symbol.for("react.fragment"),Wce=Object.prototype.hasOwnProperty,Xce=Gce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yce={key:!0,ref:!0,__self:!0,__source:!0};function Iq(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Wce.call(e,n)&&!Yce.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:qce,type:t,key:s,ref:i,props:a,_owner:Xce.current}}tI.Fragment=zce;tI.jsx=Iq;tI.jsxs=Iq;xq.exports=tI;var o=xq.exports,jT={},Bq={exports:{}},zc={},Tq={exports:{}},Pq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,J){var pe=ce.length;ce.push(J);e:for(;0<pe;){var Se=pe-1>>>1,k=ce[Se];if(0<a(k,J))ce[Se]=J,ce[pe]=k,pe=Se;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var J=ce[0],pe=ce.pop();if(pe!==J){ce[0]=pe;e:for(var Se=0,k=ce.length,F=k>>>1;Se<F;){var H=2*(Se+1)-1,M=ce[H],L=H+1,z=ce[L];if(0>a(M,pe))L<k&&0>a(z,M)?(ce[Se]=z,ce[L]=pe,Se=L):(ce[Se]=M,ce[H]=pe,Se=H);else if(L<k&&0>a(z,pe))ce[Se]=z,ce[L]=pe,Se=L;else break e}}return J}function a(ce,J){var pe=ce.sortIndex-J.sortIndex;return pe!==0?pe:ce.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,A=null,h=3,f=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ce){for(var J=r(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=ce)n(u),J.sortIndex=J.expirationTime,e(c,J);else break;J=r(u)}}function w(ce){if(p=!1,b(ce),!m)if(r(c)!==null)m=!0,re(I);else{var J=r(u);J!==null&&ie(w,J.startTime-ce)}}function I(ce,J){m=!1,p&&(p=!1,x(E),E=-1),f=!0;var pe=h;try{for(b(J),A=r(c);A!==null&&(!(A.expirationTime>J)||ce&&!B());){var Se=A.callback;if(typeof Se=="function"){A.callback=null,h=A.priorityLevel;var k=Se(A.expirationTime<=J);J=t.unstable_now(),typeof k=="function"?A.callback=k:A===r(c)&&n(c),b(J)}else n(c);A=r(c)}if(A!==null)var F=!0;else{var H=r(u);H!==null&&ie(w,H.startTime-J),F=!1}return F}finally{A=null,h=pe,f=!1}}var T=!1,C=null,E=-1,S=5,O=-1;function B(){return!(t.unstable_now()-O<S)}function P(){if(C!==null){var ce=t.unstable_now();O=ce;var J=!0;try{J=C(!0,ce)}finally{J?D():(T=!1,C=null)}}else T=!1}var D;if(typeof y=="function")D=function(){y(P)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,de=X.port2;X.port1.onmessage=P,D=function(){de.postMessage(null)}}else D=function(){g(P,0)};function re(ce){C=ce,T||(T=!0,D())}function ie(ce,J){E=g(function(){ce(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,re(I))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ce){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var pe=h;h=J;try{return ce()}finally{h=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,J){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var pe=h;h=ce;try{return J()}finally{h=pe}},t.unstable_scheduleCallback=function(ce,J,pe){var Se=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Se+pe:Se):pe=Se,ce){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=pe+k,ce={id:d++,callback:J,priorityLevel:ce,startTime:pe,expirationTime:k,sortIndex:-1},pe>Se?(ce.sortIndex=pe,e(u,ce),r(c)===null&&ce===r(u)&&(p?(x(E),E=-1):p=!0,ie(w,pe-Se))):(ce.sortIndex=k,e(c,ce),m||f||(m=!0,re(I))),ce},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(ce){var J=h;return function(){var pe=h;h=J;try{return ce.apply(this,arguments)}finally{h=pe}}}})(Pq);Tq.exports=Pq;var Jce=Tq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zce=v,Hc=Jce;function cr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jq=new Set,a2={};function Rp(t,e){Dx(t,e),Dx(t+"Capture",e)}function Dx(t,e){for(a2[t]=e,t=0;t<e.length;t++)jq.add(e[t])}var gf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kT=Object.prototype.hasOwnProperty,eue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oM={},lM={};function tue(t){return kT.call(lM,t)?!0:kT.call(oM,t)?!1:eue.test(t)?lM[t]=!0:(oM[t]=!0,!1)}function rue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nue(t,e,r,n){if(e===null||typeof e>"u"||rue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hl(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qo[t]=new Hl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qo[e]=new Hl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qo[t]=new Hl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qo[t]=new Hl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qo[t]=new Hl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qo[t]=new Hl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qo[t]=new Hl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qo[t]=new Hl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qo[t]=new Hl(t,5,!1,t.toLowerCase(),null,!1,!1)});var fF=/[\-:]([a-z])/g;function hF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fF,hF);Qo[e]=new Hl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fF,hF);Qo[e]=new Hl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fF,hF);Qo[e]=new Hl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qo[t]=new Hl(t,1,!1,t.toLowerCase(),null,!1,!1)});Qo.xlinkHref=new Hl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qo[t]=new Hl(t,1,!1,t.toLowerCase(),null,!0,!0)});function mF(t,e,r,n){var a=Qo.hasOwnProperty(e)?Qo[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nue(e,r,a,n)&&(r=null),n||a===null?tue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Of=Zce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ww=Symbol.for("react.element"),Jg=Symbol.for("react.portal"),Zg=Symbol.for("react.fragment"),pF=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),kq=Symbol.for("react.provider"),Fq=Symbol.for("react.context"),gF=Symbol.for("react.forward_ref"),OT=Symbol.for("react.suspense"),DT=Symbol.for("react.suspense_list"),xF=Symbol.for("react.memo"),Th=Symbol.for("react.lazy"),Oq=Symbol.for("react.offscreen"),cM=Symbol.iterator;function c1(t){return t===null||typeof t!="object"?null:(t=cM&&t[cM]||t["@@iterator"],typeof t=="function"?t:null)}var Ss=Object.assign,q3;function W1(t){if(q3===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);q3=e&&e[1]||""}return`
`+q3+t}var z3=!1;function W3(t,e){if(!t||z3)return"";z3=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==s[l]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{z3=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?W1(t):""}function aue(t){switch(t.tag){case 5:return W1(t.type);case 16:return W1("Lazy");case 13:return W1("Suspense");case 19:return W1("SuspenseList");case 0:case 2:case 15:return t=W3(t.type,!1),t;case 11:return t=W3(t.type.render,!1),t;case 1:return t=W3(t.type,!0),t;default:return""}}function RT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zg:return"Fragment";case Jg:return"Portal";case FT:return"Profiler";case pF:return"StrictMode";case OT:return"Suspense";case DT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fq:return(t.displayName||"Context")+".Consumer";case kq:return(t._context.displayName||"Context")+".Provider";case gF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xF:return e=t.displayName||null,e!==null?e:RT(t.type)||"Memo";case Th:e=t._payload,t=t._init;try{return RT(t(e))}catch{}}return null}function sue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RT(e);case 8:return e===pF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function y0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iue(t){var e=Dq(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xw(t){t._valueTracker||(t._valueTracker=iue(t))}function Rq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Dq(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function DC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function MT(t,e){var r=e.checked;return Ss({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function uM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=y0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mq(t,e){e=e.checked,e!=null&&mF(t,"checked",e,!1)}function LT(t,e){Mq(t,e);var r=y0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?UT(t,e.type,r):e.hasOwnProperty("defaultValue")&&UT(t,e.type,y0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dM(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function UT(t,e,r){(e!=="number"||DC(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var X1=Array.isArray;function vx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+y0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function QT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(cr(91));return Ss({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(cr(92));if(X1(r)){if(1<r.length)throw Error(cr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:y0(r)}}function Lq(t,e){var r=y0(e.value),n=y0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function fM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uq(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uq(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yw,Qq=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yw=Yw||document.createElement("div"),Yw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function s2(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var by={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oue=["Webkit","ms","Moz","O"];Object.keys(by).forEach(function(t){oue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),by[e]=by[t]})});function Vq(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||by.hasOwnProperty(t)&&by[t]?(""+e).trim():e+"px"}function Hq(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Vq(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var lue=Ss({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HT(t,e){if(e){if(lue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(cr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(cr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(cr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(cr(62))}}function $T(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KT=null;function vF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var GT=null,yx=null,bx=null;function hM(t){if(t=Eb(t)){if(typeof GT!="function")throw Error(cr(280));var e=t.stateNode;e&&(e=iI(e),GT(t.stateNode,t.type,e))}}function $q(t){yx?bx?bx.push(t):bx=[t]:yx=t}function Kq(){if(yx){var t=yx,e=bx;if(bx=yx=null,hM(t),e)for(t=0;t<e.length;t++)hM(e[t])}}function Gq(t,e){return t(e)}function qq(){}var X3=!1;function zq(t,e,r){if(X3)return t(e,r);X3=!0;try{return Gq(t,e,r)}finally{X3=!1,(yx!==null||bx!==null)&&(qq(),Kq())}}function i2(t,e){var r=t.stateNode;if(r===null)return null;var n=iI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(cr(231,e,typeof r));return r}var qT=!1;if(gf)try{var u1={};Object.defineProperty(u1,"passive",{get:function(){qT=!0}}),window.addEventListener("test",u1,u1),window.removeEventListener("test",u1,u1)}catch{qT=!1}function cue(t,e,r,n,a,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var wy=!1,RC=null,MC=!1,zT=null,uue={onError:function(t){wy=!0,RC=t}};function due(t,e,r,n,a,s,i,l,c){wy=!1,RC=null,cue.apply(uue,arguments)}function Aue(t,e,r,n,a,s,i,l,c){if(due.apply(this,arguments),wy){if(wy){var u=RC;wy=!1,RC=null}else throw Error(cr(198));MC||(MC=!0,zT=u)}}function Mp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Wq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mM(t){if(Mp(t)!==t)throw Error(cr(188))}function fue(t){var e=t.alternate;if(!e){if(e=Mp(t),e===null)throw Error(cr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return mM(a),t;if(s===n)return mM(a),e;s=s.sibling}throw Error(cr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i)throw Error(cr(189))}}if(r.alternate!==n)throw Error(cr(190))}if(r.tag!==3)throw Error(cr(188));return r.stateNode.current===r?t:e}function Xq(t){return t=fue(t),t!==null?Yq(t):null}function Yq(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yq(t);if(e!==null)return e;t=t.sibling}return null}var Jq=Hc.unstable_scheduleCallback,pM=Hc.unstable_cancelCallback,hue=Hc.unstable_shouldYield,mue=Hc.unstable_requestPaint,Js=Hc.unstable_now,pue=Hc.unstable_getCurrentPriorityLevel,yF=Hc.unstable_ImmediatePriority,Zq=Hc.unstable_UserBlockingPriority,LC=Hc.unstable_NormalPriority,gue=Hc.unstable_LowPriority,ez=Hc.unstable_IdlePriority,rI=null,lA=null;function xue(t){if(lA&&typeof lA.onCommitFiberRoot=="function")try{lA.onCommitFiberRoot(rI,t,void 0,(t.current.flags&128)===128)}catch{}}var md=Math.clz32?Math.clz32:bue,vue=Math.log,yue=Math.LN2;function bue(t){return t>>>=0,t===0?32:31-(vue(t)/yue|0)|0}var Jw=64,Zw=4194304;function Y1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function UC(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=Y1(l):(s&=i,s!==0&&(n=Y1(s)))}else i=r&~a,i!==0?n=Y1(i):s!==0&&(n=Y1(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-md(e),a=1<<r,n|=t[r],e&=~a;return n}function wue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nue(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-md(s),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=wue(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function WT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tz(){var t=Jw;return Jw<<=1,!(Jw&4194240)&&(Jw=64),t}function Y3(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _b(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-md(e),t[e]=r}function _ue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-md(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function bF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-md(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var ba=0;function rz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nz,wF,az,sz,iz,XT=!1,eN=[],r0=null,n0=null,a0=null,o2=new Map,l2=new Map,Dh=[],Cue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gM(t,e){switch(t){case"focusin":case"focusout":r0=null;break;case"dragenter":case"dragleave":n0=null;break;case"mouseover":case"mouseout":a0=null;break;case"pointerover":case"pointerout":o2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":l2.delete(e.pointerId)}}function d1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Eb(e),e!==null&&wF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Eue(t,e,r,n,a){switch(e){case"focusin":return r0=d1(r0,t,e,r,n,a),!0;case"dragenter":return n0=d1(n0,t,e,r,n,a),!0;case"mouseover":return a0=d1(a0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return o2.set(s,d1(o2.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,l2.set(s,d1(l2.get(s)||null,t,e,r,n,a)),!0}return!1}function oz(t){var e=Tm(t.target);if(e!==null){var r=Mp(e);if(r!==null){if(e=r.tag,e===13){if(e=Wq(r),e!==null){t.blockedOn=e,iz(t.priority,function(){az(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function X_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=YT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);KT=n,r.target.dispatchEvent(n),KT=null}else return e=Eb(r),e!==null&&wF(e),t.blockedOn=r,!1;e.shift()}return!0}function xM(t,e,r){X_(t)&&r.delete(e)}function Sue(){XT=!1,r0!==null&&X_(r0)&&(r0=null),n0!==null&&X_(n0)&&(n0=null),a0!==null&&X_(a0)&&(a0=null),o2.forEach(xM),l2.forEach(xM)}function A1(t,e){t.blockedOn===e&&(t.blockedOn=null,XT||(XT=!0,Hc.unstable_scheduleCallback(Hc.unstable_NormalPriority,Sue)))}function c2(t){function e(a){return A1(a,t)}if(0<eN.length){A1(eN[0],t);for(var r=1;r<eN.length;r++){var n=eN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(r0!==null&&A1(r0,t),n0!==null&&A1(n0,t),a0!==null&&A1(a0,t),o2.forEach(e),l2.forEach(e),r=0;r<Dh.length;r++)n=Dh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Dh.length&&(r=Dh[0],r.blockedOn===null);)oz(r),r.blockedOn===null&&Dh.shift()}var wx=Of.ReactCurrentBatchConfig,QC=!0;function Iue(t,e,r,n){var a=ba,s=wx.transition;wx.transition=null;try{ba=1,NF(t,e,r,n)}finally{ba=a,wx.transition=s}}function Bue(t,e,r,n){var a=ba,s=wx.transition;wx.transition=null;try{ba=4,NF(t,e,r,n)}finally{ba=a,wx.transition=s}}function NF(t,e,r,n){if(QC){var a=YT(t,e,r,n);if(a===null)o5(t,e,n,VC,r),gM(t,n);else if(Eue(a,t,e,r,n))n.stopPropagation();else if(gM(t,n),e&4&&-1<Cue.indexOf(t)){for(;a!==null;){var s=Eb(a);if(s!==null&&nz(s),s=YT(t,e,r,n),s===null&&o5(t,e,n,VC,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else o5(t,e,n,null,r)}}var VC=null;function YT(t,e,r,n){if(VC=null,t=vF(n),t=Tm(t),t!==null)if(e=Mp(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Wq(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return VC=t,null}function lz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pue()){case yF:return 1;case Zq:return 4;case LC:case gue:return 16;case ez:return 536870912;default:return 16}default:return 16}}var Gh=null,_F=null,Y_=null;function cz(){if(Y_)return Y_;var t,e=_F,r=e.length,n,a="value"in Gh?Gh.value:Gh.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return Y_=a.slice(t,1<n?1-n:void 0)}function J_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tN(){return!0}function vM(){return!1}function Wc(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tN:vM,this.isPropagationStopped=vM,this}return Ss(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tN)},persist:function(){},isPersistent:tN}),e}var hv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CF=Wc(hv),Cb=Ss({},hv,{view:0,detail:0}),Tue=Wc(Cb),J3,Z3,f1,nI=Ss({},Cb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==f1&&(f1&&t.type==="mousemove"?(J3=t.screenX-f1.screenX,Z3=t.screenY-f1.screenY):Z3=J3=0,f1=t),J3)},movementY:function(t){return"movementY"in t?t.movementY:Z3}}),yM=Wc(nI),Pue=Ss({},nI,{dataTransfer:0}),jue=Wc(Pue),kue=Ss({},Cb,{relatedTarget:0}),e5=Wc(kue),Fue=Ss({},hv,{animationName:0,elapsedTime:0,pseudoElement:0}),Oue=Wc(Fue),Due=Ss({},hv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rue=Wc(Due),Mue=Ss({},hv,{data:0}),bM=Wc(Mue),Lue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Que={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vue(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Que[t])?!!e[t]:!1}function EF(){return Vue}var Hue=Ss({},Cb,{key:function(t){if(t.key){var e=Lue[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=J_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uue[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EF,charCode:function(t){return t.type==="keypress"?J_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?J_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$ue=Wc(Hue),Kue=Ss({},nI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wM=Wc(Kue),Gue=Ss({},Cb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EF}),que=Wc(Gue),zue=Ss({},hv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wue=Wc(zue),Xue=Ss({},nI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yue=Wc(Xue),Jue=[9,13,27,32],SF=gf&&"CompositionEvent"in window,Ny=null;gf&&"documentMode"in document&&(Ny=document.documentMode);var Zue=gf&&"TextEvent"in window&&!Ny,uz=gf&&(!SF||Ny&&8<Ny&&11>=Ny),NM=" ",_M=!1;function dz(t,e){switch(t){case"keyup":return Jue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Az(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ex=!1;function ede(t,e){switch(t){case"compositionend":return Az(e);case"keypress":return e.which!==32?null:(_M=!0,NM);case"textInput":return t=e.data,t===NM&&_M?null:t;default:return null}}function tde(t,e){if(ex)return t==="compositionend"||!SF&&dz(t,e)?(t=cz(),Y_=_F=Gh=null,ex=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uz&&e.locale!=="ko"?null:e.data;default:return null}}var rde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rde[t.type]:e==="textarea"}function fz(t,e,r,n){$q(n),e=HC(e,"onChange"),0<e.length&&(r=new CF("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _y=null,u2=null;function nde(t){_z(t,0)}function aI(t){var e=nx(t);if(Rq(e))return t}function ade(t,e){if(t==="change")return e}var hz=!1;if(gf){var t5;if(gf){var r5="oninput"in document;if(!r5){var EM=document.createElement("div");EM.setAttribute("oninput","return;"),r5=typeof EM.oninput=="function"}t5=r5}else t5=!1;hz=t5&&(!document.documentMode||9<document.documentMode)}function SM(){_y&&(_y.detachEvent("onpropertychange",mz),u2=_y=null)}function mz(t){if(t.propertyName==="value"&&aI(u2)){var e=[];fz(e,u2,t,vF(t)),zq(nde,e)}}function sde(t,e,r){t==="focusin"?(SM(),_y=e,u2=r,_y.attachEvent("onpropertychange",mz)):t==="focusout"&&SM()}function ide(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aI(u2)}function ode(t,e){if(t==="click")return aI(e)}function lde(t,e){if(t==="input"||t==="change")return aI(e)}function cde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wd=typeof Object.is=="function"?Object.is:cde;function d2(t,e){if(wd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!kT.call(e,a)||!wd(t[a],e[a]))return!1}return!0}function IM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BM(t,e){var r=IM(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=IM(r)}}function pz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gz(){for(var t=window,e=DC();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=DC(t.document)}return e}function IF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ude(t){var e=gz(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&pz(r.ownerDocument.documentElement,r)){if(n!==null&&IF(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=BM(r,s);var i=BM(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dde=gf&&"documentMode"in document&&11>=document.documentMode,tx=null,JT=null,Cy=null,ZT=!1;function TM(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ZT||tx==null||tx!==DC(n)||(n=tx,"selectionStart"in n&&IF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cy&&d2(Cy,n)||(Cy=n,n=HC(JT,"onSelect"),0<n.length&&(e=new CF("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=tx)))}function rN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var rx={animationend:rN("Animation","AnimationEnd"),animationiteration:rN("Animation","AnimationIteration"),animationstart:rN("Animation","AnimationStart"),transitionend:rN("Transition","TransitionEnd")},n5={},xz={};gf&&(xz=document.createElement("div").style,"AnimationEvent"in window||(delete rx.animationend.animation,delete rx.animationiteration.animation,delete rx.animationstart.animation),"TransitionEvent"in window||delete rx.transitionend.transition);function sI(t){if(n5[t])return n5[t];if(!rx[t])return t;var e=rx[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in xz)return n5[t]=e[r];return t}var vz=sI("animationend"),yz=sI("animationiteration"),bz=sI("animationstart"),wz=sI("transitionend"),Nz=new Map,PM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function M0(t,e){Nz.set(t,e),Rp(e,[t])}for(var a5=0;a5<PM.length;a5++){var s5=PM[a5],Ade=s5.toLowerCase(),fde=s5[0].toUpperCase()+s5.slice(1);M0(Ade,"on"+fde)}M0(vz,"onAnimationEnd");M0(yz,"onAnimationIteration");M0(bz,"onAnimationStart");M0("dblclick","onDoubleClick");M0("focusin","onFocus");M0("focusout","onBlur");M0(wz,"onTransitionEnd");Dx("onMouseEnter",["mouseout","mouseover"]);Dx("onMouseLeave",["mouseout","mouseover"]);Dx("onPointerEnter",["pointerout","pointerover"]);Dx("onPointerLeave",["pointerout","pointerover"]);Rp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var J1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hde=new Set("cancel close invalid load scroll toggle".split(" ").concat(J1));function jM(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Aue(n,e,void 0,t),t.currentTarget=null}function _z(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;jM(a,l,u),s=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;jM(a,l,u),s=c}}}if(MC)throw t=zT,MC=!1,zT=null,t}function Ga(t,e){var r=e[aP];r===void 0&&(r=e[aP]=new Set);var n=t+"__bubble";r.has(n)||(Cz(e,t,2,!1),r.add(n))}function i5(t,e,r){var n=0;e&&(n|=4),Cz(r,t,n,e)}var nN="_reactListening"+Math.random().toString(36).slice(2);function A2(t){if(!t[nN]){t[nN]=!0,jq.forEach(function(r){r!=="selectionchange"&&(hde.has(r)||i5(r,!1,t),i5(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nN]||(e[nN]=!0,i5("selectionchange",!1,e))}}function Cz(t,e,r,n){switch(lz(e)){case 1:var a=Iue;break;case 4:a=Bue;break;default:a=NF}r=a.bind(null,e,r,t),a=void 0,!qT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function o5(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Tm(l),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}l=l.parentNode}}n=n.return}zq(function(){var u=s,d=vF(r),A=[];e:{var h=Nz.get(t);if(h!==void 0){var f=CF,m=t;switch(t){case"keypress":if(J_(r)===0)break e;case"keydown":case"keyup":f=$ue;break;case"focusin":m="focus",f=e5;break;case"focusout":m="blur",f=e5;break;case"beforeblur":case"afterblur":f=e5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=yM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=jue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=que;break;case vz:case yz:case bz:f=Oue;break;case wz:f=Wue;break;case"scroll":f=Tue;break;case"wheel":f=Yue;break;case"copy":case"cut":case"paste":f=Rue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=wM}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=i2(y,x),w!=null&&p.push(f2(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new f(h,m,null,r,d),A.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==KT&&(m=r.relatedTarget||r.fromElement)&&(Tm(m)||m[xf]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=u,m=m?Tm(m):null,m!==null&&(g=Mp(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=yM,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=wM,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=f==null?h:nx(f),b=m==null?h:nx(m),h=new p(w,y+"leave",f,r,d),h.target=g,h.relatedTarget=b,w=null,Tm(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,f&&m)t:{for(p=f,x=m,y=0,b=p;b;b=dg(b))y++;for(b=0,w=x;w;w=dg(w))b++;for(;0<y-b;)p=dg(p),y--;for(;0<b-y;)x=dg(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=dg(p),x=dg(x)}p=null}else p=null;f!==null&&kM(A,h,f,p,!1),m!==null&&g!==null&&kM(A,g,m,p,!0)}}e:{if(h=u?nx(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=ade;else if(CM(h))if(hz)I=lde;else{I=ide;var T=sde}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=ode);if(I&&(I=I(t,u))){fz(A,I,r,d);break e}T&&T(t,h,u),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&UT(h,"number",h.value)}switch(T=u?nx(u):window,t){case"focusin":(CM(T)||T.contentEditable==="true")&&(tx=T,JT=u,Cy=null);break;case"focusout":Cy=JT=tx=null;break;case"mousedown":ZT=!0;break;case"contextmenu":case"mouseup":case"dragend":ZT=!1,TM(A,r,d);break;case"selectionchange":if(dde)break;case"keydown":case"keyup":TM(A,r,d)}var C;if(SF)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ex?dz(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(uz&&r.locale!=="ko"&&(ex||E!=="onCompositionStart"?E==="onCompositionEnd"&&ex&&(C=cz()):(Gh=d,_F="value"in Gh?Gh.value:Gh.textContent,ex=!0)),T=HC(u,E),0<T.length&&(E=new bM(E,t,null,r,d),A.push({event:E,listeners:T}),C?E.data=C:(C=Az(r),C!==null&&(E.data=C)))),(C=Zue?ede(t,r):tde(t,r))&&(u=HC(u,"onBeforeInput"),0<u.length&&(d=new bM("onBeforeInput","beforeinput",null,r,d),A.push({event:d,listeners:u}),d.data=C))}_z(A,e)})}function f2(t,e,r){return{instance:t,listener:e,currentTarget:r}}function HC(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=i2(t,r),s!=null&&n.unshift(f2(t,s,a)),s=i2(t,e),s!=null&&n.push(f2(t,s,a))),t=t.return}return n}function dg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kM(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=i2(r,s),c!=null&&i.unshift(f2(r,c,l))):a||(c=i2(r,s),c!=null&&i.push(f2(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var mde=/\r\n?/g,pde=/\u0000|\uFFFD/g;function FM(t){return(typeof t=="string"?t:""+t).replace(mde,`
`).replace(pde,"")}function aN(t,e,r){if(e=FM(e),FM(t)!==e&&r)throw Error(cr(425))}function $C(){}var eP=null,tP=null;function rP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nP=typeof setTimeout=="function"?setTimeout:void 0,gde=typeof clearTimeout=="function"?clearTimeout:void 0,OM=typeof Promise=="function"?Promise:void 0,xde=typeof queueMicrotask=="function"?queueMicrotask:typeof OM<"u"?function(t){return OM.resolve(null).then(t).catch(vde)}:nP;function vde(t){setTimeout(function(){throw t})}function l5(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),c2(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);c2(e)}function s0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var mv=Math.random().toString(36).slice(2),eA="__reactFiber$"+mv,h2="__reactProps$"+mv,xf="__reactContainer$"+mv,aP="__reactEvents$"+mv,yde="__reactListeners$"+mv,bde="__reactHandles$"+mv;function Tm(t){var e=t[eA];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xf]||r[eA]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=DM(t);t!==null;){if(r=t[eA])return r;t=DM(t)}return e}t=r,r=t.parentNode}return null}function Eb(t){return t=t[eA]||t[xf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(cr(33))}function iI(t){return t[h2]||null}var sP=[],ax=-1;function L0(t){return{current:t}}function Ja(t){0>ax||(t.current=sP[ax],sP[ax]=null,ax--)}function Ua(t,e){ax++,sP[ax]=t.current,t.current=e}var b0={},hl=L0(b0),oc=L0(!1),sp=b0;function Rx(t,e){var r=t.type.contextTypes;if(!r)return b0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function lc(t){return t=t.childContextTypes,t!=null}function KC(){Ja(oc),Ja(hl)}function RM(t,e,r){if(hl.current!==b0)throw Error(cr(168));Ua(hl,e),Ua(oc,r)}function Ez(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(cr(108,sue(t)||"Unknown",a));return Ss({},r,n)}function GC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||b0,sp=hl.current,Ua(hl,t),Ua(oc,oc.current),!0}function MM(t,e,r){var n=t.stateNode;if(!n)throw Error(cr(169));r?(t=Ez(t,e,sp),n.__reactInternalMemoizedMergedChildContext=t,Ja(oc),Ja(hl),Ua(hl,t)):Ja(oc),Ua(oc,r)}var KA=null,oI=!1,c5=!1;function Sz(t){KA===null?KA=[t]:KA.push(t)}function wde(t){oI=!0,Sz(t)}function U0(){if(!c5&&KA!==null){c5=!0;var t=0,e=ba;try{var r=KA;for(ba=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}KA=null,oI=!1}catch(a){throw KA!==null&&(KA=KA.slice(t+1)),Jq(yF,U0),a}finally{ba=e,c5=!1}}return null}var sx=[],ix=0,qC=null,zC=0,wu=[],Nu=0,ip=null,XA=1,YA="";function fm(t,e){sx[ix++]=zC,sx[ix++]=qC,qC=t,zC=e}function Iz(t,e,r){wu[Nu++]=XA,wu[Nu++]=YA,wu[Nu++]=ip,ip=t;var n=XA;t=YA;var a=32-md(n)-1;n&=~(1<<a),r+=1;var s=32-md(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,XA=1<<32-md(e)+a|r<<a|n,YA=s+t}else XA=1<<s|r<<a|n,YA=t}function BF(t){t.return!==null&&(fm(t,1),Iz(t,1,0))}function TF(t){for(;t===qC;)qC=sx[--ix],sx[ix]=null,zC=sx[--ix],sx[ix]=null;for(;t===ip;)ip=wu[--Nu],wu[Nu]=null,YA=wu[--Nu],wu[Nu]=null,XA=wu[--Nu],wu[Nu]=null}var Qc=null,Rc=null,os=!1,od=null;function Bz(t,e){var r=Cu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function LM(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qc=t,Rc=s0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qc=t,Rc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ip!==null?{id:XA,overflow:YA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Cu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qc=t,Rc=null,!0):!1;default:return!1}}function iP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oP(t){if(os){var e=Rc;if(e){var r=e;if(!LM(t,e)){if(iP(t))throw Error(cr(418));e=s0(r.nextSibling);var n=Qc;e&&LM(t,e)?Bz(n,r):(t.flags=t.flags&-4097|2,os=!1,Qc=t)}}else{if(iP(t))throw Error(cr(418));t.flags=t.flags&-4097|2,os=!1,Qc=t}}}function UM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qc=t}function sN(t){if(t!==Qc)return!1;if(!os)return UM(t),os=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rP(t.type,t.memoizedProps)),e&&(e=Rc)){if(iP(t))throw Tz(),Error(cr(418));for(;e;)Bz(t,e),e=s0(e.nextSibling)}if(UM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(cr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Rc=s0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Rc=null}}else Rc=Qc?s0(t.stateNode.nextSibling):null;return!0}function Tz(){for(var t=Rc;t;)t=s0(t.nextSibling)}function Mx(){Rc=Qc=null,os=!1}function PF(t){od===null?od=[t]:od.push(t)}var Nde=Of.ReactCurrentBatchConfig;function h1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(cr(309));var n=r.stateNode}if(!n)throw Error(cr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=a.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(cr(284));if(!r._owner)throw Error(cr(290,t))}return t}function iN(t,e){throw t=Object.prototype.toString.call(e),Error(cr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QM(t){var e=t._init;return e(t._payload)}function Pz(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=c0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=p5(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var I=b.type;return I===Zg?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Th&&QM(I)===y.type)?(w=a(y,b.props),w.ref=h1(x,y,b),w.return=x,w):(w=sC(b.type,b.key,b.props,null,x.mode,w),w.ref=h1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=g5(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,I){return y===null||y.tag!==7?(y=Vm(b,x.mode,w,I),y.return=x,y):(y=a(y,b),y.return=x,y)}function A(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=p5(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ww:return b=sC(y.type,y.key,y.props,null,x.mode,b),b.ref=h1(x,null,y),b.return=x,b;case Jg:return y=g5(y,x.mode,b),y.return=x,y;case Th:var w=y._init;return A(x,w(y._payload),b)}if(X1(y)||c1(y))return y=Vm(y,x.mode,b,null),y.return=x,y;iN(x,y)}return null}function h(x,y,b,w){var I=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return I!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ww:return b.key===I?c(x,y,b,w):null;case Jg:return b.key===I?u(x,y,b,w):null;case Th:return I=b._init,h(x,y,I(b._payload),w)}if(X1(b)||c1(b))return I!==null?null:d(x,y,b,w,null);iN(x,b)}return null}function f(x,y,b,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ww:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,I);case Jg:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,I);case Th:var T=w._init;return f(x,y,b,T(w._payload),I)}if(X1(w)||c1(w))return x=x.get(b)||null,d(y,x,w,I,null);iN(y,w)}return null}function m(x,y,b,w){for(var I=null,T=null,C=y,E=y=0,S=null;C!==null&&E<b.length;E++){C.index>E?(S=C,C=null):S=C.sibling;var O=h(x,C,b[E],w);if(O===null){C===null&&(C=S);break}t&&C&&O.alternate===null&&e(x,C),y=s(O,y,E),T===null?I=O:T.sibling=O,T=O,C=S}if(E===b.length)return r(x,C),os&&fm(x,E),I;if(C===null){for(;E<b.length;E++)C=A(x,b[E],w),C!==null&&(y=s(C,y,E),T===null?I=C:T.sibling=C,T=C);return os&&fm(x,E),I}for(C=n(x,C);E<b.length;E++)S=f(C,x,E,b[E],w),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?E:S.key),y=s(S,y,E),T===null?I=S:T.sibling=S,T=S);return t&&C.forEach(function(B){return e(x,B)}),os&&fm(x,E),I}function p(x,y,b,w){var I=c1(b);if(typeof I!="function")throw Error(cr(150));if(b=I.call(b),b==null)throw Error(cr(151));for(var T=I=null,C=y,E=y=0,S=null,O=b.next();C!==null&&!O.done;E++,O=b.next()){C.index>E?(S=C,C=null):S=C.sibling;var B=h(x,C,O.value,w);if(B===null){C===null&&(C=S);break}t&&C&&B.alternate===null&&e(x,C),y=s(B,y,E),T===null?I=B:T.sibling=B,T=B,C=S}if(O.done)return r(x,C),os&&fm(x,E),I;if(C===null){for(;!O.done;E++,O=b.next())O=A(x,O.value,w),O!==null&&(y=s(O,y,E),T===null?I=O:T.sibling=O,T=O);return os&&fm(x,E),I}for(C=n(x,C);!O.done;E++,O=b.next())O=f(C,x,E,O.value,w),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?E:O.key),y=s(O,y,E),T===null?I=O:T.sibling=O,T=O);return t&&C.forEach(function(P){return e(x,P)}),os&&fm(x,E),I}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Zg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ww:e:{for(var I=b.key,T=y;T!==null;){if(T.key===I){if(I=b.type,I===Zg){if(T.tag===7){r(x,T.sibling),y=a(T,b.props.children),y.return=x,x=y;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Th&&QM(I)===T.type){r(x,T.sibling),y=a(T,b.props),y.ref=h1(x,T,b),y.return=x,x=y;break e}r(x,T);break}else e(x,T);T=T.sibling}b.type===Zg?(y=Vm(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=sC(b.type,b.key,b.props,null,x.mode,w),w.ref=h1(x,y,b),w.return=x,x=w)}return i(x);case Jg:e:{for(T=b.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=g5(b,x.mode,w),y.return=x,x=y}return i(x);case Th:return T=b._init,g(x,y,T(b._payload),w)}if(X1(b))return m(x,y,b,w);if(c1(b))return p(x,y,b,w);iN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=p5(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var Lx=Pz(!0),jz=Pz(!1),WC=L0(null),XC=null,ox=null,jF=null;function kF(){jF=ox=XC=null}function FF(t){var e=WC.current;Ja(WC),t._currentValue=e}function lP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Nx(t,e){XC=t,jF=ox=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ac=!0),t.firstContext=null)}function Ou(t){var e=t._currentValue;if(jF!==t)if(t={context:t,memoizedValue:e,next:null},ox===null){if(XC===null)throw Error(cr(308));ox=t,XC.dependencies={lanes:0,firstContext:t}}else ox=ox.next=t;return e}var Pm=null;function OF(t){Pm===null?Pm=[t]:Pm.push(t)}function kz(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,OF(e)):(r.next=a.next,a.next=r),e.interleaved=r,vf(t,n)}function vf(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ph=!1;function DF(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function i0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Kn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,vf(t,r)}return a=n.interleaved,a===null?(e.next=e,OF(n)):(e.next=a.next,a.next=e),n.interleaved=e,vf(t,r)}function Z_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bF(t,r)}}function VM(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function YC(t,e,r,n){var a=t.updateQueue;Ph=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var A=a.baseState;i=0,d=u=c=null,l=s;do{var h=l.lane,f=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(h=e,f=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){A=m.call(f,A,h);break e}A=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,A,h):m,h==null)break e;A=Ss({},A,h);break e;case 2:Ph=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=A):d=d.next=f,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=A),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);lp|=i,t.lanes=i,t.memoizedState=A}}function HM(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(cr(191,a));a.call(n)}}}var Sb={},cA=L0(Sb),m2=L0(Sb),p2=L0(Sb);function jm(t){if(t===Sb)throw Error(cr(174));return t}function RF(t,e){switch(Ua(p2,e),Ua(m2,t),Ua(cA,Sb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=VT(e,t)}Ja(cA),Ua(cA,e)}function Ux(){Ja(cA),Ja(m2),Ja(p2)}function Oz(t){jm(p2.current);var e=jm(cA.current),r=VT(e,t.type);e!==r&&(Ua(m2,t),Ua(cA,r))}function MF(t){m2.current===t&&(Ja(cA),Ja(m2))}var Ns=L0(0);function JC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var u5=[];function LF(){for(var t=0;t<u5.length;t++)u5[t]._workInProgressVersionPrimary=null;u5.length=0}var eC=Of.ReactCurrentDispatcher,d5=Of.ReactCurrentBatchConfig,op=0,Es=null,Ei=null,no=null,ZC=!1,Ey=!1,g2=0,_de=0;function Go(){throw Error(cr(321))}function UF(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!wd(t[r],e[r]))return!1;return!0}function QF(t,e,r,n,a,s){if(op=s,Es=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eC.current=t===null||t.memoizedState===null?Ide:Bde,t=r(n,a),Ey){s=0;do{if(Ey=!1,g2=0,25<=s)throw Error(cr(301));s+=1,no=Ei=null,e.updateQueue=null,eC.current=Tde,t=r(n,a)}while(Ey)}if(eC.current=eE,e=Ei!==null&&Ei.next!==null,op=0,no=Ei=Es=null,ZC=!1,e)throw Error(cr(300));return t}function VF(){var t=g2!==0;return g2=0,t}function Zd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?Es.memoizedState=no=t:no=no.next=t,no}function Du(){if(Ei===null){var t=Es.alternate;t=t!==null?t.memoizedState:null}else t=Ei.next;var e=no===null?Es.memoizedState:no.next;if(e!==null)no=e,Ei=t;else{if(t===null)throw Error(cr(310));Ei=t,t={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},no===null?Es.memoizedState=no=t:no=no.next=t}return no}function x2(t,e){return typeof e=="function"?e(t):e}function A5(t){var e=Du(),r=e.queue;if(r===null)throw Error(cr(311));r.lastRenderedReducer=t;var n=Ei,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((op&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=A,i=n):c=c.next=A,Es.lanes|=d,lp|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=l,wd(n,e.memoizedState)||(ac=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Es.lanes|=s,lp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function f5(t){var e=Du(),r=e.queue;if(r===null)throw Error(cr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);wd(s,e.memoizedState)||(ac=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Dz(){}function Rz(t,e){var r=Es,n=Du(),a=e(),s=!wd(n.memoizedState,a);if(s&&(n.memoizedState=a,ac=!0),n=n.queue,HF(Uz.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||no!==null&&no.memoizedState.tag&1){if(r.flags|=2048,v2(9,Lz.bind(null,r,n,a,e),void 0,null),lo===null)throw Error(cr(349));op&30||Mz(r,e,a)}return a}function Mz(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Es.updateQueue,e===null?(e={lastEffect:null,stores:null},Es.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Lz(t,e,r,n){e.value=r,e.getSnapshot=n,Qz(e)&&Vz(t)}function Uz(t,e,r){return r(function(){Qz(e)&&Vz(t)})}function Qz(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!wd(t,r)}catch{return!0}}function Vz(t){var e=vf(t,1);e!==null&&pd(e,t,1,-1)}function $M(t){var e=Zd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x2,lastRenderedState:t},e.queue=t,t=t.dispatch=Sde.bind(null,Es,t),[e.memoizedState,t]}function v2(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Es.updateQueue,e===null?(e={lastEffect:null,stores:null},Es.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Hz(){return Du().memoizedState}function tC(t,e,r,n){var a=Zd();Es.flags|=t,a.memoizedState=v2(1|e,r,void 0,n===void 0?null:n)}function lI(t,e,r,n){var a=Du();n=n===void 0?null:n;var s=void 0;if(Ei!==null){var i=Ei.memoizedState;if(s=i.destroy,n!==null&&UF(n,i.deps)){a.memoizedState=v2(e,r,s,n);return}}Es.flags|=t,a.memoizedState=v2(1|e,r,s,n)}function KM(t,e){return tC(8390656,8,t,e)}function HF(t,e){return lI(2048,8,t,e)}function $z(t,e){return lI(4,2,t,e)}function Kz(t,e){return lI(4,4,t,e)}function Gz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qz(t,e,r){return r=r!=null?r.concat([t]):null,lI(4,4,Gz.bind(null,e,t),r)}function $F(){}function zz(t,e){var r=Du();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UF(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Wz(t,e){var r=Du();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UF(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Xz(t,e,r){return op&21?(wd(r,e)||(r=tz(),Es.lanes|=r,lp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ac=!0),t.memoizedState=r)}function Cde(t,e){var r=ba;ba=r!==0&&4>r?r:4,t(!0);var n=d5.transition;d5.transition={};try{t(!1),e()}finally{ba=r,d5.transition=n}}function Yz(){return Du().memoizedState}function Ede(t,e,r){var n=l0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jz(t))Zz(e,r);else if(r=kz(t,e,r,n),r!==null){var a=Rl();pd(r,t,n,a),eW(r,e,n)}}function Sde(t,e,r){var n=l0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jz(t))Zz(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,r);if(a.hasEagerState=!0,a.eagerState=l,wd(l,i)){var c=e.interleaved;c===null?(a.next=a,OF(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=kz(t,e,a,n),r!==null&&(a=Rl(),pd(r,t,n,a),eW(r,e,n))}}function Jz(t){var e=t.alternate;return t===Es||e!==null&&e===Es}function Zz(t,e){Ey=ZC=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function eW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bF(t,r)}}var eE={readContext:Ou,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},Ide={readContext:Ou,useCallback:function(t,e){return Zd().memoizedState=[t,e===void 0?null:e],t},useContext:Ou,useEffect:KM,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,tC(4194308,4,Gz.bind(null,e,t),r)},useLayoutEffect:function(t,e){return tC(4194308,4,t,e)},useInsertionEffect:function(t,e){return tC(4,2,t,e)},useMemo:function(t,e){var r=Zd();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Zd();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ede.bind(null,Es,t),[n.memoizedState,t]},useRef:function(t){var e=Zd();return t={current:t},e.memoizedState=t},useState:$M,useDebugValue:$F,useDeferredValue:function(t){return Zd().memoizedState=t},useTransition:function(){var t=$M(!1),e=t[0];return t=Cde.bind(null,t[1]),Zd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Es,a=Zd();if(os){if(r===void 0)throw Error(cr(407));r=r()}else{if(r=e(),lo===null)throw Error(cr(349));op&30||Mz(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,KM(Uz.bind(null,n,s,t),[t]),n.flags|=2048,v2(9,Lz.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Zd(),e=lo.identifierPrefix;if(os){var r=YA,n=XA;r=(n&~(1<<32-md(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=g2++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=_de++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bde={readContext:Ou,useCallback:zz,useContext:Ou,useEffect:HF,useImperativeHandle:qz,useInsertionEffect:$z,useLayoutEffect:Kz,useMemo:Wz,useReducer:A5,useRef:Hz,useState:function(){return A5(x2)},useDebugValue:$F,useDeferredValue:function(t){var e=Du();return Xz(e,Ei.memoizedState,t)},useTransition:function(){var t=A5(x2)[0],e=Du().memoizedState;return[t,e]},useMutableSource:Dz,useSyncExternalStore:Rz,useId:Yz,unstable_isNewReconciler:!1},Tde={readContext:Ou,useCallback:zz,useContext:Ou,useEffect:HF,useImperativeHandle:qz,useInsertionEffect:$z,useLayoutEffect:Kz,useMemo:Wz,useReducer:f5,useRef:Hz,useState:function(){return f5(x2)},useDebugValue:$F,useDeferredValue:function(t){var e=Du();return Ei===null?e.memoizedState=t:Xz(e,Ei.memoizedState,t)},useTransition:function(){var t=f5(x2)[0],e=Du().memoizedState;return[t,e]},useMutableSource:Dz,useSyncExternalStore:Rz,useId:Yz,unstable_isNewReconciler:!1};function sd(t,e){if(t&&t.defaultProps){e=Ss({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function cP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ss({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cI={isMounted:function(t){return(t=t._reactInternals)?Mp(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Rl(),a=l0(t),s=sf(n,a);s.payload=e,r!=null&&(s.callback=r),e=i0(t,s,a),e!==null&&(pd(e,t,a,n),Z_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Rl(),a=l0(t),s=sf(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=i0(t,s,a),e!==null&&(pd(e,t,a,n),Z_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Rl(),n=l0(t),a=sf(r,n);a.tag=2,e!=null&&(a.callback=e),e=i0(t,a,n),e!==null&&(pd(e,t,n,r),Z_(e,t,n))}};function GM(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!d2(r,n)||!d2(a,s):!0}function tW(t,e,r){var n=!1,a=b0,s=e.contextType;return typeof s=="object"&&s!==null?s=Ou(s):(a=lc(e)?sp:hl.current,n=e.contextTypes,s=(n=n!=null)?Rx(t,a):b0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function qM(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cI.enqueueReplaceState(e,e.state,null)}function uP(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},DF(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Ou(s):(s=lc(e)?sp:hl.current,a.context=Rx(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cP(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&cI.enqueueReplaceState(a,a.state,null),YC(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Qx(t,e){try{var r="",n=e;do r+=aue(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function h5(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function dP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Pde=typeof WeakMap=="function"?WeakMap:Map;function rW(t,e,r){r=sf(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){rE||(rE=!0,bP=n),dP(t,e)},r}function nW(t,e,r){r=sf(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){dP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){dP(t,e),typeof n!="function"&&(o0===null?o0=new Set([this]):o0.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function zM(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Pde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Kde.bind(null,t,e,r),e.then(t,t))}function WM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XM(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sf(-1,1),e.tag=2,i0(r,e,1))),r.lanes|=1),t)}var jde=Of.ReactCurrentOwner,ac=!1;function Tl(t,e,r,n){e.child=t===null?jz(e,null,r,n):Lx(e,t.child,r,n)}function YM(t,e,r,n,a){r=r.render;var s=e.ref;return Nx(e,a),n=QF(t,e,r,n,s,a),r=VF(),t!==null&&!ac?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,yf(t,e,a)):(os&&r&&BF(e),e.flags|=1,Tl(t,e,n,a),e.child)}function JM(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!JF(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,aW(t,e,s,n,a)):(t=sC(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:d2,r(i,n)&&t.ref===e.ref)return yf(t,e,a)}return e.flags|=1,t=c0(s,n),t.ref=e.ref,t.return=e,e.child=t}function aW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(d2(s,n)&&t.ref===e.ref)if(ac=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(ac=!0);else return e.lanes=t.lanes,yf(t,e,a)}return AP(t,e,r,n,a)}function sW(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ua(cx,Tc),Tc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ua(cx,Tc),Tc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ua(cx,Tc),Tc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ua(cx,Tc),Tc|=n;return Tl(t,e,a,r),e.child}function iW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function AP(t,e,r,n,a){var s=lc(r)?sp:hl.current;return s=Rx(e,s),Nx(e,a),r=QF(t,e,r,n,s,a),n=VF(),t!==null&&!ac?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,yf(t,e,a)):(os&&n&&BF(e),e.flags|=1,Tl(t,e,r,a),e.child)}function ZM(t,e,r,n,a){if(lc(r)){var s=!0;GC(e)}else s=!1;if(Nx(e,a),e.stateNode===null)rC(t,e),tW(e,r,n),uP(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ou(u):(u=lc(r)?sp:hl.current,u=Rx(e,u));var d=r.getDerivedStateFromProps,A=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";A||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&qM(e,i,n,u),Ph=!1;var h=e.memoizedState;i.state=h,YC(e,n,i,a),c=e.memoizedState,l!==n||h!==c||oc.current||Ph?(typeof d=="function"&&(cP(e,r,d,n),c=e.memoizedState),(l=Ph||GM(e,r,l,n,h,c,u))?(A||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Fz(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:sd(e.type,l),i.props=u,A=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ou(c):(c=lc(r)?sp:hl.current,c=Rx(e,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==A||h!==c)&&qM(e,i,n,c),Ph=!1,h=e.memoizedState,i.state=h,YC(e,n,i,a);var m=e.memoizedState;l!==A||h!==m||oc.current||Ph?(typeof f=="function"&&(cP(e,r,f,n),m=e.memoizedState),(u=Ph||GM(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return fP(t,e,r,n,s,a)}function fP(t,e,r,n,a,s){iW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&MM(e,r,!1),yf(t,e,s);n=e.stateNode,jde.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Lx(e,t.child,null,s),e.child=Lx(e,null,l,s)):Tl(t,e,l,s),e.memoizedState=n.state,a&&MM(e,r,!0),e.child}function oW(t){var e=t.stateNode;e.pendingContext?RM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RM(t,e.context,!1),RF(t,e.containerInfo)}function eL(t,e,r,n,a){return Mx(),PF(a),e.flags|=256,Tl(t,e,r,n),e.child}var hP={dehydrated:null,treeContext:null,retryLane:0};function mP(t){return{baseLanes:t,cachePool:null,transitions:null}}function lW(t,e,r){var n=e.pendingProps,a=Ns.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ua(Ns,a&1),t===null)return oP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=AI(i,n,0,null),t=Vm(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mP(r),e.memoizedState=hP,t):KF(e,i));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return kde(t,e,i,n,l,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=c0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=c0(l,s):(s=Vm(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?mP(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=hP,n}return s=t.child,t=s.sibling,n=c0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function KF(t,e){return e=AI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oN(t,e,r,n){return n!==null&&PF(n),Lx(e,t.child,null,r),t=KF(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kde(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=h5(Error(cr(422))),oN(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=AI({mode:"visible",children:n.children},a,0,null),s=Vm(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Lx(e,t.child,null,i),e.child.memoizedState=mP(i),e.memoizedState=hP,s);if(!(e.mode&1))return oN(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(cr(419)),n=h5(s,n,void 0),oN(t,e,i,n)}if(l=(i&t.childLanes)!==0,ac||l){if(n=lo,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,vf(t,a),pd(n,t,a,-1))}return YF(),n=h5(Error(cr(421))),oN(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Gde.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Rc=s0(a.nextSibling),Qc=e,os=!0,od=null,t!==null&&(wu[Nu++]=XA,wu[Nu++]=YA,wu[Nu++]=ip,XA=t.id,YA=t.overflow,ip=e),e=KF(e,n.children),e.flags|=4096,e)}function tL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lP(t.return,e,r)}function m5(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function cW(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Tl(t,e,n.children,r),n=Ns.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tL(t,r,e);else if(t.tag===19)tL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ua(Ns,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&JC(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),m5(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&JC(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}m5(e,!0,r,null,s);break;case"together":m5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rC(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yf(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),lp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(cr(153));if(e.child!==null){for(t=e.child,r=c0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=c0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Fde(t,e,r){switch(e.tag){case 3:oW(e),Mx();break;case 5:Oz(e);break;case 1:lc(e.type)&&GC(e);break;case 4:RF(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ua(WC,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ua(Ns,Ns.current&1),e.flags|=128,null):r&e.child.childLanes?lW(t,e,r):(Ua(Ns,Ns.current&1),t=yf(t,e,r),t!==null?t.sibling:null);Ua(Ns,Ns.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return cW(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ua(Ns,Ns.current),n)break;return null;case 22:case 23:return e.lanes=0,sW(t,e,r)}return yf(t,e,r)}var uW,pP,dW,AW;uW=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pP=function(){};dW=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,jm(cA.current);var s=null;switch(r){case"input":a=MT(t,a),n=MT(t,n),s=[];break;case"select":a=Ss({},a,{value:void 0}),n=Ss({},n,{value:void 0}),s=[];break;case"textarea":a=QT(t,a),n=QT(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=$C)}HT(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(a2.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(a2.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ga("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};AW=function(t,e,r,n){r!==n&&(e.flags|=4)};function m1(t,e){if(!os)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function qo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Ode(t,e,r){var n=e.pendingProps;switch(TF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(e),null;case 1:return lc(e.type)&&KC(),qo(e),null;case 3:return n=e.stateNode,Ux(),Ja(oc),Ja(hl),LF(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(sN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,od!==null&&(_P(od),od=null))),pP(t,e),qo(e),null;case 5:MF(e);var a=jm(p2.current);if(r=e.type,t!==null&&e.stateNode!=null)dW(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(cr(166));return qo(e),null}if(t=jm(cA.current),sN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[eA]=e,n[h2]=s,t=(e.mode&1)!==0,r){case"dialog":Ga("cancel",n),Ga("close",n);break;case"iframe":case"object":case"embed":Ga("load",n);break;case"video":case"audio":for(a=0;a<J1.length;a++)Ga(J1[a],n);break;case"source":Ga("error",n);break;case"img":case"image":case"link":Ga("error",n),Ga("load",n);break;case"details":Ga("toggle",n);break;case"input":uM(n,s),Ga("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ga("invalid",n);break;case"textarea":AM(n,s),Ga("invalid",n)}HT(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&aN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&aN(n.textContent,l,t),a=["children",""+l]):a2.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ga("scroll",n)}switch(r){case"input":Xw(n),dM(n,s,!0);break;case"textarea":Xw(n),fM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=$C)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uq(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[eA]=e,t[h2]=n,uW(t,e,!1,!1),e.stateNode=t;e:{switch(i=$T(r,n),r){case"dialog":Ga("cancel",t),Ga("close",t),a=n;break;case"iframe":case"object":case"embed":Ga("load",t),a=n;break;case"video":case"audio":for(a=0;a<J1.length;a++)Ga(J1[a],t);a=n;break;case"source":Ga("error",t),a=n;break;case"img":case"image":case"link":Ga("error",t),Ga("load",t),a=n;break;case"details":Ga("toggle",t),a=n;break;case"input":uM(t,n),a=MT(t,n),Ga("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ss({},n,{value:void 0}),Ga("invalid",t);break;case"textarea":AM(t,n),a=QT(t,n),Ga("invalid",t);break;default:a=n}HT(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Hq(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qq(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&s2(t,c):typeof c=="number"&&s2(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(a2.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ga("scroll",t):c!=null&&mF(t,s,c,i))}switch(r){case"input":Xw(t),dM(t,n,!1);break;case"textarea":Xw(t),fM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+y0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?vx(t,!!n.multiple,s,!1):n.defaultValue!=null&&vx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=$C)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qo(e),null;case 6:if(t&&e.stateNode!=null)AW(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(cr(166));if(r=jm(p2.current),jm(cA.current),sN(e)){if(n=e.stateNode,r=e.memoizedProps,n[eA]=e,(s=n.nodeValue!==r)&&(t=Qc,t!==null))switch(t.tag){case 3:aN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&aN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[eA]=e,e.stateNode=n}return qo(e),null;case 13:if(Ja(Ns),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(os&&Rc!==null&&e.mode&1&&!(e.flags&128))Tz(),Mx(),e.flags|=98560,s=!1;else if(s=sN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(cr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(cr(317));s[eA]=e}else Mx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qo(e),s=!1}else od!==null&&(_P(od),od=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ns.current&1?Oi===0&&(Oi=3):YF())),e.updateQueue!==null&&(e.flags|=4),qo(e),null);case 4:return Ux(),pP(t,e),t===null&&A2(e.stateNode.containerInfo),qo(e),null;case 10:return FF(e.type._context),qo(e),null;case 17:return lc(e.type)&&KC(),qo(e),null;case 19:if(Ja(Ns),s=e.memoizedState,s===null)return qo(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)m1(s,!1);else{if(Oi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=JC(t),i!==null){for(e.flags|=128,m1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ua(Ns,Ns.current&1|2),e.child}t=t.sibling}s.tail!==null&&Js()>Vx&&(e.flags|=128,n=!0,m1(s,!1),e.lanes=4194304)}else{if(!n)if(t=JC(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),m1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!os)return qo(e),null}else 2*Js()-s.renderingStartTime>Vx&&r!==1073741824&&(e.flags|=128,n=!0,m1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Js(),e.sibling=null,r=Ns.current,Ua(Ns,n?r&1|2:r&1),e):(qo(e),null);case 22:case 23:return XF(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Tc&1073741824&&(qo(e),e.subtreeFlags&6&&(e.flags|=8192)):qo(e),null;case 24:return null;case 25:return null}throw Error(cr(156,e.tag))}function Dde(t,e){switch(TF(e),e.tag){case 1:return lc(e.type)&&KC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ux(),Ja(oc),Ja(hl),LF(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MF(e),null;case 13:if(Ja(Ns),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(cr(340));Mx()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ja(Ns),null;case 4:return Ux(),null;case 10:return FF(e.type._context),null;case 22:case 23:return XF(),null;case 24:return null;default:return null}}var lN=!1,ll=!1,Rde=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function lx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Rs(t,e,n)}else r.current=null}function gP(t,e,r){try{r()}catch(n){Rs(t,e,n)}}var rL=!1;function Mde(t,e){if(eP=QC,t=gz(),IF(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,A=t,h=null;t:for(;;){for(var f;A!==r||a!==0&&A.nodeType!==3||(l=i+a),A!==s||n!==0&&A.nodeType!==3||(c=i+n),A.nodeType===3&&(i+=A.nodeValue.length),(f=A.firstChild)!==null;)h=A,A=f;for(;;){if(A===t)break t;if(h===r&&++u===a&&(l=i),h===s&&++d===n&&(c=i),(f=A.nextSibling)!==null)break;A=h,h=A.parentNode}A=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(tP={focusedElem:t,selectionRange:r},QC=!1,Tr=e;Tr!==null;)if(e=Tr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tr=t;else for(;Tr!==null;){e=Tr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:sd(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(cr(163))}}catch(w){Rs(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Tr=t;break}Tr=e.return}return m=rL,rL=!1,m}function Sy(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&gP(e,r,s)}a=a.next}while(a!==n)}}function uI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function fW(t){var e=t.alternate;e!==null&&(t.alternate=null,fW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[eA],delete e[h2],delete e[aP],delete e[yde],delete e[bde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hW(t){return t.tag===5||t.tag===3||t.tag===4}function nL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=$C));else if(n!==4&&(t=t.child,t!==null))for(vP(t,e,r),t=t.sibling;t!==null;)vP(t,e,r),t=t.sibling}function yP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yP(t,e,r),t=t.sibling;t!==null;)yP(t,e,r),t=t.sibling}var Io=null,id=!1;function hh(t,e,r){for(r=r.child;r!==null;)mW(t,e,r),r=r.sibling}function mW(t,e,r){if(lA&&typeof lA.onCommitFiberUnmount=="function")try{lA.onCommitFiberUnmount(rI,r)}catch{}switch(r.tag){case 5:ll||lx(r,e);case 6:var n=Io,a=id;Io=null,hh(t,e,r),Io=n,id=a,Io!==null&&(id?(t=Io,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Io.removeChild(r.stateNode));break;case 18:Io!==null&&(id?(t=Io,r=r.stateNode,t.nodeType===8?l5(t.parentNode,r):t.nodeType===1&&l5(t,r),c2(t)):l5(Io,r.stateNode));break;case 4:n=Io,a=id,Io=r.stateNode.containerInfo,id=!0,hh(t,e,r),Io=n,id=a;break;case 0:case 11:case 14:case 15:if(!ll&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&gP(r,e,i),a=a.next}while(a!==n)}hh(t,e,r);break;case 1:if(!ll&&(lx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Rs(r,e,l)}hh(t,e,r);break;case 21:hh(t,e,r);break;case 22:r.mode&1?(ll=(n=ll)||r.memoizedState!==null,hh(t,e,r),ll=n):hh(t,e,r);break;default:hh(t,e,r)}}function aL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Rde),e.forEach(function(n){var a=qde.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ju(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Io=l.stateNode,id=!1;break e;case 3:Io=l.stateNode.containerInfo,id=!0;break e;case 4:Io=l.stateNode.containerInfo,id=!0;break e}l=l.return}if(Io===null)throw Error(cr(160));mW(s,i,a),Io=null,id=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Rs(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pW(e,t),e=e.sibling}function pW(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ju(e,t),Hd(t),n&4){try{Sy(3,t,t.return),uI(3,t)}catch(p){Rs(t,t.return,p)}try{Sy(5,t,t.return)}catch(p){Rs(t,t.return,p)}}break;case 1:Ju(e,t),Hd(t),n&512&&r!==null&&lx(r,r.return);break;case 5:if(Ju(e,t),Hd(t),n&512&&r!==null&&lx(r,r.return),t.flags&32){var a=t.stateNode;try{s2(a,"")}catch(p){Rs(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Mq(a,s),$T(l,i);var u=$T(l,s);for(i=0;i<c.length;i+=2){var d=c[i],A=c[i+1];d==="style"?Hq(a,A):d==="dangerouslySetInnerHTML"?Qq(a,A):d==="children"?s2(a,A):mF(a,d,A,u)}switch(l){case"input":LT(a,s);break;case"textarea":Lq(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?vx(a,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?vx(a,!!s.multiple,s.defaultValue,!0):vx(a,!!s.multiple,s.multiple?[]:"",!1))}a[h2]=s}catch(p){Rs(t,t.return,p)}}break;case 6:if(Ju(e,t),Hd(t),n&4){if(t.stateNode===null)throw Error(cr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){Rs(t,t.return,p)}}break;case 3:if(Ju(e,t),Hd(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{c2(e.containerInfo)}catch(p){Rs(t,t.return,p)}break;case 4:Ju(e,t),Hd(t);break;case 13:Ju(e,t),Hd(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(zF=Js())),n&4&&aL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ll=(u=ll)||d,Ju(e,t),ll=u):Ju(e,t),Hd(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Tr=t,d=t.child;d!==null;){for(A=Tr=d;Tr!==null;){switch(h=Tr,f=h.child,h.tag){case 0:case 11:case 14:case 15:Sy(4,h,h.return);break;case 1:lx(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Rs(n,r,p)}}break;case 5:lx(h,h.return);break;case 22:if(h.memoizedState!==null){iL(A);continue}}f!==null?(f.return=h,Tr=f):iL(A)}d=d.sibling}e:for(d=null,A=t;;){if(A.tag===5){if(d===null){d=A;try{a=A.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=A.stateNode,c=A.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vq("display",i))}catch(p){Rs(t,t.return,p)}}}else if(A.tag===6){if(d===null)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(p){Rs(t,t.return,p)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Ju(e,t),Hd(t),n&4&&aL(t);break;case 21:break;default:Ju(e,t),Hd(t)}}function Hd(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(hW(r)){var n=r;break e}r=r.return}throw Error(cr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(s2(a,""),n.flags&=-33);var s=nL(t);yP(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=nL(t);vP(t,l,i);break;default:throw Error(cr(161))}}catch(c){Rs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lde(t,e,r){Tr=t,gW(t)}function gW(t,e,r){for(var n=(t.mode&1)!==0;Tr!==null;){var a=Tr,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||lN;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ll;l=lN;var u=ll;if(lN=i,(ll=c)&&!u)for(Tr=a;Tr!==null;)i=Tr,c=i.child,i.tag===22&&i.memoizedState!==null?oL(a):c!==null?(c.return=i,Tr=c):oL(a);for(;s!==null;)Tr=s,gW(s),s=s.sibling;Tr=a,lN=l,ll=u}sL(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Tr=s):sL(t)}}function sL(t){for(;Tr!==null;){var e=Tr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ll||uI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ll)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:sd(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HM(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}HM(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var A=d.dehydrated;A!==null&&c2(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(cr(163))}ll||e.flags&512&&xP(e)}catch(h){Rs(e,e.return,h)}}if(e===t){Tr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Tr=r;break}Tr=e.return}}function iL(t){for(;Tr!==null;){var e=Tr;if(e===t){Tr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Tr=r;break}Tr=e.return}}function oL(t){for(;Tr!==null;){var e=Tr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{uI(4,e)}catch(c){Rs(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Rs(e,a,c)}}var s=e.return;try{xP(e)}catch(c){Rs(e,s,c)}break;case 5:var i=e.return;try{xP(e)}catch(c){Rs(e,i,c)}}}catch(c){Rs(e,e.return,c)}if(e===t){Tr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Tr=l;break}Tr=e.return}}var Ude=Math.ceil,tE=Of.ReactCurrentDispatcher,GF=Of.ReactCurrentOwner,Pu=Of.ReactCurrentBatchConfig,Kn=0,lo=null,Ai=null,Uo=0,Tc=0,cx=L0(0),Oi=0,y2=null,lp=0,dI=0,qF=0,Iy=null,rc=null,zF=0,Vx=1/0,$A=null,rE=!1,bP=null,o0=null,cN=!1,qh=null,nE=0,By=0,wP=null,nC=-1,aC=0;function Rl(){return Kn&6?Js():nC!==-1?nC:nC=Js()}function l0(t){return t.mode&1?Kn&2&&Uo!==0?Uo&-Uo:Nde.transition!==null?(aC===0&&(aC=tz()),aC):(t=ba,t!==0||(t=window.event,t=t===void 0?16:lz(t.type)),t):1}function pd(t,e,r,n){if(50<By)throw By=0,wP=null,Error(cr(185));_b(t,r,n),(!(Kn&2)||t!==lo)&&(t===lo&&(!(Kn&2)&&(dI|=r),Oi===4&&Rh(t,Uo)),cc(t,n),r===1&&Kn===0&&!(e.mode&1)&&(Vx=Js()+500,oI&&U0()))}function cc(t,e){var r=t.callbackNode;Nue(t,e);var n=UC(t,t===lo?Uo:0);if(n===0)r!==null&&pM(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&pM(r),e===1)t.tag===0?wde(lL.bind(null,t)):Sz(lL.bind(null,t)),xde(function(){!(Kn&6)&&U0()}),r=null;else{switch(rz(n)){case 1:r=yF;break;case 4:r=Zq;break;case 16:r=LC;break;case 536870912:r=ez;break;default:r=LC}r=CW(r,xW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function xW(t,e){if(nC=-1,aC=0,Kn&6)throw Error(cr(327));var r=t.callbackNode;if(_x()&&t.callbackNode!==r)return null;var n=UC(t,t===lo?Uo:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=aE(t,n);else{e=n;var a=Kn;Kn|=2;var s=yW();(lo!==t||Uo!==e)&&($A=null,Vx=Js()+500,Qm(t,e));do try{Hde();break}catch(l){vW(t,l)}while(!0);kF(),tE.current=s,Kn=a,Ai!==null?e=0:(lo=null,Uo=0,e=Oi)}if(e!==0){if(e===2&&(a=WT(t),a!==0&&(n=a,e=NP(t,a))),e===1)throw r=y2,Qm(t,0),Rh(t,n),cc(t,Js()),r;if(e===6)Rh(t,n);else{if(a=t.current.alternate,!(n&30)&&!Qde(a)&&(e=aE(t,n),e===2&&(s=WT(t),s!==0&&(n=s,e=NP(t,s))),e===1))throw r=y2,Qm(t,0),Rh(t,n),cc(t,Js()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(cr(345));case 2:hm(t,rc,$A);break;case 3:if(Rh(t,n),(n&130023424)===n&&(e=zF+500-Js(),10<e)){if(UC(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Rl(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=nP(hm.bind(null,t,rc,$A),e);break}hm(t,rc,$A);break;case 4:if(Rh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-md(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=Js()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ude(n/1960))-n,10<n){t.timeoutHandle=nP(hm.bind(null,t,rc,$A),n);break}hm(t,rc,$A);break;case 5:hm(t,rc,$A);break;default:throw Error(cr(329))}}}return cc(t,Js()),t.callbackNode===r?xW.bind(null,t):null}function NP(t,e){var r=Iy;return t.current.memoizedState.isDehydrated&&(Qm(t,e).flags|=256),t=aE(t,e),t!==2&&(e=rc,rc=r,e!==null&&_P(e)),t}function _P(t){rc===null?rc=t:rc.push.apply(rc,t)}function Qde(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!wd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rh(t,e){for(e&=~qF,e&=~dI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-md(e),n=1<<r;t[r]=-1,e&=~n}}function lL(t){if(Kn&6)throw Error(cr(327));_x();var e=UC(t,0);if(!(e&1))return cc(t,Js()),null;var r=aE(t,e);if(t.tag!==0&&r===2){var n=WT(t);n!==0&&(e=n,r=NP(t,n))}if(r===1)throw r=y2,Qm(t,0),Rh(t,e),cc(t,Js()),r;if(r===6)throw Error(cr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hm(t,rc,$A),cc(t,Js()),null}function WF(t,e){var r=Kn;Kn|=1;try{return t(e)}finally{Kn=r,Kn===0&&(Vx=Js()+500,oI&&U0())}}function cp(t){qh!==null&&qh.tag===0&&!(Kn&6)&&_x();var e=Kn;Kn|=1;var r=Pu.transition,n=ba;try{if(Pu.transition=null,ba=1,t)return t()}finally{ba=n,Pu.transition=r,Kn=e,!(Kn&6)&&U0()}}function XF(){Tc=cx.current,Ja(cx)}function Qm(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gde(r)),Ai!==null)for(r=Ai.return;r!==null;){var n=r;switch(TF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&KC();break;case 3:Ux(),Ja(oc),Ja(hl),LF();break;case 5:MF(n);break;case 4:Ux();break;case 13:Ja(Ns);break;case 19:Ja(Ns);break;case 10:FF(n.type._context);break;case 22:case 23:XF()}r=r.return}if(lo=t,Ai=t=c0(t.current,null),Uo=Tc=e,Oi=0,y2=null,qF=dI=lp=0,rc=Iy=null,Pm!==null){for(e=0;e<Pm.length;e++)if(r=Pm[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}Pm=null}return t}function vW(t,e){do{var r=Ai;try{if(kF(),eC.current=eE,ZC){for(var n=Es.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ZC=!1}if(op=0,no=Ei=Es=null,Ey=!1,g2=0,GF.current=null,r===null||r.return===null){Oi=1,y2=e,Ai=null;break}e:{var s=t,i=r.return,l=r,c=e;if(e=Uo,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,A=d.tag;if(!(d.mode&1)&&(A===0||A===11||A===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=WM(i);if(f!==null){f.flags&=-257,XM(f,i,l,s,e),f.mode&1&&zM(s,u,e),e=f,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){zM(s,u,e),YF();break e}c=Error(cr(426))}}else if(os&&l.mode&1){var g=WM(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),XM(g,i,l,s,e),PF(Qx(c,l));break e}}s=c=Qx(c,l),Oi!==4&&(Oi=2),Iy===null?Iy=[s]:Iy.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=rW(s,c,e);VM(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(o0===null||!o0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=nW(s,l,e);VM(s,w);break e}}s=s.return}while(s!==null)}wW(r)}catch(I){e=I,Ai===r&&r!==null&&(Ai=r=r.return);continue}break}while(!0)}function yW(){var t=tE.current;return tE.current=eE,t===null?eE:t}function YF(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),lo===null||!(lp&268435455)&&!(dI&268435455)||Rh(lo,Uo)}function aE(t,e){var r=Kn;Kn|=2;var n=yW();(lo!==t||Uo!==e)&&($A=null,Qm(t,e));do try{Vde();break}catch(a){vW(t,a)}while(!0);if(kF(),Kn=r,tE.current=n,Ai!==null)throw Error(cr(261));return lo=null,Uo=0,Oi}function Vde(){for(;Ai!==null;)bW(Ai)}function Hde(){for(;Ai!==null&&!hue();)bW(Ai)}function bW(t){var e=_W(t.alternate,t,Tc);t.memoizedProps=t.pendingProps,e===null?wW(t):Ai=e,GF.current=null}function wW(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Dde(r,e),r!==null){r.flags&=32767,Ai=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oi=6,Ai=null;return}}else if(r=Ode(r,e,Tc),r!==null){Ai=r;return}if(e=e.sibling,e!==null){Ai=e;return}Ai=e=t}while(e!==null);Oi===0&&(Oi=5)}function hm(t,e,r){var n=ba,a=Pu.transition;try{Pu.transition=null,ba=1,$de(t,e,r,n)}finally{Pu.transition=a,ba=n}return null}function $de(t,e,r,n){do _x();while(qh!==null);if(Kn&6)throw Error(cr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(cr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(_ue(t,s),t===lo&&(Ai=lo=null,Uo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cN||(cN=!0,CW(LC,function(){return _x(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Pu.transition,Pu.transition=null;var i=ba;ba=1;var l=Kn;Kn|=4,GF.current=null,Mde(t,r),pW(r,t),ude(tP),QC=!!eP,tP=eP=null,t.current=r,Lde(r),mue(),Kn=l,ba=i,Pu.transition=s}else t.current=r;if(cN&&(cN=!1,qh=t,nE=a),s=t.pendingLanes,s===0&&(o0=null),xue(r.stateNode),cc(t,Js()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(rE)throw rE=!1,t=bP,bP=null,t;return nE&1&&t.tag!==0&&_x(),s=t.pendingLanes,s&1?t===wP?By++:(By=0,wP=t):By=0,U0(),null}function _x(){if(qh!==null){var t=rz(nE),e=Pu.transition,r=ba;try{if(Pu.transition=null,ba=16>t?16:t,qh===null)var n=!1;else{if(t=qh,qh=null,nE=0,Kn&6)throw Error(cr(331));var a=Kn;for(Kn|=4,Tr=t.current;Tr!==null;){var s=Tr,i=s.child;if(Tr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Tr=u;Tr!==null;){var d=Tr;switch(d.tag){case 0:case 11:case 15:Sy(8,d,s)}var A=d.child;if(A!==null)A.return=d,Tr=A;else for(;Tr!==null;){d=Tr;var h=d.sibling,f=d.return;if(fW(d),d===u){Tr=null;break}if(h!==null){h.return=f,Tr=h;break}Tr=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Tr=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Tr=i;else e:for(;Tr!==null;){if(s=Tr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sy(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Tr=x;break e}Tr=s.return}}var y=t.current;for(Tr=y;Tr!==null;){i=Tr;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Tr=b;else e:for(i=y;Tr!==null;){if(l=Tr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uI(9,l)}}catch(I){Rs(l,l.return,I)}if(l===i){Tr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Tr=w;break e}Tr=l.return}}if(Kn=a,U0(),lA&&typeof lA.onPostCommitFiberRoot=="function")try{lA.onPostCommitFiberRoot(rI,t)}catch{}n=!0}return n}finally{ba=r,Pu.transition=e}}return!1}function cL(t,e,r){e=Qx(r,e),e=rW(t,e,1),t=i0(t,e,1),e=Rl(),t!==null&&(_b(t,1,e),cc(t,e))}function Rs(t,e,r){if(t.tag===3)cL(t,t,r);else for(;e!==null;){if(e.tag===3){cL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(o0===null||!o0.has(n))){t=Qx(r,t),t=nW(e,t,1),e=i0(e,t,1),t=Rl(),e!==null&&(_b(e,1,t),cc(e,t));break}}e=e.return}}function Kde(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Rl(),t.pingedLanes|=t.suspendedLanes&r,lo===t&&(Uo&r)===r&&(Oi===4||Oi===3&&(Uo&130023424)===Uo&&500>Js()-zF?Qm(t,0):qF|=r),cc(t,e)}function NW(t,e){e===0&&(t.mode&1?(e=Zw,Zw<<=1,!(Zw&130023424)&&(Zw=4194304)):e=1);var r=Rl();t=vf(t,e),t!==null&&(_b(t,e,r),cc(t,r))}function Gde(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),NW(t,r)}function qde(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(cr(314))}n!==null&&n.delete(e),NW(t,r)}var _W;_W=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||oc.current)ac=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ac=!1,Fde(t,e,r);ac=!!(t.flags&131072)}else ac=!1,os&&e.flags&1048576&&Iz(e,zC,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;rC(t,e),t=e.pendingProps;var a=Rx(e,hl.current);Nx(e,r),a=QF(null,e,n,t,a,r);var s=VF();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lc(n)?(s=!0,GC(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,DF(e),a.updater=cI,e.stateNode=a,a._reactInternals=e,uP(e,n,t,r),e=fP(null,e,n,!0,s,r)):(e.tag=0,os&&s&&BF(e),Tl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(rC(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Wde(n),t=sd(n,t),a){case 0:e=AP(null,e,n,t,r);break e;case 1:e=ZM(null,e,n,t,r);break e;case 11:e=YM(null,e,n,t,r);break e;case 14:e=JM(null,e,n,sd(n.type,t),r);break e}throw Error(cr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:sd(n,a),AP(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:sd(n,a),ZM(t,e,n,a,r);case 3:e:{if(oW(e),t===null)throw Error(cr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,Fz(t,e),YC(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Qx(Error(cr(423)),e),e=eL(t,e,n,r,a);break e}else if(n!==a){a=Qx(Error(cr(424)),e),e=eL(t,e,n,r,a);break e}else for(Rc=s0(e.stateNode.containerInfo.firstChild),Qc=e,os=!0,od=null,r=jz(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mx(),n===a){e=yf(t,e,r);break e}Tl(t,e,n,r)}e=e.child}return e;case 5:return Oz(e),t===null&&oP(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,rP(n,a)?i=null:s!==null&&rP(n,s)&&(e.flags|=32),iW(t,e),Tl(t,e,i,r),e.child;case 6:return t===null&&oP(e),null;case 13:return lW(t,e,r);case 4:return RF(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Lx(e,null,n,r):Tl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:sd(n,a),YM(t,e,n,a,r);case 7:return Tl(t,e,e.pendingProps,r),e.child;case 8:return Tl(t,e,e.pendingProps.children,r),e.child;case 12:return Tl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,Ua(WC,n._currentValue),n._currentValue=i,s!==null)if(wd(s.value,i)){if(s.children===a.children&&!oc.current){e=yf(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=sf(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),lP(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(cr(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),lP(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Tl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Nx(e,r),a=Ou(a),n=n(a),e.flags|=1,Tl(t,e,n,r),e.child;case 14:return n=e.type,a=sd(n,e.pendingProps),a=sd(n.type,a),JM(t,e,n,a,r);case 15:return aW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:sd(n,a),rC(t,e),e.tag=1,lc(n)?(t=!0,GC(e)):t=!1,Nx(e,r),tW(e,n,a),uP(e,n,a,r),fP(null,e,n,!0,t,r);case 19:return cW(t,e,r);case 22:return sW(t,e,r)}throw Error(cr(156,e.tag))};function CW(t,e){return Jq(t,e)}function zde(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cu(t,e,r,n){return new zde(t,e,r,n)}function JF(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wde(t){if(typeof t=="function")return JF(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gF)return 11;if(t===xF)return 14}return 2}function c0(t,e){var r=t.alternate;return r===null?(r=Cu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function sC(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")JF(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Zg:return Vm(r.children,a,s,e);case pF:i=8,a|=8;break;case FT:return t=Cu(12,r,e,a|2),t.elementType=FT,t.lanes=s,t;case OT:return t=Cu(13,r,e,a),t.elementType=OT,t.lanes=s,t;case DT:return t=Cu(19,r,e,a),t.elementType=DT,t.lanes=s,t;case Oq:return AI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kq:i=10;break e;case Fq:i=9;break e;case gF:i=11;break e;case xF:i=14;break e;case Th:i=16,n=null;break e}throw Error(cr(130,t==null?t:typeof t,""))}return e=Cu(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Vm(t,e,r,n){return t=Cu(7,t,n,e),t.lanes=r,t}function AI(t,e,r,n){return t=Cu(22,t,n,e),t.elementType=Oq,t.lanes=r,t.stateNode={isHidden:!1},t}function p5(t,e,r){return t=Cu(6,t,null,e),t.lanes=r,t}function g5(t,e,r){return e=Cu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xde(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y3(0),this.expirationTimes=Y3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y3(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ZF(t,e,r,n,a,s,i,l,c){return t=new Xde(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DF(s),t}function Yde(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function EW(t){if(!t)return b0;t=t._reactInternals;e:{if(Mp(t)!==t||t.tag!==1)throw Error(cr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(cr(171))}if(t.tag===1){var r=t.type;if(lc(r))return Ez(t,r,e)}return e}function SW(t,e,r,n,a,s,i,l,c){return t=ZF(r,n,!0,t,a,s,i,l,c),t.context=EW(null),r=t.current,n=Rl(),a=l0(r),s=sf(n,a),s.callback=e??null,i0(r,s,a),t.current.lanes=a,_b(t,a,n),cc(t,n),t}function fI(t,e,r,n){var a=e.current,s=Rl(),i=l0(a);return r=EW(r),e.context===null?e.context=r:e.pendingContext=r,e=sf(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=i0(a,e,i),t!==null&&(pd(t,a,i,s),Z_(t,a,i)),i}function sE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eO(t,e){uL(t,e),(t=t.alternate)&&uL(t,e)}function Jde(){return null}var IW=typeof reportError=="function"?reportError:function(t){console.error(t)};function tO(t){this._internalRoot=t}hI.prototype.render=tO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(cr(409));fI(t,e,null,null)};hI.prototype.unmount=tO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cp(function(){fI(null,t,null,null)}),e[xf]=null}};function hI(t){this._internalRoot=t}hI.prototype.unstable_scheduleHydration=function(t){if(t){var e=sz();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Dh.length&&e!==0&&e<Dh[r].priority;r++);Dh.splice(r,0,t),r===0&&oz(t)}};function rO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dL(){}function Zde(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=sE(i);s.call(u)}}var i=SW(e,n,t,0,null,!1,!1,"",dL);return t._reactRootContainer=i,t[xf]=i.current,A2(t.nodeType===8?t.parentNode:t),cp(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=sE(c);l.call(u)}}var c=ZF(t,0,!1,null,null,!1,!1,"",dL);return t._reactRootContainer=c,t[xf]=c.current,A2(t.nodeType===8?t.parentNode:t),cp(function(){fI(e,c,r,n)}),c}function pI(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var l=a;a=function(){var c=sE(i);l.call(c)}}fI(e,i,t,a)}else i=Zde(r,e,t,a,n);return sE(i)}nz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Y1(e.pendingLanes);r!==0&&(bF(e,r|1),cc(e,Js()),!(Kn&6)&&(Vx=Js()+500,U0()))}break;case 13:cp(function(){var n=vf(t,1);if(n!==null){var a=Rl();pd(n,t,1,a)}}),eO(t,1)}};wF=function(t){if(t.tag===13){var e=vf(t,134217728);if(e!==null){var r=Rl();pd(e,t,134217728,r)}eO(t,134217728)}};az=function(t){if(t.tag===13){var e=l0(t),r=vf(t,e);if(r!==null){var n=Rl();pd(r,t,e,n)}eO(t,e)}};sz=function(){return ba};iz=function(t,e){var r=ba;try{return ba=t,e()}finally{ba=r}};GT=function(t,e,r){switch(e){case"input":if(LT(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=iI(n);if(!a)throw Error(cr(90));Rq(n),LT(n,a)}}}break;case"textarea":Lq(t,r);break;case"select":e=r.value,e!=null&&vx(t,!!r.multiple,e,!1)}};Gq=WF;qq=cp;var eAe={usingClientEntryPoint:!1,Events:[Eb,nx,iI,$q,Kq,WF]},p1={findFiberByHostInstance:Tm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tAe={bundleType:p1.bundleType,version:p1.version,rendererPackageName:p1.rendererPackageName,rendererConfig:p1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Of.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xq(t),t===null?null:t.stateNode},findFiberByHostInstance:p1.findFiberByHostInstance||Jde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uN.isDisabled&&uN.supportsFiber)try{rI=uN.inject(tAe),lA=uN}catch{}}zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eAe;zc.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rO(e))throw Error(cr(200));return Yde(t,e,null,r)};zc.createRoot=function(t,e){if(!rO(t))throw Error(cr(299));var r=!1,n="",a=IW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ZF(t,1,!1,null,null,r,!1,n,a),t[xf]=e.current,A2(t.nodeType===8?t.parentNode:t),new tO(e)};zc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(cr(188)):(t=Object.keys(t).join(","),Error(cr(268,t)));return t=Xq(e),t=t===null?null:t.stateNode,t};zc.flushSync=function(t){return cp(t)};zc.hydrate=function(t,e,r){if(!mI(e))throw Error(cr(200));return pI(null,t,e,!0,r)};zc.hydrateRoot=function(t,e,r){if(!rO(t))throw Error(cr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=IW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=SW(e,null,t,1,r??null,a,!1,s,i),t[xf]=e.current,A2(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new hI(e)};zc.render=function(t,e,r){if(!mI(e))throw Error(cr(200));return pI(null,t,e,!1,r)};zc.unmountComponentAtNode=function(t){if(!mI(t))throw Error(cr(40));return t._reactRootContainer?(cp(function(){pI(null,null,t,!1,function(){t._reactRootContainer=null,t[xf]=null})}),!0):!1};zc.unstable_batchedUpdates=WF;zc.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mI(r))throw Error(cr(200));if(t==null||t._reactInternals===void 0)throw Error(cr(38));return pI(t,e,r,!1,n)};zc.version="18.3.1-next-f1338f8080-20240426";function BW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BW)}catch(t){console.error(t)}}BW(),Bq.exports=zc;var gd=Bq.exports,AL=gd;jT.createRoot=AL.createRoot,jT.hydrateRoot=AL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fL="popstate";function rAe(t={}){function e(n,a){let{pathname:s,search:i,hash:l}=n.location;return CP("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:b2(a)}return aAe(e,r,null,t)}function As(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nAe(){return Math.random().toString(36).substring(2,10)}function hL(t,e){return{usr:t.state,key:t.key,idx:e}}function CP(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?pv(e):e,state:r,key:e&&e.key||n||nAe()}}function b2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function pv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function aAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function A(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function h(g,x){l="PUSH";let y=CP(p.location,g,x);u=d()+1;let b=hL(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function f(g,x){l="REPLACE";let y=CP(p.location,g,x);u=d();let b=hL(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return sAe(g)}let p={get action(){return l},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fL,A),c=g,()=>{a.removeEventListener(fL,A),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:f,go(g){return i.go(g)}};return p}function sAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),As(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:b2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function TW(t,e,r="/"){return iAe(t,e,r,!1)}function iAe(t,e,r,n){let a=typeof e=="string"?pv(e):e,s=bf(a.pathname||"/",r);if(s==null)return null;let i=PW(t);oAe(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=xAe(s);l=pAe(i[c],u,n)}return l}function PW(t,e=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;As(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let A=of([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(As(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),PW(i.children,e,h,A,c)),!(i.path==null&&!i.index)&&e.push({path:A,score:hAe(A,i.index),routesMeta:h})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of jW(i.path))s(i,l,!0,u)}),e}function jW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=jW(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function oAe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:mAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var lAe=/^:[\w-]+$/,cAe=3,uAe=2,dAe=1,AAe=10,fAe=-2,mL=t=>t==="*";function hAe(t,e){let r=t.split("/"),n=r.length;return r.some(mL)&&(n+=fAe),e&&(n+=uAe),r.filter(a=>!mL(a)).reduce((a,s)=>a+(lAe.test(s)?cAe:s===""?dAe:AAe),n)}function mAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function pAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",A=iE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!A&&u&&r&&!n[n.length-1].route.index&&(A=iE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!A)return null;Object.assign(a,A.params),i.push({params:a,pathname:of([s,A.pathname]),pathnameBase:wAe(of([s,A.pathnameBase])),route:h}),A.pathnameBase!=="/"&&(s=of([s,A.pathnameBase]))}return i}function iE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=gAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:A},h)=>{if(d==="*"){let m=l[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const f=l[h];return A&&!f?u[d]=void 0:u[d]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function gAe(t,e=!1,r=!0){Nd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function xAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function bf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function vAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?pv(t):t;return{pathname:r?r.startsWith("/")?r:yAe(r,e):e,search:NAe(n),hash:_Ae(a)}}function yAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function x5(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nO(t){let e=bAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aO(t,e,r,n=!1){let a;typeof t=="string"?a=pv(t):(a={...t},As(!a.pathname||!a.pathname.includes("?"),x5("?","pathname","search",a)),As(!a.pathname||!a.pathname.includes("#"),x5("#","pathname","hash",a)),As(!a.search||!a.search.includes("#"),x5("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let A=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),A-=1;a.pathname=h.join("/")}l=A>=0?e[A]:"/"}let c=vAe(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var of=t=>t.join("/").replace(/\/\/+/g,"/"),wAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_Ae=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kW=["POST","PUT","PATCH","DELETE"];new Set(kW);var EAe=["GET",...kW];new Set(EAe);var gv=v.createContext(null);gv.displayName="DataRouter";var gI=v.createContext(null);gI.displayName="DataRouterState";v.createContext(!1);var FW=v.createContext({isTransitioning:!1});FW.displayName="ViewTransition";var SAe=v.createContext(new Map);SAe.displayName="Fetchers";var IAe=v.createContext(null);IAe.displayName="Await";var Id=v.createContext(null);Id.displayName="Navigation";var Ib=v.createContext(null);Ib.displayName="Location";var Bd=v.createContext({outlet:null,matches:[],isDataRoute:!1});Bd.displayName="Route";var sO=v.createContext(null);sO.displayName="RouteError";function BAe(t,{relative:e}={}){As(xv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Id),{hash:a,pathname:s,search:i}=Tb(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:of([r,s])),n.createHref({pathname:l,search:i,hash:a})}function xv(){return v.useContext(Ib)!=null}function Df(){return As(xv(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Ib).location}var OW="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DW(t){v.useContext(Id).static||v.useLayoutEffect(t)}function Bb(){let{isDataRoute:t}=v.useContext(Bd);return t?$Ae():TAe()}function TAe(){As(xv(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(gv),{basename:e,navigator:r}=v.useContext(Id),{matches:n}=v.useContext(Bd),{pathname:a}=Df(),s=JSON.stringify(nO(n)),i=v.useRef(!1);return DW(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(Nd(i.current,OW),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=aO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:of([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var PAe=v.createContext(null);function jAe(t){let e=v.useContext(Bd).outlet;return e&&v.createElement(PAe.Provider,{value:t},e)}function Tb(t,{relative:e}={}){let{matches:r}=v.useContext(Bd),{pathname:n}=Df(),a=JSON.stringify(nO(r));return v.useMemo(()=>aO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function kAe(t,e){return RW(t,e)}function RW(t,e,r,n){var x;As(xv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(Id),{matches:s}=v.useContext(Bd),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";MW(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let A=Df(),h;if(e){let y=typeof e=="string"?pv(e):e;As(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=A;let f=h.pathname||"/",m=f;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=TW(t,{pathname:m});Nd(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Nd(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=MAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:of([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:of([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(Ib.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function FAe(){let t=HAe(),e=CAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var OAe=v.createElement(FAe,null),DAe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Bd.Provider,{value:this.props.routeContext},v.createElement(sO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RAe({routeContext:t,match:e,children:r}){let n=v.useContext(gv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Bd.Provider,{value:t},r)}function MAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);As(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:A}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!A||A[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let A,h=!1,f=null,m=null;r&&(A=s&&u.route.id?s[u.route.id]:void 0,f=u.route.errorElement||OAe,i&&(l<0&&d===0?(MW("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return A?x=f:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(RAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(DAe,{location:r.location,revalidation:r.revalidation,component:f,error:A,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function iO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LAe(t){let e=v.useContext(gv);return As(e,iO(t)),e}function UAe(t){let e=v.useContext(gI);return As(e,iO(t)),e}function QAe(t){let e=v.useContext(Bd);return As(e,iO(t)),e}function oO(t){let e=QAe(t),r=e.matches[e.matches.length-1];return As(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function VAe(){return oO("useRouteId")}function HAe(){var n;let t=v.useContext(sO),e=UAe("useRouteError"),r=oO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function $Ae(){let{router:t}=LAe("useNavigate"),e=oO("useNavigate"),r=v.useRef(!1);return DW(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{Nd(r.current,OW),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var pL={};function MW(t,e,r){!e&&!pL[t]&&(pL[t]=!0,Nd(!1,r))}v.memo(KAe);function KAe({routes:t,future:e,state:r}){return RW(t,void 0,r,e)}function mm({to:t,replace:e,state:r,relative:n}){As(xv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(Id);Nd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Bd),{pathname:i}=Df(),l=Bb(),c=aO(t,nO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function LW(t){return jAe(t.context)}function cn(t){As(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){As(!xv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=pv(r));let{pathname:c="/",search:u="",hash:d="",state:A=null,key:h="default"}=r,f=v.useMemo(()=>{let m=bf(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:A,key:h},navigationType:n}},[i,c,u,d,A,h,n]);return Nd(f!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:v.createElement(Id.Provider,{value:l},v.createElement(Ib.Provider,{children:e,value:f}))}function qAe({children:t,location:e}){return kAe(EP(t),e)}function EP(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,EP(n.props.children,s));return}As(n.type===cn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),As(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=EP(n.props.children,s)),r.push(i)}),r}var iC="get",oC="application/x-www-form-urlencoded";function xI(t){return t!=null&&typeof t.tagName=="string"}function zAe(t){return xI(t)&&t.tagName.toLowerCase()==="button"}function WAe(t){return xI(t)&&t.tagName.toLowerCase()==="form"}function XAe(t){return xI(t)&&t.tagName.toLowerCase()==="input"}function YAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JAe(t,e){return t.button===0&&(!e||e==="_self")&&!YAe(t)}var dN=null;function ZAe(){if(dN===null)try{new FormData(document.createElement("form"),0),dN=!1}catch{dN=!0}return dN}var efe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v5(t){return t!=null&&!efe.has(t)?(Nd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oC}"`),null):t}function tfe(t,e){let r,n,a,s,i;if(WAe(t)){let l=t.getAttribute("action");n=l?bf(l,e):null,r=t.getAttribute("method")||iC,a=v5(t.getAttribute("enctype"))||oC,s=new FormData(t)}else if(zAe(t)||XAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?bf(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||iC,a=v5(t.getAttribute("formenctype"))||v5(l.getAttribute("enctype"))||oC,s=new FormData(l,t),!ZAe()){let{name:u,type:d,value:A}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,A)}}else{if(xI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=iC,n=null,a=oC,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rfe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&bf(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function nfe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function afe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function sfe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await nfe(s,r);return i.links?i.links():[]}return[]}));return cfe(n.flat(1).filter(afe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function gL(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var A;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=r[0])==null?void 0:A.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function ife(t,e,{includeHydrateFallback:r}={}){return ofe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function ofe(t){return[...new Set(t)]}function lfe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function cfe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(lfe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function UW(){let t=v.useContext(gv);return lO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ufe(){let t=v.useContext(gI);return lO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cO=v.createContext(void 0);cO.displayName="FrameworkContext";function QW(){let t=v.useContext(cO);return lO(t,"You must render this element inside a <HydratedRouter> element"),t}function dfe(t,e){let r=v.useContext(cO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:A}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let f=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:g1(l,f),onBlur:g1(c,m),onMouseEnter:g1(u,f),onMouseLeave:g1(d,m),onTouchStart:g1(A,f)}]:[!1,h,{}]}function g1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Afe({page:t,...e}){let{router:r}=UW(),n=v.useMemo(()=>TW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(hfe,{page:t,matches:n,...e}):null}function ffe(t){let{manifest:e,routeModules:r}=QW(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return sfe(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function hfe({page:t,matches:e,...r}){let n=Df(),{manifest:a,routeModules:s}=QW(),{basename:i}=UW(),{loaderData:l,matches:c}=ufe(),u=v.useMemo(()=>gL(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>gL(t,e,c,a,n,"assets"),[t,e,c,a,n]),A=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=rfe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,l,n,a,u,e,t,s]),h=v.useMemo(()=>ife(d,a),[d,a]),f=ffe(d);return v.createElement(v.Fragment,null,A.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),f.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function mfe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var VW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VW&&(window.__reactRouterVersion="7.8.1")}catch{}function pfe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=rAe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(GAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var HW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$W=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:A,...h},f){let{basename:m}=v.useContext(Id),p=typeof u=="string"&&HW.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,VW))try{let S=new URL(window.location.href),O=u.startsWith("//")?new URL(S.protocol+u):new URL(u),B=bf(O.pathname,m);O.origin===S.origin&&B!=null?u=B+O.search+O.hash:x=!0}catch{Nd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=BAe(u,{relative:a}),[b,w,I]=dfe(n,h),T=vfe(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:A});function C(S){e&&e(S),S.defaultPrevented||T(S)}let E=v.createElement("a",{...h,...I,href:g||y,onClick:x||s?e:C,ref:mfe(f,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,E,v.createElement(Afe,{page:y})):E});$W.displayName="Link";var on=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let A=Tb(i,{relative:u.relative}),h=Df(),f=v.useContext(gI),{navigator:m,basename:p}=v.useContext(Id),g=f!=null&&_fe(A)&&l===!0,x=m.encodeLocation?m.encodeLocation(A).pathname:A.pathname,y=h.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=bf(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let I=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",T=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:I,isPending:T,isTransitioning:g},E=I?e:void 0,S;typeof n=="function"?S=n(C):S=[n,I?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(C):s;return v.createElement($W,{...u,"aria-current":E,className:S,ref:d,style:O,to:i,viewTransition:l},typeof c=="function"?c(C):c)});on.displayName="NavLink";var gfe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=iC,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:A,...h},f)=>{let m=wfe(),p=Nfe(l,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&HW.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,I=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:I,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:A})};return v.createElement("form",{ref:f,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});gfe.displayName="Form";function xfe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KW(t){let e=v.useContext(gv);return As(e,xfe(t)),e}function vfe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=Bb(),c=Df(),u=Tb(t,{relative:s});return v.useCallback(d=>{if(JAe(d,e)){d.preventDefault();let A=r!==void 0?r:b2(c)===b2(u);l(t,{replace:A,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,e,t,a,s,i])}var yfe=0,bfe=()=>`__${String(++yfe)}__`;function wfe(){let{router:t}=KW("useSubmit"),{basename:e}=v.useContext(Id),r=VAe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=tfe(n,e);if(a.navigate===!1){let d=a.fetcherKey||bfe();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function Nfe(t,{relative:e}={}){let{basename:r}=v.useContext(Id),n=v.useContext(Bd);As(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Tb(t||".",{relative:e})},i=Df();if(t==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(A=>A).forEach(A=>l.append("index",A));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:of([r,s.pathname])),b2(s)}function _fe(t,{relative:e}={}){let r=v.useContext(FW);As(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=KW("useViewTransitionState"),a=Tb(t,{relative:e});if(!r.isTransitioning)return!1;let s=bf(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=bf(r.nextLocation.pathname,n)||r.nextLocation.pathname;return iE(a.pathname,i)!=null||iE(a.pathname,s)!=null}var xL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},Cfe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},qW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,l=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,A=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,f=u&63;c||(f=64,i||(h=64)),n.push(r[d],r[A],r[h],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cfe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const A=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||A==null)throw new Efe;const h=s<<2|l>>4;if(n.push(h),u!==64){const f=l<<4&240|u>>2;if(n.push(f),A!==64){const m=u<<6&192|A;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Efe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sfe=function(t){const e=GW(t);return qW.encodeByteArray(e,!0)},oE=function(t){return Sfe(t).replace(/\./g,"")},zW=function(t){try{return qW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ife(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bfe=()=>Ife().__FIREBASE_DEFAULTS__,Tfe=()=>{if(typeof process>"u"||typeof xL>"u")return;const t=xL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pfe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zW(t[1]);return e&&JSON.parse(e)},vI=()=>{try{return Bfe()||Tfe()||Pfe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WW=t=>{var e,r;return(r=(e=vI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},jfe=t=>{const e=WW(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},XW=()=>{var t;return(t=vI())===null||t===void 0?void 0:t.config},YW=t=>{var e;return(e=vI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ffe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oE(JSON.stringify(r)),oE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ofe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function Dfe(){var t;const e=(t=vI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mfe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Lfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ufe(){const t=Mi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JW(){return!Dfe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZW(){try{return typeof indexedDB=="object"}catch{return!1}}function Qfe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vfe="FirebaseError";class Rf extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Vfe,Object.setPrototypeOf(this,Rf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pb.prototype.create)}}class Pb{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?Hfe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new Rf(a,l,n)}}function Hfe(t,e){return t.replace($fe,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const $fe=/\{\$([^}]+)}/g;function Kfe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lE(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(vL(s)&&vL(i)){if(!lE(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function vL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Z1(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function ey(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Gfe(t,e){const r=new qfe(t,e);return r.subscribe.bind(r)}class qfe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");zfe(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=y5),a.error===void 0&&(a.error=y5),a.complete===void 0&&(a.complete=y5);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zfe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function y5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){return t&&t._delegate?t._delegate:t}class up{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wfe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new kfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yfe(e))try{this.getOrInitializeService({instanceIdentifier:pm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=pm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pm){return this.instances.has(e)}getOptions(e=pm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Xfe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pm){return this.component?this.component.multipleInstances?e:pm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Xfe(t){return t===pm?void 0:t}function Yfe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jfe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Wfe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jn||(jn={}));const Zfe={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},ehe=jn.INFO,the={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},rhe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=the[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uO=class{constructor(e){this.name=e,this._logLevel=ehe,this._logHandler=rhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...e),this._logHandler(this,jn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...e),this._logHandler(this,jn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jn.INFO,...e),this._logHandler(this,jn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jn.WARN,...e),this._logHandler(this,jn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...e),this._logHandler(this,jn.ERROR,...e)}};const nhe=(t,e)=>e.some(r=>t instanceof r);let yL,bL;function ahe(){return yL||(yL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function she(){return bL||(bL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eX=new WeakMap,SP=new WeakMap,tX=new WeakMap,b5=new WeakMap,dO=new WeakMap;function ihe(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(u0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&eX.set(r,t)}).catch(()=>{}),dO.set(e,t),e}function ohe(t){if(SP.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});SP.set(t,e)}let IP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return SP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return u0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lhe(t){IP=t(IP)}function che(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(w5(this),e,...r);return tX.set(n,e.sort?e.sort():[e]),u0(n)}:she().includes(t)?function(...e){return t.apply(w5(this),e),u0(eX.get(this))}:function(...e){return u0(t.apply(w5(this),e))}}function uhe(t){return typeof t=="function"?che(t):(t instanceof IDBTransaction&&ohe(t),nhe(t,ahe())?new Proxy(t,IP):t)}function u0(t){if(t instanceof IDBRequest)return ihe(t);if(b5.has(t))return b5.get(t);const e=uhe(t);return e!==t&&(b5.set(t,e),dO.set(e,t)),e}const w5=t=>dO.get(t);function dhe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),l=u0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(u0(i.result),c.oldVersion,c.newVersion,u0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ahe=["get","getKey","getAll","getAllKeys","count"],fhe=["put","add","delete","clear"],N5=new Map;function wL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N5.get(e))return N5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=fhe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Ahe.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return N5.set(e,s),s}lhe(t=>({...t,get:(e,r,n)=>wL(e,r)||t.get(e,r,n),has:(e,r)=>!!wL(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(mhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function mhe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const BP="@firebase/app",NL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new uO("@firebase/app"),phe="@firebase/app-compat",ghe="@firebase/analytics-compat",xhe="@firebase/analytics",vhe="@firebase/app-check-compat",yhe="@firebase/app-check",bhe="@firebase/auth",whe="@firebase/auth-compat",Nhe="@firebase/database",_he="@firebase/data-connect",Che="@firebase/database-compat",Ehe="@firebase/functions",She="@firebase/functions-compat",Ihe="@firebase/installations",Bhe="@firebase/installations-compat",The="@firebase/messaging",Phe="@firebase/messaging-compat",jhe="@firebase/performance",khe="@firebase/performance-compat",Fhe="@firebase/remote-config",Ohe="@firebase/remote-config-compat",Dhe="@firebase/storage",Rhe="@firebase/storage-compat",Mhe="@firebase/firestore",Lhe="@firebase/vertexai-preview",Uhe="@firebase/firestore-compat",Qhe="firebase",Vhe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="[DEFAULT]",Hhe={[BP]:"fire-core",[phe]:"fire-core-compat",[xhe]:"fire-analytics",[ghe]:"fire-analytics-compat",[yhe]:"fire-app-check",[vhe]:"fire-app-check-compat",[bhe]:"fire-auth",[whe]:"fire-auth-compat",[Nhe]:"fire-rtdb",[_he]:"fire-data-connect",[Che]:"fire-rtdb-compat",[Ehe]:"fire-fn",[She]:"fire-fn-compat",[Ihe]:"fire-iid",[Bhe]:"fire-iid-compat",[The]:"fire-fcm",[Phe]:"fire-fcm-compat",[jhe]:"fire-perf",[khe]:"fire-perf-compat",[Fhe]:"fire-rc",[Ohe]:"fire-rc-compat",[Dhe]:"fire-gcs",[Rhe]:"fire-gcs-compat",[Mhe]:"fire-fst",[Uhe]:"fire-fst-compat",[Lhe]:"fire-vertex","fire-js":"fire-js",[Qhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=new Map,PP=new Map,jP=new Map;function _L(t,e){try{t.container.addComponent(e)}catch(r){wf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function $x(t){const e=t.name;if(jP.has(e))return wf.debug(`There were multiple attempts to register component ${e}.`),!1;jP.set(e,t);for(const r of Hx.values())_L(r,t);for(const r of PP.values())_L(r,t);return!0}function AO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function tA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $he={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},d0=new Pb("app","Firebase",$he);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Khe{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new up("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw d0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=Vhe;function fO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:TP,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw d0.create("bad-app-name",{appName:String(a)});if(r||(r=XW()),!r)throw d0.create("no-options");const s=Hx.get(a);if(s){if(lE(r,s.options)&&lE(n,s.config))return s;throw d0.create("duplicate-app",{appName:a})}const i=new Jfe(a);for(const c of jP.values())i.addComponent(c);const l=new Khe(r,n,i);return Hx.set(a,l),l}function hO(t=TP){const e=Hx.get(t);if(!e&&t===TP&&XW())return fO();if(!e)throw d0.create("no-app",{appName:t});return e}async function Ghe(t){let e=!1;const r=t.name;Hx.has(r)?(e=!0,Hx.delete(r)):PP.has(r)&&t.decRefCount()<=0&&(PP.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function A0(t,e,r){var n;let a=(n=Hhe[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wf.warn(l.join(" "));return}$x(new up(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qhe="firebase-heartbeat-database",zhe=1,w2="firebase-heartbeat-store";let _5=null;function rX(){return _5||(_5=dhe(qhe,zhe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(w2)}catch(r){console.warn(r)}}}}).catch(t=>{throw d0.create("idb-open",{originalErrorMessage:t.message})})),_5}async function Whe(t){try{const r=(await rX()).transaction(w2),n=await r.objectStore(w2).get(nX(t));return await r.done,n}catch(e){if(e instanceof Rf)wf.warn(e.message);else{const r=d0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wf.warn(r.message)}}}async function CL(t,e){try{const n=(await rX()).transaction(w2,"readwrite");await n.objectStore(w2).put(e,nX(t)),await n.done}catch(r){if(r instanceof Rf)wf.warn(r.message);else{const n=d0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});wf.warn(n.message)}}}function nX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xhe=1024,Yhe=30*24*60*60*1e3;class Jhe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new e0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=Yhe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){wf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=EL(),{heartbeatsToSend:n,unsentEntries:a}=Zhe(this._heartbeatsCache.heartbeats),s=oE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return wf.warn(r),""}}}function EL(){return new Date().toISOString().substring(0,10)}function Zhe(t,e=Xhe){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),SL(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),SL(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class e0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZW()?Qfe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Whe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return CL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return CL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function SL(t){return oE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0e(t){$x(new up("platform-logger",e=>new hhe(e),"PRIVATE")),$x(new up("heartbeat",e=>new Jhe(e),"PRIVATE")),A0(BP,NL,t),A0(BP,NL,"esm2017"),A0("fire-js","")}t0e("");function mO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function aX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r0e=aX,sX=new Pb("auth","Firebase",aX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new uO("@firebase/auth");function n0e(t,...e){cE.logLevel<=jn.WARN&&cE.warn(`Auth (${vv}): ${t}`,...e)}function lC(t,...e){cE.logLevel<=jn.ERROR&&cE.error(`Auth (${vv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,...e){throw pO(t,...e)}function uA(t,...e){return pO(t,...e)}function iX(t,e,r){const n=Object.assign(Object.assign({},r0e()),{[e]:r});return new Pb("auth","Firebase",n).create(e,{appName:t.name})}function lf(t){return iX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return sX.create(t,...e)}function en(t,e,...r){if(!t)throw pO(e,...r)}function JA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lC(e),new Error(e)}function Nf(t,e){t||JA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function a0e(){return IL()==="http:"||IL()==="https:"}function IL(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a0e()||Mfe()||"connection"in navigator)?navigator.onLine:!0}function i0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,r){this.shortDelay=e,this.longDelay=r,Nf(r>e,"Short delay should be less than long delay!"),this.isMobile=Ofe()||Lfe()}get(){return s0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){Nf(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;JA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;JA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;JA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0e=new kb(3e4,6e4);function Q0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function V0(t,e,r,n,a={}){return lX(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const l=jb(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return Rfe()||(u.referrerPolicy="no-referrer"),oX.fetch()(cX(t,t.config.apiHost,r,l),u)})}async function lX(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},o0e),e);try{const a=new u0e(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw AN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw AN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw AN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw AN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw iX(t,d,u);_d(t,d)}}catch(a){if(a instanceof Rf)throw a;_d(t,"network-request-failed",{message:String(a)})}}async function Fb(t,e,r,n,a={}){const s=await V0(t,e,r,n,a);return"mfaPendingCredential"in s&&_d(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cX(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?gO(t.config,a):`${t.config.apiScheme}://${a}`}function c0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u0e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(uA(this.auth,"network-request-failed")),l0e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function AN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=uA(t,e,n);return a.customData._tokenResponse=r,a}function BL(t){return t!==void 0&&t.enterprise!==void 0}class d0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return c0e(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function A0e(t,e){return V0(t,"GET","/v2/recaptchaConfig",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0e(t,e){return V0(t,"POST","/v1/accounts:delete",e)}async function uX(t,e){return V0(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h0e(t,e=!1){const r=Is(t),n=await r.getIdToken(e),a=xO(n);en(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Ty(C5(a.auth_time)),issuedAtTime:Ty(C5(a.iat)),expirationTime:Ty(C5(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function C5(t){return Number(t)*1e3}function xO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return lC("JWT malformed, contained fewer than 3 sections"),null;try{const a=zW(r);return a?JSON.parse(a):(lC("Failed to decode base64 JWT payload"),null)}catch(a){return lC("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function TL(t){const e=xO(t);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Rf&&m0e(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function m0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ty(this.lastLoginAt),this.creationTime=Ty(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await N2(t,uX(r,{idToken:n}));en(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dX(s.providerUserInfo):[],l=x0e(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new FP(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,A)}async function g0e(t){const e=Is(t);await uE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x0e(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function dX(t){return t.map(e=>{var{providerId:r}=e,n=mO(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0e(t,e){const r=await lX(t,{},async()=>{const n=jb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=cX(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",oX.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function y0e(t,e){return V0(t,"POST","/v2/accounts:revokeToken",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){en(e.length!==0,"internal-error");const r=TL(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await v0e(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Cx;return n&&(en(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(en(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(en(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cx,this.toJSON())}_performRefresh(){return JA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t,e){en(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ZA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=mO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await N2(this,this.stsTokenManager.getToken(this.auth,e));return en(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return h0e(this,e)}reload(){return g0e(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ZA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await uE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tA(this.auth.app))return Promise.reject(lf(this.auth));const e=await this.getIdToken();return await N2(this,f0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,l,c,u,d;const A=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,f=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:I,providerData:T,stsTokenManager:C}=r;en(b&&C,e,"internal-error");const E=Cx.fromJSON(this.name,C);en(typeof b=="string",e,"internal-error"),mh(A,e.name),mh(h,e.name),en(typeof w=="boolean",e,"internal-error"),en(typeof I=="boolean",e,"internal-error"),mh(f,e.name),mh(m,e.name),mh(p,e.name),mh(g,e.name),mh(x,e.name),mh(y,e.name);const S=new ZA({uid:b,auth:e,email:h,emailVerified:w,displayName:A,isAnonymous:I,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:y});return T&&Array.isArray(T)&&(S.providerData=T.map(O=>Object.assign({},O))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,r,n=!1){const a=new Cx;a.updateFromServerResponse(r);const s=new ZA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await uE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];en(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?dX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Cx;l.updateFromIdToken(n);const c=new ZA({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new FP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new Map;function ef(t){Nf(t instanceof Function,"Expected a class definition");let e=PL.get(t);return e?(Nf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}AX.type="NONE";const jL=AX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e,r){return`firebase:${t}:${e}:${r}`}class Ex{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=cC(this.userKey,a.apiKey,s),this.fullPersistenceKey=cC("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ZA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ex(ef(jL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||ef(jL);const i=cC(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){const A=ZA._fromJSON(e,d);u!==s&&(l=A),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ex(s,e,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Ex(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xX(e))return"Blackberry";if(vX(e))return"Webos";if(hX(e))return"Safari";if((e.includes("chrome/")||mX(e))&&!e.includes("edge/"))return"Chrome";if(gX(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fX(t=Mi()){return/firefox\//i.test(t)}function hX(t=Mi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mX(t=Mi()){return/crios\//i.test(t)}function pX(t=Mi()){return/iemobile/i.test(t)}function gX(t=Mi()){return/android/i.test(t)}function xX(t=Mi()){return/blackberry/i.test(t)}function vX(t=Mi()){return/webos/i.test(t)}function vO(t=Mi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function b0e(t=Mi()){var e;return vO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function w0e(){return Ufe()&&document.documentMode===10}function yX(t=Mi()){return vO(t)||gX(t)||vX(t)||xX(t)||/windows phone/i.test(t)||pX(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t,e=[]){let r;switch(t){case"Browser":r=kL(Mi());break;case"Worker":r=`${kL(Mi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${vv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,l)=>{try{const c=e(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0e(t,e={}){return V0(t,"GET","/v2/passwordPolicy",Q0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0e=6;class E0e{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:C0e,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0e{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FL(this),this.idTokenSubscription=new FL(this),this.beforeStateQueue=new N0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ef(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ex.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await uX(this,{idToken:e}),n=await ZA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(tA(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await uE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tA(this.app))return Promise.reject(lf(this));const r=e?Is(e):null;return r&&en(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tA(this.app)?Promise.reject(lf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tA(this.app)?Promise.reject(lf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ef(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _0e(this),r=new E0e(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pb("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await y0e(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ef(e)||this._popupRedirectResolver;en(r,this,"argument-error"),this.redirectPersistenceManager=await Ex.create(this,[ef(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&n0e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Lp(t){return Is(t)}class FL{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gfe(r=>this.observer=r)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I0e(t){yI=t}function wX(t){return yI.loadJS(t)}function B0e(){return yI.recaptchaEnterpriseScript}function T0e(){return yI.gapiScript}function P0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const j0e="recaptcha-enterprise",k0e="NO_RECAPTCHA";class F0e{constructor(e){this.type=j0e,this.auth=Lp(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{A0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new d0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;BL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(k0e)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&BL(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=B0e();c.length!==0&&(c+=l),wX(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function OL(t,e,r,n=!1){const a=new F0e(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function OP(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await OL(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await OL(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0e(t,e){const r=AO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(lE(s,e??{}))return a;_d(a,"already-initialized")}return r.initialize({options:e})}function D0e(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ef);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function R0e(t,e,r){const n=Lp(t);en(n._canInitEmulator,n,"emulator-config-failed"),en(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=NX(e),{host:i,port:l}=M0e(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),L0e()}function NX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M0e(t){const e=NX(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:DL(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:DL(i)}}}function DL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function L0e(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return JA("not implemented")}_getIdTokenResponse(e){return JA("not implemented")}_linkToIdToken(e,r){return JA("not implemented")}_getReauthenticationResolver(e){return JA("not implemented")}}async function U0e(t,e){return V0(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0e(t,e){return Fb(t,"POST","/v1/accounts:signInWithPassword",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0e(t,e){return Fb(t,"POST","/v1/accounts:signInWithEmailLink",Q0(t,e))}async function H0e(t,e){return Fb(t,"POST","/v1/accounts:signInWithEmailLink",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2 extends yO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new _2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new _2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OP(e,r,"signInWithPassword",Q0e);case"emailLink":return V0e(e,{email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OP(e,n,"signUpPassword",U0e);case"emailLink":return H0e(e,{idToken:r,email:this._email,oobCode:this._password});default:_d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e){return Fb(t,"POST","/v1/accounts:signInWithIdp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0e="http://localhost";class dp extends yO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new dp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_d("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=mO(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new dp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Sx(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Sx(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Sx(e,r)}buildRequest(){const e={requestUri:$0e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=jb(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G0e(t){const e=Z1(ey(t)).link,r=e?Z1(ey(e)).deep_link_id:null,n=Z1(ey(t)).deep_link_id;return(n?Z1(ey(n)).link:null)||n||r||e||t}class bO{constructor(e){var r,n,a,s,i,l;const c=Z1(ey(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,A=K0e((a=c.mode)!==null&&a!==void 0?a:null);en(u&&d&&A,"argument-error"),this.apiKey=u,this.operation=A,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=G0e(e);try{return new bO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.providerId=yv.PROVIDER_ID}static credential(e,r){return _2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bO.parseLink(r);return en(n,"argument-error"),_2._fromEmailAndCode(e,n.code,n.tenantId)}}yv.PROVIDER_ID="password";yv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends _X{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Ob{constructor(){super("facebook.com")}static credential(e){return dp._fromParams({providerId:Mh.PROVIDER_ID,signInMethod:Mh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mh.credentialFromTaggedObject(e)}static credentialFromError(e){return Mh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mh.credential(e.oauthAccessToken)}catch{return null}}}Mh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Ob{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return dp._fromParams({providerId:Lh.PROVIDER_ID,signInMethod:Lh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Lh.credentialFromTaggedObject(e)}static credentialFromError(e){return Lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Lh.credential(r,n)}catch{return null}}}Lh.GOOGLE_SIGN_IN_METHOD="google.com";Lh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends Ob{constructor(){super("github.com")}static credential(e){return dp._fromParams({providerId:Uh.PROVIDER_ID,signInMethod:Uh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uh.credentialFromTaggedObject(e)}static credentialFromError(e){return Uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uh.credential(e.oauthAccessToken)}catch{return null}}}Uh.GITHUB_SIGN_IN_METHOD="github.com";Uh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Ob{constructor(){super("twitter.com")}static credential(e,r){return dp._fromParams({providerId:Qh.PROVIDER_ID,signInMethod:Qh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Qh.credentialFromTaggedObject(e)}static credentialFromError(e){return Qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Qh.credential(r,n)}catch{return null}}}Qh.TWITTER_SIGN_IN_METHOD="twitter.com";Qh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0e(t,e){return Fb(t,"POST","/v1/accounts:signUp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await ZA._fromIdTokenResponse(e,n,a),i=RL(n);return new Ap({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=RL(n);return new Ap({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function RL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Rf{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,dE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new dE(e,r,n,a)}}function CX(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dE._fromErrorAndOperation(t,s,e,n):s})}async function z0e(t,e,r=!1){const n=await N2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ap._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0e(t,e,r=!1){const{auth:n}=t;if(tA(n.app))return Promise.reject(lf(n));const a="reauthenticate";try{const s=await N2(t,CX(n,a,e,t),r);en(s.idToken,n,"internal-error");const i=xO(s.idToken);en(i,n,"internal-error");const{sub:l}=i;return en(t.uid===l,n,"user-mismatch"),Ap._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_d(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EX(t,e,r=!1){if(tA(t.app))return Promise.reject(lf(t));const n="signIn",a=await CX(t,n,e),s=await Ap._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function X0e(t,e){return EX(Lp(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SX(t){const e=Lp(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Y0e(t,e,r){if(tA(t.app))return Promise.reject(lf(t));const n=Lp(t),i=await OP(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q0e).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&SX(t),c}),l=await Ap._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(l.user),l}function J0e(t,e,r){return tA(t.app)?Promise.reject(lf(t)):X0e(Is(t),yv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&SX(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0e(t,e){return Is(t).setPersistence(e)}function eme(t,e,r,n){return Is(t).onIdTokenChanged(e,r,n)}function tme(t,e,r){return Is(t).beforeAuthStateChanged(e,r)}function IX(t,e,r,n){return Is(t).onAuthStateChanged(e,r,n)}function bI(t){return Is(t).signOut()}const AE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(AE,"1"),this.storage.removeItem(AE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rme=1e3,nme=10;class TX extends BX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);w0e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nme):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},rme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}TX.type="LOCAL";const PX=TX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX extends BX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}jX.type="SESSION";const kX=jX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ame(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new wI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await ame(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=wO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(A){const h=A;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return window}function ime(t){dA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(){return typeof dA().WorkerGlobalScope<"u"&&typeof dA().importScripts=="function"}async function ome(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lme(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cme(){return FX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX="firebaseLocalStorageDb",ume=1,fE="firebaseLocalStorage",DX="fbase_key";class Db{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function NI(t,e){return t.transaction([fE],e?"readwrite":"readonly").objectStore(fE)}function dme(){const t=indexedDB.deleteDatabase(OX);return new Db(t).toPromise()}function DP(){const t=indexedDB.open(OX,ume);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(fE,{keyPath:DX})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(fE)?e(n):(n.close(),await dme(),e(await DP()))})})}async function ML(t,e,r){const n=NI(t,!0).put({[DX]:e,value:r});return new Db(n).toPromise()}async function Ame(t,e){const r=NI(t,!1).get(e),n=await new Db(r).toPromise();return n===void 0?null:n.value}function LL(t,e){const r=NI(t,!0).delete(e);return new Db(r).toPromise()}const fme=800,hme=3;class RX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await DP(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>hme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wI._getInstance(cme()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await ome(),!this.activeServiceWorker)return;this.sender=new sme(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await DP();return await ML(e,AE,"1"),await LL(e,AE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>ML(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Ame(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>LL(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=NI(a,!1).getAll();return new Db(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RX.type="LOCAL";const mme=RX;new kb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pme(t,e){return e?ef(e):(en(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO extends yO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sx(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Sx(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Sx(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function gme(t){return EX(t.auth,new NO(t),t.bypassAuthState)}function xme(t){const{auth:e,user:r}=t;return en(r,e,"internal-error"),W0e(r,new NO(t),t.bypassAuthState)}async function vme(t){const{auth:e,user:r}=t;return en(r,e,"internal-error"),z0e(r,new NO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MX{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gme;case"linkViaPopup":case"linkViaRedirect":return vme;case"reauthViaPopup":case"reauthViaRedirect":return xme;default:_d(this.auth,"internal-error")}}resolve(e){Nf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme=new kb(2e3,1e4);class ux extends MX{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,ux.currentPopupAction&&ux.currentPopupAction.cancel(),ux.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return en(e,this.auth,"internal-error"),e}async onExecution(){Nf(this.filter.length===1,"Popup operations only handle one event");const e=wO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(uA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(uA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ux.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(uA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yme.get())};e()}}ux.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bme="pendingRedirect",uC=new Map;class wme extends MX{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=uC.get(this.auth._key());if(!e){try{const n=await Nme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}uC.set(this.auth._key(),e)}return this.bypassAuthState||uC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nme(t,e){const r=Eme(e),n=Cme(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function _me(t,e){uC.set(t._key(),e)}function Cme(t){return ef(t._redirectPersistence)}function Eme(t){return cC(bme,t.config.apiKey,t.name)}async function Sme(t,e,r=!1){if(tA(t.app))return Promise.reject(lf(t));const n=Lp(t),a=pme(n,e),i=await new wme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=10*60*1e3;class Bme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tme(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!LX(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(uA(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ime&&this.cachedEventUids.clear(),this.cachedEventUids.has(UL(e))}saveEventToCache(e){this.cachedEventUids.add(UL(e)),this.lastProcessedEventTime=Date.now()}}function UL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LX({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Tme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LX(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pme(t,e={}){return V0(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kme=/^https?/;async function Fme(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Pme(t);for(const r of e)try{if(Ome(r))return}catch{}_d(t,"unauthorized-domain")}function Ome(t){const e=kP(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!kme.test(r))return!1;if(jme.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dme=new kb(3e4,6e4);function QL(){const t=dA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Rme(t){return new Promise((e,r)=>{var n,a,s;function i(){QL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QL(),r(uA(t,"network-request-failed"))},timeout:Dme.get()})}if(!((a=(n=dA().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=dA().gapi)===null||s===void 0)&&s.load)i();else{const l=P0e("iframefcb");return dA()[l]=()=>{gapi.load?i():r(uA(t,"network-request-failed"))},wX(`${T0e()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw dC=null,e})}let dC=null;function Mme(t){return dC=dC||Rme(t),dC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme=new kb(5e3,15e3),Ume="__/auth/iframe",Qme="emulator/auth/iframe",Vme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $me(t){const e=t.config;en(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?gO(e,Qme):`https://${t.config.authDomain}/${Ume}`,n={apiKey:e.apiKey,appName:t.name,v:vv},a=Hme.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${jb(n).slice(1)}`}async function Kme(t){const e=await Mme(t),r=dA().gapi;return en(r,t,"internal-error"),e.open({where:document.body,url:$me(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vme,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=uA(t,"network-request-failed"),l=dA().setTimeout(()=>{s(i)},Lme.get());function c(){dA().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qme=500,zme=600,Wme="_blank",Xme="http://localhost";class VL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yme(t,e,r,n=qme,a=zme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Gme),{width:n.toString(),height:a.toString(),top:s,left:i}),u=Mi().toLowerCase();r&&(l=mX(u)?Wme:r),fX(u)&&(e=e||Xme,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(b0e(u)&&l!=="_self")return Jme(e||"",l),new VL(null);const A=window.open(e||"",l,d);en(A,t,"popup-blocked");try{A.focus()}catch{}return new VL(A)}function Jme(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme="__/auth/handler",epe="emulator/auth/handler",tpe=encodeURIComponent("fac");async function HL(t,e,r,n,a,s){en(t.config.authDomain,t,"auth-domain-config-required"),en(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:vv,eventId:a};if(e instanceof _X){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",Kfe(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,A]of Object.entries({}))i[d]=A}if(e instanceof Ob){const d=e.getScopes().filter(A=>A!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${tpe}=${encodeURIComponent(c)}`:"";return`${rpe(t)}?${jb(l).slice(1)}${u}`}function rpe({config:t}){return t.emulator?gO(t,epe):`https://${t.authDomain}/${Zme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="webStorageSupport";class npe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kX,this._completeRedirectFn=Sme,this._overrideRedirectResult=_me}async _openPopup(e,r,n,a){var s;Nf((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await HL(e,r,n,kP(),a);return Yme(e,i,wO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await HL(e,r,n,kP(),a);return ime(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Nf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Kme(e),n=new Bme(e);return r.register("authEvent",a=>(en(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(E5,{type:E5},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[E5];i!==void 0&&r(!!i),_d(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Fme(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return yX()||hX()||vO()}}const ape=npe;var $L="@firebase/auth",KL="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ipe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ope(t){$x(new up("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;en(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bX(t)},u=new S0e(n,a,s,c);return D0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),$x(new up("auth-internal",e=>{const r=Lp(e.getProvider("auth").getImmediate());return(n=>new spe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),A0($L,KL,ipe(t)),A0($L,KL,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe=5*60,cpe=YW("authIdTokenMaxAge")||lpe;let GL=null;const upe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>cpe)return;const a=r==null?void 0:r.token;GL!==a&&(GL=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function UX(t=hO()){const e=AO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=O0e(t,{popupRedirectResolver:ape,persistence:[mme,PX,kX]}),n=YW("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=upe(s.toString());tme(r,i,()=>i(r.currentUser)),eme(r,l=>i(l))}}const a=WW("auth");return a&&R0e(r,`http://${a}`),r}function dpe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}I0e({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=uA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",dpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ope("Browser");var Ape="firebase",fpe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */A0(Ape,fpe,"app");var qL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hm,QX;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function S(){}S.prototype=E.prototype,C.D=E.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(O,B,P){for(var D=Array(arguments.length-2),X=2;X<arguments.length;X++)D[X-2]=arguments[X];return E.prototype[B].apply(O,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,E,S){S||(S=0);var O=Array(16);if(typeof E=="string")for(var B=0;16>B;++B)O[B]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(B=0;16>B;++B)O[B]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=C.g[0],S=C.g[1],B=C.g[2];var P=C.g[3],D=E+(P^S&(B^P))+O[0]+3614090360&4294967295;E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[1]+3905402710&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[2]+606105819&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[3]+3250441966&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[4]+4118548399&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[5]+1200080426&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[6]+2821735955&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[7]+4249261313&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[8]+1770035416&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[9]+2336552879&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[10]+4294925233&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[11]+2304563134&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(P^S&(B^P))+O[12]+1804603682&4294967295,E=S+(D<<7&4294967295|D>>>25),D=P+(B^E&(S^B))+O[13]+4254626195&4294967295,P=E+(D<<12&4294967295|D>>>20),D=B+(S^P&(E^S))+O[14]+2792965006&4294967295,B=P+(D<<17&4294967295|D>>>15),D=S+(E^B&(P^E))+O[15]+1236535329&4294967295,S=B+(D<<22&4294967295|D>>>10),D=E+(B^P&(S^B))+O[1]+4129170786&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[6]+3225465664&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[11]+643717713&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[0]+3921069994&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[5]+3593408605&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[10]+38016083&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[15]+3634488961&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[4]+3889429448&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[9]+568446438&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[14]+3275163606&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[3]+4107603335&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[8]+1163531501&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(B^P&(S^B))+O[13]+2850285829&4294967295,E=S+(D<<5&4294967295|D>>>27),D=P+(S^B&(E^S))+O[2]+4243563512&4294967295,P=E+(D<<9&4294967295|D>>>23),D=B+(E^S&(P^E))+O[7]+1735328473&4294967295,B=P+(D<<14&4294967295|D>>>18),D=S+(P^E&(B^P))+O[12]+2368359562&4294967295,S=B+(D<<20&4294967295|D>>>12),D=E+(S^B^P)+O[5]+4294588738&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[8]+2272392833&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[11]+1839030562&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[14]+4259657740&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[1]+2763975236&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[4]+1272893353&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[7]+4139469664&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[10]+3200236656&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[13]+681279174&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[0]+3936430074&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[3]+3572445317&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[6]+76029189&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(S^B^P)+O[9]+3654602809&4294967295,E=S+(D<<4&4294967295|D>>>28),D=P+(E^S^B)+O[12]+3873151461&4294967295,P=E+(D<<11&4294967295|D>>>21),D=B+(P^E^S)+O[15]+530742520&4294967295,B=P+(D<<16&4294967295|D>>>16),D=S+(B^P^E)+O[2]+3299628645&4294967295,S=B+(D<<23&4294967295|D>>>9),D=E+(B^(S|~P))+O[0]+4096336452&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[7]+1126891415&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[14]+2878612391&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[5]+4237533241&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[12]+1700485571&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[3]+2399980690&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[10]+4293915773&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[1]+2240044497&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[8]+1873313359&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[15]+4264355552&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[6]+2734768916&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[13]+1309151649&4294967295,S=B+(D<<21&4294967295|D>>>11),D=E+(B^(S|~P))+O[4]+4149444226&4294967295,E=S+(D<<6&4294967295|D>>>26),D=P+(S^(E|~B))+O[11]+3174756917&4294967295,P=E+(D<<10&4294967295|D>>>22),D=B+(E^(P|~S))+O[2]+718787259&4294967295,B=P+(D<<15&4294967295|D>>>17),D=S+(P^(B|~E))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+B&4294967295,C.g[3]=C.g[3]+P&4294967295}n.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var S=E-this.blockSize,O=this.B,B=this.h,P=0;P<E;){if(B==0)for(;P<=S;)a(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<E;)if(O[B++]=C.charCodeAt(P++),B==this.blockSize){a(this,O),B=0;break}}else for(;P<E;)if(O[B++]=C[P++],B==this.blockSize){a(this,O),B=0;break}}this.h=B,this.o+=E},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var S=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=S&255,S/=256;for(this.u(C),C=Array(16),E=S=0;4>E;++E)for(var O=0;32>O;O+=8)C[S++]=this.g[E]>>>O&255;return C};function s(C,E){var S=l;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=E(C)}function i(C,E){this.h=E;for(var S=[],O=!0,B=C.length-1;0<=B;B--){var P=C[B]|0;O&&P==E||(S[B]=P,O=!1)}this.g=S}var l={};function c(C){return-128<=C&&128>C?s(C,function(E){return new i([E|0],0>E?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return g(u(-C));for(var E=[],S=1,O=0;C>=S;O++)E[O]=C/S|0,S*=4294967296;return new i(E,0)}function d(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return g(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),O=A,B=0;B<C.length;B+=8){var P=Math.min(8,C.length-B),D=parseInt(C.substring(B,B+P),E);8>P?(P=u(Math.pow(E,P)),O=O.j(P).add(u(D))):(O=O.j(S),O=O.add(u(D)))}return O}var A=c(0),h=c(1),f=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var C=0,E=1,S=0;S<this.g.length;S++){var O=this.i(S);C+=(0<=O?O:4294967296+O)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(p(this))return"-"+g(this).toString(C);for(var E=u(Math.pow(C,6)),S=this,O="";;){var B=w(S,E).g;S=x(S,B.j(E));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=B,m(S))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function p(C){return C.h==-1}t.l=function(C){return C=x(this,C),p(C)?-1:m(C)?0:1};function g(C){for(var E=C.g.length,S=[],O=0;O<E;O++)S[O]=~C.g[O];return new i(S,~C.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0,B=0;B<=E;B++){var P=O+(this.i(B)&65535)+(C.i(B)&65535),D=(P>>>16)+(this.i(B)>>>16)+(C.i(B)>>>16);O=D>>>16,P&=65535,D&=65535,S[B]=D<<16|P}return new i(S,S[S.length-1]&-2147483648?-1:0)};function x(C,E){return C.add(g(E))}t.j=function(C){if(m(this)||m(C))return A;if(p(this))return p(C)?g(this).j(g(C)):g(g(this).j(C));if(p(C))return g(this.j(g(C)));if(0>this.l(f)&&0>C.l(f))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,S=[],O=0;O<2*E;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(var B=0;B<C.g.length;B++){var P=this.i(O)>>>16,D=this.i(O)&65535,X=C.i(B)>>>16,de=C.i(B)&65535;S[2*O+2*B]+=D*de,y(S,2*O+2*B),S[2*O+2*B+1]+=P*de,y(S,2*O+2*B+1),S[2*O+2*B+1]+=D*X,y(S,2*O+2*B+1),S[2*O+2*B+2]+=P*X,y(S,2*O+2*B+2)}for(O=0;O<E;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=E;O<2*E;O++)S[O]=0;return new i(S,0)};function y(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function b(C,E){this.g=C,this.h=E}function w(C,E){if(m(E))throw Error("division by zero");if(m(C))return new b(A,A);if(p(C))return E=w(g(C),E),new b(g(E.g),g(E.h));if(p(E))return E=w(C,g(E)),new b(g(E.g),E.h);if(30<C.g.length){if(p(C)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var S=h,O=E;0>=O.l(C);)S=I(S),O=I(O);var B=T(S,1),P=T(O,1);for(O=T(O,2),S=T(S,2);!m(O);){var D=P.add(O);0>=D.l(C)&&(B=B.add(S),P=D),O=T(O,1),S=T(S,1)}return E=x(C,B.j(E)),new b(B,E)}for(B=A;0<=C.l(E);){for(S=Math.max(1,Math.floor(C.m()/E.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=u(S),D=P.j(E);p(D)||0<D.l(C);)S-=O,P=u(S),D=P.j(E);m(P)&&(P=h),B=B.add(P),C=x(C,D)}return new b(B,C)}t.A=function(C){return w(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)&C.i(O);return new i(S,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)|C.i(O);return new i(S,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)^C.i(O);return new i(S,this.h^C.h)};function I(C){for(var E=C.g.length+1,S=[],O=0;O<E;O++)S[O]=C.i(O)<<1|C.i(O-1)>>>31;return new i(S,C.h)}function T(C,E){var S=E>>5;E%=32;for(var O=C.g.length-S,B=[],P=0;P<O;P++)B[P]=0<E?C.i(P+S)>>>E|C.i(P+S+1)<<32-E:C.i(P+S);return new i(B,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,QX=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Hm=i}).apply(typeof qL<"u"?qL:typeof self<"u"?self:typeof window<"u"?window:{});var fN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VX,ty,HX,AC,RP,$X,KX,GX;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,q,se){return _==Array.prototype||_==Object.prototype||(_[q]=se.value),_};function r(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof fN=="object"&&fN];for(var q=0;q<_.length;++q){var se=_[q];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(_,q){if(q)e:{var se=n;_=_.split(".");for(var De=0;De<_.length-1;De++){var vt=_[De];if(!(vt in se))break e;se=se[vt]}_=_[_.length-1],De=se[_],q=q(De),q!=De&&q!=null&&e(se,_,{configurable:!0,writable:!0,value:q})}}function s(_,q){_ instanceof String&&(_+="");var se=0,De=!1,vt={next:function(){if(!De&&se<_.length){var kt=se++;return{value:q(kt,_[kt]),done:!1}}return De=!0,{done:!0,value:void 0}}};return vt[Symbol.iterator]=function(){return vt},vt}a("Array.prototype.values",function(_){return _||function(){return s(this,function(q,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(_){var q=typeof _;return q=q!="object"?q:_?Array.isArray(_)?"array":q:"null",q=="array"||q=="object"&&typeof _.length=="number"}function u(_){var q=typeof _;return q=="object"&&_!=null||q=="function"}function d(_,q,se){return _.call.apply(_.bind,arguments)}function A(_,q,se){if(!_)throw Error();if(2<arguments.length){var De=Array.prototype.slice.call(arguments,2);return function(){var vt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(vt,De),_.apply(q,vt)}}return function(){return _.apply(q,arguments)}}function h(_,q,se){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:A,h.apply(null,arguments)}function f(_,q){var se=Array.prototype.slice.call(arguments,1);return function(){var De=se.slice();return De.push.apply(De,arguments),_.apply(this,De)}}function m(_,q){function se(){}se.prototype=q.prototype,_.aa=q.prototype,_.prototype=new se,_.prototype.constructor=_,_.Qb=function(De,vt,kt){for(var ur=Array(arguments.length-2),On=2;On<arguments.length;On++)ur[On-2]=arguments[On];return q.prototype[vt].apply(De,ur)}}function p(_){const q=_.length;if(0<q){const se=Array(q);for(let De=0;De<q;De++)se[De]=_[De];return se}return[]}function g(_,q){for(let se=1;se<arguments.length;se++){const De=arguments[se];if(c(De)){const vt=_.length||0,kt=De.length||0;_.length=vt+kt;for(let ur=0;ur<kt;ur++)_[vt+ur]=De[ur]}else _.push(De)}}class x{constructor(q,se){this.i=q,this.j=se,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function y(_){return/^[\s\xa0]*$/.test(_)}function b(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function w(_){return w[" "](_),_}w[" "]=function(){};var I=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(_,q,se){for(const De in _)q.call(se,_[De],De,_)}function C(_,q){for(const se in _)q.call(void 0,_[se],se,_)}function E(_){const q={};for(const se in _)q[se]=_[se];return q}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(_,q){let se,De;for(let vt=1;vt<arguments.length;vt++){De=arguments[vt];for(se in De)_[se]=De[se];for(let kt=0;kt<S.length;kt++)se=S[kt],Object.prototype.hasOwnProperty.call(De,se)&&(_[se]=De[se])}}function B(_){var q=1;_=_.split(":");const se=[];for(;0<q&&_.length;)se.push(_.shift()),q--;return _.length&&se.push(_.join(":")),se}function P(_){l.setTimeout(()=>{throw _},0)}function D(){var _=J;let q=null;return _.g&&(q=_.g,_.g=_.g.next,_.g||(_.h=null),q.next=null),q}class X{constructor(){this.h=this.g=null}add(q,se){const De=de.get();De.set(q,se),this.h?this.h.next=De:this.g=De,this.h=De}}var de=new x(()=>new re,_=>_.reset());class re{constructor(){this.next=this.g=this.h=null}set(q,se){this.h=q,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ce=!1,J=new X,pe=()=>{const _=l.Promise.resolve(void 0);ie=()=>{_.then(Se)}};var Se=()=>{for(var _;_=D();){try{_.h.call(_.g)}catch(se){P(se)}var q=de;q.j(_),100>q.h&&(q.h++,_.next=q.g,q.g=_)}ce=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(_,q){this.type=_,this.g=this.target=q,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,q=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const se=()=>{};l.addEventListener("test",se,q),l.removeEventListener("test",se,q)}catch{}return _}();function M(_,q){if(F.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var se=this.type=_.type,De=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=q,q=_.relatedTarget){if(I){e:{try{w(q.nodeName);var vt=!0;break e}catch{}vt=!1}vt||(q=null)}}else se=="mouseover"?q=_.fromElement:se=="mouseout"&&(q=_.toElement);this.relatedTarget=q,De?(this.clientX=De.clientX!==void 0?De.clientX:De.pageX,this.clientY=De.clientY!==void 0?De.clientY:De.pageY,this.screenX=De.screenX||0,this.screenY=De.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:L[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&M.aa.h.call(this)}}m(M,F);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),R=0;function G(_,q,se,De,vt){this.listener=_,this.proxy=null,this.src=q,this.type=se,this.capture=!!De,this.ha=vt,this.key=++R,this.da=this.fa=!1}function ee(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,q,se,De,vt){var kt=_.toString();_=this.g[kt],_||(_=this.g[kt]=[],this.h++);var ur=xe(_,q,De,vt);return-1<ur?(q=_[ur],se||(q.fa=!1)):(q=new G(q,this.src,kt,!!De,vt),q.fa=se,_.push(q)),q};function Q(_,q){var se=q.type;if(se in _.g){var De=_.g[se],vt=Array.prototype.indexOf.call(De,q,void 0),kt;(kt=0<=vt)&&Array.prototype.splice.call(De,vt,1),kt&&(ee(q),_.g[se].length==0&&(delete _.g[se],_.h--))}}function xe(_,q,se,De){for(var vt=0;vt<_.length;++vt){var kt=_[vt];if(!kt.da&&kt.listener==q&&kt.capture==!!se&&kt.ha==De)return vt}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),W={};function le(_,q,se,De,vt){if(Array.isArray(q)){for(var kt=0;kt<q.length;kt++)le(_,q[kt],se,De,vt);return null}return se=Ot(se),_&&_[z]?_.K(q,se,u(De)?!!De.capture:!1,vt):Pe(_,q,se,!1,De,vt)}function Pe(_,q,se,De,vt,kt){if(!q)throw Error("Invalid event type");var ur=u(vt)?!!vt.capture:!!vt,On=yt(_);if(On||(_[Y]=On=new te(_)),se=On.add(q,se,De,ur,kt),se.proxy)return se;if(De=Le(),se.proxy=De,De.src=_,De.listener=se,_.addEventListener)H||(vt=ur),vt===void 0&&(vt=!1),_.addEventListener(q.toString(),De,vt);else if(_.attachEvent)_.attachEvent(st(q.toString()),De);else if(_.addListener&&_.removeListener)_.addListener(De);else throw Error("addEventListener and attachEvent are unavailable.");return se}function Le(){function _(se){return q.call(_.src,_.listener,se)}const q=Et;return _}function qe(_,q,se,De,vt){if(Array.isArray(q))for(var kt=0;kt<q.length;kt++)qe(_,q[kt],se,De,vt);else De=u(De)?!!De.capture:!!De,se=Ot(se),_&&_[z]?(_=_.i,q=String(q).toString(),q in _.g&&(kt=_.g[q],se=xe(kt,se,De,vt),-1<se&&(ee(kt[se]),Array.prototype.splice.call(kt,se,1),kt.length==0&&(delete _.g[q],_.h--)))):_&&(_=yt(_))&&(q=_.g[q.toString()],_=-1,q&&(_=xe(q,se,De,vt)),(se=-1<_?q[_]:null)&&nt(se))}function nt(_){if(typeof _!="number"&&_&&!_.da){var q=_.src;if(q&&q[z])Q(q.i,_);else{var se=_.type,De=_.proxy;q.removeEventListener?q.removeEventListener(se,De,_.capture):q.detachEvent?q.detachEvent(st(se),De):q.addListener&&q.removeListener&&q.removeListener(De),(se=yt(q))?(Q(se,_),se.h==0&&(se.src=null,q[Y]=null)):ee(_)}}}function st(_){return _ in W?W[_]:W[_]="on"+_}function Et(_,q){if(_.da)_=!0;else{q=new M(q,this);var se=_.listener,De=_.ha||_.src;_.fa&&nt(_),_=se.call(De,q)}return _}function yt(_){return _=_[Y],_ instanceof te?_:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(_){return typeof _=="function"?_:(_[Ct]||(_[Ct]=function(q){return _.handleEvent(q)}),_[Ct])}function Pt(){k.call(this),this.i=new te(this),this.M=this,this.F=null}m(Pt,k),Pt.prototype[z]=!0,Pt.prototype.removeEventListener=function(_,q,se,De){qe(this,_,q,se,De)};function fe(_,q){var se,De=_.F;if(De)for(se=[];De;De=De.F)se.push(De);if(_=_.M,De=q.type||q,typeof q=="string")q=new F(q,_);else if(q instanceof F)q.target=q.target||_;else{var vt=q;q=new F(De,_),O(q,vt)}if(vt=!0,se)for(var kt=se.length-1;0<=kt;kt--){var ur=q.g=se[kt];vt=Ke(ur,De,!0,q)&&vt}if(ur=q.g=_,vt=Ke(ur,De,!0,q)&&vt,vt=Ke(ur,De,!1,q)&&vt,se)for(kt=0;kt<se.length;kt++)ur=q.g=se[kt],vt=Ke(ur,De,!1,q)&&vt}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var _=this.i,q;for(q in _.g){for(var se=_.g[q],De=0;De<se.length;De++)ee(se[De]);delete _.g[q],_.h--}}this.F=null},Pt.prototype.K=function(_,q,se,De){return this.i.add(String(_),q,!1,se,De)},Pt.prototype.L=function(_,q,se,De){return this.i.add(String(_),q,!0,se,De)};function Ke(_,q,se,De){if(q=_.i.g[String(q)],!q)return!0;q=q.concat();for(var vt=!0,kt=0;kt<q.length;++kt){var ur=q[kt];if(ur&&!ur.da&&ur.capture==se){var On=ur.listener,xs=ur.ha||ur.src;ur.fa&&Q(_.i,ur),vt=On.call(xs,De)!==!1&&vt}}return vt&&!De.defaultPrevented}function ve(_,q,se){if(typeof _=="function")se&&(_=h(_,se));else if(_&&typeof _.handleEvent=="function")_=h(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:l.setTimeout(_,q||0)}function he(_){_.g=ve(()=>{_.g=null,_.i&&(_.i=!1,he(_))},_.l);const q=_.h;_.h=null,_.m.apply(null,q)}class oe extends k{constructor(q,se){super(),this.m=q,this.l=se,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(_){k.call(this),this.h=_,this.g={}}m(je,k);var Qe=[];function tt(_){T(_.g,function(q,se){this.g.hasOwnProperty(se)&&nt(q)},_),_.g={}}je.prototype.N=function(){je.aa.N.call(this),tt(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=l.JSON.stringify,Te=l.JSON.parse,Ee=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function V(){}V.prototype.h=null;function Ae(_){return _.h||(_.h=_.i())}function Ne(){}var Re={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){F.call(this,"d")}m(ze,F);function Ye(){F.call(this,"c")}m(Ye,F);var Ze={},dt=null;function ge(){return dt=dt||new Pt}Ze.La="serverreachability";function Xe(_){F.call(this,Ze.La,_)}m(Xe,F);function ot(_){const q=ge();fe(q,new Xe(q))}Ze.STAT_EVENT="statevent";function be(_,q){F.call(this,Ze.STAT_EVENT,_),this.stat=q}m(be,F);function Ge(_){const q=ge();fe(q,new be(q,_))}Ze.Ma="timingevent";function ut(_,q){F.call(this,Ze.Ma,_),this.size=q}m(ut,F);function bt(_,q){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},q)}function Rt(){this.g=!0}Rt.prototype.xa=function(){this.g=!1};function Wt(_,q,se,De,vt,kt){_.info(function(){if(_.g)if(kt)for(var ur="",On=kt.split("&"),xs=0;xs<On.length;xs++){var Nn=On[xs].split("=");if(1<Nn.length){var zn=Nn[0];Nn=Nn[1];var Oa=zn.split("_");ur=2<=Oa.length&&Oa[1]=="type"?ur+(zn+"="+Nn+"&"):ur+(zn+"=redacted&")}}else ur=null;else ur=kt;return"XMLHTTP REQ ("+De+") [attempt "+vt+"]: "+q+`
`+se+`
`+ur})}function mt(_,q,se,De,vt,kt,ur){_.info(function(){return"XMLHTTP RESP ("+De+") [ attempt "+vt+"]: "+q+`
`+se+`
`+kt+" "+ur})}function ne(_,q,se,De){_.info(function(){return"XMLHTTP TEXT ("+q+"): "+me(_,se)+(De?" "+De:"")})}function ae(_,q){_.info(function(){return"TIMEOUT: "+q})}Rt.prototype.info=function(){};function me(_,q){if(!_.g)return q;if(!q)return null;try{var se=JSON.parse(q);if(se){for(_=0;_<se.length;_++)if(Array.isArray(se[_])){var De=se[_];if(!(2>De.length)){var vt=De[1];if(Array.isArray(vt)&&!(1>vt.length)){var kt=vt[0];if(kt!="noop"&&kt!="stop"&&kt!="close")for(var ur=1;ur<vt.length;ur++)vt[ur]=""}}}}return rt(se)}catch{return q}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oe;function We(){}m(We,V),We.prototype.g=function(){return new XMLHttpRequest},We.prototype.i=function(){return{}},Oe=new We;function it(_,q,se,De){this.j=_,this.i=q,this.l=se,this.R=De||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var xt={},_t={};function Ce(_,q,se){_.L=1,_.v=Ho(tr(q)),_.m=se,_.P=!0,at(_,null)}function at(_,q){_.F=Date.now(),Je(_),_.A=tr(_.v);var se=_.A,De=_.R;Array.isArray(De)||(De=[String(De)]),sg(se.i,"t",De),_.C=0,se=_.j.J,_.h=new gt,_.g=Ps(_.j,se?q:null,!_.m),0<_.O&&(_.M=new oe(h(_.Y,_,_.g),_.O)),q=_.U,se=_.g,De=_.ca;var vt="readystatechange";Array.isArray(vt)||(vt&&(Qe[0]=vt.toString()),vt=Qe);for(var kt=0;kt<vt.length;kt++){var ur=le(se,vt[kt],De||q.handleEvent,!1,q.h||q);if(!ur)break;q.g[ur.key]=ur}q=_.H?E(_.H):{},_.m?(_.u||(_.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,q)):(_.u="GET",_.g.ea(_.A,_.u,null,q)),ot(),Wt(_.i,_.u,_.A,_.l,_.R,_.m)}it.prototype.ca=function(_){_=_.target;const q=this.M;q&&xl(_)==3?q.j():this.Y(_)},it.prototype.Y=function(_){try{if(_==this.g)e:{const Oa=xl(this.g);var q=this.g.Ba();const gc=this.g.Z();if(!(3>Oa)&&(Oa!=3||this.g&&(this.h.h||this.g.oa()||tm(this.g)))){this.J||Oa!=4||q==7||(q==8||0>=gc?ot(3):ot(2)),Zt(this);var se=this.g.Z();this.X=se;t:if(wt(this)){var De=tm(this.g);_="";var vt=De.length,kt=xl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Ft(this);var ur="";break t}this.h.i=new l.TextDecoder}for(q=0;q<vt;q++)this.h.h=!0,_+=this.h.i.decode(De[q],{stream:!(kt&&q==vt-1)});De.length=0,this.h.g+=_,this.C=0,ur=this.h.g}else ur=this.g.oa();if(this.o=se==200,mt(this.i,this.u,this.A,this.l,this.R,Oa,se),this.o){if(this.T&&!this.K){t:{if(this.g){var On,xs=this.g;if((On=xs.g?xs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(On)){var Nn=On;break t}}Nn=null}if(se=Nn)ne(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nr(this,se);else{this.o=!1,this.s=3,Ge(12),Vt(this),Ft(this);break e}}if(this.P){se=!0;let $o;for(;!this.J&&this.C<ur.length;)if($o=ht(this,ur),$o==_t){Oa==4&&(this.s=4,Ge(14),se=!1),ne(this.i,this.l,null,"[Incomplete Response]");break}else if($o==xt){this.s=4,Ge(15),ne(this.i,this.l,ur,"[Invalid Chunk]"),se=!1;break}else ne(this.i,this.l,$o,null),nr(this,$o);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oa!=4||ur.length!=0||this.h.h||(this.s=1,Ge(16),se=!1),this.o=this.o&&se,!se)ne(this.i,this.l,ur,"[Invalid Chunked Response]"),Vt(this),Ft(this);else if(0<ur.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+ur.length),Ir(zn),zn.M=!0,Ge(11))}}else ne(this.i,this.l,ur,null),nr(this,ur);Oa==4&&Vt(this),this.o&&!this.J&&(Oa==4?sn(this.j,this):(this.o=!1,Je(this)))}else og(this.g),se==400&&0<ur.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Vt(this),Ft(this)}}}catch{}finally{}};function wt(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function ht(_,q){var se=_.C,De=q.indexOf(`
`,se);return De==-1?_t:(se=Number(q.substring(se,De)),isNaN(se)?xt:(De+=1,De+se>q.length?_t:(q=q.slice(De,De+se),_.C=De+se,q)))}it.prototype.cancel=function(){this.J=!0,Vt(this)};function Je(_){_.S=Date.now()+_.I,zt(_,_.I)}function zt(_,q){if(_.B!=null)throw Error("WatchDog timer not null");_.B=bt(h(_.ba,_),q)}function Zt(_){_.B&&(l.clearTimeout(_.B),_.B=null)}it.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(ae(this.i,this.A),this.L!=2&&(ot(),Ge(17)),Vt(this),this.s=2,Ft(this)):zt(this,this.S-_)};function Ft(_){_.j.G==0||_.J||sn(_.j,_)}function Vt(_){Zt(_);var q=_.M;q&&typeof q.ma=="function"&&q.ma(),_.M=null,tt(_.U),_.g&&(q=_.g,_.g=null,q.abort(),q.ma())}function nr(_,q){try{var se=_.j;if(se.G!=0&&(se.g==_||vn(se.h,_))){if(!_.K&&vn(se.h,_)&&se.G==3){try{var De=se.Da.g.parse(q)}catch{De=null}if(Array.isArray(De)&&De.length==3){var vt=De;if(vt[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<_.F)Xr(se),ru(se);else break e;Xt(se),Ge(18)}}else se.za=vt[1],0<se.za-se.T&&37500>vt[2]&&se.F&&se.v==0&&!se.C&&(se.C=bt(h(se.Za,se),6e3));if(1>=Fn(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else ea(se,11)}else if((_.K||se.g==_)&&Xr(se),!y(q))for(vt=se.Da.g.parse(q),q=0;q<vt.length;q++){let Nn=vt[q];if(se.T=Nn[0],Nn=Nn[1],se.G==2)if(Nn[0]=="c"){se.K=Nn[1],se.ia=Nn[2];const zn=Nn[3];zn!=null&&(se.la=zn,se.j.info("VER="+se.la));const Oa=Nn[4];Oa!=null&&(se.Aa=Oa,se.j.info("SVER="+se.Aa));const gc=Nn[5];gc!=null&&typeof gc=="number"&&0<gc&&(De=1.5*gc,se.L=De,se.j.info("backChannelRequestTimeoutMs_="+De)),De=se;const $o=_.g;if($o){const go=$o.g?$o.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var kt=De.h;kt.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(kt.j=kt.l,kt.g=new Set,kt.h&&(Na(kt,kt.h),kt.h=null))}if(De.D){const zu=$o.g?$o.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(De.ya=zu,an(De.I,De.D,zu))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-_.F,se.j.info("Handshake RTT: "+se.R+"ms")),De=se;var ur=_;if(De.qa=la(De,De.J?De.ia:null,De.W),ur.K){Ku(De.h,ur);var On=ur,xs=De.L;xs&&(On.I=xs),On.B&&(Zt(On),Je(On)),De.g=ur}else $t(De);0<se.i.length&&U(se)}else Nn[0]!="stop"&&Nn[0]!="close"||ea(se,7);else se.G==3&&(Nn[0]=="stop"||Nn[0]=="close"?Nn[0]=="stop"?ea(se,7):eh(se):Nn[0]!="noop"&&se.l&&se.l.ta(Nn),se.v=0)}}ot(4)}catch{}}var Ht=class{constructor(_,q){this.g=_,this.map=q}};function Nr(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Or(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Fn(_){return _.h?1:_.g?_.g.size:0}function vn(_,q){return _.h?_.h==q:_.g?_.g.has(q):!1}function Na(_,q){_.g?_.g.add(q):_.h=q}function Ku(_,q){_.h&&_.h==q?_.h=null:_.g&&_.g.has(q)&&_.g.delete(q)}Nr.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Rn(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let q=_.i;for(const se of _.g.values())q=q.concat(se.D);return q}return p(_.i)}function ct(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var q=[],se=_.length,De=0;De<se;De++)q.push(_[De]);return q}q=[],se=0;for(De in _)q[se++]=_[De];return q}function xr(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var q=[];_=_.length;for(var se=0;se<_;se++)q.push(se);return q}q=[],se=0;for(const De in _)q[se++]=De;return q}}}function vr(_,q){if(_.forEach&&typeof _.forEach=="function")_.forEach(q,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,q,void 0);else for(var se=xr(_),De=ct(_),vt=De.length,kt=0;kt<vt;kt++)q.call(void 0,De[kt],se&&se[kt],_)}var Ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sr(_,q){if(_){_=_.split("&");for(var se=0;se<_.length;se++){var De=_[se].indexOf("="),vt=null;if(0<=De){var kt=_[se].substring(0,De);vt=_[se].substring(De+1)}else kt=_[se];q(kt,vt?decodeURIComponent(vt.replace(/\+/g," ")):"")}}}function ir(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof ir){this.h=_.h,gr(this,_.j),this.o=_.o,this.g=_.g,Vr(this,_.s),this.l=_.l;var q=_.i,se=new po;se.i=q.i,q.g&&(se.g=new Map(q.g),se.h=q.h),gn(this,se),this.m=_.m}else _&&(q=String(_).match(Ar))?(this.h=!1,gr(this,q[1]||"",!0),this.o=si(q[2]||""),this.g=si(q[3]||"",!0),Vr(this,q[4]),this.l=si(q[5]||"",!0),gn(this,q[6]||"",!0),this.m=si(q[7]||"")):(this.h=!1,this.i=new po(null,this.h))}ir.prototype.toString=function(){var _=[],q=this.j;q&&_.push(pi(q,EA,!0),":");var se=this.g;return(se||q=="file")&&(_.push("//"),(q=this.o)&&_.push(pi(q,EA,!0),"@"),_.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&_.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&_.push("/"),_.push(pi(se,se.charAt(0)=="/"?J0:Wf,!0))),(se=this.i.toString())&&_.push("?",se),(se=this.m)&&_.push("#",pi(se,ag)),_.join("")};function tr(_){return new ir(_)}function gr(_,q,se){_.j=se?si(q,!0):q,_.j&&(_.j=_.j.replace(/:$/,""))}function Vr(_,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);_.s=q}else _.s=null}function gn(_,q,se){q instanceof po?(_.i=q,Kv(_.i,_.h)):(se||(q=pi(q,Dd)),_.i=new po(q,_.h))}function an(_,q,se){_.i.set(q,se)}function Ho(_){return an(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function si(_,q){return _?q?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function pi(_,q,se){return typeof _=="string"?(_=encodeURI(_).replace(q,Kl),se&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Kl(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var EA=/[#\/\?@]/g,Wf=/[#\?:]/g,J0=/[#\?]/g,Dd=/[#\?@]/g,ag=/#/g;function po(_,q){this.h=this.g=null,this.i=_||null,this.j=!!q}function Jc(_){_.g||(_.g=new Map,_.h=0,_.i&&sr(_.i,function(q,se){_.add(decodeURIComponent(q.replace(/\+/g," ")),se)}))}t=po.prototype,t.add=function(_,q){Jc(this),this.i=null,_=Wr(this,_);var se=this.g.get(_);return se||this.g.set(_,se=[]),se.push(q),this.h+=1,this};function Rd(_,q){Jc(_),q=Wr(_,q),_.g.has(q)&&(_.i=null,_.h-=_.g.get(q).length,_.g.delete(q))}function Xf(_,q){return Jc(_),q=Wr(_,q),_.g.has(q)}t.forEach=function(_,q){Jc(this),this.g.forEach(function(se,De){se.forEach(function(vt){_.call(q,vt,De,this)},this)},this)},t.na=function(){Jc(this);const _=Array.from(this.g.values()),q=Array.from(this.g.keys()),se=[];for(let De=0;De<q.length;De++){const vt=_[De];for(let kt=0;kt<vt.length;kt++)se.push(q[De])}return se},t.V=function(_){Jc(this);let q=[];if(typeof _=="string")Xf(this,_)&&(q=q.concat(this.g.get(Wr(this,_))));else{_=Array.from(this.g.values());for(let se=0;se<_.length;se++)q=q.concat(_[se])}return q},t.set=function(_,q){return Jc(this),this.i=null,_=Wr(this,_),Xf(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[q]),this.h+=1,this},t.get=function(_,q){return _?(_=this.V(_),0<_.length?String(_[0]):q):q};function sg(_,q,se){Rd(_,q),0<se.length&&(_.i=null,_.g.set(Wr(_,q),p(se)),_.h+=se.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],q=Array.from(this.g.keys());for(var se=0;se<q.length;se++){var De=q[se];const kt=encodeURIComponent(String(De)),ur=this.V(De);for(De=0;De<ur.length;De++){var vt=kt;ur[De]!==""&&(vt+="="+encodeURIComponent(String(ur[De]))),_.push(vt)}}return this.i=_.join("&")};function Wr(_,q){return q=String(q),_.j&&(q=q.toLowerCase()),q}function Kv(_,q){q&&!_.j&&(Jc(_),_.i=null,_.g.forEach(function(se,De){var vt=De.toLowerCase();De!=vt&&(Rd(this,De),sg(this,vt,se))},_)),_.j=q}function Gv(_,q){const se=new Rt;if(l.Image){const De=new Image;De.onload=f(Ki,se,"TestLoadImage: loaded",!0,q,De),De.onerror=f(Ki,se,"TestLoadImage: error",!1,q,De),De.onabort=f(Ki,se,"TestLoadImage: abort",!1,q,De),De.ontimeout=f(Ki,se,"TestLoadImage: timeout",!1,q,De),l.setTimeout(function(){De.ontimeout&&De.ontimeout()},1e4),De.src=_}else q(!1)}function qv(_,q){const se=new Rt,De=new AbortController,vt=setTimeout(()=>{De.abort(),Ki(se,"TestPingServer: timeout",!1,q)},1e4);fetch(_,{signal:De.signal}).then(kt=>{clearTimeout(vt),kt.ok?Ki(se,"TestPingServer: ok",!0,q):Ki(se,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(vt),Ki(se,"TestPingServer: error",!1,q)})}function Ki(_,q,se,De,vt){try{vt&&(vt.onload=null,vt.onerror=null,vt.onabort=null,vt.ontimeout=null),De(se)}catch{}}function Gu(){this.g=new Ee}function zv(_,q,se){const De=se||"";try{vr(_,function(vt,kt){let ur=vt;u(vt)&&(ur=rt(vt)),q.push(De+kt+"="+encodeURIComponent(ur))})}catch(vt){throw q.push(De+"type="+encodeURIComponent("_badmap")),vt}}function Yf(_){this.l=_.Ub||null,this.j=_.eb||!1}m(Yf,V),Yf.prototype.g=function(){return new qu(this.l,this.j)},Yf.prototype.i=function(_){return function(){return _}}({});function qu(_,q){Pt.call(this),this.D=_,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(qu,Pt),t=qu.prototype,t.open=function(_,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=q,this.readyState=1,SA(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(q.body=_),(this.D||l).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pc(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,SA(this)),this.g&&(this.readyState=3,SA(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jf(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jf(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var q=_.value?_.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!_.done}))&&(this.response=this.responseText+=q)}_.done?pc(this):SA(this),this.readyState==3&&Jf(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,pc(this))},t.Qa=function(_){this.g&&(this.response=_,pc(this))},t.ga=function(){this.g&&pc(this)};function pc(_){_.readyState=4,_.l=null,_.j=null,_.v=null,SA(_)}t.setRequestHeader=function(_,q){this.u.append(_,q)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],q=this.h.entries();for(var se=q.next();!se.done;)se=se.value,_.push(se[0]+": "+se[1]),se=q.next();return _.join(`\r
`)};function SA(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Zc(_){let q="";return T(_,function(se,De){q+=De,q+=":",q+=se,q+=`\r
`}),q}function Z0(_,q,se){e:{for(De in se){var De=!1;break e}De=!0}De||(se=Zc(se),typeof _=="string"?se!=null&&encodeURIComponent(String(se)):an(_,q,se))}function _a(_){Pt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(_a,Pt);var em=/^https?$/i,ig=["POST","PUT"];t=_a.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,q,se,De){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);q=q?q.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?Ae(this.o):Ae(Oe),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(q,String(_),!0),this.B=!1}catch(kt){eu(this,kt);return}if(_=se||"",se=new Map(this.headers),De)if(Object.getPrototypeOf(De)===Object.prototype)for(var vt in De)se.set(vt,De[vt]);else if(typeof De.keys=="function"&&typeof De.get=="function")for(const kt of De.keys())se.set(kt,De.get(kt));else throw Error("Unknown input type for opt_headers: "+String(De));De=Array.from(se.keys()).find(kt=>kt.toLowerCase()=="content-type"),vt=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ig,q,void 0))||De||vt||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[kt,ur]of se)this.g.setRequestHeader(kt,ur);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ld(this),this.u=!0,this.g.send(_),this.u=!1}catch(kt){eu(this,kt)}};function eu(_,q){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=q,_.m=5,Zf(_),Md(_)}function Zf(_){_.A||(_.A=!0,fe(_,"complete"),fe(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,fe(this,"complete"),fe(this,"abort"),Md(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Md(this,!0)),_a.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?IA(this):this.bb())},t.bb=function(){IA(this)};function IA(_){if(_.h&&typeof i<"u"&&(!_.v[1]||xl(_)!=4||_.Z()!=2)){if(_.u&&xl(_)==4)ve(_.Ea,0,_);else if(fe(_,"readystatechange"),xl(_)==4){_.h=!1;try{const ur=_.Z();e:switch(ur){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var se;if(!(se=q)){var De;if(De=ur===0){var vt=String(_.D).match(Ar)[1]||null;!vt&&l.self&&l.self.location&&(vt=l.self.location.protocol.slice(0,-1)),De=!em.test(vt?vt.toLowerCase():"")}se=De}if(se)fe(_,"complete"),fe(_,"success");else{_.m=6;try{var kt=2<xl(_)?_.g.statusText:""}catch{kt=""}_.l=kt+" ["+_.Z()+"]",Zf(_)}}finally{Md(_)}}}}function Md(_,q){if(_.g){Ld(_);const se=_.g,De=_.v[0]?()=>{}:null;_.g=null,_.v=null,q||fe(_,"ready");try{se.onreadystatechange=De}catch{}}}function Ld(_){_.I&&(l.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function xl(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<xl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var q=this.g.responseText;return _&&q.indexOf(_)==0&&(q=q.substring(_.length)),Te(q)}};function tm(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function og(_){const q={};_=(_.g&&2<=xl(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let De=0;De<_.length;De++){if(y(_[De]))continue;var se=B(_[De]);const vt=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const kt=q[vt]||[];q[vt]=kt,kt.push(se)}C(q,function(De){return De.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(_,q,se){return se&&se.internalChannelParams&&se.internalChannelParams[_]||q}function tu(_){this.Aa=0,this.i=[],this.j=new Rt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,_),this.cb=vl("retryDelaySeedMs",1e4,_),this.Wa=vl("forwardChannelMaxRetries",2,_),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Nr(_&&_.concurrentRequestLimit),this.Da=new Gu,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tu.prototype,t.la=8,t.G=1,t.connect=function(_,q,se,De){Ge(0),this.W=_,this.H=q||{},se&&De!==void 0&&(this.H.OSID=se,this.H.OAID=De),this.F=this.X,this.I=la(this,null,this.W),U(this)};function eh(_){if(rm(_),_.G==3){var q=_.U++,se=tr(_.I);if(an(se,"SID",_.K),an(se,"RID",q),an(se,"TYPE","terminate"),et(_,se),q=new it(_,_.j,q),q.L=2,q.v=Ho(tr(se)),se=!1,l.navigator&&l.navigator.sendBeacon)try{se=l.navigator.sendBeacon(q.v.toString(),"")}catch{}!se&&l.Image&&(new Image().src=q.v,se=!0),se||(q.g=Ps(q.j,null),q.g.ea(q.v)),q.F=Date.now(),Je(q)}ms(_)}function ru(_){_.g&&(Ir(_),_.g.cancel(),_.g=null)}function rm(_){ru(_),_.u&&(l.clearTimeout(_.u),_.u=null),Xr(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function U(_){if(!Or(_.h)&&!_.s){_.s=!0;var q=_.Ga;ie||pe(),ce||(ie(),ce=!0),J.add(q,_),_.B=0}}function ye(_,q){return Fn(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=q.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=bt(h(_.Ga,_,q),Bn(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const vt=new it(this,this.j,_);let kt=this.o;if(this.S&&(kt?(kt=E(kt),O(kt,this.S)):kt=this.S),this.m!==null||this.O||(vt.H=kt,kt=null),this.P)e:{for(var q=0,se=0;se<this.i.length;se++){t:{var De=this.i[se];if("__data__"in De.map&&(De=De.map.__data__,typeof De=="string")){De=De.length;break t}De=void 0}if(De===void 0)break;if(q+=De,4096<q){q=se;break e}if(q===4096||se===this.i.length-1){q=se+1;break e}}q=1e3}else q=1e3;q=pt(this,vt,q),se=tr(this.I),an(se,"RID",_),an(se,"CVER",22),this.D&&an(se,"X-HTTP-Session-Id",this.D),et(this,se),kt&&(this.O?q="headers="+encodeURIComponent(String(Zc(kt)))+"&"+q:this.m&&Z0(se,this.m,kt)),Na(this.h,vt),this.Ua&&an(se,"TYPE","init"),this.P?(an(se,"$req",q),an(se,"SID","null"),vt.T=!0,Ce(vt,se,null)):Ce(vt,se,q),this.G=2}}else this.G==3&&(_?Ve(this,_):this.i.length==0||Or(this.h)||Ve(this))};function Ve(_,q){var se;q?se=q.l:se=_.U++;const De=tr(_.I);an(De,"SID",_.K),an(De,"RID",se),an(De,"AID",_.T),et(_,De),_.m&&_.o&&Z0(De,_.m,_.o),se=new it(_,_.j,se,_.B+1),_.m===null&&(se.H=_.o),q&&(_.i=q.D.concat(_.i)),q=pt(_,se,1e3),se.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),Na(_.h,se),Ce(se,De,q)}function et(_,q){_.H&&T(_.H,function(se,De){an(q,De,se)}),_.l&&vr({},function(se,De){an(q,De,se)})}function pt(_,q,se){se=Math.min(_.i.length,se);var De=_.l?h(_.l.Na,_.l,_):null;e:{var vt=_.i;let kt=-1;for(;;){const ur=["count="+se];kt==-1?0<se?(kt=vt[0].g,ur.push("ofs="+kt)):kt=0:ur.push("ofs="+kt);let On=!0;for(let xs=0;xs<se;xs++){let Nn=vt[xs].g;const zn=vt[xs].map;if(Nn-=kt,0>Nn)kt=Math.max(0,vt[xs].g-100),On=!1;else try{zv(zn,ur,"req"+Nn+"_")}catch{De&&De(zn)}}if(On){De=ur.join("&");break e}}}return _=_.i.splice(0,se),q.D=_,De}function $t(_){if(!_.g&&!_.u){_.Y=1;var q=_.Fa;ie||pe(),ce||(ie(),ce=!0),J.add(q,_),_.v=0}}function Xt(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=bt(h(_.Fa,_),Bn(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Dr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=bt(h(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),ru(this),Dr(this))};function Ir(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function Dr(_){_.g=new it(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var q=tr(_.qa);an(q,"RID","rpc"),an(q,"SID",_.K),an(q,"AID",_.T),an(q,"CI",_.F?"0":"1"),!_.F&&_.ja&&an(q,"TO",_.ja),an(q,"TYPE","xmlhttp"),et(_,q),_.m&&_.o&&Z0(q,_.m,_.o),_.L&&(_.g.I=_.L);var se=_.g;_=_.ia,se.L=1,se.v=Ho(tr(q)),se.m=null,se.P=!0,at(se,_)}t.Za=function(){this.C!=null&&(this.C=null,ru(this),Xt(this),Ge(19))};function Xr(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function sn(_,q){var se=null;if(_.g==q){Xr(_),Ir(_),_.g=null;var De=2}else if(vn(_.h,q))se=q.D,Ku(_.h,q),De=1;else return;if(_.G!=0){if(q.o)if(De==1){se=q.m?q.m.length:0,q=Date.now()-q.F;var vt=_.B;De=ge(),fe(De,new ut(De,se)),U(_)}else $t(_);else if(vt=q.s,vt==3||vt==0&&0<q.X||!(De==1&&ye(_,q)||De==2&&Xt(_)))switch(se&&0<se.length&&(q=_.h,q.i=q.i.concat(se)),vt){case 1:ea(_,5);break;case 4:ea(_,10);break;case 3:ea(_,6);break;default:ea(_,2)}}}function Bn(_,q){let se=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(se*=2),se*q}function ea(_,q){if(_.j.info("Error code "+q),q==2){var se=h(_.fb,_),De=_.Xa;const vt=!De;De=new ir(De||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gr(De,"https"),Ho(De),vt?Gv(De.toString(),se):qv(De.toString(),se)}else Ge(2);_.G=0,_.l&&_.l.sa(q),ms(_),rm(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function ms(_){if(_.G=0,_.ka=[],_.l){const q=Rn(_.h);(q.length!=0||_.i.length!=0)&&(g(_.ka,q),g(_.ka,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.ra()}}function la(_,q,se){var De=se instanceof ir?tr(se):new ir(se);if(De.g!="")q&&(De.g=q+"."+De.g),Vr(De,De.s);else{var vt=l.location;De=vt.protocol,q=q?q+"."+vt.hostname:vt.hostname,vt=+vt.port;var kt=new ir(null);De&&gr(kt,De),q&&(kt.g=q),vt&&Vr(kt,vt),se&&(kt.l=se),De=kt}return se=_.D,q=_.ya,se&&q&&an(De,se,q),an(De,"VER",_.la),et(_,De),De}function Ps(_,q,se){if(q&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=_.Ca&&!_.pa?new _a(new Yf({eb:se})):new _a(_.pa),q.Ha(_.J),q}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ps(){}t=ps.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function js(){}js.prototype.g=function(_,q){return new gs(_,q)};function gs(_,q){Pt.call(this),this.g=new tu(q),this.l=_,this.h=q&&q.messageUrlParams||null,_=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(_?_["X-WebChannel-Content-Type"]=q.messageContentType:_={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(_?_["X-WebChannel-Client-Profile"]=q.va:_={"X-WebChannel-Client-Profile":q.va}),this.g.S=_,(_=q&&q.Sb)&&!y(_)&&(this.g.m=_),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!y(q)&&(this.g.D=q,_=this.h,_!==null&&q in _&&(_=this.h,q in _&&delete _[q])),this.j=new au(this)}m(gs,Pt),gs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gs.prototype.close=function(){eh(this.g)},gs.prototype.o=function(_){var q=this.g;if(typeof _=="string"){var se={};se.__data__=_,_=se}else this.u&&(se={},se.__data__=rt(_),_=se);q.i.push(new Ht(q.Ya++,_)),q.G==3&&U(q)},gs.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,gs.aa.N.call(this)};function Gl(_){ze.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var q=_.__sm__;if(q){e:{for(const se in q){_=se;break e}_=void 0}(this.i=_)&&(_=this.i,q=q!==null&&_ in q?q[_]:void 0),this.data=q}else this.data=_}m(Gl,ze);function nu(){Ye.call(this),this.status=1}m(nu,Ye);function au(_){this.g=_}m(au,ps),au.prototype.ua=function(){fe(this.g,"a")},au.prototype.ta=function(_){fe(this.g,new Gl(_))},au.prototype.sa=function(_){fe(this.g,new nu)},au.prototype.ra=function(){fe(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,gs.prototype.send=gs.prototype.o,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,GX=function(){return new js},KX=function(){return ge()},$X=Ze,RP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,AC=ue,Be.COMPLETE="complete",HX=Be,Ne.EventType=Re,Re.OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,ty=Ne,_a.prototype.listenOnce=_a.prototype.L,_a.prototype.getLastError=_a.prototype.Ka,_a.prototype.getLastErrorCode=_a.prototype.Ba,_a.prototype.getStatus=_a.prototype.Z,_a.prototype.getResponseJson=_a.prototype.Oa,_a.prototype.getResponseText=_a.prototype.oa,_a.prototype.send=_a.prototype.ea,_a.prototype.setWithCredentials=_a.prototype.Ha,VX=_a}).apply(typeof fN<"u"?fN:typeof self<"u"?self:typeof window<"u"?window:{});const zL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Po.UNAUTHENTICATED=new Po(null),Po.GOOGLE_CREDENTIALS=new Po("google-credentials-uid"),Po.FIRST_PARTY=new Po("first-party-uid"),Po.MOCK_USER=new Po("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=new uO("@firebase/firestore");function Qg(){return fp.logLevel}function or(t,...e){if(fp.logLevel<=jn.DEBUG){const r=e.map(_O);fp.debug(`Firestore (${bv}): ${t}`,...r)}}function Ol(t,...e){if(fp.logLevel<=jn.ERROR){const r=e.map(_O);fp.error(`Firestore (${bv}): ${t}`,...r)}}function w0(t,...e){if(fp.logLevel<=jn.WARN){const r=e.map(_O);fp.warn(`Firestore (${bv}): ${t}`,...r)}}function _O(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t="Unexpected state"){const e=`FIRESTORE (${bv}) INTERNAL ASSERTION FAILED: `+t;throw Ol(e),new Error(e)}function Ur(t,e){t||Fr()}function nn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dr extends Rf{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Po.UNAUTHENTICATED))}shutdown(){}}class hpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class mpe{constructor(e){this.t=e,this.currentUser=Po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ur(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new xd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xd,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{or("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(or("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xd)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(or("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ur(typeof n.accessToken=="string"),new qX(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ur(e===null||typeof e=="string"),new Po(e)}}class ppe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Po.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new ppe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Po.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xpe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ur(this.o===void 0);const n=s=>{s.error!=null&&or("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,or("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{or("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):or("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ur(typeof r.token=="string"),this.R=r.token,new xpe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ype(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=ype(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function An(t,e){return t<e?-1:t>e?1:0}function Kx(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function WX(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dr(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new rr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $r(e)}static min(){return new $r(new rr(0,0))}static max(){return new $r(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,r,n){r===void 0?r=0:r>e.length&&Fr(),n===void 0?n=e.length-r:n>e.length-r&&Fr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return C2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof C2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Yn extends C2{construct(e,r,n){return new Yn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Yn(r)}static emptyPath(){return new Yn([])}}const bpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cs extends C2{construct(e,r,n){return new cs(e,r,n)}static isValidIdentifier(e){return bpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new cs(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new dr(Qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new dr(Qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new dr(Qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cs(r)}static emptyPath(){return new cs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.path=e}static fromPath(e){return new br(Yn.fromString(e))}static fromName(e){return new br(Yn.fromString(e).popFirst(5))}static empty(){return new br(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Yn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new br(new Yn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function MP(t){return t.fields.find(e=>e.kind===2)}function gm(t){return t.fields.filter(e=>e.kind!==2)}hE.UNKNOWN_ID=-1;class fC{constructor(e,r){this.fieldPath=e,this.kind=r}}class E2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new E2(0,$c.min())}}function wpe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=$r.fromTimestamp(n===1e9?new rr(r+1,0):new rr(r,n));return new $c(a,br.empty(),e)}function XX(t){return new $c(t.readTime,t.key,-1)}class $c{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new $c($r.min(),br.empty(),-1)}static max(){return new $c($r.max(),br.empty(),-1)}}function EO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=br.comparator(t.documentKey,e.documentKey),r!==0?r:An(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(t){if(t.code!==Qt.FAILED_PRECONDITION||t.message!==YX)throw t;or("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Fr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Tt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Tt?r:Tt.resolve(r)}catch(r){return Tt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Tt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Tt.reject(r)}static resolve(e){return new Tt((r,n)=>{r(e)})}static reject(e){return new Tt((r,n)=>{n(e)})}static waitFor(e){return new Tt((r,n)=>{let a=0,s=0,i=!1;e.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=Tt.resolve(!1);for(const n of e)r=r.next(a=>a?Tt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Tt((n,a)=>{const s=e.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new Tt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new xd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Py(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=SO(n.target.error);this.V.reject(new Py(e,a))}}static open(e,r,n,a){try{return new _I(r,e.transaction(a,n))}catch(s){throw new Py(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(or("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new _pe(r)}}class f0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,f0.S(Mi())===12.2&&Ol("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return or("SimpleDb","Removing database:",e),_m(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ZW())return!1;if(f0.v())return!0;const e=Mi(),r=f0.S(e),n=0<r&&r<10,a=ZX(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(or("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new Py(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new dr(Qt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new dr(Qt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Py(e,i))},a.onupgradeneeded=s=>{or("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{or("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=_I.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Tt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&i<3;if(or("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZX(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Npe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _m(this.B.delete())}}class Py extends dr{constructor(e,r){super(Qt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function H0(t){return t.name==="IndexedDbTransactionError"}class _pe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(or("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(or("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_m(n)}add(e){return or("SimpleDb","ADD",this.store.name,e,e),_m(this.store.add(e))}get(e){return _m(this.store.get(e)).next(r=>(r===void 0&&(r=null),or("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return or("SimpleDb","DELETE",this.store.name,e),_m(this.store.delete(e))}count(){return or("SimpleDb","COUNT",this.store.name),_m(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Tt((i,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(l,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Tt((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){or("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Tt((n,a)=>{r.onerror=s=>{const i=SO(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new Tt((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void a();const c=new Npe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Tt){const d=u.catch(A=>(c.done(),Tt.reject(A)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Tt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function _m(t){return new Tt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=SO(n.target.error);r(a)}})}let WL=!1;function SO(t){const e=f0.S(Mi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new dr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WL||(WL=!0,setTimeout(()=>{throw n},0)),n}}return t}class Cpe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){or("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{or("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){H0(r)?or("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Up(r)}await this.X(6e4)})}}class Epe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Tt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return or("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(l=>{a-=l,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(l=>(or("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=XX(s);EO(i,n)>0&&(n=i)}),new $c(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Eu.oe=-1;function Rb(t){return t==null}function S2(t){return t===0&&1/t==-1/0}function Spe(t){return typeof t=="number"&&Number.isInteger(t)&&!S2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=XL(e)),e=Ipe(t.get(r),e);return XL(e)}function Ipe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function XL(t){return t+""}function rA(t){const e=t.length;if(Ur(e>=2),e===2)return Ur(t.charAt(0)===""&&t.charAt(1)===""),Yn.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Fr(),t.charAt(i+1)){case"":const l=t.substring(s,i);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:Fr()}s=i+2}return new Yn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e){return[t,Ml(e)]}function eY(t,e,r){return[t,Ml(e),r]}const Bpe={},Tpe=["prefixPath","collectionGroup","readTime","documentId"],Ppe=["prefixPath","collectionGroup","documentId"],jpe=["collectionGroup","readTime","prefixPath","documentId"],kpe=["canonicalId","targetId"],Fpe=["targetId","path"],Ope=["path","targetId"],Dpe=["collectionId","parent"],Rpe=["indexId","uid"],Mpe=["uid","sequenceNumber"],Lpe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Upe=["indexId","uid","orderedDocumentKey"],Qpe=["userId","collectionPath","documentId"],Vpe=["userId","collectionPath","largestBatchId"],Hpe=["userId","collectionGroup","largestBatchId"],tY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$pe=[...tY,"documentOverlays"],rY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nY=rY,IO=[...nY,"indexConfiguration","indexState","indexEntries"],Kpe=IO,Gpe=[...IO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP extends JX{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ui(t,e){const r=nn(t);return f0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Qp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function aY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,r){this.comparator=e,this.root=r||jo.EMPTY}insert(e,r){return new fs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,jo.BLACK,null,null))}remove(e){return new fs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hN(this.root,e,this.comparator,!1)}getReverseIterator(){return new hN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hN(this.root,e,this.comparator,!0)}}class hN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jo{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??jo.RED,this.left=a??jo.EMPTY,this.right=s??jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new jo(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return jo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return jo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fr();const e=this.left.check();if(e!==this.right.check())throw Fr();return e+(this.isRed()?0:1)}}jo.EMPTY=null,jo.RED=!0,jo.BLACK=!1;jo.EMPTY=new class{constructor(){this.size=0}get key(){throw Fr()}get value(){throw Fr()}get color(){throw Fr()}get left(){throw Fr()}get right(){throw Fr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new jo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.comparator=e,this.data=new fs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ZL(this.data.getIterator())}getIteratorFrom(e){return new ZL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ia(this.comparator);return r.data=e,r}}class ZL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ag(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.fields=e,e.sort(cs.comparator)}static empty(){return new sc([])}unionWith(e){let r=new Ia(cs.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Kx(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sY("Invalid base64 string: "+s):s}}(e);return new ni(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new ni(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const qpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _f(t){if(Ur(!!t),typeof t=="string"){let e=0;const r=qpe.exec(t);if(Ur(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:is(t.seconds),nanos:is(t.nanos)}}function is(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function N0(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function TO(t){const e=t.mapValue.fields.__previous_value__;return BO(e)?TO(e):e}function I2(t){const e=_f(t.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpe{constructor(e,r,n,a,s,i,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class _0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new _0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mC={nullValue:"NULL_VALUE"};function hp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?BO(t)?4:iY(t)?9007199254740991:CI(t)?10:11:Fr()}function fA(t,e){if(t===e)return!0;const r=hp(t);if(r!==hp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return I2(t).isEqual(I2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=_f(a.timestampValue),l=_f(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return N0(a.bytesValue).isEqual(N0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return is(a.geoPointValue.latitude)===is(s.geoPointValue.latitude)&&is(a.geoPointValue.longitude)===is(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return is(a.integerValue)===is(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=is(a.doubleValue),l=is(s.doubleValue);return i===l?S2(i)===S2(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return Kx(t.arrayValue.values||[],e.arrayValue.values||[],fA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(JL(i)!==JL(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!fA(i[c],l[c])))return!1;return!0}(t,e);default:return Fr()}}function B2(t,e){return(t.values||[]).find(r=>fA(r,e))!==void 0}function C0(t,e){if(t===e)return 0;const r=hp(t),n=hp(e);if(r!==n)return An(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return An(t.booleanValue,e.booleanValue);case 2:return function(s,i){const l=is(s.integerValue||s.doubleValue),c=is(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return eU(t.timestampValue,e.timestampValue);case 4:return eU(I2(t),I2(e));case 5:return An(t.stringValue,e.stringValue);case 6:return function(s,i){const l=N0(s),c=N0(i);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=An(l[u],c[u]);if(d!==0)return d}return An(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const l=An(is(s.latitude),is(i.latitude));return l!==0?l:An(is(s.longitude),is(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var l,c,u,d;const A=s.fields||{},h=i.fields||{},f=(l=A.value)===null||l===void 0?void 0:l.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=An(((u=f==null?void 0:f.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:tU(f,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===zh.mapValue&&i===zh.mapValue)return 0;if(s===zh.mapValue)return 1;if(i===zh.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let A=0;A<c.length&&A<d.length;++A){const h=An(c[A],d[A]);if(h!==0)return h;const f=C0(l[c[A]],u[d[A]]);if(f!==0)return f}return An(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Fr()}}function eU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return An(t,e);const r=_f(t),n=_f(e),a=An(r.seconds,n.seconds);return a!==0?a:An(r.nanos,n.nanos)}function tU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=C0(r[a],n[a]);if(s)return s}return An(r.length,n.length)}function Gx(t){return UP(t)}function UP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=_f(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return N0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return br.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=UP(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${UP(r.fields[i])}`;return a+"}"}(t.mapValue):Fr()}function T2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function QP(t){return!!t&&"integerValue"in t}function P2(t){return!!t&&"arrayValue"in t}function rU(t){return!!t&&"nullValue"in t}function nU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pC(t){return!!t&&"mapValue"in t}function CI(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function jy(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=jy(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=jy(t.arrayValue.values[r]);return e}return Object.assign({},t)}function iY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const oY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Wpe(t){return"nullValue"in t?mC:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?T2(_0.empty(),br.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?CI(t)?oY:{mapValue:{}}:Fr()}function Xpe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?T2(_0.empty(),br.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?oY:"mapValue"in t?CI(t)?{mapValue:{}}:zh:Fr()}function aU(t,e){const r=C0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sU(t,e){const r=C0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!pC(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=jy(r)}setAll(e){let r=cs.emptyPath(),n={},a=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=jy(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());pC(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];pC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Qp(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Oo(jy(this.value))}}function lY(t){const e=[];return Qp(t.fields,(r,n)=>{const a=new cs([r]);if(pC(n)){const s=lY(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new sc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,r,n,a,s,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(e){return new ls(e,0,$r.min(),$r.min(),$r.min(),Oo.empty(),0)}static newFoundDocument(e,r,n,a){return new ls(e,1,r,$r.min(),n,a,0)}static newNoDocument(e,r){return new ls(e,2,r,$r.min(),$r.min(),Oo.empty(),0)}static newUnknownDocument(e,r){return new ls(e,3,r,$r.min(),$r.min(),Oo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($r.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$r.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,r){this.position=e,this.inclusive=r}}function iU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=br.comparator(br.fromName(i.referenceValue),r.key):n=C0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function oU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ype(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{}class kn extends cY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Jpe(e,r,n):r==="array-contains"?new tge(e,n):r==="in"?new mY(e,n):r==="not-in"?new rge(e,n):r==="array-contains-any"?new nge(e,n):new kn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Zpe(e,n):new ege(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(C0(r,this.value)):r!==null&&hp(this.value)===hp(r)&&this.matchesComparison(C0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class va extends cY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new va(e,r)}matches(e){return zx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zx(t){return t.op==="and"}function VP(t){return t.op==="or"}function PO(t){return uY(t)&&zx(t)}function uY(t){for(const e of t.filters)if(e instanceof va)return!1;return!0}function HP(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+Gx(t.value);if(PO(t))return t.filters.map(e=>HP(e)).join(",");{const e=t.filters.map(r=>HP(r)).join(",");return`${t.op}(${e})`}}function dY(t,e){return t instanceof kn?function(n,a){return a instanceof kn&&n.op===a.op&&n.field.isEqual(a.field)&&fA(n.value,a.value)}(t,e):t instanceof va?function(n,a){return a instanceof va&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&dY(i,a.filters[l]),!0):!1}(t,e):void Fr()}function AY(t,e){const r=t.filters.concat(e);return va.create(r,t.op)}function fY(t){return t instanceof kn?function(r){return`${r.field.canonicalString()} ${r.op} ${Gx(r.value)}`}(t):t instanceof va?function(r){return r.op.toString()+" {"+r.getFilters().map(fY).join(" ,")+"}"}(t):"Filter"}class Jpe extends kn{constructor(e,r,n){super(e,r,n),this.key=br.fromName(n.referenceValue)}matches(e){const r=br.comparator(e.key,this.key);return this.matchesComparison(r)}}class Zpe extends kn{constructor(e,r){super(e,"in",r),this.keys=hY("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class ege extends kn{constructor(e,r){super(e,"not-in",r),this.keys=hY("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function hY(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>br.fromName(n.referenceValue))}class tge extends kn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return P2(r)&&B2(r.arrayValue,this.value)}}class mY extends kn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&B2(this.value.arrayValue,r)}}class rge extends kn{constructor(e,r){super(e,"not-in",r)}matches(e){if(B2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!B2(this.value.arrayValue,r)}}class nge extends kn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!P2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>B2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class age{constructor(e,r=null,n=[],a=[],s=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.ue=null}}function $P(t,e=null,r=[],n=[],a=null,s=null,i=null){return new age(t,e,r,n,a,s,i)}function mp(t){const e=nn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>HP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Rb(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Gx(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Gx(n)).join(",")),e.ue=r}return e.ue}function Mb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Ype(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!dY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oU(t.startAt,e.startAt)&&oU(t.endAt,e.endAt)}function mE(t){return br.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function pE(t,e){return t.filters.filter(r=>r instanceof kn&&r.field.isEqual(e))}function lU(t,e,r){let n=mC,a=!0;for(const s of pE(t,e)){let i=mC,l=!0;switch(s.op){case"<":case"<=":i=Wpe(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,l=!1;break;case"!=":case"not-in":i=mC}aU({value:n,inclusive:a},{value:i,inclusive:l})<0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];aU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function cU(t,e,r){let n=zh,a=!0;for(const s of pE(t,e)){let i=zh,l=!0;switch(s.op){case">=":case">":i=Xpe(s.value),l=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,l=!1;break;case"!=":case"not-in":i=zh}sU({value:n,inclusive:a},{value:i,inclusive:l})>0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];sU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sge(t,e,r,n,a,s,i,l){return new wv(t,e,r,n,a,s,i,l)}function Lb(t){return new wv(t)}function uU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pY(t){return t.collectionGroup!==null}function ky(t){const e=nn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ia(cs.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new j2(s,n))}),r.has(cs.keyField().canonicalString())||e.ce.push(new j2(cs.keyField(),n))}return e.ce}function ju(t){const e=nn(t);return e.le||(e.le=ige(e,ky(t))),e.le}function ige(t,e){if(t.limitType==="F")return $P(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new j2(a.field,s)});const r=t.endAt?new qx(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new qx(t.startAt.position,t.startAt.inclusive):null;return $P(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function KP(t,e){const r=t.filters.concat([e]);return new wv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function gE(t,e,r){return new wv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function EI(t,e){return Mb(ju(t),ju(e))&&t.limitType===e.limitType}function gY(t){return`${mp(ju(t))}|lt:${t.limitType}`}function Vg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>fY(a)).join(", ")}]`),Rb(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Gx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Gx(a)).join(",")),`Target(${n})`}(ju(t))}; limitType=${t.limitType})`}function Ub(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):br.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of ky(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=iU(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,ky(n),a)||n.endAt&&!function(i,l,c){const u=iU(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,ky(n),a))}(t,e)}function oge(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xY(t){return(e,r)=>{let n=!1;for(const a of ky(t)){const s=lge(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function lge(t,e,r){const n=t.field.isKeyField()?br.comparator(e.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?C0(c,u):Fr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Fr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qp(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return aY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge=new fs(br.comparator);function Mc(){return cge}const vY=new fs(br.comparator);function ry(...t){let e=vY;for(const r of t)e=e.insert(r.key,r);return e}function yY(t){let e=vY;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function nA(){return Fy()}function bY(){return Fy()}function Fy(){return new $0(t=>t.toString(),(t,e)=>t.isEqual(e))}const uge=new fs(br.comparator),dge=new Ia(br.comparator);function wn(...t){let e=dge;for(const r of t)e=e.add(r);return e}const Age=new Ia(An);function fge(){return Age}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:S2(e)?"-0":e}}function wY(t){return{integerValue:""+t}}function hge(t,e){return Spe(e)?wY(e):jO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this._=void 0}}function mge(t,e,r){return t instanceof k2?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&BO(s)&&(s=TO(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Wx?_Y(t,e):t instanceof Xx?CY(t,e):function(a,s){const i=NY(a,s),l=dU(i)+dU(a.Pe);return QP(i)&&QP(a.Pe)?wY(l):jO(a.serializer,l)}(t,e)}function pge(t,e,r){return t instanceof Wx?_Y(t,e):t instanceof Xx?CY(t,e):r}function NY(t,e){return t instanceof F2?function(n){return QP(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class k2 extends SI{}class Wx extends SI{constructor(e){super(),this.elements=e}}function _Y(t,e){const r=EY(e);for(const n of t.elements)r.some(a=>fA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Xx extends SI{constructor(e){super(),this.elements=e}}function CY(t,e){let r=EY(e);for(const n of t.elements)r=r.filter(a=>!fA(a,n));return{arrayValue:{values:r}}}class F2 extends SI{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function dU(t){return is(t.integerValue||t.doubleValue)}function EY(t){return P2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gge{constructor(e,r){this.field=e,this.transform=r}}function xge(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Wx&&a instanceof Wx||n instanceof Xx&&a instanceof Xx?Kx(n.elements,a.elements,fA):n instanceof F2&&a instanceof F2?fA(n.Pe,a.Pe):n instanceof k2&&a instanceof k2}(t.transform,e.transform)}class vge{constructor(e,r){this.version=e,this.transformResults=r}}class us{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new us}static exists(e){return new us(void 0,e)}static updateTime(e){return new us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gC(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class II{}function SY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _v(t.key,us.none()):new Nv(t.key,t.data,us.none());{const r=t.data,n=Oo.empty();let a=new Ia(cs.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Mf(t.key,n,new sc(a.toArray()),us.none())}}function yge(t,e,r){t instanceof Nv?function(a,s,i){const l=a.value.clone(),c=fU(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Mf?function(a,s,i){if(!gC(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=fU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(IY(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Oy(t,e,r,n){return t instanceof Nv?function(s,i,l,c){if(!gC(s.precondition,i))return l;const u=s.value.clone(),d=hU(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Mf?function(s,i,l,c){if(!gC(s.precondition,i))return l;const u=hU(s.fieldTransforms,c,i),d=i.data;return d.setAll(IY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(t,e,r,n):function(s,i,l){return gC(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function bge(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=NY(n.transform,a||null);s!=null&&(r===null&&(r=Oo.empty()),r.set(n.field,s))}return r||null}function AU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Kx(n,a,(s,i)=>xge(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nv extends II{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Mf extends II{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IY(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fU(t,e,r){const n=new Map;Ur(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,l=e.data.field(s.field);n.set(s.field,pge(i,l,r[a]))}return n}function hU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,mge(s,i,e))}return n}class _v extends II{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kO extends II{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&yge(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Oy(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Oy(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=bY();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=SY(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument($r.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),wn())}isEqual(e){return this.batchId===e.batchId&&Kx(this.mutations,e.mutations,(r,n)=>AU(r,n))&&Kx(this.baseMutations,e.baseMutations,(r,n)=>AU(r,n))}}class OO{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ur(e.mutations.length===n.length);let a=function(){return uge}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new OO(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi,Ln;function BY(t){switch(t){default:return Fr();case Qt.CANCELLED:case Qt.UNKNOWN:case Qt.DEADLINE_EXCEEDED:case Qt.RESOURCE_EXHAUSTED:case Qt.INTERNAL:case Qt.UNAVAILABLE:case Qt.UNAUTHENTICATED:return!1;case Qt.INVALID_ARGUMENT:case Qt.NOT_FOUND:case Qt.ALREADY_EXISTS:case Qt.PERMISSION_DENIED:case Qt.FAILED_PRECONDITION:case Qt.ABORTED:case Qt.OUT_OF_RANGE:case Qt.UNIMPLEMENTED:case Qt.DATA_LOSS:return!0}}function TY(t){if(t===void 0)return Ol("GRPC error has no .code"),Qt.UNKNOWN;switch(t){case oi.OK:return Qt.OK;case oi.CANCELLED:return Qt.CANCELLED;case oi.UNKNOWN:return Qt.UNKNOWN;case oi.DEADLINE_EXCEEDED:return Qt.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return Qt.RESOURCE_EXHAUSTED;case oi.INTERNAL:return Qt.INTERNAL;case oi.UNAVAILABLE:return Qt.UNAVAILABLE;case oi.UNAUTHENTICATED:return Qt.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return Qt.INVALID_ARGUMENT;case oi.NOT_FOUND:return Qt.NOT_FOUND;case oi.ALREADY_EXISTS:return Qt.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return Qt.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return Qt.FAILED_PRECONDITION;case oi.ABORTED:return Qt.ABORTED;case oi.OUT_OF_RANGE:return Qt.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return Qt.UNIMPLEMENTED;case oi.DATA_LOSS:return Qt.DATA_LOSS;default:return Fr()}}(Ln=oi||(oi={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=new Hm([4294967295,4294967295],0);function mU(t){const e=Nge().encode(t),r=new QX;return r.update(e),new Uint8Array(r.digest())}function pU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hm([r,n],0),new Hm([a,s],0)]}class RO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ny(`Invalid padding: ${r}`);if(n<0)throw new ny(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ny(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ny(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Hm.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Hm.fromNumber(n)));return a.compare(_ge)===1&&(a=new Hm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=mU(e),[n,a]=pU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new RO(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=mU(e),[n,a]=pU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ny extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Qb.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new BI($r.min(),a,new fs(An),Mc(),wn())}}class Qb{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Qb(n,r,wn(),wn(),wn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class PY{constructor(e,r){this.targetId=e,this.me=r}}class jY{constructor(e,r,n=ni.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class gU{constructor(){this.fe=0,this.ge=vU(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=wn(),r=wn(),n=wn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Fr()}}),new Qb(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=vU()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ur(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Cge{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mc(),this.qe=xU(),this.Qe=new fs(An)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Fr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(mE(s))if(n===0){const i=new br(s.path);this.Ue(r,i,ls.newNoDocument(i,$r.min()))}else Ur(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),c=l?this.Xe(l,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=N0(n).toUint8Array()}catch(c){if(c instanceof sY)return w0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new RO(i,a,s)}catch(c){return w0(c instanceof ny?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const l=this.Je(i);if(l){if(s.current&&mE(l.target)){const c=new br(l.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,ls.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=wn();this.qe.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new BI(e,r,this.Qe,this.ke,n);return this.ke=Mc(),this.qe=xU(),this.Qe=new fs(An),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new gU,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ia(An),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||or("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gU),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function xU(){return new fs(br.comparator)}function vU(){return new fs(br.comparator)}const Ege={asc:"ASCENDING",desc:"DESCENDING"},Sge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ige={and:"AND",or:"OR"};class Bge{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function GP(t,e){return t.useProto3Json||Rb(e)?e:{value:e}}function Yx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tge(t,e){return Yx(t,e.toTimestamp())}function co(t){return Ur(!!t),$r.fromTimestamp(function(r){const n=_f(r);return new rr(n.seconds,n.nanos)}(t))}function MO(t,e){return qP(t,e).canonicalString()}function qP(t,e){const r=function(a){return new Yn(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function FY(t){const e=Yn.fromString(t);return Ur(HY(e)),e}function O2(t,e){return MO(t.databaseId,e.path)}function cf(t,e){const r=FY(e);if(r.get(1)!==t.databaseId.projectId)throw new dr(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new dr(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new br(RY(r))}function OY(t,e){return MO(t.databaseId,e)}function DY(t){const e=FY(t);return e.length===4?Yn.emptyPath():RY(e)}function zP(t){return new Yn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RY(t){return Ur(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yU(t,e,r){return{name:O2(t,e),fields:r.value.mapValue.fields}}function Pge(t,e,r){const n=cf(t,e.name),a=co(e.updateTime),s=e.createTime?co(e.createTime):$r.min(),i=new Oo({mapValue:{fields:e.fields}}),l=ls.newFoundDocument(n,a,s,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function jge(t,e){return"found"in e?function(n,a){Ur(!!a.found),a.found.name,a.found.updateTime;const s=cf(n,a.found.name),i=co(a.found.updateTime),l=a.found.createTime?co(a.found.createTime):$r.min(),c=new Oo({mapValue:{fields:a.found.fields}});return ls.newFoundDocument(s,i,l,c)}(t,e):"missing"in e?function(n,a){Ur(!!a.missing),Ur(!!a.readTime);const s=cf(n,a.missing),i=co(a.readTime);return ls.newNoDocument(s,i)}(t,e):Fr()}function kge(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ur(d===void 0||typeof d=="string"),ni.fromBase64String(d||"")):(Ur(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ni.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Qt.UNKNOWN:TY(u.code);return new dr(d,u.message||"")}(i);r=new jY(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=cf(t,n.document.name),s=co(n.document.updateTime),i=n.document.createTime?co(n.document.createTime):$r.min(),l=new Oo({mapValue:{fields:n.document.fields}}),c=ls.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new xC(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=cf(t,n.document),s=n.readTime?co(n.readTime):$r.min(),i=ls.newNoDocument(a,s),l=n.removedTargetIds||[];r=new xC([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=cf(t,n.document),s=n.removedTargetIds||[];r=new xC([],s,a,null)}else{if(!("filter"in e))return Fr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new wge(a,s),l=n.targetId;r=new PY(l,i)}}return r}function D2(t,e){let r;if(e instanceof Nv)r={update:yU(t,e.key,e.value)};else if(e instanceof _v)r={delete:O2(t,e.key)};else if(e instanceof Mf)r={update:yU(t,e.key,e.data),updateMask:Lge(e.fieldMask)};else{if(!(e instanceof kO))return Fr();r={verify:O2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof k2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wx)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof F2)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Fr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Tge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Fr()}(t,e.precondition)),r}function WP(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?us.updateTime(co(s.updateTime)):s.exists!==void 0?us.exists(s.exists):us.none()}(e.currentDocument):us.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,l){let c=null;if("setToServerValue"in l)Ur(l.setToServerValue==="REQUEST_TIME"),c=new k2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Wx(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Xx(d)}else"increment"in l?c=new F2(i,l.increment):Fr();const u=cs.fromServerFormat(l.fieldPath);return new gge(u,c)}(t,a)):[];if(e.update){e.update.name;const a=cf(t,e.update.name),s=new Oo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new sc(u.map(d=>cs.fromServerFormat(d)))}(e.updateMask);return new Mf(a,s,i,r,n)}return new Nv(a,s,r,n)}if(e.delete){const a=cf(t,e.delete);return new _v(a,r)}if(e.verify){const a=cf(t,e.verify);return new kO(a,r)}return Fr()}function Fge(t,e){return t&&t.length>0?(Ur(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?co(a.updateTime):co(s);return i.isEqual($r.min())&&(i=co(s)),new vge(i,a.transformResults||[])}(r,e))):[]}function MY(t,e){return{documents:[OY(t,e.path)]}}function LY(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=OY(t,a);const s=function(u){if(u.length!==0)return VY(va.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Hg(h.field),direction:Dge(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=GP(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function UY(t){let e=DY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ur(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(A){const h=QY(A);return h instanceof va&&PO(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(A){return A.map(h=>function(m){return new j2($g(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(A){let h;return h=typeof A=="object"?A.value:A,Rb(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(A){const h=!!A.before,f=A.values||[];return new qx(f,h)}(r.startAt));let u=null;return r.endAt&&(u=function(A){const h=!A.before,f=A.values||[];return new qx(f,h)}(r.endAt)),sge(e,a,i,s,l,"F",c,u)}function Oge(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function QY(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=$g(r.unaryFilter.field);return kn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=$g(r.unaryFilter.field);return kn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$g(r.unaryFilter.field);return kn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=$g(r.unaryFilter.field);return kn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fr()}}(t):t.fieldFilter!==void 0?function(r){return kn.create($g(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return va.create(r.compositeFilter.filters.map(n=>QY(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Fr()}}(r.compositeFilter.op))}(t):Fr()}function Dge(t){return Ege[t]}function Rge(t){return Sge[t]}function Mge(t){return Ige[t]}function Hg(t){return{fieldPath:t.canonicalString()}}function $g(t){return cs.fromServerFormat(t.fieldPath)}function VY(t){return t instanceof kn?function(r){if(r.op==="=="){if(nU(r.value))return{unaryFilter:{field:Hg(r.field),op:"IS_NAN"}};if(rU(r.value))return{unaryFilter:{field:Hg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(nU(r.value))return{unaryFilter:{field:Hg(r.field),op:"IS_NOT_NAN"}};if(rU(r.value))return{unaryFilter:{field:Hg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hg(r.field),op:Rge(r.op),value:r.value}}}(t):t instanceof va?function(r){const n=r.getFilters().map(a=>VY(a));return n.length===1?n[0]:{compositeFilter:{op:Mge(r.op),filters:n}}}(t):Fr()}function Lge(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function HY(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,r,n,a,s=$r.min(),i=$r.min(),l=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new tf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e){this.ct=e}}function Uge(t,e){let r;if(e.document)r=Pge(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=br.fromSegments(e.noDocument.path),a=gp(e.noDocument.readTime);r=ls.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fr();{const n=br.fromSegments(e.unknownDocument.path),a=gp(e.unknownDocument.version);r=ls.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new rr(a[0],a[1]);return $r.fromTimestamp(s)}(e.readTime)),r}function bU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:xE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:O2(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Yx(s,i.version.toTimestamp()),createTime:Yx(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:pp(e.version)};else{if(!e.isUnknownDocument())return Fr();n.unknownDocument={path:r.path.toArray(),version:pp(e.version)}}return n}function xE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function pp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gp(t){const e=new rr(t.seconds,t.nanoseconds);return $r.fromTimestamp(e)}function Cm(t,e){const r=(e.baseMutations||[]).map(s=>WP(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>WP(t.ct,s)),a=rr.fromMillis(e.localWriteTimeMs);return new FO(e.batchId,a,r,n)}function ay(t){const e=gp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?gp(t.lastLimboFreeSnapshotVersion):$r.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Ur(s.documents.length===1),ju(Lb(DY(s.documents[0])))}(t.query):function(s){return ju(UY(s))}(t.query),new tf(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ni.fromBase64String(t.resumeToken))}function KY(t,e){const r=pp(e.snapshotVersion),n=pp(e.lastLimboFreeSnapshotVersion);let a;a=mE(e.target)?MY(t.ct,e.target):LY(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function GY(t){const e=UY({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gE(e,e.limit,"L"):e}function S5(t,e){return new DO(e.largestBatchId,WP(t.ct,e.overlayMutation))}function wU(t,e){const r=e.path.lastSegment();return[t,Ml(e.path.popLast()),r]}function NU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:pp(n.readTime),documentKey:Ml(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qge{getBundleMetadata(e,r){return _U(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:gp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return _U(e).put(function(a){return{bundleId:a.id,createTime:pp(co(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return CU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:GY(s.bundledQuery),readTime:gp(s.readTime)}}(n)})}saveNamedQuery(e,r){return CU(e).put(function(a){return{name:a.name,readTime:pp(co(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function _U(t){return Ui(t,"bundles")}function CU(t){return Ui(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new TI(e,n)}getOverlay(e,r){return x1(e).get(wU(this.userId,r)).next(n=>n?S5(this.serializer,n):null)}getOverlays(e,r){const n=nA();return Tt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const l=new DO(r,i);a.push(this.ht(e,l))}),Tt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(Ml(i.getCollectionPath())));const s=[];return a.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(x1(e).j("collectionPathOverlayIndex",l))}),Tt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=nA(),s=Ml(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return x1(e).U("collectionPathOverlayIndex",i).next(l=>{for(const c of l){const u=S5(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=nA();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return x1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const A=S5(this.serializer,u);s.size()<a||A.largestBatchId===i?(s.set(A.getKey(),A),i=A.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return x1(e).put(function(a,s,i){const[l,c,u]=wU(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:D2(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function x1(t){return Ui(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{Pt(e){return Ui(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ni.fromUint8Array(n):ni.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(is(e.integerValue));else if("doubleValue"in e){const n=is(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),S2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=_f(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(N0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?iY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):CI(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Fr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",l=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(is(l)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),br.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Em.vt=new Em;function Hge(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function EU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=Hge(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class $ge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=EU(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=EU(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Kge{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Gge{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class v1{constructor(){this.jt=new $ge,this.Ht=new Kge(this.jt),this.Jt=new Gge(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Sm(this.indexId,this.documentKey,this.arrayValue,n)}}function ph(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=SU(t.arrayValue,e.arrayValue),r!==0?r:(r=SU(t.directionalValue,e.directionalValue),r!==0?r:br.comparator(t.documentKey,e.documentKey)))}function SU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.Xt=new Ia((r,n)=>cs.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ur(e.collectionGroup===this.collectionId),this.nn)return!1;const r=MP(e);if(r!==void 0&&!this.sn(r))return!1;const n=gm(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ia(cs.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new fC(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new fC(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new fC(n.field,n.dir==="asc"?0:1)));return new hE(hE.UNKNOWN_ID,this.collectionId,r,E2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t){var e,r;if(Ur(t instanceof kn||t instanceof va),t instanceof kn){if(t instanceof mY){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>kn.create(t.field,"==",s)))||[];return va.create(a,"or")}return t}const n=t.filters.map(a=>qY(a));return va.create(n,t.op)}function qge(t){if(t.getFilters().length===0)return[];const e=JP(qY(t));return Ur(zY(e)),XP(e)||YP(e)?[e]:e.getFilters()}function XP(t){return t instanceof kn}function YP(t){return t instanceof va&&PO(t)}function zY(t){return XP(t)||YP(t)||function(r){if(r instanceof va&&VP(r)){for(const n of r.getFilters())if(!XP(n)&&!YP(n))return!1;return!0}return!1}(t)}function JP(t){if(Ur(t instanceof kn||t instanceof va),t instanceof kn)return t;if(t.filters.length===1)return JP(t.filters[0]);const e=t.filters.map(n=>JP(n));let r=va.create(e,t.op);return r=vE(r),zY(r)?r:(Ur(r instanceof va),Ur(zx(r)),Ur(r.filters.length>1),r.filters.reduce((n,a)=>LO(n,a)))}function LO(t,e){let r;return Ur(t instanceof kn||t instanceof va),Ur(e instanceof kn||e instanceof va),r=t instanceof kn?e instanceof kn?function(a,s){return va.create([a,s],"and")}(t,e):BU(t,e):e instanceof kn?BU(e,t):function(a,s){if(Ur(a.filters.length>0&&s.filters.length>0),zx(a)&&zx(s))return AY(a,s.getFilters());const i=VP(a)?a:s,l=VP(a)?s:a,c=i.filters.map(u=>LO(u,l));return va.create(c,"or")}(t,e),vE(r)}function BU(t,e){if(zx(e))return AY(e,t.getFilters());{const r=e.filters.map(n=>LO(t,n));return va.create(r,"or")}}function vE(t){if(Ur(t instanceof kn||t instanceof va),t instanceof kn)return t;const e=t.getFilters();if(e.length===1)return vE(e[0]);if(uY(t))return t;const r=e.map(a=>vE(a)),n=[];return r.forEach(a=>{a instanceof kn?n.push(a):a instanceof va&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:va.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(){this.un=new UO}addToCollectionParentIndex(e,r){return this.un.add(r),Tt.resolve()}getCollectionParents(e,r){return Tt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Tt.resolve()}deleteFieldIndex(e,r){return Tt.resolve()}deleteAllFieldIndexes(e){return Tt.resolve()}createTargetIndexes(e,r){return Tt.resolve()}getDocumentsMatchingTarget(e,r){return Tt.resolve(null)}getIndexType(e,r){return Tt.resolve(0)}getFieldIndexes(e,r){return Tt.resolve([])}getNextCollectionGroupToUpdate(e){return Tt.resolve(null)}getMinOffset(e,r){return Tt.resolve($c.min())}getMinOffsetFromCollectionGroup(e,r){return Tt.resolve($c.min())}updateCollectionGroup(e,r,n){return Tt.resolve()}updateIndexEntries(e,r){return Tt.resolve()}}class UO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ia(Yn.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ia(Yn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new Uint8Array(0);class Wge{constructor(e,r){this.databaseId=r,this.cn=new UO,this.ln=new $0(n=>mp(n),(n,a)=>Mb(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Ml(a)};return TU(e).put(s)}return Tt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[WX(r),""],!1,!0);return TU(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(rA(i.parent))}return n})}addFieldIndex(e,r){const n=y1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=hg(e);return s.next(l=>{i.put(NU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=y1(e),a=hg(e),s=fg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=y1(e),n=fg(e),a=hg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Tt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new IU(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=fg(e);let a=!0;const s=new Map;return Tt.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{a&&(a=!!l),s.set(i,l)})).next(()=>{if(a){let i=wn();const l=[];return Tt.forEach(s,(c,u)=>{or("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${mp(r)}`);const d=function(b,w){const I=MP(w);if(I===void 0)return null;for(const T of pE(b,I.fieldPath))switch(T.op){case"array-contains-any":return T.value.arrayValue.values||[];case"array-contains":return[T.value]}return null}(u,c),A=function(b,w){const I=new Map;for(const T of gm(w))for(const C of pE(b,T.fieldPath))switch(C.op){case"==":case"in":I.set(T.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return I.set(T.fieldPath.canonicalString(),C.value),Array.from(I.values())}return null}(u,c),h=function(b,w){const I=[];let T=!0;for(const C of gm(w)){const E=C.kind===0?lU(b,C.fieldPath,b.startAt):cU(b,C.fieldPath,b.startAt);I.push(E.value),T&&(T=E.inclusive)}return new qx(I,T)}(u,c),f=function(b,w){const I=[];let T=!0;for(const C of gm(w)){const E=C.kind===0?cU(b,C.fieldPath,b.endAt):lU(b,C.fieldPath,b.endAt);I.push(E.value),T&&(T=E.inclusive)}return new qx(I,T)}(u,c),m=this.In(c,u,h),p=this.In(c,u,f),g=this.Tn(c,u,A),x=this.En(c.indexId,d,m,h.inclusive,p,f.inclusive,g);return Tt.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const I=br.fromSegments(w.documentKey);i.has(I)||(i=i.add(I),l.push(I))})}))}).next(()=>l)}return Tt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=qge(va.create(e.filters,"and")).map(n=>$P(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let A=0;A<c;++A){const h=r?this.dn(r[A/u]):mN,f=this.An(e,h,n[A%u],a),m=this.Rn(e,h,s[A%u],i),p=l.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(f,m,p))}return d}An(e,r,n,a){const s=new Sm(e,br.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Sm(e,br.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new IU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const l of s)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return Tt.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new Ia(cs.comparator),d=!1;for(const A of c.filters)for(const h of A.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const A of c.orderBy)A.field.isKeyField()||(u=u.add(A.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new v1;for(const a of gm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);Em.vt.It(s,i)}return n.zt()}dn(e){const r=new v1;return Em.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new v1;return Em.vt.It(T2(this.databaseId,r),n.Yt(function(s){const i=gm(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new v1);let s=0;for(const i of gm(e)){const l=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&P2(l))a=this.gn(a,i,l);else{const u=c.Yt(i.kind);Em.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const l of a){const c=new v1;c.seed(l.zt()),Em.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof kn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=y1(e),a=hg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return Tt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{i.push(function(d,A){const h=A?new E2(A.sequenceNumber,new $c(gp(A.readTime),new br(rA(A.documentKey)),A.largestBatchId)):E2.empty(),f=d.fields.map(([m,p])=>new fC(cs.fromServerFormat(m),p));return new hE(d.indexId,d.collectionGroup,f,h)}(l,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:An(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=y1(e),s=hg(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Tt.forEach(l,c=>s.put(NU(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return Tt.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?Tt.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Tt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Tt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return fg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return fg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=fg(e);let s=new Ia(ph);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{s=s.add(new Sm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Ia(ph);const a=this.Vn(r,e);if(a==null)return n;const s=MP(r);if(s!=null){const i=e.data.field(s.fieldPath);if(P2(i))for(const l of i.arrayValue.values||[])n=n.add(new Sm(r.indexId,e.key,this.dn(l),a))}else n=n.add(new Sm(r.indexId,e.key,mN,a));return n}bn(e,r,n,a,s){or("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,A,h){const f=c.getIterator(),m=u.getIterator();let p=Ag(f),g=Ag(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(A(g),g=Ag(m)):y?(h(p),p=Ag(f)):(p=Ag(f),g=Ag(m))}}(a,s,ph,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),Tt.waitFor(i)}yn(e){let r=1;return hg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>ph(i,l)).filter((i,l,c)=>!l||ph(i,c[l-1])!==0);const a=[];a.push(e);for(const i of n){const l=ph(i,e),c=ph(i,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const l=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,mN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,mN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return ph(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(PU)}getMinOffset(e,r){return Tt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Fr())).next(PU)}}function TU(t){return Ui(t,"collectionParents")}function fg(t){return Ui(t,"indexEntries")}function y1(t){return Ui(t,"indexConfiguration")}function hg(t){return Ui(t,"indexState")}function PU(t){Ur(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;EO(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new $c(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ec{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ec(e,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:i},(d,A,h)=>(l++,h.delete()));s.push(c.next(()=>{Ur(l===1)}));const u=[];for(const d of r.mutations){const A=eY(e,d.key.path,r.batchId);s.push(a.delete(A)),u.push(d.key)}return Tt.waitFor(s).next(()=>u)}function yE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ec.DEFAULT_COLLECTION_PERCENTILE=10,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ec.DEFAULT=new ec(41943040,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ec.DISABLED=new ec(-1,0,0);class PI{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Ur(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new PI(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Kg(e),i=gh(e);return i.add({}).next(l=>{Ur(typeof l=="number");const c=new FO(l,r,n,a),u=function(f,m,p){const g=p.baseMutations.map(y=>D2(f.ct,y)),x=p.mutations.map(y=>D2(f.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let A=new Ia((h,f)=>An(h.canonicalString(),f.canonicalString()));for(const h of a){const f=eY(this.userId,h.key.path,l);A=A.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(f,Bpe))}return A.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Tt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return gh(e).get(r).next(n=>n?(Ur(n.userId===this.userId),Cm(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Tt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return gh(e).J({index:"userMutationsIndex",range:a},(i,l,c)=>{l.userId===this.userId&&(Ur(l.batchId>=n),s=Cm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return gh(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).U("userMutationsIndex",r).next(n=>n.map(a=>Cm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=hC(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Kg(e).J({range:a},(i,l,c)=>{const[u,d,A]=i,h=rA(d);if(u===this.userId&&r.path.isEqual(h))return gh(e).get(A).next(f=>{if(!f)throw Fr();Ur(f.userId===this.userId),s.push(Cm(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ia(An);const a=[];return r.forEach(s=>{const i=hC(this.userId,s.path),l=IDBKeyRange.lowerBound(i),c=Kg(e).J({range:l},(u,d,A)=>{const[h,f,m]=u,p=rA(f);h===this.userId&&s.path.isEqual(p)?n=n.add(m):A.done()});a.push(c)}),Tt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=hC(this.userId,n),i=IDBKeyRange.lowerBound(s);let l=new Ia(An);return Kg(e).J({range:i},(c,u,d)=>{const[A,h,f]=c,m=rA(h);A===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(f)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(gh(e).get(s).next(i=>{if(i===null)throw Fr();Ur(i.userId===this.userId),n.push(Cm(this.serializer,i))}))}),Tt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return WY(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Tt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Tt.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return Kg(e).J({range:n},(s,i,l)=>{if(s[0]===this.userId){const c=rA(s[1]);a.push(c)}else l.done()}).next(()=>{Ur(a.length===0)})})}containsKey(e,r){return XY(e,this.userId,r)}Nn(e){return YY(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XY(t,e,r){const n=hC(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Kg(t).J({range:s,H:!0},(l,c,u)=>{const[d,A,h]=l;d===e&&A===a&&(i=!0),u.done()}).next(()=>i)}function gh(t){return Ui(t,"mutations")}function Kg(t){return Ui(t,"documentMutations")}function YY(t){return Ui(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xp(0)}static kn(){return new xp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xge{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new xp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$r.fromTimestamp(new rr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>mg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Ur(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return mg(e).J((i,l)=>{const c=ay(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Tt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return mg(e).J((n,a)=>{const s=ay(a);r(s)})}qn(e){return kU(e).get("targetGlobalKey").next(r=>(Ur(r!==null),r))}Qn(e,r){return kU(e).put("targetGlobalKey",r)}Kn(e,r){return mg(e).put(KY(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=mp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return mg(e).J({range:a,index:"queryTargetsIndex"},(i,l,c)=>{const u=ay(l);Mb(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=Vh(e);return r.forEach(i=>{const l=Ml(i.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,i))}),Tt.waitFor(a)}removeMatchingKeys(e,r,n){const a=Vh(e);return Tt.forEach(r,s=>{const i=Ml(s.path);return Tt.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=Vh(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=Vh(e);let s=wn();return a.J({range:n,H:!0},(i,l,c)=>{const u=rA(i[1]),d=new br(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ml(r.path),a=IDBKeyRange.bound([n],[WX(n)],!1,!0);let s=0;return Vh(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,l],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return mg(e).get(r).next(n=>n?ay(n):null)}}function mg(t){return Ui(t,"targets")}function kU(t){return Ui(t,"targetGlobal")}function Vh(t){return Ui(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU([t,e],[r,n]){const a=An(t,r);return a===0?An(e,n):a}class Yge{constructor(e){this.Un=e,this.buffer=new Ia(FU),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();FU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Jge{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){or("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){H0(r)?or("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Up(r)}await this.Hn(3e5)})}}class Zge{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Tt.resolve(Eu.oe);const n=new Yge(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(or("LruGarbageCollector","Garbage collection skipped; disabled"),Tt.resolve(jU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(or("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jU):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(or("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,i=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(n=A,l=Date.now(),this.removeTargets(e,n,r))).next(A=>(s=A,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(A=>(u=Date.now(),Qg()<=jn.DEBUG&&or("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${A} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Tt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:A})))}}function exe(t,e){return new Zge(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class txe{constructor(e,r){this.db=e,this.garbageCollector=exe(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return pN(e,n)}removeReference(e,r,n){return pN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return pN(e,r)}nr(e,r){return function(a,s){let i=!1;return YY(a).Y(l=>XY(a,l,s).next(c=>(c&&(i=!0),Tt.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,l)=>{if(l<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,$r.min()),Vh(e).delete(function(A){return[0,Ml(A.path)]}(i))))});a.push(c)}}).next(()=>Tt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return pN(e,r)}tr(e,r){const n=Vh(e);let a,s=Eu.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:c,sequenceNumber:u})=>{i===0?(s!==Eu.oe&&r(new br(rA(a)),s),s=u,a=c):s=Eu.oe}).next(()=>{s!==Eu.oe&&r(new br(rA(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pN(t,e){return Vh(t).put(function(n,a){return{targetId:0,path:Ml(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(){this.changes=new $0(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Tt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rxe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return om(e).put(n)}removeEntry(e,r,n){return om(e).delete(function(s,i){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],xE(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=ls.newInvalidDocument(r);return om(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(b1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:ls.newInvalidDocument(r)};return om(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(b1(r))},(a,s)=>{n={document:this.ir(r,s),size:yE(s)}}).next(()=>n)}getEntries(e,r){let n=Mc();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=Mc(),a=new fs(br.comparator);return this._r(e,r,(s,i)=>{const l=this.ir(s,i);n=n.insert(s,l),a=a.insert(s,yE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Tt.resolve();let a=new Ia(RU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(b1(a.first()),b1(a.last())),i=a.getIterator();let l=i.getNext();return om(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const A=br.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&RU(l,A)<0;)n(l,null),l=i.getNext();l&&l.isEqual(A)&&(n(l,u),l=i.hasNext()?i.getNext():null),l?d.$(b1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),xE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return om(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Mc();for(const A of u){const h=this.ir(br.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);h.isFoundDocument()&&(Ub(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Mc();const i=DU(r,n),l=DU(r,$c.max());return om(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(c,u,d)=>{const A=this.ir(br.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(A.key,A),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new nxe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return OU(e).get("remoteDocumentGlobalKey").next(r=>(Ur(!!r),r))}rr(e,r){return OU(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Uge(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($r.min())))return n}return ls.newInvalidDocument(e)}}function ZY(t){return new rxe(t)}class nxe extends JY{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new $0(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ia((s,i)=>An(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),i.isValidDocument()){const c=bU(this.cr.serializer,i);a=a.add(s.path.popLast());const u=yE(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=bU(this.cr.serializer,i.convertToNoDocument($r.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Tt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function OU(t){return Ui(t,"remoteDocumentGlobal")}function om(t){return Ui(t,"remoteDocumentsV14")}function b1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DU(t,e){const r=e.documentKey.path.toArray();return[t,xE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function RU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=An(r[s],n[s]),a)return a;return a=An(r.length,n.length),a||(a=An(r[r.length-2],n[n.length-2]),a||An(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class axe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Oy(n.mutation,a,sc.empty(),rr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,wn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=wn()){const a=nA();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=ry();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=nA();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,wn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,a){let s=Mc();const i=Fy(),l=function(){return Fy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Mf)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Oy(d.mutation,u,d.mutation.getFieldMask(),rr.now())):i.set(u.key,sc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var A;return l.set(u,new axe(d,(A=i.get(u))!==null&&A!==void 0?A:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Fy();let a=new fs((i,l)=>i-l),s=wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||sc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const A=(a.get(l.batchId)||wn()).add(c);a=a.insert(l.batchId,A)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,A=bY();d.forEach(h=>{if(!s.has(h)){const f=SY(r.get(h),n.get(h));f!==null&&A.set(h,f),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,A))}return Tt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return br.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):pY(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Tt.resolve(nA());let l=-1,c=s;return i.next(u=>Tt.forEach(u,(d,A)=>(l<A.largestBatchId&&(l=A.largestBatchId),s.get(d)?Tt.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,wn())).next(d=>({batchId:l,changes:yY(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new br(r)).next(n=>{let a=ry();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=ry();return this.indexManager.getCollectionParents(e,s).next(l=>Tt.forEach(l,c=>{const u=function(A,h){return new wv(h,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((A,h)=>{i=i.insert(A,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,ls.newInvalidDocument(d)))});let l=ry();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Oy(d.mutation,u,sc.empty(),rr.now()),Ub(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Tt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:co(a.createTime)}}(r)),Tt.resolve()}getNamedQuery(e,r){return Tt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:GY(a.bundledQuery),readTime:co(a.readTime)}}(r)),Tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixe{constructor(){this.overlays=new fs(br.comparator),this.Ir=new Map}getOverlay(e,r){return Tt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=nA();return Tt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Tt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Tt.resolve()}getOverlaysForCollection(e,r,n){const a=nA(),s=r.length+1,i=new br(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Tt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new fs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=nA(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=nA(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Tt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new DO(r,n));let s=this.Ir.get(r);s===void 0&&(s=wn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return Tt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.Tr=new Ia(eo.Er),this.dr=new Ia(eo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new eo(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new eo(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new br(new Yn([])),n=new eo(r,e),a=new eo(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new br(new Yn([])),n=new eo(r,e),a=new eo(r,e+1);let s=wn();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new eo(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class eo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return br.comparator(e.key,r.key)||An(e.wr,r.wr)}static Ar(e,r){return An(e.wr,r.wr)||br.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ia(eo.Er)}checkEmpty(e){return Tt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new FO(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.br=this.br.add(new eo(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Tt.resolve(i)}lookupMutationBatch(e,r){return Tt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Tt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Tt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new eo(r,0),a=new eo(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const l=this.Dr(i.wr);s.push(l)}),Tt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ia(An);return r.forEach(a=>{const s=new eo(a,0),i=new eo(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],l=>{n=n.add(l.wr)})}),Tt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new eo(new br(s),0);let l=new Ia(An);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},i),Tt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Ur(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Tt.forEach(r.mutations,a=>{const s=new eo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new eo(r,0),a=this.br.firstAfterOrEqual(n);return Tt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(e){this.Mr=e,this.docs=function(){return new fs(br.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Tt.resolve(n?n.document.mutableCopy():ls.newInvalidDocument(r))}getEntries(e,r){let n=Mc();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():ls.newInvalidDocument(a))}),Tt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Mc();const i=r.path,l=new br(i.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||EO(XX(d),n)<=0||(a.has(d.key)||Ub(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Tt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Fr()}Or(e,r){return Tt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new uxe(this)}getSize(e){return Tt.resolve(this.size)}}class uxe extends JY{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Tt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(e){this.persistence=e,this.Nr=new $0(r=>mp(r),Mb),this.lastRemoteSnapshotVersion=$r.min(),this.highestTargetId=0,this.Lr=0,this.Br=new QO,this.targetCount=0,this.kr=xp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Tt.resolve()}getLastRemoteSnapshotVersion(e){return Tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Tt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Tt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new xp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Tt.resolve()}updateTargetData(e,r){return this.Kn(r),Tt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Tt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Tt.waitFor(s).next(()=>a)}getTargetCount(e){return Tt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Tt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Tt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),Tt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Tt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Tt.resolve(n)}containsKey(e,r){return Tt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Eu(0),this.Kr=!1,this.Kr=!0,this.$r=new oxe,this.referenceDelegate=e(this),this.Ur=new dxe(this),this.indexManager=new zge,this.remoteDocumentCache=function(a){return new cxe(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new $Y(r),this.Gr=new sxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new ixe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new lxe(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){or("MemoryPersistence","Starting transaction:",e);const a=new Axe(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Tt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Axe extends JX{constructor(e){super(),this.currentSequenceNumber=e}}class jI{constructor(e){this.persistence=e,this.Jr=new QO,this.Yr=null}static Zr(e){return new jI(e)}get Xr(){if(this.Yr)return this.Yr;throw Fr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Tt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Tt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Tt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tt.forEach(this.Xr,n=>{const a=br.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,$r.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Tt.or([()=>Tt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fxe{constructor(e){this.serializer=e}O(e,r,n,a){const s=new _I("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YL,{unique:!0}),c.createObjectStore("documentMutations")}(e),MU(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=Tt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),MU(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$r.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YL,{unique:!0});const A=u.store("mutations"),h=d.map(f=>A.put(f));return Tt.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Qpe});u.createIndex("collectionPathOverlayIndex",Vpe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Hpe,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Tpe});u.createIndex("documentKeyIndex",Ppe),u.createIndex("collectionGroupIndex",jpe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Rpe}).createIndex("sequenceNumberIndex",Mpe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Lpe}).createIndex("documentKeyIndex",Upe,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=yE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Tt.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>Tt.forEach(l,c=>{Ur(c.userId===s.userId);const u=Cm(this.serializer,c);return WY(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,l)=>{const c=new Yn(i),u=function(A){return[0,Ml(A)]}(c);s.push(r.get(u).next(d=>d?Tt.resolve():(A=>r.put({targetId:0,path:Ml(A),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Tt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Dpe});const n=r.store("collectionParents"),a=new UO,s=i=>{if(a.add(i)){const l=i.lastSegment(),c=i.popLast();return n.put({collectionId:l,parent:Ml(c)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const c=new Yn(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,c],u)=>{const d=rA(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=ay(a),i=KY(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const l=r.store("remoteDocumentsV14"),c=function(A){return A.document?new br(Yn.fromString(A.document.name).popFirst(5)):A.noDocument?br.fromSegments(A.noDocument.path):A.unknownDocument?br.fromSegments(A.unknownDocument.path):Fr()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(l.put(u))}).next(()=>Tt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=ZY(this.serializer),s=new tJ(jI.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:wn();Cm(this.serializer,c).keys().forEach(A=>d=d.add(A)),l.set(c.userId,d)}),Tt.forEach(l,(c,u)=>{const d=new Po(u),A=TI.lt(this.serializer,d),h=s.getIndexManager(d),f=PI.lt(d,this.serializer,h,s.referenceDelegate);return new eJ(a,f,A,h).recalculateAndSaveOverlaysForDocumentKeys(new LP(r,Eu.oe),c).next()})})}}function MU(t){t.createObjectStore("targetDocuments",{keyPath:Fpe}).createIndex("documentTargetsIndex",Ope,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kpe,{unique:!0}),t.createObjectStore("targetGlobal")}const I5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VO{constructor(e,r,n,a,s,i,l,c,u,d,A=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=l,this.ci=u,this.li=d,this.hi=A,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!VO.D())throw new dr(Qt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new txe(this,a),this.Ai=r+"main",this.serializer=new $Y(c),this.Ri=new f0(this.Ai,this.hi,new fxe(this.serializer)),this.$r=new Vge,this.Ur=new Xge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZY(this.serializer),this.Gr=new Qge,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ol("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dr(Qt.FAILED_PRECONDITION,I5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Eu(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(H0(e))return or("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return or("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return w1(e).get("owner").next(r=>Tt.resolve(this.vi(r)))}Ci(e){return gN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Ui(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(l=>s.indexOf(l)===-1);return Tt.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Tt.resolve(!0):w1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new dr(Qt.FAILED_PRECONDITION,I5);return!1}}return!(!this.networkEnabled||!this.inForeground)||gN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&or("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new LP(e,Eu.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>gN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return PI.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wge(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return TI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){or("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Gpe:c===16?Kpe:c===15?IO:c===14?nY:c===13?rY:c===12?$pe:c===11?tY:void Fr()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,l=>(i=new LP(l,this.Qr?this.Qr.next():Eu.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw Ol(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new dr(Qt.FAILED_PRECONDITION,YX);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return w1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new dr(Qt.FAILED_PRECONDITION,I5)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return w1(e).put("owner",r)}static D(){return f0.D()}bi(e){const r=w1(e);return r.get("owner").next(n=>this.vi(n)?(or("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Tt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ol(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;JW()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return or("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ol("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ol("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function w1(t){return Ui(t,"owner")}function gN(t){return Ui(t,"clientMetadata")}function hxe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=wn(),a=wn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new HO(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JW()?8:ZX(Mi())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new mxe;return this.Xi(e,r,i).next(l=>{if(s.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Qg()<=jn.DEBUG&&or("QueryEngine","SDK will not create cache indexes for query:",Vg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Tt.resolve()):(Qg()<=jn.DEBUG&&or("QueryEngine","Query:",Vg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Qg()<=jn.DEBUG&&or("QueryEngine","The SDK decides to create cache indexes for query:",Vg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ju(r))):Tt.resolve())}Yi(e,r){if(uU(r))return Tt.resolve(null);let n=ju(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=gE(r,null,"F"),n=ju(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=wn(...s);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,i,c.readTime)?this.Yi(e,gE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return uU(r)||a.isEqual($r.min())?Tt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?Tt.resolve(null):(Qg()<=jn.DEBUG&&or("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Vg(r)),this.rs(e,i,r,wpe(a,-1)).next(l=>l))})}ts(e,r){let n=new Ia(xY(e));return r.forEach((a,s)=>{Ub(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Qg()<=jn.DEBUG&&or("QueryEngine","Using full collection scan to execute query:",Vg(r)),this.Ji.getDocumentsMatchingQuery(e,r,$c.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxe{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new fs(An),this._s=new $0(s=>mp(s),Mb),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function nJ(t,e,r,n){return new pxe(t,e,r,n)}async function aJ(t,e){const r=nn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=wn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:l}))})})}function gxe(t,e){const r=nn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const A=u.batch,h=A.keys();let f=Tt.resolve();return h.forEach(m=>{f=f.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Ur(g!==null),p.version.compareTo(g)<0&&(A.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),f.next(()=>l.mutationQueue.removeMutationBatch(c,A))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=wn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function sJ(t){const e=nn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function xxe(t,e){const r=nn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,A)=>{const h=a.get(A);if(!h)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,A).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,A)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(A)!==null?f=f.withResumeToken(ni.EMPTY_BYTE_STRING,$r.min()).withLastLimboFreeSnapshotVersion($r.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,n)),a=a.insert(A,f),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,f,d)&&l.push(r.Ur.updateTargetData(s,f))});let c=Mc(),u=wn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(vxe(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual($r.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(A=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Tt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function vxe(t,e,r){let n=wn(),a=wn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=Mc();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual($r.min())?(e.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(l,c)):or("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function yxe(t,e){const r=nn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function bxe(t,e){const r=nn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Tt.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new tf(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function ZP(t,e,r){const n=nn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!H0(i))throw i;or("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function LU(t,e,r){const n=nn(t);let a=$r.min(),s=wn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const A=nn(c),h=A._s.get(d);return h!==void 0?Tt.resolve(A.os.get(h)):A.Ur.getTargetData(u,d)}(n,i,ju(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:$r.min(),r?s:wn())).next(l=>(wxe(n,oge(e),l),{documents:l,Ts:s})))}function wxe(t,e,r){let n=t.us.get(e)||$r.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class UU{constructor(){this.activeTargetIds=fge()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iJ{constructor(){this.so=new UU,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new UU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){or("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){or("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xN=null;function B5(){return xN===null?xN=function(){return 268435456+Math.round(2147483648*Math.random())}():xN++,"0x"+xN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _xe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="WebChannelConnection";class Exe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const l=B5(),c=this.xo(r,n.toUriEncodedString());or("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(or("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw w0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,l){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=_xe[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=B5();return new Promise((i,l)=>{const c=new VX;c.setWithCredentials(!0),c.listenOnce(HX.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case AC.NO_ERROR:const d=c.getResponseJson();or(zo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case AC.TIMEOUT:or(zo,`RPC '${e}' ${s} timed out`),l(new dr(Qt.DEADLINE_EXCEEDED,"Request time out"));break;case AC.HTTP_ERROR:const A=c.getStatus();if(or(zo,`RPC '${e}' ${s} failed with status:`,A,"response text:",c.getResponseText()),A>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Qt).indexOf(x)>=0?x:Qt.UNKNOWN}(f.status);l(new dr(m,f.message))}else l(new dr(Qt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new dr(Qt.UNAVAILABLE,"Connection failed."));break;default:Fr()}}finally{or(zo,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);or(zo,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=B5(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=GX(),l=KX(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");or(zo,`Creating RPC '${e}' stream ${a}: ${d}`,c);const A=i.createWebChannel(d,c);let h=!1,f=!1;const m=new Cxe({Io:g=>{f?or(zo,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(or(zo,`Opening RPC '${e}' stream ${a} transport.`),A.open(),h=!0),or(zo,`RPC '${e}' stream ${a} sending:`,g),A.send(g))},To:()=>A.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(A,ty.EventType.OPEN,()=>{f||(or(zo,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(A,ty.EventType.CLOSE,()=>{f||(f=!0,or(zo,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(A,ty.EventType.ERROR,g=>{f||(f=!0,w0(zo,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new dr(Qt.UNAVAILABLE,"The operation could not be completed")))}),p(A,ty.EventType.MESSAGE,g=>{var x;if(!f){const y=g.data[0];Ur(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){or(zo,`RPC '${e}' stream ${a} received error:`,w);const I=w.status;let T=function(S){const O=oi[S];if(O!==void 0)return TY(O)}(I),C=w.message;T===void 0&&(T=Qt.INTERNAL,C="Unknown error status: "+I+" with message "+w.message),f=!0,m.So(new dr(T,C)),A.close()}else or(zo,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,$X.STAT_EVENT,g=>{g.stat===RP.PROXY?or(zo,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===RP.NOPROXY&&or(zo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sxe(){return typeof window<"u"?window:null}function vC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){return new Bge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&or("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(e,r,n,a,s,i,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $O(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Qt.RESOURCE_EXHAUSTED?(Ol(r.toString()),Ol("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Qt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new dr(Qt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return or("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(or("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ixe extends oJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=kge(this.serializer,e),n=function(s){if(!("targetChange"in s))return $r.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?$r.min():i.readTime?co(i.readTime):$r.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=zP(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=mE(c)?{documents:MY(s,c)}:{query:LY(s,c)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=kY(s,i.resumeToken);const u=GP(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo($r.min())>0){l.readTime=Yx(s,i.snapshotVersion.toTimestamp());const u=GP(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Oge(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=zP(this.serializer),r.removeTarget=e,this.a_(r)}}class Bxe extends oJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,Ur(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ur(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Fge(e.writeResults,e.commitTime),n=co(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=zP(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>D2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new dr(Qt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,qP(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new dr(Qt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,qP(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Qt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new dr(Qt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Pxe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ol(r),this.D_=!1):or("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jxe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{Vp(this)&&(or("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=nn(c);u.L_.add(4),await Vb(u),u.q_.set("Unknown"),u.L_.delete(4),await FI(u)}(this))})}),this.q_=new Pxe(n,a)}}async function FI(t){if(Vp(t))for(const e of t.B_)await e(!0)}async function Vb(t){for(const e of t.B_)await e(!1)}function lJ(t,e){const r=nn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),zO(r)?qO(r):Cv(r).r_()&&GO(r,e))}function KO(t,e){const r=nn(t),n=Cv(r);r.N_.delete(e),n.r_()&&cJ(r,e),r.N_.size===0&&(n.r_()?n.o_():Vp(r)&&r.q_.set("Unknown"))}function GO(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($r.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Cv(t).A_(e)}function cJ(t,e){t.Q_.xe(e),Cv(t).R_(e)}function qO(t){t.Q_=new Cge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Cv(t).start(),t.q_.v_()}function zO(t){return Vp(t)&&!Cv(t).n_()&&t.N_.size>0}function Vp(t){return nn(t).L_.size===0}function uJ(t){t.Q_=void 0}async function kxe(t){t.q_.set("Online")}async function Fxe(t){t.N_.forEach((e,r)=>{GO(t,e)})}async function Oxe(t,e){uJ(t),zO(t)?(t.q_.M_(e),qO(t)):t.q_.set("Unknown")}async function Dxe(t,e,r){if(t.q_.set("Online"),e instanceof jY&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){or("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bE(t,n)}else if(e instanceof xC?t.Q_.Ke(e):e instanceof PY?t.Q_.He(e):t.Q_.We(e),!r.isEqual($r.min()))try{const n=await sJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Q_.rt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ni.EMPTY_BYTE_STRING,d.snapshotVersion)),cJ(s,c);const A=new tf(d.target,c,u,d.sequenceNumber);GO(s,A)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){or("RemoteStore","Failed to raise snapshot:",n),await bE(t,n)}}async function bE(t,e,r){if(!H0(e))throw e;t.L_.add(1),await Vb(t),t.q_.set("Offline"),r||(r=()=>sJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{or("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await FI(t)})}function dJ(t,e){return e().catch(r=>bE(t,r,e))}async function Hb(t){const e=nn(t),r=E0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Rxe(e);)try{const a=await yxe(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Mxe(e,a)}catch(a){await bE(e,a)}AJ(e)&&fJ(e)}function Rxe(t){return Vp(t)&&t.O_.length<10}function Mxe(t,e){t.O_.push(e);const r=E0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function AJ(t){return Vp(t)&&!E0(t).n_()&&t.O_.length>0}function fJ(t){E0(t).start()}async function Lxe(t){E0(t).p_()}async function Uxe(t){const e=E0(t);for(const r of t.O_)e.m_(r.mutations)}async function Qxe(t,e,r){const n=t.O_.shift(),a=OO.from(n,e,r);await dJ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Hb(t)}async function Vxe(t,e){e&&E0(t).V_&&await async function(n,a){if(function(i){return BY(i)&&i!==Qt.ABORTED}(a.code)){const s=n.O_.shift();E0(n).s_(),await dJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Hb(n)}}(t,e),AJ(t)&&fJ(t)}async function VU(t,e){const r=nn(t);r.asyncQueue.verifyOperationInProgress(),or("RemoteStore","RemoteStore received new credentials");const n=Vp(r);r.L_.add(3),await Vb(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await FI(r)}async function Hxe(t,e){const r=nn(t);e?(r.L_.delete(2),await FI(r)):e||(r.L_.add(2),await Vb(r),r.q_.set("Unknown"))}function Cv(t){return t.K_||(t.K_=function(r,n,a){const s=nn(r);return s.w_(),new Ixe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:kxe.bind(null,t),Ro:Fxe.bind(null,t),mo:Oxe.bind(null,t),d_:Dxe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),zO(t)?qO(t):t.q_.set("Unknown")):(await t.K_.stop(),uJ(t))})),t.K_}function E0(t){return t.U_||(t.U_=function(r,n,a){const s=nn(r);return s.w_(),new Bxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Lxe.bind(null,t),mo:Vxe.bind(null,t),f_:Uxe.bind(null,t),g_:Qxe.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hb(t)):(await t.U_.stop(),t.O_.length>0&&(or("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new xd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,l=new WO(e,r,i,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dr(Qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function XO(t,e){if(Ol("AsyncQueue",`${e}: ${t}`),H0(t))return new dr(Qt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.comparator=e?(r,n)=>e(r,n)||br.comparator(r.key,n.key):(r,n)=>br.comparator(r.key,n.key),this.keyedMap=ry(),this.sortedSet=new fs(this.comparator)}static emptySet(e){return new Ix(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ix)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ix;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this.W_=new fs(br.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Fr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Jx{constructor(e,r,n,a,s,i,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new Jx(e,r,Ix.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&EI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $xe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Kxe{constructor(){this.queries=$U(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=nn(r),s=a.queries;a.queries=$U(),s.forEach((i,l)=>{for(const c of l.j_)c.onError(n)})})(this,new dr(Qt.ABORTED,"Firestore shutting down"))}}function $U(){return new $0(t=>gY(t),EI)}async function YO(t,e){const r=nn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new $xe,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=XO(i,`Initialization of query '${Vg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&ZO(r)}async function JO(t,e){const r=nn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Gxe(t,e){const r=nn(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.j_)l.X_(a)&&(n=!0);i.z_=a}}n&&ZO(r)}function qxe(t,e,r){const n=nn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function ZO(t){t.Y_.forEach(e=>{e.next()})}var ej,KU;(KU=ej||(ej={})).ea="default",KU.Cache="cache";class e6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Jx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Jx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ej.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e){this.key=e}}class mJ{constructor(e){this.key=e}}class zxe{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=wn(),this.mutatedKeys=wn(),this.Aa=xY(e),this.Ra=new Ix(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new HU,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,A)=>{const h=a.get(d),f=Ub(this.query,A)?A:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;h&&f?h.data.isEqual(f.data)?m!==p&&(n.track({type:3,doc:f}),g=!0):this.ga(h,f)||(n.track({type:2,doc:f}),g=!0,(c&&this.Aa(f,c)>0||u&&this.Aa(f,u)<0)&&(l=!0)):!h&&f?(n.track({type:0,doc:f}),g=!0):h&&!f&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(f?(i=i.add(f),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,A)=>function(f,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fr()}};return p(f)-p(m)}(d.type,A.type)||this.Aa(d.doc,A.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new Jx(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new HU,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=wn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new mJ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new hJ(n))}),r}ba(e){this.Ta=e.Ts,this.da=wn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Jx.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Wxe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Xxe{constructor(e){this.key=e,this.va=!1}}class Yxe{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new $0(l=>gY(l),EI),this.Ma=new Map,this.xa=new Set,this.Oa=new fs(br.comparator),this.Na=new Map,this.La=new QO,this.Ba={},this.ka=new Map,this.qa=xp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jxe(t,e,r=!0){const n=bJ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await pJ(n,e,r,!0),a}async function Zxe(t,e){const r=bJ(t);await pJ(r,e,!0,!1)}async function pJ(t,e,r,n){const a=await bxe(t.localStore,ju(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await eve(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&lJ(t.remoteStore,a),l}async function eve(t,e,r,n,a){t.Ka=(A,h,f)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await LU(p.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,b)));const w=y&&y.targetChanges.get(g.targetId),I=y&&y.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,p.isPrimaryClient,w,I);return qU(p,g.targetId,T.wa),T.snapshot}(t,A,h,f);const s=await LU(t.localStore,e,!0),i=new zxe(e,s.Ts),l=i.ma(s.documents),c=Qb.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(l,t.isPrimaryClient,c);qU(t,r,u.wa);const d=new Wxe(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function tve(t,e,r){const n=nn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!EI(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await ZP(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&KO(n.remoteStore,a.targetId),tj(n,a.targetId)}).catch(Up)):(tj(n,a.targetId),await ZP(n.localStore,a.targetId,!0))}async function rve(t,e){const r=nn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),KO(r.remoteStore,n.targetId))}async function nve(t,e,r){const n=wJ(t);try{const a=await function(i,l){const c=nn(i),u=rr.now(),d=l.reduce((f,m)=>f.add(m.key),wn());let A,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Mc(),p=wn();return c.cs.getEntries(f,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(g=>{A=g;const x=[];for(const y of l){const b=bge(y,A.get(y.key).overlayedDocument);b!=null&&x.push(new Mf(y.key,b,lY(b.value.mapValue),us.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,x,l)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(A,p);return c.documentOverlayCache.saveOverlays(f,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:yY(A)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new fs(An)),u=u.insert(l,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await $b(n,a.changes),await Hb(n.remoteStore)}catch(a){const s=XO(a,"Failed to persist write");r.reject(s)}}async function gJ(t,e){const r=nn(t);try{const n=await xxe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Ur(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Ur(i.va):a.removedDocuments.size>0&&(Ur(i.va),i.va=!1))}),await $b(r,n,e)}catch(n){await Up(n)}}function GU(t,e,r){const n=nn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const l=i.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=nn(i);c.onlineState=l;let u=!1;c.queries.forEach((d,A)=>{for(const h of A.j_)h.Z_(l)&&(u=!0)}),u&&ZO(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ave(t,e,r){const n=nn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new fs(br.comparator);i=i.insert(s,ls.newNoDocument(s,$r.min()));const l=wn().add(s),c=new BI($r.min(),new Map,new fs(An),i,l);await gJ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),t6(n)}else await ZP(n.localStore,e,!1).then(()=>tj(n,e,r)).catch(Up)}async function sve(t,e){const r=nn(t),n=e.batch.batchId;try{const a=await gxe(r.localStore,e);vJ(r,n,null),xJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $b(r,a)}catch(a){await Up(a)}}async function ive(t,e,r){const n=nn(t);try{const a=await function(i,l){const c=nn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(A=>(Ur(A!==null),d=A.keys(),c.mutationQueue.removeMutationBatch(u,A))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);vJ(n,e,r),xJ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await $b(n,a)}catch(a){await Up(a)}}function xJ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function vJ(t,e,r){const n=nn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function tj(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||yJ(t,n)})}function yJ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(KO(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),t6(t))}function qU(t,e,r){for(const n of r)n instanceof hJ?(t.La.addReference(n.key,e),ove(t,n)):n instanceof mJ?(or("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||yJ(t,n.key)):Fr()}function ove(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(or("SyncEngine","New document in limbo: "+r),t.xa.add(n),t6(t))}function t6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new br(Yn.fromString(e)),n=t.qa.next();t.Na.set(n,new Xxe(r)),t.Oa=t.Oa.insert(r,n),lJ(t.remoteStore,new tf(ju(Lb(r.path)),n,"TargetPurposeLimboResolution",Eu.oe))}}async function $b(t,e,r){const n=nn(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const A=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,A?"current":"not-current")}if(u){a.push(u);const A=HO.Wi(c.targetId,u);s.push(A)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=nn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Tt.forEach(u,h=>Tt.forEach(h.$i,f=>d.persistence.referenceDelegate.addReference(A,h.targetId,f)).next(()=>Tt.forEach(h.Ui,f=>d.persistence.referenceDelegate.removeReference(A,h.targetId,f)))))}catch(A){if(!H0(A))throw A;or("LocalStore","Failed to update sequence numbers: "+A)}for(const A of u){const h=A.targetId;if(!A.fromCache){const f=d.os.get(h),m=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function lve(t,e){const r=nn(t);if(!r.currentUser.isEqual(e)){or("SyncEngine","User change. New user:",e.toKey());const n=await aJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new dr(Qt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $b(r,n.hs)}}function cve(t,e){const r=nn(t),n=r.Na.get(e);if(n&&n.va)return wn().add(n.key);{let a=wn();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const l=r.Fa.get(i);a=a.unionWith(l.view.Va)}return a}}function bJ(t){const e=nn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ave.bind(null,e),e.Ca.d_=Gxe.bind(null,e.eventManager),e.Ca.$a=qxe.bind(null,e.eventManager),e}function wJ(t){const e=nn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ive.bind(null,e),e}class R2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kI(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return nJ(this.persistence,new rJ,e.initialUser,this.serializer)}Ga(e){return new tJ(jI.Zr,this.serializer)}Wa(e){return new iJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}R2.provider={build:()=>new R2};class uve extends R2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await wJ(this.Ja.syncEngine),await Hb(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return nJ(this.persistence,new rJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Jge(n,e.asyncQueue,r)}Ha(e,r){const n=new Epe(r,this.persistence);return new Cpe(e.asyncQueue,n)}Ga(e){const r=hxe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ec.withCacheSize(this.cacheSizeBytes):ec.DEFAULT;return new VO(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Sxe(),vC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new iJ}}class wE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>GU(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lve.bind(null,this.syncEngine),await Hxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Kxe}()}createDatastore(e){const r=kI(e.databaseInfo.databaseId),n=function(s){return new Exe(s)}(e.databaseInfo);return function(s,i,l,c){return new Txe(s,i,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,l){return new jxe(n,a,s,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>GU(this.syncEngine,r,0),function(){return QU.D()?new QU:new Nxe}())}createSyncEngine(e,r){return function(a,s,i,l,c,u,d){const A=new Yxe(a,s,i,l,c,u);return d&&(A.Qa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=nn(a);or("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Vb(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}wE.provider={build:()=>new wE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ol("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new dr(Qt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=nn(a),l={documents:s.map(A=>O2(i.serializer,A))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Yn.emptyPath(),l,s.length),u=new Map;c.forEach(A=>{const h=jge(i.serializer,A);u.set(h.key.toString(),h)});const d=[];return s.forEach(A=>{const h=u.get(A.toString());Ur(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new _v(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=br.fromPath(n);this.mutations.push(new kO(a,this.precondition(a)))}),await async function(n,a){const s=nn(n),i={writes:a.map(l=>D2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,Yn.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Fr();r=$r.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new dr(Qt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($r.min())?us.exists(!1):us.updateTime(r):us.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($r.min()))throw new dr(Qt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return us.updateTime(r)}return us.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new $O(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new dve(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Rb(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!BY(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fve{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Po.UNAUTHENTICATED,this.clientId=CO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{or("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(or("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=XO(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function T5(t,e){t.asyncQueue.verifyOperationInProgress(),or("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await aJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await hve(t);or("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>VU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>VU(e.remoteStore,a)),t._onlineComponents=e}async function hve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){or("FirestoreClient","Using user provided OfflineComponentProvider");try{await T5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Qt.FAILED_PRECONDITION||a.code===Qt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;w0("Error using user provided cache. Falling back to memory cache: "+r),await T5(t,new R2)}}else or("FirestoreClient","Using default OfflineComponentProvider"),await T5(t,new R2);return t._offlineComponents}async function n6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(or("FirestoreClient","Using user provided OnlineComponentProvider"),await zU(t,t._uninitializedComponentsProvider._online)):(or("FirestoreClient","Using default OnlineComponentProvider"),await zU(t,new wE))),t._onlineComponents}function mve(t){return n6(t).then(e=>e.syncEngine)}function pve(t){return n6(t).then(e=>e.datastore)}async function NE(t){const e=await n6(t),r=e.eventManager;return r.onListen=Jxe.bind(null,e.syncEngine),r.onUnlisten=tve.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Zxe.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=rve.bind(null,e.syncEngine),r}function gve(t,e,r={}){const n=new xd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new r6({next:h=>{d.Za(),i.enqueueAndForget(()=>JO(s,A));const f=h.docs.has(l);!f&&h.fromCache?u.reject(new dr(Qt.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new dr(Qt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new e6(Lb(l.path),d,{includeMetadataChanges:!0,_a:!0});return YO(s,A)}(await NE(t),t.asyncQueue,e,r,n)),n.promise}function xve(t,e,r={}){const n=new xd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new r6({next:h=>{d.Za(),i.enqueueAndForget(()=>JO(s,A)),h.fromCache&&c.source==="server"?u.reject(new dr(Qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),A=new e6(l,d,{includeMetadataChanges:!0,_a:!0});return YO(s,A)}(await NE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(t,e,r){if(!r)throw new dr(Qt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CJ(t,e,r,n){if(e===!0&&n===!0)throw new dr(Qt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function XU(t){if(!br.isDocumentKey(t))throw new dr(Qt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YU(t){if(br.isDocumentKey(t))throw new dr(Qt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fr()}function uo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dr(Qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=OI(t);throw new dr(Qt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new dr(Qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new dr(Qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NJ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new dr(Qt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DI{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JU({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dr(Qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dr(Qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JU(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new zX;switch(n.type){case"firstParty":return new gpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new dr(Qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=WU.get(r);n&&(or("ComponentProvider","Removing Datastore"),WU.delete(r),n.terminate())}(this),Promise.resolve()}}function EJ(t,e,r,n={}){var a;const s=(t=uo(t,DI))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&w0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Po.MOCK_USER;else{l=Ffe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new dr(Qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Po(u)}t._authCredentials=new hpe(new qX(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vA(this.firestore,e,this._query)}}class Ao{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ao(this.firestore,e,this._key)}}class uf extends vA{constructor(e,r,n){super(e,r,Lb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ao(this.firestore,null,new br(e))}withConverter(e){return new uf(this.firestore,e,this._path)}}function At(t,e,...r){if(t=Is(t),_J("collection","path",e),t instanceof DI){const n=Yn.fromString(e,...r);return YU(n),new uf(t,null,n)}{if(!(t instanceof Ao||t instanceof uf))throw new dr(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yn.fromString(e,...r));return YU(n),new uf(t.firestore,null,n)}}function Gt(t,e,...r){if(t=Is(t),arguments.length===1&&(e=CO.newId()),_J("doc","path",e),t instanceof DI){const n=Yn.fromString(e,...r);return XU(n),new Ao(t,null,new br(n))}{if(!(t instanceof Ao||t instanceof uf))throw new dr(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yn.fromString(e,...r));return XU(n),new Ao(t.firestore,t instanceof uf?t.converter:null,new br(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $O(this,"async_queue_retry"),this.Vu=()=>{const n=vC();n&&or("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=vC();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=vC();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new xd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!H0(e))throw e;or("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw Ol("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=WO.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Fr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function e7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Kc extends DI{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new ZU,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZU(e),this._firestoreClient=void 0,await e}}}function SJ(t,e){const r=typeof t=="object"?t:hO(),n=typeof t=="string"?t:"(default)",a=AO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=jfe("firestore");s&&EJ(a,...s)}return a}function Hp(t){if(t._terminated)throw new dr(Qt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IJ(t),t._firestoreClient}function IJ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new zpe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NJ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new fve(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function BJ(t,e){w0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return vve(t,wE.provider,{build:n=>new uve(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function vve(t,e,r){if((t=uo(t,Kc))._firestoreClient||t._terminated)throw new dr(Qt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new dr(Qt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},IJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new S0(ni.fromBase64String(e))}catch(r){throw new dr(Qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new S0(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new dr(Qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new dr(Qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new dr(Qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yve=/^__.*__$/;class bve{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Mf(e,this.data,this.fieldMask,r,this.fieldTransforms):new Nv(e,this.data,r,this.fieldTransforms)}}class TJ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Mf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function PJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fr()}}class a6{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new a6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _E(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PJ(this.Cu)&&yve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wve{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||kI(e)}Qu(e,r,n,a=!1){return new a6({Cu:e,methodName:r,qu:n,path:cs.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ev(t){const e=t._freezeSettings(),r=kI(t._databaseId);return new wve(t._databaseId,!!e.ignoreUndefinedProperties,r)}function UI(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);o6("Data must be an object, but it was:",i,n);const l=jJ(n,i);let c,u;if(s.merge)c=new sc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const A of s.mergeFields){const h=rj(e,A,r);if(!i.contains(h))throw new dr(Qt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);FJ(d,h)||d.push(h)}c=new sc(d),u=i.fieldTransforms.filter(A=>c.covers(A.field))}else c=null,u=i.fieldTransforms;return new bve(new Oo(l),c,u)}class QI extends RI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof QI}}function s6(t,e,r,n){const a=t.Qu(1,e,r);o6("Data must be an object, but it was:",a,n);const s=[],i=Oo.empty();Qp(n,(c,u)=>{const d=l6(e,c,r);u=Is(u);const A=a.Nu(d);if(u instanceof QI)s.push(d);else{const h=Kb(u,A);h!=null&&(s.push(d),i.set(d,h))}});const l=new sc(s);return new TJ(i,l,a.fieldTransforms)}function i6(t,e,r,n,a,s){const i=t.Qu(1,e,r),l=[rj(e,n,r)],c=[a];if(s.length%2!=0)throw new dr(Qt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(rj(e,s[h])),c.push(s[h+1]);const u=[],d=Oo.empty();for(let h=l.length-1;h>=0;--h)if(!FJ(u,l[h])){const f=l[h];let m=c[h];m=Is(m);const p=i.Nu(f);if(m instanceof QI)u.push(f);else{const g=Kb(m,p);g!=null&&(u.push(f),d.set(f,g))}}const A=new sc(u);return new TJ(d,A,i.fieldTransforms)}function Nve(t,e,r,n=!1){return Kb(r,t.Qu(n?4:3,e))}function Kb(t,e){if(kJ(t=Is(t)))return o6("Unsupported field value:",e,t),jJ(t,e);if(t instanceof RI)return function(n,a){if(!PJ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=Kb(l,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Is(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=rr.fromDate(n);return{timestampValue:Yx(a.serializer,s)}}if(n instanceof rr){const s=new rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yx(a.serializer,s)}}if(n instanceof MI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof S0)return{bytesValue:kY(a.serializer,n._byteString)};if(n instanceof Ao){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:MO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof LI)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return jO(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${OI(n)}`)}(t,e)}function jJ(t,e){const r={};return aY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qp(t,(n,a)=>{const s=Kb(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function kJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rr||t instanceof MI||t instanceof S0||t instanceof Ao||t instanceof RI||t instanceof LI)}function o6(t,e,r){if(!kJ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=OI(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function rj(t,e,r){if((e=Is(e))instanceof $p)return e._internalPath;if(typeof e=="string")return l6(t,e);throw _E("Field path arguments must be of type string or ",t,!1,void 0,r)}const _ve=new RegExp("[~\\*/\\[\\]]");function l6(t,e,r){if(e.search(_ve)>=0)throw _E(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $p(...e.split("."))._internalPath}catch{throw _E(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function _E(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new dr(Qt.INVALID_ARGUMENT,l+t+c)}function FJ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ao(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Cve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(VI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Cve extends CE{data(){return super.data()}}function VI(t,e){return typeof e=="string"?l6(t,e):e instanceof $p?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new dr(Qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c6{}class HI extends c6{}function Yt(t,e,...r){let n=[];e instanceof c6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof $I).length,l=s.filter(c=>c instanceof Gb).length;if(i>1||i>0&&l>0)throw new dr(Qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Gb extends HI{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Gb(e,r,n)}_apply(e){const r=this._parse(e);return RJ(e._query,r),new vA(e.firestore,e.converter,KP(e._query,r))}_parse(e){const r=Ev(e.firestore);return function(s,i,l,c,u,d,A){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new dr(Qt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){r7(A,d);const f=[];for(const m of A)f.push(t7(c,s,m));h={arrayValue:{values:f}}}else h=t7(c,s,A)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||r7(A,d),h=Nve(l,i,A,d==="in"||d==="not-in");return kn.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function lr(t,e,r){const n=e,a=VI("where",t);return Gb._create(a,n,r)}class $I extends c6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new $I(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:va.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)RJ(i,c),i=KP(i,c)}(e._query,r),new vA(e.firestore,e.converter,KP(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class KI extends HI{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new KI(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new j2(s,i)}(e._query,this._field,this._direction);return new vA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new wv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function ln(t,e="asc"){const r=e,n=VI("orderBy",t);return KI._create(n,r)}class GI extends HI{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new GI(e,r,n)}_apply(e){return new vA(e.firestore,e.converter,gE(e._query,this._limit,this._limitType))}}function DJ(t){return GI._create("limit",t,"F")}function t7(t,e,r){if(typeof(r=Is(r))=="string"){if(r==="")throw new dr(Qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pY(e)&&r.indexOf("/")!==-1)throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Yn.fromString(r));if(!br.isDocumentKey(n))throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return T2(t,new br(n))}if(r instanceof Ao)return T2(t,r._key);throw new dr(Qt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OI(r)}.`)}function r7(t,e){if(!Array.isArray(t)||t.length===0)throw new dr(Qt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RJ(t,e){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new dr(Qt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new dr(Qt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class u6{convertValue(e,r="none"){switch(hp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return is(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(N0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Fr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Qp(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>is(i.doubleValue));return new LI(s)}convertGeoPoint(e){return new MI(is(e.latitude),is(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=TO(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(I2(e));default:return null}}convertTimestamp(e){const r=_f(e);return new rr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Yn.fromString(e);Ur(HY(n));const a=new _0(n.get(1),n.get(3)),s=new br(n.popFirst(5));return a.isEqual(r)||Ol(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Eve extends u6{constructor(e){super(),this.firestore=e}convertBytes(e){return new S0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ao(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zI extends CE{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Dy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(VI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Dy extends zI{data(e={}){return super.data(e)}}class d6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new km(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Dy(this._firestore,this._userDataWriter,n.key,n,new km(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new dr(Qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new Dy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new km(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Dy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new km(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:Sve(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Sve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){t=uo(t,Ao);const e=uo(t.firestore,Kc);return gve(Hp(e),t._key).then(r=>LJ(e,t,r))}class WI extends u6{constructor(e){super(),this.firestore=e}convertBytes(e){return new S0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ao(this.firestore,null,r)}}function Dt(t){t=uo(t,vA);const e=uo(t.firestore,Kc),r=Hp(e),n=new WI(e);return OJ(t._query),xve(r,t._query).then(a=>new d6(e,n,t,a))}function MJ(t,e,r){t=uo(t,Ao);const n=uo(t.firestore,Kc),a=qI(t.converter,e,r);return Sv(n,[UI(Ev(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,us.none())])}function rn(t,e,r,...n){t=uo(t,Ao);const a=uo(t.firestore,Kc),s=Ev(a);let i;return i=typeof(e=Is(e))=="string"||e instanceof $p?i6(s,"updateDoc",t._key,e,r,n):s6(s,"updateDoc",t._key,e),Sv(a,[i.toMutation(t._key,us.exists(!0))])}function Qn(t){return Sv(uo(t.firestore,Kc),[new _v(t._key,us.none())])}function En(t,e){const r=uo(t.firestore,Kc),n=Gt(t),a=qI(t.converter,e);return Sv(r,[UI(Ev(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,us.exists(!1))]).then(()=>n)}function I0(t,...e){var r,n,a;t=Is(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||e7(e[i])||(s=e[i],i++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(e7(e[i])){const A=e[i];e[i]=(r=A.next)===null||r===void 0?void 0:r.bind(A),e[i+1]=(n=A.error)===null||n===void 0?void 0:n.bind(A),e[i+2]=(a=A.complete)===null||a===void 0?void 0:a.bind(A)}let c,u,d;if(t instanceof Ao)u=uo(t.firestore,Kc),d=Lb(t._key.path),c={next:A=>{e[i]&&e[i](LJ(u,t,A))},error:e[i+1],complete:e[i+2]};else{const A=uo(t,vA);u=uo(A.firestore,Kc),d=A._query;const h=new WI(u);c={next:f=>{e[i]&&e[i](new d6(u,h,A,f))},error:e[i+1],complete:e[i+2]},OJ(t._query)}return function(h,f,m,p){const g=new r6(p),x=new e6(f,g,m);return h.asyncQueue.enqueueAndForget(async()=>YO(await NE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>JO(await NE(h),x))}}(Hp(u),d,l,c)}function Sv(t,e){return function(n,a){const s=new xd;return n.asyncQueue.enqueueAndForget(async()=>nve(await mve(n),a,s)),s.promise}(Hp(t),e)}function LJ(t,e,r){const n=r.docs.get(e._key),a=new WI(t);return new zI(t,a,e._key,n,new km(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ive={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ev(e)}set(e,r,n){this._verifyNotCommitted();const a=Hh(e,this._firestore),s=qI(a.converter,r,n),i=UI(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,us.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=Hh(e,this._firestore);let i;return i=typeof(r=Is(r))=="string"||r instanceof $p?i6(this._dataReader,"WriteBatch.update",s._key,r,n,a):s6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,us.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new _v(r._key,us.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dr(Qt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(t,e){if((t=Is(t)).firestore!==e)throw new dr(Qt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Ev(r)}get(r){const n=Hh(r,this._firestore),a=new Eve(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Fr();const i=s[0];if(i.isFoundDocument())return new CE(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new CE(this._firestore,a,n._key,null,n.converter);throw Fr()})}set(r,n,a){const s=Hh(r,this._firestore),i=qI(s.converter,n,a),l=UI(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const i=Hh(r,this._firestore);let l;return l=typeof(n=Is(n))=="string"||n instanceof $p?i6(this._dataReader,"Transaction.update",i._key,n,a,s):s6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=Hh(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Hh(e,this._firestore),n=new WI(this._firestore);return super.get(e).then(a=>new zI(this._firestore,n,r._key,a._document,new km(!1,!1),r.converter))}}function Di(t,e,r){t=uo(t,Kc);const n=Object.assign(Object.assign({},Ive),r);return function(s){if(s.maxAttempts<1)throw new dr(Qt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,l){const c=new xd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await pve(s);new Ave(s.asyncQueue,u,l,i,c).au()}),c.promise}(Hp(t),a=>e(new QJ(t,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){return Hp(t=uo(t,Kc)),new UJ(t,e=>Sv(t,e))}(function(e,r=!0){(function(a){bv=a})(vv),$x(new up("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new Kc(new mpe(n.getProvider("auth-internal")),new vpe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new dr(Qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),A0(zL,"4.7.3",e),A0(zL,"4.7.3","esm2017")})();const Bve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:u6,Bytes:S0,CollectionReference:uf,DocumentReference:Ao,DocumentSnapshot:zI,FieldPath:$p,FieldValue:RI,Firestore:Kc,FirestoreError:dr,GeoPoint:MI,Query:vA,QueryCompositeFilterConstraint:$I,QueryConstraint:HI,QueryDocumentSnapshot:Dy,QueryFieldFilterConstraint:Gb,QueryLimitConstraint:GI,QueryOrderByConstraint:KI,QuerySnapshot:d6,SnapshotMetadata:km,Timestamp:rr,Transaction:QJ,VectorValue:LI,WriteBatch:UJ,_AutoId:CO,_ByteString:ni,_DatabaseId:_0,_DocumentKey:br,_EmptyAuthCredentialsProvider:zX,_FieldPath:cs,_cast:uo,_logWarn:w0,_validateIsNotUsedTogether:CJ,addDoc:En,collection:At,connectFirestoreEmulator:EJ,deleteDoc:Qn,doc:Gt,enableIndexedDbPersistence:BJ,ensureFirestoreConfigured:Hp,executeWrite:Sv,getDoc:fo,getDocs:Dt,getFirestore:SJ,limit:DJ,onSnapshot:I0,orderBy:ln,query:Yt,runTransaction:Di,setDoc:MJ,updateDoc:rn,where:lr,writeBatch:K0},Symbol.toStringTag,{value:"Module"})),Tve={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},VJ=fO(Tve),ke=SJ(VJ),vp=UX(VJ);BJ(ke).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Pve(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState(!1),d=Bb(),A=f=>{if(localStorage.setItem("role",f),f==="admin")return d("/admin");if(f==="vendedor_pollo")return d("/admin/salesV2");if(f==="vendedor_ropa")return d("/admin/salesClothes");if(f==="vendedor_dulces")return d("/admin/salesCandies")},h=async f=>{if(f.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),await Z0e(vp,PX);const m=await J0e(vp,t,r),p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await fo(Gt(ke,"users",p));if(!g.exists()){l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data(),y=x.role||"",b=x.name||"";if(!["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].includes(y)){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),b&&localStorage.setItem("user_name",b),A(y)}catch(m){const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas.":p==="auth/user-not-found"?"Usuario no encontrado.":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(m==null?void 0:m.message)||"Error al iniciar sesin.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:f=>e(f.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:f=>n(f.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(f=>!f),children:a?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&o.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function xn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=IX(vp,async l=>{if(l){const c=Gt(ke,"users",l.uid),u=await fo(c);if(u.exists()){const d=u.data().role;s(e.includes(d))}}n(!1)});return()=>i()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:o.jsx(mm,{to:"/"})}function jve({role:t}){const e="/admin",r=({isActive:z})=>`block rounded px-3 py-2 text-sm ${z?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=Bb(),[a,s]=v.useState(!1),[i,l]=v.useState(!1),[c,u]=v.useState(!1),[d,A]=v.useState(!1),[h,f]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(!1),[y,b]=v.useState(!1),[w,I]=v.useState(!1),[T,C]=v.useState(!1),[E,S]=v.useState(!1),[O,B]=v.useState(!1),[P,D]=v.useState(!1),[X,de]=v.useState(!1),[re,ie]=v.useState(!1),[ce,J]=v.useState(!1),pe=async()=>{await bI(vp),n("/")},Se=({open:z,onClick:R,children:G})=>o.jsxs("button",{type:"button",onClick:R,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:G}),o.jsx("span",{className:"text-xs",children:z?"":""})]}),k=({open:z,onClick:R,title:G})=>o.jsxs("button",{type:"button",onClick:R,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:G}),o.jsx("span",{className:"text-xs",children:z?"":""})]}),F=t==="admin",H=t==="vendedor_pollo"||t==="vendedor",M=t==="vendedor_ropa",L=t==="vendedor_dulces";return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${a?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>s(!a),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":a?"Expandir men":"Colapsar men",children:a?o.jsx("span",{title:"Expandir men",children:"Menu "}):o.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!a&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[F&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:i,onClick:()=>l(z=>!z),children:"Pollos Bea"}),i&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:c,onClick:()=>u(z=>!z),title:"Inventarios"}),c&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),o.jsx(on,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),o.jsx(k,{open:d,onClick:()=>A(z=>!z),title:"Finanzas"}),d&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),o.jsx(on,{to:`${e}/billing`,className:r,children:"Facturacion"}),o.jsx(on,{to:`${e}/expenses`,className:r,children:"Gastos"}),o.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),o.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"}),o.jsx(on,{to:`${e}/billhistoric`,className:r,children:"Historial de Cierres"})]}),o.jsx(k,{open:h,onClick:()=>f(z=>!z),title:"Productos"}),h&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:m,onClick:()=>p(z=>!z),children:"Gonper"}),m&&o.jsx("div",{className:"pb-2",children:g&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/notebooksInventory`,className:r,children:"Productos y Precios"})})})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:O,onClick:()=>B(z=>!z),children:"CandyShop"}),O&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:X,onClick:()=>de(z=>!z),title:"Vendedores"}),X&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),X&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsVendorsCandies`,className:r,children:"Sub ordenes"})}),X&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsPricesCandies`,className:r,children:"Precios Venta"})}),o.jsx(k,{open:P,onClick:()=>D(z=>!z),title:"Inventario"}),P&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/mainordersCandies`,className:r,children:"Ordenes Maestras"})}),P&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/inventoryMainOrderCandies`,className:r,children:"Lista de Ordenes"})}),P&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/inventoryCandies`,className:r,children:"Lista Productos"})}),P&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsCandies`,className:r,children:"Productos"})}),o.jsx(k,{open:re,onClick:()=>ie(z=>!z),title:"Finanzas"}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/datacenter`,className:r,children:"Data Center"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cashDeliveries`,className:r,children:"Entregas Cash"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/transactionCandies`,className:r,children:"Transacciones"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierres"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/reporteCierresCandies`,className:r,children:"Reporte Cierres"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/billingsCandies`,className:r,children:"Facturas"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/consolidatedVendors`,className:r,children:"Consolidado Vendedores"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/dashboardCandies`,className:r,children:"Dashboard"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/customersCandies`,className:r,children:"Clientes"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/vendorsCandies`,className:r,children:"Vendedores"})}),re&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/expensesCandies`,className:r,children:"Gastos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(Se,{open:ce,onClick:()=>J(z=>!z),children:"Operaciones Otras"}),ce&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/users`,className:r,children:"Usuarios"}),o.jsx(on,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),o.jsx(on,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),H&&o.jsxs("div",{className:"border rounded",children:[o.jsx(Se,{open:d,onClick:()=>A(z=>!z),children:"Finanzas (Pollo)"}),d&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/salesV2`,className:r,children:"Venta"}),o.jsx(on,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),L&&o.jsxs("div",{className:"border rounded",children:[o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/salesCandies`,className:r,children:"Venta"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/transactionCandies`,className:r,children:"Ventas del dia"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/cierreVentasCandies`,className:r,children:"Cierre de Ventas"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsVendorsCandies`,className:r,children:"Pedidos"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/customersCandies`,className:r,children:"Clientes"})})]}),M&&o.jsxs("div",{className:"border rounded",children:[o.jsx(Se,{open:m,onClick:()=>p(z=>!z),children:"Operaciones Ropa"}),m&&o.jsxs("div",{className:"pb-2",children:[o.jsx(k,{open:T,onClick:()=>C(z=>!z),title:"Ventas"}),T&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(on,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),o.jsx(on,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),o.jsx(k,{open:y,onClick:()=>b(z=>!z),title:"Productos"}),y&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),o.jsx(k,{open:w,onClick:()=>I(z=>!z),title:"Clientes"}),w&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(on,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:pe,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(LW,{})})]})}function N1(...t){return t.filter(Boolean).join(" ")}function kve({role:t}){const e=Bb(),r=Df(),n="/admin",a=t==="admin",s=t==="vendedor_pollo",i=t==="vendedor_dulces",[l,c]=v.useState(()=>s?"POLLO":i?"DULCES":"POLLO"),[u,d]=v.useState(!1),A=v.useMemo(()=>a?l==="POLLO"?[{key:"dash",label:"Dashboard",to:`${n}/financialDashboard`},{key:"inv",label:"Inventario",to:`${n}/batches`},{key:"invPag",label:"Factura",to:`${n}/paidBatches`},{key:"gastos",label:"Gastos",to:`${n}/expenses`}]:[{key:"dc",label:"Data Center Reporte",to:`${n}/datacenter`},{key:"maes",label:"Inventario Global",to:`${n}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${n}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${n}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${n}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${n}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${n}/cashDeliveries`},{key:"items",label:"Productos",to:`${n}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${n}/productsPricesCandies`},{key:"precios",label:"Precio Ventas",to:`${n}/productsPricesCandies`},{key:"precios",label:"Productos Gonper",to:`${n}/notebooksInventory`}]:s?[{key:"venta",label:"Venta",to:`${n}/salesV2`},{key:"inv",label:"Inventario",to:`${n}/batches`},{key:"cierre",label:"Cierre",to:`${n}/bills`}]:i?[{key:"venta",label:"Vender",to:`${n}/salesCandies`},{key:"precios",label:"Precios",to:`${n}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${n}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${n}/customersCandies`},{key:"trx",label:"Ventas",to:`${n}/transactionCandies`},{key:"cier",label:"Cierre",to:`${n}/cierreVentasCandies`}]:[{key:"home",label:"Inicio",to:`${n}`}],[a,s,i,l]);v.useEffect(()=>{a&&A.length&&e(A[0].to,{replace:!0})},[l]),v.useEffect(()=>{u&&d(!1)},[r.pathname]),v.useEffect(()=>{const g=x=>{x.key==="Escape"&&d(!1)};return u&&window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[u]);const h=async()=>{await bI(vp),d(!1),e("/")},f=({isActive:g})=>N1("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",g?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),m=A.length<=4,p=({isActive:g})=>N1("w-full flex items-center justify-between px-4 py-3 rounded-xl border",g?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return o.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[a?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>c("POLLO"),className:N1("px-3 py-2 rounded-2xl text-sm font-semibold",l==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),o.jsx("button",{type:"button",onClick:()=>c("DULCES"),className:N1("px-3 py-2 rounded-2xl text-sm font-semibold",l==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:s?"Pollos Bea":i?"CandyShop":"Posys"}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),u&&o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>d(!1),"aria-label":"Cerrar men"}),o.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[o.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),o.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:A.map(g=>o.jsxs(on,{to:g.to,className:p,children:[o.jsx("span",{className:"font-semibold",children:g.label}),o.jsx("span",{className:"text-sm opacity-80",children:""})]},g.key))}),o.jsx("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:o.jsx("button",{onClick:h,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"})})]})]}),o.jsx("main",{className:N1("flex-1 overflow-y-auto px-3 pt-3",m?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:o.jsx(LW,{})}),m&&o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:o.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:A.map(g=>o.jsx(on,{to:g.to,className:f,children:g.label},g.key))})})]})}const HJ=6048e5,Fve=864e5,n7=Symbol.for("constructDateFrom");function Cd(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&n7 in t?t[n7](e):t instanceof Date?new t.constructor(e):new Date(e)}function $l(t,e){return Cd(e||t,t)}function Ove(t,e,r){const n=$l(t,r==null?void 0:r.in);return isNaN(e)?Cd(t,NaN):(n.setDate(n.getDate()+e),n)}function Dve(t,e,r){const n=$l(t,r==null?void 0:r.in);if(isNaN(e))return Cd(t,NaN);const a=n.getDate(),s=Cd(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Rve={};function XI(){return Rve}function M2(t,e){var l,c,u,d;const r=XI(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=$l(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function EE(t,e){return M2(t,{...e,weekStartsOn:1})}function $J(t,e){const r=$l(t,e==null?void 0:e.in),n=r.getFullYear(),a=Cd(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=EE(a),i=Cd(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=EE(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function a7(t){const e=$l(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Mve(t,...e){const r=Cd.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function s7(t,e){const r=$l(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Lve(t,e,r){const[n,a]=Mve(r==null?void 0:r.in,t,e),s=s7(n),i=s7(a),l=+s-a7(s),c=+i-a7(i);return Math.round((l-c)/Fve)}function Uve(t,e){const r=$J(t,e),n=Cd(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),EE(n)}function Qve(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Vve(t){return!(!Qve(t)&&typeof t!="number"||isNaN(+$l(t)))}function Td(t,e){const r=$l(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Pd(t,e){const r=$l(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Hve(t,e){const r=$l(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const $ve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Kve=(t,e,r)=>{let n;const a=$ve[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function P5(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Gve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wve={date:P5({formats:Gve,defaultWidth:"full"}),time:P5({formats:qve,defaultWidth:"full"}),dateTime:P5({formats:zve,defaultWidth:"full"})},Xve={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yve=(t,e,r,n)=>Xve[t];function _1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const Jve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Zve={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},e1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},t1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},a1e=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},s1e={ordinalNumber:a1e,era:_1({values:Jve,defaultWidth:"wide"}),quarter:_1({values:Zve,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_1({values:e1e,defaultWidth:"wide"}),day:_1({values:t1e,defaultWidth:"wide"}),dayPeriod:_1({values:r1e,defaultWidth:"wide",formattingValues:n1e,defaultFormattingWidth:"wide"})};function C1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?o1e(l,A=>A.test(i)):i1e(l,A=>A.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function i1e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function o1e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function l1e(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(a.length);return{value:i,rest:l}}}const c1e=/^(\d+)(th|st|nd|rd)?/i,u1e=/\d+/i,d1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},A1e={any:[/^b/i,/^(a|c)/i]},f1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h1e={any:[/1/i,/2/i,/3/i,/4/i]},m1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},x1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},v1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b1e={ordinalNumber:l1e({matchPattern:c1e,parsePattern:u1e,valueCallback:t=>parseInt(t,10)}),era:C1({matchPatterns:d1e,defaultMatchWidth:"wide",parsePatterns:A1e,defaultParseWidth:"any"}),quarter:C1({matchPatterns:f1e,defaultMatchWidth:"wide",parsePatterns:h1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:C1({matchPatterns:m1e,defaultMatchWidth:"wide",parsePatterns:p1e,defaultParseWidth:"any"}),day:C1({matchPatterns:g1e,defaultMatchWidth:"wide",parsePatterns:x1e,defaultParseWidth:"any"}),dayPeriod:C1({matchPatterns:v1e,defaultMatchWidth:"any",parsePatterns:y1e,defaultParseWidth:"any"})},w1e={code:"en-US",formatDistance:Kve,formatLong:Wve,formatRelative:Yve,localize:s1e,match:b1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N1e(t,e){const r=$l(t,e==null?void 0:e.in);return Lve(r,Hve(r))+1}function _1e(t,e){const r=$l(t,e==null?void 0:e.in),n=+EE(r)-+Uve(r);return Math.round(n/HJ)+1}function KJ(t,e){var d,A,h,f;const r=$l(t,e==null?void 0:e.in),n=r.getFullYear(),a=XI(),s=(e==null?void 0:e.firstWeekContainsDate)??((A=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(h=a.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=Cd((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const l=M2(i,e),c=Cd((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=M2(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function C1e(t,e){var l,c,u,d;const r=XI(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=KJ(t,e),s=Cd((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),M2(s,e)}function E1e(t,e){const r=$l(t,e==null?void 0:e.in),n=+M2(r,e)-+C1e(r,e);return Math.round(n/HJ)+1}function ma(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const xh={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return ma(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ma(r+1,2)},d(t,e){return ma(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ma(t.getHours()%12||12,e.length)},H(t,e){return ma(t.getHours(),e.length)},m(t,e){return ma(t.getMinutes(),e.length)},s(t,e){return ma(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ma(a,e.length)}},pg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},i7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return xh.y(t,e)},Y:function(t,e,r,n){const a=KJ(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return ma(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):ma(s,e.length)},R:function(t,e){const r=$J(t);return ma(r,e.length)},u:function(t,e){const r=t.getFullYear();return ma(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return ma(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return ma(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return xh.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return ma(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=E1e(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):ma(a,e.length)},I:function(t,e,r){const n=_1e(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):ma(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):xh.d(t,e)},D:function(t,e,r){const n=N1e(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ma(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ma(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ma(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return ma(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=pg.noon:n===0?a=pg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=pg.evening:n>=12?a=pg.afternoon:n>=4?a=pg.morning:a=pg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return xh.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):xh.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ma(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):ma(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):xh.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):xh.s(t,e)},S:function(t,e){return xh.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return l7(n);case"XXXX":case"XX":return xm(n);case"XXXXX":case"XXX":default:return xm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return l7(n);case"xxxx":case"xx":return xm(n);case"xxxxx":case"xxx":default:return xm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+o7(n,":");case"OOOO":default:return"GMT"+xm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+o7(n,":");case"zzzz":default:return"GMT"+xm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return ma(n,e.length)},T:function(t,e,r){return ma(+t,e.length)}};function o7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+ma(s,2)}function l7(t,e){return t%60===0?(t>0?"-":"+")+ma(Math.abs(t)/60,2):xm(t,e)}function xm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=ma(Math.trunc(n/60),2),s=ma(n%60,2);return r+a+e+s}const c7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},S1e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return c7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",c7(n,e)).replace("{{time}}",GJ(a,e))},I1e={p:GJ,P:S1e},B1e=/^D+$/,T1e=/^Y+$/,P1e=["D","DD","YY","YYYY"];function j1e(t){return B1e.test(t)}function k1e(t){return T1e.test(t)}function F1e(t,e,r){const n=O1e(t,e,r);if(console.warn(n),P1e.includes(t))throw new RangeError(n)}function O1e(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const D1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R1e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M1e=/^'([^]*?)'?$/,L1e=/''/g,U1e=/[a-zA-Z]/;function wr(t,e,r){var d,A,h,f;const n=XI(),a=n.locale??w1e,s=n.firstWeekContainsDate??((A=(d=n.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??1,i=n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,l=$l(t,r==null?void 0:r.in);if(!Vve(l))throw new RangeError("Invalid time value");let c=e.match(R1e).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=I1e[p];return g(m,a.formatLong)}return m}).join("").match(D1e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Q1e(m)};if(i7[p])return{isToken:!0,value:m};if(p.match(U1e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(k1e(p)||j1e(p))&&F1e(p,e,String(t));const g=i7[p[0]];return g(l,p,a.localize,u)}).join("")}function Q1e(t){const e=t.match(M1e);return e?e[1].replace(L1e,"'"):t}function qJ(t,e,r){return Ove(t,-14,r)}function V1e(t,e,r){return Dve(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nj=function(t,e){return nj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},nj(t,e)};function jd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nj(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var aj=function(){return aj=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},aj.apply(this,arguments)};function Il(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function nl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function vN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var Cf=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),YI=function(t,e){return Cf.fromClientRect(t,e.getBoundingClientRect())},H1e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Cf(0,0,n,a)},JI=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Xs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},u7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yN=0;yN<u7.length;yN++)$1e[u7.charCodeAt(yN)]=yN;var d7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bN=0;bN<d7.length;bN++)sy[d7.charCodeAt(bN)]=bN;var K1e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=sy[t.charCodeAt(n)],i=sy[t.charCodeAt(n+1)],l=sy[t.charCodeAt(n+2)],c=sy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},G1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},q1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},$m=5,A6=11,j5=2,z1e=A6-$m,zJ=65536>>$m,W1e=1<<$m,k5=W1e-1,X1e=1024>>$m,Y1e=zJ+X1e,J1e=Y1e,Z1e=32,eye=J1e+Z1e,tye=65536>>A6,rye=1<<z1e,nye=rye-1,A7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},aye=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},sye=function(t,e){var r=K1e(t),n=Array.isArray(r)?q1e(r):new Uint32Array(r),a=Array.isArray(r)?G1e(r):new Uint16Array(r),s=24,i=A7(a,s/2,n[4]/2),l=n[5]===2?A7(a,(s+n[4])/2):aye(n,Math.ceil((s+n[4])/4));return new iye(n[0],n[1],n[2],n[3],i,l)},iye=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>$m],r=(r<<j5)+(e&k5),this.data[r];if(e<=65535)return r=this.index[zJ+(e-55296>>$m)],r=(r<<j5)+(e&k5),this.data[r];if(e<this.highStart)return r=eye-tye+(e>>A6),r=this.index[r],r+=e>>$m&nye,r=this.index[r],r=(r<<j5)+(e&k5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),f7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wN=0;wN<f7.length;wN++)oye[f7.charCodeAt(wN)]=wN;var lye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",h7=50,cye=1,WJ=2,XJ=3,uye=4,dye=5,m7=7,YJ=8,p7=9,Wh=10,sj=11,g7=12,ij=13,Aye=14,iy=15,oj=16,NN=17,E1=18,fye=19,x7=20,lj=21,S1=22,F5=23,gg=24,Bc=25,oy=26,ly=27,xg=28,hye=29,Im=30,mye=31,_N=32,CN=33,cj=34,uj=35,dj=36,L2=37,Aj=38,yC=39,bC=40,O5=41,JJ=42,pye=43,gye=[9001,65288],ZJ="!",Pn="",EN="",fj=sye(lye),FA=[Im,dj],hj=[cye,WJ,XJ,dye],eZ=[Wh,YJ],v7=[ly,oy],xye=hj.concat(eZ),y7=[Aj,yC,bC,cj,uj],vye=[iy,ij],yye=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var l=fj.get(s);if(l>h7?(a.push(!0),l-=h7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(oj);if(l===uye||l===sj){if(i===0)return n.push(i),r.push(Im);var c=r[i-1];return xye.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Im))}if(n.push(i),l===mye)return r.push(e==="strict"?lj:L2);if(l===JJ||l===hye)return r.push(Im);if(l===pye)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(L2):r.push(Im);r.push(l)}),[n,r,a]},D5=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==Wh)break}if(a===Wh)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==Wh)break}if(l!==Wh)break}return!1},b7=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Wh)r--;else return n}return 0},bye=function(t,e,r,n,a){if(r[n]===0)return Pn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Pn;var i=s-1,l=s+1,c=e[s],u=i>=0?e[i]:0,d=e[l];if(c===WJ&&d===XJ)return Pn;if(hj.indexOf(c)!==-1)return ZJ;if(hj.indexOf(d)!==-1||eZ.indexOf(d)!==-1)return Pn;if(b7(s,e)===YJ)return EN;if(fj.get(t[s])===sj||(c===_N||c===CN)&&fj.get(t[l])===sj||c===m7||d===m7||c===p7||[Wh,ij,iy].indexOf(c)===-1&&d===p7||[NN,E1,fye,gg,xg].indexOf(d)!==-1||b7(s,e)===S1||D5(F5,S1,s,e)||D5([NN,E1],lj,s,e)||D5(g7,g7,s,e))return Pn;if(c===Wh)return EN;if(c===F5||d===F5)return Pn;if(d===oj||c===oj)return EN;if([ij,iy,lj].indexOf(d)!==-1||c===Aye||u===dj&&vye.indexOf(c)!==-1||c===xg&&d===dj||d===x7||FA.indexOf(d)!==-1&&c===Bc||FA.indexOf(c)!==-1&&d===Bc||c===ly&&[L2,_N,CN].indexOf(d)!==-1||[L2,_N,CN].indexOf(c)!==-1&&d===oy||FA.indexOf(c)!==-1&&v7.indexOf(d)!==-1||v7.indexOf(c)!==-1&&FA.indexOf(d)!==-1||[ly,oy].indexOf(c)!==-1&&(d===Bc||[S1,iy].indexOf(d)!==-1&&e[l+1]===Bc)||[S1,iy].indexOf(c)!==-1&&d===Bc||c===Bc&&[Bc,xg,gg].indexOf(d)!==-1)return Pn;if([Bc,xg,gg,NN,E1].indexOf(d)!==-1)for(var A=s;A>=0;){var h=e[A];if(h===Bc)return Pn;if([xg,gg].indexOf(h)!==-1)A--;else break}if([ly,oy].indexOf(d)!==-1)for(var A=[NN,E1].indexOf(c)!==-1?i:s;A>=0;){var h=e[A];if(h===Bc)return Pn;if([xg,gg].indexOf(h)!==-1)A--;else break}if(Aj===c&&[Aj,yC,cj,uj].indexOf(d)!==-1||[yC,cj].indexOf(c)!==-1&&[yC,bC].indexOf(d)!==-1||[bC,uj].indexOf(c)!==-1&&d===bC||y7.indexOf(c)!==-1&&[x7,oy].indexOf(d)!==-1||y7.indexOf(d)!==-1&&c===ly||FA.indexOf(c)!==-1&&FA.indexOf(d)!==-1||c===gg&&FA.indexOf(d)!==-1||FA.concat(Bc).indexOf(c)!==-1&&d===S1&&gye.indexOf(t[l])===-1||FA.concat(Bc).indexOf(d)!==-1&&c===E1)return Pn;if(c===O5&&d===O5){for(var f=r[s],m=1;f>0&&(f--,e[f]===O5);)m++;if(m%2!==0)return Pn}return c===_N&&d===CN?Pn:EN},wye=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=yye(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Bc,Im,JJ].indexOf(l)!==-1?L2:l}));var i=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},Nye=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===ZJ,this.start=n,this.end=a}return t.prototype.slice=function(){return Xs.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),_ye=function(t,e){var r=JI(t),n=wye(r,e),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Pn;u<l&&(d=bye(r,s,a,++u,i))===Pn;);if(d!==Pn||u===l){var A=new Nye(r,d,c,u);return c=u,{value:A,done:!1}}return{done:!0,value:null}}}},Cye=1,Eye=2,qb=4,w7=8,SE=10,N7=47,Ry=92,Sye=9,Iye=32,SN=34,I1=61,Bye=35,Tye=36,Pye=37,IN=39,BN=40,B1=41,jye=95,tc=45,kye=33,Fye=60,Oye=62,Dye=64,Rye=91,Mye=93,Lye=61,Uye=123,TN=63,Qye=125,_7=124,Vye=126,Hye=128,C7=65533,R5=42,Fm=43,$ye=44,Kye=58,Gye=59,U2=46,qye=0,zye=8,Wye=11,Xye=14,Yye=31,Jye=127,$d=-1,tZ=48,rZ=97,nZ=101,Zye=102,e2e=117,t2e=122,aZ=65,sZ=69,iZ=70,r2e=85,n2e=90,il=function(t){return t>=tZ&&t<=57},a2e=function(t){return t>=55296&&t<=57343},vg=function(t){return il(t)||t>=aZ&&t<=iZ||t>=rZ&&t<=Zye},s2e=function(t){return t>=rZ&&t<=t2e},i2e=function(t){return t>=aZ&&t<=n2e},o2e=function(t){return s2e(t)||i2e(t)},l2e=function(t){return t>=Hye},PN=function(t){return t===SE||t===Sye||t===Iye},IE=function(t){return o2e(t)||l2e(t)||t===jye},E7=function(t){return IE(t)||il(t)||t===tc},c2e=function(t){return t>=qye&&t<=zye||t===Wye||t>=Xye&&t<=Yye||t===Jye},jh=function(t,e){return t!==Ry?!1:e!==SE},jN=function(t,e,r){return t===tc?IE(e)||jh(e,r):IE(t)?!0:!!(t===Ry&&jh(t,e))},M5=function(t,e,r){return t===Fm||t===tc?il(e)?!0:e===U2&&il(r):il(t===U2?e:t)},u2e=function(t){var e=0,r=1;(t[e]===Fm||t[e]===tc)&&(t[e]===tc&&(r=-1),e++);for(var n=[];il(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Xs.apply(void 0,n),10):0;t[e]===U2&&e++;for(var s=[];il(t[e]);)s.push(t[e++]);var i=s.length,l=i?parseInt(Xs.apply(void 0,s),10):0;(t[e]===sZ||t[e]===nZ)&&e++;var c=1;(t[e]===Fm||t[e]===tc)&&(t[e]===tc&&(c=-1),e++);for(var u=[];il(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Xs.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},d2e={type:2},A2e={type:3},f2e={type:4},h2e={type:13},m2e={type:8},p2e={type:21},g2e={type:9},x2e={type:10},v2e={type:11},y2e={type:12},b2e={type:14},kN={type:23},w2e={type:1},N2e={type:25},_2e={type:24},C2e={type:26},E2e={type:27},S2e={type:28},I2e={type:29},B2e={type:31},mj={type:32},oZ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(JI(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==mj;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case SN:return this.consumeStringToken(SN);case Bye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(E7(r)||jh(n,a)){var s=jN(r,n,a)?Eye:Cye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Tye:if(this.peekCodePoint(0)===I1)return this.consumeCodePoint(),h2e;break;case IN:return this.consumeStringToken(IN);case BN:return d2e;case B1:return A2e;case R5:if(this.peekCodePoint(0)===I1)return this.consumeCodePoint(),b2e;break;case Fm:if(M5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case $ye:return f2e;case tc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(M5(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(jN(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===tc&&u===Oye)return this.consumeCodePoint(),this.consumeCodePoint(),_2e;break;case U2:if(M5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case N7:if(this.peekCodePoint(0)===R5)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===R5&&(d=this.consumeCodePoint(),d===N7))return this.consumeToken();if(d===$d)return this.consumeToken()}break;case Kye:return C2e;case Gye:return E2e;case Fye:if(this.peekCodePoint(0)===kye&&this.peekCodePoint(1)===tc&&this.peekCodePoint(2)===tc)return this.consumeCodePoint(),this.consumeCodePoint(),N2e;break;case Dye:var A=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(jN(A,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case Rye:return S2e;case Ry:if(jh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Mye:return I2e;case Lye:if(this.peekCodePoint(0)===I1)return this.consumeCodePoint(),m2e;break;case Uye:return v2e;case Qye:return y2e;case e2e:case r2e:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Fm&&(vg(p)||p===TN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _7:if(this.peekCodePoint(0)===I1)return this.consumeCodePoint(),g2e;if(this.peekCodePoint(0)===_7)return this.consumeCodePoint(),p2e;break;case Vye:if(this.peekCodePoint(0)===I1)return this.consumeCodePoint(),x2e;break;case $d:return mj}return PN(e)?(this.consumeWhiteSpace(),B2e):il(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):IE(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Xs(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();vg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===TN&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Xs.apply(void 0,e.map(function(c){return c===TN?tZ:c})),16),s=parseInt(Xs.apply(void 0,e.map(function(c){return c===TN?iZ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Xs.apply(void 0,e),16);if(this.peekCodePoint(0)===tc&&vg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];vg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Xs.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===BN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===BN?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===$d)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===IN||r===SN){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===$d||this.peekCodePoint(0)===B1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),kN)}for(;;){var a=this.consumeCodePoint();if(a===$d||a===B1)return{type:22,value:Xs.apply(void 0,e)};if(PN(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===$d||this.peekCodePoint(0)===B1?(this.consumeCodePoint(),{type:22,value:Xs.apply(void 0,e)}):(this.consumeBadUrlRemnants(),kN);if(a===SN||a===IN||a===BN||c2e(a))return this.consumeBadUrlRemnants(),kN;if(a===Ry)if(jh(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),kN;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;PN(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===B1||e===$d)return;jh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Xs.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===$d||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===SE)return this._value.splice(0,n),w2e;if(a===Ry){var s=this._value[n+1];s!==$d&&s!==void 0&&(s===SE?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):jh(a,s)&&(r+=this.consumeStringSlice(n),r+=Xs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=qb,n=this.peekCodePoint(0);for((n===Fm||n===tc)&&e.push(this.consumeCodePoint());il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===U2&&il(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=w7;il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===sZ||n===nZ)&&((a===Fm||a===tc)&&il(s)||il(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=w7;il(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[u2e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(jN(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Pye?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vg(e)){for(var r=Xs(e);vg(this.peekCodePoint(0))&&r.length<6;)r+=Xs(this.consumeCodePoint());PN(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||a2e(n)||n>1114111?C7:n}return e===$d?C7:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(E7(r))e+=Xs(r);else if(jh(r,this.peekCodePoint(0)))e+=Xs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),lZ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new oZ;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||P2e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?mj:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),zb=function(t){return t.type===15},Iv=function(t){return t.type===17},Ea=function(t){return t.type===20},T2e=function(t){return t.type===0},pj=function(t,e){return Ea(t)&&t.value===e},cZ=function(t){return t.type!==31},Zx=function(t){return t.type!==31&&t.type!==4},yA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},P2e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},B0=function(t){return t.type===17||t.type===15},di=function(t){return t.type===16||B0(t)},uZ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Ro={type:17,number:0,flags:qb},f6={type:16,number:50,flags:qb},Xh={type:16,number:100,flags:qb},cy=function(t,e,r){var n=t[0],a=t[1];return[La(n,e),La(typeof a<"u"?a:n,r)]},La=function(t,e){if(t.type===16)return t.number/100*e;if(zb(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},dZ="deg",AZ="grad",fZ="rad",hZ="turn",ZI={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case dZ:return Math.PI*e.number/180;case AZ:return Math.PI/200*e.number;case fZ:return e.number;case hZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},mZ=function(t){return t.type===15&&(t.unit===dZ||t.unit===AZ||t.unit===fZ||t.unit===hZ)},pZ=function(t){var e=t.filter(Ea).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ro,Ro];case"to top":case"bottom":return Su(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ro,Xh];case"to right":case"left":return Su(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Xh,Xh];case"to bottom":case"top":return Su(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Xh,Ro];case"to left":case"right":return Su(270)}return 0},Su=function(t){return Math.PI*t/180},h0={name:"color",parse:function(t,e){if(e.type===18){var r=j2e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Yh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Yh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Yh(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Yh(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var l=df[e.value.toUpperCase()];if(typeof l<"u")return l}return df.TRANSPARENT}},m0=function(t){return(255&t)===0},Wi=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Yh=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},S7=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},I7=function(t,e){var r=e.filter(Zx);if(r.length===3){var n=r.map(S7),a=n[0],s=n[1],i=n[2];return Yh(a,s,i,1)}if(r.length===4){var l=r.map(S7),a=l[0],s=l[1],i=l[2],c=l[3];return Yh(a,s,i,c)}return 0};function L5(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var B7=function(t,e){var r=e.filter(Zx),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Su(n.number):ZI.parse(t,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?La(i,1):1;if(c===0)return Yh(u*255,u*255,u*255,1);var A=u<=.5?u*(c+1):u+c-u*c,h=u*2-A,f=L5(h,A,l+1/3),m=L5(h,A,l),p=L5(h,A,l-1/3);return Yh(f*255,m*255,p*255,d)},j2e={hsl:B7,hsla:B7,rgb:I7,rgba:I7},My=function(t,e){return h0.parse(t,lZ.create(e).parseComponentValue())},df={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},k2e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F2e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e4=function(t,e){var r=h0.parse(t,e[0]),n=e[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},T7=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Ro),n.stop===null&&(n.stop=Xh);for(var a=[],s=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var c=La(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var A=i-u,h=a[u-1],f=(d-h)/(A+1),m=1;m<=A;m++)a[u+m-1]=f*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},O2e=function(t,e,r){var n=e/2,a=r/2,s=La(t[0],e)-n,i=a-La(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},D2e=function(t,e,r){var n=typeof t=="number"?t:O2e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},ad=function(t,e){return Math.sqrt(t*t+e*e)},P7=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=ad(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},R2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(ad(e,r),ad(e,r-a),ad(e-n,r),ad(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=P7(n,a,e,r,!0),u=c[0],d=c[1];s=ad(u-e,(d-r)/l),i=l*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(ad(e,r),ad(e,r-a),ad(e-n,r),ad(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),A=P7(n,a,e,r,!1),u=A[0],d=A[1];s=ad(u-e,(d-r)/l),i=l*s}break}return Array.isArray(t.size)&&(s=La(t.size[0],n),i=t.size.length===2?La(t.size[1],a):s),[s,i]},M2e=function(t,e){var r=Su(180),n=[];return yA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=pZ(a);return}else if(mZ(i)){r=ZI.parse(t,i);return}}var l=e4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},FN=function(t,e){var r=Su(180),n=[];return yA(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=pZ(a);return}else if(mZ(i)){r=(ZI.parse(t,i)+Su(270))%Su(360);return}}var l=e4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},L2e=function(t,e){var r=Su(180),n=[],a=1,s=0,i=3,l=[];return yA(e).forEach(function(c,u){var d=c[0];if(u===0){if(Ea(d)&&d.value==="linear"){a=1;return}else if(Ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var A=h0.parse(t,d.values[0]);n.push({stop:Ro,color:A})}else if(d.name==="to"){var A=h0.parse(t,d.values[0]);n.push({stop:Xh,color:A})}else if(d.name==="color-stop"){var h=d.values.filter(Zx);if(h.length===2){var A=h0.parse(t,h[1]),f=h[0];Iv(f)&&n.push({stop:{type:16,number:f.number*100,flags:f.flags},color:A})}}}}),a===1?{angle:(r+Su(180))%Su(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},gZ="closest-side",xZ="farthest-side",vZ="closest-corner",yZ="farthest-corner",bZ="circle",wZ="ellipse",NZ="cover",_Z="contain",U2e=function(t,e){var r=0,n=3,a=[],s=[];return yA(e).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(A,h){if(u)if(Ea(h))switch(h.value){case"center":return s.push(f6),A;case"top":case"left":return s.push(Ro),A;case"right":case"bottom":return s.push(Xh),A}else(di(h)||B0(h))&&s.push(h);else if(Ea(h))switch(h.value){case bZ:return r=0,!1;case wZ:return r=1,!1;case"at":return u=!0,!1;case gZ:return n=0,!1;case NZ:case xZ:return n=1,!1;case _Z:case vZ:return n=2,!1;case yZ:return n=3,!1}else if(B0(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return A},c)}if(c){var d=e4(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},ON=function(t,e){var r=0,n=3,a=[],s=[];return yA(e).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,A){if(Ea(A))switch(A.value){case"center":return s.push(f6),!1;case"top":case"left":return s.push(Ro),!1;case"right":case"bottom":return s.push(Xh),!1}else if(di(A)||B0(A))return s.push(A),!1;return d},c):l===1&&(c=i.reduce(function(d,A){if(Ea(A))switch(A.value){case bZ:return r=0,!1;case wZ:return r=1,!1;case _Z:case gZ:return n=0,!1;case xZ:return n=1,!1;case vZ:return n=2,!1;case NZ:case yZ:return n=3,!1}else if(B0(A)||di(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return d},c)),c){var u=e4(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Q2e=function(t){return t.type===1},V2e=function(t){return t.type===2},h6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=CZ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function H2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!CZ[t.name])}var CZ={"linear-gradient":M2e,"-moz-linear-gradient":FN,"-ms-linear-gradient":FN,"-o-linear-gradient":FN,"-webkit-linear-gradient":FN,"radial-gradient":U2e,"-moz-radial-gradient":ON,"-ms-radial-gradient":ON,"-o-radial-gradient":ON,"-webkit-radial-gradient":ON,"-webkit-gradient":L2e},$2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Zx(n)&&H2e(n)}).map(function(n){return h6.parse(t,n)})}},K2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},G2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return yA(e).map(function(r){return r.filter(di)}).map(uZ)}},q2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return yA(e).map(function(r){return r.filter(Ea).map(function(n){return n.value}).join(" ")}).map(z2e)}},z2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Bx;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Bx||(Bx={}));var W2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return yA(e).map(function(r){return r.filter(X2e)})}},X2e=function(t){return Ea(t)||di(t)},t4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Y2e=t4("top"),J2e=t4("right"),Z2e=t4("bottom"),ebe=t4("left"),r4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return uZ(r.filter(di))}}},tbe=r4("top-left"),rbe=r4("top-right"),nbe=r4("bottom-right"),abe=r4("bottom-left"),n4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sbe=n4("top"),ibe=n4("right"),obe=n4("bottom"),lbe=n4("left"),a4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return zb(r)?r.number:0}}},cbe=a4("top"),ube=a4("right"),dbe=a4("bottom"),Abe=a4("left"),fbe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hbe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},mbe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).reduce(function(r,n){return r|pbe(n.value)},0)}},pbe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gbe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},xbe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},BE;(function(t){t.NORMAL="normal",t.STRICT="strict"})(BE||(BE={}));var vbe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return BE.STRICT;case"normal":default:return BE.NORMAL}}},ybe={name:"line-height",initialValue:"normal",prefix:!1,type:4},j7=function(t,e){return Ea(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:di(t)?La(t,e):e},bbe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:h6.parse(t,e)}},wbe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},gj={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},s4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Nbe=s4("top"),_be=s4("right"),Cbe=s4("bottom"),Ebe=s4("left"),Sbe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ibe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},i4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Bbe=i4("top"),Tbe=i4("right"),Pbe=i4("bottom"),jbe=i4("left"),kbe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Fbe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Obe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&pj(e[0],"none")?[]:yA(e).map(function(r){for(var n={color:df.TRANSPARENT,offsetX:Ro,offsetY:Ro,blur:Ro},a=0,s=0;s<r.length;s++){var i=r[s];B0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=h0.parse(t,i)}return n})}},Dbe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Rbe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Ube[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Mbe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Lbe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,l]:null},Ube={matrix:Mbe,matrix3d:Lbe},k7={type:16,number:50,flags:qb},Qbe=[k7,k7],Vbe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(di);return r.length!==2?Qbe:[r[0],r[1]]}},Hbe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ly;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ly||(Ly={}));var $be={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ly.BREAK_ALL;case"keep-all":return Ly.KEEP_ALL;case"normal":default:return Ly.NORMAL}}},Kbe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Iv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},EZ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Gbe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Iv(e)?e.number:1}},qbe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zbe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Wbe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Xbe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Ybe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Iv(e))return e.number;if(Ea(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Jbe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ea).map(function(r){return r.value})}},Zbe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pi=function(t,e){return(t&e)!==0},ewe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},twe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(cZ),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&Iv(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},rwe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(cZ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ea(s)&&s.value!=="none"){var l=i&&Iv(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},nwe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(zb).map(function(r){return EZ.parse(t,r)})}},awe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(T2e);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},F7=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},swe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&pj(e[0],"none")?[]:yA(e).map(function(r){for(var n={color:255,offsetX:Ro,offsetY:Ro,blur:Ro,spread:Ro,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];pj(i,"inset")?n.inset=!0:B0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=h0.parse(t,i)}return n})}},iwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},owe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zb(e)?e.number:0}},cwe=function(){function t(e,r){var n,a;this.animationDuration=Sr(e,nwe,r.animationDuration),this.backgroundClip=Sr(e,k2e,r.backgroundClip),this.backgroundColor=Sr(e,F2e,r.backgroundColor),this.backgroundImage=Sr(e,$2e,r.backgroundImage),this.backgroundOrigin=Sr(e,K2e,r.backgroundOrigin),this.backgroundPosition=Sr(e,G2e,r.backgroundPosition),this.backgroundRepeat=Sr(e,q2e,r.backgroundRepeat),this.backgroundSize=Sr(e,W2e,r.backgroundSize),this.borderTopColor=Sr(e,Y2e,r.borderTopColor),this.borderRightColor=Sr(e,J2e,r.borderRightColor),this.borderBottomColor=Sr(e,Z2e,r.borderBottomColor),this.borderLeftColor=Sr(e,ebe,r.borderLeftColor),this.borderTopLeftRadius=Sr(e,tbe,r.borderTopLeftRadius),this.borderTopRightRadius=Sr(e,rbe,r.borderTopRightRadius),this.borderBottomRightRadius=Sr(e,nbe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Sr(e,abe,r.borderBottomLeftRadius),this.borderTopStyle=Sr(e,sbe,r.borderTopStyle),this.borderRightStyle=Sr(e,ibe,r.borderRightStyle),this.borderBottomStyle=Sr(e,obe,r.borderBottomStyle),this.borderLeftStyle=Sr(e,lbe,r.borderLeftStyle),this.borderTopWidth=Sr(e,cbe,r.borderTopWidth),this.borderRightWidth=Sr(e,ube,r.borderRightWidth),this.borderBottomWidth=Sr(e,dbe,r.borderBottomWidth),this.borderLeftWidth=Sr(e,Abe,r.borderLeftWidth),this.boxShadow=Sr(e,swe,r.boxShadow),this.color=Sr(e,fbe,r.color),this.direction=Sr(e,hbe,r.direction),this.display=Sr(e,mbe,r.display),this.float=Sr(e,gbe,r.cssFloat),this.fontFamily=Sr(e,Wbe,r.fontFamily),this.fontSize=Sr(e,Xbe,r.fontSize),this.fontStyle=Sr(e,Zbe,r.fontStyle),this.fontVariant=Sr(e,Jbe,r.fontVariant),this.fontWeight=Sr(e,Ybe,r.fontWeight),this.letterSpacing=Sr(e,xbe,r.letterSpacing),this.lineBreak=Sr(e,vbe,r.lineBreak),this.lineHeight=Sr(e,ybe,r.lineHeight),this.listStyleImage=Sr(e,bbe,r.listStyleImage),this.listStylePosition=Sr(e,wbe,r.listStylePosition),this.listStyleType=Sr(e,gj,r.listStyleType),this.marginTop=Sr(e,Nbe,r.marginTop),this.marginRight=Sr(e,_be,r.marginRight),this.marginBottom=Sr(e,Cbe,r.marginBottom),this.marginLeft=Sr(e,Ebe,r.marginLeft),this.opacity=Sr(e,Gbe,r.opacity);var s=Sr(e,Sbe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Sr(e,Ibe,r.overflowWrap),this.paddingTop=Sr(e,Bbe,r.paddingTop),this.paddingRight=Sr(e,Tbe,r.paddingRight),this.paddingBottom=Sr(e,Pbe,r.paddingBottom),this.paddingLeft=Sr(e,jbe,r.paddingLeft),this.paintOrder=Sr(e,iwe,r.paintOrder),this.position=Sr(e,Fbe,r.position),this.textAlign=Sr(e,kbe,r.textAlign),this.textDecorationColor=Sr(e,qbe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Sr(e,zbe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Sr(e,Obe,r.textShadow),this.textTransform=Sr(e,Dbe,r.textTransform),this.transform=Sr(e,Rbe,r.transform),this.transformOrigin=Sr(e,Vbe,r.transformOrigin),this.visibility=Sr(e,Hbe,r.visibility),this.webkitTextStrokeColor=Sr(e,owe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Sr(e,lwe,r.webkitTextStrokeWidth),this.wordBreak=Sr(e,$be,r.wordBreak),this.zIndex=Sr(e,Kbe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return m0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Pi(this.display,4)||Pi(this.display,33554432)||Pi(this.display,268435456)||Pi(this.display,536870912)||Pi(this.display,67108864)||Pi(this.display,134217728)},t}(),uwe=function(){function t(e,r){this.content=Sr(e,ewe,r.content),this.quotes=Sr(e,awe,r.quotes)}return t}(),O7=function(){function t(e,r){this.counterIncrement=Sr(e,twe,r.counterIncrement),this.counterReset=Sr(e,rwe,r.counterReset)}return t}(),Sr=function(t,e,r){var n=new oZ,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new lZ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Ea(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ZI.parse(t,s.parseComponentValue());case"color":return h0.parse(t,s.parseComponentValue());case"image":return h6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return B0(l)?l:Ro;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:Ro;case"time":return EZ.parse(t,s.parseComponentValue())}break}},dwe="data-html2canvas-debug",Awe=function(t){var e=t.getAttribute(dwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xj=function(t,e){var r=Awe(t);return r===1||e===r},bA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,xj(r,3))debugger;this.styles=new cwe(e,window.getComputedStyle(r,null)),bj(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=YI(this.context,r),xj(r,4)&&(this.flags|=16)}return t}(),fwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",D7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var DN=0;DN<D7.length;DN++)uy[D7.charCodeAt(DN)]=DN;var hwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=uy[t.charCodeAt(n)],i=uy[t.charCodeAt(n+1)],l=uy[t.charCodeAt(n+2)],c=uy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},mwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},pwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Km=5,m6=11,U5=2,gwe=m6-Km,SZ=65536>>Km,xwe=1<<Km,Q5=xwe-1,vwe=1024>>Km,ywe=SZ+vwe,bwe=ywe,wwe=32,Nwe=bwe+wwe,_we=65536>>m6,Cwe=1<<gwe,Ewe=Cwe-1,R7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Swe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Iwe=function(t,e){var r=hwe(t),n=Array.isArray(r)?pwe(r):new Uint32Array(r),a=Array.isArray(r)?mwe(r):new Uint16Array(r),s=24,i=R7(a,s/2,n[4]/2),l=n[5]===2?R7(a,(s+n[4])/2):Swe(n,Math.ceil((s+n[4])/4));return new Bwe(n[0],n[1],n[2],n[3],i,l)},Bwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Km],r=(r<<U5)+(e&Q5),this.data[r];if(e<=65535)return r=this.index[SZ+(e-55296>>Km)],r=(r<<U5)+(e&Q5),this.data[r];if(e<this.highStart)return r=Nwe-_we+(e>>m6),r=this.index[r],r+=e>>Km&Ewe,r=this.index[r],r=(r<<U5)+(e&Q5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),M7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Twe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var RN=0;RN<M7.length;RN++)Twe[M7.charCodeAt(RN)]=RN;var Pwe=1,V5=2,H5=3,L7=4,U7=5,jwe=7,Q7=8,$5=9,K5=10,V7=11,H7=12,$7=13,K7=14,G5=15,kwe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Fwe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Owe=Iwe(fwe),vu="",q5="",Dwe=function(t){return Owe.get(t)},Rwe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===V5&&i===H5)return vu;if(s===V5||s===H5||s===L7||i===V5||i===H5||i===L7)return q5;if(s===Q7&&[Q7,$5,V7,H7].indexOf(i)!==-1||(s===V7||s===$5)&&(i===$5||i===K5)||(s===H7||s===K5)&&i===K5||i===$7||i===U7||i===jwe||s===Pwe)return vu;if(s===$7&&i===K7){for(;a===U7;)a=e[--n];if(a===K7)return vu}if(s===G5&&i===G5){for(var l=0;a===G5;)l++,a=e[--n];if(l%2===0)return vu}return q5},Mwe=function(t){var e=kwe(t),r=e.length,n=0,a=0,s=e.map(Dwe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=vu;n<r&&(i=Rwe(e,s,++n))===vu;);if(i!==vu||n===r){var l=Fwe.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},Lwe=function(t){for(var e=Mwe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Uwe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},Qwe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=JI(n.data).map(function(c){return Xs(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var A=d.x>i.x||d.y>i.y;return i=d,u===0?!0:A});return t.body.removeChild(e),l},Vwe=function(){return typeof new Image().crossOrigin<"u"},Hwe=function(){return typeof new XMLHttpRequest().responseType=="string"},$we=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},G7=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Kwe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=vj(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),q7(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",G7(c)?q7(vj(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),G7(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},vj=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},q7=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},To={get SUPPORT_RANGE_BOUNDS(){var t=Uwe(document);return Object.defineProperty(To,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=To.SUPPORT_RANGE_BOUNDS&&Qwe(document);return Object.defineProperty(To,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=$we(document);return Object.defineProperty(To,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Kwe(document):Promise.resolve(!1);return Object.defineProperty(To,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Vwe();return Object.defineProperty(To,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Hwe();return Object.defineProperty(To,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(To,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(To,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Uy=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Gwe=function(t,e,r,n){var a=Wwe(e,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(To.SUPPORT_RANGE_BOUNDS){var c=z7(n,i,l.length).getClientRects();if(c.length>1){var u=p6(l),d=0;u.forEach(function(h){s.push(new Uy(h,Cf.fromDOMRectList(t,z7(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Uy(l,Cf.fromDOMRectList(t,c)))}else{var A=n.splitText(l.length);s.push(new Uy(l,qwe(t,n))),n=A}else To.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},qwe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=YI(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Cf.EMPTY},z7=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},p6=function(t){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Lwe(t)},zwe=function(t,e){if(To.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Ywe(t,e)},Wwe=function(t,e){return e.letterSpacing!==0?p6(t):zwe(t,e)},Xwe=[32,160,4961,65792,65793,4153,4241],Ywe=function(t,e){for(var r=_ye(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=JI(i),c="";l.forEach(function(u){Xwe.indexOf(u)===-1?c+=Xs(u):(c.length&&n.push(c),n.push(Xs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Jwe=function(){function t(e,r,n){this.text=Zwe(r.data,n.textTransform),this.textBounds=Gwe(e,this.text,n,r)}return t}(),Zwe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(eNe,tNe);case 2:return t.toUpperCase();default:return t}},eNe=/(^|\s|:|-|\(|\))([a-z])/g,tNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},IZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(bA),BZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(bA),TZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=YI(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(bA),PZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(bA),yj=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(bA),rNe=[{type:15,flags:0,unit:"px",number:3}],nNe=[{type:16,flags:0,number:50}],aNe=function(t){return t.width>t.height?new Cf(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Cf(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},sNe=function(t){var e=t.type===iNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},TE="checkbox",PE="radio",iNe="password",W7=707406591,g6=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=sNe(n),(a.type===TE||a.type===PE)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=aNe(a.bounds)),a.type){case TE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=rNe;break;case PE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=nNe;break}return a}return e}(bA),jZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(bA),kZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(bA),FZ=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=DZ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?My(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):df.TRANSPARENT,i=n.contentWindow.document.body?My(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):df.TRANSPARENT;a.backgroundColor=m0(s)?m0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(bA),oNe=["OL","UL","MENU"],wC=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,RZ(a)&&a.data.trim().length>0)r.textNodes.push(new Jwe(t,a,r.styles));else if(dx(a))if(QZ(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return wC(t,l,r,n)});else{var i=OZ(t,a);i.styles.isVisible()&&(lNe(a,i,n)?i.flags|=4:cNe(i.styles)&&(i.flags|=2),oNe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?wC(t,a.shadowRoot,i,n):!jE(a)&&!MZ(a)&&!kE(a)&&wC(t,a,i,n))}},OZ=function(t,e){return wj(e)?new IZ(t,e):LZ(e)?new BZ(t,e):MZ(e)?new TZ(t,e):uNe(e)?new PZ(t,e):dNe(e)?new yj(t,e):ANe(e)?new g6(t,e):kE(e)?new jZ(t,e):jE(e)?new kZ(t,e):UZ(e)?new FZ(t,e):new bA(t,e)},DZ=function(t,e){var r=OZ(t,e);return r.flags|=4,wC(t,e,r,r),r},lNe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||x6(t)&&r.styles.isTransparent()},cNe=function(t){return t.isPositioned()||t.isFloating()},RZ=function(t){return t.nodeType===Node.TEXT_NODE},dx=function(t){return t.nodeType===Node.ELEMENT_NODE},bj=function(t){return dx(t)&&typeof t.style<"u"&&!NC(t)},NC=function(t){return typeof t.className=="object"},uNe=function(t){return t.tagName==="LI"},dNe=function(t){return t.tagName==="OL"},ANe=function(t){return t.tagName==="INPUT"},fNe=function(t){return t.tagName==="HTML"},MZ=function(t){return t.tagName==="svg"},x6=function(t){return t.tagName==="BODY"},LZ=function(t){return t.tagName==="CANVAS"},X7=function(t){return t.tagName==="VIDEO"},wj=function(t){return t.tagName==="IMG"},UZ=function(t){return t.tagName==="IFRAME"},Y7=function(t){return t.tagName==="STYLE"},hNe=function(t){return t.tagName==="SCRIPT"},jE=function(t){return t.tagName==="TEXTAREA"},kE=function(t){return t.tagName==="SELECT"},QZ=function(t){return t.tagName==="SLOT"},J7=function(t){return t.tagName.indexOf("-")>0},mNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},t}(),Z7={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},e9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yg=function(t,e,r,n,a,s){return t<e||t>r?Q2(t,a,s.length>0):n.integers.reduce(function(i,l,c){for(;t>=l;)t-=l,i+=n.values[c];return i},"")+s},VZ=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Gs=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(VZ(Math.abs(t),s,n,function(i){return Xs(Math.floor(i%s)+e)})+a)},lm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return VZ(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},Gg=1,Ih=2,Bh=4,dy=8,OA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return Q2(t,4,a.length>0);var i=Math.abs(t),l=a;if(i===0)return e[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Pi(s,Gg)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Pi(s,Ih)||u===1&&c===1&&Pi(s,Bh)&&t>100||u===1&&c>1&&Pi(s,dy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},t9="",r9="",n9="",z5="",Q2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=Gs(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return lm(t,"",a);case 6:return yg(t,1,3999,Z7,3,n).toLowerCase();case 7:return yg(t,1,3999,Z7,3,n);case 8:return Gs(t,945,969,!1,n);case 9:return Gs(t,97,122,!1,n);case 10:return Gs(t,65,90,!1,n);case 11:return Gs(t,1632,1641,!0,n);case 12:case 49:return yg(t,1,9999,e9,3,n);case 35:return yg(t,1,9999,e9,3,n).toLowerCase();case 13:return Gs(t,2534,2543,!0,n);case 14:case 30:return Gs(t,6112,6121,!0,n);case 15:return lm(t,"",a);case 16:return lm(t,"",a);case 17:case 48:return OA(t,"",t9,"",a,Ih|Bh|dy);case 47:return OA(t,"",r9,"",a,Gg|Ih|Bh|dy);case 42:return OA(t,"",t9,"",a,Ih|Bh|dy);case 41:return OA(t,"",r9,"",a,Gg|Ih|Bh|dy);case 26:return OA(t,"","",n9,a,0);case 25:return OA(t,"","",n9,a,Gg|Ih|Bh);case 31:return OA(t,"","",z5,s,Gg|Ih|Bh);case 33:return OA(t,"","",z5,s,0);case 32:return OA(t,"","",z5,s,Gg|Ih|Bh);case 18:return Gs(t,2406,2415,!0,n);case 20:return yg(t,1,19999,gNe,3,n);case 21:return Gs(t,2790,2799,!0,n);case 22:return Gs(t,2662,2671,!0,n);case 22:return yg(t,1,10999,pNe,3,n);case 23:return lm(t,"");case 24:return lm(t,"");case 27:return Gs(t,3302,3311,!0,n);case 28:return lm(t,"",a);case 29:return lm(t,"",a);case 34:return Gs(t,3792,3801,!0,n);case 37:return Gs(t,6160,6169,!0,n);case 38:return Gs(t,4160,4169,!0,n);case 39:return Gs(t,2918,2927,!0,n);case 40:return Gs(t,1776,1785,!0,n);case 43:return Gs(t,3046,3055,!0,n);case 44:return Gs(t,3174,3183,!0,n);case 45:return Gs(t,3664,3673,!0,n);case 46:return Gs(t,3872,3881,!0,n);case 3:default:return Gs(t,48,57,!0,n)}},HZ="data-html2canvas-ignore",a9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new mNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=xNe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=bNe(a).then(function(){return Il(n,void 0,void 0,function(){var d,A;return nl(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(CNe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,yNe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,A)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(NNe(document.doctype)+"<html></html>"),_Ne(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(xj(e,2))debugger;if(LZ(e))return this.createCanvasClone(e);if(X7(e))return this.createVideoClone(e);if(Y7(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return wj(r)&&(wj(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),J7(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return W5(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!dx(r)||!hNe(r)&&!r.hasAttribute(HZ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!dx(r)||!Y7(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(dx(s)&&QZ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(RZ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&dx(e)&&(bj(e)||NC(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&bj(a)&&(this.clonedReferenceElement=a),x6(a)&&INe(a);var c=this.counters.parse(new O7(this.context,s)),u=this.resolvePseudoContent(e,a,i,Qy.BEFORE);J7(e)&&(r=!0),X7(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,Qy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||NC(e))&&!UZ(e)||r)&&W5(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(jE(e)||kE(e))&&(jE(a)||kE(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new O7(this.context,n));var c=new uwe(this.context,n),u=l.createElement("html2canvaspseudoelement");W5(n,u),c.content.forEach(function(A){if(A.type===0)u.appendChild(l.createTextNode(A.value));else if(A.type===22){var h=l.createElement("img");h.src=A.value,h.style.opacity="1",u.appendChild(h)}else if(A.type===18){if(A.name==="attr"){var f=A.values.filter(Ea);f.length&&u.appendChild(l.createTextNode(e.getAttribute(f[0].value)||""))}else if(A.name==="counter"){var m=A.values.filter(Zx),p=m[0],g=m[1];if(p&&Ea(p)){var x=s.counters.getCounterValue(p.value),y=g&&Ea(g)?gj.parse(s.context,g.value):3;u.appendChild(l.createTextNode(Q2(x,y,!1)))}}else if(A.name==="counters"){var b=A.values.filter(Zx),p=b[0],w=b[1],g=b[2];if(p&&Ea(p)){var I=s.counters.getCounterValues(p.value),T=g&&Ea(g)?gj.parse(s.context,g.value):3,C=w&&w.type===0?w.value:"",E=I.map(function(B){return Q2(B,T,!1)}).join(C);u.appendChild(l.createTextNode(E))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(l.createTextNode(F7(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(F7(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(A.value))}}),u.className=Nj+" "+_j;var d=a===Qy.BEFORE?" "+Nj:" "+_j;return NC(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Qy;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Qy||(Qy={}));var xNe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(HZ,"true"),t.body.appendChild(r),r},vNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},yNe=function(t){return Promise.all([].slice.call(t.images,0).map(vNe))},bNe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},wNe=["all","d","content"],W5=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);wNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},NNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},_Ne=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},CNe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},ENe=":before",SNe=":after",Nj="___html2canvas___pseudoelement_before",_j="___html2canvas___pseudoelement_after",s9=`{
    content: "" !important;
    display: none !important;
}`,INe=function(t){BNe(t,"."+Nj+ENe+s9+`
         .`+_j+SNe+s9)},BNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},$Z=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),TNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Y5(e)||FNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Il(this,void 0,void 0,function(){var r,n,a,s,i=this;return nl(this,function(l){switch(l.label){case 0:return r=$Z.isSameOrigin(e),n=!X5(e)&&this._options.useCORS===!0&&To.SUPPORT_CORS_IMAGES&&!r,a=!X5(e)&&!r&&!Y5(e)&&typeof this._options.proxy=="string"&&To.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!X5(e)&&!Y5(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(ONe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var l=To.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(h){return i(h)},!1),A.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),PNe=/^data:image\/svg\+xml/i,jNe=/^data:image\/.*;base64,/i,kNe=/^data:image\/.*/i,FNe=function(t){return To.SUPPORT_SVG_DRAWING||!DNe(t)},X5=function(t){return kNe.test(t)},ONe=function(t){return jNe.test(t)},Y5=function(t){return t.substr(0,4)==="blob"},DNe=function(t){return t.substr(-3).toLowerCase()==="svg"||PNe.test(t)},Cr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),bg=function(t,e,r){return new Cr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},MN=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=bg(this.start,this.startControl,e),a=bg(this.startControl,this.endControl,e),s=bg(this.endControl,this.end,e),i=bg(n,a,e),l=bg(a,s,e),c=bg(i,l,e);return r?new t(this.start,n,i,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),_u=function(t){return t.type===1},RNe=function(){function t(e){var r=e.styles,n=e.bounds,a=cy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=cy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=cy(r.borderBottomRightRadius,n.width,n.height),A=d[0],h=d[1],f=cy(r.borderBottomLeftRadius,n.width,n.height),m=f[0],p=f[1],g=[];g.push((s+c)/n.width),g.push((m+A)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,A/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-A,I=n.height-p,T=r.borderTopWidth,C=r.borderRightWidth,E=r.borderBottomWidth,S=r.borderLeftWidth,O=La(r.paddingTop,e.bounds.width),B=La(r.paddingRight,e.bounds.width),P=La(r.paddingBottom,e.bounds.width),D=La(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?rs(n.left+S/3,n.top+T/3,s-S/3,i-T/3,oa.TOP_LEFT):new Cr(n.left+S/3,n.top+T/3),this.topRightBorderDoubleOuterBox=s>0||i>0?rs(n.left+y,n.top+T/3,c-C/3,u-T/3,oa.TOP_RIGHT):new Cr(n.left+n.width-C/3,n.top+T/3),this.bottomRightBorderDoubleOuterBox=A>0||h>0?rs(n.left+w,n.top+b,A-C/3,h-E/3,oa.BOTTOM_RIGHT):new Cr(n.left+n.width-C/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?rs(n.left+S/3,n.top+I,m-S/3,p-E/3,oa.BOTTOM_LEFT):new Cr(n.left+S/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?rs(n.left+S*2/3,n.top+T*2/3,s-S*2/3,i-T*2/3,oa.TOP_LEFT):new Cr(n.left+S*2/3,n.top+T*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?rs(n.left+y,n.top+T*2/3,c-C*2/3,u-T*2/3,oa.TOP_RIGHT):new Cr(n.left+n.width-C*2/3,n.top+T*2/3),this.bottomRightBorderDoubleInnerBox=A>0||h>0?rs(n.left+w,n.top+b,A-C*2/3,h-E*2/3,oa.BOTTOM_RIGHT):new Cr(n.left+n.width-C*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?rs(n.left+S*2/3,n.top+I,m-S*2/3,p-E*2/3,oa.BOTTOM_LEFT):new Cr(n.left+S*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=s>0||i>0?rs(n.left+S/2,n.top+T/2,s-S/2,i-T/2,oa.TOP_LEFT):new Cr(n.left+S/2,n.top+T/2),this.topRightBorderStroke=s>0||i>0?rs(n.left+y,n.top+T/2,c-C/2,u-T/2,oa.TOP_RIGHT):new Cr(n.left+n.width-C/2,n.top+T/2),this.bottomRightBorderStroke=A>0||h>0?rs(n.left+w,n.top+b,A-C/2,h-E/2,oa.BOTTOM_RIGHT):new Cr(n.left+n.width-C/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=m>0||p>0?rs(n.left+S/2,n.top+I,m-S/2,p-E/2,oa.BOTTOM_LEFT):new Cr(n.left+S/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||i>0?rs(n.left,n.top,s,i,oa.TOP_LEFT):new Cr(n.left,n.top),this.topRightBorderBox=c>0||u>0?rs(n.left+y,n.top,c,u,oa.TOP_RIGHT):new Cr(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||h>0?rs(n.left+w,n.top+b,A,h,oa.BOTTOM_RIGHT):new Cr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?rs(n.left,n.top+I,m,p,oa.BOTTOM_LEFT):new Cr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?rs(n.left+S,n.top+T,Math.max(0,s-S),Math.max(0,i-T),oa.TOP_LEFT):new Cr(n.left+S,n.top+T),this.topRightPaddingBox=c>0||u>0?rs(n.left+Math.min(y,n.width-C),n.top+T,y>n.width+C?0:Math.max(0,c-C),Math.max(0,u-T),oa.TOP_RIGHT):new Cr(n.left+n.width-C,n.top+T),this.bottomRightPaddingBox=A>0||h>0?rs(n.left+Math.min(w,n.width-S),n.top+Math.min(b,n.height-E),Math.max(0,A-C),Math.max(0,h-E),oa.BOTTOM_RIGHT):new Cr(n.left+n.width-C,n.top+n.height-E),this.bottomLeftPaddingBox=m>0||p>0?rs(n.left+S,n.top+Math.min(I,n.height-E),Math.max(0,m-S),Math.max(0,p-E),oa.BOTTOM_LEFT):new Cr(n.left+S,n.top+n.height-E),this.topLeftContentBox=s>0||i>0?rs(n.left+S+D,n.top+T+O,Math.max(0,s-(S+D)),Math.max(0,i-(T+O)),oa.TOP_LEFT):new Cr(n.left+S+D,n.top+T+O),this.topRightContentBox=c>0||u>0?rs(n.left+Math.min(y,n.width+S+D),n.top+T+O,y>n.width+S+D?0:c-S+D,u-(T+O),oa.TOP_RIGHT):new Cr(n.left+n.width-(C+B),n.top+T+O),this.bottomRightContentBox=A>0||h>0?rs(n.left+Math.min(w,n.width-(S+D)),n.top+Math.min(b,n.height+T+O),Math.max(0,A-(C+B)),h-(E+P),oa.BOTTOM_RIGHT):new Cr(n.left+n.width-(C+B),n.top+n.height-(E+P)),this.bottomLeftContentBox=m>0||p>0?rs(n.left+S+D,n.top+I,Math.max(0,m-(S+D)),p-(E+P),oa.BOTTOM_LEFT):new Cr(n.left+S+D,n.top+n.height-(E+P))}return t}(),oa;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(oa||(oa={}));var rs=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=t+r,u=e+n;switch(a){case oa.TOP_LEFT:return new MN(new Cr(t,u),new Cr(t,u-l),new Cr(c-i,e),new Cr(c,e));case oa.TOP_RIGHT:return new MN(new Cr(t,e),new Cr(t+i,e),new Cr(c,u-l),new Cr(c,u));case oa.BOTTOM_RIGHT:return new MN(new Cr(c,e),new Cr(c,e+l),new Cr(t+i,u),new Cr(t,u));case oa.BOTTOM_LEFT:default:return new MN(new Cr(c,u),new Cr(c-i,u),new Cr(t,e+l),new Cr(t,e))}},FE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},MNe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},OE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},LNe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),LN=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),UNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),QNe=function(t){return t.type===0},KZ=function(t){return t.type===1},VNe=function(t){return t.type===2},i9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},HNe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},GZ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),qZ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new RNe(this.container),this.container.styles.opacity<1&&this.effects.push(new UNe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new LNe(n,a,s))}if(this.container.styles.overflowX!==0){var i=FE(this.curves),l=OE(this.curves);i9(i,l)?this.effects.push(new LN(i,6)):(this.effects.push(new LN(i,2)),this.effects.push(new LN(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!KZ(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=FE(n.curves),l=OE(n.curves);i9(i,l)||a.unshift(new LN(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Pi(c.target,e)})},t}(),Cj=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Pi(a.flags,4),i=Pi(a.flags,2),l=new qZ(a,t);Pi(a.styles.display,2048)&&n.push(l);var c=Pi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new GZ(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var h=0;u.negativeZIndex.some(function(m,p){return A>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(A>0){var f=0;u.positiveZIndex.some(function(m,p){return A>=m.element.container.styles.zIndex.order?(f=p+1,!1):f>0}),u.positiveZIndex.splice(f,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);Cj(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Cj(l,e,r,c);Pi(a.flags,8)&&zZ(a,c)})},zZ=function(t,e){for(var r=t instanceof yj?t.start:1,n=t instanceof yj?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof PZ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Q2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},$Ne=function(t){var e=new qZ(t,null),r=new GZ(e),n=[];return Cj(e,r,r,n),zZ(e.container,n),r},o9=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Iu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Iu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Iu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},KNe=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Iu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Iu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Iu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},GNe=function(t,e){switch(e){case 0:return Iu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Iu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Iu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Iu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},qNe=function(t,e){switch(e){case 0:return UN(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return UN(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return UN(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return UN(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},UN=function(t,e){var r=[];return _u(t)?r.push(t.subdivide(.5,!1)):r.push(t),_u(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Iu=function(t,e,r,n){var a=[];return _u(t)?a.push(t.subdivide(.5,!1)):a.push(t),_u(r)?a.push(r.subdivide(.5,!0)):a.push(r),_u(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),_u(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},WZ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},DE=function(t){var e=t.styles,r=t.bounds,n=La(e.paddingLeft,r.width),a=La(e.paddingRight,r.width),s=La(e.paddingTop,r.width),i=La(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},zNe=function(t,e){return t===0?e.bounds:t===2?DE(e):WZ(e)},WNe=function(t,e){return t===0?e.bounds:t===2?DE(e):WZ(e)},J5=function(t,e,r){var n=zNe(qg(t.styles.backgroundOrigin,e),t),a=WNe(qg(t.styles.backgroundClip,e),t),s=XNe(qg(t.styles.backgroundSize,e),r,n),i=s[0],l=s[1],c=cy(qg(t.styles.backgroundPosition,e),n.width-i,n.height-l),u=YNe(qg(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),A=Math.round(n.top+c[1]);return[u,d,A,i,l]},wg=function(t){return Ea(t)&&t.value===Bx.AUTO},QN=function(t){return typeof t=="number"},XNe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(di(i)&&l&&di(l))return[La(i,r.width),La(l,r.height)];var c=QN(s);if(Ea(i)&&(i.value===Bx.CONTAIN||i.value===Bx.COVER)){if(QN(s)){var u=r.width/r.height;return u<s!=(i.value===Bx.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=QN(n),A=QN(a),h=d||A;if(wg(i)&&(!l||wg(l))){if(d&&A)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var f=d?n:a*s,m=A?a:n/s;return[f,m]}var p=d?n:r.width,g=A?a:r.height;return[p,g]}if(c){var x=0,y=0;return di(i)?x=La(i,r.width):di(l)&&(y=La(l,r.height)),wg(i)?x=y*s:(!l||wg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(di(i)?b=La(i,r.width):l&&di(l)&&(w=La(l,r.height)),b!==null&&(!l||wg(l))&&(w=d&&A?b/n*a:r.height),w!==null&&wg(i)&&(b=d&&A?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},qg=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},YNe=function(t,e,r,n,a){var s=e[0],i=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Cr(Math.round(n.left),Math.round(n.top+i)),new Cr(Math.round(n.left+n.width),Math.round(n.top+i)),new Cr(Math.round(n.left+n.width),Math.round(c+n.top+i)),new Cr(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new Cr(Math.round(n.left+s),Math.round(n.top)),new Cr(Math.round(n.left+s+l),Math.round(n.top)),new Cr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Cr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Cr(Math.round(n.left+s),Math.round(n.top+i)),new Cr(Math.round(n.left+s+l),Math.round(n.top+i)),new Cr(Math.round(n.left+s+l),Math.round(n.top+i+c)),new Cr(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new Cr(Math.round(a.left),Math.round(a.top)),new Cr(Math.round(a.left+a.width),Math.round(a.top)),new Cr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Cr(Math.round(a.left),Math.round(a.height+a.top))]}},JNe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",l9="Hidden Text",ZNe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=JNe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(l9)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(l9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),XZ=function(){function t(e,r){this.context=e,this.options=r}return t}(),e_e=1e4,t_e=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new ZNe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),VNe(r)&&(this.ctx.globalAlpha=r.opacity),QNe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),KZ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Il(this,void 0,void 0,function(){var n;return nl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Il(this,void 0,void 0,function(){return nl(this,function(n){switch(n.label){case 0:if(Pi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=p6(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=i_e(r.fontFamily).join(", "),s=zb(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Il(this,void 0,void 0,function(){var a,s,i,l,c,u,d,A,h=this;return nl(this,function(f){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,A=n.paintOrder,r.textBounds.forEach(function(m){A.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=Wi(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=Wi(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Wi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=Wi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=DE(r),i=OE(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c,y,y,u,d,A,h,w,f,m,I,p,g,x,y,b,w,I;return nl(this,function(T){switch(T.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,T.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:T.sent(),T.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof IZ))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=T.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof BZ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof TZ))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=T.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof FZ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=T.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),T.label=14;case 14:if(n instanceof g6&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===TE?n.checked&&(this.ctx.save(),this.path([new Cr(n.bounds.left+A*.39363,n.bounds.top+A*.79),new Cr(n.bounds.left+A*.16,n.bounds.top+A*.5549),new Cr(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new Cr(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new Cr(n.bounds.left+A*.72983,n.bounds.top+A*.23),new Cr(n.bounds.left+A*.84,n.bounds.top+A*.34085),new Cr(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=Wi(W7),this.ctx.fill(),this.ctx.restore()):n.type===PE&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Wi(W7),this.ctx.fill(),this.ctx.restore())),r_e(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],f=h[1],m=this.fontMetrics.getMetrics(w,f).baseline,this.ctx.font=w,this.ctx.fillStyle=Wi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=a_e(n.styles.textAlign),I=DE(n),p=0,n.styles.textAlign){case 1:p+=I.width/2;break;case 2:p+=I.width;break}g=I.add(p,0,0,-I.height/2+1),this.ctx.save(),this.path([new Cr(I.left,I.top),new Cr(I.left+I.width,I.top),new Cr(I.left+I.width,I.top+I.height),new Cr(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Uy(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=T.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Wi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new Cf(n.bounds.left,n.bounds.top+La(n.styles.paddingTop,n.bounds.width),n.bounds.width,j7(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Uy(r.listValue,I),s.letterSpacing,j7(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Il(this,void 0,void 0,function(){var n,a,x,s,i,x,l,c,x,u,d,x,A,h,x,f,m,x,p,g,x;return nl(this,function(y){switch(y.label){case 0:if(Pi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:A=0,h=r.inlineLevel,y.label=19;case 19:return A<h.length?(x=h[A],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return A++,[3,19];case 22:f=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return f<m.length?(x=m[f],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return f++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=_u(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),_u(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c;return nl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var A,h,f,O,re,ie,D,X,E,m,O,re,ie,D,X,p,g,x,y,b,w,I,T,C,E,S,O,B,P,D,X,de,re,ie,ce,J,pe,Se,k,F,H,M;return nl(this,function(L){switch(L.label){case 0:if(d.type!==0)return[3,5];A=void 0,h=d.url,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return A=L.sent(),[3,4];case 3:return L.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return A&&(f=J5(r,n,[A.width,A.height,A.width/A.height]),O=f[0],re=f[1],ie=f[2],D=f[3],X=f[4],E=s.ctx.createPattern(s.resizeImage(A,D,X),"repeat"),s.renderRepeat(O,E,re,ie)),[3,6];case 5:Q2e(d)?(m=J5(r,n,[null,null,null]),O=m[0],re=m[1],ie=m[2],D=m[3],X=m[4],p=D2e(d.angle,D,X),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],I=document.createElement("canvas"),I.width=D,I.height=X,T=I.getContext("2d"),C=T.createLinearGradient(x,b,y,w),T7(d.stops,g).forEach(function(z){return C.addColorStop(z.stop,Wi(z.color))}),T.fillStyle=C,T.fillRect(0,0,D,X),D>0&&X>0&&(E=s.ctx.createPattern(I,"repeat"),s.renderRepeat(O,E,re,ie))):V2e(d)&&(S=J5(r,n,[null,null,null]),O=S[0],B=S[1],P=S[2],D=S[3],X=S[4],de=d.position.length===0?[f6]:d.position,re=La(de[0],D),ie=La(de[de.length-1],X),ce=R2e(d,re,ie,D,X),J=ce[0],pe=ce[1],J>0&&pe>0&&(Se=s.ctx.createRadialGradient(B+re,P+ie,0,B+re,P+ie,J),T7(d.stops,J*2).forEach(function(z){return Se.addColorStop(z.stop,Wi(z.color))}),s.path(O),s.ctx.fillStyle=Se,J!==pe?(k=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,H=pe/J,M=1/H,s.ctx.save(),s.ctx.translate(k,F),s.ctx.transform(1,0,0,H,0,0),s.ctx.translate(-k,-F),s.ctx.fillRect(B,M*(P-F)+F,D,X*M),s.ctx.restore()):s.ctx.fill())),L.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Il(this,void 0,void 0,function(){return nl(this,function(s){return this.path(o9(a,n)),this.ctx.fillStyle=Wi(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Il(this,void 0,void 0,function(){var i,l;return nl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=KNe(s,a),this.path(i),this.ctx.fillStyle=Wi(r),this.ctx.fill(),l=GNe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Il(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,A=this;return nl(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!m0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=n_e(qg(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),m0(n.backgroundColor)||(this.ctx.fillStyle=Wi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(f){A.ctx.save();var m=FE(r.curves),p=f.inset?0:e_e,g=HNe(m,-p+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(A.path(m),A.ctx.clip(),A.mask(g)):(A.mask(m),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=f.offsetX.number+p,A.ctx.shadowOffsetY=f.offsetY.number,A.ctx.shadowColor=Wi(f.color),A.ctx.shadowBlur=f.blur.number,A.ctx.fillStyle=f.inset?Wi(f.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!m0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Il(this,void 0,void 0,function(){var l,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,I,T;return nl(this,function(C){return this.ctx.save(),l=qNe(s,a),c=o9(s,a),i===2&&(this.path(c),this.ctx.clip()),_u(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),_u(c[1])?(A=c[1].end.x,h=c[1].end.y):(A=c[1].x,h=c[1].y),a===0||a===2?f=Math.abs(u-A):f=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,f<=m*2?g=!1:f<=m*2+p?(x=f/(2*m+p),m*=x,p*=x):(y=Math.floor((f+p)/(m+p)),b=(f-y*m)/(y-1),w=(f-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Wi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(_u(c[0])&&(I=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new Cr(I.end.x,I.end.y),new Cr(T.start.x,T.start.y)]),this.ctx.stroke()),_u(c[1])&&(I=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new Cr(I.end.x,I.end.y),new Cr(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Il(this,void 0,void 0,function(){var n;return nl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Wi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=$Ne(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(XZ),r_e=function(t){return t instanceof kZ||t instanceof jZ?!0:t instanceof g6&&t.type!==PE&&t.type!==TE},n_e=function(t,e){switch(t){case 0:return FE(e);case 2:return MNe(e);case 1:default:return OE(e)}},a_e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},s_e=["-apple-system","system-ui"],i_e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return s_e.indexOf(e)===-1}):t},o_e=function(t){jd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Il(this,void 0,void 0,function(){var n,a;return nl(this,function(s){switch(s.label){case 0:return n=vj(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,l_e(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Wi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(XZ),l_e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},c_e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,vN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,vN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,vN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,vN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),u_e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new c_e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new TNe(this,e)}return t.instanceCount=1,t}(),G0=function(t,e){return e===void 0&&(e={}),d_e(t,e)};typeof window<"u"&&$Z.setContext(window);var d_e=function(t,e){return Il(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,A,h,f,m,p,g,x,y,b,w,I,C,T,C,E,S,O,B,P,D,X,de,re,ie,ce,J,pe,Se,k,F,H;return nl(this,function(M){switch(M.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=aj({logging:(B=e.logging)!==null&&B!==void 0?B:!0,cache:e.cache},a),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(X=e.scrollX)!==null&&X!==void 0?X:n.pageXOffset,scrollY:(de=e.scrollY)!==null&&de!==void 0?de:n.pageYOffset},l=new Cf(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new u_e(s,l),u=(re=e.foreignObjectRendering)!==null&&re!==void 0?re:!1,d={allowTaint:(ie=e.allowTaint)!==null&&ie!==void 0?ie:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new a9(c,t,d),h=A.clonedReferenceElement,h?[4,A.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=M.sent(),m=x6(h)||fNe(h)?H1e(h.ownerDocument):YI(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=A_e(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(J=(ce=e.scale)!==null&&ce!==void 0?ce:n.devicePixelRatio)!==null&&J!==void 0?J:1,x:((pe=e.x)!==null&&pe!==void 0?pe:0)+x,y:((Se=e.y)!==null&&Se!==void 0?Se:0)+y,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(p),height:(F=e.height)!==null&&F!==void 0?F:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new o_e(c,w),[4,C.render(h)]):[3,3];case 2:return I=M.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=DZ(c,h),b===T.styles.backgroundColor&&(T.styles.backgroundColor=df.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),C=new t_e(c,w),[4,C.render(T)];case 4:I=M.sent(),M.label=5;case 5:return(!((H=e.removeContainer)!==null&&H!==void 0)||H)&&(a9.destroy(f)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,I]}})})},A_e=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?My(t,getComputedStyle(n.documentElement).backgroundColor):df.TRANSPARENT,s=n.body?My(t,getComputedStyle(n.body).backgroundColor):df.TRANSPARENT,i=typeof r=="string"?My(t,r):r===null?df.TRANSPARENT:4294967295;return e===n.documentElement?m0(a)?m0(s)?i:s:a:i};const v6=Object.freeze(Object.defineProperty({__proto__:null,default:G0},Symbol.toStringTag,{value:"Module"})),f_e="modulepreload",h_e=function(t){return"/"+t},c9={},Af=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=h_e(c),c in c9)return;c9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const A=document.createElement("link");if(A.rel=u?"stylesheet":f_e,u||(A.as="script"),A.crossOrigin="",A.href=c,l&&A.setAttribute("nonce",l),document.head.appendChild(A),u)return new Promise((h,f)=>{A.addEventListener("load",h),A.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function xa(t){"@babel/helpers - typeof";return xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xa(t)}var Ed=Uint8Array,Lc=Uint16Array,y6=Int32Array,b6=new Ed([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),w6=new Ed([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u9=new Ed([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YZ=function(t,e){for(var r=new Lc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new y6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},JZ=YZ(b6,2),m_e=JZ.b,Ej=JZ.r;m_e[28]=258,Ej[258]=28;var p_e=YZ(w6,0),d9=p_e.r,Sj=new Lc(32768);for(var Ya=0;Ya<32768;++Ya){var vh=(Ya&43690)>>1|(Ya&21845)<<1;vh=(vh&52428)>>2|(vh&13107)<<2,vh=(vh&61680)>>4|(vh&3855)<<4,Sj[Ya]=((vh&65280)>>8|(vh&255)<<8)>>1}var Vy=function(t,e,r){for(var n=t.length,a=0,s=new Lc(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Lc(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Lc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],A=i[t[a]-1]++<<d,h=A|(1<<d)-1;A<=h;++A)l[Sj[A]>>c]=u}else for(l=new Lc(n),a=0;a<n;++a)t[a]&&(l[a]=Sj[i[t[a]-1]++]>>15-t[a]);return l},yp=new Ed(288);for(var Ya=0;Ya<144;++Ya)yp[Ya]=8;for(var Ya=144;Ya<256;++Ya)yp[Ya]=9;for(var Ya=256;Ya<280;++Ya)yp[Ya]=7;for(var Ya=280;Ya<288;++Ya)yp[Ya]=8;var RE=new Ed(32);for(var Ya=0;Ya<32;++Ya)RE[Ya]=5;var g_e=Vy(yp,9,0),x_e=Vy(RE,5,0),ZZ=function(t){return(t+7)/8|0},v_e=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Ed(t.subarray(e,r))},DA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},T1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Z5=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:tee,l:0};if(a==1){var i=new Ed(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(I,T){return I.f-T.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,A=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[A].f?u++:A++],c=r[u!=d&&r[u].f<r[A].f?u++:A++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var f=new Lc(h+1),m=Ij(r[d-1],f,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(T,C){return f[C.s]-f[T.s]||T.f-C.f});n<a;++n){var y=s[n].s;if(f[y]>e)p+=x-(1<<m-f[y]),f[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;f[b]<e?p-=1<<e-f[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;f[w]==e&&(--f[w],++p)}m=e}return{t:new Ed(f),l:m}},Ij=function(t,e,r){return t.s==-1?Math.max(Ij(t.l,e,r+1),Ij(t.r,e,r+1)):e[t.s]=r},A9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Lc(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},P1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},eee=function(t,e,r){var n=r.length,a=ZZ(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},f9=function(t,e,r,n,a,s,i,l,c,u,d){DA(e,d++,r),++a[256];for(var A=Z5(a,15),h=A.t,f=A.l,m=Z5(s,15),p=m.t,g=m.l,x=A9(h),y=x.c,b=x.n,w=A9(p),I=w.c,T=w.n,C=new Lc(19),E=0;E<y.length;++E)++C[y[E]&31];for(var E=0;E<I.length;++E)++C[I[E]&31];for(var S=Z5(C,7),O=S.t,B=S.l,P=19;P>4&&!O[u9[P-1]];--P);var D=u+5<<3,X=P1(a,yp)+P1(s,RE)+i,de=P1(a,h)+P1(s,p)+i+14+3*P+P1(C,O)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&D<=X&&D<=de)return eee(e,d,t.subarray(c,c+u));var re,ie,ce,J;if(DA(e,d,1+(de<X)),d+=2,de<X){re=Vy(h,f,0),ie=h,ce=Vy(p,g,0),J=p;var pe=Vy(O,B,0);DA(e,d,b-257),DA(e,d+5,T-1),DA(e,d+10,P-4),d+=14;for(var E=0;E<P;++E)DA(e,d+3*E,O[u9[E]]);d+=3*P;for(var Se=[y,I],k=0;k<2;++k)for(var F=Se[k],E=0;E<F.length;++E){var H=F[E]&31;DA(e,d,pe[H]),d+=O[H],H>15&&(DA(e,d,F[E]>>5&127),d+=F[E]>>12)}}else re=g_e,ie=yp,ce=x_e,J=RE;for(var E=0;E<l;++E){var M=n[E];if(M>255){var H=M>>18&31;T1(e,d,re[H+257]),d+=ie[H+257],H>7&&(DA(e,d,M>>23&31),d+=b6[H]);var L=M&31;T1(e,d,ce[L]),d+=J[L],L>3&&(T1(e,d,M>>5&8191),d+=w6[L])}else T1(e,d,re[M]),d+=ie[M]}return T1(e,d,re[256]),d+ie[256]},y_e=new y6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tee=new Ed(0),b_e=function(t,e,r,n,a,s){var i=s.z||t.length,l=new Ed(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var A=y_e[e-1],h=A>>13,f=A&8191,m=(1<<r)-1,p=s.p||new Lc(32768),g=s.h||new Lc(m+1),x=Math.ceil(r/3),y=2*x,b=function(Y){return(t[Y]^t[Y+1]<<x^t[Y+2]<<y)&m},w=new y6(25e3),I=new Lc(288),T=new Lc(32),C=0,E=0,S=s.i||0,O=0,B=s.w||0,P=0;S+2<i;++S){var D=b(S),X=S&32767,de=g[D];if(p[X]=de,g[D]=X,B<=S){var re=i-S;if((C>7e3||O>24576)&&(re>423||!u)){d=f9(t,c,0,w,I,T,E,O,P,S-P,d),O=C=E=0,P=S;for(var ie=0;ie<286;++ie)I[ie]=0;for(var ie=0;ie<30;++ie)T[ie]=0}var ce=2,J=0,pe=f,Se=X-de&32767;if(re>2&&D==b(S-Se))for(var k=Math.min(h,re)-1,F=Math.min(32767,S),H=Math.min(258,re);Se<=F&&--pe&&X!=de;){if(t[S+ce]==t[S+ce-Se]){for(var M=0;M<H&&t[S+M]==t[S+M-Se];++M);if(M>ce){if(ce=M,J=Se,M>k)break;for(var L=Math.min(Se,M-2),z=0,ie=0;ie<L;++ie){var R=S-Se+ie&32767,G=p[R],ee=R-G&32767;ee>z&&(z=ee,de=R)}}}X=de,de=p[X],Se+=X-de&32767}if(J){w[O++]=268435456|Ej[ce]<<18|d9[J];var te=Ej[ce]&31,Q=d9[J]&31;E+=b6[te]+w6[Q],++I[257+te],++T[Q],B=S+ce,++C}else w[O++]=t[S],++I[t[S]]}}for(S=Math.max(S,B);S<i;++S)w[O++]=t[S],++I[t[S]];d=f9(t,c,u,w,I,T,E,O,P,S-P,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=S,s.w=B)}else{for(var S=s.w||0;S<i+u;S+=65535){var xe=S+65535;xe>=i&&(c[d/8|0]=u,xe=i),d=eee(c,d+1,t.subarray(S,xe))}s.i=i}return v_e(l,0,n+ZZ(d)+a)},ree=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},w_e=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Ed(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return b_e(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},nee=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},N_e=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=ree();a.p(e.dictionary),nee(t,2,a.d())}};function Bj(t,e){e||(e={});var r=ree();r.p(t);var n=w_e(t,e,e.dictionary?6:2,4);return N_e(n,e),nee(n,n.length-4,r.d()),n}var __e=typeof TextDecoder<"u"&&new TextDecoder,C_e=0;try{__e.decode(tee,{stream:!0}),C_e=1}catch{}function E_e(t){if(Array.isArray(t))return t}function S_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function h9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function I_e(t,e){if(t){if(typeof t=="string")return h9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h9(t,e):void 0}}function B_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m9(t,e){return E_e(t)||S_e(t,e)||I_e(t,e)||B_e()}function p9(t,e="utf8"){return new TextDecoder(e).decode(t)}const T_e=new TextEncoder;function P_e(t){return T_e.encode(t)}const j_e=1024*8,k_e=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),eB={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class N6{constructor(e=j_e,r={}){ta(this,"buffer");ta(this,"byteLength");ta(this,"byteOffset");ta(this,"length");ta(this,"offset");ta(this,"lastWrittenByte");ta(this,"littleEndian");ta(this,"_data");ta(this,"_mark");ta(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof N6)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=eB[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===k_e&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new eB[r](l.buffer);return this.offset+=n,c.reverse(),c}const i=new eB[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return p9(this.readBytes(e))}decodeText(e=1,r="utf8"){return p9(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(P_e(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Bv(t){let e=t.length;for(;--e>=0;)t[e]=0}const F_e=3,O_e=258,aee=29,D_e=256,R_e=D_e+1+aee,see=30,M_e=512,L_e=new Array((R_e+2)*2);Bv(L_e);const U_e=new Array(see*2);Bv(U_e);const Q_e=new Array(M_e);Bv(Q_e);const V_e=new Array(O_e-F_e+1);Bv(V_e);const H_e=new Array(aee);Bv(H_e);const $_e=new Array(see);Bv($_e);const K_e=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var Tj=K_e;const G_e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},q_e=new Uint32Array(G_e()),z_e=(t,e,r,n)=>{const a=q_e,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var Kd=z_e,Pj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const W_e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var X_e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)W_e(r,n)&&(t[n]=r[n])}}return t},Y_e=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},oee={assign:X_e,flattenChunks:Y_e};let lee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lee=!1}const V2=new Uint8Array(256);for(let t=0;t<256;t++)V2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;V2[254]=V2[254]=1;var J_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,l=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const Z_e=(t,e)=>{if(e<65534&&t.subarray&&lee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var eCe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let l=V2[i];if(l>4){s[a++]=65533,n+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&n<r;)i=i<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return Z_e(s,a)},tCe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+V2[t[r]]>e?r:e},jj={string2buf:J_e,buf2string:eCe,utf8border:tCe};function rCe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nCe=rCe;const VN=16209,aCe=16191;var sCe=function(e,r){let n,a,s,i,l,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S,O;const B=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),s=e.next_out,O=e.output,i=s-(r-e.avail_out),l=s+(e.avail_out-257),c=B.dmax,u=B.wsize,d=B.whave,A=B.wnext,h=B.window,f=B.hold,m=B.bits,p=B.lencode,g=B.distcode,x=(1<<B.lenbits)-1,y=(1<<B.distbits)-1;e:do{m<15&&(f+=S[n++]<<m,m+=8,f+=S[n++]<<m,m+=8),b=p[f&x];t:for(;;){if(w=b>>>24,f>>>=w,m-=w,w=b>>>16&255,w===0)O[s++]=b&65535;else if(w&16){I=b&65535,w&=15,w&&(m<w&&(f+=S[n++]<<m,m+=8),I+=f&(1<<w)-1,f>>>=w,m-=w),m<15&&(f+=S[n++]<<m,m+=8,f+=S[n++]<<m,m+=8),b=g[f&y];r:for(;;){if(w=b>>>24,f>>>=w,m-=w,w=b>>>16&255,w&16){if(T=b&65535,w&=15,m<w&&(f+=S[n++]<<m,m+=8,m<w&&(f+=S[n++]<<m,m+=8)),T+=f&(1<<w)-1,T>c){e.msg="invalid distance too far back",B.mode=VN;break e}if(f>>>=w,m-=w,w=s-i,T>w){if(w=T-w,w>d&&B.sane){e.msg="invalid distance too far back",B.mode=VN;break e}if(C=0,E=h,A===0){if(C+=u-w,w<I){I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}}else if(A<w){if(C+=u+A-w,w-=A,w<I){I-=w;do O[s++]=h[C++];while(--w);if(C=0,A<I){w=A,I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}}}else if(C+=A-w,w<I){I-=w;do O[s++]=h[C++];while(--w);C=s-T,E=O}for(;I>2;)O[s++]=E[C++],O[s++]=E[C++],O[s++]=E[C++],I-=3;I&&(O[s++]=E[C++],I>1&&(O[s++]=E[C++]))}else{C=s-T;do O[s++]=O[C++],O[s++]=O[C++],O[s++]=O[C++],I-=3;while(I>2);I&&(O[s++]=O[C++],I>1&&(O[s++]=O[C++]))}}else if(w&64){e.msg="invalid distance code",B.mode=VN;break e}else{b=g[(b&65535)+(f&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){B.mode=aCe;break e}else{e.msg="invalid literal/length code",B.mode=VN;break e}else{b=p[(b&65535)+(f&(1<<w)-1)];continue t}break}}while(n<a&&s<l);I=m>>3,n-=I,m-=I<<3,f&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),B.hold=f,B.bits=m};const Ng=15,g9=852,x9=592,v9=0,tB=1,y9=2,iCe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oCe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lCe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cCe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uCe=(t,e,r,n,a,s,i,l)=>{const c=l.bits;let u=0,d=0,A=0,h=0,f=0,m=0,p=0,g=0,x=0,y=0,b,w,I,T,C,E=null,S;const O=new Uint16Array(Ng+1),B=new Uint16Array(Ng+1);let P=null,D,X,de;for(u=0;u<=Ng;u++)O[u]=0;for(d=0;d<n;d++)O[e[r+d]]++;for(f=c,h=Ng;h>=1&&O[h]===0;h--);if(f>h&&(f=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(A=1;A<h&&O[A]===0;A++);for(f<A&&(f=A),g=1,u=1;u<=Ng;u++)if(g<<=1,g-=O[u],g<0)return-1;if(g>0&&(t===v9||h!==1))return-1;for(B[1]=0,u=1;u<Ng;u++)B[u+1]=B[u]+O[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[B[e[r+d]]++]=d);if(t===v9?(E=P=i,S=20):t===tB?(E=iCe,P=oCe,S=257):(E=lCe,P=cCe,S=0),y=0,d=0,u=A,C=s,m=f,p=0,I=-1,x=1<<f,T=x-1,t===tB&&x>g9||t===y9&&x>x9)return 1;for(;;){D=u-p,i[d]+1<S?(X=0,de=i[d]):i[d]>=S?(X=P[i[d]-S],de=E[i[d]-S]):(X=96,de=0),b=1<<u-p,w=1<<m,A=w;do w-=b,a[C+(y>>p)+w]=D<<24|X<<16|de|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--O[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>f&&(y&T)!==I){for(p===0&&(p=f),C+=A,m=u-p,g=1<<m;m+p<h&&(g-=O[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===tB&&x>g9||t===y9&&x>x9)return 1;I=y&T,a[I]=f<<24|m<<16|C-s|0}}return y!==0&&(a[C+y]=u-p<<24|64<<16|0),l.bits=f,0};var Hy=uCe;const dCe=0,cee=1,uee=2,{Z_FINISH:b9,Z_BLOCK:ACe,Z_TREES:HN,Z_OK:bp,Z_STREAM_END:fCe,Z_NEED_DICT:hCe,Z_STREAM_ERROR:Ru,Z_DATA_ERROR:dee,Z_MEM_ERROR:Aee,Z_BUF_ERROR:mCe,Z_DEFLATED:w9}=iee,o4=16180,N9=16181,_9=16182,C9=16183,E9=16184,S9=16185,I9=16186,B9=16187,T9=16188,P9=16189,ME=16190,RA=16191,rB=16192,j9=16193,nB=16194,k9=16195,F9=16196,O9=16197,D9=16198,$N=16199,KN=16200,R9=16201,M9=16202,L9=16203,U9=16204,Q9=16205,aB=16206,V9=16207,H9=16208,ns=16209,fee=16210,hee=16211,pCe=852,gCe=592,xCe=15,vCe=xCe,$9=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function yCe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Kp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<o4||e.mode>hee?1:0},mee=t=>{if(Kp(t))return Ru;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=o4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(pCe),e.distcode=e.distdyn=new Int32Array(gCe),e.sane=1,e.back=-1,bp},pee=t=>{if(Kp(t))return Ru;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,mee(t)},gee=(t,e)=>{let r;if(Kp(t))return Ru;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ru:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,pee(t))},xee=(t,e)=>{if(!t)return Ru;const r=new yCe;t.state=r,r.strm=t,r.window=null,r.mode=o4;const n=gee(t,e);return n!==bp&&(t.state=null),n},bCe=t=>xee(t,vCe);let K9=!0,sB,iB;const wCe=t=>{if(K9){sB=new Int32Array(512),iB=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Hy(cee,t.lens,0,288,sB,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Hy(uee,t.lens,0,32,iB,0,t.work,{bits:5}),K9=!1}t.lencode=sB,t.lenbits=9,t.distcode=iB,t.distbits=5},vee=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},NCe=(t,e)=>{let r,n,a,s,i,l,c,u,d,A,h,f,m,p,g=0,x,y,b,w,I,T,C,E;const S=new Uint8Array(4);let O,B;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Kp(t)||!t.output||!t.input&&t.avail_in!==0)return Ru;r=t.state,r.mode===RA&&(r.mode=rB),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,A=l,h=c,E=bp;e:for(;;)switch(r.mode){case o4:if(r.wrap===0){r.mode=rB;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,S[0]=u&255,S[1]=u>>>8&255,r.check=Kd(r.check,S,2,0),u=0,d=0,r.mode=N9;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ns;break}if((u&15)!==w9){t.msg="unknown compression method",r.mode=ns;break}if(u>>>=4,d-=4,C=(u&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){t.msg="invalid window size",r.mode=ns;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?P9:RA,u=0,d=0;break;case N9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==w9){t.msg="unknown compression method",r.mode=ns;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ns;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Kd(r.check,S,2,0)),u=0,d=0,r.mode=_9;case _9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=Kd(r.check,S,4,0)),u=0,d=0,r.mode=C9;case C9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Kd(r.check,S,2,0)),u=0,d=0,r.mode=E9;case E9:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=Kd(r.check,S,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=S9;case S9:if(r.flags&1024&&(f=r.length,f>l&&(f=l),f&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),C)),r.flags&512&&r.wrap&4&&(r.check=Kd(r.check,n,f,s)),l-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=I9;case I9:if(r.flags&2048){if(l===0)break e;f=0;do C=n[s+f++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Kd(r.check,n,f,s)),l-=f,s+=f,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=B9;case B9:if(r.flags&4096){if(l===0)break e;f=0;do C=n[s+f++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Kd(r.check,n,f,s)),l-=f,s+=f,C)break e}else r.head&&(r.head.comment=null);r.mode=T9;case T9:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ns;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=RA;break;case P9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=$9(u),u=0,d=0,r.mode=ME;case ME:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,hCe;t.adler=r.check=1,r.mode=RA;case RA:if(e===ACe||e===HN)break e;case rB:if(r.last){u>>>=d&7,d-=d&7,r.mode=aB;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=j9;break;case 1:if(wCe(r),r.mode=$N,e===HN){u>>>=2,d-=2;break e}break;case 2:r.mode=F9;break;case 3:t.msg="invalid block type",r.mode=ns}u>>>=2,d-=2;break;case j9:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ns;break}if(r.length=u&65535,u=0,d=0,r.mode=nB,e===HN)break e;case nB:r.mode=k9;case k9:if(f=r.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;a.set(n.subarray(s,s+f),i),l-=f,s+=f,c-=f,i+=f,r.length-=f;break}r.mode=RA;break;case F9:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ns;break}r.have=0,r.mode=O9;case O9:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[P[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},E=Hy(dCe,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid code lengths set",r.mode=ns;break}r.have=0,r.mode=D9;case D9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(B=x+2;d<B;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=ns;break}C=r.lens[r.have-1],f=3+(u&3),u>>>=2,d-=2}else if(b===17){for(B=x+3;d<B;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,f=3+(u&7),u>>>=3,d-=3}else{for(B=x+7;d<B;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,f=11+(u&127),u>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ns;break}for(;f--;)r.lens[r.have++]=C}}if(r.mode===ns)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ns;break}if(r.lenbits=9,O={bits:r.lenbits},E=Hy(cee,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid literal/lengths set",r.mode=ns;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},E=Hy(uee,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,E){t.msg="invalid distances set",r.mode=ns;break}if(r.mode=$N,e===HN)break e;case $N:r.mode=KN;case KN:if(l>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,sCe(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===RA&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,I=y,T=b;g=r.lencode[T+((u&(1<<w+I)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=Q9;break}if(y&32){r.back=-1,r.mode=RA;break}if(y&64){t.msg="invalid literal/length code",r.mode=ns;break}r.extra=y&15,r.mode=R9;case R9:if(r.extra){for(B=r.extra;d<B;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=M9;case M9:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,I=y,T=b;g=r.distcode[T+((u&(1<<w+I)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=ns;break}r.offset=b,r.extra=y&15,r.mode=L9;case L9:if(r.extra){for(B=r.extra;d<B;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ns;break}r.mode=U9;case U9:if(c===0)break e;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ns;break}f>r.wnext?(f-=r.wnext,m=r.wsize-f):m=r.wnext-f,f>r.length&&(f=r.length),p=r.window}else p=a,m=i-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do a[i++]=p[m++];while(--f);r.length===0&&(r.mode=KN);break;case Q9:if(c===0)break e;a[i++]=r.length,c--,r.mode=KN;break;case aB:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Kd(r.check,a,h,i-h):Tj(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:$9(u))!==r.check){t.msg="incorrect data check",r.mode=ns;break}u=0,d=0}r.mode=V9;case V9:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ns;break}u=0,d=0}r.mode=H9;case H9:E=fCe;break e;case ns:E=dee;break e;case fee:return Aee;case hee:default:return Ru}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<ns&&(r.mode<aB||e!==b9))&&vee(t,t.output,t.next_out,h-t.avail_out),A-=t.avail_in,h-=t.avail_out,t.total_in+=A,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Kd(r.check,a,h,t.next_out-h):Tj(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===RA?128:0)+(r.mode===$N||r.mode===nB?256:0),(A===0&&h===0||e===b9)&&E===bp&&(E=mCe),E},_Ce=t=>{if(Kp(t))return Ru;let e=t.state;return e.window&&(e.window=null),t.state=null,bp},CCe=(t,e)=>{if(Kp(t))return Ru;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,bp):Ru},ECe=(t,e)=>{const r=e.length;let n,a,s;return Kp(t)||(n=t.state,n.wrap!==0&&n.mode!==ME)?Ru:n.mode===ME&&(a=1,a=Tj(a,e,r,0),a!==n.check)?dee:(s=vee(t,e,r,r),s?(n.mode=fee,Aee):(n.havedict=1,bp))};var SCe=pee,ICe=gee,BCe=mee,TCe=bCe,PCe=xee,jCe=NCe,kCe=_Ce,FCe=CCe,OCe=ECe,DCe="pako inflate (from Nodeca project)",GA={inflateReset:SCe,inflateReset2:ICe,inflateResetKeep:BCe,inflateInit:TCe,inflateInit2:PCe,inflate:jCe,inflateEnd:kCe,inflateGetHeader:FCe,inflateSetDictionary:OCe,inflateInfo:DCe};function RCe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MCe=RCe;const yee=Object.prototype.toString,{Z_NO_FLUSH:LCe,Z_FINISH:UCe,Z_OK:H2,Z_STREAM_END:oB,Z_NEED_DICT:lB,Z_STREAM_ERROR:QCe,Z_DATA_ERROR:G9,Z_MEM_ERROR:VCe}=iee;function Wb(t){this.options=oee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nCe,this.strm.avail_out=0;let r=GA.inflateInit2(this.strm,e.windowBits);if(r!==H2)throw new Error(Pj[r]);if(this.header=new MCe,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=jj.string2buf(e.dictionary):yee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=GA.inflateSetDictionary(this.strm,e.dictionary),r!==H2)))throw new Error(Pj[r])}Wb.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,l;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?UCe:LCe,yee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=GA.inflate(r,i),s===lB&&a&&(s=GA.inflateSetDictionary(r,a),s===H2?s=GA.inflate(r,i):s===G9&&(s=lB));r.avail_in>0&&s===oB&&r.state.wrap>0&&t[r.next_in]!==0;)GA.inflateReset(r),s=GA.inflate(r,i);switch(s){case QCe:case G9:case lB:case VCe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===oB))if(this.options.to==="string"){let c=jj.utf8border(r.output,r.next_out),u=r.next_out-c,d=jj.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===H2&&l===0)){if(s===oB)return s=GA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Wb.prototype.onData=function(t){this.chunks.push(t)};Wb.prototype.onEnd=function(t){t===H2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function HCe(t,e){const r=new Wb(e);if(r.push(t),r.err)throw r.msg||Pj[r.err];return r.result}var $Ce=Wb,KCe=HCe,GCe={Inflate:$Ce,inflate:KCe};const{Inflate:qCe,inflate:zCe}=GCe;var q9=qCe,WCe=zCe;const bee=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;bee[t]=e}const z9=4294967295;function XCe(t,e,r){let n=t;for(let a=0;a<r;a++)n=bee[(n^e[a])&255]^n>>>8;return n}function YCe(t,e){return(XCe(z9,t,e)^z9)>>>0}function W9(t,e,r){const n=t.readUint32(),a=YCe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function wee(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Nee(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function _ee(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Cee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Eee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+JCe(e[s-a],r[s],r[s-a])&255}}function JCe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function ZCe(t,e,r,n,a,s){switch(t){case 0:wee(e,r,a);break;case 1:Nee(e,r,a,s);break;case 2:_ee(e,r,n,a);break;case 3:Cee(e,r,n,a,s);break;case 4:Eee(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const eEe=new Uint16Array([255]),tEe=new Uint8Array(eEe.buffer),rEe=tEe[0]===255;function nEe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const A=i[d],h=Math.ceil((r-A.x)/A.xStep),f=Math.ceil((n-A.y)/A.yStep);if(h<=0||f<=0)continue;const m=h*l,p=new Uint8Array(m);for(let g=0;g<f;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);ZCe(x,y,b,p,m,l),p.set(b);for(let w=0;w<h;w++){const I=A.x+w*A.xStep,T=A.y+g*A.yStep;if(!(I>=r||T>=n))for(let C=0;C<l;C++)c[(T*r+I)*l+C]=b[w*l+C]}}}if(s===16){const d=new Uint16Array(c.buffer);if(rEe)for(let A=0;A<d.length;A++)d[A]=aEe(d[A]);return d}else return c}function aEe(t){return(t&255)<<8|t>>8&255}const sEe=new Uint16Array([255]),iEe=new Uint8Array(sEe.buffer),oEe=iEe[0]===255,lEe=new Uint8Array(0);function X9(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=lEe,d=0,A,h;for(let f=0;f<n;f++){switch(A=e.subarray(d+1,d+1+l),h=c.subarray(f*l,(f+1)*l),e[d]){case 0:wee(A,h,l);break;case 1:Nee(A,h,l,i);break;case 2:_ee(A,h,u,l);break;case 3:Cee(A,h,u,l,i);break;case 4:Eee(A,h,u,l,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=l+1}if(s===16){const f=new Uint16Array(c.buffer);if(oEe)for(let m=0;m<f.length;m++)f[m]=cEe(f[m]);return f}else return c}function cEe(t){return(t&255)<<8|t>>8&255}const _C=Uint8Array.of(137,80,78,71,13,10,26,10);function Y9(t){if(!uEe(t.readBytes(_C.length)))throw new Error("wrong PNG signature")}function uEe(t){if(t.length<_C.length)return!1;for(let e=0;e<_C.length;e++)if(t[e]!==_C[e])return!1;return!0}const dEe="tEXt",AEe=0,See=new TextDecoder("latin1");function fEe(t){if(mEe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const hEe=/^[\u0000-\u00FF]*$/;function mEe(t){if(!hEe.test(t))throw new Error("invalid latin1 text")}function pEe(t,e,r){const n=Iee(e);t[n]=gEe(e,r-n.length-1)}function Iee(t){for(t.mark();t.readByte()!==AEe;);const e=t.offset;t.reset();const r=See.decode(t.readBytes(e-t.offset-1));return t.skip(1),fEe(r),r}function gEe(t,e){return See.decode(t.readBytes(e))}const Ec={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},cB={UNKNOWN:-1,DEFLATE:0},J9={UNKNOWN:-1,ADAPTIVE:0},uB={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},GN={NONE:0,BACKGROUND:1,PREVIOUS:2},dB={SOURCE:0,OVER:1};class xEe extends N6{constructor(r,n={}){super(r);ta(this,"_checkCrc");ta(this,"_inflator");ta(this,"_png");ta(this,"_apng");ta(this,"_end");ta(this,"_hasPalette");ta(this,"_palette");ta(this,"_hasTransparency");ta(this,"_transparency");ta(this,"_compressionMethod");ta(this,"_filterMethod");ta(this,"_interlaceMethod");ta(this,"_colorType");ta(this,"_isAnimated");ta(this,"_numberOfFrames");ta(this,"_numberOfPlays");ta(this,"_frames");ta(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new q9,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=cB.UNKNOWN,this._filterMethod=J9.UNKNOWN,this._interlaceMethod=uB.UNKNOWN,this._colorType=Ec.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Y9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(Y9(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case dEe:pEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?W9(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?W9(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=vEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Ec.GREYSCALE:a=1;break;case Ec.TRUECOLOUR:a=3;break;case Ec.INDEXED_COLOUR:a=1;break;case Ec.GREYSCALE_ALPHA:a=2;break;case Ec.TRUECOLOUR_ALPHA:a=4;break;case Ec.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==cB.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ec.GREYSCALE:case Ec.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ec.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ec.UNKNOWN:case Ec.GREYSCALE_ALPHA:case Ec.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Iee(this),a=this.readUint8();if(a!==cB.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:WCe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=X9({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case GN.NONE:break;case GN.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case GN.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,l)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(i*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case dB.SOURCE:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case dB.OVER:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const A=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],f=Math.floor(A*h+(1-A)*r.data[c+d]);r.data[c+d]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==J9.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===uB.NO_INTERLACE)this._png.data=X9({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===uB.ADAM7)this._png.data=nEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:GN.NONE,blendOp:dB.SOURCE,data:r}),this._inflator=new q9,this._writingDataChunks=!1}}function vEe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Z9;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Z9||(Z9={}));function yEe(t,e){return new xEe(t,e).decode()}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function AB(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var ja={log:AB,warn:function(t){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):AB.call(null,arguments))},error:function(t){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):AB(t))}};function fB(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){vm(n.response,e,r)},n.onerror=function(){ja.error("could not download file")},n.send()}function eQ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qN(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var vm=tn.saveAs||((typeof window>"u"?"undefined":xa(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=tn.URL||tn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?eQ(a.href)?fB(t,e,r):qN(a,a.target="_blank"):qN(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){qN(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(eQ(t))fB(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){qN(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:xa(s)!=="object"&&(ja.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return fB(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(tn.HTMLElement)||tn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":xa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=tn.URL||tn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Bee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var CC=tn.atob.bind(tn),tQ=tn.btoa.bind(tn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hB(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Wo(r,n,a,s,e[0],7,-680876936),s=Wo(s,r,n,a,e[1],12,-389564586),a=Wo(a,s,r,n,e[2],17,606105819),n=Wo(n,a,s,r,e[3],22,-1044525330),r=Wo(r,n,a,s,e[4],7,-176418897),s=Wo(s,r,n,a,e[5],12,1200080426),a=Wo(a,s,r,n,e[6],17,-1473231341),n=Wo(n,a,s,r,e[7],22,-45705983),r=Wo(r,n,a,s,e[8],7,1770035416),s=Wo(s,r,n,a,e[9],12,-1958414417),a=Wo(a,s,r,n,e[10],17,-42063),n=Wo(n,a,s,r,e[11],22,-1990404162),r=Wo(r,n,a,s,e[12],7,1804603682),s=Wo(s,r,n,a,e[13],12,-40341101),a=Wo(a,s,r,n,e[14],17,-1502002290),r=Xo(r,n=Wo(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Xo(s,r,n,a,e[6],9,-1069501632),a=Xo(a,s,r,n,e[11],14,643717713),n=Xo(n,a,s,r,e[0],20,-373897302),r=Xo(r,n,a,s,e[5],5,-701558691),s=Xo(s,r,n,a,e[10],9,38016083),a=Xo(a,s,r,n,e[15],14,-660478335),n=Xo(n,a,s,r,e[4],20,-405537848),r=Xo(r,n,a,s,e[9],5,568446438),s=Xo(s,r,n,a,e[14],9,-1019803690),a=Xo(a,s,r,n,e[3],14,-187363961),n=Xo(n,a,s,r,e[8],20,1163531501),r=Xo(r,n,a,s,e[13],5,-1444681467),s=Xo(s,r,n,a,e[2],9,-51403784),a=Xo(a,s,r,n,e[7],14,1735328473),r=Yo(r,n=Xo(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Yo(s,r,n,a,e[8],11,-2022574463),a=Yo(a,s,r,n,e[11],16,1839030562),n=Yo(n,a,s,r,e[14],23,-35309556),r=Yo(r,n,a,s,e[1],4,-1530992060),s=Yo(s,r,n,a,e[4],11,1272893353),a=Yo(a,s,r,n,e[7],16,-155497632),n=Yo(n,a,s,r,e[10],23,-1094730640),r=Yo(r,n,a,s,e[13],4,681279174),s=Yo(s,r,n,a,e[0],11,-358537222),a=Yo(a,s,r,n,e[3],16,-722521979),n=Yo(n,a,s,r,e[6],23,76029189),r=Yo(r,n,a,s,e[9],4,-640364487),s=Yo(s,r,n,a,e[12],11,-421815835),a=Yo(a,s,r,n,e[15],16,530742520),r=Jo(r,n=Yo(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Jo(s,r,n,a,e[7],10,1126891415),a=Jo(a,s,r,n,e[14],15,-1416354905),n=Jo(n,a,s,r,e[5],21,-57434055),r=Jo(r,n,a,s,e[12],6,1700485571),s=Jo(s,r,n,a,e[3],10,-1894986606),a=Jo(a,s,r,n,e[10],15,-1051523),n=Jo(n,a,s,r,e[1],21,-2054922799),r=Jo(r,n,a,s,e[8],6,1873313359),s=Jo(s,r,n,a,e[15],10,-30611744),a=Jo(a,s,r,n,e[6],15,-1560198380),n=Jo(n,a,s,r,e[13],21,1309151649),r=Jo(r,n,a,s,e[4],6,-145523070),s=Jo(s,r,n,a,e[11],10,-1120210379),a=Jo(a,s,r,n,e[2],15,718787259),n=Jo(n,a,s,r,e[9],21,-343485551),t[0]=Jh(r,t[0]),t[1]=Jh(n,t[1]),t[2]=Jh(a,t[2]),t[3]=Jh(s,t[3])}function l4(t,e,r,n,a,s){return e=Jh(Jh(e,t),Jh(n,s)),Jh(e<<a|e>>>32-a,r)}function Wo(t,e,r,n,a,s,i){return l4(e&r|~e&n,t,e,a,s,i)}function Xo(t,e,r,n,a,s,i){return l4(e&n|r&~n,t,e,a,s,i)}function Yo(t,e,r,n,a,s,i){return l4(e^r^n,t,e,a,s,i)}function Jo(t,e,r,n,a,s,i){return l4(r^(e|~n),t,e,a,s,i)}function Tee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)hB(n,bEe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(hB(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,hB(n,a),n}function bEe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var rQ="0123456789abcdef".split("");function wEe(t){for(var e="",r=0;r<4;r++)e+=rQ[t>>8*r+4&15]+rQ[t>>8*r&15];return e}function NEe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function kj(t){return Tee(t).map(NEe).join("")}var _Ee=function(t){for(var e=0;e<t.length;e++)t[e]=wEe(t[e]);return t.join("")}(Tee("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jh(t,e){if(_Ee){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Fj(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var A=e.length,h=0,f=0,m="";for(c=0;c<A;c++)f=(f+(d=l[h=(h+1)%256]))%256,l[h]=l[f],l[f]=d,i=l[(l[h]+l[f])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nQ={print:4,modify:8,copy:16,"annot-forms":32};function zg(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(nQ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=nQ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=kj(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Fj(this.encryptionKey,this.padding)}function Wg(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function aQ(t){if(xa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(l){tn.console&&ja.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $2(t){if(!(this instanceof $2))return new $2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Pee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function $h(t,e,r,n,a){if(!(this instanceof $h))return new $h(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Pee.call(this,n,a)}function Om(t,e,r,n,a){if(!(this instanceof Om))return new Om(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Pee.call(this,n,a)}function Br(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;xa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var A=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=aQ;var m="1.3",p=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(U){m=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var x=f.__private__.getPageFormat=function(U){return g[U]};a=a||"a4";var y="compat",b="advanced",w=y;function I(){this.saveGraphicsState(),W(new be(he,0,0,-he,0,ru()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),u="n",w=b}function T(){this.restoreGraphicsState(),u="S",w=y}var C=f.__private__.combineFontStyleAndFontWeight=function(U,ye){if(U=="bold"&&ye=="normal"||U=="bold"&&ye==400||U=="normal"&&ye=="italic"||U=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(U=ye==400||ye==="normal"?U==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||U!=="normal"?(ye==700?"bold":ye)+""+U:"bold"),U};f.advancedAPI=function(U){var ye=w===y;return ye&&I.call(this),typeof U!="function"||(U(this),ye&&T.call(this)),this},f.compatAPI=function(U){var ye=w===b;return ye&&T.call(this),typeof U!="function"||(U(this),ye&&I.call(this)),this},f.isAdvancedAPI=function(){return w===b};var E,S=function(U){if(w!==b)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=f.roundToPrecision=f.__private__.roundToPrecision=function(U,ye){var Ve=e||ye;if(isNaN(U)||isNaN(Ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ve).replace(/0+$/,"")};E=f.hpf=f.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,16)};var B=f.f2=f.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return O(U,2)},P=f.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return O(U,3)},D=f.scale=f.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?U*he:w===b?U:void 0},X=function(U){return D(function(ye){return w===y?ru()-ye:w===b?ye:void 0}(U))};f.__private__.setPrecision=f.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var de,re="00000000000000000000000000000000",ie=f.__private__.getFileId=function(){return re},ce=f.__private__.setFileId=function(U){return re=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ir=new zg(d.userPermissions,d.userPassword,d.ownerPassword,re)),re};f.setFileId=function(U){return ce(U),this},f.getFileId=function(){return ie()};var J=f.__private__.convertDateToPDFDate=function(U){var ye=U.getTimezoneOffset(),Ve=ye<0?"+":"-",et=Math.floor(Math.abs(ye/60)),pt=Math.abs(ye%60),$t=[Ve,H(et),"'",H(pt),"'"].join("");return["D:",U.getFullYear(),H(U.getMonth()+1),H(U.getDate()),H(U.getHours()),H(U.getMinutes()),H(U.getSeconds()),$t].join("")},pe=f.__private__.convertPDFDateToDate=function(U){var ye=parseInt(U.substr(2,4),10),Ve=parseInt(U.substr(6,2),10)-1,et=parseInt(U.substr(8,2),10),pt=parseInt(U.substr(10,2),10),$t=parseInt(U.substr(12,2),10),Xt=parseInt(U.substr(14,2),10);return new Date(ye,Ve,et,pt,$t,Xt,0)},Se=f.__private__.setCreationDate=function(U){var ye;if(U===void 0&&(U=new Date),U instanceof Date)ye=J(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=U}return de=ye},k=f.__private__.getCreationDate=function(U){var ye=de;return U==="jsDate"&&(ye=pe(de)),ye};f.setCreationDate=function(U){return Se(U),this},f.getCreationDate=function(U){return k(U)};var F,H=f.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},M=f.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},L=0,z=[],R=[],G=0,ee=[],te=[],Q=!1,xe=R;f.__private__.setCustomOutputDestination=function(U){Q=!0,xe=U};var Y=function(U){Q||(xe=U)};f.__private__.resetCustomOutputDestination=function(){Q=!1,xe=R};var W=f.__private__.out=function(U){return U=U.toString(),G+=U.length+1,xe.push(U),xe},le=f.__private__.write=function(U){return W(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},Pe=f.__private__.getArrayBuffer=function(U){for(var ye=U.length,Ve=new ArrayBuffer(ye),et=new Uint8Array(Ve);ye--;)et[ye]=U.charCodeAt(ye);return Ve},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Le};var qe=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(U){return qe=w===b?U/he:U,this};var nt,st=f.__private__.getFontSize=f.getFontSize=function(){return w===y?qe:qe*he},Et=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(U){return Et=U,this},f.__private__.getR2L=f.getR2L=function(){return Et};var yt,Ct=f.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))nt=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');nt=U}else nt=parseInt(U,10)};f.__private__.getZoomMode=function(){return nt};var Ot,Pt=f.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');yt=U};f.__private__.getPageMode=function(){return yt};var fe=f.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');Ot=U};f.__private__.getLayoutMode=function(){return Ot},f.__private__.setDisplayMode=f.setDisplayMode=function(U,ye,Ve){return Ct(U),fe(ye),Pt(Ve),this};var Ke={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(U){if(Object.keys(Ke).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ke[U]},f.__private__.getDocumentProperties=function(){return Ke},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(U){for(var ye in Ke)Ke.hasOwnProperty(ye)&&U[ye]&&(Ke[ye]=U[ye]);return this},f.__private__.setDocumentProperty=function(U,ye){if(Object.keys(Ke).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ke[U]=ye};var ve,he,oe,je,Qe,tt={},rt={},Te=[],Ee={},V={},Ae={},Ne={},Re=null,ze=0,Ye=[],Ze=new aQ(f),dt=t.hotfixes||[],ge={},Xe={},ot=[],be=function U(ye,Ve,et,pt,$t,Xt){if(!(this instanceof U))return new U(ye,Ve,et,pt,$t,Xt);isNaN(ye)&&(ye=1),isNaN(Ve)&&(Ve=0),isNaN(et)&&(et=0),isNaN(pt)&&(pt=1),isNaN($t)&&($t=0),isNaN(Xt)&&(Xt=0),this._matrix=[ye,Ve,et,pt,$t,Xt]};Object.defineProperty(be.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(be.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(be.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(be.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(be.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(be.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(be.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(be.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(be.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(be.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(be.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(be.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(be.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(be.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(be.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(be.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),be.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(U)},be.prototype.multiply=function(U){var ye=U.sx*this.sx+U.shy*this.shx,Ve=U.sx*this.shy+U.shy*this.sy,et=U.shx*this.sx+U.sy*this.shx,pt=U.shx*this.shy+U.sy*this.sy,$t=U.tx*this.sx+U.ty*this.shx+this.tx,Xt=U.tx*this.shy+U.ty*this.sy+this.ty;return new be(ye,Ve,et,pt,$t,Xt)},be.prototype.decompose=function(){var U=this.sx,ye=this.shy,Ve=this.shx,et=this.sy,pt=this.tx,$t=this.ty,Xt=Math.sqrt(U*U+ye*ye),Ir=(U/=Xt)*Ve+(ye/=Xt)*et;Ve-=U*Ir,et-=ye*Ir;var Dr=Math.sqrt(Ve*Ve+et*et);return Ir/=Dr,U*(et/=Dr)<ye*(Ve/=Dr)&&(U=-U,ye=-ye,Ir=-Ir,Xt=-Xt),{scale:new be(Xt,0,0,Dr,0,0),translate:new be(1,0,0,1,pt,$t),rotate:new be(U,ye,-ye,U,0,0),skew:new be(1,0,Ir,1,0,0)}},be.prototype.toString=function(U){return this.join(" ")},be.prototype.inversed=function(){var U=this.sx,ye=this.shy,Ve=this.shx,et=this.sy,pt=this.tx,$t=this.ty,Xt=1/(U*et-ye*Ve),Ir=et*Xt,Dr=-ye*Xt,Xr=-Ve*Xt,sn=U*Xt;return new be(Ir,Dr,Xr,sn,-Ir*pt-Xr*$t,-Dr*pt-sn*$t)},be.prototype.applyToPoint=function(U){var ye=U.x*this.sx+U.y*this.shx+this.tx,Ve=U.x*this.shy+U.y*this.sy+this.ty;return new eu(ye,Ve)},be.prototype.applyToRectangle=function(U){var ye=this.applyToPoint(U),Ve=this.applyToPoint(new eu(U.x+U.w,U.y+U.h));return new Zf(ye.x,ye.y,Ve.x-ye.x,Ve.y-ye.y)},be.prototype.clone=function(){var U=this.sx,ye=this.shy,Ve=this.shx,et=this.sy,pt=this.tx,$t=this.ty;return new be(U,ye,Ve,et,pt,$t)},f.Matrix=be;var Ge=f.matrixMult=function(U,ye){return ye.multiply(U)},ut=new be(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=ut;var bt=function(U,ye){if(!V[U]){var Ve=(ye instanceof $h?"Sh":"P")+(Object.keys(Ee).length+1).toString(10);ye.id=Ve,V[U]=Ve,Ee[Ve]=ye,Ze.publish("addPattern",ye)}};f.ShadingPattern=$h,f.TilingPattern=Om,f.addShadingPattern=function(U,ye){return S("addShadingPattern()"),bt(U,ye),this},f.beginTilingPattern=function(U){S("beginTilingPattern()"),Md(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},f.endTilingPattern=function(U,ye){S("endTilingPattern()"),ye.stream=te[F].join(`
`),bt(U,ye),Ze.publish("endTilingPattern",ye),ot.pop().restore()};var Rt,Wt=f.__private__.newObject=function(){var U=mt();return ne(U,!0),U},mt=f.__private__.newObjectDeferred=function(){return L++,z[L]=function(){return G},L},ne=function(U,ye){return ye=typeof ye=="boolean"&&ye,z[U]=G,ye&&W(U+" 0 obj"),U},ae=f.__private__.newAdditionalObject=function(){var U={objId:mt(),content:""};return ee.push(U),U},me=mt(),ue=mt(),Be=f.__private__.decodeColorString=function(U){var ye=U.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Ve=parseFloat(ye[0]);ye=[Ve,Ve,Ve,"r"]}for(var et="#",pt=0;pt<3;pt++)et+=("0"+Math.floor(255*parseFloat(ye[pt])).toString(16)).slice(-2);return et},Oe=f.__private__.encodeColorString=function(U){var ye;typeof U=="string"&&(U={ch1:U});var Ve=U.ch1,et=U.ch2,pt=U.ch3,$t=U.ch4,Xt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ve=="string"&&Ve.charAt(0)!=="#"){var Ir=new Bee(Ve);if(Ir.ok)Ve=Ir.toHex();else if(!/^\d*\.?\d*$/.test(Ve))throw new Error('Invalid color "'+Ve+'" passed to jsPDF.encodeColorString.')}if(typeof Ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ve)&&(Ve="#"+Ve[1]+Ve[1]+Ve[2]+Ve[2]+Ve[3]+Ve[3]),typeof Ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ve)){var Dr=parseInt(Ve.substr(1),16);Ve=Dr>>16&255,et=Dr>>8&255,pt=255&Dr}if(et===void 0||$t===void 0&&Ve===et&&et===pt)ye=typeof Ve=="string"?Ve+" "+Xt[0]:U.precision===2?B(Ve/255)+" "+Xt[0]:P(Ve/255)+" "+Xt[0];else if($t===void 0||xa($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return["1.","1.","1.",Xt[1]].join(" ");ye=typeof Ve=="string"?[Ve,et,pt,Xt[1]].join(" "):U.precision===2?[B(Ve/255),B(et/255),B(pt/255),Xt[1]].join(" "):[P(Ve/255),P(et/255),P(pt/255),Xt[1]].join(" ")}else ye=typeof Ve=="string"?[Ve,et,pt,$t,Xt[2]].join(" "):U.precision===2?[B(Ve),B(et),B(pt),B($t),Xt[2]].join(" "):[P(Ve),P(et),P(pt),P($t),Xt[2]].join(" ");return ye},We=f.__private__.getFilters=function(){return i},it=f.__private__.putStream=function(U){var ye=(U=U||{}).data||"",Ve=U.filters||We(),et=U.alreadyAppliedFilters||[],pt=U.addLength1||!1,$t=ye.length,Xt=U.objectId,Ir=function(Ps){return Ps};if(d!==null&&Xt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ir=ir.encryptor(Xt,0));var Dr={};Ve===!0&&(Ve=["FlateEncode"]);var Xr=U.additionalKeyValues||[],sn=(Dr=Br.API.processDataByFilters!==void 0?Br.API.processDataByFilters(ye,Ve):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(et)?et.join(" "):et.toString());if(Dr.data.length!==0&&(Xr.push({key:"Length",value:Dr.data.length}),pt===!0&&Xr.push({key:"Length1",value:$t})),sn.length!=0)if(sn.split("/").length-1==1)Xr.push({key:"Filter",value:sn});else{Xr.push({key:"Filter",value:"["+sn+"]"});for(var Bn=0;Bn<Xr.length;Bn+=1)if(Xr[Bn].key==="DecodeParms"){for(var ea=[],ms=0;ms<Dr.reverseChain.split("/").length-1;ms+=1)ea.push("null");ea.push(Xr[Bn].value),Xr[Bn].value="["+ea.join(" ")+"]"}}W("<<");for(var la=0;la<Xr.length;la++)W("/"+Xr[la].key+" "+Xr[la].value);W(">>"),Dr.data.length!==0&&(W("stream"),W(Ir(Dr.data)),W("endstream"))},gt=f.__private__.putPage=function(U){var ye=U.number,Ve=U.data,et=U.objId,pt=U.contentsObjId;ne(et,!0),W("<</Type /Page"),W("/Parent "+U.rootDictionaryObjId+" 0 R"),W("/Resources "+U.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(E(U.mediaBox.bottomLeftX))+" "+parseFloat(E(U.mediaBox.bottomLeftY))+" "+E(U.mediaBox.topRightX)+" "+E(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&W("/CropBox ["+E(U.cropBox.bottomLeftX)+" "+E(U.cropBox.bottomLeftY)+" "+E(U.cropBox.topRightX)+" "+E(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&W("/BleedBox ["+E(U.bleedBox.bottomLeftX)+" "+E(U.bleedBox.bottomLeftY)+" "+E(U.bleedBox.topRightX)+" "+E(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&W("/TrimBox ["+E(U.trimBox.bottomLeftX)+" "+E(U.trimBox.bottomLeftY)+" "+E(U.trimBox.topRightX)+" "+E(U.trimBox.topRightY)+"]"),U.artBox!==null&&W("/ArtBox ["+E(U.artBox.bottomLeftX)+" "+E(U.artBox.bottomLeftY)+" "+E(U.artBox.topRightX)+" "+E(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&W("/UserUnit "+U.userUnit),Ze.publish("putPage",{objId:et,pageContext:Ye[ye],pageNumber:ye,page:Ve}),W("/Contents "+pt+" 0 R"),W(">>"),W("endobj");var $t=Ve.join(`
`);return w===b&&($t+=`
Q`),ne(pt,!0),it({data:$t,filters:We(),objectId:pt}),W("endobj"),et},xt=f.__private__.putPages=function(){var U,ye,Ve=[];for(U=1;U<=ze;U++)Ye[U].objId=mt(),Ye[U].contentsObjId=mt();for(U=1;U<=ze;U++)Ve.push(gt({number:U,data:te[U],objId:Ye[U].objId,contentsObjId:Ye[U].contentsObjId,mediaBox:Ye[U].mediaBox,cropBox:Ye[U].cropBox,bleedBox:Ye[U].bleedBox,trimBox:Ye[U].trimBox,artBox:Ye[U].artBox,userUnit:Ye[U].userUnit,rootDictionaryObjId:me,resourceDictionaryObjId:ue}));ne(me,!0),W("<</Type /Pages");var et="/Kids [";for(ye=0;ye<ze;ye++)et+=Ve[ye]+" 0 R ";W(et+"]"),W("/Count "+ze),W(">>"),W("endobj"),Ze.publish("postPutPages")},_t=function(U){Ze.publish("putFont",{font:U,out:W,newObject:Wt,putStream:it}),U.isAlreadyPutted!==!0&&(U.objectNumber=Wt(),W("<<"),W("/Type /Font"),W("/BaseFont /"+Wg(U.postScriptName)),W("/Subtype /Type1"),typeof U.encoding=="string"&&W("/Encoding /"+U.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Ce=function(U){U.objectNumber=Wt();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[E(U.x),E(U.y),E(U.x+U.width),E(U.y+U.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ve=U.pages[1].join(`
`);it({data:Ve,additionalKeyValues:ye,objectId:U.objectNumber}),W("endobj")},at=function(U,ye){ye||(ye=21);var Ve=Wt(),et=function(Xt,Ir){var Dr,Xr=[],sn=1/(Ir-1);for(Dr=0;Dr<1;Dr+=sn)Xr.push(Dr);if(Xr.push(1),Xt[0].offset!=0){var Bn={offset:0,color:Xt[0].color};Xt.unshift(Bn)}if(Xt[Xt.length-1].offset!=1){var ea={offset:1,color:Xt[Xt.length-1].color};Xt.push(ea)}for(var ms="",la=0,Ps=0;Ps<Xr.length;Ps++){for(Dr=Xr[Ps];Dr>Xt[la+1].offset;)la++;var ps=Xt[la].offset,js=(Dr-ps)/(Xt[la+1].offset-ps),gs=Xt[la].color,Gl=Xt[la+1].color;ms+=M(Math.round((1-js)*gs[0]+js*Gl[0]).toString(16))+M(Math.round((1-js)*gs[1]+js*Gl[1]).toString(16))+M(Math.round((1-js)*gs[2]+js*Gl[2]).toString(16))}return ms.trim()}(U.colors,ye),pt=[];pt.push({key:"FunctionType",value:"0"}),pt.push({key:"Domain",value:"[0.0 1.0]"}),pt.push({key:"Size",value:"["+ye+"]"}),pt.push({key:"BitsPerSample",value:"8"}),pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),it({data:et,additionalKeyValues:pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ve}),W("endobj"),U.objectNumber=Wt(),W("<< /ShadingType "+U.type),W("/ColorSpace /DeviceRGB");var $t="/Coords ["+E(parseFloat(U.coords[0]))+" "+E(parseFloat(U.coords[1]))+" ";U.type===2?$t+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3])):$t+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3]))+" "+E(parseFloat(U.coords[4]))+" "+E(parseFloat(U.coords[5])),W($t+="]"),U.matrix&&W("/Matrix ["+U.matrix.toString()+"]"),W("/Function "+Ve+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},wt=function(U,ye){var Ve=mt(),et=Wt();ye.push({resourcesOid:Ve,objectOid:et}),U.objectNumber=et;var pt=[];pt.push({key:"Type",value:"/Pattern"}),pt.push({key:"PatternType",value:"1"}),pt.push({key:"PaintType",value:"1"}),pt.push({key:"TilingType",value:"1"}),pt.push({key:"BBox",value:"["+U.boundingBox.map(E).join(" ")+"]"}),pt.push({key:"XStep",value:E(U.xStep)}),pt.push({key:"YStep",value:E(U.yStep)}),pt.push({key:"Resources",value:Ve+" 0 R"}),U.matrix&&pt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),it({data:U.stream,additionalKeyValues:pt,objectId:U.objectNumber}),W("endobj")},ht=function(U){for(var ye in U.objectNumber=Wt(),W("<<"),U)switch(ye){case"opacity":W("/ca "+B(U[ye]));break;case"stroke-opacity":W("/CA "+B(U[ye]))}W(">>"),W("endobj")},Je=function(U){ne(U.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ye in W("/Font <<"),tt)tt.hasOwnProperty(ye)&&(A===!1||A===!0&&h.hasOwnProperty(ye))&&W("/"+ye+" "+tt[ye].objectNumber+" 0 R");W(">>")}(),function(){if(Object.keys(Ee).length>0){for(var ye in W("/Shading <<"),Ee)Ee.hasOwnProperty(ye)&&Ee[ye]instanceof $h&&Ee[ye].objectNumber>=0&&W("/"+ye+" "+Ee[ye].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),W(">>")}}(),function(ye){if(Object.keys(Ee).length>0){for(var Ve in W("/Pattern <<"),Ee)Ee.hasOwnProperty(Ve)&&Ee[Ve]instanceof f.TilingPattern&&Ee[Ve].objectNumber>=0&&Ee[Ve].objectNumber<ye&&W("/"+Ve+" "+Ee[Ve].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),W(">>")}}(U.objectOid),function(){if(Object.keys(Ae).length>0){var ye;for(ye in W("/ExtGState <<"),Ae)Ae.hasOwnProperty(ye)&&Ae[ye].objectNumber>=0&&W("/"+ye+" "+Ae[ye].objectNumber+" 0 R");Ze.publish("putGStateDict"),W(">>")}}(),function(){for(var ye in W("/XObject <<"),ge)ge.hasOwnProperty(ye)&&ge[ye].objectNumber>=0&&W("/"+ye+" "+ge[ye].objectNumber+" 0 R");Ze.publish("putXobjectDict"),W(">>")}(),W(">>"),W("endobj")},zt=function(U){rt[U.fontName]=rt[U.fontName]||{},rt[U.fontName][U.fontStyle]=U.id},Zt=function(U,ye,Ve,et,pt){var $t={id:"F"+(Object.keys(tt).length+1).toString(10),postScriptName:U,fontName:ye,fontStyle:Ve,encoding:et,isStandardFont:pt||!1,metadata:{}};return Ze.publish("addFont",{font:$t,instance:this}),tt[$t.id]=$t,zt($t),$t.id},Ft=f.__private__.pdfEscape=f.pdfEscape=function(U,ye){return function(Ve,et){var pt,$t,Xt,Ir,Dr,Xr,sn,Bn,ea;if(Xt=(et=et||{}).sourceEncoding||"Unicode",Dr=et.outputEncoding,(et.autoencode||Dr)&&tt[ve].metadata&&tt[ve].metadata[Xt]&&tt[ve].metadata[Xt].encoding&&(Ir=tt[ve].metadata[Xt].encoding,!Dr&&tt[ve].encoding&&(Dr=tt[ve].encoding),!Dr&&Ir.codePages&&(Dr=Ir.codePages[0]),typeof Dr=="string"&&(Dr=Ir[Dr]),Dr)){for(sn=!1,Xr=[],pt=0,$t=Ve.length;pt<$t;pt++)(Bn=Dr[Ve.charCodeAt(pt)])?Xr.push(String.fromCharCode(Bn)):Xr.push(Ve[pt]),Xr[pt].charCodeAt(0)>>8&&(sn=!0);Ve=Xr.join("")}for(pt=Ve.length;sn===void 0&&pt!==0;)Ve.charCodeAt(pt-1)>>8&&(sn=!0),pt--;if(!sn)return Ve;for(Xr=et.noBOM?[]:[254,255],pt=0,$t=Ve.length;pt<$t;pt++){if((ea=(Bn=Ve.charCodeAt(pt))>>8)>>8)throw new Error("Character at position "+pt+" of string '"+Ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xr.push(ea),Xr.push(Bn-(ea<<8))}return String.fromCharCode.apply(void 0,Xr)}(U,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vt=f.__private__.beginPage=function(U){te[++ze]=[],Ye[ze]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Nr(ze),Y(te[F])},nr=function(U,ye){var Ve,et,pt;switch(r=ye||r,typeof U=="string"&&(Ve=x(U.toLowerCase()),Array.isArray(Ve)&&(et=Ve[0],pt=Ve[1])),Array.isArray(U)&&(et=U[0]*he,pt=U[1]*he),isNaN(et)&&(et=a[0],pt=a[1]),(et>14400||pt>14400)&&(ja.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),et=Math.min(14400,et),pt=Math.min(14400,pt)),a=[et,pt],r.substr(0,1)){case"l":pt>et&&(a=[pt,et]);break;case"p":et>pt&&(a=[pt,et])}Vt(a),Wr(Xf),W(qu),_a!==0&&W(_a+" J"),em!==0&&W(em+" j"),Ze.publish("addPage",{pageNumber:ze})},Ht=function(U){U>0&&U<=ze&&(te.splice(U,1),Ye.splice(U,1),ze--,F>ze&&(F=ze),this.setPage(F))},Nr=function(U){U>0&&U<=ze&&(F=U)},Or=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return te.length-1},Fn=function(U,ye,Ve){var et,pt=void 0;return Ve=Ve||{},U=U!==void 0?U:tt[ve].fontName,ye=ye!==void 0?ye:tt[ve].fontStyle,et=U.toLowerCase(),rt[et]!==void 0&&rt[et][ye]!==void 0?pt=rt[et][ye]:rt[U]!==void 0&&rt[U][ye]!==void 0?pt=rt[U][ye]:Ve.disableWarning===!1&&ja.warn("Unable to look up font label for font '"+U+"', '"+ye+"'. Refer to getFontList() for available fonts."),pt||Ve.noFallback||(pt=rt.times[ye])==null&&(pt=rt.times.normal),pt},vn=f.__private__.putInfo=function(){var U=Wt(),ye=function(et){return et};for(var Ve in d!==null&&(ye=ir.encryptor(U,0)),W("<<"),W("/Producer ("+Ft(ye("jsPDF "+Br.version))+")"),Ke)Ke.hasOwnProperty(Ve)&&Ke[Ve]&&W("/"+Ve.substr(0,1).toUpperCase()+Ve.substr(1)+" ("+Ft(ye(Ke[Ve]))+")");W("/CreationDate ("+Ft(ye(de))+")"),W(">>"),W("endobj")},Na=f.__private__.putCatalog=function(U){var ye=(U=U||{}).rootDictionaryObjId||me;switch(Wt(),W("<<"),W("/Type /Catalog"),W("/Pages "+ye+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ve=""+nt;Ve.substr(Ve.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&W("/OpenAction [3 0 R /XYZ null null "+B(nt)+"]")}switch(Ot||(Ot="continuous"),Ot){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}yt&&W("/PageMode /"+yt),Ze.publish("putCatalog"),W(">>"),W("endobj")},Ku=f.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(L+1)),W("/Root "+L+" 0 R"),W("/Info "+(L-1)+" 0 R"),d!==null&&W("/Encrypt "+ir.oid+" 0 R"),W("/ID [ <"+re+"> <"+re+"> ]"),W(">>")},Rn=f.__private__.putHeader=function(){W("%PDF-"+m),W("%")},ct=f.__private__.putXRef=function(){var U="0000000000";W("xref"),W("0 "+(L+1)),W("0000000000 65535 f ");for(var ye=1;ye<=L;ye++)typeof z[ye]=="function"?W((U+z[ye]()).slice(-10)+" 00000 n "):z[ye]!==void 0?W((U+z[ye]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},xr=f.__private__.buildDocument=function(){var U;L=0,G=0,R=[],z=[],ee=[],me=mt(),ue=mt(),Y(R),Ze.publish("buildDocument"),Rn(),xt(),function(){Ze.publish("putAdditionalObjects");for(var Ve=0;Ve<ee.length;Ve++){var et=ee[Ve];ne(et.objId,!0),W(et.content),W("endobj")}Ze.publish("postPutAdditionalObjects")}(),U=[],function(){for(var Ve in tt)tt.hasOwnProperty(Ve)&&(A===!1||A===!0&&h.hasOwnProperty(Ve))&&_t(tt[Ve])}(),function(){var Ve;for(Ve in Ae)Ae.hasOwnProperty(Ve)&&ht(Ae[Ve])}(),function(){for(var Ve in ge)ge.hasOwnProperty(Ve)&&Ce(ge[Ve])}(),function(Ve){var et;for(et in Ee)Ee.hasOwnProperty(et)&&(Ee[et]instanceof $h?at(Ee[et]):Ee[et]instanceof Om&&wt(Ee[et],Ve))}(U),Ze.publish("putResources"),U.forEach(Je),Je({resourcesOid:ue,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources"),d!==null&&(ir.oid=Wt(),W("<<"),W("/Filter /Standard"),W("/V "+ir.v),W("/R "+ir.r),W("/U <"+ir.toHexString(ir.U)+">"),W("/O <"+ir.toHexString(ir.O)+">"),W("/P "+ir.P),W(">>"),W("endobj")),vn(),Na();var ye=G;return ct(),Ku(),W("startxref"),W(""+ye),W("%%EOF"),Y(te[F]),R.join(`
`)},vr=f.__private__.getBlob=function(U){return new Blob([Pe(U)],{type:"application/pdf"})},Ar=f.output=f.__private__.output=(Rt=function(U,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",U){case void 0:return xr();case"save":f.save(ye.filename);break;case"arraybuffer":return Pe(xr());case"blob":return vr(xr());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(vr(xr()))||void 0;ja.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ve="",et=xr();try{Ve=tQ(et)}catch{Ve=tQ(unescape(encodeURIComponent(et)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(pt=ye.pdfObjectUrl,$t="");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pt+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",Ir=tn.open();return Ir!==null&&Ir.document.write(Xt),Ir}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',Xr=tn.open();if(Xr!==null){Xr.document.write(Dr);var sn=this;Xr.document.documentElement.querySelector("#pdfViewer").onload=function(){Xr.document.title=ye.filename,Xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(sn.output("bloburl"))}}return Xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',ea=tn.open();if(ea!==null&&(ea.document.write(Bn),ea.document.title=ye.filename),ea||typeof safari>"u")return ea;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",ye);default:return null}},Rt.foo=function(){try{return Rt.apply(this,arguments)}catch(Ve){var U=Ve.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ye="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ve.message;if(!tn.console)throw new Error(ye);tn.console.error(ye,Ve),tn.alert&&alert(ye)}},Rt.foo.bar=Rt,Rt.foo),sr=function(U){return Array.isArray(dt)===!0&&dt.indexOf(U)>-1};switch(n){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=sr("px_scaling")==1?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);he=n}var ir=null;Se(),ce();var tr=f.__private__.getPageInfo=f.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ye[U].objId,pageNumber:U,pageContext:Ye[U]}},gr=f.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in Ye)if(Ye[ye].objId===U)break;return tr(ye)},Vr=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ye[F].objId,pageNumber:F,pageContext:Ye[F]}};f.addPage=function(){return nr.apply(this,arguments),this},f.setPage=function(){return Nr.apply(this,arguments),Y.call(this,te[F]),this},f.insertPage=function(U){return this.addPage(),this.movePage(F,U),this},f.movePage=function(U,ye){var Ve,et;if(U>ye){Ve=te[U],et=Ye[U];for(var pt=U;pt>ye;pt--)te[pt]=te[pt-1],Ye[pt]=Ye[pt-1];te[ye]=Ve,Ye[ye]=et,this.setPage(ye)}else if(U<ye){Ve=te[U],et=Ye[U];for(var $t=U;$t<ye;$t++)te[$t]=te[$t+1],Ye[$t]=Ye[$t+1];te[ye]=Ve,Ye[ye]=et,this.setPage(ye)}return this},f.deletePage=function(){return Ht.apply(this,arguments),this},f.__private__.text=f.text=function(U,ye,Ve,et,pt){var $t,Xt,Ir,Dr,Xr,sn,Bn,ea,ms,la=(et=et||{}).scope||this;if(typeof U=="number"&&typeof ye=="number"&&(typeof Ve=="string"||Array.isArray(Ve))){var Ps=Ve;Ve=ye,ye=U,U=Ps}if(arguments[3]instanceof be==0?(Ir=arguments[4],Dr=arguments[5],xa(Bn=arguments[3])==="object"&&Bn!==null||(typeof Ir=="string"&&(Dr=Ir,Ir=null),typeof Bn=="string"&&(Dr=Bn,Bn=null),typeof Bn=="number"&&(Ir=Bn,Bn=null),et={flags:Bn,angle:Ir,align:Dr})):(S("The transform parameter of text() with a Matrix value"),ms=pt),isNaN(ye)||isNaN(Ve)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return la;var ps,js="",gs=typeof et.lineHeightFactor=="number"?et.lineHeightFactor:Rd,Gl=la.internal.scaleFactor;function nu(sa){return sa=sa.split("	").join(Array(et.TabLen||9).join(" ")),Ft(sa,Bn)}function au(sa){for(var Ba,Hs=sa.concat(),gi=[],TA=Hs.length;TA--;)typeof(Ba=Hs.shift())=="string"?gi.push(Ba):Array.isArray(sa)&&(Ba.length===1||Ba[1]===void 0&&Ba[2]===void 0)?gi.push(Ba[0]):gi.push([Ba[0],Ba[1],Ba[2]]);return gi}function _(sa,Ba){var Hs;if(typeof sa=="string")Hs=Ba(sa)[0];else if(Array.isArray(sa)){for(var gi,TA,r1=sa.concat(),cg=[],Pw=r1.length;Pw--;)typeof(gi=r1.shift())=="string"?cg.push(Ba(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(TA=Ba(gi[0],gi[1],gi[2]),cg.push([TA[0],TA[1],TA[2]]));Hs=cg}return Hs}var q=!1,se=!0;if(typeof U=="string")q=!0;else if(Array.isArray(U)){var De=U.concat();Xt=[];for(var vt,kt=De.length;kt--;)(typeof(vt=De.shift())!="string"||Array.isArray(vt)&&typeof vt[0]!="string")&&(se=!1);q=se}if(q===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var ur=qe/la.internal.scaleFactor,On=ur*(gs-1);switch(et.baseline){case"bottom":Ve-=On;break;case"top":Ve+=ur-On;break;case"hanging":Ve+=ur-2*On;break;case"middle":Ve+=ur/2-On}if((sn=et.maxWidth||0)>0&&(typeof U=="string"?U=la.splitTextToSize(U,sn):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(sa,Ba){return sa.concat(la.splitTextToSize(Ba,sn))},[]))),$t={text:U,x:ye,y:Ve,options:et,mutex:{pdfEscape:Ft,activeFontKey:ve,fonts:tt,activeFontSize:qe}},Ze.publish("preProcessText",$t),U=$t.text,Ir=(et=$t.options).angle,ms instanceof be==0&&Ir&&typeof Ir=="number"){Ir*=Math.PI/180,et.rotationDirection===0&&(Ir=-Ir),w===b&&(Ir=-Ir);var xs=Math.cos(Ir),Nn=Math.sin(Ir);ms=new be(xs,Nn,-Nn,xs,0,0)}else Ir&&Ir instanceof be&&(ms=Ir);w!==b||ms||(ms=ut),(Xr=et.charSpace||Zc)!==void 0&&(js+=E(D(Xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ea=et.horizontalScale)!==void 0&&(js+=E(100*ea)+` Tz
`),et.lang;var zn=-1,Oa=et.renderingMode!==void 0?et.renderingMode:et.stroke,gc=la.internal.getCurrentPageInfo().pageContext;switch(Oa){case 0:case!1:case"fill":zn=0;break;case 1:case!0:case"stroke":zn=1;break;case 2:case"fillThenStroke":zn=2;break;case 3:case"invisible":zn=3;break;case 4:case"fillAndAddForClipping":zn=4;break;case 5:case"strokeAndAddPathForClipping":zn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zn=6;break;case 7:case"addToPathForClipping":zn=7}var $o=gc.usedRenderingMode!==void 0?gc.usedRenderingMode:-1;zn!==-1?js+=zn+` Tr
`:$o!==-1&&(js+=`0 Tr
`),zn!==-1&&(gc.usedRenderingMode=zn),Dr=et.align||"left";var go,zu=qe*gs,Wv=la.internal.pageSize.getWidth(),Xv=tt[ve];Xr=et.charSpace||Zc,sn=et.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},et.flags);var th=[],nm=function(sa){return la.getStringUnitWidth(sa,{font:Xv,charSpace:Xr,fontSize:qe,doKerning:!1})*qe/Gl};if(Object.prototype.toString.call(U)==="[object Array]"){var xc;Xt=au(U),Dr!=="left"&&(go=Xt.map(nm));var vc,rh=0;if(Dr==="right"){ye-=go[0],U=[],kt=Xt.length;for(var BA=0;BA<kt;BA++)BA===0?(vc=Ki(ye),xc=Gu(Ve)):(vc=D(rh-go[BA]),xc=-zu),U.push([Xt[BA],vc,xc]),rh=go[BA]}else if(Dr==="center"){ye-=go[0]/2,U=[],kt=Xt.length;for(var nh=0;nh<kt;nh++)nh===0?(vc=Ki(ye),xc=Gu(Ve)):(vc=D((rh-go[nh])/2),xc=-zu),U.push([Xt[nh],vc,xc]),rh=go[nh]}else if(Dr==="left"){U=[],kt=Xt.length;for(var Yv=0;Yv<kt;Yv++)U.push(Xt[Yv])}else if(Dr==="justify"&&Xv.encoding==="Identity-H"){U=[],kt=Xt.length,sn=sn!==0?sn:Wv;for(var lg=0,Vs=0;Vs<kt;Vs++)if(xc=Vs===0?Gu(Ve):-zu,vc=Vs===0?Ki(ye):lg,Vs<kt-1){var Tw=D((sn-go[Vs])/(Xt[Vs].split(" ").length-1)),Ud=Xt[Vs].split(" ");U.push([Ud[0]+" ",vc,xc]),lg=0;for(var Qd=1;Qd<Ud.length;Qd++){var Jv=(nm(Ud[Qd-1]+" "+Ud[Qd])-nm(Ud[Qd]))*Gl+Tw;Qd==Ud.length-1?U.push([Ud[Qd],Jv,0]):U.push([Ud[Qd]+" ",Jv,0]),lg-=Jv}}else U.push([Xt[Vs],vc,xc]);U.push(["",lg,0])}else{if(Dr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],kt=Xt.length,sn=sn!==0?sn:Wv,Vs=0;Vs<kt;Vs++){xc=Vs===0?Gu(Ve):-zu,vc=Vs===0?Ki(ye):0;var Zv=Xt[Vs].split(" ").length-1,e1=Zv>0?(sn-go[Vs])/Zv:0;Vs<kt-1?th.push(E(D(e1))):th.push(0),U.push([Xt[Vs],vc,xc])}}}(typeof et.R2L=="boolean"?et.R2L:Et)===!0&&(U=_(U,function(sa,Ba,Hs){return[sa.split("").reverse().join(""),Ba,Hs]})),$t={text:U,x:ye,y:Ve,options:et,mutex:{pdfEscape:Ft,activeFontKey:ve,fonts:tt,activeFontSize:qe}},Ze.publish("postProcessText",$t),U=$t.text,ps=$t.mutex.isHex||!1;var t1=tt[ve].encoding;t1!=="WinAnsiEncoding"&&t1!=="StandardEncoding"||(U=_(U,function(sa,Ba,Hs){return[nu(sa),Ba,Hs]})),Xt=au(U),U=[];for(var ah,sh,ih,am=Array.isArray(Xt[0])?1:0,oh="",sm=function(sa,Ba,Hs){var gi="";return Hs instanceof be?(Hs=typeof et.angle=="number"?Ge(Hs,new be(1,0,0,1,sa,Ba)):Ge(new be(1,0,0,1,sa,Ba),Hs),w===b&&(Hs=Ge(new be(1,0,0,-1,0,0),Hs)),gi=Hs.join(" ")+` Tm
`):gi=E(sa)+" "+E(Ba)+` Td
`,gi},su=0;su<Xt.length;su++){switch(oh="",am){case 1:ih=(ps?"<":"(")+Xt[su][0]+(ps?">":")"),ah=parseFloat(Xt[su][1]),sh=parseFloat(Xt[su][2]);break;case 0:ih=(ps?"<":"(")+Xt[su]+(ps?">":")"),ah=Ki(ye),sh=Gu(Ve)}th!==void 0&&th[su]!==void 0&&(oh=th[su]+` Tw
`),su===0?U.push(oh+sm(ah,sh,ms)+ih):am===0?U.push(oh+ih):am===1&&U.push(oh+sm(ah,sh,ms)+ih)}U=am===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Vd=`BT
/`;return Vd+=ve+" "+qe+` Tf
`,Vd+=E(qe*gs)+` TL
`,Vd+=pc+`
`,Vd+=js,Vd+=U,W(Vd+="ET"),h[ve]=!0,la};var gn=f.__private__.clip=f.clip=function(U){return W(U==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return gn("evenodd")},f.__private__.discardPath=f.discardPath=function(){return W("n"),this};var an=f.__private__.isValidStyle=function(U){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ye=!0),ye};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(U){return an(U)&&(u=U),this};var Ho=f.__private__.getStyle=f.getStyle=function(U){var ye=u;switch(U){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=U}return ye},si=f.close=function(){return W("h"),this};f.stroke=function(){return W("S"),this},f.fill=function(U){return pi("f",U),this},f.fillEvenOdd=function(U){return pi("f*",U),this},f.fillStroke=function(U){return pi("B",U),this},f.fillStrokeEvenOdd=function(U){return pi("B*",U),this};var pi=function(U,ye){xa(ye)==="object"?Wf(ye,U):W(U)},Kl=function(U){U===null||w===b&&U===void 0||(U=Ho(U),W(U))};function EA(U,ye,Ve,et,pt){var $t=new Om(ye||this.boundingBox,Ve||this.xStep,et||this.yStep,this.gState,pt||this.matrix);$t.stream=this.stream;var Xt=U+"$$"+this.cloneIndex+++"$$";return bt(Xt,$t),$t}var Wf=function(U,ye){var Ve=V[U.key],et=Ee[Ve];if(et instanceof $h)W("q"),W(J0(ye)),et.gState&&f.setGState(et.gState),W(U.matrix.toString()+" cm"),W("/"+Ve+" sh"),W("Q");else if(et instanceof Om){var pt=new be(1,0,0,-1,0,ru());U.matrix&&(pt=pt.multiply(U.matrix||ut),Ve=EA.call(et,U.key,U.boundingBox,U.xStep,U.yStep,pt).id),W("q"),W("/Pattern cs"),W("/"+Ve+" scn"),et.gState&&f.setGState(et.gState),W(ye),W("Q")}},J0=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Dd=f.moveTo=function(U,ye){return W(E(D(U))+" "+E(X(ye))+" m"),this},ag=f.lineTo=function(U,ye){return W(E(D(U))+" "+E(X(ye))+" l"),this},po=f.curveTo=function(U,ye,Ve,et,pt,$t){return W([E(D(U)),E(X(ye)),E(D(Ve)),E(X(et)),E(D(pt)),E(X($t)),"c"].join(" ")),this};f.__private__.line=f.line=function(U,ye,Ve,et,pt){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||isNaN(et)||!an(pt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[Ve-U,et-ye]],U,ye,[1,1],pt||"S"):this.lines([[Ve-U,et-ye]],U,ye,[1,1]).stroke()},f.__private__.lines=f.lines=function(U,ye,Ve,et,pt,$t){var Xt,Ir,Dr,Xr,sn,Bn,ea,ms,la,Ps,ps,js;if(typeof U=="number"&&(js=Ve,Ve=ye,ye=U,U=js),et=et||[1,1],$t=$t||!1,isNaN(ye)||isNaN(Ve)||!Array.isArray(U)||!Array.isArray(et)||!an(pt)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Dd(ye,Ve),Xt=et[0],Ir=et[1],Xr=U.length,Ps=ye,ps=Ve,Dr=0;Dr<Xr;Dr++)(sn=U[Dr]).length===2?(Ps=sn[0]*Xt+Ps,ps=sn[1]*Ir+ps,ag(Ps,ps)):(Bn=sn[0]*Xt+Ps,ea=sn[1]*Ir+ps,ms=sn[2]*Xt+Ps,la=sn[3]*Ir+ps,Ps=sn[4]*Xt+Ps,ps=sn[5]*Ir+ps,po(Bn,ea,ms,la,Ps,ps));return $t&&si(),Kl(pt),this},f.path=function(U){for(var ye=0;ye<U.length;ye++){var Ve=U[ye],et=Ve.c;switch(Ve.op){case"m":Dd(et[0],et[1]);break;case"l":ag(et[0],et[1]);break;case"c":po.apply(this,et);break;case"h":si()}}return this},f.__private__.rect=f.rect=function(U,ye,Ve,et,pt){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||isNaN(et)||!an(pt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(et=-et),W([E(D(U)),E(X(ye)),E(D(Ve)),E(D(et)),"re"].join(" ")),Kl(pt),this},f.__private__.triangle=f.triangle=function(U,ye,Ve,et,pt,$t,Xt){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||isNaN(et)||isNaN(pt)||isNaN($t)||!an(Xt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ve-U,et-ye],[pt-Ve,$t-et],[U-pt,ye-$t]],U,ye,[1,1],Xt,!0),this},f.__private__.roundedRect=f.roundedRect=function(U,ye,Ve,et,pt,$t,Xt){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||isNaN(et)||isNaN(pt)||isNaN($t)||!an(Xt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ir=4/3*(Math.SQRT2-1);return pt=Math.min(pt,.5*Ve),$t=Math.min($t,.5*et),this.lines([[Ve-2*pt,0],[pt*Ir,0,pt,$t-$t*Ir,pt,$t],[0,et-2*$t],[0,$t*Ir,-pt*Ir,$t,-pt,$t],[2*pt-Ve,0],[-pt*Ir,0,-pt,-$t*Ir,-pt,-$t],[0,2*$t-et],[0,-$t*Ir,pt*Ir,-$t,pt,-$t]],U+pt,ye,[1,1],Xt,!0),this},f.__private__.ellipse=f.ellipse=function(U,ye,Ve,et,pt){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||isNaN(et)||!an(pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*Ve,Xt=4/3*(Math.SQRT2-1)*et;return Dd(U+Ve,ye),po(U+Ve,ye-Xt,U+$t,ye-et,U,ye-et),po(U-$t,ye-et,U-Ve,ye-Xt,U-Ve,ye),po(U-Ve,ye+Xt,U-$t,ye+et,U,ye+et),po(U+$t,ye+et,U+Ve,ye+Xt,U+Ve,ye),Kl(pt),this},f.__private__.circle=f.circle=function(U,ye,Ve,et){if(isNaN(U)||isNaN(ye)||isNaN(Ve)||!an(et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ye,Ve,Ve,et)},f.setFont=function(U,ye,Ve){return Ve&&(ye=C(ye,Ve)),ve=Fn(U,ye,{disableWarning:!1}),this};var Jc=f.__private__.getFont=f.getFont=function(){return tt[Fn.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var U,ye,Ve={};for(U in rt)if(rt.hasOwnProperty(U))for(ye in Ve[U]=[],rt[U])rt[U].hasOwnProperty(ye)&&Ve[U].push(ye);return Ve},f.addFont=function(U,ye,Ve,et,pt){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?pt=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(Ve=C(Ve,et)),Zt.call(this,U,ye,Ve,pt=pt||"Identity-H")};var Rd,Xf=t.lineWidth||.200025,sg=f.__private__.getLineWidth=f.getLineWidth=function(){return Xf},Wr=f.__private__.setLineWidth=f.setLineWidth=function(U){return Xf=U,W(E(D(U))+" w"),this};f.__private__.setLineDash=Br.API.setLineDash=Br.API.setLineDashPattern=function(U,ye){if(U=U||[],ye=ye||0,isNaN(ye)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ve){return E(D(Ve))}).join(" "),ye=E(D(ye)),W("["+U+"] "+ye+" d"),this};var Kv=f.__private__.getLineHeight=f.getLineHeight=function(){return qe*Rd};f.__private__.getLineHeight=f.getLineHeight=function(){return qe*Rd};var Gv=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Rd=U),this},qv=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Rd};Gv(t.lineHeight);var Ki=f.__private__.getHorizontalCoordinate=function(U){return D(U)},Gu=f.__private__.getVerticalCoordinate=function(U){return w===b?U:Ye[F].mediaBox.topRightY-Ye[F].mediaBox.bottomLeftY-D(U)},zv=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(U){return E(Ki(U))},Yf=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(U){return E(Gu(U))},qu=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Be(qu)},f.__private__.setStrokeColor=f.setDrawColor=function(U,ye,Ve,et){return qu=Oe({ch1:U,ch2:ye,ch3:Ve,ch4:et,pdfColorType:"draw",precision:2}),W(qu),this};var Jf=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Be(Jf)},f.__private__.setFillColor=f.setFillColor=function(U,ye,Ve,et){return Jf=Oe({ch1:U,ch2:ye,ch3:Ve,ch4:et,pdfColorType:"fill",precision:2}),W(Jf),this};var pc=t.textColor||"0 g",SA=f.__private__.getTextColor=f.getTextColor=function(){return Be(pc)};f.__private__.setTextColor=f.setTextColor=function(U,ye,Ve,et){return pc=Oe({ch1:U,ch2:ye,ch3:Ve,ch4:et,pdfColorType:"text",precision:3}),this};var Zc=t.charSpace,Z0=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Zc||0)};f.__private__.setCharSpace=f.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zc=U,this};var _a=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(U){var ye=f.CapJoinStyles[U];if(ye===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _a=ye,W(ye+" J"),this};var em=0;f.__private__.setLineJoin=f.setLineJoin=function(U){var ye=f.CapJoinStyles[U];if(ye===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return em=ye,W(ye+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(E(D(U))+" M"),this},f.GState=$2,f.setGState=function(U){(U=typeof U=="string"?Ae[Ne[U]]:ig(null,U)).equals(Re)||(W("/"+U.id+" gs"),Re=U)};var ig=function(U,ye){if(!U||!Ne[U]){var Ve=!1;for(var et in Ae)if(Ae.hasOwnProperty(et)&&Ae[et].equals(ye)){Ve=!0;break}if(Ve)ye=Ae[et];else{var pt="GS"+(Object.keys(Ae).length+1).toString(10);Ae[pt]=ye,ye.id=pt}return U&&(Ne[U]=ye.id),Ze.publish("addGState",ye),ye}};f.addGState=function(U,ye){return ig(U,ye),this},f.saveGraphicsState=function(){return W("q"),Te.push({key:ve,size:qe,color:pc}),this},f.restoreGraphicsState=function(){W("Q");var U=Te.pop();return ve=U.key,qe=U.size,pc=U.color,Re=null,this},f.setCurrentTransformationMatrix=function(U){return W(U.toString()+" cm"),this},f.comment=function(U){return W("#"+U),this};var eu=function(U,ye){var Ve=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function($t){isNaN($t)||(Ve=parseFloat($t))}});var et=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return et},set:function($t){isNaN($t)||(et=parseFloat($t))}});var pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pt},set:function($t){pt=$t.toString()}}),this},Zf=function(U,ye,Ve,et){eu.call(this,U,ye),this.type="rect";var pt=Ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pt},set:function(Xt){isNaN(Xt)||(pt=parseFloat(Xt))}});var $t=et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(Xt){isNaN(Xt)||($t=parseFloat(Xt))}}),this},IA=function(){this.page=ze,this.currentPage=F,this.pages=te.slice(0),this.pagesContext=Ye.slice(0),this.x=oe,this.y=je,this.matrix=Qe,this.width=xl(F),this.height=og(F),this.outputDestination=xe,this.id="",this.objectNumber=-1};IA.prototype.restore=function(){ze=this.page,F=this.currentPage,Ye=this.pagesContext,te=this.pages,oe=this.x,je=this.y,Qe=this.matrix,tm(F,this.width),vl(F,this.height),xe=this.outputDestination};var Md=function(U,ye,Ve,et,pt){ot.push(new IA),ze=F=0,te=[],oe=U,je=ye,Qe=pt,Vt([Ve,et])};for(var Ld in f.beginFormObject=function(U,ye,Ve,et,pt){return Md(U,ye,Ve,et,pt),this},f.endFormObject=function(U){return function(ye){if(Xe[ye])ot.pop().restore();else{var Ve=new IA,et="Xo"+(Object.keys(ge).length+1).toString(10);Ve.id=et,Xe[ye]=et,ge[et]=Ve,Ze.publish("addFormObject",Ve),ot.pop().restore()}}(U),this},f.doFormObject=function(U,ye){var Ve=ge[Xe[U]];return W("q"),W(ye.toString()+" cm"),W("/"+Ve.id+" Do"),W("Q"),this},f.getFormObject=function(U){var ye=ge[Xe[U]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},f.save=function(U,ye){return U=U||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(vm(vr(xr()),U),typeof vm.unload=="function"&&tn.setTimeout&&setTimeout(vm.unload,911),this):new Promise(function(Ve,et){try{var pt=vm(vr(xr()),U);typeof vm.unload=="function"&&tn.setTimeout&&setTimeout(vm.unload,911),Ve(pt)}catch($t){et($t.message)}})},Br.API)Br.API.hasOwnProperty(Ld)&&(Ld==="events"&&Br.API.events.length?function(U,ye){var Ve,et,pt;for(pt=ye.length-1;pt!==-1;pt--)Ve=ye[pt][0],et=ye[pt][1],U.subscribe.apply(U,[Ve].concat(typeof et=="function"?[et]:et))}(Ze,Br.API.events):f[Ld]=Br.API[Ld]);function xl(U){return Ye[U].mediaBox.topRightX-Ye[U].mediaBox.bottomLeftX}function tm(U,ye){Ye[U].mediaBox.topRightX=ye+Ye[U].mediaBox.bottomLeftX}function og(U){return Ye[U].mediaBox.topRightY-Ye[U].mediaBox.bottomLeftY}function vl(U,ye){Ye[U].mediaBox.topRightY=ye+Ye[U].mediaBox.bottomLeftY}var tu=f.getPageWidth=function(U){return xl(U=U||F)/he},eh=f.setPageWidth=function(U,ye){tm(U,ye*he)},ru=f.getPageHeight=function(U){return og(U=U||F)/he},rm=f.setPageHeight=function(U,ye){vl(U,ye*he)};return f.internal={pdfEscape:Ft,getStyle:Ho,getFont:Jc,getFontSize:st,getCharSpace:Z0,getTextColor:SA,getLineHeight:Kv,getLineHeightFactor:qv,getLineWidth:sg,write:le,getHorizontalCoordinate:Ki,getVerticalCoordinate:Gu,getCoordinateString:zv,getVerticalCoordinateString:Yf,collections:{},newObject:Wt,newAdditionalObject:ae,newObjectDeferred:mt,newObjectDeferredBegin:ne,getFilters:We,putStream:it,events:Ze,scaleFactor:he,pageSize:{getWidth:function(){return tu(F)},setWidth:function(U){eh(F,U)},getHeight:function(){return ru(F)},setHeight:function(U){rm(F,U)}},encryptionOptions:d,encryption:ir,getEncryptor:function(U){return d!==null?ir.encryptor(U,0):function(ye){return ye}},output:Ar,getNumberOfPages:Or,get pages(){return te},out:W,f2:B,f3:P,getPageInfo:tr,getPageInfoByObjId:gr,getCurrentPageInfo:Vr,getPDFVersion:p,Point:eu,Rectangle:Zf,Matrix:be,hasHotfix:sr},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return tu(F)},set:function(U){eh(F,U)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ru(F)},set:function(U){rm(F,U)},enumerable:!0,configurable:!0}),(function(U){for(var ye=0,Ve=Le.length;ye<Ve;ye++){var et=Zt.call(this,U[ye][0],U[ye][1],U[ye][2],Le[ye][3],!0);A===!1&&(h[et]=!0);var pt=U[ye][0].split("-");zt({id:et,fontName:pt[0],fontStyle:pt[1]||""})}Ze.publish("addFonts",{fonts:tt,dictionary:rt})}).call(f,Le),ve="F1",nr(a,r),Ze.publish("initialized"),f}zg.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},zg.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zg.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},zg.prototype.processOwnerPassword=function(t,e){return Fj(kj(e).substr(0,5),t)},zg.prototype.encryptor=function(t,e){var r=kj(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Fj(r,n)}},$2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||xa(t)!==xa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Br.API={events:[]},Br.version="3.0.4";var Os=Br.API,_6=1,Gp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_g=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},un=function(t){return t.toFixed(2)},yh=function(t){return t.toFixed(5)};Os.__acroform__={};var Ac=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sQ=function(t){return t*_6},Xd=function(t){var e=new kee,r=kr.internal.getHeight(t)||0,n=kr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(un(n)),Number(un(r))],e},CEe=Os.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},EEe=Os.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},SEe=Os.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Zs=Os.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SEe(t,e-1)},ei=Os.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return CEe(t,e-1)},ti=Os.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EEe(t,e-1)},IEe=Os.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(un(c.lowerLeft_X)),Number(un(c.lowerLeft_Y)),Number(un(c.upperRight_X)),Number(un(c.upperRight_Y))]},BEe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Oj(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+un(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Xd(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Oj=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(B){return B.split(`
`)}):a.map(function(B){return[B]});var s=r,i=kr.internal.getHeight(t)||0;i=i<0?-i:i;var l=kr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(B,P,D){if(B+1<a.length){var X=P+" "+a[B+1][0];return zN(X,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,A=zN("3",t,s).height,h=t.multiline?i-s:(i-A)/2,f=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+zN(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((A+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var I=parseInt(b),T=c(I,x,s),C=b>=a.length-1;if(T&&!C){x+=" ",g=0;continue}if(T||C){if(C)p=I;else if(t.multiline&&(A+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(A+2)*(y+2)+2>i)continue e;p=I}}for(var E="",S=m;S<=p;S++){var O=a[S];if(t.multiline){if(S===p){E+=O[g]+" ",g=(g+1)%O.length;continue}if(S===m){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=zN(E,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=un(u)+" "+un(f)+` Td
`,e+="("+Gp(E)+`) Tj
`,e+=-un(u)+` 0 Td
`,f=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},zN=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},TEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},PEe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},jEe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(kd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(TEe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Fee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&PEe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=IEe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=kr.createDefaultAppearanceStream(l),xa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=BEe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var A="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var f=l.appearanceStreamContent[h];if(A+="/"+h+" ",A+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var i in f)if(f.hasOwnProperty(i)){var m=f[i];typeof m=="function"&&(m=m.call(a,l)),A+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(a,l)),A+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);A+=">>"}c.push({key:"AP",value:`<<
`+A+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),xa(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},jee=Os.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),xa(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Gp(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mB=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Gp(n(t))+")"},aA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};aA.prototype.toString=function(){return this.objId+" 0 R"},aA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},aA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:jee(a,this.objId,this.scope)}):a instanceof aA?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var kee=function(){aA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Ac(kee,aA);var Fee=function(){aA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Gp(r(t))+")"}},set:function(r){t=r}})};Ac(Fee,aA);var kd=function t(){aA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zs(e,3)},set:function(x){x?this.F=ei(e,3):this.F=ti(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof LE)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Gp(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/_6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof LE||this instanceof p0))return mB(A,this.objId,this.scope)},set:function(x){x=x.toString(),A=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Si==0?mB(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Si==0?x.substr(0,1)==="("?_g(x.substr(1,x.length-2)):_g(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Si==1?_g(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Si==1?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Si==0?mB(f,this.objId,this.scope):f},set:function(x){x=x.toString(),f=this instanceof Si==0?x.substr(0,1)==="("?_g(x.substr(1,x.length-2)):_g(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Si==1?_g(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Si==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,1)},set:function(x){x?this.Ff=ei(this.Ff,1):this.Ff=ti(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,2)},set:function(x){x?this.Ff=ei(this.Ff,2):this.Ff=ti(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,3)},set:function(x){x?this.Ff=ei(this.Ff,3):this.Ff=ti(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Ac(kd,aA);var Gm=function(){kd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,18)},set:function(r){r?this.Ff=ei(this.Ff,18):this.Ff=ti(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ei(this.Ff,19):this.Ff=ti(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,20)},set:function(r){r?(this.Ff=ei(this.Ff,20),e.sort()):this.Ff=ti(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,22)},set:function(r){r?this.Ff=ei(this.Ff,22):this.Ff=ti(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,23)},set:function(r){r?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,27)},set:function(r){r?this.Ff=ei(this.Ff,27):this.Ff=ti(this.Ff,27)}}),this.hasAppearanceStream=!1};Ac(Gm,kd);var qm=function(){Gm.call(this),this.fontName="helvetica",this.combo=!1};Ac(qm,Gm);var zm=function(){qm.call(this),this.combo=!0};Ac(zm,qm);var $y=function(){zm.call(this),this.edit=!0};Ac($y,zm);var Si=function(){kd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,15)},set:function(r){r?this.Ff=ei(this.Ff,15):this.Ff=ti(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,16)},set:function(r){r?this.Ff=ei(this.Ff,16):this.Ff=ti(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,17)},set:function(r){r?this.Ff=ei(this.Ff,17):this.Ff=ti(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,26)},set:function(r){r?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Gp(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){xa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Ac(Si,kd);var Ky=function(){Si.call(this),this.pushButton=!0};Ac(Ky,Si);var Wm=function(){Si.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ac(Wm,Si);var LE=function(){var t,e;kd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Gp(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){xa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ac(LE,kd),Wm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Wm.prototype.createOption=function(t){var e=new LE;return e.Parent=this,e.optionName=t,this.Kids.push(e),kEe.call(this.scope,e),e};var Gy=function(){Si.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kr.CheckBox.createAppearanceStream()};Ac(Gy,Si);var p0=function(){kd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,13)},set:function(e){e?this.Ff=ei(this.Ff,13):this.Ff=ti(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,21)},set:function(e){e?this.Ff=ei(this.Ff,21):this.Ff=ti(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,23)},set:function(e){e?this.Ff=ei(this.Ff,23):this.Ff=ti(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,24)},set:function(e){e?this.Ff=ei(this.Ff,24):this.Ff=ti(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,25)},set:function(e){e?this.Ff=ei(this.Ff,25):this.Ff=ti(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,26)},set:function(e){e?this.Ff=ei(this.Ff,26):this.Ff=ti(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ac(p0,kd);var qy=function(){p0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zs(this.Ff,14)},set:function(t){t?this.Ff=ei(this.Ff,14):this.Ff=ti(this.Ff,14)}}),this.password=!0};Ac(qy,p0);var kr={CheckBox:{createAppearanceStream:function(){return{N:{On:kr.CheckBox.YesNormal},D:{On:kr.CheckBox.YesPushDown,Off:kr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Oj(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+un(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=kr.internal.getHeight(t),i=kr.internal.getWidth(t),l=Oj(t,t.caption);return a.push("1 g"),a.push("0 0 "+un(i)+" "+un(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+un(i-1)+" "+un(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+un(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:kr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=kr.RadioButton.Circle.YesNormal,e.D[t]=kr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=kr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+yh(kr.internal.getWidth(t)/2)+" "+yh(kr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*kr.internal.Bezier_C).toFixed(5)),i=Number((n*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yh(kr.internal.getWidth(t)/2)+" "+yh(kr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+yh(kr.internal.getWidth(t)/2)+" "+yh(kr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=[],n=kr.internal.getWidth(t)<=kr.internal.getHeight(t)?kr.internal.getWidth(t)/4:kr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*kr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yh(kr.internal.getWidth(t)/2)+" "+yh(kr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:kr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=kr.RadioButton.Cross.YesNormal,e.D[t]=kr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Xd(t);e.scope=t.scope;var r=[],n=kr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+un(kr.internal.getWidth(t)-2)+" "+un(kr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(un(n.x1.x)+" "+un(n.x1.y)+" m"),r.push(un(n.x2.x)+" "+un(n.x2.y)+" l"),r.push(un(n.x4.x)+" "+un(n.x4.y)+" m"),r.push(un(n.x3.x)+" "+un(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=kr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+un(kr.internal.getWidth(t)-2)+" "+un(kr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(un(r.x1.x)+" "+un(r.x1.y)+" m"),n.push(un(r.x2.x)+" "+un(r.x2.y)+" l"),n.push(un(r.x4.x)+" "+un(r.x4.y)+" m"),n.push(un(r.x3.x)+" "+un(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Xd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+un(kr.internal.getWidth(t))+" "+un(kr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};kr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=kr.internal.getWidth(t),r=kr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},kr.internal.getWidth=function(t){var e=0;return xa(t)==="object"&&(e=sQ(t.Rect[2])),e},kr.internal.getHeight=function(t){var e=0;return xa(t)==="object"&&(e=sQ(t.Rect[3])),e};var kEe=Os.addField=function(t){if(jEe(this,t),!(t instanceof kd))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Os.AcroFormChoiceField=Gm,Os.AcroFormListBox=qm,Os.AcroFormComboBox=zm,Os.AcroFormEditBox=$y,Os.AcroFormButton=Si,Os.AcroFormPushButton=Ky,Os.AcroFormRadioButton=Wm,Os.AcroFormCheckBox=Gy,Os.AcroFormTextField=p0,Os.AcroFormPasswordField=qy,Os.AcroFormAppearance=kr,Os.AcroForm={ChoiceField:Gm,ListBox:qm,ComboBox:zm,EditBox:$y,Button:Si,PushButton:Ky,RadioButton:Wm,CheckBox:Gy,TextField:p0,PasswordField:qy,Appearance:kr},Br.AcroForm={ChoiceField:Gm,ListBox:qm,ComboBox:zm,EditBox:$y,Button:Si,PushButton:Ky,RadioButton:Wm,CheckBox:Gy,TextField:p0,PasswordField:qy,Appearance:kr};var FEe=Br.AcroForm;function Oee(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(B,P){var D,X,de,re,ie,ce=r;if((P=P||r)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(T(B))for(ie in n)for(de=n[ie],D=0;D<de.length;D+=1){for(re=!0,X=0;X<de[D].length;X+=1)if(de[D][X]!==void 0&&de[D][X]!==B[X]){re=!1;break}if(re===!0){ce=ie;break}}else for(ie in n)for(de=n[ie],D=0;D<de.length;D+=1){for(re=!0,X=0;X<de[D].length;X+=1)if(de[D][X]!==void 0&&de[D][X]!==B.charCodeAt(X)){re=!1;break}if(re===!0){ce=ie;break}}return ce===r&&P!==r&&(ce=P),ce},s=function B(P){for(var D=this.internal.write,X=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:P.width}),re.push({key:"Height",value:P.height}),P.colorSpace===x.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===x.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var ie="",ce=0,J=P.transparency.length;ce<J;ce++)ie+=P.transparency[ce]+" "+P.transparency[ce]+" ";re.push({key:"Mask",value:"["+ie+"]"})}P.sMask!==void 0&&re.push({key:"SMask",value:P.objectId+1+" 0 R"});var pe=P.filter!==void 0?["/"+P.filter]:void 0;if(X({data:P.data,additionalKeyValues:re,alreadyAppliedFilters:pe,objectId:P.objectId}),D("endobj"),"sMask"in P&&P.sMask!==void 0){var Se,k=(Se=P.sMaskBitsPerComponent)!==null&&Se!==void 0?Se:P.bitsPerComponent,F={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:P.sMask};"filter"in P&&(F.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(P.width),F.filter=P.filter),B.call(this,F)}if(P.colorSpace===x.INDEXED){var H=this.internal.newObject();X({data:E(new Uint8Array(P.palette)),objectId:H}),D("endobj")}},i=function(){var B=this.internal.collections[e+"images"];for(var P in B)s.call(this,B[P])},l=function(){var B,P=this.internal.collections[e+"images"],D=this.internal.write;for(var X in P)D("/I"+(B=P[X]).index,B.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var B=this.internal.collections[e+"images"];return c.call(this),B},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},A=function(B){return typeof t["process"+B.toUpperCase()]=="function"},h=function(B){return xa(B)==="object"&&B.nodeType===1},f=function(B,P){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var D=""+B.getAttribute("src");if(D.indexOf("data:image/")===0)return CC(unescape(D).split("base64,").pop());var X=t.loadFile(D,!0);if(X!==void 0)return X}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var de;switch(P){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return CC(B.toDataURL(de,1).split("base64,").pop())}},m=function(B){var P=this.internal.collections[e+"images"];if(P){for(var D in P)if(B===P[D].alias)return P[D]}},p=function(B,P,D){return B||P||(B=-96,P=-96),B<0&&(B=-1*D.width*72/B/this.internal.scaleFactor),P<0&&(P=-1*D.height*72/P/this.internal.scaleFactor),B===0&&(B=P*D.width/D.height),P===0&&(P=B*D.height/D.width),[B,P]},g=function(B,P,D,X,de,re){var ie=p.call(this,D,X,de),ce=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,pe=u.call(this);if(D=ie[0],X=ie[1],pe[de.index]=de,re){re*=Math.PI/180;var Se=Math.cos(re),k=Math.sin(re),F=function(M){return M.toFixed(4)},H=[F(Se),F(k),F(-1*k),F(Se),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,ce(B),J(P+X),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([ce(D),"0","0",ce(X),"0","0","cm"].join(" "))):this.internal.write([ce(D),"0","0",ce(X),ce(B),J(P+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(B){var P,D,X=0;if(typeof B=="string")for(D=B.length,P=0;P<D;P++)X=(X<<5)-X+B.charCodeAt(P),X|=0;else if(T(B))for(D=B.byteLength/2,P=0;P<D;P++)X=(X<<5)-X+B[P],X|=0;return X},w=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var P=!0;return B.length===0&&(P=!1),B.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(P=!1),P},I=t.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var P=B.indexOf(",");return P<0?null:B.substring(0,P).trim().endsWith("base64")?B.substring(P+1):null};t.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},C=t.__addimage__.binaryStringToUint8Array=function(B){for(var P=B.length,D=new Uint8Array(P),X=0;X<P;X++)D[X]=B.charCodeAt(X);return D},E=t.__addimage__.arrayBufferToBinaryString=function(B){for(var P="",D=T(B)?B:new Uint8Array(B),X=0;X<D.length;X+=8192)P+=String.fromCharCode.apply(null,D.subarray(X,X+8192));return P};t.addImage=function(){var B,P,D,X,de,re,ie,ce,J;if(typeof arguments[1]=="number"?(P=r,D=arguments[1],X=arguments[2],de=arguments[3],re=arguments[4],ie=arguments[5],ce=arguments[6],J=arguments[7]):(P=arguments[1],D=arguments[2],X=arguments[3],de=arguments[4],re=arguments[5],ie=arguments[6],ce=arguments[7],J=arguments[8]),xa(B=arguments[0])==="object"&&!h(B)&&"imageData"in B){var pe=B;B=pe.imageData,P=pe.format||P||r,D=pe.x||D||0,X=pe.y||X||0,de=pe.w||pe.width||de,re=pe.h||pe.height||re,ie=pe.alias||ie,ce=pe.compression||ce,J=pe.rotation||pe.angle||J}var Se=this.internal.getFilters();if(ce===void 0&&Se.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(D)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=S.call(this,B,P,ie,ce);return g.call(this,D,X,de,re,k,J),this};var S=function(B,P,D,X){var de,re,ie;if(typeof B=="string"&&a(B)===r){B=unescape(B);var ce=O(B,!1);(ce!==""||(ce=t.loadFile(B,!0))!==void 0)&&(B=ce)}if(h(B)&&(B=f(B,P)),P=a(B,P),!A(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((ie=D)==null||ie.length===0)&&(D=function(J){return typeof J=="string"||T(J)?b(J):T(J.data)?b(J.data):null}(B)),(de=m.call(this,D))||(B instanceof Uint8Array||P==="RGBA"||(re=B,B=C(B)),de=this["process"+P.toUpperCase()](B,d.call(this),D,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:y.NONE}(X),re)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},O=t.__addimage__.convertBase64ToBinaryString=function(B,P){P=typeof P!="boolean"||P;var D,X="";if(typeof B=="string"){var de;D=(de=I(B))!==null&&de!==void 0?de:B;try{X=CC(D)}catch(re){if(P)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(B){var P,D,X="";if(h(B)&&(B=f(B)),typeof B=="string"&&a(B)===r&&((X=O(B,!1))===""&&(X=t.loadFile(B)||""),B=X),D=a(B),!A(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(B instanceof Uint8Array||(B=C(B)),!(P=this["process"+D.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=D,P}})(Br.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Br.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,A=0;A<u.length&&!d;A++)switch((n=u[A]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+f(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var I=this.annotations._nameMap[n.options.name];n.options.pageNumber=I.page,n.options.top=I.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var T=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+T+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Br.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},A=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&l(g)||l(p)&&!i(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&i(g)&&!l(g)&&i(x)&&u(x)?3:l(p)||!i(x)?1:2:-1},f=function(p){var g=0,x=0,y=0,b="",w="",I="",T=(p=p||"").split("\\s+"),C=[];for(g=0;g<T.length;g+=1){for(C.push(""),x=0;x<T[g].length;x+=1)b=T[g][x],w=T[g][x-1],I=T[g][x+1],i(b)?(y=h(b,w,I),C[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):C[g]+=b;C[g]=A(C[g])}return C.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([f(g[y][0]),g[y][1],g[y][2]]):x.push([f(g[y])]);p=x}else p=f(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Br.API),Br.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Br.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),A=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,f=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)f<(p=this.getStringUnitWidth(c[y],{font:A})*d)&&(f=p);return f!==0&&(m=c.length),{w:f/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,A=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=A.top,f&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,A,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var f,m,p,g,x=[],y=[],b=[],w={},I={},T=[],C=[],E=(h=h||{}).autoSize||!1,S=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,B=h.margins||Object.assign({width:this.getPageWidth()},e),P=typeof h.padding=="number"?h.padding:3,D=h.headerBackgroundColor||"#c8c8c8",X=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=X,this.setFontSize(O),A==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(A)&&xa(A[0])==="object")for(x=A.map(function(pe){return pe.name}),y=A.map(function(pe){return pe.prompt||pe.name||""}),b=A.map(function(pe){return pe.align||"left"}),f=0;f<A.length;f+=1)I[A[f].name]=.7499990551181103*A[f].width;else Array.isArray(A)&&typeof A[0]=="string"&&(y=x=A,b=x.map(function(){return"left"}));if(E||Array.isArray(A)&&typeof A[0]=="string")for(f=0;f<x.length;f+=1){for(w[g=x[f]]=d.map(function(pe){return pe[g]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(y[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)T.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[g]=Math.max.apply(null,T)+P+P,T=[]}if(S){var de={};for(f=0;f<x.length;f+=1)de[x[f]]={},de[x[f]].text=y[f],de[x[f]].align=b[f];var re=l.call(this,de,I);C=x.map(function(pe){return new s(c,u,I[pe],re,de[pe].text,void 0,de[pe].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ie=A.reduce(function(pe,Se){return pe[Se.name]=Se.align,pe},{});for(f=0;f<d.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:d[f]},this);var ce=l.call(this,d[f],I);for(p=0;p<x.length;p+=1){var J=d[f][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:p,data:J},this),i.call(this,new s(c,u,I[x[p]],ce,J,f+2,ie[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(f){var m=c[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[f]-d-d)},this).map(function(f){return this.getLineHeightFactor()*f.length*A/h+d+d},this).reduce(function(f,m){return Math.max(f,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){d=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Br.API);var Dee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ree=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Dj=Oee(Ree),Mee=[100,200,300,400,500,600,700,800,900],OEe=Oee(Mee);function pB(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Dee[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Dj[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function iQ(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var DEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},oQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function cQ(t){return t.trimLeft()}function REe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function MEe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var WN,uQ,dQ,Cg,XN,AQ,fQ,hQ,gB=["times"];function mQ(t,e,r,n,a){var s=4,i=gQ;switch(a){case Br.API.image_compression.FAST:s=1,i=pQ;break;case Br.API.image_compression.MEDIUM:s=6,i=xQ;break;case Br.API.image_compression.SLOW:s=9,i=vQ}t=function(c,u,d,A){for(var h,f=c.length/u,m=new Uint8Array(c.length+f),p=[LEe,pQ,gQ,xQ,vQ],g=0;g<f;g+=1){var x=g*u,y=c.subarray(x,x+u);if(A)m.set(A(y,d,h),x+g);else{for(var b=p.length,w=[],I=0;I<b;I+=1)w[I]=p[I](y,d,h);var T=QEe(w.concat());m.set(w[T],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var l=Bj(t,{level:s});return Br.API.__addimage__.arrayBufferToBinaryString(l)}function LEe(t){var e=Array.apply([],t);return e.unshift(0),e}function pQ(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function gQ(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function xQ(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(i+l>>>1)&255}return a}function vQ(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=UEe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function UEe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function QEe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function xB(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return Lee(t,a)>>s&i}function yQ(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<i;(function(u,d,A){if(d+1<u.byteLength)u.setUint16(d,A,!1);else{var h=A>>8&255;u.setUint8(d,h)}})(t,s,Lee(t,s)&~(l<<i)&65535|c)}function Lee(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function VEe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=i,e+=3*i);var u=!0,d=[],A=0,h=null,f=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];A=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),f=p>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],I=w>>6&1,T=1<<1+(7&w),C=l,E=c,S=!1;w>>7&&(S=!0,C=e,E=T,e+=3*T);var O=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}d.push({x:g,y:x,width:y,height:b,has_local_palette:S,palette_offset:C,palette_size:E,data_offset:O,data_length:e-O,transparent_index:h,interlaced:!!I,delay:A,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(P){if(P<0||P>=d.length)throw new Error("Frame index out of range.");return d[P]},this.decodeAndBlitFrameBGRA=function(P,D){var X=this.frameInfo(P),de=X.width*X.height,re=new Uint8Array(de);bQ(t,X.data_offset,re,de);var ie=X.palette_offset,ce=X.transparent_index;ce===null&&(ce=256);var J=X.width,pe=r-J,Se=J,k=4*(X.y*r+X.x),F=4*((X.y+X.height)*r+X.x),H=k,M=4*pe;X.interlaced===!0&&(M+=4*r*7);for(var L=8,z=0,R=re.length;z<R;++z){var G=re[z];if(Se===0&&(Se=J,(H+=M)>=F&&(M=4*pe+4*r*(L-1),H=k+(J+pe)*(L<<1),L>>=1)),G===ce)H+=4;else{var ee=t[ie+3*G],te=t[ie+3*G+1],Q=t[ie+3*G+2];D[H++]=Q,D[H++]=te,D[H++]=ee,D[H++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(P,D){var X=this.frameInfo(P),de=X.width*X.height,re=new Uint8Array(de);bQ(t,X.data_offset,re,de);var ie=X.palette_offset,ce=X.transparent_index;ce===null&&(ce=256);var J=X.width,pe=r-J,Se=J,k=4*(X.y*r+X.x),F=4*((X.y+X.height)*r+X.x),H=k,M=4*pe;X.interlaced===!0&&(M+=4*r*7);for(var L=8,z=0,R=re.length;z<R;++z){var G=re[z];if(Se===0&&(Se=J,(H+=M)>=F&&(M=4*pe+4*r*(L-1),H=k+(J+pe)*(L<<1),L>>=1)),G===ce)H+=4;else{var ee=t[ie+3*G],te=t[ie+3*G+1],Q=t[ie+3*G+2];D[H++]=ee,D[H++]=te,D[H++]=Q,D[H++]=255}--Se}}}function bQ(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,A=0,h=0,f=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&f!==0;)A|=t[e++]<<d,d+=8,f===1?f=t[e++]:--f;if(d<c)break;var g=A&u;if(A>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void ja.log("Warning, gif stream longer than expected.");r[h++]=w;var I=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--I]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&ja.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vB(t){var e,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),A=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),I=new Array(256),T=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(k,F){for(var H=0,M=0,L=new Array,z=1;z<=16;z++){for(var R=1;R<=k[z];R++)L[F[M]]=[],L[F[M]][0]=H,L[F[M]][1]=z,M++,H++;H*=2}return L}function ie(k){for(var F=k[0],H=k[1]-1;H>=0;)F&1<<H&&(g|=1<<x),H--,--x<0&&(g==255?(ce(255),ce(0)):ce(g),x=7,g=0)}function ce(k){p.push(k)}function J(k){ce(k>>8&255),ce(255&k)}function pe(k,F,H,M,L){for(var z,R=L[0],G=L[240],ee=function(qe,nt){var st,Et,yt,Ct,Ot,Pt,fe,Ke,ve,he,oe=0;for(ve=0;ve<8;++ve){st=qe[oe],Et=qe[oe+1],yt=qe[oe+2],Ct=qe[oe+3],Ot=qe[oe+4],Pt=qe[oe+5],fe=qe[oe+6];var je=st+(Ke=qe[oe+7]),Qe=st-Ke,tt=Et+fe,rt=Et-fe,Te=yt+Pt,Ee=yt-Pt,V=Ct+Ot,Ae=Ct-Ot,Ne=je+V,Re=je-V,ze=tt+Te,Ye=tt-Te;qe[oe]=Ne+ze,qe[oe+4]=Ne-ze;var Ze=.707106781*(Ye+Re);qe[oe+2]=Re+Ze,qe[oe+6]=Re-Ze;var dt=.382683433*((Ne=Ae+Ee)-(Ye=rt+Qe)),ge=.5411961*Ne+dt,Xe=1.306562965*Ye+dt,ot=.707106781*(ze=Ee+rt),be=Qe+ot,Ge=Qe-ot;qe[oe+5]=Ge+ge,qe[oe+3]=Ge-ge,qe[oe+1]=be+Xe,qe[oe+7]=be-Xe,oe+=8}for(oe=0,ve=0;ve<8;++ve){st=qe[oe],Et=qe[oe+8],yt=qe[oe+16],Ct=qe[oe+24],Ot=qe[oe+32],Pt=qe[oe+40],fe=qe[oe+48];var ut=st+(Ke=qe[oe+56]),bt=st-Ke,Rt=Et+fe,Wt=Et-fe,mt=yt+Pt,ne=yt-Pt,ae=Ct+Ot,me=Ct-Ot,ue=ut+ae,Be=ut-ae,Oe=Rt+mt,We=Rt-mt;qe[oe]=ue+Oe,qe[oe+32]=ue-Oe;var it=.707106781*(We+Be);qe[oe+16]=Be+it,qe[oe+48]=Be-it;var gt=.382683433*((ue=me+ne)-(We=Wt+bt)),xt=.5411961*ue+gt,_t=1.306562965*We+gt,Ce=.707106781*(Oe=ne+Wt),at=bt+Ce,wt=bt-Ce;qe[oe+40]=wt+xt,qe[oe+24]=wt-xt,qe[oe+8]=at+_t,qe[oe+56]=at-_t,oe++}for(ve=0;ve<64;++ve)he=qe[ve]*nt[ve],f[ve]=he>0?he+.5|0:he-.5|0;return f}(k,F),te=0;te<64;++te)m[C[te]]=ee[te];var Q=m[0]-H;H=m[0],Q==0?ie(M[0]):(ie(M[h[z=32767+Q]]),ie(A[z]));for(var xe=63;xe>0&&m[xe]==0;)xe--;if(xe==0)return ie(R),H;for(var Y,W=1;W<=xe;){for(var le=W;m[W]==0&&W<=xe;)++W;var Pe=W-le;if(Pe>=16){Y=Pe>>4;for(var Le=1;Le<=Y;++Le)ie(G);Pe&=15}z=32767+m[W],ie(L[(Pe<<4)+h[z]]),ie(A[z]),W++}return xe!=63&&ie(R),H}function Se(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(F){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var L=i((H[M]*F+50)/100);L=Math.min(Math.max(L,1),255),l[C[M]]=L}for(var z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],R=0;R<64;R++){var G=i((z[R]*F+50)/100);G=Math.min(Math.max(G,1),255),c[C[R]]=G}for(var ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],te=0,Q=0;Q<8;Q++)for(var xe=0;xe<8;xe++)u[te]=1/(l[C[te]]*ee[Q]*ee[xe]*8),d[te]=1/(c[C[te]]*ee[Q]*ee[xe]*8),te++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,F){F&&Se(F),p=new Array,g=0,x=7,J(65496),J(65504),J(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),J(1),J(1),ce(0),ce(0),function(){J(65499),J(132),ce(0);for(var Et=0;Et<64;Et++)ce(l[Et]);ce(1);for(var yt=0;yt<64;yt++)ce(c[yt])}(),function(Et,yt){J(65472),J(17),ce(8),J(yt),J(Et),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)}(k.width,k.height),function(){J(65476),J(418),ce(0);for(var Et=0;Et<16;Et++)ce(E[Et+1]);for(var yt=0;yt<=11;yt++)ce(S[yt]);ce(16);for(var Ct=0;Ct<16;Ct++)ce(O[Ct+1]);for(var Ot=0;Ot<=161;Ot++)ce(B[Ot]);ce(1);for(var Pt=0;Pt<16;Pt++)ce(P[Pt+1]);for(var fe=0;fe<=11;fe++)ce(D[fe]);ce(17);for(var Ke=0;Ke<16;Ke++)ce(X[Ke+1]);for(var ve=0;ve<=161;ve++)ce(de[ve])}(),J(65498),J(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var H=0,M=0,L=0;g=0,x=7,this.encode.displayName="_encode_";for(var z,R,G,ee,te,Q,xe,Y,W,le=k.data,Pe=k.width,Le=k.height,qe=4*Pe,nt=0;nt<Le;){for(z=0;z<qe;){for(te=qe*nt+z,xe=-1,Y=0,W=0;W<64;W++)Q=te+(Y=W>>3)*qe+(xe=4*(7&W)),nt+Y>=Le&&(Q-=qe*(nt+1+Y-Le)),z+xe>=qe&&(Q-=z+xe-qe+4),R=le[Q++],G=le[Q++],ee=le[Q++],y[W]=(T[R]+T[G+256|0]+T[ee+512|0]>>16)-128,b[W]=(T[R+768|0]+T[G+1024|0]+T[ee+1280|0]>>16)-128,w[W]=(T[R+1280|0]+T[G+1536|0]+T[ee+1792|0]>>16)-128;H=pe(y,u,H,e,n),M=pe(b,d,M,r,a),L=pe(w,d,L,r,a),z+=32}nt+=8}if(x>=0){var st=[];st[1]=x+1,st[0]=(1<<x+1)-1,ie(st)}return J(65497),new Uint8Array(p)},t=t||50,function(){for(var k=String.fromCharCode,F=0;F<256;F++)I[F]=k(F)}(),e=re(E,S),r=re(P,D),n=re(O,B),a=re(X,de),function(){for(var k=1,F=2,H=1;H<=15;H++){for(var M=k;M<F;M++)h[32767+M]=H,A[32767+M]=[],A[32767+M][1]=H,A[32767+M][0]=M;for(var L=-(F-1);L<=-k;L++)h[32767+L]=H,A[32767+L]=[],A[32767+L][1]=H,A[32767+L][0]=F-1+L;k<<=1,F<<=1}}(),function(){for(var k=0;k<256;k++)T[k]=19595*k,T[k+256|0]=38470*k,T[k+512|0]=7471*k+32768,T[k+768|0]=-11059*k,T[k+1024|0]=-21709*k,T[k+1280|0]=32768*k+8421375,T[k+1536|0]=-27439*k,T[k+1792|0]=-5329*k}(),Se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wQ(t){function e(S){if(!S)throw Error("assert :P")}function r(S,O,B){for(var P=0;4>P;P++)if(S[O+P]!=B.charCodeAt(P))return!0;return!1}function n(S,O,B,P,D){for(var X=0;X<D;X++)S[O+X]=B[P+X]}function a(S,O,B,P){for(var D=0;D<P;D++)S[O+D]=B}function s(S){return new Int32Array(S)}function i(S,O){for(var B=[],P=0;P<S;P++)B.push(new O);return B}function l(S,O){var B=[];return function P(D,X,de){for(var re=de[X],ie=0;ie<re&&(D.push(de.length>X+1?[]:new O),!(de.length<X+1));ie++)P(D[ie],X+1,de)}(B,0,S),B}var c=function(){var S=this;function O(N,j){for(var K=1<<j-1>>>0;N&K;)K>>>=1;return K?(N&K-1)+K:N}function B(N,j,K,Z,we){e(!(Z%K));do N[j+(Z-=K)]=we;while(0<Z)}function P(N,j,K,Z,we){if(e(2328>=we),512>=we)var _e=s(512);else if((_e=s(we))==null)return 0;return function(Ie,Fe,Me,He,lt,Bt){var $e,ft,Nt=Fe,Ut=1<<Me,It=s(16),Kt=s(16);for(e(lt!=0),e(He!=null),e(Ie!=null),e(0<Me),ft=0;ft<lt;++ft){if(15<He[ft])return 0;++It[He[ft]]}if(It[0]==lt)return 0;for(Kt[1]=0,$e=1;15>$e;++$e){if(It[$e]>1<<$e)return 0;Kt[$e+1]=Kt[$e]+It[$e]}for(ft=0;ft<lt;++ft)$e=He[ft],0<He[ft]&&(Bt[Kt[$e]++]=ft);if(Kt[15]==1)return(He=new D).g=0,He.value=Bt[0],B(Ie,Nt,1,Ut,He),Ut;var qt,ar=-1,er=Ut-1,Hr=0,jr=1,hn=1,Mr=1<<Me;for(ft=0,$e=1,lt=2;$e<=Me;++$e,lt<<=1){if(jr+=hn<<=1,0>(hn-=It[$e]))return 0;for(;0<It[$e];--It[$e])(He=new D).g=$e,He.value=Bt[ft++],B(Ie,Nt+Hr,lt,Mr,He),Hr=O(Hr,$e)}for($e=Me+1,lt=2;15>=$e;++$e,lt<<=1){if(jr+=hn<<=1,0>(hn-=It[$e]))return 0;for(;0<It[$e];--It[$e]){if(He=new D,(Hr&er)!=ar){for(Nt+=Mr,qt=1<<(ar=$e)-Me;15>ar&&!(0>=(qt-=It[ar]));)++ar,qt<<=1;Ut+=Mr=1<<(qt=ar-Me),Ie[Fe+(ar=Hr&er)].g=qt+Me,Ie[Fe+ar].value=Nt-Fe-ar}He.g=$e-Me,He.value=Bt[ft++],B(Ie,Nt+(Hr>>Me),lt,Mr,He),Hr=O(Hr,$e)}}return jr!=2*Kt[15]-1?0:Ut}(N,j,K,Z,we,_e)}function D(){this.value=this.g=0}function X(){this.value=this.g=0}function de(){this.G=i(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(nm,X)}function re(N,j,K,Z){e(N!=null),e(j!=null),e(2147483648>Z),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=j,N.pa=K,N.Jd=j,N.Yc=K+Z,N.Zc=4<=Z?K+Z-4+1:K,R(N)}function ie(N,j){for(var K=0;0<j--;)K|=ee(N,128)<<j;return K}function ce(N,j){var K=ie(N,j);return G(N)?-K:K}function J(N,j,K,Z){var we,_e=0;for(e(N!=null),e(j!=null),e(4294967288>Z),N.Sb=Z,N.Ra=0,N.u=0,N.h=0,4<Z&&(Z=4),we=0;we<Z;++we)_e+=j[K+we]<<8*we;N.Ra=_e,N.bb=Z,N.oa=j,N.pa=K}function pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<rh-8>>>0,++N.bb,N.u-=8;M(N)&&(N.h=1,N.u=0)}function Se(N,j){if(e(0<=j),!N.h&&j<=vc){var K=H(N)&xc[j];return N.u+=j,pe(N),K}return N.h=1,N.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(N){return N.Ra>>>(N.u&rh-1)>>>0}function M(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>rh}function L(N,j){N.u=j,N.h=M(N)}function z(N){N.u>=BA&&(e(N.u>=BA),pe(N))}function R(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function G(N){return ie(N,1)}function ee(N,j){var K=N.Ca;0>N.b&&R(N);var Z=N.b,we=K*j>>>8,_e=(N.I>>>Z>we)+0;for(_e?(K-=we,N.I-=we+1<<Z>>>0):K=we+1,Z=K,we=0;256<=Z;)we+=8,Z>>=8;return Z=7^we+nh[Z],N.b-=Z,N.Ca=(K<<Z)-1,_e}function te(N,j,K){N[j+0]=K>>24&255,N[j+1]=K>>16&255,N[j+2]=K>>8&255,N[j+3]=255&K}function Q(N,j){return N[j+0]|N[j+1]<<8}function xe(N,j){return Q(N,j)|N[j+2]<<16}function Y(N,j){return Q(N,j)|Q(N,j+2)<<16}function W(N,j){var K=1<<j;return e(N!=null),e(0<j),N.X=s(K),N.X==null?0:(N.Mb=32-j,N.Xa=j,1)}function le(N,j){e(N!=null),e(j!=null),e(N.Xa==j.Xa),n(j.X,0,N.X,0,1<<j.Xa)}function Pe(){this.X=[],this.Xa=this.Mb=0}function Le(N,j,K,Z){e(K!=null),e(Z!=null);var we=K[0],_e=Z[0];return we==0&&(we=(N*_e+j/2)/j),_e==0&&(_e=(j*we+N/2)/N),0>=we||0>=_e?0:(K[0]=we,Z[0]=_e,1)}function qe(N,j){return N+(1<<j)-1>>>j}function nt(N,j){return((4278255360&N)+(4278255360&j)>>>0&4278255360)+((16711935&N)+(16711935&j)>>>0&16711935)>>>0}function st(N,j){S[j]=function(K,Z,we,_e,Ie,Fe,Me){var He;for(He=0;He<Ie;++He){var lt=S[N](Fe[Me+He-1],we,_e+He);Fe[Me+He]=nt(K[Z+He],lt)}}}function Et(){this.ud=this.hd=this.jd=0}function yt(N,j){return((4278124286&(N^j))>>>1)+(N&j)>>>0}function Ct(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Ot(N,j){return Ct(N+(N-j+.5>>1))}function Pt(N,j,K){return Math.abs(j-K)-Math.abs(N-K)}function fe(N,j,K,Z,we,_e,Ie){for(Z=_e[Ie-1],K=0;K<we;++K)_e[Ie+K]=Z=nt(N[j+K],Z)}function Ke(N,j,K,Z,we){var _e;for(_e=0;_e<K;++_e){var Ie=N[j+_e],Fe=Ie>>8&255,Me=16711935&(Me=(Me=16711935&Ie)+((Fe<<16)+Fe));Z[we+_e]=(4278255360&Ie)+Me>>>0}}function ve(N,j){j.jd=255&N,j.hd=N>>8&255,j.ud=N>>16&255}function he(N,j,K,Z,we,_e){var Ie;for(Ie=0;Ie<Z;++Ie){var Fe=j[K+Ie],Me=Fe>>>8,He=Fe,lt=255&(lt=(lt=Fe>>>16)+((N.jd<<24>>24)*(Me<<24>>24)>>>5));He=255&(He=(He+=(N.hd<<24>>24)*(Me<<24>>24)>>>5)+((N.ud<<24>>24)*(lt<<24>>24)>>>5)),we[_e+Ie]=(4278255360&Fe)+(lt<<16)+He}}function oe(N,j,K,Z,we){S[j]=function(_e,Ie,Fe,Me,He,lt,Bt,$e,ft){for(Me=Bt;Me<$e;++Me)for(Bt=0;Bt<ft;++Bt)He[lt++]=we(Fe[Z(_e[Ie++])])},S[N]=function(_e,Ie,Fe,Me,He,lt,Bt){var $e=8>>_e.b,ft=_e.Ea,Nt=_e.K[0],Ut=_e.w;if(8>$e)for(_e=(1<<_e.b)-1,Ut=(1<<$e)-1;Ie<Fe;++Ie){var It,Kt=0;for(It=0;It<ft;++It)It&_e||(Kt=Z(Me[He++])),lt[Bt++]=we(Nt[Kt&Ut]),Kt>>=$e}else S["VP8LMapColor"+K](Me,He,Nt,Ut,lt,Bt,Ie,Fe,ft)}}function je(N,j,K,Z,we){for(K=j+K;j<K;){var _e=N[j++];Z[we++]=_e>>16&255,Z[we++]=_e>>8&255,Z[we++]=255&_e}}function Qe(N,j,K,Z,we){for(K=j+K;j<K;){var _e=N[j++];Z[we++]=_e>>16&255,Z[we++]=_e>>8&255,Z[we++]=255&_e,Z[we++]=_e>>24&255}}function tt(N,j,K,Z,we){for(K=j+K;j<K;){var _e=(Ie=N[j++])>>16&240|Ie>>12&15,Ie=240&Ie|Ie>>28&15;Z[we++]=_e,Z[we++]=Ie}}function rt(N,j,K,Z,we){for(K=j+K;j<K;){var _e=(Ie=N[j++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;Z[we++]=_e,Z[we++]=Ie}}function Te(N,j,K,Z,we){for(K=j+K;j<K;){var _e=N[j++];Z[we++]=255&_e,Z[we++]=_e>>8&255,Z[we++]=_e>>16&255}}function Ee(N,j,K,Z,we,_e){if(_e==0)for(K=j+K;j<K;)te(Z,((_e=N[j++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),we+=32;else n(Z,we,N,j,K)}function V(N,j){S[j][0]=S[N+"0"],S[j][1]=S[N+"1"],S[j][2]=S[N+"2"],S[j][3]=S[N+"3"],S[j][4]=S[N+"4"],S[j][5]=S[N+"5"],S[j][6]=S[N+"6"],S[j][7]=S[N+"7"],S[j][8]=S[N+"8"],S[j][9]=S[N+"9"],S[j][10]=S[N+"10"],S[j][11]=S[N+"11"],S[j][12]=S[N+"12"],S[j][13]=S[N+"13"],S[j][14]=S[N+"0"],S[j][15]=S[N+"0"]}function Ae(N){return N==j3||N==k3||N==Rw||N==F3}function Ne(){this.eb=[],this.size=this.A=this.fb=0}function Re(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ze(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ne,this.f.kb=new Re,this.sd=null}function Ye(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ze(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function ge(N,j){var K=N.T,Z=j.ba.f.RGBA,we=Z.eb,_e=Z.fb+N.ka*Z.A,Ie=ou[j.ba.S],Fe=N.y,Me=N.O,He=N.f,lt=N.N,Bt=N.ea,$e=N.W,ft=j.cc,Nt=j.dc,Ut=j.Mc,It=j.Nc,Kt=N.ka,qt=N.ka+N.T,ar=N.U,er=ar+1>>1;for(Kt==0?Ie(Fe,Me,null,null,He,lt,Bt,$e,He,lt,Bt,$e,we,_e,null,null,ar):(Ie(j.ec,j.fc,Fe,Me,ft,Nt,Ut,It,He,lt,Bt,$e,we,_e-Z.A,we,_e,ar),++K);Kt+2<qt;Kt+=2)ft=He,Nt=lt,Ut=Bt,It=$e,lt+=N.Rc,$e+=N.Rc,_e+=2*Z.A,Ie(Fe,(Me+=2*N.fa)-N.fa,Fe,Me,ft,Nt,Ut,It,He,lt,Bt,$e,we,_e-Z.A,we,_e,ar);return Me+=N.fa,N.j+qt<N.o?(n(j.ec,j.fc,Fe,Me,ar),n(j.cc,j.dc,He,lt,er),n(j.Mc,j.Nc,Bt,$e,er),K--):1&qt||Ie(Fe,Me,null,null,He,lt,Bt,$e,He,lt,Bt,$e,we,_e+Z.A,null,null,ar),K}function Xe(N,j,K){var Z=N.F,we=[N.J];if(Z!=null){var _e=N.U,Ie=j.ba.S,Fe=Ie==Dw||Ie==Rw;j=j.ba.f.RGBA;var Me=[0],He=N.ka;Me[0]=N.T,N.Kb&&(He==0?--Me[0]:(--He,we[0]-=N.width),N.j+N.ka+N.T==N.o&&(Me[0]=N.o-N.j-He));var lt=j.eb;He=j.fb+He*j.A,N=I8(Z,we[0],N.width,_e,Me,lt,He+(Fe?0:3),j.A),e(K==Me),N&&Ae(Ie)&&n1(lt,He,Fe,_e,Me,j.A)}return 0}function ot(N){var j=N.ma,K=j.ba.S,Z=11>K,we=K==Fw||K==Ow||K==Dw||K==P3||K==12||Ae(K);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!Wv(j.Oa,N,we?11:12))return 0;if(we&&Ae(K)&&au(),N.da)alert("todo:use_scaling");else{if(Z){if(j.Ib=dt,N.Kb){if(K=N.U+1>>1,j.memory=s(N.U+2*K),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+N.U,j.Mc=j.cc,j.Nc=j.dc+K,j.Ib=ge,au()}}else alert("todo:EmitYUV");we&&(j.Jb=Xe,Z&&Gl())}if(Z&&!$8){for(N=0;256>N;++N)lce[N]=89858*(N-128)+Lw>>Mw,dce[N]=-22014*(N-128)+Lw,uce[N]=-45773*(N-128),cce[N]=113618*(N-128)+Lw>>Mw;for(N=s1;N<R3;++N)j=76283*(N-16)+Lw>>Mw,Ace[N-s1]=vn(j,255),fce[N-s1]=vn(j+8>>4,15);$8=1}return 1}function be(N){var j=N.ma,K=N.U,Z=N.T;return e(!(1&N.ka)),0>=K||0>=Z?0:(K=j.Ib(N,j),j.Jb!=null&&j.Jb(N,j,K),j.Dc+=K,1)}function Ge(N){N.ma.memory=null}function ut(N,j,K,Z){return Se(N,8)!=47?0:(j[0]=Se(N,14)+1,K[0]=Se(N,14)+1,Z[0]=Se(N,1),Se(N,3)!=0?0:!N.h)}function bt(N,j){if(4>N)return N+1;var K=N-2>>1;return(2+(1&N)<<K)+Se(j,K)+1}function Rt(N,j){return 120<j?j-120:1<=(K=((K=zle[j-1])>>4)*N+(8-(15&K)))?K:1;var K}function Wt(N,j,K){var Z=H(K),we=N[j+=255&Z].g-8;return 0<we&&(L(K,K.u+8),Z=H(K),j+=N[j].value,j+=Z&(1<<we)-1),L(K,K.u+N[j].g),N[j].value}function mt(N,j,K){return K.g+=N.g,K.value+=N.value<<j>>>0,e(8>=K.g),N.g}function ne(N,j,K){var Z=N.xc;return e((j=Z==0?0:N.vc[N.md*(K>>Z)+(j>>Z)])<N.Wb),N.Ya[j]}function ae(N,j,K,Z){var we=N.ab,_e=N.c*j,Ie=N.C;j=Ie+j;var Fe=K,Me=Z;for(Z=N.Ta,K=N.Ua;0<we--;){var He=N.gc[we],lt=Ie,Bt=j,$e=Fe,ft=Me,Nt=(Me=Z,Fe=K,He.Ea);switch(e(lt<Bt),e(Bt<=He.nc),He.hc){case 2:Vs($e,ft,(Bt-lt)*Nt,Me,Fe);break;case 0:var Ut=lt,It=Bt,Kt=Me,qt=Fe,ar=(Mr=He).Ea;Ut==0&&(Yv($e,ft,null,null,1,Kt,qt),fe($e,ft+1,0,0,ar-1,Kt,qt+1),ft+=ar,qt+=ar,++Ut);for(var er=1<<Mr.b,Hr=er-1,jr=qe(ar,Mr.b),hn=Mr.K,Mr=Mr.w+(Ut>>Mr.b)*jr;Ut<It;){var Dn=hn,xi=Mr,mn=1;for(lg($e,ft,Kt,qt-ar,1,Kt,qt);mn<ar;){var Lr=(mn&~Hr)+er;Lr>ar&&(Lr=ar),(0,Zv[Dn[xi++]>>8&15])($e,ft+ +mn,Kt,qt+mn-ar,Lr-mn,Kt,qt+mn),mn=Lr}ft+=ar,qt+=ar,++Ut&Hr||(Mr+=jr)}Bt!=He.nc&&n(Me,Fe-Nt,Me,Fe+(Bt-lt-1)*Nt,Nt);break;case 1:for(Nt=$e,It=ft,ar=($e=He.Ea)-(qt=$e&~(Kt=(ft=1<<He.b)-1)),Ut=qe($e,He.b),er=He.K,He=He.w+(lt>>He.b)*Ut;lt<Bt;){for(Hr=er,jr=He,hn=new Et,Mr=It+qt,Dn=It+$e;It<Mr;)ve(Hr[jr++],hn),e1(hn,Nt,It,ft,Me,Fe),It+=ft,Fe+=ft;It<Dn&&(ve(Hr[jr++],hn),e1(hn,Nt,It,ar,Me,Fe),It+=ar,Fe+=ar),++lt&Kt||(He+=Ut)}break;case 3:if($e==Me&&ft==Fe&&0<He.b){for(It=Me,$e=Nt=Fe+(Bt-lt)*Nt-(qt=(Bt-lt)*qe(He.Ea,He.b)),ft=Me,Kt=Fe,Ut=[],qt=(ar=qt)-1;0<=qt;--qt)Ut[qt]=ft[Kt+qt];for(qt=ar-1;0<=qt;--qt)It[$e+qt]=Ut[qt];Tw(He,lt,Bt,Me,Nt,Me,Fe)}else Tw(He,lt,Bt,$e,ft,Me,Fe)}Fe=Z,Me=K}Me!=K&&n(Z,K,Fe,Me,_e)}function me(N,j){var K=N.V,Z=N.Ba+N.c*N.C,we=j-N.C;if(e(j<=N.l.o),e(16>=we),0<we){var _e=N.l,Ie=N.Ta,Fe=N.Ua,Me=_e.width;if(ae(N,we,K,Z),we=Fe=[Fe],e((K=N.C)<(Z=j)),e(_e.v<_e.va),Z>_e.o&&(Z=_e.o),K<_e.j){var He=_e.j-K;K=_e.j,we[0]+=He*Me}if(K>=Z?K=0:(we[0]+=4*_e.v,_e.ka=K-_e.j,_e.U=_e.va-_e.v,_e.T=Z-K,K=1),K){if(Fe=Fe[0],11>(K=N.ca).S){var lt=K.f.RGBA,Bt=(Z=K.S,we=_e.U,_e=_e.T,He=lt.eb,lt.A),$e=_e;for(lt=lt.fb+N.Ma*lt.A;0<$e--;){var ft=Ie,Nt=Fe,Ut=we,It=He,Kt=lt;switch(Z){case kw:t1(ft,Nt,Ut,It,Kt);break;case Fw:ah(ft,Nt,Ut,It,Kt);break;case j3:ah(ft,Nt,Ut,It,Kt),n1(It,Kt,0,Ut,1,0);break;case O8:am(ft,Nt,Ut,It,Kt);break;case Ow:Ee(ft,Nt,Ut,It,Kt,1);break;case k3:Ee(ft,Nt,Ut,It,Kt,1),n1(It,Kt,0,Ut,1,0);break;case Dw:Ee(ft,Nt,Ut,It,Kt,0);break;case Rw:Ee(ft,Nt,Ut,It,Kt,0),n1(It,Kt,1,Ut,1,0);break;case P3:sh(ft,Nt,Ut,It,Kt);break;case F3:sh(ft,Nt,Ut,It,Kt),S8(It,Kt,Ut,1,0);break;case D8:ih(ft,Nt,Ut,It,Kt);break;default:e(0)}Fe+=Me,lt+=Bt}N.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=K.height)}}N.C=j,e(N.C<=N.i)}function ue(N){var j;if(0<N.ua)return 0;for(j=0;j<N.Wb;++j){var K=N.Ya[j].G,Z=N.Ya[j].H;if(0<K[1][Z[1]+0].g||0<K[2][Z[2]+0].g||0<K[3][Z[3]+0].g)return 0}return 1}function Be(N,j,K,Z,we,_e){if(N.Z!=0){var Ie=N.qd,Fe=N.rd;for(e(ch[N.Z]!=null);j<K;++j)ch[N.Z](Ie,Fe,Z,we,Z,we,_e),Ie=Z,Fe=we,we+=_e;N.qd=Ie,N.rd=Fe}}function Oe(N,j){var K=N.l.ma,Z=K.Z==0||K.Z==1?N.l.j:N.C;if(Z=N.C<Z?Z:N.C,e(j<=N.l.o),j>Z){var we=N.l.width,_e=K.ca,Ie=K.tb+we*Z,Fe=N.V,Me=N.Ba+N.c*Z,He=N.gc;e(N.ab==1),e(He[0].hc==3),Qd(He[0],Z,j,Fe,Me,_e,Ie),Be(K,Z,j,_e,Ie,we)}N.C=N.Ma=j}function We(N,j,K,Z,we,_e,Ie){var Fe=N.$/Z,Me=N.$%Z,He=N.m,lt=N.s,Bt=K+N.$,$e=Bt;we=K+Z*we;var ft=K+Z*_e,Nt=280+lt.ua,Ut=N.Pb?Fe:16777216,It=0<lt.ua?lt.Wa:null,Kt=lt.wc,qt=Bt<ft?ne(lt,Me,Fe):null;e(N.C<_e),e(ft<=we);var ar=!1;e:for(;;){for(;ar||Bt<ft;){var er=0;if(Fe>=Ut){var Hr=Bt-K;e((Ut=N).Pb),Ut.wd=Ut.m,Ut.xd=Hr,0<Ut.s.ua&&le(Ut.s.Wa,Ut.s.vb),Ut=Fe+Xle}if(Me&Kt||(qt=ne(lt,Me,Fe)),e(qt!=null),qt.Qb&&(j[Bt]=qt.qb,ar=!0),!ar)if(z(He),qt.jc){er=He,Hr=j;var jr=Bt,hn=qt.pd[H(er)&nm-1];e(qt.jc),256>hn.g?(L(er,er.u+hn.g),Hr[jr]=hn.value,er=0):(L(er,er.u+hn.g-256),e(256<=hn.value),er=hn.value),er==0&&(ar=!0)}else er=Wt(qt.G[0],qt.H[0],He);if(He.h)break;if(ar||256>er){if(!ar)if(qt.nd)j[Bt]=(qt.qb|er<<8)>>>0;else{if(z(He),ar=Wt(qt.G[1],qt.H[1],He),z(He),Hr=Wt(qt.G[2],qt.H[2],He),jr=Wt(qt.G[3],qt.H[3],He),He.h)break;j[Bt]=(jr<<24|ar<<16|er<<8|Hr)>>>0}if(ar=!1,++Bt,++Me>=Z&&(Me=0,++Fe,Ie!=null&&Fe<=_e&&!(Fe%16)&&Ie(N,Fe),It!=null))for(;$e<Bt;)er=j[$e++],It.X[(506832829*er&4294967295)>>>It.Mb]=er}else if(280>er){if(er=bt(er-256,He),Hr=Wt(qt.G[4],qt.H[4],He),z(He),Hr=Rt(Z,Hr=bt(Hr,He)),He.h)break;if(Bt-K<Hr||we-Bt<er)break e;for(jr=0;jr<er;++jr)j[Bt+jr]=j[Bt+jr-Hr];for(Bt+=er,Me+=er;Me>=Z;)Me-=Z,++Fe,Ie!=null&&Fe<=_e&&!(Fe%16)&&Ie(N,Fe);if(e(Bt<=we),Me&Kt&&(qt=ne(lt,Me,Fe)),It!=null)for(;$e<Bt;)er=j[$e++],It.X[(506832829*er&4294967295)>>>It.Mb]=er}else{if(!(er<Nt))break e;for(ar=er-280,e(It!=null);$e<Bt;)er=j[$e++],It.X[(506832829*er&4294967295)>>>It.Mb]=er;er=Bt,e(!(ar>>>(Hr=It).Xa)),j[er]=Hr.X[ar],ar=!0}ar||e(He.h==M(He))}if(N.Pb&&He.h&&Bt<we)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&le(N.s.vb,N.s.Wa);else{if(He.h)break e;Ie!=null&&Ie(N,Fe>_e?_e:Fe),N.a=0,N.$=Bt-K}return 1}return N.a=3,0}function it(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var j=N.Wa;j!=null&&(j.X=null),N.vb=null,e(N!=null)}function gt(){var N=new Xr;return N==null?null:(N.a=0,N.xb=L8,V("Predictor","VP8LPredictors"),V("Predictor","VP8LPredictors_C"),V("PredictorAdd","VP8LPredictorsAdd"),V("PredictorAdd","VP8LPredictorsAdd_C"),Vs=Ke,e1=he,t1=je,ah=Qe,sh=tt,ih=rt,am=Te,S.VP8LMapColor32b=Ud,S.VP8LMapColor8b=Jv,N)}function xt(N,j,K,Z,we){var _e=1,Ie=[N],Fe=[j],Me=Z.m,He=Z.s,lt=null,Bt=0;e:for(;;){if(K)for(;_e&&Se(Me,1);){var $e=Ie,ft=Fe,Nt=Z,Ut=1,It=Nt.m,Kt=Nt.gc[Nt.ab],qt=Se(It,2);if(Nt.Oc&1<<qt)_e=0;else{switch(Nt.Oc|=1<<qt,Kt.hc=qt,Kt.Ea=$e[0],Kt.nc=ft[0],Kt.K=[null],++Nt.ab,e(4>=Nt.ab),qt){case 0:case 1:Kt.b=Se(It,3)+2,Ut=xt(qe(Kt.Ea,Kt.b),qe(Kt.nc,Kt.b),0,Nt,Kt.K),Kt.K=Kt.K[0];break;case 3:var ar,er=Se(It,8)+1,Hr=16<er?0:4<er?1:2<er?2:3;if($e[0]=qe(Kt.Ea,Hr),Kt.b=Hr,ar=Ut=xt(er,1,0,Nt,Kt.K)){var jr,hn=er,Mr=Kt,Dn=1<<(8>>Mr.b),xi=s(Dn);if(xi==null)ar=0;else{var mn=Mr.K[0],Lr=Mr.w;for(xi[0]=Mr.K[0][0],jr=1;jr<1*hn;++jr)xi[jr]=nt(mn[Lr+jr],xi[jr-1]);for(;jr<4*Dn;++jr)xi[jr]=0;Mr.K[0]=null,Mr.K[0]=xi,ar=1}}Ut=ar;break;case 2:break;default:e(0)}_e=Ut}}if(Ie=Ie[0],Fe=Fe[0],_e&&Se(Me,1)&&!(_e=1<=(Bt=Se(Me,4))&&11>=Bt)){Z.a=3;break e}var yr;if(yr=_e)t:{var $s,dn,Mn,$a=Z,xo=Ie,yl=Fe,ks=Bt,Ko=K,bl=$a.m,vi=$a.s,Vn=[null],ca=1,Fs=0,ua=Wle[ks];r:for(;;){if(Ko&&Se(bl,1)){var vo=Se(bl,3)+2,Xu=qe(xo,vo),Ks=qe(yl,vo),ql=Xu*Ks;if(!xt(Xu,Ks,0,$a,Vn))break r;for(Vn=Vn[0],vi.xc=vo,$s=0;$s<ql;++$s){var Ta=Vn[$s]>>8&65535;Vn[$s]=Ta,Ta>=ca&&(ca=Ta+1)}}if(bl.h)break r;for(dn=0;5>dn;++dn){var yi=R8[dn];!dn&&0<ks&&(yi+=1<<ks),Fs<yi&&(Fs=yi)}var bc=i(ca*ua,D),wl=ca,wc=i(wl,de);if(wc==null)var Nc=null;else e(65536>=wl),Nc=wc;var zl=s(Fs);if(Nc==null||zl==null||bc==null){$a.a=1;break r}var _c=bc;for($s=Mn=0;$s<ca;++$s){var Da=Nc[$s],Cc=Da.G,Yu=Da.H,im=0,jA=1,yo=0;for(dn=0;5>dn;++dn){yi=R8[dn],Cc[dn]=_c,Yu[dn]=Mn,!dn&&0<ks&&(yi+=1<<ks);a:{var Qw,M3=yi,Vw=$a,i1=zl,pce=_c,gce=Mn,L3=0,uh=Vw.m,xce=Se(uh,1);if(a(i1,0,0,M3),xce){var vce=Se(uh,1)+1,yce=Se(uh,1),q8=Se(uh,yce==0?1:8);i1[q8]=1,vce==2&&(i1[q8=Se(uh,8)]=1);var Hw=1}else{var z8=s(19),W8=Se(uh,4)+4;if(19<W8){Vw.a=3;var $w=0;break a}for(Qw=0;Qw<W8;++Qw)z8[qle[Qw]]=Se(uh,3);var U3=void 0,o1=void 0,X8=Vw,bce=z8,Kw=M3,Y8=i1,Q3=0,dh=X8.m,J8=8,Z8=i(128,D);n:for(;P(Z8,0,7,bce,19);){if(Se(dh,1)){var wce=2+2*Se(dh,3);if((U3=2+Se(dh,wce))>Kw)break n}else U3=Kw;for(o1=0;o1<Kw&&U3--;){z(dh);var eM=Z8[0+(127&H(dh))];L(dh,dh.u+eM.g);var ug=eM.value;if(16>ug)Y8[o1++]=ug,ug!=0&&(J8=ug);else{var Nce=ug==16,tM=ug-16,_ce=Kle[tM],rM=Se(dh,$le[tM])+_ce;if(o1+rM>Kw)break n;for(var Cce=Nce?J8:0;0<rM--;)Y8[o1++]=Cce}}Q3=1;break n}Q3||(X8.a=3),Hw=Q3}(Hw=Hw&&!uh.h)&&(L3=P(pce,gce,8,i1,M3)),Hw&&L3!=0?$w=L3:(Vw.a=3,$w=0)}if($w==0)break r;if(jA&&Gle[dn]==1&&(jA=_c[Mn].g==0),im+=_c[Mn].g,Mn+=$w,3>=dn){var l1,V3=zl[0];for(l1=1;l1<yi;++l1)zl[l1]>V3&&(V3=zl[l1]);yo+=V3}}if(Da.nd=jA,Da.Qb=0,jA&&(Da.qb=(Cc[3][Yu[3]+0].value<<24|Cc[1][Yu[1]+0].value<<16|Cc[2][Yu[2]+0].value)>>>0,im==0&&256>Cc[0][Yu[0]+0].value&&(Da.Qb=1,Da.qb+=Cc[0][Yu[0]+0].value<<8)),Da.jc=!Da.Qb&&6>yo,Da.jc){var Gw,kA=Da;for(Gw=0;Gw<nm;++Gw){var Ah=Gw,fh=kA.pd[Ah],qw=kA.G[0][kA.H[0]+Ah];256<=qw.value?(fh.g=qw.g+256,fh.value=qw.value):(fh.g=0,fh.value=0,Ah>>=mt(qw,8,fh),Ah>>=mt(kA.G[1][kA.H[1]+Ah],16,fh),Ah>>=mt(kA.G[2][kA.H[2]+Ah],0,fh),mt(kA.G[3][kA.H[3]+Ah],24,fh))}}}vi.vc=Vn,vi.Wb=ca,vi.Ya=Nc,vi.yc=bc,yr=1;break t}yr=0}if(!(_e=yr)){Z.a=3;break e}if(0<Bt){if(He.ua=1<<Bt,!W(He.Wa,Bt)){Z.a=1,_e=0;break e}}else He.ua=0;var H3=Z,nM=Ie,Ece=Fe,$3=H3.s,K3=$3.xc;if(H3.c=nM,H3.i=Ece,$3.md=qe(nM,K3),$3.wc=K3==0?-1:(1<<K3)-1,K){Z.xb=nce;break e}if((lt=s(Ie*Fe))==null){Z.a=1,_e=0;break e}_e=(_e=We(Z,lt,0,Ie,Fe,Fe,null))&&!Me.h;break e}return _e?(we!=null?we[0]=lt:(e(lt==null),e(K)),Z.$=0,K||it(He)):it(He),_e}function _t(N,j){var K=N.c*N.i,Z=K+j+16*j;return e(N.c<=j),N.V=s(Z),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+K+j,1)}function Ce(N,j){var K=N.C,Z=j-K,we=N.V,_e=N.Ba+N.c*K;for(e(j<=N.l.o);0<Z;){var Ie=16<Z?16:Z,Fe=N.l.ma,Me=N.l.width,He=Me*Ie,lt=Fe.ca,Bt=Fe.tb+Me*K,$e=N.Ta,ft=N.Ua;ae(N,Ie,we,_e),B8($e,ft,lt,Bt,He),Be(Fe,K,K+Ie,lt,Bt,Me),Z-=Ie,we+=Ie*N.c,K+=Ie}e(K==j),N.C=N.Ma=j}function at(){this.ub=this.yd=this.td=this.Rb=0}function wt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ht(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Je(){this.Yb=function(){var N=[];return function j(K,Z,we){for(var _e=we[Z],Ie=0;Ie<_e&&(K.push(we.length>Z+1?[]:0),!(we.length<Z+1));Ie++)j(K[Ie],Z+1,we)}(N,0,[3,11]),N}()}function zt(){this.jb=s(3),this.Wc=l([4,8],Je),this.Xc=l([4,17],Je)}function Zt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ft(){this.ld=this.La=this.dd=this.tc=0}function Vt(){this.Na=this.la=0}function nr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ht(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ft),this.Y=0,this.ya=Array(new Ht),this.aa=0,this.l=new Na}function Or(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fn(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new at,this.Kc=new wt,this.ed=new Zt,this.Qa=new ht,this.Ic=this.$c=this.Aa=0,this.D=new Nr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,k),this.ia=0,this.pb=i(4,nr),this.Pa=new zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Or),this.Hd=0,this.rb=Array(new Vt),this.sb=0,this.wa=Array(new Ft),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ht),this.L=this.aa=0,this.gd=l([4,2],Ft),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vn(N,j){return 0>N?0:N>j?j:N}function Na(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ku(){var N=new Fn;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,a1||(a1=vr)),N}function Rn(N,j,K){return N.a==0&&(N.a=j,N.sc=K,N.cb=0),0}function ct(N,j,K){return 3<=K&&N[j+0]==157&&N[j+1]==1&&N[j+2]==42}function xr(N,j){if(N==null)return 0;if(N.a=0,N.sc="OK",j==null)return Rn(N,2,"null VP8Io passed to VP8GetHeaders()");var K=j.data,Z=j.w,we=j.ha;if(4>we)return Rn(N,7,"Truncated header.");var _e=K[Z+0]|K[Z+1]<<8|K[Z+2]<<16,Ie=N.Od;if(Ie.Rb=!(1&_e),Ie.td=_e>>1&7,Ie.yd=_e>>4&1,Ie.ub=_e>>5,3<Ie.td)return Rn(N,3,"Incorrect keyframe parameters.");if(!Ie.yd)return Rn(N,4,"Frame not displayable.");Z+=3,we-=3;var Fe=N.Kc;if(Ie.Rb){if(7>we)return Rn(N,7,"cannot parse picture header");if(!ct(K,Z,we))return Rn(N,3,"Bad code word");Fe.c=16383&(K[Z+4]<<8|K[Z+3]),Fe.Td=K[Z+4]>>6,Fe.i=16383&(K[Z+6]<<8|K[Z+5]),Fe.Ud=K[Z+6]>>6,Z+=7,we-=7,N.za=Fe.c+15>>4,N.Ub=Fe.i+15>>4,j.width=Fe.c,j.height=Fe.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,a((_e=N.Pa).jb,0,255,_e.jb.length),e((_e=N.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,a(_e.Zb,0,0,_e.Zb.length),a(_e.Lb,0,0,_e.Lb)}if(Ie.ub>we)return Rn(N,7,"bad partition length");re(_e=N.m,K,Z,Ie.ub),Z+=Ie.ub,we-=Ie.ub,Ie.Rb&&(Fe.Ld=G(_e),Fe.Kd=G(_e)),Fe=N.Qa;var Me,He=N.Pa;if(e(_e!=null),e(Fe!=null),Fe.Cb=G(_e),Fe.Cb){if(Fe.Bb=G(_e),G(_e)){for(Fe.Fb=G(_e),Me=0;4>Me;++Me)Fe.Zb[Me]=G(_e)?ce(_e,7):0;for(Me=0;4>Me;++Me)Fe.Lb[Me]=G(_e)?ce(_e,6):0}if(Fe.Bb)for(Me=0;3>Me;++Me)He.jb[Me]=G(_e)?ie(_e,8):255}else Fe.Bb=0;if(_e.Ka)return Rn(N,3,"cannot parse segment header");if((Fe=N.ed).zd=G(_e),Fe.Tb=ie(_e,6),Fe.wb=ie(_e,3),Fe.Pc=G(_e),Fe.Pc&&G(_e)){for(He=0;4>He;++He)G(_e)&&(Fe.vd[He]=ce(_e,6));for(He=0;4>He;++He)G(_e)&&(Fe.od[He]=ce(_e,6))}if(N.L=Fe.Tb==0?0:Fe.zd?1:2,_e.Ka)return Rn(N,3,"cannot parse filter header");var lt=we;if(we=Me=Z,Z=Me+lt,Fe=lt,N.Xb=(1<<ie(N.m,2))-1,lt<3*(He=N.Xb))K=7;else{for(Me+=3*He,Fe-=3*He,lt=0;lt<He;++lt){var Bt=K[we+0]|K[we+1]<<8|K[we+2]<<16;Bt>Fe&&(Bt=Fe),re(N.Jc[+lt],K,Me,Bt),Me+=Bt,Fe-=Bt,we+=3}re(N.Jc[+He],K,Me,Fe),K=Me<Z?0:5}if(K!=0)return Rn(N,K,"cannot parse partitions");for(K=ie(Me=N.m,7),we=G(Me)?ce(Me,4):0,Z=G(Me)?ce(Me,4):0,Fe=G(Me)?ce(Me,4):0,He=G(Me)?ce(Me,4):0,Me=G(Me)?ce(Me,4):0,lt=N.Qa,Bt=0;4>Bt;++Bt){if(lt.Cb){var $e=lt.Zb[Bt];lt.Fb||($e+=K)}else{if(0<Bt){N.pb[Bt]=N.pb[0];continue}$e=K}var ft=N.pb[Bt];ft.Sc[0]=O3[vn($e+we,127)],ft.Sc[1]=D3[vn($e+0,127)],ft.Eb[0]=2*O3[vn($e+Z,127)],ft.Eb[1]=101581*D3[vn($e+Fe,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=O3[vn($e+He,117)],ft.Qc[1]=D3[vn($e+Me,127)],ft.lc=$e+Me}if(!Ie.Rb)return Rn(N,4,"Not a key frame.");for(G(_e),Ie=N.Pa,K=0;4>K;++K){for(we=0;8>we;++we)for(Z=0;3>Z;++Z)for(Fe=0;11>Fe;++Fe)He=ee(_e,tce[K][we][Z][Fe])?ie(_e,8):Zle[K][we][Z][Fe],Ie.Wc[K][we].Yb[Z][Fe]=He;for(we=0;17>we;++we)Ie.Xc[K][we]=Ie.Wc[K][rce[we]]}return N.kc=G(_e),N.kc&&(N.Bd=ie(_e,8)),N.cb=1}function vr(N,j,K,Z,we,_e,Ie){var Fe=j[we].Yb[K];for(K=0;16>we;++we){if(!ee(N,Fe[K+0]))return we;for(;!ee(N,Fe[K+1]);)if(Fe=j[++we].Yb[0],K=0,we==16)return 16;var Me=j[we+1].Yb;if(ee(N,Fe[K+2])){var He=N,lt=0;if(ee(He,($e=Fe)[(Bt=K)+3]))if(ee(He,$e[Bt+6])){for(Fe=0,Bt=2*(lt=ee(He,$e[Bt+8]))+($e=ee(He,$e[Bt+9+lt])),lt=0,$e=Yle[Bt];$e[Fe];++Fe)lt+=lt+ee(He,$e[Fe]);lt+=3+(8<<Bt)}else ee(He,$e[Bt+7])?(lt=7+2*ee(He,165),lt+=ee(He,145)):lt=5+ee(He,159);else lt=ee(He,$e[Bt+4])?3+ee(He,$e[Bt+5]):2;Fe=Me[2]}else lt=1,Fe=Me[1];Me=Ie+Jle[we],0>(He=N).b&&R(He);var Bt,$e=He.b,ft=(Bt=He.Ca>>1)-(He.I>>$e)>>31;--He.b,He.Ca+=ft,He.Ca|=1,He.I-=(Bt+1&ft)<<$e,_e[Me]=((lt^ft)-ft)*Z[(0<we)+0]}return 16}function Ar(N){var j=N.rb[N.sb-1];j.la=0,j.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function sr(N,j,K,Z,we){we=N[j+K+32*Z]+(we>>3),N[j+K+32*Z]=-256&we?0>we?0:255:we}function ir(N,j,K,Z,we,_e){sr(N,j,0,K,Z+we),sr(N,j,1,K,Z+_e),sr(N,j,2,K,Z-_e),sr(N,j,3,K,Z-we)}function tr(N){return(20091*N>>16)+N}function gr(N,j,K,Z){var we,_e=0,Ie=s(16);for(we=0;4>we;++we){var Fe=N[j+0]+N[j+8],Me=N[j+0]-N[j+8],He=(35468*N[j+4]>>16)-tr(N[j+12]),lt=tr(N[j+4])+(35468*N[j+12]>>16);Ie[_e+0]=Fe+lt,Ie[_e+1]=Me+He,Ie[_e+2]=Me-He,Ie[_e+3]=Fe-lt,_e+=4,j++}for(we=_e=0;4>we;++we)Fe=(N=Ie[_e+0]+4)+Ie[_e+8],Me=N-Ie[_e+8],He=(35468*Ie[_e+4]>>16)-tr(Ie[_e+12]),sr(K,Z,0,0,Fe+(lt=tr(Ie[_e+4])+(35468*Ie[_e+12]>>16))),sr(K,Z,1,0,Me+He),sr(K,Z,2,0,Me-He),sr(K,Z,3,0,Fe-lt),_e++,Z+=32}function Vr(N,j,K,Z){var we=N[j+0]+4,_e=35468*N[j+4]>>16,Ie=tr(N[j+4]),Fe=35468*N[j+1]>>16;ir(K,Z,0,we+Ie,N=tr(N[j+1]),Fe),ir(K,Z,1,we+_e,N,Fe),ir(K,Z,2,we-_e,N,Fe),ir(K,Z,3,we-Ie,N,Fe)}function gn(N,j,K,Z,we){gr(N,j,K,Z),we&&gr(N,j+16,K,Z+4)}function an(N,j,K,Z){sm(N,j+0,K,Z,1),sm(N,j+32,K,Z+128,1)}function Ho(N,j,K,Z){var we;for(N=N[j+0]+4,we=0;4>we;++we)for(j=0;4>j;++j)sr(K,Z,j,we,N)}function si(N,j,K,Z){N[j+0]&&sa(N,j+0,K,Z),N[j+16]&&sa(N,j+16,K,Z+4),N[j+32]&&sa(N,j+32,K,Z+128),N[j+48]&&sa(N,j+48,K,Z+128+4)}function pi(N,j,K,Z){var we,_e=s(16);for(we=0;4>we;++we){var Ie=N[j+0+we]+N[j+12+we],Fe=N[j+4+we]+N[j+8+we],Me=N[j+4+we]-N[j+8+we],He=N[j+0+we]-N[j+12+we];_e[0+we]=Ie+Fe,_e[8+we]=Ie-Fe,_e[4+we]=He+Me,_e[12+we]=He-Me}for(we=0;4>we;++we)Ie=(N=_e[0+4*we]+3)+_e[3+4*we],Fe=_e[1+4*we]+_e[2+4*we],Me=_e[1+4*we]-_e[2+4*we],He=N-_e[3+4*we],K[Z+0]=Ie+Fe>>3,K[Z+16]=He+Me>>3,K[Z+32]=Ie-Fe>>3,K[Z+48]=He-Me>>3,Z+=64}function Kl(N,j,K){var Z,we=j-32,_e=yc,Ie=255-N[we-1];for(Z=0;Z<K;++Z){var Fe,Me=_e,He=Ie+N[j-1];for(Fe=0;Fe<K;++Fe)N[j+Fe]=Me[He+N[we+Fe]];j+=32}}function EA(N,j){Kl(N,j,4)}function Wf(N,j){Kl(N,j,8)}function J0(N,j){Kl(N,j,16)}function Dd(N,j){var K;for(K=0;16>K;++K)n(N,j+32*K,N,j-32,16)}function ag(N,j){var K;for(K=16;0<K;--K)a(N,j,N[j-1],16),j+=32}function po(N,j,K){var Z;for(Z=0;16>Z;++Z)a(j,K+32*Z,N,16)}function Jc(N,j){var K,Z=16;for(K=0;16>K;++K)Z+=N[j-1+32*K]+N[j+K-32];po(Z>>5,N,j)}function Rd(N,j){var K,Z=8;for(K=0;16>K;++K)Z+=N[j-1+32*K];po(Z>>4,N,j)}function Xf(N,j){var K,Z=8;for(K=0;16>K;++K)Z+=N[j+K-32];po(Z>>4,N,j)}function sg(N,j){po(128,N,j)}function Wr(N,j,K){return N+2*j+K+2>>2}function Kv(N,j){var K,Z=j-32;for(Z=new Uint8Array([Wr(N[Z-1],N[Z+0],N[Z+1]),Wr(N[Z+0],N[Z+1],N[Z+2]),Wr(N[Z+1],N[Z+2],N[Z+3]),Wr(N[Z+2],N[Z+3],N[Z+4])]),K=0;4>K;++K)n(N,j+32*K,Z,0,Z.length)}function Gv(N,j){var K=N[j-1],Z=N[j-1+32],we=N[j-1+64],_e=N[j-1+96];te(N,j+0,16843009*Wr(N[j-1-32],K,Z)),te(N,j+32,16843009*Wr(K,Z,we)),te(N,j+64,16843009*Wr(Z,we,_e)),te(N,j+96,16843009*Wr(we,_e,_e))}function qv(N,j){var K,Z=4;for(K=0;4>K;++K)Z+=N[j+K-32]+N[j-1+32*K];for(Z>>=3,K=0;4>K;++K)a(N,j+32*K,Z,4)}function Ki(N,j){var K=N[j-1+0],Z=N[j-1+32],we=N[j-1+64],_e=N[j-1-32],Ie=N[j+0-32],Fe=N[j+1-32],Me=N[j+2-32],He=N[j+3-32];N[j+0+96]=Wr(Z,we,N[j-1+96]),N[j+1+96]=N[j+0+64]=Wr(K,Z,we),N[j+2+96]=N[j+1+64]=N[j+0+32]=Wr(_e,K,Z),N[j+3+96]=N[j+2+64]=N[j+1+32]=N[j+0+0]=Wr(Ie,_e,K),N[j+3+64]=N[j+2+32]=N[j+1+0]=Wr(Fe,Ie,_e),N[j+3+32]=N[j+2+0]=Wr(Me,Fe,Ie),N[j+3+0]=Wr(He,Me,Fe)}function Gu(N,j){var K=N[j+1-32],Z=N[j+2-32],we=N[j+3-32],_e=N[j+4-32],Ie=N[j+5-32],Fe=N[j+6-32],Me=N[j+7-32];N[j+0+0]=Wr(N[j+0-32],K,Z),N[j+1+0]=N[j+0+32]=Wr(K,Z,we),N[j+2+0]=N[j+1+32]=N[j+0+64]=Wr(Z,we,_e),N[j+3+0]=N[j+2+32]=N[j+1+64]=N[j+0+96]=Wr(we,_e,Ie),N[j+3+32]=N[j+2+64]=N[j+1+96]=Wr(_e,Ie,Fe),N[j+3+64]=N[j+2+96]=Wr(Ie,Fe,Me),N[j+3+96]=Wr(Fe,Me,Me)}function zv(N,j){var K=N[j-1+0],Z=N[j-1+32],we=N[j-1+64],_e=N[j-1-32],Ie=N[j+0-32],Fe=N[j+1-32],Me=N[j+2-32],He=N[j+3-32];N[j+0+0]=N[j+1+64]=_e+Ie+1>>1,N[j+1+0]=N[j+2+64]=Ie+Fe+1>>1,N[j+2+0]=N[j+3+64]=Fe+Me+1>>1,N[j+3+0]=Me+He+1>>1,N[j+0+96]=Wr(we,Z,K),N[j+0+64]=Wr(Z,K,_e),N[j+0+32]=N[j+1+96]=Wr(K,_e,Ie),N[j+1+32]=N[j+2+96]=Wr(_e,Ie,Fe),N[j+2+32]=N[j+3+96]=Wr(Ie,Fe,Me),N[j+3+32]=Wr(Fe,Me,He)}function Yf(N,j){var K=N[j+0-32],Z=N[j+1-32],we=N[j+2-32],_e=N[j+3-32],Ie=N[j+4-32],Fe=N[j+5-32],Me=N[j+6-32],He=N[j+7-32];N[j+0+0]=K+Z+1>>1,N[j+1+0]=N[j+0+64]=Z+we+1>>1,N[j+2+0]=N[j+1+64]=we+_e+1>>1,N[j+3+0]=N[j+2+64]=_e+Ie+1>>1,N[j+0+32]=Wr(K,Z,we),N[j+1+32]=N[j+0+96]=Wr(Z,we,_e),N[j+2+32]=N[j+1+96]=Wr(we,_e,Ie),N[j+3+32]=N[j+2+96]=Wr(_e,Ie,Fe),N[j+3+64]=Wr(Ie,Fe,Me),N[j+3+96]=Wr(Fe,Me,He)}function qu(N,j){var K=N[j-1+0],Z=N[j-1+32],we=N[j-1+64],_e=N[j-1+96];N[j+0+0]=K+Z+1>>1,N[j+2+0]=N[j+0+32]=Z+we+1>>1,N[j+2+32]=N[j+0+64]=we+_e+1>>1,N[j+1+0]=Wr(K,Z,we),N[j+3+0]=N[j+1+32]=Wr(Z,we,_e),N[j+3+32]=N[j+1+64]=Wr(we,_e,_e),N[j+3+64]=N[j+2+64]=N[j+0+96]=N[j+1+96]=N[j+2+96]=N[j+3+96]=_e}function Jf(N,j){var K=N[j-1+0],Z=N[j-1+32],we=N[j-1+64],_e=N[j-1+96],Ie=N[j-1-32],Fe=N[j+0-32],Me=N[j+1-32],He=N[j+2-32];N[j+0+0]=N[j+2+32]=K+Ie+1>>1,N[j+0+32]=N[j+2+64]=Z+K+1>>1,N[j+0+64]=N[j+2+96]=we+Z+1>>1,N[j+0+96]=_e+we+1>>1,N[j+3+0]=Wr(Fe,Me,He),N[j+2+0]=Wr(Ie,Fe,Me),N[j+1+0]=N[j+3+32]=Wr(K,Ie,Fe),N[j+1+32]=N[j+3+64]=Wr(Z,K,Ie),N[j+1+64]=N[j+3+96]=Wr(we,Z,K),N[j+1+96]=Wr(_e,we,Z)}function pc(N,j){var K;for(K=0;8>K;++K)n(N,j+32*K,N,j-32,8)}function SA(N,j){var K;for(K=0;8>K;++K)a(N,j,N[j-1],8),j+=32}function Zc(N,j,K){var Z;for(Z=0;8>Z;++Z)a(j,K+32*Z,N,8)}function Z0(N,j){var K,Z=8;for(K=0;8>K;++K)Z+=N[j+K-32]+N[j-1+32*K];Zc(Z>>4,N,j)}function _a(N,j){var K,Z=4;for(K=0;8>K;++K)Z+=N[j+K-32];Zc(Z>>3,N,j)}function em(N,j){var K,Z=4;for(K=0;8>K;++K)Z+=N[j-1+32*K];Zc(Z>>3,N,j)}function ig(N,j){Zc(128,N,j)}function eu(N,j,K){var Z=N[j-K],we=N[j+0],_e=3*(we-Z)+T3[1020+N[j-2*K]-N[j+K]],Ie=jw[112+(_e+4>>3)];N[j-K]=yc[255+Z+jw[112+(_e+3>>3)]],N[j+0]=yc[255+we-Ie]}function Zf(N,j,K,Z){var we=N[j+0],_e=N[j+K];return iu[255+N[j-2*K]-N[j-K]]>Z||iu[255+_e-we]>Z}function IA(N,j,K,Z){return 4*iu[255+N[j-K]-N[j+0]]+iu[255+N[j-2*K]-N[j+K]]<=Z}function Md(N,j,K,Z,we){var _e=N[j-3*K],Ie=N[j-2*K],Fe=N[j-K],Me=N[j+0],He=N[j+K],lt=N[j+2*K],Bt=N[j+3*K];return 4*iu[255+Fe-Me]+iu[255+Ie-He]>Z?0:iu[255+N[j-4*K]-_e]<=we&&iu[255+_e-Ie]<=we&&iu[255+Ie-Fe]<=we&&iu[255+Bt-lt]<=we&&iu[255+lt-He]<=we&&iu[255+He-Me]<=we}function Ld(N,j,K,Z){var we=2*Z+1;for(Z=0;16>Z;++Z)IA(N,j+Z,K,we)&&eu(N,j+Z,K)}function xl(N,j,K,Z){var we=2*Z+1;for(Z=0;16>Z;++Z)IA(N,j+Z*K,1,we)&&eu(N,j+Z*K,1)}function tm(N,j,K,Z){var we;for(we=3;0<we;--we)Ld(N,j+=4*K,K,Z)}function og(N,j,K,Z){var we;for(we=3;0<we;--we)xl(N,j+=4,K,Z)}function vl(N,j,K,Z,we,_e,Ie,Fe){for(_e=2*_e+1;0<we--;){if(Md(N,j,K,_e,Ie))if(Zf(N,j,K,Fe))eu(N,j,K);else{var Me=N,He=j,lt=K,Bt=Me[He-2*lt],$e=Me[He-lt],ft=Me[He+0],Nt=Me[He+lt],Ut=Me[He+2*lt],It=27*(qt=T3[1020+3*(ft-$e)+T3[1020+Bt-Nt]])+63>>7,Kt=18*qt+63>>7,qt=9*qt+63>>7;Me[He-3*lt]=yc[255+Me[He-3*lt]+qt],Me[He-2*lt]=yc[255+Bt+Kt],Me[He-lt]=yc[255+$e+It],Me[He+0]=yc[255+ft-It],Me[He+lt]=yc[255+Nt-Kt],Me[He+2*lt]=yc[255+Ut-qt]}j+=Z}}function tu(N,j,K,Z,we,_e,Ie,Fe){for(_e=2*_e+1;0<we--;){if(Md(N,j,K,_e,Ie))if(Zf(N,j,K,Fe))eu(N,j,K);else{var Me=N,He=j,lt=K,Bt=Me[He-lt],$e=Me[He+0],ft=Me[He+lt],Nt=jw[112+(4+(Ut=3*($e-Bt))>>3)],Ut=jw[112+(Ut+3>>3)],It=Nt+1>>1;Me[He-2*lt]=yc[255+Me[He-2*lt]+It],Me[He-lt]=yc[255+Bt+Ut],Me[He+0]=yc[255+$e-Nt],Me[He+lt]=yc[255+ft-It]}j+=Z}}function eh(N,j,K,Z,we,_e){vl(N,j,K,1,16,Z,we,_e)}function ru(N,j,K,Z,we,_e){vl(N,j,1,K,16,Z,we,_e)}function rm(N,j,K,Z,we,_e){var Ie;for(Ie=3;0<Ie;--Ie)tu(N,j+=4*K,K,1,16,Z,we,_e)}function U(N,j,K,Z,we,_e){var Ie;for(Ie=3;0<Ie;--Ie)tu(N,j+=4,1,K,16,Z,we,_e)}function ye(N,j,K,Z,we,_e,Ie,Fe){vl(N,j,we,1,8,_e,Ie,Fe),vl(K,Z,we,1,8,_e,Ie,Fe)}function Ve(N,j,K,Z,we,_e,Ie,Fe){vl(N,j,1,we,8,_e,Ie,Fe),vl(K,Z,1,we,8,_e,Ie,Fe)}function et(N,j,K,Z,we,_e,Ie,Fe){tu(N,j+4*we,we,1,8,_e,Ie,Fe),tu(K,Z+4*we,we,1,8,_e,Ie,Fe)}function pt(N,j,K,Z,we,_e,Ie,Fe){tu(N,j+4,1,we,8,_e,Ie,Fe),tu(K,Z+4,1,we,8,_e,Ie,Fe)}function $t(){this.ba=new ze,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ze,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dr(){this.ua=0,this.Wa=new Pe,this.vb=new Pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new D}function Xr(){this.xb=this.a=0,this.l=new Na,this.ca=new ze,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dr,this.ab=0,this.gc=i(4,Ir),this.Oc=0}function sn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Na,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bn(N,j,K,Z,we,_e,Ie){for(N=N==null?0:N[j+0],j=0;j<Ie;++j)we[_e+j]=N+K[Z+j]&255,N=we[_e+j]}function ea(N,j,K,Z,we,_e,Ie){var Fe;if(N==null)Bn(null,null,K,Z,we,_e,Ie);else for(Fe=0;Fe<Ie;++Fe)we[_e+Fe]=N[j+Fe]+K[Z+Fe]&255}function ms(N,j,K,Z,we,_e,Ie){if(N==null)Bn(null,null,K,Z,we,_e,Ie);else{var Fe,Me=N[j+0],He=Me,lt=Me;for(Fe=0;Fe<Ie;++Fe)He=lt+(Me=N[j+Fe])-He,lt=K[Z+Fe]+(-256&He?0>He?0:255:He)&255,He=Me,we[_e+Fe]=lt}}function la(N,j,K,Z){var we=j.width,_e=j.o;if(e(N!=null&&j!=null),0>K||0>=Z||K+Z>_e)return null;if(!N.Cc){if(N.ga==null){var Ie;if(N.ga=new sn,(Ie=N.ga==null)||(Ie=j.width*j.o,e(N.Gb.length==0),N.Gb=s(Ie),N.Uc=0,N.Gb==null?Ie=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=N.ga;var Fe=N.Fa,Me=N.P,He=N.qc,lt=N.mb,Bt=N.nb,$e=Me+1,ft=He-1,Nt=Ie.l;if(e(Fe!=null&&lt!=null&&j!=null),ch[0]=null,ch[1]=Bn,ch[2]=ea,ch[3]=ms,Ie.ca=lt,Ie.tb=Bt,Ie.c=j.width,Ie.i=j.height,e(0<Ie.c&&0<Ie.i),1>=He)j=0;else if(Ie.$a=3&Fe[Me+0],Ie.Z=Fe[Me+0]>>2&3,Ie.Lc=Fe[Me+0]>>4&3,Me=Fe[Me+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Me)j=0;else if(Nt.put=be,Nt.ac=ot,Nt.bc=Ge,Nt.ma=Ie,Nt.width=j.width,Nt.height=j.height,Nt.Da=j.Da,Nt.v=j.v,Nt.va=j.va,Nt.j=j.j,Nt.o=j.o,Ie.$a)e:{e(Ie.$a==1),j=gt();t:for(;;){if(j==null){j=0;break e}if(e(Ie!=null),Ie.mc=j,j.c=Ie.c,j.i=Ie.i,j.l=Ie.l,j.l.ma=Ie,j.l.width=Ie.c,j.l.height=Ie.i,j.a=0,J(j.m,Fe,$e,ft),!xt(Ie.c,Ie.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&ue(j.s)?(Ie.ic=1,Fe=j.c*j.i,j.Ta=null,j.Ua=0,j.V=s(Fe),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(Ie.ic=0,j=_t(j,Ie.c)),!j))break t;j=1;break e}Ie.mc=null,j=0}else j=ft>=Ie.c*Ie.i;Ie=!j}if(Ie)return null;N.ga.Lc!=1?N.Ga=0:Z=_e-K}e(N.ga!=null),e(K+Z<=_e);e:{if(j=(Fe=N.ga).c,_e=Fe.l.o,Fe.$a==0){if($e=N.rc,ft=N.Vc,Nt=N.Fa,Me=N.P+1+K*j,He=N.mb,lt=N.nb+K*j,e(Me<=N.P+N.qc),Fe.Z!=0)for(e(ch[Fe.Z]!=null),Ie=0;Ie<Z;++Ie)ch[Fe.Z]($e,ft,Nt,Me,He,lt,j),$e=He,ft=lt,lt+=j,Me+=j;else for(Ie=0;Ie<Z;++Ie)n(He,lt,Nt,Me,j),$e=He,ft=lt,lt+=j,Me+=j;N.rc=$e,N.Vc=ft}else{if(e(Fe.mc!=null),j=K+Z,e((Ie=Fe.mc)!=null),e(j<=Ie.i),Ie.C>=j)j=1;else if(Fe.ic||Gl(),Fe.ic){Fe=Ie.V,$e=Ie.Ba,ft=Ie.c;var Ut=Ie.i,It=(Nt=1,Me=Ie.$/ft,He=Ie.$%ft,lt=Ie.m,Bt=Ie.s,Ie.$),Kt=ft*Ut,qt=ft*j,ar=Bt.wc,er=It<qt?ne(Bt,He,Me):null;e(It<=Kt),e(j<=Ut),e(ue(Bt));t:for(;;){for(;!lt.h&&It<qt;){if(He&ar||(er=ne(Bt,He,Me)),e(er!=null),z(lt),256>(Ut=Wt(er.G[0],er.H[0],lt)))Fe[$e+It]=Ut,++It,++He>=ft&&(He=0,++Me<=j&&!(Me%16)&&Oe(Ie,Me));else{if(!(280>Ut)){Nt=0;break t}Ut=bt(Ut-256,lt);var Hr,jr=Wt(er.G[4],er.H[4],lt);if(z(lt),!(It>=(jr=Rt(ft,jr=bt(jr,lt)))&&Kt-It>=Ut)){Nt=0;break t}for(Hr=0;Hr<Ut;++Hr)Fe[$e+It+Hr]=Fe[$e+It+Hr-jr];for(It+=Ut,He+=Ut;He>=ft;)He-=ft,++Me<=j&&!(Me%16)&&Oe(Ie,Me);It<qt&&He&ar&&(er=ne(Bt,He,Me))}e(lt.h==M(lt))}Oe(Ie,Me>j?j:Me);break t}!Nt||lt.h&&It<Kt?(Nt=0,Ie.a=lt.h?5:3):Ie.$=It,j=Nt}else j=We(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,j,Ce);if(!j){Z=0;break e}}K+Z>=_e&&(N.Cc=1),Z=1}if(!Z)return null;if(N.Cc&&((Z=N.ga)!=null&&(Z.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+K*we}function Ps(N,j,K,Z,we,_e){for(;0<we--;){var Ie,Fe=N,Me=j+(K?1:0),He=N,lt=j+(K?0:3);for(Ie=0;Ie<Z;++Ie){var Bt=He[lt+4*Ie];Bt!=255&&(Bt*=32897,Fe[Me+4*Ie+0]=Fe[Me+4*Ie+0]*Bt>>23,Fe[Me+4*Ie+1]=Fe[Me+4*Ie+1]*Bt>>23,Fe[Me+4*Ie+2]=Fe[Me+4*Ie+2]*Bt>>23)}j+=_e}}function ps(N,j,K,Z,we){for(;0<Z--;){var _e;for(_e=0;_e<K;++_e){var Ie=N[j+2*_e+0],Fe=15&(He=N[j+2*_e+1]),Me=4369*Fe,He=(240&He|He>>4)*Me>>16;N[j+2*_e+0]=(240&Ie|Ie>>4)*Me>>16&240|(15&Ie|Ie<<4)*Me>>16>>4&15,N[j+2*_e+1]=240&He|Fe}j+=we}}function js(N,j,K,Z,we,_e,Ie,Fe){var Me,He,lt=255;for(He=0;He<we;++He){for(Me=0;Me<Z;++Me){var Bt=N[j+Me];_e[Ie+4*Me]=Bt,lt&=Bt}j+=K,Ie+=Fe}return lt!=255}function gs(N,j,K,Z,we){var _e;for(_e=0;_e<we;++_e)K[Z+_e]=N[j+_e]>>8}function Gl(){n1=Ps,S8=ps,I8=js,B8=gs}function nu(N,j,K){S[N]=function(Z,we,_e,Ie,Fe,Me,He,lt,Bt,$e,ft,Nt,Ut,It,Kt,qt,ar){var er,Hr=ar-1>>1,jr=Fe[Me+0]|He[lt+0]<<16,hn=Bt[$e+0]|ft[Nt+0]<<16;e(Z!=null);var Mr=3*jr+hn+131074>>2;for(j(Z[we+0],255&Mr,Mr>>16,Ut,It),_e!=null&&(Mr=3*hn+jr+131074>>2,j(_e[Ie+0],255&Mr,Mr>>16,Kt,qt)),er=1;er<=Hr;++er){var Dn=Fe[Me+er]|He[lt+er]<<16,xi=Bt[$e+er]|ft[Nt+er]<<16,mn=jr+Dn+hn+xi+524296,Lr=mn+2*(Dn+hn)>>3;Mr=Lr+jr>>1,jr=(mn=mn+2*(jr+xi)>>3)+Dn>>1,j(Z[we+2*er-1],255&Mr,Mr>>16,Ut,It+(2*er-1)*K),j(Z[we+2*er-0],255&jr,jr>>16,Ut,It+(2*er-0)*K),_e!=null&&(Mr=mn+hn>>1,jr=Lr+xi>>1,j(_e[Ie+2*er-1],255&Mr,Mr>>16,Kt,qt+(2*er-1)*K),j(_e[Ie+2*er+0],255&jr,jr>>16,Kt,qt+(2*er+0)*K)),jr=Dn,hn=xi}1&ar||(Mr=3*jr+hn+131074>>2,j(Z[we+ar-1],255&Mr,Mr>>16,Ut,It+(ar-1)*K),_e!=null&&(Mr=3*hn+jr+131074>>2,j(_e[Ie+ar-1],255&Mr,Mr>>16,Kt,qt+(ar-1)*K)))}}function au(){ou[kw]=ace,ou[Fw]=U8,ou[O8]=sce,ou[Ow]=Q8,ou[Dw]=V8,ou[P3]=H8,ou[D8]=ice,ou[j3]=U8,ou[k3]=Q8,ou[Rw]=V8,ou[F3]=H8}function _(N){return N&-16384?0>N?0:255:N>>oce}function q(N,j){return _((19077*N>>8)+(26149*j>>8)-14234)}function se(N,j,K){return _((19077*N>>8)-(6419*j>>8)-(13320*K>>8)+8708)}function De(N,j){return _((19077*N>>8)+(33050*j>>8)-17685)}function vt(N,j,K,Z,we){Z[we+0]=q(N,K),Z[we+1]=se(N,j,K),Z[we+2]=De(N,j)}function kt(N,j,K,Z,we){Z[we+0]=De(N,j),Z[we+1]=se(N,j,K),Z[we+2]=q(N,K)}function ur(N,j,K,Z,we){var _e=se(N,j,K);j=_e<<3&224|De(N,j)>>3,Z[we+0]=248&q(N,K)|_e>>5,Z[we+1]=j}function On(N,j,K,Z,we){var _e=240&De(N,j)|15;Z[we+0]=240&q(N,K)|se(N,j,K)>>4,Z[we+1]=_e}function xs(N,j,K,Z,we){Z[we+0]=255,vt(N,j,K,Z,we+1)}function Nn(N,j,K,Z,we){kt(N,j,K,Z,we),Z[we+3]=255}function zn(N,j,K,Z,we){vt(N,j,K,Z,we),Z[we+3]=255}function Oa(N,j,K){S[N]=function(Z,we,_e,Ie,Fe,Me,He,lt,Bt){for(var $e=lt+(-2&Bt)*K;lt!=$e;)j(Z[we+0],_e[Ie+0],Fe[Me+0],He,lt),j(Z[we+1],_e[Ie+0],Fe[Me+0],He,lt+K),we+=2,++Ie,++Me,lt+=2*K;1&Bt&&j(Z[we+0],_e[Ie+0],Fe[Me+0],He,lt)}}function gc(N,j,K){return K==0?N==0?j==0?6:5:j==0?4:0:K}function $o(N,j,K,Z,we){switch(N>>>30){case 3:sm(j,K,Z,we,0);break;case 2:su(j,K,Z,we);break;case 1:sa(j,K,Z,we)}}function go(N,j){var K,Z,we=j.M,_e=j.Nb,Ie=N.oc,Fe=N.pc+40,Me=N.oc,He=N.pc+584,lt=N.oc,Bt=N.pc+600;for(K=0;16>K;++K)Ie[Fe+32*K-1]=129;for(K=0;8>K;++K)Me[He+32*K-1]=129,lt[Bt+32*K-1]=129;for(0<we?Ie[Fe-1-32]=Me[He-1-32]=lt[Bt-1-32]=129:(a(Ie,Fe-32-1,127,21),a(Me,He-32-1,127,9),a(lt,Bt-32-1,127,9)),Z=0;Z<N.za;++Z){var $e=j.ya[j.aa+Z];if(0<Z){for(K=-1;16>K;++K)n(Ie,Fe+32*K-4,Ie,Fe+32*K+12,4);for(K=-1;8>K;++K)n(Me,He+32*K-4,Me,He+32*K+4,4),n(lt,Bt+32*K-4,lt,Bt+32*K+4,4)}var ft=N.Gd,Nt=N.Hd+Z,Ut=$e.ad,It=$e.Hc;if(0<we&&(n(Ie,Fe-32,ft[Nt].y,0,16),n(Me,He-32,ft[Nt].f,0,8),n(lt,Bt-32,ft[Nt].ea,0,8)),$e.Za){var Kt=Ie,qt=Fe-32+16;for(0<we&&(Z>=N.za-1?a(Kt,qt,ft[Nt].y[15],4):n(Kt,qt,ft[Nt+1].y,0,4)),K=0;4>K;K++)Kt[qt+128+K]=Kt[qt+256+K]=Kt[qt+384+K]=Kt[qt+0+K];for(K=0;16>K;++K,It<<=2)Kt=Ie,qt=Fe+K8[K],Wu[$e.Ob[K]](Kt,qt),$o(It,Ut,16*+K,Kt,qt)}else if(Kt=gc(Z,we,$e.Ob[0]),lh[Kt](Ie,Fe),It!=0)for(K=0;16>K;++K,It<<=2)$o(It,Ut,16*+K,Ie,Fe+K8[K]);for(K=$e.Gc,Kt=gc(Z,we,$e.Dd),PA[Kt](Me,He),PA[Kt](lt,Bt),It=Ut,Kt=Me,qt=He,255&($e=0|K)&&(170&$e?Vd(It,256,Kt,qt):Ba(It,256,Kt,qt)),$e=lt,It=Bt,255&(K>>=8)&&(170&K?Vd(Ut,320,$e,It):Ba(Ut,320,$e,It)),we<N.Ub-1&&(n(ft[Nt].y,0,Ie,Fe+480,16),n(ft[Nt].f,0,Me,He+224,8),n(ft[Nt].ea,0,lt,Bt+224,8)),K=8*_e*N.B,ft=N.sa,Nt=N.ta+16*Z+16*_e*N.R,Ut=N.qa,$e=N.ra+8*Z+K,It=N.Ha,Kt=N.Ia+8*Z+K,K=0;16>K;++K)n(ft,Nt+K*N.R,Ie,Fe+32*K,16);for(K=0;8>K;++K)n(Ut,$e+K*N.B,Me,He+32*K,8),n(It,Kt+K*N.B,lt,Bt+32*K,8)}}function zu(N,j,K,Z,we,_e,Ie,Fe,Me){var He=[0],lt=[0],Bt=0,$e=Me!=null?Me.kd:0,ft=Me??new Xt;if(N==null||12>K)return 7;ft.data=N,ft.w=j,ft.ha=K,j=[j],K=[K],ft.gb=[ft.gb];e:{var Nt=j,Ut=K,It=ft.gb;if(e(N!=null),e(Ut!=null),e(It!=null),It[0]=0,12<=Ut[0]&&!r(N,Nt[0],"RIFF")){if(r(N,Nt[0]+8,"WEBP")){It=3;break e}var Kt=Y(N,Nt[0]+4);if(12>Kt||4294967286<Kt){It=3;break e}if($e&&Kt>Ut[0]-8){It=7;break e}It[0]=Kt,Nt[0]+=12,Ut[0]-=12}It=0}if(It!=0)return It;for(Kt=0<ft.gb[0],K=K[0];;){e:{var qt=N;Ut=j,It=K;var ar=He,er=lt,Hr=Nt=[0];if((Mr=Bt=[Bt])[0]=0,8>It[0])It=7;else{if(!r(qt,Ut[0],"VP8X")){if(Y(qt,Ut[0]+4)!=10){It=3;break e}if(18>It[0]){It=7;break e}var jr=Y(qt,Ut[0]+8),hn=1+xe(qt,Ut[0]+12);if(2147483648<=hn*(qt=1+xe(qt,Ut[0]+15))){It=3;break e}Hr!=null&&(Hr[0]=jr),ar!=null&&(ar[0]=hn),er!=null&&(er[0]=qt),Ut[0]+=18,It[0]-=18,Mr[0]=1}It=0}}if(Bt=Bt[0],Nt=Nt[0],It!=0)return It;if(Ut=!!(2&Nt),!Kt&&Bt)return 3;if(_e!=null&&(_e[0]=!!(16&Nt)),Ie!=null&&(Ie[0]=Ut),Fe!=null&&(Fe[0]=0),Ie=He[0],Nt=lt[0],Bt&&Ut&&Me==null){It=0;break}if(4>K){It=7;break}if(Kt&&Bt||!Kt&&!Bt&&!r(N,j[0],"ALPH")){K=[K],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{jr=N,It=j,Kt=K;var Mr=ft.gb;ar=ft.na,er=ft.P,Hr=ft.Sa,hn=22,e(jr!=null),e(Kt!=null),qt=It[0];var Dn=Kt[0];for(e(ar!=null),e(Hr!=null),ar[0]=null,er[0]=null,Hr[0]=0;;){if(It[0]=qt,Kt[0]=Dn,8>Dn){It=7;break e}var xi=Y(jr,qt+4);if(4294967286<xi){It=3;break e}var mn=8+xi+1&-2;if(hn+=mn,0<Mr&&hn>Mr){It=3;break e}if(!r(jr,qt,"VP8 ")||!r(jr,qt,"VP8L")){It=0;break e}if(Dn[0]<mn){It=7;break e}r(jr,qt,"ALPH")||(ar[0]=jr,er[0]=qt+8,Hr[0]=xi),qt+=mn,Dn-=mn}}if(K=K[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],It!=0)break}K=[K],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(Mr=N,It=j,Kt=K,ar=ft.gb[0],er=ft.Ja,Hr=ft.xa,jr=It[0],qt=!r(Mr,jr,"VP8 "),hn=!r(Mr,jr,"VP8L"),e(Mr!=null),e(Kt!=null),e(er!=null),e(Hr!=null),8>Kt[0])It=7;else{if(qt||hn){if(Mr=Y(Mr,jr+4),12<=ar&&Mr>ar-12){It=3;break e}if($e&&Mr>Kt[0]-8){It=7;break e}er[0]=Mr,It[0]+=8,Kt[0]-=8,Hr[0]=hn}else Hr[0]=5<=Kt[0]&&Mr[jr+0]==47&&!(Mr[jr+4]>>5),er[0]=Kt[0];It=0}if(K=K[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],j=j[0],It!=0)break;if(4294967286<ft.Ja)return 3;if(Fe==null||Ut||(Fe[0]=ft.xa?2:1),Ie=[Ie],Nt=[Nt],ft.xa){if(5>K){It=7;break}Fe=Ie,$e=Nt,Ut=_e,N==null||5>K?N=0:5<=K&&N[j+0]==47&&!(N[j+4]>>5)?(Kt=[0],Mr=[0],ar=[0],J(er=new F,N,j,K),ut(er,Kt,Mr,ar)?(Fe!=null&&(Fe[0]=Kt[0]),$e!=null&&($e[0]=Mr[0]),Ut!=null&&(Ut[0]=ar[0]),N=1):N=0):N=0}else{if(10>K){It=7;break}Fe=Nt,N==null||10>K||!ct(N,j+3,K-3)?N=0:($e=N[j+0]|N[j+1]<<8|N[j+2]<<16,Ut=16383&(N[j+7]<<8|N[j+6]),N=16383&(N[j+9]<<8|N[j+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=ft.Ja||!Ut||!N?N=0:(Ie&&(Ie[0]=Ut),Fe&&(Fe[0]=N),N=1))}if(!N||(Ie=Ie[0],Nt=Nt[0],Bt&&(He[0]!=Ie||lt[0]!=Nt)))return 3;Me!=null&&(Me[0]=ft,Me.offset=j-Me.w,e(4294967286>j-Me.w),e(Me.offset==Me.ha-K));break}return It==0||It==7&&Bt&&Me==null?(_e!=null&&(_e[0]|=ft.na!=null&&0<ft.na.length),Z!=null&&(Z[0]=Ie),we!=null&&(we[0]=Nt),0):It}function Wv(N,j,K){var Z=j.width,we=j.height,_e=0,Ie=0,Fe=Z,Me=we;if(j.Da=N!=null&&0<N.Da,j.Da&&(Fe=N.cd,Me=N.bd,_e=N.v,Ie=N.j,11>K||(_e&=-2,Ie&=-2),0>_e||0>Ie||0>=Fe||0>=Me||_e+Fe>Z||Ie+Me>we))return 0;if(j.v=_e,j.j=Ie,j.va=_e+Fe,j.o=Ie+Me,j.U=Fe,j.T=Me,j.da=N!=null&&0<N.da,j.da){if(!Le(Fe,Me,K=[N.ib],_e=[N.hb]))return 0;j.ib=K[0],j.hb=_e[0]}return j.ob=N!=null&&N.ob,j.Kb=N==null||!N.Sd,j.da&&(j.ob=j.ib<3*Z/4&&j.hb<3*we/4,j.Kb=0),1}function Xv(N){if(N==null)return 2;if(11>N.S){var j=N.f.RGBA;j.fb+=(N.height-1)*j.A,j.A=-j.A}else j=N.f.kb,N=N.height,j.O+=(N-1)*j.fa,j.fa=-j.fa,j.N+=(N-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(N-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(N-1)*j.lb,j.lb=-j.lb);return 0}function th(N,j,K,Z){if(Z==null||0>=N||0>=j)return 2;if(K!=null){if(K.Da){var we=K.cd,_e=K.bd,Ie=-2&K.v,Fe=-2&K.j;if(0>Ie||0>Fe||0>=we||0>=_e||Ie+we>N||Fe+_e>j)return 2;N=we,j=_e}if(K.da){if(!Le(N,j,we=[K.ib],_e=[K.hb]))return 2;N=we[0],j=_e[0]}}Z.width=N,Z.height=j;e:{var Me=Z.width,He=Z.height;if(N=Z.S,0>=Me||0>=He||!(N>=kw&&13>N))N=2;else{if(0>=Z.Rd&&Z.sd==null){Ie=_e=we=j=0;var lt=(Fe=Me*G8[N])*He;if(11>N||(_e=(He+1)/2*(j=(Me+1)/2),N==12&&(Ie=(we=Me)*He)),(He=s(lt+2*_e+Ie))==null){N=1;break e}Z.sd=He,11>N?((Me=Z.f.RGBA).eb=He,Me.fb=0,Me.A=Fe,Me.size=lt):((Me=Z.f.kb).y=He,Me.O=0,Me.fa=Fe,Me.Fd=lt,Me.f=He,Me.N=0+lt,Me.Ab=j,Me.Cd=_e,Me.ea=He,Me.W=0+lt+_e,Me.Db=j,Me.Ed=_e,N==12&&(Me.F=He,Me.J=0+lt+2*_e),Me.Tc=Ie,Me.lb=we)}if(j=1,we=Z.S,_e=Z.width,Ie=Z.height,we>=kw&&13>we)if(11>we)N=Z.f.RGBA,j&=(Fe=Math.abs(N.A))*(Ie-1)+_e<=N.size,j&=Fe>=_e*G8[we],j&=N.eb!=null;else{N=Z.f.kb,Fe=(_e+1)/2,lt=(Ie+1)/2,Me=Math.abs(N.fa),He=Math.abs(N.Ab);var Bt=Math.abs(N.Db),$e=Math.abs(N.lb),ft=$e*(Ie-1)+_e;j&=Me*(Ie-1)+_e<=N.Fd,j&=He*(lt-1)+Fe<=N.Cd,j=(j&=Bt*(lt-1)+Fe<=N.Ed)&Me>=_e&He>=Fe&Bt>=Fe,j&=N.y!=null,j&=N.f!=null,j&=N.ea!=null,we==12&&(j&=$e>=_e,j&=ft<=N.Tc,j&=N.F!=null)}else j=0;N=j?0:2}}return N!=0||K!=null&&K.fd&&(N=Xv(Z)),N}var nm=64,xc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vc=24,rh=32,BA=8,nh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(N){return N},S.Predictor2=function(N,j,K){return j[K+0]},S.Predictor3=function(N,j,K){return j[K+1]},S.Predictor4=function(N,j,K){return j[K-1]},S.Predictor5=function(N,j,K){return yt(yt(N,j[K+1]),j[K+0])},S.Predictor6=function(N,j,K){return yt(N,j[K-1])},S.Predictor7=function(N,j,K){return yt(N,j[K+0])},S.Predictor8=function(N,j,K){return yt(j[K-1],j[K+0])},S.Predictor9=function(N,j,K){return yt(j[K+0],j[K+1])},S.Predictor10=function(N,j,K){return yt(yt(N,j[K-1]),yt(j[K+0],j[K+1]))},S.Predictor11=function(N,j,K){var Z=j[K+0];return 0>=Pt(Z>>24&255,N>>24&255,(j=j[K-1])>>24&255)+Pt(Z>>16&255,N>>16&255,j>>16&255)+Pt(Z>>8&255,N>>8&255,j>>8&255)+Pt(255&Z,255&N,255&j)?Z:N},S.Predictor12=function(N,j,K){var Z=j[K+0];return(Ct((N>>24&255)+(Z>>24&255)-((j=j[K-1])>>24&255))<<24|Ct((N>>16&255)+(Z>>16&255)-(j>>16&255))<<16|Ct((N>>8&255)+(Z>>8&255)-(j>>8&255))<<8|Ct((255&N)+(255&Z)-(255&j)))>>>0},S.Predictor13=function(N,j,K){var Z=j[K-1];return(Ot((N=yt(N,j[K+0]))>>24&255,Z>>24&255)<<24|Ot(N>>16&255,Z>>16&255)<<16|Ot(N>>8&255,Z>>8&255)<<8|Ot(255&N,255&Z))>>>0};var Yv=S.PredictorAdd0;S.PredictorAdd1=fe,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var lg=S.PredictorAdd2;oe("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),oe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Vs,Tw=S.ColorIndexInverseTransform,Ud=S.MapARGB,Qd=S.VP8LColorIndexInverseTransformAlpha,Jv=S.MapAlpha,Zv=S.VP8LPredictorsAdd=[];Zv.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var e1,t1,ah,sh,ih,am,oh,sm,su,Vd,sa,Ba,Hs,gi,TA,r1,cg,Pw,b8,w8,N8,_8,C8,E8,n1,S8,I8,B8,T8=s(511),P8=s(2041),j8=s(225),k8=s(767),F8=0,T3=P8,jw=j8,yc=k8,iu=T8,kw=0,Fw=1,O8=2,Ow=3,Dw=4,P3=5,D8=6,j3=7,k3=8,Rw=9,F3=10,$le=[2,3,7],Kle=[3,3,11],R8=[280,256,256,256,40],Gle=[0,1,1,1,0],qle=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zle=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Wle=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xle=8,O3=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],D3=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],a1=null,Yle=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jle=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],M8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zle=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ece=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tce=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rce=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lh=[],Wu=[],PA=[],nce=1,L8=2,ch=[],ou=[];nu("UpsampleRgbLinePair",vt,3),nu("UpsampleBgrLinePair",kt,3),nu("UpsampleRgbaLinePair",zn,4),nu("UpsampleBgraLinePair",Nn,4),nu("UpsampleArgbLinePair",xs,4),nu("UpsampleRgba4444LinePair",On,2),nu("UpsampleRgb565LinePair",ur,2);var ace=S.UpsampleRgbLinePair,sce=S.UpsampleBgrLinePair,U8=S.UpsampleRgbaLinePair,Q8=S.UpsampleBgraLinePair,V8=S.UpsampleArgbLinePair,H8=S.UpsampleRgba4444LinePair,ice=S.UpsampleRgb565LinePair,Mw=16,Lw=1<<Mw-1,s1=-227,R3=482,oce=6,$8=0,lce=s(256),cce=s(256),uce=s(256),dce=s(256),Ace=s(R3-s1),fce=s(R3-s1);Oa("YuvToRgbRow",vt,3),Oa("YuvToBgrRow",kt,3),Oa("YuvToRgbaRow",zn,4),Oa("YuvToBgraRow",Nn,4),Oa("YuvToArgbRow",xs,4),Oa("YuvToRgba4444Row",On,2),Oa("YuvToRgb565Row",ur,2);var K8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Uw=[0,2,8],hce=[8,7,6,4,4,2,2,2,1,1,1,1],mce=1;this.WebPDecodeRGBA=function(N,j,K,Z,we){var _e=Fw,Ie=new $t,Fe=new ze;Ie.ba=Fe,Fe.S=_e,Fe.width=[Fe.width],Fe.height=[Fe.height];var Me=Fe.width,He=Fe.height,lt=new Ye;if(lt==null||N==null)var Bt=2;else e(lt!=null),Bt=zu(N,j,K,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(Bt!=0?Me=0:(Me!=null&&(Me[0]=lt.width[0]),He!=null&&(He[0]=lt.height[0]),Me=1),Me){Fe.width=Fe.width[0],Fe.height=Fe.height[0],Z!=null&&(Z[0]=Fe.width),we!=null&&(we[0]=Fe.height);e:{if(Z=new Na,(we=new Xt).data=N,we.w=j,we.ha=K,we.kd=1,j=[0],e(we!=null),((N=zu(we.data,we.w,we.ha,null,null,null,j,null,we))==0||N==7)&&j[0]&&(N=4),(j=N)==0){if(e(Ie!=null),Z.data=we.data,Z.w=we.w+we.offset,Z.ha=we.ha-we.offset,Z.put=be,Z.ac=ot,Z.bc=Ge,Z.ma=Ie,we.xa){if((N=gt())==null){Ie=1;break e}if(function($e,ft){var Nt=[0],Ut=[0],It=[0];t:for(;;){if($e==null)return 0;if(ft==null)return $e.a=2,0;if($e.l=ft,$e.a=0,J($e.m,ft.data,ft.w,ft.ha),!ut($e.m,Nt,Ut,It)){$e.a=3;break t}if($e.xb=L8,ft.width=Nt[0],ft.height=Ut[0],!xt(Nt[0],Ut[0],1,$e,null))break t;return 1}return e($e.a!=0),0}(N,Z)){if(Z=(j=th(Z.width,Z.height,Ie.Oa,Ie.ba))==0){t:{Z=N;r:for(;;){if(Z==null){Z=0;break t}if(e(Z.s.yc!=null),e(Z.s.Ya!=null),e(0<Z.s.Wb),e((K=Z.l)!=null),e((we=K.ma)!=null),Z.xb!=0){if(Z.ca=we.ba,Z.tb=we.tb,e(Z.ca!=null),!Wv(we.Oa,K,Ow)){Z.a=2;break r}if(!_t(Z,K.width)||K.da)break r;if((K.da||Ae(Z.ca.S))&&Gl(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&Gl()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!W(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break r}Z.xb=0}if(!We(Z,Z.V,Z.Ba,Z.c,Z.i,K.o,me))break r;we.Dc=Z.Ma,Z=1;break t}e(Z.a!=0),Z=0}Z=!Z}Z&&(j=N.a)}else j=N.a}else{if((N=new Ku)==null){Ie=1;break e}if(N.Fa=we.na,N.P=we.P,N.qc=we.Sa,xr(N,Z)){if((j=th(Z.width,Z.height,Ie.Oa,Ie.ba))==0){if(N.Aa=0,K=Ie.Oa,e((we=N)!=null),K!=null){if(0<(Me=0>(Me=K.Md)?0:100<Me?255:255*Me/100)){for(He=lt=0;4>He;++He)12>(Bt=we.pb[He]).lc&&(Bt.ia=Me*hce[0>Bt.lc?0:Bt.lc]>>3),lt|=Bt.ia;lt&&(alert("todo:VP8InitRandom"),we.ia=1)}we.Ga=K.Id,100<we.Ga?we.Ga=100:0>we.Ga&&(we.Ga=0)}(function($e,ft){if($e==null)return 0;if(ft==null)return Rn($e,2,"NULL VP8Io parameter in VP8Decode().");if(!$e.cb&&!xr($e,ft))return 0;if(e($e.cb),ft.ac==null||ft.ac(ft)){ft.ob&&($e.L=0);var Nt=Uw[$e.L];if($e.L==2?($e.yb=0,$e.zb=0):($e.yb=ft.v-Nt>>4,$e.zb=ft.j-Nt>>4,0>$e.yb&&($e.yb=0),0>$e.zb&&($e.zb=0)),$e.Va=ft.o+15+Nt>>4,$e.Hb=ft.va+15+Nt>>4,$e.Hb>$e.za&&($e.Hb=$e.za),$e.Va>$e.Ub&&($e.Va=$e.Ub),0<$e.L){var Ut=$e.ed;for(Nt=0;4>Nt;++Nt){var It;if($e.Qa.Cb){var Kt=$e.Qa.Lb[Nt];$e.Qa.Fb||(Kt+=Ut.Tb)}else Kt=Ut.Tb;for(It=0;1>=It;++It){var qt=$e.gd[Nt][It],ar=Kt;if(Ut.Pc&&(ar+=Ut.vd[0],It&&(ar+=Ut.od[0])),0<(ar=0>ar?0:63<ar?63:ar)){var er=ar;0<Ut.wb&&(er=4<Ut.wb?er>>2:er>>1)>9-Ut.wb&&(er=9-Ut.wb),1>er&&(er=1),qt.dd=er,qt.tc=2*ar+er,qt.ld=40<=ar?2:15<=ar?1:0}else qt.tc=0;qt.La=It}}}Nt=0}else Rn($e,6,"Frame setup failed"),Nt=$e.a;if(Nt=Nt==0){if(Nt){$e.$c=0,0<$e.Aa||($e.Ic=mce);t:{Nt=$e.Ic,Ut=4*(er=$e.za);var Hr=32*er,jr=er+1,hn=0<$e.L?er*(0<$e.Aa?2:1):0,Mr=($e.Aa==2?2:1)*er;if((qt=Ut+832+(It=3*(16*Nt+Uw[$e.L])/2*Hr)+(Kt=$e.Fa!=null&&0<$e.Fa.length?$e.Kc.c*$e.Kc.i:0))!=qt)Nt=0;else{if(qt>$e.Vb){if($e.Vb=0,$e.Ec=s(qt),$e.Fc=0,$e.Ec==null){Nt=Rn($e,1,"no memory during frame initialization.");break t}$e.Vb=qt}qt=$e.Ec,ar=$e.Fc,$e.Ac=qt,$e.Bc=ar,ar+=Ut,$e.Gd=i(Hr,Or),$e.Hd=0,$e.rb=i(jr+1,Vt),$e.sb=1,$e.wa=hn?i(hn,Ft):null,$e.Y=0,$e.D.Nb=0,$e.D.wa=$e.wa,$e.D.Y=$e.Y,0<$e.Aa&&($e.D.Y+=er),e(!0),$e.oc=qt,$e.pc=ar,ar+=832,$e.ya=i(Mr,Ht),$e.aa=0,$e.D.ya=$e.ya,$e.D.aa=$e.aa,$e.Aa==2&&($e.D.aa+=er),$e.R=16*er,$e.B=8*er,er=(Hr=Uw[$e.L])*$e.R,Hr=Hr/2*$e.B,$e.sa=qt,$e.ta=ar+er,$e.qa=$e.sa,$e.ra=$e.ta+16*Nt*$e.R+Hr,$e.Ha=$e.qa,$e.Ia=$e.ra+8*Nt*$e.B+Hr,$e.$c=0,ar+=It,$e.mb=Kt?qt:null,$e.nb=Kt?ar:null,e(ar+Kt<=$e.Fc+$e.Vb),Ar($e),a($e.Ac,$e.Bc,0,Ut),Nt=1}}if(Nt){if(ft.ka=0,ft.y=$e.sa,ft.O=$e.ta,ft.f=$e.qa,ft.N=$e.ra,ft.ea=$e.Ha,ft.Vd=$e.Ia,ft.fa=$e.R,ft.Rc=$e.B,ft.F=null,ft.J=0,!F8){for(Nt=-255;255>=Nt;++Nt)T8[255+Nt]=0>Nt?-Nt:Nt;for(Nt=-1020;1020>=Nt;++Nt)P8[1020+Nt]=-128>Nt?-128:127<Nt?127:Nt;for(Nt=-112;112>=Nt;++Nt)j8[112+Nt]=-16>Nt?-16:15<Nt?15:Nt;for(Nt=-255;510>=Nt;++Nt)k8[255+Nt]=0>Nt?0:255<Nt?255:Nt;F8=1}oh=pi,sm=gn,Vd=an,sa=Ho,Ba=si,su=Vr,Hs=eh,gi=ru,TA=ye,r1=Ve,cg=rm,Pw=U,b8=et,w8=pt,N8=Ld,_8=xl,C8=tm,E8=og,Wu[0]=qv,Wu[1]=EA,Wu[2]=Kv,Wu[3]=Gv,Wu[4]=Ki,Wu[5]=zv,Wu[6]=Gu,Wu[7]=Yf,Wu[8]=Jf,Wu[9]=qu,lh[0]=Jc,lh[1]=J0,lh[2]=Dd,lh[3]=ag,lh[4]=Rd,lh[5]=Xf,lh[6]=sg,PA[0]=Z0,PA[1]=Wf,PA[2]=pc,PA[3]=SA,PA[4]=em,PA[5]=_a,PA[6]=ig,Nt=1}else Nt=0}Nt&&(Nt=function(Dn,xi){for(Dn.M=0;Dn.M<Dn.Va;++Dn.M){var mn,Lr=Dn.Jc[Dn.M&Dn.Xb],yr=Dn.m,$s=Dn;for(mn=0;mn<$s.za;++mn){var dn=yr,Mn=$s,$a=Mn.Ac,xo=Mn.Bc+4*mn,yl=Mn.zc,ks=Mn.ya[Mn.aa+mn];if(Mn.Qa.Bb?ks.$b=ee(dn,Mn.Pa.jb[0])?2+ee(dn,Mn.Pa.jb[2]):ee(dn,Mn.Pa.jb[1]):ks.$b=0,Mn.kc&&(ks.Ad=ee(dn,Mn.Bd)),ks.Za=!ee(dn,145)+0,ks.Za){var Ko=ks.Ob,bl=0;for(Mn=0;4>Mn;++Mn){var vi,Vn=yl[0+Mn];for(vi=0;4>vi;++vi){Vn=ece[$a[xo+vi]][Vn];for(var ca=M8[ee(dn,Vn[0])];0<ca;)ca=M8[2*ca+ee(dn,Vn[ca])];Vn=-ca,$a[xo+vi]=Vn}n(Ko,bl,$a,xo,4),bl+=4,yl[0+Mn]=Vn}}else Vn=ee(dn,156)?ee(dn,128)?1:3:ee(dn,163)?2:0,ks.Ob[0]=Vn,a($a,xo,Vn,4),a(yl,0,Vn,4);ks.Dd=ee(dn,142)?ee(dn,114)?ee(dn,183)?1:3:2:0}if($s.m.Ka)return Rn(Dn,7,"Premature end-of-partition0 encountered.");for(;Dn.ja<Dn.za;++Dn.ja){if($s=Lr,dn=(yr=Dn).rb[yr.sb-1],$a=yr.rb[yr.sb+yr.ja],mn=yr.ya[yr.aa+yr.ja],xo=yr.kc?mn.Ad:0)dn.la=$a.la=0,mn.Za||(dn.Na=$a.Na=0),mn.Hc=0,mn.Gc=0,mn.ia=0;else{var Fs,ua;if(dn=$a,$a=$s,xo=yr.Pa.Xc,yl=yr.ya[yr.aa+yr.ja],ks=yr.pb[yl.$b],Mn=yl.ad,Ko=0,bl=yr.rb[yr.sb-1],Vn=vi=0,a(Mn,Ko,0,384),yl.Za)var vo=0,Xu=xo[3];else{ca=s(16);var Ks=dn.Na+bl.Na;if(Ks=a1($a,xo[1],Ks,ks.Eb,0,ca,0),dn.Na=bl.Na=(0<Ks)+0,1<Ks)oh(ca,0,Mn,Ko);else{var ql=ca[0]+3>>3;for(ca=0;256>ca;ca+=16)Mn[Ko+ca]=ql}vo=1,Xu=xo[0]}var Ta=15&dn.la,yi=15&bl.la;for(ca=0;4>ca;++ca){var bc=1&yi;for(ql=ua=0;4>ql;++ql)Ta=Ta>>1|(bc=(Ks=a1($a,Xu,Ks=bc+(1&Ta),ks.Sc,vo,Mn,Ko))>vo)<<7,ua=ua<<2|(3<Ks?3:1<Ks?2:Mn[Ko+0]!=0),Ko+=16;Ta>>=4,yi=yi>>1|bc<<7,vi=(vi<<8|ua)>>>0}for(Xu=Ta,vo=yi>>4,Fs=0;4>Fs;Fs+=2){for(ua=0,Ta=dn.la>>4+Fs,yi=bl.la>>4+Fs,ca=0;2>ca;++ca){for(bc=1&yi,ql=0;2>ql;++ql)Ks=bc+(1&Ta),Ta=Ta>>1|(bc=0<(Ks=a1($a,xo[2],Ks,ks.Qc,0,Mn,Ko)))<<3,ua=ua<<2|(3<Ks?3:1<Ks?2:Mn[Ko+0]!=0),Ko+=16;Ta>>=2,yi=yi>>1|bc<<5}Vn|=ua<<4*Fs,Xu|=Ta<<4<<Fs,vo|=(240&yi)<<Fs}dn.la=Xu,bl.la=vo,yl.Hc=vi,yl.Gc=Vn,yl.ia=43690&Vn?0:ks.ia,xo=!(vi|Vn)}if(0<yr.L&&(yr.wa[yr.Y+yr.ja]=yr.gd[mn.$b][mn.Za],yr.wa[yr.Y+yr.ja].La|=!xo),$s.Ka)return Rn(Dn,7,"Premature end-of-file encountered.")}if(Ar(Dn),yr=xi,$s=1,mn=(Lr=Dn).D,dn=0<Lr.L&&Lr.M>=Lr.zb&&Lr.M<=Lr.Va,Lr.Aa==0)t:{if(mn.M=Lr.M,mn.uc=dn,go(Lr,mn),$s=1,mn=(ua=Lr.D).Nb,dn=(Vn=Uw[Lr.L])*Lr.R,$a=Vn/2*Lr.B,ca=16*mn*Lr.R,ql=8*mn*Lr.B,xo=Lr.sa,yl=Lr.ta-dn+ca,ks=Lr.qa,Mn=Lr.ra-$a+ql,Ko=Lr.Ha,bl=Lr.Ia-$a+ql,yi=(Ta=ua.M)==0,vi=Ta>=Lr.Va-1,Lr.Aa==2&&go(Lr,ua),ua.uc)for(bc=(Ks=Lr).D.M,e(Ks.D.uc),ua=Ks.yb;ua<Ks.Hb;++ua){vo=ua,Xu=bc;var wl=(wc=(yo=Ks).D).Nb;Fs=yo.R;var wc=wc.wa[wc.Y+vo],Nc=yo.sa,zl=yo.ta+16*wl*Fs+16*vo,_c=wc.dd,Da=wc.tc;if(Da!=0)if(e(3<=Da),yo.L==1)0<vo&&_8(Nc,zl,Fs,Da+4),wc.La&&E8(Nc,zl,Fs,Da),0<Xu&&N8(Nc,zl,Fs,Da+4),wc.La&&C8(Nc,zl,Fs,Da);else{var Cc=yo.B,Yu=yo.qa,im=yo.ra+8*wl*Cc+8*vo,jA=yo.Ha,yo=yo.Ia+8*wl*Cc+8*vo;wl=wc.ld,0<vo&&(gi(Nc,zl,Fs,Da+4,_c,wl),r1(Yu,im,jA,yo,Cc,Da+4,_c,wl)),wc.La&&(Pw(Nc,zl,Fs,Da,_c,wl),w8(Yu,im,jA,yo,Cc,Da,_c,wl)),0<Xu&&(Hs(Nc,zl,Fs,Da+4,_c,wl),TA(Yu,im,jA,yo,Cc,Da+4,_c,wl)),wc.La&&(cg(Nc,zl,Fs,Da,_c,wl),b8(Yu,im,jA,yo,Cc,Da,_c,wl))}}if(Lr.ia&&alert("todo:DitherRow"),yr.put!=null){if(ua=16*Ta,Ta=16*(Ta+1),yi?(yr.y=Lr.sa,yr.O=Lr.ta+ca,yr.f=Lr.qa,yr.N=Lr.ra+ql,yr.ea=Lr.Ha,yr.W=Lr.Ia+ql):(ua-=Vn,yr.y=xo,yr.O=yl,yr.f=ks,yr.N=Mn,yr.ea=Ko,yr.W=bl),vi||(Ta-=Vn),Ta>yr.o&&(Ta=yr.o),yr.F=null,yr.J=null,Lr.Fa!=null&&0<Lr.Fa.length&&ua<Ta&&(yr.J=la(Lr,yr,ua,Ta-ua),yr.F=Lr.mb,yr.F==null&&yr.F.length==0)){$s=Rn(Lr,3,"Could not decode alpha data.");break t}ua<yr.j&&(Vn=yr.j-ua,ua=yr.j,e(!(1&Vn)),yr.O+=Lr.R*Vn,yr.N+=Lr.B*(Vn>>1),yr.W+=Lr.B*(Vn>>1),yr.F!=null&&(yr.J+=yr.width*Vn)),ua<Ta&&(yr.O+=yr.v,yr.N+=yr.v>>1,yr.W+=yr.v>>1,yr.F!=null&&(yr.J+=yr.v),yr.ka=ua-yr.j,yr.U=yr.va-yr.v,yr.T=Ta-ua,$s=yr.put(yr))}mn+1!=Lr.Ic||vi||(n(Lr.sa,Lr.ta-dn,xo,yl+16*Lr.R,dn),n(Lr.qa,Lr.ra-$a,ks,Mn+8*Lr.B,$a),n(Lr.Ha,Lr.Ia-$a,Ko,bl+8*Lr.B,$a))}if(!$s)return Rn(Dn,6,"Output aborted.")}return 1}($e,ft)),ft.bc!=null&&ft.bc(ft),Nt&=1}return Nt?($e.cb=0,Nt):0})(N,Z)||(j=N.a)}}else j=N.a}j==0&&Ie.Oa!=null&&Ie.Oa.fd&&(j=Xv(Ie.ba))}Ie=j}_e=Ie!=0?null:11>_e?Fe.f.RGBA.eb:Fe.f.kb.y}else _e=null;return _e};var G8=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,O){for(var B="",P=0;P<4;P++)B+=String.fromCharCode(S[O++]);return B}function d(S,O){return S[O+0]|S[O+1]<<8}function A(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16)>>>0}function h(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16|S[O+3]<<24)>>>0}new c;var f=[0],m=[0],p=[],g=new c,x=t,y=function(S,O){var B={},P=0,D=!1,X=0,de=0;if(B.frames=[],!function(k,F){for(var H=0;H<4;H++)if(k[F+H]!="RIFF".charCodeAt(H))return!0;return!1}(S,O)){for(h(S,O+=4),O+=8;O<S.length;){var re=u(S,O),ie=h(S,O+=4);O+=4;var ce=ie+(1&ie);switch(re){case"VP8 ":case"VP8L":B.frames[P]===void 0&&(B.frames[P]={}),(Se=B.frames[P]).src_off=D?de:O-8,Se.src_size=X+ie+8,P++,D&&(D=!1,X=0,de=0);break;case"VP8X":(Se=B.header={}).feature_flags=S[O];var J=O+4;Se.canvas_width=1+A(S,J),J+=3,Se.canvas_height=1+A(S,J),J+=3;break;case"ALPH":D=!0,X=ce+8,de=O-8;break;case"ANIM":(Se=B.header).bgcolor=h(S,O),J=O+4,Se.loop_count=d(S,J),J+=2;break;case"ANMF":var pe,Se;(Se=B.frames[P]={}).offset_x=2*A(S,O),O+=3,Se.offset_y=2*A(S,O),O+=3,Se.width=1+A(S,O),O+=3,Se.height=1+A(S,O),O+=3,Se.duration=A(S,O),O+=3,pe=S[O++],Se.dispose=1&pe,Se.blend=pe>>1&1}re!="ANMF"&&(O+=ce)}return B}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,f=[b.canvas_height],m=[b.canvas_width];for(var I=0;I<w.length&&w[I].blend!=0;I++);}var T=w[0],C=g.WebPDecodeRGBA(x,T.src_off,T.src_size,m,f);T.rgba=C,T.imgwidth=m[0],T.imgheight=f[0];for(var E=0;E<m[0]*f[0]*4;E++)p[E]=C[E];return this.width=m,this.height=f,this.data=p,this}(function(t){var e,r,n,a,s,i,l,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new i,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new i,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new A(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var A=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=k;Object.defineProperty(this,"pdf",{get:function(){return F}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(W){H=!!W}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(W){M=!!W}});var L=0;Object.defineProperty(this,"posX",{get:function(){return L},set:function(W){isNaN(W)||(L=W)}});var z=0;Object.defineProperty(this,"posY",{get:function(){return z},set:function(W){isNaN(W)||(z=W)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(W){var le;typeof W=="number"?le=[W,W,W,W]:((le=new Array(4))[0]=W[0],le[1]=W.length>=2?W[1]:le[0],le[2]=W.length>=3?W[2]:le[0],le[3]=W.length>=4?W[3]:le[1]),u.margin=le}});var R=!1;Object.defineProperty(this,"autoPaging",{get:function(){return R},set:function(W){R=W}});var G=0;Object.defineProperty(this,"lastBreak",{get:function(){return G},set:function(W){G=W}});var ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ee},set:function(W){ee=W}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(W){W instanceof d&&(u=W)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(W){u.path=W}});var te=[];Object.defineProperty(this,"ctxStack",{get:function(){return te},set:function(W){te=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var le;le=h(W),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var le=h(W);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var Q=null,xe=null,Y=null;Object.defineProperty(this,"fontFaces",{get:function(){return Y},set:function(W){Q=null,xe=null,Y=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var le;if(this.ctx.font=W,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(W))!==null){var Pe=le[1];le[2];var Le=le[3],qe=le[4];le[5];var nt=le[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(st==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var Et=function(oe){var je,Qe,tt=[],rt=oe.trim();if(rt==="")return gB;if(rt in oQ)return[oQ[rt]];for(;rt!=="";){switch(Qe=null,je=(rt=cQ(rt)).charAt(0)){case'"':case"'":Qe=REe(rt.substring(1),je);break;default:Qe=MEe(rt)}if(Qe===null||(tt.push(Qe[0]),(rt=cQ(Qe[1]))!==""&&rt.charAt(0)!==","))return gB;rt=rt.replace(/^,/,"")}return tt}(nt);if(this.fontFaces){var yt=function(oe,je){var Qe=oe.getFontList(),tt=JSON.stringify(Qe);if(Q===null||xe!==tt){var rt=function(Te){var Ee=[];return Object.keys(Te).forEach(function(V){Te[V].forEach(function(Ae){var Ne=null;switch(Ae){case"bold":Ne={family:V,weight:"bold"};break;case"italic":Ne={family:V,style:"italic"};break;case"bolditalic":Ne={family:V,weight:"bold",style:"italic"};break;case"":case"normal":Ne={family:V}}Ne!==null&&(Ne.ref={name:V,style:Ae},Ee.push(Ne))})}),Ee}(Qe);Q=function(Te){for(var Ee={},V=0;V<Te.length;++V){var Ae=pB(Te[V]),Ne=Ae.family,Re=Ae.stretch,ze=Ae.style,Ye=Ae.weight;Ee[Ne]=Ee[Ne]||{},Ee[Ne][Re]=Ee[Ne][Re]||{},Ee[Ne][Re][ze]=Ee[Ne][Re][ze]||{},Ee[Ne][Re][ze][Ye]=Ae}return Ee}(rt.concat(je)),xe=tt}return Q}(this.pdf,this.fontFaces),Ct=Et.map(function(oe){return{family:oe,stretch:"normal",weight:Le,style:Pe}}),Ot=function(oe,je,Qe){for(var tt=(Qe=Qe||{}).defaultFontFamily||"times",rt=Object.assign({},DEe,Qe.genericFontFamilies||{}),Te=null,Ee=null,V=0;V<je.length;++V)if(rt[(Te=pB(je[V])).family]&&(Te.family=rt[Te.family]),oe.hasOwnProperty(Te.family)){Ee=oe[Te.family];break}if(!(Ee=Ee||oe[tt]))throw new Error("Could not find a font-family for the rule '"+lQ(Te)+"' and default family '"+tt+"'.");if(Ee=function(Ae,Ne){if(Ne[Ae])return Ne[Ae];var Re=Dj[Ae],ze=Re<=Dj.normal?-1:1,Ye=iQ(Ne,Ree,Re,ze);if(!Ye)throw new Error("Could not find a matching font-stretch value for "+Ae);return Ye}(Te.stretch,Ee),Ee=function(Ae,Ne){if(Ne[Ae])return Ne[Ae];for(var Re=Dee[Ae],ze=0;ze<Re.length;++ze)if(Ne[Re[ze]])return Ne[Re[ze]];throw new Error("Could not find a matching font-style for "+Ae)}(Te.style,Ee),!(Ee=function(Ae,Ne){if(Ne[Ae])return Ne[Ae];if(Ae===400&&Ne[500])return Ne[500];if(Ae===500&&Ne[400])return Ne[400];var Re=OEe[Ae],ze=iQ(Ne,Mee,Re,Ae<400?-1:1);if(!ze)throw new Error("Could not find a matching font-weight for value "+Ae);return ze}(Te.weight,Ee)))throw new Error("Failed to resolve a font for the rule '"+lQ(Te)+"'.");return Ee}(yt,Ct);this.pdf.setFont(Ot.ref.name,Ot.ref.style)}else{var Pt="";(Le==="bold"||parseInt(Le,10)>=700||Pe==="bold")&&(Pt="bold"),Pe==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var fe="",Ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<Et.length;ve++){if(this.pdf.internal.getFont(Et[ve],Pt,{noFallback:!0,disableWarning:!0})!==void 0){fe=Et[ve];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(Et[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Et[ve],Pt="bold";else if(this.pdf.internal.getFont(Et[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Et[ve],Pt="normal";break}}if(fe===""){for(var he=0;he<Et.length;he++)if(Ke[Et[he]]){fe=Ke[Et[he]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};A.prototype.setLineDash=function(k){this.lineDash=k},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){w.call(this,"fill",!1)},A.prototype.stroke=function(){w.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(k,F){if(isNaN(k)||isNaN(F))throw ja.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(k,F)},A.prototype.closePath=function(){var k=new i(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&xa(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){k=new i(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(k.x,k.y)},A.prototype.lineTo=function(k,F){if(isNaN(k)||isNaN(F))throw ja.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(H.x,H.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},A.prototype.quadraticCurveTo=function(k,F,H,M){if(isNaN(H)||isNaN(M)||isNaN(k)||isNaN(F))throw ja.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var L=this.ctx.transform.applyToPoint(new i(H,M)),z=this.ctx.transform.applyToPoint(new i(k,F));this.path.push({type:"qct",x1:z.x,y1:z.y,x:L.x,y:L.y}),this.ctx.lastPoint=new i(L.x,L.y)},A.prototype.bezierCurveTo=function(k,F,H,M,L,z){if(isNaN(L)||isNaN(z)||isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M))throw ja.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var R=this.ctx.transform.applyToPoint(new i(L,z)),G=this.ctx.transform.applyToPoint(new i(k,F)),ee=this.ctx.transform.applyToPoint(new i(H,M));this.path.push({type:"bct",x1:G.x,y1:G.y,x2:ee.x,y2:ee.y,x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},A.prototype.arc=function(k,F,H,M,L,z){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M)||isNaN(L))throw ja.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(z=!!z,!this.ctx.transform.isIdentity){var R=this.ctx.transform.applyToPoint(new i(k,F));k=R.x,F=R.y;var G=this.ctx.transform.applyToPoint(new i(0,H)),ee=this.ctx.transform.applyToPoint(new i(0,0));H=Math.sqrt(Math.pow(G.x-ee.x,2)+Math.pow(G.y-ee.y,2))}Math.abs(L-M)>=2*Math.PI&&(M=0,L=2*Math.PI),this.path.push({type:"arc",x:k,y:F,radius:H,startAngle:M,endAngle:L,counterclockwise:z})},A.prototype.arcTo=function(k,F,H,M,L){throw new Error("arcTo not implemented.")},A.prototype.rect=function(k,F,H,M){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M))throw ja.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,F),this.lineTo(k+H,F),this.lineTo(k+H,F+M),this.lineTo(k,F+M),this.lineTo(k,F),this.lineTo(k+H,F),this.lineTo(k,F)},A.prototype.fillRect=function(k,F,H,M){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M))throw ja.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var L={};this.lineCap!=="butt"&&(L.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(L.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,F,H,M),this.fill(),L.hasOwnProperty("lineCap")&&(this.lineCap=L.lineCap),L.hasOwnProperty("lineJoin")&&(this.lineJoin=L.lineJoin)}},A.prototype.strokeRect=function(k,F,H,M){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M))throw ja.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(k,F,H,M),this.stroke())},A.prototype.clearRect=function(k,F,H,M){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M))throw ja.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,F,H,M))},A.prototype.save=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},A.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(F),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(k){var F,H,M,L;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))F=0,H=0,M=0,L=0;else{var z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(z!==null)F=parseInt(z[1]),H=parseInt(z[2]),M=parseInt(z[3]),L=1;else if((z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)F=parseInt(z[1]),H=parseInt(z[2]),M=parseInt(z[3]),L=parseFloat(z[4]);else{if(L=1,typeof k=="string"&&k.charAt(0)!=="#"){var R=new Bee(k);k=R.ok?R.toHex():"#000000"}k.length===4?(F=k.substring(1,2),F+=F,H=k.substring(2,3),H+=H,M=k.substring(3,4),M+=M):(F=k.substring(1,3),H=k.substring(3,5),M=k.substring(5,7)),F=parseInt(F,16),H=parseInt(H,16),M=parseInt(M,16)}}return{r:F,g:H,b:M,a:L,style:k}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(k,F,H,M){if(isNaN(F)||isNaN(H)||typeof k!="string")throw ja.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!f.call(this)){var L=ce(this.ctx.transform.rotation),z=this.ctx.transform.scaleX;P.call(this,{text:k,x:F,y:H,scale:z,angle:L,align:this.textAlign,maxWidth:M})}},A.prototype.strokeText=function(k,F,H,M){if(isNaN(F)||isNaN(H)||typeof k!="string")throw ja.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){M=isNaN(M)?void 0:M;var L=ce(this.ctx.transform.rotation),z=this.ctx.transform.scaleX;P.call(this,{text:k,x:F,y:H,scale:z,renderingMode:"stroke",angle:L,align:this.textAlign,maxWidth:M})}},A.prototype.measureText=function(k){if(typeof k!="string")throw ja.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,H=this.pdf.internal.scaleFactor,M=F.internal.getFontSize(),L=F.getStringUnitWidth(k)*M/F.internal.scaleFactor;return new function(z){var R=(z=z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return R}}),this}({width:L*=Math.round(96*H/72*1e4)/1e4})},A.prototype.scale=function(k,F){if(isNaN(k)||isNaN(F))throw ja.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(k,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},A.prototype.rotate=function(k){if(isNaN(k))throw ja.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},A.prototype.translate=function(k,F){if(isNaN(k)||isNaN(F))throw ja.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,k,F);this.ctx.transform=this.ctx.transform.multiply(H)},A.prototype.transform=function(k,F,H,M,L,z){if(isNaN(k)||isNaN(F)||isNaN(H)||isNaN(M)||isNaN(L)||isNaN(z))throw ja.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var R=new c(k,F,H,M,L,z);this.ctx.transform=this.ctx.transform.multiply(R)},A.prototype.setTransform=function(k,F,H,M,L,z){k=isNaN(k)?1:k,F=isNaN(F)?0:F,H=isNaN(H)?0:H,M=isNaN(M)?1:M,L=isNaN(L)?0:L,z=isNaN(z)?0:z,this.ctx.transform=new c(k,F,H,M,L,z)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(k,F,H,M,L,z,R,G,ee){var te=this.pdf.getImageProperties(k),Q=1,xe=1,Y=1,W=1;M!==void 0&&G!==void 0&&(Y=G/M,W=ee/L,Q=te.width/M*G/M,xe=te.height/L*ee/L),z===void 0&&(z=F,R=H,F=0,H=0),M!==void 0&&G===void 0&&(G=M,ee=L),M===void 0&&G===void 0&&(G=te.width,ee=te.height);var le=this.ctx.transform.decompose(),Pe=ce(le.rotate.shx),Le=new c,qe=(Le=(Le=(Le=Le.multiply(le.translate)).multiply(le.skew)).multiply(le.scale)).applyToRectangle(new l(z-F*Y,R-H*W,M*Q,L*xe));if(this.autoPaging){for(var nt,st=g.call(this,qe),Et=[],yt=0;yt<st.length;yt+=1)Et.indexOf(st[yt])===-1&&Et.push(st[yt]);b(Et);for(var Ct=Et[0],Ot=Et[Et.length-1],Pt=Ct;Pt<Ot+1;Pt++){this.pdf.setPage(Pt);var fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=Pt===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],he=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=Pt===1?0:ve+(Pt-2)*he;if(this.ctx.clip_path.length!==0){var je=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(nt,this.posX+this.margin[3],-oe+Ke+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=je}var Qe=JSON.parse(JSON.stringify(qe));Qe=y([Qe],this.posX+this.margin[3],-oe+Ke+this.ctx.prevPageLastElemOffset)[0];var tt=(Pt>Ct||Pt<Ot)&&p.call(this);tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fe,he,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Pe),tt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,Pe)};var g=function(k,F,H){var M=[];F=F||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var L=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":M.push(Math.floor((k.y+L)/H)+1);break;case"arc":M.push(Math.floor((k.y+L-k.radius)/H)+1),M.push(Math.floor((k.y+L+k.radius)/H)+1);break;case"qct":var z=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);M.push(Math.floor((z.y+L)/H)+1),M.push(Math.floor((z.y+z.h+L)/H)+1);break;case"bct":var R=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);M.push(Math.floor((R.y+L)/H)+1),M.push(Math.floor((R.y+R.h+L)/H)+1);break;case"rect":M.push(Math.floor((k.y+L)/H)+1),M.push(Math.floor((k.y+k.h+L)/H)+1)}for(var G=0;G<M.length;G+=1)for(;this.pdf.internal.getNumberOfPages()<M[G];)x.call(this);return M},x=function(){var k=this.fillStyle,F=this.strokeStyle,H=this.font,M=this.lineCap,L=this.lineWidth,z=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=F,this.font=H,this.lineCap=M,this.lineWidth=L,this.lineJoin=z},y=function(k,F,H){for(var M=0;M<k.length;M++)switch(k[M].type){case"bct":k[M].x2+=F,k[M].y2+=H;case"qct":k[M].x1+=F,k[M].y1+=H;default:k[M].x+=F,k[M].y+=H}return k},b=function(k){return k.sort(function(F,H){return F-H})},w=function(k,F){var H=this.fillStyle,M=this.strokeStyle,L=this.lineCap,z=this.lineWidth,R=Math.abs(z*this.ctx.transform.scaleX),G=this.lineJoin;if(this.autoPaging){for(var ee,te,Q=JSON.parse(JSON.stringify(this.path)),xe=JSON.parse(JSON.stringify(this.path)),Y=[],W=0;W<xe.length;W++)if(xe[W].x!==void 0)for(var le=g.call(this,xe[W]),Pe=0;Pe<le.length;Pe+=1)Y.indexOf(le[Pe])===-1&&Y.push(le[Pe]);for(var Le=0;Le<Y.length;Le++)for(;this.pdf.internal.getNumberOfPages()<Y[Le];)x.call(this);b(Y);for(var qe=Y[0],nt=Y[Y.length-1],st=qe;st<nt+1;st++){this.pdf.setPage(st),this.fillStyle=H,this.strokeStyle=M,this.lineCap=L,this.lineWidth=R,this.lineJoin=G;var Et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=st===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=st===1?0:Ct+(st-2)*Ot;if(this.ctx.clip_path.length!==0){var fe=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ee,this.posX+this.margin[3],-Pt+yt+this.ctx.prevPageLastElemOffset),I.call(this,k,!0),this.path=fe}if(te=JSON.parse(JSON.stringify(Q)),this.path=y(te,this.posX+this.margin[3],-Pt+yt+this.ctx.prevPageLastElemOffset),F===!1||st===0){var Ke=(st>qe||st<nt)&&p.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,Ot,null).clip().discardPath()),I.call(this,k,F),Ke&&this.pdf.restoreGraphicsState()}this.lineWidth=z}this.path=Q}else this.lineWidth=R,I.call(this,k,F),this.lineWidth=z},I=function(k,F){if((k!=="stroke"||F||!m.call(this))&&(k==="stroke"||F||!f.call(this))){for(var H,M,L=[],z=this.path,R=0;R<z.length;R++){var G=z[R];switch(G.type){case"begin":L.push({begin:!0});break;case"close":L.push({close:!0});break;case"mt":L.push({start:G,deltas:[],abs:[]});break;case"lt":var ee=L.length;if(z[R-1]&&!isNaN(z[R-1].x)&&(H=[G.x-z[R-1].x,G.y-z[R-1].y],ee>0)){for(;ee>=0;ee--)if(L[ee-1].close!==!0&&L[ee-1].begin!==!0){L[ee-1].deltas.push(H),L[ee-1].abs.push(G);break}}break;case"bct":H=[G.x1-z[R-1].x,G.y1-z[R-1].y,G.x2-z[R-1].x,G.y2-z[R-1].y,G.x-z[R-1].x,G.y-z[R-1].y],L[L.length-1].deltas.push(H);break;case"qct":var te=z[R-1].x+2/3*(G.x1-z[R-1].x),Q=z[R-1].y+2/3*(G.y1-z[R-1].y),xe=G.x+2/3*(G.x1-G.x),Y=G.y+2/3*(G.y1-G.y),W=G.x,le=G.y;H=[te-z[R-1].x,Q-z[R-1].y,xe-z[R-1].x,Y-z[R-1].y,W-z[R-1].x,le-z[R-1].y],L[L.length-1].deltas.push(H);break;case"arc":L.push({deltas:[],abs:[],arc:!0}),Array.isArray(L[L.length-1].abs)&&L[L.length-1].abs.push(G)}}M=F?null:k==="stroke"?"stroke":"fill";for(var Pe=!1,Le=0;Le<L.length;Le++)if(L[Le].arc)for(var qe=L[Le].abs,nt=0;nt<qe.length;nt++){var st=qe[nt];st.type==="arc"?E.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,F,!Pe):D.call(this,st.x,st.y),Pe=!0}else if(L[Le].close===!0)this.pdf.internal.out("h"),Pe=!1;else if(L[Le].begin!==!0){var Et=L[Le].start.x,yt=L[Le].start.y;X.call(this,L[Le].deltas,Et,yt),Pe=!0}M&&S.call(this,M),F&&O.call(this)}},T=function(k){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-H;case"top":return k+F-H;case"hanging":return k+F-2*H;case"middle":return k+F/2-H;default:return k}},C=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(F,H){this.colorStops.push([F,H])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,F,H,M,L,z,R,G,ee){for(var te=re.call(this,H,M,L,z),Q=0;Q<te.length;Q++){var xe=te[Q];Q===0&&(ee?B.call(this,xe.x1+k,xe.y1+F):D.call(this,xe.x1+k,xe.y1+F)),de.call(this,k,F,xe.x2,xe.y2,xe.x3,xe.y3,xe.x4,xe.y4)}G?O.call(this):S.call(this,R)},S=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(k,F){this.pdf.internal.out(r(k)+" "+n(F)+" m")},P=function(k){var F;switch(k.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var H,M,L,z=this.pdf.getTextDimensions(k.text),R=T.call(this,k.y),G=C.call(this,R)-z.h,ee=this.ctx.transform.applyToPoint(new i(k.x,R));if(this.autoPaging){var te=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(te.translate)).multiply(te.skew)).multiply(te.scale);for(var xe=this.ctx.transform.applyToRectangle(new l(k.x,R,z.w,z.h)),Y=Q.applyToRectangle(new l(k.x,G,z.w,z.h)),W=g.call(this,Y),le=[],Pe=0;Pe<W.length;Pe+=1)le.indexOf(W[Pe])===-1&&le.push(W[Pe]);b(le);for(var Le=le[0],qe=le[le.length-1],nt=Le;nt<qe+1;nt++){this.pdf.setPage(nt);var st=nt===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],Ct=yt-this.margin[0],Ot=this.pdf.internal.pageSize.width-this.margin[1],Pt=Ot-this.margin[3],fe=nt===1?0:Et+(nt-2)*Ct;if(this.ctx.clip_path.length!==0){var Ke=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(H,this.posX+this.margin[3],-1*fe+st),I.call(this,"fill",!0),this.path=Ke}var ve=y([JSON.parse(JSON.stringify(Y))],this.posX+this.margin[3],-fe+st+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),L=this.lineWidth,this.lineWidth=L*k.scale);var he=this.autoPaging!=="text";if(he||ve.y+ve.h<=yt){if(he||ve.y>=st&&ve.x<=Ot){var oe=he?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Ot-ve.x)[0],je=y([JSON.parse(JSON.stringify(xe))],this.posX+this.margin[3],-fe+st+this.ctx.prevPageLastElemOffset)[0],Qe=he&&(nt>Le||nt<qe)&&p.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Ct,null).clip().discardPath()),this.pdf.text(oe,je.x,je.y,{angle:k.angle,align:F,renderingMode:k.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else ve.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-ve.y);k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=L)}}else k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),L=this.lineWidth,this.lineWidth=L*k.scale),this.pdf.text(k.text,ee.x+this.posX,ee.y+this.posY,{angle:k.angle,align:F,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=L)},D=function(k,F,H,M){H=H||0,M=M||0,this.pdf.internal.out(r(k+H)+" "+n(F+M)+" l")},X=function(k,F,H){return this.pdf.lines(k,F,H,null,null)},de=function(k,F,H,M,L,z,R,G){this.pdf.internal.out([e(a(H+k)),e(s(M+F)),e(a(L+k)),e(s(z+F)),e(a(R+k)),e(s(G+F)),"c"].join(" "))},re=function(k,F,H,M){for(var L=2*Math.PI,z=Math.PI/2;F>H;)F-=L;var R=Math.abs(H-F);R<L&&M&&(R=L-R);for(var G=[],ee=M?-1:1,te=F;R>1e-5;){var Q=te+ee*Math.min(R,z);G.push(ie.call(this,k,te,Q)),R-=Math.abs(Q-te),te=Q}return G},ie=function(k,F,H){var M=(H-F)/2,L=k*Math.cos(M),z=k*Math.sin(M),R=L,G=-z,ee=R*R+G*G,te=ee+R*L+G*z,Q=4/3*(Math.sqrt(2*ee*te)-te)/(R*z-G*L),xe=R-Q*G,Y=G+Q*R,W=xe,le=-Y,Pe=M+F,Le=Math.cos(Pe),qe=Math.sin(Pe);return{x1:k*Math.cos(F),y1:k*Math.sin(F),x2:xe*Le-Y*qe,y2:xe*qe+Y*Le,x3:W*Le-le*qe,y3:W*qe+le*Le,x4:k*Math.cos(H),y4:k*Math.sin(H)}},ce=function(k){return 180*k/Math.PI},J=function(k,F,H,M,L,z){var R=k+.5*(H-k),G=F+.5*(M-F),ee=L+.5*(H-L),te=z+.5*(M-z),Q=Math.min(k,L,R,ee),xe=Math.max(k,L,R,ee),Y=Math.min(F,z,G,te),W=Math.max(F,z,G,te);return new l(Q,Y,xe-Q,W-Y)},pe=function(k,F,H,M,L,z,R,G){var ee,te,Q,xe,Y,W,le,Pe,Le,qe,nt,st,Et,yt,Ct=H-k,Ot=M-F,Pt=L-H,fe=z-M,Ke=R-L,ve=G-z;for(te=0;te<41;te++)Le=(le=(Q=k+(ee=te/40)*Ct)+ee*((Y=H+ee*Pt)-Q))+ee*(Y+ee*(L+ee*Ke-Y)-le),qe=(Pe=(xe=F+ee*Ot)+ee*((W=M+ee*fe)-xe))+ee*(W+ee*(z+ee*ve-W)-Pe),te==0?(nt=Le,st=qe,Et=Le,yt=qe):(nt=Math.min(nt,Le),st=Math.min(st,qe),Et=Math.max(Et,Le),yt=Math.max(yt,qe));return new l(Math.round(nt),Math.round(st),Math.round(Et-nt),Math.round(yt-st))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,F,H=(k=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:F}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Br.API),function(t){var e=function(i){var l,c,u,d,A,h,f,m,p,g;for(c=[],u=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(A=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(A=((A=((A=((A=(A-(g=A%85))/85)-(p=A%85))/85)-(m=A%85))/85)-(f=A%85))/85)%85,c.push(h+33,f+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var l,c,u,d,A,h=String,f="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,A=(i+=l="uuuuu"[g](i[f]%5||5))[f];A>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[f]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var l=new Uint8Array(i.length),c=i.length;c--;)l[c]=i.charCodeAt(c);return(l=Bj(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var c=0,u=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Br.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var A=new XMLHttpRequest,h=0,f=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(A.open("GET",c,!u),A.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(A.onload=function(){A.status===200?d(f(this.responseText)):d(void 0)}),A.send(null),u&&A.status===200)return f(A.responseText)}(a,s,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Br.API),function(t){function e(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):Af(()=>Promise.resolve().then(()=>v6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):Af(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=xa(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),A=c.firstChild;A;A=A.nextSibling)u!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||d.appendChild(l(A,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,c){return l.__proto__=c||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var m=d[f],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},i.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(l,c){return this.then(function(){var u=l in i.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,A){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,A).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(A,l,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},i.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return i.convert(c,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Br.getPageSize=function(l,c,u){if(xa(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var A,h=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(f.hasOwnProperty(h))p=f[h][1]/A,g=f[h][0]/A;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:A,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(pB):null;var u=new i(c);return c.worker?u:u.from(l).doCallback()}}(Br.API),Br.API.addJS=function(t){return dQ=t,this.internal.events.subscribe("postPutResources",function(){WN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(WN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+dQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){WN!==void 0&&uQ!==void 0&&this.internal.out("/Names <</JavaScript "+WN+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var A=r.internal.newObject();d.push(A);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Br.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(A){for(var h,f=256*A.charCodeAt(4)+A.charCodeAt(5),m=A.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=f,e.indexOf(A.charCodeAt(g+1))!==-1){h=256*A.charCodeAt(g+5)+A.charCodeAt(g+6),p={width:256*A.charCodeAt(g+7)+A.charCodeAt(g+8),height:h,numcomponents:A.charCodeAt(g+9)};break}f=256*A.charCodeAt(g+2)+A.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Br.API),Br.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=yEe(t,{checkCrc:!0}),i=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(E){for(var S=E.width,O=E.height,B=E.data,P=E.palette,D=E.depth,X=!1,de=[],re=[],ie=void 0,ce=!1,J=0,pe=0;pe<P.length;pe++){var Se=m9(P[pe],4),k=Se[0],F=Se[1],H=Se[2],M=Se[3];de.push(k,F,H),M!=null&&(M===0?(J++,re.length<1&&re.push(pe)):M<255&&(ce=!0))}if(ce||J>1){X=!0,re=void 0;var L=S*O;ie=new Uint8Array(L);for(var z=new DataView(B.buffer),R=0;R<L;R++){var G=xB(z,R,D),ee=m9(P[G],4)[3];ie[R]=ee}}else J===0&&(re=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:B,alphaBytes:ie,needSMask:X,palette:de,mask:re}}(s):c===2||c===4?function(E){for(var S=E.data,O=E.width,B=E.height,P=E.channels,D=E.depth,X=P===2?"DeviceGray":"DeviceRGB",de=P-1,re=O*B,ie=de,ce=re*ie,J=1*re,pe=Math.ceil(ce*D/8),Se=Math.ceil(J*D/8),k=new Uint8Array(pe),F=new Uint8Array(Se),H=new DataView(S.buffer),M=new DataView(k.buffer),L=new DataView(F.buffer),z=!1,R=0;R<re;R++){for(var G=R*P,ee=0;ee<ie;ee++)yQ(M,xB(H,G+ee,D),R*ie+ee,D);var te=xB(H,G+ie,D);te<(1<<D)-1&&(z=!0),yQ(L,te,1*R,D)}return{colorSpace:X,colorsPerPixel:de,sMaskBitsPerComponent:z?D:void 0,colorBytes:k,alphaBytes:F,needSMask:z}}(s):function(E){var S=E.data,O=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?function(B){for(var P=B.length,D=new Uint8Array(2*P),X=new DataView(D.buffer,D.byteOffset,D.byteLength),de=0;de<P;de++)X.setUint16(2*de,B[de],!1);return D}(S):S,needSMask:!1}}(s);var A,h,f,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,I=m.palette,T=m.mask,C=null;return n!==Br.API.image_compression.NONE&&typeof Bj=="function"?(C=function(E){var S;switch(E){case Br.API.image_compression.FAST:S=11;break;case Br.API.image_compression.MEDIUM:S=13;break;case Br.API.image_compression.SLOW:S=14;break;default:S=12}return S}(n),A=this.decode.FLATE_DECODE,h="/Predictor ".concat(C," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=mQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(f=mQ(b,Math.ceil(i*x/8),1,x,n))):(A=void 0,h=void 0,t=y,w&&(f=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:A,decodeParameters:h,transparency:T,palette:I,sMask:f,predictor:C,width:i,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new VEe(e),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new vB(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Br.API),Zu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ja.log("bit decode error:"+r)}},Zu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Zu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Zu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Zu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},Zu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Zu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Zu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},Zu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Zu(e,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new vB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),wQ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new wQ(e),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new vB(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),Br.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],A=n[u+1],h=n[u+2],f=n[u+3];s[l++]=d,s[l++]=A,s[l++]=h,i[c++]=f}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Br.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cg=Br.API,XN=Cg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,A=e.doKerning!==!1,h=0,f=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=A&&xa(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+h)),m=n;return g},AQ=Cg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Cg.processArabic&&(t=Cg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:XN.apply(this,arguments).reduce(function(s,i){return s+i},0)},fQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,l=0;s!==i&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==i;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},hQ=function(t,e,r){r||(r={});var n,a,s,i,l,c,u,d=[],A=[d],h=r.textIndent||0,f=0,m=0,p=t.split(" "),g=XN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(I,T){return(T&&I.length?`
`:"")+I})):y.push(w[0])}),p=y,c=AQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+f+(m=(a=XN.apply(this,[n,r])).reduce(function(w,I){return w+I},0))>e||b){if(m>e){for(l=fQ.apply(this,[n,a,e-(h+f),e]),d.push(l.shift()),d=[l.pop()];l.length;)A.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,I){return w+I},0)}else d=[n];A.push(d),h=m+c,f=g}else d.push(n),h+=f+m,f=g}return u=c?function(w,I){return(I?x:"")+w.join(" ")}:function(w){return w.join(" ")},A.map(u)},Cg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var A=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return A.metadata[h]?{widths:A.metadata[h].widths||{0:1},kerning:A.metadata[h].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(hQ.apply(this,[n[l],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},l=t.__fontmetrics__.compress=function(h){var f,m,p,g,x=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof f=="number")f<0?(p=i(f).slice(3),g="-"):(p=i(f).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(xa(f)!=="object")throw new Error("Don't know what to do with value type "+xa(f)+".");p=l(f)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,p,g,x={},y=1,b=x,w=[],I="",T="",C=h.length-1,E=1;E<C;E+=1)(g=h[E])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(I+=n[g],p=parseInt(I,16)*y,y=1,I=""):I+=g:n.hasOwnProperty(g)?(T+=n[g],b[p]=parseInt(T,16)*y,y=1,p=void 0,T=""):T+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},A={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,m=A.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(Br.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(CC(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(Br),Br.API.addSvgAsImage=function(t,e,r,n,a,s,i,l){if(isNaN(e)||isNaN(r))throw ja.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw ja.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(tn.canvg?Promise.resolve(tn.canvg):Af(()=>import("./index.es-BQM27Yqt.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,l)})},Br.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Br.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,A=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=l.length;for(A=0;A<f;A+=1)r[l[A]].value=r[l[A]].defaultValue,r[l[A]].explicitSet=!1}if(xa(t)==="object"){for(a in t)if(s=t[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Br.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],A=0,h=s.length;A<h;++A){if(l=i.metadata.characterToGlyph(s.charCodeAt(A)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(A),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,A,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],A=0,h=(l=Object.keys(s).sort(function(f,m){return f-m})).length;A<h;A++)i=l[A],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var A=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var p=u();d({data:f,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Wg(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Wg(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(A)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Wg(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var A=l.metadata.rawData,h="",f=0;f<A.length;f++)h+=String.fromCharCode(A[f]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Wg(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Wg(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},A=s.mutex||{},h=A.pdfEscape,f=A.activeFontKey,m=A.fonts,p=f,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:A};for(y=l,p=f,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),A.isHex=!0,{text:w,x:c,y:u,options:d,mutex:A}};e.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(Br),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Br.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,A=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(B){var P=B.charCodeAt(),D=P>>8,X=p[D];return X!==void 0?A[256*X+(255&P)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},I=function(B){for(var P,D=0;D<B.length;D++){if((P=w(B.charAt(D)))==="L")return!1;if(P==="R")return!0}return!1},T=function(B,P,D,X){var de,re,ie,ce,J=P[X];switch(J){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(J="AN");break;case"AL":y=!0,J="R";break;case"WS":case"BN":J="N";break;case"CS":X<1||X+1>=P.length||(de=D[X-1])!=="EN"&&de!=="AN"||(re=P[X+1])!=="EN"&&re!=="AN"?J="N":y&&(re="AN"),J=re===de?re:"N";break;case"ES":J=(de=X>0?D[X-1]:"B")==="EN"&&X+1<P.length&&P[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&D[X-1]==="EN"){J="EN";break}if(y){J="N";break}for(ie=X+1,ce=P.length;ie<ce&&P[ie]==="ET";)ie++;J=ie<ce&&P[ie]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(ce=P.length,ie=X+1;ie<ce&&P[ie]==="NSM";)ie++;if(ie<ce){var pe=B[X],Se=pe>=1425&&pe<=2303||pe===64286;if(de=P[ie],Se&&(de==="R"||de==="AL")){J="R";break}}}J=X<1||(de=P[X-1])==="B"?"N":D[X-1];break;case"B":y=!1,a=!0,J=b;break;case"S":s=!0,J="N"}return J},C=function(B,P,D){var X=B.split("");return D&&E(X,D,{hiLevel:b}),X.reverse(),P&&P.reverse(),X.join("")},E=function(B,P,D){var X,de,re,ie,ce,J=-1,pe=B.length,Se=0,k=[],F=b?f:h,H=[];for(y=!1,a=!1,s=!1,de=0;de<pe;de++)H[de]=w(B[de]);for(re=0;re<pe;re++){if(ce=Se,k[re]=T(B,H,k,re),X=240&(Se=F[ce][m[k[re]]]),Se&=15,P[re]=ie=F[Se][5],X>0)if(X===16){for(de=J;de<re;de++)P[de]=1;J=-1}else J=-1;if(F[Se][6])J===-1&&(J=re);else if(J>-1){for(de=J;de<re;de++)P[de]=ie;J=-1}H[re]==="B"&&(P[re]=0),D.hiLevel|=ie}s&&function(M,L,z){for(var R=0;R<z;R++)if(M[R]==="S"){L[R]=b;for(var G=R-1;G>=0&&M[G]==="WS";G--)L[G]=b}}(H,P,pe)},S=function(B,P,D,X,de){if(!(de.hiLevel<B)){if(B===1&&b===1&&!a)return P.reverse(),void(D&&D.reverse());for(var re,ie,ce,J,pe=P.length,Se=0;Se<pe;){if(X[Se]>=B){for(ce=Se+1;ce<pe&&X[ce]>=B;)ce++;for(J=Se,ie=ce-1;J<ie;J++,ie--)re=P[J],P[J]=P[ie],P[ie]=re,D&&(re=D[J],D[J]=D[ie],D[ie]=re);Se=ce}Se++}}},O=function(B,P,D){var X=B.split(""),de={hiLevel:b};return D||(D=[]),E(X,D,de),function(re,ie,ce){if(ce.hiLevel!==0&&d)for(var J,pe=0;pe<re.length;pe++)ie[pe]===1&&(J=g.indexOf(re[pe]))>=0&&(re[pe]=g[J+1])}(X,D,de),S(2,X,P,D,de),S(1,X,P,D,de),X.join("")};return this.__bidiEngine__.doBidiReorder=function(B,P,D){if(function(de,re){if(re)for(var ie=0;ie<de.length;ie++)re[ie]=ie;l===void 0&&(l=I(de)),u===void 0&&(u=I(de))}(B,P),i||!c||u)if(i&&c&&l^u)b=l?1:0,B=C(B,P,D);else if(!i&&c&&u)b=l?1:0,B=O(B,P,D),B=C(B,P);else if(!i||l||c||u){if(i&&!c&&l^u)B=C(B,P),l?(b=0,B=O(B,P,D)):(b=1,B=O(B,P,D),B=C(B,P));else if(i&&l&&!c&&u)b=1,B=O(B,P,D),B=C(B,P);else if(!i&&!c&&l^u){var X=d;l?(b=1,B=O(B,P,D),b=0,d=!1,B=O(B,P,D),d=X):(b=0,B=O(B,P,D),B=C(B,P),b=1,d=!1,B=O(B,P,D),d=X,B=C(B,P))}}else b=0,B=O(B,P,D);else b=l?1:0,B=O(B,P,D);return B},this.__bidiEngine__.setOptions=function(B){B&&(i=B.isInputVisual,c=B.isOutputVisual,l=B.isInputRtl,u=B.isOutputRtl,d=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Br),Br.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new T0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new nSe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new HEe(this.contents),this.head=new KEe(this),this.name=new XEe(this),this.cmap=new Uee(this),this.toUnicode={},this.hhea=new GEe(this),this.maxp=new YEe(this),this.hmtx=new JEe(this),this.post=new zEe(this),this.os2=new qEe(this),this.loca=new rSe(this),this.glyf=new ZEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,l;for(i=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Fd,T0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),HEe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,l,c,u,d,A,h,f,m,p;for(p in f=Object.keys(r).length,c=Math.log(2),A=16*Math.floor(Math.log(f)/c),i=Math.floor(A/c),d=16*f-A,(a=new T0).writeInt(this.scalarType),a.writeShort(f),a.writeShort(A),a.writeShort(i),a.writeShort(d),s=16*f,u=a.pos+s,l=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=Qee.call(r);r.length%4;)r.push(0);for(s=new T0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),$Ee={}.hasOwnProperty,wA=function(t,e){for(var r in e)$Ee.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Fd=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var KEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new T0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),NQ=function(){function t(e,r){var n,a,s,i,l,c,u,d,A,h,f,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),A=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),e.pos+=2,p=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),u=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),d=function(){var w,I;for(I=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)I.push(e.readUInt16());return I}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,I;for(I=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)I.push(e.readUInt16());return I}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=A}return t.encode=function(e,r){var n,a,s,i,l,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S,O,B,P,D,X,de,re,ie,ce,J,pe,Se,k,F,H,M,L,z,R,G,ee,te,Q;switch(X=new T0,i=Object.keys(e).sort(function(xe,Y){return xe-Y}),r){case"macroman":for(p=0,g=function(){var xe=[];for(m=0;m<256;++m)xe.push(0);return xe}(),y={0:0},s={},de=0,J=i.length;de<J;de++)y[G=e[a=i[de]]]==null&&(y[G]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(g),{charMap:s,subtable:X.data,maxGlyphID:p+1};case"unicode":for(P=[],A=[],b=0,y={},n={},x=u=null,re=0,pe=i.length;re<pe;re++)y[I=e[a=i[re]]]==null&&(y[I]=++b),n[a]={old:I,new:y[I]},l=y[I]-a,x!=null&&l===u||(x&&A.push(x),P.push(a),u=l),x=a;for(x&&A.push(x),A.push(65535),P.push(65535),O=2*(S=P.length),E=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,C=2*S-E,c=[],T=[],f=[],m=ie=0,Se=P.length;ie<Se;m=++ie){if(B=P[m],d=A[m],B===65535){c.push(0),T.push(0);break}if(B-(D=n[B].new)>=32768)for(c.push(0),T.push(2*(f.length+S-m)),a=ce=B;B<=d?ce<=d:ce>=d;a=B<=d?++ce:--ce)f.push(n[a].new);else c.push(D-B),T.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*S+2*f.length),X.writeUInt16(0),X.writeUInt16(O),X.writeUInt16(E),X.writeUInt16(h),X.writeUInt16(C),z=0,k=A.length;z<k;z++)a=A[z],X.writeUInt16(a);for(X.writeUInt16(0),R=0,F=P.length;R<F;R++)a=P[R],X.writeUInt16(a);for(ee=0,H=c.length;ee<H;ee++)l=c[ee],X.writeUInt16(l);for(te=0,M=T.length;te<M;te++)w=T[te],X.writeUInt16(w);for(Q=0,L=f.length;Q<L;Q++)p=f[Q],X.writeUInt16(p);return{charMap:n,subtable:X.data,maxGlyphID:b+1}}},t}(),Uee=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new NQ(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=NQ.encode(e,r),(a=new T0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),GEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),qEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),zEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,l,c;for(c=[],s=i=0,l=this.file.maxp.numGlyphs;0<=l?i<l:i>l;s=0<=l?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),WEe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,l,c,u,d,A,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,A=n.length;d<A;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new WEe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),YEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),JEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,A,h;for(h=[],u=0,d=(A=this.metrics).length;u<d;u++)s=A[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Qee=[].slice,ZEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,l,c,u,d,A;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(l=new T0(r.read(a))).readShort(),u=l.readShort(),A=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=i===-1?new tSe(l,u,A,c,d):new eSe(l,i,u,A,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,l,c;for(i=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),eSe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),tSe=function(){function t(e,r,n,a,s){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new T0(Qee.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),rSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wA(t,Fd),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var l=this.offsets[i],c=this.offsets[i+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),nSe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,l,c;for(a={},i=0,l=e.length;i<l;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,l,c,u,d,A,h,f,m,p,g,x;for(a in n=Uee.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),f={0:0},x=n.charMap)f[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in f||(f[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(f),A=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=A.length;y<b;y++)l=A[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(i,p,f),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Br.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const Rj=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:FEe,AcroFormAppearance:kr,AcroFormButton:Si,AcroFormCheckBox:Gy,AcroFormChoiceField:Gm,AcroFormComboBox:zm,AcroFormEditBox:$y,AcroFormListBox:qm,AcroFormPasswordField:qy,AcroFormPushButton:Ky,AcroFormRadioButton:Wm,AcroFormTextField:p0,GState:$2,ShadingPattern:$h,TilingPattern:Om,default:Br,jsPDF:Br},Symbol.toStringTag,{value:"Module"}));async function _Q(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:rr.now()};return En(At(ke,"inventory_batches"),e)}async function Vee(t,e){await rn(Gt(ke,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:rr.now()})}async function aSe(t,e){const r=Yt(At(ke,"batch_allocations"),lr("saleDate",">=",t),lr("saleDate","<=",e)),n=await Dt(r),a={};return n.forEach(s=>{const i=s.data(),l=i.batchId;a[l]||(a[l]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(i.quantity||0),a[l].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function sSe(t){const e=Gt(ke,"salesV2",t),r=await fo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Di(ke,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let i=0;return await Di(ke,async l=>{const c=Array.from(s.entries()),u=c.map(([A])=>Gt(ke,"inventory_batches",A)),d=await Promise.all(u.map(A=>l.get(A)));c.forEach(([A,h],f)=>{const m=d[f];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));l.update(u[f],{remaining:x}),i+=Number(h||0)}),l.delete(e)}),{restored:i}}function fc(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Au=t=>Math.round((Number(t)||0)*100)/100,YN=t=>Math.round((Number(t)||0)*1e3)/1e3,j1=t=>Number(t??0).toFixed(2),yB=t=>Number(t??0).toFixed(3),CQ=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((a,s)=>{const i=Number((a==null?void 0:a.qty)??0),l=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*i-Number((a==null?void 0:a.discount)||0));return{id:`${e}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:i,amount:Au(l),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:t.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function iSe({role:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[A,h]=v.useState("ALL"),[f,m]=v.useState(null),[p,g]=v.useState(0),[x,y]=v.useState(0),[b,w]=v.useState(""),[I,T]=v.useState(0),[C,E]=v.useState("0"),S=wr(new Date,"yyyy-MM-dd"),O=v.useRef(null),{refreshKey:B}=fc();v.useEffect(()=>{const L=Yt(At(ke,"salesV2"),lr("date","==",S)),z=I0(L,R=>{const G=[];R.forEach(ee=>{const te=CQ(ee.data(),ee.id);G.push(...te)}),r(G),c(!1)});return()=>z()},[S,B]),v.useEffect(()=>{const L=Yt(At(ke,"salesV2"),lr("status","==","FLOTANTE")),z=I0(L,R=>{const G=[];R.forEach(ee=>{const te=CQ(ee.data(),ee.id);G.push(...te)}),a(G)});return()=>z()},[B]),v.useEffect(()=>{(async()=>{const z=Yt(At(ke,"daily_closures"),lr("date","==",S)),R=await Dt(z);if(R.empty)i(null);else{const G=R.docs[0];i({id:G.id,...G.data()})}})()},[S,B]);const P=ao.useMemo(()=>{if(A==="FLOTANTE"){const L=[...e,...n],z=new Map;for(const R of L)R.status==="FLOTANTE"&&z.set(R.id,R);return Array.from(z.values())}if(A==="ALL"){const L=[...e,...n],z=new Map;for(const R of L)z.set(R.id,R);return Array.from(z.values())}return e.filter(L=>L.status==="PROCESADA")},[A,e,n]);Au(P.reduce((L,z)=>L+(z.amountSuggested||0),0));const D=Au(P.reduce((L,z)=>L+(z.amount||0),0)),X=YN(P.reduce((L,z)=>L+(z.quantity||0),0)),de=Au(P.reduce((L,z)=>L+Number(z.cogsAmount??0),0)),re=Au(D-de),ie={};P.forEach(L=>{const z=L.productName||"(sin nombre)";ie[z]||(ie[z]={totalQuantity:0,totalAmount:0}),ie[z].totalQuantity=YN(ie[z].totalQuantity+(L.quantity||0)),ie[z].totalAmount=Au(ie[z].totalAmount+(L.amount||0))});const ce=Object.entries(ie).map(([L,z])=>({productName:L,totalQuantity:z.totalQuantity,totalAmount:z.totalAmount})),J=async()=>{try{const L=P.filter(xe=>xe.status==="FLOTANTE"),z=L.length>0?L:e.filter(xe=>xe.status!=="PROCESADA");if(z.length===0){d("No hay ventas para procesar.");return}const R={totalCharged:Au(z.reduce((xe,Y)=>xe+(Y.amount||0),0)),totalSuggested:Au(z.reduce((xe,Y)=>xe+(Y.amountSuggested||0),0)),totalUnits:YN(z.reduce((xe,Y)=>xe+(Y.quantity||0),0)),totalCOGS:Au(z.reduce((xe,Y)=>xe+Number(Y.cogsAmount??0),0))},G=Au(R.totalCharged-R.totalSuggested),ee=Au(R.totalCharged-R.totalCOGS),te=await En(At(ke,"daily_closures"),{date:S,createdAt:rr.now(),totalCharged:R.totalCharged,totalSuggested:R.totalSuggested,totalDifference:G,totalUnits:R.totalUnits,totalCOGS:R.totalCOGS,grossProfit:ee,products:z.map(xe=>({productName:xe.productName,quantity:xe.quantity,amount:xe.amount})),salesV2:z.map(xe=>({id:xe.id,productName:xe.productName,quantity:xe.quantity,amount:xe.amount,amountSuggested:xe.amountSuggested,userEmail:xe.userEmail,clientName:xe.clientName,amountReceived:xe.amountReceived,change:xe.change,status:xe.status,cogsAmount:xe.cogsAmount??0,avgUnitCost:xe.avgUnitCost??null,allocations:xe.allocations??[],date:xe.date})),productSummary:Object.entries(z.reduce((xe,Y)=>{const W=Y.productName||"(sin nombre)";return xe[W]||(xe[W]={totalQuantity:0,totalAmount:0}),xe[W].totalQuantity=YN(xe[W].totalQuantity+(Y.quantity||0)),xe[W].totalAmount=Au(xe[W].totalAmount+(Y.amount||0)),xe},{})).map(([xe,Y])=>({productName:xe,totalQuantity:Y.totalQuantity,totalAmount:Y.totalAmount}))}),Q=K0(ke);z.forEach(xe=>{Q.update(Gt(ke,"salesV2",xe.id.split("#")[0]),{status:"PROCESADA",closureId:te.id,closureDate:S})}),await Q.commit(),d(` Cierre guardado. Ventas procesadas: ${z.length}.`)}catch(L){console.error(L),d(" Error al guardar el cierre.")}},pe=async L=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await rn(Gt(ke,"salesV2",L.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(z){console.error(z),d(" No se pudo revertir la venta.")}},Se=L=>{m(L),g(L.quantity),y(L.amount),w(L.clientName),T(L.amountReceived),E(L.change)},k=async()=>{if(f)try{await rn(Gt(ke,"salesV2",f.id.split("#")[0]),{quantity:p,amount:x,amountCharged:x,clientName:b,amountReceived:I,change:C}),m(null),d(" Venta actualizada.")}catch(L){console.error(L),d(" No se pudo actualizar la venta.")}},F=async L=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:z}=await sSe(L.split("#")[0]);d(` Venta eliminada. Stock restaurado: ${Number(z).toFixed(2)}.`)}catch(z){console.error(z),d(" No se pudo eliminar la venta.")}},H=async()=>{if(O.current){O.current.classList.add("force-pdf-colors");try{const z=(await G0(O.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),R=new Br;R.addImage(z,"PNG",10,10,190,0),R.save(`cierre_${S}.pdf`)}finally{O.current.classList.remove("force-pdf-colors")}}},M=!t||t==="admin";return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",S]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:L=>h(L.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),l?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:O,children:[o.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[P.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${L.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:L.status})}),o.jsx("td",{className:"border p-1",children:L.productName}),o.jsx("td",{className:"border p-1",children:yB(L.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",j1(L.amount)]}),o.jsx("td",{className:"border p-1",children:L.date}),o.jsx("td",{className:"border p-1",children:L.userEmail}),o.jsx("td",{className:"border p-1",children:L.status==="FLOTANTE"?o.jsxs("div",{className:"flex gap-2 justify-center",children:[M&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Se(L),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>F(L.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!M&&o.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):L.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:M?o.jsx("button",{onClick:()=>pe(L.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},L.id)),P.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[o.jsxs("div",{children:[" ","Total Libras/Unidades: ",o.jsx("strong",{children:yB(X)})]}),o.jsxs("div",{children:[" ","Total cobrado: ",o.jsxs("strong",{children:["C$",j1(D)]})]})]}),(de>0||re!==D)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",o.jsxs("strong",{children:["C$",j1(de)]})]}),o.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",j1(re)]})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[ce.map(L=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:L.productName}),o.jsx("td",{className:"border p-1",children:yB(L.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",j1(L.totalAmount)]})]},L.productName)),ce.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:J,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:H,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[f.productName,"  ",f.userEmail]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:p,onChange:L=>g(parseFloat(L.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:x,onChange:L=>y(parseFloat(L.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:L=>w(L.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:L=>T(parseFloat(L.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:C,onChange:L=>E(L.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>m(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:k,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const lu=t=>Number(t??0).toFixed(2),Eg=t=>Number(t??0).toFixed(3);function oSe(){var y,b,w,I;const t=async T=>{if(!window.confirm(`Eliminar el cierre del ${T.date}?`))return;const C=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(C){const E=await Dt(Yt(At(ke,"salesV2"),lr("closureId","==",T.id)));if(!E.empty){const S=K0(ke);E.forEach(O=>{S.update(Gt(ke,"salesV2",O.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await S.commit()}}await Qn(Gt(ke,"daily_closures",T.id)),(u==null?void 0:u.id)===T.id&&d(null),await m(),h(` Cierre eliminado${C?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(wr(qJ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(wr(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[A,h]=v.useState(""),f=v.useRef(null),m=async()=>{try{i(!0);const T=Yt(At(ke,"daily_closures"),lr("date",">=",e),lr("date","<=",n)),C=await Dt(T),E=[];C.forEach(S=>E.push({id:S.id,...S.data()})),E.sort((S,O)=>S.date<O.date?1:S.date>O.date?-1:0),c(E)}catch(T){console.error(T),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async T=>{T.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const T=Number(u.totalUnits??0),C=Number(u.totalSuggested??0),E=Number(u.totalCharged??0),S=Number(u.totalDifference??(isFinite(E-C)?E-C:0)),O=Number(u.totalCOGS??0),B=Number(u.grossProfit??(isFinite(E-O)?E-O:0));return{units:T,sug:C,chg:E,diff:S,cogs:O,profit:B}},[u]),x=async()=>{if(!f.current||!u)return;const T=f.current;T.classList.add("force-pdf-colors");try{const[{default:C},{jsPDF:E}]=await Promise.all([Af(()=>Promise.resolve().then(()=>v6),void 0),Af(()=>Promise.resolve().then(()=>Rj),void 0)]),O=(await C(T,{backgroundColor:"#ffffff",onclone:D=>{const X=D.defaultView;D.body.querySelectorAll("*").forEach(re=>{const ie=X.getComputedStyle(re);ie.color&&(re.style.color=ie.color),ie.backgroundColor&&ie.backgroundColor!=="rgba(0, 0, 0, 0)"&&(re.style.backgroundColor=ie.backgroundColor),ie.borderColor&&(re.style.borderColor=ie.borderColor)})}})).toDataURL("image/png"),{jsPDF:B}=await Af(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>Rj);return{jsPDF:D}},void 0),P=new B;P.addImage(O,"PNG",10,10,190,0),P.save(`cierre_${u.date}.pdf`)}finally{T.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:T=>r(T.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:T=>a(T.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?o.jsx("p",{children:"Cargando..."}):l.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:l.map(T=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:T.date}),o.jsx("td",{className:"border p-1",children:Eg(T.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.grossProfit??Number(T.totalCharged??0)-Number(T.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(T),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(T),children:"Eliminar"})]})})]},T.id))})]}),u&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),o.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:f,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:Eg(g.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",lu(g.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",lu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:u.salesV2.map((T,C)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:T.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Eg(T.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:T.date??""}),o.jsx("td",{className:"border p-1",children:T.userEmail??""})]},C))})]})]}):(b=u.sales)!=null&&b.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:u.sales.map((T,C)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:T.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Eg(T.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.amount)]}),o.jsx("td",{className:"border p-1",children:T.userEmail??""}),o.jsx("td",{className:"border p-1",children:T.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof T.change=="number"?lu(T.change):T.change??"0"})]},C))})]})]}):(w=u.products)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:u.products.map((T,C)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:T.productName}),o.jsx("td",{className:"border p-1",children:Eg(T.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.amount)]})]},C))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(I=u.productSummary)!=null&&I.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:u.productSummary.map((T,C)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:T.productName}),o.jsx("td",{className:"border p-1",children:Eg(T.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",lu(T.totalAmount)]})]},C))})]})]}):null]})]}),A&&o.jsx("p",{className:"mt-3 text-sm",children:A})]})}function lSe(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!1),[c,u]=v.useState("vendedor_pollo"),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,I]=v.useState("vendedor_pollo"),[T,C]=v.useState(""),[E,S]=v.useState(!1),[O,B]=v.useState([]),P=F=>!F||F==="vendedor"?"vendedor_pollo":F==="admin"||F==="vendedor_pollo"||F==="vendedor_ropa"||F==="vendedor_dulces"?F:"vendedor_pollo",D=async()=>{x(!0);const F=await Dt(At(ke,"users")),H=[];F.forEach(M=>{const L=M.data();H.push({id:M.id,email:L.email??"",name:L.name??"",role:P(L.role),sellerCandyId:L.sellerCandyId??""})}),p(H),x(!1)},X=async()=>{try{const F=await Dt(At(ke,"sellers_candies")),H=[];F.forEach(M=>{const L=M.data();H.push({id:M.id,name:L.name??"(sin nombre)",branchLabel:L.branch??"",commissionPercent:Number(L.commissionPercent??0)})}),B(H)}catch(F){console.error("Error cargando sellers_candies:",F)}};v.useEffect(()=>{D(),X()},[]);const de=()=>{e(""),n(""),s(""),u("vendedor_pollo"),f("")},re=async F=>{if(F.preventDefault(),A(""),a.length<4){A(" La contrasea debe tener al menos 4 caracteres.");return}if(!t.trim()){A(" El nombre es obligatorio.");return}try{const H=hO(),M=fO(H.options,"Secondary"),L=UX(M),z=await Y0e(L,r,a),R=P(c),G=R==="vendedor_dulces"&&h||"";await MJ(Gt(At(ke,"users"),z.user.uid),{email:r,name:t.trim(),role:R,sellerCandyId:G}),await bI(L),await Ghe(M),p(ee=>[{id:z.user.uid,email:r,name:t.trim(),role:R,sellerCandyId:G},...ee]),A(" Usuario creado correctamente."),de(),S(!1)}catch(H){console.error(H),A(" Error al crear el usuario: "+H.message)}},ie=F=>{b(F.id),I(P(F.role)),C(F.sellerCandyId||"")},ce=()=>{b(null),I("vendedor_pollo"),C("")},J=async()=>{if(!y)return;const F=Gt(ke,"users",y),H=P(w),M=H==="vendedor_dulces"&&T||"";await rn(F,{role:H,sellerCandyId:M}),p(L=>L.map(z=>z.id===y?{...z,role:H,sellerCandyId:M}:z)),ce()},pe=async F=>{confirm("Eliminar este usuario del listado?")&&(await Qn(Gt(ke,"users",F)),p(M=>M.filter(L=>L.id!==F)))},Se=F=>{const H=F==="admin"?"admin":F==="vendedor_ropa"?"vendedor_ropa":F==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",M=H==="admin"?"bg-blue-100 text-blue-700":H==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":H==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M}`,children:H})},k=F=>`${F.name}  ${F.branchLabel||"Sin sucursal"}  ${F.commissionPercent.toFixed(2)}%`;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>S(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:g?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(F=>{const H=y===F.id,M=(H?w:F.role)==="vendedor_dulces";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.name||""}),o.jsx("td",{className:"p-2 border",children:F.email}),o.jsx("td",{className:"p-2 border",children:H?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:L=>I(L.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),o.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]}),w==="vendedor_dulces"&&o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:T,onChange:L=>C(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),O.map(L=>o.jsx("option",{value:L.id,children:k(L)},L.id))]})]}):o.jsxs(o.Fragment,{children:[Se(F.role),M&&F.sellerCandyId&&o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),o.jsx("td",{className:"p-2 border space-x-2",children:H?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:J,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ie(F),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>pe(F.id),children:"Eliminar"})]})})]},F.id)})})]})}),d&&o.jsx("p",{className:"text-sm mt-2",children:d}),E&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:re,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:F=>e(F.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:F=>n(F.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:F=>s(F.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(F=>!F),children:i?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:F=>u(F.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),o.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]})]}),c==="vendedor_dulces"&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),o.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:F=>f(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),O.map(F=>o.jsx("option",{value:F.id,children:k(F)},F.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),d&&o.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const cSe=t=>`C$${(Number(t)||0).toFixed(2)}`;function uSe(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState([]),[h,f]=v.useState(!0),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(""),[T,C]=v.useState(""),[E,S]=v.useState(0),[O,B]=v.useState(!1),P=async()=>{f(!0);const pe=await Dt(At(ke,"products")),Se=[];pe.forEach(k=>{const F=k.data();Se.push({id:k.id,name:F.name??"",price:Number(F.price??0),category:F.category??"",measurement:F.measurement??"",active:F.active!==!1})}),A(Se),f(!1)};v.useEffect(()=>{P()},[]);const D=async pe=>{if(pe.preventDefault(),s(""),!t||r<=0||!c){s(" Completa nombre, precio vlido y unidad de medida");return}try{const Se={name:t,price:parseFloat(r.toFixed(2)),category:i,measurement:c,active:!0},k=await En(At(ke,"products"),Se);A(F=>[{id:k.id,...Se},...F]),s(" Producto registrado con exito."),e(""),n(0),u(""),l(""),B(!1)}catch(Se){s(" Error: "+Se.message)}},X=pe=>{x(pe.id),b(pe.name),I(pe.category),C(pe.measurement),S(pe.price)},de=()=>{x(null),b(""),I(""),C(""),S(0)},re=async()=>{if(!g)return;const pe=Gt(ke,"products",g);await rn(pe,{name:y,category:w,measurement:T,price:parseFloat((E||0).toFixed(2))}),A(Se=>Se.map(k=>k.id===g?{...k,name:y,category:w,measurement:T,price:parseFloat((E||0).toFixed(2))}:k)),de()},ie=async pe=>{const Se=Gt(ke,"products",pe.id),k=pe.active===!1;await rn(Se,{active:k}),A(F=>F.map(H=>H.id===pe.id?{...H,active:k}:H))},ce=async pe=>{const Se=Yt(At(ke,"inventory_batches"),lr("productId","==",pe),DJ(1));if(!(await Dt(Se)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Qn(Gt(ke,"products",pe)),A(H=>H.filter(M=>M.id!==pe)))},J=m?d:d.filter(pe=>pe.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{s(""),B(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),O&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>B(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>B(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:i,onChange:pe=>l(pe.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:pe=>e(pe.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:c,onChange:pe=>u(pe.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:pe=>n(parseFloat(pe.target.value)),onFocus:pe=>pe.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),a&&o.jsx("p",{className:"text-sm mt-2",children:a})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:pe=>p(pe.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:h?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):J.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):J.map(pe=>{const Se=g===pe.id,k=pe.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:F=>b(F.target.value)}):pe.name}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:F=>I(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):pe.category}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:F=>C(F.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):pe.measurement}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:F=>S(parseFloat(F.target.value))}):cSe(pe.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:k?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:Se?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:re,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:de,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>X(pe),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${k?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>ie(pe),children:k?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ce(pe.id),children:"Eliminar"})]})})]},pe.id)})})]})})]})}const No=[];for(let t=0;t<256;++t)No.push((t+256).toString(16).slice(1));function dSe(t,e=0){return(No[t[e+0]]+No[t[e+1]]+No[t[e+2]]+No[t[e+3]]+"-"+No[t[e+4]]+No[t[e+5]]+"-"+No[t[e+6]]+No[t[e+7]]+"-"+No[t[e+8]]+No[t[e+9]]+"-"+No[t[e+10]]+No[t[e+11]]+No[t[e+12]]+No[t[e+13]]+No[t[e+14]]+No[t[e+15]]).toLowerCase()}let bB;const ASe=new Uint8Array(16);function fSe(){if(!bB){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bB=crypto.getRandomValues.bind(crypto)}return bB(ASe)}const hSe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),EQ={randomUUID:hSe};function mSe(t,e,r){var a;if(EQ.randomUUID&&!t)return EQ.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??fSe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,dSe(n)}async function pSe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=At(t,"inventory_batches"),s=Yt(a,lr("productName","==",e)),c=(await Dt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const A=u.data.date??"",h=d.data.date??"";if(A!==h)return A<h?-1:1;const f=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return f-m}).map(u=>Gt(t,"inventory_batches",u.id));return Di(t,async u=>{let d=Number(r);const A=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),I=Number(b.remaining??w??0),T=Number(b.purchasePrice??0);if(I<=0)continue;const C=Math.min(I,d),E=Number((I-C).toFixed(3));u.update(x,{remaining:E}),A.push({batchId:x.id,qty:C,unitCost:T,lineCost:Number((C*T).toFixed(2))}),d=Number((d-C).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const f=Number(A.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=A.reduce((g,x)=>g+x.qty,0),p=m>0?Number((f/m).toFixed(4)):0;return{allocations:A,avgUnitCost:p,cogsAmount:f}})}const Hee=3,gSe=.5*10**-Hee;function ws(t){const e=Number(t??0);return Number(e.toFixed(Hee))}function wB(t,e){return ws((t??0)+(e??0))}function JN(t,e){return ws(t)+gSe>=ws(e)}async function xSe(t,e){const r=await Dt(At(ke,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await rn(Gt(ke,"inventory_batches",s.id),{productId:e}),a++)}return a}function SQ({user:t}){const[e,r]=v.useState([]),[n,a]=v.useState([]),[s,i]=v.useState(""),[l,c]=v.useState(wr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(""),[A,h]=v.useState([]),[f,m]=v.useState(0),[p,g]=v.useState(0),[x,y]=v.useState("0"),[b,w]=v.useState(""),[I,T]=v.useState(!1),[C,E]=v.useState({}),S=M=>Math.round(M*100)/100,O=M=>ws(M).toFixed(3),B=M=>{const L=Number(M.specialPrice||0);return L>0?L:Number(M.price||0)},P=async M=>{if(!M)return 0;const L=Yt(At(ke,"inventory_batches"),lr("productId","==",M)),z=await Dt(L);let R=0;return z.forEach(G=>{const ee=G.data();R=wB(R,Number(ee.remaining||0))}),ws(R)},D=async M=>{if(!M)return 0;const L=await Dt(At(ke,"inventory_batches"));let z=0;return L.forEach(R=>{const G=R.data();(G.productName||"").trim().toLowerCase()===M.trim().toLowerCase()&&(z=wB(z,Number(G.remaining||0)))}),ws(z)};v.useEffect(()=>{(async()=>{const M=await Dt(At(ke,"products")),L=[];M.forEach(z=>{const R=z.data();(R==null?void 0:R.active)!==!1&&L.push({id:z.id,productName:R.name??R.productName??"(sin nombre)",price:Number(R.price??0),measurement:R.measurement??"(sin unidad)",category:R.category??"(sin categora)"})}),r(L)})()},[]),v.useEffect(()=>{(async()=>{const M=await Dt(At(ke,"inventory_batches")),L={};M.forEach(z=>{const R=z.data(),G=R.productId,ee=Number(R.remaining||0);G&&(L[G]=wB(L[G]||0,ee))}),Object.keys(L).forEach(z=>L[z]=ws(L[z])),E(L)})()},[]),v.useEffect(()=>{(async()=>{const M=await Dt(At(ke,"users")),L=[];M.forEach(z=>{const R=z.data();L.push({id:z.id,email:R.email??"(sin email)",role:R.role??"USER"})}),a(L)})()},[]);const X=async()=>{if(!s)return;const M=e.find(z=>z.id===s);if(!M)return;if(A.some(z=>z.productId===M.id)){i("");return}const L=await P(M.id);h(z=>[...z,{productId:M.id,productName:M.productName,measurement:M.measurement,price:Number(M.price||0),specialPrice:0,stock:L,qty:0,discount:0}]),i("")},de=M=>{h(L=>L.filter(z=>z.productId!==M))},re=async(M,L)=>{h(z=>z.map(R=>{if(R.productId!==M)return R;const G=(R.measurement||"").toLowerCase()!=="lb",ee=L===""?0:Number(L),te=G?Math.max(0,Math.round(ee)):ws(ee);return{...R,qty:te}}))},ie=(M,L)=>{h(z=>z.map(R=>{if(R.productId!==M)return R;const G=(L||"").replace(",","."),ee=G.trim()===""?0:Number(G),te=Number.isFinite(ee)?Math.max(0,S(ee)):0;return{...R,specialPrice:te}}))},ce=(M,L)=>{h(z=>z.map(R=>{if(R.productId!==M)return R;const G=Math.max(0,Math.floor(Number(L||0)));return{...R,discount:G}}))},J=v.useMemo(()=>{let M=0;for(const L of A){const z=B(L),R=Number(z||0)*Number(L.qty||0),G=Math.max(0,R-Math.max(0,Number(L.discount||0)));M+=G}return S(M)},[A]);v.useEffect(()=>{m(J)},[J]),v.useEffect(()=>{const M=Number(p)||0,L=Number(f)||0;y((M-L).toFixed(2))},[p,f]);const pe=M=>{M.key===","&&(M.preventDefault(),M.target.value+=".")},Se=async()=>{if(A.length===0)return"Agrega al menos un producto.";for(const M of A){if(!M.qty||M.qty<=0)return`Cantidad invlida para "${M.productName}".`;const L=await P(M.productId);if(!JN(L,M.qty)){const z=await D(M.productName);if(JN(z,0)&&!JN(L,0)){const R=await xSe(M.productName,M.productId),G=await P(M.productId);if(!JN(G,M.qty))return`Stock insuficiente tras corregir ${R} lote(s) para "${M.productName}".`}else return`Stock insuficiente para "${M.productName}". Disponible: ${L}`}}return null},k=async M=>{var z,R;M.preventDefault(),w("");const L=await Se();if(L){w(" "+L);return}try{T(!0);const G=[];for(const Q of A){const xe=Q.qty,{allocations:Y,avgUnitCost:W,cogsAmount:le}=await pSe(ke,Q.productName,xe,!1),Pe=B(Q),Le=Number(Pe||0)*Number(xe||0),qe=Math.max(0,Number(Q.discount||0)),nt=Math.max(0,Le-qe);G.push({productId:Q.productId,productName:Q.productName,measurement:Q.measurement,unitPrice:Number(Pe||0),regularPrice:Number(Q.price||0),specialPrice:Number(Q.specialPrice||0)>0?Number(Q.specialPrice):null,qty:xe,discount:qe,lineTotal:S(Le),lineFinal:S(nt),allocations:Y,avgUnitCost:W,cogsAmount:le})}const ee=G.reduce((Q,xe)=>Q+xe.lineFinal,0),te=G.reduce((Q,xe)=>Q+Number(xe.qty||0),0);await En(At(ke,"salesV2"),{id:mSe(),quantity:te,amount:ee,amountCharged:ee,amountReceived:Number(p)||0,change:x,clientName:u.trim(),timestamp:rr.now(),date:l,userEmail:((z=n[0])==null?void 0:z.email)??"sin usuario",vendor:((R=n[0])==null?void 0:R.role)??"sin usuario",status:"FLOTANTE",items:G,itemsTotal:ee}),w(" Venta registrada y asignada a inventario (FIFO)."),h([]),i(""),m(0),g(0),y("0"),d(""),c(wr(new Date,"yyyy-MM-dd"))}catch(G){console.error(G),w(` ${(G==null?void 0:G.message)||"Error al registrar la venta."}`)}finally{T(!1)}},F=v.useMemo(()=>new Set(A.map(M=>M.productId)),[A]),H=v.useMemo(()=>e.filter(M=>(C[M.id]||0)>0),[e,C]);return o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:k,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:s,onChange:M=>i(M.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),H.map(M=>o.jsxs("option",{value:M.id,disabled:F.has(M.id),title:F.has(M.id)?"Ya est en la lista":`Disponible: ${O(C[M.id]||0)}`,children:[M.productName,"  ",M.measurement,"  C$ ",M.price," (disp:"," ",O(C[M.id]||0),")"]},M.id))]}),o.jsx("button",{type:"button",onClick:X,disabled:!s||F.has(s),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:M=>c(M.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:u,onChange:M=>d(M.target.value),placeholder:"Opcional"})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):A.map(M=>{const L=B(M),z=Number(L||0)*Number(M.qty||0),R=Math.max(0,z-Math.max(0,Number(M.discount||0))),G=(M.measurement||"").toLowerCase()!=="lb",ee=ws(Number(M.stock)-Number(M.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[M.productName,"  ",M.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(M.price).toFixed(2)]}),o.jsxs("td",{className:"p-2 border",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:M.specialPrice===0?"":M.specialPrice,onKeyDown:pe,onChange:te=>ie(M.productId,te.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),o.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",S(L).toFixed(2)]})]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ee.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:G?1:.01,inputMode:G?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:M.qty===0?"":M.qty,onKeyDown:pe,onChange:te=>re(M.productId,te.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:M.discount===0?"":M.discount,onChange:te=>ce(M.productId,te.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",S(R).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>de(M.productId),title:"Quitar",children:""})})]},M.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${f.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:p===0?"":p,onChange:M=>g(Number(M.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x}`,readOnly:!0})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:A.length===0||I,children:I?"Guardando...":"Guardar venta"}),b&&o.jsx("p",{className:`text-sm mt-2 ${b.startsWith("")?"text-green-600":b.startsWith("")?"text-yellow-600":"text-red-600"}`,children:b})]}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var $ee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IQ=ao.createContext&&ao.createContext($ee),vSe=["attr","size","title"];function ySe(t,e){if(t==null)return{};var r=bSe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function UE(){return UE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UE.apply(this,arguments)}function BQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BQ(Object(r),!0).forEach(function(n){wSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wSe(t,e,r){return e=NSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NSe(t){var e=_Se(t,"string");return typeof e=="symbol"?e:e+""}function _Se(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kee(t){return t&&t.map((e,r)=>ao.createElement(e.tag,QE({key:r},e.attr),Kee(e.child)))}function CSe(t){return e=>ao.createElement(ESe,UE({attr:QE({},t.attr)},e),Kee(t.child))}function ESe(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=ySe(t,vSe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),ao.createElement("svg",UE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:QE(QE({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ao.createElement("title",null,s),t.children)};return IQ!==void 0?ao.createElement(IQ.Consumer,null,r=>e(r)):e($ee)}function SSe(t){return CSe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Xc({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(SSe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const Gi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function NB(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function ISe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState(!0),[u,d]=v.useState(""),{refreshKey:A,refresh:h}=fc(),f=t==="admin",[m,p]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[g,x]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[y,b]=v.useState(""),[w,I]=v.useState(!1),[T,C]=v.useState(""),[E,S]=v.useState(wr(new Date,"yyyy-MM-dd")),[O,B]=v.useState("lb"),[P,D]=v.useState(""),[X,de]=v.useState(0),[re,ie]=v.useState(0),[ce,J]=v.useState(0),[pe,Se]=v.useState([]),[k,F]=v.useState(null),[H,M]=v.useState([]),[L,z]=v.useState(!1),[R,G]=v.useState(null),[ee,te]=v.useState(!1),[Q,xe]=v.useState(null),Y=oe=>{const je=(oe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(je)||je==="lb"};v.useEffect(()=>{(async()=>{c(!0),d("");const oe=await Dt(At(ke,"products")),je=[];oe.forEach(Te=>{const Ee=Te.data();Ee.active===!0&&je.push({id:Te.id,name:Ee.name??Ee.productName??"(sin nombre)",category:Ee.category??"(sin categora)",measurement:Ee.measurement??"lb",price:Number(Ee.price??0)})}),a(je);const Qe=Yt(At(ke,"inventory_batches"),ln("date","desc")),tt=await Dt(Qe),rt=[];tt.forEach(Te=>{const Ee=Te.data(),V=ws(Number(Ee.quantity||0)),Ae=Number(Ee.purchasePrice||0),Ne=Number(Ee.salePrice||0),Re=Number((V*Ae).toFixed(2)),ze=Number((V*Ne).toFixed(2));rt.push({id:Te.id,productId:Ee.productId,productName:Ee.productName,category:Ee.category,unit:Ee.unit,quantity:V,remaining:ws(Number(Ee.remaining||0)),purchasePrice:Ae,salePrice:Ne,invoiceTotal:Ee.invoiceTotal!=null?Number(Ee.invoiceTotal):Re,expectedTotal:Ee.expectedTotal!=null?Number(Ee.expectedTotal):ze,date:Ee.date,createdAt:Ee.createdAt,status:Ee.status,notes:Ee.notes,paidAmount:Number(Ee.paidAmount||0),paidAt:Ee.paidAt,batchGroupId:Ee.batchGroupId,orderName:Ee.orderName})}),i(rt),c(!1)})()},[A]);const W=v.useMemo(()=>s.filter(oe=>!(m&&oe.date<m||g&&oe.date>g||y&&oe.productId!==y)),[s,m,g,y]),le=v.useMemo(()=>{const oe=W.reduce((Ae,Ne)=>Ae+Number(Ne.invoiceTotal||0),0),je=W.reduce((Ae,Ne)=>Ae+Number(Ne.expectedTotal||0),0);let Qe=0,tt=0,rt=0,Te=0;for(const Ae of W)Y(Ae.unit)?(Qe+=Ae.quantity,tt+=Ae.remaining):(rt+=Ae.quantity,Te+=Ae.remaining);const Ee=W.reduce((Ae,Ne)=>Ae+Ne.quantity,0),V=W.reduce((Ae,Ne)=>Ae+Ne.remaining,0);return{lbsIng:Qe,lbsRem:tt,udsIng:rt,udsRem:Te,qty:Ee,rem:V,totalFacturado:oe,totalEsperado:je}},[W]),Pe=v.useMemo(()=>{var Qe,tt;const oe=new Map;for(const rt of W){const Te=rt.batchGroupId&&String(rt.batchGroupId).trim()||rt.id;oe.has(Te)||oe.set(Te,[]),oe.get(Te).push(rt)}const je=[];for(const[rt,Te]of oe.entries()){const Ee=[...Te].sort((ot,be)=>{var bt,Rt;const Ge=((bt=ot.createdAt)==null?void 0:bt.seconds)??0;return(((Rt=be.createdAt)==null?void 0:Rt.seconds)??0)-Ge}),V=((Qe=Ee[0])==null?void 0:Qe.date)||"",Ae=String(((tt=Ee[0])==null?void 0:tt.orderName)||"").trim()||`Pedido ${V||""}`.trim()||"Pedido",Ne=new Set(Ee.map(ot=>String(ot.category||"").trim()).filter(Boolean)),Re=Ne.size===1?Array.from(Ne)[0].toUpperCase():"MIXTO",ze=Ee.some(ot=>ot.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Ye=ws(Ee.reduce((ot,be)=>ot+(Y(be.unit)?Number(be.quantity||0):0),0)),Ze=ws(Ee.reduce((ot,be)=>ot+(Y(be.unit)?Number(be.remaining||0):0),0)),dt=Number(Ee.reduce((ot,be)=>ot+Number(be.invoiceTotal||0),0).toFixed(2)),ge=Number(Ee.reduce((ot,be)=>ot+Number(be.expectedTotal||0),0).toFixed(2)),Xe=Number((ge-dt).toFixed(2));je.push({groupId:rt,orderName:Ae,date:V,typeLabel:Re,status:ze,lbsIn:Ye,lbsRem:Ze,totalFacturado:dt,totalEsperado:ge,utilidadBruta:Xe,items:Ee})}return je.sort((rt,Te)=>rt.date===Te.date?rt.groupId<Te.groupId?1:-1:rt.date<Te.date?1:-1),je},[W]),Le=v.useMemo(()=>{const oe=String(O||"").toLowerCase().trim();return n.filter(Qe=>String(Qe.measurement||"").toLowerCase().trim()===oe).sort((Qe,tt)=>Qe.name.localeCompare(tt.name,"es"))},[n,O]);v.useEffect(()=>{const oe=n.find(je=>je.id===P);oe&&J(Number(oe.price||0))},[P,n,A]);const qe=()=>{d("");const oe=n.find(V=>V.id===P);if(!oe)return d("Selecciona un producto.");if(X<=0||re<=0)return d("Completa libras a ingresar y precio proveedor.");const je=ws(X),Qe=oe.measurement,tt=Number((je*Number(re||0)).toFixed(2)),rt=Number((je*Number(ce||0)).toFixed(2)),Te=Number((rt-tt).toFixed(2)),Ee=pe.findIndex(V=>V.productId===oe.id);Ee>=0?Se(V=>V.map((Ae,Ne)=>Ne!==Ee?Ae:{...Ae,quantity:je,remaining:je,purchasePrice:Number(re||0),salePrice:Number(ce||0),invoiceTotal:tt,expectedTotal:rt,utilidadBruta:Te})):Se(V=>[...V,{tempId:NB("IT"),productId:oe.id,productName:oe.name,category:oe.category,unit:Qe,quantity:je,remaining:je,purchasePrice:Number(re||0),salePrice:Number(ce||0),invoiceTotal:tt,expectedTotal:rt,utilidadBruta:Te}]),D(""),de(0),ie(0),J(0)},nt=oe=>{Se(je=>je.filter(Qe=>Qe.tempId!==oe))},st=(oe,je,Qe)=>{Se(tt=>tt.map(rt=>{if(rt.tempId!==oe)return rt;const Te={...rt};return je==="quantity"&&(Te.quantity=ws(Math.max(0,Qe)),k||(Te.remaining=Te.quantity)),je==="purchasePrice"&&(Te.purchasePrice=Math.max(0,Number(Qe||0))),je==="salePrice"&&(Te.salePrice=Math.max(0,Number(Qe||0))),Te.invoiceTotal=Number((Te.quantity*Te.purchasePrice).toFixed(2)),Te.expectedTotal=Number((Te.quantity*Te.salePrice).toFixed(2)),Te.utilidadBruta=Number((Te.expectedTotal-Te.invoiceTotal).toFixed(2)),Te}))},Et=v.useMemo(()=>{const oe=ws(pe.reduce((Te,Ee)=>Te+(Y(Ee.unit)?Number(Ee.quantity||0):0),0)),je=ws(pe.reduce((Te,Ee)=>Te+(Y(Ee.unit)?Number(Ee.remaining||0):0),0)),Qe=Number(pe.reduce((Te,Ee)=>Te+Number(Ee.invoiceTotal||0),0).toFixed(2)),tt=Number(pe.reduce((Te,Ee)=>Te+Number(Ee.expectedTotal||0),0).toFixed(2)),rt=Number((tt-Qe).toFixed(2));return{lbsIn:oe,lbsRem:je,totalFacturado:Qe,totalEsperado:tt,utilidadBruta:rt}},[pe]),yt=()=>{F(null),M([]),C(""),S(wr(new Date,"yyyy-MM-dd")),B("lb"),D(""),de(0),ie(0),J(0),Se([])},Ct=async()=>{if(d(""),!pe.length)return d("Agrega al menos un producto al pedido.");const oe=E||wr(new Date,"yyyy-MM-dd"),je=String(T||"").trim()||`Pedido ${oe}`,Qe=k||NB("BATCH");try{if(!k){for(const Ee of pe)await _Q({productId:Ee.productId,productName:Ee.productName,category:Ee.category,unit:Ee.unit,quantity:ws(Ee.quantity),purchasePrice:Number(Ee.purchasePrice||0),salePrice:Number(Ee.salePrice||0),invoiceTotal:Number(Ee.invoiceTotal||0),expectedTotal:Number(Ee.expectedTotal||0),date:oe,notes:"",batchGroupId:Qe,orderName:je});d(" Pedido creado"),I(!1),yt(),h();return}const tt=H,rt=new Map;for(const Ee of tt)rt.set(Ee.productId,Ee);const Te=new Set(pe.map(Ee=>Ee.productId));for(const Ee of pe){const V=rt.get(Ee.productId),Ae=ws(Ee.quantity);if(V){const Ne=ws(V.quantity-V.remaining),Re=Math.max(0,ws(Ae-Ne));await rn(Gt(ke,"inventory_batches",V.id),{date:oe,orderName:je,batchGroupId:Qe,quantity:Ae,purchasePrice:Number(Ee.purchasePrice||0),salePrice:Number(Ee.salePrice||0),invoiceTotal:Number(Ee.invoiceTotal||0),expectedTotal:Number(Ee.expectedTotal||0),remaining:Re})}else await _Q({productId:Ee.productId,productName:Ee.productName,category:Ee.category,unit:Ee.unit,quantity:Ae,purchasePrice:Number(Ee.purchasePrice||0),salePrice:Number(Ee.salePrice||0),invoiceTotal:Number(Ee.invoiceTotal||0),expectedTotal:Number(Ee.expectedTotal||0),date:oe,notes:"",batchGroupId:Qe,orderName:je})}for(const Ee of tt)Te.has(Ee.productId)||await Qn(Gt(ke,"inventory_batches",Ee.id));d(" Pedido actualizado"),I(!1),yt(),h()}catch(tt){console.error(tt),d(" Error al guardar pedido")}},Ot=oe=>{G(oe),z(!0)},Pt=oe=>{F(oe.groupId),M(oe.items),C(oe.orderName),S(oe.date||wr(new Date,"yyyy-MM-dd"));const je=oe.items.map(Qe=>{const tt=Number(Qe.invoiceTotal||0),rt=Number(Qe.expectedTotal||0);return{tempId:NB("IT"),productId:Qe.productId,productName:Qe.productName,category:Qe.category,unit:Qe.unit,quantity:ws(Qe.quantity),remaining:ws(Qe.remaining),purchasePrice:Number(Qe.purchasePrice||0),salePrice:Number(Qe.salePrice||0),invoiceTotal:tt,expectedTotal:rt,utilidadBruta:Number((rt-tt).toFixed(2))}});Se(je),I(!0)},fe=async oe=>{if(confirm(`Eliminar el pedido "${oe.orderName}" del ${oe.date}?`))try{for(const Qe of oe.items)await Qn(Gt(ke,"inventory_batches",Qe.id));d(" Pedido eliminado"),h()}catch(Qe){console.error(Qe),d(" Error al eliminar pedido")}},Ke=oe=>{xe(oe),te(!0)},ve=async()=>{if(Q)try{for(const oe of Q.items){if(oe.status!=="PENDIENTE")continue;await Vee(oe.id),await rn(Gt(ke,"inventory_batches",oe.id),{remaining:0});const je={date:oe.date,productName:oe.productName,quantity:oe.quantity,amount:Number((oe.expectedTotal??oe.salePrice*oe.quantity).toFixed(2)),allocations:[{batchId:oe.id,qty:oe.quantity,unitCost:oe.purchasePrice,lineCost:Number((oe.purchasePrice*oe.quantity).toFixed(2))}],avgUnitCost:oe.purchasePrice,measurement:oe.unit,createdAt:rr.now(),autoGeneratedFromInventory:!0};await En(At(ke,"salesV2"),je)}d(" Pedido pagado y reflejado como venta"),h()}catch(oe){console.error(oe),d(" Error al pagar pedido")}finally{te(!1),xe(null)}},he=()=>{te(!1),xe(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),f&&o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{yt(),I(!0)},children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:oe=>p(oe.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:oe=>x(oe.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:oe=>b(oe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),n.map(oe=>o.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category]},oe.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{p(""),x(""),b("")},children:"Quitar filtro"}),o.jsx("div",{className:"ml-auto",children:o.jsx(Xc,{onClick:()=>h(),loading:l})})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",le.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",le.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",le.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",le.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",le.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",le.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(le.totalEsperado-le.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",W.length.toLocaleString()]})]})}),o.jsx("div",{className:"md:hidden space-y-3",children:l?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):Pe.length===0?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):Pe.map(oe=>o.jsxs("div",{className:"bg-white border rounded-2xl p-4 shadow",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold text-lg",children:oe.date}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:oe.orderName})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),o.jsx("div",{className:"font-semibold",children:oe.typeLabel})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),o.jsx("div",{className:"font-semibold",children:Gi(oe.utilidadBruta)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),o.jsx("div",{className:"font-semibold",children:oe.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),o.jsx("div",{className:"font-semibold",children:oe.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[o.jsx("span",{children:"Total facturado"}),o.jsx("span",{children:"Total esperado"})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:Gi(oe.totalFacturado)}),o.jsx("span",{children:Gi(oe.totalEsperado)})]})]})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>Ot(oe),children:"Ver detalle"}),f?o.jsxs(o.Fragment,{children:[oe.status==="PENDIENTE"&&o.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Ke(oe),children:"Pagar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>Pt(oe),children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>fe(oe),children:"Borrar"})]}):null]})]},oe.groupId))}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Total Facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):Pe.map(oe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border",children:[o.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>Ot(oe),title:oe.orderName,children:oe.date}),o.jsx("div",{className:"text-[11px] text-gray-500",children:oe.orderName})]}),o.jsx("td",{className:"p-2 border",children:oe.typeLabel}),o.jsx("td",{className:"p-2 border",children:oe.lbsIn.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:oe.lbsRem.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.totalFacturado)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.totalEsperado)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:oe.status})}),o.jsx("td",{className:"p-2 border",children:f?o.jsxs("div",{className:"flex gap-2 justify-center",children:[oe.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>Ke(oe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pt(oe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>fe(oe),children:"Borrar"})]}):o.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},oe.groupId))})]})}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),w&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:k?"Editar pedido":"Crear pedido"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:T,onChange:oe=>C(oe.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:E,onChange:oe=>S(oe.target.value)})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:oe=>{B(oe.target.value),D(""),de(0),ie(0),J(0)},children:[o.jsx("option",{value:"lb",children:"lb"}),o.jsx("option",{value:"unidad",children:"unidad"}),o.jsx("option",{value:"kg",children:"kg"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:oe=>D(oe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),Le.map(oe=>o.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.category,"  ",oe.measurement]},oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:X===0?"":X,onChange:oe=>{const je=oe.target.value.replace(",","."),Qe=parseFloat(je),tt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(3)):0;de(Math.max(0,tt))},disabled:!P})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:re===0?"":re,onChange:oe=>{const je=oe.target.value.replace(",","."),Qe=parseFloat(je),tt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(2)):0;ie(Math.max(0,tt))},disabled:!P})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ce===0?"":ce,onChange:oe=>{const je=oe.target.value.replace(",","."),Qe=parseFloat(je),tt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(2)):0;J(Math.max(0,tt))},disabled:!P})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:qe,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:pe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):pe.map(oe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border text-left",children:[oe.productName,o.jsxs("div",{className:"text-[11px] text-gray-500",children:[oe.category,"  ",oe.unit]})]}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.quantity,onChange:je=>{const Qe=je.target.value.replace(",","."),tt=parseFloat(Qe),rt=Number.isFinite(tt)?parseFloat(tt.toFixed(3)):0;st(oe.tempId,"quantity",rt)}})}),o.jsx("td",{className:"p-2 border",children:Number(oe.remaining||0).toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.purchasePrice,onChange:je=>{const Qe=je.target.value.replace(",","."),tt=parseFloat(Qe),rt=Number.isFinite(tt)?parseFloat(tt.toFixed(2)):0;st(oe.tempId,"purchasePrice",rt)}})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:oe.salePrice,onChange:je=>{const Qe=je.target.value.replace(",","."),tt=parseFloat(Qe),rt=Number.isFinite(tt)?parseFloat(tt.toFixed(2)):0;st(oe.tempId,"salePrice",rt)}})}),o.jsx("td",{className:"p-2 border",children:Gi(oe.invoiceTotal)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.expectedTotal)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>nt(oe.tempId),children:"Quitar"})})]},oe.tempId))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:Et.lbsIn.toFixed(3)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:Et.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),o.jsx("div",{className:"text-lg font-semibold",children:Gi(Et.totalFacturado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:Gi(Et.totalEsperado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Gi(Et.utilidadBruta)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cancelar"}),o.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Ct,disabled:pe.length===0,children:k?"Editar pedido":"Crear pedido"})]})]})]}),document.body),L&&R&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{z(!1),G(null)}}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:R.orderName})," "," ",R.date]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{z(!1),G(null)},type:"button",children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:R.items.map(oe=>{const je=Number(oe.invoiceTotal||0),Qe=Number(oe.expectedTotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:oe.productName}),o.jsx("td",{className:"p-2 border",children:(oe.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:oe.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:oe.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Gi(oe.salePrice)}),o.jsx("td",{className:"p-2 border",children:Gi(je)}),o.jsx("td",{className:"p-2 border",children:Gi(Qe)}),o.jsx("td",{className:"p-2 border",children:Gi(Qe-je)}),o.jsx("td",{className:"p-2 border",children:oe.status})]},oe.id)})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:R.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:R.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Gi(R.utilidadBruta)})]})]})]})]}),document.body),ee&&Q&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:he}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",o.jsx("br",{}),o.jsx("strong",{children:Q.orderName})," "," ",Q.date,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:ve,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:he,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const MA=t=>`C$${(Number(t)||0).toFixed(2)}`;function BSe(){const t=V1e(new Date),[e,r]=v.useState(wr(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=wr(Pd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=wr(Td(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),A=async()=>{i(!0);try{const g=await aSe(d.from,d.to),x=[];for(const y of g){const b=Gt(ke,"inventory_batches",y.batchId),w=await fo(b);if(!w.exists())continue;const I=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:I.status??"PENDIENTE",purchasePrice:Number(I.purchasePrice||0),salePrice:Number(I.salePrice||0),supplier:I.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{A()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await Vee(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},f=v.useMemo(()=>{const g=n.reduce((w,I)=>w+I.soldQty,0),x=n.reduce((w,I)=>w+I.soldAmount,0),y=n.reduce((w,I)=>w+I.soldQty*I.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([Af(()=>Promise.resolve().then(()=>v6),void 0),Af(()=>Promise.resolve().then(()=>Rj),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),I=new y("p","mm","a4"),T=190,C=I.getImageProperties(w),E=T,S=C.height*E/C.width;I.addImage(w,"PNG",10,10,E,S),I.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),o.jsx("button",{onClick:A,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:u,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",f.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",MA(f.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",MA(f.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",MA(f.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.batchDate}),o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:g.soldQty}),o.jsx("td",{className:"p-2 border",children:MA(g.soldAmount)}),o.jsx("td",{className:"p-2 border",children:MA(x)}),o.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:MA(y)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),o.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.qty}),o.jsx("td",{className:"p-2 border",children:MA(g.revenue)}),o.jsx("td",{className:"p-2 border",children:MA(g.cogs)}),o.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:MA(g.profit)})]},g.productName))})]})})]}),l&&o.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Nl=t=>`C$${Number(t??0).toFixed(2)}`,TSe=()=>wr(new Date,"yyyy-MM-dd"),Sg=t=>Number(t||0).toFixed(3);function PSe(){const[t,e]=v.useState(()=>{const B=new Date,P=new Date(B.getFullYear(),B.getMonth(),1);return wr(P,"yyyy-MM-dd")}),[r,n]=v.useState(TSe()),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:A}=fc(),[h,f]=v.useState({}),[m,p]=v.useState({});v.useEffect(()=>{(async()=>{s(!0);const P=Yt(At(ke,"salesV2"),lr("date",">=",t),lr("date","<=",r)),D=await Dt(P),X=[];D.forEach(ce=>{const J=ce.data(),pe=J.date??"";if(Array.isArray(J.items)&&J.items.length>0){J.items.forEach((Se,k)=>{const F=String(Se.productName??"(sin nombre)"),H=Number(Se.qty??0),M=Number(Se.lineFinal??0)||Math.max(0,Number(Se.unitPrice||0)*H-Number(Se.discount||0));X.push({id:`${ce.id}#${k}`,date:pe,productName:F,quantity:H,amount:M,allocations:Array.isArray(Se.allocations)?Se.allocations:J.allocations,avgUnitCost:Number(Se.avgUnitCost??J.avgUnitCost??0),measurement:Se.measurement??J.measurement??""})});return}X.push({id:ce.id,date:pe,productName:J.productName??"(sin nombre)",quantity:Number(J.quantity??0),amount:Number(J.amount??J.amountCharged??0),allocations:Array.isArray(J.allocations)?J.allocations:[],avgUnitCost:Number(J.avgUnitCost??0),measurement:J.measurement??""})}),l(X);const de=Yt(At(ke,"expenses"),lr("date",">=",t),lr("date","<=",r)),re=await Dt(de),ie=[];re.forEach(ce=>{const J=ce.data();ie.push({id:ce.id,date:J.date??"",category:J.category??"(sin categora)",description:J.description??"",amount:Number(J.amount??0),status:J.status??"PAGADO",createdAt:J.createdAt})}),u(ie),s(!1)})()},[t,r,d]);const g=v.useMemo(()=>{const B=i.reduce((re,ie)=>re+(ie.amount||0),0);let P=0;i.forEach(re=>{var ie;(ie=re.allocations)!=null&&ie.length?P+=re.allocations.reduce((ce,J)=>ce+Number(J.lineCost||0),0):re.avgUnitCost&&re.quantity&&(P+=Number(re.avgUnitCost)*Number(re.quantity))});const D=B-P,X=c.reduce((re,ie)=>re+(ie.amount||0),0),de=D-X;return{revenue:B,cogsReal:P,grossProfit:D,expensesSum:X,netProfit:de}},[i,c]),x=B=>String(B??"").toLowerCase().trim(),y=B=>Number(B.qty??B.quantity??0),b=B=>["lb","lbs","libra","libras"].includes(x(B)),w=B=>["unidad","unidades","ud","uds","pieza","piezas"].includes(x(B)),I=v.useMemo(()=>i.reduce((B,P)=>b(P.measurement)?B+y(P):B,0),[i]),T=v.useMemo(()=>i.reduce((B,P)=>w(P.measurement)?B+y(P):B,0),[i]),C=v.useMemo(()=>{var P;const B=new Map;for(const D of i){const X=D.productName||"(sin nombre)";B.has(X)||B.set(X,{productName:X,units:0,revenue:0,cogs:0,profit:0,firstDate:D.date||"",lastDate:D.date||""});const de=B.get(X);de.units+=Number(D.quantity||0),de.revenue+=Number(D.amount||0),(!de.firstDate||D.date<(de.firstDate||D.date))&&(de.firstDate=D.date),(!de.lastDate||D.date>(de.lastDate||D.date))&&(de.lastDate=D.date);let re=0;(P=D.allocations)!=null&&P.length?re=D.allocations.reduce((ie,ce)=>ie+Number(ce.lineCost||0),0):D.avgUnitCost&&(re=Number(D.avgUnitCost)*Number(D.quantity||0)),de.cogs+=re,de.profit=de.revenue-de.cogs}return Array.from(B.values()).sort((D,X)=>D.productName.localeCompare(X.productName))},[i]),E=v.useMemo(()=>[...C].sort((B,P)=>P.units-B.units).slice(0,3).map((B,P)=>({idx:P+1,name:B.productName,units:B.units})),[C]),S=B=>f(P=>({...P,[B]:!P[B]})),O=B=>p(P=>({...P,[B]:!P[B]}));return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),o.jsx(Xc,{onClick:A,loading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:B=>e(B.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:B=>n(B.target.value)})]})]}),a?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(k1,{title:"Ventas",value:Nl(g.revenue)}),o.jsx(k1,{title:"Costo",value:Nl(g.cogsReal)}),o.jsx(k1,{title:"Ganancia Bruta",value:Nl(g.grossProfit),positive:!0}),o.jsx(k1,{title:"Gastos",value:Nl(g.expensesSum)}),o.jsx(k1,{title:"Ganancia Neta",value:Nl(g.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(TQ,{title:"Libras Vendidas",value:Sg(I)}),o.jsx(TQ,{title:"Unidades Vendidas",value:Sg(T)}),o.jsx(jSe,{title:"Productos ms vendidos",items:E.map(B=>({key:`${B.idx}`,label:`${B.idx}. ${B.name}`,value:`(${Sg(B.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[C.map(B=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:B.productName}),o.jsx("td",{className:"border p-1",children:B.firstDate&&B.lastDate?B.firstDate===B.lastDate?B.firstDate:`${B.firstDate}  ${B.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:Sg(B.units)}),o.jsx("td",{className:"border p-1",children:Nl(B.revenue)}),o.jsx("td",{className:"border p-1",children:Nl(B.cogs)}),o.jsx("td",{className:`border p-1 ${B.profit>=0?"text-green-700":"text-red-700"}`,children:Nl(B.profit)})]},B.productName)),C.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:C.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):C.map(B=>{const P=!!h[B.productName],D=B.firstDate&&B.lastDate?B.firstDate===B.lastDate?B.firstDate:`${B.firstDate}  ${B.lastDate}`:"";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>S(B.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:B.productName}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",o.jsx("b",{children:Sg(B.units)}),"  Utilidad:"," ",o.jsx("b",{className:B.profit>=0?"text-green-700":"text-red-700",children:Nl(B.profit)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:P?"":""})]}),P&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(Gd,{label:"Fechas",value:D}),o.jsx(Gd,{label:"Total",value:Sg(B.units)}),o.jsx(Gd,{label:"Ingreso",value:Nl(B.revenue)}),o.jsx(Gd,{label:"Costo",value:Nl(B.cogs)}),o.jsx(Gd,{label:"Utilidad",value:Nl(B.profit),valueClass:B.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},B.productName)})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[c.map(B=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:B.date}),o.jsx("td",{className:"border p-1",children:B.category}),o.jsx("td",{className:"border p-1",children:B.description}),o.jsx("td",{className:"border p-1",children:Nl(B.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:B.status})})]},B.id)),c.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),o.jsx("div",{className:"md:hidden space-y-2",children:c.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(B=>{const P=!!m[B.id],D=B.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>O(B.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:B.category}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${D}`,children:B.status})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[B.date,"  ",o.jsx("b",{children:Nl(B.amount)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:P?"":""})]}),P&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsx(Gd,{label:"Fecha",value:B.date}),o.jsx(Gd,{label:"Categora",value:B.category}),o.jsx(Gd,{label:"Descripcin",value:B.description||""}),o.jsx(Gd,{label:"Monto",value:Nl(B.amount)}),o.jsx(Gd,{label:"Estado",value:B.status||""})]})})]},B.id)})})]})]})}function k1({title:t,value:e,positive:r}){return o.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function TQ({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function jSe({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Gd({label:t,value:e,valueClass:r}){return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:t}),o.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const _B=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],F1=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kSe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState(wr(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,I]=v.useState(!0),[T,C]=v.useState(""),[E,S]=v.useState(null),[O,B]=v.useState(""),[P,D]=v.useState(""),[X,de]=v.useState(""),[re,ie]=v.useState(0),[ce,J]=v.useState("PENDIENTE"),[pe,Se]=v.useState("");v.useEffect(()=>{(async()=>{I(!0),C("");try{const te=Yt(At(ke,"expenses"),ln("date","desc")),Q=await Dt(te),xe=[];Q.forEach(Y=>{const W=Y.data();xe.push({id:Y.id,date:W.date||wr(new Date,"yyyy-MM-dd"),category:W.category||"",description:W.description||"",amount:Number(W.amount||0),status:W.status||"PENDIENTE",notes:W.notes||"",createdAt:W.createdAt??rr.now()})}),b(xe)}catch(te){console.error(te),C(" Error al cargar gastos")}finally{I(!1)}})()},[t]);const k=v.useMemo(()=>y.filter(te=>!(r&&te.date<r||a&&te.date>a)),[y,r,a]),F=v.useMemo(()=>{const te=k.reduce((Y,W)=>Y+(W.amount||0),0),Q=k.filter(Y=>Y.status==="PAGADO").reduce((Y,W)=>Y+(W.amount||0),0),xe=te-Q;return{total:te,pagado:Q,pendiente:xe}},[k]),H=()=>{l(wr(new Date,"yyyy-MM-dd")),u(""),A(""),f(0),p("PENDIENTE"),x("")},M=async te=>{if(te.preventDefault(),C(""),!c)return C("Selecciona una categora.");if(!d.trim())return C("Ingresa una descripcin.");if(!h||h<=0)return C("Ingresa un monto vlido.");try{const Q={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:rr.now()},xe=await En(At(ke,"expenses"),Q);b(Y=>[{id:xe.id,...Q},...Y]),H(),C(" Gasto registrado")}catch(Q){console.error(Q),C(" Error al guardar gasto")}},L=te=>{C(""),S(te.id),B(te.date),D(te.category||""),de(te.description||""),ie(Number(te.amount||0)),J(te.status||"PENDIENTE"),Se(te.notes||"")},z=()=>{S(null),B(""),D(""),de(""),ie(0),J("PENDIENTE"),Se("")},R=async()=>{if(E){if(!P)return C("Selecciona una categora.");if(!X.trim())return C("Ingresa una descripcin.");if(!re||re<=0)return C("Ingresa un monto vlido.");try{const te={date:O,category:P,description:X.trim(),amount:Number(Number(re||0).toFixed(2)),status:ce,notes:pe||""};await rn(Gt(ke,"expenses",E),te),b(Q=>Q.map(xe=>xe.id===E?{...xe,...te}:xe)),z(),C(" Gasto actualizado")}catch(te){console.error(te),C(" Error al actualizar gasto")}}},G=async te=>{if(confirm(`Eliminar el gasto "${te.description}"?`))try{await Qn(Gt(ke,"expenses",te.id)),b(xe=>xe.filter(Y=>Y.id!==te.id)),C(" Gasto borrado")}catch(xe){console.error(xe),C(" Error al borrar gasto")}},ee=te=>te==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),o.jsx(Xc,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:te=>n(te.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:te=>s(te.target.value)})]})]}),o.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",F1(F.total)]}),o.jsxs("div",{children:["Pagado: ",F1(F.pagado)]}),o.jsxs("div",{children:["Pendiente: ",F1(F.pendiente)]})]})]}),o.jsxs("form",{onSubmit:M,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:te=>l(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:te=>u(te.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(te=>o.jsx("option",{value:te,children:te},te))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:te=>A(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:te=>{const Q=String(te.target.value||"").replace(",","."),xe=parseFloat(Q);f(Number.isFinite(xe)?Math.max(0,xe):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:te=>p(te.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:te=>x(te.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:H,children:"Limpiar"})]})]}),o.jsx("div",{className:"block md:hidden space-y-3",children:w?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):k.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):k.map(te=>{const Q=E===te.id;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:te.description}),o.jsxs("div",{className:"text-xs text-gray-500",children:[te.category||"","  ",te.date]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-bold",children:F1(te.amount)}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee(te.status)}`,children:te.status})]})]}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:te.notes?te.notes:""}),Q?o.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:xe=>B(xe.target.value)}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:xe=>D(xe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(xe=>o.jsx("option",{value:xe,children:xe},xe))]}),o.jsx("input",{className:"w-full border p-2 rounded",value:X,onChange:xe=>de(xe.target.value)}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(re)?"":re,onChange:xe=>{const Y=String(xe.target.value||"").replace(",","."),W=parseFloat(Y);ie(Number.isFinite(W)?Math.max(0,W):0)}}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ce,onChange:xe=>J(xe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:pe,onChange:xe=>Se(xe.target.value),maxLength:500}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:z,children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(te),children:"Editar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>G(te),children:"Borrar"})]})]},te.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):k.map(te=>{const Q=E===te.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:O,onChange:xe=>B(xe.target.value)}):te.date}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:P,onChange:xe=>D(xe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),_B.map(xe=>o.jsx("option",{value:xe,children:xe},xe))]}):te.category||""}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{className:"w-full border p-1 rounded",value:X,onChange:xe=>de(xe.target.value)}):o.jsx("span",{title:te.description,children:te.description.length>45?te.description.slice(0,45)+"":te.description})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(re)?"":re,onChange:xe=>{const Y=String(xe.target.value||"").replace(",","."),W=parseFloat(Y);ie(Number.isFinite(W)?Math.max(0,W):0)}}):F1(te.amount)}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:ce,onChange:xe=>J(xe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee(te.status)}`,children:te.status})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:pe,onChange:xe=>Se(xe.target.value),maxLength:500}):o.jsx("span",{title:te.notes||"",children:(te.notes||"").length>45?(te.notes||"").slice(0,45)+"":te.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Q?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:z,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(te),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>G(te),children:"Borrar"})]})})})]},te.id)})})]})}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T})]})}function VE(t){return(t||"").trim().toLowerCase()}async function Gee(){const t=await Dt(At(ke,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=VE(n.name??n.productName);a&&e.set(a,r.id)}),e}async function FSe(t=!1){const e=await Gee(),r=await Dt(At(ke,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=VE(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(i);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await rn(Gt(ke,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function OSe(t,e=!1){const r=VE(t),a=(await Gee()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Dt(At(ke,"inventory_batches"));let i=0;for(const l of s.docs){const c=l.data();VE(c.productName)===r&&c.productId!==a&&(e||await rn(Gt(ke,"inventory_batches",l.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function DSe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await FSe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await OSe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),o.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Ka=t=>`C$ ${Number(t??0).toFixed(2)}`,cm=t=>Number(t??0).toFixed(3);async function RSe(t){const e=new Set;for(const n of t)for(const a of n.batches||[]){const s=(a.batchId||a.id||"").trim();if(!s)continue;(a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)&&e.add(s)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const a=await fo(Gt(ke,"inventory_batches",n));if(a.exists()){const s=a.data();r.set(n,Number(s.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(a=>{if((a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)){const s=(a.batchId||a.id||"").trim(),i=s?r.get(s):void 0;if(i!==void 0)return{...a,purchasePrice:i}}return a})}))}function CB(t){var p,g;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],a=Number(((p=t.totals)==null?void 0:p.lbs)??t.totalLbs??0),s=Number(((g=t.totals)==null?void 0:g.units)??t.totalUnits??0);let i=0,l=0;for(const x of e){const y=Number(x.quantity??0);let b=x.expectedTotal!==void 0&&x.expectedTotal!==null?Number(x.expectedTotal):y*Number(x.salePrice??0);isFinite(b)||(b=0);let w=y*Number(x.purchasePrice??Number.NaN);isFinite(w)||(w=x.invoiceTotal!==void 0&&x.invoiceTotal!==null?Number(x.invoiceTotal):0),i+=b,l+=w}const c=r.reduce((x,y)=>x+Number(y.amount||0),0),u=n.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=n.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,f=i-l,m=i-c-A+h;return{lbs:a,units:s,expectedSum:i,invoicedSum:l,expenses:c,debits:A,credits:h,grossProfit:f,finalAmount:m}}function MSe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null);v.useEffect(()=>{(async()=>{n(!0);const d=Yt(At(ke,"invoices"),ln("date","desc")),A=await Dt(d),h=[];A.forEach(m=>{const p=m.data();h.push({id:m.id,...p,batches:p.batches||[],expenses:p.expenses||[],adjustments:p.adjustments||[],totals:p.totals||{lbs:p.totalLbs||0,units:p.totalUnits||0,amount:p.totalAmount||0,expenses:p.totalExpenses||0,finalAmount:p.finalAmount||0,invoiceTotal:p.invoiceTotal||0},totalDebits:p.totalDebits||0,totalCredits:p.totalCredits||0})});const f=await RSe(h);e(f),n(!1)})()},[]);const l=async d=>{const A=d.status==="PAGADA"?"PENDIENTE":"PAGADA";await rn(Gt(ke,"invoices",d.id),{status:A}),e(h=>h.map(f=>f.id===d.id?{...f,status:A}:f)),(a==null?void 0:a.id)===d.id&&s({...d,status:A})},c=async d=>{if(window.confirm(`Eliminar factura del ${d.date}?`))try{const A=Gt(ke,"invoices",d.id),h=await fo(A),f=h.exists()?h.data():null,m=K0(ke),p=(f==null?void 0:f.batches)||[];for(const g of p){const x=g.batchId||g.id;if(!x)continue;const y=Gt(ke,"inventory_batches",x);m.update(y,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}m.delete(A),await m.commit(),e(g=>g.filter(x=>x.id!==d.id)),(a==null?void 0:a.id)===d.id&&s(null)}catch(A){console.error(A),alert("No se pudo eliminar la factura por completo.")}},u=async()=>{if(!i.current||!a)return;const d=i.current,A=await G0(d,{backgroundColor:"#ffffff",onclone:g=>{const x=g.body;x.style.background="#ffffff",x.querySelectorAll("*").forEach(y=>{const b=g.defaultView.getComputedStyle(y);b.boxShadow&&b.boxShadow!=="none"&&(y.style.boxShadow="none")})},scale:2}),h=A.toDataURL("image/png"),f=new Br("p","mm","a4"),m=f.internal.pageSize.getWidth(),p=A.height*m/A.width;f.addImage(h,"PNG",0,0,m,p),f.save(`factura_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:o.jsxs("table",{className:"min-w-full w-full- text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"N factura"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Unidades"}),o.jsx("th",{className:"p-2 border",children:"Facturado"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),o.jsx("th",{className:"p-2 border",children:"Gastos"}),o.jsx("th",{className:"p-2 border",children:"Dbitos"}),o.jsx("th",{className:"p-2 border",children:"Crditos"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(d=>{const A=CB(d);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.date}),o.jsx("td",{className:"p-2 border",children:d.number||""}),o.jsx("td",{className:"p-2 border",children:d.description||""}),o.jsx("td",{className:"p-2 border",children:cm(A.lbs)}),o.jsx("td",{className:"p-2 border",children:cm(A.units)}),o.jsx("td",{className:"p-2 border",children:Ka(A.invoicedSum)}),o.jsx("td",{className:"p-2 border",children:Ka(A.expectedSum)}),o.jsx("td",{className:"p-2 border",children:Ka(A.expenses)}),o.jsx("td",{className:"p-2 border",children:Ka(A.debits)}),o.jsx("td",{className:"p-2 border",children:Ka(A.credits)}),o.jsx("td",{className:"p-2 border",children:Ka(A.finalAmount)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:d.status})}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(d),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>l(d),children:d.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>c(d),children:"Eliminar"})]})})]},d.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:u,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const d=CB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras:"})," ",cm(d.lbs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",cm(d.units)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Ka(d.invoicedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Ka(d.expectedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Ka(d.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Ka(d.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Ka(d.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Ka(d.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),o.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),o.jsx("tbody",{children:(a.batches||[]).map((d,A)=>{const h=Number(d.quantity??0),f=d.expectedTotal!==void 0&&d.expectedTotal!==null?Number(d.expectedTotal):h*Number(d.salePrice??0);let m=h*Number(d.purchasePrice??Number.NaN);isFinite(m)||(m=d.invoiceTotal!==void 0&&d.invoiceTotal!==null?Number(d.invoiceTotal):0);const p=f-m;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.productName||"(sin nombre)"}),o.jsx("td",{className:"p-2 border",children:(d.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:cm(d.quantity)}),o.jsx("td",{className:"p-2 border",children:Ka(d.salePrice)}),o.jsx("td",{className:"p-2 border",children:Ka(m)}),o.jsx("td",{className:"p-2 border",children:Ka(f)}),o.jsx("td",{className:"p-2 border",children:Ka(p)})]},A)})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((d,A)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.date}),o.jsx("td",{className:"p-2 border",children:d.description}),o.jsx("td",{className:"p-2 border",children:Ka(d.amount)})]},A)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((d,A)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:d.description}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.type})}),o.jsx("td",{className:"p-2 border",children:Ka(d.amount)}),o.jsx("td",{className:"p-2 border",children:a.date})]},A)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const d=CB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:cm(d.lbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:cm(d.units)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Ka(d.invoicedSum)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Ka(d.expectedSum)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Ka(d.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Ka(d.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Ka(d.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Ka(d.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Ka(d.finalAmount)})]})})]})})()]})]})}const Sc=t=>`C$${Number(t||0).toFixed(2)}`,Ig=t=>Number(t||0).toFixed(3),LSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),EB=()=>{const t=new Date;return wr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},ZN=()=>wr(new Date,"yyyy-MM-dd");function USe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(EB()),[i,l]=v.useState(ZN()),[c,u]=v.useState(""),d=v.useMemo(()=>{const he=new Map;return n.forEach(oe=>he.set(oe.productId,{id:oe.productId,name:oe.productName})),Array.from(he.values()).sort((oe,je)=>oe.name.localeCompare(je.name))},[n]),A=v.useMemo(()=>n.filter(he=>!(a&&he.date<a||i&&he.date>i||c&&he.productId!==c)),[n,a,i,c]),[h,f]=v.useState(ZN()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(he=>{const oe=he.filter(je=>A.some(Qe=>Qe.id===je));return oe.length===0&&A.length>0?A.map(je=>je.id):oe})},[A]);const[w,I]=v.useState([]),[T,C]=v.useState([]),[E,S]=v.useState(!1),[O,B]=v.useState(EB()),[P,D]=v.useState(ZN());v.useEffect(()=>{(async()=>{try{S(!0);const he=Yt(At(ke,"expenses"),ln("date","desc")),oe=await Dt(he),je=[];oe.forEach(Qe=>{const tt=Qe.data();je.push({id:Qe.id,date:tt.date,description:tt.description,amount:Number(tt.amount||0)})}),I(je)}catch(he){console.error(he)}finally{S(!1)}})()},[]);const X=v.useMemo(()=>w.filter(he=>!(!he.date||O&&he.date<O||P&&he.date>P)),[w,O,P]),[de,re]=v.useState([]),[ie,ce]=v.useState(!1),[J,pe]=v.useState(""),[Se,k]=v.useState("DEBITO"),[F,H]=v.useState(""),M=()=>{const he=Number(F);!J.trim()||!isFinite(he)||he<=0||(re(oe=>[...oe,{id:`${Date.now()}_${oe.length+1}`,description:J.trim(),type:Se,amount:Number(he.toFixed(2))}]),pe(""),H(""))},[L,z]=v.useState(null),[R,G]=v.useState(""),[ee,te]=v.useState("DEBITO"),[Q,xe]=v.useState(""),Y=he=>{z(he.id),G(he.description),te(he.type),xe(he.amount.toFixed(2))},W=()=>{z(null),G(""),te("DEBITO"),xe("")},le=()=>{if(!L)return;const he=Number(Q);!isFinite(he)||he<=0||(re(oe=>oe.map(je=>je.id===L?{...je,description:R.trim(),type:ee,amount:Number(he.toFixed(2))}:je)),W())},Pe=he=>{re(oe=>oe.filter(je=>je.id!==he)),L===he&&W()},Le=(he,oe)=>{b(je=>oe?[...new Set([...je,he])]:je.filter(Qe=>Qe!==he))},qe=he=>{b(he?A.map(oe=>oe.id):[])},nt=(he,oe)=>{C(je=>oe?[...new Set([...je,he])]:je.filter(Qe=>Qe!==he))},st=v.useMemo(()=>A.filter(he=>y.includes(he.id)),[A,y]),Et=v.useMemo(()=>de.filter(he=>he.type==="DEBITO").reduce((he,oe)=>he+oe.amount,0),[de]),yt=v.useMemo(()=>de.filter(he=>he.type==="CREDITO").reduce((he,oe)=>he+oe.amount,0),[de]),Ct=v.useMemo(()=>{let he=0,oe=0,je=0,Qe=0;for(const Te of st){LSe(Te.unit)?he+=Number(Te.quantity||0):oe+=Number(Te.quantity||0);const Ee=Te.expectedTotal??Number((Number(Te.quantity||0)*Number(Te.salePrice||0)).toFixed(2)),V=Te.invoiceTotal!==void 0&&Te.invoiceTotal!==null?Number(Te.invoiceTotal):Number((Number(Te.quantity||0)*Number(Te.purchasePrice||0)).toFixed(2));je+=Number(Ee||0),Qe+=Number(V||0)}const tt=X.filter(Te=>T.includes(Te.id)).reduce((Te,Ee)=>Te+Number(Ee.amount||0),0),rt=je-tt-Et+yt;return{totalLbs:he,totalUnits:oe,totalExpected:Number(je.toFixed(2)),totalInvoiced:Number(Qe.toFixed(2)),totalGastos:Number(tt.toFixed(2)),debits:Number(Et.toFixed(2)),credits:Number(yt.toFixed(2)),finalAmount:Number(rt.toFixed(2)),grossProfit:Number((je-Qe).toFixed(2))}},[st,X,T,Et,yt]),[Ot,Pt]=v.useState(!1),[fe,Ke]=v.useState(""),ve=async()=>{if(Ke(""),st.length===0){Ke("Selecciona al menos 1 lote pagado.");return}try{Pt(!0);const he={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:rr.now(),totalLbs:Number(Ig(Ct.totalLbs)),totalUnits:Number(Ig(Ct.totalUnits)),totalAmount:Ct.totalExpected,invoiceTotal:Ct.totalInvoiced,totalExpenses:Ct.totalGastos,totalDebits:Ct.debits,totalCredits:Ct.credits,finalAmount:Ct.finalAmount,batches:st.map(oe=>{var je;return{id:oe.id,productId:oe.productId,productName:oe.productName,unit:oe.unit,quantity:Number(Ig(oe.quantity)),salePrice:Number(Number(oe.salePrice||0).toFixed(2)),purchasePrice:Number(Number(oe.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(oe.quantity||0)*Number(oe.salePrice||0)).toFixed(2)),invoiceTotal:oe.invoiceTotal!==void 0&&oe.invoiceTotal!==null?Number(oe.invoiceTotal):Number((Number(oe.quantity||0)*Number(oe.purchasePrice||0)).toFixed(2)),batchDate:oe.date,paidAt:(je=oe.paidAt)!=null&&je.toDate?wr(oe.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:X.filter(oe=>T.includes(oe.id)).map(oe=>({id:oe.id,date:oe.date||null,description:oe.description||"",amount:Number(Number(oe.amount||0).toFixed(2))})),adjustments:de.map(oe=>({id:oe.id,description:oe.description,type:oe.type,amount:Number(oe.amount.toFixed(2))}))};await En(At(ke,"invoices"),he),Ke(" Factura creada."),r()}catch(he){console.error(he),Ke(` Error al crear factura: ${(he==null?void 0:he.message)||"desconocido"}`)}finally{Pt(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:he=>f(he.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:he=>p(he.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:he=>x(he.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:he=>s(he.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:he=>l(he.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:he=>u(he.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),d.map(he=>o.jsx("option",{value:he.id,children:he.name},he.id))]})]}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(EB()),l(ZN()),u("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:A.length>0&&y.length===A.length,onChange:he=>qe(he.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),A.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:A.map(he=>{var rt;const oe=y.includes(he.id),je=he.expectedTotal??Number((Number(he.quantity||0)*Number(he.salePrice||0)).toFixed(2)),Qe=he.invoiceTotal!==void 0&&he.invoiceTotal!==null?Number(he.invoiceTotal):Number((Number(he.quantity||0)*Number(he.purchasePrice||0)).toFixed(2)),tt=je-Qe;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:oe,onChange:Te=>Le(he.id,Te.target.checked)})}),o.jsx("td",{className:"p-2 border",children:he.date}),o.jsx("td",{className:"p-2 border",children:he.productName}),o.jsx("td",{className:"p-2 border",children:(he.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Ig(he.quantity)}),o.jsx("td",{className:"p-2 border",children:Sc(he.salePrice)}),o.jsx("td",{className:"p-2 border",children:Sc(Qe)}),o.jsx("td",{className:"p-2 border",children:Sc(je)}),o.jsx("td",{className:"p-2 border",children:Sc(tt)}),o.jsx("td",{className:"p-2 border",children:(rt=he.paidAt)!=null&&rt.toDate?wr(he.paidAt.toDate(),"yyyy-MM-dd"):""})]},he.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:O,onChange:he=>B(he.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:P,onChange:he=>D(he.target.value)})]})]})]}),X.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:X.map(he=>{const oe=T.includes(he.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:oe,onChange:je=>nt(he.id,je.target.checked)})}),o.jsx("td",{className:"p-2 border",children:he.date||""}),o.jsx("td",{className:"p-2 border",children:he.description||""}),o.jsx("td",{className:"p-2 border",children:Sc(Number(he.amount||0))})]},he.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ce(!0),children:"Crear Cargo"})]}),de.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:de.map(he=>{const oe=L===he.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:R,onChange:je=>G(je.target.value)}):o.jsx("span",{title:he.description,children:he.description.length>60?`${he.description.slice(0,60)}`:he.description})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ee,onChange:je=>te(je.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:he.type})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Q,onChange:je=>xe(je.target.value)}):Sc(he.amount)}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:le,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:W,children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Pe(he.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>Y(he),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Pe(he.id),children:"Eliminar"})]})})]},he.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Ig(Ct.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Ig(Ct.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Sc(Ct.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Sc(Ct.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Sc(Ct.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Sc(Ct.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Sc(Ct.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Sc(Ct.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:Sc(Ct.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:Ot,onClick:ve,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Ot?"Creando":"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),fe&&o.jsx("span",{className:"text-sm ml-2",children:fe})]}),Ot&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),ie&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ce(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:J,onChange:he=>pe(he.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Se,onChange:he=>k(he.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:he=>H(he.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Agregar"})})]})]})})]})}const LA=t=>`C$ ${Number(t||0).toFixed(2)}`,bh=t=>Number(t||0).toFixed(3),QSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function VSe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(wr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,A]=v.useState(wr(new Date,"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=fc();v.useEffect(()=>{(async()=>{n(!0);const C=Yt(At(ke,"inventory_batches"),lr("status","==","PAGADO"),ln("date","desc")),E=await Dt(C),S=[];E.forEach(O=>{const B=O.data(),P=Number(B.quantity||0),D=Number(B.remaining||0),X=Number(B.purchasePrice||0),de=Number(B.salePrice||0),re=Number((P*X).toFixed(2)),ie=Number((P*de).toFixed(2));S.push({id:O.id,productId:B.productId,productName:B.productName,category:B.category,unit:B.unit,quantity:P,remaining:D,purchasePrice:X,salePrice:de,invoiceTotal:B.invoiceTotal!=null?Number(B.invoiceTotal):re,expectedTotal:B.expectedTotal!=null?Number(B.expectedTotal):ie,date:B.date,status:B.status,paidAt:B.paidAt})}),e(S),n(!1)})()},[g]);const y=v.useMemo(()=>t.filter(C=>!(c&&C.date<c||d&&C.date>d||h&&C.productId!==h)),[t,c,d,h]),b=v.useMemo(()=>{let C=0,E=0,S=0,O=0,B=0,P=0;for(const D of y)QSe(D.unit)?(C+=D.quantity,E+=D.remaining):(S+=D.quantity,O+=D.remaining),B+=Number(D.expectedTotal||0),P+=Number(D.invoiceTotal||0);return{lbsIng:C,lbsRem:E,udsIng:S,udsRem:O,totalEsperado:B,totalFact:P,gross:B-P}},[y]),w=C=>{l(C),s(!0)},I=async()=>{if(i)try{const C=Gt(ke,"inventory_batches",i.id);await rn(C,{status:"PENDIENTE",remaining:i.quantity});const E=At(ke,"salesV2"),S=await Dt(Yt(E,lr("batchId","==",i.id))),O=await Dt(Yt(E,lr("productName","==",i.productName),lr("date","==",i.date))),B=[...S.docs,...O.docs];for(const P of B)await Qn(Gt(ke,"salesV2",P.id));s(!1),l(null),x()}catch(C){console.error("Error al marcar pendiente:",C)}},T=v.useMemo(()=>{const C=new Map;return t.forEach(E=>C.set(E.productId,{id:E.productId,name:E.productName})),Array.from(C.values()).sort((E,S)=>E.name.localeCompare(S.name))},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(Xc,{onClick:x,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:C=>u(C.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:C=>A(C.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:C=>f(C.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),T.map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))]})]}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f("")},children:"Quitar filtro"})]}),o.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",bh(b.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",bh(b.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",LA(b.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",bh(b.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",bh(b.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",LA(b.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",LA(b.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",y.length.toLocaleString()]})]})}),o.jsx("div",{className:"block md:hidden space-y-3",children:r?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):y.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):y.map(C=>{var E;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:C.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[(C.category||"").toUpperCase(),"  ",C.date," "," ",(C.unit||"").toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold",children:LA(C.expectedTotal||0)}),o.jsx("div",{className:"text-[11px] text-gray-500",children:"Esperado"})]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),o.jsx("div",{className:"font-semibold",children:bh(C.quantity)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:bh(C.remaining)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:LA(C.invoiceTotal||0)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),o.jsx("div",{className:"font-semibold",children:(E=C.paidAt)!=null&&E.toDate?wr(C.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(C),children:"Marcar PENDIENTE"})})]},C.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):y.map(C=>{var E;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:C.date}),o.jsx("td",{className:"p-2 border",children:(C.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:C.productName}),o.jsx("td",{className:"p-2 border",children:(C.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:bh(C.quantity)}),o.jsx("td",{className:"p-2 border",children:bh(C.remaining)}),o.jsx("td",{className:"p-2 border",children:LA(C.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:LA(C.salePrice)}),o.jsx("td",{className:"p-2 border",children:LA(C.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:LA(C.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(E=C.paidAt)!=null&&E.toDate?wr(C.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>w(C),children:"Marcar PENDIENTE"})})]},C.id)})})]})}),m&&o.jsx(USe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const qi=t=>`C$ ${(Number(t)||0).toFixed(2)}`,HSe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function e_(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function $Se(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function KSe(t){const e="ROP",r=e_(t.subcat).slice(0,3)||"GEN",n=$Se(t.gender),a=e_(t.color).slice(0,3)||"COL",s=e_(t.size)||"TLL",i=e_(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${l}`}const O1=/^[A-Za-z0-9._-]{0,32}$/;function GSe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(wr(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,I]=v.useState(0),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(0),[P,D]=v.useState(""),[X,de]=v.useState(""),[re,ie]=v.useState(""),[ce,J]=v.useState(""),[pe,Se]=v.useState(""),[k,F]=v.useState(""),[H,M]=v.useState(""),[L,z]=v.useState(!1),[R,G]=v.useState(""),[ee,te]=v.useState("Camisa"),[Q,xe]=v.useState(null),[Y,W]=v.useState(""),[le,Pe]=v.useState(0),[Le,qe]=v.useState(0),[nt,st]=v.useState(0),[Et,yt]=v.useState(0),[Ct,Ot]=v.useState(0),[Pt,fe]=v.useState(""),[Ke,ve]=v.useState(""),[he,oe]=v.useState(""),[je,Qe]=v.useState(""),[tt,rt]=v.useState(""),[Te,Ee]=v.useState(""),[V,Ae]=v.useState(""),[Ne,Re]=v.useState(null),[ze,Ye]=v.useState({x:0,y:0}),[Ze,dt]=v.useState(!1);v.useEffect(()=>{const ae=()=>Re(null),me=ue=>ue.key==="Escape"&&Re(null);return document.addEventListener("click",ae),document.addEventListener("keydown",me),()=>{document.removeEventListener("click",ae),document.removeEventListener("keydown",me)}},[]);const ge=(ae,me,ue=192,Be=160)=>{let We=ae;ae+ue+8>window.innerWidth&&(We=ae-ue),We=Math.max(8,Math.min(We,window.innerWidth-ue-8));let it=me;return me+Be+8>window.innerHeight&&(it=window.innerHeight-Be-8),it=Math.max(8,Math.min(it,window.innerHeight-Be-8)),{x:We,y:it}},Xe=(ae,me)=>{ae.stopPropagation();const ue=ae.currentTarget.getBoundingClientRect(),Be=ue.right,Oe=ue.bottom,We=ge(Be,Oe);Ye(We),Re(it=>it===me?null:me)};v.useEffect(()=>{const ae=()=>Re(null),me=ue=>{ue.key==="Escape"&&Re(null)};return document.addEventListener("click",ae),document.addEventListener("keydown",me),()=>{document.removeEventListener("click",ae),document.removeEventListener("keydown",me)}},[]),v.useEffect(()=>{if(!Ne)return;const ae=()=>Re(null);return window.addEventListener("scroll",ae,!0),window.addEventListener("resize",ae),()=>{window.removeEventListener("scroll",ae,!0),window.removeEventListener("resize",ae)}},[Ne]),v.useEffect(()=>{(async()=>{const ae=await Dt(At(ke,"products_clothes")),me=[];ae.forEach(We=>{const it=We.data();me.push({id:We.id,name:it.name??"(sin nombre)",category:it.category??"(sin categora)",measurement:it.measurement??"unidad",price:Number(it.price??0),sku:it.sku||"",size:it.size||"",color:it.color||"",gender:it.gender||"",brand:it.brand||""})}),e(me);const ue=Yt(At(ke,"inventory_clothes_batches"),ln("date","desc")),Be=await Dt(ue),Oe=[];Be.forEach(We=>{const it=We.data();Oe.push({id:We.id,productId:it.productId,productName:it.productName,category:it.category,unit:it.unit,quantity:Number(it.quantity||0),remaining:Number(it.remaining??it.quantity??0),purchasePrice:Number(it.purchasePrice||0),salePrice:Number(it.salePrice||0),invoiceTotal:Number(it.invoiceTotal??Number(it.quantity||0)*Number(it.purchasePrice||0)),expectedTotal:Number(it.expectedTotal??Number(it.quantity||0)*Number(it.salePrice||0)),date:it.date,createdAt:it.createdAt,status:it.status,notes:it.notes||"",sku:it.sku||"",size:it.size||"",color:it.color||"",gender:it.gender||"",brand:it.brand||"",clientCode:it.clientCode||""})}),n(Oe),s(!1)})()},[]),v.useEffect(()=>{const ae=t.find(me=>me.id===m);ae&&(C(Number(ae.price||0)),ae.sku&&de(ae.sku),ae.size&&ie(me=>me||ae.size),ae.color&&J(me=>me||ae.color),ae.gender&&Se(me=>me||ae.gender),ae.brand&&F(me=>me||ae.brand))},[m,t]),v.useEffect(()=>{S(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{B(Math.floor(y*T*100)/100)},[y,T]),v.useEffect(()=>{const ae=t.find(Be=>Be.id===m);if(ae!=null&&ae.sku){de(ae.sku);return}const me=L&&ee?ee:(ae==null?void 0:ae.category)||"";if(!me&&!pe&&!ce&&!re&&!k){de("");return}const ue=KSe({subcat:me,gender:pe||"",color:ce||"",size:re||"",brand:k||""});de(ue)},[L,ee,m,pe,ce,re,k,t]);const ot=v.useMemo(()=>r.filter(ae=>!(c&&ae.date<c||d&&ae.date>d||h&&ae.productId!==h)),[r,c,d,h]),be=v.useMemo(()=>{const ae=ot.reduce((Oe,We)=>Oe+(We.invoiceTotal||0),0),me=ot.reduce((Oe,We)=>Oe+(We.expectedTotal||0),0),ue=ot.reduce((Oe,We)=>Oe+We.quantity,0),Be=ot.reduce((Oe,We)=>Oe+We.remaining,0);return{udsIng:ue,udsRem:Be,totalFacturado:ae,totalEsperado:me}},[ot]),Ge=async ae=>{ae.preventDefault(),l("");const me=!!m&&!L,ue=t.find(it=>it.id===m),Be=me?(ue==null?void 0:ue.name)||"":R||"",Oe=me?(ue==null?void 0:ue.category)||"":ee||"General",We=me&&(ue==null?void 0:ue.measurement)||"unidad";if(!Be||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(H&&!O1.test(H)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const it=await En(At(ke,"inventory_clothes_batches"),{productId:me?ue.id:"",productName:Be,category:Oe,unit:We,quantity:y,remaining:y,purchasePrice:w,salePrice:T,invoiceTotal:E,expectedTotal:O,date:g,createdAt:rr.now(),status:"PENDIENTE",notes:P||"",sku:X||"",size:re||"",color:ce||"",gender:pe||"",brand:k||"",clientCode:H||""});n(gt=>[{id:it.id,productId:me?ue.id:"",productName:Be,category:Oe,unit:We,quantity:y,remaining:y,purchasePrice:w,salePrice:T,invoiceTotal:E,expectedTotal:O,date:g,createdAt:rr.now(),status:"PENDIENTE",notes:P||"",sku:X||"",size:re||"",color:ce||"",gender:pe||"",brand:k||"",clientCode:H||""},...gt]),l(" Lote de ropa creado"),p(""),x(wr(new Date,"yyyy-MM-dd")),b(0),I(0),C(0),S(0),B(0),D(""),de(""),ie(""),J(""),Se(""),F(""),M(""),z(!1),G(""),te("Camisa")}catch(it){console.error(it),l(" Error al crear lote")}},ut=async ae=>{confirm(`Marcar PAGADO el lote del ${ae.date} (${ae.productName})?`)&&(await rn(Gt(ke,"inventory_clothes_batches",ae.id),{status:"PAGADO"}),n(ue=>ue.map(Be=>Be.id===ae.id?{...Be,status:"PAGADO"}:Be)))},bt=ae=>{xe(ae.id),W(ae.date),Pe(ae.quantity),qe(ae.purchasePrice),st(ae.salePrice),yt(Number((ae.quantity*ae.purchasePrice).toFixed(2))),Ot(Number((ae.quantity*ae.salePrice).toFixed(2))),fe(ae.notes||""),ve(ae.sku||""),oe(ae.size||""),Qe(ae.color||""),rt(ae.gender||""),Ee(ae.brand||""),Ae(ae.clientCode||"")},Rt=()=>{xe(null),W(""),Pe(0),qe(0),st(0),yt(0),Ot(0),fe(""),ve(""),oe(""),Qe(""),rt(""),Ee(""),Ae("")};v.useEffect(()=>{Q&&yt(Math.floor(le*Le*100)/100)},[Q,le,Le]),v.useEffect(()=>{Q&&Ot(Math.floor(le*nt*100)/100)},[Q,le,nt]);const Wt=async()=>{if(!Q)return;const ae=r.find(Oe=>Oe.id===Q);if(!ae)return;const me=Math.max(0,ae.quantity-ae.remaining),ue=Math.max(0,le-me);if(V&&!O1.test(V)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Be=Gt(ke,"inventory_clothes_batches",Q);await rn(Be,{date:Y,quantity:le,purchasePrice:Le,salePrice:nt,invoiceTotal:Et,expectedTotal:Ct,notes:Pt,remaining:ue,sku:Ke,size:he,color:je,gender:tt||"",brand:Te||"",clientCode:V||""}),n(Oe=>Oe.map(We=>We.id===Q?{...We,date:Y,quantity:le,purchasePrice:Le,salePrice:nt,invoiceTotal:Et,expectedTotal:Ct,notes:Pt,remaining:ue,sku:Ke,size:he,color:je,gender:tt||"",brand:Te||"",clientCode:V||""}:We)),Rt(),l(" Lote actualizado")},mt=async ae=>{confirm(`Eliminar el lote del ${ae.date} (${ae.productName})?`)&&(await Qn(Gt(ke,"inventory_clothes_batches",ae.id)),n(ue=>ue.filter(Be=>Be.id!==ae.id)),l(" Lote eliminado"))},ne=()=>{const ae=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),me=We=>(We||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ue=ot.map(We=>`
      <tr>
        <td>${We.date}</td>
        <td>${(We.category||"").toUpperCase()}</td>
        <td>${me(We.productName)}</td>
        <td>${me(We.sku||"")}</td>
        <td>${me(We.size||"")}</td>
        <td>${me(We.color||"")}</td>
        <td>${me(We.clientCode||"")}</td>
        <td>${me(We.gender||"")}</td>
        <td>${(We.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${We.quantity.toFixed(0)}</td>
        <td style="text-align:right">${We.remaining.toFixed(0)}</td>
        <td style="text-align:right">${qi(We.purchasePrice)}</td>
        <td style="text-align:right">${qi(We.salePrice)}</td>
        <td style="text-align:right">${qi(We.invoiceTotal||0)}</td>
        <td style="text-align:right">${qi(We.expectedTotal||0)}</td>
        <td>${me((We.notes||"").slice(0,120))}</td>
        <td>${We.status}</td>
      </tr>`).join(""),Be=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${ae}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${be.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${be.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${qi(be.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${qi(be.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${qi(Number((be.totalEsperado-be.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${ue||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Oe=window.open("","_blank");Oe&&(Oe.document.open(),Oe.document.write(Be),Oe.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>dt(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:ae=>u(ae.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:ae=>A(ae.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:ae=>f(ae.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(ae=>o.jsxs("option",{value:ae.id,children:[ae.name,"  ",ae.category]},ae.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ne,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",be.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",be.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",qi(be.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",qi(be.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",qi(Number((be.totalEsperado-be.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):ot.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):ot.map(ae=>{const me=Q===ae.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:me?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Y,onChange:ue=>W(ue.target.value)}):ae.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(ae.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:ae.productName,children:ae.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:me?o.jsx("input",{className:"w-full border p-1 rounded",value:Ke,onChange:ue=>ve(ue.target.value)}):o.jsx("span",{className:"block truncate",title:ae.sku||"",children:ae.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:me?o.jsx("input",{className:"w-full border p-1 rounded",value:he,onChange:ue=>oe(ue.target.value)}):ae.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:me?o.jsx("input",{className:"w-full border p-1 rounded",value:je,onChange:ue=>Qe(ue.target.value)}):ae.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:me?o.jsx("input",{className:"w-full border p-1 rounded",value:V,onChange:ue=>{const Be=ue.target.value;O1.test(Be)&&Ae(Be)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:ae.clientCode||"",children:ae.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:me?o.jsx("select",{className:"w-full border p-1 rounded",value:tt,onChange:ue=>rt(ue.target.value),children:HSe.map(ue=>o.jsx("option",{value:ue,children:ue||""},ue))}):ae.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(ae.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:me?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(le)?"":le,onChange:ue=>Pe(Math.max(0,parseInt(ue.target.value||"0",10)))}):ae.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:me?ae.remaining:ae.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:me?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Le)?"":Le,onChange:ue=>qe(Math.max(0,parseFloat(ue.target.value||"0")))}):qi(ae.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:me?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(nt)?"":nt,onChange:ue=>st(Math.max(0,parseFloat(ue.target.value||"0")))}):qi(ae.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:qi(me?Et:ae.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:qi(me?Ct:ae.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:me?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Pt,onChange:ue=>fe(ue.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:ae.notes||"",children:ae.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${ae.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ae.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:me?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Wt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Rt,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:ue=>Xe(ue,ae.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},ae.id)})})]})})}),Ne&&gd.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>Re(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:ze.x,top:ze.y},onClick:ae=>ae.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const ae=ot.find(me=>me.id===Ne);return(ae==null?void 0:ae.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Re(null),ut(ae)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const ae=ot.find(me=>me.id===Ne);ae&&(Re(null),bt(ae))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const ae=ot.find(me=>me.id===Ne);ae&&(Re(null),mt(ae))},children:" Borrar"})]})})]}),document.body),Ze&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>dt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>dt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Ge,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ae=>p(ae.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(ae=>o.jsxs("option",{value:ae.id,children:[ae.name,"  ",ae.category,"  ",ae.sku?`SKU: ${ae.sku}`:""]},ae.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:ae=>x(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:ae=>b(Math.max(0,parseInt(ae.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:ae=>I(Math.max(0,parseFloat(ae.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:T===0?"":T,onChange:ae=>C(Math.max(0,parseFloat(ae.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:X,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:re,readOnly:!0,onChange:ae=>ie(ae.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ce,readOnly:!0,onChange:ae=>J(ae.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0,onChange:ae=>Se(ae.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:ae=>F(ae.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:H,onChange:ae=>{const me=ae.target.value;O1.test(me)&&M(me)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!O1.test(H)&&H.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:P,onChange:ae=>D(ae.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[P.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:qi(E),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:qi(O),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>dt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const qSe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],zSe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],WSe=["XS","S","M","L","XL","2XL"],XSe=["2","4","6","8","10","12","14"],YSe=["26","28","30","32","34","36","38"],JSe=["Shein","Usado","Otro"],ZSe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function t_(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function eIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function tIe(t){const e="ROP",r=t_(t.subcat).slice(0,3)||"GEN",n=eIe(t.gender),a=t_(t.color).slice(0,3)||"COL",s=t_(t.size)||"TLL",i=t_(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const rIe=/^[A-Za-z0-9._-]{0,32}$/;function nIe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,I]=v.useState("0"),[T,C]=v.useState(""),[E,S]=v.useState(""),O=v.useMemo(()=>{const M=Number(w||0),L=Number(y||0);return Math.floor(M*L*100)/100},[w,y]),[B,P]=v.useState([]),[D,X]=v.useState(!0),[de,re]=v.useState(""),{refreshKey:ie,refresh:ce}=fc(),[J,pe]=v.useState(!1),Se=v.useMemo(()=>r.toLowerCase()==="jean"?YSe:d==="NINO"||d==="NINA"?XSe:WSe,[r,d]);v.useEffect(()=>{p(tIe({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{X(!0);const M=Yt(At(ke,"products_clothes"),ln("createdAt","desc")),L=await Dt(M),z=[];L.forEach(R=>{const G=R.data();z.push({id:R.id,name:G.name??"(sin nombre)",category:G.category??"",measurement:G.measurement??"unidad",sku:G.sku??"",size:G.size||"",color:G.color||"",brand:G.brand||"",gender:G.gender||"",clientCode:G.clientCode||"",notes:G.notes||"",createdAt:G.createdAt??rr.now()})}),P(z),X(!1)})()},[ie]);const k=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),A(""),f(""),x(""),b(""),I("0"),C(""),S("")},F=async M=>{if(M.preventDefault(),re(""),!t.trim()){re("Ingresa el nombre del producto.");return}if(h&&!rIe.test(h)){re("Cdigo del cliente invlido");return}const L=Number(w||0),z=Number(y||0);if(L<0){re("La cantidad de piezas debe ser 0 o mayor.");return}if(z<0){re("El precio de venta no puede ser negativo.");return}try{const R=await En(At(ke,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:rr.now(),price:z||0});if(P(G=>[{id:R.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:rr.now()},...G]),L>0){const G=new Date().toISOString().slice(0,10),ee=T||G;await En(At(ke,"inventory_clothes_batches"),{productId:R.id,productName:t.trim(),category:r,unit:"unidad",quantity:L,remaining:L,purchasePrice:0,salePrice:z||0,invoiceTotal:0,expectedTotal:O||0,date:ee,createdAt:rr.now(),status:"PENDIENTE",notes:E||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}re(L>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),k()}catch(R){console.error(R),re(" Error al crear producto")}},H=async M=>{confirm(`Eliminar el producto "${M.name}"?`)&&(await Qn(Gt(ke,"products_clothes",M.id)),P(z=>z.filter(R=>R.id!==M.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:ce,loading:D}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{pe(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),J&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:M=>e(M.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:M=>n(M.target.value),children:qSe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:M=>A(M.target.value),children:ZSe.map(M=>o.jsx("option",{value:M,children:M||""},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value),children:[o.jsx("option",{value:"",children:""}),Se.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:M=>l(M.target.value),children:[o.jsx("option",{value:"",children:""}),zSe.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:M=>u(M.target.value),children:JSe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:M=>f(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:M=>b(M.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:M=>I(M.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:T,onChange:M=>C(M.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(O)?"":O.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:D?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):B.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):B.map(M=>{var L;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(L=M.createdAt)!=null&&L.toDate?M.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:M.category}),o.jsx("td",{className:"p-2 border",children:M.name}),o.jsx("td",{className:"p-2 border",children:M.sku}),o.jsx("td",{className:"p-2 border",children:M.size||""}),o.jsx("td",{className:"p-2 border",children:M.color||""}),o.jsx("td",{className:"p-2 border",children:M.brand||""}),o.jsx("td",{className:"p-2 border",children:M.gender||""}),o.jsx("td",{className:"p-2 border",children:M.clientCode||""}),o.jsx("td",{className:"p-2 border",children:M.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>H(M),children:"Borrar"})})]},M.id)})})]})}),de&&o.jsx("p",{className:"mt-2 text-sm",children:de})]})}async function aIe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",e)),u=(await Dt(i)).docs.map(A=>({id:A.id,data:A.data()})).sort((A,h)=>{var x,y;const f=String(A.data.date||""),m=String(h.data.date||"");if(f!==m)return f<m?-1:1;const p=((x=A.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(A=>Gt(ke,"inventory_clothes_batches",A.id)),d=[];return await Di(ke,async A=>{const h=await Promise.all(u.map(m=>A.get(m)));let f=s;for(let m=0;m<u.length&&f>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,f),I=Math.max(0,b-w);A.update(p,{remaining:I}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),f-=w}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} unidades.`);if(a)for(const m of d)await En(At(ke,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:rr.now()})}),{allocations:d}}async function Mj(t){const e=Gt(ke,"sales_clothes",t),r=await fo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const A=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),A=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:A.length?A:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Di(ke,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Di(ke,async c=>{const u=[];for(const A of a)for(const h of A.allocations||[])u.push({ref:Gt(ke,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(A=>c.get(A.ref)));for(let A=0;A<u.length;A++){const h=d[A];if(!h.exists())continue;const f=h.data(),m=Math.max(0,Math.floor(Number(f.remaining||0)));c.update(u[A].ref,{remaining:m+u[A].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,A)=>d+A.qty,0),0)}):(await Di(ke,async l=>{const c={};for(const f of a){if(!f.productId||f.qty<=0)continue;const m=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",f.productId)),g=(await Dt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[f.productId]=g}const u=[];for(const f of a){if(!f.productId||f.qty<=0)continue;if(Array.isArray(f.allocations)&&f.allocations.length>0){for(const g of f.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[f.productId]||[];let p=f.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,f.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const f of u)d[f.id]=(d[f.id]||0)+Math.max(0,Math.floor(Number(f.addBack||0)));const A=Object.keys(d).map(f=>Gt(ke,"inventory_clothes_batches",f)),h=await Promise.all(A.map(f=>l.get(f)));for(let f=0;f<A.length;f++){const m=h[f];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[A[f].id]||0)));l.update(A[f],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const PQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],UA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function r_(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function jQ(t){const e=Yt(At(ke,"ar_movements"),lr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn(Gt(ke,"ar_movements",n.id))))}function sIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async be=>{e(!0),n(!0),s(be),l([]);try{const ut=(await Dt(Yt(At(ke,"sales_clothes"),lr("__name__","==",be)))).docs[0],bt=ut==null?void 0:ut.data(),Wt=(Array.isArray(bt==null?void 0:bt.items)?bt.items:bt!=null&&bt.item?[bt.item]:[]).map(mt=>({productName:String(mt.productName||""),qty:Number(mt.qty||0),unitPrice:Number(mt.unitPrice||0),discount:Number(mt.discount||0),total:Number(mt.total||0)}));l(Wt)}catch(Ge){console.error(Ge)}finally{n(!1)}},[u,d]=v.useState(""),[A,h]=v.useState("+505 "),[f,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[I,T]=v.useState([]),[C,E]=v.useState(!0),[S,O]=v.useState(""),[B,P]=v.useState(null),[D,X]=v.useState(""),[de,re]=v.useState("+505 "),[ie,ce]=v.useState(""),[J,pe]=v.useState(""),[Se,k]=v.useState("ACTIVO"),[F,H]=v.useState(0),[M,L]=v.useState(!1),[z,R]=v.useState(null),[G,ee]=v.useState(!1),[te,Q]=v.useState([]),[xe,Y]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[W,le]=v.useState(!1),[Pe,Le]=v.useState(0),[qe,nt]=v.useState(new Date().toISOString().slice(0,10)),[st,Et]=v.useState(""),[yt,Ct]=v.useState(!1),[Ot,Pt]=v.useState(null),[fe,Ke]=v.useState(""),[ve,he]=v.useState(0),[oe,je]=v.useState(""),[Qe,tt]=v.useState(!1);v.useEffect(()=>{(async()=>{const be=Yt(At(ke,"customers_clothes"),ln("createdAt","desc")),Ge=await Dt(be),ut=[];Ge.forEach(bt=>{const Rt=bt.data();ut.push({id:bt.id,name:Rt.name??"",phone:Rt.phone??"+505 ",place:Rt.place??"",notes:Rt.notes??"",status:Rt.status??"ACTIVO",creditLimit:Number(Rt.creditLimit??0),createdAt:Rt.createdAt??rr.now(),balance:0})});for(const bt of ut)try{const Rt=Yt(At(ke,"ar_movements"),lr("customerId","==",bt.id)),Wt=await Dt(Rt);let mt=0;Wt.forEach(ne=>mt+=Number(ne.data().amount||0)),bt.balance=mt}catch{bt.balance=0}T(ut),E(!1)})()},[]);const rt=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},Te=async be=>{if(be.preventDefault(),O(""),!u.trim()){O("Ingresa el nombre.");return}const Ge=r_(A);if(Ge.length<6){O("Telfono incompleto.");return}try{const ut=await En(At(ke,"customers_clothes"),{name:u.trim(),phone:Ge,place:f||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:rr.now()});T(bt=>[{id:ut.id,name:u.trim(),phone:Ge,place:f||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:rr.now(),balance:0},...bt]),rt(),tt(!1),O(" Cliente creado")}catch(ut){console.error(ut),O(" Error al crear cliente")}},Ee=be=>{P(be.id),X(be.name),re(be.phone||"+505 "),ce(be.place||""),pe(be.notes||""),k(be.status||"ACTIVO"),H(Number(be.creditLimit||0))},V=()=>{P(null),X(""),re("+505 "),ce(""),pe(""),k("ACTIVO"),H(0)},Ae=async()=>{if(!B)return;const be=r_(de);if(!D.trim()){O("Ingresa el nombre.");return}try{await rn(Gt(ke,"customers_clothes",B),{name:D.trim(),phone:be,place:ie||"",notes:J||"",status:Se,creditLimit:Number(F||0)}),T(Ge=>Ge.map(ut=>ut.id===B?{...ut,name:D.trim(),phone:be,place:ie||"",notes:J||"",status:Se,creditLimit:Number(F||0)}:ut)),V(),O(" Cliente actualizado")}catch(Ge){console.error(Ge),O(" Error al actualizar")}},Ne=async be=>{if(confirm(`Eliminar al cliente "${be.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const ut=Yt(At(ke,"sales_clothes"),lr("customerId","==",be.id)),bt=await Dt(ut);for(const mt of bt.docs){const ne=mt.id;try{await Mj(ne)}catch(ae){console.warn("restoreSaleAndDeleteClothes error",ae);try{await Qn(Gt(ke,"sales_clothes",ne))}catch{}}await jQ(ne)}const Rt=Yt(At(ke,"ar_movements"),lr("customerId","==",be.id)),Wt=await Dt(Rt);await Promise.all(Wt.docs.map(mt=>Qn(Gt(ke,"ar_movements",mt.id)))),await Qn(Gt(ke,"customers_clothes",be.id)),T(mt=>mt.filter(ne=>ne.id!==be.id)),O(" Cliente eliminado y prendas devueltas al inventario")}catch(ut){console.error(ut),O(" No se pudo eliminar el cliente.")}finally{E(!1)}},Re=async be=>{R(be),Q([]),Y({saldoActual:0,totalAbonado:0,totalCargos:0}),L(!0),le(!1),Le(0),nt(new Date().toISOString().slice(0,10)),Et(""),Pt(null),ee(!0);try{const Ge=Yt(At(ke,"ar_movements"),lr("customerId","==",be.id)),ut=await Dt(Ge),bt=[];ut.forEach(Rt=>{var mt,ne;const Wt=Rt.data();bt.push({id:Rt.id,date:Wt.date??((ne=(mt=Wt.createdAt)==null?void 0:mt.toDate)!=null&&ne.call(mt)?Wt.createdAt.toDate().toISOString().slice(0,10):""),type:Wt.type??"CARGO",amount:Number(Wt.amount||0),ref:Wt.ref||{},comment:Wt.comment||"",createdAt:Wt.createdAt})}),bt.sort((Rt,Wt)=>{var ae,me;if(Rt.date!==Wt.date)return Rt.date.localeCompare(Wt.date);const mt=((ae=Rt.createdAt)==null?void 0:ae.seconds)||0,ne=((me=Wt.createdAt)==null?void 0:me.seconds)||0;return mt-ne}),Q(bt),ze(bt)}catch(Ge){console.error(Ge),O(" No se pudo cargar el estado de cuenta")}finally{ee(!1)}},ze=be=>{const Ge=be.reduce((Rt,Wt)=>Rt+(Number(Wt.amount)||0),0),ut=be.filter(Rt=>Number(Rt.amount)<0).reduce((Rt,Wt)=>Rt+Math.abs(Number(Wt.amount)||0),0),bt=be.filter(Rt=>Number(Rt.amount)>0).reduce((Rt,Wt)=>Rt+Number(Wt.amount)||0,0);Y({saldoActual:Ge,totalAbonado:ut,totalCargos:bt})},Ye=async()=>{if(!z)return;O("");const be=Number(Pe||0);if(!(be>0)){O("Ingresa un monto de abono mayor a 0.");return}const Ge=parseFloat(be.toFixed(2));if(!qe){O("Selecciona la fecha del abono.");return}try{Ct(!0);const ut={customerId:z.id,type:"ABONO",amount:-Ge,date:qe,comment:st||"",createdAt:rr.now()},Rt={id:(await En(At(ke,"ar_movements"),ut)).id,date:qe,type:"ABONO",amount:-Ge,comment:st||"",createdAt:rr.now()},Wt=[...te,Rt].sort((mt,ne)=>{var ue,Be;if(mt.date!==ne.date)return mt.date.localeCompare(ne.date);const ae=((ue=mt.createdAt)==null?void 0:ue.seconds)||0,me=((Be=ne.createdAt)==null?void 0:Be.seconds)||0;return ae-me});Q(Wt),ze(Wt),T(mt=>mt.map(ne=>ne.id===z.id?{...ne,balance:(ne.balance||0)-Ge}:ne)),R(mt=>mt&&{...mt,balance:(mt.balance||0)-Ge}),Le(0),Et(""),nt(new Date().toISOString().slice(0,10)),le(!1),O(" Abono registrado")}catch(ut){console.error(ut),O(" Error al registrar el abono")}finally{Ct(!1)}},Ze=be=>{Pt(be.id),Ke(be.date||new Date().toISOString().slice(0,10)),he(Math.abs(Number(be.amount||0))),je(be.comment||"")},dt=()=>{Pt(null),Ke(""),he(0),je("")},ge=async()=>{if(!Ot)return;const be=te.findIndex(Rt=>Rt.id===Ot);if(be===-1)return;const Ge=te[be],ut=Number(ve||0);if(!(ut>0)){O("El monto debe ser mayor a 0.");return}const bt=Ge.type==="ABONO"?-parseFloat(ut.toFixed(2)):+parseFloat(ut.toFixed(2));try{await rn(Gt(ke,"ar_movements",Ot),{date:fe,amount:bt,comment:oe||""});const Rt=[...te];Rt[be]={...Ge,date:fe,amount:bt,comment:oe||""},Rt.sort((mt,ne)=>{var ue,Be;if(mt.date!==ne.date)return mt.date.localeCompare(ne.date);const ae=((ue=mt.createdAt)==null?void 0:ue.seconds)||0,me=((Be=ne.createdAt)==null?void 0:Be.seconds)||0;return ae-me}),Q(Rt),ze(Rt);const Wt=Rt.reduce((mt,ne)=>mt+(Number(ne.amount)||0),0);T(mt=>mt.map(ne=>ne.id===(z==null?void 0:z.id)?{...ne,balance:Wt}:ne)),R(mt=>mt&&{...mt,balance:Wt}),dt(),O(" Movimiento actualizado")}catch(Rt){console.error(Rt),O(" Error al actualizar movimiento")}},Xe=async be=>{var ut,bt;if(confirm(`Eliminar este movimiento (${be.type==="ABONO"?"Abono":"Compra"}) del ${be.date}?${be.type==="CARGO"&&((ut=be.ref)!=null&&ut.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),be.type==="CARGO"&&((bt=be.ref)!=null&&bt.saleId)){try{await Mj(be.ref.saleId)}catch(mt){console.warn("restoreSaleAndDeleteClothes error",mt),E(!1),O(" No se pudo devolver inventario de la venta.");return}await jQ(be.ref.saleId)}else await Qn(Gt(ke,"ar_movements",be.id));const Rt=te.filter(mt=>{var ne,ae;return be.type==="CARGO"&&((ne=be.ref)!=null&&ne.saleId)?((ae=mt.ref)==null?void 0:ae.saleId)!==be.ref.saleId:mt.id!==be.id});Q(Rt),ze(Rt);const Wt=Rt.reduce((mt,ne)=>mt+(Number(ne.amount)||0),0);T(mt=>mt.map(ne=>ne.id===(z==null?void 0:z.id)?{...ne,balance:Wt}:ne)),R(mt=>mt&&{...mt,balance:Wt}),O(" Movimiento eliminado")}catch(Rt){console.error(Rt),O(" Error al eliminar movimiento")}finally{E(!1)}},ot=v.useMemo(()=>[...I].sort((be,Ge)=>{var ut,bt;return be.status!==Ge.status?be.status==="BLOQUEADO"?1:-1:(((ut=Ge.createdAt)==null?void 0:ut.seconds)||0)-(((bt=be.createdAt)==null?void 0:bt.seconds)||0)}),[I]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>tt(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:C?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):ot.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):ot.map(be=>{var ut;const Ge=B===be.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(ut=be.createdAt)!=null&&ut.toDate?be.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:bt=>X(bt.target.value)}):be.name}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:bt=>re(r_(bt.target.value))}):be.phone}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsxs("select",{className:"w-full border p-1 rounded",value:ie,onChange:bt=>ce(bt.target.value),children:[o.jsx("option",{value:"",children:""}),PQ.map(bt=>o.jsx("option",{value:bt,children:bt},bt))]}):be.place||""}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsxs("select",{className:"w-full border p-1 rounded",value:Se,onChange:bt=>k(bt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${be.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:be.status})}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:bt=>H(Math.max(0,Number(bt.target.value||0)))}):UA(be.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:UA(be.balance||0)}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:J,onChange:bt=>pe(bt.target.value),maxLength:500}):o.jsx("span",{title:be.notes||"",children:(be.notes||"").length>40?(be.notes||"").slice(0,40)+"":be.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Ge?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ae,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:V,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ee(be),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ne(be),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Re(be),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},be.id)})})]})}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),Qe&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>tt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>tt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Te,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:be=>d(be.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:be=>h(r_(be.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:be=>m(be.target.value),children:[o.jsx("option",{value:"",children:""}),PQ.map(be=>o.jsx("option",{value:be,children:be},be))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:be=>y(be.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:be=>w(Math.max(0,Number(be.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:be=>g(be.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>tt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),M&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(z==null?void 0:z.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Le(0),nt(new Date().toISOString().slice(0,10)),Et(""),le(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>L(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:UA(xe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:UA(xe.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:UA(xe.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:G?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):te.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):te.map(be=>{var ut,bt;const Ge=Ot===be.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:fe,onChange:Rt=>Ke(Rt.target.value)}):be.date||""}),o.jsx("td",{className:"p-2 border",children:be.amount>=0?(ut=be.ref)!=null&&ut.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(be.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(bt=be.ref)!=null&&bt.saleId?`Venta #${be.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsx("input",{className:"w-full border p-1 rounded",value:oe,onChange:Rt=>je(Rt.target.value),placeholder:"Comentario"}):o.jsx("span",{title:be.comment||"",children:(be.comment||"").length>40?(be.comment||"").slice(0,40)+"":be.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:Ge?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ve)?"":ve,onChange:Rt=>{const Wt=Number(Rt.target.value||0),mt=Number.isFinite(Wt)?Math.max(0,parseFloat(Wt.toFixed(2))):0;he(mt)},placeholder:"0.00",title:be.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):UA(be.amount)}),o.jsx("td",{className:"p-2 border",children:Ge?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ge,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:dt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ze(be),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Xe(be),children:"Borrar"})]})})]},be.id)})})]})})]})}),W&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(z==null?void 0:z.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:qe,onChange:be=>nt(be.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Pe===0?"":Pe,onChange:be=>{const Ge=Number(be.target.value||0),ut=Number.isFinite(Ge)?Math.max(0,parseFloat(Ge.toFixed(2))):0;Le(ut)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:st,onChange:be=>Et(be.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[st.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>le(!1),disabled:yt,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Ye,disabled:yt,children:yt?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((be,Ge)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:be.productName}),o.jsx("td",{className:"p-2 border text-right",children:be.qty}),o.jsx("td",{className:"p-2 border text-right",children:UA(be.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:UA(be.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:UA(be.total)})]},Ge))})]})})]})})]})}const Bg=t=>`C$ ${(Number(t)||0).toFixed(2)}`,iIe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function oIe(t){if(!t)return 0;const e=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",t)),r=await Dt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const l=i.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,A=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=A,s=u):c===n&&A>a&&(a=A,s=u)}),Number(s||0)}async function kQ(t){if(!t)return 0;const e=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",t)),r=await Dt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function FQ(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function lIe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState({}),[i,l]=v.useState("CONTADO"),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(new Date().toISOString().slice(0,10)),[m,p]=v.useState(""),[g,x]=v.useState([]),y=v.useMemo(()=>g.reduce((Y,W)=>Y+(W.qty||0),0),[g]),b=v.useMemo(()=>{const Y=g.reduce((W,le)=>{const Pe=Math.max(0,(Number(le.unitPrice)||0)*(le.qty||0)-(Number(le.discount)||0));return W+Pe},0);return Math.floor(Y*100)/100},[g]),[w,I]=v.useState(0),[T,C]=v.useState(""),[E,S]=v.useState(!1),[O,B]=v.useState(!1),[P,D]=v.useState(""),[X,de]=v.useState("+505 "),[re,ie]=v.useState(""),[ce,J]=v.useState(""),[pe,Se]=v.useState("ACTIVO"),[k,F]=v.useState(0),H=()=>{D(""),de("+505 "),ie(""),J(""),Se("ACTIVO"),F(0)};v.useEffect(()=>{(async()=>{const Y=Yt(At(ke,"customers_clothes"),ln("createdAt","desc")),W=await Dt(Y),le=[];W.forEach(yt=>{const Ct=yt.data();le.push({id:yt.id,name:Ct.name??"",phone:Ct.phone??"+505 ",place:Ct.place??"",status:Ct.status??"ACTIVO",creditLimit:Number(Ct.creditLimit??0),balance:0})});for(const yt of le)try{const Ct=Yt(At(ke,"ar_movements"),lr("customerId","==",yt.id)),Ot=await Dt(Ct);let Pt=0;Ot.forEach(fe=>Pt+=Number(fe.data().amount||0)),yt.balance=Pt}catch{yt.balance=0}e(le);const Pe=Yt(At(ke,"products_clothes"),ln("createdAt","desc")),Le=await Dt(Pe),qe=[];Le.forEach(yt=>{const Ct=yt.data();qe.push({id:yt.id,name:Ct.name??"(sin nombre)",sku:Ct.sku??""})}),n(qe);const nt=Yt(At(ke,"inventory_clothes_batches"),lr("remaining",">",0)),st=await Dt(nt),Et={};st.forEach(yt=>{const Ct=yt.data(),Ot=Ct.productId||"",Pt=Number(Ct.remaining||0);Ot&&(Et[Ot]=(Et[Ot]||0)+Pt)}),s(Et)})()},[]);const M=v.useMemo(()=>t.find(Y=>Y.id===c),[t,c]),L=(M==null?void 0:M.balance)||0,z=i==="CREDITO"?L+Math.max(0,Number(b||0))-Math.max(0,Number(w||0)):0,R=async Y=>{if(!Y)return;if(g.some(qe=>qe.productId===Y)){p("");return}const W=r.find(qe=>qe.id===Y);if(!W){p("");return}let le=await oIe(Y);le||(le=Number((W==null?void 0:W.price)||0));const Pe=await kQ(Y),Le={productId:Y,productName:W.name||"",sku:W.sku||"",unitPrice:Number(le)||0,available:Number(Pe)||0,qty:0,discount:0};x(qe=>[...qe,Le]),p("")},G=(Y,W)=>{x(le=>le.map(Pe=>{if(Pe.productId!==Y)return Pe;if(W==="")return{...Pe,qty:0};const Le=Math.max(0,Math.floor(Number(W)));return{...Pe,qty:Le}}))},ee=(Y,W)=>{x(le=>le.map(Pe=>{if(Pe.productId!==Y)return Pe;if(W==="")return{...Pe,discount:0};const Le=Math.max(0,Math.floor(Number(W)));return{...Pe,discount:Le}}))},te=Y=>x(W=>W.filter(le=>le.productId!==Y)),Q=async()=>{if(!h)return"Selecciona la fecha.";if(g.length===0)return"Agrega al menos un producto.";const Y=g.filter(W=>(W.qty||0)>0);if(Y.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(b>0))return"El total debe ser mayor a cero.";if(i==="CONTADO"){if(!d.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!c)return"Selecciona un cliente (crdito).";if(w<0)return"El pago inicial no puede ser negativo.";if(w>b)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const W of Y){const le=await kQ(W.productId);if(W.qty>le)return`Inventario insuficiente para "${W.productName}". Disponible: ${le} unidades.`;const Pe=(Number(W.unitPrice)||0)*(W.qty||0),Le=Number(W.discount)||0;if(!Number.isInteger(Le)||Le<0)return`El descuento en "${W.productName}" debe ser entero y  0.`;if(Le>Pe)return`El descuento en "${W.productName}" no puede exceder C$ ${Pe.toFixed(2)}.`}return null},xe=async Y=>{Y.preventDefault(),C("");const W=await Q();if(W){C(" "+W);return}try{S(!0);const le=g.filter(nt=>(nt.qty||0)>0).map(nt=>{const st=(Number(nt.unitPrice)||0)*(nt.qty||0),Et=Math.max(0,Math.floor(Number(nt.discount)||0)),yt=Math.max(0,st-Et);return{productId:nt.productId,productName:nt.productName,sku:nt.sku||"",qty:nt.qty,unitPrice:Number(nt.unitPrice)||0,discount:Et,total:Math.floor(yt*100)/100}}),Pe={type:i,date:h,createdAt:rr.now(),itemsTotal:Number(b)||0,total:Number(b)||0,quantity:Number(y)||0,items:le};i==="CONTADO"?Pe.customerName=d.trim():(Pe.customerId=c,Pe.downPayment=Number(w)||0);const Le=await En(At(ke,"sales_clothes"),Pe);if(i==="CREDITO"&&c){const nt={customerId:c,date:h,createdAt:rr.now(),ref:{saleId:Le.id}};await En(At(ke,"ar_movements"),{...nt,type:"CARGO",amount:Number(b)||0}),Number(w)>0&&await En(At(ke,"ar_movements"),{...nt,type:"ABONO",amount:-Number(w)})}const qe={};for(const nt of le)if(nt.qty>0){const{allocations:st}=await aIe({productId:nt.productId,quantity:nt.qty,saleDate:h,saleId:Le.id});qe[nt.productId]={productId:nt.productId,allocations:st}}await rn(Gt(ke,"sales_clothes",Le.id),{allocationsByItem:qe}),l("CONTADO"),u(""),A(""),f(new Date().toISOString().slice(0,10)),x([]),I(0),i==="CREDITO"&&c&&e(nt=>nt.map(st=>st.id===c?{...st,balance:(st.balance||0)+(Number(b)||0)-(Number(w)||0)}:st)),C(" Venta registrada"),(async()=>{const nt=Yt(At(ke,"inventory_clothes_batches"),lr("remaining",">",0)),st=await Dt(nt),Et={};st.forEach(yt=>{const Ct=yt.data(),Ot=Ct.productId||"",Pt=Number(Ct.remaining||0);Ot&&(Et[Ot]=(Et[Ot]||0)+Pt)}),s(Et)})()}catch(le){console.error(le),C(" Error al guardar la venta")}finally{S(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:xe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:Y=>l(Y.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:d,onChange:Y=>A(Y.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:c,onChange:Y=>u(Y.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(Y=>o.jsxs("option",{value:Y.status==="ACTIVO"?Y.id:"",disabled:Y.status==="BLOQUEADO",children:[Y.name," | ",Y.phone," | Saldo: ",Bg(Y.balance||0)]},Y.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>B(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Bg(L)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:Y=>I(Math.max(0,Number(Y.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Bg(z)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:h,onChange:Y=>f(Y.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:async Y=>{const W=Y.target.value;p(W),await R(W)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(Y=>{const W=g.some(Le=>Le.productId===Y.id),le=a[Y.id]||0,Pe=W||le<=0;return o.jsxs("option",{value:Pe?"":Y.id,disabled:Pe,children:[Y.name," ",Y.sku?` ${Y.sku}`:""," ",le>0?`(disp: ${le})`:"(sin stock)",W?" (seleccionado)":""]},Y.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),g.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):g.map(Y=>{const W=Math.max(0,(Y.available||0)-(Y.qty||0)),le=(Number(Y.unitPrice)||0)*(Y.qty||0),Pe=Math.max(0,le-(Number(Y.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[Y.productName,Y.sku?`  ${Y.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Bg(Y.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:W}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y.qty)||Y.qty===0?"":Y.qty,onChange:Le=>G(Y.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y.discount)||Y.discount===0?"":Y.discount,onChange:Le=>ee(Y.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:Bg(Pe)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>te(Y.productId),title:"Quitar producto",children:""})})]},Y.productId)})]}),g.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:y})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Bg(b)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:E,children:E?"Guardando...":"Registrar venta"})})]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:P,onChange:Y=>D(Y.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:X,onChange:Y=>de(FQ(Y.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:re,onChange:Y=>ie(Y.target.value),children:[o.jsx("option",{value:"",children:""}),iIe.map(Y=>o.jsx("option",{value:Y,children:Y},Y))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:Y=>Se(Y.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:Y=>F(Math.max(0,Number(Y.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ce,onChange:Y=>J(Y.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{H(),B(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(C(""),!P.trim()){C("Ingresa el nombre del nuevo cliente.");return}const Y=FQ(X);try{const W=await En(At(ke,"customers_clothes"),{name:P.trim(),phone:Y,place:re||"",notes:ce||"",status:pe,creditLimit:Number(k||0),createdAt:rr.now()}),le={id:W.id,name:P.trim(),phone:Y,place:re||"",status:pe,creditLimit:Number(k||0),balance:0};e(Pe=>[le,...Pe]),u(W.id),H(),B(!1),C(" Cliente creado")}catch(W){console.error(W),C(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),E&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const bi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function EC(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function cIe(t,e){const r=EC(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function uIe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const h=Math.min(A.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*A.cost),A.qtyLeft-=h,d-=h}}return i}function dIe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(!1),[E,S]=v.useState(null),[O,B]=v.useState([]),[P,D]=v.useState(!1),[X,de]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),I("");try{const k=await Dt(At(ke,"sales_clothes")),F=[],H=[];k.forEach(Y=>{const W=Y.data(),le=cIe(W,Y.id);le&&(le.date<=a&&F.push(le),le.date>=r&&le.date<=a&&H.push(le))}),u(F),l(H);const M=await Dt(At(ke,"inventory_clothes_batches")),L=[];M.forEach(Y=>{const W=Y.data(),le=EC(W);!le||le>a||L.push({id:Y.id,productId:W.productId,productName:W.productName||"",date:le,quantity:Number(W.quantity||0),remaining:Number(W.remaining||0),purchasePrice:Number(W.purchasePrice||0)})}),A(L);const z=await Dt(At(ke,"expenses_clothes")),R=[];z.forEach(Y=>{const W=Y.data(),le=EC(W);le&&le>=r&&le<=a&&R.push({id:Y.id,date:le,category:W.category||"",description:W.description||"",amount:Number(W.amount||0),status:W.status||""})}),f(R);const G=await Dt(At(ke,"ar_movements")),ee=[],te={};G.forEach(Y=>{const W=Y.data(),le=EC(W);if(!le)return;const Pe=W.customerId,Le=Number(W.amount||0);Pe&&(te[Pe]=(te[Pe]||0)+Le),W.type==="ABONO"&&le>=r&&le<=a&&ee.push({id:Y.id,customerId:Pe,type:"ABONO",amount:Le,date:le})}),p(ee);const Q=await Dt(At(ke,"customers_clothes")),xe=[];Q.forEach(Y=>{const W=Y.data();xe.push({id:Y.id,name:W.name||"",balance:te[Y.id]||0})}),x(xe)}catch(k){console.error(k),I(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const re=v.useMemo(()=>{try{return uIe(d,c,r,a)}catch(k){return console.error(k),0}},[d,c,r,a]),ie=v.useMemo(()=>{const k=i.reduce((te,Q)=>te+(Q.total||0),0),F=h.reduce((te,Q)=>te+(Q.amount||0),0),H=k-re,M=H-F,L=m.reduce((te,Q)=>te+Math.abs(Q.amount||0),0),z=g.filter(te=>(te.balance||0)>0),R=z.reduce((te,Q)=>te+(Q.balance||0),0);let G=0,ee=0;for(const te of i){const Q=(te.items||[]).reduce((xe,Y)=>xe+(Number(Y.qty)||0),0);te.type==="CONTADO"?G+=Q:ee+=Q}return{ventasTotales:k,costoMercaderia:re,gastosPeriodo:F,gananciaAntes:H,gananciaDespues:M,abonosRecibidos:L,saldosPendientes:R,clientesConSaldo:z.length,prendasCash:G,prendasCredito:ee}},[i,h,m,g,re]),ce=v.useMemo(()=>{const k={};for(const F of i){if(F.type!=="CREDITO"||!F.customerId)continue;const H=(F.items||[]).reduce((M,L)=>M+(Number(L.qty)||0),0);k[F.customerId]=(k[F.customerId]||0)+H}return g.filter(F=>(F.balance||0)>0).map(F=>({customerId:F.id,name:F.name,prendasCredito:k[F.id]||0,saldo:F.balance||0})).sort((F,H)=>H.saldo-F.saldo)},[g,i]),J=v.useMemo(()=>{const k={};return g.forEach(F=>k[F.id]=F.name),k},[g]),pe=v.useMemo(()=>[...i].sort((k,F)=>F.date.localeCompare(k.date)).map(k=>{var M;const F=(k.items||[]).reduce((L,z)=>L+(Number(z.qty)||0),0);let H="Cash";return k.type==="CREDITO"&&k.customerId?H=J[k.customerId]||"":k.type==="CONTADO"&&(H=((M=k.customerName)==null?void 0:M.trim())||"Cash"),{id:k.id,date:k.date,type:k.type==="CREDITO"?"Crdito":"Cash",customer:H,piezas:F,total:Number(k.total||0)}}),[i,J]),Se=async k=>{C(!0),S({id:k.customerId,name:k.name}),B([]),D(!0),de({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const F=[];let H=0,M=0,L=0;for(const ee of i)if(!(ee.type!=="CREDITO"||ee.customerId!==k.customerId))for(const te of ee.items||[]){const Q=Number(te.qty||0),xe=Number(te.unitPrice||0),Y=Q*xe,W=Math.max(0,Number(te.discount||0)),le=Math.max(0,Y-W);F.push({saleId:ee.id,date:ee.date,productName:te.productName,sku:te.sku||"",qty:Q,unitPrice:xe,lineTotal:Y,discount:W,lineFinal:le}),H+=Y,M+=W,L+=le}let z=0;for(const ee of m)ee.customerId===k.customerId&&(z+=Math.abs(ee.amount||0));const R=g.find(ee=>ee.id===k.customerId),G=(R==null?void 0:R.balance)||0;B(F),de({totalBruto:H,totalDescuento:M,totalFiado:L,saldoActual:G,abonadoPeriodo:z})}catch(F){console.error(F),I(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(Xc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:k=>n(k.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:k=>s(k.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(ie.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(ie.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:bi(ie.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(ie.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:bi(ie.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(ie.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(ie.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:ie.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:ie.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:ie.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ce.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ce.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Se({customerId:k.customerId,name:k.name}),title:"Ver piezas fiadas del periodo",children:k.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:bi(k.saldo)})]},k.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):pe.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.customer}),o.jsx("td",{className:"p-2 border",children:k.type}),o.jsx("td",{className:"p-2 border",children:k.piezas}),o.jsx("td",{className:"p-2 border",children:bi(k.total)})]},k.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((k,F)=>k.date.localeCompare(F.date)).map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.category||""}),o.jsx("td",{className:"p-2 border",children:k.description?o.jsx("span",{title:k.description,children:k.description.length>40?k.description.slice(0,40)+"":k.description}):""}),o.jsx("td",{className:"p-2 border",children:bi(k.amount)}),o.jsx("td",{className:"p-2 border",children:k.status||""})]},k.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>C(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(X.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(X.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(X.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(X.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:bi(X.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:P?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):O.sort((k,F)=>k.date.localeCompare(F.date)).map((k,F)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.productName}),o.jsx("td",{className:"p-2 border",children:k.sku||""}),o.jsx("td",{className:"p-2 border",children:k.qty}),o.jsx("td",{className:"p-2 border",children:bi(k.unitPrice)}),o.jsx("td",{className:"p-2 border",children:bi(k.lineTotal)}),o.jsx("td",{className:"p-2 border",children:bi(k.discount)}),o.jsx("td",{className:"p-2 border",children:bi(k.lineFinal)})]},`${k.saleId}-${F}`))})]})})]})})]})}const OQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],n_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function AIe(){const[t,e]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[h,f]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState(""),[X,de]=v.useState(0),[re,ie]=v.useState("PENDIENTE"),[ce,J]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Yt(At(ke,"expenses_clothes"),ln("date","desc")),G=await Dt(R),ee=[];G.forEach(te=>{const Q=te.data();ee.push({id:te.id,date:Q.date||wr(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??rr.now()})}),x(ee)}catch(R){console.error(R),I(" Error al cargar gastos")}finally{b(!1)}})()},[]);const pe=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=pe.reduce((te,Q)=>te+(Q.amount||0),0),G=pe.filter(te=>te.status==="PAGADO").reduce((te,Q)=>te+(Q.amount||0),0),ee=R-G;return{total:R,pagado:G,pendiente:ee}},[pe]),k=()=>{s(wr(new Date,"yyyy-MM-dd")),l(""),u(""),A(0),f("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),I(""),!i){I("Selecciona una categora.");return}if(!c.trim()){I("Ingresa una descripcin.");return}if(!d||d<=0){I("Ingresa un monto vlido.");return}try{const G=await En(At(ke,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:rr.now()});x(ee=>[{id:G.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:rr.now()},...ee]),k(),I(" Gasto registrado")}catch(G){console.error(G),I(" Error al guardar gasto")}},H=R=>{C(R.id),S(R.date),B(R.category||""),D(R.description||""),de(Number(R.amount||0)),ie(R.status||"PENDIENTE"),J(R.notes||"")},M=()=>{C(null),S(""),B(""),D(""),de(0),ie("PENDIENTE"),J("")},L=async()=>{if(T){if(!O){I("Selecciona una categora.");return}if(!P.trim()){I("Ingresa una descripcin.");return}if(!X||X<=0){I("Ingresa un monto vlido.");return}try{await rn(Gt(ke,"expenses_clothes",T),{date:E,category:O,description:P.trim(),amount:Number(X.toFixed(2)),status:re,notes:ce||""}),x(R=>R.map(G=>G.id===T?{...G,date:E,category:O,description:P.trim(),amount:Number(X.toFixed(2)),status:re,notes:ce||""}:G)),M(),I(" Gasto actualizado")}catch(R){console.error(R),I(" Error al actualizar gasto")}}},z=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Qn(Gt(ke,"expenses_clothes",R.id)),x(ee=>ee.filter(te=>te.id!==R.id)),I(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",n_(Se.total)]}),o.jsxs("div",{children:["Pagado: ",n_(Se.pagado)]}),o.jsxs("div",{children:["Pendiente: ",n_(Se.pendiente)]})]})]}),o.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>l(R.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),OQ.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>A(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>f(R.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):pe.slice().sort((R,G)=>R.date.localeCompare(G.date)).map(R=>{const G=T===R.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ee=>S(ee.target.value)}):R.date}),o.jsx("td",{className:"p-2 border",children:G?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:ee=>B(ee.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),OQ.map(ee=>o.jsx("option",{value:ee,children:ee},ee))]}):R.category||""}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{className:"w-full border p-1 rounded",value:P,onChange:ee=>D(ee.target.value)}):o.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:ee=>de(Math.max(0,Number(ee.target.value||0)))}):n_(R.amount)}),o.jsx("td",{className:"p-2 border",children:G?o.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ee=>ie(ee.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ce,onChange:ee=>J(ee.target.value),maxLength:500}):o.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:G?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:L,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(R),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const ed=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function fIe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function hIe(t,e){const r=fIe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function mIe(t,e){if(e<=0)return;const r=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",t)),n=await Dt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const l=Math.min(i.remaining,s);s-=l,await rn(Gt(ke,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function pIe(t,e){if(e<=0)return;const r=Yt(At(ke,"inventory_clothes_batches"),lr("productId","==",t)),n=await Dt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;const l=Math.max(0,i.quantity-i.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await rn(Gt(ke,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function qee(t){const e=Yt(At(ke,"ar_movements"),lr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn(Gt(ke,"ar_movements",n.id))))}async function gIe(t,e,r){if(await qee(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:rr.now(),ref:{saleId:t.id}},{addDoc:a}=await Af(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>Bve);return{addDoc:i}},void 0);await a(At(ke,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(At(ke,"ar_movements"),{...n,type:"ABONO",amount:-s})}function xIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async Y=>{e(!0),n(!0),s(Y),l([]);try{const le=(await Dt(Yt(At(ke,"sales_clothes"),lr("__name__","==",Y)))).docs[0],Pe=le==null?void 0:le.data(),qe=(Array.isArray(Pe==null?void 0:Pe.items)?Pe.items:Pe!=null&&Pe.item?[Pe.item]:[]).map(nt=>({productName:String(nt.productName||""),qty:Number(nt.qty||0),unitPrice:Number(nt.unitPrice||0),discount:Number(nt.discount||0),total:Number(nt.total||0)}));l(qe)}catch(W){console.error(W)}finally{n(!1)}},[u,d]=v.useState(wr(new Date,"yyyy-MM-01")),[A,h]=v.useState(wr(new Date,"yyyy-MM-dd")),[f,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[I,T]=v.useState(""),[C,E]=v.useState(""),[S,O]=v.useState(null),[B,P]=v.useState(!1),[D,X]=v.useState(null),[de,re]=v.useState(0),ie=15,[ce,J]=v.useState(1),pe=v.useMemo(()=>{const Y={};return f.forEach(W=>Y[W.id]=W.name),Y},[f]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const Y=await Dt(At(ke,"customers_clothes")),W=[];Y.forEach(Le=>W.push({id:Le.id,name:Le.data().name||""})),m(W);const le=await Dt(Yt(At(ke,"sales_clothes"),ln("createdAt","desc"))),Pe=[];le.forEach(Le=>{const qe=hIe(Le.data(),Le.id);qe&&qe.date>=u&&qe.date<=A&&Pe.push(qe)}),g(Pe.sort((Le,qe)=>qe.date.localeCompare(Le.date))),J(1)}catch(Y){console.error(Y),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,A]);const Se=v.useMemo(()=>p.filter(Y=>!(I&&Y.customerId!==I||C&&Y.type!==C)),[p,I,C]),k=v.useMemo(()=>{let Y=0,W=0,le=0,Pe=0;for(const Le of Se)Le.type==="CONTADO"?(Y+=Le.item.qty,le+=Le.total):(W+=Le.item.qty,Pe+=Le.total);return{piezasCash:Y,piezasCredito:W,montoCash:le,montoCredito:Pe}},[Se]),F=Math.max(1,Math.ceil(Se.length/ie)),H=v.useMemo(()=>{const Y=(ce-1)*ie;return Se.slice(Y,Y+ie)},[Se,ce]),M=Y=>{O(null),X(Y),re(Y.item.qty||0),P(!0)},L=async Y=>{if(O(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Mj(Y.id),await qee(Y.id),g(W=>W.filter(le=>le.id!==Y.id)),w(" Venta eliminada")}catch(W){console.error(W),w(" No se pudo eliminar la venta.")}finally{y(!1)}},z=async()=>{if(!D)return;const Y=Number(D.item.qty||0),W=Math.max(1,Math.floor(Number(de)||0));if(W===Y){P(!1);return}const le=Number(D.item.unitPrice||0),Pe=Number((le*W).toFixed(2));try{y(!0);const Le=W-Y;Le>0?await mIe(D.item.productId,Le):Le<0&&await pIe(D.item.productId,-Le);const qe=Gt(ke,"sales_clothes",D.id);await rn(qe,{quantity:W,total:Pe,itemsTotal:Pe,"item.qty":W,"item.total":Pe,updatedAt:rr.now()});const nt=Math.min(Number(D.downPayment||0),Pe);await gIe(D,Pe,nt),g(st=>st.map(Et=>Et.id===D.id?{...Et,quantity:W,total:Pe,item:{...Et.item,qty:W,total:Pe},downPayment:nt}:Et)),w(" Venta actualizada"),P(!1)}catch(Le){console.error(Le),w(" No se pudo actualizar la venta.")}finally{y(!1)}},R=()=>{const Y=`Reporte de transacciones (Ropa)  ${u} a ${A}`,W=qe=>(qe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),le=Se.map(qe=>{const nt=qe.customerName||(qe.customerId?pe[qe.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${qe.date}</td>
          <td>${W(nt)}</td>
          <td>${qe.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${qe.item.qty}</td>
          <td style="text-align:right">${ed(qe.total)}</td>
        </tr>`}).join(""),Pe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${W(Y)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${W(Y)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${k.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${k.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${ed(k.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${ed(k.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${le||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Le=window.open("","_blank");Le&&(Le.document.open(),Le.document.write(Pe),Le.document.close())},G=()=>J(1),ee=()=>J(Y=>Math.max(1,Y-1)),te=()=>J(Y=>Math.min(F,Y+1)),Q=()=>J(F),xe=()=>{const Y=[];if(F<=7)for(let le=1;le<=F;le++)Y.push(le);else{const le=Math.max(1,ce-2),Pe=Math.min(F,ce+2);Y.push(1),le>2&&Y.push(-1);for(let Le=le;Le<=Pe;Le++)Le!==1&&Le!==F&&Y.push(Le);Pe<F-1&&Y.push(-2),Y.push(F)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:G,disabled:ce===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:ce===1,children:" Anterior"}),Y.map((le,Pe)=>typeof le=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${le===ce?"bg-blue-600 text-white":""}`,onClick:()=>J(le),children:le},Pe):o.jsx("span",{className:"px-2",children:""},Pe)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:ce===F,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:ce===F,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ce," de ",F,"  ",Se.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Y=>{d(Y.target.value),J(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:Y=>{h(Y.target.value),J(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:I,onChange:Y=>{T(Y.target.value),J(1)},children:[o.jsx("option",{value:"",children:"Todos"}),f.map(Y=>o.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:C,onChange:Y=>{E(Y.target.value),J(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:ed(k.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:ed(k.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:x?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):H.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):H.map(Y=>{const W=Y.customerName||(Y.customerId?pe[Y.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Y.date}),o.jsx("td",{className:"p-2 border",children:W}),o.jsx("td",{className:"p-2 border",children:Y.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(Y.id),children:Y.item.qty})}),o.jsx("td",{className:"p-2 border",children:ed(Y.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>O(le=>le===Y.id?null:Y.id),title:"Acciones",children:""}),S===Y.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>M(Y),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>L(Y),children:"Eliminar"})]})]})]},Y.id)})})]}),xe()]}),b&&o.jsx("p",{className:"mt-2 text-sm",children:b}),B&&D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:de,onChange:Y=>re(Math.max(1,Math.floor(Number(Y.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:ed(D.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:ed(Number(D.item.unitPrice)*Number(de||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{P(!1),X(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:z,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((Y,W)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:Y.productName}),o.jsx("td",{className:"p-2 border text-right",children:Y.qty}),o.jsx("td",{className:"p-2 border text-right",children:ed(Y.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:ed(Y.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:ed(Y.total)})]},W))})]})})]})})]})}function vIe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function yIe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var bIe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wIe=function(t){bIe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),vIe(s,a.prototype),yIe(s),s}return e}(Error),NIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hc=function(t){NIe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(wIe),_Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=function(t){_Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(hc),CIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zr=function(t){CIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(hc),zee=function(){function t(e){if(this.binarizer=e,e===null)throw new zr("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),EIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fi=function(t){EIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(hc),SIe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Qa=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),IIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C6=function(t){IIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(hc),BIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DQ=function(t){BIe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(C6),TIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ki=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new zr("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new DQ(r);if(n>e)throw new DQ(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=TIe(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=31*a+l}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Qa.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,l=n(r,e[i]);if(l>0)a=i+1;else if(l<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),_n=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),io=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Qa.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var l=a*32+_n.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var l=a*32+_n.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new zr;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var l=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<l);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new zr;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new zr("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new zr("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,l=0;l<8;l++)this.get(e)&&(i|=1<<7-l),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ki.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ki.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Lj;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Lj||(Lj={}));const Va=Lj;var PIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pr=function(t){PIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(hc),jIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Aa||(Aa={}));var ji=function(){function t(e,r,n){for(var a,s,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var A=c[u];t.VALUES_TO_ECI.set(A,this)}try{for(var h=jIe(i),f=h.next();!f.done;f=h.next()){var m=f.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new pr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new pr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new pr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Aa.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Aa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Aa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Aa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Aa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Aa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Aa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Aa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Aa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Aa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Aa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Aa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Aa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Aa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Aa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Aa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Aa.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Aa.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Aa.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Aa.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Aa.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Aa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Aa.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Aa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Aa.Big5,28,"Big5"),t.GB18030=new t(Aa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Aa.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),kIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SC=function(t){kIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(hc),ku=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof ji?e:ji.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(ji.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new SC("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(ji.UTF8)||e.equals(ji.ISO8859_1)||e.equals(ji.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Un=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return ku.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Va.CHARACTER_SET)!==void 0)return r.get(Va.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,l=0,c=0,u=0,d=0,A=0,h=0,f=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(l>0?w&128?l--:i=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(A>0?w<64||w===127||w>252?s=!1:A--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,f++,f>p&&(p=f)):w>127?(A++,f=0,m++,m>g&&(g=m)):(f=0,m=0))}return i&&l>0&&(i=!1),s&&A>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,A,h){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var f=A?parseInt(A.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(f||16);break;case"d":m=parseFloat(parseInt(r[a],f||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(f);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return ku.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=ji.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=ji.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=ji.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),yn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Un.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),hA=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new zr("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],l=0;l<n;l++)i[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new zr("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new zr("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new zr("illegal character encountered: "+e.substring(u));if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new zr("row lengths do not match");c++}for(var d=new t(l,c),A=0;A<s;A++)a[A]&&d.set(Math.floor(A%l),Math.floor(A/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new zr("input matrix dimensions do not match");for(var r=new io(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new zr("Left and top must be nonnegative");if(a<1||n<1)throw new zr("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new zr("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*l,A=e;A<s;A++)c[d+Math.floor(A/32)]|=1<<(A&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new io(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Qa.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new io(e),a=new io(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var A=a[u*n+d];if(A!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(A<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>l){for(var h=31;!(A>>>h);)h--;d*32+h>l&&(l=d*32+h)}}}return l<s||c<i?null:Int32Array.from([s,i,l-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],l=0;!(i<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],l=31;!(i>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ki.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ki.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new yn,s=0,i=this.height;s<i;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),FIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mt=function(t){FIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(hc),OIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DIe=function(t){OIe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new io(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,A=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(A*4-d-h)/2<u&&n.set(c),d=A,A=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new hA(n,a);this.initArrays(n);for(var i=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),A=Math.floor(n/5);A<d;A++){var h=u[A]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var f=e.estimateBlackPoint(i),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,A=0;A<n;A++){var h=m[p+A]&255;h<f&&s.set(A,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,l=0;l<n;l++)r[l]>i&&(s=l,i=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,A=r[l]*d*d;A>u&&(c=l,u=A)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new Mt;for(var f=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,A=p*p*(c-l)*(a-r[l]);A>m&&(f=l,m=A)}return f<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(SIe),RIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wee=function(t){RIe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,i,l,n,a),u=new hA(n,a);e.calculateThresholdForBlock(s,i,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,l,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,A=0;A<a;A++){var h=A<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var f=e.cap(A,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[f+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,l){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var l=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var A=d<<e.BLOCK_SIZE_POWER;A>l&&(A=l);for(var h=0;h<n;h++){var f=h<<e.BLOCK_SIZE_POWER;f>c&&(f=c);for(var m=0,p=255,g=0,x=0,y=A*s+f;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var I=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(I=p/2,d>0&&h>0)){var T=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<T&&(I=T)}u[d][h]=I}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(DIe),Xb=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new SC("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new SC("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new SC("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new yn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,l=void 0;i<64?l="#":i<128?l="+":i<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),MIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c4=function(t){MIe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Xb),LIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UIe=function(t){LIe(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,A=r[l+3];if(A===0)d=255;else{var h=r[l],f=r[l+1],m=r[l+2];d=306*h+601*f+117*m+512>>10}i[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,A=r[l+3];if(A===0)d=255;else{var h=r[l],f=r[l+1],m=r[l+2];d=306*h+601*f+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new c4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Xb),QIe=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),_l=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Cl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},VIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tv=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return _l(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,A,h;return Cl(this,function(f){switch(f.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),r=[];try{for(n=VIe(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){A={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(A)throw A.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return _l(this,void 0,void 0,function(){var e;return Cl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new QIe(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return _l(this,void 0,void 0,function(){var r;return Cl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return _l(this,void 0,void 0,function(){return Cl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return _l(this,void 0,void 0,function(){var n,a;return Cl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return _l(this,void 0,void 0,function(){var n;return Cl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return _l(this,void 0,void 0,function(){var n,a;return Cl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return _l(this,void 0,void 0,function(){return Cl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return _l(this,void 0,void 0,function(){var a,s;return Cl(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return _l(this,void 0,void 0,function(){var a;return Cl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return _l(this,void 0,void 0,function(){var a;return Cl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return _l(this,void 0,void 0,function(){var n;return Cl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return _l(this,void 0,void 0,function(){return Cl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ys("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ys("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ys("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ys("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ys("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ys("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ys("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ys("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ys("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ys("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return _l(this,void 0,void 0,function(){return Cl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return _l(this,void 0,void 0,function(){return Cl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,l){if(a._stopAsyncDecode){l(new Mt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof Mt,d=h instanceof fi||h instanceof pr,A=d&&n;if(u||A)return setTimeout(s,a._timeBetweenDecodingAttempts,i,l);l(h)}};return new Promise(function(i,l){return s(i,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof fi||c instanceof pr,l=c instanceof Mt;(i||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new UIe(n,r),s=new Wee(a);return new zee(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),pl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Qa.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Qa.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Qa.arraycopy(r,0,n,0,r.length),Qa.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Uj;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Uj||(Uj={}));const qr=Uj;var Qj;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Qj||(Qj={}));const Mo=Qj;var u4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Ay=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new zr;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),g0=function(){function t(e,r){if(r.length===0)throw new zr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Qa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=Ay.addOrSubtract(n,i)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Ay.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Qa.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=Ay.addOrSubtract(r[l-i],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=Ay.addOrSubtract(i[c+d],l.multiply(u,a[d]));return new t(l,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new zr;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,l=0;l<a;l++)s[l]=i.multiply(n[l],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new zr("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new zr("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),HIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xee=function(t){HIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(hc),$Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nc=function(t){$Ie(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),l=1,c=0;c<n;c++)i[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new g0(s,Int32Array.from([0])),s.one=new g0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new zr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new g0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Xee;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+_n.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ay),KIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a_=function(t){KIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(hc),GIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yb=function(t){GIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(hc),d4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new g0(n,e),s=new Int32Array(r),i=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(i=!1)}if(!i)for(var u=new g0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),A=d[0],h=d[1],f=this.findErrorLocations(A),m=this.findErrorMagnitudes(h,f),l=0;l<f.length;l++){var p=e.length-1-n.log(f[l]);if(p<0)throw new a_("Bad error location");e[p]=nc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=i,A=c;if(i=l,c=u,i.isZero())throw new a_("r_{i-1} was zero");l=d;for(var h=s.getZero(),f=i.getCoefficient(i.getDegree()),m=s.inverse(f);l.getDegree()>=i.getDegree()&&!l.isZero();){var p=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(A),l.getDegree()>=i.getDegree())throw new Yb("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new a_("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new a_("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var l=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],l),A=d&1?d&-2:d|1;c=s.multiply(c,A)}a[i]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],l))}return a},t}(),_o;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(_o||(_o={}));var RQ=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),l=new u4(s,i,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=_o.UPPER,a=_o.UPPER,s="",i=0;i<r;)if(a===_o.BINARY){if(r-i<5)break;var l=t.readCode(e,i,5);if(i+=5,l===0){if(r-i<11)break;l=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<l;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=Un.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===_o.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var A=t.getCharacter(a,u);A.startsWith("CTRL_")?(n=a,a=t.getTable(A.charAt(5)),A.charAt(6)==="L"&&(n=a)):(s+=A,a=n)}return s},t.getTable=function(e){switch(e){case"L":return _o.LOWER;case"P":return _o.PUNCT;case"M":return _o.MIXED;case"D":return _o.DIGIT;case"B":return _o.BINARY;case"U":default:return _o.UPPER}},t.getCharacter=function(e,r){switch(e){case _o.UPPER:return t.UPPER_TABLE[r];case _o.LOWER:return t.LOWER_TABLE[r];case _o.MIXED:return t.MIXED_TABLE[r];case _o.PUNCT:return t.PUNCT_TABLE[r];case _o.DIGIT:return t.DIGIT_TABLE[r];default:throw new Yb("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=nc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=nc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=nc.AZTEC_DATA_10):(n=12,r=nc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new pr;for(var i=e.length%n,l=new Int32Array(s),c=0;c<s;c++,i+=n)l[c]=t.readCode(e,i,n);try{var u=new d4(r);u.decode(l,s-a)}catch(g){throw new pr(g)}for(var d=(1<<n)-1,A=0,c=0;c<a;c++){var h=l[c];if(h===0||h===d)throw new pr;(h===1||h===d-1)&&A++}for(var f=new Array(a*n-A),m=0,c=0;c<a;c++){var h=l[c];if(h===1||h===d-1)f.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)f[m++]=(h&1<<p)!==0}return f},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*_n.truncDivision(_n.truncDivision(a,2)-1,15),u=a/2,d=_n.truncDivision(c,2),l=0;l<u;l++){var A=l+_n.truncDivision(l,15);s[u-l-1]=d-A-1,s[u+l]=d+A+1}for(var l=0,h=0;l<n;l++){for(var f=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<f;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*f+x+y]=e.get(s[m+g],s[p-y]),i[h+4*f+x+y]=e.get(s[p-y],s[p-g]),i[h+6*f+x+y]=e.get(s[p-g],s[m+y]);h+=f*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Xn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Vj=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Rr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Vj.floatToIntBits(this.x)+Vj.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,l;if(n>=r&&n>=a?(i=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],l=e[2]):(i=e[2],s=e[0],l=e[1]),this.crossProductZ(s,i,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=i,e[2]=l},t.distance=function(e,r){return Xn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),E6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),qIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zIe=function(t){qIe(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=i,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(E6),Hj=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Mt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,l=!1,c=!1,u=!1,d=!1,A=!1,h=this.width,f=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<f;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=f){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!A)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,A=!0):A||n--;if(n<0){s=!0;break}i&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Mt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(e,n+w,e+w,n);if(I==null)throw new Mt;for(var T=null,w=1;T===null&&w<y;w++)T=this.getBlackPointOnSegment(r,n+w,r-w,n);if(T==null)throw new Mt;for(var C=null,w=1;C===null&&w<y;w++)C=this.getBlackPointOnSegment(r,a-w,r-w,a);if(C==null)throw new Mt;return this.centerEdges(C,b,T,I)}else throw new Mt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=Xn.round(Xn.distance(e,r,n,a)),i=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=Xn.round(e+u*i),A=Xn.round(r+u*l);if(c.get(d,A))return new Rr(d,A)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),A=a.getX(),h=a.getY(),f=t.CORR;return s<this.width/2?[new Rr(A-f,h+f),new Rr(l+f,c+f),new Rr(u-f,d-f),new Rr(s+f,i-f)]:[new Rr(A+f,h+f),new Rr(l+f,c-f),new Rr(u-f,d+f),new Rr(s-f,i-f)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),MQ=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Mt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Mt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),Yee=function(){function t(e,r,n,a,s,i,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,l,c,u,d,A,h,f,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,l,c),y=t.squareToQuadrilateral(u,d,A,h,f,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,A=this.a33,h=0;h<r;h+=2){var f=e[h],m=e[h+1],p=s*f+c*m+A;e[h]=(n*f+i*m+u)/p,e[h+1]=(a*f+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,A=this.a33,h=e.length,f=0;f<h;f++){var m=e[f],p=r[f],g=s*m+c*p+A;e[f]=(n*m+i*p+u)/g,r[f]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,l,c){var u=e-n+s-l,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var A=n-s,h=l-s,f=a-i,m=c-i,p=A*m-h*f,g=(u*m-h*d)/p,x=(A*d-u*f)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,l,c){return t.squareToQuadrilateral(e,r,n,a,s,i,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),WIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XIe=function(t){WIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,l,c,u,d,A,h,f,m,p,g,x,y,b,w){var I=Yee.quadrilateralToQuadrilateral(s,i,l,c,u,d,A,h,f,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,I)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Mt;for(var i=new hA(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,A=0;A<u;A+=2)l[A]=A/2+.5,l[A+1]=d;s.transformPoints(l),MQ.checkAndNudgePoints(r,l);try{for(var A=0;A<u;A+=2)r.get(Math.floor(l[A]),Math.floor(l[A+1]))&&i.set(A/2,c)}catch{throw new Mt}}return i},e}(MQ),S6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new XIe,t}(),Wl=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Rr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),YIe=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new zIe(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Mt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(_n.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Mt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),l=n-1;l>=0;--l)i[l]=e&15,e>>=4;try{var c=new d4(nc.AZTEC_PARAM);c.decode(i,s)}catch{throw new Mt}for(var u=0,l=0;l<a;l++)u=(u<<4)+i[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var A=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(A<.75||A>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Mt;this.compact=this.nbCenterLayers===5;var h=new Rr(r.getX()+.5,r.getY()-.5),f=new Rr(n.getX()+.5,n.getY()+.5),m=new Rr(a.getX()-.5,a.getY()+.5),p=new Rr(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,f,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Hj(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Wl(i+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wl(i+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Wl(i-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Wl(i-7,l-7),!1,-1,-1).toResultPoint()}var c=Xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Hj(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Wl(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Wl(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Wl(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Wl(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Wl(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=S6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return i.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,l=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,A=0;A<n;A++)this.image.get(Xn.round(l+A*u),Xn.round(c+A*d))&&(a|=1<<n-A-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Wl(e.getX()-s,e.getY()+s),r=new Wl(r.getX()-s,r.getY()-s),n=new Wl(n.getX()+s,n.getY()-s),a=new Wl(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var l=this.getColor(e,r);return l!==i||(l=this.getColor(r,n),l!==i)?!1:(l=this.getColor(n,a),l===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),A=0;A<d;A++)l+=a,c+=s,this.image.get(Xn.round(l),Xn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new Wl(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Rr(l+a*s,c+a*i),d=new Rr(l-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var A=new Rr(l+a*s,c+a*i),h=new Rr(l-a*s,c-a*i),f=[u,A,d,h];return f},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Xn.round(e.getX()),n=Xn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_n.truncDivision(this.nbLayers-4,8)+1)+15},t}(),HE=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new YIe(e.getBlackMatrix()),s=null,i=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new RQ().decode(l)}catch(A){n=A}if(i==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new RQ().decode(l)}catch(A){throw n??A}var c=new pl(i.getText(),i.getRawBytes(),i.getNumBits(),s,qr.AZTEC,Qa.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata(Mo.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata(Mo.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Va.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),JIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){JIe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new HE,r)||this}return e})(Tv);var Ri=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Va.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),l=270;i!==null&&i.get(Mo.ORIENTATION)===!0&&(l=l+i.get(Mo.ORIENTATION)%360),s.putMetadata(Mo.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Rr(u-c[d].getY()-1,c[d].getX());return s}else throw new Mt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new io(n),i=r&&r.get(Va.TRY_HARDER)===!0,l=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var A=Math.trunc((d+1)/2),h=(d&1)===0,f=u+l*(h?A:-A);if(f<0||f>=a)break;try{s=e.getBlackRow(f,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Va.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(T,C){return b.set(C,T)}),b.delete(Va.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(f,s,r);if(y===1){w.putMetadata(Mo.ORIENTATION,180);var I=w.getResultPoints();I!==null&&(I[0]=new Rr(n-I[0].getX()-1,I[0].getY()),I[1]=new Rr(n-I[1].getX()-1,I[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Mt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new Mt;for(var l=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===i))throw new Mt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Mt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var A=e[d],h=r[d]*c,f=A>h?A-h:h-A;if(f>n)return Number.POSITIVE_INFINITY;u+=f}return u/s},t}(),ZIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LQ=function(t){ZIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var A=e.MAX_AVG_VARIANCE,h=-1,f=e.CODE_START_A;f<=e.CODE_START_C;f++){var m=Ri.patternMatchVariance(i,e.CODE_PATTERNS[f],e.MAX_INDIVIDUAL_VARIANCE);m<A&&(A=m,h=f)}if(h>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,h]);l+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new Mt},e.decodeCode=function(r,n,a){Ri.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=l)}if(i>=0)return i;throw new Mt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Va.ASSUME_GS1)===!0,i=e.findStartPattern(n),l=i[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new pr}for(var A=!1,h=!1,f="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,I=!0,T=!1,C=!1;!A;){var E=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(I=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(ie,ce){return ie+ce},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new pr}switch(d){case e.CODE_CODE_A:if(y<64)C===T?f+=String.fromCharCode(32+y):f+=String.fromCharCode(32+y+128),C=!1;else if(y<96)C===T?f+=String.fromCharCode(y-64):f+=String.fromCharCode(y+64),C=!1;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!T&&C?(T=!0,C=!1):T&&C?(T=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:A=!0;break}break;case e.CODE_CODE_B:if(y<96)C===T?f+=String.fromCharCode(32+y):f+=String.fromCharCode(32+y+128),C=!1;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!T&&C?(T=!0,C=!1):T&&C?(T=!1,C=!1):C=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:A=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(f+="0"),f+=y;else switch(y!==e.CODE_STOP&&(I=!1),y){case e.CODE_FNC_1:s&&(f.length===0?f+="]C1":f+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:A=!0;break}break}E&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Mt;if(b-=w*x,b%103!==x)throw new fi;var O=f.length;if(O===0)throw new Mt;O>0&&I&&(d===e.CODE_CODE_C?f=f.substring(0,O-2):f=f.substring(0,O-1));for(var B=(i[1]+i[0])/2,P=m+S/2,D=u.length,X=new Uint8Array(D),de=0;de<D;de++)X[de]=u[de];var re=[new Rr(B,r),new Rr(P,r)];return new pl(f,X,0,re,qr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Ri),e4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UQ=function(t){e4e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),A=n.getNextSet(d[1]),h=n.getSize(),f,m;do{e.recordPattern(n,A,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Mt;f=e.patternToChar(p),this.decodeRowResult+=f,m=A;try{for(var g=(s=void 0,SB(u)),x=g.next();!x.done;x=g.next()){var y=x.value;A+=y}}catch(D){s={error:D}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}A=n.getNextSet(A)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=SB(u),I=w.next();!I.done;I=w.next()){var y=I.value;b+=y}}catch(D){l={error:D}}finally{try{I&&!I.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var T=A-m-b;if(A!==h&&T*2<b)throw new Mt;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,E=0,S=0;S<C;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(E%43))throw new fi;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new Mt;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var B=(d[1]+d[0])/2,P=m+b/2;return new pl(O,null,0,[new Rr(B,r),new Rr(P,r)],qr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new Mt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,l;do{var c=2147483647;try{for(var u=(n=void 0,SB(r)),d=u.next();!d.done;d=u.next()){var A=d.value;A<c&&A>i&&(c=A)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,l=0;for(var h=0,f=0,m=0;m<s;m++){var A=r[m];A>i&&(f|=1<<s-1-m,l++,h+=A)}if(l===3){for(var m=0;m<s&&l>0;m++){var A=r[m];if(A>i&&(l--,A*2>=h))return-1}return f}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Mt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var l=r.charAt(s+1),c="\0";switch(i){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new pr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new pr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new pr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new pr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Ri),t4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QQ=function(t){t4e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),A=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var f,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new Mt;f=this.patternToChar(p),this.decodeRowResult+=f,m=d;try{for(var g=(s=void 0,IB(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(S){s={error:S}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=IB(h),I=w.next();!I.done;I=w.next()){var y=I.value;b+=y}}catch(S){l={error:S}}finally{try{I&&!I.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===A||!n.get(d))throw new Mt;if(this.decodeRowResult.length<2)throw new Mt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var T=this.decodeExtended(this.decodeRowResult),C=(u[1]+u[0])/2,E=m+b/2;return new pl(T,null,0,[new Rr(C,r),new Rr(E,r)],qr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Mt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=IB(r),l=i.next();!l.done;l=i.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,A=0;A<d;A++){var h=Math.round(r[A]*9/s);if(h<1||h>4)return-1;if(A&1)u<<=h;else for(var f=0;f<h;f++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Mt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new pr;var l=r.charAt(s+1),c="\0";switch(i){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new pr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new pr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new pr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new pr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,l=n-1;l>=0;l--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new fi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Ri),r4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VQ=function(t){r4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,l=this.decodeStart(n),c=this.decodeEnd(n),u=new yn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),A=null;a!=null&&(A=a.get(Va.ALLOWED_LENGTHS)),A==null&&(A=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,f=!1,m=0;try{for(var p=n4e(A),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){f=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!f&&h>m&&(f=!0),!f)throw new pr;var y=[new Rr(l[1],r),new Rr(c[0],r)],b=new pl(d,null,0,y,qr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),l.fill(0),c.fill(0);n<a;){Ri.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;l[u]=i[d],c[u]=i[d+1]}var A=e.decodeDigit(l);s.append(A.toString()),A=this.decodeDigit(c),s.append(A.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Mt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Mt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof Mt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var A=n;A<l;A++)if(r.get(A)!==c)i[u]++;else{if(u===s-1){if(Ri.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,A];d+=i[0]+i[1],Qa.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new Mt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var l=e.PATTERNS[i],c=Ri.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new Mt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Ri),a4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ev=function(t){a4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,A=a,h=n;h<l;h++)if(r.get(h)!==A)i[c]++;else{if(c===d-1){if(Ri.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var f=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=f[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,A=!A}throw new Mt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],A=Ri.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);A<i&&(i=A,l=u)}if(l>=0)return l;throw new Mt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Ri),s4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i4e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Rr((n[0]+n[1])/2,e),new Rr(s,e)],u=new pl(i,null,0,c,qr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var A=ev.decodeDigit(e,i,c,ev.L_AND_G_PATTERNS);n+=String.fromCharCode(48+A%10);try{for(var h=(a=void 0,s4e(i)),f=h.next();!f.done;f=h.next()){var m=f.value;c+=m}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}A>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Mt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Mt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Mt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Mo.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),o4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l4e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Rr((n[0]+n[1])/2,e),new Rr(s,e)],u=new pl(i,null,0,c,qr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var A=ev.decodeDigit(e,i,c,ev.L_AND_G_PATTERNS);n+=String.fromCharCode(48+A%10);try{for(var h=(a=void 0,o4e(i)),f=h.next();!f.done;f=h.next()){var m=f.value;c+=m}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}A>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Mt;if(parseInt(n.toString())%4!==u)throw new Mt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Mo.ISSUE_NUMBER,parseInt(e)]])},t}(),c4e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=ev.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new i4e;return s.decodeRow(e,r,a)}catch{var i=new l4e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),u4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ii=function(t){u4e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get(Va.NEED_RESULT_POINT_CALLBACK);if(i!=null){var l=new Rr((s[0]+s[1])/2,r);i.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var A=new Rr(u,r);i.foundPossibleResultPoint(A)}var h=e.decodeEnd(n,u);if(i!=null){var f=new Rr((h[0]+h[1])/2,r);i.foundPossibleResultPoint(f)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Mt;var g=d.toString();if(g.length<8)throw new pr;if(!e.checkChecksum(g))throw new fi;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new Rr(x,r),new Rr(y,r)],I=new pl(g,null,0,w,b,new Date().getTime()),T=0;try{var C=c4e.decodeRow(r,n,h[1]);I.putMetadata(Mo.UPC_EAN_EXTENSION,C.getText()),I.putAllMetadata(C.getResultMetadata()),I.addResultPoints(C.getResultPoints()),T=C.getText().length}catch{}var E=a==null?null:a.get(Va.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var O in E)if(T.toString()===O){S=!0;break}if(!S)throw new Mt}return b===qr.EAN_13||qr.UPC_A,I},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new pr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ev),d4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$j=function(t){d4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),A=n[1],h=0,f=0;f<6&&A<d;f++){var m=Ii.decodeDigit(r,u,A,Ii.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,HQ(u)),g=p.next();!g.done;g=p.next()){var x=g.value;A+=x}}catch(I){s={error:I}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-f)}a=e.determineFirstDigit(a,h);var y=Ii.findGuardPattern(r,A,!0,Ii.MIDDLE_PATTERN,new Int32Array(Ii.MIDDLE_PATTERN.length).fill(0));A=y[1];for(var f=0;f<6&&A<d;f++){var m=Ii.decodeDigit(r,u,A,Ii.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,HQ(u)),w=b.next();!w.done;w=b.next()){var x=w.value;A+=x}}catch(C){l={error:C}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:A,resultString:a}},e.prototype.getBarcodeFormat=function(){return qr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Mt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ii),A4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Q=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KQ=function(t){A4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),A=n[1],h=0;h<4&&A<d;h++){var f=Ii.decodeDigit(r,u,A,Ii.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var m=(s=void 0,$Q(u)),p=m.next();!p.done;p=m.next()){var g=p.value;A+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=Ii.findGuardPattern(r,A,!0,Ii.MIDDLE_PATTERN,new Int32Array(Ii.MIDDLE_PATTERN.length).fill(0));A=x[1];for(var h=0;h<4&&A<d;h++){var f=Ii.decodeDigit(r,u,A,Ii.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var y=(l=void 0,$Q(u)),b=y.next();!b.done;b=y.next()){var g=b.value;A+=g}}catch(T){l={error:T}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:A,resultString:a}},e.prototype.getBarcodeFormat=function(){return qr.EAN_8},e}(Ii),f4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GQ=function(t){f4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new $j,r}return e.prototype.getBarcodeFormat=function(){return qr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new pl(n.substring(1),null,null,r.getResultPoints(),qr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Mt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ii),h4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qQ=function(t){h4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,A=0;A<6&&u<c;A++){var h=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var f=(s=void 0,m4e(l)),m=f.next();!m.done;m=f.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-A)}return e.determineNumSysAndCheckDigit(new yn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Ii.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Mt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return qr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new yn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ii),p4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BB=function(t){p4e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Va.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(qr.EAN_13)>-1&&s.push(new $j),a.indexOf(qr.UPC_A)>-1&&s.push(new GQ),a.indexOf(qr.EAN_8)>-1&&s.push(new KQ),a.indexOf(qr.UPC_E)>-1&&s.push(new qQ)),s.length===0&&(s.push(new $j),s.push(new GQ),s.push(new KQ),s.push(new qQ)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var l=zQ(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),A=d.getBarcodeFormat()===qr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(Va.POSSIBLE_FORMATS),f=h==null||h.includes(qr.UPC_A);if(A&&f){var m=d.getRawBytes(),p=new pl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),qr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}throw new Mt},e.prototype.reset=function(){var r,n;try{for(var a=zQ(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Ri),g4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x4e=function(t){g4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Mt;var i=this.codaBarDecodeRow(s.row);if(!i)throw new Mt;return new pl(i,null,0,[new Rr(s.left,r),new Rr(s.right,r)],qr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Ri),v4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ym=function(t){v4e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Ri.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Mt},e.count=function(r){return Xn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],l=s/i;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=y4e(r),A=d.next();!A.done;A=d.next()){var h=A.value;h>u&&(u=h),h<c&&(c=h)}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Ri),$E=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Jee=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Rr(n,s)),this.resultPoints.push(new Rr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),b4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ax=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var l=b4e(e),c=l.next();!c.done;c=l.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,A=0,h=e.length,f=0;f<h-1;f++){var m=void 0;for(m=1,A|=1<<f;m<e[f];m++,A&=~(1<<f)){var p=t.combins(i-m-1,h-f-2);if(n&&A===0&&i-m-(h-f-1)>=h-f-1&&(p-=t.combins(i-m-(h-f),h-f-2)),h-f-1>1){for(var g=0,x=i-m-(h-f-2);x>r;x--)g+=t.combins(i-m-x-1,h-f-3);p-=g*(h-1-f)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,l=e;l>n;l--)s*=l,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),w4e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new io(n),s=0,i=e[0],l=i.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),A=11;A>=0;--A)d&1<<A&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),A=11;A>=0;--A)h&1<<A&&a.set(s),s++}return a},t}(),um=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),I6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),N4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),td=function(t){N4e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(I6),_4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dm=function(t){_4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(I6),C4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tg=function(t){C4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new pr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(I6),s_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E4e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,l,c,u;if(!e)return null;if(e.length<2)throw new Mt;var d=e.substring(0,2);try{for(var A=s_(t.TWO_DIGIT_DATA_LENGTH),h=A.next();!h.done;h=A.next()){var f=h.value;if(f[0]===d)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,f[2],e):t.processFixedAI(2,f[1],e)}}catch(T){r={error:T}}finally{try{h&&!h.done&&(n=A.return)&&n.call(A)}finally{if(r)throw r.error}}if(e.length<3)throw new Mt;var m=e.substring(0,3);try{for(var p=s_(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var f=g.value;if(f[0]===m)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,f[2],e):t.processFixedAI(3,f[1],e)}}catch(T){a={error:T}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=s_(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var f=y.value;if(f[0]===m)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(T){i={error:T}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new Mt;var b=e.substring(0,4);try{for(var w=s_(t.FOUR_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var f=I.value;if(f[0]===b)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(T){c={error:T}}finally{try{I&&!I.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Mt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Mt;var a=n.substring(0,e);if(n.length<e+r)throw new Mt;var s=n.substring(e,e+r),i=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),l=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),IC=function(){function t(e){this.buffer=new yn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=E4e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Tg(this.information.getSize(),Tg.FNC1,Tg.FNC1):new Tg(this.information.getSize(),r-1,Tg.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Tg(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new dm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new dm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new dm(this.current.getPosition(),this.buffer.toString()):r=new dm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new um(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new dm(this.current.getPosition(),this.buffer.toString());return new um(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new um(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new dm(this.current.getPosition(),this.buffer.toString());return new um(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new um(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new dm(this.current.getPosition(),this.buffer.toString());return new um(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new um(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new td(e+5,td.FNC1);if(r>=5&&r<15)return new td(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new td(e+7,""+(n+1));if(n>=90&&n<116)return new td(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new pr}return new td(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new td(e+5,td.FNC1);if(r>=5&&r<15)return new td(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new td(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Yb("Decoding invalid alphanumeric value: "+n)}return new td(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Zee=function(){function t(e){this.information=e,this.generalDecoder=new IC(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),S4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ld=function(t){S4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Zee),I4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B4e=function(t){I4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new yn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(ld),T4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P4e=function(t){T4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new yn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Zee),j4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BC=function(t){j4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),l=1e5,c=0;c<5;++c)i/l===0&&r.append("0"),l/=10;r.append(i)},e}(ld),k4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ete=function(t){k4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+BC.GTIN_SIZE+e.WEIGHT_SIZE)throw new Mt;var r=new yn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+BC.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(BC),F4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O4e=function(t){F4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(ete),D4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4e=function(t){D4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(ete),M4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L4e=function(t){M4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ld.GTIN_SIZE)throw new Mt;var r=new yn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ld.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ld.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(ld),U4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q4e=function(t){U4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ld.GTIN_SIZE)throw new Mt;var r=new yn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ld.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ld.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ld.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(ld),V4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wh=function(t){V4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Mt;var r=new yn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(BC);function H4e(t){try{if(t.get(1))return new B4e(t);if(!t.get(2))return new P4e(t);var e=IC.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new O4e(t);case 5:return new R4e(t)}var r=IC.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new L4e(t);case 13:return new Q4e(t)}var n=IC.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new wh(t,"310","11");case 57:return new wh(t,"320","11");case 58:return new wh(t,"310","13");case 59:return new wh(t,"320","13");case 60:return new wh(t,"310","15");case 61:return new wh(t,"320","15");case 62:return new wh(t,"310","17");case 63:return new wh(t,"320","17")}}catch(a){throw console.log(a),new Yb("unknown decoder: "+t)}}var WQ=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),$4e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),K4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G4e=function(t){K4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Mt){if(!this.pairs.length)throw new Mt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Mt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var l=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,Nh(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var A=new Array(r);A.push(l);try{return this.checkRows(A,i+1)}catch(h){console.log(h)}}}throw new Mt},e.isValidSequence=function(r){var n,a;try{for(var s=Nh(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var l=i.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){i=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new $4e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,l,c,u;try{for(var d=Nh(n),A=d.next();!A.done;A=d.next()){var h=A.value;if(h.getPairs().length!==r.length){var f=!0;try{for(var m=(i=void 0,Nh(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Nh(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(WQ.equals(g,w)){x=!0;break}}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(f=!1)}}catch(I){i={error:I}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}}}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,l,c,u;try{for(var d=Nh(n),A=d.next();!A.done;A=d.next()){var h=A.value,f=!0;try{for(var m=(i=void 0,Nh(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Nh(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){f=!1;break}}}catch(I){i={error:I}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}if(f)return!0}}catch(I){a={error:I}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=w4e.buildBitArray(r),a=H4e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],l[0],l[1]];return new pl(s,null,null,c,qr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,l=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Mt;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(A){d=null,console.log(A)}return new WQ(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<i&&(d=!r.get(l),!!d);)l++;for(var A=0,h=l,f=l;f<i;f++)if(r.get(f)!==d)s[A]++;else{if(A===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=f;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,A--}else A++;s[A]=1,d=!d}throw new Mt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,l=this.startEnd[1]}else i=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Qa.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Jee(d,[i,l],i,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),l=0;l<i.length;l++)i[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var A=17,h=Xn.sum(new Int32Array(i))/A,f=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-f)/f>.3)throw new Mt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new Mt;b=1}else if(b>8){if(y>8.7)throw new Mt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(A);for(var I=4*n.getValue()+(a?0:2)+(s?0:1)-1,T=0,C=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[I][2*c];C+=m[c]*E}T+=m[c]}for(var S=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[I][2*c+1];S+=p[c]*E}var O=C+S;if(T&1||T>13||T<4)throw new Mt;var B=(13-T)/2,P=e.SYMBOL_WIDEST[B],D=9-P,X=Ax.getRSSvalue(m,P,!0),de=Ax.getRSSvalue(p,D,!1),re=e.EVEN_TOTAL_SUBSET[B],ie=e.GSUM[B],ce=X*re+de+ie;return new $E(ce,O)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Xn.sum(new Int32Array(this.getOddCounts())),a=Xn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,A=(a&1)===0;if(u===1)if(d){if(A)throw new Mt;i=!0}else{if(!A)throw new Mt;c=!0}else if(u===-1)if(d){if(A)throw new Mt;s=!0}else{if(!A)throw new Mt;l=!0}else if(u===0){if(d){if(!A)throw new Mt;n<a?(s=!0,c=!0):(i=!0,l=!0)}else if(A)throw new Mt}else throw new Mt;if(s){if(i)throw new Mt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Mt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(ym),q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z4e=function(t){q4e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}($E),W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XQ=function(t){W4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var A=TB(this.possibleLeftPairs),h=A.next();!h.done;h=A.next()){var f=h.value;if(f.getCount()>1)try{for(var m=(l=void 0,TB(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(f,g))return e.constructResult(f,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}throw new Mt},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var l=TB(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new yn,l=13-s.length;l>0;l--)i.append("0");i.append(s);for(var c=0,l=0;l<13;l++){var u=i.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),A=n.getFinderPattern().getResultPoints();return new pl(i.toString(),null,0,[d[0],d[1],A[0],A[1]],qr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get(Va.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Rr(u,a))}var d=this.decodeDataCharacter(r,l,!0),A=this.decodeDataCharacter(r,l,!1);return new z4e(1597*d.getValue()+A.getValue(),d.getChecksumPortion()+4*A.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)Ri.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Ri.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,A=Xn.sum(new Int32Array(s))/d,h=this.getOddCounts(),f=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/A,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(f[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=h.length-1;l>=0;l--)w*=9,w+=h[l],b+=h[l];for(var I=0,T=0,l=f.length-1;l>=0;l--)I*=9,I+=f[l],T+=f[l];var C=w+3*I;if(a){if(b&1||b>12||b<4)throw new Mt;var E=(12-b)/2,S=e.OUTSIDE_ODD_WIDEST[E],O=9-S,B=Ax.getRSSvalue(h,S,!1),P=Ax.getRSSvalue(f,O,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],X=e.OUTSIDE_GSUM[E];return new $E(B*D+P+X,C)}else{if(T&1||T>10||T<4)throw new Mt;var E=(10-T)/2,S=e.INSIDE_ODD_WIDEST[E],O=9-S,B=Ax.getRSSvalue(h,S,!0),P=Ax.getRSSvalue(f,O,!1),de=e.INSIDE_ODD_TOTAL_SUBSET[E],X=e.INSIDE_GSUM[E];return new $E(P*de+B+X,C)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,l=0;l<s&&(i=!r.get(l),n!==i);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(ym.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new Mt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),l=s[0]-1;l>=0&&i!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Qa.arraycopy(u,0,d,1,u.length-1),d[0]=c;var A=this.parseFinderValue(d,e.FINDER_PATTERNS),h=l,f=s[1];return a&&(h=r.getSize()-1-h,f=r.getSize()-1-f),new Jee(A,[l,s[1]],h,f,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Xn.sum(new Int32Array(this.getOddCounts())),s=Xn.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,A=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(A){if(h)throw new Mt;l=!0}else{if(!h)throw new Mt;u=!0}else if(d===-1)if(A){if(h)throw new Mt;i=!0}else{if(!h)throw new Mt;c=!0}else if(d===0){if(A){if(!h)throw new Mt;a<s?(i=!0,u=!0):(l=!0,c=!0)}else if(h)throw new Mt}else throw new Mt;if(i){if(l)throw new Mt;ym.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ym.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Mt;ym.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&ym.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(ym),X4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fx=function(t){X4e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Va.POSSIBLE_FORMATS):null,s=r&&r.get(Va.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(Va.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(qr.EAN_13)||a.includes(qr.UPC_A)||a.includes(qr.EAN_8)||a.includes(qr.UPC_E))&&n.readers.push(new BB(r)),a.includes(qr.CODE_39)&&n.readers.push(new UQ(s,i)),a.includes(qr.CODE_93)&&n.readers.push(new QQ),a.includes(qr.CODE_128)&&n.readers.push(new LQ),a.includes(qr.ITF)&&n.readers.push(new VQ),a.includes(qr.CODABAR)&&n.readers.push(new x4e),a.includes(qr.RSS_14)&&n.readers.push(new XQ),a.includes(qr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new G4e))),n.readers.length===0&&(n.readers.push(new BB(r)),n.readers.push(new UQ),n.readers.push(new QQ),n.readers.push(new BB(r)),n.readers.push(new LQ),n.readers.push(new VQ),n.readers.push(new XQ)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Mt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Ri),Y4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Y4e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new fx(n),r,n)||this}return e})(Tv);var YQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ra=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),J4e=function(){function t(e,r,n,a,s,i){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),A=i.getECBlocks();try{for(var h=YQ(A),f=h.next();!f.done;f=h.next()){var m=f.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new pr;try{for(var s=YQ(t.VERSIONS),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new pr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ia(5,new ra(1,3))),new t(2,12,12,10,10,new ia(7,new ra(1,5))),new t(3,14,14,12,12,new ia(10,new ra(1,8))),new t(4,16,16,14,14,new ia(12,new ra(1,12))),new t(5,18,18,16,16,new ia(14,new ra(1,18))),new t(6,20,20,18,18,new ia(18,new ra(1,22))),new t(7,22,22,20,20,new ia(20,new ra(1,30))),new t(8,24,24,22,22,new ia(24,new ra(1,36))),new t(9,26,26,24,24,new ia(28,new ra(1,44))),new t(10,32,32,14,14,new ia(36,new ra(1,62))),new t(11,36,36,16,16,new ia(42,new ra(1,86))),new t(12,40,40,18,18,new ia(48,new ra(1,114))),new t(13,44,44,20,20,new ia(56,new ra(1,144))),new t(14,48,48,22,22,new ia(68,new ra(1,174))),new t(15,52,52,24,24,new ia(42,new ra(2,102))),new t(16,64,64,14,14,new ia(56,new ra(2,140))),new t(17,72,72,16,16,new ia(36,new ra(4,92))),new t(18,80,80,18,18,new ia(48,new ra(4,114))),new t(19,88,88,20,20,new ia(56,new ra(4,144))),new t(20,96,96,22,22,new ia(68,new ra(4,174))),new t(21,104,104,24,24,new ia(56,new ra(6,136))),new t(22,120,120,18,18,new ia(68,new ra(6,175))),new t(23,132,132,20,20,new ia(62,new ra(8,163))),new t(24,144,144,22,22,new ia(62,new ra(8,156),new ra(2,155))),new t(25,8,18,6,16,new ia(7,new ra(1,5))),new t(26,8,32,6,14,new ia(11,new ra(1,10))),new t(27,12,26,10,24,new ia(14,new ra(1,16))),new t(28,12,36,10,16,new ia(18,new ra(1,22))),new t(29,16,36,14,16,new ia(24,new ra(1,32))),new t(30,16,48,14,22,new ia(28,new ra(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),Z4e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new pr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new hA(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return J4e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new pr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new zr("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,l=n/s|0,c=i*a,u=l*s,d=new hA(u,c),A=0;A<i;++A)for(var h=A*a,f=0;f<l;++f)for(var m=f*s,p=0;p<a;++p)for(var g=A*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=f*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),JQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=JQ(u),A=d.next();!A.done;A=d.next()){var h=A.value;c+=h.getCount()}}catch(X){n={error:X}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var f=new Array(c),m=0;try{for(var p=JQ(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=l.getECCodewords()+y;f[m++]=new t(y,new Uint8Array(b))}}catch(X){s={error:X}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=f[0].codewords.length,I=w-l.getECCodewords(),T=I-1,C=0,x=0;x<T;x++)for(var E=0;E<m;E++)f[E].codewords[x]=e[C++];for(var S=r.getVersionNumber()===24,O=S?8:m,E=0;E<O;E++)f[E].codewords[I-1]=e[C++];for(var B=f[0].codewords.length,x=I;x<B;x++)for(var E=0;E<m;E++){var P=S?(E+8)%m:E,D=S&&P>7?x-1:x;f[P].codewords[D]=e[C++]}if(C!==e.length)throw new zr;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),tte=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new zr(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,l=e<i?e:i,c=i-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ni;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ni||(Ni={}));var t3e=function(){function t(){}return t.decode=function(e){var r=new tte(e),n=new yn,a=new yn,s=new Array,i=Ni.ASCII_ENCODE;do if(i===Ni.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case Ni.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ni.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ni.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ni.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ni.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new pr}i=Ni.ASCII_ENCODE}while(i!==Ni.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new u4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new pr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Ni.ASCII_ENCODE;if(s===129)return Ni.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return Ni.C40_ENCODE;case 231:return Ni.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ni.ANSIX12_ENCODE;case 239:return Ni.TEXT_ENCODE;case 240:return Ni.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new pr;break}}while(e.available()>0);return Ni.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new pr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new pr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new pr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new pr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new pr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new pr;break;default:throw new pr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new pr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new pr;for(var l=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new pr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(ku.decode(l,Un.ISO88591))}catch(u){throw new Yb("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),r3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n3e=function(){function t(){this.rsDecoder=new d4(nc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new Z4e(e),s=a.getVersion(),i=a.readCodewords(),l=e3e.getDataBlocks(i,s),c=0;try{for(var u=r3e(l),d=u.next();!d.done;d=u.next()){var A=d.value;c+=A.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),f=l.length,m=0;m<f;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*f+m]=g[y]}return t3e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),a3e=function(){function t(e){this.image=e,this.rectangleDetector=new Hj(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Mt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],l=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,i,l,c);return new E6(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Rr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Rr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,A=[s,r,n,a];return d>l&&(d=l,A[0]=r,A[1]=n,A[2]=a,A[3]=s),d>c&&(d=c,A[0]=n,A[1]=a,A[2]=s,A[3]=r),d>u&&(A[0]=a,A[1]=s,A[2]=r,A[3]=n),A},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Rr(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),A=new Rr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(A)?A:null;if(!this.isValid(A))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),f=this.transitionsBetween(c,A)+this.transitionsBetween(u,A);return h>f?d:A},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,A=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,A),n=t.moveAway(n,d,A),a=t.moveAway(a,d,A),s=t.moveAway(s,d,A);var h,f;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,l*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,i*4),f=t.shiftPoint(s,a,l*4),f=t.shiftPoint(f,r,i*4),[c,h,u,f]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,l){var c=S6.getInstance();return c.sampleGrid(e,i,l,.5,.5,i-.5,.5,i-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),l=Math.abs(i-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),A=-u/2,h=a<i?1:-1,f=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=f){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),A+=d,A>0){if(x===i)break;x+=h,A-=u}}return m},t}(),KE=function(){function t(){this.decoder=new n3e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Va.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new a3e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var l=n.getRawBytes(),c=new pl(n.getText(),l,8*l.length,a,qr.DATA_MATRIX,Qa.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Mo.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(Mo.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Mt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new Mt;var A=a/2;s+=A,l+=A;for(var h=new hA(u,d),f=0;f<d;f++)for(var m=s+f*a,p=0;p<u;p++)e.get(l+p*a,m)&&h.set(p,f);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Mt;var i=a-e[0];if(i===0)throw new Mt;return i},t.NO_POINTS=[],t}(),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){s3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new KE,r)||this}return e})(Tv);var hx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(hx||(hx={}));var i3e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ys(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new zr;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(hx.L,"L",1),t.M=new t(hx.M,"M",0),t.Q=new t(hx.Q,"Q",3),t.H=new t(hx.H,"H",2),t}(),o3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rte=function(){function t(e){this.errorCorrectionLevel=i3e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return _n.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var l=o3e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var A=t.numBitsDiffering(e,d);A<s&&(i=u[1],s=A),e!==r&&(A=t.numBitsDiffering(r,d),A<s&&(i=u[1],s=A))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),l3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},St=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=l3e(a),i=s.next();!i.done;i=s.next()){var l=i.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ue=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),c3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xm=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=c3e(u),A=d.next();!A.done;A=d.next()){var h=A.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new pr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new pr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new zr;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=rte.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new hA(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new St(7,new Ue(1,19)),new St(10,new Ue(1,16)),new St(13,new Ue(1,13)),new St(17,new Ue(1,9))),new t(2,Int32Array.from([6,18]),new St(10,new Ue(1,34)),new St(16,new Ue(1,28)),new St(22,new Ue(1,22)),new St(28,new Ue(1,16))),new t(3,Int32Array.from([6,22]),new St(15,new Ue(1,55)),new St(26,new Ue(1,44)),new St(18,new Ue(2,17)),new St(22,new Ue(2,13))),new t(4,Int32Array.from([6,26]),new St(20,new Ue(1,80)),new St(18,new Ue(2,32)),new St(26,new Ue(2,24)),new St(16,new Ue(4,9))),new t(5,Int32Array.from([6,30]),new St(26,new Ue(1,108)),new St(24,new Ue(2,43)),new St(18,new Ue(2,15),new Ue(2,16)),new St(22,new Ue(2,11),new Ue(2,12))),new t(6,Int32Array.from([6,34]),new St(18,new Ue(2,68)),new St(16,new Ue(4,27)),new St(24,new Ue(4,19)),new St(28,new Ue(4,15))),new t(7,Int32Array.from([6,22,38]),new St(20,new Ue(2,78)),new St(18,new Ue(4,31)),new St(18,new Ue(2,14),new Ue(4,15)),new St(26,new Ue(4,13),new Ue(1,14))),new t(8,Int32Array.from([6,24,42]),new St(24,new Ue(2,97)),new St(22,new Ue(2,38),new Ue(2,39)),new St(22,new Ue(4,18),new Ue(2,19)),new St(26,new Ue(4,14),new Ue(2,15))),new t(9,Int32Array.from([6,26,46]),new St(30,new Ue(2,116)),new St(22,new Ue(3,36),new Ue(2,37)),new St(20,new Ue(4,16),new Ue(4,17)),new St(24,new Ue(4,12),new Ue(4,13))),new t(10,Int32Array.from([6,28,50]),new St(18,new Ue(2,68),new Ue(2,69)),new St(26,new Ue(4,43),new Ue(1,44)),new St(24,new Ue(6,19),new Ue(2,20)),new St(28,new Ue(6,15),new Ue(2,16))),new t(11,Int32Array.from([6,30,54]),new St(20,new Ue(4,81)),new St(30,new Ue(1,50),new Ue(4,51)),new St(28,new Ue(4,22),new Ue(4,23)),new St(24,new Ue(3,12),new Ue(8,13))),new t(12,Int32Array.from([6,32,58]),new St(24,new Ue(2,92),new Ue(2,93)),new St(22,new Ue(6,36),new Ue(2,37)),new St(26,new Ue(4,20),new Ue(6,21)),new St(28,new Ue(7,14),new Ue(4,15))),new t(13,Int32Array.from([6,34,62]),new St(26,new Ue(4,107)),new St(22,new Ue(8,37),new Ue(1,38)),new St(24,new Ue(8,20),new Ue(4,21)),new St(22,new Ue(12,11),new Ue(4,12))),new t(14,Int32Array.from([6,26,46,66]),new St(30,new Ue(3,115),new Ue(1,116)),new St(24,new Ue(4,40),new Ue(5,41)),new St(20,new Ue(11,16),new Ue(5,17)),new St(24,new Ue(11,12),new Ue(5,13))),new t(15,Int32Array.from([6,26,48,70]),new St(22,new Ue(5,87),new Ue(1,88)),new St(24,new Ue(5,41),new Ue(5,42)),new St(30,new Ue(5,24),new Ue(7,25)),new St(24,new Ue(11,12),new Ue(7,13))),new t(16,Int32Array.from([6,26,50,74]),new St(24,new Ue(5,98),new Ue(1,99)),new St(28,new Ue(7,45),new Ue(3,46)),new St(24,new Ue(15,19),new Ue(2,20)),new St(30,new Ue(3,15),new Ue(13,16))),new t(17,Int32Array.from([6,30,54,78]),new St(28,new Ue(1,107),new Ue(5,108)),new St(28,new Ue(10,46),new Ue(1,47)),new St(28,new Ue(1,22),new Ue(15,23)),new St(28,new Ue(2,14),new Ue(17,15))),new t(18,Int32Array.from([6,30,56,82]),new St(30,new Ue(5,120),new Ue(1,121)),new St(26,new Ue(9,43),new Ue(4,44)),new St(28,new Ue(17,22),new Ue(1,23)),new St(28,new Ue(2,14),new Ue(19,15))),new t(19,Int32Array.from([6,30,58,86]),new St(28,new Ue(3,113),new Ue(4,114)),new St(26,new Ue(3,44),new Ue(11,45)),new St(26,new Ue(17,21),new Ue(4,22)),new St(26,new Ue(9,13),new Ue(16,14))),new t(20,Int32Array.from([6,34,62,90]),new St(28,new Ue(3,107),new Ue(5,108)),new St(26,new Ue(3,41),new Ue(13,42)),new St(30,new Ue(15,24),new Ue(5,25)),new St(28,new Ue(15,15),new Ue(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new St(28,new Ue(4,116),new Ue(4,117)),new St(26,new Ue(17,42)),new St(28,new Ue(17,22),new Ue(6,23)),new St(30,new Ue(19,16),new Ue(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new St(28,new Ue(2,111),new Ue(7,112)),new St(28,new Ue(17,46)),new St(30,new Ue(7,24),new Ue(16,25)),new St(24,new Ue(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new St(30,new Ue(4,121),new Ue(5,122)),new St(28,new Ue(4,47),new Ue(14,48)),new St(30,new Ue(11,24),new Ue(14,25)),new St(30,new Ue(16,15),new Ue(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new St(30,new Ue(6,117),new Ue(4,118)),new St(28,new Ue(6,45),new Ue(14,46)),new St(30,new Ue(11,24),new Ue(16,25)),new St(30,new Ue(30,16),new Ue(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new St(26,new Ue(8,106),new Ue(4,107)),new St(28,new Ue(8,47),new Ue(13,48)),new St(30,new Ue(7,24),new Ue(22,25)),new St(30,new Ue(22,15),new Ue(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new St(28,new Ue(10,114),new Ue(2,115)),new St(28,new Ue(19,46),new Ue(4,47)),new St(28,new Ue(28,22),new Ue(6,23)),new St(30,new Ue(33,16),new Ue(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new St(30,new Ue(8,122),new Ue(4,123)),new St(28,new Ue(22,45),new Ue(3,46)),new St(30,new Ue(8,23),new Ue(26,24)),new St(30,new Ue(12,15),new Ue(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new St(30,new Ue(3,117),new Ue(10,118)),new St(28,new Ue(3,45),new Ue(23,46)),new St(30,new Ue(4,24),new Ue(31,25)),new St(30,new Ue(11,15),new Ue(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new St(30,new Ue(7,116),new Ue(7,117)),new St(28,new Ue(21,45),new Ue(7,46)),new St(30,new Ue(1,23),new Ue(37,24)),new St(30,new Ue(19,15),new Ue(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new St(30,new Ue(5,115),new Ue(10,116)),new St(28,new Ue(19,47),new Ue(10,48)),new St(30,new Ue(15,24),new Ue(25,25)),new St(30,new Ue(23,15),new Ue(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new St(30,new Ue(13,115),new Ue(3,116)),new St(28,new Ue(2,46),new Ue(29,47)),new St(30,new Ue(42,24),new Ue(1,25)),new St(30,new Ue(23,15),new Ue(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new St(30,new Ue(17,115)),new St(28,new Ue(10,46),new Ue(23,47)),new St(30,new Ue(10,24),new Ue(35,25)),new St(30,new Ue(19,15),new Ue(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new St(30,new Ue(17,115),new Ue(1,116)),new St(28,new Ue(14,46),new Ue(21,47)),new St(30,new Ue(29,24),new Ue(19,25)),new St(30,new Ue(11,15),new Ue(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new St(30,new Ue(13,115),new Ue(6,116)),new St(28,new Ue(14,46),new Ue(23,47)),new St(30,new Ue(44,24),new Ue(7,25)),new St(30,new Ue(59,16),new Ue(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new St(30,new Ue(12,121),new Ue(7,122)),new St(28,new Ue(12,47),new Ue(26,48)),new St(30,new Ue(39,24),new Ue(14,25)),new St(30,new Ue(22,15),new Ue(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new St(30,new Ue(6,121),new Ue(14,122)),new St(28,new Ue(6,47),new Ue(34,48)),new St(30,new Ue(46,24),new Ue(10,25)),new St(30,new Ue(2,15),new Ue(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new St(30,new Ue(17,122),new Ue(4,123)),new St(28,new Ue(29,46),new Ue(14,47)),new St(30,new Ue(49,24),new Ue(10,25)),new St(30,new Ue(24,15),new Ue(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new St(30,new Ue(4,122),new Ue(18,123)),new St(28,new Ue(13,46),new Ue(32,47)),new St(30,new Ue(48,24),new Ue(14,25)),new St(30,new Ue(42,15),new Ue(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new St(30,new Ue(20,117),new Ue(4,118)),new St(28,new Ue(40,47),new Ue(7,48)),new St(30,new Ue(43,24),new Ue(22,25)),new St(30,new Ue(10,15),new Ue(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new St(30,new Ue(19,118),new Ue(6,119)),new St(28,new Ue(18,47),new Ue(31,48)),new St(30,new Ue(34,24),new Ue(34,25)),new St(30,new Ue(20,15),new Ue(61,16)))],t}(),Xi;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Xi||(Xi={}));var ZQ=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Xi.DATA_MASK_000,new t(Xi.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Xi.DATA_MASK_001,new t(Xi.DATA_MASK_001,function(e,r){return(e&1)===0})],[Xi.DATA_MASK_010,new t(Xi.DATA_MASK_010,function(e,r){return r%3===0})],[Xi.DATA_MASK_011,new t(Xi.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Xi.DATA_MASK_100,new t(Xi.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Xi.DATA_MASK_101,new t(Xi.DATA_MASK_101,function(e,r){return e*r%6===0})],[Xi.DATA_MASK_110,new t(Xi.DATA_MASK_110,function(e,r){return e*r%6<3})],[Xi.DATA_MASK_111,new t(Xi.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),u3e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new pr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=rte.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new pr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Xm.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var l=Xm.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(l=Xm.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new pr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=ZQ.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,A=a-1;A>0;A-=2){A===6&&A--;for(var h=0;h<a;h++)for(var f=i?a-1-h:h,m=0;m<2;m++)s.get(A-m,f)||(d++,u<<=1,this.bitMatrix.get(A-m,f)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new pr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=ZQ.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),eV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,l;if(e.length!==r.getTotalCodewords())throw new zr;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var A=eV(d),h=A.next();!h.done;h=A.next()){var f=h.value;u+=f.getCount()}}catch(D){a={error:D}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=eV(d),x=g.next();!x.done;x=g.next())for(var f=x.value,y=0;y<f.getCount();y++){var b=f.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){i={error:D}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}for(var I=m[0].codewords.length,T=m.length-1;T>=0;){var C=m[T].codewords.length;if(C===I)break;T--}T++;for(var E=I-c.getECCodewordsPerBlock(),S=0,y=0;y<E;y++)for(var O=0;O<p;O++)m[O].codewords[y]=e[S++];for(var O=T;O<p;O++)m[O].codewords[E]=e[S++];for(var B=m[0].codewords.length,y=E;y<B;y++)for(var O=0;O<p;O++){var P=O<T?y:y+1;m[O].codewords[P]=e[S++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),gu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(gu||(gu={}));var za=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new zr;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(gu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(gu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(gu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(gu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(gu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(gu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(gu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(gu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(gu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(gu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),A3e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new tte(e),i=new yn,l=new Array,c=-1,u=-1;try{var d=null,A=!1,h=void 0;do{if(s.available()<4)h=za.TERMINATOR;else{var f=s.readBits(4);h=za.forBits(f)}switch(h){case za.TERMINATOR:break;case za.FNC1_FIRST_POSITION:case za.FNC1_SECOND_POSITION:A=!0;break;case za.STRUCTURED_APPEND:if(s.available()<16)throw new pr;c=s.readBits(8),u=s.readBits(8);break;case za.ECI:var m=t.parseECIValue(s);if(d=ji.getCharacterSetECIByValue(m),d===null)throw new pr;break;case za.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case za.NUMERIC:t.decodeNumericSegment(s,i,x);break;case za.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,A);break;case za.BYTE:t.decodeByteSegment(s,i,x,d,l,a);break;case za.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new pr}break}}while(h!==za.TERMINATOR)}catch{throw new pr}return new u4(e,i.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new pr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/96<<8&4294967295|i%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(ku.decode(a,Un.GB2312))}catch(c){throw new pr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new pr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/192<<8&4294967295|i%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(ku.decode(a,Un.SHIFT_JIS))}catch(c){throw new pr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new pr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Un.guessEncoding(l,i):u=a.getName();try{r.append(ku.decode(l,u))}catch(d){throw new pr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new pr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new pr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new pr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new pr;var a=e.readBits(10);if(a>=1e3)throw new pr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new pr;var s=e.readBits(7);if(s>=100)throw new pr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new pr;var i=e.readBits(4);if(i>=10)throw new pr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new pr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),nte=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),tV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f3e=function(){function t(){this.rsDecoder=new d4(nc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(hA.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new u3e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new nte(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=d3e.getDataBlocks(u,l,c),A=0;try{for(var h=tV(d),f=h.next();!f.done;f=h.next()){var m=f.value;A+=m.getNumDataCodewords()}}catch(T){n={error:T}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(A),g=0;try{for(var x=tV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var I=0;I<w;I++)p[g++]=b[I]}}catch(T){s={error:T}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return A3e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),h3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m3e=function(t){h3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,i,l)},e}(Rr),p3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g3e=function(){function t(e,r,n,a,s,i,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var A=0;d<a;){if(l.get(d,u))if(A===1)i[1]++;else if(A===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,A=1}else i[++A]++;else A===1&&A++,i[A]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Mt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===i||l[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=p3e(this.possibleCenters),A=d.next();!A.done;A=d.next()){var h=A.value;if(h.aboutEquals(u,c,l))return h.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var f=new m3e(l,c,u);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t}(),x3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v3e=function(t){x3e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,l,c,s)},e}(Rr),y3e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),D1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b3e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Va.TRY_HARDER)!==void 0,n=e!=null&&e.get(Va.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var A=0,h=0;h<i;h++)if(a.get(h,d))(A&1)===1&&A++,u[A]++;else if(A&1)u[A]++;else if(A===4)if(t.foundPatternCross(u)){var f=this.handlePossibleCenter(u,d,h,n);if(f===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,A=3;continue}A=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,A=3;else u[++A]++;if(t.foundPatternCross(u)){var f=this.handlePossibleCenter(u,d,i,n);f===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Rr.orderBestPatterns(p),new y3e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,l=this.image;e>=i&&r>=i&&l.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!l.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&l.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(i=1;e+i<c&&r+i<u&&l.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!l.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&l.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(l)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(l),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,A=0,h=d.length;A<h;A++){var f=d[A];if(f.aboutEquals(c,l,i)){d[A]=f.combineEstimate(l,i,c),u=!0;break}}if(!u){var m=new v3e(i,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=D1(this.possibleCenters),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,l=this.possibleCenters.length;try{for(var c=D1(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var A=i/l,h=0;try{for(var f=D1(this.possibleCenters),m=f.next();!m.done;m=f.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-A)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Mt;var i=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=D1(this.possibleCenters),A=d.next();!A.done;A=d.next()){var h=A.value,f=h.getEstimatedModuleSize();c+=f,u+=f*f}}catch(I){e={error:I}}finally{try{A&&!A.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);i.sort(function(I,T){var C=Math.abs(T.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return C<E?-1:C>E?1:0});for(var p=Math.max(.2*l,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=D1(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(T){n={error:T}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/i.length,i.sort(function(T,C){if(C.getCount()===T.getCount()){var E=Math.abs(C.getEstimatedModuleSize()-l),S=Math.abs(T.getEstimatedModuleSize()-l);return E<S?1:E>S?-1:0}else return C.getCount()-T.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),w3e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Va.NEED_RESULT_POINT_CALLBACK);var r=new b3e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Mt("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),l=Xm.getProvisionalVersionForDimension(i),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),A=n.getY()-r.getY()+a.getY(),h=1-3/c,f=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(A-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,f,m,p);break}catch(b){if(!(b instanceof Mt))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new E6(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=i-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),Yee.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=S6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=Xn.round(Rr.distance(e,r)/a),i=Xn.round(Rr.distance(e,n)/a),l=Math.floor((s+i)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Mt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,l=e-(n-e);l<0?(i=e/(e-l),l=0):l>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,A=r<a?1:-1,h=0,f=n+d,m=e,p=r;m!==f;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return Xn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=A,u-=l}}return h===2?Xn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-i<e*3)throw new Mt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Mt("Alignment bottom exceeds estimated module size.");var d=new g3e(this.image,i,c,l-i,u-c,e,this.resultPointCallback);return d.find()},t}(),GE=function(){function t(){this.decoder=new f3e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Va.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new w3e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof nte&&n.getOther().applyMirroredCorrection(a);var l=new pl(n.getText(),n.getRawBytes(),void 0,a,qr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Mo.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(Mo.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Mo.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Mo.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Mt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0];if(l>=c||s>=i)throw new Mt;if(i-s!==c-l&&(c=l+(i-s),c>=e.getWidth()))throw new Mt;var u=Math.round((c-l+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new Mt;if(d!==u)throw new Mt;var A=Math.floor(a/2);s+=A,l+=A;var h=l+Math.floor((u-1)*a)-c;if(h>0){if(h>A)throw new Mt;l-=h}var f=s+Math.floor((d-1)*a)-i;if(f>0){if(f>A)throw new Mt;s-=f}for(var m=new hA(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],l=!0,c=0;s<a&&i<n;){if(l!==r.get(s,i)){if(++c===5)break;l=!l}s++,i++}if(s===a||i===n)throw new Mt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),N3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$n=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Xn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=N3e(e),l=i.next();!l.done;l=i.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=ki.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),_3e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),C3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E3e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new _3e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,l=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,C3e(s)),A=d.next();!A.done;A=d.next()){var h=A.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(f){n={error:f}}finally{try{A&&!A.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var l=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var A=t.findGuardPattern(e,s,--a,n,!1,i,u);if(A!=null)d=A;else{a++;break}}l[0]=new Rr(d[0],a),l[1]=new Rr(d[1],a),c=!0;break}}var h=a+1;if(c){for(var f=0,A=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,A[0],h,n,!1,i,u);if(d!=null&&Math.abs(A[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(A[1]-d[1])<t.MAX_PATTERN_DRIFT)A=d,f=0;else{if(f>t.SKIPPED_ROW_COUNT_MAX)break;f++}}h-=f+1,l[2]=new Rr(A[0],h),l[3]=new Rr(A[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&ki.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,i,l){ki.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,A=0,h=i.length,f=s;d<a;d++){var m=e.get(d,n);if(m!==f)l[A]++;else{if(A===h-1){if(t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Qa.arraycopy(l,2,l,0,A-1),l[A-1]=0,l[A]=0,A--}else A++;l[A]=1,f=!f}}return A===h-1&&t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var A=e[d],h=r[d]*c,f=A>h?A-h:h-A;if(f>n)return 1/0;u+=f}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),S3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dm=function(){function t(e,r){if(r.length===0)throw new zr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Qa.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=S3e(this.coefficients),i=s.next();!i.done;i=s.next()){var l=i.value;a=this.field.add(a,l)}}catch(A){r={error:A}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Qa.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=this.field.add(r[l-i],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new zr("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)i[l+u]=this.field.add(i[l+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new zr;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new yn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),I3e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new zr;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Xee;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),B3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T3e=function(t){B3e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new Dm(a,new Int32Array([0])),a.one=new Dm(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new zr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Dm(this,a)},e.PDF417_GF=new e($n.NUMBER_OF_CODEWORDS,3),e}(I3e),P3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j3e=function(){function t(){this.field=T3e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new Dm(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var A=this.field.getOne();if(n!=null)try{for(var h=P3e(n),f=h.next();!f.done;f=h.next()){var m=f.value,p=this.field.exp(e.length-1-m),g=new Dm(this.field,new Int32Array([this.field.subtract(0,p),1]));A=A.multiply(g)}}catch(E){a={error:E}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new Dm(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],I=this.findErrorLocations(b),T=this.findErrorMagnitudes(w,b,I),u=0;u<I.length;u++){var C=e.length-1-this.field.log(I[u]);if(C<0)throw fi.getChecksumInstance();e[C]=this.field.subtract(e[C],T[u])}return I.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,l=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=i,l=c,s.isZero())throw fi.getChecksumInstance();i=u;for(var A=this.field.getZero(),h=s.getCoefficient(s.getDegree()),f=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),f);A=A.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=A.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw fi.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw fi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var l=new Dm(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),A=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(l.evaluateAt(d));u[i]=this.field.multiply(A,h)}return u},t}(),Kj=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,l=a==null||s==null;if(i&&l)throw new Mt;i?(r=new Rr(0,a.getY()),n=new Rr(0,s.getY())):l&&(a=new Rr(e.getWidth()-1,r.getY()),s=new Rr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Rr(c.getX(),u);n?a=d:i=d}if(r>0){var A=n?this.bottomLeft:this.bottomRight,h=Math.trunc(A.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var f=new Rr(A.getX(),h);n?s=f:l=f}return new t(this.image,a,s,i,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),k3e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),B6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,l,c,u,d,A){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,f;switch(A){case"s":f=r[n];break;case"c":f=r[n][0];break;case"f":f=parseFloat(r[n]).toFixed(i);break;case"p":f=parseFloat(r[n]).toPrecision(i);break;case"e":f=parseFloat(r[n]).toExponential(i);break;case"x":f=parseInt(r[n]).toString(h||16);break;case"d":f=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}f=typeof f=="object"?JSON.stringify(f):(+f).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";f.length<m;)f=l!==void 0?f+p:p+f;return f}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),F3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ate=function(){function t(e){this.boundingBox=new Kj(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new B6,a=0;try{for(var s=F3e(this.codewords),i=s.next();!i.done;i=s.next()){var l=i.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),O3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},fy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(A,h){var f={getKey:function(){return A},getValue:function(){return h}};f.getValue()>n?(n=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===n&&a.push(f.getKey())};try{for(var i=O3e(this.values.entries()),l=i.next();!l.done;l=i.next()){var c=D3e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(A){e={error:A}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return $n.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),R3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rV=function(t){R3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=PB(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,A=0,h=l;h<c;h++)if(n[h]!=null){var f=n[h],m=f.getRowNumber()-u;if(m===0)A++;else if(m===1)d=Math.max(d,A),A=1,u=f.getRowNumber();else if(m<0||f.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=f.getRowNumber(),A=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=PB(this.getCodewords()),l=i.next();!l.done;l=i.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<l;d++)if(c[d]!=null){var A=c[d];A.setRowNumberAsRowIndicatorColumn();var h=A.getRowNumber()-u;h===0||(h===1?u=A.getRowNumber():A.getRowNumber()>=r.getRowCount()?c[d]=null:u=A.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new fy,i=new fy,l=new fy,c=new fy;try{for(var u=PB(a),d=u.next();!d.done;d=u.next()){var A=d.value;if(A!=null){A.setRowNumberAsRowIndicatorColumn();var h=A.getValue()%30,f=A.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),l.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<$n.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>$n.MAX_ROWS_IN_BARCODE)return null;var m=new k3e(s.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(ate),M3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L3e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=$n.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=M3e(u),A=d.next();!A.done;A=d.next()){var h=A.value;if(t.adjustRowNumber(i,h))return}}catch(f){a={error:f}}finally{try{A&&!A.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new B6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),U3e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Q3e=function(){function t(){}return t.initialize=function(){for(var e=0;e<$n.SYMBOL_TABLE.length;e++)for(var r=$n.SYMBOL_TABLE[e],n=r&1,a=0;a<$n.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array($n.BARS_IN_MODULE)),t.RATIOS_TABLE[e][$n.BARS_IN_MODULE-a-1]=Math.fround(s/$n.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Xn.sum(e),n=new Int32Array($n.BARS_IN_MODULE),a=0,s=0,i=0;i<$n.MODULES_IN_CODEWORD;i++){var l=r/(2*$n.MODULES_IN_CODEWORD)+i*r/$n.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return $n.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Xn.sum(e),n=new Array($n.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Vj.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<$n.BARS_IN_MODULE;d++){var A=Math.fround(u[d]-n[d]);if(c+=Math.fround(A*A),c>=s)break}c<s&&(s=c,i=$n.SYMBOL_TABLE[l])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array($n.SYMBOL_TABLE.length).map(function(e){return new Array($n.BARS_IN_MODULE)}),t}(),V3e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),nV=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),H3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$3e=function(t){H3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(hc),K3e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new $3e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new C6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),G3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q3e=function(t){G3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(hc),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W3e=function(t){z3e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new zr("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new q3e;a=_n.MAX_VALUE}this.buf=ki.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new C6;this.ensureCapacity(this.count+a),Qa.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ki.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(K3e),Ca;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ca||(Ca={}));function ste(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var i_;function kh(t){if(typeof i_>"u"&&(i_=ste()),i_===null)throw new Error("BigInt is not supported!");return i_(t)}function X3e(){var t=[];t[0]=kh(1);var e=kh(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var Y3e=function(){function t(){}return t.decode=function(e,r){var n=new yn(""),a=ji.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],l=new V3e;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:ji.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new pr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw pr.getFormatInstance()}if(n.length()===0)throw pr.getFormatInstance();var c=new u4(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw pr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(_n.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new yn;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new yn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new yn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new yn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var A=new yn;r=t.numericCompaction(e,r+1,A),n.setSegmentCount(_n.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new yn;r=t.numericCompaction(e,r+1,h),n.setTimestamp(nV.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new yn;r=t.numericCompaction(e,r+1,f),n.setChecksum(_n.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new yn;r=t.numericCompaction(e,r+1,m),n.setFileSize(nV.parseLong(m.toString()));break;default:throw pr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw pr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(ki.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Ca.ALPHA,i=Ca.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Ca.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Ca.LOWER;break;case t.ML:s=Ca.MIXED;break;case t.PS:i=s,s=Ca.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break;case Ca.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=Ca.ALPHA_SHIFT;break;case t.ML:s=Ca.MIXED;break;case t.PS:i=s,s=Ca.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break;case Ca.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Ca.PUNCT;break;case 26:u=" ";break;case t.LL:s=Ca.LOWER;break;case t.AL:s=Ca.ALPHA;break;case t.PS:i=s,s=Ca.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break;case Ca.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ca.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break;case Ca.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break;case Ca.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ca.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ca.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var i=new W3e,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),A=r[a++];a<r[0]&&!u;)switch(d[l++]=A,c=900*c+A,A=r[a++],A){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(kh(c)>>kh(8*(5-h))));c=0,l=0}break}a===r[0]&&A<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=A);for(var f=0;f<l;f++)i.write(d[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(kh(c)>>kh(8*(5-h))));c=0,l=0}}break}return s.append(ku.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=kh(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*kh(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new pr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ste()?X3e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),R1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J3e=function(){function t(){}return t.decode=function(e,r,n,a,s,i,l){for(var c=new Kj(e,r,n,a,s),u=null,d=null,A,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,l)),A=t.merge(u,d),A==null)throw Mt.getNotFoundInstance();var f=A.getBoundingBox();if(h&&f!=null&&(f.getMinY()<c.getMinY()||f.getMaxY()>c.getMaxY()))c=f;else break}A.setBoundingBox(c);var m=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,u),A.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(A.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new rV(c,x===0):y=new ate(c),A.setDetectionResultColumn(x,y);for(var b=-1,w=b,I=c.getMinY();I<=c.getMaxY();I++){if(b=t.getStartColumn(A,x,I,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var T=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,I,i,l);T!=null&&(y.setCodeword(I,T),w=b,i=Math.min(i,T.getWidth()),l=Math.max(l,T.getWidth()))}}}return t.createDecoderResult(A)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Kj.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new L3e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var l=R1(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),A=0;i>0&&d[A]==null;A++)i--;for(var h=0,A=a.length-1;A>=0&&(h+=s-a[A],!(a[A]>0));A--);for(var A=d.length-1;h>0&&d[A]==null;A--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=R1(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var l=new rV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),A=Math.trunc(Math.trunc(n.getY()));A<=r.getMaxY()&&A>=r.getMinY();A+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,A,s,i);h!=null&&(l.setCodeword(A,h),a?d=h.getStartX():d=h.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>$n.MAX_CODEWORDS_IN_BARCODE)throw Mt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var A=new Array(s.length),h=0;h<A.length;h++)A[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,$n.toIntArray(n),$n.toIntArray(i),A)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof fi;if(!u)throw d}if(i.length===0)throw fi.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw fi.getChecksumInstance()}throw fi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)i[l][c]=new fy;var u=0;try{for(var d=R1(e.getDetectionResultColumns()),A=d.next();!A.done;A=d.next()){var h=A.value;if(h!=null)try{for(var f=(a=void 0,R1(h.getCodewords())),m=f.next();!m.done;m=f.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{A&&!A.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,R1(e.getDetectionResultColumn(r).getCodewords())),A=d.next();!A.done;A=d.next()){var h=A.value;if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX())}}catch(f){s={error:f}}finally{try{A&&!A.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,A=Xn.sum(u);if(a)d=s+A;else{for(var h=0;h<u.length/2;h++){var f=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=f}d=s,s=d-A}if(!t.checkCodewordSkew(A,l,c))return null;var m=Q3e.getDecodedValue(u),p=$n.getCodeword(m);return p===-1?null:new U3e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,A=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,i)===A?(c[u]++,l+=d):(u++,A=!A);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,i);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw pr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=Y3e.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw fi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw pr.getFormatInstance();var n=e[0];if(n>e.length)throw pr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw pr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new B6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new j3e,t}(),Z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qE=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Mt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof pr||n instanceof fi?Mt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,l=E3e.detectMultiple(e,r,n);try{for(var c=Z3e(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,A=J3e.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new pl(A.getText(),A.getRawBytes(),void 0,d,qr.PDF_417);h.putMetadata(Mo.ERROR_CORRECTION_LEVEL,A.getECLevel());var f=A.getOther();f!=null&&h.putMetadata(Mo.PDF417_EXTRA_METADATA,f),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?_n.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*$n.MODULES_IN_CODEWORD/$n.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),e5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aV=function(t){e5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(hc),sV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ite=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Va.TRY_HARDER)!==void 0,n=e==null?null:e.get(Va.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===qr.UPC_A||i===qr.UPC_E||i===qr.EAN_13||i===qr.EAN_8||i===qr.CODABAR||i===qr.CODE_39||i===qr.CODE_93||i===qr.CODE_128||i===qr.ITF||i===qr.RSS_14||i===qr.RSS_EXPANDED});s&&!r&&a.push(new fx(e)),n.includes(qr.QR_CODE)&&a.push(new GE),n.includes(qr.DATA_MATRIX)&&a.push(new KE),n.includes(qr.AZTEC)&&a.push(new HE),n.includes(qr.PDF_417)&&a.push(new qE),s&&r&&a.push(new fx(e))}a.length===0&&(r||a.push(new fx(e)),a.push(new GE),a.push(new KE),a.push(new HE),a.push(new qE),r&&a.push(new fx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=sV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new aV("No readers where selected, nothing can be read.");try{for(var a=sV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(l){if(l instanceof aV)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Mt("No MultiFormat Readers were able to detect the code.")},t}(),t5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t5e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new ite;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Tv);var r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){r5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new qE,r)||this}return e})(Tv);var n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){n5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new GE,r)||this}return e})(Tv);var Gj;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Gj||(Gj={}));const o_=Gj;var ote=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new g0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new g0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new zr("No error correction bytes");var n=e.length-r;if(n<=0)throw new zr("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Qa.arraycopy(e,0,s,0,n);var i=new g0(this.field,s);i=i.multiplyByMonomial(r,1);for(var l=i.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Qa.arraycopy(c,0,e,n+u,c.length)},t}(),hy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var l=n[i],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=0;l<a;l++){var c=n[i];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,i+6<s&&n[i][l]===1&&n[i+1][l]===0&&n[i+2][l]===1&&n[i+3][l]===1&&n[i+4][l]===1&&n[i+5][l]===0&&n[i+6][l]===1&&(t.isWhiteVertical(n,l,i-4,i)||t.isWhiteVertical(n,l,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=n[i],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new zr("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var A=r?i[l][d]:i[d][l];A===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=A)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),a5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s5e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=a5e(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;ki.fill(i,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==i[l])return!1;return!0},t.prototype.toString=function(){for(var e=new yn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),qj=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new yn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),i5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qa=function(t){i5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(hc),iV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new io;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var A=n.getWidth()-s-1,h=8;n.setBoolean(A,h,l)}else{var A=8,h=n.getHeight()-7+(s-8);n.setBoolean(A,h,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new io;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,l),r.setBoolean(r.getHeight()-11+i,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,l=n.getHeight()-1;i>0;){for(i===6&&(i-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&hy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,i-=2}if(a!==e.getSize())throw new qa("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-_n.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new zr("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!qj.isValidMaskPattern(r))throw new qa("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new io;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new qa("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new qa("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new qa;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new qa;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new qa;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var l=a[s];if(l>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),o5e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),oV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return hy.applyMaskPenaltyRule1(e)+hy.applyMaskPenaltyRule2(e)+hy.applyMaskPenaltyRule3(e)+hy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(o_.CHARACTER_SET)!==void 0;s&&(a=n.get(o_.CHARACTER_SET).toString());var i=this.chooseMode(e,a),l=new io;if(i===za.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=ji.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(i,l);var u=new io;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(o_.QR_VERSION)!==void 0){var A=Number.parseInt(n.get(o_.QR_VERSION).toString(),10);d=Xm.getVersionForNumber(A);var h=this.calculateBitsNeeded(i,l,u,d);if(!this.willFit(h,d,r))throw new qa("Data too big for requested version")}else d=this.recommendVersion(r,i,l,u);var f=new io;f.appendBitArray(l);var m=i===za.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,f),f.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,f);var x=this.interleaveWithECBytes(f,d.getTotalCodewords(),g,p.getNumBlocks()),y=new qj;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new s5e(b,b),I=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(I),iV.buildMatrix(x,r,d,I,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Xm.getVersionForNumber(1)),i=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),ji.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return za.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return za.BYTE}return a?za.ALPHANUMERIC:n?za.NUMERIC:za.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=ku.encode(e,ji.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,l=0;l<qj.NUM_MASK_PATTERNS;l++){iV.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=l)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Xm.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new qa("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),l=a-i,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new qa("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new qa("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new qa("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,A=Math.floor(r/n),h=A+1,f=u-A,m=d-h;if(f!==m)throw new qa("EC bytes mismatch");if(n!==c+l)throw new qa("RS blocks mismatch");if(e!==(A+f)*c+(h+m)*l)throw new qa("Total bytes mismatch");a<c?(s[0]=A,i[0]=f):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,l,c;if(e.getSizeInBytes()!==n)throw new qa("Number of bits and data bytes does not match");for(var u=0,d=0,A=0,h=new Array,f=0;f<a;++f){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,f,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new o5e(x,y)),d=Math.max(d,g),A=Math.max(A,y.length),u+=m[0]}if(n!==u)throw new qa("Data bytes does not match offset");for(var b=new io,f=0;f<d;++f)try{for(var w=(s=void 0,oV(h)),I=w.next();!I.done;I=w.next()){var T=I.value,x=T.getDataBytes();f<x.length&&b.appendBits(x[f],8)}}catch(O){s={error:O}}finally{try{I&&!I.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var f=0;f<A;++f)try{for(var C=(l=void 0,oV(h)),E=C.next();!E.done;E=C.next()){var T=E.value,y=T.getErrorCorrectionBytes();f<y.length&&b.appendBits(y[f],8)}}catch(O){l={error:O}}finally{try{E&&!E.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new qa("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new ote(nc.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new qa(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case za.NUMERIC:t.appendNumericBytes(e,n);break;case za.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case za.BYTE:t.append8BitBytes(e,n,a);break;case za.KANJI:t.appendKanjiBytes(e,n);break;default:throw new qa("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+l,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new qa;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new qa;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=ku.encode(e,n)}catch(c){throw new qa(c)}for(var s=0,i=a.length;s!==i;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=ku.encode(e,ji.SJIS)}catch(A){throw new qa(A)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,l=n[s+1]&255,c=i<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new qa("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(za.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=ji.UTF8.getName(),t})();var l5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){l5e(e,t);function e(r,n,a,s,i,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+l>n||i+c>a)throw new zr("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Qa.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Qa.arraycopy(this.yuvData,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Qa.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var l=i+r/2,c=i,u=i+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new c4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Xb);var c5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){c5e(e,t);function e(r,n,a,s,i,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,A=new Uint8ClampedArray(d),h=0;h<d;h++){var f=r[h],m=f>>16&255,p=f>>7&510,g=f&255;A[h]=(m+p+g)/4&255}u.luminances=A}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new zr("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Qa.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Qa.arraycopy(this.luminances,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Qa.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new c4(this)},e})(Xb);var u5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d5e=function(t){u5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(ji),A5e=function(){function t(){}return t.ISO_8859_1=ji.ISO8859_1,t}(),zj,f5e=301,h5e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=f5e);return{LOG:t,ALOG:e}};zj=h5e([],[]),zj.LOG;zj.ALOG;var lV;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(lV||(lV={}));var cV=129,lte=230,m5e=231,p5e=235,g5e=236,x5e=237,v5e=238,y5e=239,b5e=240,jB=254,w5e=254,uV="[)>05",dV="[)>06",AV="",fa=0,Eo=1,Sl=2,_i=3,Zi=4,rl=5,N5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return fa},t.prototype.encode=function(e){var r=cd.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=cd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case rl:e.writeCodeword(m5e),e.signalEncoderChange(rl);return;case Eo:e.writeCodeword(lte),e.signalEncoderChange(Eo);return;case _i:e.writeCodeword(v5e),e.signalEncoderChange(_i);break;case Sl:e.writeCodeword(y5e),e.signalEncoderChange(Sl);break;case Zi:e.writeCodeword(b5e),e.signalEncoderChange(Zi);break;default:throw new Error("Illegal mode: "+a)}else cd.isExtendedASCII(n)?(e.writeCodeword(p5e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(cd.isDigit(e)&&cd.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),_5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return rl},t.prototype.encode=function(e){var r=new yn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=cd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(fa);break}}var s=r.length()-1,i=1,l=e.getCodewordCount()+s+i;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Un.getCharAt(s));else if(s<=1555)r.setCharAt(0,Un.getCharAt(Math.floor(s/250)+249)),r.insert(1,Un.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),T6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Eo},t.prototype.encodeMaximal=function(e){for(var r=new yn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(lte),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new yn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var l=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new yn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=cd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(fa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(jB)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(jB),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(jB)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(fa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new yn;return s.append(n),s.append(a),s.toString()},t}(),C5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Zi},t.prototype.encode=function(e){for(var r=new yn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=cd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(fa);break}}}r.append(Un.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(l)}finally{e.signalEncoderChange(fa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Un.getCharAt(e-64)):cd.illegalCharacter(Un.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+i,c=l>>16&255,u=l>>8&255,d=l&255,A=new yn;return A.append(c),r>=2&&A.append(u),r>=3&&A.append(d),A.toString()},t}(),E5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aa=function(){function t(e,r,n,a,s,i,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=S5e(B5e),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(A){i={error:A}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),I5e=function(t){E5e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(aa),B5e=[new aa(!1,3,5,8,8,1),new aa(!1,5,7,10,10,1),new aa(!0,5,7,16,6,1),new aa(!1,8,10,12,12,1),new aa(!0,10,11,14,6,2),new aa(!1,12,12,14,14,1),new aa(!0,16,14,24,10,1),new aa(!1,18,14,16,16,1),new aa(!1,22,18,18,18,1),new aa(!0,22,18,16,10,2),new aa(!1,30,20,20,20,1),new aa(!0,32,24,16,14,2),new aa(!1,36,24,22,22,1),new aa(!1,44,28,24,24,1),new aa(!0,49,28,22,14,2),new aa(!1,62,36,14,14,4),new aa(!1,86,42,16,16,4),new aa(!1,114,48,18,18,4),new aa(!1,144,56,20,20,4),new aa(!1,174,68,22,22,4),new aa(!1,204,84,24,24,4,102,42),new aa(!1,280,112,14,14,16,140,56),new aa(!1,368,144,16,16,16,92,36),new aa(!1,456,192,18,18,16,114,48),new aa(!1,576,224,20,20,16,144,56),new aa(!1,696,272,22,22,16,174,68),new aa(!1,816,336,24,24,16,136,56),new aa(!1,1050,408,18,18,36,175,68),new aa(!1,1304,496,20,20,36,163,62),new I5e],T5e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new yn,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new yn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=aa.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),P5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j5e=function(t){P5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return _i},e.prototype.encode=function(r){for(var n=new yn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=cd.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(fa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):cd.illegalCharacter(Un.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(w5e),r.getNewEncoding()<0&&r.signalEncoderChange(fa)},e}(T6),k5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F5e=function(t){k5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Sl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(T6),cd=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=cV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new T6,l=[new N5e,i,new F5e,new j5e,new C5e,new _5e],c=new T5e(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(uV)&&e.endsWith(AV)?(c.writeCodeword(g5e),c.setSkipAtEnd(2),c.pos+=uV.length):e.startsWith(dV)&&e.endsWith(AV)&&(c.writeCodeword(x5e),c.setSkipAtEnd(2),c.pos+=dV.length);var u=fa;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var A=c.getSymbolInfo().getDataCapacity();d<A&&u!==fa&&u!==rl&&u!==Zi&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<A&&h.append(cV);h.length()<A;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===_i&&a===_i){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return fa}else if(n===Zi&&a===Zi){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return fa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===fa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),l=[];;){if(r+s===e.length){ki.fill(i,0),ki.fill(l,0);var c=this.findMinimums(a,l,_n.MAX_VALUE,i),u=this.getMinimumCount(i);if(l[fa]===c)return fa;if(u===1){if(i[rl]>0)return rl;if(i[Zi]>0)return Zi;if(i[Sl]>0)return Sl;if(i[_i]>0)return _i}return Eo}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[fa]+=.5:this.isExtendedASCII(d)?(a[fa]=Math.ceil(a[fa]),a[fa]+=2):(a[fa]=Math.ceil(a[fa]),a[fa]++),this.isNativeC40(d)?a[Eo]+=2/3:this.isExtendedASCII(d)?a[Eo]+=8/3:a[Eo]+=4/3,this.isNativeText(d)?a[Sl]+=2/3:this.isExtendedASCII(d)?a[Sl]+=8/3:a[Sl]+=4/3,this.isNativeX12(d)?a[_i]+=2/3:this.isExtendedASCII(d)?a[_i]+=13/3:a[_i]+=10/3,this.isNativeEDIFACT(d)?a[Zi]+=3/4:this.isExtendedASCII(d)?a[Zi]+=17/4:a[Zi]+=13/4,this.isSpecialB256(d)?a[rl]+=4:a[rl]++,s>=4){if(ki.fill(i,0),ki.fill(l,0),this.findMinimums(a,l,_n.MAX_VALUE,i),l[fa]<this.min(l[rl],l[Eo],l[Sl],l[_i],l[Zi]))return fa;if(l[rl]<l[fa]||l[rl]+1<this.min(l[Eo],l[Sl],l[_i],l[Zi]))return rl;if(l[Zi]+1<this.min(l[rl],l[Eo],l[Sl],l[_i],l[fa]))return Zi;if(l[Sl]+1<this.min(l[rl],l[Eo],l[Zi],l[_i],l[fa]))return Sl;if(l[_i]+1<this.min(l[rl],l[Eo],l[Zi],l[Sl],l[fa]))return _i;if(l[Eo]+1<this.min(l[fa],l[rl],l[Zi],l[Sl])){if(l[Eo]<l[_i])return Eo;if(l[Eo]===l[_i]){for(var A=r+s+1;A<e.length;){var h=e.charCodeAt(A);if(this.isX12TermSep(h))return _i;if(!this.isNativeX12(h))break;A++}return Eo}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,ki.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=_n.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),kB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fV=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return ku.encode(e,this.charset)!=null}catch{return!1}},t}(),O5e=function(){function t(e,r,n){var a,s,i,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new fV(d5e.forName(S))}),this.encoders=[];var d=[];d.push(new fV(A5e.ISO_8859_1));for(var A=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var f=!1;try{for(var m=(a=void 0,kB(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){f=!0;break}}}catch(S){a={error:S}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!f)try{for(var b=(i=void 0,kB(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),f=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(i)throw i.error}}f||(A=!0)}if(d.length===1&&!A)this.encoders=[d[0]];else{this.encoders=[];var I=0;try{for(var T=kB(d),C=T.next();!C.done;C=T.next()){var g=C.value;this.encoders[I++]=g}}catch(S){c={error:S}}finally{try{C&&!C.done&&(u=T.return)&&u.call(T)}finally{if(c)throw c.error}}}var E=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return ku.encode(Un.getCharAt(e),this.encoders[r].name)},t}(),D5e=3,R5e=function(){function t(e,r,n){this.fnc1=n;var a=new O5e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new yn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===i||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===i||r.canEncode(l,d))&&this.addEdge(n,a+1,new hV(l,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new hV[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var l=0;l<r.length();l++)s[i][l]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][l],n);for(var l=0;l<r.length();l++)s[i-1][l]=null}for(var c=-1,u=_n.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var A=[],h=s[a][c];h!=null;){if(h.isFNC1())A.unshift(1e3);else for(var f=r.encode(h.c,h.encoderIndex),i=f.length-1;i>=0;i--)A.unshift(f[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&A.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=A[i];return p},t}(),hV=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(i+=D5e),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),M5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var mV;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(mV||(mV={}));(function(t){M5e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=i,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(R5e);var L5e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),pV=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),U5e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),Q5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P6=function(t){Q5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+_n.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(U5e),V5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H5e=function(t){V5e(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(P6);function $5e(t,e,r){return new H5e(t,e,r)}function M1(t,e,r){return new P6(t,e,r)}var K5e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],x0=0,zE=1,Bu=2,cte=3,sA=4,G5e=new P6(null,0,0),FB=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],q5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function z5e(t){var e,r;try{for(var n=q5e(t),a=n.next();!a.done;a=n.next()){var s=a.value;ki.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[x0][sA]=0,t[zE][sA]=0,t[zE][x0]=28,t[cte][sA]=0,t[Bu][sA]=0,t[Bu][x0]=15,t}var ute=z5e(ki.createInt32Array(6,6)),W5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X5e=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=FB[this.mode][e];a=M1(a,s&65535,s>>16),n+=s>>16}var i=e===Bu?4:5;return a=M1(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Bu?4:5;return n=M1(n,ute[this.mode][e],a),n=M1(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===sA||this.mode===Bu){var s=FB[n][x0];r=M1(r,s&65535,s>>16),a+=s>>16,n=x0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+i);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=$5e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(FB[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new io;try{for(var l=W5e(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return Un.format("%s bits=%d bytes=%d",K5e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(G5e,x0,0,0),t}();function Y5e(t){var e=Un.getCharCode(" "),r=Un.getCharCode("."),n=Un.getCharCode(",");t[x0][e]=1;for(var a=Un.getCharCode("Z"),s=Un.getCharCode("A"),i=s;i<=a;i++)t[x0][i]=i-s+2;t[zE][e]=1;for(var l=Un.getCharCode("z"),c=Un.getCharCode("a"),i=c;i<=l;i++)t[zE][i]=i-c+2;t[Bu][e]=1;for(var u=Un.getCharCode("9"),d=Un.getCharCode("0"),i=d;i<=u;i++)t[Bu][i]=i-d+2;t[Bu][n]=12,t[Bu][r]=13;for(var A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<A.length;h++)t[cte][Un.getCharCode(A[h])]=h;for(var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<f.length;h++)Un.getCharCode(f[h])>0&&(t[sA][Un.getCharCode(f[h])]=h);return t}var OB=Y5e(ki.createInt32Array(5,256)),l_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J5e=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Un.getCharCode(" "),r=Un.getCharCode(`
`),n=pV.singletonList(X5e.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Un.getCharCode("\r"):s=i===r?2:0;break;case Un.getCharCode("."):s=i===e?3:0;break;case Un.getCharCode(","):s=i===e?4:0;break;case Un.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=pV.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=l_(e),l=i.next();!l.done;l=i.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=OB[e.getMode()][a]>0,i=null,l=0;l<=sA;l++){var c=OB[l][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||l===e.getMode()||l===Bu){var u=i.latchAndAppend(l,c);n.push(u)}if(!s&&ute[e.getMode()][l]>=0){var d=i.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||OB[e.getMode()][a]===0){var A=e.addBinaryShiftChar(r);n.push(A)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var l=l_(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(sA,n)),e.getMode()!==sA&&a.push(s.shiftAndAppend(sA,n)),n===3||n===4){var i=s.latchAndAppend(Bu,16-n).latchAndAppend(Bu,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var l=l_(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,A=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,l_(i)),f=h.next();!f.done;f=h.next()){var m=f.value,p=A(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t}(),Z5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new J5e(e).encode(),s=_n.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,l,c,u,d,A;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new zr(Un.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var h=u-u%d;if(A=t.stuffBits(a,d),A.getSize()+s>h)throw new zr("Data to large for user specified layer");if(l&&A.getSize()>d*64)throw new zr("Data to large for user specified layer")}else{d=0,A=null;for(var f=0;;f++){if(f>t.MAX_NB_BITS)throw new zr("Data too large for an Aztec code");if(l=f<=3,c=l?f+1:f,u=t.totalBitsInLayer(c,l),!(i>u)){(A==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],A=t.stuffBits(a,d));var h=u-u%d;if(!(l&&A.getSize()>d*64)&&A.getSize()+s<=h)break}}}var m=t.generateCheckWords(A,u,d),p=A.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var f=0;f<y.length;f++)y[f]=f}else{b=x+1+2*_n.truncDivision(_n.truncDivision(x,2)-1,15);for(var w=_n.truncDivision(x,2),I=_n.truncDivision(b,2),f=0;f<w;f++){var T=f+_n.truncDivision(f,15);y[w-f-1]=I-T-1,y[w+f]=I+T+1}}for(var C=new hA(b),f=0,E=0;f<c;f++){for(var S=(c-f)*4+(l?9:12),O=0;O<S;O++)for(var B=O*2,P=0;P<2;P++)m.get(E+B+P)&&C.set(y[f*2+P],y[f*2+O]),m.get(E+S*2+B+P)&&C.set(y[f*2+O],y[x-1-f*2-P]),m.get(E+S*4+B+P)&&C.set(y[x-1-f*2-P],y[x-1-f*2-O]),m.get(E+S*6+B+P)&&C.set(y[x-1-f*2-O],y[f*2+P]);E+=S*8}if(t.drawModeMessage(C,l,b,g),l)t.drawBullsEye(C,_n.truncDivision(b,2),5);else{t.drawBullsEye(C,_n.truncDivision(b,2),7);for(var f=0,O=0;f<_n.truncDivision(x,2)-1;f+=15,O+=16)for(var P=_n.truncDivision(b,2)&1;P<b;P+=2)C.set(_n.truncDivision(b,2)-O,P),C.set(_n.truncDivision(b,2)+O,P),C.set(P,_n.truncDivision(b,2)-O),C.set(P,_n.truncDivision(b,2)+O)}var D=new L5e;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(C),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new io;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=_n.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var l=s-3+i;a.get(i)&&e.set(l,s-5),a.get(i+7)&&e.set(s+5,l),a.get(20-i)&&e.set(l,s+5),a.get(27-i)&&e.set(s-5,l)}else for(var i=0;i<10;i++){var l=s-5+i+_n.truncDivision(i,5);a.get(i)&&e.set(l,s-7),a.get(i+10)&&e.set(s+7,l),a.get(29-i)&&e.set(l,s+7),a.get(39-i)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,l=new ote(t.getGF(n)),c=_n.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-i);var d=r%n,A=new io;A.appendBits(0,d);try{for(var h=Z5e(Array.from(u)),f=h.next();!f.done;f=h.next()){var m=f.value;A.appendBits(m,n)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return A},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return nc.AZTEC_PARAM;case 6:return nc.AZTEC_DATA_6;case 8:return nc.AZTEC_DATA_8;case 10:return nc.AZTEC_DATA_10;case 12:return nc.AZTEC_DATA_12;default:throw new zr("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new io,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var l=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),i--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var eBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tBe=function(t){eBe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,l=0,c=r.length;i<c;i+=4,l++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var A=r[i],h=r[i+1],f=r[i+2];u=306*A+601*h+117*f+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new zr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new c4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Xb);function dte(){return typeof navigator<"u"}function rBe(){return dte()&&!!navigator.mediaDevices}function nBe(){return!!(rBe()&&navigator.mediaDevices.enumerateDevices)}var mx=function(){return mx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},mx.apply(this,arguments)},vs=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(A){i(A)}}function c(d){try{u(n.throw(d))}catch(A){i(A)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},ys=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},DB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aBe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Pv=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=mx(mx({},aBe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Va.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return vs(this,void 0,void 0,function(){return ys(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=DB(a),i=s.next();!i.done;i=s.next()){var l=i.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ys("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ys("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new tBe(e),n=new Wee(r);return new zee(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Ys("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return vs(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,A,h;return ys(this,function(f){switch(f.label){case 0:if(!dte())throw new Error("Can't enumerate devices, navigator is not present.");if(!nBe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),r=[];try{for(n=DB(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){A={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(A)throw A.error}}return[2,r]}})})},t.findDeviceById=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return vs(this,void 0,void 0,function(){var n;return ys(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var l=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),vs(this,void 0,void 0,function(){var a;return ys(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Ys("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:if(!e)throw new Ys("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:if(!e)throw new Ys("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return vs(this,void 0,void 0,function(){var a,s;return ys(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return vs(this,void 0,void 0,function(){var a,s,i,l,c,u,d,A,h,f=this;return ys(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,i),c=e.getVideoTracks(),u=mx(mx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return vs(this,void 0,void 0,function(){var x,y,b,w,I,T,C;return ys(this,function(E){switch(E.label){case 0:x=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),y=DB(x),b=y.next(),E.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:E.sent(),E.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return I=E.sent(),T={error:I},[3,8];case 7:try{b&&!b.done&&(C=y.return)&&C.call(y)}finally{if(T)throw T.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(A=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return vs(f,void 0,void 0,function(){return ys(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(A,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return vs(f,void 0,void 0,function(){return ys(this,function(p){switch(p.label){case 0:return l.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return vs(this,void 0,void 0,function(){var a,s;return ys(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return vs(this,void 0,void 0,function(){var n,a;return ys(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ys("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return vs(this,void 0,void 0,function(){var n,a,s,i;return ys(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ys("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return vs(this,void 0,void 0,function(){var n;return ys(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return vs(this,void 0,void 0,function(){var n,a,s;return ys(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return vs(this,void 0,void 0,function(){var n,a;return ys(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return vs(this,void 0,void 0,function(){var r,n;return ys(this,function(a){switch(a.label){case 0:if(!e)throw new Ys("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return vs(this,void 0,void 0,function(){var r,n;return ys(this,function(a){switch(a.label){case 0:if(!e)throw new Ys("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,l){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof Mt&&r||u instanceof fi&&n||u instanceof pr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},A={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var f=a.decodeFromCanvas(s);r(f,void 0,A),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,A);var m=x instanceof fi,p=x instanceof pr,g=x instanceof Mt;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return h(),A},t.prototype._decodeOnLoadImage=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return vs(this,void 0,void 0,function(){var r;return ys(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),sBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){sBe(e,t);function e(r,n){return t.call(this,new HE,r,n)||this}return e})(Pv);var iBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){iBe(e,t);function e(r,n){return t.call(this,new fx(r),r,n)||this}return e})(Pv);var oBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){oBe(e,t);function e(r,n){return t.call(this,new KE,r,n)||this}return e})(Pv);var lBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wj=function(t){lBe(e,t);function e(r,n){var a=this,s=new ite;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Va.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Pv),cBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){cBe(e,t);function e(r,n){return t.call(this,new qE,r,n)||this}return e})(Pv);var uBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){uBe(e,t);function e(r,n){return t.call(this,new GE,r,n)||this}return e})(Pv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var WE={};WE.version="0.18.5";var Ate=1252,dBe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],j6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},k6=function(t){dBe.indexOf(t)!=-1&&(Ate=j6[0]=t)};function ABe(){k6(1252)}var fd=function(t){k6(t)};function F6(){fd(1200),ABe()}function gV(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function fBe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function fte(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var my=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?fBe(t.slice(2)):e==254&&r==255?fte(t.slice(2)):e==65279?t.slice(1):t},c_=function(e){return String.fromCharCode(e)},xV=function(e){return String.fromCharCode(e)},K2,Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function G2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=Zh.charAt(s)+Zh.charAt(i)+Zh.charAt(l)+Zh.charAt(c);return e}function Gc(t){var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Zh.indexOf(t.charAt(u++)),i=Zh.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),l=Zh.indexOf(t.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=Zh.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var bn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Lf=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function P0(t){return bn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function vV(t){return bn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Fc=function(e){return bn?Lf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function A4(t){if(typeof ArrayBuffer>"u")return Fc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function q0(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function hBe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function O6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return O6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var so=bn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Lf(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function mBe(t){for(var e=[],r=0,n=t.length+250,a=P0(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=P0(65535),n=65530)}return e.push(a.slice(0,r)),so(e)}var Ll=/\u0000/g,py=/[\u0001-\u0006]/g;function Tx(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function hd(t,e){var r=""+t;return r.length>=e?r:Ms("0",e-r.length)+r}function D6(t,e){var r=""+t;return r.length>=e?r:Ms(" ",e-r.length)+r}function XE(t,e){var r=""+t;return r.length>=e?r:r+Ms(" ",e-r.length)}function pBe(t,e){var r=""+Math.round(t);return r.length>=e?r:Ms("0",e-r.length)+r}function gBe(t,e){var r=""+t;return r.length>=e?r:Ms("0",e-r.length)+r}var yV=Math.pow(2,32);function Pg(t,e){if(t>yV||t<-yV)return pBe(t,e);var r=Math.round(t);return gBe(r,e)}function YE(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var bV=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],RB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function xBe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},wV={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},vBe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function JE(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,l=0,c=1,u=0,d=0,A=Math.floor(a);u<e&&(A=Math.floor(a),l=A*i+s,d=A*u+c,!(a-A<5e-8));)a=1/(a-A),s=i,i=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Rm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=CBe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var hte=new Date(1899,11,31,0,0,0),yBe=hte.getTime(),bBe=new Date(1900,2,1,0,0,0);function mte(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=bBe&&(r+=24*60*60*1e3),(r-(yBe+(t.getTimezoneOffset()-hte.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function R6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function wBe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function NBe(t){var e=t<0?12:11,r=R6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function _Be(t){var e=R6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function q2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=NBe(t):e===10?r=t.toFixed(10).substr(0,12):r=_Be(t),R6(wBe(r.toUpperCase()))}function wp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):q2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Mu(14,mte(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function CBe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function EBe(t,e,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return RB[r.m-1][1];case 5:return RB[r.m-1][0];default:return RB[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return bV[r.q][0];default:return bV[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?hd(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=hd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?hd(c,u):"";return d}function e0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var pte=/%/g;function SBe(t,e,r){var n=e.replace(pte,""),a=e.length-n.length;return ff(t,n,r*Math.pow(10,2*a))+Ms("%",a)}function IBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ff(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function gte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+gte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var xte=/# (\?+)( ?)\/( ?)(\d+)/;function BBe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Ms(" ",t[1].length+1+t[4].length):D6(i,t[1].length)+t[2]+"/"+t[3]+hd(l,t[4].length))}function TBe(t,e,r){return r+(e===0?"":""+e)+Ms(" ",t[1].length+2+t[4].length)}var vte=/^#*0*\.([0#]+)/,yte=/\).*[0#]/,bte=/\(###\) ###\\?-####/;function Pl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function NV(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function _V(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function PBe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function jBe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function fu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(yte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fu("n",n,r):"("+fu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return IBe(t,e,r);if(e.indexOf("%")!==-1)return SBe(t,e,r);if(e.indexOf("E")!==-1)return gte(e,r);if(e.charCodeAt(0)===36)return"$"+fu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Pg(c,e.length);if(e.match(/^[#?]+$/))return a=Pg(r,0),a==="0"&&(a=""),a.length>e.length?a:Pl(e.substr(0,e.length-a.length))+a;if(s=e.match(xte))return BBe(s,c,u);if(e.match(/^#+0+$/))return u+Pg(c,e.length-e.indexOf("0"));if(s=e.match(vte))return a=NV(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Pl(s[1])).replace(/\.$/,"."+Pl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ms("0",Pl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+NV(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+e0(Pg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fu(t,e,-r):e0(""+(Math.floor(r)+PBe(r,s[1].length)))+"."+hd(_V(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return fu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Tx(fu(t,e.replace(/[\\-]/g,""),r)),i=0,Tx(Tx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(bte))return a=fu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=JE(c,Math.pow(10,i)-1,!1),a=""+u,d=ff("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=XE(l[2],i),d.length<s[4].length&&(d=Pl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=JE(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?D6(l[1],i)+s[2]+"/"+s[3]+XE(l[2],i):Ms(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Pg(r,0),e.length<=a.length?a:Pl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=e.indexOf(".")-i,h=e.length-a.length-A;return Pl(e.substr(0,A)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=_V(r,s[1].length),r<0?"-"+fu(t,e,-r):e0(jBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?hd(0,3-m.length):"")+m})+"."+hd(i,s[1].length);switch(e){case"###,##0.00":return fu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=e0(Pg(c,0));return f!=="0"?u+f:"";case"###,###.00":return fu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function kBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return ff(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function FBe(t,e,r){var n=e.replace(pte,""),a=e.length-n.length;return ff(t,n,r*Math.pow(10,2*a))+Ms("%",a)}function wte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+wte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Yd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(yte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yd("n",n,r):"("+Yd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return kBe(t,e,r);if(e.indexOf("%")!==-1)return FBe(t,e,r);if(e.indexOf("E")!==-1)return wte(e,r);if(e.charCodeAt(0)===36)return"$"+Yd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+hd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Pl(e.substr(0,e.length-a.length))+a;if(s=e.match(xte))return TBe(s,c,u);if(e.match(/^#+0+$/))return u+hd(c,e.length-e.indexOf("0"));if(s=e.match(vte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Pl(s[1])).replace(/\.$/,"."+Pl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Ms("0",Pl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+e0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yd(t,e,-r):e0(""+r)+"."+Ms("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Yd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Tx(Yd(t,e.replace(/[\\-]/g,""),r)),i=0,Tx(Tx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(bte))return a=Yd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=JE(c,Math.pow(10,i)-1,!1),a=""+u,d=ff("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=XE(l[2],i),d.length<s[4].length&&(d=Pl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=JE(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?D6(l[1],i)+s[2]+"/"+s[3]+XE(l[2],i):Ms(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Pl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var A=e.indexOf(".")-i,h=e.length-a.length-A;return Pl(e.substr(0,A)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Yd(t,e,-r):e0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?hd(0,3-m.length):"")+m})+"."+hd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=e0(""+c);return f!=="0"?u+f:"";default:if(e.match(/\.[0#?]*$/))return Yd(t,e.slice(0,e.lastIndexOf(".")),r)+Pl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ff(t,e,r){return(r|0)===r?Yd(t,e,r):fu(t,e,r)}function OBe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Nte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function jv(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":YE(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Nte))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function DBe(t,e,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,A,h="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!YE(t,i))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(A=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(A);a[a.length]={t:"t",v:s},++i;break;case"\\":var f=t.charAt(++i),m=f==="("||f===")"?f:"t";a[a.length]={t:m,v:f},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=Rm(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Rm(e,r),u==null))return"";for(s=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=Rm(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Nte)){if(u==null&&(u=Rm(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",jv(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<t.length&&(l=t.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=EBe(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=wp(e,r);break}var I="",T,C;if(b.length>0){b.charCodeAt(0)==40?(T=e<0&&b.charCodeAt(0)===45?-e:e,C=ff("n",b,T)):(T=e<0&&n>1?-e:e,C=ff("n",b,T),T<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),w=C.length-1;var E=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){E=i;break}var S=a.length;if(E===a.length&&C.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=C.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=C.substr(0,w+1),w=-1),a[i].t="t",S=i);w>=0&&S<a.length&&(a[S].v=C.substr(0,w+1)+a[S].v)}else if(E!==a.length&&C.indexOf("E")===-1){for(w=C.indexOf(".")-1,i=E;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")-1:a[i].v.length-1,I=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(I=C.charAt(w--)+I);a[i].v=I,a[i].t="t",S=i}for(w>=0&&S<a.length&&(a[S].v=C.substr(0,w+1)+a[S].v),w=C.indexOf(".")+1,i=E;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==E)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")+1:0,I=a[i].v.substr(0,d);d<a[i].v.length;++d)w<C.length&&(I+=C.charAt(w++));a[i].v=I,a[i].t="t",S=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(T=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=ff(a[i].t,a[i].v,T),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var CV=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function EV(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function RBe(t,e){var r=OBe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(CV),l=r[1].match(CV);return EV(e,i)?[n,r[0]]:EV(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function Mu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Yr)[t],n==null&&(n=r.table&&r.table[wV[t]]||Yr[wV[t]]),n==null&&(n=vBe[t]||"General");break}if(YE(n,0))return wp(e,r);e instanceof Date&&(e=mte(e,r.date1904));var a=RBe(n,e);if(YE(a[1]))return wp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return DBe(a[1],e,r,a[0])}function hf(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Yr[r]==null){e<0&&(e=r);continue}if(Yr[r]==t){e=r;break}}e<0&&(e=391)}return Yr[e]=t,e}function f4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&hf(t[e],e)}function kv(){Yr=xBe()}var MBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_te=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function LBe(t){var e=typeof t=="number"?Yr[t]:t;return e=e.replace(_te,"(\\d+)"),new RegExp("^"+e+"$")}function UBe(t,e,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(e.match(_te)||[]).forEach(function(A,h){var f=parseInt(r[h+1],10);switch(A.toLowerCase().charAt(0)){case"y":n=f;break;case"d":s=f;break;case"h":i=f;break;case"s":c=f;break;case"m":i>=0?l=f:a=f;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var QBe=function(){var t={};t.version="1.2.0";function e(){for(var C=0,E=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,E[S]=C;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(C){var E=0,S=0,O=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)B[O]=C[O];for(O=0;O!=256;++O)for(S=C[O],E=256+O;E<4096;E+=256)S=B[E]=S>>>8^C[S&255];var P=[];for(O=1;O!=16;++O)P[O-1]=typeof Int32Array<"u"?B.subarray(O*256,O*256+256):B.slice(O*256,O*256+256);return P}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],A=a[6],h=a[7],f=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(C,E){for(var S=E^-1,O=0,B=C.length;O<B;)S=S>>>8^r[(S^C.charCodeAt(O++))&255];return~S}function I(C,E){for(var S=E^-1,O=C.length-15,B=0;B<O;)S=b[C[B++]^S&255]^y[C[B++]^S>>8&255]^x[C[B++]^S>>16&255]^g[C[B++]^S>>>24]^p[C[B++]]^m[C[B++]]^f[C[B++]]^h[C[B++]]^A[C[B++]]^d[C[B++]]^u[C[B++]]^c[C[B++]]^l[C[B++]]^i[C[B++]]^s[C[B++]]^r[C[B++]];for(O+=15;B<O;)S=S>>>8^r[(S^C[B++])&255];return~S}function T(C,E){for(var S=E^-1,O=0,B=C.length,P=0,D=0;O<B;)P=C.charCodeAt(O++),P<128?S=S>>>8^r[(S^P)&255]:P<2048?(S=S>>>8^r[(S^(192|P>>6&31))&255],S=S>>>8^r[(S^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,D=C.charCodeAt(O++)&1023,S=S>>>8^r[(S^(240|P>>8&7))&255],S=S>>>8^r[(S^(128|P>>2&63))&255],S=S>>>8^r[(S^(128|D>>6&15|(P&3)<<4))&255],S=S>>>8^r[(S^(128|D&63))&255]):(S=S>>>8^r[(S^(224|P>>12&15))&255],S=S>>>8^r[(S^(128|P>>6&63))&255],S=S>>>8^r[(S^(128|P&63))&255]);return~S}return t.table=r,t.bstr=w,t.buf=I,t.str=T,t}(),Gr=function(){var e={};e.version="1.2.1";function r(ne,ae){for(var me=ne.split("/"),ue=ae.split("/"),Be=0,Oe=0,We=Math.min(me.length,ue.length);Be<We;++Be){if(Oe=me[Be].length-ue[Be].length)return Oe;if(me[Be]!=ue[Be])return me[Be]<ue[Be]?-1:1}return me.length-ue.length}function n(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:n(ne.slice(0,-1));var ae=ne.lastIndexOf("/");return ae===-1?ne:ne.slice(0,ae+1)}function a(ne){if(ne.charAt(ne.length-1)=="/")return a(ne.slice(0,-1));var ae=ne.lastIndexOf("/");return ae===-1?ne:ne.slice(ae+1)}function s(ne,ae){typeof ae=="string"&&(ae=new Date(ae));var me=ae.getHours();me=me<<6|ae.getMinutes(),me=me<<5|ae.getSeconds()>>>1,ne.write_shift(2,me);var ue=ae.getFullYear()-1980;ue=ue<<4|ae.getMonth()+1,ue=ue<<5|ae.getDate(),ne.write_shift(2,ue)}function i(ne){var ae=ne.read_shift(2)&65535,me=ne.read_shift(2)&65535,ue=new Date,Be=me&31;me>>>=5;var Oe=me&15;me>>>=4,ue.setMilliseconds(0),ue.setFullYear(me+1980),ue.setMonth(Oe-1),ue.setDate(Be);var We=ae&31;ae>>>=5;var it=ae&63;return ae>>>=6,ue.setHours(ae),ue.setMinutes(it),ue.setSeconds(We<<1),ue}function l(ne){Fo(ne,0);for(var ae={},me=0;ne.l<=ne.length-4;){var ue=ne.read_shift(2),Be=ne.read_shift(2),Oe=ne.l+Be,We={};switch(ue){case 21589:me=ne.read_shift(1),me&1&&(We.mtime=ne.read_shift(4)),Be>5&&(me&2&&(We.atime=ne.read_shift(4)),me&4&&(We.ctime=ne.read_shift(4))),We.mtime&&(We.mt=new Date(We.mtime*1e3));break}ne.l=Oe,ae[ue]=We}return ae}var c;function u(){return c||(c={})}function d(ne,ae){if(ne[0]==80&&ne[1]==75)return Ne(ne,ae);if((ne[0]|32)==109&&(ne[1]|32)==105)return be(ne,ae);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var me=3,ue=512,Be=0,Oe=0,We=0,it=0,gt=0,xt=[],_t=ne.slice(0,512);Fo(_t,0);var Ce=A(_t);switch(me=Ce[0],me){case 3:ue=512;break;case 4:ue=4096;break;case 0:if(Ce[1]==0)return Ne(ne,ae);default:throw new Error("Major Version: Expected 3 or 4 saw "+me)}ue!==512&&(_t=ne.slice(0,ue),Fo(_t,28));var at=ne.slice(0,ue);h(_t,me);var wt=_t.read_shift(4,"i");if(me===3&&wt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+wt);_t.l+=4,We=_t.read_shift(4,"i"),_t.l+=4,_t.chk("00100000","Mini Stream Cutoff Size: "),it=_t.read_shift(4,"i"),Be=_t.read_shift(4,"i"),gt=_t.read_shift(4,"i"),Oe=_t.read_shift(4,"i");for(var ht=-1,Je=0;Je<109&&(ht=_t.read_shift(4,"i"),!(ht<0));++Je)xt[Je]=ht;var zt=f(ne,ue);g(gt,Oe,zt,ue,xt);var Zt=y(zt,We,xt,ue);Zt[We].name="!Directory",Be>0&&it!==D&&(Zt[it].name="!MiniFAT"),Zt[xt[0]].name="!FAT",Zt.fat_addrs=xt,Zt.ssz=ue;var Ft={},Vt=[],nr=[],Ht=[];b(We,Zt,zt,Vt,Be,Ft,nr,it),m(nr,Ht,Vt),Vt.shift();var Nr={FileIndex:nr,FullPaths:Ht};return ae&&ae.raw&&(Nr.raw={header:at,sectors:zt}),Nr}function A(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(X,"Header Signature: "),ne.l+=16;var ae=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),ae]}function h(ne,ae){var me=9;switch(ne.l+=2,me=ne.read_shift(2)){case 9:if(ae!=3)throw new Error("Sector Shift: Expected 9 saw "+me);break;case 12:if(ae!=4)throw new Error("Sector Shift: Expected 12 saw "+me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+me)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function f(ne,ae){for(var me=Math.ceil(ne.length/ae)-1,ue=[],Be=1;Be<me;++Be)ue[Be-1]=ne.slice(Be*ae,(Be+1)*ae);return ue[me-1]=ne.slice(me*ae),ue}function m(ne,ae,me){for(var ue=0,Be=0,Oe=0,We=0,it=0,gt=me.length,xt=[],_t=[];ue<gt;++ue)xt[ue]=_t[ue]=ue,ae[ue]=me[ue];for(;it<_t.length;++it)ue=_t[it],Be=ne[ue].L,Oe=ne[ue].R,We=ne[ue].C,xt[ue]===ue&&(Be!==-1&&xt[Be]!==Be&&(xt[ue]=xt[Be]),Oe!==-1&&xt[Oe]!==Oe&&(xt[ue]=xt[Oe])),We!==-1&&(xt[We]=ue),Be!==-1&&ue!=xt[ue]&&(xt[Be]=xt[ue],_t.lastIndexOf(Be)<it&&_t.push(Be)),Oe!==-1&&ue!=xt[ue]&&(xt[Oe]=xt[ue],_t.lastIndexOf(Oe)<it&&_t.push(Oe));for(ue=1;ue<gt;++ue)xt[ue]===ue&&(Oe!==-1&&xt[Oe]!==Oe?xt[ue]=xt[Oe]:Be!==-1&&xt[Be]!==Be&&(xt[ue]=xt[Be]));for(ue=1;ue<gt;++ue)if(ne[ue].type!==0){if(it=ue,it!=xt[it])do it=xt[it],ae[ue]=ae[it]+"/"+ae[ue];while(it!==0&&xt[it]!==-1&&it!=xt[it]);xt[ue]=-1}for(ae[0]+="/",ue=1;ue<gt;++ue)ne[ue].type!==2&&(ae[ue]+="/")}function p(ne,ae,me){for(var ue=ne.start,Be=ne.size,Oe=[],We=ue;me&&Be>0&&We>=0;)Oe.push(ae.slice(We*P,We*P+P)),Be-=P,We=Bm(me,We*4);return Oe.length===0?Lt(0):so(Oe).slice(0,ne.size)}function g(ne,ae,me,ue,Be){var Oe=D;if(ne===D){if(ae!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var We=me[ne],it=(ue>>>2)-1;if(!We)return;for(var gt=0;gt<it&&(Oe=Bm(We,gt*4))!==D;++gt)Be.push(Oe);g(Bm(We,ue-4),ae-1,me,ue,Be)}}function x(ne,ae,me,ue,Be){var Oe=[],We=[];Be||(Be=[]);var it=ue-1,gt=0,xt=0;for(gt=ae;gt>=0;){Be[gt]=!0,Oe[Oe.length]=gt,We.push(ne[gt]);var _t=me[Math.floor(gt*4/ue)];if(xt=gt*4&it,ue<4+xt)throw new Error("FAT boundary crossed: "+gt+" 4 "+ue);if(!ne[_t])break;gt=Bm(ne[_t],xt)}return{nodes:Oe,data:MV([We])}}function y(ne,ae,me,ue){var Be=ne.length,Oe=[],We=[],it=[],gt=[],xt=ue-1,_t=0,Ce=0,at=0,wt=0;for(_t=0;_t<Be;++_t)if(it=[],at=_t+ae,at>=Be&&(at-=Be),!We[at]){gt=[];var ht=[];for(Ce=at;Ce>=0;){ht[Ce]=!0,We[Ce]=!0,it[it.length]=Ce,gt.push(ne[Ce]);var Je=me[Math.floor(Ce*4/ue)];if(wt=Ce*4&xt,ue<4+wt)throw new Error("FAT boundary crossed: "+Ce+" 4 "+ue);if(!ne[Je]||(Ce=Bm(ne[Je],wt),ht[Ce]))break}Oe[at]={nodes:it,data:MV([gt])}}return Oe}function b(ne,ae,me,ue,Be,Oe,We,it){for(var gt=0,xt=ue.length?2:0,_t=ae[ne].data,Ce=0,at=0,wt;Ce<_t.length;Ce+=128){var ht=_t.slice(Ce,Ce+128);Fo(ht,64),at=ht.read_shift(2),wt=$6(ht,0,at-xt),ue.push(wt);var Je={name:wt,type:ht.read_shift(1),color:ht.read_shift(1),L:ht.read_shift(4,"i"),R:ht.read_shift(4,"i"),C:ht.read_shift(4,"i"),clsid:ht.read_shift(16),state:ht.read_shift(4,"i"),start:0,size:0},zt=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);zt!==0&&(Je.ct=w(ht,ht.l-8));var Zt=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Zt!==0&&(Je.mt=w(ht,ht.l-8)),Je.start=ht.read_shift(4,"i"),Je.size=ht.read_shift(4,"i"),Je.size<0&&Je.start<0&&(Je.size=Je.type=0,Je.start=D,Je.name=""),Je.type===5?(gt=Je.start,Be>0&&gt!==D&&(ae[gt].name="!StreamData")):Je.size>=4096?(Je.storage="fat",ae[Je.start]===void 0&&(ae[Je.start]=x(me,Je.start,ae.fat_addrs,ae.ssz)),ae[Je.start].name=Je.name,Je.content=ae[Je.start].data.slice(0,Je.size)):(Je.storage="minifat",Je.size<0?Je.size=0:gt!==D&&Je.start!==D&&ae[gt]&&(Je.content=p(Je,ae[gt].data,(ae[it]||{}).data))),Je.content&&Fo(Je.content,0),Oe[wt]=Je,We.push(Je)}}function w(ne,ae){return new Date((kc(ne,ae+4)/1e7*Math.pow(2,32)+kc(ne,ae)/1e7-11644473600)*1e3)}function I(ne,ae){return u(),d(c.readFileSync(ne),ae)}function T(ne,ae){var me=ae&&ae.type;switch(me||bn&&Buffer.isBuffer(ne)&&(me="buffer"),me||"base64"){case"file":return I(ne,ae);case"base64":return d(Fc(Gc(ne)),ae);case"binary":return d(Fc(ne),ae)}return d(ne,ae)}function C(ne,ae){var me=ae||{},ue=me.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=ue+"/",ne.FileIndex[0]={name:ue,type:5}),me.CLSID&&(ne.FileIndex[0].clsid=me.CLSID),E(ne)}function E(ne){var ae="Sh33tJ5";if(!Gr.find(ne,"/"+ae)){var me=Lt(4);me[0]=55,me[1]=me[3]=50,me[2]=54,ne.FileIndex.push({name:ae,type:2,content:me,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+ae),S(ne)}}function S(ne,ae){C(ne);for(var me=!1,ue=!1,Be=ne.FullPaths.length-1;Be>=0;--Be){var Oe=ne.FileIndex[Be];switch(Oe.type){case 0:ue?me=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:ue=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(me=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(me=!0);break;default:me=!0;break}}if(!(!me&&!ae)){var We=new Date(1987,1,19),it=0,gt=Object.create?Object.create(null):{},xt=[];for(Be=0;Be<ne.FullPaths.length;++Be)gt[ne.FullPaths[Be]]=!0,ne.FileIndex[Be].type!==0&&xt.push([ne.FullPaths[Be],ne.FileIndex[Be]]);for(Be=0;Be<xt.length;++Be){var _t=n(xt[Be][0]);ue=gt[_t],ue||(xt.push([_t,{name:a(_t).replace("/",""),type:1,clsid:re,ct:We,mt:We,content:null}]),gt[_t]=!0)}for(xt.sort(function(wt,ht){return r(wt[0],ht[0])}),ne.FullPaths=[],ne.FileIndex=[],Be=0;Be<xt.length;++Be)ne.FullPaths[Be]=xt[Be][0],ne.FileIndex[Be]=xt[Be][1];for(Be=0;Be<xt.length;++Be){var Ce=ne.FileIndex[Be],at=ne.FullPaths[Be];if(Ce.name=a(at).replace("/",""),Ce.L=Ce.R=Ce.C=-(Ce.color=1),Ce.size=Ce.content?Ce.content.length:0,Ce.start=0,Ce.clsid=Ce.clsid||re,Be===0)Ce.C=xt.length>1?1:-1,Ce.size=0,Ce.type=5;else if(at.slice(-1)=="/"){for(it=Be+1;it<xt.length&&n(ne.FullPaths[it])!=at;++it);for(Ce.C=it>=xt.length?-1:it,it=Be+1;it<xt.length&&n(ne.FullPaths[it])!=n(at);++it);Ce.R=it>=xt.length?-1:it,Ce.type=1}else n(ne.FullPaths[Be+1]||"")==n(at)&&(Ce.R=Be+1),Ce.type=2}}}function O(ne,ae){var me=ae||{};if(me.fileType=="mad")return Ge(ne,me);switch(S(ne),me.fileType){case"zip":return ze(ne,me)}var ue=function(wt){for(var ht=0,Je=0,zt=0;zt<wt.FileIndex.length;++zt){var Zt=wt.FileIndex[zt];if(Zt.content){var Ft=Zt.content.length;Ft>0&&(Ft<4096?ht+=Ft+63>>6:Je+=Ft+511>>9)}}for(var Vt=wt.FullPaths.length+3>>2,nr=ht+7>>3,Ht=ht+127>>7,Nr=nr+Je+Vt+Ht,Or=Nr+127>>7,Fn=Or<=109?0:Math.ceil((Or-109)/127);Nr+Or+Fn+127>>7>Or;)Fn=++Or<=109?0:Math.ceil((Or-109)/127);var vn=[1,Fn,Or,Ht,Vt,Je,ht,0];return wt.FileIndex[0].size=ht<<6,vn[7]=(wt.FileIndex[0].start=vn[0]+vn[1]+vn[2]+vn[3]+vn[4]+vn[5])+(vn[6]+7>>3),vn}(ne),Be=Lt(ue[7]<<9),Oe=0,We=0;{for(Oe=0;Oe<8;++Oe)Be.write_shift(1,de[Oe]);for(Oe=0;Oe<8;++Oe)Be.write_shift(2,0);for(Be.write_shift(2,62),Be.write_shift(2,3),Be.write_shift(2,65534),Be.write_shift(2,9),Be.write_shift(2,6),Oe=0;Oe<3;++Oe)Be.write_shift(2,0);for(Be.write_shift(4,0),Be.write_shift(4,ue[2]),Be.write_shift(4,ue[0]+ue[1]+ue[2]+ue[3]-1),Be.write_shift(4,0),Be.write_shift(4,4096),Be.write_shift(4,ue[3]?ue[0]+ue[1]+ue[2]-1:D),Be.write_shift(4,ue[3]),Be.write_shift(-4,ue[1]?ue[0]-1:D),Be.write_shift(4,ue[1]),Oe=0;Oe<109;++Oe)Be.write_shift(-4,Oe<ue[2]?ue[1]+Oe:-1)}if(ue[1])for(We=0;We<ue[1];++We){for(;Oe<236+We*127;++Oe)Be.write_shift(-4,Oe<ue[2]?ue[1]+Oe:-1);Be.write_shift(-4,We===ue[1]-1?D:We+1)}var it=function(wt){for(We+=wt;Oe<We-1;++Oe)Be.write_shift(-4,Oe+1);wt&&(++Oe,Be.write_shift(-4,D))};for(We=Oe=0,We+=ue[1];Oe<We;++Oe)Be.write_shift(-4,ie.DIFSECT);for(We+=ue[2];Oe<We;++Oe)Be.write_shift(-4,ie.FATSECT);it(ue[3]),it(ue[4]);for(var gt=0,xt=0,_t=ne.FileIndex[0];gt<ne.FileIndex.length;++gt)_t=ne.FileIndex[gt],_t.content&&(xt=_t.content.length,!(xt<4096)&&(_t.start=We,it(xt+511>>9)));for(it(ue[6]+7>>3);Be.l&511;)Be.write_shift(-4,ie.ENDOFCHAIN);for(We=Oe=0,gt=0;gt<ne.FileIndex.length;++gt)_t=ne.FileIndex[gt],_t.content&&(xt=_t.content.length,!(!xt||xt>=4096)&&(_t.start=We,it(xt+63>>6)));for(;Be.l&511;)Be.write_shift(-4,ie.ENDOFCHAIN);for(Oe=0;Oe<ue[4]<<2;++Oe){var Ce=ne.FullPaths[Oe];if(!Ce||Ce.length===0){for(gt=0;gt<17;++gt)Be.write_shift(4,0);for(gt=0;gt<3;++gt)Be.write_shift(4,-1);for(gt=0;gt<12;++gt)Be.write_shift(4,0);continue}_t=ne.FileIndex[Oe],Oe===0&&(_t.start=_t.size?_t.start-1:D);var at=Oe===0&&me.root||_t.name;if(xt=2*(at.length+1),Be.write_shift(64,at,"utf16le"),Be.write_shift(2,xt),Be.write_shift(1,_t.type),Be.write_shift(1,_t.color),Be.write_shift(-4,_t.L),Be.write_shift(-4,_t.R),Be.write_shift(-4,_t.C),_t.clsid)Be.write_shift(16,_t.clsid,"hex");else for(gt=0;gt<4;++gt)Be.write_shift(4,0);Be.write_shift(4,_t.state||0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,_t.start),Be.write_shift(4,_t.size),Be.write_shift(4,0)}for(Oe=1;Oe<ne.FileIndex.length;++Oe)if(_t=ne.FileIndex[Oe],_t.size>=4096)if(Be.l=_t.start+1<<9,bn&&Buffer.isBuffer(_t.content))_t.content.copy(Be,Be.l,0,_t.size),Be.l+=_t.size+511&-512;else{for(gt=0;gt<_t.size;++gt)Be.write_shift(1,_t.content[gt]);for(;gt&511;++gt)Be.write_shift(1,0)}for(Oe=1;Oe<ne.FileIndex.length;++Oe)if(_t=ne.FileIndex[Oe],_t.size>0&&_t.size<4096)if(bn&&Buffer.isBuffer(_t.content))_t.content.copy(Be,Be.l,0,_t.size),Be.l+=_t.size+63&-64;else{for(gt=0;gt<_t.size;++gt)Be.write_shift(1,_t.content[gt]);for(;gt&63;++gt)Be.write_shift(1,0)}if(bn)Be.l=Be.length;else for(;Be.l<Be.length;)Be.write_shift(1,0);return Be}function B(ne,ae){var me=ne.FullPaths.map(function(gt){return gt.toUpperCase()}),ue=me.map(function(gt){var xt=gt.split("/");return xt[xt.length-(gt.slice(-1)=="/"?2:1)]}),Be=!1;ae.charCodeAt(0)===47?(Be=!0,ae=me[0].slice(0,-1)+ae):Be=ae.indexOf("/")!==-1;var Oe=ae.toUpperCase(),We=Be===!0?me.indexOf(Oe):ue.indexOf(Oe);if(We!==-1)return ne.FileIndex[We];var it=!Oe.match(py);for(Oe=Oe.replace(Ll,""),it&&(Oe=Oe.replace(py,"!")),We=0;We<me.length;++We)if((it?me[We].replace(py,"!"):me[We]).replace(Ll,"")==Oe||(it?ue[We].replace(py,"!"):ue[We]).replace(Ll,"")==Oe)return ne.FileIndex[We];return null}var P=64,D=-2,X="d0cf11e0a1b11ae1",de=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",ie={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(ne,ae,me){u();var ue=O(ne,me);c.writeFileSync(ae,ue)}function J(ne){for(var ae=new Array(ne.length),me=0;me<ne.length;++me)ae[me]=String.fromCharCode(ne[me]);return ae.join("")}function pe(ne,ae){var me=O(ne,ae);switch(ae&&ae.type||"buffer"){case"file":return u(),c.writeFileSync(ae.filename,me),me;case"binary":return typeof me=="string"?me:J(me);case"base64":return G2(typeof me=="string"?me:J(me));case"buffer":if(bn)return Buffer.isBuffer(me)?me:Lf(me);case"array":return typeof me=="string"?Fc(me):me}return me}var Se;function k(ne){try{var ae=ne.InflateRaw,me=new ae;if(me._processChunk(new Uint8Array([3,0]),me._finishFlushFlag),me.bytesRead)Se=ne;else throw new Error("zlib does not expose bytesRead")}catch(ue){console.error("cannot use native zlib: "+(ue.message||ue))}}function F(ne,ae){if(!Se)return V(ne,ae);var me=Se.InflateRaw,ue=new me,Be=ue._processChunk(ne.slice(ne.l),ue._finishFlushFlag);return ne.l+=ue.bytesRead,Be}function H(ne){return Se?Se.deflateRawSync(ne):he(ne)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function R(ne){var ae=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(ae>>16|ae>>8|ae)&255}for(var G=typeof Uint8Array<"u",ee=G?new Uint8Array(256):[],te=0;te<256;++te)ee[te]=R(te);function Q(ne,ae){var me=ee[ne&255];return ae<=8?me>>>8-ae:(me=me<<8|ee[ne>>8&255],ae<=16?me>>>16-ae:(me=me<<8|ee[ne>>16&255],me>>>24-ae))}function xe(ne,ae){var me=ae&7,ue=ae>>>3;return(ne[ue]|(me<=6?0:ne[ue+1]<<8))>>>me&3}function Y(ne,ae){var me=ae&7,ue=ae>>>3;return(ne[ue]|(me<=5?0:ne[ue+1]<<8))>>>me&7}function W(ne,ae){var me=ae&7,ue=ae>>>3;return(ne[ue]|(me<=4?0:ne[ue+1]<<8))>>>me&15}function le(ne,ae){var me=ae&7,ue=ae>>>3;return(ne[ue]|(me<=3?0:ne[ue+1]<<8))>>>me&31}function Pe(ne,ae){var me=ae&7,ue=ae>>>3;return(ne[ue]|(me<=1?0:ne[ue+1]<<8))>>>me&127}function Le(ne,ae,me){var ue=ae&7,Be=ae>>>3,Oe=(1<<me)-1,We=ne[Be]>>>ue;return me<8-ue||(We|=ne[Be+1]<<8-ue,me<16-ue)||(We|=ne[Be+2]<<16-ue,me<24-ue)||(We|=ne[Be+3]<<24-ue),We&Oe}function qe(ne,ae,me){var ue=ae&7,Be=ae>>>3;return ue<=5?ne[Be]|=(me&7)<<ue:(ne[Be]|=me<<ue&255,ne[Be+1]=(me&7)>>8-ue),ae+3}function nt(ne,ae,me){var ue=ae&7,Be=ae>>>3;return me=(me&1)<<ue,ne[Be]|=me,ae+1}function st(ne,ae,me){var ue=ae&7,Be=ae>>>3;return me<<=ue,ne[Be]|=me&255,me>>>=8,ne[Be+1]=me,ae+8}function Et(ne,ae,me){var ue=ae&7,Be=ae>>>3;return me<<=ue,ne[Be]|=me&255,me>>>=8,ne[Be+1]=me&255,ne[Be+2]=me>>>8,ae+16}function yt(ne,ae){var me=ne.length,ue=2*me>ae?2*me:ae+5,Be=0;if(me>=ae)return ne;if(bn){var Oe=vV(ue);if(ne.copy)ne.copy(Oe);else for(;Be<ne.length;++Be)Oe[Be]=ne[Be];return Oe}else if(G){var We=new Uint8Array(ue);if(We.set)We.set(ne);else for(;Be<me;++Be)We[Be]=ne[Be];return We}return ne.length=ue,ne}function Ct(ne){for(var ae=new Array(ne),me=0;me<ne;++me)ae[me]=0;return ae}function Ot(ne,ae,me){var ue=1,Be=0,Oe=0,We=0,it=0,gt=ne.length,xt=G?new Uint16Array(32):Ct(32);for(Oe=0;Oe<32;++Oe)xt[Oe]=0;for(Oe=gt;Oe<me;++Oe)ne[Oe]=0;gt=ne.length;var _t=G?new Uint16Array(gt):Ct(gt);for(Oe=0;Oe<gt;++Oe)xt[Be=ne[Oe]]++,ue<Be&&(ue=Be),_t[Oe]=0;for(xt[0]=0,Oe=1;Oe<=ue;++Oe)xt[Oe+16]=it=it+xt[Oe-1]<<1;for(Oe=0;Oe<gt;++Oe)it=ne[Oe],it!=0&&(_t[Oe]=xt[it+16]++);var Ce=0;for(Oe=0;Oe<gt;++Oe)if(Ce=ne[Oe],Ce!=0)for(it=Q(_t[Oe],ue)>>ue-Ce,We=(1<<ue+4-Ce)-1;We>=0;--We)ae[it|We<<Ce]=Ce&15|Oe<<4;return ue}var Pt=G?new Uint16Array(512):Ct(512),fe=G?new Uint16Array(32):Ct(32);if(!G){for(var Ke=0;Ke<512;++Ke)Pt[Ke]=0;for(Ke=0;Ke<32;++Ke)fe[Ke]=0}(function(){for(var ne=[],ae=0;ae<32;ae++)ne.push(5);Ot(ne,fe,32);var me=[];for(ae=0;ae<=143;ae++)me.push(8);for(;ae<=255;ae++)me.push(9);for(;ae<=279;ae++)me.push(7);for(;ae<=287;ae++)me.push(8);Ot(me,Pt,288)})();var ve=function(){for(var ae=G?new Uint8Array(32768):[],me=0,ue=0;me<z.length-1;++me)for(;ue<z[me+1];++ue)ae[ue]=me;for(;ue<32768;++ue)ae[ue]=29;var Be=G?new Uint8Array(259):[];for(me=0,ue=0;me<L.length-1;++me)for(;ue<L[me+1];++ue)Be[ue]=me;function Oe(it,gt){for(var xt=0;xt<it.length;){var _t=Math.min(65535,it.length-xt),Ce=xt+_t==it.length;for(gt.write_shift(1,+Ce),gt.write_shift(2,_t),gt.write_shift(2,~_t&65535);_t-- >0;)gt[gt.l++]=it[xt++]}return gt.l}function We(it,gt){for(var xt=0,_t=0,Ce=G?new Uint16Array(32768):[];_t<it.length;){var at=Math.min(65535,it.length-_t);if(at<10){for(xt=qe(gt,xt,+(_t+at==it.length)),xt&7&&(xt+=8-(xt&7)),gt.l=xt/8|0,gt.write_shift(2,at),gt.write_shift(2,~at&65535);at-- >0;)gt[gt.l++]=it[_t++];xt=gt.l*8;continue}xt=qe(gt,xt,+(_t+at==it.length)+2);for(var wt=0;at-- >0;){var ht=it[_t];wt=(wt<<5^ht)&32767;var Je=-1,zt=0;if((Je=Ce[wt])&&(Je|=_t&-32768,Je>_t&&(Je-=32768),Je<_t))for(;it[Je+zt]==it[_t+zt]&&zt<250;)++zt;if(zt>2){ht=Be[zt],ht<=22?xt=st(gt,xt,ee[ht+1]>>1)-1:(st(gt,xt,3),xt+=5,st(gt,xt,ee[ht-23]>>5),xt+=3);var Zt=ht<8?0:ht-4>>2;Zt>0&&(Et(gt,xt,zt-L[ht]),xt+=Zt),ht=ae[_t-Je],xt=st(gt,xt,ee[ht]>>3),xt-=3;var Ft=ht<4?0:ht-2>>1;Ft>0&&(Et(gt,xt,_t-Je-z[ht]),xt+=Ft);for(var Vt=0;Vt<zt;++Vt)Ce[wt]=_t&32767,wt=(wt<<5^it[_t])&32767,++_t;at-=zt-1}else ht<=143?ht=ht+48:xt=nt(gt,xt,1),xt=st(gt,xt,ee[ht]),Ce[wt]=_t&32767,++_t}xt=st(gt,xt,0)-1}return gt.l=(xt+7)/8|0,gt.l}return function(gt,xt){return gt.length<8?Oe(gt,xt):We(gt,xt)}}();function he(ne){var ae=Lt(50+Math.floor(ne.length*1.1)),me=ve(ne,ae);return ae.slice(0,me)}var oe=G?new Uint16Array(32768):Ct(32768),je=G?new Uint16Array(32768):Ct(32768),Qe=G?new Uint16Array(128):Ct(128),tt=1,rt=1;function Te(ne,ae){var me=le(ne,ae)+257;ae+=5;var ue=le(ne,ae)+1;ae+=5;var Be=W(ne,ae)+4;ae+=4;for(var Oe=0,We=G?new Uint8Array(19):Ct(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],gt=1,xt=G?new Uint8Array(8):Ct(8),_t=G?new Uint8Array(8):Ct(8),Ce=We.length,at=0;at<Be;++at)We[M[at]]=Oe=Y(ne,ae),gt<Oe&&(gt=Oe),xt[Oe]++,ae+=3;var wt=0;for(xt[0]=0,at=1;at<=gt;++at)_t[at]=wt=wt+xt[at-1]<<1;for(at=0;at<Ce;++at)(wt=We[at])!=0&&(it[at]=_t[wt]++);var ht=0;for(at=0;at<Ce;++at)if(ht=We[at],ht!=0){wt=ee[it[at]]>>8-ht;for(var Je=(1<<7-ht)-1;Je>=0;--Je)Qe[wt|Je<<ht]=ht&7|at<<3}var zt=[];for(gt=1;zt.length<me+ue;)switch(wt=Qe[Pe(ne,ae)],ae+=wt&7,wt>>>=3){case 16:for(Oe=3+xe(ne,ae),ae+=2,wt=zt[zt.length-1];Oe-- >0;)zt.push(wt);break;case 17:for(Oe=3+Y(ne,ae),ae+=3;Oe-- >0;)zt.push(0);break;case 18:for(Oe=11+Pe(ne,ae),ae+=7;Oe-- >0;)zt.push(0);break;default:zt.push(wt),gt<wt&&(gt=wt);break}var Zt=zt.slice(0,me),Ft=zt.slice(me);for(at=me;at<286;++at)Zt[at]=0;for(at=ue;at<30;++at)Ft[at]=0;return tt=Ot(Zt,oe,286),rt=Ot(Ft,je,30),ae}function Ee(ne,ae){if(ne[0]==3&&!(ne[1]&3))return[P0(ae),2];for(var me=0,ue=0,Be=vV(ae||1<<18),Oe=0,We=Be.length>>>0,it=0,gt=0;!(ue&1);){if(ue=Y(ne,me),me+=3,ue>>>1)ue>>1==1?(it=9,gt=5):(me=Te(ne,me),it=tt,gt=rt);else{me&7&&(me+=8-(me&7));var xt=ne[me>>>3]|ne[(me>>>3)+1]<<8;if(me+=32,xt>0)for(!ae&&We<Oe+xt&&(Be=yt(Be,Oe+xt),We=Be.length);xt-- >0;)Be[Oe++]=ne[me>>>3],me+=8;continue}for(;;){!ae&&We<Oe+32767&&(Be=yt(Be,Oe+32767),We=Be.length);var _t=Le(ne,me,it),Ce=ue>>>1==1?Pt[_t]:oe[_t];if(me+=Ce&15,Ce>>>=4,!(Ce>>>8&255))Be[Oe++]=Ce;else{if(Ce==256)break;Ce-=257;var at=Ce<8?0:Ce-4>>2;at>5&&(at=0);var wt=Oe+L[Ce];at>0&&(wt+=Le(ne,me,at),me+=at),_t=Le(ne,me,gt),Ce=ue>>>1==1?fe[_t]:je[_t],me+=Ce&15,Ce>>>=4;var ht=Ce<4?0:Ce-2>>1,Je=z[Ce];for(ht>0&&(Je+=Le(ne,me,ht),me+=ht),!ae&&We<wt&&(Be=yt(Be,wt+100),We=Be.length);Oe<wt;)Be[Oe]=Be[Oe-Je],++Oe}}}return ae?[Be,me+7>>>3]:[Be.slice(0,Oe),me+7>>>3]}function V(ne,ae){var me=ne.slice(ne.l||0),ue=Ee(me,ae);return ne.l+=ue[1],ue[0]}function Ae(ne,ae){if(ne)typeof console<"u"&&console.error(ae);else throw new Error(ae)}function Ne(ne,ae){var me=ne;Fo(me,0);var ue=[],Be=[],Oe={FileIndex:ue,FullPaths:Be};C(Oe,{root:ae.root});for(var We=me.length-4;(me[We]!=80||me[We+1]!=75||me[We+2]!=5||me[We+3]!=6)&&We>=0;)--We;me.l=We+4,me.l+=4;var it=me.read_shift(2);me.l+=6;var gt=me.read_shift(4);for(me.l=gt,We=0;We<it;++We){me.l+=20;var xt=me.read_shift(4),_t=me.read_shift(4),Ce=me.read_shift(2),at=me.read_shift(2),wt=me.read_shift(2);me.l+=8;var ht=me.read_shift(4),Je=l(me.slice(me.l+Ce,me.l+Ce+at));me.l+=Ce+at+wt;var zt=me.l;me.l=ht+4,Re(me,xt,_t,Oe,Je),me.l=zt}return Oe}function Re(ne,ae,me,ue,Be){ne.l+=2;var Oe=ne.read_shift(2),We=ne.read_shift(2),it=i(ne);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var gt=ne.read_shift(4),xt=ne.read_shift(4),_t=ne.read_shift(4),Ce=ne.read_shift(2),at=ne.read_shift(2),wt="",ht=0;ht<Ce;++ht)wt+=String.fromCharCode(ne[ne.l++]);if(at){var Je=l(ne.slice(ne.l,ne.l+at));(Je[21589]||{}).mt&&(it=Je[21589].mt),((Be||{})[21589]||{}).mt&&(it=Be[21589].mt)}ne.l+=at;var zt=ne.slice(ne.l,ne.l+xt);switch(We){case 8:zt=F(ne,_t);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+We)}var Zt=!1;Oe&8&&(gt=ne.read_shift(4),gt==134695760&&(gt=ne.read_shift(4),Zt=!0),xt=ne.read_shift(4),_t=ne.read_shift(4)),xt!=ae&&Ae(Zt,"Bad compressed size: "+ae+" != "+xt),_t!=me&&Ae(Zt,"Bad uncompressed size: "+me+" != "+_t),bt(ue,wt,zt,{unsafe:!0,mt:it})}function ze(ne,ae){var me=ae||{},ue=[],Be=[],Oe=Lt(1),We=me.compression?8:0,it=0,gt=0,xt=0,_t=0,Ce=0,at=ne.FullPaths[0],wt=at,ht=ne.FileIndex[0],Je=[],zt=0;for(gt=1;gt<ne.FullPaths.length;++gt)if(wt=ne.FullPaths[gt].slice(at.length),ht=ne.FileIndex[gt],!(!ht.size||!ht.content||wt=="Sh33tJ5")){var Zt=_t,Ft=Lt(wt.length);for(xt=0;xt<wt.length;++xt)Ft.write_shift(1,wt.charCodeAt(xt)&127);Ft=Ft.slice(0,Ft.l),Je[Ce]=QBe.buf(ht.content,0);var Vt=ht.content;We==8&&(Vt=H(Vt)),Oe=Lt(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,it),Oe.write_shift(2,We),ht.mt?s(Oe,ht.mt):Oe.write_shift(4,0),Oe.write_shift(-4,Je[Ce]),Oe.write_shift(4,Vt.length),Oe.write_shift(4,ht.content.length),Oe.write_shift(2,Ft.length),Oe.write_shift(2,0),_t+=Oe.length,ue.push(Oe),_t+=Ft.length,ue.push(Ft),_t+=Vt.length,ue.push(Vt),Oe=Lt(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,it),Oe.write_shift(2,We),Oe.write_shift(4,0),Oe.write_shift(-4,Je[Ce]),Oe.write_shift(4,Vt.length),Oe.write_shift(4,ht.content.length),Oe.write_shift(2,Ft.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,Zt),zt+=Oe.l,Be.push(Oe),zt+=Ft.length,Be.push(Ft),++Ce}return Oe=Lt(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,Ce),Oe.write_shift(2,Ce),Oe.write_shift(4,zt),Oe.write_shift(4,_t),Oe.write_shift(2,0),so([so(ue),so(Be),Oe])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ze(ne,ae){if(ne.ctype)return ne.ctype;var me=ne.name||"",ue=me.match(/\.([^\.]+)$/);return ue&&Ye[ue[1]]||ae&&(ue=(me=ae).match(/[\.\\]([^\.\\])+$/),ue&&Ye[ue[1]])?Ye[ue[1]]:"application/octet-stream"}function dt(ne){for(var ae=G2(ne),me=[],ue=0;ue<ae.length;ue+=76)me.push(ae.slice(ue,ue+76));return me.join(`\r
`)+`\r
`}function ge(ne){var ae=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xt){var _t=xt.charCodeAt(0).toString(16).toUpperCase();return"="+(_t.length==1?"0"+_t:_t)});ae=ae.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ae.charAt(0)==`
`&&(ae="=0D"+ae.slice(1)),ae=ae.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var me=[],ue=ae.split(`\r
`),Be=0;Be<ue.length;++Be){var Oe=ue[Be];if(Oe.length==0){me.push("");continue}for(var We=0;We<Oe.length;){var it=76,gt=Oe.slice(We,We+it);gt.charAt(it-1)=="="?it--:gt.charAt(it-2)=="="?it-=2:gt.charAt(it-3)=="="&&(it-=3),gt=Oe.slice(We,We+it),We+=it,We<Oe.length&&(gt+="="),me.push(gt)}}return me.join(`\r
`)}function Xe(ne){for(var ae=[],me=0;me<ne.length;++me){for(var ue=ne[me];me<=ne.length&&ue.charAt(ue.length-1)=="=";)ue=ue.slice(0,ue.length-1)+ne[++me];ae.push(ue)}for(var Be=0;Be<ae.length;++Be)ae[Be]=ae[Be].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return Fc(ae.join(`\r
`))}function ot(ne,ae,me){for(var ue="",Be="",Oe="",We,it=0;it<10;++it){var gt=ae[it];if(!gt||gt.match(/^\s*$/))break;var xt=gt.match(/^(.*?):\s*([^\s].*)$/);if(xt)switch(xt[1].toLowerCase()){case"content-location":ue=xt[2].trim();break;case"content-type":Oe=xt[2].trim();break;case"content-transfer-encoding":Be=xt[2].trim();break}}switch(++it,Be.toLowerCase()){case"base64":We=Fc(Gc(ae.slice(it).join("")));break;case"quoted-printable":We=Xe(ae.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Be)}var _t=bt(ne,ue.slice(me.length),We,{unsafe:!0});Oe&&(_t.ctype=Oe)}function be(ne,ae){if(J(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var me=ae&&ae.root||"",ue=(bn&&Buffer.isBuffer(ne)?ne.toString("binary"):J(ne)).split(`\r
`),Be=0,Oe="";for(Be=0;Be<ue.length;++Be)if(Oe=ue[Be],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),me||(me=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,me.length)!=me))for(;me.length>0&&(me=me.slice(0,me.length-1),me=me.slice(0,me.lastIndexOf("/")+1),Oe.slice(0,me.length)!=me););var We=(ue[1]||"").match(/boundary="(.*?)"/);if(!We)throw new Error("MAD cannot find boundary");var it="--"+(We[1]||""),gt=[],xt=[],_t={FileIndex:gt,FullPaths:xt};C(_t);var Ce,at=0;for(Be=0;Be<ue.length;++Be){var wt=ue[Be];wt!==it&&wt!==it+"--"||(at++&&ot(_t,ue.slice(Ce,Be),me),Ce=Be)}return _t}function Ge(ne,ae){var me=ae||{},ue=me.boundary||"SheetJS";ue="------="+ue;for(var Be=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ue.slice(2)+'"',"","",""],Oe=ne.FullPaths[0],We=Oe,it=ne.FileIndex[0],gt=1;gt<ne.FullPaths.length;++gt)if(We=ne.FullPaths[gt].slice(Oe.length),it=ne.FileIndex[gt],!(!it.size||!it.content||We=="Sh33tJ5")){We=We.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(zt){return"_x"+zt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(zt){return"_u"+zt.charCodeAt(0).toString(16)+"_"});for(var xt=it.content,_t=bn&&Buffer.isBuffer(xt)?xt.toString("binary"):J(xt),Ce=0,at=Math.min(1024,_t.length),wt=0,ht=0;ht<=at;++ht)(wt=_t.charCodeAt(ht))>=32&&wt<128&&++Ce;var Je=Ce>=at*4/5;Be.push(ue),Be.push("Content-Location: "+(me.root||"file:///C:/SheetJS/")+We),Be.push("Content-Transfer-Encoding: "+(Je?"quoted-printable":"base64")),Be.push("Content-Type: "+Ze(it,We)),Be.push(""),Be.push(Je?ge(_t):dt(_t))}return Be.push(ue+`--\r
`),Be.join(`\r
`)}function ut(ne){var ae={};return C(ae,ne),ae}function bt(ne,ae,me,ue){var Be=ue&&ue.unsafe;Be||C(ne);var Oe=!Be&&Gr.find(ne,ae);if(!Oe){var We=ne.FullPaths[0];ae.slice(0,We.length)==We?We=ae:(We.slice(-1)!="/"&&(We+="/"),We=(We+ae).replace("//","/")),Oe={name:a(ae),type:2},ne.FileIndex.push(Oe),ne.FullPaths.push(We),Be||Gr.utils.cfb_gc(ne)}return Oe.content=me,Oe.size=me?me.length:0,ue&&(ue.CLSID&&(Oe.clsid=ue.CLSID),ue.mt&&(Oe.mt=ue.mt),ue.ct&&(Oe.ct=ue.ct)),Oe}function Rt(ne,ae){C(ne);var me=Gr.find(ne,ae);if(me){for(var ue=0;ue<ne.FileIndex.length;++ue)if(ne.FileIndex[ue]==me)return ne.FileIndex.splice(ue,1),ne.FullPaths.splice(ue,1),!0}return!1}function Wt(ne,ae,me){C(ne);var ue=Gr.find(ne,ae);if(ue){for(var Be=0;Be<ne.FileIndex.length;++Be)if(ne.FileIndex[Be]==ue)return ne.FileIndex[Be].name=a(me),ne.FullPaths[Be]=me,!0}return!1}function mt(ne){S(ne,!0)}return e.find=B,e.read=T,e.parse=d,e.write=pe,e.writeFile=ce,e.utils={cfb_new:ut,cfb_add:bt,cfb_del:Rt,cfb_mov:Wt,cfb_gc:mt,ReadShift:zy,CheckField:Gte,prep_blob:Fo,bconcat:so,use_zlib:k,_deflateRaw:he,_inflateRaw:V,consts:ie},e}();function VBe(t){return typeof t=="string"?A4(t):Array.isArray(t)?hBe(t):t}function Jb(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=A4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?iA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([VBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=q0(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function HBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Qs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function SV(t,e){for(var r=[],n=Qs(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function h4(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function m4(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function $Be(t){for(var e=[],r=Qs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var ZE=new Date(1899,11,30,0,0,0);function Li(t,e){var r=t.getTime(),n=ZE.getTime()+(t.getTimezoneOffset()-ZE.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Cte=new Date,KBe=ZE.getTime()+(Cte.getTimezoneOffset()-ZE.getTimezoneOffset())*6e4,IV=Cte.getTimezoneOffset();function p4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+KBe),e.getTimezoneOffset()!==IV&&e.setTime(e.getTime()+(e.getTimezoneOffset()-IV)*6e4),e}function GBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var BV=new Date("2017-02-19T19:06:09.000Z"),Ete=isNaN(BV.getFullYear())?new Date("2/19/17"):BV,qBe=Ete.getFullYear()==2017;function es(t,e){var r=new Date(t);if(qBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Ete.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Np(t,e){if(bn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return iA(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return iA(fte(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return iA(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return iA(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ts(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ts(t[r]));return e}function Ms(t,e){for(var r="";r.length<e;)r+=t;return r}function vd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var zBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function tv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&zBe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var WBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function Ste(t){return t?t.content&&t.type?Np(t.content,!0):t.data?my(t.data):t.asNodeBuffer&&bn?my(t.asNodeBuffer().toString("binary")):t.asBinary?my(t.asBinary()):t._data&&t._data.getContent?my(Np(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Ite(t){if(!t)return null;if(t.data)return gV(t.data);if(t.asNodeBuffer&&bn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?gV(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function XBe(t){return t&&t.name.slice(-4)===".bin"?Ite(t):Ste(t)}function yu(t,e){for(var r=t.FullPaths||Qs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function M6(t,e){var r=yu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function li(t,e,r){if(!r)return XBe(M6(t,e));if(!e)return null;try{return li(t,e)}catch{return null}}function Oc(t,e,r){if(!r)return Ste(M6(t,e));if(!e)return null;try{return Oc(t,e)}catch{return null}}function YBe(t,e,r){return Ite(M6(t,e))}function TV(t){for(var e=t.FullPaths||Qs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function pn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return bn?n=Lf(r):n=mBe(r),Gr.utils.cfb_add(t,e,n)}Gr.utils.cfb_add(t,e,r)}else t.file(e,r)}function L6(){return Gr.utils.cfb_new()}function Bte(t,e){switch(e.type){case"base64":return Gr.read(t,{type:"base64"});case"binary":return Gr.read(t,{type:"binary"});case"buffer":case"array":return Gr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function gy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ai=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,JBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,PV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,ZBe=/<[^>]*>/g,gl=ai.match(PV)?PV:ZBe,eTe=/<\w*:/,tTe=/<(\/?)\w+:/;function Zr(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(JBe),l=0,c="",u=0,d="",A="",h=1;if(i)for(u=0;u!=i.length;++u){for(A=i[u],s=0;s!=A.length&&A.charCodeAt(s)!==61;++s);for(d=A.slice(0,s).trim();A.charCodeAt(s+1)==32;)++s;for(h=(a=A.charCodeAt(s+1))==34||a==39?1:0,c=A.slice(s+1+h,A.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var f=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[f]&&d.slice(l-3,l)=="ext")continue;n[f]=c,n[f.toLowerCase()]=c}}return n}function NA(t){return t.replace(tTe,"<$1")}var Tte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},U6=h4(Tte),Gn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Tte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),Q6=/[&<>'"]/g,rTe=/[\u0000-\u0008\u000b-\u001f]/g;function ya(t){var e=t+"";return e.replace(Q6,function(r){return U6[r]}).replace(rTe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function jV(t){return ya(t).replace(/ /g,"_x0020_")}var Pte=/[\u0000-\u001f]/g;function V6(t){var e=t+"";return e.replace(Q6,function(r){return U6[r]}).replace(/\n/g,"<br/>").replace(Pte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function nTe(t){var e=t+"";return e.replace(Q6,function(r){return U6[r]}).replace(Pte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var kV=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function aTe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Xa(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function MB(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function FV(t){var e=P0(2*t.length),r,n,a=1,s=0,i=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function OV(t){return Lf(t,"binary").toString("utf8")}var u_="foo bar baz",Sa=bn&&(OV(u_)==MB(u_)&&OV||FV(u_)==MB(u_)&&FV)||MB,iA=bn?function(t){return Lf(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},z2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),jte=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),sTe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),iTe=/<\/?(?:vt:)?variant>/g,oTe=/<(?:vt:)([^>]*)>([\s\S]*)</;function DV(t,e){var r=Zr(t),n=t.match(sTe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(iTe,"").match(oTe);i&&a.push({v:Sa(i[2]),t:i[1]})}),a}var kte=/(^\s|\s$|\n)/;function Do(t,e){return"<"+t+(e.match(kte)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function W2(t){return Qs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function hr(t,e,r){return"<"+t+(r!=null?W2(r):"")+(e!=null?(e.match(kte)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Xj(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function lTe(t,e){switch(typeof t){case"string":var r=hr("vt:lpwstr",ya(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return hr((t|0)==t?"vt:i4":"vt:r8",ya(String(t)));case"boolean":return hr("vt:bool",t?"true":"false")}if(t instanceof Date)return hr("vt:filetime",Xj(t));throw new Error("Unable to serialize "+t)}function H6(t){if(bn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Sa(q0(O6(t)));throw new Error("Bad input format: expected Buffer or string")}var X2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Fi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],jc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function cTe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function uTe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var RV=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},MV=bn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Lf(e)})):RV(t)}:RV,LV=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(rf(t,a)));return n.join("").replace(Ll,"")},$6=bn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Ll,""):LV(t,e,r)}:LV,UV=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Fte=bn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):UV(t,e,r)}:UV,QV=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(Xg(t,a)));return n.join("")},Zb=bn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):QV(e,r,n)}:QV,Ote=function(t,e){var r=kc(t,e);return r>0?Zb(t,e+4,e+4+r-1):""},Dte=Ote,Rte=function(t,e){var r=kc(t,e);return r>0?Zb(t,e+4,e+4+r-1):""},Mte=Rte,Lte=function(t,e){var r=2*kc(t,e);return r>0?Zb(t,e+4,e+4+r-1):""},Ute=Lte,Qte=function(e,r){var n=kc(e,r);return n>0?$6(e,r+4,r+4+n):""},Vte=Qte,Hte=function(t,e){var r=kc(t,e);return r>0?Zb(t,e+4,e+4+r):""},$te=Hte,Kte=function(t,e){return cTe(t,e)},eS=Kte,K6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};bn&&(Dte=function(e,r){if(!Buffer.isBuffer(e))return Ote(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Mte=function(e,r){if(!Buffer.isBuffer(e))return Rte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Ute=function(e,r){if(!Buffer.isBuffer(e))return Lte(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Vte=function(e,r){if(!Buffer.isBuffer(e))return Qte(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},$te=function(e,r){if(!Buffer.isBuffer(e))return Hte(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},eS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Kte(e,r)},K6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Xg=function(t,e){return t[e]},rf=function(t,e){return t[e+1]*256+t[e]},dTe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},kc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Bm=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},ATe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function zy(t,e){var r="",n,a,s=[],i,l,c,u;switch(e){case"dbcs":if(u=this.l,bn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(rf(this,u)),u+=2;t*=2;break;case"utf8":r=Zb(this,this.l,this.l+t);break;case"utf16le":t*=2,r=$6(this,this.l,this.l+t);break;case"wstr":return zy.call(this,t,"dbcs");case"lpstr-ansi":r=Dte(this,this.l),t=4+kc(this,this.l);break;case"lpstr-cp":r=Mte(this,this.l),t=4+kc(this,this.l);break;case"lpwstr":r=Ute(this,this.l),t=4+2*kc(this,this.l);break;case"lpp4":t=4+kc(this,this.l),r=Vte(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+kc(this,this.l),r=$te(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=Xg(this,this.l+t++))!==0;)s.push(c_(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=rf(this,this.l+t))!==0;)s.push(c_(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Xg(this,u),this.l=u+1,l=zy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(c_(rf(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Xg(this,u),this.l=u+1,l=zy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(c_(Xg(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=Xg(this,this.l),this.l++,n;case 2:return n=(e==="i"?dTe:rf)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Bm:ATe)(this,this.l),this.l+=4,n):(a=kc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=eS(this,this.l):a=eS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Fte(this,this.l,t);break}}return this.l+=t,r}var fTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},hTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},mTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function pTe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)mTe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,fTe(this,e,this.l);break;case 8:if(n=8,r==="f"){uTe(this,e,this.l);break}case 16:break;case-4:n=4,hTe(this,e,this.l);break}return this.l+=n,this}function Gte(t,e){var r=Fte(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Fo(t,e){t.l=e,t.read_shift=zy,t.chk=Gte,t.write_shift=pTe}function ml(t,e){t.l+=e}function Lt(t){var e=P0(t);return Fo(e,0),e}function Uf(t,e,r){if(t){var n,a,s;Fo(t,t.l||0);for(var i=t.length,l=0,c=0;t.l<i;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=rb[l]||rb[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function uc(){var t=[],e=bn?256:2048,r=function(u){var d=Lt(u);return Fo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),so(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:i,_bufs:t}}function Jt(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=rb[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&K6(r)&&t.push(r)}}function Wy(t,e,r){var n=ts(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function VV(t,e,r){var n=ts(t);return n.s=Wy(n.s,e.s,r),n.e=Wy(n.e,e.s,r),n}function Xy(t,e){if(t.cRel&&t.c<0)for(t=ts(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ts(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Jr(t);return!t.cRel&&t.cRel!=null&&(r=vTe(r)),!t.rRel&&t.rRel!=null&&(r=gTe(r)),r}function LB(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+_s(t.s.c)+":"+(t.e.cRel?"":"$")+_s(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ri(t.s.r)+":"+(t.e.rRel?"":"$")+ri(t.e.r):Xy(t.s,e.biff)+":"+Xy(t.e,e.biff)}function G6(t){return parseInt(xTe(t),10)-1}function ri(t){return""+(t+1)}function gTe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function xTe(t){return t.replace(/\$(\d+)$/,"$1")}function q6(t){for(var e=yTe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function _s(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function vTe(t){return t.replace(/^([A-Z])/,"$$$1")}function yTe(t){return t.replace(/^\$([A-Z])/,"$1")}function bTe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Cs(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Jr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function dc(t){var e=t.indexOf(":");return e==-1?{s:Cs(t),e:Cs(t)}:{s:Cs(t.slice(0,e)),e:Cs(t.slice(e+1))}}function fn(t,e){return typeof e>"u"||typeof e=="number"?fn(t.s,t.e):(typeof t!="string"&&(t=Jr(t)),typeof e!="string"&&(e=Jr(e)),t==e?t:t+":"+e)}function qn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function HV(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Mu(t.z,r?Li(e):e)}catch{}try{return t.w=Mu((t.XF||{}).numFmtId||(r?14:0),r?Li(e):e)}catch{return""+e}}function Ef(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Qf[t.v]||t.v:e==null?HV(t,t.v):HV(t,e))}function z0(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function qte(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Cs(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var A=0;A!=e.length;++A)if(e[A]){if(!Array.isArray(e[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[A].length;++h)if(!(typeof e[A][h]>"u")){var f={v:e[A][h]},m=i+A,p=l+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[A][h]&&typeof e[A][h]=="object"&&!Array.isArray(e[A][h])&&!(e[A][h]instanceof Date))f=e[A][h];else if(Array.isArray(f.v)&&(f.f=e[A][h][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else if(n.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=n.dateNF||Yr[14],n.cellDates?(f.t="d",f.w=Mu(f.z,Li(f.v))):(f.t="n",f.v=Li(f.v),f.w=Mu(f.z,f.v))):f.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(f.z=s[m][p].z),s[m][p]=f;else{var g=Jr({c:p,r:m});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return u.s.c<1e7&&(s["!ref"]=fn(u)),s}function Fv(t,e){return qte(null,t,e)}function wTe(t){return t.read_shift(4,"i")}function yd(t,e){return e||(e=Lt(4)),e.write_shift(4,t),e}function Al(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function oo(t,e){var r=!1;return e==null&&(r=!0,e=Lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function NTe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function _Te(t,e){return e||(e=Lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function z6(t,e){var r=t.l,n=t.read_shift(1),a=Al(t),s=[],i={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(NTe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function CTe(t,e){var r=!1;return e==null&&(r=!0,e=Lt(15+4*t.t.length)),e.write_shift(1,0),oo(t.t,e),r?e.slice(0,e.l):e}var ETe=z6;function STe(t,e){var r=!1;return e==null&&(r=!0,e=Lt(23+4*t.t.length)),e.write_shift(1,1),oo(t.t,e),e.write_shift(4,1),_Te({},e),r?e.slice(0,e.l):e}function Vu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function zp(t,e){return e==null&&(e=Lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Wp(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Xp(t,e){return e==null&&(e=Lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var ITe=Al,zte=oo;function W6(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function tS(t,e){var r=!1;return e==null&&(r=!0,e=Lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var BTe=Al,Yj=W6,X6=tS;function Y6(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?eS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Bm(e,0)>>2;return r?a/100:a}function Wte(t,e){e==null&&(e=Lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Xte(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function TTe(t,e){return e||(e=Lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Yp=Xte,Ov=TTe;function ul(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function _p(t,e){return(e||Lt(8)).write_shift(8,t,"f")}function PTe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Ym[a];u&&(e.rgb=J2(u));break;case 2:e.rgb=J2([i,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function rS(t,e){if(e||(e=Lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function jTe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function kTe(t,e){e||(e=Lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Yte(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function FTe(t){return Yte(t,1)}function OTe(t){return Yte(t,2)}var J6=2,Zl=3,d_=11,$V=12,nS=19,A_=64,DTe=65,RTe=71,MTe=4108,LTe=4126,to=80,Jte=81,UTe=[to,Jte],Jj={1:{n:"CodePage",t:J6},2:{n:"Category",t:to},3:{n:"PresentationFormat",t:to},4:{n:"ByteCount",t:Zl},5:{n:"LineCount",t:Zl},6:{n:"ParagraphCount",t:Zl},7:{n:"SlideCount",t:Zl},8:{n:"NoteCount",t:Zl},9:{n:"HiddenCount",t:Zl},10:{n:"MultimediaClipCount",t:Zl},11:{n:"ScaleCrop",t:d_},12:{n:"HeadingPairs",t:MTe},13:{n:"TitlesOfParts",t:LTe},14:{n:"Manager",t:to},15:{n:"Company",t:to},16:{n:"LinksUpToDate",t:d_},17:{n:"CharacterCount",t:Zl},19:{n:"SharedDoc",t:d_},22:{n:"HyperlinksChanged",t:d_},23:{n:"AppVersion",t:Zl,p:"version"},24:{n:"DigSig",t:DTe},26:{n:"ContentType",t:to},27:{n:"ContentStatus",t:to},28:{n:"Language",t:to},29:{n:"Version",t:to},255:{},2147483648:{n:"Locale",t:nS},2147483651:{n:"Behavior",t:nS},1919054434:{}},Zj={1:{n:"CodePage",t:J6},2:{n:"Title",t:to},3:{n:"Subject",t:to},4:{n:"Author",t:to},5:{n:"Keywords",t:to},6:{n:"Comments",t:to},7:{n:"Template",t:to},8:{n:"LastAuthor",t:to},9:{n:"RevNumber",t:to},10:{n:"EditTime",t:A_},11:{n:"LastPrinted",t:A_},12:{n:"CreatedDate",t:A_},13:{n:"ModifiedDate",t:A_},14:{n:"PageCount",t:Zl},15:{n:"WordCount",t:Zl},16:{n:"CharCount",t:Zl},17:{n:"Thumbnail",t:RTe},18:{n:"Application",t:to},19:{n:"DocSecurity",t:Zl},255:{},2147483648:{n:"Locale",t:nS},2147483651:{n:"Behavior",t:nS},1919054434:{}},KV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},QTe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function VTe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var HTe=VTe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ym=ts(HTe),Qf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Zte={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ek={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},f_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Z6(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function $Te(t){var e=Z6();if(!t||!t.match)return e;var r={};if((t.match(gl)||[]).forEach(function(n){var a=Zr(n);switch(a[0].replace(eTe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[ek[a.ContentType]]!==void 0&&e[ek[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Fi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function ere(t,e){var r=$Be(ek),n=[],a;n[n.length]=ai,n[n.length]=hr("Types",null,{xmlns:Fi.CT,"xmlns:xsd":Fi.xsd,"xmlns:xsi":Fi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return hr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=hr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:f_[c][e.bookType]||f_[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:f_[c][e.bookType]||f_[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Y2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Yy(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(gl)||[]).forEach(function(a){var s=Zr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:gy(s.Target,e);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Px(t){var e=[ai,hr("Relationships",null,{xmlns:Fi.RELS})];return Qs(t["!id"]).forEach(function(r){e[e.length]=hr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function pa(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var KTe="application/vnd.oasis.opendocument.spreadsheet";function GTe(t,e){for(var r=H6(t),n,a;n=X2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Zr(n[0],!1),a.path=="/"&&a.type!==KTe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function qTe(t){var e=[ai];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function GV(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function zTe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function WTe(t){var e=[ai];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(GV(t[r][0],t[r][1])),e.push(zTe("",t[r][0]));return e.push(GV("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function tre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+WE.version+"</meta:generator></office:meta></office:document-meta>"}var Fu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],XTe=function(){for(var t=new Array(Fu.length),e=0;e<Fu.length;++e){var r=Fu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function rre(t){var e={};t=Sa(t);for(var r=0;r<Fu.length;++r){var n=Fu[r],a=t.match(XTe[r]);a!=null&&a.length>0&&(e[n[1]]=Gn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=es(e[n[1]]))}return e}function UB(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ya(e),n[n.length]=r?hr(t,e,r):Do(t,e))}function nre(t,e){var r=e||{},n=[ai,hr("cp:coreProperties",null,{"xmlns:cp":Fi.CORE_PROPS,"xmlns:dc":Fi.dc,"xmlns:dcterms":Fi.dcterms,"xmlns:dcmitype":Fi.dcmitype,"xmlns:xsi":Fi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&UB("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Xj(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&UB("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Xj(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Fu.length;++s){var i=Fu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&UB(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Jm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],are=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sre(t,e,r,n){var a=[];if(typeof t=="string")a=DV(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?DV(e,n).map(function(d){return d.v}):e,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function YTe(t,e,r){var n={};return e||(e={}),t=Sa(t),Jm.forEach(function(a){var s=(t.match(z2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=Gn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&sre(n.HeadingPairs,n.TitlesOfParts,e,r),e}function ire(t){var e=[],r=hr;return t||(t={}),t.Application="SheetJS",e[e.length]=ai,e[e.length]=hr("Properties",null,{xmlns:Fi.EXT_PROPS,"xmlns:vt":Fi.vt}),Jm.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ya(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ya(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var JTe=/<[^>]+>[^<]*/g;function ZTe(t,e){var r={},n="",a=t.match(JTe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=Zr(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Gn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Gn(d);break;case"bool":r[n]=Xa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=es(d);break;case"cy":case"error":r[n]=Gn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function ore(t){var e=[ai,hr("Properties",null,{xmlns:Fi.CUST_PROPS,"xmlns:vt":Fi.vt})];if(!t)return e.join("");var r=1;return Qs(t).forEach(function(a){++r,e[e.length]=hr("property",lTe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ya(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var tk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},QB;function ePe(t,e,r){QB||(QB=h4(tk)),e=QB[e]||e,t[e]=r}function tPe(t,e){var r=[];return Qs(tk).map(function(n){for(var a=0;a<Fu.length;++a)if(Fu[a][1]==n)return Fu[a];for(a=0;a<Jm.length;++a)if(Jm[a][1]==n)return Jm[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Do(tk[n[1]]||n[1],a))}}),hr("DocumentProperties",r.join(""),{xmlns:jc.o})}function rPe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Qs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Fu.length;++i)if(s==Fu[i][1])return;for(i=0;i<Jm.length;++i)if(s==Jm[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(hr(jV(s),l,{"dt:dt":c}))}}),e&&Qs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(hr(jV(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+jc.o+'">'+a.join("")+"</"+n+">"}function eD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nPe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function lre(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function cre(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function ure(t,e,r){return e===31?cre(t):lre(t,e,r)}function rk(t,e,r){return ure(t,e,r===!1?0:4)}function aPe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return ure(t,e,0)}function sPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Ll,""),t.l-a&2&&(t.l+=2)}return r}function iPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Ll,"");return r}function oPe(t){var e=t.l,r=aS(t,Jte);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=aS(t,Zl);return[r,n]}function lPe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(oPe(t));return r}function qV(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Ll,"").replace(py,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function dre(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function cPe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function aS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==$V&&n!==e&&UTe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===$V?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return lre(t,n,4).replace(Ll,"");case 31:return cre(t);case 64:return eD(t);case 65:return dre(t);case 71:return cPe(t);case 80:return rk(t,n,!s.raw).replace(Ll,"");case 81:return aPe(t,n).replace(Ll,"");case 4108:return lPe(t);case 4126:case 4127:return n==4127?sPe(t):iPe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function zV(t,e){var r=Lt(4),n=Lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=nPe(e);break;case 31:case 80:for(n=Lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return so([r,n])}function WV(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),A=t.read_shift(4);s[i]=[d,A+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var f=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,f=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],f=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],f=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(f=!1,t.l=s[i][1]),f)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=aS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:fd(l=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(l=h.CodePage=aS(t,J6),fd(l),c!==-1){var p=t.l;t.l=s[c][1],u=qV(t,l),t.l=p}}else if(s[i][0]===0){if(l===0){c=i,t.l=s[i+1][1];continue}u=qV(t,l)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=dre(t);break;case 30:t.l+=4,x=rk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=rk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=zs(t,4);break;case 64:t.l+=4,x=es(eD(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var Are=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function uPe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function XV(t,e,r){var n=Lt(8),a=[],s=[],i=8,l=0,c=Lt(8),u=Lt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=Lt(8),u.write_shift(4,0),a.unshift(u);var d=[Lt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var A=t[l][0];for(c=Lt(8+2*(A.length+1)+(A.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,A.length+1),c.write_shift(0,A,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=so(d),s.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Are.indexOf(t[l][0])>-1||are.indexOf(t[l][0])>-1)&&t[l][1]!=null){var h=t[l][1],f=0;if(e){f=+e[t[l][0]];var m=r[f];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=zV(m.t,h)}else{var g=uPe(h);g==-1&&(g=31,h=String(h)),c=zV(g,h)}s.push(c),u=Lt(8),u.write_shift(4,e?f:2+l),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),so([n].concat(a).concat(s))}function YV(t,e,r){var n=t.content;if(!n)return{};Fo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Gr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var A=WV(n,e),h={SystemIdentifier:u};for(var f in A)h[f]=A[f];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=WV(n,null)}catch{}for(f in m)h[f]=m[f];return h.FMTID=[s,i],h}function JV(t,e,r,n,a,s){var i=Lt(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Gr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=XV(t,r,n);if(l.push(c),a){var u=XV(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return so(l)}function _h(t,e){return t.read_shift(e),null}function dPe(t,e){e||(e=Lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function APe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function zs(t,e){return t.read_shift(e)===1}function jl(t,e){return e||(e=Lt(2)),e.write_shift(2,+!!t),e}function ci(t){return t.read_shift(2,"u")}function bu(t,e){return e||(e=Lt(2)),e.write_shift(2,t),e}function fre(t,e){return APe(t,e,ci)}function fPe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function hre(t,e,r){return r||(r=Lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function ew(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function hPe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function mPe(t){var e=t.t||"",r=Lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return so(a)}function Cp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function tw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Cp(t,n,r)}function Jp(t,e,r){if(r.biff>5)return tw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function mre(t,e,r){return r||(r=Lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function pPe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function gPe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Ll,"");return n&&(t.l+=24),a}function xPe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Ll,"");return r+i}function vPe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return gPe(t);case"0303000000000000c000000000000046":return xPe(t);default:throw new Error("Unsupported Moniker "+r)}}function h_(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Ll,""):"";return r}function ZV(t,e){e||(e=Lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function yPe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,l,c,u="",d,A;a&16&&(s=h_(t,r-t.l)),a&128&&(i=h_(t,r-t.l)),(a&257)===257&&(l=h_(t,r-t.l)),(a&257)===1&&(c=vPe(t,r-t.l)),a&8&&(u=h_(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(A=eD(t)),t.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var f={Target:h};return d&&(f.guid=d),A&&(f.time=A),s&&(f.Tooltip=s),f}function bPe(t){var e=Lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),ZV(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&ZV(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function pre(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function gre(t,e){var r=pre(t);return r[3]=0,r}function _A(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Ep(t,e,r,n){return n||(n=Lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function wPe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function NPe(t,e,r){return e===0?"":Jp(t,e,r)}function _Pe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function xre(t){var e=t.read_shift(2),r=Y6(t);return[e,r]}function CPe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=ew(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function g4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function vre(t,e){return e||(e=Lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function yre(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var EPe=yre;function bre(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function SPe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function IPe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Zo(t){t.l+=2,t.l+=t.read_shift(2)}var BPe={0:Zo,4:Zo,5:Zo,6:Zo,7:IPe,8:Zo,9:Zo,10:Zo,11:Zo,12:Zo,13:SPe,14:Zo,15:Zo,16:Zo,17:Zo,18:Zo,19:Zo,20:Zo,21:bre};function TPe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(BPe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function m_(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function tD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function PPe(t,e){return e===0||t.read_shift(2),1200}function jPe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Jp(t,0,r);return t.read_shift(e+n-t.l),a}function kPe(t,e){var r=!e||e.biff==8,n=Lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function FPe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function OPe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=ew(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function DPe(t,e){var r=!e||e.biff>=8?2:1,n=Lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function RPe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(hPe(t));return s.Count=n,s.Unique=a,s}function MPe(t,e){var r=Lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=mPe(t[a]);var s=so([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function LPe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function UPe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function QPe(t){var e=wPe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function VPe(t){return t.read_shift(2),t.read_shift(4)}function eH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function HPe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function $Pe(){var t=Lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function KPe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function GPe(t){var e=Lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function qPe(){}function zPe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=ew(t,0,r),n}function WPe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function XPe(t){var e=_A(t);return e.isst=t.read_shift(4),e}function YPe(t,e,r,n){var a=Lt(10);return Ep(t,e,n,a),a.write_shift(4,r),a}function JPe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=_A(t);r.biff==2&&t.l++;var s=tw(t,n-t.l,r);return a.val=s,a}function ZPe(t,e,r,n,a){var s=!a||a.biff==8,i=Lt(8+ +s+(1+s)*r.length);return Ep(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function eje(t,e,r){var n=t.read_shift(2),a=Jp(t,0,r);return[n,a]}function tje(t,e,r,n){var a=r&&r.biff==5;n||(n=Lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var rje=Jp;function tH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:i,c}}}function nje(t,e){var r=e.biff==8||!e.biff?4:2,n=Lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function aje(t){var e=t.read_shift(2),r=t.read_shift(2),n=xre(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function sje(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(xre(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function ije(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function oje(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=QTe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function lje(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=oje(t,e,n.fStyle,r),n}function rH(t,e,r,n){var a=r&&r.biff==5;n||(n=Lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function cje(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function uje(t){var e=Lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function nH(t,e,r){var n=_A(t);(r.biff==2||e==9)&&++t.l;var a=fPe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function dje(t,e,r,n,a,s){var i=Lt(8);return Ep(t,e,n,i),hre(r,s,i),i}function Aje(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=_A(t),a=ul(t);return n.val=a,n}function fje(t,e,r,n){var a=Lt(14);return Ep(t,e,n,a),_p(r,a),a}var aH=NPe;function hje(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Cp(t,s),l=[];n>t.l;)l.push(tw(t));return[s,a,i,l]}function sH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=CPe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var mje=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function iH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Cp(t,i,r);a&32&&(u=mje[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var A=n==t.l||l===0||!(d>0)?[]:T6e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:A}}function wre(t,e,r){if(r.biff<8)return pje(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(_Pe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function pje(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=ew(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function gje(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Cp(t,n,r),i=Cp(t,a,r);return[s,i]}function xje(t,e,r){var n=yre(t);t.l++;var a=t.read_shift(1);return e-=8,[P6e(t,e,r),a,n]}function oH(t,e,r){var n=EPe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,I6e(t,e,r)]}function vje(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function yje(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=Jp(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,i,s]}}function bje(t,e,r){return yje(t,e,r)}function wje(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(g4(t));return r}function Nje(t){var e=Lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)vre(t[r],e);return e}function _je(t,e,r){if(r&&r.biff<8)return Eje(t,e,r);var n=bre(t),a=TPe(t,e-22,n[1]);return{cmo:n,ft:a}}var Cje={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function Eje(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Cje[n]||ml)(t,e,r)),{cmo:[a,n,s],ft:i}}function Sje(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=pPe(t,6,r);var l=t.read_shift(2);t.read_shift(2),ci(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],A=Cp(t,t.lens[u+1]-t.lens[u]-1);if(a+=A,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function Ije(t,e){var r=g4(t);t.l+=16;var n=yPe(t,e-24);return[r,n]}function Bje(t){var e=Lt(24),r=Cs(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return so([e,bPe(t[1])])}function Tje(t,e){t.read_shift(2);var r=g4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Ll,""),[r,n]}function Pje(t){var e=t[1].Tooltip,r=Lt(10+2*(e.length+1));r.write_shift(2,2048);var n=Cs(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function jje(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=KV[r]||r,r=t.read_shift(2),e[1]=KV[r]||r,e}function kje(t){return t||(t=Lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Fje(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(gre(t));return r}function Oje(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(gre(t));return r}function Dje(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Nre(t,e,r){if(!r.cellStyles)return ml(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Rje(t,e){var r=Lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Mje(t,e){var r={};return e<32||(t.l+=16,r.header=ul(t),r.footer=ul(t),t.l+=2),r}function Lje(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function Uje(t){for(var e=Lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var Qje=_A,Vje=fre,Hje=tw;function $je(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function Kje(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=_A(t);++t.l;var a=Jp(t,e-7,r);return n.t="str",n.val=a,n}function Gje(t){var e=_A(t);++t.l;var r=ul(t);return e.t="n",e.val=r,e}function qje(t,e,r){var n=Lt(15);return sw(n,t,e),n.write_shift(8,r,"f"),n}function zje(t){var e=_A(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function Wje(t,e,r){var n=Lt(9);return sw(n,t,e),n.write_shift(2,r),n}function Xje(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Yje(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Jje(t,e,r){var n=t.l+e,a=_A(t),s=t.read_shift(2),i=Cp(t,s,r);return t.l=n,a.t="str",a.val=i,a}var Zje=[2,3,48,49,131,139,140,245],nk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=h4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=P0(1);switch(c.type){case"base64":d=Fc(Gc(l));break;case"binary":d=Fc(l);break;case"buffer":case"array":d=l;break}Fo(d,0);var A=d.read_shift(1),h=!!(A&136),f=!1,m=!1;switch(A){case 2:break;case 3:break;case 48:f=!0,h=!0;break;case 49:f=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var p=0,g=521;A==2&&(p=d.read_shift(2)),d.l+=3,A!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),A!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;A!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},I=Math.min(d.length,A==2?521:g-10-(f?264:0)),T=m?32:11;d.l<I&&d[d.l]!=13;)switch(w={},w.name=K2.utils.decode(y,d.slice(d.l,d.l+T)).replace(/[\u0000\r\n].*$/g,""),d.l+=T,w.type=String.fromCharCode(d.read_shift(1)),A!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),A==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),A!=2&&(d.l+=m?13:14),w.type){case"B":(!f||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var C=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++C]=[],E=0,E=0;E!=b.length;++E){var S=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,Fo(S,0);var O=K2.utils.decode(y,S);switch(b[E].type){case"C":O.trim().length&&(u[C][E]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[C][E]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[C][E]=O;break;case"F":u[C][E]=parseFloat(O.trim());break;case"+":case"I":u[C][E]=m?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[C][E]=!0;break;case"N":case"F":u[C][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));u[C][E]="##MEMO##"+(m?parseInt(O.trim(),10):S.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[C][E]=+O||0);break;case"@":u[C][E]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":u[C][E]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":u[C][E]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][E]=-S.read_shift(-8,"f");break;case"B":if(f&&b[E].len==8){u[C][E]=S.read_shift(8,"f");break}case"G":case"P":S.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(A!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Fv(r(l,u),u);return d["!cols"]=u.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete u.DBF,d}function a(l,c){try{return z0(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&fd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=uc(),A=oS(l,{header:1,raw:!0,cellDates:!0}),h=A[0],f=A.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=qn(l["!ref"]),w=[],I=[],T=[];for(p=0;p<=b.e.c-b.s.c;++p){var C="",E="",S=0,O=[];for(g=0;g<f.length;++g)f[g][p]!=null&&O.push(f[g][p]);if(O.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<O.length;++g){switch(typeof O[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=O[g]instanceof Date?"D":"C";break;default:E="C"}S=Math.max(S,String(O[g]).length),C=C&&C!=E?"C":E}S>250&&(S=250),E=((m[p]||{}).DBF||{}).type,E=="C"&&m[p].DBF.len>S&&(S=m[p].DBF.len),C=="B"&&E=="N"&&(C="N",T[p]=m[p].DBF.dec,S=m[p].DBF.len),I[p]=C=="C"||E=="N"?S:s[C]||0,y+=I[p],w[p]=C}var B=d.next(32);for(B.write_shift(4,318902576),B.write_shift(4,f.length),B.write_shift(2,296+32*x),B.write_shift(2,y),p=0;p<4;++p)B.write_shift(4,0);for(B.write_shift(4,0|(+e[Ate]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var P=d.next(32),D=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,D,"sbcs"),P.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),P.write_shift(4,g),P.write_shift(1,I[p]||s[w[p]]||0),P.write_shift(1,T[p]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),g+=I[p]||s[w[p]]||0}var X=d.next(264);for(X.write_shift(4,13),p=0;p<65;++p)X.write_shift(4,0);for(p=0;p<f.length;++p){var de=d.next(y);for(de.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":de.write_shift(1,f[p][g]==null?63:f[p][g]?84:70);break;case"B":de.write_shift(8,f[p][g]||0,"f");break;case"N":var re="0";for(typeof f[p][g]=="number"&&(re=f[p][g].toFixed(T[g]||0)),x=0;x<I[g]-re.length;++x)de.write_shift(1,32);de.write_shift(1,re,"sbcs");break;case"D":f[p][g]?(de.write_shift(4,("0000"+f[p][g].getFullYear()).slice(-4),"sbcs"),de.write_shift(2,("00"+(f[p][g].getMonth()+1)).slice(-2),"sbcs"),de.write_shift(2,("00"+f[p][g].getDate()).slice(-2),"sbcs")):de.write_shift(8,"00000000","sbcs");break;case"C":var ie=String(f[p][g]!=null?f[p][g]:"").slice(0,I[g]);for(de.write_shift(1,ie,"sbcs"),x=0;x<I[g]-ie.length;++x)de.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),_re=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Qs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,f){var m=t[f];return typeof m=="number"?xV(m):m},n=function(h,f,m){var p=f.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:xV(p)};t["|"]=254;function a(h,f){switch(f.type){case"base64":return s(Gc(h),f);case"binary":return s(h,f);case"buffer":return s(bn&&Buffer.isBuffer(h)?h.toString("binary"):q0(h),f);case"array":return s(Np(h),f)}throw new Error("Unrecognized type "+f.type)}function s(h,f){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],I=null,T={},C=[],E=[],S=[],O=0,B;for(+f.codepage>=0&&fd(+f.codepage);x!==m.length;++x){O=0;var P=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=P.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),X=D[0],de;if(P.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(P.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,ie=!1,ce=!1,J=!1,pe=-1,Se=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":g=parseInt(D[y].slice(1))-1,ie=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,ie||(g=0),B=b.length;B<=p;++B)b[B]=[];break;case"K":de=D[y].slice(1),de.charAt(0)==='"'?de=de.slice(1,de.length-1):de==="TRUE"?de=!0:de==="FALSE"?de=!1:isNaN(vd(de))?isNaN(tv(de).getDate())||(de=es(de)):(de=vd(de),I!==null&&jv(I)&&(de=p4(de))),re=!0;break;case"E":J=!0;var k=jx(D[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],k];break;case"S":ce=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":pe=parseInt(D[y].slice(1))-1;break;case"C":Se=parseInt(D[y].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}if(re&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=de:b[p][g]=de,I=null),ce){if(J)throw new Error("SYLK shared formula cannot have own formula");var F=pe>-1&&b[pe][Se];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Vre(F[1],{r:p-pe,c:g-Se})}break;case"F":var H=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":g=parseInt(D[y].slice(1))-1,++H;break;case"Y":for(p=parseInt(D[y].slice(1))-1,B=b.length;B<=p;++B)b[B]=[];break;case"M":O=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":I=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=D[y].slice(1).split(" "),B=parseInt(S[0],10);B<=parseInt(S[1],10);++B)O=parseInt(S[2],10),E[B-1]=O===0?{hidden:!0}:{wch:O},j0(E[B-1]);break;case"C":g=parseInt(D[y].slice(1))-1,E[g]||(E[g]={});break;case"R":p=parseInt(D[y].slice(1))-1,C[p]||(C[p]={}),O>0?(C[p].hpt=O,C[p].hpx=nv(O)):O===0&&(C[p].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}H<1&&(I=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+P)}}return C.length>0&&(T["!rows"]=C),E.length>0&&(T["!cols"]=E),f&&f.sheetRows&&(b=b.slice(0,f.sheetRows)),[b,T]}function i(h,f){var m=a(h,f),p=m[0],g=m[1],x=Fv(p,f);return Qs(g).forEach(function(y){x[y]=g[y]}),x}function l(h,f){return z0(i(h,f),f)}function c(h,f,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+oD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,f){f.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=Z2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=eb(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,f){f.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*tb(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function A(h,f){var m=["ID;PWXL;N;E"],p=[],g=qn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var I=g.s.c;I<=g.e.c;++I){var T=Jr({r:w,c:I});x=y?(h[w]||[])[I]:h[T],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,I))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:A}}(),Cre=function(){function t(s,i){switch(i.type){case"base64":return e(Gc(s),i);case"binary":return e(s,i);case"buffer":return e(bn&&Buffer.isBuffer(s)?s.toString("binary"):q0(s),i);case"array":return e(Np(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,A=[];d!==l.length;++d){if(l[d].trim()==="BOT"){A[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),f=h[0],m=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+f){case-1:if(p==="BOT"){A[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?A[c][u]=!0:p==="FALSE"?A[c][u]=!1:isNaN(vd(m))?isNaN(tv(m).getDate())?A[c][u]=m:A[c][u]=es(m):A[c][u]=vd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),A[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(A=A.slice(0,i.sheetRows)),A}function r(s,i){return Fv(t(s,i),i)}function n(s,i){return z0(r(s,i),i)}var a=function(){var s=function(c,u,d,A,h){c.push(u),c.push(d+","+A),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,A){c.push(u+","+d),c.push(u==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(c){var u=[],d=qn(c["!ref"]),A,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var f=d.s.r;f<=d.e.r;++f){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Jr({r:f,c:m});if(A=h?(c[f]||[])[m]:c[p],!A){i(u,1,0,"");continue}switch(A.t){case"n":var g=A.w;!g&&A.v!=null&&(g=A.v),g==null?A.f&&!A.F?i(u,1,0,"="+A.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=Mu(A.z||Yr[14],Li(es(A.v)))),i(u,0,A.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Ere=function(){function t(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(A,h){for(var f=A.split(`
`),m=-1,p=-1,g=0,x=[];g!==f.length;++g){var y=f[g].trim().split(":");if(y[0]==="cell"){var b=Cs(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(A,h){return Fv(r(A,h),h)}function a(A,h){return z0(n(A,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(A){if(!A||!A["!ref"])return"";for(var h=[],f=[],m,p="",g=dc(A["!ref"]),x=Array.isArray(A),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=Jr({r:y,c:b}),m=x?(A[y]||[])[b]:A[p],!(!m||m.v==null||m.t==="z")){switch(f=["cell",p,"t"],m.t){case"s":case"str":f.push(e(m.v));break;case"n":m.f?(f[2]="vtf",f[3]="n",f[4]=m.v,f[5]=e(m.f)):(f[2]="v",f[3]=m.v);break;case"b":f[2]="vt"+(m.f?"f":"c"),f[3]="nl",f[4]=m.v?"1":"0",f[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Li(es(m.v));f[2]="vtc",f[3]="nd",f[4]=""+w,f[5]=m.w||Mu(m.z||Yr[14],w);break;case"e":continue}h.push(f.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(A){return[s,i,l,i,u(A),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),rv=function(){function t(d,A,h,f,m){m.raw?A[h][f]=d:d===""||(d==="TRUE"?A[h][f]=!0:d==="FALSE"?A[h][f]=!1:isNaN(vd(d))?isNaN(tv(d).getDate())?A[h][f]=d:A[h][f]=es(d):A[h][f]=vd(d))}function e(d,A){var h=A||{},f=[];if(!d||d.length===0)return f;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){f[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),f,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),f,y,b,h)}return h.sheetRows&&(f=f.slice(0,h.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var A={},h=!1,f=0,m=0;f<d.length;++f)(m=d.charCodeAt(f))==34?h=!h:!h&&m in r&&(A[m]=(A[m]||0)+1);m=[];for(f in A)Object.prototype.hasOwnProperty.call(A,f)&&m.push([A[f],f]);if(!m.length){A=n;for(f in A)Object.prototype.hasOwnProperty.call(A,f)&&m.push([A[f],f])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,A){var h=A||{},f="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(f=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(f=d.charAt(4),d=d.slice(6)):f=a(d.slice(0,1024)):h&&h.FS?f=h.FS:f=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,I=f.charCodeAt(0),T=!1,C=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var S=h.dateNF!=null?LBe(h.dateNF):null;function O(){var B=d.slice(b,w),P={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)P.t="z";else if(h.raw)P.t="s",P.v=B;else if(B.trim().length===0)P.t="s",P.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(P.t="s",P.v=B.slice(2,-1).replace(/""/g,'"')):hOe(B)?(P.t="n",P.f=B.slice(1)):(P.t="s",P.v=B);else if(B=="TRUE")P.t="b",P.v=!0;else if(B=="FALSE")P.t="b",P.v=!1;else if(!isNaN(y=vd(B)))P.t="n",h.cellText!==!1&&(P.w=B),P.v=y;else if(!isNaN(tv(B).getDate())||S&&B.match(S)){P.z=h.dateNF||Yr[14];var D=0;S&&B.match(S)&&(B=UBe(B,h.dateNF,B.match(S)||[]),D=1),h.cellDates?(P.t="d",P.v=es(B,D)):(P.t="n",P.v=Li(es(B,D))),h.cellText!==!1&&(P.w=Mu(P.z,P.v instanceof Date?Li(P.v):P.v)),h.cellNF||delete P.z}else P.t="s",P.v=B;if(P.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=P):m[Jr({c:x,r:g})]=P),b=w+1,E=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),C==I)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(C=d.charCodeAt(w)){case 34:E===34&&(T=!T);break;case I:case 10:case 13:if(!T&&O())break e;break}return w-b>0&&O(),m["!ref"]=fn(p),m}function i(d,A){return!(A&&A.PRN)||A.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,A):Fv(e(d,A),A)}function l(d,A){var h="",f=A.type=="string"?[0,0,0,0]:mD(d,A);switch(A.type){case"base64":h=Gc(d);break;case"binary":h=d;break;case"buffer":A.codepage==65001?h=d.toString("utf8"):A.codepage&&typeof K2<"u"||(h=bn&&Buffer.isBuffer(d)?d.toString("binary"):q0(d));break;case"array":h=Np(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+A.type)}return f[0]==239&&f[1]==187&&f[2]==191?h=Sa(h.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?h=Sa(h):A.type=="binary"&&typeof K2<"u",h.slice(0,19)=="socialcalc:version:"?Ere.to_sheet(A.type=="string"?h:Sa(h),A):i(h,A)}function c(d,A){return z0(l(d,A),A)}function u(d){for(var A=[],h=qn(d["!ref"]),f,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=Jr({r:p,c:x});if(f=m?(d[p]||[])[x]:d[y],!f||f.v==null){g.push("          ");continue}for(var b=(f.w||(Ef(f),f.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}A.push(g.join(""))}return A.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function eke(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=_re.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return rv.to_workbook(t,e)}}var Zm=function(){function t(k,F,H){if(k){Fo(k,k.l||0);for(var M=H.Enum||pe;k.l<k.length;){var L=k.read_shift(2),z=M[L]||M[65535],R=k.read_shift(2),G=k.l+R,ee=z.f&&z.f(k,R,H);if(k.l=G,F(ee,z,L))return}}}function e(k,F){switch(F.type){case"base64":return r(Fc(Gc(k)),F);case"binary":return r(Fc(k),F);case"buffer":case"array":return r(k,F)}throw"Unsupported type "+F.type}function r(k,F){if(!k)return k;var H=F||{},M=H.dense?[]:{},L="Sheet1",z="",R=0,G={},ee=[],te=[],Q={s:{r:0,c:0},e:{r:0,c:0}},xe=H.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)H.Enum=pe,t(k,function(Pe,Le,qe){switch(qe){case 0:H.vers=Pe,Pe>=4096&&(H.qpro=!0);break;case 6:Q=Pe;break;case 204:Pe&&(z=Pe);break;case 222:z=Pe;break;case 15:case 51:H.qpro||(Pe[1].v=Pe[1].v.slice(1));case 13:case 14:case 16:qe==14&&(Pe[2]&112)==112&&(Pe[2]&15)>1&&(Pe[2]&15)<15&&(Pe[1].z=H.dateNF||Yr[14],H.cellDates&&(Pe[1].t="d",Pe[1].v=p4(Pe[1].v))),H.qpro&&Pe[3]>R&&(M["!ref"]=fn(Q),G[L]=M,ee.push(L),M=H.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=Pe[3],L=z||"Sheet"+(R+1),z="");var nt=H.dense?(M[Pe[0].r]||[])[Pe[0].c]:M[Jr(Pe[0])];if(nt){nt.t=Pe[1].t,nt.v=Pe[1].v,Pe[1].z!=null&&(nt.z=Pe[1].z),Pe[1].f!=null&&(nt.f=Pe[1].f);break}H.dense?(M[Pe[0].r]||(M[Pe[0].r]=[]),M[Pe[0].r][Pe[0].c]=Pe[1]):M[Jr(Pe[0])]=Pe[1];break}},H);else if(k[2]==26||k[2]==14)H.Enum=Se,k[2]==14&&(H.qpro=!0,k.l=0),t(k,function(Pe,Le,qe){switch(qe){case 204:L=Pe;break;case 22:Pe[1].v=Pe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pe[3]>R&&(M["!ref"]=fn(Q),G[L]=M,ee.push(L),M=H.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},R=Pe[3],L="Sheet"+(R+1)),xe>0&&Pe[0].r>=xe)break;H.dense?(M[Pe[0].r]||(M[Pe[0].r]=[]),M[Pe[0].r][Pe[0].c]=Pe[1]):M[Jr(Pe[0])]=Pe[1],Q.e.c<Pe[0].c&&(Q.e.c=Pe[0].c),Q.e.r<Pe[0].r&&(Q.e.r=Pe[0].r);break;case 27:Pe[14e3]&&(te[Pe[14e3][0]]=Pe[14e3][1]);break;case 1537:te[Pe[0]]=Pe[1],Pe[0]==R&&(L=Pe[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(M["!ref"]=fn(Q),G[z||L]=M,ee.push(z||L),!te.length)return{SheetNames:ee,Sheets:G};for(var Y={},W=[],le=0;le<te.length;++le)G[ee[le]]?(W.push(te[le]||ee[le]),Y[te[le]]=G[te[le]]||G[ee[le]]):(W.push(te[le]),Y[te[le]]={"!ref":"A1"});return{SheetNames:W,Sheets:Y}}function n(k,F){var H=F||{};if(+H.codepage>=0&&fd(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var M=uc(),L=qn(k["!ref"]),z=Array.isArray(k),R=[];mr(M,0,s(1030)),mr(M,6,c(L));for(var G=Math.min(L.e.r,8191),ee=L.s.r;ee<=G;++ee)for(var te=ri(ee),Q=L.s.c;Q<=L.e.c;++Q){ee===L.s.r&&(R[Q]=_s(Q));var xe=R[Q]+te,Y=z?(k[ee]||[])[Q]:k[xe];if(!(!Y||Y.t=="z"))if(Y.t=="n")(Y.v|0)==Y.v&&Y.v>=-32768&&Y.v<=32767?mr(M,13,f(ee,Q,Y.v)):mr(M,14,p(ee,Q,Y.v));else{var W=Ef(Y);mr(M,15,A(ee,Q,W.slice(0,239)))}}return mr(M,1),M.end()}function a(k,F){var H=F||{};if(+H.codepage>=0&&fd(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var M=uc();mr(M,0,i(k));for(var L=0,z=0;L<k.SheetNames.length;++L)(k.Sheets[k.SheetNames[L]]||{})["!ref"]&&mr(M,27,J(k.SheetNames[L],z++));var R=0;for(L=0;L<k.SheetNames.length;++L){var G=k.Sheets[k.SheetNames[L]];if(!(!G||!G["!ref"])){for(var ee=qn(G["!ref"]),te=Array.isArray(G),Q=[],xe=Math.min(ee.e.r,8191),Y=ee.s.r;Y<=xe;++Y)for(var W=ri(Y),le=ee.s.c;le<=ee.e.c;++le){Y===ee.s.r&&(Q[le]=_s(le));var Pe=Q[le]+W,Le=te?(G[Y]||[])[le]:G[Pe];if(!(!Le||Le.t=="z"))if(Le.t=="n")mr(M,23,O(Y,le,R,Le.v));else{var qe=Ef(Le);mr(M,22,C(Y,le,R,qe.slice(0,239)))}}++R}}return mr(M,1),M.end()}function s(k){var F=Lt(2);return F.write_shift(2,k),F}function i(k){var F=Lt(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var H=0,M=0,L=0,z=0;z<k.SheetNames.length;++z){var R=k.SheetNames[z],G=k.Sheets[R];if(!(!G||!G["!ref"])){++L;var ee=dc(G["!ref"]);H<ee.e.r&&(H=ee.e.r),M<ee.e.c&&(M=ee.e.c)}}return H>8191&&(H=8191),F.write_shift(2,H),F.write_shift(1,L),F.write_shift(1,M),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(k,F,H){var M={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&H.qpro?(M.s.c=k.read_shift(1),k.l++,M.s.r=k.read_shift(2),M.e.c=k.read_shift(1),k.l++,M.e.r=k.read_shift(2),M):(M.s.c=k.read_shift(2),M.s.r=k.read_shift(2),F==12&&H.qpro&&(k.l+=2),M.e.c=k.read_shift(2),M.e.r=k.read_shift(2),F==12&&H.qpro&&(k.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(k){var F=Lt(8);return F.write_shift(2,k.s.c),F.write_shift(2,k.s.r),F.write_shift(2,k.e.c),F.write_shift(2,k.e.r),F}function u(k,F,H){var M=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(M[0].c=k.read_shift(1),M[3]=k.read_shift(1),M[0].r=k.read_shift(2),k.l+=2):(M[2]=k.read_shift(1),M[0].c=k.read_shift(2),M[0].r=k.read_shift(2)),M}function d(k,F,H){var M=k.l+F,L=u(k,F,H);if(L[1].t="s",H.vers==20768){k.l++;var z=k.read_shift(1);return L[1].v=k.read_shift(z,"utf8"),L}return H.qpro&&k.l++,L[1].v=k.read_shift(M-k.l,"cstr"),L}function A(k,F,H){var M=Lt(7+H.length);M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(1,39);for(var L=0;L<M.length;++L){var z=H.charCodeAt(L);M.write_shift(1,z>=128?95:z)}return M.write_shift(1,0),M}function h(k,F,H){var M=u(k,F,H);return M[1].v=k.read_shift(2,"i"),M}function f(k,F,H){var M=Lt(7);return M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(2,H,"i"),M}function m(k,F,H){var M=u(k,F,H);return M[1].v=k.read_shift(8,"f"),M}function p(k,F,H){var M=Lt(13);return M.write_shift(1,255),M.write_shift(2,F),M.write_shift(2,k),M.write_shift(8,H,"f"),M}function g(k,F,H){var M=k.l+F,L=u(k,F,H);if(L[1].v=k.read_shift(8,"f"),H.qpro)k.l=M;else{var z=k.read_shift(2);w(k.slice(k.l,k.l+z),L),k.l+=z}return L}function x(k,F,H){var M=F&32768;return F&=-32769,F=(M?k:0)+(F>=8192?F-16384:F),(M?"":"$")+(H?_s(F):ri(F))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(k,F){Fo(k,0);for(var H=[],M=0,L="",z="",R="",G="";k.l<k.length;){var ee=k[k.l++];switch(ee){case 0:H.push(k.read_shift(8,"f"));break;case 1:z=x(F[0].c,k.read_shift(2),!0),L=x(F[0].r,k.read_shift(2),!1),H.push(z+L);break;case 2:{var te=x(F[0].c,k.read_shift(2),!0),Q=x(F[0].r,k.read_shift(2),!1);z=x(F[0].c,k.read_shift(2),!0),L=x(F[0].r,k.read_shift(2),!1),H.push(te+Q+":"+z+L)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(k.read_shift(2));break;case 6:{for(var xe="";ee=k[k.l++];)xe+=String.fromCharCode(ee);H.push('"'+xe.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:G=H.pop(),R=H.pop(),H.push(["AND","OR"][ee-20]+"("+R+","+G+")");break;default:if(ee<32&&b[ee])G=H.pop(),R=H.pop(),H.push(R+b[ee]+G);else if(y[ee]){if(M=y[ee][1],M==69&&(M=k[k.l++]),M>H.length){console.error("WK1 bad formula parse 0x"+ee.toString(16)+":|"+H.join("|")+"|");return}var Y=H.slice(-M);H.length-=M,H.push(y[ee][0]+"("+Y.join(",")+")")}else return ee<=7?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=24?console.error("WK1 unsupported op "+ee.toString(16)):ee<=30?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=115?console.error("WK1 unsupported function opcode "+ee.toString(16)):console.error("WK1 unrecognized opcode "+ee.toString(16))}}H.length==1?F[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function I(k){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=k.read_shift(2),F[3]=k[k.l++],F[0].c=k[k.l++],F}function T(k,F){var H=I(k);return H[1].t="s",H[1].v=k.read_shift(F-4,"cstr"),H}function C(k,F,H,M){var L=Lt(6+M.length);L.write_shift(2,k),L.write_shift(1,H),L.write_shift(1,F),L.write_shift(1,39);for(var z=0;z<M.length;++z){var R=M.charCodeAt(z);L.write_shift(1,R>=128?95:R)}return L.write_shift(1,0),L}function E(k,F){var H=I(k);H[1].v=k.read_shift(2);var M=H[1].v>>1;if(H[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return H[1].v=M,H}function S(k,F){var H=I(k),M=k.read_shift(4),L=k.read_shift(4),z=k.read_shift(2);if(z==65535)return M===0&&L===3221225472?(H[1].t="e",H[1].v=15):M===0&&L===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var R=z&32768;return z=(z&32767)-16446,H[1].v=(1-R*2)*(L*Math.pow(2,z+32)+M*Math.pow(2,z)),H}function O(k,F,H,M){var L=Lt(14);if(L.write_shift(2,k),L.write_shift(1,H),L.write_shift(1,F),M==0)return L.write_shift(4,0),L.write_shift(4,0),L.write_shift(2,65535),L;var z=0,R=0,G=0,ee=0;return M<0&&(z=1,M=-M),R=Math.log2(M)|0,M/=Math.pow(2,R-31),ee=M>>>0,ee&2147483648||(M/=2,++R,ee=M>>>0),M-=ee,ee|=2147483648,ee>>>=0,M*=Math.pow(2,32),G=M>>>0,L.write_shift(4,G),L.write_shift(4,ee),R+=16383+(z?32768:0),L.write_shift(2,R),L}function B(k,F){var H=S(k);return k.l+=F-14,H}function P(k,F){var H=I(k),M=k.read_shift(4);return H[1].v=M>>6,H}function D(k,F){var H=I(k),M=k.read_shift(8,"f");return H[1].v=M,H}function X(k,F){var H=D(k);return k.l+=F-10,H}function de(k,F){return k[k.l+F-1]==0?k.read_shift(F,"cstr"):""}function re(k,F){var H=k[k.l++];H>F-1&&(H=F-1);for(var M="";M.length<H;)M+=String.fromCharCode(k[k.l++]);return M}function ie(k,F,H){if(!(!H.qpro||F<21)){var M=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var L=k.read_shift(F-21,"cstr");return[M,L]}}function ce(k,F){for(var H={},M=k.l+F;k.l<M;){var L=k.read_shift(2);if(L==14e3){for(H[L]=[0,""],H[L][0]=k.read_shift(2);k[k.l];)H[L][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return H}function J(k,F){var H=Lt(5+k.length);H.write_shift(2,14e3),H.write_shift(2,F);for(var M=0;M<k.length;++M){var L=k.charCodeAt(M);H[H.l++]=L>127?95:L}return H[H.l++]=0,H}var pe={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:de},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},Se={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:T},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:de},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ie},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function tke(t){var e={},r=t.match(gl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Zr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=j6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var rke=function(){var t=z2("t"),e=z2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var l={t:"s",v:Gn(i[1])},c=s.match(e);return c&&(l.s=tke(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),nke=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),ake=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ske=/<(?:\w+:)?r>/,ike=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function rD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Gn(Sa(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Sa(t),r&&(n.h=V6(n.t))):t.match(ske)&&(n.r=Sa(t),n.t=Gn(Sa((t.replace(ike,"").match(ake)||[]).join("").replace(gl,""))),r&&(n.h=nke(rke(n.r)))),n):{t:""}}var oke=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,lke=/<(?:\w+:)?(?:si|sstItem)>/g,cke=/<\/(?:\w+:)?(?:si|sstItem)>/;function uke(t,e){var r=[],n="";if(!t)return r;var a=t.match(oke);if(a){n=a[2].replace(lke,"").split(cke);for(var s=0;s!=n.length;++s){var i=rD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Zr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var dke=/^\s|\s$|[\t\n\r]/;function Sre(t,e){if(!e.bookSST)return"";var r=[ai];r[r.length]=hr("sst",null,{xmlns:qp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(dke)&&(s+=' xml:space="preserve"'),s+=">"+ya(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Ake(t){return[t.read_shift(4),t.read_shift(4)]}function fke(t,e){var r=[],n=!1;return Uf(t,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function hke(t,e){return e||(e=Lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var mke=CTe;function pke(t){var e=uc();Jt(e,159,hke(t));for(var r=0;r<t.length;++r)Jt(e,19,mke(t[r]));return Jt(e,160),e.end()}function Ire(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function mf(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function gke(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=mf(t,4),e.U=mf(t,4),e.W=mf(t,4),e}function xke(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function vke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(xke(t));return e}function yke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function bke(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=mf(t,4),e.U=mf(t,4),e.W=mf(t,4),e}function wke(t){var e=bke(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Bre(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Tre(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Nke(t){var e=mf(t);switch(e.Minor){case 2:return[e.Minor,_ke(t)];case 3:return[e.Minor,Cke()];case 4:return[e.Minor,Eke(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function _ke(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Bre(t,r),a=Tre(t,t.length-t.l);return{t:"Std",h:n,v:a}}function Cke(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Eke(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(gl,function(s){var i=Zr(s);switch(NA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Ske(t,e){var r={},n=r.EncryptionVersionInfo=mf(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Bre(t,a),e-=a,r.EncryptionVerifier=Tre(t,e),r}function Ike(t){var e={},r=e.EncryptionVersionInfo=mf(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function nD(t){var e=0,r,n=Ire(t),a=n.length+1,s,i,l,c,u;for(r=P0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^i;return e^52811}var Pre=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],A=0;A!=7;++A)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=Ire(i),c=s(l),u=l.length,d=P0(16),A=0;A!=16;++A)d[A]=0;var h,f,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,f=l[l.length-1],d[u]=a(f,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,m=15-l.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(l[u],h),--u,--m;return d}}(),Bke=function(t,e,r,n,a){a||(a=e),n||(n=Pre(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Tke=function(t){var e=0,r=Pre(t);return function(n){var a=Bke("",n,e,r);return e=a[1],a[0]}};function Pke(t,e,r,n){var a={key:ci(t),verificationBytes:ci(t)};return r.password&&(a.verifier=nD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Tke(r.password)),a}function jke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Ike(t):n.Data=Ske(t,e),n}function kke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?jke(t,e-2,n):Pke(t,r.biff>=8?e:e-2,r,n),n}var jre=function(){function t(a,s){switch(s.type){case"base64":return e(Gc(a),s);case"binary":return e(a,s);case"buffer":return e(bn&&Buffer.isBuffer(a)?a.toString("binary"):q0(a),s);case"array":return e(Np(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,A){Array.isArray(l)&&(l[A]=[]);for(var h=/\\\w+\b/g,f=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(f,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[A][p]=x:l[Jr({r:A,c:p})]=x}break}f=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=fn(u),l}function r(a,s){return z0(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=qn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var A=Jr({r:u,c:d});l=c?(a[u]||[])[d]:a[A],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Ef(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Fke(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function J2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Oke(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:l=((r-n)/i+6)%6;break;case r:l=(n-e)/i+2;break;case n:l=(e-r)/i+4;break}return[l/6,c,u/2]}function Dke(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function sS(t,e){if(e===0)return t;var r=Oke(Fke(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),J2(Dke(r))}var kre=6,Rke=15,Mke=1,cl=kre;function Z2(t){return Math.floor((t+Math.round(128/cl)/256)*cl)}function eb(t){return Math.floor((t-5)/cl*100+.5)/100}function iS(t){return Math.round((t*cl+5)/cl*256)/256}function VB(t){return iS(eb(Z2(t)))}function aD(t){var e=Math.abs(t-VB(t)),r=cl;if(e>.005)for(cl=Mke;cl<Rke;++cl)Math.abs(t-VB(t))<=e&&(e=Math.abs(t-VB(t)),r=cl);cl=r}function j0(t){t.width?(t.wpx=Z2(t.width),t.wch=eb(t.wpx),t.MDW=cl):t.wpx?(t.wch=eb(t.wpx),t.width=iS(t.wch),t.MDW=cl):typeof t.wch=="number"&&(t.width=iS(t.wch),t.wpx=Z2(t.width),t.MDW=cl),t.customWidth&&delete t.customWidth}var Lke=96,Fre=Lke;function tb(t){return t*96/Fre}function nv(t){return t*Fre/96}var Uke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Qke(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=Zr(i);switch(NA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Xa(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Xa(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function Vke(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=Zr(i);switch(NA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function Hke(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(gl)||[]).forEach(function(i){var l=Zr(i);switch(NA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Sa(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Xa(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Xa(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Xa(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Xa(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Xa(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Xa(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Xa(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=j6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Xa(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Ym[a.color.index];a.color.index==81&&(c=Ym[1]),c||(c=Ym[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=sS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function $ke(t,e,r){e.NumberFmt=[];for(var n=Qs(Yr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=Yr[n[a]];var s=t[0].match(gl);if(s)for(a=0;a<s.length;++a){var i=Zr(s[a]);switch(NA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Gn(Sa(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}hf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Kke(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=hr("numFmt",null,{numFmtId:n,formatCode:ya(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=hr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var p_=["numFmtId","fillId","fontId","borderId","xfId"],g_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Gke(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(gl)||[]).forEach(function(s){var i=Zr(s),l=0;switch(NA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<p_.length;++l)n[p_[l]]&&(n[p_[l]]=parseInt(n[p_[l]],10));for(l=0;l<g_.length;++l)n[g_[l]]&&(n[g_[l]]=Xa(n[g_[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Xa(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function qke(t){var e=[];return e[e.length]=hr("cellXfs",null),t.forEach(function(r){e[e.length]=hr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=hr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var zke=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=l.match(e))&&$ke(A,d,u),(A=l.match(a))&&Hke(A,d,c,u),(A=l.match(n))&&Vke(A,d,c,u),(A=l.match(s))&&Qke(A,d,c,u),(A=l.match(r))&&Gke(A,d,u),d}}();function Ore(t,e){var r=[ai,hr("styleSheet",null,{xmlns:qp[0],"xmlns:vt":Fi.vt})],n;return t.SSF&&(n=Kke(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=qke(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Wke(t,e){var r=t.read_shift(2),n=Al(t);return[r,n]}function Xke(t,e,r){r||(r=Lt(6+4*e.length)),r.write_shift(2,t),oo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Yke(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=jTe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=PTe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Al(t),n}function Jke(t,e){e||(e=Lt(25+4*32)),e.write_shift(2,t.sz*20),kTe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),rS(t.color,e);var n=0;return n=2,e.write_shift(1,n),oo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Zke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],HB,eFe=ml;function lH(t,e){e||(e=Lt(4*3+8*7+16*1)),HB||(HB=h4(Zke));var r=HB[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(rS({auto:1},e),rS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function tFe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Dre(t,e,r){r||(r=Lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function L1(t,e){return e||(e=Lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var rFe=ml;function nFe(t,e){return e||(e=Lt(51)),e.write_shift(1,0),L1(null,e),L1(null,e),L1(null,e),L1(null,e),L1(null,e),e.length>e.l?e.slice(0,e.l):e}function aFe(t,e){return e||(e=Lt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),tS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function sFe(t,e,r){var n=Lt(2052);return n.write_shift(4,t),tS(e,n),tS(r,n),n.length>n.l?n.slice(0,n.l):n}function iFe(t,e,r){var n={};n.NumberFmt=[];for(var a in Yr)n.NumberFmt[a]=Yr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Uf(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],hf(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=sS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function oFe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Jt(t,615,yd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Jt(t,44,Xke(a,e[a]))}),Jt(t,616))}}function lFe(t){var e=1;Jt(t,611,yd(e)),Jt(t,43,Jke({sz:12,color:{theme:1},name:"Calibri",family:2})),Jt(t,612)}function cFe(t){var e=2;Jt(t,603,yd(e)),Jt(t,45,lH({patternType:"none"})),Jt(t,45,lH({patternType:"gray125"})),Jt(t,604)}function uFe(t){var e=1;Jt(t,613,yd(e)),Jt(t,46,nFe()),Jt(t,614)}function dFe(t){var e=1;Jt(t,626,yd(e)),Jt(t,47,Dre({numFmtId:0},65535)),Jt(t,627)}function AFe(t,e){Jt(t,617,yd(e.length)),e.forEach(function(r){Jt(t,47,Dre(r,0))}),Jt(t,618)}function fFe(t){var e=1;Jt(t,619,yd(e)),Jt(t,48,aFe({xfId:0,name:"Normal"})),Jt(t,620)}function hFe(t){var e=0;Jt(t,505,yd(e)),Jt(t,506)}function mFe(t){var e=0;Jt(t,508,sFe(e,"TableStyleMedium9","PivotStyleMedium4")),Jt(t,509)}function pFe(t,e){var r=uc();return Jt(r,278),oFe(r,t.SSF),lFe(r),cFe(r),uFe(r),dFe(r),AFe(r,e.cellXfs),fFe(r),hFe(r),mFe(r),Jt(r,279),r.end()}var gFe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function xFe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(gl)||[]).forEach(function(a){var s=Zr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[gFe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function vFe(){}function yFe(){}var bFe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,wFe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,NFe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function _Fe(t,e,r){e.themeElements={};var n;[["clrScheme",bFe,xFe],["fontScheme",wFe,vFe],["fmtScheme",NFe,yFe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var CFe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Rre(t,e){(!t||t.length===0)&&(t=sD());var r,n={};if(!(r=t.match(CFe)))throw new Error("themeElements not found in theme");return _Fe(r[0],n,e),n.raw=t,n}function sD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[ai];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function EFe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=Bte(s,{type:"array"})}catch{return}var l=Oc(i,"theme/theme/theme1.xml",!0);if(l)return Rre(l,r)}}function SFe(t){return t.read_shift(4)}function IFe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=BFe(t,4);break;case 2:e.xclrValue=pre(t);break;case 3:e.xclrValue=SFe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function BFe(t,e){return ml(t,e)}function TFe(t,e){return ml(t,e)}function PFe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=IFe(t);break;case 6:n[1]=TFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function jFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(PFe(t,r-t.l));return{ixfe:n,ext:s}}function kFe(t,e){e.forEach(function(r){switch(r[0]){}})}function FFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Al(t)}}function OFe(t){var e=Lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),oo(t.name,e),e.slice(0,e.l)}function DFe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function RFe(t){var e=Lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function MFe(t,e){var r=Lt(8+2*e.length);return r.write_shift(4,t),oo(e,r),r.slice(0,r.l)}function LFe(t){return t.l+=4,t.read_shift(4)!=0}function UFe(t,e){var r=Lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function QFe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return Uf(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(A){l==1?n.Cell.push({type:n.Types[A[0]-1].name,index:A[1]}):l==0&&n.Value.push({type:n.Types[A[0]-1].name,index:A[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function VFe(){var t=uc();return Jt(t,332),Jt(t,334,yd(1)),Jt(t,335,OFe({name:"XLDAPR",version:12e4,flags:3496657072})),Jt(t,336),Jt(t,339,MFe(1,"XLDAPR")),Jt(t,52),Jt(t,35,yd(514)),Jt(t,4096,yd(0)),Jt(t,4097,bu(1)),Jt(t,36),Jt(t,53),Jt(t,340),Jt(t,337,UFe(1)),Jt(t,51,RFe([[1,0]])),Jt(t,338),Jt(t,333),t.end()}function HFe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(gl,function(l){var c=Zr(l);switch(NA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Mre(){var t=[ai];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function $Fe(t){var e=[];if(!t)return e;var r=1;return(t.match(gl)||[]).forEach(function(n){var a=Zr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function KFe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Jr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function GFe(t,e,r){var n=[];return Uf(t,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function qFe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;Uf(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function zFe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var px=1024;function Lre(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[hr("xml",null,{"xmlns:v":jc.v,"xmlns:o":jc.o,"xmlns:x":jc.x,"xmlns:mv":jc.mv}).replace(/\/>/,">"),hr("o:shapelayout",hr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),hr("v:shapetype",[hr("v:stroke",null,{joinstyle:"miter"}),hr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];px<t*1e3;)px+=1e3;return e.forEach(function(s){var i=Cs(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?hr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=hr("v:fill",c,l),d={on:"t",obscured:"t"};++px,a=a.concat(["<v:shape"+W2({id:"_x0000_s"+px,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,hr("v:shadow",null,d),hr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Do("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Do("x:AutoFill","False"),Do("x:Row",String(i.r)),Do("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function cH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var l=Cs(i.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[i.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[i.ref]=s;var c=qn(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=fn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var A=s.c.length-1;A>=0;--A){if(!r&&s.c[A].T)return;r&&!s.c[A].T&&s.c.splice(A,1)}if(r&&n){for(A=0;A<n.length;++A)if(d.a==n[A].id){d.a=n[A].name||d.a;break}}s.c.push(d)})}function WFe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Zr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Cs(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var A=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!A&&!!A[1]&&rD(A[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Ure(t){var e=[ai,hr("comments",null,{xmlns:qp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ya(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ya(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Do("t",ya(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;e.push(Do("t",ya(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function XFe(t,e){var r=[],n=!1,a={},s=0;return t.replace(gl,function(l,c){var u=Zr(l);switch(NA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function YFe(t,e,r){var n=[ai,hr("ThreadedComments",null,{xmlns:Fi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(hr("threadedComment",Do("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function JFe(t,e){var r=[],n=!1;return t.replace(gl,function(s){var i=Zr(s);switch(NA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function ZFe(t){var e=[ai,hr("personList",null,{xmlns:Fi.TCMNT,"xmlns:x":qp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(hr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function eOe(t){var e={};e.iauthor=t.read_shift(4);var r=Yp(t);return e.rfx=r.s,e.ref=Jr(r.s),t.l+=16,e}function tOe(t,e){return e==null&&(e=Lt(36)),e.write_shift(4,t[1].iauthor),Ov(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var rOe=Al;function nOe(t){return oo(t.slice(0,54))}function aOe(t,e){var r=[],n=[],a={},s=!1;return Uf(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function sOe(t){var e=uc(),r=[];return Jt(e,628),Jt(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Jt(e,632,nOe(a.a)))})}),Jt(e,631),Jt(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Cs(n[0]),e:Cs(n[0])};Jt(e,635,tOe([s,a])),a.t&&a.t.length>0&&Jt(e,637,STe(a)),Jt(e,636),delete a.iauthor})}),Jt(e,634),Jt(e,629),e.end()}var iOe="application/vnd.ms-office.vbaProject";function oOe(t){var e=Gr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Gr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),Gr.write(e)}function lOe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Gr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Qre=["xlsb","xlsm","xlam","biff8","xla"];function cOe(){return{"!type":"dialog"}}function uOe(){return{"!type":"dialog"}}function dOe(){return{"!type":"macro"}}function AOe(){return{"!type":"macro"}}var jx=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+_s(d)+(c?"":"$")+ri(u)}return function(a,s){return e=s,a.replace(t,r)}}(),iD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oD=function(){return function(e,r){return e.replace(iD,function(n,a,s,i,l,c){var u=q6(i)-(s?0:r.c),d=G6(c)-(l?0:r.r),A=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+A+"C"+h})}}();function Vre(t,e){return t.replace(iD,function(r,n,a,s,i,l){return n+(a=="$"?a+s:_s(q6(s)+e.c))+(i=="$"?i+l:ri(G6(l)+e.r))})}function fOe(t,e,r){var n=dc(e),a=n.s,s=Cs(r),i={r:s.r-a.r,c:s.c-a.c};return Vre(t,i)}function hOe(t){return t.length!=1}function uH(t){return t.replace(/_xlfn\./g,"")}function ii(t){t.l+=1}function k0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Hre(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return $re(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=k0(t),l=k0(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function $re(t){var e=k0(t),r=k0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function mOe(t,e,r){if(r.biff<8)return $re(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=k0(t),i=k0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Kre(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return pOe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=k0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function pOe(t){var e=k0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function gOe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function xOe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return vOe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function vOe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function yOe(t,e,r){var n=(t[t.l++]&96)>>5,a=Hre(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function bOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=Hre(t,s,r);return[n,a,i]}function wOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function NOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function _Oe(t,e,r){var n=(t[t.l++]&96)>>5,a=mOe(t,e-1,r);return[n,a]}function COe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function dH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function EOe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function SOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function IOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function BOe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function TOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Gre(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function POe(t){return t.read_shift(2),Gre(t)}function jOe(t){return t.read_shift(2),Gre(t)}function kOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Kre(t,0,r);return[n,a]}function FOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=xOe(t,0,r);return[n,a]}function OOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Kre(t,0,r);return[n,a,s]}function DOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[L6e[a],Wre[a],n]}function ROe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:MOe(t);return[a,(s[0]===0?Wre:M6e)[s[1]]]}function MOe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function LOe(t,e,r){t.l+=r&&r.biff==2?3:4}function UOe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function QOe(t){return t.l++,Qf[t.read_shift(1)]}function VOe(t){return t.l++,t.read_shift(2)}function HOe(t){return t.l++,t.read_shift(1)!==0}function $Oe(t){return t.l++,ul(t)}function KOe(t,e,r){return t.l++,ew(t,e-1,r)}function GOe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zs(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Qf[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ul(t);break;case 2:r[1]=Jp(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function qOe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Yp:g4)(t));return a}function zOe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=GOe(t,r.biff);return i}function WOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function XOe(t,e,r){if(r.biff==5)return YOe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function YOe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function JOe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function ZOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function e6e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function t6e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var r6e=ml,n6e=ml,a6e=ml;function rw(t,e,r){return t.l+=2,[gOe(t)]}function lD(t){return t.l+=6,[]}var s6e=rw,i6e=lD,o6e=lD,l6e=rw;function qre(t){return t.l+=2,[ci(t),t.read_shift(2)&1]}var c6e=rw,u6e=qre,d6e=lD,A6e=rw,f6e=rw,h6e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function m6e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=h6e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function p6e(t){return t.l+=2,[t.read_shift(4)]}function g6e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function x6e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function v6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function y6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function b6e(t){return t.l+=4,[0,0]}var AH={1:{n:"PtgExp",f:UOe},2:{n:"PtgTbl",f:a6e},3:{n:"PtgAdd",f:ii},4:{n:"PtgSub",f:ii},5:{n:"PtgMul",f:ii},6:{n:"PtgDiv",f:ii},7:{n:"PtgPower",f:ii},8:{n:"PtgConcat",f:ii},9:{n:"PtgLt",f:ii},10:{n:"PtgLe",f:ii},11:{n:"PtgEq",f:ii},12:{n:"PtgGe",f:ii},13:{n:"PtgGt",f:ii},14:{n:"PtgNe",f:ii},15:{n:"PtgIsect",f:ii},16:{n:"PtgUnion",f:ii},17:{n:"PtgRange",f:ii},18:{n:"PtgUplus",f:ii},19:{n:"PtgUminus",f:ii},20:{n:"PtgPercent",f:ii},21:{n:"PtgParen",f:ii},22:{n:"PtgMissArg",f:ii},23:{n:"PtgStr",f:KOe},26:{n:"PtgSheet",f:g6e},27:{n:"PtgEndSheet",f:x6e},28:{n:"PtgErr",f:QOe},29:{n:"PtgBool",f:HOe},30:{n:"PtgInt",f:VOe},31:{n:"PtgNum",f:$Oe},32:{n:"PtgArray",f:COe},33:{n:"PtgFunc",f:DOe},34:{n:"PtgFuncVar",f:ROe},35:{n:"PtgName",f:WOe},36:{n:"PtgRef",f:kOe},37:{n:"PtgArea",f:yOe},38:{n:"PtgMemArea",f:JOe},39:{n:"PtgMemErr",f:r6e},40:{n:"PtgMemNoMem",f:n6e},41:{n:"PtgMemFunc",f:ZOe},42:{n:"PtgRefErr",f:e6e},43:{n:"PtgAreaErr",f:wOe},44:{n:"PtgRefN",f:FOe},45:{n:"PtgAreaN",f:_Oe},46:{n:"PtgMemAreaN",f:v6e},47:{n:"PtgMemNoMemN",f:y6e},57:{n:"PtgNameX",f:XOe},58:{n:"PtgRef3d",f:OOe},59:{n:"PtgArea3d",f:bOe},60:{n:"PtgRefErr3d",f:t6e},61:{n:"PtgAreaErr3d",f:NOe},255:{}},w6e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},N6e={1:{n:"PtgElfLel",f:qre},2:{n:"PtgElfRw",f:A6e},3:{n:"PtgElfCol",f:s6e},6:{n:"PtgElfRwV",f:f6e},7:{n:"PtgElfColV",f:l6e},10:{n:"PtgElfRadical",f:c6e},11:{n:"PtgElfRadicalS",f:d6e},13:{n:"PtgElfColS",f:i6e},15:{n:"PtgElfColSV",f:o6e},16:{n:"PtgElfRadicalLel",f:u6e},25:{n:"PtgList",f:m6e},29:{n:"PtgSxName",f:p6e},255:{}},_6e={0:{n:"PtgAttrNoop",f:b6e},1:{n:"PtgAttrSemi",f:TOe},2:{n:"PtgAttrIf",f:IOe},4:{n:"PtgAttrChoose",f:EOe},8:{n:"PtgAttrGoto",f:SOe},16:{n:"PtgAttrSum",f:LOe},32:{n:"PtgAttrBaxcel",f:dH},33:{n:"PtgAttrBaxcel",f:dH},64:{n:"PtgAttrSpace",f:POe},65:{n:"PtgAttrSpaceSemi",f:jOe},128:{n:"PtgAttrIfError",f:BOe},255:{}};function nw(t,e,r,n){if(n.biff<8)return ml(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=zOe(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=qOe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(ml(t,e)),s}function aw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=AH[s]||AH[w6e[s]],(s===24||s===25)&&(a=(s===24?N6e:_6e)[t[t.l+1]]),!a||!a.f?ml(t,e):i.push([a.n,a.f(t,e,r)]);return i}function C6e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var E6e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function S6e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function zre(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function fH(t,e,r){var n=zre(t,e,r);return n=="#REF"?n:S6e(n,r)}function ol(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,A=0,h=0,f,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Ms(" ",t[0][p][1][1]);break;case 1:g=Ms("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+E6e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Wy(b[1][1],i,a),l.push(Xy(d,s));break;case"PtgRefN":d=r?Wy(b[1][1],r,a):b[1][1],l.push(Xy(d,s));break;case"PtgRef3d":A=b[1][1],d=Wy(b[1][2],i,a),m=fH(n,A,a),l.push(m+"!"+Xy(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],I=b[1][1];w||(w=0),w&=127;var T=w==0?[]:l.slice(-w);l.length-=w,I==="User"&&(I=T.shift()),l.push(I+"("+T.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":f=VV(b[1][1],r?{s:r}:i,a),l.push(LB(f,a));break;case"PtgArea":f=VV(b[1][1],i,a),l.push(LB(f,a));break;case"PtgArea3d":A=b[1][1],f=b[1][2],m=fH(n,A,a),l.push(m+"!"+LB(f,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var C=(n.names||[])[h-1]||(n[0]||[])[h],E=C?C.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var S=b[1][1];h=b[1][2];var O;if(a.biff<=5)S<0&&(S=-S),n[S]&&(O=n[S][h]);else{var B="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][h]&&n[S][h].itab>0&&(B=n.SheetNames[n[S][h].itab-1]+"!"):B=n.SheetNames[h-1]+"!"),n[S]&&n[S][h])B+=n[S][h].Name;else if(n[0]&&n[0][h])B+=n[0][h].Name;else{var P=(zre(n,S,a)||"").split(";;");P[h-1]?B=P[h-1]:B+="SH33TJSERRX"}l.push(B);break}O||(O={Name:"SH33TJSERRY"}),l.push(O.Name);break;case"PtgParen":var D="(",X=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:D=Ms(" ",t[0][p][1][1])+D;break;case 3:D=Ms("\r",t[0][p][1][1])+D;break;case 4:X=Ms(" ",t[0][p][1][1])+X;break;case 5:X=Ms("\r",t[0][p][1][1])+X;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+X);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var de={c:r.c,r:r.r};if(n.sharedf[Jr(d)]){var re=n.sharedf[Jr(d)];l.push(ol(re,i,de,n,a))}else{var ie=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(ol(u[1],i,de,n,a)),ie=!0;break}ie||l.push(b[1])}break;case"PtgArray":l.push("{"+C6e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ce.indexOf(t[0][x][0])==-1){b=t[0][p];var J=!0;switch(b[1][0]){case 4:J=!1;case 0:g=Ms(" ",b[1][1]);break;case 5:J=!1;case 1:g=Ms("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((J?g:"")+l.pop()+(J?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function I6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ml(t,e-2)];var l=aw(t,i,r);return e!==i+a&&(s=nw(t,e-i-a,l,r)),t.l=n,[l,s]}function B6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],ml(t,e-2)];var l=aw(t,i,r);return e!==i+a&&(s=nw(t,e-i-a,l,r)),t.l=n,[l,s]}function T6e(t,e,r,n){var a=t.l+e,s=aw(t,n,r),i;return a!==t.l&&(i=nw(t,a-t.l,s,r)),[s,i]}function P6e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=aw(t,s,r);return s==65535?[[],ml(t,e-2)]:(e!==s+2&&(a=nw(t,n-s-2,i,r)),[i,a])}function j6e(t){var e;if(rf(t,t.l+6)!==65535)return[ul(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function k6e(t){if(t==null){var e=Lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return _p(t);return _p(0)}function $B(t,e,r){var n=t.l+e,a=_A(t);r.biff==2&&++t.l;var s=j6e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=B6e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function F6e(t,e,r,n,a){var s=Ep(e,r,a),i=k6e(t.v),l=Lt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var A=so([s,i,l,u]);return A}function x4(t,e,r){var n=t.read_shift(4),a=aw(t,n,r),s=t.read_shift(4),i=s>0?nw(t,s,a,r):null;return[a,i]}var O6e=x4,v4=x4,D6e=x4,R6e=x4,M6e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Wre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},L6e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hH(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function U6e(t){var e="of:="+t.replace(iD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function KB(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Q6e(t){return t.replace(/\./,"!")}var Jy={},kx={},Zy=typeof Map<"u";function cD(t,e,r){var n=0,a=t.length;if(r){if(Zy?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Zy?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Zy?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function y4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(cl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=eb(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=iS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function ep(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function W0(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){hf(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Xre(t,e,r,n,a,s){try{n.cellNF&&(t.z=Yr[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=es(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Yr[e]==null&&hf(MBe[e]||"General",e),t.t==="e")t.w=t.w||Qf[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=q2(t.v);else if(t.t==="d"){var i=Li(t.v);(i|0)===i?t.w=i.toString(10):t.w=q2(i)}else{if(t.v===void 0)return"";t.w=wp(t.v,kx)}else t.t==="d"?t.w=Mu(e,Li(t.v),kx):t.w=Mu(e,t.v,kx)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=sS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=sS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function V6e(t,e,r){if(t&&t["!ref"]){var n=qn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function H6e(t,e){var r=qn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=fn(r))}var $6e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,K6e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,G6e=/<(?:\w:)?hyperlink [^>]*>/mg,q6e=/"(\w*:\w*)"/,z6e=/<(?:\w:)?col\b[^>]*[\/]?>/g,W6e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,X6e=/<(?:\w:)?pageMargins[^>]*\/>/g,Yre=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Y6e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,J6e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Z6e(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",A=t.match(K6e);A?(u=t.slice(0,A.index),d=t.slice(A.index+A[0].length)):u=d=t;var h=u.match(Yre);h?uD(h[0],l,a,r):(h=u.match(Y6e))&&tDe(h[0],h[1]||"",l,a,r);var f=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var m=u.slice(f,f+50).match(q6e);m&&H6e(l,m[1])}var p=u.match(J6e);p&&p[1]&&hDe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(z6e);x&&cDe(g,x)}A&&gDe(A[1],l,e,c,s,i);var y=d.match(W6e);y&&(l["!autofilter"]=dDe(y[0]));var b=[],w=d.match($6e);if(w)for(f=0;f!=w.length;++f)b[f]=qn(w[f].slice(w[f].indexOf('"')+1));var I=d.match(G6e);I&&iDe(l,I,n);var T=d.match(X6e);if(T&&(l["!margins"]=oDe(Zr(T[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=fn(c)),e.sheetRows>0&&l["!ref"]){var C=qn(l["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),l["!fullref"]=l["!ref"],l["!ref"]=fn(C))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function eDe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+fn(t[r])+'"/>';return e+"</mergeCells>"}function uD(t,e,r,n){var a=Zr(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Gn(Sa(a.codeName)))}function tDe(t,e,r,n,a){uD(t.slice(0,t.indexOf(">")),r,n,a)}function rDe(t,e,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=iA(ya(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+hr("outlinePr",null,u)}!s&&!l||(a[a.length]=hr("sheetPr",l,i))}var nDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],aDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function sDe(t){var e={sheet:1};return nDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),aDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=nD(t.password).toString(16).toUpperCase()),hr("sheetProtection",null,e)}function iDe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Zr(Sa(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Gn(s.location))):(s.Target="#"+Gn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=qn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Jr({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function oDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function lDe(t){return ep(t),hr("pageMargins",null,t)}function cDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Zr(e[n],!0);a.hidden&&(a.hidden=Xa(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,aD(a.width)),j0(a);s<=i;)t[s++]=ts(a)}}function uDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=hr("col",null,y4(a,n)));return r[r.length]="</cols>",r.join("")}function dDe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function ADe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:fn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=dc(a);i.s.r==i.e.r&&(i.e.r=dc(e["!ref"]).e.r,a=fn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),hr("autoFilter",null,{ref:a})}var fDe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hDe(t,e){e.Views||(e.Views=[{}]),(t.match(fDe)||[]).forEach(function(r,n){var a=Zr(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Xa(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function mDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),hr("sheetViews",hr("sheetView",null,a),{})}function pDe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Qf[t.v];break;case"d":n&&n.cellDates?a=es(t.v,-1).toISOString():(t=ts(t),t.t="n",a=""+(t.v=Li(es(t.v)))),typeof t.z>"u"&&(t.z=Yr[14]);break;default:a=t.v;break}var l=Do("v",ya(a)),c={r:e},u=W0(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Do("v",""+cD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=hr("f",ya(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),hr("c",l,c)}var gDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=z2("v"),i=z2("f");return function(c,u,d,A,h,f){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,I="",T,C,E=0,S=0,O,B,P=0,D=0,X=Array.isArray(f.CellXf),de,re=[],ie=[],ce=Array.isArray(u),J=[],pe={},Se=!1,k=!!d.sheetStubs,F=c.split(e),H=0,M=F.length;H!=M;++H){p=F[H].trim();var L=p.length;if(L!==0){var z=0;e:for(m=0;m<L;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(C=Zr(p.slice(z,m),!0),E=C.r!=null?parseInt(C.r,10):E+1,S=-1,d.sheetRows&&d.sheetRows<E)continue;pe={},Se=!1,C.ht&&(Se=!0,pe.hpt=parseFloat(C.ht),pe.hpx=nv(pe.hpt)),C.hidden=="1"&&(Se=!0,pe.hidden=!0),C.outlineLevel!=null&&(Se=!0,pe.level=+C.outlineLevel),Se&&(J[E-1]=pe)}break;case"<":z=m;break}if(z>=m)break;if(C=Zr(p.slice(z,m),!0),E=C.r!=null?parseInt(C.r,10):E+1,S=-1,!(d.sheetRows&&d.sheetRows<E)){A.s.r>E-1&&(A.s.r=E-1),A.e.r<E-1&&(A.e.r=E-1),d&&d.cellStyles&&(pe={},Se=!1,C.ht&&(Se=!0,pe.hpt=parseFloat(C.ht),pe.hpx=nv(pe.hpt)),C.hidden=="1"&&(Se=!0,pe.hidden=!0),C.outlineLevel!=null&&(Se=!0,pe.level=+C.outlineLevel),Se&&(J[E-1]=pe)),g=p.slice(m).split(t);for(var R=0;R!=g.length&&g[R].trim().charAt(0)=="<";++R);for(g=g.slice(R),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,I=x[1],b=0;b!=I.length&&!((w=I.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,S=y}else++S;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,C=Zr(p.slice(0,b),!0),C.r||(C.r=Jr({r:E-1,c:S})),I=p.slice(b),T={t:""},(x=I.match(s))!=null&&x[1]!==""&&(T.v=Gn(x[1])),d.cellFormula){if((x=I.match(i))!=null&&x[1]!==""){if(T.f=Gn(Sa(x[1])).replace(/\r\n/g,`
`),d.xlfn||(T.f=uH(T.f)),x[0].indexOf('t="array"')>-1)T.F=(I.match(a)||[])[1],T.F.indexOf(":")>-1&&re.push([qn(T.F),T.F]);else if(x[0].indexOf('t="shared"')>-1){B=Zr(x[0]);var G=Gn(Sa(x[1]));d.xlfn||(G=uH(G)),ie[parseInt(B.si,10)]=[B,G,C.r]}}else(x=I.match(/<f[^>]*\/>/))&&(B=Zr(x[0]),ie[B.si]&&(T.f=fOe(ie[B.si][1],ie[B.si][2],C.r)));var ee=Cs(C.r);for(b=0;b<re.length;++b)ee.r>=re[b][0].s.r&&ee.r<=re[b][0].e.r&&ee.c>=re[b][0].s.c&&ee.c<=re[b][0].e.c&&(T.F=re[b][1])}if(C.t==null&&T.v===void 0)if(T.f||T.F)T.v=0,T.t="n";else if(k)T.t="z";else continue;else T.t=C.t||"n";switch(A.s.c>S&&(A.s.c=S),A.e.c<S&&(A.e.c=S),T.t){case"n":if(T.v==""||T.v==null){if(!k)continue;T.t="z"}else T.v=parseFloat(T.v);break;case"s":if(typeof T.v>"u"){if(!k)continue;T.t="z"}else O=Jy[parseInt(T.v,10)],T.v=O.t,T.r=O.r,d.cellHTML&&(T.h=O.h);break;case"str":T.t="s",T.v=T.v!=null?Sa(T.v):"",d.cellHTML&&(T.h=V6(T.v));break;case"inlineStr":x=I.match(n),T.t="s",x!=null&&(O=rD(x[1]))?(T.v=O.t,d.cellHTML&&(T.h=O.h)):T.v="";break;case"b":T.v=Xa(T.v);break;case"d":d.cellDates?T.v=es(T.v,1):(T.v=Li(es(T.v,1)),T.t="n");break;case"e":(!d||d.cellText!==!1)&&(T.w=T.v),T.v=Zte[T.v];break}if(P=D=0,de=null,X&&C.s!==void 0&&(de=f.CellXf[C.s],de!=null&&(de.numFmtId!=null&&(P=de.numFmtId),d.cellStyles&&de.fillId!=null&&(D=de.fillId))),Xre(T,P,D,d,h,f),d.cellDates&&X&&T.t=="n"&&jv(Yr[P])&&(T.t="d",T.v=p4(T.v)),C.cm&&d.xlmeta){var te=(d.xlmeta.Cell||[])[+C.cm-1];te&&te.type=="XLDAPR"&&(T.D=!0)}if(ce){var Q=Cs(C.r);u[Q.r]||(u[Q.r]=[]),u[Q.r][Q.c]=T}else u[C.r]=T}}}}J.length>0&&(u["!rows"]=J)}}();function xDe(t,e,r,n){var a=[],s=[],i=qn(t["!ref"]),l="",c,u="",d=[],A=0,h=0,f=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=_s(h);for(A=i.s.r;A<=i.e.r;++A){for(s=[],u=ri(A),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[A]||[])[h]:t[c];y!==void 0&&(l=pDe(y,c,t,e))!=null&&s.push(l)}(s.length>0||f&&f[A])&&(p={r:u},f&&f[A]&&(g=f[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=tb(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=hr("row",s.join(""),p))}if(f)for(;A<f.length;++A)f&&f[A]&&(p={r:A+1},g=f[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=tb(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=hr("row","",p));return a.join("")}function Jre(t,e,r,n){var a=[ai,hr("worksheet",null,{xmlns:qp[0],"xmlns:r":Fi.r})],s=r.SheetNames[t],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=qn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=fn(d)}n||(n={}),c["!comments"]=[];var A=[];rDe(c,r,t,e,a),a[a.length]=hr("dimension",null,{ref:u}),a[a.length]=mDe(c,e,t,r),e.sheetFormat&&(a[a.length]=hr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=uDe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=xDe(c,e),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=sDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=ADe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=eDe(c["!merges"]));var h=-1,f,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(f={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=pa(n,-1,ya(p[1].Target).replace(/#.*$/,""),Cn.HLINK),f["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(f.location=ya(p[1].Target.slice(h+1))),p[1].Tooltip&&(f.tooltip=ya(p[1].Tooltip)),a[a.length]=hr("hyperlink",null,f))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=lDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Do("ignoredErrors",hr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),A.length>0&&(m=pa(n,-1,"../drawings/drawing"+(t+1)+".xml",Cn.DRAW),a[a.length]=hr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=A),c["!comments"].length>0&&(m=pa(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Cn.VML),a[a.length]=hr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function vDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function yDe(t,e,r){var n=Lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=tb(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var A=-1,h=-1,f=d<<10;f<d+1<<10;++f){u.c=f;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Jr(u)];m&&(A<0&&(A=f),h=f)}A<0||(++l,n.write_shift(4,A),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function bDe(t,e,r,n){var a=yDe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Jt(t,0,a)}var wDe=Yp,NDe=Ov;function _De(){}function CDe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=ITe(t),r}function EDe(t,e,r){r==null&&(r=Lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return rS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),zte(t,r),r.slice(0,r.l)}function SDe(t){var e=Vu(t);return[e]}function IDe(t,e,r){return r==null&&(r=Lt(8)),zp(e,r)}function BDe(t){var e=Wp(t);return[e]}function TDe(t,e,r){return r==null&&(r=Lt(4)),Xp(e,r)}function PDe(t){var e=Vu(t),r=t.read_shift(1);return[e,r,"b"]}function jDe(t,e,r){return r==null&&(r=Lt(9)),zp(e,r),r.write_shift(1,t.v?1:0),r}function kDe(t){var e=Wp(t),r=t.read_shift(1);return[e,r,"b"]}function FDe(t,e,r){return r==null&&(r=Lt(5)),Xp(e,r),r.write_shift(1,t.v?1:0),r}function ODe(t){var e=Vu(t),r=t.read_shift(1);return[e,r,"e"]}function DDe(t,e,r){return r==null&&(r=Lt(9)),zp(e,r),r.write_shift(1,t.v),r}function RDe(t){var e=Wp(t),r=t.read_shift(1);return[e,r,"e"]}function MDe(t,e,r){return r==null&&(r=Lt(8)),Xp(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function LDe(t){var e=Vu(t),r=t.read_shift(4);return[e,r,"s"]}function UDe(t,e,r){return r==null&&(r=Lt(12)),zp(e,r),r.write_shift(4,e.v),r}function QDe(t){var e=Wp(t),r=t.read_shift(4);return[e,r,"s"]}function VDe(t,e,r){return r==null&&(r=Lt(8)),Xp(e,r),r.write_shift(4,e.v),r}function HDe(t){var e=Vu(t),r=ul(t);return[e,r,"n"]}function $De(t,e,r){return r==null&&(r=Lt(16)),zp(e,r),_p(t.v,r),r}function Zre(t){var e=Wp(t),r=ul(t);return[e,r,"n"]}function KDe(t,e,r){return r==null&&(r=Lt(12)),Xp(e,r),_p(t.v,r),r}function GDe(t){var e=Vu(t),r=Y6(t);return[e,r,"n"]}function qDe(t,e,r){return r==null&&(r=Lt(12)),zp(e,r),Wte(t.v,r),r}function zDe(t){var e=Wp(t),r=Y6(t);return[e,r,"n"]}function WDe(t,e,r){return r==null&&(r=Lt(8)),Xp(e,r),Wte(t.v,r),r}function XDe(t){var e=Vu(t),r=z6(t);return[e,r,"is"]}function YDe(t){var e=Vu(t),r=Al(t);return[e,r,"str"]}function JDe(t,e,r){return r==null&&(r=Lt(12+4*t.v.length)),zp(e,r),oo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function ZDe(t){var e=Wp(t),r=Al(t);return[e,r,"str"]}function eRe(t,e,r){return r==null&&(r=Lt(8+4*t.v.length)),Xp(e,r),oo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function tRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=v4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function rRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=v4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function nRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=ul(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=v4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}function aRe(t,e,r){var n=t.l+e,a=Vu(t);a.r=r["!row"];var s=Al(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=v4(t,n-t.l,r);i[3]=ol(l,null,a,r.supbooks,r)}else t.l=n;return i}var sRe=Yp,iRe=Ov;function oRe(t,e){return e==null&&(e=Lt(4)),e.write_shift(4,t),e}function lRe(t,e){var r=t.l+e,n=Yp(t),a=W6(t),s=Al(t),i=Al(t),l=Al(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function cRe(t,e){var r=Lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Ov({s:Cs(t[0]),e:Cs(t[0])},r),X6("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return oo(a||"",r),oo(t[1].Tooltip||"",r),oo("",r),r.slice(0,r.l)}function uRe(){}function dRe(t,e,r){var n=t.l+e,a=Xte(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=O6e(t,n-t.l,r);i[1]=l}else t.l=n;return i}function ARe(t,e,r){var n=t.l+e,a=Yp(t),s=[a];if(r.cellFormula){var i=R6e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function fRe(t,e,r){r==null&&(r=Lt(18));var n=y4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var ene=["left","right","top","bottom","header","footer"];function hRe(t){var e={};return ene.forEach(function(r){e[r]=ul(t)}),e}function mRe(t,e){return e==null&&(e=Lt(6*8)),ep(t),ene.forEach(function(r){_p(t[r],e)}),e}function pRe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function gRe(t,e,r){r==null&&(r=Lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function xRe(t){var e=Lt(24);return e.write_shift(4,4),e.write_shift(4,1),Ov(t,e),e}function vRe(t,e){return e==null&&(e=Lt(16*4+2)),e.write_shift(2,t.password?nD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function yRe(){}function bRe(){}function wRe(t,e,r,n,a,s,i){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,h=!1,f,m,p,g,x,y,b,w,I,T=[];l.biff=12,l["!row"]=0;var C=0,E=!1,S=[],O={},B=l.supbooks||a.supbooks||[[]];if(B.sharedf=O,B.arrayf=S,B.SheetNames=a.SheetNames||a.Sheets.map(function(ce){return ce.name}),!l.supbooks&&(l.supbooks=B,a.Names))for(var P=0;P<a.Names.length;++P)B[0][P+1]=a.Names[P];var D=[],X=[],de=!1;rb[16]={n:"BrtShortReal",f:Zre};var re;if(Uf(t,function(J,pe,Se){if(!h)switch(Se){case 148:u=J;break;case 0:f=J,l.sheetRows&&l.sheetRows<=f.r&&(h=!0),w=ri(g=f.r),l["!row"]=f.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=nv(J.hpt)),X[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:J[2]},J[2]){case"n":m.v=J[1];break;case"s":b=Jy[J[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!J[1];break;case"e":m.v=J[1],l.cellText!==!1&&(m.w=Qf[m.v]);break;case"str":m.t="s",m.v=J[1];break;case"is":m.t="s",m.v=J[1].t;break}if((p=i.CellXf[J[0].iStyleRef])&&Xre(m,p.numFmtId,null,l,s,i),x=J[0].c==-1?x+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[_s(x)+w]=m,l.cellFormula){for(E=!1,C=0;C<S.length;++C){var k=S[C];f.r>=k[0].s.r&&f.r<=k[0].e.r&&x>=k[0].s.c&&x<=k[0].e.c&&(m.F=fn(k[0]),E=!0)}!E&&J.length>3&&(m.f=J[3])}if(d.s.r>f.r&&(d.s.r=f.r),d.s.c>x&&(d.s.c=x),d.e.r<f.r&&(d.e.r=f.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&jv(Yr[p.numFmtId])){var F=Rm(m.v);F&&(m.t="d",m.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}re&&(re.type=="XLDAPR"&&(m.D=!0),re=void 0);break;case 1:case 12:if(!l.sheetStubs||A)break;m={t:"z",v:void 0},x=J[0].c==-1?x+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[_s(x)+w]=m,d.s.r>f.r&&(d.s.r=f.r),d.s.c>x&&(d.s.c=x),d.e.r<f.r&&(d.e.r=f.r),d.e.c<x&&(d.e.c=x),re&&(re.type=="XLDAPR"&&(m.D=!0),re=void 0);break;case 176:T.push(J);break;case 49:re=((l.xlmeta||{}).Cell||[])[J-1];break;case 494:var H=n["!id"][J.relId];for(H?(J.Target=H.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=H):J.relId==""&&(J.Target="#"+J.loc),g=J.rfx.s.r;g<=J.rfx.e.r;++g)for(x=J.rfx.s.c;x<=J.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=J):(y=Jr({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=J);break;case 426:if(!l.cellFormula)break;S.push(J),I=l.dense?c[g][x]:c[_s(x)+w],I.f=ol(J[1],d,{r:f.r,c:x},B,l),I.F=fn(J[0]);break;case 427:if(!l.cellFormula)break;O[Jr(J[0].s)]=J[1],I=l.dense?c[g][x]:c[_s(x)+w],I.f=ol(J[1],d,{r:f.r,c:x},B,l);break;case 60:if(!l.cellStyles)break;for(;J.e>=J.s;)D[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},de||(de=!0,aD(J.w/256)),j0(D[J.e+1]);break;case 161:c["!autofilter"]={ref:fn(J)};break;case 476:c["!margins"]=J;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),J.name&&(a.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),J.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!pe.T){if(!A||l.WTF)throw new Error("Unexpected record 0x"+Se.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=fn(u||d)),l.sheetRows&&c["!ref"]){var ie=qn(c["!ref"]);l.sheetRows<=+ie.e.r&&(ie.e.r=l.sheetRows-1,ie.e.r>d.e.r&&(ie.e.r=d.e.r),ie.e.r<ie.s.r&&(ie.s.r=ie.e.r),ie.e.c>d.e.c&&(ie.e.c=d.e.c),ie.e.c<ie.s.c&&(ie.s.c=ie.e.c),c["!fullref"]=c["!ref"],c["!ref"]=fn(ie))}return T.length>0&&(c["!merges"]=T),D.length>0&&(c["!cols"]=D),X.length>0&&(c["!rows"]=X),c}function NRe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ts(e),e.z=e.z||Yr[14],e.v=Li(es(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=W0(a.cellXfs,e,a),e.l&&s["!links"].push([Jr(c),e.l]),e.c&&s["!comments"].push([Jr(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=cD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,i?Jt(t,18,VDe(e,c)):Jt(t,7,UDe(e,c))):(c.t="str",i?Jt(t,17,eRe(e,c)):Jt(t,6,JDe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Jt(t,13,WDe(e,c)):Jt(t,2,qDe(e,c)):i?Jt(t,16,KDe(e,c)):Jt(t,5,$De(e,c)),!0;case"b":return c.t="b",i?Jt(t,15,FDe(e,c)):Jt(t,4,jDe(e,c)),!0;case"e":return c.t="e",i?Jt(t,14,MDe(e,c)):Jt(t,3,DDe(e,c)),!0}return i?Jt(t,12,TDe(e,c)):Jt(t,1,IDe(e,c)),!0}function _Re(t,e,r,n){var a=qn(e["!ref"]||"A1"),s,i="",l=[];Jt(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=ri(d),bDe(t,e,a,d);var A=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=_s(h)),s=l[h]+i;var f=c?(e[d]||[])[h]:e[s];if(!f){A=!1;continue}A=NRe(t,f,d,h,n,e,A)}}Jt(t,146)}function CRe(t,e){!e||!e["!merges"]||(Jt(t,177,oRe(e["!merges"].length)),e["!merges"].forEach(function(r){Jt(t,176,iRe(r))}),Jt(t,178))}function ERe(t,e){!e||!e["!cols"]||(Jt(t,390),e["!cols"].forEach(function(r,n){r&&Jt(t,60,fRe(n,r))}),Jt(t,391))}function SRe(t,e){!e||!e["!ref"]||(Jt(t,648),Jt(t,649,xRe(qn(e["!ref"]))),Jt(t,650))}function IRe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=pa(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Jt(t,494,cRe(n,a))}}),delete e["!links"]}function BRe(t,e,r,n){if(e["!comments"].length>0){var a=pa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Jt(t,551,X6("rId"+a)),e["!legacy"]=a}}function TRe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:fn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=dc(s);l.s.r==l.e.r&&(l.e.r=dc(e["!ref"]).e.r,s=fn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Jt(t,161,Ov(qn(s))),Jt(t,162)}}function PRe(t,e,r){Jt(t,133),Jt(t,137,gRe(e,r)),Jt(t,138),Jt(t,134)}function jRe(t,e){e["!protect"]&&Jt(t,535,vRe(e["!protect"]))}function kRe(t,e,r,n){var a=uc(),s=r.SheetNames[t],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=qn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Jt(a,129),(r.vbaraw||i["!outline"])&&Jt(a,147,EDe(l,i["!outline"])),Jt(a,148,NDe(c)),PRe(a,i,r.Workbook),ERe(a,i),_Re(a,i,t,e),jRe(a,i),TRe(a,i,r,t),CRe(a,i),IRe(a,i,n),i["!margins"]&&Jt(a,476,mRe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&SRe(a,i),BRe(a,i,t,n),Jt(a,130),a.end()}function FRe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=Gn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function ORe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var h=FRe(A);d.s.r=d.s.c=0,d.e.c=l,u=_s(l),h[0].forEach(function(f,m){i[u+ri(m)]={t:"n",v:f,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=fn(d)),i}function DRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=t.match(Yre);return l&&uD(l[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function RRe(t,e){t.l+=10;var r=Al(t);return{name:r}}function MRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Uf(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var dD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],LRe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],URe=[],QRe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function mH(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Xa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function pH(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Xa(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function tne(t){pH(t.WBProps,dD),pH(t.CalcPr,QRe),mH(t.WBView,LRe),mH(t.Sheets,URe),kx.date1904=Xa(t.WBProps.date1904)}function VRe(t){return!t.Workbook||!t.Workbook.WBProps?"false":Xa(t.Workbook.WBProps.date1904)?"true":"false"}var HRe="][*?/\\".split("");function rne(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return HRe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function $Re(t,e,r){t.forEach(function(n,a){rne(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function KRe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];$Re(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)V6e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var GRe=/<\w+:workbook/;function qRe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(gl,function(c,u){var d=Zr(c);switch(NA(d[0])){case"<?xml":break;case"<workbook":c.match(GRe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":dD.forEach(function(A){if(d[A[0]]!=null)switch(A[2]){case"bool":r.WBProps[A[0]]=Xa(d[A[0]]);break;case"int":r.WBProps[A[0]]=parseInt(d[A[0]],10);break;default:r.WBProps[A[0]]=d[A[0]]}}),d.codeName&&(r.WBProps.CodeName=Sa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Gn(Sa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Sa(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Xa(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Gn(Sa(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),qp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return tne(r),r}function nne(t){var e=[ai];e[e.length]=hr("workbook",null,{xmlns:qp[0],"xmlns:r":Fi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(dD.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=hr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:ya(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=hr("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=hr("definedName",ya(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function zRe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Yj(t),r.name=Al(t),r}function WRe(t,e){return e||(e=Lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),X6(t.strRelID,e),oo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function XRe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Al(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function YRe(t,e){e||(e=Lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),zte(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function JRe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function ZRe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=BTe(t),i=D6e(t,0,r),l=W6(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function e8e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],rb[16]={n:"BrtFRTArchID$",f:JRe},Uf(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=ol(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),tne(r),r.Names=s,r.supbooks=i,r}function t8e(t,e){Jt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Jt(t,156,WRe(a))}Jt(t,144)}function r8e(t,e){e||(e=Lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return oo("SheetJS",e),oo(WE.version,e),oo(WE.version,e),oo("7262",e),e.length>e.l?e.slice(0,e.l):e}function n8e(t,e){e||(e=Lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function a8e(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Jt(t,135),Jt(t,158,n8e(a)),Jt(t,136))}}function s8e(t,e){var r=uc();return Jt(r,131),Jt(r,128,r8e()),Jt(r,153,YRe(t.Workbook&&t.Workbook.WBProps||null)),a8e(r,t),t8e(r,t),Jt(r,132),r.end()}function i8e(t,e,r){return e.slice(-4)===".bin"?e8e(t,r):qRe(t,r)}function o8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?wRe(t,n,r,a,s,i,l):Z6e(t,n,r,a,s,i,l)}function l8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?MRe(t,n,r,a,s):DRe(t,n,r,a,s)}function c8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?dOe():AOe()}function u8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?cOe():uOe()}function d8e(t,e,r,n){return e.slice(-4)===".bin"?iFe(t,r,n):zke(t,r,n)}function A8e(t,e,r){return Rre(t,r)}function f8e(t,e,r){return e.slice(-4)===".bin"?fke(t,r):uke(t,r)}function h8e(t,e,r){return e.slice(-4)===".bin"?aOe(t,r):WFe(t,r)}function m8e(t,e,r){return e.slice(-4)===".bin"?GFe(t):$Fe(t)}function p8e(t,e,r,n){return r.slice(-4)===".bin"?qFe(t,e,r,n):void 0}function g8e(t,e,r){return e.slice(-4)===".bin"?QFe(t,e,r):HFe(t,e,r)}function x8e(t,e,r){return(e.slice(-4)===".bin"?s8e:nne)(t)}function v8e(t,e,r,n,a){return(e.slice(-4)===".bin"?kRe:Jre)(t,r,n,a)}function y8e(t,e,r){return(e.slice(-4)===".bin"?pFe:Ore)(t,r)}function b8e(t,e,r){return(e.slice(-4)===".bin"?pke:Sre)(t,r)}function w8e(t,e,r){return(e.slice(-4)===".bin"?sOe:Ure)(t)}function N8e(t){return(t.slice(-4)===".bin"?VFe:Mre)()}var ane=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,sne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function rd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(ane),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(sne),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function _8e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(ane),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(sne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var e2;function C8e(t,e){var r=e2[t]||Gn(t);return r==="General"?wp(e):Mu(r,e)}function E8e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Xa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=es(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Gn(e)]=a}function S8e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Qf[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=q2(t.v):t.w=wp(t.v):t.w=C8e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=e2[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&jv(n)){var a=Rm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function I8e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Uke[n.Pattern]||n.Pattern)}t[e.ID]=e}function B8e(t,e,r,n,a,s,i,l,c,u){var d="General",A=n.StyleID,h={};u=u||{};var f=[],m=0;for(A===void 0&&l&&(A=l.StyleID),A===void 0&&i&&(A=i.StyleID);s[A]!==void 0&&(s[A].nf&&(d=s[A].nf),s[A].Interior&&f.push(s[A].Interior),!!s[A].Parent);)A=s[A].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Xa(t);break;case"String":n.t="s",n.r=kV(Gn(t)),n.v=t.indexOf("<")>-1?Gn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(es(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Gn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Zte[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=kV(e||t));break}if(S8e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=Gn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=jx(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=jx("RC:RC",a):n.ArrayRange&&(n.F=jx(n.ArrayRange,a),c.push([qn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(f.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function T8e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function GB(t,e){var r=e||{};kv();var n=my(H6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Sa(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ts(r);return i.type="string",rv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){a.indexOf("<"+Le)>=0&&(s=!0)}),s)return mMe(n,r);e2={"General Number":"General","General Date":Yr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Yr[15],"Short Date":Yr[14],"Long Time":Yr[19],"Medium Time":Yr[18],"Short Time":Yr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Yr[2],Standard:Yr[4],Percent:Yr[10],Scientific:Yr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},A=[],h=r.dense?[]:{},f="",m={},p={},g=rd('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},I={},T={},C="",E=0,S=[],O={},B={},P=0,D=[],X=[],de={},re=[],ie,ce=!1,J=[],pe=[],Se={},k=0,F=0,H={Sheets:[],WBProps:{date1904:!1}},M={};X2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var L="";l=X2.exec(n);)switch(l[3]=(L=l[3]).toLowerCase()){case"data":if(L=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?B8e(n.slice(x,l.index),C,g,c[c.length-1][0]=="comment"?de:m,{c:y,r:b},I,re[y],p,J,r):(C="",g=rd(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(X.length>0&&(m.c=X),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[_s(y)+ri(b)]=m),m.HRef&&(m.l={Target:Gn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(k=y+(parseInt(m.MergeAcross,10)|0),F=b+(parseInt(m.MergeDown,10)|0),S.push({s:{c:y,r:b},e:{c:k,r:F}})),!r.sheetStubs)m.MergeAcross?y=k+1:++y;else if(m.MergeAcross||m.MergeDown){for(var z=y;z<=k;++z)for(var R=b;R<=F;++R)(z>y||R>b)&&(r.dense?(h[R]||(h[R]=[]),h[R][z]={t:"z"}):h[_s(z)+ri(R)]={t:"z"});y=k+1}else++y;else m=_8e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,X=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=rd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=rd(l[0]),p.Index&&(b=+p.Index-1),Se={},(p.AutoFitHeight=="0"||p.Height)&&(Se.hpx=parseInt(p.Height,10),Se.hpt=tb(Se.hpx),pe[b]=Se),p.Hidden=="1"&&(Se.hidden=!0,pe[b]=Se));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));A.push(f),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=fn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=fn(w))),S.length&&(h["!merges"]=S),re.length>0&&(h["!cols"]=re),pe.length>0&&(h["!rows"]=pe),d[f]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=rd(l[0]),f=Gn(u.Name),h=r.dense?[]:{},S=[],J=[],pe=[],M={name:f,Hidden:0},H.Sheets.push(M);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),re=[],ce=!1}break;case"style":l[1]==="/"?I8e(I,T,r):T=rd(l[0]);break;case"numberformat":T.nf=Gn(rd(l[0]).Format||"General"),e2[T.nf]&&(T.nf=e2[T.nf]);for(var G=0;G!=392&&Yr[G]!=T.nf;++G);if(G==392){for(G=57;G!=392;++G)if(Yr[G]==null){hf(T.nf,G);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(ie=rd(l[0]),ie.Hidden&&(ie.hidden=!0,delete ie.Hidden),ie.Width&&(ie.wpx=parseInt(ie.Width,10)),!ce&&ie.wpx>10){ce=!0,cl=kre;for(var ee=0;ee<re.length;++ee)re[ee]&&j0(re[ee])}ce&&j0(ie),re[ie.Index-1||re.length]=ie;for(var te=0;te<+ie.Span;++te)re[re.length]=ts(ie);break;case"namedrange":if(l[1]==="/")break;H.Names||(H.Names=[]);var Q=Zr(l[0]),xe={Name:Q.Name,Ref:jx(Q.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(xe.Sheet=H.Sheets.length-1),H.Names.push(xe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C+=n.slice(E,l.index):E=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;T.Interior=rd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?ePe(O,L,n.slice(P,l.index)):P=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));T8e(de),X.push(de)}else c.push([l[3],!1]),u=rd(l[0]),de={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Y=rd(l[0]);h["!autofilter"]={ref:jx(Y.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return bH(n,r);var W=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:W=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:W=!1}break;case"excelworkbook":switch(l[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:W=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:W=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(P,l.index)){case"SheetHidden":M.Hidden=1;break;case"SheetVeryHidden":M.Hidden=2;break}else P=l.index+l[0].length;break;case"header":h["!margins"]||ep(h["!margins"]={},"xlml"),isNaN(+Zr(l[0]).Margin)||(h["!margins"].header=+Zr(l[0]).Margin);break;case"footer":h["!margins"]||ep(h["!margins"]={},"xlml"),isNaN(+Zr(l[0]).Margin)||(h["!margins"].footer=+Zr(l[0]).Margin);break;case"pagemargins":var le=Zr(l[0]);h["!margins"]||ep(h["!margins"]={},"xlml"),isNaN(+le.Top)||(h["!margins"].top=+le.Top),isNaN(+le.Left)||(h["!margins"].left=+le.Left),isNaN(+le.Right)||(h["!margins"].right=+le.Right),isNaN(+le.Bottom)||(h["!margins"].bottom=+le.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:W=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:W=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:W=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:W=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:W=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:W=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:W=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:W=!1}break;case"smarttags":break;default:W=!1;break}if(W||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?E8e(B,L,D,n.slice(P,l.index)):(D=l,P=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Pe={};return!r.bookSheets&&!r.bookProps&&(Pe.Sheets=d),Pe.SheetNames=A,Pe.Workbook=H,Pe.SSF=ts(Yr),Pe.Props=O,Pe.Custprops=B,Pe}function ak(t,e){switch(fD(e=e||{}),e.type||"base64"){case"base64":return GB(Gc(t),e);case"binary":case"buffer":case"file":return GB(t,e);case"array":return GB(q0(t),e)}}function P8e(t,e){var r=[];return t.Props&&r.push(tPe(t.Props,e)),t.Custprops&&r.push(rPe(t.Props,t.Custprops)),r.join("")}function j8e(){return""}function k8e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(hr("NumberFormat",null,{"ss:Format":ya(Yr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(hr("Style",s.join(""),i))}),hr("Styles",r.join(""))}function ine(t){return hr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+oD(t.Ref,{r:0,c:0})})}function F8e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(ine(a)))}return hr("Names",r.join(""))}function O8e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(ine(l)))}return s.join("")}function D8e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(hr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(hr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(hr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(hr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Do("ProtectContents","True")),t["!protect"].objects&&a.push(Do("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Do("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Do("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Do("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":hr("WorksheetOptions",a.join(""),{xmlns:jc.x})}function R8e(t){return t.map(function(e){var r=aTe(e.t||""),n=hr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return hr("Comment",n,{"ss:Author":e.a})}).join("")}function M8e(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ya(oD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=Cs(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ya(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ya(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var A="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":A="Number",h=String(t.v);break;case"b":A="Boolean",h=t.v?"1":"0";break;case"e":A="Error",h=Qf[t.v];break;case"d":A="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Yr[14]);break;case"s":A="String",h=nTe(t.v||"");break}var f=W0(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+f),l["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+A+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=R8e(t.c)),hr("Cell",p,l)}function L8e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=nv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function U8e(t,e,r,n){if(!t["!ref"])return"";var a=qn(t["!ref"]),s=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){j0(g);var y=!!g.width,b=y4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=Z2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(hr("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[L8e(u,(t["!rows"]||[])[u])],A=a.s.c;A<=a.e.c;++A){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>A)&&!(s[i].s.r>u)&&!(s[i].e.c<A)&&!(s[i].e.r<u)){(s[i].s.c!=A||s[i].s.r!=u)&&(h=!0);break}if(!h){var f={r:u,c:A},m=Jr(f),p=c?(t[u]||[])[A]:t[m];d.push(M8e(p,m,t,e,r,n,f))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function Q8e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?O8e(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?U8e(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(D8e(s,e,t,r)),n.join("")}function V8e(t,e){e||(e={}),t.SSF||(t.SSF=ts(Yr)),t.SSF&&(kv(),f4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],W0(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(P8e(t,e)),r.push(j8e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(hr("Worksheet",Q8e(n,e,t),{"ss:Name":ya(t.SheetNames[n])}));return r[2]=k8e(t,e),r[3]=F8e(t),ai+hr("Workbook",r.join(""),{xmlns:jc.ss,"xmlns:o":jc.o,"xmlns:x":jc.x,"xmlns:ss":jc.ss,"xmlns:dt":jc.dt,"xmlns:html":jc.html})}function H8e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=FTe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=OTe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var $8e=[60,1084,2066,2165,2175];function K8e(t,e,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=rf(r,r.l),u=sk[c],d=0;u!=null&&$8e.indexOf(c)>-1;)s=rf(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=sk[c=rf(r,r.l)];var A=so(i);Fo(A,0);var h=0;A.lens=[];for(var f=0;f<i.length;++f)A.lens.push(h),h+=i[f].length;if(A.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+A.length+" < "+n;return e.f(A,A.length,a)}function qd(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Yr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Qf[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=q2(t.v):t.w=wp(t.v):t.w=Mu(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&jv(Yr[n]||String(n))){var a=Rm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function x_(t,e,r){return{v:t,ixfe:e,t:r}}function G8e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},l=null,c=[],u="",d={},A,h="",f,m,p,g,x={},y=[],b,w,I=[],T=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},S=function(he){return he<8?Ym[he]:he<64&&T[he-8]||Ym[he]},O=function(he,oe,je){var Qe=oe.XF.data;if(!(!Qe||!Qe.patternType||!je||!je.cellStyles)){oe.s={},oe.s.patternType=Qe.patternType;var tt;(tt=J2(S(Qe.icvFore)))&&(oe.s.fgColor={rgb:tt}),(tt=J2(S(Qe.icvBack)))&&(oe.s.bgColor={rgb:tt})}},B=function(he,oe,je){if(!(Se>1)&&!(je.sheetRows&&he.r>=je.sheetRows)){if(je.cellStyles&&oe.XF&&oe.XF.data&&O(he,oe,je),delete oe.ixfe,delete oe.XF,A=he,h=Jr(he),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),he.r<i.s.r&&(i.s.r=he.r),he.c<i.s.c&&(i.s.c=he.c),he.r+1>i.e.r&&(i.e.r=he.r+1),he.c+1>i.e.c&&(i.e.c=he.c+1),je.cellFormula&&oe.f){for(var Qe=0;Qe<y.length;++Qe)if(!(y[Qe][0].s.c>he.c||y[Qe][0].s.r>he.r)&&!(y[Qe][0].e.c<he.c||y[Qe][0].e.r<he.r)){oe.F=fn(y[Qe][0]),(y[Qe][0].s.c!=he.c||y[Qe][0].s.r!=he.r)&&delete oe.f,oe.f&&(oe.f=""+ol(y[Qe][1],i,he,J,P));break}}je.dense?(a[he.r]||(a[he.r]=[]),a[he.r][he.c]=oe):a[h]=oe}},P={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(P.password=e.password);var D,X=[],de=[],re=[],ie=[],ce=!1,J=[];J.SheetNames=P.snames,J.sharedf=P.sharedf,J.arrayf=P.arrayf,J.names=[],J.XTI=[];var pe=0,Se=0,k=0,F=[],H=[],M;P.codepage=1200,fd(1200);for(var L=!1;t.l<t.length-1;){var z=t.l,R=t.read_shift(2);if(R===0&&pe===10)break;var G=t.l===t.length?0:t.read_shift(2),ee=sk[R];if(ee&&ee.f){if(e.bookSheets&&pe===133&&R!==133)break;if(pe=R,ee.r===2||ee.r==12){var te=t.read_shift(2);if(G-=2,!P.enc&&te!==R&&((te&255)<<8|te>>8)!==R)throw new Error("rt mismatch: "+te+"!="+R);ee.r==12&&(t.l+=10,G-=10)}var Q={};if(R===10?Q=ee.f(t,G,P):Q=K8e(R,ee,t,G,P),Se==0&&[9,521,1033,2057].indexOf(pe)===-1)continue;switch(R){case 34:r.opts.Date1904=C.WBProps.date1904=Q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(t.l=0),P.enc=Q,!e.password)throw new Error("File is password-protected");if(Q.valid==null)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=Q;break;case 66:var xe=Number(Q);switch(xe){case 21010:xe=1200;break;case 32768:xe=1e4;break;case 32769:xe=1252;break}fd(P.codepage=xe),L=!0;break;case 317:P.rrtabid=Q;break;case 25:P.winlocked=Q;break;case 439:r.opts.RefreshAll=Q;break;case 12:r.opts.CalcCount=Q;break;case 16:r.opts.CalcDelta=Q;break;case 17:r.opts.CalcIter=Q;break;case 13:r.opts.CalcMode=Q;break;case 14:r.opts.CalcPrecision=Q;break;case 95:r.opts.CalcSaveRecalc=Q;break;case 15:P.CalcRefMode=Q;break;case 2211:r.opts.FullCalc=Q;break;case 129:Q.fDialog&&(a["!type"]="dialog"),Q.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),Q.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:I.push(Q);break;case 430:J.push([Q]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(Q);break;case 24:case 536:M={Name:Q.Name,Ref:ol(Q.rgce,i,null,J,P)},Q.itab>0&&(M.Sheet=Q.itab-1),J.names.push(M),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(Q),Q.Name=="_xlnm._FilterDatabase"&&Q.itab>0&&Q.rgce&&Q.rgce[0]&&Q.rgce[0][0]&&Q.rgce[0][0][0]=="PtgArea3d"&&(H[Q.itab-1]={ref:fn(Q.rgce[0][0][1][2])});break;case 22:P.ExternCount=Q;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(Q),J.XTI=J.XTI.concat(Q);break;case 2196:if(P.biff<8)break;M!=null&&(M.Comment=Q[1]);break;case 18:a["!protect"]=Q;break;case 19:Q!==0&&P.WTF&&console.error("Password verifier: "+Q);break;case 133:s[Q.pos]=Q,P.snames.push(Q.name);break;case 10:{if(--Se)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=fn(i),e.sheetRows&&e.sheetRows<=i.e.r){var Y=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=fn(i),i.e.r=Y}i.e.r++,i.e.c++}X.length>0&&(a["!merges"]=X),de.length>0&&(a["!objects"]=de),re.length>0&&(a["!cols"]=re),ie.length>0&&(a["!rows"]=ie),C.Sheets.push(E)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[R]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Q.BIFFVer]||8),P.biffguess=Q.BIFFVer==0,Q.BIFFVer==0&&Q.dt==4096&&(P.biff=5,L=!0,fd(P.codepage=28591)),P.biff==8&&Q.BIFFVer==0&&Q.dt==16&&(P.biff=2),Se++)break;if(a=e.dense?[]:{},P.biff<8&&!L&&(L=!0,fd(P.codepage=e.codepage||1252)),P.biff<5||Q.BIFFVer==0&&Q.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var W={pos:t.l-G,name:u};s[W.pos]=W,P.snames.push(u)}else u=(s[z]||{name:""}).name;Q.dt==32&&(a["!type"]="chart"),Q.dt==64&&(a["!type"]="macro"),X=[],de=[],P.arrayf=y=[],re=[],ie=[],ce=!1,E={Hidden:(s[z]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[Q.r]||[])[Q.c]:a[Jr({c:Q.c,r:Q.r})])&&++Q.c,b={ixfe:Q.ixfe,XF:I[Q.ixfe]||{},v:Q.val,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 5:case 517:b={ixfe:Q.ixfe,XF:I[Q.ixfe],v:Q.val,t:Q.t},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 638:b={ixfe:Q.ixfe,XF:I[Q.ixfe],v:Q.rknum,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 189:for(var le=Q.c;le<=Q.C;++le){var Pe=Q.rkrec[le-Q.c][0];b={ixfe:Pe,XF:I[Pe],v:Q.rkrec[le-Q.c][1],t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:le,r:Q.r},b,e)}break;case 6:case 518:case 1030:{if(Q.val=="String"){l=Q;break}if(b=x_(Q.val,Q.cell.ixfe,Q.tt),b.XF=I[b.ixfe],e.cellFormula){var Le=Q.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var qe=Le[0][0][1][0],nt=Le[0][0][1][1],st=Jr({r:qe,c:nt});x[st]?b.f=""+ol(Q.formula,i,Q.cell,J,P):b.F=((e.dense?(a[qe]||[])[nt]:a[st])||{}).F}else b.f=""+ol(Q.formula,i,Q.cell,J,P)}k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B(Q.cell,b,e),l=Q}break;case 7:case 519:if(l)l.val=Q,b=x_(Q,l.cell.ixfe,"s"),b.XF=I[b.ixfe],e.cellFormula&&(b.f=""+ol(l.formula,i,l.cell,J,P)),k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(Q);var Et=Jr(Q[0].s);if(f=e.dense?(a[Q[0].s.r]||[])[Q[0].s.c]:a[Et],e.cellFormula&&f){if(!l||!Et||!f)break;f.f=""+ol(Q[1],i,Q[0],J,P),f.F=fn(Q[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!l)break;x[Jr(l.cell)]=Q[0],f=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[Jr(l.cell)],(f||{}).f=""+ol(Q[0],i,A,J,P)}}break;case 253:b=x_(c[Q.isst].t,Q.ixfe,"s"),c[Q.isst].h&&(b.h=c[Q.isst].h),b.XF=I[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:Q.ixfe,XF:I[Q.ixfe],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e));break;case 190:if(e.sheetStubs)for(var yt=Q.c;yt<=Q.C;++yt){var Ct=Q.ixfe[yt-Q.c];b={ixfe:Ct,XF:I[Ct],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:yt,r:Q.r},b,e)}break;case 214:case 516:case 4:b=x_(Q.val,Q.ixfe,"s"),b.XF=I[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),qd(b,e,r.opts.Date1904),B({c:Q.c,r:Q.r},b,e);break;case 0:case 512:Se===1&&(i=Q);break;case 252:c=Q;break;case 1054:if(P.biff==4){F[k++]=Q[1];for(var Ot=0;Ot<k+163&&Yr[Ot]!=Q[1];++Ot);Ot>=163&&hf(Q[1],k+163)}else hf(Q[1],Q[0]);break;case 30:{F[k++]=Q;for(var Pt=0;Pt<k+163&&Yr[Pt]!=Q;++Pt);Pt>=163&&hf(Q,k+163)}break;case 229:X=X.concat(Q);break;case 93:de[Q.cmo[0]]=P.lastobj=Q;break;case 438:P.lastobj.TxO=Q;break;case 127:P.lastobj.ImData=Q;break;case 440:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)f=e.dense?(a[g]||[])[p]:a[Jr({c:p,r:g})],f&&(f.l=Q[1]);break;case 2048:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)f=e.dense?(a[g]||[])[p]:a[Jr({c:p,r:g})],f&&f.l&&(f.l.Tooltip=Q[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;f=e.dense?(a[Q[0].r]||[])[Q[0].c]:a[Jr(Q[0])];var fe=de[Q[2]];f||(e.dense?(a[Q[0].r]||(a[Q[0].r]=[]),f=a[Q[0].r][Q[0].c]={t:"z"}):f=a[Jr(Q[0])]={t:"z"},i.e.r=Math.max(i.e.r,Q[0].r),i.s.r=Math.min(i.s.r,Q[0].r),i.e.c=Math.max(i.e.c,Q[0].c),i.s.c=Math.min(i.s.c,Q[0].c)),f.c||(f.c=[]),m={a:Q[1],t:fe.TxO.t},f.c.push(m)}break;case 2173:kFe(I[Q.ixfe],Q.ext);break;case 125:{if(!P.cellStyles)break;for(;Q.e>=Q.s;)re[Q.e--]={width:Q.w/256,level:Q.level||0,hidden:!!(Q.flags&1)},ce||(ce=!0,aD(Q.w/256)),j0(re[Q.e+1])}break;case 520:{var Ke={};Q.level!=null&&(ie[Q.r]=Ke,Ke.level=Q.level),Q.hidden&&(ie[Q.r]=Ke,Ke.hidden=!0),Q.hpt&&(ie[Q.r]=Ke,Ke.hpt=Q.hpt,Ke.hpx=nv(Q.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||ep(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[R]]=Q;break;case 161:a["!margins"]||ep(a["!margins"]={}),a["!margins"].header=Q.header,a["!margins"].footer=Q.footer;break;case 574:Q.RTL&&(C.Views[0].RTL=!0);break;case 146:T=Q;break;case 2198:D=Q;break;case 140:w=Q;break;case 442:u?E.CodeName=Q||E.name:C.WBProps.CodeName=Q||"ThisWorkbook";break}}else ee||console.error("Missing Info for XLS Record 0x"+R.toString(16)),t.l+=G}return r.SheetNames=Qs(s).sort(function(ve,he){return Number(ve)-Number(he)}).map(function(ve){return s[ve].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&H.forEach(function(ve,he){r.Sheets[r.SheetNames[he]]["!autofilter"]=ve}),r.Strings=c,r.SSF=ts(Yr),P.enc&&(r.Encryption=P.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),J.names.length>0&&(C.Names=J.names),r.Workbook=C,r}var t2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function q8e(t,e,r){var n=Gr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=YV(n,Jj,t2.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Gr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var l=YV(i,Zj,t2.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(sre(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function z8e(t,e){var r=[],n=[],a=[],s=0,i,l=SV(Jj,"n"),c=SV(Zj,"n");if(t.Props)for(i=Qs(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Qs(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Are.indexOf(a[s][0])>-1||are.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Gr.utils.cfb_add(e,"/SummaryInformation",JV(n,t2.SI,c,Zj)),(r.length||u.length)&&Gr.utils.cfb_add(e,"/DocumentSummaryInformation",JV(r,t2.DSI,l,Jj,u.length?u:null,t2.UDI))}function one(t,e){e||(e={}),fD(e),F6(),e.codepage&&k6(e.codepage);var r,n;if(t.FullPaths){if(Gr.find(t,"/encryption"))throw new Error("File is password-protected");r=Gr.find(t,"!CompObj"),n=Gr.find(t,"/Workbook")||Gr.find(t,"/Book")}else{switch(e.type){case"base64":t=Fc(Gc(t));break;case"binary":t=Fc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Fo(t,0),n={content:t}}var a,s;if(r&&H8e(r),e.bookProps&&!e.bookSheets)a={};else{var i=bn?"buffer":"array";if(n&&n.content)a=G8e(n.content,e);else if((s=Gr.find(t,"PerfectOffice_MAIN"))&&s.content)a=Zm.to_workbook(s.content,(e.type=i,e));else if((s=Gr.find(t,"NativeContent_MAIN"))&&s.content)a=Zm.to_workbook(s.content,(e.type=i,e));else throw(s=Gr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Gr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=oOe(t))}var l={};return t.FullPaths&&q8e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function W8e(t,e){var r=e||{},n=Gr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Gr.utils.cfb_add(n,a,lne(t,r)),r.biff==8&&(t.Props||t.Custprops)&&z8e(t,n),r.biff==8&&t.vbaraw&&lOe(n,Gr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var rb={0:{f:vDe},1:{f:SDe},2:{f:GDe},3:{f:ODe},4:{f:PDe},5:{f:HDe},6:{f:YDe},7:{f:LDe},8:{f:aRe},9:{f:nRe},10:{f:tRe},11:{f:rRe},12:{f:BDe},13:{f:zDe},14:{f:RDe},15:{f:kDe},16:{f:Zre},17:{f:ZDe},18:{f:QDe},19:{f:z6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ZRe},40:{},42:{},43:{f:Yke},44:{f:Wke},45:{f:eFe},46:{f:rFe},47:{f:tFe},48:{},49:{f:wTe},50:{},51:{f:DFe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Nre},62:{f:XDe},63:{f:KFe},64:{f:yRe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ml,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:pRe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:CDe},148:{f:wDe,p:16},151:{f:uRe},152:{},153:{f:XRe},154:{},155:{},156:{f:zRe},157:{},158:{},159:{T:1,f:Ake},160:{T:-1},161:{T:1,f:Yp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:sRe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:FFe},336:{T:-1},337:{f:LFe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Yj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:wre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:dRe},427:{f:ARe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:hRe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:_De},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:lRe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Yj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:rOe},633:{T:1},634:{T:-1},635:{T:1,f:eOe},636:{T:-1},637:{f:ETe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:RRe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:bRe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},sk={6:{f:$B},10:{f:_h},12:{f:ci},13:{f:ci},14:{f:zs},15:{f:zs},16:{f:ul},17:{f:zs},18:{f:zs},19:{f:ci},20:{f:aH},21:{f:aH},23:{f:wre},24:{f:iH},25:{f:zs},26:{},27:{},28:{f:bje},29:{},34:{f:zs},35:{f:sH},38:{f:ul},39:{f:ul},40:{f:ul},41:{f:ul},42:{f:zs},43:{f:zs},47:{f:kke},49:{f:zPe},51:{f:ci},60:{},61:{f:HPe},64:{f:zs},65:{f:qPe},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:jPe},93:{f:_je},94:{},95:{f:zs},96:{},97:{},99:{f:zs},125:{f:Nre},128:{f:cje},129:{f:FPe},130:{f:ci},131:{f:zs},132:{f:zs},133:{f:OPe},134:{},140:{f:jje},141:{f:ci},144:{},146:{f:Oje},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:Vje},161:{f:Mje},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:sje},190:{f:ije},193:{f:_h},197:{},198:{},199:{},200:{},201:{},202:{f:zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:zs},222:{},224:{f:lje},225:{f:PPe},226:{f:_h},227:{},229:{f:wje},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:RPe},253:{f:XPe},255:{f:LPe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:fre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zs},353:{f:_h},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:hje},431:{f:zs},432:{},433:{},434:{},437:{},438:{f:Sje},439:{f:zs},440:{f:Ije},441:{},442:{f:tw},443:{},444:{f:ci},445:{},446:{},448:{f:_h},449:{f:VPe,r:2},450:{f:_h},512:{f:tH},513:{f:Qje},515:{f:Aje},516:{f:JPe},517:{f:nH},519:{f:Hje},520:{f:UPe},523:{},545:{f:oH},549:{f:eH},566:{},574:{f:KPe},638:{f:aje},659:{},1048:{},1054:{f:eje},1084:{},1212:{f:xje},2048:{f:Tje},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:m_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:_h},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Dje,r:12},2173:{f:jFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:gje,r:12},2197:{},2198:{f:EFe,r:12},2199:{},2200:{},2201:{},2202:{f:vje,r:12},2203:{f:_h},2204:{},2205:{},2206:{},2207:{},2211:{f:QPe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Lje},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Fje},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:tH},1:{},2:{f:zje},3:{f:Gje},4:{f:Kje},5:{f:nH},7:{f:Xje},8:{},9:{f:m_},11:{},22:{f:ci},30:{f:rje},31:{},32:{},33:{f:oH},36:{},37:{f:eH},50:{f:Yje},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:$je},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Jje},223:{},234:{},354:{},421:{},518:{f:$B},521:{f:m_},536:{f:iH},547:{f:sH},561:{},579:{},1030:{f:$B},1033:{f:m_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function mr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&K6(r)&&t.push(r)}}function X8e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return mr(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function sw(t,e,r){return t||(t=Lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Y8e(t,e,r,n){var a=Lt(9);return sw(a,t,e),hre(r,n||"b",a),a}function J8e(t,e,r){var n=Lt(8+2*r.length);return sw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Z8e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Li(es(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?mr(t,2,Wje(r,n,a)):mr(t,3,qje(r,n,a));return;case"b":case"e":mr(t,5,Y8e(r,n,e.v,e.t));return;case"s":case"str":mr(t,4,J8e(r,n,(e.v||"").slice(0,255)));return}mr(t,1,sw(null,r,n))}function eMe(t,e,r,n){var a=Array.isArray(e),s=qn(e["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=fn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ri(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=_s(d)),i=c[d]+l;var A=a?(e[u]||[])[d]:e[i];A&&Z8e(t,A,u,d)}}}function tMe(t,e){for(var r=e||{},n=uc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return mr(n,r.biff==4?1033:r.biff==3?521:9,tD(t,16,r)),eMe(n,t.Sheets[t.SheetNames[a]],a,r),mr(n,10),n.end()}function rMe(t,e,r){mr(t,49,WPe({sz:12,name:"Arial"},r))}function nMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&mr(t,1054,tje(a,e[a],r))})}function aMe(t,e){var r=Lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),mr(t,2151,r),r=Lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),vre(qn(e["!ref"]||"A1"),r),r.write_shift(4,4),mr(t,2152,r)}function sMe(t,e){for(var r=0;r<16;++r)mr(t,224,rH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){mr(t,224,rH(n,0,e))})}function iMe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];mr(t,440,Bje(n)),n[1].Tooltip&&mr(t,2048,Pje(n))}delete e["!links"]}function oMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&mr(t,125,Rje(y4(a,n),a))})}}function lMe(t,e,r,n,a){var s=16+W0(a.cellXfs,e,a);if(e.v==null&&!e.bf){mr(t,513,Ep(r,n,s));return}if(e.bf)mr(t,6,F6e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Li(es(e.v)):e.v;mr(t,515,fje(r,n,i,s));break;case"b":case"e":mr(t,517,dje(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=cD(a.Strings,e.v,a.revStrings);mr(t,253,YPe(r,n,l,s))}else mr(t,516,ZPe(r,n,(e.v||"").slice(0,255),s,a));break;default:mr(t,513,Ep(r,n,s))}}function cMe(t,e,r){var n=uc(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,A="",h=[],f=qn(s["!ref"]||"A1"),m=u?65536:16384;if(f.e.c>255||f.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,m-1)}mr(n,2057,tD(r,16,e)),mr(n,13,bu(1)),mr(n,12,bu(100)),mr(n,15,jl(!0)),mr(n,17,jl(!1)),mr(n,16,_p(.001)),mr(n,95,jl(!0)),mr(n,42,jl(!1)),mr(n,43,jl(!1)),mr(n,130,bu(1)),mr(n,128,uje()),mr(n,131,jl(!1)),mr(n,132,jl(!1)),u&&oMe(n,s["!cols"]),mr(n,512,nje(f,e)),u&&(s["!links"]=[]);for(var p=f.s.r;p<=f.e.r;++p){A=ri(p);for(var g=f.s.c;g<=f.e.c;++g){p===f.s.r&&(h[g]=_s(g)),d=h[g]+A;var x=c?(s[p]||[])[g]:s[d];x&&(lMe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&mr(n,574,GPe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&mr(n,229,Nje(s["!merges"])),u&&iMe(n,s),mr(n,442,mre(y)),u&&aMe(n,s),mr(n,10),n.end()}function uMe(t,e,r){var n=uc(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(mr(n,2057,tD(t,5,r)),r.bookType=="xla"&&mr(n,135),mr(n,225,l?bu(1200):null),mr(n,193,dPe(2)),c&&mr(n,191),c&&mr(n,192),mr(n,226),mr(n,92,kPe("SheetJS",r)),mr(n,66,bu(l?1200:1252)),l&&mr(n,353,bu(0)),l&&mr(n,448),mr(n,317,Uje(t.SheetNames.length)),l&&t.vbaraw&&mr(n,211),l&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";mr(n,442,mre(u))}mr(n,156,bu(17)),mr(n,25,jl(!1)),mr(n,18,jl(!1)),mr(n,19,bu(0)),l&&mr(n,431,jl(!1)),l&&mr(n,444,bu(0)),mr(n,61,$Pe()),mr(n,64,jl(!1)),mr(n,141,bu(0)),mr(n,34,jl(VRe(t)=="true")),mr(n,14,jl(!0)),l&&mr(n,439,jl(!1)),mr(n,218,bu(0)),rMe(n,t,r),nMe(n,t.SSF,r),sMe(n,r),l&&mr(n,352,jl(!1));var d=n.end(),A=uc();l&&mr(A,140,kje()),l&&r.Strings&&X8e(A,252,MPe(r.Strings)),mr(A,10);var h=A.end(),f=uc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};mr(f,133,DPe({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=f.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),so(b)}function dMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(kv(),f4(t.SSF),r.revssf=m4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,hD(r),r.cellXfs=[],W0(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=cMe(a,r,t);return n.unshift(uMe(t,n,r)),so(n)}function lne(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=dc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return dMe(t,e);case 4:case 3:case 2:return tMe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function gH(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,l=s&&s.index||t.length,c=WBe(t.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,A=0,h=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var I=0;I<m.length;++I){var T=m[I];T.s.c==d&&T.s.r<u&&u<=T.e.r&&(d=T.e.c+1,I=-1)}var C=Zr(y.slice(0,y.indexOf(">")));h=C.colspan?+C.colspan:1,((A=+C.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(A||1)-1,c:d+h-1}});var E=C.t||C["data-t"]||"";if(!b.length){d+=h;continue}if(b=jte(b),f.s.r>u&&(f.s.r=u),f.e.r<u&&(f.e.r=u),f.s.c>d&&(f.s.c=d),f.e.c<d&&(f.e.c=d),!b.length){d+=h;continue}var S={t:"s",v:b};r.raw||!b.trim().length||E=="s"||(b==="TRUE"?S={t:"b",v:!0}:b==="FALSE"?S={t:"b",v:!1}:isNaN(vd(b))?isNaN(tv(b).getDate())||(S={t:"d",v:es(b)},r.cellDates||(S={t:"n",v:Li(S.v)}),S.z=r.dateNF||Yr[14]):S={t:"n",v:vd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=S):n[Jr({r:u,c:d})]=S,d+=h}}}}return n["!ref"]=fn(f),m.length&&(n["!merges"]=m),n}function AMe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Jr({r,c:i}),A=n.dense?(t[r]||[])[i]:t[d],h=A&&A.v!=null&&(A.h||V6(A.w||(Ef(A),A.w)||""))||"",f={};l>1&&(f.rowspan=l),c>1&&(f.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":A&&(f["data-t"]=A&&A.t||"z",A.v!=null&&(f["data-v"]=A.v),A.z!=null&&(f["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+A.l.Target+'">'+h+"</a>")),f.id=(n.id||"sjs")+"-"+d,s.push(hr("td",h,f))}}var m="<tr>";return m+s.join("")+"</tr>"}var fMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',hMe="</body></html>";function mMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return z0(gH(r[0],e),e);var n=gD();return r.forEach(function(a,s){xD(n,gH(a,e),"Sheet"+(s+1))}),n}function pMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function cne(t,e){var r=e||{},n=r.header!=null?r.header:fMe,a=r.footer!=null?r.footer:hMe,s=[n],i=dc(t["!ref"]);r.dense=Array.isArray(t),s.push(pMe(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(AMe(t,i,l,r));return s.push("</table>"+a),s.join("")}function une(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Cs(n.origin):n.origin;a=i.r,s=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=dc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var A=[],h=0,f=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(xH(w)){if(n.display)continue;f[p]={hidden:!0}}var I=w.children;for(g=x=0;g<I.length;++g){var T=I[g];if(!(n.display&&xH(T))){var C=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):jte(T.innerHTML),E=T.getAttribute("data-z")||T.getAttribute("z");for(h=0;h<A.length;++h){var S=A[h];S.s.c==x+s&&S.s.r<p+a&&p+a<=S.e.r&&(x=S.e.c+1-s,h=-1)}b=+T.getAttribute("colspan")||1,((y=+T.getAttribute("rowspan")||1)>1||b>1)&&A.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var O={t:"s",v:C},B=T.getAttribute("data-t")||T.getAttribute("t")||"";C!=null&&(C.length==0?O.t=B||"z":n.raw||C.trim().length==0||B=="s"||(C==="TRUE"?O={t:"b",v:!0}:C==="FALSE"?O={t:"b",v:!1}:isNaN(vd(C))?isNaN(tv(C).getDate())||(O={t:"d",v:es(C)},n.cellDates||(O={t:"n",v:Li(O.v)}),O.z=n.dateNF||Yr[14]):O={t:"n",v:vd(C)})),O.z===void 0&&E!=null&&(O.z=E);var P="",D=T.getElementsByTagName("A");if(D&&D.length)for(var X=0;X<D.length&&!(D[X].hasAttribute("href")&&(P=D[X].getAttribute("href"),P.charAt(0)!="#"));++X);P&&P.charAt(0)!="#"&&(O.l={Target:P}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=O):t[Jr({c:x+s,r:p+a})]=O,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return A.length&&(t["!merges"]=(t["!merges"]||[]).concat(A)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=fn(u),p>=c&&(t["!fullref"]=fn((u.e.r=l.length-m+p-1+a,u))),t}function dne(t,e){var r=e||{},n=r.dense?[]:{};return une(n,t,e)}function gMe(t,e){return z0(dne(t,e),e)}function xH(t){var e="",r=xMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function xMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function vMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Gn(e.replace(/<[^>]*>/g,""));return[r]}var vH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Ane(t,e){var r=e||{},n=H6(t),a=[],s,i,l={name:""},c="",u=0,d,A,h={},f=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],I=-1,T=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,S={},O=[],B={},P=0,D=0,X=[],de=1,re=1,ie=[],ce={Names:[]},J={},pe=["",""],Se=[],k={},F="",H=0,M=!1,L=!1,z=0;for(X2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=X2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?m["!ref"]=fn(C):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(m["!fullref"]=m["!ref"],C.e.r=r.sheetRows-1,m["!ref"]=fn(C)),O.length&&(m["!merges"]=O),X.length&&(m["!rows"]=X),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),f.push(d.name),h[d.name]=m,L=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=Zr(p[0],!1),I=T=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,m=r.dense?[]:{},O=[],X=[],L=!0);break;case"table-row-group":p[1]==="/"?--E:++E;break;case"table-row":case"":if(p[1]==="/"){I+=de,de=1;break}if(A=Zr(p[0],!1),A.?I=A.-1:I==-1&&(I=0),de=+A["number-rows-repeated"]||1,de<10)for(z=0;z<de;++z)E>0&&(X[I+z]={level:E});T=-1;break;case"covered-table-cell":p[1]!=="/"&&++T,r.sheetStubs&&(r.dense?(m[I]||(m[I]=[]),m[I][T]={t:"z"}):m[Jr({r:I,c:T})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++T,x=Zr(p[0],!1),re=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=hH(Gn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=Gn(x["string-value"]||""),r.dense?(m[I]||(m[I]=[]),m[I][T]=g):m[Jr({r:I,c:T})]=g),T+=re-1;else if(p[1]!=="/"){++T,y="",b=0,w=[],re=1;var R=de?I+de-1:I;if(T>C.e.c&&(C.e.c=T),T<C.s.c&&(C.s.c=T),I<C.s.r&&(C.s.r=I),R>C.e.r&&(C.e.r=R),x=Zr(p[0],!1),Se=[],k={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=Gn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(P=parseInt(x["number-matrix-rows-spanned"],10)||0,D=parseInt(x["number-matrix-columns-spanned"],10)||0,B={s:{r:I,c:T},e:{r:I+P-1,c:T+D-1}},g.F=fn(B),ie.push([B,g.F])),x.formula)g.f=hH(x.formula);else for(z=0;z<ie.length;++z)I>=ie[z][0].s.r&&I<=ie[z][0].e.r&&T>=ie[z][0].s.c&&T<=ie[z][0].e.c&&(g.F=ie[z][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(P=parseInt(x["number-rows-spanned"],10)||0,D=parseInt(x["number-columns-spanned"],10)||0,B={s:{r:I,c:T},e:{r:I+P-1,c:T+D-1}},O.push(B)),x["number-columns-repeated"]&&(re=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Xa(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=es(x["date-value"]),r.cellDates||(g.t="n",g.v=Li(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=GBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=p4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=Gn(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(M=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),M=b==0),J.Target&&(g.l=J),Se.length>0&&(g.c=Se,Se=[]),y&&r.cellText!==!1&&(g.w=y),M&&(g.t="z",delete g.v),(!M||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=I))for(var G=0;G<de;++G){if(re=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[I+G]||(m[I+G]=[]),m[I+G][T]=G==0?g:ts(g);--re>0;)m[I+G][T+re]=ts(g);else for(m[Jr({r:I+G,c:T})]=g;--re>0;)m[Jr({r:I+G,c:T+re})]=ts(g);C.e.c<=T&&(C.e.c=T)}re=parseInt(x["number-columns-repeated"]||"1",10),T+=re-1,re=0,g={},y="",w=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;k.t=y,w.length&&(k.R=w),k.a=F,Se.push(k)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);F="",H=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?F=n.slice(H,p.index):H=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(S[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=Zr(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Zr(p[0],!1),c+=vH[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Zr(p[0],!1),c+=vH[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=Zr(p[0],!1),pe=KB(i["cell-range-address"]);var ee={Name:i.name,Ref:pe[0]+"!"+pe[1]};L&&(ee.Sheet=f.length),ce.Names.push(ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var te=vMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+te[0]}else Zr(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{pe=KB(Zr(p[0])["target-range-address"]),h[pe[0]]["!autofilter"]={ref:pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(J=Zr(p[0],!1),!J.href)break;J.Target=Gn(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(pe=KB(J.Target.slice(1)),J.Target="#"+pe[0]+"!"+pe[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var Q={Sheets:h,SheetNames:f,Workbook:ce};return r.bookSheets&&delete Q.Sheets,Q}function yH(t,e){e=e||{},yu(t,"META-INF/manifest.xml")&&GTe(li(t,"META-INF/manifest.xml"),e);var r=Oc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Ane(Sa(r),e);return yu(t,"meta.xml")&&(n.Props=rre(li(t,"meta.xml"))),n}function bH(t,e){return Ane(t,e)}var yMe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+W2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ai+e}}(),wH=function(){var t=function(s){return ya(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+ya(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,A=dc(s["!ref"]||"A1"),h=s["!merges"]||[],f=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=A.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<A.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=A.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<A.s.c;++d)c.push(e);for(;d<=A.e.c;++d){var x=!1,y={},b="";for(f=0;f!=h.length;++f)if(!(h[f].s.c>d)&&!(h[f].s.r>u)&&!(h[f].e.c<d)&&!(h[f].e.r<u)){(h[f].s.c!=d||h[f].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[f].e.c-h[f].s.c+1,y["table:number-rows-spanned"]=h[f].e.r-h[f].s.r+1;break}if(x){c.push(r);continue}var w=Jr({r:u,c:d}),I=m?(s[u]||[])[d]:s[w];if(I&&I.f&&(y["table:formula"]=ya(U6e(I.f)),I.F&&I.F.slice(0,w.length)==w)){var T=dc(I.F);y["table:number-matrix-columns-spanned"]=T.e.c-T.s.c+1,y["table:number-matrix-rows-spanned"]=T.e.r-T.s.r+1}if(!I){c.push(e);continue}switch(I.t){case"b":b=I.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=I.v?"true":"false";break;case"n":b=I.w||String(I.v||0),y["office:value-type"]="float",y["office:value"]=I.v||0;break;case"s":case"str":b=I.v==null?"":I.v,y["office:value-type"]="string";break;case"d":b=I.w||es(I.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=es(I.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var C=t(b);if(I.l&&I.l.Target){var E=I.l.Target;E=E.charAt(0)=="#"?"#"+Q6e(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),C=hr("text:a",C,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+hr("table:table-cell",hr("text:p",C,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var A=u["!cols"][d];if(A.width==null&&A.wpx==null&&A.wch==null)continue;j0(A),A.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var A=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+A+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[ai],u=W2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=W2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(tre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var A=0;A!=i.SheetNames.length;++A)c.push(n(i.Sheets[i.SheetNames[A]],i,A));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function fne(t,e){if(e.bookType=="fods")return wH(t,e);var r=L6(),n="",a=[],s=[];return n="mimetype",pn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",pn(r,n,wH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",pn(r,n,yMe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",pn(r,n,ai+tre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",pn(r,n,WTe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",pn(r,n,qTe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Sp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ik(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Sa(q0(t))}function bMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Fc(iA(t))}function wMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function F0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function NH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function NMe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function _Me(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function nb(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ha(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Us(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Wn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=nb(t,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=nb(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Co(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(ha(n*8+a.type)),a.type==2&&e.push(ha(a.data.length)),e.push(a.data))})}),F0(e)}function AD(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function hu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=nb(t,n),s=Wn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Us(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Us(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Us(s[3][0].data)>>>0>0),r.push(i)}return r}function jg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:ha(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ha(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ha(i.data.length)}],n[2].push({data:Co(i.meta),type:2})});var s=Co(n);e.push(ha(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),F0(e)}function CMe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=nb(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[F0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=F0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function mu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(CMe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return F0(e)}function kg(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=ha(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return F0(e)}function EMe(t,e,r,n){var a=Sp(t),s=a.getUint32(4,!0),i=(n>1?12:8)+NH(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=NH(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var A;switch(t[2]){case 0:break;case 2:A={t:"n",v:u};break;case 3:A={t:"s",v:e[c]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(l>-1)A={t:"s",v:r[l]};else if(c>-1)A={t:"s",v:e[c]};else if(!isNaN(u))A={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return A}function SMe(t,e,r){var n=Sp(t),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=NMe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var A;switch(t[1]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:e[l]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(i>-1)A={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:A={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return A}function qB(t,e){var r=new Uint8Array(32),n=Sp(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,_Me(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function zB(t,e){var r=new Uint8Array(32),n=Sp(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function IMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return EMe(t,e,r,t[0]);case 5:return SMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function sl(t){var e=Wn(t);return nb(e[1][0].data)}function _H(t,e){var r=Wn(e.data),n=Us(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Wn(i.data),c=Us(l[1][0].data)>>>0;switch(n){case 1:s[c]=ik(l[3][0].data);break;case 8:{var u=t[sl(l[9][0].data)][0],d=Wn(u.data),A=t[sl(d[1][0].data)][0],h=Us(A.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var f=Wn(A.data);s[c]=f[3].map(function(m){return ik(m.data)}).join("")}break}}),s}function BMe(t,e){var r,n,a,s,i,l,c,u,d,A,h,f,m,p,g=Wn(t),x=Us(g[1][0].data)>>>0,y=Us(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Us(g[8][0].data)>0||!1,w,I;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(i=g[7])==null?void 0:i[0])==null?void 0:l.data,I=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((A=(d=g[4])==null?void 0:d[0])!=null&&A.data&&e!=1)w=(f=(h=g[4])==null?void 0:h[0])==null?void 0:f.data,I=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var T=b?4:1,C=Sp(w),E=[],S=0;S<w.length/2;++S){var O=C.getUint16(S*2,!0);O<65535&&E.push([S,O])}if(E.length!=y)throw"Expected ".concat(y," cells, found ").concat(E.length);var B=[];for(S=0;S<E.length-1;++S)B[E[S][0]]=I.subarray(E[S][1]*T,E[S+1][1]*T);return E.length>=1&&(B[E[E.length-1][0]]=I.subarray(E[E.length-1][1]*T)),{R:x,cells:B}}function TMe(t,e){var r,n=Wn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Us(n[7][0].data)>>>0>0?1:0:-1,s=AD(n[5],function(i){return BMe(i,a)});return{nrows:Us(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function PMe(t,e,r){var n,a=Wn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Us(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Us(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=fn(s);var i=Wn(a[4][0].data),l=_H(t,t[sl(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?_H(t,t[sl(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(A){var h=Wn(A.data),f=t[sl(h[2][0].data)][0],m=Us(f.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=TMe(t,f);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=Jr({r:d+x,c:b}),I=IMe(y,l,c);I&&(r[w]=I)})}),d+=p.nrows})}function jMe(t,e){var r=Wn(e.data),n={"!ref":"A1"},a=t[sl(r[2][0].data)],s=Us(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return PMe(t,a[0],n),n}function kMe(t,e){var r,n=Wn(e.data),a={name:(r=n[1])!=null&&r[0]?ik(n[1][0].data):"",sheets:[]},s=AD(n[2],sl);return s.forEach(function(i){t[i].forEach(function(l){var c=Us(l.meta[1][0].data);c==6e3&&a.sheets.push(jMe(t,l))})}),a}function FMe(t,e){var r=gD(),n=Wn(e.data),a=AD(n[1],sl);if(a.forEach(function(s){t[s].forEach(function(i){var l=Us(i.meta[1][0].data);if(l==2){var c=kMe(t,i);c.sheets.forEach(function(u,d){xD(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function WB(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=mu(c.content)}catch(A){return console.log("?? "+c.content.length+" "+(A.message||A))}var d;try{d=hu(u)}catch(A){return console.log("## "+(A.message||A))}d.forEach(function(A){s[A.id]=A.messages,i.push(A.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Us(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Us(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return FMe(s,l)}function OMe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Us(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Sp(t[7][0].data),d=0,A=[],h=Sp(t[4][0].data),f=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,f,!0);var g,x;switch(typeof e[p]){case"string":g=qB({t:"s",v:e[p]},r),x=zB({t:"s",v:e[p]},r);break;case"number":g=qB({t:"n",v:e[p]},r),x=zB({t:"n",v:e[p]},r);break;case"boolean":g=qB({t:"b",v:e[p]},r),x=zB({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}A.push(g),d+=g.length,m.push(x),f+=x.length,++c}for(t[2][0].data=ha(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=F0(A),t[3][0].data=F0(m),c}function DMe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(fn(n)));var s=oS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(F){return F.forEach(function(H){typeof H=="string"&&i.push(H)})});var l={},c=[],u=Gr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(F,H){return[F,u.FullPaths[H]]}).forEach(function(F){var H=F[0],M=F[1];if(H.type==2&&H.name.match(/\.iwa/)){var L=H.content,z=mu(L),R=hu(z);R.forEach(function(G){c.push(G.id),l[G.id]={deps:[],location:M,type:Us(G.messages[0].meta[1][0].data)}})}}),c.sort(function(F,H){return F-H});var d=c.filter(function(F){return F>1}).map(function(F){return[F,ha(F)]});u.FileIndex.map(function(F,H){return[F,u.FullPaths[H]]}).forEach(function(F){var H=F[0];if(F[1],!!H.name.match(/\.iwa/)){var M=hu(mu(H.content));M.forEach(function(L){L.messages.forEach(function(z){d.forEach(function(R){L.messages.some(function(G){return Us(G.meta[1][0].data)!=11006&&wMe(G.data,R[1])})&&l[R[0]].deps.push(L.id)})})})}});for(var A=Gr.find(u,l[1].location),h=hu(mu(A.content)),f,m=0;m<h.length;++m){var p=h[m];p.id==1&&(f=p)}var g=sl(Wn(f.messages[0].data)[1][0].data);for(A=Gr.find(u,l[g].location),h=hu(mu(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);for(g=sl(Wn(f.messages[0].data)[2][0].data),A=Gr.find(u,l[g].location),h=hu(mu(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);for(g=sl(Wn(f.messages[0].data)[2][0].data),A=Gr.find(u,l[g].location),h=hu(mu(A.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(f=p);var x=Wn(f.messages[0].data);{x[6][0].data=ha(n.e.r+1),x[7][0].data=ha(n.e.c+1);var y=sl(x[46][0].data),b=Gr.find(u,l[y].location),w=hu(mu(b.content));{for(var I=0;I<w.length&&w[I].id!=y;++I);if(w[I].id!=y)throw"Bad ColumnRowUIDMapArchive";var T=Wn(w[I].messages[0].data);T[1]=[],T[2]=[],T[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:ha(C+420690)}],T[1].push({type:2,data:Co(E)}),T[2].push({type:0,data:ha(C)}),T[3].push({type:0,data:ha(C)})}T[4]=[],T[5]=[],T[6]=[];for(var S=0;S<=n.e.r;++S)E=[],E[1]=E[2]=[{type:0,data:ha(S+726270)}],T[4].push({type:2,data:Co(E)}),T[5].push({type:0,data:ha(S)}),T[6].push({type:0,data:ha(S)});w[I].messages[0].data=Co(T)}b.content=kg(jg(w)),b.size=b.content.length,delete x[46];var O=Wn(x[4][0].data);{O[7][0].data=ha(n.e.r+1);var B=Wn(O[1][0].data),P=sl(B[2][0].data);b=Gr.find(u,l[P].location),w=hu(mu(b.content));{if(w[0].id!=P)throw"Bad HeaderStorageBucket";var D=Wn(w[0].messages[0].data);for(S=0;S<s.length;++S){var X=Wn(D[2][0].data);X[1][0].data=ha(S),X[4][0].data=ha(s[S].length),D[2][S]={type:D[2][0].type,data:Co(X)}}w[0].messages[0].data=Co(D)}b.content=kg(jg(w)),b.size=b.content.length;var de=sl(O[2][0].data);b=Gr.find(u,l[de].location),w=hu(mu(b.content));{if(w[0].id!=de)throw"Bad HeaderStorageBucket";for(D=Wn(w[0].messages[0].data),C=0;C<=n.e.c;++C)X=Wn(D[2][0].data),X[1][0].data=ha(C),X[4][0].data=ha(n.e.r+1),D[2][C]={type:D[2][0].type,data:Co(X)};w[0].messages[0].data=Co(D)}b.content=kg(jg(w)),b.size=b.content.length;var re=sl(O[4][0].data);(function(){for(var F=Gr.find(u,l[re].location),H=hu(mu(F.content)),M,L=0;L<H.length;++L){var z=H[L];z.id==re&&(M=z)}var R=Wn(M.messages[0].data);{R[3]=[];var G=[];i.forEach(function(Q,xe){G[1]=[{type:0,data:ha(xe)}],G[2]=[{type:0,data:ha(1)}],G[3]=[{type:2,data:bMe(Q)}],R[3].push({type:2,data:Co(G)})})}M.messages[0].data=Co(R);var ee=jg(H),te=kg(ee);F.content=te,F.size=F.content.length})();var ie=Wn(O[3][0].data);{var ce=ie[1][0];delete ie[2];var J=Wn(ce.data);{var pe=sl(J[2][0].data);(function(){for(var F=Gr.find(u,l[pe].location),H=hu(mu(F.content)),M,L=0;L<H.length;++L){var z=H[L];z.id==pe&&(M=z)}var R=Wn(M.messages[0].data);{delete R[6],delete ie[7];var G=new Uint8Array(R[5][0].data);R[5]=[];for(var ee=0,te=0;te<=n.e.r;++te){var Q=Wn(G);ee+=OMe(Q,s[te],i),Q[1][0].data=ha(te),R[5].push({data:Co(Q),type:2})}R[1]=[{type:0,data:ha(n.e.c+1)}],R[2]=[{type:0,data:ha(n.e.r+1)}],R[3]=[{type:0,data:ha(ee)}],R[4]=[{type:0,data:ha(n.e.r+1)}]}M.messages[0].data=Co(R);var xe=jg(H),Y=kg(xe);F.content=Y,F.size=F.content.length})()}ce.data=Co(J)}O[3][0].data=Co(ie)}x[4][0].data=Co(O)}f.messages[0].data=Co(x);var Se=jg(h),k=kg(Se);return A.content=k,A.size=A.content.length,u}function hne(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function fD(t){hne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function hD(t){hne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function RMe(t){return Cn.WS.indexOf(t)>-1?"sheet":t==Cn.CS?"chart":t==Cn.DS?"dialog":t==Cn.MS?"macro":t&&t.length?t:"sheet"}function MMe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,RMe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function LMe(t,e,r,n,a,s,i,l,c,u,d,A){try{s[n]=Yy(Oc(t,r,!0),e);var h=li(t,e),f;switch(l){case"sheet":f=o8e(h,e,a,c,s[n],u,d,A);break;case"chart":if(f=l8e(h,e,a,c,s[n],u,d,A),!f||!f["!drawel"])break;var m=gy(f["!drawel"].Target,e),p=Y2(m),g=zFe(Oc(t,m,!0),Yy(Oc(t,p,!0),m)),x=gy(g,m),y=Y2(x);f=ORe(Oc(t,x,!0),x,c,Yy(Oc(t,y,!0),x),u,f);break;case"macro":f=c8e(h,e,a,c,s[n],u,d,A);break;case"dialog":f=u8e(h,e,a,c,s[n],u,d,A);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=f;var b=[];s&&s[n]&&Qs(s[n]).forEach(function(w){var I="";if(s[n][w].Type==Cn.CMNT){I=gy(s[n][w].Target,e);var T=h8e(li(t,I,!0),I,c);if(!T||!T.length)return;cH(f,T,!1)}s[n][w].Type==Cn.TCMNT&&(I=gy(s[n][w].Target,e),b=b.concat(XFe(li(t,I,!0),c)))}),b&&b.length&&cH(f,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function cu(t){return t.charAt(0)=="/"?t.slice(1):t}function UMe(t,e){if(kv(),e=e||{},fD(e),yu(t,"META-INF/manifest.xml")||yu(t,"objectdata.xml"))return yH(t,e);if(yu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof WB<"u"){if(t.FileIndex)return WB(t);var r=Gr.utils.cfb_new();return TV(t).forEach(function(X){pn(r,X,YBe(t,X))}),WB(r)}throw new Error("Unsupported NUMBERS file")}if(!yu(t,"[Content_Types].xml"))throw yu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):yu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=TV(t),a=$Te(Oc(t,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",li(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!li(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Jy=[],a.sst)try{Jy=f8e(li(t,cu(a.sst)),a.sst,e)}catch(X){if(e.WTF)throw X}e.cellStyles&&a.themes.length&&(c=A8e(Oc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=d8e(li(t,cu(a.style)),a.style,c,e))}a.links.map(function(X){try{var de=Yy(Oc(t,Y2(cu(X))),X);return p8e(li(t,cu(X)),de,X,e)}catch{}});var d=i8e(li(t,cu(a.workbooks[0])),a.workbooks[0],e),A={},h="";a.coreprops.length&&(h=li(t,cu(a.coreprops[0]),!0),h&&(A=rre(h)),a.extprops.length!==0&&(h=li(t,cu(a.extprops[0]),!0),h&&YTe(h,A,e)));var f={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=Oc(t,cu(a.custprops[0]),!0),h&&(f=ZTe(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(de){return de.name}):A.Worksheets&&A.SheetNames.length>0&&(i=A.SheetNames),e.bookProps&&(m.Props=A,m.Custprops=f),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=m8e(li(t,cu(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;A.Worksheets=w.length,A.SheetNames=[];for(var I=0;I!=w.length;++I)A.SheetNames[I]=w[I].name}var T=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),E=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");yu(t,E)||(E="xl/_rels/workbook."+T+".rels");var S=Yy(Oc(t,E,!0),E.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=g8e(li(t,cu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=JFe(li(t,cu(a.people[0])),e)),S&&(S=MMe(S,d.Sheets));var O=li(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=A.Worksheets;++g){var B="sheet";if(S&&S[g]?(y="xl/"+S[g][1].replace(/[\/]?xl\//,""),yu(t,y)||(y=S[g][1]),yu(t,y)||(y=E.replace(/_rels\/.*$/,"")+S[g][1]),B=S[g][2]):(y="xl/worksheets/sheet"+(g+1-O)+"."+T,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(A.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var P=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==g&&(P=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==A.SheetNames[g].toLowerCase()&&(P=1);if(!P)continue e}}LMe(t,y,b,A.SheetNames[g],g,x,i,B,e,d,c,u)}return m={Directory:a,Workbook:d,Props:A,Custprops:f,Deps:p,Sheets:i,SheetNames:A.SheetNames,Strings:Jy,Styles:u,Themes:c,SSF:ts(Yr)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(X,de){X=X.replace(/^Root Entry[\/]/,""),m.keys.push(X),m.files[X]=t.FileIndex[de]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=li(t,cu(a.vba[0]),!0):a.defaults&&a.defaults.bin===iOe&&(m.vbaraw=li(t,"xl/vbaProject.bin",!0))),m}function QMe(t,e){var r=e||{},n="Workbook",a=Gr.find(t,n);try{if(n="/!DataSpaces/Version",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(gke(a.content),n="/!DataSpaces/DataSpaceMap",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=vke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=yke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);wke(a.content)}catch{}if(n="/EncryptionInfo",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Nke(a.content);if(n="/EncryptedPackage",a=Gr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function VMe(t,e){return e.bookType=="ods"?fne(t,e):e.bookType=="numbers"?DMe(t,e):e.bookType=="xlsb"?HMe(t,e):$Me(t,e)}function HMe(t,e){px=1024,t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(kv(),f4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Zy?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Qre.indexOf(e.bookType)>-1,a=Z6();hD(e=e||{});var s=L6(),i="",l=0;if(e.cellXfs=[],W0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",pn(s,i,nre(t.Props,e)),a.coreprops.push(i),pa(e.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,pn(s,i,ire(t.Props)),a.extprops.push(i),pa(e.rels,3,i,Cn.EXT_PROPS),t.Custprops!==t.Props&&Qs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",pn(s,i,ore(t.Custprops)),a.custprops.push(i),pa(e.rels,4,i,Cn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,pn(s,i,v8e(l-1,i,e,t,d)),a.sheets.push(i),pa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(A){var f=A["!comments"],m=!1,p="";f&&f.length>0&&(p="xl/comments"+l+"."+r,pn(s,p,w8e(f,p)),a.comments.push(p),pa(d,-1,"../comments"+l+"."+r,Cn.CMNT),m=!0),A["!legacy"]&&m&&pn(s,"xl/drawings/vmlDrawing"+l+".vml",Lre(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}d["!id"].rId1&&pn(s,Y2(i),Px(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,pn(s,i,b8e(e.Strings,i,e)),a.strs.push(i),pa(e.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,pn(s,i,x8e(t,i)),a.workbooks.push(i),pa(e.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",pn(s,i,sD(t.Themes,e)),a.themes.push(i),pa(e.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,pn(s,i,y8e(t,i,e)),a.styles.push(i),pa(e.wbrels,-1,"styles."+r,Cn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",pn(s,i,t.vbaraw),a.vba.push(i),pa(e.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,pn(s,i,N8e(i)),a.metadata.push(i),pa(e.wbrels,-1,"metadata."+r,Cn.XLMETA),pn(s,"[Content_Types].xml",ere(a,e)),pn(s,"_rels/.rels",Px(e.rels)),pn(s,"xl/_rels/workbook."+r+".rels",Px(e.wbrels)),delete e.revssf,delete e.ssf,s}function $Me(t,e){px=1024,t&&!t.SSF&&(t.SSF=ts(Yr)),t&&t.SSF&&(kv(),f4(t.SSF),e.revssf=m4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Zy?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Qre.indexOf(e.bookType)>-1,a=Z6();hD(e=e||{});var s=L6(),i="",l=0;if(e.cellXfs=[],W0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",pn(s,i,nre(t.Props,e)),a.coreprops.push(i),pa(e.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,pn(s,i,ire(t.Props)),a.extprops.push(i),pa(e.rels,3,i,Cn.EXT_PROPS),t.Custprops!==t.Props&&Qs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",pn(s,i,ore(t.Custprops)),a.custprops.push(i),pa(e.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var A={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,pn(s,i,Jre(l-1,e,t,A)),a.sheets.push(i),pa(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,pn(s,g,YFe(m,d,e)),a.threadedcomments.push(g),pa(A,-1,"../threadedComments/threadedComment"+l+"."+r,Cn.TCMNT)),g="xl/comments"+l+"."+r,pn(s,g,Ure(m)),a.comments.push(g),pa(A,-1,"../comments"+l+"."+r,Cn.CMNT),p=!0}h["!legacy"]&&p&&pn(s,"xl/drawings/vmlDrawing"+l+".vml",Lre(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}A["!id"].rId1&&pn(s,Y2(i),Px(A))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,pn(s,i,Sre(e.Strings,e)),a.strs.push(i),pa(e.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,pn(s,i,nne(t)),a.workbooks.push(i),pa(e.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",pn(s,i,sD(t.Themes,e)),a.themes.push(i),pa(e.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,pn(s,i,Ore(t,e)),a.styles.push(i),pa(e.wbrels,-1,"styles."+r,Cn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",pn(s,i,t.vbaraw),a.vba.push(i),pa(e.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,pn(s,i,Mre()),a.metadata.push(i),pa(e.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",pn(s,i,ZFe(d)),a.people.push(i),pa(e.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),pn(s,"[Content_Types].xml",ere(a,e)),pn(s,"_rels/.rels",Px(e.rels)),pn(s,"xl/_rels/workbook."+r+".rels",Px(e.wbrels)),delete e.revssf,delete e.ssf,s}function mD(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Gc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function KMe(t,e){return Gr.find(t,"EncryptedPackage")?QMe(t,e):one(t,e)}function GMe(t,e){var r,n=t,a=e||{};return a.type||(a.type=bn&&Buffer.isBuffer(t)?"buffer":"base64"),r=Bte(n,a),UMe(r,a)}function mne(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ak(t.slice(r),e);default:break e}return rv.to_workbook(t,e)}function qMe(t,e){var r="",n=mD(t,e);switch(e.type){case"base64":r=Gc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Np(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Sa(r)),e.type="binary",mne(r,e)}function zMe(t,e){var r=t;return e.type=="base64"&&(r=Gc(r)),r=K2.utils.decode(1200,r.slice(2),"str"),e.type="binary",mne(r,e)}function WMe(t){return t.match(/[^\x00-\x7F]/)?iA(t):t}function XB(t,e,r,n){return n?(r.type="string",rv.to_workbook(t,r)):rv.to_workbook(e,r)}function ab(t,e){F6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return ab(new Uint8Array(t),(r=ts(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),kx={},r.dateNF&&(kx.dateNF=r.dateNF),r.type||(r.type=bn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=bn?"buffer":"binary",n=HBe(t),typeof Uint8Array<"u"&&!bn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=WMe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=ts(r),r.type="array",ab(O6(n),r)}switch((a=mD(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return KMe(Gr.read(n,r),r);break;case 9:if(a[1]<=8)return one(n,r);break;case 60:return ak(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return eke(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Cre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?GMe(n,r):XB(t,n,r,s);case 239:return a[3]===60?ak(n,r):XB(t,n,r,s);case 255:if(a[1]===254)return zMe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Zm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Zm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return nk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return jre.to_workbook(n,r);break;case 10:case 13:case 32:return qMe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Zje.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?nk.to_workbook(n,r):XB(t,n,r,s)}function pne(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Jb(e.file,Gr.write(t,{type:bn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Gr.write(t,e)}function XMe(t,e){var r=ts(e||{}),n=VMe(t,r);return YMe(n,r)}function YMe(t,e){var r={},n=bn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Gr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(A4(a))}return e.password&&typeof encrypt_agile<"u"?pne(encrypt_agile(a,e.password),e):e.type==="file"?Jb(e.file,a):e.type=="string"?Sa(a):a}function JMe(t,e){var r=e||{},n=W8e(t,r);return pne(n,r)}function Jd(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return G2(iA(n));case"binary":return iA(n);case"string":return t;case"file":return Jb(e.file,n,"utf8");case"buffer":return bn?Lf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Jd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ZMe(t,e){switch(e.type){case"base64":return G2(t);case"binary":return t;case"string":return t;case"file":return Jb(e.file,t,"binary");case"buffer":return bn?Lf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function v_(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?G2(r):e.type=="string"?Sa(r):r;case"file":return Jb(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function b4(t,e){F6(),KRe(t);var r=ts(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=b4(t,r);return r.type="array",A4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Jd(V8e(t,r),r);case"slk":case"sylk":return Jd(_re.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Jd(cne(t.Sheets[t.SheetNames[a]],r),r);case"txt":return ZMe(xne(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Jd(pD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Jd(Cre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return v_(nk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Jd(rv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Jd(jre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Jd(Ere.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Jd(fne(t,r),r);case"wk1":return v_(Zm.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return v_(Zm.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),v_(lne(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),JMe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return XMe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function eLe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function gne(t,e,r){var n={};return n.type="file",n.file=e,eLe(n),b4(t,n)}function tLe(t,e,r,n,a,s,i,l){var c=ri(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),A=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var f=e.s.c;f<=e.e.c;++f){var m=i?t[r][f]:t[n[f]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[f]!=null&&(h[s[f]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[f]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[f]]=null;else if(u!==void 0)h[s[f]]=u;else if(d&&p===null)h[s[f]]=null;else continue;else h[s[f]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:Ef(m,p,l);p!=null&&(A=!1)}}return{row:h,isempty:A}}function oS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=qn(d);break;case"number":c=qn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var A=ri(c.s.r),h=[],f=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],I=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=_s(y),r=g?t[x][y]:t[h[y]+A],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=Ef(r,null,u),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(I[x]||{}).hidden){var T=tLe(t,c,x,h,n,s,g,u);(T.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(f[m++]=T.row)}return f.length=m,f}var CH=/"/g;function rLe(t,e,r,n,a,s,i,l){for(var c=!0,u=[],d="",A=ri(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var f=l.dense?(t[r]||[])[h]:t[n[h]+A];if(f==null)d="";else if(f.v!=null){c=!1,d=""+(l.rawNumbers&&f.t=="n"?f.v:Ef(f,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(CH,'""')+'"';break}d=="ID"&&(d='"ID"')}else f.f!=null&&!f.F?(c=!1,d="="+f.f,d.indexOf(",")>=0&&(d='"'+d.replace(CH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function pD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=qn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",A=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],f=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(A[m]=_s(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(f[g]||{}).hidden||(d=rLe(t,a,g,A,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function xne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=pD(t,e);return r}function nLe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=qn(t["!ref"]),s="",i=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)i[l]=_s(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ri(d),l=a.s.c;l<=a.e.c;++l)if(e=i[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function vne(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Cs(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+e.length-1+a}};if(s["!ref"]){var A=qn(s["!ref"]);d.e.c=Math.max(d.e.c,A.e.c),d.e.r=Math.max(d.e.r,A.e.r),i==-1&&(i=A.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],f=0;e.forEach(function(p,g){Qs(p).forEach(function(x){(f=h.indexOf(x))==-1&&(h[f=h.length]=x);var y=p[x],b="z",w="",I=Jr({c:l+f,r:i+g+a});u=sb(s,I),y&&typeof y=="object"&&!(y instanceof Date)?s[I]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Li(y)),w=n.dateNF||Yr[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[I]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var m=ri(i);if(a)for(f=0;f<h.length;++f)s[_s(f+l)+m]={t:"s",v:h[f]};return s["!ref"]=fn(d),s}function aLe(t,e){return vne(null,t,e)}function sb(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Cs(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?sb(t,Jr(e)):sb(t,Jr({r:e,c:r||0}))}function sLe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function gD(){return{SheetNames:[],Sheets:{}}}function xD(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(rne(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function iLe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=sLe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function oLe(t,e){return t.z=e,t}function yne(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function lLe(t,e,r){return yne(t,"#"+e,r)}function cLe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function uLe(t,e,r,n){for(var a=typeof e!="string"?e:qn(e),s=typeof e=="string"?e:fn(e),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=sb(t,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var kl={encode_col:_s,encode_row:ri,encode_cell:Jr,encode_range:fn,decode_col:q6,decode_row:G6,split_cell:bTe,decode_cell:Cs,decode_range:dc,format_cell:Ef,sheet_add_aoa:qte,sheet_add_json:vne,sheet_add_dom:une,aoa_to_sheet:Fv,json_to_sheet:aLe,table_to_sheet:dne,table_to_book:gMe,sheet_to_csv:pD,sheet_to_txt:xne,sheet_to_json:oS,sheet_to_html:cne,sheet_to_formulae:nLe,sheet_to_row_object_array:oS,sheet_get_cell:sb,book_new:gD,book_append_sheet:xD,book_set_sheet_visibility:iLe,cell_set_number_format:oLe,cell_set_hyperlink:yne,cell_set_internal_link:lLe,cell_add_comment:cLe,sheet_set_array_formula:uLe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const YB=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ra(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function HA(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Ch(t,e=1){const r=Math.floor(HA(t,e));return r>0?r:e}function dLe(t){return Object.values(t||{}).every(r=>Ra(r)==="")}function Fg(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ra(a),a));for(const a of e){const s=n.get(Ra(a));if(s!=null)return t[s]}}function ALe({open:t,code:e,onClose:r}){return t?o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),o.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),o.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function fLe({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new Wj,d=()=>{var h,f,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(f=n.current)==null?void 0:f.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,f=>{if(!c&&f){const m=String(f.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const f=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");f.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||f.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):f.toLowerCase().includes("secure")||f.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(f||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function hLe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(null),[w,I]=v.useState(""),[T,C]=v.useState(""),[E,S]=v.useState(0),[O,B]=v.useState(1),[P,D]=v.useState(""),[X,de]=v.useState(""),[re,ie]=v.useState(""),[ce,J]=v.useState(!1),[pe,Se]=v.useState(""),[k,F]=v.useState(!1),[H,M]=v.useState("create"),[L,z]=v.useState(!1),[R,G]=v.useState(""),[ee,te]=v.useState([]),[Q,xe]=v.useState([]),[Y,W]=v.useState(!1),[le,Pe]=v.useState(!1);v.useEffect(()=>{var Ne;const V=window.matchMedia("(max-width: 900px)"),Ae=()=>Pe(V.matches);return Ae(),(Ne=V.addEventListener)==null||Ne.call(V,"change",Ae),()=>{var Re;return(Re=V.removeEventListener)==null?void 0:Re.call(V,"change",Ae)}},[]);const[Le,qe]=v.useState(!0),[nt,st]=v.useState(!0);v.useEffect(()=>{le?(qe(!1),st(!1)):(qe(!0),st(!0))},[le]);const[Et,yt]=v.useState(null);v.useEffect(()=>{(async()=>{n(!0),s("");try{const V=await Dt(Yt(At(ke,"products_candies"),ln("name","asc"))),Ae=[];V.forEach(Ne=>{const Re=Ne.data();Ae.push({id:Ne.id,name:Re.name||"",category:Re.category||"",providerPrice:Number(Re.providerPrice||0),unitsPerPackage:Number(Re.unitsPerPackage||1),barcode:String(Re.barcode||"").trim()||void 0,createdAt:Re.createdAt})}),l(Ae)}catch(V){console.error(V),s(" Error cargando catlogo de dulces.")}finally{n(!1)}})()},[t]);const Ct=v.useMemo(()=>{const V=Ra(X),Ae=String(re||"").trim();return!V&&!Ae?i:i.filter(Ne=>{const Re=`${Ne.category} ${Ne.name}`.toLowerCase(),ze=V?Re.includes(V):!0,Ye=String(Ne.barcode||""),Ze=Ae?Ye.includes(Ae):!0;return ze&&Ze})},[i,X,re]),Ot=v.useMemo(()=>{const V=new Set;return i.forEach(Ae=>{const Ne=String(Ae.category||"").trim();Ne&&V.add(Ne)}),Array.from(V).sort((Ae,Ne)=>Ae.localeCompare(Ne,"es"))},[i]),Pt=()=>{u(""),A(""),f(0),p(1),x("")},fe=async V=>{V.preventDefault(),s("");const Ae=String(c||"").trim(),Ne=String(d||"").trim(),Re=Math.max(0,HA(h,0)),ze=Ch(m,1),Ye=String(g||"").trim();if(!Ae)return s(" La categora es requerida.");if(!Ne)return s(" El nombre del producto es requerido.");if(Re<=0)return s(" El precio proveedor debe ser > 0.");if(ze<=0)return s(" Und x paquete debe ser > 0.");if(i.some(dt=>Ra(dt.category)===Ra(Ae)&&Ra(dt.name)===Ra(Ne)))return s(" Ya existe un producto con esa categora y nombre.");if(Ye&&i.some(ge=>String(ge.barcode||"")===Ye))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const dt={category:Ae,name:Ne,providerPrice:Re,unitsPerPackage:ze,createdAt:rr.now()};Ye&&(dt.barcode=Ye);const ge=await En(At(ke,"products_candies"),dt);l(Xe=>[...Xe,{id:ge.id,...dt}].sort((ot,be)=>ot.name.localeCompare(be.name,"es"))),s(" Producto creado."),Pt()}catch(dt){console.error(dt),s(" Error creando producto.")}finally{n(!1)}},Ke=V=>{b(V.id),I(V.category),C(V.name),S(V.providerPrice),B(V.unitsPerPackage||1),D(String(V.barcode||"")),s("")},ve=()=>{b(null),I(""),C(""),S(0),B(1),D("")},he=async()=>{if(!y)return;s("");const V=String(w||"").trim(),Ae=String(T||"").trim(),Ne=Math.max(0,HA(E,0)),Re=Ch(O,1),ze=String(P||"").trim();if(!V)return s(" La categora es requerida.");if(!Ae)return s(" El nombre del producto es requerido.");if(Ne<=0)return s(" El precio proveedor debe ser > 0.");if(Re<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Ze=>Ze.id!==y&&Ra(Ze.category)===Ra(V)&&Ra(Ze.name)===Ra(Ae)))return s(" Ya existe otro producto con esa categora y nombre.");if(ze&&i.some(dt=>dt.id!==y&&String(dt.barcode||"")===ze))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Ze={category:V,name:Ae,providerPrice:Ne,unitsPerPackage:Re,updatedAt:rr.now()};Ze.barcode=ze||"",await rn(Gt(ke,"products_candies",y),Ze),l(dt=>dt.map(ge=>ge.id===y?{...ge,category:V,name:Ae,providerPrice:Ne,unitsPerPackage:Re,barcode:ze||void 0}:ge).sort((ge,Xe)=>ge.name.localeCompare(Xe.name,"es"))),s(" Producto actualizado."),ve()}catch(Ze){console.error(Ze),s(" Error actualizando producto.")}finally{n(!1)}},oe=async V=>{if(confirm(`Eliminar "${V.name}" (${V.category}) del catlogo?`))try{n(!0),await Qn(Gt(ke,"products_candies",V.id)),l(Ne=>Ne.filter(Re=>Re.id!==V.id)),s(" Producto eliminado.")}catch(Ne){console.error(Ne),s(" Error eliminando producto.")}finally{n(!1)}},je=()=>{const V=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Codigo:"7445074183182"}],Ae=kl.json_to_sheet(V),Ne=kl.book_new();kl.book_append_sheet(Ne,Ae,"Productos");const Re=b4(Ne,{type:"array",bookType:"xlsx"}),ze=new Blob([Re],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ye=URL.createObjectURL(ze),Ze=document.createElement("a");Ze.href=Ye,Ze.download="template_productos_dulces.xlsx",document.body.appendChild(Ze),Ze.click(),Ze.remove(),URL.revokeObjectURL(Ye)},Qe=V=>{const Ae=[],Ne=[];V.forEach((ze,Ye)=>{if(!ze||typeof ze!="object"||dLe(ze))return;const Ze=String(Fg(ze,["Id","ID","productId","docId"])??"").trim(),dt=String(Fg(ze,["Categoria","Categora","Category","cat","category"])??"").trim(),ge=String(Fg(ze,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),Xe=Fg(ze,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),ot=Fg(ze,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),be=Fg(ze,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),Ge=String(be??"").trim(),ut=Math.max(0,HA(Xe,0)),bt=Ch(ot,1),Rt=Ye+2;dt||Ne.push(`Fila ${Rt}: falta Categoria.`),ge||Ne.push(`Fila ${Rt}: falta Producto/Nombre.`),ut<=0&&Ne.push(`Fila ${Rt}: PrecioProveedor debe ser > 0.`),bt<=0&&Ne.push(`Fila ${Rt}: UnidadesPorPaquete debe ser > 0.`),dt&&ge&&ut>0&&bt>0&&Ae.push({id:Ze||void 0,category:dt,name:ge,providerPrice:ut,unitsPerPackage:bt,barcode:Ge||void 0,_raw:ze})});const Re=new Map;for(const ze of Ae){const Ye=ze.id?`id::${ze.id}`:`${Ra(ze.category)}::${Ra(ze.name)}`;Re.set(Ye,ze)}return{rows:Array.from(Re.values()),errors:Ne}},tt=async V=>{if(s(""),xe([]),te([]),G((V==null?void 0:V.name)||""),!V)return;const Ae=V.name.toLowerCase(),Ne=Ae.endsWith(".xlsx")||Ae.endsWith(".xls"),Re=Ae.endsWith(".csv");if(!Ne&&!Re){xe(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{W(!0);const ze=new FileReader,Ye=await new Promise((Ge,ut)=>{ze.onerror=()=>ut(new Error("No se pudo leer el archivo.")),ze.onload=()=>Ge(ze.result),ze.readAsArrayBuffer(V)}),Ze=ab(new Uint8Array(Ye),{type:"array"}),dt=Ze.SheetNames[0],ge=Ze.Sheets[dt],Xe=kl.sheet_to_json(ge,{defval:""}),{rows:ot,errors:be}=Qe(Xe);te(ot),xe(be),ot.length===0&&be.length===0&&xe(["No se encontraron filas vlidas para importar."])}catch(ze){console.error(ze),xe(["Error leyendo el archivo. Revis que no est corrupto."])}finally{W(!1)}},rt=(V,Ae)=>{te(Ne=>{const Re=[...Ne],ze=Re[V];return ze?(Re[V]={...ze,...Ae},Re):Ne})},Te=async()=>{if(s(""),Q.length>0){s(" Correg los errores antes de importar.");return}if(ee.length===0){s(" No hay filas para importar.");return}try{W(!0);const V={},Ae={},Ne={};i.forEach(Ze=>{V[Ze.id]=Ze,Ae[`${Ra(Ze.category)}::${Ra(Ze.name)}`]=Ze;const dt=String(Ze.barcode||"").trim();dt&&(Ne[dt]=Ze)});const Re=K0(ke);let ze=0,Ye=0;for(const Ze of ee){const dt=String(Ze.category||"").trim(),ge=String(Ze.name||"").trim(),Xe=Math.max(0,HA(Ze.providerPrice,0)),ot=Ch(Ze.unitsPerPackage,1),be=String(Ze.barcode||"").trim();if(!dt||!ge||Xe<=0||ot<=0)continue;let Ge;if(Ze.id&&V[Ze.id])Ge=V[Ze.id];else{const ut=`${Ra(dt)}::${Ra(ge)}`;Ge=Ae[ut]}if(!Ge&&be&&Ne[be]&&(Ge=Ne[be]),Ge){const ut={category:dt,name:ge,providerPrice:Xe,unitsPerPackage:ot,updatedAt:rr.now()};Ze.barcode!=null&&(ut.barcode=be||""),Re.update(Gt(ke,"products_candies",Ge.id),ut),Ye+=1}else{const ut=Gt(At(ke,"products_candies")),bt={category:dt,name:ge,providerPrice:Xe,unitsPerPackage:ot,createdAt:rr.now()};be&&(bt.barcode=be),Re.set(ut,bt),ze+=1}}await Re.commit(),s(` Importacin lista. Creados: ${ze}, Actualizados: ${Ye}`),z(!1),te([]),xe([]),G(""),e()}catch(V){console.error(V),s(" Error importando productos a Firestore.")}finally{W(!1)}},Ee=v.useMemo(()=>{const V=new Set(i.map(Ye=>Ye.id)),Ae=new Set(i.map(Ye=>`${Ra(Ye.category)}::${Ra(Ye.name)}`)),Ne=new Set(i.map(Ye=>String(Ye.barcode||"").trim()).filter(Boolean));let Re=0,ze=0;for(const Ye of ee){if(Ye.id&&V.has(Ye.id)){Re+=1;continue}const Ze=`${Ra(Ye.category)}::${Ra(Ye.name)}`;if(Ae.has(Ze)){Re+=1;continue}const dt=String(Ye.barcode||"").trim();if(dt&&Ne.has(dt)){Re+=1;continue}ze+=1}return{willCreate:ze,willUpdate:Re,total:ee.length}},[ee,i]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"PRoducto"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("div",{className:"flex gap-2",children:o.jsx(Xc,{onClick:e,loading:r||Y})})})]}),le&&o.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>qe(V=>!V),children:Le?"Ocultar creacin":"Crear producto"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{z(!0),te([]),xe([]),G("")},children:"Importar"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>st(V=>!V),children:nt?"Ocultar filtros":"Mostrar filtros"})]}),Le&&o.jsxs("form",{onSubmit:fe,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:V=>u(V.target.value),placeholder:"Ej: Gomitas"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:V=>A(V.target.value),placeholder:"Ej: Gomita Fresa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:V=>f(Math.max(0,HA(V.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:V=>p(Ch(V.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:V=>x(V.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{M("create"),F(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Pt,children:"Limpiar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),nt&&o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:X,onChange:V=>de(V.target.value),placeholder:"Buscar por categora o producto"})]}),o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:re,onChange:V=>ie(V.target.value),placeholder:"Ej: 7445074183182"})]}),o.jsxs("div",{className:"w-full md:w-auto text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),o.jsx("div",{className:"text-lg font-semibold",children:Ct.length})]})]}),le?o.jsx("div",{className:"space-y-2",children:r?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Ct.length===0?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Ct.map(V=>{const Ae=y===V.id,Ne=Et===V.id,Re=!!String(V.barcode||"").trim();return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>yt(ze=>ze===V.id?null:V.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold truncate",children:V.name}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:V.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("div",{className:"font-bold tabular-nums",children:YB(V.providerPrice)})]})]}),Ne&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),Ae?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:w,onChange:ze=>I(ze.target.value)}):o.jsx("div",{className:"font-semibold",children:V.category})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),Ae?o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:O,onChange:ze=>B(Ch(ze.target.value,1))}):o.jsx("div",{className:"font-semibold text-right tabular-nums",children:V.unitsPerPackage})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),Ae?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:T,onChange:ze=>C(ze.target.value)}):o.jsx("div",{className:"font-semibold",children:V.name})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),Ae?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(E)?"":E,onChange:ze=>S(Math.max(0,HA(ze.target.value,0)))}):o.jsx("div",{className:"font-semibold tabular-nums",children:YB(V.providerPrice)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),Ae?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:P,onChange:ze=>D(ze.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{M("edit"),F(!0)},children:"Escanear"})]}):Re?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Se(String(V.barcode||"").trim()),J(!0)},children:"Ver cdigo"}):o.jsx("div",{className:"text-gray-600",children:"No"})]})]}),o.jsx("div",{className:"pt-2 flex gap-2",children:Ae?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:he,type:"button",children:"Guardar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:ve,type:"button",children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>Ke(V),type:"button",children:"Editar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>oe(V),type:"button",children:"Borrar"})]})})]})})]},V.id)})}):o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):Ct.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin productos."})}):Ct.map(V=>{const Ae=y===V.id,Ne=!!String(V.barcode||"").trim();return o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:w,onChange:Re=>I(Re.target.value)}):V.category}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:T,onChange:Re=>C(Re.target.value)}):V.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ae?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(E)?"":E,onChange:Re=>S(Math.max(0,HA(Re.target.value,0)))}):YB(V.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ae?o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:O,onChange:Re=>B(Ch(Re.target.value,1))}):V.unitsPerPackage}),o.jsx("td",{className:"p-2 border text-center",children:Ae?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:P,onChange:Re=>D(Re.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{M("edit"),F(!0)},children:"Escanear"})]}):Ne?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{Se(String(V.barcode||"").trim()),J(!0)},children:"S"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:he,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ve,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>Ke(V),type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>oe(V),type:"button",children:"Borrar"})]})})]},V.id)})})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),o.jsx(ALe,{open:ce,code:pe,onClose:()=>J(!1)}),o.jsx(fLe,{open:k,onClose:()=>F(!1),onDetected:V=>{H==="create"?x(V):D(V)}}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>z(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Codigo (opcional)."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:je,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:V=>{var Ae;return tt(((Ae=V.target.files)==null?void 0:Ae[0])||null)}}),R&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:R})]}),Y&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Q.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Q.slice(0,50).map((V,Ae)=>o.jsx("li",{children:V},Ae))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Ee.total," filas (Crear:"," ",Ee.willCreate," / Actualizar:"," ",Ee.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Te,disabled:Y||ee.length===0||Q.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ee.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ee.slice(0,300).map((V,Ae)=>{const Ne=V.id?i.some(Ze=>Ze.id===V.id):!1,Re=i.some(Ze=>`${Ra(Ze.category)}::${Ra(Ze.name)}`==`${Ra(V.category)}::${Ra(V.name)}`),ze=V.barcode?i.some(Ze=>String(Ze.barcode||"")===V.barcode):!1,Ye=Ne||Re||ze;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:V.id||"",onChange:Ze=>rt(Ae,{id:Ze.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:V.category,onChange:Ze=>rt(Ae,{category:Ze.target.value}),list:"categories-list"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:V.name,onChange:Ze=>rt(Ae,{name:Ze.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(V.providerPrice)?"":V.providerPrice,onChange:Ze=>rt(Ae,{providerPrice:Math.max(0,HA(Ze.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:V.unitsPerPackage,onChange:Ze=>rt(Ae,{unitsPerPackage:Ch(Ze.target.value,1)})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:V.barcode||"",onChange:Ze=>rt(Ae,{barcode:Ze.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ye?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ye?"ACTUALIZA":"CREA"})})]},`${V.id||""}-${Ae}`)})})]}),o.jsx("datalist",{id:"categories-list",children:Ot.map(V=>o.jsx("option",{value:V},V))})]}),ee.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ee.length," filas (el import importa todas)."]})]})]})})]})}function vD(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function r2(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):vD(t)}function mLe(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=vD(t);return r>0&&e>0?Math.floor(r/e):Math.max(0,Math.floor(Number(t.packages||0)))}function pLe(t){if(typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages))return Math.max(0,Math.floor(Number(t.remainingPackages)));const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=r2(t);return Math.max(0,Math.floor(r/e))}async function gLe(t){const e=Gt(ke,"candy_main_orders",t);if((await fo(e)).exists())return e;const n=Yt(At(ke,"candy_main_orders"),lr("orderId","==",t)),a=await Dt(n);return a.empty?null:Gt(ke,"candy_main_orders",a.docs[0].id)}async function JB(t){if(!t)return;const e=await gLe(t);if(!e)return;const r=Yt(At(ke,"inventory_candies"),lr("orderId","==",t)),n=await Dt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=mLe(c),A=pLe(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),f=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=f*d,y=m*d,b=p*d,w=g*d,I=y-x,T=b-x,C=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:f,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const E=a.get(u);E.packages+=d,E.remainingPackages+=A,E.subtotal+=x,E.totalRivas+=y,E.totalSanJorge+=b,E.totalIsla+=w,E.gainRivas+=I,E.gainSanJorge+=T,E.gainIsla+=C,E.providerPrice=f,E.unitPriceRivas=m||E.unitPriceRivas,E.unitPriceSanJorge=p||E.unitPriceSanJorge,E.unitPriceIsla=g||E.unitPriceIsla,E.unitsPerPackage=h||E.unitsPerPackage,E.name=String(c.productName||E.name),E.category=String(c.category||E.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),i=s.reduce((l,c)=>l+Number(c.packages||0),0);await rn(e,{totalPackages:i,items:s})}async function xLe(t){const{productId:e,saleDate:r,saleId:n}=t,a=t.quantityPacks,s=t.quantity;if(!e)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const i=Yt(At(ke,"inventory_candies"),lr("productId","==",e)),l=await Dt(i);if(l.empty)throw new Error("No hay inventario para este producto.");const c=l.docs.map(f=>({id:f.id,data:f.data()})).sort((f,m)=>{var b,w;const p=String(f.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=f.data.createdAt)==null?void 0:b.seconds)??0,y=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return x-y});let u=0;for(const f of c){const m=Number(f.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const f of c){const m=f.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const f=Math.max(0,Math.floor(Number(a)));if(f<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=f*u}else{const f=Math.max(0,Math.floor(Number(s||0)));if(f<=0)throw new Error("La cantidad debe ser mayor que cero.");d=f}const A=c.map(f=>Gt(ke,"inventory_candies",f.id)),h=[];return await Di(ke,async f=>{const m=await Promise.all(A.map(g=>f.get(g)));let p=d;for(let g=0;g<A.length&&p>0;g++){const x=A[g],y=m[g];if(!y.exists())continue;const b=y.data(),w=r2(b);if(w<=0)continue;const I=Math.min(w,p),T=Math.max(0,w-I),C=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),E=Math.floor(T/C);f.update(x,{remaining:T,remainingPackages:E,packages:E}),h.push({batchId:x.id,qty:I,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=I}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of h)await En(At(ke,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:e,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:rr.now()})}),{allocations:h}}function vLe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||l<=0||r.push({inventorySellerId:i,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const l=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function ib(t){const e=t.split("#")[0],r=Gt(ke,"sales_candies",e),n=await fo(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=vLe(a);if(s&&s.allocations.length>0){let u=0;return await Di(ke,async d=>{const A={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(A[g]=(A[g]||0)+x,u+=x)}const f=Object.keys(A).map(p=>Gt(ke,"inventory_candies_sellers",p)),m=await Promise.all(f.map(p=>d.get(p)));for(let p=0;p<f.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(A[f[p].id]||0))),w=y+b,I=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),T=Math.floor(w/I);d.update(f[p],{remainingUnits:w,remainingPackages:T})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const A=a.allocationsByItem[d],h=String((A==null?void 0:A.productId)||d||"");if(!h)continue;const f=Array.isArray(A==null?void 0:A.allocations)?A.allocations:[];u[h]=f.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[A]=h.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const d of a.items){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),f=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[A]||[];i.push({productId:A,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:f.length?f:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),A=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];d&&A>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:A,allocations:h.length?h:void 0})}if(i.length===0)return await Di(ke,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Di(ke,async d=>{const A=[];for(const f of i)for(const m of f.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,A.push({ref:Gt(ke,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(A.map(f=>d.get(f.ref)));for(let f=0;f<A.length;f++){const m=h[f];if(!m.exists())continue;const p=m.data(),g=r2(p),x=Math.max(0,Math.floor(Number(A[f].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(A[f].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Di(ke,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=Yt(At(ke,"inventory_candies"),lr("productId","==",p.productId)),y=(await Dt(g)).docs.map(b=>{const w=b.data(),I=vD(w),T=r2(w);return{id:b.id,date:String(w.date||""),baseUnits:I,remaining:T}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const A=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,A.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);A.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);A.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of A)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const f=Object.keys(h).map(p=>Gt(ke,"inventory_candies",p)),m=await Promise.all(f.map(p=>u.get(p)));for(let p=0;p<f.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=r2(x),b=Math.max(0,Math.floor(Number(h[f[p].id]||0))),w=y+b,I=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),T=Math.floor(w/I);u.update(f[p],{remaining:w,remainingPackages:T,packages:T})}u.delete(r)}),{restored:c}}async function yLe(t){return ib(t)}const El=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function ZB(t){return isFinite(t)?Math.round(t):0}function nd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function eT(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function bLe(t,e){var i,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function wLe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(0),[T,C]=v.useState(!1),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const L=await Dt(At(ke,"products_candies")),z=[];L.forEach(te=>{const Q=te.data();z.push({id:te.id,name:Q.name??"(sin nombre)",category:Q.category??"(sin categora)"})}),e(z);const R=Yt(At(ke,"inventory_candies"),ln("date","desc")),G=await Dt(R),ee=[];G.forEach(te=>{const Q=te.data(),xe=Number(Q.unitsPerPackage||0),Y=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),W=Number(Q.remaining??Q.totalUnits??Y??0);ee.push({id:te.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:xe,totalUnits:Y,remaining:W,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),n(ee)}catch(L){console.error(L),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const X=v.useMemo(()=>r.filter(L=>!(c&&L.date<c||d&&L.date>d||h&&L.productId!==h||m&&String(L.category||"")!==m)),[r,c,d,h,m]),de=v.useMemo(()=>{const L=new Set;for(const z of t)z.category&&L.add(z.category);return Array.from(L).sort((z,R)=>z.localeCompare(R))},[t]),re=v.useMemo(()=>{const L=X.reduce((Q,xe)=>Q+nd(xe),0),z=X.reduce((Q,xe)=>Q+eT(xe),0),R=X.reduce((Q,xe)=>{const Y=nd(xe);return Q+Number(xe.providerPrice||0)*Y},0),G=X.reduce((Q,xe)=>{const Y=nd(xe);return Q+Number(xe.unitPriceRivas||0)*Y},0),ee=X.reduce((Q,xe)=>{const Y=nd(xe);return Q+Number(xe.unitPriceSanJorge||0)*Y},0),te=X.reduce((Q,xe)=>{const Y=nd(xe);return Q+Number(xe.unitPriceIsla||0)*Y},0);return{totalPaquetes:L,totalPaquetesRestantes:z,totalSubtotal:R,totalRivas:G,totalSJ:ee,totalIsla:te}},[X]),ie=v.useMemo(()=>{let L=0,z=0;for(const R of X)R.status==="PENDIENTE"&&(L+=1),R.status==="PAGADO"&&(z+=1);return{totalLotes:X.length,pendientes:L,pagados:z}},[X]),ce=v.useMemo(()=>{const L=new Map;for(const R of X){const G=String(R.productId||"");G&&(L.has(G)||L.set(G,{batches:[]}),L.get(G).batches.push(R))}const z=[];for(const[R,G]of L.entries()){const ee=[...G.batches].sort(bLe),te=ee[0],Q=ee.reduce((Ct,Ot)=>Ct+nd(Ot),0),xe=ee.reduce((Ct,Ot)=>Ct+eT(Ot),0),Y=Number((te==null?void 0:te.providerPrice)||0),W=Number((te==null?void 0:te.unitPriceRivas)||0),le=Number((te==null?void 0:te.unitPriceIsla)||0),Pe=ee.reduce((Ct,Ot)=>{const Pt=nd(Ot);return Ct+Number(Ot.providerPrice||0)*Pt},0),Le=ee.reduce((Ct,Ot)=>{const Pt=nd(Ot);return Ct+Number(Ot.unitPriceRivas||0)*Pt},0),qe=ee.reduce((Ct,Ot)=>{const Pt=nd(Ot);return Ct+Number(Ot.unitPriceIsla||0)*Pt},0),nt=Le-Pe,st=qe-Pe;let Et="",yt;for(const Ct of ee)(!Et||String(Ct.date||"")>Et)&&(Et=String(Ct.date||""),yt=Ct.createdAt);z.push({productId:R,productName:(te==null?void 0:te.productName)||"",category:(te==null?void 0:te.category)||"",totalPackages:Q,remainingPackages:xe,providerPrice:Y,unitPriceRivas:W,unitPriceIsla:le,subtotal:Pe,totalRivas:Le,totalIsla:qe,gainRivas:nt,gainIsla:st,lastDate:Et,lastCreatedAt:yt,batchCount:ee.length})}return z.sort((R,G)=>String(G.lastDate).localeCompare(String(R.lastDate))),z},[X]),J=L=>{x(L.id),b(L.date),I(L.providerPrice),l("")},pe=()=>{x(null),b(""),I(0)},Se=async()=>{if(!g)return;const L=r.find(qe=>qe.id===g);if(!L)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const z=nd(L),R=w*z,G=z>0?R/.8:0,ee=z>0?R/.85:0,te=z>0?R/.7:0,Q=G-R,xe=ee-R,Y=te-R,W=z>0?ZB(G/z):0,le=z>0?ZB(ee/z):0,Pe=z>0?ZB(te/z):0,Le=Gt(ke,"inventory_candies",g);await rn(Le,{date:y,providerPrice:w,subtotal:R,totalRivas:G,totalSanJorge:ee,totalIsla:te,gainRivas:Q,gainSanJorge:xe,gainIsla:Y,unitPriceRivas:W,unitPriceSanJorge:le,unitPriceIsla:Pe}),n(qe=>qe.map(nt=>nt.id===g?{...nt,date:y,providerPrice:w,subtotal:R,totalRivas:G,totalSanJorge:ee,totalIsla:te,gainRivas:Q,gainSanJorge:xe,gainIsla:Y,unitPriceRivas:W,unitPriceSanJorge:le,unitPriceIsla:Pe}:nt)),L.orderId&&await JB(String(L.orderId)),l(" Lote de dulces actualizado"),pe()},k=async L=>{confirm(`Marcar PAGADO el lote del ${L.date} (${L.productName})?`)&&(await rn(Gt(ke,"inventory_candies",L.id),{status:"PAGADO"}),n(R=>R.map(G=>G.id===L.id?{...G,status:"PAGADO"}:G)),l(" Lote marcado como pagado"))},F=async L=>{confirm(`Eliminar el lote del ${L.date} (${L.productName})?`)&&(await Qn(Gt(ke,"inventory_candies",L.id)),n(R=>R.filter(G=>G.id!==L.id)),L.orderId&&await JB(String(L.orderId)),l(" Lote eliminado"))},H=async(L,z)=>{try{s(!0),l("");const R=Yt(At(ke,"inventory_candies"),lr("productId","==",L),ln("date","desc")),G=await Dt(R),ee=[];G.forEach(te=>{const Q=te.data(),xe=Number(Q.unitsPerPackage||0),Y=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),W=Number(Q.remaining??Q.totalUnits??Y??0);ee.push({id:te.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:xe,totalUnits:Y,remaining:W,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),S(L),B(z),D(ee),C(!0)}catch(R){console.error(R),l(" Error abriendo detalle del producto.")}finally{s(!1)}},M=async(L,z)=>{const R=r.filter(ee=>ee.productId===L);if(confirm(`Eliminar COMPLETAMENTE "${z}"?
Esto eliminar ${R.length} lote(s) de este producto.`))try{s(!0),l("");const ee=Array.from(new Set(R.map(te=>te.orderId?String(te.orderId):"").filter(Boolean)));for(const te of R)await Qn(Gt(ke,"inventory_candies",te.id));n(te=>te.filter(Q=>Q.productId!==L)),l(" Producto eliminado (todos sus lotes).");for(const te of ee)await JB(te);T&&E===L&&(C(!1),D([]),S(""),B(""))}catch(ee){console.error(ee),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:L=>u(L.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:L=>A(L.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[o.jsx("label",{className:"font-semibold",children:"Categora"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:L=>p(L.target.value),children:[o.jsx("option",{value:"",children:"Todas"}),de.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:L=>f(L.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(L=>o.jsxs("option",{value:L.id,children:[L.name,"  ",L.category]},L.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),f(""),p("")},children:"Quitar filtro"})]}),o.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",ie.totalLotes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",ie.pendientes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",ie.pagados]})]})}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",re.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",re.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",El(re.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",El(re.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",El(re.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",El(re.totalIsla)]})]})}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ce.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ce.map(L=>o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border",children:L.category||""}),o.jsxs("td",{className:"p-2 border max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:L.productName,children:L.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",L.batchCount]})]}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:L.totalPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:L.remainingPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.unitPriceRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.unitPriceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.subtotal)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.totalRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.totalIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.gainRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:El(L.gainIsla)}),o.jsx("td",{className:"p-2 border",children:L.lastDate||""}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(L.productId,L.productName),children:"Detalle"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(L.productId,L.productName),children:"Borrar"})]})})]},L.productId))})]})})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Producto:"})," ",O||""," ",o.jsxs("span",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold",children:"ID:"})," ",E]})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{C(!1),D([]),S(""),B(""),pe()},children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border",children:"Nmero orden"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:P.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):P.map(L=>{const z=g===L.id,R=nd(L),G=eT(L);return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border align-top",children:z?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:ee=>b(ee.target.value)}):L.date}),o.jsx("td",{className:"p-2 border align-top",children:L.category||""}),o.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:L.productName,children:L.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",L.id]})]}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:R}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:G}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:L.totalUnits}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:z?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:ee=>I(Math.max(0,parseFloat(ee.target.value||"0")))}):El(L.providerPrice)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:El(L.unitPriceRivas)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:El(L.unitPriceIsla)}),o.jsx("td",{className:"p-2 border align-top",children:L.orderId?String(L.orderId):""}),o.jsx("td",{className:"p-2 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${L.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:L.status})}),o.jsx("td",{className:"p-2 border align-top",children:z?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Se,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:pe,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[L.status==="PENDIENTE"&&o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>k(L),children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>J(L),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(L),children:"Borrar"})]})})]},L.id)})})]})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>M(E,O),children:"Borrar producto (todos los lotes)"})})]})})]})}const tT=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],zi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function U1(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function EH(t){const e=Yt(At(ke,"ar_movements"),lr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn(Gt(ke,"ar_movements",n.id))))}function NLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const n=String(t||"").trim().toLowerCase(),a=String(e||"").trim(),s=n==="vendedor_dulces",i=n==="admin",[l,c]=v.useState([]),[u,d]=v.useState(!1),[A,h]=v.useState(""),[f,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(!1),[I,T]=v.useState(!1),[C,E]=v.useState(null),[S,O]=v.useState([]),B=async ct=>{var xr;w(!0),T(!0),E(ct),O([]);try{const vr=await fo(Gt(ke,"sales_candies",ct));let Ar=null;vr.exists()?Ar=vr.data():Ar=(xr=(await Dt(Yt(At(ke,"sales_candies"),lr("name","==",ct)))).docs[0])==null?void 0:xr.data();const ir=(Array.isArray(Ar==null?void 0:Ar.items)?Ar.items:Ar!=null&&Ar.item?[Ar.item]:[]).map(tr=>({productName:String(tr.productName||""),qty:Number(tr.qty||0),unitPrice:Number(tr.unitPrice||0),discount:Number(tr.discount||0),total:Number(tr.total||0)}));O(ir)}catch(vr){console.error(vr)}finally{T(!1)}},[P,D]=v.useState(""),[X,de]=v.useState("+505 "),[re,ie]=v.useState(""),[ce,J]=v.useState(""),[pe,Se]=v.useState("ACTIVO"),[k,F]=v.useState(0),[H,M]=v.useState(""),[L,z]=v.useState(0),[R,G]=v.useState([]),[ee,te]=v.useState(!0),[Q,xe]=v.useState(""),[Y,W]=v.useState(null),[le,Pe]=v.useState(""),[Le,qe]=v.useState("+505 "),[nt,st]=v.useState(""),[Et,yt]=v.useState(""),[Ct,Ot]=v.useState("ACTIVO"),[Pt,fe]=v.useState(0),[Ke,ve]=v.useState(""),[he,oe]=v.useState(!1),[je,Qe]=v.useState(null),[tt,rt]=v.useState(!1),[Te,Ee]=v.useState([]),[V,Ae]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[Ne,Re]=v.useState(!1),[ze,Ye]=v.useState(0),[Ze,dt]=v.useState(new Date().toISOString().slice(0,10)),[ge,Xe]=v.useState(""),[ot,be]=v.useState(!1),[Ge,ut]=v.useState(null),[bt,Rt]=v.useState(""),[Wt,mt]=v.useState(0),[ne,ae]=v.useState(""),[me,ue]=v.useState(!1),[Be,Oe]=v.useState(null),[We,it]=v.useState(!1),[gt,xt]=v.useState(!1),[_t,Ce]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(te(!0),s&&!a){G([]),xe(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const ct=await Dt(At(ke,"sellers_candies")),xr=[];ct.forEach(ir=>{const tr=ir.data(),gr=String(tr.status||"ACTIVO");gr==="ACTIVO"&&xr.push({id:ir.id,name:String(tr.name||""),status:gr})}),c(xr);const vr=s?Yt(At(ke,"customers_candies"),lr("vendorId","==",a),ln("createdAt","desc")):Yt(At(ke,"customers_candies"),ln("createdAt","desc")),Ar=await Dt(vr),sr=[];Ar.forEach(ir=>{const tr=ir.data();sr.push({id:ir.id,name:tr.name??"",phone:tr.phone??"+505 ",place:tr.place??"",notes:tr.notes??"",status:tr.status??"ACTIVO",creditLimit:Number(tr.creditLimit??0),createdAt:tr.createdAt??rr.now(),balance:0,sellerId:tr.sellerId||"",vendorId:tr.vendorId||"",vendorName:tr.vendorName||"",initialDebt:Number(tr.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const ir of sr)try{const tr=Yt(At(ke,"ar_movements"),lr("customerId","==",ir.id)),gr=await Dt(tr);let Vr=0,gn=null;gr.forEach(Ho=>{var Kl,EA,Wf;const si=Ho.data(),pi=Number(si.amount||0);if(Vr+=pi,pi<0){const J0=si.date??((EA=(Kl=si.createdAt)==null?void 0:Kl.toDate)!=null&&EA.call(Kl)?si.createdAt.toDate().toISOString().slice(0,10):""),Dd=(Wf=si.createdAt)!=null&&Wf.seconds?Number(si.createdAt.seconds):0;(!gn||Dd>=gn.ts)&&(gn={date:J0,amount:Math.abs(pi),ts:Dd})}});const an=Number(ir.initialDebt||0);ir.balance=an+Vr,gn?(ir.lastAbonoDate=gn.date,ir.lastAbonoAmount=gn.amount):(ir.lastAbonoDate="",ir.lastAbonoAmount=0)}catch{ir.balance=Number(ir.initialDebt||0),ir.lastAbonoDate="",ir.lastAbonoAmount=0}G(sr)}catch(ct){console.error(ct),xe(" Error cargando clientes.")}finally{te(!1)}})()},[s,a]);const at=()=>{D(""),de("+505 "),ie(""),J(""),Se("ACTIVO"),F(0),M(""),z(0)},wt=async ct=>{var sr;if(ct.preventDefault(),xe(""),!P.trim()){xe("Ingresa el nombre.");return}const xr=U1(X);if(xr.length<6){xe("Telfono incompleto.");return}const vr=s?a:String(H||"").trim(),Ar=vr&&((sr=l.find(ir=>ir.id===vr))==null?void 0:sr.name)||"";try{const ir=Number(L||0),tr=await En(At(ke,"customers_candies"),{name:P.trim(),phone:xr,place:re||"",notes:ce||"",status:pe,creditLimit:Number(k||0),vendorId:vr,vendorName:Ar,initialDebt:ir,createdAt:rr.now()});G(gr=>[{id:tr.id,name:P.trim(),phone:xr,place:re||"",notes:ce||"",status:pe,creditLimit:Number(k||0),vendorId:vr,vendorName:Ar,initialDebt:ir,createdAt:rr.now(),balance:ir,lastAbonoDate:"",lastAbonoAmount:0},...gr]),at(),ue(!1),xe(" Cliente creado")}catch(ir){console.error(ir),xe(" Error al crear cliente")}},ht=ct=>{if(s){xe(" No permitido: vendedores no editan clientes desde el listado.");return}W(ct.id),Pe(ct.name),qe(ct.phone||"+505 "),st(ct.place||""),yt(ct.notes||""),Ot(ct.status||"ACTIVO"),fe(Number(ct.creditLimit||0)),ve(String(ct.vendorId||""))},Je=()=>{W(null),Pe(""),qe("+505 "),st(""),yt(""),Ot("ACTIVO"),fe(0),ve("")},zt=async()=>{var tr;if(s){xe(" No permitido.");return}if(!Y)return;const ct=U1(Le);if(!le.trim()){xe("Ingresa el nombre.");return}const xr=R.find(gr=>gr.id===Y),vr=String((xr==null?void 0:xr.vendorId)||""),Ar=s?a:String(Ke||"");if(s&&vr&&vr!==a){xe(" Este cliente pertenece a otro vendedor.");return}if(i&&vr&&Ar&&vr!==Ar){xe(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const sr=s?a:String(Ke||""),ir=sr&&((tr=l.find(gr=>gr.id===sr))==null?void 0:tr.name)||"";try{await rn(Gt(ke,"customers_candies",Y),{name:le.trim(),phone:ct,place:nt||"",notes:Et||"",status:Ct,creditLimit:Number(Pt||0),vendorId:sr,vendorName:ir}),G(gr=>gr.map(Vr=>Vr.id===Y?{...Vr,name:le.trim(),phone:ct,place:nt||"",notes:Et||"",status:Ct,creditLimit:Number(Pt||0),vendorId:sr,vendorName:ir}:Vr)),Je(),xe(" Cliente actualizado")}catch(gr){console.error(gr),xe(" Error al actualizar")}},Zt=async ct=>{if(confirm(`Eliminar al cliente "${ct.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{te(!0);const vr=Yt(At(ke,"sales_candies"),lr("customerId","==",ct.id)),Ar=await Dt(vr);for(const tr of Ar.docs){const gr=tr.id;try{await ib(gr)}catch(Vr){console.warn("restoreSaleAndDeleteCandy error",Vr);try{await Qn(Gt(ke,"sales_candies",gr))}catch{}}await EH(gr)}const sr=Yt(At(ke,"ar_movements"),lr("customerId","==",ct.id)),ir=await Dt(sr);await Promise.all(ir.docs.map(tr=>Qn(Gt(ke,"ar_movements",tr.id)))),await Qn(Gt(ke,"customers_candies",ct.id)),G(tr=>tr.filter(gr=>gr.id!==ct.id)),xe(" Cliente eliminado y dulces devueltos al inventario")}catch(vr){console.error(vr),xe(" No se pudo eliminar el cliente.")}finally{te(!1)}},Ft=(ct,xr)=>{const vr=ct.reduce((tr,gr)=>tr+(Number(gr.amount)||0),0),Ar=ct.filter(tr=>Number(tr.amount)<0).reduce((tr,gr)=>tr+Math.abs(Number(gr.amount)||0),0),sr=ct.filter(tr=>Number(tr.amount)>0).reduce((tr,gr)=>tr+(Number(gr.amount)||0),0),ir=Number(xr||0)+vr;Ae({saldoActual:ir,totalAbonado:Ar,totalCargos:Number(xr||0)+sr,saldoRestante:ir})},Vt=async ct=>{Qe(ct),Ee([]),Ae({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),oe(!0),it(!1),xt(!1),Ce(null),Re(!1),Ye(0),dt(new Date().toISOString().slice(0,10)),Xe(""),ut(null),rt(!0);try{const xr=Yt(At(ke,"ar_movements"),lr("customerId","==",ct.id)),vr=await Dt(xr),Ar=[];vr.forEach(sr=>{var Vr,gn;const ir=sr.data(),tr=ir.date??((gn=(Vr=ir.createdAt)==null?void 0:Vr.toDate)!=null&&gn.call(Vr)?ir.createdAt.toDate().toISOString().slice(0,10):""),gr=Number(ir.amount||0);Ar.push({id:sr.id,date:tr,type:ir.type??(gr<0?"ABONO":"CARGO"),amount:gr,ref:ir.ref||{},comment:ir.comment||"",createdAt:ir.createdAt})}),Ar.sort((sr,ir)=>{var Vr,gn;if(sr.date!==ir.date)return sr.date.localeCompare(ir.date);const tr=((Vr=sr.createdAt)==null?void 0:Vr.seconds)||0,gr=((gn=ir.createdAt)==null?void 0:gn.seconds)||0;return tr-gr}),Ee(Ar),Ft(Ar,Number(ct.initialDebt||0))}catch(xr){console.error(xr),xe(" No se pudo cargar el estado de cuenta")}finally{rt(!1)}},nr=ct=>{const xr=ct.filter(vr=>Number(vr.amount)<0).map(vr=>{var Ar;return{date:vr.date,amount:Math.abs(Number(vr.amount||0)),ts:((Ar=vr.createdAt)==null?void 0:Ar.seconds)||0}}).sort((vr,Ar)=>(vr.ts||0)-(Ar.ts||0));return xr.length?xr[xr.length-1]:null},Ht=async()=>{if(!je)return;xe("");const ct=Number(ze||0);if(!(ct>0)){xe("Ingresa un monto de abono mayor a 0.");return}const xr=parseFloat(ct.toFixed(2));if(!Ze){xe("Selecciona la fecha del abono.");return}try{be(!0);const vr={customerId:je.id,type:"ABONO",amount:-xr,date:Ze,comment:ge||"",createdAt:rr.now()},sr={id:(await En(At(ke,"ar_movements"),vr)).id,date:Ze,type:"ABONO",amount:-xr,comment:ge||"",createdAt:rr.now()},ir=[...Te,sr].sort((tr,gr)=>{var an,Ho;if(tr.date!==gr.date)return tr.date.localeCompare(gr.date);const Vr=((an=tr.createdAt)==null?void 0:an.seconds)||0,gn=((Ho=gr.createdAt)==null?void 0:Ho.seconds)||0;return Vr-gn});Ee(ir),Ft(ir,Number(je.initialDebt||0)),G(tr=>tr.map(gr=>{if(gr.id!==je.id)return gr;const Vr=(gr.balance||0)-xr;return{...gr,balance:Vr,lastAbonoDate:Ze,lastAbonoAmount:xr}})),Qe(tr=>tr&&{...tr,balance:(tr.balance||0)-xr,lastAbonoDate:Ze,lastAbonoAmount:xr}),Ye(0),Xe(""),dt(new Date().toISOString().slice(0,10)),Re(!1),xe(" Abono registrado")}catch(vr){console.error(vr),xe(" Error al registrar el abono")}finally{be(!1)}},Nr=ct=>{ut(ct.id),Rt(ct.date||new Date().toISOString().slice(0,10)),mt(Math.abs(Number(ct.amount||0))),ae(ct.comment||"")},Or=()=>{ut(null),Rt(""),mt(0),ae("")},Fn=async()=>{if(!Ge||!je)return;const ct=Te.findIndex(sr=>sr.id===Ge);if(ct===-1)return;const xr=Te[ct],vr=Number(Wt||0);if(!(vr>0)){xe("El monto debe ser mayor a 0.");return}const Ar=xr.type==="ABONO"?-parseFloat(vr.toFixed(2)):+parseFloat(vr.toFixed(2));try{await rn(Gt(ke,"ar_movements",Ge),{date:bt,amount:Ar,comment:ne||""});const sr=[...Te];sr[ct]={...xr,date:bt,amount:Ar,comment:ne||""},sr.sort((Vr,gn)=>{var si,pi;if(Vr.date!==gn.date)return Vr.date.localeCompare(gn.date);const an=((si=Vr.createdAt)==null?void 0:si.seconds)||0,Ho=((pi=gn.createdAt)==null?void 0:pi.seconds)||0;return an-Ho}),Ee(sr),Ft(sr,Number(je.initialDebt||0));const ir=sr.reduce((Vr,gn)=>Vr+(Number(gn.amount)||0),0),tr=Number(je.initialDebt||0)+ir,gr=nr(sr);G(Vr=>Vr.map(gn=>gn.id===je.id?{...gn,balance:tr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}:gn)),Qe(Vr=>Vr&&{...Vr,balance:tr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}),Or(),xe(" Movimiento actualizado")}catch(sr){console.error(sr),xe(" Error al actualizar movimiento")}},vn=async ct=>{var vr,Ar;if(confirm(`Eliminar este movimiento (${ct.type==="ABONO"?"Abono":"Compra"}) del ${ct.date}?${ct.type==="CARGO"&&((vr=ct.ref)!=null&&vr.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&je)try{if(te(!0),ct.type==="CARGO"&&((Ar=ct.ref)!=null&&Ar.saleId)){try{await ib(ct.ref.saleId)}catch(Vr){console.warn("restoreSaleAndDeleteCandy error",Vr),te(!1),xe(" No se pudo devolver inventario de la venta.");return}await EH(ct.ref.saleId)}else await Qn(Gt(ke,"ar_movements",ct.id));const sr=Te.filter(Vr=>{var gn,an;return ct.type==="CARGO"&&((gn=ct.ref)!=null&&gn.saleId)?((an=Vr.ref)==null?void 0:an.saleId)!==ct.ref.saleId:Vr.id!==ct.id});Ee(sr),Ft(sr,Number(je.initialDebt||0));const ir=sr.reduce((Vr,gn)=>Vr+(Number(gn.amount)||0),0),tr=Number(je.initialDebt||0)+ir,gr=nr(sr);G(Vr=>Vr.map(gn=>gn.id===je.id?{...gn,balance:tr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}:gn)),Qe(Vr=>Vr&&{...Vr,balance:tr,lastAbonoDate:(gr==null?void 0:gr.date)||"",lastAbonoAmount:(gr==null?void 0:gr.amount)||0}),Ce(null),xe(" Movimiento eliminado")}catch(sr){console.error(sr),xe(" Error al eliminar movimiento")}finally{te(!1)}},Na=v.useMemo(()=>[...R].sort((ct,xr)=>{var vr,Ar;return ct.status!==xr.status?ct.status==="BLOQUEADO"?1:-1:(((vr=xr.createdAt)==null?void 0:vr.seconds)||0)-(((Ar=ct.createdAt)==null?void 0:Ar.seconds)||0)}),[R]),Ku=ct=>ct==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Rn=v.useMemo(()=>{const ct=A.trim().toLowerCase(),xr=p.trim()===""?null:Number(p),vr=x.trim()===""?null:Number(x);return Na.filter(Ar=>{const sr=!ct||String(Ar.name||"").toLowerCase().includes(ct),ir=!f||Ar.status===f,tr=Number(Ar.balance||0),gr=xr===null||!Number.isNaN(xr)&&tr>=xr,Vr=vr===null||!Number.isNaN(vr)&&tr<=vr;return sr&&ir&&gr&&Vr})},[Na,A,f,p,x]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{ue(!0),s&&M(a)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>d(ct=>!ct),children:u?"Ocultar filtros":"Mostrar filtros"}),u&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:ct=>h(ct.target.value),placeholder:"Buscar por nombre"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:ct=>m(ct.target.value||""),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:p,onChange:ct=>g(ct.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:x,onChange:ct=>y(ct.target.value),placeholder:""})]})]}),o.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),m(""),g(""),y("")},children:"Limpiar"})})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ee?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Rn.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Rn.map(ct=>{var vr;const xr=Y===ct.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(vr=ct.createdAt)!=null&&vr.toDate?ct.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:le,onChange:Ar=>Pe(Ar.target.value)}):o.jsx("div",{className:"font-medium",children:ct.name})}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:Le,onChange:Ar=>qe(U1(Ar.target.value))}):ct.phone}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:s?a:Ke,onChange:Ar=>ve(Ar.target.value),disabled:s,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(Ar=>o.jsx("option",{value:Ar.id,children:Ar.name},Ar.id))]}):ct.vendorName||""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded",value:nt,onChange:Ar=>st(Ar.target.value),children:[o.jsx("option",{value:"",children:""}),tT.map(Ar=>o.jsx("option",{value:Ar,children:Ar},Ar))]}):ct.place||""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("select",{className:"w-full border p-1 rounded",value:Ct,onChange:Ar=>Ot(Ar.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ku(ct.status)}`,children:ct.status})}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Pt)?"":Pt,onChange:Ar=>fe(Math.max(0,Number(Ar.target.value||0)))}):zi(ct.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:zi(ct.balance||0)}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Et,onChange:Ar=>yt(Ar.target.value),maxLength:500}):o.jsx("span",{title:ct.notes||"",children:(ct.notes||"").length>40?(ct.notes||"").slice(0,40)+"":ct.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:xr?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:zt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Je,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ht(ct),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Zt(ct),disabled:!i,title:i?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Vt(ct),children:"Estado de cuenta"})]})})})]},ct.id)})})]})}),o.jsx("div",{className:"md:hidden",children:ee?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Rn.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):o.jsx("div",{className:"space-y-2",children:Rn.map(ct=>{const xr=Be===ct.id,vr=Y===ct.id,Ar=o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Ku(ct.status)}`,children:ct.status});return o.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{xe(""),!vr&&Oe(sr=>sr===ct.id?null:ct.id)},children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"truncate font-semibold",children:ct.name})}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),o.jsx("div",{className:"font-semibold leading-4",children:zi(ct.balance||0)})]}),Ar]})]}),xr&&o.jsxs("div",{className:"px-3 pb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),o.jsx("div",{className:"font-medium",children:ct.lastAbonoDate?ct.lastAbonoDate:""}),o.jsx("div",{className:"text-[12px] text-gray-700",children:ct.lastAbonoAmount?zi(ct.lastAbonoAmount):""})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),o.jsx("div",{className:"text-lg font-bold",children:zi(ct.balance||0)})]})]}),vr?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:le,onChange:sr=>Pe(sr.target.value)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:Le,onChange:sr=>qe(U1(sr.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:Ct,onChange:sr=>Ot(sr.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:nt,onChange:sr=>st(sr.target.value),children:[o.jsx("option",{value:"",children:""}),tT.map(sr=>o.jsx("option",{value:sr,children:sr},sr))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:s?a:Ke,onChange:sr=>ve(sr.target.value),disabled:s,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(sr=>o.jsx("option",{value:sr.id,children:sr.name},sr.id))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Pt)?"":Pt,onChange:sr=>fe(Math.max(0,Number(sr.target.value||0)))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:Et,onChange:sr=>yt(sr.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:zt,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{Je(),Oe(null)},type:"button",children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ht(ct),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>Zt(ct),disabled:!i,title:i?"Borrar":"Solo admin",type:"button",children:"Borrar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Vt(ct),type:"button",children:"Estado"})]})]})]},ct.id)})})})]}),Q&&o.jsx("p",{className:"mt-2 text-sm",children:Q}),me&&gd.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ue(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:wt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:P,onChange:ct=>D(ct.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:X,onChange:ct=>de(U1(ct.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:re,onChange:ct=>ie(ct.target.value),children:[o.jsx("option",{value:"",children:""}),tT.map(ct=>o.jsx("option",{value:ct,children:ct},ct))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:pe,onChange:ct=>Se(ct.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:s?a:H,onChange:ct=>M(ct.target.value),disabled:s,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),l.map(ct=>o.jsx("option",{value:ct.id,children:ct.name},ct.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:L===0?"":L,onChange:ct=>z(Math.max(0,Number(ct.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:ct=>F(Math.max(0,Number(ct.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ce,onChange:ct=>J(ct.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ce.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),he&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(je==null?void 0:je.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Ye(0),dt(new Date().toISOString().slice(0,10)),Xe(""),Re(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>oe(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:zi(Number((je==null?void 0:je.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:zi(V.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:zi(V.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:zi(V.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:tt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Te.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Te.map(ct=>{var vr,Ar;const xr=Ge===ct.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:bt,onChange:sr=>Rt(sr.target.value)}):ct.date||""}),o.jsx("td",{className:"p-2 border",children:ct.amount>=0?(vr=ct.ref)!=null&&vr.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>B(ct.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(Ar=ct.ref)!=null&&Ar.saleId?`Venta #${ct.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:xr?o.jsx("input",{className:"w-full border p-1 rounded",value:ne,onChange:sr=>ae(sr.target.value),placeholder:"Comentario"}):o.jsx("span",{title:ct.comment||"",children:(ct.comment||"").length>40?(ct.comment||"").slice(0,40)+"":ct.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:xr?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Wt)?"":Wt,onChange:sr=>{const ir=Number(sr.target.value||0),tr=Number.isFinite(ir)?Math.max(0,parseFloat(ir.toFixed(2))):0;mt(tr)},placeholder:"0.00"}):zi(ct.amount)}),o.jsx("td",{className:"p-2 border",children:xr?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Fn,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Or,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nr(ct),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>vn(ct),children:"Borrar"})]})})]},ct.id)})})]})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>it(ct=>!ct),children:[o.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),o.jsx("div",{className:"text-sm text-gray-500",children:We?"Ocultar":"Ver"})]}),We&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),o.jsx("div",{className:"font-bold",children:zi(Number((je==null?void 0:je.initialDebt)||0))})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),o.jsx("div",{className:"font-bold",children:zi(V.saldoActual)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),o.jsx("div",{className:"font-bold",children:zi(V.totalAbonado)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),o.jsx("div",{className:"font-bold",children:zi(V.saldoRestante)})]})]})]}),o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>xt(ct=>!ct),children:[o.jsx("div",{className:"font-semibold",children:"Movimientos"}),o.jsx("div",{className:"text-sm text-gray-500",children:gt?"Ocultar":"Ver"})]}),gt&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:tt?o.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):Te.length===0?o.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):Te.map(ct=>{var ir;const xr=_t===ct.id,vr=Ge===ct.id,Ar=ct.amount>=0?"CARGO":"ABONO",sr=ct.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return o.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{vr||Ce(tr=>tr===ct.id?null:ct.id)},children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:ct.date||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${sr}`,children:Ar}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),o.jsx("div",{className:"font-semibold",children:zi(ct.amount)})]})]})]}),xr&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),o.jsx("div",{className:"font-medium",children:(ir=ct.ref)!=null&&ir.saleId?`Venta #${ct.ref.saleId}`:""})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),vr?o.jsx("input",{className:"w-full border p-2 rounded-xl",value:ne,onChange:tr=>ae(tr.target.value),placeholder:"Comentario"}):o.jsx("div",{className:"font-medium",children:(ct.comment||"").trim()||""})]}),vr&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:bt,onChange:tr=>Rt(tr.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Wt)?"":Wt,onChange:tr=>{const gr=Number(tr.target.value||0),Vr=Number.isFinite(gr)?Math.max(0,parseFloat(gr.toFixed(2))):0;mt(Vr)}})]})]}),vr?o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Fn,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Or,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Nr(ct),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>vn(ct),type:"button",children:"Borrar"})]})]})]},ct.id)})})]})]}),Ne&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(je==null?void 0:je.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ze,onChange:ct=>dt(ct.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ze===0?"":ze,onChange:ct=>{const xr=Number(ct.target.value||0),vr=Number.isFinite(xr)?Math.max(0,parseFloat(xr.toFixed(2))):0;Ye(vr)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ge,onChange:ct=>Xe(ct.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ge.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Re(!1),disabled:ot,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Ht,disabled:ot,children:ot?"Guardando...":"Guardar abono"})]})]})})]})}),b&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",C?` #${C}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):S.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):S.map((ct,xr)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ct.productName}),o.jsx("td",{className:"p-2 border text-right",children:ct.qty}),o.jsx("td",{className:"p-2 border text-right",children:zi(ct.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:zi(ct.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:zi(ct.total)})]},xr))})]})})]})})]})}const Xl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _Le(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function CLe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function ELe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Br;let A=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,A),A+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,A),A+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,A),A+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,A),A+=5,d.text(`Sucursal: ${_Le(a)}`,10,A),A+=5,d.text(`Autorizado: ${e}`,10,A),A+=5,l&&(d.text(`Vendedor: ${l}`,10,A),A+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),f=c.toFixed(2);d.text(`Comisin vendedor: ${f}%  C$ ${h}`,10,A),A+=8}else A+=3;d.setFontSize(12),d.text("Producto",10,A),d.text("Paquetes",110,A,{align:"right"}),d.text("Precio.",150,A,{align:"right"}),d.text("Subtotal",190,A,{align:"right"}),A+=4,d.line(10,A,190,A),A+=4,s.forEach(h=>{A>270&&(d.addPage(),A=12);const f=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(f,10,A),d.text(String(h.qty),110,A,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,A,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,A,{align:"right"}),A+=5}),A+=4,d.line(10,A,190,A),A+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,A,{align:"right"}),A+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,A),d.save(`venta_dulces_${e}.pdf`)}async function SH(t,e){if(!t||!e)return 0;const r=Yt(At(ke,"inventory_candies_sellers"),lr("sellerId","==",e),lr("productId","==",t)),n=await Dt(r);let a=0;return n.forEach(s=>{const i=s.data(),l=Number(i.remainingUnits??i.remaining??i.totalUnits??0);l>0&&(a+=l)}),a}const IH=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function SLe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||i<=0)return{allocations:[]};const c=Yt(At(ke,"inventory_candies_sellers"),lr("sellerId","==",r),lr("productId","==",e),lr("remainingUnits",">",0),ln("date","asc"),ln("createdAt","asc")),u=await Dt(c);for(const d of u.docs){if(i<=0)break;const A=d.data(),h=Number(A.remainingUnits||0);if(h<=0)continue;const f=Math.min(h,i),m=h-f,p=Math.max(1,Math.floor(Number(A.unitsPerPackage||1))),g=Math.floor(m/p);await rn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:f,saleDate:a,saleId:s}),i-=f}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:l}}function ILe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState({}),[A,h]=v.useState("CONTADO"),[f,m]=v.useState("RIVAS"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(IH()),[I,T]=v.useState(""),[C,E]=v.useState(!1),[S,O]=v.useState(""),[B,P]=v.useState([]),[D,X]=v.useState(!0),[de,re]=v.useState(!1),ie=v.useMemo(()=>B.reduce((V,Ae)=>V+(Ae.qtyPackages||0),0),[B]),ce=v.useMemo(()=>B.reduce((V,Ae)=>V+(Ae.qtyPackages||0)*(Ae.unitsPerPackage||1),0),[B]),J=v.useMemo(()=>{const V=B.reduce((Ae,Ne)=>{const Re=(Number(Ne.pricePerPackage)||0)*(Ne.qtyPackages||0),ze=Number(Ne.discount)||0,Ye=Math.max(0,Re-ze);return Ae+Ye},0);return Math.floor(V*100)/100},[B]),[pe,Se]=v.useState(0),[k,F]=v.useState(""),[H,M]=v.useState(!1),[L,z]=v.useState(!1),[R,G]=v.useState(""),[ee,te]=v.useState("+505 "),[Q,xe]=v.useState(""),[Y,W]=v.useState(""),[le,Pe]=v.useState("ACTIVO"),[Le,qe]=v.useState(0),[nt,st]=v.useState(""),Et=v.useMemo(()=>n.find(V=>V.id===p),[n,p]),yt=v.useMemo(()=>C&&I?n.filter(V=>(V.vendorId??V.sellerId??"")===I):n,[n,C,I]),Ct=(Et==null?void 0:Et.balance)||0,Ot=A==="CREDITO"?Ct+Math.max(0,Number(J||0))-Math.max(0,Number(pe||0)):0,Pt=v.useMemo(()=>l.find(V=>V.id===I)||null,[l,I]),fe=(Pt==null?void 0:Pt.commissionPercent)||0,Ke=v.useMemo(()=>{const V=Number(J||0),Ae=Number(fe||0),Ne=V*Ae/100;return Number(Ne.toFixed(2))},[J,fe]);v.useEffect(()=>{(async()=>{const V=Yt(At(ke,"customers_candies"),ln("createdAt","desc")),Ae=await Dt(V),Ne=[];Ae.forEach(Ze=>{const dt=Ze.data();Ne.push({id:Ze.id,name:dt.name??"",phone:dt.phone??"+505 ",place:dt.place??"",status:dt.status??"ACTIVO",creditLimit:Number(dt.creditLimit??0),balance:0,sellerId:dt.sellerId??dt.vendorId??"",vendorId:dt.vendorId??dt.sellerId??""})});for(const Ze of Ne)try{const dt=Yt(At(ke,"ar_movements"),lr("customerId","==",Ze.id)),ge=await Dt(dt);let Xe=0;ge.forEach(be=>Xe+=Number(be.data().amount||0));const ot=Number(Ze.initialDebt||0);Ze.balance=Xe+ot}catch{Ze.balance=0}a(Ne);const Re=Yt(At(ke,"products_candies"),ln("createdAt","desc")),ze=await Dt(Re),Ye=[];ze.forEach(Ze=>{const dt=Ze.data();Ye.push({id:Ze.id,name:dt.name??"(sin nombre)",sku:dt.sku??"",unitsPerPackage:Number(dt.unitsPerPackage??1),priceRivas:Number(dt.unitPriceRivas??0),priceSanJorge:Number(dt.unitPriceSanJorge??0),priceIsla:Number(dt.unitPriceIsla??0)})}),i(Ye);try{const Ze=await Dt(At(ke,"sellers_candies")),dt=[];Ze.forEach(ge=>{const Xe=ge.data(),ot=Xe.branch||"Rivas",be=CLe(ot);dt.push({id:ge.id,name:Xe.name??"(sin nombre)",branch:be,branchLabel:ot,commissionPercent:Number(Xe.commissionPercent??0)})}),c(dt)}catch(Ze){console.error("Error cargando vendedores:",Ze)}d({})})()},[]),v.useEffect(()=>{if(t==="vendedor_dulces"&&e){T(e),E(!0);try{localStorage.setItem("pos_vendorId",e),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(t==="admin"){E(!1);return}try{const V=localStorage.getItem("pos_vendorId")||"",Ae=localStorage.getItem("pos_role")||"";V&&T(V),Ae.toUpperCase()==="VENDEDOR"&&E(!0)}catch{}},[t,e]);const ve=async V=>{if(!V){d({});return}const Ae=Yt(At(ke,"inventory_candies_sellers"),lr("sellerId","==",V)),Ne=await Dt(Ae),Re={};Ne.forEach(ze=>{const Ye=ze.data(),Ze=Ye.productId||"";if(!Ze)return;const dt=Number(Ye.remainingUnits??Ye.remaining??Ye.totalUnits??0);dt<=0||(Re[Ze]=(Re[Ze]||0)+dt)}),d(Re),P(ze=>{const Ye=[];for(const Ze of ze){const dt=Re[Ze.productId]??0;dt>0&&Ye.push({...Ze,availableUnits:dt})}return Ye})};v.useEffect(()=>{if(!I){d({});return}const V=l.find(Ae=>Ae.id===I);V&&m(V.branch),ve(I)},[I,l]),v.useEffect(()=>{P(V=>V.map(Ae=>{const Ne=s.find(ze=>ze.id===Ae.productId);if(!Ne)return Ae;const Re=f==="RIVAS"?Ne.priceRivas:f==="SAN_JORGE"?Ne.priceSanJorge:Ne.priceIsla;return{...Ae,pricePerPackage:Number(Re)||0}}))},[f,s]);async function he(V){const{productId:Ae,vendorId:Ne,branch:Re}=V;if(!Ae||!Ne)return 0;const ze=Yt(At(ke,"inventory_candies_sellers"),lr("sellerId","==",Ne),lr("productId","==",Ae)),Ye=await Dt(ze);if(Ye.empty)return 0;const Ze=Ye.docs[0].data(),dt=Number(Ze.unitPriceVendor??0);if(dt>0)return dt;const ge=Number(Re==="RIVAS"?Ze.unitPriceRivas??0:Re==="SAN_JORGE"?Ze.unitPriceSanJorge??0:Ze.unitPriceIsla??0);return Number(ge||0)}const oe=async V=>{var Ze;if(!V)return;if(!I){F("Selecciona primero el vendedor para usar su inventario."),O("");return}if(B.some(dt=>dt.productId===V)){O("");return}const Ae=s.find(dt=>dt.id===V);if(!Ae){O("");return}const Ne=await SH(V,I),Re=((Ze=l.find(dt=>dt.id===I))==null?void 0:Ze.branch)??f,ze=await he({productId:V,vendorId:I,branch:Re}),Ye={productId:V,productName:Ae.name||"",sku:Ae.sku||"",unitsPerPackage:Ae.unitsPerPackage||1,pricePerPackage:Number(ze)||0,availableUnits:Number(Ne)||0,qtyPackages:0,discount:0};P(dt=>[...dt,Ye]),O("")},je=(V,Ae)=>{P(Ne=>Ne.map(Re=>{if(Re.productId!==V)return Re;if(Ae==="")return{...Re,qtyPackages:0};const ze=Math.max(0,Math.floor(Number(Ae)));return{...Re,qtyPackages:ze}}))},Qe=(V,Ae)=>{P(Ne=>Ne.map(Re=>{if(Re.productId!==V)return Re;if(Ae==="")return{...Re,discount:0};const ze=Math.max(0,Math.floor(Number(Ae)));return{...Re,discount:ze}}))},tt=V=>P(Ae=>Ae.filter(Ne=>Ne.productId!==V)),rt=async()=>{if(!b)return"Selecciona la fecha.";if(!I)return"Selecciona el vendedor para esta venta.";if(B.length===0)return"Agrega al menos un producto.";const V=B.filter(Ae=>(Ae.qtyPackages||0)>0);if(V.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(J>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!x.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!p)return"Selecciona un cliente (crdito).";if(pe<0)return"El pago inicial no puede ser negativo.";if(pe>J)return"El pago inicial no puede superar el total.";if((Et==null?void 0:Et.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Ae of V){const Ne=Ae.unitsPerPackage||1,Re=(Ae.qtyPackages||0)*Ne,ze=await SH(Ae.productId,I),Ye=Math.floor(ze/Ne);if(Re>ze)return`Inventario insuficiente en el pedido del vendedor para "${Ae.productName}". Disponible: ${Ye} paquetes.`;const Ze=(Number(Ae.pricePerPackage)||0)*(Ae.qtyPackages||0),dt=Number(Ae.discount)||0;if(!Number.isInteger(dt)||dt<0)return`El descuento en "${Ae.productName}" debe ser entero y  0.`;if(dt>Ze)return`El descuento en "${Ae.productName}" no puede exceder C$ ${Ze.toFixed(2)}.`}return null},Te=async V=>{V.preventDefault(),F("");const Ae=await rt();if(Ae){F(" "+Ae);return}try{M(!0);const Ne=B.filter(dt=>(dt.qtyPackages||0)>0).map(dt=>{const ge=dt.unitsPerPackage||1,Xe=dt.qtyPackages||0,ot=Xe*ge,be=(Number(dt.pricePerPackage)||0)*(Xe||0),Ge=Math.max(0,Math.floor(Number(dt.discount)||0)),ut=Math.max(0,be-Ge);return{productId:dt.productId,productName:dt.productName,sku:dt.sku||"",qty:ot,packages:Xe,unitsPerPackage:ge,branch:f,unitPricePackage:Number(dt.pricePerPackage)||0,discount:Ge,total:Math.floor(ut*100)/100}}),Re={type:A,branch:f,date:b,createdAt:rr.now(),itemsTotal:Number(J)||0,total:Number(J)||0,quantity:Number(ce)||0,packagesTotal:Number(ie)||0,items:Ne,vendorId:I},ze=l.find(dt=>dt.id===I);ze&&(Re.vendorName=ze.name,Re.vendorBranch=ze.branch,Re.vendorBranchLabel=ze.branchLabel,Re.vendorCommissionPercent=ze.commissionPercent||0,Re.vendorCommissionAmount=Ke||0),A==="CONTADO"?Re.customerName=x.trim():(Re.customerId=p,Re.downPayment=Number(pe)||0);const Ye=await En(At(ke,"sales_candies"),Re);if(A==="CONTADO"){const dt=(x||"").trim();if(dt)try{await En(At(ke,"cash_customers"),{name:dt,date:b,branch:f,vendorId:I,createdAt:rr.now()})}catch(ge){console.warn("No se pudo guardar cash_customer:",ge)}}if(A==="CREDITO"&&p){const dt={customerId:p,date:b,createdAt:rr.now(),ref:{saleId:Ye.id}},ge=Number((Et==null?void 0:Et.balance)||0);if(await En(At(ke,"ar_movements"),{...dt,type:"CARGO",amount:Number(J)||0}),Number(pe)>0&&await En(At(ke,"ar_movements"),{...dt,type:"ABONO",amount:-Number(pe)}),ge===0)try{await rn(Gt(ke,"customers_candies",p),{initialDebt:Number(J)||0,initialDebtDate:b})}catch(Xe){console.warn("No se pudo setear initialDebt:",Xe)}}const Ze={};for(const dt of Ne)if(dt.qty>0){const{allocations:ge}=await SLe({productId:dt.productId,vendorId:I,quantityUnits:dt.qty,saleDate:b,saleId:Ye.id});Ze[dt.productId]={productId:dt.productId,vendorId:I,allocations:ge}}await rn(Gt(ke,"sales_candies",Ye.id),{allocationsByItem:Ze});try{const dt=A==="CONTADO"?x.trim()||"Cliente Mostrador":(Et==null?void 0:Et.name)||"Cliente crdito";ELe({saleId:Ye.id,date:b,customerName:dt,branch:f,items:Ne.map(ge=>({productName:ge.productName,qty:ge.packages,unitPrice:ge.unitPricePackage,total:ge.total})),total:Number(J)||0,vendorName:ze==null?void 0:ze.name,vendorCommissionPercent:(ze==null?void 0:ze.commissionPercent)||0,vendorCommissionAmount:Ke})}catch(dt){console.error("Error generando voucher PDF:",dt)}h("CONTADO"),g(""),y(""),w(IH()),P([]),Se(0),A==="CREDITO"&&p&&a(dt=>dt.map(ge=>ge.id===p?{...ge,balance:(ge.balance||0)+(Number(J)||0)-(Number(pe)||0)}:ge)),F(" Venta de dulces registrada"),I?await ve(I):d({})}catch(Ne){console.error(Ne),F(" Error al guardar la venta de dulces")}finally{M(!1)}},Ee=v.useMemo(()=>s.filter(V=>{const Ae=u[V.id]||0,Ne=Math.max(1,Number(V.unitsPerPackage||1));return Math.floor(Ae/Ne)>0}).sort((V,Ae)=>(V.name||"").localeCompare(Ae.name||"")),[s,u]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),o.jsxs("form",{onSubmit:Te,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:V=>h(V.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:x,onChange:V=>y(V.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:p,onChange:V=>g(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),yt.map(V=>o.jsxs("option",{value:V.status==="ACTIVO"?V.id:"",disabled:V.status==="BLOQUEADO",children:[V.name," | ",V.phone," | Saldo: ",Xl(V.balance||0)]},V.id))]}),o.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>z(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Xl(Ct)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:pe===0?"":pe,onChange:V=>Se(Math.max(0,Number(V.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Xl(Ot)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:V=>w(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:V=>{T(V.target.value),P([])},disabled:C,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.branchLabel,"  ",V.commissionPercent.toFixed(2),"%"," comisin"]},V.id))]}),C&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:f==="RIVAS",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Rivas"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:f==="SAN_JORGE",readOnly:!0,disabled:!0}),o.jsx("span",{children:"San Jorge"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:f==="ISLA",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Isla de Ometepe"})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:S,onChange:async V=>{const Ae=V.target.value;O(Ae),await oe(Ae)},disabled:!I,children:[o.jsx("option",{value:"",children:I?"Selecciona un producto":"Selecciona un vendedor primero"}),Ee.map(V=>{const Ae=B.some(Ye=>Ye.productId===V.id),Ne=u[V.id]||0,Re=Math.max(1,Number(V.unitsPerPackage||1)),ze=Math.floor(Ne/Re);return ze<=0?null:o.jsxs("option",{value:Ae?"":V.id,disabled:Ae,children:[V.name," ",V.sku?` ${V.sku}`:""," (disp: ",ze," ","paq.)",Ae?" ":""]},V.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),B.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):B.map(V=>{const Ae=u[V.productId]??V.availableUnits??0,Ne=V.unitsPerPackage?Math.floor(Ae/V.unitsPerPackage):0,Re=Math.max(0,Ne-(V.qtyPackages||0)),ze=(Number(V.pricePerPackage)||0)*(V.qtyPackages||0),Ye=Math.max(0,ze-(Number(V.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[V.productName,V.sku?`  ${V.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Xl(V.pricePerPackage)}),o.jsxs("div",{className:"col-span-2 text-right",children:[Re," paq."]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(V.qtyPackages)||V.qtyPackages===0?"":V.qtyPackages,onChange:Ze=>je(V.productId,Ze.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(V.discount)||V.discount===0?"":V.discount,onChange:Ze=>Qe(V.productId,Ze.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1 text-right",children:Xl(Ye)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>tt(V.productId),title:"Quitar producto",children:""})})]},V.productId)})]})}),B.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),o.jsx("span",{className:"font-semibold",children:ie})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Xl(J)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),o.jsxs("span",{className:"font-semibold",children:[Xl(Ke)," ",fe?`(${fe.toFixed(2)}%)`:""]})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:H,children:H?"Guardando...":"Registrar venta"})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>X(V=>!V),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",o.jsx("span",{className:"text-lg",children:D?"":"+"})]}),D&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:V=>w(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:V=>h(V.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:x,onChange:V=>y(V.target.value)})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:V=>g(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),yt.map(V=>o.jsxs("option",{value:V.status==="ACTIVO"?V.id:"",disabled:V.status==="BLOQUEADO",children:[V.name," | Saldo: ",Xl(V.balance||0)]},V.id))]}),o.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>z(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:Xl(Ct)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:Xl(Ot)})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:pe===0?"":pe,onChange:V=>Se(Math.max(0,Number(V.target.value||0))),placeholder:"0.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:V=>{T(V.target.value),P([])},disabled:C,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  "," ",V.commissionPercent.toFixed(2),"%"]},V.id))]}),C&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>re(V=>!V),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",o.jsx("span",{className:"text-lg",children:de?"":"+"})]}),de&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:S,onChange:async V=>{const Ae=V.target.value;O(Ae),await oe(Ae)},disabled:!I,children:[o.jsx("option",{value:"",children:I?"Selecciona un producto":"Selecciona un vendedor primero"}),Ee.map(V=>{const Ae=B.some(Ye=>Ye.productId===V.id),Ne=u[V.id]||0,Re=Math.max(1,Number(V.unitsPerPackage||1)),ze=Math.floor(Ne/Re);return ze<=0?null:o.jsxs("option",{value:Ae?"":V.id,disabled:Ae,children:[V.name," ",V.sku?` ${V.sku}`:""," (disp:"," ",ze," paq.)",Ae?" ":""]},V.id)})]})]}),B.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):o.jsx("div",{className:"space-y-2",children:B.map(V=>{const Ae=u[V.productId]??V.availableUnits??0,Ne=V.unitsPerPackage?Math.floor(Ae/V.unitsPerPackage):0,Re=Math.max(0,Ne-(V.qtyPackages||0)),ze=(Number(V.pricePerPackage)||0)*(V.qtyPackages||0),Ye=Math.max(0,ze-(Number(V.discount)||0));return o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[o.jsxs("div",{className:"font-semibold leading-tight",children:[V.productName,V.sku?`  ${V.sku}`:""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),o.jsx("div",{className:"font-bold",children:Xl(V.pricePerPackage)})]}),o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),o.jsxs("div",{className:"font-bold",children:[Re," paq."]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(V.qtyPackages)||V.qtyPackages===0?"":V.qtyPackages,onChange:Ze=>je(V.productId,Ze.target.value),inputMode:"numeric",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(V.discount)||V.discount===0?"":V.discount,onChange:Ze=>Qe(V.productId,Ze.target.value),inputMode:"numeric",placeholder:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Xl(Ye)]}),o.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Xl(Ke)]}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>tt(V.productId),children:"Quitar"})]})]},V.productId)})}),B.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:ie})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsx("div",{className:"font-semibold",children:Xl(J)})]})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:H,children:H?"Guardando...":"Registrar venta"})]})]}),k&&o.jsx("p",{className:"mt-2 text-sm",children:k}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"})})}),H&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const BH=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],y_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function BLe(){const[t,e]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[h,f]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState(""),[O,B]=v.useState(""),[P,D]=v.useState(""),[X,de]=v.useState(0),[re,ie]=v.useState("PENDIENTE"),[ce,J]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const R=Yt(At(ke,"expenses_candies"),ln("date","desc")),G=await Dt(R),ee=[];G.forEach(te=>{const Q=te.data();ee.push({id:te.id,date:Q.date||wr(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??rr.now()})}),x(ee)}catch(R){console.error(R),I(" Error al cargar gastos")}finally{b(!1)}})()},[]);const pe=v.useMemo(()=>g.filter(R=>!(t&&R.date<t||r&&R.date>r)),[g,t,r]),Se=v.useMemo(()=>{const R=pe.reduce((te,Q)=>te+(Q.amount||0),0),G=pe.filter(te=>te.status==="PAGADO").reduce((te,Q)=>te+(Q.amount||0),0),ee=R-G;return{total:R,pagado:G,pendiente:ee}},[pe]),k=()=>{s(wr(new Date,"yyyy-MM-dd")),l(""),u(""),A(0),f("PENDIENTE"),p("")},F=async R=>{if(R.preventDefault(),I(""),!i){I("Selecciona una categora.");return}if(!c.trim()){I("Ingresa una descripcin.");return}if(!d||d<=0){I("Ingresa un monto vlido.");return}try{const G=await En(At(ke,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:rr.now()});x(ee=>[{id:G.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:rr.now()},...ee]),k(),I(" Gasto registrado")}catch(G){console.error(G),I(" Error al guardar gasto")}},H=R=>{C(R.id),S(R.date),B(R.category||""),D(R.description||""),de(Number(R.amount||0)),ie(R.status||"PENDIENTE"),J(R.notes||"")},M=()=>{C(null),S(""),B(""),D(""),de(0),ie("PENDIENTE"),J("")},L=async()=>{if(T){if(!O){I("Selecciona una categora.");return}if(!P.trim()){I("Ingresa una descripcin.");return}if(!X||X<=0){I("Ingresa un monto vlido.");return}try{await rn(Gt(ke,"expenses_candies",T),{date:E,category:O,description:P.trim(),amount:Number(X.toFixed(2)),status:re,notes:ce||""}),x(R=>R.map(G=>G.id===T?{...G,date:E,category:O,description:P.trim(),amount:Number(X.toFixed(2)),status:re,notes:ce||""}:G)),M(),I(" Gasto actualizado")}catch(R){console.error(R),I(" Error al actualizar gasto")}}},z=async R=>{confirm(`Eliminar el gasto "${R.description}"?`)&&(await Qn(Gt(ke,"expenses_candies",R.id)),x(ee=>ee.filter(te=>te.id!==R.id)),I(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:R=>n(R.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",y_(Se.total)]}),o.jsxs("div",{children:["Pagado: ",y_(Se.pagado)]}),o.jsxs("div",{children:["Pendiente: ",y_(Se.pendiente)]})]})]}),o.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>l(R.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),BH.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:R=>A(Math.max(0,Number(R.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:R=>f(R.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:R=>p(R.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):pe.slice().sort((R,G)=>R.date.localeCompare(G.date)).map(R=>{const G=T===R.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ee=>S(ee.target.value)}):R.date}),o.jsx("td",{className:"p-2 border",children:G?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:ee=>B(ee.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),BH.map(ee=>o.jsx("option",{value:ee,children:ee},ee))]}):R.category||""}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{className:"w-full border p-1 rounded",value:P,onChange:ee=>D(ee.target.value)}):o.jsx("span",{title:R.description,children:R.description.length>40?R.description.slice(0,40)+"":R.description})}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:ee=>de(Math.max(0,Number(ee.target.value||0)))}):y_(R.amount)}),o.jsx("td",{className:"p-2 border",children:G?o.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ee=>ie(ee.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),o.jsx("td",{className:"p-2 border",children:G?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ce,onChange:ee=>J(ee.target.value),maxLength:500}):o.jsx("span",{title:R.notes||"",children:(R.notes||"").length>40?(R.notes||"").slice(0,40)+"":R.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:G?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:L,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(R),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(R),children:"Borrar"})]})})})]},R.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Yl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function TLe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function PLe(t,e){var s,i,l;const r=TLe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function jLe(t){const e=Yt(At(ke,"ar_movements"),lr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn(Gt(ke,"ar_movements",n.id))))}function kLe({role:t="",sellerCandyId:e=""}){const r=t==="vendedor_dulces",n=t==="admin",a=n?8:7,[s,i]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(null),[A,h]=v.useState([]),f=async le=>{i(!0),c(!0),d(le),h([]);try{const Pe=await fo(Gt(ke,"sales_candies",le)),Le=Pe.exists()?Pe.data():null;if(!Le){h([]);return}const nt=(Array.isArray(Le==null?void 0:Le.items)?Le.items:Le!=null&&Le.item?[Le.item]:[]).map(st=>({productName:String(st.productName||""),qty:Number(st.packages??st.qty??st.quantity??0),unitPrice:Number(st.unitPricePackage??st.unitPrice??0),discount:Number(st.discount||0),total:Number(st.total??st.lineFinal??0)}));h(nt)}catch(Pe){console.error(Pe)}finally{c(!1)}},[m,p]=v.useState(wr(new Date,"yyyy-MM-01")),[g,x]=v.useState(wr(new Date,"yyyy-MM-dd")),[y,b]=v.useState([]),[w,I]=v.useState([]),[T,C]=v.useState([]),[E,S]=v.useState(!0),[O,B]=v.useState(""),[P,D]=v.useState(""),[X,de]=v.useState(""),[re,ie]=v.useState(null),ce=15,[J,pe]=v.useState(1),Se=v.useMemo(()=>{const le={};return y.forEach(Pe=>le[Pe.id]=Pe.name),le},[y]),k=v.useMemo(()=>{const le={};return T.forEach(Pe=>{le[Pe.id]=Pe}),le},[T]),F=le=>{const Pe=Number(le.vendorCommissionAmount||0);if(Pe>0)return Pe;if(!le.vendorId)return 0;const Le=k[le.vendorId];if(!Le||!Le.commissionPercent)return 0;const qe=(Number(le.total)||0)*(Number(Le.commissionPercent)||0)/100;return Number(qe.toFixed(2))};v.useEffect(()=>{(async()=>{S(!0),B("");try{const le=await Dt(At(ke,"customers_candies")),Pe=[];le.forEach(Et=>Pe.push({id:Et.id,name:Et.data().name||""})),b(Pe);const Le=await Dt(At(ke,"sellers_candies")),qe=[];Le.forEach(Et=>{const yt=Et.data();qe.push({id:Et.id,name:yt.name||"",commissionPercent:Number(yt.commissionPercent||0)})}),C(qe);const nt=await Dt(Yt(At(ke,"sales_candies"),ln("createdAt","desc"))),st=[];nt.forEach(Et=>{const yt=PLe(Et.data(),Et.id);yt&&yt.date>=m&&yt.date<=g&&st.push(yt)}),I(st.sort((Et,yt)=>yt.date.localeCompare(Et.date))),pe(1)}catch(le){console.error(le),B(" Error cargando transacciones.")}finally{S(!1)}})()},[m,g]);const H=v.useMemo(()=>w.filter(le=>!(r&&(!e||!le.vendorId||le.vendorId!==e)||P&&le.customerId!==P||X&&le.type!==X)),[w,P,X,r,e]),M=v.useMemo(()=>{let le=0,Pe=0,Le=0,qe=0;for(const nt of H)nt.type==="CONTADO"?(le+=nt.quantity,Le+=nt.total):(Pe+=nt.quantity,qe+=nt.total);return{packsCash:le,packsCredito:Pe,montoCash:Le,montoCredito:qe}},[H]),L=Math.max(1,Math.ceil(H.length/ce)),z=v.useMemo(()=>{const le=(J-1)*ce;return H.slice(le,le+ce)},[H,J]),R=v.useMemo(()=>u&&w.find(le=>le.id===u)||null,[u,w]),G=async le=>{if(n&&(ie(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{S(!0),await ib(le.id),await jLe(le.id),I(Pe=>Pe.filter(Le=>Le.id!==le.id)),B(" Venta eliminada")}catch(Pe){console.error(Pe),B(" No se pudo eliminar la venta.")}finally{S(!1)}},ee=()=>{const le=`Ventas del dia  ${m} a ${g}`,Pe=st=>(st||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Le=H.map(st=>{const Et=st.customerName||(st.customerId?Se[st.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${st.date}</td>
          <td>${Pe(Et)}</td>
          <td>${st.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${st.quantity}</td>
          <td style="text-align:right">${Yl(st.total)}</td>
        </tr>`}).join(""),qe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Pe(le)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Pe(le)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${M.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${M.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Yl(M.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Yl(M.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${Le||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,nt=window.open("","_blank");nt&&(nt.document.open(),nt.document.write(qe),nt.document.close())},te=()=>pe(1),Q=()=>pe(le=>Math.max(1,le-1)),xe=()=>pe(le=>Math.min(L,le+1)),Y=()=>pe(L),W=()=>{const le=[];if(L<=7)for(let Le=1;Le<=L;Le++)le.push(Le);else{const Le=Math.max(1,J-2),qe=Math.min(L,J+2);le.push(1),Le>2&&le.push(-1);for(let nt=Le;nt<=qe;nt++)nt!==1&&nt!==L&&le.push(nt);qe<L-1&&le.push(-2),le.push(L)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:J===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:J===1,children:" Anterior"}),le.map((Le,qe)=>typeof Le=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${Le===J?"bg-blue-600 text-white":""}`,onClick:()=>pe(Le),children:Le},qe):o.jsx("span",{className:"px-2",children:""},qe)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:xe,disabled:J===L,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Y,disabled:J===L,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",J," de ",L,"  ",H.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:le=>{p(le.target.value),pe(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:le=>{x(le.target.value),pe(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:P,onChange:le=>{D(le.target.value),pe(1)},children:[o.jsx("option",{value:"",children:"Todos"}),y.map(le=>o.jsx("option",{value:le.id,children:le.name},le.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:X,onChange:le=>{de(le.target.value),pe(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:ee,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:M.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:M.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Yl(M.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Yl(M.montoCredito)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[E?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):z.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):z.map(le=>{const Pe=le.customerName||(le.customerId?Se[le.customerId]:"")||"Nombre cliente",Le=F(le);return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:Pe}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:le.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${le.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:le.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Paquetes:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:qe=>{qe.preventDefault(),f(le.id)},title:"Ver detalle",children:le.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",Yl(le.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:Pe})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:le.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:le.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>f(le.id),title:"Ver detalle",children:le.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:Yl(le.total)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("span",{className:"font-medium",children:Le>0?Yl(Le):""})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("span",{className:"font-medium",children:le.vendorName||""})]}),n&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ie(qe=>qe===le.id?null:le.id),children:" Acciones"}),re===le.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>G(le),children:"Eliminar"})]})]})})]})},le.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:W()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),n&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:E?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Cargando"})}):z.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Sin transacciones en el rango."})}):z.map(le=>{const Pe=le.customerName||(le.customerId?Se[le.customerId]:"")||"Nombre cliente",Le=F(le);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:le.date}),o.jsx("td",{className:"p-2 border",children:Pe}),o.jsx("td",{className:"p-2 border",children:le.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>f(le.id),children:le.quantity})}),o.jsx("td",{className:"p-2 border",children:Yl(le.total)}),o.jsx("td",{className:"p-2 border",children:Le>0?Yl(Le):""}),o.jsx("td",{className:"p-2 border",children:le.vendorName||""}),n&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ie(qe=>qe===le.id?null:le.id),title:"Acciones",children:""}),re===le.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>G(le),children:"Eliminar"})})]})]},le.id)})})]}),W()]}),O&&o.jsx("p",{className:"mt-2 text-sm",children:O}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",u?` #${u}`:""]}),R&&o.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",o.jsx("span",{className:"font-semibold",children:F(R)>0?Yl(F(R)):""})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((le,Pe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:le.productName}),o.jsx("td",{className:"p-2 border text-right",children:le.qty}),o.jsx("td",{className:"p-2 border text-right",children:Yl(le.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Yl(le.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Yl(le.total)})]},Pe))})]})})]})})]})}const Tn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function xy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?wr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function FLe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function OLe(t,e){const r=xy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=FLe(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),A=Math.max(0,u-d);return l+A},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function DLe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const h=Math.min(A.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*A.cost),A.qtyLeft-=h,d-=h}}return i}async function RLe(t){const e=Yt(At(ke,"ar_movements"),lr("ref.saleId","==",t)),r=await Dt(e);await Promise.all(r.docs.map(n=>Qn(Gt(ke,"ar_movements",n.id))))}function MLe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,I]=v.useState(""),[T,C]=v.useState([]),[E,S]=v.useState({}),[O,B]=v.useState({}),[P,D]=v.useState(!1),[X,de]=v.useState(null),[re,ie]=v.useState([]),[ce,J]=v.useState(!1),[pe,Se]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[k,F]=v.useState(!1),[H,M]=v.useState(""),[L,z]=v.useState([]),[R,G]=v.useState(!1),[ee,te]=v.useState(!1),[Q,xe]=v.useState(null);v.useEffect(()=>{(async()=>{try{const fe=await Dt(At(ke,"sellers_candies")),Ke=[];fe.forEach(ve=>{const he=ve.data();Ke.push({id:ve.id,name:he.name||"",commissionPercent:Number(he.commissionPercent||0)})}),C(Ke)}catch(fe){console.error("Error cargando sellers_candies",fe)}})()},[]);const Y=v.useMemo(()=>{const fe={};return T.forEach(Ke=>{fe[Ke.id]=Ke}),fe},[T]);v.useEffect(()=>{(async()=>{b(!0),I("");try{const fe=await Dt(At(ke,"sales_candies")),Ke=[],ve=[];fe.forEach(ze=>{const Ye=ze.data(),Ze=OLe(Ye,ze.id);Ze&&(Ze.date<=a&&Ke.push(Ze),Ze.date>=r&&Ze.date<=a&&ve.push(Ze))}),u(Ke),l(ve);const he=await Dt(At(ke,"inventory_candies")),oe=[];he.forEach(ze=>{const Ye=ze.data(),Ze=xy(Ye);if(!Ze||Ze>a)return;const dt=Math.max(1,Math.floor(Number(Ye.unitsPerPackage||1))),ge=Number(Ye.totalUnits??Ye.quantity??0),Xe=Number(Ye.packages??0),ot=Number(Ye.remaining??0),be=Number(Ye.remainingPackages??0),Ge=Xe>0?Xe:ge>0?Math.floor(ge/dt):0,ut=be>0?be:ot>0?Math.floor(ot/dt):0;oe.push({id:ze.id,productId:Ye.productId,productName:Ye.productName||"",date:Ze,quantity:Number(Ge||0),remaining:Number(ut||0),purchasePrice:Number(Ye.providerPrice||Ye.purchasePrice||0),unitsPerPackage:dt})}),A(oe);const je=await Dt(At(ke,"expenses_candies")),Qe=[];je.forEach(ze=>{const Ye=ze.data(),Ze=xy(Ye);Ze&&Ze>=r&&Ze<=a&&Qe.push({id:ze.id,date:Ze,category:Ye.category||"",description:Ye.description||"",amount:Number(Ye.amount||0),status:Ye.status||""})}),f(Qe);const tt=await Dt(At(ke,"ar_movements")),rt=[],Te={};tt.forEach(ze=>{const Ye=ze.data(),Ze=xy(Ye);if(!Ze)return;const dt=Ye.customerId,ge=Number(Ye.amount||0);dt&&(Te[dt]=(Te[dt]||0)+ge),Ye.type==="ABONO"&&Ze>=r&&Ze<=a&&rt.push({id:ze.id,customerId:dt,type:"ABONO",amount:ge,date:Ze})}),p(rt);const Ee=await Dt(At(ke,"customers_candies")),V=[];Ee.forEach(ze=>{const Ye=ze.data();V.push({id:ze.id,name:Ye.name||"",balance:Te[ze.id]||0})}),x(V);const Ae=await Dt(At(ke,"inventory_candies_sellers")),Ne={},Re={};Ae.forEach(ze=>{const Ye=ze.data(),Ze=xy(Ye);if(!Ze||Ze<r||Ze>a)return;const dt=Ye.sellerId||Ye.vendorId||"NO_VENDOR",ge=Ye.productName||"",Xe=Ye.sku||"",ot=Math.max(1,Math.floor(Number(Ye.unitsPerPackage||1))),be=Number(Ye.totalUnits??0),Ge=Number(Ye.packages??0),ut=Number(Ye.remainingUnits??Ye.remaining??0),bt=Number(Ye.remainingPackages??0),Rt=Ge>0?Ge:be>0?Math.floor(be/ot):0,Wt=bt>0?bt:ut>0?Math.floor(ut/ot):0,mt=Number(Ye.totalVendor??0),ne=Number(Ye.gainVendor??0),ae=Rt,me=ae>0?mt/ae:0,ue=ae>0?ne/ae:0;if(Ne[dt]||(Ne[dt]={associated:[],remaining:[]}),Rt>0){const Be=Rt,Oe=Be*me,We=Oe,it=Be*ue;Ne[dt].associated.push({saleId:ze.id,date:Ze,productName:ge,sku:Xe,qty:Be,unitPrice:me,lineTotal:Oe,discount:0,lineFinal:We,vendorCommissionAmount:it,type:"ASSOCIATED"}),Re[dt]=(Re[dt]||0)+Be}if(Wt>0){const Be=Wt,Oe=Be*me,We=Oe,it=Be*ue;Ne[dt].remaining.push({saleId:ze.id,date:Ze,productName:ge,sku:Xe,qty:Be,unitPrice:me,lineTotal:Oe,discount:0,lineFinal:We,vendorCommissionAmount:it,type:"REMAINING"})}}),S(Ne),B(Re)}catch(fe){console.error(fe),I(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const W=v.useCallback(fe=>{if(fe.vendorId&&Y[fe.vendorId])return Y[fe.vendorId];const Ke=(fe.vendorName||"").trim().toLowerCase();if(Ke)return T.find(ve=>(ve.name||"").trim().toLowerCase()===Ke)},[Y,T]),le=v.useCallback((fe,Ke)=>{const ve=Number(Ke.vendorCommissionAmount||0);if(ve)return ve;const he=W(fe);if(!he||!he.commissionPercent)return 0;const oe=Number(Ke.qty||0),je=Number(Ke.unitPrice||0),Qe=oe*je,tt=Math.max(0,Number(Ke.discount||0)),rt=Math.max(0,Qe-tt);if(!rt)return 0;const Te=Number(he.commissionPercent)||0;return rt*Te/100},[W]),Pe=v.useMemo(()=>{try{return DLe(d,c,r,a)}catch(fe){return console.error(fe),0}},[d,c,r,a]),Le=v.useMemo(()=>{const fe=i.reduce((V,Ae)=>V+(Ae.total||0),0),Ke=h.reduce((V,Ae)=>V+(Ae.amount||0),0),ve=fe-Pe,he=ve-Ke,oe=m.reduce((V,Ae)=>V+Math.abs(Ae.amount||0),0),je=g.filter(V=>(V.balance||0)>0),Qe=je.reduce((V,Ae)=>V+(Ae.balance||0),0);let tt=0,rt=0,Te=0,Ee=0;for(const V of i){const Ae=(V.items||[]).reduce((Re,ze)=>Re+(Number(ze.qty)||0),0),Ne=(V.items||[]).reduce((Re,ze)=>Re+le(V,ze),0);V.type==="CONTADO"?(tt+=Ae,Te+=Ne):(rt+=Ae,Ee+=Ne)}return{ventasTotales:fe,costoMercaderia:Pe,gastosPeriodo:Ke,gananciaAntes:ve,gananciaDespues:he,abonosRecibidos:oe,saldosPendientes:Qe,clientesConSaldo:je.length,paquetesCash:tt,paquetesCredito:rt,comisionCash:Te,comisionCredito:Ee}},[i,h,m,g,Pe,le]),qe=v.useMemo(()=>{const fe={},Ke={};for(const ve of i)if(!(ve.type!=="CREDITO"||!ve.customerId))for(const he of ve.items||[]){const oe=Number(he.qty||0),je=Number(he.unitPrice||0),Qe=oe*je,tt=Math.max(0,Number(he.discount||0)),rt=Math.max(0,Qe-tt);fe[ve.customerId]=(fe[ve.customerId]||0)+oe,Ke[ve.customerId]=(Ke[ve.customerId]||0)+rt}return g.filter(ve=>(ve.balance||0)>0).map(ve=>({customerId:ve.id,name:ve.name,paquetesAsociados:fe[ve.id]||0,saldoTotal:Ke[ve.id]||0,saldoPendiente:ve.balance||0})).sort((ve,he)=>he.saldoPendiente-ve.saldoPendiente)},[g,i]),nt=v.useMemo(()=>{const fe={};return g.forEach(Ke=>fe[Ke.id]=Ke.name),fe},[g]),st=v.useMemo(()=>[...i].sort((fe,Ke)=>Ke.date.localeCompare(fe.date)).map(fe=>{var oe;const Ke=(fe.items||[]).reduce((je,Qe)=>je+(Number(Qe.qty)||0),0);let ve="Cash";fe.type==="CREDITO"&&fe.customerId?ve=nt[fe.customerId]||"":fe.type==="CONTADO"&&(ve=((oe=fe.customerName)==null?void 0:oe.trim())||"Cash");const he=Ke>0?fe.total/Ke:0;return{id:fe.id,date:fe.date,type:fe.type==="CREDITO"?"Crdito":"Cash",customer:ve,paquetes:Ke,total:Number(fe.total||0),avgPrice:he}}),[i,nt]),Et=v.useMemo(()=>{var Ke,ve;const fe=new Map;for(const he of i){const oe=he.vendorId||"NO_VENDOR",je=he.vendorName||((Ke=Y[oe])==null?void 0:Ke.name)||"Sin vendedor";fe.has(oe)||fe.set(oe,{vendorId:oe,vendorName:je,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Qe=fe.get(oe);for(const tt of he.items||[]){const rt=Number(tt.qty||0),Te=Number(tt.unitPrice||0),Ee=rt*Te,V=Math.max(0,Number(tt.discount||0)),Ae=Math.max(0,Ee-V),Ne=le(he,tt);he.type==="CONTADO"?(Qe.paquetesVendidos+=rt,Qe.totalVendido+=Ae,Qe.comisionCash+=Ne):(Qe.paquetesFiados+=rt,Qe.totalFiado+=Ae,Qe.comisionCredito+=Ne)}}for(const[he,oe]of Object.entries(O)){const je=fe.get(he),Qe=(je==null?void 0:je.vendorName)||((ve=Y[he])==null?void 0:ve.name)||"Sin vendedor",tt=je||{vendorId:he,vendorName:Qe,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};tt.paquetesAsociados=oe,tt.paquetesRestantes=Math.max(oe-tt.paquetesVendidos-tt.paquetesFiados,0),fe.set(he,tt)}return Array.from(fe.values()).sort((he,oe)=>oe.totalVendido+oe.totalFiado-(he.totalVendido+he.totalFiado))},[i,O,Y,le]),yt=async fe=>{D(!0),de({id:fe.customerId,name:fe.name}),ie([]),J(!0),Se({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Ke=[];let ve=0,he=0,oe=0;for(const rt of i)if(!(rt.type!=="CREDITO"||rt.customerId!==fe.customerId))for(const Te of rt.items||[]){const Ee=Number(Te.qty||0),V=Number(Te.unitPrice||0),Ae=Ee*V,Ne=Math.max(0,Number(Te.discount||0)),Re=Math.max(0,Ae-Ne);Ke.push({saleId:rt.id,date:rt.date,productName:Te.productName,sku:Te.sku||"",qty:Ee,unitPrice:V,lineTotal:Ae,discount:Ne,lineFinal:Re}),ve+=Ae,he+=Ne,oe+=Re}let je=0;for(const rt of m)rt.customerId===fe.customerId&&(je+=Math.abs(rt.amount||0));const Qe=g.find(rt=>rt.id===fe.customerId),tt=(Qe==null?void 0:Qe.balance)||0;ie(Ke),Se({totalBruto:ve,totalDescuento:he,totalFiado:oe,saldoActual:tt,abonadoPeriodo:je})}catch(Ke){console.error(Ke),I(" No se pudo cargar el detalle del cliente.")}finally{J(!1)}},Ct=(fe,Ke,ve)=>{F(!0);let he="";ve==="ASSOCIATED"?he=`Paquetes asociados  ${Ke}`:ve==="REMAINING"?he=`Paquetes restantes  ${Ke}`:ve==="CASH"?he=`Paquetes vendidos (Cash)  ${Ke}`:he=`Paquetes fiados (Crdito)  ${Ke}`,M(he),z([]),G(!0);try{if(ve==="ASSOCIATED"||ve==="REMAINING"){const je=E[fe],Qe=ve==="ASSOCIATED"?(je==null?void 0:je.associated)||[]:(je==null?void 0:je.remaining)||[];z([...Qe].sort((tt,rt)=>tt.date.localeCompare(rt.date))),G(!1);return}const oe=[];for(const je of i)if(((je.vendorId||"NO_VENDOR")===fe||!je.vendorId&&fe==="NO_VENDOR")&&!(ve==="CASH"&&je.type!=="CONTADO")&&!(ve==="CREDIT"&&je.type!=="CREDITO"))for(const tt of je.items||[]){const rt=Number(tt.qty||0),Te=Number(tt.unitPrice||0),Ee=rt*Te,V=Math.max(0,Number(tt.discount||0)),Ae=Math.max(0,Ee-V),Ne=le(je,tt);oe.push({saleId:je.id,date:je.date,productName:tt.productName,sku:tt.sku||"",qty:rt,unitPrice:Te,lineTotal:Ee,discount:V,lineFinal:Ae,vendorCommissionAmount:Ne,type:ve})}z(oe.sort((je,Qe)=>je.date.localeCompare(Qe.date)))}catch(oe){console.error(oe),I(" No se pudo cargar el detalle del vendedor.")}finally{G(!1)}},Ot=fe=>{const Ke=i.find(ve=>ve.id===fe)||null;xe(Ke),te(!0)},Pt=async fe=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await ib(fe),await RLe(fe),l(Ke=>Ke.filter(ve=>ve.id!==fe)),u(Ke=>Ke.filter(ve=>ve.id!==fe)),te(!1),xe(null)}catch(Ke){console.error(Ke),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),o.jsx(Xc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:fe=>n(fe.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:fe=>s(fe.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Tn(Le.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Tn(Le.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:Le.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Le.paquetesCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),o.jsx("div",{className:"text-xl font-semibold",children:Le.paquetesCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.comisionCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(Le.comisionCredito)})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):qe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):qe.map(fe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:fe.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>yt({customerId:fe.customerId,name:fe.name}),title:"Ver paquetes fiados del periodo",children:fe.paquetesAsociados})}),o.jsx("td",{className:"p-2 border",children:Tn(fe.saldoTotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:Tn(fe.saldoPendiente)})]},fe.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Et.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):Et.map(fe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:fe.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ct(fe.vendorId,fe.vendorName,"ASSOCIATED"),children:fe.paquetesAsociados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ct(fe.vendorId,fe.vendorName,"REMAINING"),children:fe.paquetesRestantes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ct(fe.vendorId,fe.vendorName,"CASH"),children:fe.paquetesVendidos})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.totalVendido)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.comisionCash)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ct(fe.vendorId,fe.vendorName,"CREDIT"),children:fe.paquetesFiados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.totalFiado)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.comisionCredito)})]},fe.vendorId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):st.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):st.map(fe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:fe.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:fe.customer}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:fe.type}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ot(fe.id),children:fe.paquetes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.avgPrice)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Tn(fe.total)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Pt(fe.id),children:"Eliminar"})})]},fe.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((fe,Ke)=>fe.date.localeCompare(Ke.date)).map(fe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:fe.date}),o.jsx("td",{className:"p-2 border",children:fe.category||""}),o.jsx("td",{className:"p-2 border",children:fe.description?o.jsx("span",{title:fe.description,children:fe.description.length>40?fe.description.slice(0,40)+"":fe.description}):""}),o.jsx("td",{className:"p-2 border",children:Tn(fe.amount)}),o.jsx("td",{className:"p-2 border",children:fe.status||""})]},fe.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(X==null?void 0:X.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(pe.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(pe.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(pe.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(pe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Tn(pe.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),o.jsx("tbody",{children:ce?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):re.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):re.sort((fe,Ke)=>fe.date.localeCompare(Ke.date)).map((fe,Ke)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:fe.date}),o.jsx("td",{className:"p-2 border",children:fe.productName}),o.jsx("td",{className:"p-2 border",children:fe.sku||""}),o.jsx("td",{className:"p-2 border",children:fe.qty}),o.jsx("td",{className:"p-2 border",children:Tn(fe.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.discount)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.lineFinal)})]},`${fe.saleId}-${Ke}`))})]})})]})}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:H}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:R?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):L.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):L.map((fe,Ke)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:fe.date}),o.jsx("td",{className:"p-2 border",children:fe.productName}),o.jsx("td",{className:"p-2 border",children:fe.sku||""}),o.jsx("td",{className:"p-2 border",children:fe.qty}),o.jsx("td",{className:"p-2 border",children:Tn(fe.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.discount)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.lineFinal)}),o.jsx("td",{className:"p-2 border",children:Tn(fe.vendorCommissionAmount)})]},`${fe.saleId}-${Ke}`))})]})})]})}),ee&&Q&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",Q.date]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>te(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:(Q.items||[]).map((fe,Ke)=>{const ve=Number(fe.qty||0),he=Number(fe.unitPrice||0),oe=ve*he,je=le(Q,fe);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:fe.productName}),o.jsx("td",{className:"p-2 border",children:fe.sku||""}),o.jsx("td",{className:"p-2 border",children:ve}),o.jsx("td",{className:"p-2 border",children:Tn(he)}),o.jsx("td",{className:"p-2 border",children:Tn(oe)}),o.jsx("td",{className:"p-2 border",children:Tn(je)})]},Ke)})})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Total venta:"}),Tn(Q.total)]}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>Pt(Q.id),children:"Eliminar venta"})]})]})})]})}const TH=["Rivas","Isla Ometepe","San Jorge"];function LLe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(!1),[d,A]=v.useState(""),[h,f]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState("0"),[T,C]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const X=Yt(At(ke,"sellers_candies"),ln("name","asc")),de=await Dt(X),re=[];de.forEach(ie=>{const ce=ie.data();re.push({id:ie.id,name:ce.name||"",commissionPercent:Number(ce.commissionPercent||0),branch:ce.branch||"Rivas",createdAt:ce.createdAt||rr.now()})}),n(re)}catch(X){console.error(X),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const E=()=>{A(""),f("0"),p("Rivas")},S=async X=>{X.preventDefault(),l("");const de=d.trim();if(!de){l("Ingresa el nombre y apellido del vendedor.");return}const re=Number(h||0);if(re<0){l("La comisin no puede ser negativa.");return}try{const ie={name:de,commissionPercent:re,branch:m,createdAt:rr.now()},ce=await En(At(ke,"sellers_candies"),ie);n(J=>[{id:ce.id,...ie},...J]),l(" Vendedor creado correctamente."),E(),u(!1)}catch(ie){console.error(ie),l(" Error al crear el vendedor.")}},O=X=>{x(X.id),b(X.name),I(X.commissionPercent.toString()),C(X.branch)},B=()=>{x(null),b(""),I("0"),C("Rivas")},P=async()=>{if(!g)return;l("");const X=y.trim();if(!X){l("El nombre y apellido no pueden estar vacos.");return}const de=Number(w||0);if(de<0){l("La comisin no puede ser negativa.");return}try{await rn(Gt(ke,"sellers_candies",g),{name:X,commissionPercent:de,branch:T}),n(re=>re.map(ie=>ie.id===g?{...ie,name:X,commissionPercent:de,branch:T}:ie)),l(" Vendedor actualizado."),B()}catch(re){console.error(re),l(" Error al actualizar el vendedor.")}},D=async X=>{if(window.confirm(`Eliminar al vendedor "${X.name}"? Esta accin no se puede deshacer.`))try{await Qn(Gt(ke,"sellers_candies",X.id)),n(re=>re.filter(ie=>ie.id!==X.id)),l(" Vendedor eliminado.")}catch(re){console.error(re),l(" Error al eliminar el vendedor.")}};return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:e,loading:a}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),o.jsxs("form",{onSubmit:S,className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:X=>A(X.target.value),placeholder:"Ej: Juan Prez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comisin (% sobre venta total)"}),o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:X=>f(X.target.value),placeholder:"Ej: 10"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje se usa para calcular la comisin del vendedor sobre el total de la venta (no es el margen del producto)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),o.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:X=>p(X.target.value),children:TH.map(X=>o.jsx("option",{value:X,children:X},X))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>{E(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:o.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),o.jsx("th",{className:"p-2 border",children:"Comisin (%)"}),o.jsx("th",{className:"p-2 border",children:"Sucursal"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(X=>{const de=g===X.id;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:re=>b(re.target.value)}):X.name}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:re=>I(re.target.value)}):`${X.commissionPercent.toFixed(2)} %`}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("select",{className:"border p-1 rounded text-xs",value:T,onChange:re=>C(re.target.value),children:TH.map(re=>o.jsx("option",{value:re,children:re},re))}):X.branch}),o.jsx("td",{className:"p-2 border",children:de?o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:P,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:B,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>O(X),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(X),children:"Borrar"})]})})]},X.id)})})]})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const ko=t=>Math.max(0,Math.floor(Number(t||0)));function ULe(t){return Math.max(1,ko(t.unitsPerPackage||1))}async function QLe(t){const{orderId:e,productId:r}=t;let n=ko(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Yt(At(ke,"inventory_candies"),lr("orderId","==",e),lr("productId","==",r),ln("createdAt","asc")),s=await Dt(a);if(s.empty)return;const i=s.docs.map(l=>l.ref);await Di(ke,async l=>{const c=await Promise.all(i.map(u=>l.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const A=d.data(),h=ULe(A),f=n*h,p=ko(A.remaining??0)+f,g=Math.floor(p/h);l.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:rr.now()}),n=0}})}async function VLe(t){const{orderId:e,productId:r}=t,n=ko(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Gt(ke,"candy_main_orders",e);await Di(ke,async s=>{const i=await s.get(a);if(!i.exists())return;const l=i.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(A=>String((A==null?void 0:A.id)||"")!==String(r)?A:(u=!0,{...A,remainingPackages:ko(A.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:rr.now()})})}function HLe(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=ko((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,ko((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function PH(t,e){const r=ko(t),n=Math.max(1,ko(e));return Math.floor(r/n)}async function jH(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Gt(ke,"inventory_candies_sellers",t),r=await fo(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=ko(n.packages||n.remainingPackages||0),i=HLe(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Di(ke,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await QLe({orderId:c,productId:a,packagesToReturn:s}),await VLe({orderId:c,productId:a,packagesToReturn:s}),await Di(ke,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Di(ke,async c=>{const u={};for(const g of i){const x=Math.max(1,ko(g.unitsPerPackage||1)),y=ko(g.units),b=PH(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>Gt(ke,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>Gt(ke,"candy_main_orders",g)),[f,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=f[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,ko(x.unitsPerPackage||b.unitsPerPackage||1)),I=ko(x.units),C=ko(b.remaining??0)+I,E=Math.floor(C/w);c.update(d[g],{remaining:C,remainingPackages:E,packages:E,updatedAt:rr.now()});const S=PH(I,w);S>0&&(p+=S)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=ko(u[y]||0);if(b<=0)continue;const w=x.data(),I=Array.isArray(w.items)?w.items:[];let T=!1;const C=I.map(E=>String((E==null?void 0:E.id)||"")!==String(a)?E:(T=!0,{...E,remainingPackages:ko(E.remainingPackages)+b}));T&&c.update(h[g],{items:C,updatedAt:rr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const Sn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $Le(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const kH=t=>Math.max(0,Math.floor(Number(t||0)));function KLe({role:t="",sellerCandyId:e="",currentUserEmail:r}){const{refreshKey:n,refresh:a}=fc(),s=!t||t==="admin",i=t==="vendedor_dulces",l=(r||"").trim().toLowerCase(),c=!s&&i,[u,d]=v.useState({}),[A,h]=v.useState([]),[f,m]=v.useState([]),[p,g]=v.useState({}),[x,y]=v.useState(null),[b,w]=v.useState([]),[I,T]=v.useState(!0),[C,E]=v.useState(""),[S,O]=v.useState(!1),[B,P]=v.useState(null),[D,X]=v.useState([]),[de,re]=v.useState(""),[ie,ce]=v.useState(""),[J,pe]=v.useState(""),[Se,k]=v.useState("0"),[F,H]=v.useState([]),[M,L]=v.useState(!1),z=v.useMemo(()=>A.find(Ce=>Ce.id===de)||null,[de,A]),[R,G]=v.useState(""),ee=z==null?void 0:z.branch,[te,Q]=v.useState(""),xe=v.useMemo(()=>f.find(Ce=>Ce.id===J)||null,[J,f]),Y=v.useMemo(()=>new Set(F.map(Ce=>Ce.productId)),[F]),W=v.useMemo(()=>f.filter(Ce=>(p[Ce.id]??0)>0||Y.has(Ce.id)).sort((Ce,at)=>Ce.name.localeCompare(at.name)),[f,p,Y]),le=v.useMemo(()=>{const Ce=R.trim().toLowerCase();return Ce?W.filter(at=>`${at.category??""} ${at.name??""}`.toLowerCase().includes(Ce)):W},[W,R]),Pe=v.useMemo(()=>{const Ce={};return A.forEach(at=>Ce[at.id]=at),Ce},[A]),Le=v.useMemo(()=>!i||!l?null:A.find(Ce=>(Ce.email||"").trim().toLowerCase()===l)||null,[i,l,A]),qe=v.useMemo(()=>{const Ce=A.find(at=>(at.email||"").trim().toLowerCase()===l)||null;return(Ce==null?void 0:Ce.name)||(r||"").trim()||""},[A,l,r]),nt=async()=>{try{const Ce=At(ke,"inventory_transfers_candies");if(!i){const Ft=await Dt(Ce),Vt={};Ft.forEach(nr=>{const Ht=nr.data(),Nr=Number(Ht.packagesMoved||0),Or=String(Ht.fromOrderKey||""),Fn=String(Ht.toOrderKey||"");Or&&(Vt[Or]=Vt[Or]||{out:0,in:0},Vt[Or].out+=Nr),Fn&&(Vt[Fn]=Vt[Fn]||{out:0,in:0},Vt[Fn].in+=Nr)}),d(Vt);return}const at=Yt(Ce,lr("fromSellerId","==",e)),wt=Yt(Ce,lr("toSellerId","==",e)),[ht,Je]=await Promise.all([Dt(at),Dt(wt)]),zt={},Zt=(Ft,Vt)=>{Ft.forEach(nr=>{const Ht=nr.data(),Nr=Number(Ht.packagesMoved||0),Or=String(Vt==="out"?Ht.fromOrderKey||"":Ht.toOrderKey||"");Or&&(zt[Or]=zt[Or]||{out:0,in:0},zt[Or][Vt]+=Nr)})};Zt(ht.docs,"out"),Zt(Je.docs,"in"),d(zt)}catch(Ce){console.error(Ce),d({})}};v.useEffect(()=>{(async()=>{T(!0),E("");try{const Ce=await Dt(Yt(At(ke,"sellers_candies"),ln("name","asc"))),at=[];Ce.forEach(nr=>{const Ht=nr.data(),Nr=Ht.branch||Ht.branchLabel||Ht.route||Ht.sucursal||Ht.location||"";at.push({id:nr.id,name:Ht.name||"",email:Ht.email||"",commissionPercent:Number(Ht.commissionPercent||0),branch:$Le(Nr),branchLabel:Nr})}),h(at);const wt=await Dt(At(ke,"inventory_candies")),ht={},Je={};wt.forEach(nr=>{var vr;const Ht=nr.data(),Nr=String(Ht.productId||"");if(!Nr)return;const Or=Number(Ht.remainingPackages);if(Number.isFinite(Or))ht[Nr]=(ht[Nr]||0)+Math.max(0,Math.floor(Or));else{const Ar=Number(Ht.remaining??Ht.quantity??0),sr=Number(Ht.unitsPerPackage||0);let ir=0;sr>0?ir=Ar/sr:ir=Number(Ht.packages||0),ht[Nr]=(ht[Nr]||0)+Math.max(0,ir)}const Fn=String(Ht.date||""),vn=Number(((vr=Ht.createdAt)==null?void 0:vr.seconds)??0),Na={unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceSanJorge:Number(Ht.unitPriceSanJorge||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),date:Fn,createdAtSec:vn};if(!(Na.unitPriceRivas>0||Na.unitPriceSanJorge>0||Na.unitPriceIsla>0))return;const Rn=Je[Nr];if(!Rn){Je[Nr]=Na;return}const ct=`${Rn.date}#${String(Rn.createdAtSec).padStart(10,"0")}`;`${Na.date}#${String(Na.createdAtSec).padStart(10,"0")}`>ct&&(Je[Nr]=Na)}),Object.keys(ht).forEach(nr=>ht[nr]=Math.floor(ht[nr])),g(ht);const zt=await Dt(Yt(At(ke,"products_candies"),ln("name","asc"))),Zt=[];zt.forEach(nr=>{const Ht=nr.data(),Nr=nr.id,Or=Je[Nr];Zt.push({id:Nr,name:Ht.name||"",category:Ht.category||"",providerPrice:Number(Ht.providerPrice||0),packages:Number(Ht.packages||0),unitsPerPackage:Number(Ht.unitsPerPackage||0),unitPriceRivas:Number((Or==null?void 0:Or.unitPriceRivas)||0),unitPriceSanJorge:Number((Or==null?void 0:Or.unitPriceSanJorge)||0),unitPriceIsla:Number((Or==null?void 0:Or.unitPriceIsla)||0)})}),m(Zt);const Ft=await Dt(i?Yt(At(ke,"inventory_candies_sellers"),lr("sellerId","==",e),ln("createdAt","desc")):Yt(At(ke,"inventory_candies_sellers"),ln("createdAt","desc"))),Vt=[];Ft.forEach(nr=>{const Ht=nr.data();Vt.push({id:nr.id,sellerId:Ht.sellerId,sellerName:Ht.sellerName||"",productId:Ht.productId,productName:Ht.productName||"",category:Ht.category||"",orderId:Ht.orderId||null,packages:Number(Ht.packages||0),unitsPerPackage:Number(Ht.unitsPerPackage||0),totalUnits:Number(Ht.totalUnits||0),remainingPackages:Number(Ht.remainingPackages||0),remainingUnits:Number(Ht.remainingUnits||0),providerPrice:Number(Ht.providerPrice||0),totalRivas:Number(Ht.totalRivas||0),totalSanJorge:Number(Ht.totalSanJorge||0),totalIsla:Number(Ht.totalIsla||0),unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceSanJorge:Number(Ht.unitPriceSanJorge||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),markupPercent:Number(Ht.markupPercent||0),subtotal:Number(Ht.subtotal||0),totalVendor:Number(Ht.totalVendor||0),gainVendor:Number(Ht.gainVendor||0),unitPriceVendor:Number(Ht.unitPriceVendor||0),date:Ht.date||"",createdAt:Ht.createdAt||rr.now()})}),w(Vt),await nt()}catch(Ce){console.error(Ce),E(" Error cargando datos de vendedores / pedidos.")}finally{T(!1)}})()},[n,t,e]);const st=v.useMemo(()=>i&&Le?b.filter(Ce=>Ce.sellerId===Le.id):b,[b,i,Le,de]),Et=Ce=>st.filter(at=>(at.orderId||at.id)===Ce),yt=v.useMemo(()=>{var at;const Ce={};for(const wt of st){const ht=wt.orderId||wt.id,Je=Ce[ht],zt=wt.date||((at=wt.createdAt)!=null&&at.toDate?wt.createdAt.toDate().toISOString().slice(0,10):"");if(Je)Je.totalPackages+=wt.packages,Je.totalRemainingPackages+=wt.remainingPackages,Je.subtotal+=wt.subtotal,Je.totalVendor+=wt.totalVendor,zt>Je.date&&(Je.date=zt);else{const Zt=u[ht]||{out:0,in:0};Ce[ht]={orderKey:ht,sellerId:wt.sellerId,sellerName:wt.sellerName,date:zt,totalPackages:wt.packages,totalRemainingPackages:wt.remainingPackages,subtotal:wt.subtotal,totalVendor:wt.totalVendor,transferredOut:Zt.out,transferredIn:Zt.in}}}return Object.values(Ce).map(wt=>{const ht=u[wt.orderKey]||{out:0,in:0};return{...wt,transferredOut:ht.out||0,transferredIn:ht.in||0}}).sort((wt,ht)=>ht.date.localeCompare(wt.date))},[st,u]),Ct=v.useMemo(()=>{const Ce={};return yt.forEach(at=>Ce[at.orderKey]=at),Ce},[yt]),Ot=v.useMemo(()=>{const Ce=F.reduce((Zt,Ft)=>Zt+Ft.packages,0),at=F.reduce((Zt,Ft)=>Zt+Ft.subtotal,0),wt=F.reduce((Zt,Ft)=>Zt+Ft.totalVendor,0),ht=F.reduce((Zt,Ft)=>Zt+Ft.gainVendor,0),Je=Number((z==null?void 0:z.commissionPercent)||0),zt=wt*Je/100;return{totalPackages:Ce,subtotal:at,totalVendor:wt,gainVendor:ht,commissionPercent:Je,commissionAmount:zt}},[F,z]),Pt=()=>{P(null),X([]),re(""),ce(""),pe(""),k("0"),H([])};function fe(Ce){const at=Number(Ce.providerPrice||0),wt=Number(Ce.packages||0),ht=Number(Ce.unitPriceRivas||0),Je=Number(Ce.unitPriceSanJorge||0),zt=Number(Ce.unitPriceIsla||0),Zt=at*wt,Ft=ht*wt,Vt=Je*wt,nr=zt*wt;let Ht=ht,Nr=Ft;switch(Ce.sellerBranch){case"SAN_JORGE":Ht=Je,Nr=Vt;break;case"ISLA":Ht=zt,Nr=nr;break;case"RIVAS":default:Ht=ht,Nr=Ft;break}const Or=Nr-Zt;return{subtotal:Zt,totalVendor:Nr,gainVendor:Or,pricePerPackage:Ht,totalRivas:Ft,totalSanJorge:Vt,totalIsla:nr,unitPriceRivas:ht,unitPriceSanJorge:Je,unitPriceIsla:zt}}function Ke(Ce,at){const{subtotal:wt,totalVendor:ht,gainVendor:Je,pricePerPackage:zt,totalRivas:Zt,totalSanJorge:Ft,totalIsla:Vt,unitPriceRivas:nr,unitPriceSanJorge:Ht,unitPriceIsla:Nr}=fe({providerPrice:Ce.providerPrice,unitPriceRivas:Ce.unitPriceRivas,unitPriceSanJorge:Ce.unitPriceSanJorge,unitPriceIsla:Ce.unitPriceIsla,packages:at,sellerBranch:ee});return{id:`${Ce.id}-${Date.now()}-${Math.random()}`,productId:Ce.id,productName:Ce.name,category:Ce.category,providerPrice:Ce.providerPrice,unitsPerPackage:Ce.unitsPerPackage,packages:at,subtotal:wt,totalVendor:ht,gainVendor:Je,pricePerPackage:zt,totalRivas:Zt,totalSanJorge:Ft,totalIsla:Vt,unitPriceRivas:nr,unitPriceSanJorge:Ht,unitPriceIsla:Nr,remainingPackages:at}}const ve=()=>{if(c)return;if(!xe){E("Selecciona un producto antes de agregarlo.");return}if(Y.has(xe.id)){E("Ese producto ya est agregado en este pedido.");return}const Ce=Number(Se||0);if(Ce<=0){E("La cantidad de paquetes debe ser mayor a 0.");return}const at=p[xe.id]??0;if(!B&&Ce>at){E(`No hay suficientes paquetes en inventario general. Disponibles: ${at}`);return}const wt=Ke(xe,Ce);H(ht=>[...ht,wt]),pe(""),k("0")},he=Ce=>{c||H(at=>at.filter(wt=>wt.id!==Ce))},oe=(Ce,at)=>{if(c)return;const wt=Number(at||0);H(ht=>ht.map(Je=>{if(Je.id!==Ce)return Je;const{subtotal:zt,totalVendor:Zt,gainVendor:Ft,pricePerPackage:Vt,totalRivas:nr,totalSanJorge:Ht,totalIsla:Nr}=fe({providerPrice:Je.providerPrice,unitPriceRivas:Je.unitPriceRivas,unitPriceSanJorge:Je.unitPriceSanJorge,unitPriceIsla:Je.unitPriceIsla,packages:wt,sellerBranch:ee});return{...Je,packages:wt,subtotal:zt,totalVendor:Zt,gainVendor:Ft,pricePerPackage:Vt,totalRivas:nr,totalSanJorge:Ht,totalIsla:Nr}}))};async function je(Ce,at,wt){const ht=await xLe({productId:Ce,quantityPacks:at,saleDate:wt}),Je=Array.isArray(ht==null?void 0:ht.allocations)?ht.allocations:[];if(!Je.length)return[];const zt=Je.map(Vt=>String(Vt.batchId||"")).filter(Boolean),Zt=await Promise.all(zt.map(Vt=>fo(Gt(ke,"inventory_candies",Vt)))),Ft=[];for(let Vt=0;Vt<Je.length;Vt++){const nr=Je[Vt],Ht=String(nr.batchId||""),Nr=kH(nr.qty||nr.units||nr.quantity||0),Or=Zt[Vt];if(!Ht||Nr<=0||!Or.exists())continue;const Fn=Or.data(),vn=String(Fn.orderId||""),Na=Math.max(1,kH(Fn.unitsPerPackage||1));vn&&Ft.push({batchId:Ht,masterOrderId:vn,units:Nr,unitsPerPackage:Na})}return Ft}const Qe=async Ce=>{if(Ce.preventDefault(),M)return;if(!s){E("No tienes permiso para guardar pedidos.");return}if(E(""),!z){E("Selecciona un vendedor.");return}if(!F.length){E("Agrega al menos un producto al pedido.");return}const at=new Date().toISOString().slice(0,10),wt=ie||at;try{if(T(!0),L(!0),B){const ht={};D.forEach(Zt=>{ht[Zt.productId]=Zt});const Je={};F.forEach(Zt=>{Je[Zt.productId]=Zt});for(const Zt of Object.keys(Je)){const Ft=Je[Zt],Vt=ht[Zt],nr=Number(Ft.packages||0),Ht=Vt?Number(Vt.packages||0):0,Nr=nr-Ht;if(Nr>0){const Or=await je(Zt,Nr,wt);if(Vt&&Or.length){const Fn=Gt(ke,"inventory_candies_sellers",Vt.id),vn=await fo(Fn),Na=vn.exists()?vn.data():{},Rn=[...Array.isArray(Na.masterAllocations)?Na.masterAllocations:[],...Or];await rn(Fn,{masterAllocations:Rn,updatedAt:rr.now()})}}else Nr<0}let zt=[...b];for(const Zt of Object.keys(Je)){const Ft=Je[Zt],Vt=ht[Zt],nr=f.find(Or=>Or.id===Zt),Ht=(nr==null?void 0:nr.unitsPerPackage)||Ft.unitsPerPackage||0,Nr=Ft.packages>0&&Ht>0?Ft.packages*Ht:0;if(Vt)await rn(Gt(ke,"inventory_candies_sellers",Vt.id),{sellerId:z.id,sellerName:z.name,productId:Zt,productName:Ft.productName,category:Ft.category,packages:Ft.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ft.packages,remainingUnits:Nr,providerPrice:Ft.providerPrice,totalRivas:Ft.totalRivas,totalSanJorge:Ft.totalSanJorge,totalIsla:Ft.totalIsla,unitPriceRivas:Ft.unitPriceRivas,unitPriceSanJorge:Ft.unitPriceSanJorge,unitPriceIsla:Ft.unitPriceIsla,markupPercent:0,subtotal:Ft.subtotal,totalVendor:Ft.totalVendor,gainVendor:Ft.gainVendor,unitPriceVendor:Ft.pricePerPackage,date:wt,orderId:Vt.orderId||B,updatedAt:rr.now()}),zt=zt.map(Or=>Or.id===Vt.id?{...Or,sellerId:z.id,sellerName:z.name,productId:Zt,productName:Ft.productName,category:Ft.category,packages:Ft.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ft.packages,remainingUnits:Nr,providerPrice:Ft.providerPrice,totalRivas:Ft.totalRivas,totalSanJorge:Ft.totalSanJorge,totalIsla:Ft.totalIsla,unitPriceRivas:Ft.unitPriceRivas,unitPriceSanJorge:Ft.unitPriceSanJorge,unitPriceIsla:Ft.unitPriceIsla,markupPercent:0,subtotal:Ft.subtotal,totalVendor:Ft.totalVendor,gainVendor:Ft.gainVendor,unitPriceVendor:Ft.pricePerPackage,date:wt,orderId:Vt.orderId||B}:Or);else{const Or=await je(Zt,Ft.packages,wt),Fn={sellerId:z.id,sellerName:z.name,productId:Zt,productName:Ft.productName,category:Ft.category,orderId:B,packages:Ft.packages,unitsPerPackage:Ht,totalUnits:Nr,remainingPackages:Ft.packages,remainingUnits:Nr,providerPrice:Ft.providerPrice,totalRivas:Ft.totalRivas,totalSanJorge:Ft.totalSanJorge,totalIsla:Ft.totalIsla,unitPriceRivas:Ft.unitPriceRivas,unitPriceSanJorge:Ft.unitPriceSanJorge,unitPriceIsla:Ft.unitPriceIsla,markupPercent:0,subtotal:Ft.subtotal,totalVendor:Ft.totalVendor,gainVendor:Ft.gainVendor,unitPriceVendor:Ft.pricePerPackage,date:wt,createdAt:rr.now(),status:"ASIGNADO",masterAllocations:Or};zt=[{id:(await En(At(ke,"inventory_candies_sellers"),Fn)).id,...Fn},...zt]}}for(const Zt of Object.keys(ht))if(!Je[Zt]){const Ft=ht[Zt];await jH(Ft.id),zt=zt.filter(Vt=>Vt.id!==Ft.id)}w(zt),E(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const ht=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const Je of F){const zt=f.find(Ht=>Ht.id===Je.productId);if(!zt)continue;const Zt=Je.packages>0&&zt.unitsPerPackage>0?Je.packages*zt.unitsPerPackage:0,Ft=await je(Je.productId,Je.packages,wt),Vt={sellerId:z.id,sellerName:z.name,productId:Je.productId,productName:Je.productName,category:Je.category,orderId:ht,packages:Je.packages,unitsPerPackage:zt.unitsPerPackage,totalUnits:Zt,remainingPackages:Je.packages,remainingUnits:Zt,providerPrice:Je.providerPrice,totalRivas:Je.totalRivas,totalSanJorge:Je.totalSanJorge,totalIsla:Je.totalIsla,unitPriceRivas:Je.unitPriceRivas,unitPriceSanJorge:Je.unitPriceSanJorge,unitPriceIsla:Je.unitPriceIsla,markupPercent:0,subtotal:Je.subtotal,totalVendor:Je.totalVendor,gainVendor:Je.gainVendor,unitPriceVendor:Je.pricePerPackage,date:wt,createdAt:rr.now(),status:"ASIGNADO",masterAllocations:Ft},nr=await En(At(ke,"inventory_candies_sellers"),Vt);w(Ht=>[{id:nr.id,...Vt},...Ht])}E(" Pedido asignado al vendedor y descontado del inventario.")}Pt(),O(!1)}catch(ht){console.error(ht),E((ht==null?void 0:ht.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{L(!1),T(!1)}},tt=()=>{if(!z){E("Selecciona un vendedor para imprimir el pedido.");return}if(!F.length){E("No hay productos en el pedido para imprimir.");return}const Ce=ie||new Date().toISOString().slice(0,10),at=Zt=>(Zt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wt="Pedido de dulces para vendedor",ht=F.map(Zt=>`
      <tr>
        <td>${at(Zt.productName)}</td>
        <td class="right">${at(Zt.category||"")}</td>
        <td class="right">${Zt.packages}</td>

        <td class="right">${Sn(Zt.providerPrice)}</td>
        <td class="right">${Sn(Zt.subtotal)}</td>
        <td class="right">${Sn(Zt.pricePerPackage)}</td>
        <td class="right">${Sn(Zt.totalVendor)}</td>
      </tr>`).join(""),Je=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${at(wt)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${at(wt)}</h1>
  <div class="muted">
    Fecha pedido: <b>${at(Ce)}</b><br/>
    Vendedor: <b>${at(z.name)}</b>${z.commissionPercent?` &mdash; Comisin: <b>${z.commissionPercent.toFixed(2)}%</b>`:""}${z.branchLabel?`<br/>Ruta / sucursal: <b>${at(z.branchLabel)}</b>`:""}
  </div>

  <div class="grid">
    <div class="card">
      <div class="label">Paquetes totales del pedido</div>
      <div class="value">${Ot.totalPackages}</div>
    </div>
    <div class="card">
      <div class="label">Subtotal costo (proveedor)</div>
      <div class="value">${Sn(Ot.subtotal)}</div>
    </div>
    <div class="card">
      <div class="label">Total vendedor (precio venta)</div>
      <div class="value">${Sn(Ot.totalVendor)}</div>
    </div>
    <div class="card">
      <div class="label">Comisin posible del vendedor</div>
      <div class="value">${Sn(Ot.commissionAmount)}</div>
    </div>
  </div>

  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">P. Proveedor (paq)</th>
        <th class="right">Subtotal</th>
        <th class="right">P. Paquete vendedor</th>
        <th class="right">Total vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${ht}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,zt=window.open("","_blank");if(!zt){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}zt.document.open(),zt.document.write(Je),zt.document.close()},rt=Ce=>{const at=st.filter(Je=>(Je.orderId||Je.id)===Ce);if(!at.length){E("No se encontraron filas para este pedido.");return}const wt=at[0];if(i&&Le&&wt.sellerId!==Le.id){E("No tienes permiso para ver este pedido.");return}P(Ce),X(at),re(wt.sellerId),ce(wt.date);const ht=at.map(Je=>{const zt=Je.unitPriceRivas||0,Zt=Je.unitPriceSanJorge||0,Ft=Je.unitPriceIsla||0,Vt=Je.totalRivas||zt*Number(Je.packages||0),nr=Je.totalSanJorge||Zt*Number(Je.packages||0),Ht=Je.totalIsla||Ft*Number(Je.packages||0);return{id:Je.id,productId:Je.productId,productName:Je.productName,category:Je.category,providerPrice:Je.providerPrice,unitsPerPackage:Je.unitsPerPackage,packages:Je.packages,subtotal:Je.subtotal,totalVendor:Je.totalVendor,gainVendor:Je.gainVendor,pricePerPackage:Je.unitPriceVendor,totalRivas:Vt,totalSanJorge:nr,totalIsla:Ht,unitPriceRivas:zt,unitPriceSanJorge:Zt,unitPriceIsla:Ft,remainingPackages:Je.remainingPackages}});H(ht),pe(""),k("0"),O(!0),G("")},Te=async Ce=>{if(!s){E("No tienes permiso para borrar pedidos.");return}const at=b.filter(Je=>(Je.orderId||Je.id)===Ce);if(!at.length)return;const wt=at[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${wt}"? Se regresarn los paquetes al inventario principal.`))try{T(!0);for(const Je of at)await jH(Je.id);w(Je=>Je.filter(zt=>(zt.orderId||zt.id)!==Ce)),E(" Pedido eliminado y paquetes regresados correctamente.")}catch(Je){console.error(Je),E(" Error al eliminar el pedido / regresar paquetes.")}finally{T(!1)}},[Ee,V]=v.useState(!1),[Ae,Ne]=v.useState(!1),[Re,ze]=v.useState([]),[Ye,Ze]=v.useState(""),[dt,ge]=v.useState(""),[Xe,ot]=v.useState(""),[be,Ge]=v.useState(""),[ut,bt]=v.useState("0"),[Rt,Wt]=v.useState(""),[mt,ne]=v.useState(!1),ae=v.useMemo(()=>yt.map(Ce=>Ce.orderKey),[yt]),me=v.useMemo(()=>Ye?st.filter(Ce=>(Ce.orderId||Ce.id)===Ye):[],[st,Ye]),ue=v.useMemo(()=>me.filter(Ce=>Number(Ce.remainingPackages||0)>0),[me]),Be=v.useMemo(()=>dt&&st.find(Ce=>Ce.id===dt)||null,[st,dt]),Oe=v.useMemo(()=>Xe?st.filter(Ce=>(Ce.orderId||Ce.id)===Xe):[],[st,Xe]),We=v.useMemo(()=>Be?Oe.filter(Ce=>Ce.productId===Be.productId):[],[Oe,Be]),it=async()=>{try{Ne(!0);let Ce=[];if(i&&e){const at=Yt(At(ke,"inventory_transfers_candies"),lr("fromSellerId","==",e),ln("createdAt","desc")),wt=Yt(At(ke,"inventory_transfers_candies"),lr("toSellerId","==",e),ln("createdAt","desc")),[ht,Je]=await Promise.all([Dt(at),Dt(wt)]),zt=new Set,Zt=Ft=>{Ft.forEach(Vt=>{if(zt.has(Vt.id))return;zt.add(Vt.id);const nr=Vt.data();Ce.push({id:Vt.id,createdAt:nr.createdAt,date:nr.date,createdByEmail:nr.createdByEmail||"",createdByName:nr.createdByName||"",productId:nr.productId||"",productName:nr.productName||"",packagesMoved:Number(nr.packagesMoved||0),providerPrice:Number(nr.providerPrice||0),unitPriceRivas:Number(nr.unitPriceRivas||0),unitPriceIsla:Number(nr.unitPriceIsla||0),toSellerId:nr.toSellerId||"",toSellerName:nr.toSellerName||"",toOrderKey:nr.toOrderKey||"",toOrderLabel:nr.toOrderLabel||"",comment:nr.comment||"",fromSellerId:nr.fromSellerId||"",fromSellerName:nr.fromSellerName||"",fromOrderKey:nr.fromOrderKey||"",fromOrderLabel:nr.fromOrderLabel||"",fromVendorRowId:nr.fromVendorRowId||"",toVendorRowId:nr.toVendorRowId||""})})};Zt(ht),Zt(Je),Ce.sort((Ft,Vt)=>{var Nr,Or;const nr=((Nr=Ft.createdAt)==null?void 0:Nr.seconds)||0;return(((Or=Vt.createdAt)==null?void 0:Or.seconds)||0)-nr})}else{const at=Yt(At(ke,"inventory_transfers_candies"),ln("createdAt","desc"));(await Dt(at)).forEach(ht=>{const Je=ht.data();Ce.push({id:ht.id,createdAt:Je.createdAt,date:Je.date,createdByEmail:Je.createdByEmail||"",createdByName:Je.createdByName||"",productId:Je.productId||"",productName:Je.productName||"",packagesMoved:Number(Je.packagesMoved||0),providerPrice:Number(Je.providerPrice||0),unitPriceRivas:Number(Je.unitPriceRivas||0),unitPriceIsla:Number(Je.unitPriceIsla||0),toSellerId:Je.toSellerId||"",toSellerName:Je.toSellerName||"",toOrderKey:Je.toOrderKey||"",toOrderLabel:Je.toOrderLabel||"",comment:Je.comment||"",fromSellerId:Je.fromSellerId||"",fromSellerName:Je.fromSellerName||"",fromOrderKey:Je.fromOrderKey||"",fromOrderLabel:Je.fromOrderLabel||"",fromVendorRowId:Je.fromVendorRowId||"",toVendorRowId:Je.toVendorRowId||""})})}ze(Ce)}catch(Ce){console.error(Ce),E(" Error cargando traslados.")}finally{Ne(!1)}},gt=async()=>{V(!0),await it()},xt=()=>{Ze(""),ge(""),ot(""),Ge(""),bt("0"),Wt("")},_t=async()=>{if(!s){E("No tienes permiso para hacer traslados.");return}E("");const Ce=Number(ut||0);if(!(Ce>0)){E("La cantidad de paquetes debe ser mayor a 0.");return}if(!Rt.trim()){E("Debes escribir el motivo de la movida.");return}if(!Ye||!dt){E("Selecciona el pedido origen y el producto.");return}if(!Xe||!be){E("Selecciona el pedido destino y el producto destino.");return}if(dt===be){E("Origen y destino no pueden ser el mismo.");return}const at=b.find(ht=>ht.id===dt)||null,wt=b.find(ht=>ht.id===be)||null;if(!at||!wt){E("No se encontr la fila origen/destino.");return}if(at.productId!==wt.productId){E("El producto destino no coincide con el producto origen.");return}if(Number(at.remainingPackages||0)<Ce){E("El origen no tiene suficientes paquetes disponibles.");return}try{ne(!0),T(!0);const ht=Gt(ke,"inventory_candies_sellers",at.id),Je=Gt(ke,"inventory_candies_sellers",wt.id),zt=rr.now(),Zt=new Date().toISOString().slice(0,10);await Di(ke,async Ft=>{const Vt=await Ft.get(ht),nr=await Ft.get(Je);if(!Vt.exists())throw new Error("Orden origen no existe.");if(!nr.exists())throw new Error("Orden destino no existe.");const Ht=Vt.data(),Nr=nr.data(),Or=Number(Ht.remainingPackages||0);if(Or<Ce)throw new Error("Origen no tiene suficientes paquetes.");const Fn=Number(Ht.unitsPerPackage||Nr.unitsPerPackage||0),vn=Fn>0?Ce*Fn:0;Ft.update(ht,{remainingPackages:Or-Ce,...Fn>0?{remainingUnits:Number(Ht.remainingUnits||0)-vn}:{},updatedAt:zt}),Ft.update(Je,{remainingPackages:Number(Nr.remainingPackages||0)+Ce,...Fn>0?{remainingUnits:Number(Nr.remainingUnits||0)+vn}:{},updatedAt:zt});const Na=Gt(At(ke,"inventory_transfers_candies"));Ft.set(Na,{createdAt:zt,date:Zt,createdByEmail:(r||"").trim(),createdByName:String(qe||"").trim(),productId:String(Ht.productId||""),productName:String(Ht.productName||""),packagesMoved:Ce,providerPrice:Number(Ht.providerPrice||0),unitPriceRivas:Number(Ht.unitPriceRivas||0),unitPriceIsla:Number(Ht.unitPriceIsla||0),fromSellerId:String(Ht.sellerId||""),fromSellerName:String(Ht.sellerName||""),fromOrderKey:String(Ht.orderId||at.id||""),fromOrderLabel:String(Ht.orderId||at.id||""),toSellerId:String(Nr.sellerId||""),toSellerName:String(Nr.sellerName||""),toOrderKey:String(Nr.orderId||wt.id||""),toOrderLabel:String(Nr.orderId||wt.id||""),fromVendorRowId:at.id,toVendorRowId:wt.id,comment:Rt.trim()})}),w(Ft=>Ft.map(Vt=>{if(Vt.id===at.id){const nr=Number(Vt.unitsPerPackage||0),Ht=nr>0?Ce*nr:0;return{...Vt,remainingPackages:Number(Vt.remainingPackages||0)-Ce,remainingUnits:nr>0?Number(Vt.remainingUnits||0)-Ht:Vt.remainingUnits}}if(Vt.id===wt.id){const nr=Number(Vt.unitsPerPackage||0),Ht=nr>0?Ce*nr:0;return{...Vt,remainingPackages:Number(Vt.remainingPackages||0)+Ce,remainingUnits:nr>0?Number(Vt.remainingUnits||0)+Ht:Vt.remainingUnits}}return Vt})),await it(),d(Ft=>{const Vt={...Ft},nr=Ye,Ht=Xe,Nr=Number(ut||0);return nr&&(Vt[nr]=Vt[nr]||{out:0,in:0},Vt[nr].out+=Nr),Ht&&(Vt[Ht]=Vt[Ht]||{out:0,in:0},Vt[Ht].in+=Nr),Vt}),xt(),E(" Traslado realizado.")}catch(ht){console.error(ht),E((ht==null?void 0:ht.message)||" Error realizando el traslado.")}finally{ne(!1),T(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Xc,{onClick:a,loading:I}),o.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:gt,type:"button",disabled:!s,children:"Traslados"}),s&&o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Pt(),O(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),Ee&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[mt&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{V(!1),xt()},type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ye,onChange:Ce=>{Ze(Ce.target.value),ge(""),ot(""),Ge(""),bt("0")},disabled:!s,children:[o.jsx("option",{value:"",children:"Selecciona"}),ae.map(Ce=>{const at=Ct[Ce];return o.jsxs("option",{value:Ce,children:["Vendedor: ",(at==null?void 0:at.sellerName)||"","  Existencias: ","",(at==null?void 0:at.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(at==null?void 0:at.date)||""]},Ce)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:dt,onChange:Ce=>{ge(Ce.target.value),ot(""),Ge(""),bt("0")},disabled:!s||!Ye,children:[o.jsx("option",{value:"",children:"Selecciona"}),ue.map(Ce=>o.jsxs("option",{value:Ce.id,children:["Tipo: ",Ce.category," - ",Ce.productName,"  Existencias:"," ",Number(Ce.remainingPackages||0)," Paquetes - Precio Costo: $",Ce.providerPrice]},Ce.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Xe,onChange:Ce=>{ot(Ce.target.value),Ge("")},disabled:!s||!dt,children:[o.jsx("option",{value:"",children:"Selecciona"}),ae.filter(Ce=>Ce!==Ye).map(Ce=>{const at=Ct[Ce];return o.jsxs("option",{value:Ce,children:["Vendedor: ",(at==null?void 0:at.sellerName)||"","  Existencias: ","",(at==null?void 0:at.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(at==null?void 0:at.date)||""]},Ce)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:be,onChange:Ce=>Ge(Ce.target.value),disabled:!s||!Xe||!Be,children:[o.jsx("option",{value:"",children:"Selecciona"}),We.map(Ce=>o.jsxs("option",{value:Ce.id,children:["Tipo: ",Ce.category," - ",Ce.productName,"  Existencias:"," ",Number(Ce.remainingPackages||0)," Paquetes - Precio Costo: $",Ce.providerPrice]},Ce.id))]}),Xe&&Be&&We.length===0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:ut,onChange:Ce=>bt(Ce.target.value),disabled:!s||!dt||!be})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Rt,onChange:Ce=>Wt(Ce.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:xt,disabled:!s||mt,children:"Limpiar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:_t,disabled:!s||mt||!dt||!be||Number(ut||0)<=0||!Rt.trim(),children:"Hacer traslado"})]})]}),o.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-2",children:[o.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:it,disabled:Ae,type:"button",children:Ae?"Cargando...":"Recargar"})]}),o.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),o.jsx("th",{className:"p-2 border",children:"Usuario"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),o.jsx("th",{className:"p-2 border",children:"Movido a orden"}),o.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),o.jsx("tbody",{children:Ae?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):Re.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):Re.map(Ce=>{var Je,zt;const at=((zt=(Je=Ce.createdAt)==null?void 0:Je.toDate)==null?void 0:zt.call(Je))||(Ce.createdAt?new Date(Ce.createdAt.seconds*1e3):null),wt=at?`${at.toISOString().slice(0,10)} ${at.toISOString().slice(11,19)}`:Ce.date||"",ht=(Ce.createdByName||"").trim()||(Ce.createdByEmail||"").trim()||"";return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:wt}),o.jsx("td",{className:"p-2 border",children:ht}),o.jsx("td",{className:"p-2 border text-left",children:Ce.productName||""}),o.jsx("td",{className:"p-2 border",children:Number(Ce.packagesMoved||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 border",children:Ce.toSellerName||""}),o.jsx("td",{className:"p-2 border",children:Ce.toOrderLabel||Ce.toOrderKey||""}),o.jsx("td",{className:"p-2 border text-left",children:Ce.comment||""})]},Ce.id)})})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),S&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[M&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:B?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),A.length===0&&o.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),o.jsxs("form",{onSubmit:Qe,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:Ce=>re(Ce.target.value),disabled:c,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),A.map(Ce=>o.jsxs("option",{value:Ce.id,children:[Ce.name,Ce.branchLabel?` - ${Ce.branchLabel}`:"",Ce.commissionPercent?` (${Ce.commissionPercent.toFixed(1)}% comisin)`:""]},Ce.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ie,onChange:Ce=>ce(Ce.target.value),disabled:c})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded mb-2",placeholder:"Buscar producto (nombre o categora)...",value:R,onChange:Ce=>G(Ce.target.value),disabled:c}),o.jsxs("select",{className:"w-full border p-2 rounded",value:J,onChange:Ce=>pe(Ce.target.value),disabled:c,children:[o.jsx("option",{value:"",children:R.trim()?`Resultados: ${le.length}`:"Selecciona un producto"}),le.map(Ce=>{const at=p[Ce.id]??0,wt=[];wt.push(Ce.category?`${Ce.category} - ${Ce.name}`:Ce.name);const ht=[];Ce.unitPriceRivas>0&&ht.push(`R: ${Sn(Ce.unitPriceRivas)}`),Ce.unitPriceSanJorge>0&&ht.push(`SJ: ${Sn(Ce.unitPriceSanJorge)}`),Ce.unitPriceIsla>0&&ht.push(`I: ${Sn(Ce.unitPriceIsla)}`),ht.length&&wt.push(ht.join(" | ")),wt.push(`Disp: ${at} paq`);const Je=Y.has(Ce.id);return o.jsx("option",{value:Ce.id,disabled:Je,children:Je?` (Agregado) ${wt.join("  ")}`:wt.join("  ")},Ce.id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes / bolsas"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Se,onChange:Ce=>k(Ce.target.value),disabled:c})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:ve,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:c||!J||Y.has(J),title:Y.has(J)?"Ese producto ya est en el pedido":"",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paq x Und (ref)"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),o.jsx("th",{className:"p-2 border",children:"P. paquete vendedor"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center text-gray-500",children:"No hay productos en este pedido. Agrega al menos uno."})}):F.map(Ce=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Ce.productName}),o.jsx("td",{className:"p-2 border",children:Ce.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",min:0,className:"border p-1 rounded text-right text-xs w-20",value:Ce.packages,onChange:at=>oe(Ce.id,at.target.value),disabled:c})}),o.jsx("td",{className:"p-2 border",children:Ce.remainingPackages??Ce.packages}),o.jsx("td",{className:"p-2 border",children:Ce.unitsPerPackage||""}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.providerPrice)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.subtotal)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.totalRivas)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.totalSanJorge)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.totalIsla)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.unitPriceRivas)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.unitPriceSanJorge)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.unitPriceIsla)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.pricePerPackage)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.totalVendor)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs disabled:opacity-50",onClick:()=>he(Ce.id),disabled:c,children:"Quitar"})})]},Ce.id))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales del pedido"}),o.jsx("div",{className:"text-lg font-semibold",children:Ot.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),o.jsx("div",{className:"text-lg font-semibold",children:Sn(Ot.subtotal)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total vendedor (precio venta)"}),o.jsx("div",{className:"text-lg font-semibold text-green-600",children:Sn(Ot.totalVendor)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin posible vendedor"}),o.jsx("div",{className:"text-lg font-semibold",children:Sn(Ot.commissionAmount)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s&&o.jsx("button",{type:"button",onClick:Pt,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:M,children:"Limpiar pedido"}),o.jsx("button",{type:"button",onClick:()=>{Pt(),O(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:M,children:"Cerrar"}),o.jsx("button",{type:"button",onClick:tt,className:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700",disabled:!z||F.length===0,children:"Imprimir pedido"}),s&&o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:M||!z||F.length===0,children:M?"Guardando...":"Guardar pedido"})]})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3 mt-4",children:yt.map(Ce=>{var Zt,Ft;const at=Pe[Ce.sellerId],wt=Number((at==null?void 0:at.commissionPercent)||0),ht=Ce.totalVendor*wt/100,Je=x===Ce.orderKey,zt=Je?Et(Ce.orderKey):[];return o.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-sm",children:Ce.sellerName}),o.jsx("div",{className:"text-xs text-gray-500",children:(at==null?void 0:at.branchLabel)||""})]}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[o.jsx("div",{children:Ce.date||""}),o.jsx("div",{className:"truncate max-w-[140px]",children:Ce.orderKey})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paquetes:"})," ",o.jsx("b",{children:Ce.totalPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Restantes:"})," ",o.jsx("b",{children:Ce.totalRemainingPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. OUT:"})," ",o.jsx("b",{children:((Zt=u[Ce.orderKey])==null?void 0:Zt.out)||0})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. IN:"})," ",o.jsx("b",{children:((Ft=u[Ce.orderKey])==null?void 0:Ft.in)||0})]})]}),o.jsxs("div",{className:"text-sm border-t pt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{children:Sn(Ce.subtotal)})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:Sn(Ce.totalVendor)})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[o.jsx("span",{children:"Comisin:"}),o.jsx("span",{children:Sn(ht)})]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 rounded text-xs",onClick:()=>rt(Ce.orderKey),children:"Ver / Editar"}),s&&o.jsx("button",{className:"flex-1 bg-red-600 text-white py-2 rounded text-xs",onClick:()=>Te(Ce.orderKey),children:"Borrar"})]}),o.jsx("button",{type:"button",className:"w-full mt-2 border rounded py-2 text-xs bg-gray-50 hover:bg-gray-100",onClick:()=>{y(Vt=>Vt===Ce.orderKey?null:Ce.orderKey)},children:Je?"Ocultar detalle":"Ver detalle del pedido"}),Je&&o.jsxs("div",{className:"mt-2 border rounded bg-white overflow-hidden",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold bg-gray-100",children:"Detalle del pedido"}),zt.length===0?o.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Sin detalle"}):o.jsx("div",{className:"divide-y",children:zt.map(Vt=>o.jsxs("div",{className:"p-3 text-xs",children:[o.jsxs("div",{className:"flex justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:Vt.productName}),o.jsx("div",{className:"text-gray-500 truncate",children:Vt.category||""})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paq:"})," ",o.jsx("b",{children:Number(Vt.packages||0)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Rem:"})," ",o.jsx("b",{children:Number(Vt.remainingPackages||0)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Costo:"}),o.jsx("span",{children:Sn(Number(Vt.providerPrice||0))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Total:"}),o.jsx("span",{className:"font-semibold",children:Sn(Number(Vt.totalVendor||0))})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-[11px] text-gray-600",children:[o.jsxs("div",{className:"text-center border rounded py-1",children:["R ",Sn(Number(Vt.unitPriceRivas||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["SJ ",Sn(Number(Vt.unitPriceSanJorge||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["I ",Sn(Number(Vt.unitPriceIsla||0))]})]})]},Vt.id))})]})]},Ce.orderKey)})}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Listado de pedidos"}),o.jsxs("table",{className:"min-w-[1000px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Trasladados"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Adicionales"}),o.jsx("th",{className:"p-2 border",children:"Subtotal costo"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Comisin posible"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Cargando"})}):yt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Sin pedidos asignados a vendedores."})}):yt.map(Ce=>{var Je,zt;const at=Pe[Ce.sellerId],wt=Number((at==null?void 0:at.commissionPercent)||0),ht=Ce.totalVendor*wt/100;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Ce.date||""}),o.jsxs("td",{className:"p-2 border",children:[Ce.sellerName,at!=null&&at.branchLabel?` - ${at.branchLabel}`:""]}),o.jsx("td",{className:"p-2 border",children:Ce.totalPackages}),o.jsx("td",{className:"p-2 border",children:Ce.totalRemainingPackages}),o.jsx("td",{className:"p-2 border",children:((Je=u[Ce.orderKey])==null?void 0:Je.out)||0}),o.jsx("td",{className:"p-2 border",children:((zt=u[Ce.orderKey])==null?void 0:zt.in)||0}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.subtotal)}),o.jsx("td",{className:"p-2 border",children:Sn(Ce.totalVendor)}),o.jsx("td",{className:"p-2 border",children:Sn(ht)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>rt(Ce.orderKey),children:"Ver / Editar"}),s&&o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Te(Ce.orderKey),children:"Borrar"})]})})]},Ce.orderKey)})})]})]}),C&&o.jsx("p",{className:"mt-2 text-sm",children:C})]})}function Og(t){return isFinite(t)?Math.round(t):0}function Hn(t){const e=Number(t);return Number.isFinite(e)?Math.floor(e):0}function bne(t){const e=Math.max(1,Hn(t.unitsPerPackage||1)),r=Hn(t.totalUnits||0),n=Hn(t.quantity||0),a=Hn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function GLe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):bne(t)}function FH(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Hn(t.unitsPerPackage||1)),n=GLe(t);return Math.max(0,Math.floor(n/r))}function qLe(t){const e=Math.max(1,Hn(t.unitsPerPackage||1)),r=bne(t);return Math.max(0,Math.floor(r/e))}function zLe(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,A]=v.useState([]),[h,f]=v.useState({}),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,I]=v.useState(""),[T,C]=v.useState("20"),[E,S]=v.useState("15"),[O,B]=v.useState("30"),[P,D]=v.useState([]),[X,de]=v.useState(""),[re,ie]=v.useState(""),[ce,J]=v.useState(""),[pe,Se]=v.useState("1"),[k,F]=v.useState("0"),[H,M]=v.useState("DATOS"),L=v.useMemo(()=>{const fe=new Set;for(const Ke of i){const ve=String(Ke.category||"").trim();ve&&fe.add(ve)}return Array.from(fe).sort((Ke,ve)=>Ke.localeCompare(ve,"es"))},[i]);v.useEffect(()=>{!X&&L.length>0&&de(L[0])},[L]);const z=(fe,Ke,ve)=>{const he=fe*Ke,oe=Math.min(Math.max(ve.marginR,0),99.9)/100,je=Math.min(Math.max(ve.marginSJ,0),99.9)/100,Qe=Math.min(Math.max(ve.marginIsla,0),99.9)/100,tt=Ke>0&&oe<1?he/(1-oe):he,rt=Ke>0&&je<1?he/(1-je):he,Te=Ke>0&&Qe<1?he/(1-Qe):he,Ee=tt-he,V=rt-he,Ae=Te-he,Ne=Ke>0?Og(tt/Ke):0,Re=Ke>0?Og(rt/Ke):0,ze=Ke>0?Og(Te/Ke):0;return{subtotal:he,totalRivas:tt,totalSanJorge:rt,totalIsla:Te,gainRivas:Ee,gainSanJorge:V,gainIsla:Ae,unitPriceRivas:Ne,unitPriceSanJorge:Re,unitPriceIsla:ze}},R=()=>{x(null),b(""),I(""),D([]),de(L[0]||""),ie(""),J(""),F("0"),Se("1"),C("20"),S("15"),B("30"),M("DATOS")},G=async()=>{u(!0);try{const fe=await Dt(Yt(At(ke,"products_candies"),ln("createdAt","desc"))),Ke=[];fe.forEach(ve=>{const he=ve.data();Ke.push({id:ve.id,name:String(he.name??"").trim(),category:String(he.category??"").trim()||"Caramelo",providerPrice:Number(he.providerPrice??0),unitsPerPackage:Number(he.unitsPerPackage??1)})}),l(Ke)}catch(fe){console.error(fe),n(" Error cargando catlogo de dulces.")}finally{u(!1)}};v.useEffect(()=>{G()},[t]);const ee=v.useMemo(()=>(X.trim().length>0?i.filter(Ke=>Ke.category===X):i).sort((Ke,ve)=>Ke.name.localeCompare(ve.name,"es")),[i,X]);v.useEffect(()=>{if(!re){J(""),Se("1");return}const fe=i.find(Ke=>Ke.id===re);fe&&(J(String(fe.providerPrice??0)),Se(String(fe.unitsPerPackage??1)))},[re,i]);const te=()=>{if(n(""),!re){n("Selecciona un producto del catlogo.");return}const fe=i.find(rt=>rt.id===re);if(!fe){n("Producto de catlogo no encontrado (refresca).");return}const Ke=Number(fe.providerPrice||0),ve=Hn(k||0),he=Hn(fe.unitsPerPackage||0);if(Ke<0){n("El precio proveedor no puede ser negativo.");return}if(ve<=0){n("Los paquetes del pedido general deben ser mayor que 0.");return}if(he<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const oe=Number(T||0),je=Number(E||0),Qe=Number(O||0);if(P.find(rt=>rt.id===fe.id))D(rt=>rt.map(Te=>{if(Te.id!==fe.id)return Te;const Ee=Hn(Te.packages||0)+ve,V=z(Ke,Ee,{marginR:Number(Te.marginRivas||oe),marginSJ:Number(Te.marginSanJorge||je),marginIsla:Number(Te.marginIsla||Qe)});return{...Te,providerPrice:Ke,unitsPerPackage:he,packages:Ee,remainingPackages:Hn(Te.remainingPackages??Te.packages)+ve,...V}}));else{const rt=z(Ke,ve,{marginR:oe,marginSJ:je,marginIsla:Qe}),Te={id:fe.id,name:fe.name,category:fe.category,providerPrice:Ke,packages:ve,unitsPerPackage:he,marginRivas:oe,marginSanJorge:je,marginIsla:Qe,subtotal:rt.subtotal,totalRivas:rt.totalRivas,totalSanJorge:rt.totalSanJorge,totalIsla:rt.totalIsla,gainRivas:rt.gainRivas,gainSanJorge:rt.gainSanJorge,gainIsla:rt.gainIsla,unitPriceRivas:rt.unitPriceRivas,unitPriceSanJorge:rt.unitPriceSanJorge,unitPriceIsla:rt.unitPriceIsla,remainingPackages:ve};D(Ee=>[...Ee,Te])}ie(""),F("0"),M("ITEMS")},Q=fe=>{D(Ke=>Ke.filter(ve=>ve.id!==fe))},xe=v.useMemo(()=>{const fe=P.reduce((je,Qe)=>je+Hn(Qe.packages),0),Ke=P.reduce((je,Qe)=>je+Number(Qe.subtotal||0),0),ve=P.reduce((je,Qe)=>je+Number(Qe.totalRivas||0),0),he=P.reduce((je,Qe)=>je+Number(Qe.totalSanJorge||0),0),oe=P.reduce((je,Qe)=>je+Number(Qe.totalIsla||0),0);return{totalPackages:fe,subtotal:Ke,totalRivas:ve,totalSanJorge:he,totalIsla:oe}},[P]),Y=(fe,Ke,ve)=>{D(he=>he.map(oe=>{if(oe.id!==fe)return oe;let je={...oe};if(Ke==="packages"&&(je.packages=Hn(ve||0)),Ke==="unitsPerPackage"&&(je.unitsPerPackage=Hn(ve||0)),Ke==="marginRivas"&&(je.marginRivas=Number(ve||0)),Ke==="marginSanJorge"&&(je.marginSanJorge=Number(ve||0)),Ke==="marginIsla"&&(je.marginIsla=Number(ve||0)),Ke==="packages"||Ke==="marginRivas"||Ke==="marginSanJorge"||Ke==="marginIsla"){const Qe=z(je.providerPrice,je.packages,{marginR:Number(je.marginRivas||0),marginSJ:Number(je.marginSanJorge||0),marginIsla:Number(je.marginIsla||0)});je={...je,...Qe}}return je}))},W=()=>{if(n(""),!i.length){n(" No hay catlogo cargado para generar plantilla.");return}const fe=Number(T||0),Ke=Number(E||0),ve=Number(O||0),he=i.slice().sort((tt,rt)=>tt.name.localeCompare(rt.name,"es")).map(tt=>({Producto:tt.name,Paquetes:"","Margen Rivas":fe,"Margen San Jorge":Ke,"Margen Isla":ve,"P. unidad Rivas":"","P. unidad San Jorge":"","P. unidad Isla":""})),oe=kl.json_to_sheet(he),je=kl.book_new();kl.book_append_sheet(je,oe,"Plantilla");const Qe=w&&String(w).trim()||new Date().toISOString().slice(0,10);gne(je,`plantilla_orden_maestra_${Qe}.xlsx`)},le=ao.useRef(null),[Pe,Le]=v.useState(!1);function qe(fe){return String(fe??"").trim().toLowerCase().replace(/\s+/g," ")}function nt(fe){const Ke=Number(String(fe??"").replace(",","."));return Number.isFinite(Ke)?Ke:0}function st(fe,Ke){const ve={};Object.keys(fe||{}).forEach(he=>ve[qe(he)]=fe[he]);for(const he of Ke){const oe=ve[qe(he)];if(oe!=null&&String(oe).trim()!=="")return oe}}const Et=()=>{var fe;if(!i.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(fe=le.current)==null||fe.click()},yt=async fe=>{var ve;const Ke=(ve=fe.target.files)==null?void 0:ve[0];if(Ke){fe.target.value="",Le(!0),n("");try{const he=await Ke.arrayBuffer(),oe=ab(he,{type:"array"}),je=oe.Sheets[oe.SheetNames[0]],Qe=kl.sheet_to_json(je,{defval:""});if(!Qe.length){n(" El Excel viene vaco.");return}const tt=new Map;for(const V of i)tt.set(qe(V.name),V);const rt=[],Te=new Map;for(let V=0;V<Qe.length;V++){const Ae=Qe[V],Ne=st(Ae,["Producto","Product","Nombre","Name"]),Re=st(Ae,["Paquetes","Packages"]),ze=st(Ae,["Margen Rivas","Margen Rivas (%)","Margin Rivas","Margin Rivas (%)"]),Ye=st(Ae,["Margen San Jorge","Margen San Jorge (%)","Margin San Jorge","Margin San Jorge (%)"]),Ze=st(Ae,["Margen Isla","Margen Isla (%)","Margin Isla","Margin Isla (%)"]),dt=st(Ae,["P. unidad Rivas","P unidad Rivas","Precio Rivas","Precio venta Rivas"]),ge=st(Ae,["P. unidad San Jorge","P unidad San Jorge","Precio San Jorge","Precio venta San Jorge"]),Xe=st(Ae,["P. unidad Isla","P unidad Isla","Precio Isla","Precio venta Isla"]),ot=qe(Ne);if(!ot){rt.push(`Fila ${V+2}: Falta "Producto".`);continue}const be=tt.get(ot);if(!be){rt.push(`Fila ${V+2}: Producto no existe en catlogo: "${String(Ne).trim()}".`);continue}const Ge=Math.floor(nt(Re));if(Ge<=0){rt.push(`Fila ${V+2}: "Paquetes" invlido para "${be.name}".`);continue}const ut=String(ze??"").trim()!==""?nt(ze):Number(T||0),bt=String(Ye??"").trim()!==""?nt(Ye):Number(E||0),Rt=String(Ze??"").trim()!==""?nt(Ze):Number(O||0),Wt=Math.floor(nt(dt)),mt=Math.floor(nt(ge)),ne=Math.floor(nt(Xe)),ae=Te.get(be.id);ae?Te.set(be.id,{packages:ae.packages+Ge,mR:ut,mSJ:bt,mI:Rt,puR:Wt>0?Wt:ae.puR,puSJ:mt>0?mt:ae.puSJ,puI:ne>0?ne:ae.puI}):Te.set(be.id,{packages:Ge,mR:ut,mSJ:bt,mI:Rt,puR:Wt>0?Wt:void 0,puSJ:mt>0?mt:void 0,puI:ne>0?ne:void 0})}const Ee=[];Te.forEach((V,Ae)=>{const Ne=i.find(Rt=>Rt.id===Ae);if(!Ne)return;const Re=Number(Ne.providerPrice||0),ze=Math.max(1,Hn(Ne.unitsPerPackage||1)),Ye=Math.max(1,Hn(V.packages)),Ze=Re*Ye,dt=Number(V.puR||0),ge=Number(V.puSJ||0),Xe=Number(V.puI||0),ot=dt>0||ge>0||Xe>0;let be=V.mR,Ge=V.mSJ,ut=V.mI,bt;if(ot){const Rt=z(Re,Ye,{marginR:be,marginSJ:Ge,marginIsla:ut}),Wt=dt>0?dt*Ye:Rt.totalRivas,mt=ge>0?ge*Ye:Rt.totalSanJorge,ne=Xe>0?Xe*Ye:Rt.totalIsla,ae=me=>{if(!Number.isFinite(me)||me<=0)return 0;const ue=(1-Ze/me)*100;return Math.min(Math.max(ue,0),99.9)};dt>0&&(be=ae(Wt)),ge>0&&(Ge=ae(mt)),Xe>0&&(ut=ae(ne)),bt={subtotal:Ze,totalRivas:Wt,totalSanJorge:mt,totalIsla:ne,gainRivas:Wt-Ze,gainSanJorge:mt-Ze,gainIsla:ne-Ze,unitPriceRivas:Ye>0?Og(Wt/Ye):0,unitPriceSanJorge:Ye>0?Og(mt/Ye):0,unitPriceIsla:Ye>0?Og(ne/Ye):0}}else bt=z(Re,Ye,{marginR:be,marginSJ:Ge,marginIsla:ut});Ee.push({id:Ne.id,name:Ne.name,category:Ne.category,providerPrice:Re,packages:Ye,unitsPerPackage:ze,marginRivas:be,marginSanJorge:Ge,marginIsla:ut,subtotal:bt.subtotal,totalRivas:bt.totalRivas,totalSanJorge:bt.totalSanJorge,totalIsla:bt.totalIsla,gainRivas:bt.gainRivas,gainSanJorge:bt.gainSanJorge,gainIsla:bt.gainIsla,unitPriceRivas:bt.unitPriceRivas,unitPriceSanJorge:bt.unitPriceSanJorge,unitPriceIsla:bt.unitPriceIsla,remainingPackages:Ye})}),D(V=>{const Ae=new Map;V.forEach(Ne=>Ae.set(Ne.id,Ne));for(const Ne of Ee){const Re=Ae.get(Ne.id);if(!Re)Ae.set(Ne.id,Ne);else{const ze=Hn(Re.packages)+Hn(Ne.packages),Ye=z(Re.providerPrice,ze,{marginR:Ne.marginRivas,marginSJ:Ne.marginSanJorge,marginIsla:Ne.marginIsla});Ae.set(Ne.id,{...Re,packages:ze,marginRivas:Ne.marginRivas,marginSanJorge:Ne.marginSanJorge,marginIsla:Ne.marginIsla,remainingPackages:Hn(Re.remainingPackages??Re.packages)+Hn(Ne.packages),...Ye})}}return Array.from(Ae.values()).sort((Ne,Re)=>Ne.name.localeCompare(Re.name,"es"))}),M("ITEMS"),rt.length?(n(` Importado con detalles. Errores: ${rt.length}. (Revis nombres/paquetes).`),console.warn("Errores import:",rt)):n(` Importacin lista: ${Ee.length} productos agregados.`)}catch(he){console.error(he),n(" Error importando Excel. Revis columnas: Producto, Paquetes, y opcional Mrgenes o P. unidad.")}finally{Le(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const fe=Yt(At(ke,"candy_main_orders"),ln("createdAt","desc")),Ke=await Dt(fe),ve=[];Ke.forEach(je=>{const Qe=je.data();ve.push({id:je.id,name:Qe.name??"",date:Qe.date??"",totalPackages:Number(Qe.totalPackages??0),subtotal:Number(Qe.subtotal??0),totalRivas:Number(Qe.totalRivas??0),totalSanJorge:Number(Qe.totalSanJorge??0),totalIsla:Number(Qe.totalIsla??0),marginRivas:Number(Qe.marginRivas??20),marginSanJorge:Number(Qe.marginSanJorge??15),marginIsla:Number(Qe.marginIsla??30),createdAt:Qe.createdAt??rr.now()})}),A(ve);const he=await Dt(At(ke,"inventory_candies")),oe={};he.forEach(je=>{const Qe=je.data(),tt=Qe.orderId;if(!tt)return;const rt=qLe(Qe),Te=FH(Qe);oe[tt]||(oe[tt]={orderId:tt,totalPackages:0,remainingPackages:0}),oe[tt].totalPackages+=rt,oe[tt].remainingPackages+=Te}),f(oe)}catch(fe){console.error(fe),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const Ct=async fe=>{if(fe.preventDefault(),n(""),!P.length){n("Agrega al menos un producto al pedido general.");return}try{const Ke=new Date().toISOString().slice(0,10),ve=w||Ke,he=xe,oe=Number(T||0),je=Number(E||0),Qe=Number(O||0);for(const rt of P){if(!rt.name.trim()){n("Hay un producto sin nombre en el pedido.");return}if(rt.providerPrice<0){n(`El precio proveedor no puede ser negativo (producto: ${rt.name}).`);return}if(rt.packages<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${rt.name}).`);return}if(rt.unitsPerPackage<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${rt.name}).`);return}}const tt={name:y||`Pedido ${ve}`,date:ve,totalPackages:he.totalPackages,subtotal:he.subtotal,totalRivas:he.totalRivas,totalSanJorge:he.totalSanJorge,totalIsla:he.totalIsla,marginRivas:oe,marginSanJorge:je,marginIsla:Qe,items:P};if(g){await rn(Gt(ke,"candy_main_orders",g),{...tt});for(const Ee of P){const V=await Dt(Yt(At(ke,"inventory_candies"),lr("orderId","==",g),lr("productId","==",Ee.id))),Ae=Hn(Ee.packages)*Hn(Ee.unitsPerPackage),Ne=Math.max(1,Hn(Ee.unitsPerPackage||1));if(V.empty)await En(At(ke,"inventory_candies"),{productId:Ee.id,productName:Ee.name,category:Ee.category,measurement:"unidad",quantity:Ae,remaining:Ae,packages:Hn(Ee.packages),remainingPackages:Hn(Ee.packages),unitsPerPackage:Ne,totalUnits:Ae,providerPrice:Ee.providerPrice,subtotal:Ee.subtotal,totalRivas:Ee.totalRivas,totalSanJorge:Ee.totalSanJorge,totalIsla:Ee.totalIsla,gainRivas:Ee.gainRivas,gainSanJorge:Ee.gainSanJorge,gainIsla:Ee.gainIsla,unitPriceRivas:Ee.unitPriceRivas,unitPriceSanJorge:Ee.unitPriceSanJorge,unitPriceIsla:Ee.unitPriceIsla,date:ve,createdAt:rr.now(),status:"PENDIENTE",orderId:g});else for(const Re of V.docs){const ze=Re.data(),Ye=Hn(ze.totalUnits??0),Ze=Hn(ze.remaining??Ye),dt=Ae-Ye,ge=Math.max(0,Ze+dt),Xe=Math.max(0,Math.floor(ge/Ne));await rn(Gt(ke,"inventory_candies",Re.id),{productName:Ee.name,category:Ee.category,unitsPerPackage:Ne,totalUnits:Ae,quantity:Ae,remaining:ge,packages:Hn(Ee.packages),remainingPackages:Xe,providerPrice:Ee.providerPrice,subtotal:Ee.subtotal,totalRivas:Ee.totalRivas,totalSanJorge:Ee.totalSanJorge,totalIsla:Ee.totalIsla,gainRivas:Ee.gainRivas,gainSanJorge:Ee.gainSanJorge,gainIsla:Ee.gainIsla,unitPriceRivas:Ee.unitPriceRivas,unitPriceSanJorge:Ee.unitPriceSanJorge,unitPriceIsla:Ee.unitPriceIsla,date:ve})}}const rt=await Dt(Yt(At(ke,"inventory_candies"),lr("orderId","==",g))),Te=new Set(P.map(Ee=>Ee.id));for(const Ee of rt.docs){const V=Ee.data(),Ae=String(V.productId||"");Ae&&!Te.has(Ae)&&await Qn(Gt(ke,"inventory_candies",Ee.id))}A(Ee=>Ee.map(V=>V.id===g?{...V,name:tt.name,date:tt.date,totalPackages:tt.totalPackages,subtotal:tt.subtotal,totalRivas:tt.totalRivas,totalSanJorge:tt.totalSanJorge,totalIsla:tt.totalIsla,marginRivas:tt.marginRivas,marginSanJorge:tt.marginSanJorge,marginIsla:tt.marginIsla}:V)),n(" Orden maestra actualizada (pedido + inventario).")}else{const Te=(await En(At(ke,"candy_main_orders"),{...tt,createdAt:rr.now()})).id,Ee=K0(ke);for(const V of P){const Ae=Math.max(1,Hn(V.unitsPerPackage||1)),Ne=Hn(V.packages)*Ae,Re=Gt(At(ke,"inventory_candies"));Ee.set(Re,{productId:V.id,productName:V.name,category:V.category,measurement:"unidad",quantity:Ne,remaining:Ne,packages:Hn(V.packages),remainingPackages:Hn(V.packages),unitsPerPackage:Ae,totalUnits:Ne,providerPrice:V.providerPrice,subtotal:V.subtotal,totalRivas:V.totalRivas,totalSanJorge:V.totalSanJorge,totalIsla:V.totalIsla,gainRivas:V.gainRivas,gainSanJorge:V.gainSanJorge,gainIsla:V.gainIsla,unitPriceRivas:V.unitPriceRivas,unitPriceSanJorge:V.unitPriceSanJorge,unitPriceIsla:V.unitPriceIsla,date:ve,createdAt:rr.now(),status:"PENDIENTE",orderId:Te})}await Ee.commit(),n(" Orden maestra creada y registrada en inventario.")}R(),p(!1),e()}catch(Ke){console.error(Ke),n(" Error al guardar orden maestra.")}},Ot=async fe=>{try{s(!0),n(""),x(fe.id),b(fe.name),I(fe.date),C(String(fe.marginRivas??20)),S(String(fe.marginSanJorge??15)),B(String(fe.marginIsla??30)),M("DATOS");const Ke=Gt(ke,"candy_main_orders",fe.id),ve=await fo(Ke);if(!ve.exists()){n(" No se encontr la orden.");return}const he=ve.data(),oe=Array.isArray(he.items)?he.items:[],je=await Dt(Yt(At(ke,"inventory_candies"),lr("orderId","==",fe.id))),Qe={};je.forEach(rt=>{const Te=rt.data(),Ee=String(Te.productId||"");if(!Ee)return;const V=FH(Te);Qe[Ee]=(Qe[Ee]||0)+V});const tt=oe.map(rt=>{const Te=i.find(Ne=>Ne.id===rt.id),Ee=Number((Te==null?void 0:Te.providerPrice)??rt.providerPrice??0),V=Math.max(1,Hn((Te==null?void 0:Te.unitsPerPackage)??rt.unitsPerPackage??1)),Ae=z(Ee,Hn(rt.packages||0),{marginR:Number(rt.marginRivas||0),marginSJ:Number(rt.marginSanJorge||0),marginIsla:Number(rt.marginIsla||0)});return{...rt,name:String((Te==null?void 0:Te.name)??rt.name??""),category:String((Te==null?void 0:Te.category)??rt.category??"Caramelo"),providerPrice:Ee,unitsPerPackage:V,remainingPackages:Qe[rt.id]??rt.remainingPackages??rt.packages??0,...Ae}});D(tt),p(!0)}catch(Ke){console.error(Ke),n(" Error al abrir orden maestra.")}finally{s(!1)}},Pt=async fe=>{if(confirm(`Eliminar la orden "${fe.name}" y todo su inventario asociado?`)){n("");try{const ve=await Dt(Yt(At(ke,"inventory_candies"),lr("orderId","==",fe.id)));for(const he of ve.docs)await Qn(Gt(ke,"inventory_candies",he.id));await Qn(Gt(ke,"candy_main_orders",fe.id)),A(he=>he.filter(oe=>oe.id!==fe.id)),n(" Orden maestra eliminada."),e()}catch(ve){console.error(ve),n(" Error al eliminar orden maestra.")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[o.jsx("div",{className:"w-full",children:o.jsx(Xc,{onClick:e,loading:a||c})}),o.jsxs("button",{className:"items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded-2xl hover:bg-indigo-700",onClick:()=>{R(),p(!0)},children:[o.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full ",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold",children:g?"Editar Orden Maestra":"Nueva Orden Maestra"}),o.jsx("div",{className:"ml-auto flex gap-2",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{R(),p(!1)},children:"Cerrar"})})]}),o.jsx("div",{className:"md:hidden mt-3",children:o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>M("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),o.jsx("button",{type:"button",onClick:()=>M("AGREGAR"),disabled:!!g,className:`px-2 py-2 rounded text-xs font-semibold border ${g?"bg-gray-100 text-gray-400 border-gray-200":H==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,title:g?"En edicin no se agregan productos":"",children:"Agregar"}),o.jsxs("button",{type:"button",onClick:()=>M("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",P.length,")"]}),o.jsx("button",{type:"button",onClick:()=>M("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${H==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),o.jsxs("form",{onSubmit:Ct,className:"space-y-4 pt-4",children:[o.jsx("div",{className:`${H==="DATOS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),o.jsx("input",{className:"w-full border p-2 rounded",value:y,onChange:fe=>b(fe.target.value),placeholder:"Ej: Pedido diciembre 01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:w,onChange:fe=>I(fe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:T,onChange:fe=>C(fe.target.value),disabled:!!g})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia San Jorge"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:E,onChange:fe=>S(fe.target.value),disabled:!!g})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:O,onChange:fe=>B(fe.target.value),disabled:!!g})]})]})}),!g&&o.jsx("div",{className:`${H==="AGREGAR"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),o.jsx("select",{className:"w-full border p-2 rounded",value:X,onChange:fe=>{de(fe.target.value),ie("")},disabled:c,children:L.length===0?o.jsx("option",{value:"",children:c?"Cargando...":"No hay categoras en catlogo"}):L.map(fe=>o.jsx("option",{value:fe,children:fe},fe))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:re,onChange:fe=>ie(fe.target.value),children:[o.jsx("option",{value:"",children:c?"Cargando catlogo...":"Selecciona producto"}),ee.map(fe=>o.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:ce,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:k,onChange:fe=>F(fe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:te,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]})}),o.jsxs("div",{className:`${H==="ITEMS"?"block":"hidden"} md:block`,children:[o.jsx("div",{className:"md:hidden space-y-3",children:P.length===0?o.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):P.map(fe=>o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-base leading-tight",children:fe.name}),o.jsx("div",{className:"text-xs text-gray-500",children:fe.category})]}),!g&&o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(fe.id),children:"Quitar"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:fe.packages,onChange:Ke=>Y(fe.id,"packages",Ke.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:fe.remainingPackages??fe.packages,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:fe.unitsPerPackage,onChange:Ke=>Y(fe.id,"unitsPerPackage",Ke.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"P. proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(fe.providerPrice||0).toFixed(2),readOnly:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:fe.marginRivas??0,onChange:Ke=>Y(fe.id,"marginRivas",Ke.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% SJ"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:fe.marginSanJorge??0,onChange:Ke=>Y(fe.id,"marginSanJorge",Ke.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"% Isla"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:fe.marginIsla??0,onChange:Ke=>Y(fe.id,"marginIsla",Ke.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:Number(fe.subtotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(fe.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total SJ"}),o.jsx("div",{className:"font-semibold",children:Number(fe.totalSanJorge||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Number(fe.totalIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad Rivas"}),o.jsx("div",{className:"font-semibold",children:fe.unitPriceRivas})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad SJ"}),o.jsx("div",{className:"font-semibold",children:fe.unitPriceSanJorge})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"P. unidad Isla"}),o.jsx("div",{className:"font-semibold",children:fe.unitPriceIsla})]})]})]},fe.id))}),!g&&o.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2 mb-2",children:[o.jsx("input",{ref:le,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:yt}),o.jsx("button",{type:"button",onClick:W,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla con todos los productos",children:"Descargar plantilla"}),o.jsx("button",{type:"button",onClick:Et,disabled:Pe,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa Producto / Paquetes / Mrgenes desde Excel",children:Pe?"Importando...":"Importar Excel"})]}),o.jsx("div",{className:"hidden md:block bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),!g&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:P.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:g?16:17,className:"p-4 text-center text-gray-500",children:"No hay productos en esta orden."})}):P.map(fe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:fe.name}),o.jsx("td",{className:"p-2 border",children:fe.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-24 border p-1 rounded text-right",value:fe.packages,onChange:Ke=>Y(fe.id,"packages",Ke.target.value)})}),o.jsx("td",{className:"p-2 border",children:fe.remainingPackages??fe.packages}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:fe.unitsPerPackage,onChange:Ke=>Y(fe.id,"unitsPerPackage",Ke.target.value)})}),o.jsx("td",{className:"p-2 border",children:Number(fe.providerPrice||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:fe.marginRivas??0,onChange:Ke=>Y(fe.id,"marginRivas",Ke.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:fe.marginSanJorge??0,onChange:Ke=>Y(fe.id,"marginSanJorge",Ke.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:fe.marginIsla??0,onChange:Ke=>Y(fe.id,"marginIsla",Ke.target.value)})}),o.jsx("td",{className:"p-2 border",children:Number(fe.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(fe.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(fe.totalSanJorge||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(fe.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:fe.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:fe.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:fe.unitPriceIsla}),!g&&o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(fe.id),children:"Quitar"})})]},fe.id))})]})})]}),o.jsx("div",{className:`${H==="TOTALES"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales de la orden"}),o.jsx("div",{className:"text-lg font-semibold",children:xe.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),o.jsx("div",{className:"text-lg font-semibold",children:xe.subtotal.toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas (orden)"}),o.jsx("div",{className:"text-lg font-semibold",children:xe.totalRivas.toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total San Jorge / Isla"}),o.jsxs("div",{className:"text-sm font-semibold",children:["SJ: ",xe.totalSanJorge.toFixed(2),o.jsx("br",{}),"Isla: ",xe.totalIsla.toFixed(2)]})]})]})}),o.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:R,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),o.jsx("button",{type:"button",onClick:()=>{R(),p(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:P.length===0,children:"Guardar orden"})]}),o.jsx("div",{className:"md:hidden mt-2",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{M(H==="DATOS"&&!g?"AGREGAR":H==="DATOS"||H==="AGREGAR"?"ITEMS":H==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"md:hidden space-y-3",children:a?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):d.length===0?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):d.map(fe=>{var oe;const Ke=h[fe.id],ve=fe.date||((oe=fe.createdAt)!=null&&oe.toDate?fe.createdAt.toDate().toISOString().slice(0,10):""),he=fe.totalPackages>0?(fe.subtotal/fe.totalPackages).toFixed(2):"0.00";return o.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:ve}),o.jsx("div",{className:"font-semibold text-base leading-tight",children:fe.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>Ot(fe),children:"Ver"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Pt(fe),children:"Borrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:fe.totalPackages})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Ke?Ke.remainingPackages:0})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),o.jsx("div",{className:"font-semibold",children:he})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:fe.subtotal.toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:fe.totalRivas.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total SJ"}),o.jsx("div",{className:"font-semibold",children:fe.totalSanJorge.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:fe.totalIsla.toFixed(2)})]})]})]},fe.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin ordenes maestras."})}):d.map(fe=>{var ve;const Ke=h[fe.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:fe.date||((ve=fe.createdAt)!=null&&ve.toDate?fe.createdAt.toDate().toISOString().slice(0,10):"")}),o.jsx("td",{className:"p-2 border",children:fe.name}),o.jsx("td",{className:"p-2 border",children:fe.totalPackages}),o.jsx("td",{className:"p-2 border",children:Ke?Ke.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:fe.totalPackages>0?(fe.subtotal/fe.totalPackages).toFixed(2):"0.00"}),o.jsx("td",{className:"p-2 border",children:fe.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:fe.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:fe.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:fe.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>Ot(fe),children:"Ver / Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Pt(fe),children:"Borrar"})]})})]},fe.id)})})]})})]}),r&&o.jsx("p",{className:"mt-2 text-sm",children:r})]})}const Eh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function rT(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+l/100),A=a*(1+c/100),h=u-a,f=d-a,m=A-a,p=u/s,g=d/s,x=A/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(A.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(f.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function OH(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Jl(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function nT(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function WLe(){var M,L,z;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(wr(Pd(new Date),"yyyy-MM-dd")),[d,A]=v.useState(wr(Td(new Date),"yyyy-MM-dd")),[h,f]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,I]=v.useState(0),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(""),[P,D]=v.useState(""),[X,de]=v.useState(0),[re,ie]=v.useState(0),[ce,J]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const R=Yt(At(ke,"candy_main_orders"),ln("createdAt","desc")),G=await Dt(R),ee=[];G.forEach(xe=>{const Y=xe.data();ee.push({id:xe.id,name:Y.name??"",date:Y.date??"",totalPackages:Number(Y.totalPackages??0),subtotal:Number(Y.subtotal??0),totalRivas:Number(Y.totalRivas??0),totalSanJorge:Number(Y.totalSanJorge??0),totalIsla:Number(Y.totalIsla??0),marginRivas:Number(Y.marginRivas??0),marginSanJorge:Number(Y.marginSanJorge??0),marginIsla:Number(Y.marginIsla??0),createdAt:Y.createdAt??rr.now()})}),e(ee);const te=await Dt(Yt(At(ke,"inventory_candies"))),Q={};te.forEach(xe=>{const Y=xe.data(),W=Y.orderId;if(!W)return;const le=Number(Y.unitsPerPackage||1)||1,Pe=Number(Y.totalUnits??(Y.packages||0)*le),Le=Math.round(Pe/le),qe=Number(Y.remaining??Y.totalUnits??Pe),nt=Number(Y.remainingPackages??NaN),st=Number.isFinite(nt)?Math.round(nt):Math.round(qe/le);Q[W]||(Q[W]={orderId:W,totalPackages:0,remainingPackages:0}),Q[W].totalPackages+=Le,Q[W].remainingPackages+=st}),n(Q)}catch(R){console.error(R),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const pe=v.useMemo(()=>t.filter(R=>{var ee;const G=R.date||((ee=R.createdAt)!=null&&ee.toDate?R.createdAt.toDate().toISOString().slice(0,10):"");return!(!G||c&&G<c||d&&G>d)}),[t,c,d]),Se=v.useMemo(()=>{let R=0,G=0,ee=0,te=0,Q=0,xe=0;for(const Y of pe){R+=Y.totalPackages,G+=Y.subtotal,ee+=Y.totalRivas,te+=Y.totalSanJorge,Q+=Y.totalIsla;const W=r[Y.id];W&&(xe+=W.remainingPackages)}return{totalPaquetes:R,totalSubtotal:G,totalRivas:ee,totalSJ:te,totalIsla:Q,totalPaquetesRestantes:xe,totalPedidos:pe.length}},[pe,r]),k=async(R,G,ee)=>{if(!g)return;const te=Number(ee||0),Q=y.map(W=>W.id!==R?W:rT({...W,[G]:te}));b(Q);const xe=Q.find(W=>W.id===R);if(!xe)return;const Y=OH(Q);try{await rn(Gt(ke,"products_candies",R),{marginRivas:xe.marginRivas,marginSanJorge:xe.marginSanJorge,marginIsla:xe.marginIsla,subtotal:xe.subtotal,totalRivas:xe.totalRivas,totalSanJorge:xe.totalSanJorge,totalIsla:xe.totalIsla,unitPriceRivas:xe.unitPriceRivas,unitPriceSanJorge:xe.unitPriceSanJorge,unitPriceIsla:xe.unitPriceIsla,gainRivas:xe.gainRivas,gainSanJorge:xe.gainSanJorge,gainIsla:xe.gainIsla}),await rn(Gt(ke,"candy_main_orders",g.id),{totalPackages:Y.totalPackages,subtotal:Number(Y.subtotal.toFixed(2)),totalRivas:Number(Y.totalRivas.toFixed(2)),totalSanJorge:Number(Y.totalSanJorge.toFixed(2)),totalIsla:Number(Y.totalIsla.toFixed(2))}),x(W=>W&&{...W,totalPackages:Y.totalPackages,subtotal:Number(Y.subtotal.toFixed(2)),totalRivas:Number(Y.totalRivas.toFixed(2)),totalSanJorge:Number(Y.totalSanJorge.toFixed(2)),totalIsla:Number(Y.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(W){console.error(W),l(" Error actualizando mrgenes del producto.")}},F=async()=>{if(g)try{l("");const R=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,G=Number.isFinite(T)&&T!==0?T:g.marginSanJorge||0,ee=Number.isFinite(E)&&E!==0?E:g.marginIsla||0,te=rT({id:"tmp",name:O.trim(),category:P.trim(),providerPrice:Number(X||0),packages:Number(re||0),unitsPerPackage:Number(ce||1),marginRivas:Number(R||0),marginSanJorge:Number(G||0),marginIsla:Number(ee||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(re||0)}),Q=await En(At(ke,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:te.name,category:te.category,providerPrice:te.providerPrice,packages:te.packages,unitsPerPackage:te.unitsPerPackage,marginRivas:te.marginRivas,marginSanJorge:te.marginSanJorge,marginIsla:te.marginIsla,gainRivas:te.gainRivas,gainSanJorge:te.gainSanJorge,gainIsla:te.gainIsla,subtotal:te.subtotal,totalRivas:te.totalRivas,totalSanJorge:te.totalSanJorge,totalIsla:te.totalIsla,unitPriceRivas:te.unitPriceRivas,unitPriceSanJorge:te.unitPriceSanJorge,unitPriceIsla:te.unitPriceIsla,createdAt:rr.now()}),Y=[{...te,id:Q.id},...y];b(Y);const W=OH(Y);await rn(Gt(ke,"candy_main_orders",g.id),{totalPackages:W.totalPackages,subtotal:Number(W.subtotal.toFixed(2)),totalRivas:Number(W.totalRivas.toFixed(2)),totalSanJorge:Number(W.totalSanJorge.toFixed(2)),totalIsla:Number(W.totalIsla.toFixed(2))}),x(le=>le&&{...le,totalPackages:W.totalPackages,subtotal:Number(W.subtotal.toFixed(2)),totalRivas:Number(W.totalRivas.toFixed(2)),totalSanJorge:Number(W.totalSanJorge.toFixed(2)),totalIsla:Number(W.totalIsla.toFixed(2))}),I(0),C(0),S(0),B(""),D(""),de(0),ie(0),J(1),l(" Producto agregado con mrgenes por sucursal.")}catch(R){console.error(R),l(" Error agregando producto al pedido.")}},H=async R=>{try{x(R),b([]),f(!0),p(!0),l("");const G=await Dt(Yt(At(ke,"inventory_candies"),lr("orderId","==",R.id))),ee={};G.forEach(xe=>{const Y=xe.data(),W=Y.productId;if(!W)return;const le=Number(Y.unitsPerPackage||1)||1,Pe=Number(Y.remaining??Y.totalUnits??0),Le=Number(Y.remainingPackages??NaN),qe=Number.isFinite(Le)?Math.round(Le):Math.round(Pe/le);ee[W]=(ee[W]||0)+qe});const te=await Dt(Yt(At(ke,"products_candies"),lr("orderId","==",R.id))),Q=[];te.forEach(xe=>{const Y=xe.data(),W=Jl(Y.providerPrice,0),le=Jl(Y.packages,0),Pe=Y.subtotal??W*le,Le=nT({margin:Y.marginRivas,gain:Y.gainRivas,subtotal:Pe,orderMargin:R.marginRivas||0}),qe=nT({margin:Y.marginSanJorge,gain:Y.gainSanJorge,subtotal:Pe,orderMargin:R.marginSanJorge||0}),nt=nT({margin:Y.marginIsla,gain:Y.gainIsla,subtotal:Pe,orderMargin:R.marginIsla||0}),st=rT({id:xe.id,name:Y.name??"",category:Y.category??"",providerPrice:W,packages:le,unitsPerPackage:Jl(Y.unitsPerPackage,1),marginRivas:Number(Le||0),marginSanJorge:Number(qe||0),marginIsla:Number(nt||0),subtotal:Jl(Y.subtotal,0),totalRivas:Jl(Y.totalRivas,0),totalSanJorge:Jl(Y.totalSanJorge,0),totalIsla:Jl(Y.totalIsla,0),gainRivas:Jl(Y.gainRivas,0),gainSanJorge:Jl(Y.gainSanJorge,0),gainIsla:Jl(Y.gainIsla,0),unitPriceRivas:Jl(Y.unitPriceRivas,0),unitPriceSanJorge:Jl(Y.unitPriceSanJorge,0),unitPriceIsla:Jl(Y.unitPriceIsla,0),remainingPackages:ee[xe.id]??Jl(Y.packages,0)});Q.push(st)}),b(Q)}catch(G){console.error(G),l(" Error cargando productos del pedido.")}finally{p(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>A(R.target.value)})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A("")},children:"Quitar filtro"}),o.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",o.jsx("span",{className:"font-semibold",children:Se.totalPedidos})]})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Se.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Se.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",Eh(Se.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",Eh(Se.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",Eh(Se.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",Eh(Se.totalIsla)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):pe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):pe.map(R=>{var Y;const G=R.totalPackages>0?Math.round(R.totalRivas/R.totalPackages):0,ee=R.totalPackages>0?Math.round(R.totalSanJorge/R.totalPackages):0,te=R.totalPackages>0?Math.round(R.totalIsla/R.totalPackages):0,Q=R.date||((Y=R.createdAt)!=null&&Y.toDate?R.createdAt.toDate().toISOString().slice(0,10):""),xe=r[R.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Q}),o.jsx("td",{className:"p-2 border",children:R.name}),o.jsx("td",{className:"p-2 border",children:R.totalPackages}),o.jsx("td",{className:"p-2 border",children:xe?xe.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:G}),o.jsx("td",{className:"p-2 border",children:ee}),o.jsx("td",{className:"p-2 border",children:te}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(R),children:"Ver pedido"})})]},R.id)})})]})}),h&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{f(!1),x(null),b([]),l("")},children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),o.jsx("div",{className:"font-semibold",children:g.date||((M=g.createdAt)!=null&&M.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"font-semibold",children:((L=r[g.id])==null?void 0:L.totalPackages)??g.totalPackages})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),o.jsx("div",{className:"font-semibold",children:((z=r[g.id])==null?void 0:z.remainingPackages)??0})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),o.jsx("div",{className:"font-semibold",children:Eh(g.subtotal)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Eh(g.totalRivas)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),o.jsx("div",{className:"font-semibold",children:Eh(g.totalSanJorge)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Eh(g.totalIsla)})]})]}),o.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:R=>I(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:T,onChange:R=>C(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:E,onChange:R=>S(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Producto"}),o.jsx("input",{className:"border rounded px-2 py-1 w-56",value:O,onChange:R=>B(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Categora"}),o.jsx("input",{className:"border rounded px-2 py-1 w-40",value:P,onChange:R=>D(R.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:X,onChange:R=>de(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:re,onChange:R=>ie(Number(R.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ce,onChange:R=>J(Number(R.target.value||1))})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:F,children:"Agregar producto"})]})]}),o.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(R=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:R.name}),o.jsx("td",{className:"p-2 border",children:R.category}),o.jsx("td",{className:"p-2 border",children:R.packages}),o.jsx("td",{className:"p-2 border",children:R.remainingPackages??R.packages}),o.jsx("td",{className:"p-2 border",children:R.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:R.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginRivas??0,onChange:G=>k(R.id,"marginRivas",G.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginSanJorge??0,onChange:G=>k(R.id,"marginSanJorge",G.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:R.marginIsla??0,onChange:G=>k(R.id,"marginIsla",G.target.value)})}),o.jsx("td",{className:"p-2 border",children:R.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:R.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:R.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:R.unitPriceIsla})]},R.id))})]})}),i&&o.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const Pa=t=>Math.round((Number(t)||0)*100)/100,Dg=t=>Math.round((Number(t)||0)*1e3)/1e3,bo=t=>Number(t??0).toFixed(2),Am=t=>Number(t??0).toFixed(3),XLe=(t,e)=>{var f;const r=t.date??((f=t.timestamp)!=null&&f.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Pa(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Pa(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),A=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=Pa(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:A,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function YLe({role:t,currentUserEmail:e,sellerCandyId:r}){const[n,a]=v.useState([]),[s,i]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[A,h]=v.useState("ALL"),f=wr(new Date,"yyyy-MM-dd"),[m,p]=v.useState(f),[g,x]=v.useState(f),[y,b]=v.useState("ALL"),[w,I]=v.useState(null),[T,C]=v.useState(0),[E,S]=v.useState(0),[O,B]=v.useState(""),[P,D]=v.useState(0),[X,de]=v.useState("0"),re=v.useRef(null),ie=!t||t==="admin",ce=t==="vendedor_dulces",J=(e||"").trim().toLowerCase(),[pe,Se]=v.useState([]);v.useEffect(()=>{if(!m||!g)return;c(!0);const ve=Yt(At(ke,"sales_candies"),lr("date",">=",m),lr("date","<=",g),ln("date","asc")),he=I0(ve,oe=>{const je=[];oe.forEach(Qe=>{const tt=XLe(Qe.data(),Qe.id);je.push(...tt)}),a(je),c(!1)},oe=>{console.error("Error cargando ventas por periodo:",oe),a([]),c(!1)});return()=>he()},[m,g]),v.useEffect(()=>{(async()=>{const he=Yt(At(ke,"daily_closures_candies"),lr("date","==",f)),oe=await Dt(he);if(oe.empty)i(null);else{const je=oe.docs[0];i({id:je.id,...je.data()})}})()},[f]),v.useEffect(()=>{(async()=>{try{const he=await Dt(At(ke,"sellers_candies")),oe=[];he.forEach(je=>{const Qe=je.data();oe.push({id:je.id,name:Qe.name||"",commissionPercent:Number(Qe.commissionPercent||0)})}),Se(oe)}catch(he){console.error("Error cargando sellers_candies",he)}})()},[]);const k=ve=>Pa(Number(ve.vendorCommissionAmount??0)||0),F=ao.useMemo(()=>{let ve=[...n];return A==="FLOTANTE"&&(ve=ve.filter(he=>he.status==="FLOTANTE")),A==="PROCESADA"&&(ve=ve.filter(he=>he.status==="PROCESADA")),ie&&y!=="ALL"&&(ve=ve.filter(he=>(he.vendorId||"")===y)),ce&&(r?ve=ve.filter(he=>(he.vendorId||"")===r):J?ve=ve.filter(he=>(he.sellerEmail||"").toLowerCase()===J):ve=[]),ve},[A,n,ie,y,ce,r,J]),H=ao.useMemo(()=>F.filter(ve=>ve.status==="FLOTANTE").length,[F]),M=ao.useMemo(()=>F.filter(ve=>ve.status==="PROCESADA").length,[F]),L=ao.useMemo(()=>F.filter(ve=>ve.type==="CREDITO").length,[F]),z=ao.useMemo(()=>F.filter(ve=>ve.type!=="CREDITO").length,[F]),R=Dg(F.reduce((ve,he)=>ve+(he.quantity||0),0)),G=Pa(F.reduce((ve,he)=>ve+Number(he.cogsAmount??0),0)),ee=Pa(F.reduce((ve,he)=>ve+(he.amount||0),0)),te=Pa(ee-G);let Q=0,xe=0,Y=0,W=0,le=0,Pe=0,Le=0;F.forEach(ve=>{const he=Number(ve.amount||0),oe=Number(ve.amountReceived||0),je=k(ve);le+=je,ve.type==="CREDITO"?(Q+=ve.quantity||0,Y+=he-oe,Le+=je):(xe+=ve.quantity||0,W+=he,Pe+=je)}),Y=Pa(Y),W=Pa(W),le=Pa(le),Pe=Pa(Pe),Le=Pa(Le);const qe=ao.useMemo(()=>{const ve={};for(const he of F){const oe=(he.vendorId||"").trim();if(!oe||he.type==="CREDITO")continue;const je=k(he);if(!ve[oe]){const Qe=pe.find(tt=>tt.id===oe);ve[oe]={vendorId:oe,name:(Qe==null?void 0:Qe.name)||he.userEmail||"(sin vendedor)",total:0}}ve[oe].total=Pa(ve[oe].total+je)}return Object.values(ve).filter(he=>he.total>0).sort((he,oe)=>oe.total-he.total)},[F,pe]),nt=ao.useMemo(()=>{const ve={};for(const he of F){const oe=(he.vendorId||"").trim();if(!oe||he.type!=="CREDITO")continue;const je=k(he);if(!ve[oe]){const Qe=pe.find(tt=>tt.id===oe);ve[oe]={vendorId:oe,name:(Qe==null?void 0:Qe.name)||he.userEmail||"(sin vendedor)",total:0}}ve[oe].total=Pa(ve[oe].total+je)}return Object.values(ve).filter(he=>he.total>0).sort((he,oe)=>oe.total-he.total)},[F,pe]),st={};F.forEach(ve=>{const he=ve.productName||"(sin nombre)";st[he]||(st[he]={totalQuantity:0,totalAmount:0,totalCommission:0}),st[he].totalQuantity=Dg(st[he].totalQuantity+(ve.quantity||0)),st[he].totalAmount=Pa(st[he].totalAmount+(ve.amount||0)),st[he].totalCommission=Pa(st[he].totalCommission+k(ve))});const Et=Object.entries(st).map(([ve,he])=>({productName:ve,totalQuantity:he.totalQuantity,totalAmount:he.totalAmount,totalCommission:he.totalCommission})),yt=async()=>{if(ie)try{const ve=F.filter(Ee=>Ee.status==="FLOTANTE");if(ve.length===0){d("No hay ventas flotantes para procesar en este perodo.");return}const he={totalCharged:Pa(ve.reduce((Ee,V)=>Ee+(V.amount||0),0)),totalSuggested:Pa(ve.reduce((Ee,V)=>Ee+(V.amountSuggested||0),0)),totalUnits:Dg(ve.reduce((Ee,V)=>Ee+(V.quantity||0),0)),totalCOGS:Pa(ve.reduce((Ee,V)=>Ee+Number(V.cogsAmount??0),0))},oe=Pa(he.totalCharged-he.totalSuggested),je=Pa(he.totalCharged-he.totalCOGS),Qe=ve.reduce((Ee,V)=>{const Ae=Number(V.quantity||0),Ne=Number(V.amount||0),Re=Number(V.vendorCommissionAmount||0);return V.type==="CREDITO"?(Ee.packsCredit+=Ae,Ee.amountCredit+=Ne,Ee.comCredit+=Re):(Ee.packsCash+=Ae,Ee.amountCash+=Ne,Ee.comCash+=Re),Ee},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),tt={totalPacksCash:Dg(Qe.packsCash),totalPacksCredit:Dg(Qe.packsCredit),totalAmountCash:Pa(Qe.amountCash),totalAmountCredit:Pa(Qe.amountCredit),totalCommissionCash:Pa(Qe.comCash),totalCommissionCredit:Pa(Qe.comCredit)},rt=await En(At(ke,"daily_closures_candies"),{date:f,createdAt:rr.now(),periodStart:m,periodEnd:g,totalCharged:he.totalCharged,totalSuggested:he.totalSuggested,totalDifference:oe,totalUnits:he.totalUnits,totalCOGS:he.totalCOGS,grossProfit:je,...tt,products:ve.map(Ee=>({productName:Ee.productName,quantity:Ee.quantity,amount:Ee.amount})),sales:ve.map(Ee=>({id:Ee.id,productName:Ee.productName,quantity:Ee.quantity,amount:Ee.amount,amountSuggested:Ee.amountSuggested,userEmail:Ee.userEmail,clientName:Ee.clientName,amountReceived:Ee.amountReceived,change:Ee.change,status:Ee.status,cogsAmount:Ee.cogsAmount??0,avgUnitCost:Ee.avgUnitCost??null,allocations:Ee.allocations??[],date:Ee.date,type:Ee.type??"CONTADO",vendorId:Ee.vendorId??"",vendorCommissionAmount:Number(Ee.vendorCommissionAmount??0)||0,processedDate:f})),productSummary:Object.entries(ve.reduce((Ee,V)=>{const Ae=V.productName||"(sin nombre)";return Ee[Ae]||(Ee[Ae]={totalQuantity:0,totalAmount:0}),Ee[Ae].totalQuantity=Dg(Ee[Ae].totalQuantity+(V.quantity||0)),Ee[Ae].totalAmount=Pa(Ee[Ae].totalAmount+(V.amount||0)),Ee},{})).map(([Ee,V])=>({productName:Ee,totalQuantity:V.totalQuantity,totalAmount:V.totalAmount}))}),Te=K0(ke);ve.forEach(Ee=>{Te.update(Gt(ke,"sales_candies",Ee.id.split("#")[0]),{status:"PROCESADA",closureId:rt.id,closureDate:f,processedDate:f,processedAt:rr.now()})}),await Te.commit(),d(` Cierre guardado. Ventas procesadas: ${ve.length}. (Proceso: ${f})`)}catch(ve){console.error(ve),d(" Error al guardar el cierre de dulces.")}},Ct=async ve=>{if(ie&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await rn(Gt(ke,"sales_candies",ve.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),d(" Venta revertida a FLOTANTE.")}catch(he){console.error(he),d(" No se pudo revertir la venta.")}},Ot=ve=>{ie&&(I(ve),C(ve.quantity),S(ve.amount),B(ve.clientName),D(ve.amountReceived),de(ve.change))},Pt=async()=>{if(!(!w||!ie))try{await rn(Gt(ke,"sales_candies",w.id.split("#")[0]),{packagesTotal:T,amount:E,amountCharged:E,clientName:O,amountReceived:P,change:X}),I(null),d(" Venta de dulces actualizada.")}catch(ve){console.error(ve),d(" No se pudo actualizar la venta de dulces.")}},fe=async ve=>{if(ie&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:he}=await yLe(ve.split("#")[0]);d(` Venta eliminada. Stock restaurado (unidades internas): ${Number(he).toFixed(2)}.`)}catch(he){console.error(he),d(" No se pudo eliminar la venta de dulces.")}},Ke=async()=>{if(re.current){re.current.classList.add("force-pdf-colors"),re.current.classList.add("pdf-print-mode");try{const he=(await G0(re.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),oe=new Br;oe.addImage(he,"PNG",10,10,190,0),oe.save(`cierre_dulces_${m}_a_${g}_proc_${f}.pdf`)}finally{re.current.classList.remove("pdf-print-mode"),re.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",f]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Desde:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:ve=>p(ve.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Hasta:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:ve=>x(ve.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:ve=>h(ve.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ie&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Vendedor:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:ve=>b(ve.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),pe.map(ve=>o.jsx("option",{value:ve.id,children:ve.name||ve.id},ve.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),o.jsx("div",{className:"text-2xl font-bold",children:H}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),o.jsx("div",{className:"text-2xl font-bold",children:M}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:L}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsx("div",{className:"text-2xl font-bold",children:z}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",bo(Pe)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",bo(Le)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),qe.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:qe.map(ve=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ve.name}),o.jsxs("strong",{className:"ml-2",children:["C$",bo(ve.total)]})]},ve.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),nt.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:nt.map(ve=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ve.name}),o.jsxs("strong",{className:"ml-2",children:["C$",bo(ve.total)]})]},ve.vendorId))})]})]}),l?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:re,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Fecha proceso"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[F.map(ve=>{const he=k(ve),oe=(ve.processedDate||"").trim();return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ve.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status})}),o.jsx("td",{className:"border p-1",children:ve.productName}),o.jsx("td",{className:"border p-1",children:ve.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:Am(ve.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",bo(ve.amount)]}),o.jsx("td",{className:"border p-1",children:he>0?`C$${bo(he)}`:""}),o.jsx("td",{className:"border p-1",children:ve.date}),o.jsx("td",{className:"border p-1",children:oe||""}),o.jsx("td",{className:"border p-1",children:ve.userEmail}),o.jsx("td",{className:"border p-1",children:ve.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:ie?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Ot(ve),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>fe(ve.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):ve.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:ie?o.jsx("button",{onClick:()=>Ct(ve.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ve.id)}),F.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[F.map(ve=>{const he=k(ve),oe=(ve.processedDate||"").trim();return o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:ve.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[ve.type==="CREDITO"?"Crdito":"Cash","  ",ve.date]})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",bo(ve.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ve.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ve.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("strong",{children:Am(ve.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:he>0?`C$${bo(he)}`:""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),o.jsx("strong",{children:oe||""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:ve.userEmail})]}),o.jsx("div",{className:"pt-2",children:ve.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:ie?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Ot(ve),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>fe(ve.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):ve.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:ie?o.jsx("button",{onClick:()=>Ct(ve.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},ve.id)}),F.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{children:["Total paquetes crdito: ",o.jsx("strong",{children:Am(Q)})]}),o.jsxs("div",{children:["Total paquetes cash: ",o.jsx("strong",{children:Am(xe)})]}),o.jsxs("div",{children:["Total pendiente crdito:"," ",o.jsxs("strong",{children:["C$",bo(Y)]})]}),o.jsxs("div",{children:["Total cobrado cash: ",o.jsxs("strong",{children:["C$",bo(W)]})]}),o.jsxs("div",{children:["Total comisin: ",o.jsxs("strong",{children:["C$",bo(le)]})]})]}),(G>0||te!==ee)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Costo total (COGS): ",o.jsxs("strong",{children:["C$",bo(G)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",bo(te)]})]}),o.jsxs("div",{children:["Total paquetes (visibles):"," ",o.jsx("strong",{children:Am(R)})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero"}),o.jsx("th",{className:"border p-2",children:"Comisin"})]})}),o.jsxs("tbody",{children:[Et.map(ve=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:ve.productName}),o.jsx("td",{className:"border p-1",children:Am(ve.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",bo(ve.totalAmount)]}),o.jsx("td",{className:"border p-1",children:ve.totalCommission>0?`C$${bo(ve.totalCommission)}`:""})]},ve.productName)),Et.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[Et.map(ve=>o.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[o.jsx("div",{className:"font-semibold",children:ve.productName}),o.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),o.jsx("strong",{children:Am(ve.totalQuantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total dinero"}),o.jsxs("strong",{children:["C$",bo(ve.totalAmount)]})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:ve.totalCommission>0?`C$${bo(ve.totalCommission)}`:""})]})]})]},ve.productName)),Et.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[ie&&o.jsx("button",{onClick:yt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),o.jsx("button",{onClick:Ke,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&o.jsx("p",{className:"mt-2 text-sm",children:u}),w&&ie&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[w.productName,"  ",w.userEmail]}),o.jsx("label",{className:"text-sm",children:"Paquetes"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:T,onChange:ve=>C(parseFloat(ve.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:ve=>S(parseFloat(ve.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:O,onChange:ve=>B(ve.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:P,onChange:ve=>D(parseFloat(ve.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:X,onChange:ve=>de(ve.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:Pt,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const QA=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Ic=t=>Math.round((Number(t)||0)*100)/100;function JLe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function ZLe(t){return t.toISOString().slice(0,10)}function eUe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function tUe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return ZLe(r)}function rUe(){const[t,e]=v.useState(eUe()),[r,n]=v.useState(tUe()),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState({}),[d,A]=v.useState({}),[h,f]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,I]=v.useState(null),[T,C]=v.useState(null),E=v.useMemo(()=>w&&h.find(re=>re.vendorId===w)||null,[w,h]),S=v.useMemo(()=>{var re;return!w||!T?[]:((re=g[w])==null?void 0:re[T])||[]},[w,T,g]),O=v.useMemo(()=>Ic(h.reduce((re,ie)=>re+(ie.totalSoldMoney||0),0)),[h]),B=v.useMemo(()=>Ic(h.reduce((re,ie)=>re+(ie.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const re=await Dt(At(ke,"sellers_candies")),ie={};re.forEach(pe=>{const Se=pe.data(),k=Se.branch||"Rivas";let F="RIVAS";k==="San Jorge"?F="SAN_JORGE":k==="Isla Ometepe"&&(F="ISLA"),ie[pe.id]={id:pe.id,name:Se.name??"(sin nombre)",branch:F,branchLabel:k,commissionPercent:Number(Se.commissionPercent??0)}});const ce=await Dt(At(ke,"products_candies")),J={};ce.forEach(pe=>{const Se=pe.data();J[pe.id]={id:pe.id,name:Se.name??"(sin nombre)"}}),u(ie),A(J)}catch(re){console.error(re),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const P=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const re={},ie={},ce=Yt(At(ke,"inventory_candies_sellers"),lr("date",">=",t),lr("date","<=",r)),J=await Dt(ce),pe={},Se={},k={},F={};J.forEach(Pe=>{var Re,ze;const Le=Pe.data(),qe=Le.sellerId||"";if(!qe)return;const nt=Le.productId||"",st=Le.productName||((Re=d[nt])==null?void 0:Re.name)||"(sin nombre)",Et=Math.max(1,Math.floor(Number(Le.unitsPerPackage||1))),yt=Number(Le.totalUnits??0),Ct=Number(Le.packages??0),Ot=Number(Le.remainingUnits??Le.remaining??0),Pt=Number(Le.remainingPackages??0),fe=Ct>0?Ct:yt>0?Math.floor(yt/Et):0,Ke=Pt>0?Pt:Ot>0?Math.floor(Ot/Et):0;pe[qe]=(pe[qe]||0)+fe,Se[qe]=(Se[qe]||0)+Ke;const ve=Le.orderId||Le.vendorOrderId||Le.orderNumber||Le.order||Pe.id;k[qe]||(k[qe]=new Set),k[qe].add(ve);const he=((ze=c[qe])==null?void 0:ze.name)||Le.sellerName||"(sin vendedor)",oe=String(Le.date||""),je=Number(Le.totalVendor??0),Qe=Number(Le.gainVendor??0),tt=Ct>0?Ct:yt>0?Math.floor(yt/Et):0,rt=tt>0?je/tt:0,Te=tt>0?Qe/tt:0,Ee=Ic(fe*rt),V=Ic(fe*Te),Ae=Ic(Ke*rt),Ne=Ic(Ke*Te);F[qe]||(F[qe]={ordered:[],remaining:[]}),fe>0&&F[qe].ordered.push({date:oe,vendorName:he,productName:st,packages:fe,totalMoney:Ee,vendorCommission:V}),Ke>0&&F[qe].remaining.push({date:oe,vendorName:he,productName:st,packages:Ke,totalMoney:Ae,vendorCommission:Ne})});const H={};Object.keys(k).forEach(Pe=>{H[Pe]=k[Pe].size});const M=Yt(At(ke,"sales_candies"),lr("date",">=",t),lr("date","<=",r)),L=await Dt(M),z={},R={},G={},ee={},te={},Q={};L.forEach(Pe=>{const Le=Pe.data(),qe=Le.date||"",nt=Le.vendorId||Le.sellerId||"";if(!nt)return;const st=c[nt],Et=Le.vendorName||(st==null?void 0:st.name)||"(sin vendedor)",yt=Number(Le.vendorCommissionPercent??(st==null?void 0:st.commissionPercent)??0)||0,Ct=Array.isArray(Le.items)?Le.items:[];if(!Ct.length)return;const Ot=String(Le.type||"").toUpperCase()==="CREDITO";te[nt]||(te[nt]={sold:[],credit:[]}),Ct.forEach(Pt=>{var Ee;const fe=Pt.productName||((Ee=d[Pt.productId||""])==null?void 0:Ee.name)||"(sin nombre)",Ke=Pt.packages??Pt.qty??Pt.quantity??0,ve=Number(Ke||0);if(ve<=0)return;const he=Number(Pt.unitPricePackage??Pt.unitPrice??0)||0,oe=Math.max(0,Number(Pt.discount||0)),je=ve*he,Qe=Ic(Math.max(0,je-oe));if(Qe<=0)return;console.log("DBG",{isCredit:Ot,vendorId:nt,commissionPercent:yt,lineFinal:Qe,storedItemCommission:Number(Pt.vendorCommissionAmount??0)});let tt=0;const rt=Number(Pt.vendorCommissionAmount??0);rt?tt=Ic(rt):yt>0&&(tt=Ic(Qe*yt/100)),Ot?(R[nt]=(R[nt]||0)+ve,ee[nt]=(ee[nt]||0)+Qe):(z[nt]=(z[nt]||0)+ve,G[nt]=(G[nt]||0)+Qe),Ot?ie[nt]=(ie[nt]||0)+tt:re[nt]=(re[nt]||0)+tt,Ot?te[nt].credit.push({date:qe,vendorName:Et,productName:fe,packages:ve,totalMoney:Qe,vendorCommission:0}):te[nt].sold.push({date:qe,vendorName:Et,productName:fe,packages:ve,totalMoney:Qe,vendorCommission:tt});const Te=fe;Q[Te]||(Q[Te]={productName:fe,packages:0,totalMoney:0}),Q[Te].packages+=ve,Q[Te].totalMoney+=Qe})});const xe=new Set([...Object.keys(pe),...Object.keys(Se),...Object.keys(z),...Object.keys(R)]),Y=[],W={};xe.forEach(Pe=>{var Ke,ve,he,oe;const Le=c[Pe],qe=(Le==null?void 0:Le.name)||"(sin vendedor)",nt=Le?Le.branchLabel||JLe(Le.branch):"",st=pe[Pe]||0,Et=Se[Pe]||0,yt=z[Pe]||0,Ct=R[Pe]||0,Ot=Ic(G[Pe]||0),Pt=Ic(ee[Pe]||0),fe=H[Pe]||0;Y.push({vendorId:Pe,vendorName:qe,branchLabel:nt,orderedPackages:st,remainingPackages:Et,soldPackages:yt,creditPackages:Ct,totalSoldMoney:Ot,totalCreditMoney:Pt,ordersCreated:fe,commissionCash:Ic(re[Pe]||0),commissionCredit:0}),W[Pe]={ordered:(((Ke=F[Pe])==null?void 0:Ke.ordered)||[]).sort((je,Qe)=>je.date.localeCompare(Qe.date)),remaining:(((ve=F[Pe])==null?void 0:ve.remaining)||[]).sort((je,Qe)=>je.date.localeCompare(Qe.date)),sold:(((he=te[Pe])==null?void 0:he.sold)||[]).sort((je,Qe)=>je.date.localeCompare(Qe.date)),credit:(((oe=te[Pe])==null?void 0:oe.credit)||[]).sort((je,Qe)=>je.date.localeCompare(Qe.date))}}),Y.sort((Pe,Le)=>Pe.vendorName.localeCompare(Le.vendorName,"es")),f(Y),x(W);const le=Object.values(Q).map(Pe=>({productName:Pe.productName,packages:Pe.packages,totalMoney:Ic(Pe.totalMoney)})).sort((Pe,Le)=>Le.packages-Pe.packages).slice(0,10);p(le),Y.length||l("Sin datos para el rango seleccionado.")}catch(re){console.error(re),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&P()},[c]);const D=(re,ie)=>{I(re),C(ie),b(!0)},X=()=>{b(!1),I(null),C(null)},de=()=>{if(!h.length){l("No hay datos para exportar.");return}const re=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],ie=h.map(k=>[k.vendorName,k.branchLabel,k.orderedPackages.toString(),k.remainingPackages.toString(),k.soldPackages.toString(),k.creditPackages.toString(),k.totalSoldMoney.toFixed(2),k.commissionCash.toFixed(2),k.totalCreditMoney.toFixed(2),k.commissionCredit.toFixed(2),k.ordersCreated.toString()]),ce=[re,...ie].map(k=>k.map(F=>`"${String(F).replace(/"/g,'""')}"`).join(",")).join(`
`),J=new Blob([ce],{type:"text/csv;charset=utf-8;"}),pe=URL.createObjectURL(J),Se=document.createElement("a");Se.href=pe,Se.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Se.click(),URL.revokeObjectURL(pe)};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:re=>e(re.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:re=>n(re.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:de,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:QA(O)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),o.jsx("div",{className:"text-xl font-semibold",children:QA(B)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),o.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),o.jsx("div",{className:"overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),o.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),o.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),o.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),o.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),o.jsxs("tbody",{children:[h.map(re=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:re.vendorName}),o.jsx("td",{className:"border p-1",children:re.branchLabel}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(re.vendorId,"ordered"),children:re.orderedPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(re.vendorId,"remaining"),children:re.remainingPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(re.vendorId,"sold"),children:re.soldPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(re.vendorId,"credit"),children:re.creditPackages})}),o.jsx("td",{className:"border p-1",children:QA(re.totalSoldMoney)}),o.jsx("td",{className:"border p-1",children:QA(re.commissionCash)}),o.jsx("td",{className:"border p-1",children:QA(re.totalCreditMoney)}),o.jsx("td",{className:"border p-1",children:QA(re.commissionCredit)}),o.jsx("td",{className:"border p-1",children:re.ordersCreated})]},re.vendorId)),h.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"#"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),o.jsxs("tbody",{children:[m.map((re,ie)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:ie+1}),o.jsx("td",{className:"border p-1",children:re.productName}),o.jsx("td",{className:"border p-1",children:re.packages}),o.jsx("td",{className:"border p-1",children:QA(re.totalMoney)})]},re.productName)),m.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&o.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&T&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",T==="ordered"?"Paquetes ordenados":T==="remaining"?"Paquetes restantes":T==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[E==null?void 0:E.vendorName,"  ",E==null?void 0:E.branchLabel]})]}),o.jsx("button",{onClick:X,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("table",{className:"min-w-full border text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),o.jsxs("tbody",{children:[S.map((re,ie)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:re.date}),o.jsx("td",{className:"border p-1",children:re.productName}),o.jsx("td",{className:"border p-1",children:re.packages}),o.jsx("td",{className:"border p-1",children:QA(re.totalMoney)}),o.jsx("td",{className:"border p-1",children:re.vendorName}),o.jsx("td",{className:"border p-1",children:QA(re.vendorCommission)})]},ie)),S.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const el=t=>`C$${Number(t||0).toFixed(2)}`,b_=t=>Number(t||0).toFixed(3),aT=()=>{const t=new Date;return wr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},w_=()=>wr(new Date,"yyyy-MM-dd");function nUe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const V={};return a.forEach(Ae=>{Ae.email&&(V[Ae.email.trim().toLowerCase()]=Ae)}),V},[a]);v.useEffect(()=>{(async()=>{try{const V=Yt(At(ke,"sellers_candies"),ln("name","asc")),Ae=await Dt(V),Ne=[];Ae.forEach(Re=>{const ze=Re.data();Ne.push({id:Re.id,name:ze.name||"",email:ze.email||"",commissionPercent:Number(ze.commissionPercent||0)})}),s(Ne)}catch(V){console.error(V)}})()},[]);const[l,c]=v.useState(aT()),[u,d]=v.useState(w_()),[A,h]=v.useState(""),[f,m]=v.useState(""),p=v.useMemo(()=>{const V=new Map;return n.forEach(Ae=>{const Ne=Ae.productId||Ae.productName;V.set(Ne,{key:Ne,name:Ae.productName})}),Array.from(V.values()).sort((Ae,Ne)=>Ae.name.localeCompare(Ne.name))},[n]),g=v.useMemo(()=>{const V=new Map;return n.forEach(Ae=>{const Ne=(Ae.sellerEmail||"").trim().toLowerCase();if(!Ne)return;const Re=i[Ne],ze=(Re==null?void 0:Re.name)||Ae.vendorName||Ne;V.set(Ne,{email:Ne,label:ze})}),Array.from(V.values()).sort((Ae,Ne)=>Ae.label.localeCompare(Ne.label))},[n,i]),x=v.useMemo(()=>n.filter(V=>!(l&&V.date<l||u&&V.date>u||A&&(V.productId||V.productName)!==A||f&&(V.sellerEmail||"").trim().toLowerCase()!==f)),[n,l,u,A,f]),[y,b]=v.useState(w_()),[w,I]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[T,C]=v.useState(""),[E,S]=v.useState("0"),[O,B]=v.useState(()=>x.map(V=>V.id));v.useEffect(()=>{B(V=>V.filter(Ae=>x.some(Ne=>Ne.id===Ae)))},[x]);const[P,D]=v.useState([]),[X,de]=v.useState([]),[re,ie]=v.useState(!1),[ce,J]=v.useState(aT()),[pe,Se]=v.useState(w_());v.useEffect(()=>{(async()=>{try{ie(!0);const V=Yt(At(ke,"expensesCandies"),ln("date","desc")),Ae=await Dt(V),Ne=[];Ae.forEach(Re=>{const ze=Re.data();Ne.push({id:Re.id,date:ze.date,description:ze.description,amount:Number(ze.amount||0)})}),D(Ne)}catch(V){console.error(V)}finally{ie(!1)}})()},[]);const k=v.useMemo(()=>P.filter(V=>!(!V.date||ce&&V.date<ce||pe&&V.date>pe)),[P,ce,pe]),[F,H]=v.useState([]),[M,L]=v.useState(!1),[z,R]=v.useState(""),[G,ee]=v.useState("DEBITO"),[te,Q]=v.useState(""),xe=()=>{const V=Number(te);!z.trim()||!isFinite(V)||V<=0||(H(Ae=>[...Ae,{id:`${Date.now()}_${Ae.length+1}`,description:z.trim(),type:G,amount:Number(V.toFixed(2))}]),R(""),Q(""))},[Y,W]=v.useState(null),[le,Pe]=v.useState(""),[Le,qe]=v.useState("DEBITO"),[nt,st]=v.useState(""),Et=V=>{W(V.id),Pe(V.description),qe(V.type),st(V.amount.toFixed(2))},yt=()=>{W(null),Pe(""),qe("DEBITO"),st("")},Ct=()=>{if(!Y)return;const V=Number(nt);!isFinite(V)||V<=0||(H(Ae=>Ae.map(Ne=>Ne.id===Y?{...Ne,description:le.trim(),type:Le,amount:Number(V.toFixed(2))}:Ne)),yt())},Ot=V=>{H(Ae=>Ae.filter(Ne=>Ne.id!==V)),Y===V&&yt()},Pt=(V,Ae)=>{B(Ne=>Ae?[...new Set([...Ne,V])]:Ne.filter(Re=>Re!==V))},fe=V=>{B(V?x.map(Ae=>Ae.id):[])},Ke=(V,Ae)=>{de(Ne=>Ae?[...new Set([...Ne,V])]:Ne.filter(Re=>Re!==V))},ve=v.useMemo(()=>x.filter(V=>O.includes(V.id)),[x,O]),he=v.useMemo(()=>F.filter(V=>V.type==="DEBITO").reduce((V,Ae)=>V+Ae.amount,0),[F]),oe=v.useMemo(()=>F.filter(V=>V.type==="CREDITO").reduce((V,Ae)=>V+Ae.amount,0),[F]),je=v.useMemo(()=>{let V=0,Ae=0,Ne=0,Re=0;for(const Xe of ve){const ot=Number(Xe.packages||0),be=Number(Xe.cogsAmount||0),Ge=Number(Xe.amount||0);V+=ot,Ae+=be,Ne+=Ge;const ut=(Xe.sellerEmail||"").trim().toLowerCase(),bt=i[ut],Rt=Number((bt==null?void 0:bt.commissionPercent)||0),Wt=Ge*Rt/100;Re+=Wt}const ze=k.filter(Xe=>X.includes(Xe.id)).reduce((Xe,ot)=>Xe+Number(ot.amount||0),0),Ye=Ne-Ae,Ze=Ne-ze-he+oe-Re,dt=Number(E||0),ge=Ne*dt/100;return{totalPackages:Number(b_(V)),totalProvider:Number(Ae.toFixed(2)),totalSale:Number(Ne.toFixed(2)),totalGastos:Number(ze.toFixed(2)),debits:Number(he.toFixed(2)),credits:Number(oe.toFixed(2)),grossProfit:Number(Ye.toFixed(2)),finalAmount:Number(Ze.toFixed(2)),totalCommissionVendors:Number(Re.toFixed(2)),branchProfit:Number(ge.toFixed(2)),branchFactor:dt}},[ve,k,X,he,oe,i,E]),[Qe,tt]=v.useState(!1),[rt,Te]=v.useState(""),Ee=async()=>{if(Te(""),ve.length===0){Te("Selecciona al menos 1 transaccin procesada.");return}try{tt(!0);const V={number:w.trim(),date:y,description:T.trim(),status:"PENDIENTE",createdAt:rr.now(),totalPackages:je.totalPackages,totalProvider:je.totalProvider,totalSale:je.totalSale,totalExpenses:je.totalGastos,totalDebits:je.debits,totalCredits:je.credits,grossProfit:je.grossProfit,totalCommissionVendors:je.totalCommissionVendors,branchFactorPercent:je.branchFactor,branchProfit:je.branchProfit,finalAmount:je.finalAmount,transactions:ve.map(Ae=>{const Ne=Number(Ae.packages||0)||1,Re=Number(Ae.cogsAmount||0),ze=Number(Ae.amount||0),Ye=Re/Ne,Ze=ze/Ne,dt=(Ae.sellerEmail||"").trim().toLowerCase(),ge=i[dt],Xe=Number((ge==null?void 0:ge.commissionPercent)||0),ot=ze*Xe/100;return{id:Ae.id,date:Ae.date,productId:Ae.productId||null,productName:Ae.productName,vendorName:Ae.vendorName,sellerEmail:Ae.sellerEmail||null,packages:Number(b_(Ae.packages)),providerPricePack:Number(Ye.toFixed(4)),salePricePack:Number(Ze.toFixed(4)),totalProvider:Number(Re.toFixed(2)),totalSale:Number(ze.toFixed(2)),commissionPercent:Xe,commissionAmount:Number(ot.toFixed(2))}}),expenses:k.filter(Ae=>X.includes(Ae.id)).map(Ae=>({id:Ae.id,date:Ae.date||null,description:Ae.description||"",amount:Number(Number(Ae.amount||0).toFixed(2))})),adjustments:F.map(Ae=>({id:Ae.id,description:Ae.description,type:Ae.type,amount:Number(Ae.amount.toFixed(2))}))};await En(At(ke,"invoicesCandies"),V),Te(" Factura de dulces creada."),r()}catch(V){console.error(V),Te(` Error al crear factura: ${(V==null?void 0:V.message)||"desconocido"}`)}finally{tt(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:V=>b(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:V=>I(V.target.value),placeholder:"FAC-CANDY-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:V=>S(V.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:T,onChange:V=>C(V.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:V=>c(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:V=>d(V.target.value)})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:V=>h(V.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),p.map(V=>o.jsx("option",{value:V.key,children:V.name},V.key))]})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:V=>m(V.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),g.map(V=>o.jsx("option",{value:V.email,children:V.label},V.email))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(aT()),d(w_()),h(""),m("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:x.length>0&&O.length===x.length,onChange:V=>fe(V.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border",children:"Total venta"}),o.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),o.jsx("tbody",{children:x.map(V=>{const Ae=O.includes(V.id),Ne=Number(V.packages||0)||1,Re=Number(V.cogsAmount||0),ze=Number(V.amount||0),Ye=Re/Ne,Ze=ze/Ne,dt=(V.sellerEmail||"").trim().toLowerCase(),ge=i[dt],Xe=Number((ge==null?void 0:ge.commissionPercent)||0),ot=ze*Xe/100;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:Ae,onChange:be=>Pt(V.id,be.target.checked)})}),o.jsx("td",{className:"p-2 border",children:V.date}),o.jsx("td",{className:"p-2 border",children:(ge==null?void 0:ge.name)||V.vendorName}),o.jsx("td",{className:"p-2 border",children:V.productName}),o.jsx("td",{className:"p-2 border",children:b_(V.packages)}),o.jsx("td",{className:"p-2 border",children:el(Ye)}),o.jsx("td",{className:"p-2 border",children:el(Ze)}),o.jsx("td",{className:"p-2 border",children:el(Re)}),o.jsx("td",{className:"p-2 border",children:el(ze)}),o.jsx("td",{className:"p-2 border",children:Xe>0?`${el(ot)} (${Xe.toFixed(2)}%)`:""})]},V.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),re&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ce,onChange:V=>J(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:pe,onChange:V=>Se(V.target.value)})]})]})]}),k.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:k.map(V=>{const Ae=X.includes(V.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:Ae,onChange:Ne=>Ke(V.id,Ne.target.checked)})}),o.jsx("td",{className:"p-2 border",children:V.date||""}),o.jsx("td",{className:"p-2 border",children:V.description||""}),o.jsx("td",{className:"p-2 border",children:el(Number(V.amount||0))})]},V.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>L(!0),children:"Crear Cargo"})]}),F.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F.map(V=>{const Ae=Y===V.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:le,onChange:Ne=>Pe(Ne.target.value)}):o.jsx("span",{title:V.description,children:V.description.length>60?`${V.description.slice(0,60)}`:V.description})}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Le,onChange:Ne=>qe(Ne.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${V.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:V.type})}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:nt,onChange:Ne=>st(Ne.target.value)}):el(V.amount)}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Ct,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:yt,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ot(V.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>Et(V),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ot(V.id),children:"Eliminar"})]})})]},V.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsx("div",{className:"space-y-1",children:o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:b_(je.totalPackages)})]})}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total proveedor (costo):"," ",o.jsx("strong",{children:el(je.totalProvider)})]}),o.jsxs("div",{children:["Total venta: ",o.jsx("strong",{children:el(je.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",o.jsx("strong",{children:el(je.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:el(je.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:el(je.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:el(je.credits)})]}),o.jsxs("div",{children:["Comisin total vendedores:"," ",o.jsx("strong",{children:el(je.totalCommissionVendors)})]}),o.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",o.jsx("strong",{children:el(je.branchProfit)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",o.jsx("span",{className:"text-blue-700",children:el(je.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:Qe,onClick:Ee,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Qe?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),rt&&o.jsx("span",{className:"text-sm ml-2",children:rt})]}),Qe&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),M&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>L(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:z,onChange:V=>R(V.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:G,onChange:V=>ee(V.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:te,onChange:V=>Q(V.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:xe,children:"Agregar"})})]})]})})]})}const da=t=>`C$ ${Number(t??0).toFixed(2)}`,N_=t=>Number(t??0).toFixed(3);function sT(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,f=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((f*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-A+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:A,credits:h,grossProfit:f,branchProfit:p,finalAmount:g}}function DH(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function aUe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const f=Yt(At(ke,"invoicesCandies"),ln("date","desc")),m=await Dt(f),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async f=>{const m=f.status==="PAGADA"?"PENDIENTE":"PAGADA";await rn(Gt(ke,"invoicesCandies",f.id),{status:m}),e(p=>p.map(g=>g.id===f.id?{...g,status:m}:g)),(a==null?void 0:a.id)===f.id&&s({...f,status:m})},A=async f=>{if(window.confirm(`Eliminar factura del ${f.date}?`))try{await Qn(Gt(ke,"invoicesCandies",f.id)),e(m=>m.filter(p=>p.id!==f.id)),(a==null?void 0:a.id)===f.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const f=i.current,m=await G0(f,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(I=>{const T=b.defaultView.getComputedStyle(I);T.boxShadow&&T.boxShadow!=="none"&&(I.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Br("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),o.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&o.jsx(nUe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(f=>{const m=sT(f),p=DH(f);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.number||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.commissionTotal)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:N_(m.totalPackages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.totalSale)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.expenses)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.debits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.credits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(m.finalAmount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${f.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:f.status})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(f),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(f),children:f.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(f),children:"Eliminar"})]})})]},f.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const f=sT(a),m=DH(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",N_(f.totalPackages)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",da(f.totalProvider)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",da(f.totalSale)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",da(f.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",da(f.commissionTotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",da(f.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",da(f.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",da(f.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),o.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((f,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.productName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:N_(f.packages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.providerPricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.salePricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.totalProvider)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.totalSale)}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[da(f.commissionAmount||0),f.commissionPercent?` (${f.commissionPercent.toFixed(2)}%)`:""]})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((f,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.date||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.description||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.amount)})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((f,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:f.description}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${f.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:f.type})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:da(f.amount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const f=sT(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:N_(f.totalPackages)})]}),o.jsxs("div",{children:["Total proveedor: ",o.jsx("strong",{children:da(f.totalProvider)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Sub total ventas: ",o.jsx("strong",{children:da(f.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta: ",o.jsx("strong",{children:da(f.grossProfit)})]}),o.jsxs("div",{children:["Ganancia sucursal: ",o.jsx("strong",{children:da(f.branchProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Comisin vendedores:"," ",o.jsx("strong",{children:da(f.commissionTotal)})]}),o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:da(f.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:da(f.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:da(f.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:da(f.finalAmount)})]})})]})})()]})]})}const as=t=>Math.round((Number(t)||0)*100)/100,Sh=t=>Math.round((Number(t)||0)*1e3)/1e3,wi=t=>Number(t??0).toFixed(2),VA=t=>Number(t??0).toFixed(3),sUe=(t,e)=>{var h,f;const r=t.date??((h=t.timestamp)!=null&&h.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=as(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:as(x),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:y}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,A=as(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:((f=String(t))==null?void 0:f.productName)??"(sin nombre)",quantity:u,amount:as(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:A}]};function iUe({role:t}){const e=!t||t==="admin",r="daily_closures_candies",n="sales_candies",a="sellers_candies",[s,i]=v.useState(wr(qJ(new Date),"yyyy-MM-dd")),[l,c]=v.useState(wr(new Date,"yyyy-MM-dd")),[u,d]=v.useState(!0),[A,h]=v.useState([]),[f,m]=v.useState(null),[p,g]=v.useState(""),[x,y]=v.useState([]),[b,w]=v.useState("ALL"),[I,T]=v.useState({}),C=v.useRef(null);if(!e)return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),o.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const E=async()=>{try{const F=await Dt(At(ke,a)),H=[];F.forEach(M=>{const L=M.data();H.push({id:M.id,name:L.name||"",commissionPercent:Number(L.commissionPercent||0)})}),y(H)}catch(F){console.error("Error cargando sellers_candies",F)}},S=async()=>{const F=performance.now();try{d(!0);const H=Yt(At(ke,r),lr("date",">=",s),lr("date","<=",l)),M=await Dt(H),L=performance.now();console.log(" getDocs ms:",(L-F).toFixed(1),"docs:",M.size);const z=[];M.forEach(te=>z.push({id:te.id,...te.data()}));const R=performance.now();console.log(" parse+set ms:",(R-L).toFixed(1),"rows:",z.length),z.sort((te,Q)=>te.date<Q.date?1:te.date>Q.date?-1:0),h(z),m(null);const G=new Set;z.forEach(te=>{(te.sales||[]).forEach(Q=>{const xe=String((Q==null?void 0:Q.id)??"").split("#")[0].trim();xe&&G.add(xe)})});const ee=Array.from(G).filter(te=>!I[te]);if(ee.length>0){const te={};for(const Q of ee)try{const xe=await fo(Gt(ke,n,Q));if(xe.exists()){const Y=xe.data();te[Q]=sUe(Y,Q)}else te[Q]=[]}catch(xe){console.error("Error leyendo sale",Q,xe),te[Q]=[]}T(Q=>({...Q,...te}))}}catch(H){console.error(H),g(" Error cargando liquidaciones.")}finally{d(!1)}};v.useEffect(()=>{E()},[]),v.useEffect(()=>{S()},[]);const O=async F=>{F.preventDefault(),await S()},B=v.useMemo(()=>{const F={};return x.forEach(H=>F[H.id]=H.name||H.id),F},[x]),P=F=>{const H=[];return(F.sales||[]).forEach(M=>{const L=String((M==null?void 0:M.id)??"").trim();if(!L)return;const z=L.split("#")[0],G=(I[z]||[]).find(ee=>ee.id===L);G?H.push(G):H.push({id:L,productName:String((M==null?void 0:M.productName)??"(sin nombre)"),quantity:Number((M==null?void 0:M.quantity)??0),amount:as(Number((M==null?void 0:M.amount)??0)),date:String((M==null?void 0:M.date)??""),type:"CONTADO",vendorId:"",userEmail:String((M==null?void 0:M.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),H},D=F=>b==="ALL"?F:F.filter(H=>(H.vendorId||"")===b),X=v.useMemo(()=>A.map(F=>{const H=D(P(F));let M=0,L=0,z=0,R=0,G=0,ee=0;for(const te of H){const Q=Number(te.quantity||0),xe=Number(te.amount||0),Y=Number(te.vendorCommissionAmount||0);te.type==="CREDITO"?(L+=Q,R+=xe,ee+=Y):(M+=Q,z+=xe,G+=Y)}return{...F,_sales:H,_packsCash:Sh(M),_packsCredit:Sh(L),_amountCash:as(z),_amountCredit:as(R),_comCash:as(G),_comCredit:as(ee)}}),[A,I,b]),de=v.useMemo(()=>{let F=0,H=0,M=0,L=0,z=0,R=0;for(const G of X)F+=Number(G._packsCash||0),H+=Number(G._packsCredit||0),M+=Number(G._amountCash||0),L+=Number(G._amountCredit||0),z+=Number(G._comCash||0),R+=Number(G._comCredit||0);return{packsCash:Sh(F),packsCredit:Sh(H),totalSales:as(M+L),amountCash:as(M),amountCredit:as(L),comCash:as(z),comCredit:as(R)}},[X]),re=v.useMemo(()=>{const F={},H={};for(const M of X){const L=M._sales||[];for(const z of L){const R=(z.vendorId||"").trim();if(!R)continue;const G=B[R]||z.userEmail||R,ee=as(Number(z.vendorCommissionAmount||0));z.type==="CREDITO"?(H[R]||(H[R]={vendorId:R,name:G,total:0}),H[R].total=as(H[R].total+ee)):(F[R]||(F[R]={vendorId:R,name:G,total:0}),F[R].total=as(F[R].total+ee))}}return{cashRows:Object.values(F).filter(M=>M.total>0).sort((M,L)=>L.total-M.total),creditRows:Object.values(H).filter(M=>M.total>0).sort((M,L)=>L.total-M.total)}},[X,B]),ie=v.useMemo(()=>x.map(F=>({id:F.id,label:F.name||F.id})).sort((F,H)=>F.label.localeCompare(H.label)),[x]),ce=v.useMemo(()=>f&&X.find(F=>F.id===f.id)||null,[f,X]),J=v.useMemo(()=>ce?ce._sales||[]:[],[ce]),pe=v.useMemo(()=>{let F=0,H=0,M=0,L=0;for(const z of J)z.type==="CREDITO"?(H+=Number(z.quantity||0),L+=Number(z.amount||0)):(F+=Number(z.quantity||0),M+=Number(z.amount||0));return{packsCash:Sh(F),packsCredit:Sh(H),amountCash:as(M),amountCredit:as(L)}},[J]),Se=v.useMemo(()=>{const F={};for(const H of J){const M=H.productName||"(sin nombre)";F[M]||(F[M]={productName:M,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const L=Number(H.quantity||0),z=Number(H.amount||0),R=Number(H.vendorCommissionAmount||0);H.type==="CREDITO"?(F[M].packsCredit=Sh(F[M].packsCredit+L),F[M].amountCredit=as(F[M].amountCredit+z),F[M].comCredit=as(F[M].comCredit+R)):(F[M].packsCash=Sh(F[M].packsCash+L),F[M].amountCash=as(F[M].amountCash+z),F[M].comCash=as(F[M].comCash+R))}return Object.values(F)},[J]),k=async()=>{if(!C.current||!ce)return;const F=C.current;F.classList.add("force-pdf-colors");try{const M=(await G0(F,{backgroundColor:"#ffffff"})).toDataURL("image/png"),L=new Br;L.addImage(M,"PNG",10,10,190,0),L.save(`liquidacion_${ce.date}.pdf`)}finally{F.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),o.jsxs("form",{onSubmit:O,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:F=>i(F.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:F=>c(F.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:b,onChange:F=>w(F.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),ie.map(F=>o.jsx("option",{value:F.id,children:F.label},F.id))]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-2xl font-bold",children:VA(de.packsCash)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:VA(de.packsCredit)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(de.totalSales)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(de.amountCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(de.amountCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(de.comCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(de.comCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),re.cashRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:re.cashRows.map(F=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:F.name}),o.jsxs("strong",{className:"ml-2",children:["C$",wi(F.total)]})]},F.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),re.creditRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:re.creditRows.map(F=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:F.name}),o.jsxs("strong",{className:"ml-2",children:["C$",wi(F.total)]})]},F.vendorId))})]})]}),u?o.jsx("p",{children:"Cargando..."}):X.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsx("tbody",{children:X.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:F.date}),o.jsx("td",{className:"border p-1",children:VA(F._packsCash)}),o.jsx("td",{className:"border p-1",children:VA(F._packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F._comCredit)]}),o.jsx("td",{className:"border p-1",children:o.jsx("div",{className:"flex items-center gap-2 justify-center",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>m(F),children:"Ver detalle"})})})]},F.id))})]}),ce&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",ce.date]}),o.jsx("button",{onClick:()=>m(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:k,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:C,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[o.jsxs("div",{children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",wi(pe.amountCash)]})]}),o.jsxs("div",{children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",wi(pe.amountCredit)]})]}),o.jsxs("div",{children:["Total paquetes cash:"," ",o.jsx("strong",{children:VA(pe.packsCash)})]}),o.jsxs("div",{children:["Total paquetes crdito:"," ",o.jsx("strong",{children:VA(pe.packsCredit)})]})]}),o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),J.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsx("tbody",{children:J.map((F,H)=>{const M=F.vendorId&&B[F.vendorId]?B[F.vendorId]:F.userEmail,L=as(Number(F.vendorCommissionAmount||0));return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:M}),o.jsx("td",{className:"border p-1",children:F.productName}),o.jsx("td",{className:"border p-1",children:F.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:VA(F.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amount)]}),o.jsx("td",{className:"border p-1",children:L>0?`C$${wi(L)}`:""}),o.jsx("td",{className:"border p-1",children:F.date||""})]},H)})})]}),o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),Se.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsx("tbody",{children:Se.map((F,H)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:F.productName}),o.jsx("td",{className:"border p-1",children:VA(F.packsCash)}),o.jsx("td",{className:"border p-1",children:VA(F.packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",wi(F.comCredit)]})]},H))})]})]})]}),p&&o.jsx("p",{className:"mt-3 text-sm",children:p})]})}const Er=t=>Math.round((Number(t)||0)*100)/100,wo=t=>Math.round((Number(t)||0)*1e3)/1e3,fr=t=>Number(t??0).toFixed(2),bs=t=>Number(t??0).toFixed(3),lS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},_r=t=>{const e=Number(t);return Number.isFinite(e)?e:0},oUe=t=>Math.max(0,Math.min(1,t));function RH({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,A=u.length?Math.max(...u):0,h=A-d||1,f=840,m=204,p=e.map((b,w)=>{const I=44+(e.length<=1?f/2:w/(e.length-1)*f),T=18+(1-(Number(b.value||0)-d)/h)*m;return{x:I,y:T,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),o.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",o.jsx("strong",{children:r+fr(y)})]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return o.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),o.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,fr(A)]}),o.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,fr(d)]}),o.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>o.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),o.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function lUe({title:t,items:e}){const r=e.reduce((A,h)=>A+Number(h.value||0),0),n=240,a=86,s=120,i=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((A,h)=>{const f=Math.max(0,Number(A.value||0)),m=c/l,p=f/l;c+=f;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),I=s+a*Math.cos(y),T=i+a*Math.sin(y),C=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${C} 1 ${I.toFixed(2)} ${T.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...A,frac:p}});return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:o.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((A,h)=>o.jsx("path",{d:A.d,fill:A.fill},h)),o.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),o.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",fr(r)]})]})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((A,h)=>{const f=Number(A.value||0),m=oUe(f/(r||1))*100;return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-semibold truncate",children:A.label}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",fr(f)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),o.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:o.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},A.label)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const cUe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?wr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,A=Number(t.vendorCommissionAmount??0)||0,h=lS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),I=lS(x==null?void 0:x.branch)||h;let T=0;return A>0&&d>0&&w>0&&(T=Er(A*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:I||"",packages:b,amount:Er(w),commission:Er(T)}});const f=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Er(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:h||"",packages:f,amount:Er(m),commission:Er(p)}]};function uUe({role:t}){var dt;const e=!t||t==="admin",r=wr(new Date,"yyyy-MM-dd"),[n,a]=v.useState(r),[s,i]=v.useState(r),[l,c]=v.useState("TODAS"),[u,d]=v.useState("AMBAS"),[A,h]=v.useState("ALL"),[f,m]=v.useState("ALL"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,w]=v.useState(""),[I,T]=v.useState(""),[C,E]=v.useState("DIA"),[S,O]=v.useState(!0),[B,P]=v.useState(""),[D,X]=v.useState([]),[de,re]=v.useState([]),[ie,ce]=v.useState([]),[J,pe]=v.useState([]),[Se,k]=v.useState([]),[F,H]=v.useState([]),[M,L]=v.useState([]),[z,R]=v.useState([]),[G,ee]=v.useState([]),[te,Q]=v.useState(""),[xe,Y]=v.useState(""),W=v.useRef(null),[le,Pe]=v.useState([]),[Le,qe]=v.useState("DETALLE"),nt=v.useMemo(()=>{const ge={};return Se.forEach(Xe=>ge[Xe.id]=String(Xe.name||"").trim()),ge},[Se]),st=v.useMemo(()=>{const ge={};return de.forEach(Xe=>ge[Xe.id]=Xe),ge},[de]),Et=ge=>{const Xe=ge.customerId?nt[ge.customerId]:"";return(ge.customerName||Xe||"").trim()||(ge.customerId?nt[ge.customerId]||ge.customerId:"")||""};v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=await Dt(At(ke,"inventory_candies")),ot=[];Xe.forEach(be=>ot.push({id:be.id,...be.data()})),Pe(ot)}catch(Xe){console.error("inventory_candies all error:",Xe),Pe([])}})()},[e]),v.useEffect(()=>{(async()=>{try{const Xe=await Dt(At(ke,"sellers_candies")),ot=[];Xe.forEach(Ge=>{const ut=Ge.data();ot.push({id:Ge.id,name:String(ut.name||"").trim(),commissionPercent:Number(ut.commissionPercent||0),branch:ut.branch||""})});const be=new Map;ot.forEach(Ge=>be.set(Ge.id,Ge)),re(Array.from(be.values()).sort((Ge,ut)=>Ge.name.localeCompare(ut.name)))}catch(Xe){console.error(Xe)}})()},[]),v.useEffect(()=>{if(!e||!n||!s)return;O(!0),P("");const ge=Yt(At(ke,"sales_candies"),lr("date",">=",n),lr("date","<=",s),ln("date","asc")),Xe=I0(ge,ot=>{const be=[];ot.forEach(Ge=>be.push(...cUe(Ge.data(),Ge.id))),X(be),O(!1)},ot=>{console.error("sales_candies periodo error:",ot),X([]),O(!1),P(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>Xe()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=Yt(At(ke,"candy_main_orders"),lr("date",">=",n),lr("date","<=",s)),ot=await Dt(Xe),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),ce(be)}catch(Xe){console.error("candy_main_orders error:",Xe),ce([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=Yt(At(ke,"inventory_candies_sellers"),lr("date",">=",n),lr("date","<=",s)),ot=await Dt(Xe),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),pe(be)}catch(Xe){console.error("inventory_candies_sellers error:",Xe),pe([])}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=Yt(At(ke,"expenses_candies"),lr("date",">=",n),lr("date","<=",s),ln("date","asc")),ot=await Dt(Xe),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),L(be)}catch(Xe){console.warn("expenses_candies sin ndice, usando fallback:",Xe);try{const ot=await Dt(At(ke,"expenses_candies")),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),L(be.filter(Ge=>String(Ge.date||"")>=n&&String(Ge.date||"")<=s))}catch(ot){console.error(ot),L([])}}})()},[e,n,s]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=await Dt(At(ke,"inventory_candies")),ot=[];Xe.forEach(be=>ot.push({id:be.id,...be.data()})),R(ot)}catch(Xe){console.error("inventory_candies global error:",Xe),R([])}})()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=await Dt(At(ke,"inventory_candies_sellers")),ot=[];Xe.forEach(be=>ot.push({id:be.id,...be.data()})),ee(ot)}catch(Xe){console.error("inventory_candies_sellers global error:",Xe),ee([])}})()},[e]),v.useEffect(()=>{if(!e)return;const ge=Yt(At(ke,"customers_candies")),Xe=I0(ge,ot=>{const be=[];ot.forEach(Ge=>{var ut;return be.push({id:Ge.id,name:String(((ut=Ge.data())==null?void 0:ut.name)||"").trim()})}),k(be)},ot=>{console.error("customers_candies snapshot error:",ot),k([])});return()=>Xe()},[e]),v.useEffect(()=>{if(!e)return;(async()=>{try{const Xe=Yt(At(ke,"ar_movements"),lr("date","<=",s),ln("date","asc")),ot=await Dt(Xe),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),H(be)}catch(Xe){console.warn("ar_movements sin ndice, usando fallback:",Xe);try{const ot=await Dt(At(ke,"ar_movements")),be=[];ot.forEach(Ge=>be.push({id:Ge.id,...Ge.data()})),H(be.filter(Ge=>String(Ge.date||"")<=s))}catch(ot){console.error(ot),H([])}}})()},[e,s]);const yt=v.useMemo(()=>{let ge=[...D];if(l!=="TODAS"&&(ge=ge.filter(be=>be.status===l)),u==="CASH"&&(ge=ge.filter(be=>be.type==="CONTADO")),u==="CREDITO"&&(ge=ge.filter(be=>be.type==="CREDITO")),A!=="ALL"&&(ge=ge.filter(be=>(be.vendorId||"")===A)),f!=="ALL"&&(ge=ge.filter(be=>be.branch===f)),p.trim()){const be=p.trim().toLowerCase();ge=ge.filter(Ge=>(Ge.productName||"").toLowerCase().includes(be))}if(x.trim()){const be=x.trim().toLowerCase();ge=ge.filter(Ge=>(Et(Ge)||"").toLowerCase().includes(be))}const Xe=b.trim()?Number(b):null,ot=I.trim()?Number(I):null;return Xe!==null&&!Number.isNaN(Xe)&&(ge=ge.filter(be=>(be.amount||0)>=Xe)),ot!==null&&!Number.isNaN(ot)&&(ge=ge.filter(be=>(be.amount||0)<=ot)),ge},[D,l,u,A,f,p,x,b,I,nt]),Ct=v.useMemo(()=>{let ge=0,Xe=0,ot=0,be=0,Ge=0,ut=0;for(const Rt of yt){const Wt=_r(Rt.packages),mt=_r(Rt.amount),ne=_r(Rt.commission);Rt.type==="CREDITO"?(Xe+=Wt,be+=mt,ut+=ne):(ge+=Wt,ot+=mt,Ge+=ne)}const bt=Er(ot+be);return{packsCash:wo(ge),packsCredit:wo(Xe),salesCash:Er(ot),salesCredit:Er(be),salesTotal:bt,commCash:Er(Ge),commCredit:Er(ut),commTotal:Er(Ge+ut)}},[yt]),Ot=v.useMemo(()=>{let ge=0,Xe=0,ot=0,be=0,Ge=0,ut=0;for(const bt of ie){const Rt=Array.isArray(bt.items)?bt.items:[];for(const Wt of Rt)ge+=_r(Wt.totalRivas),Xe+=_r(Wt.totalSanJorge),ot+=_r(Wt.totalIsla),be+=_r(Wt.gainRivas),Ge+=_r(Wt.gainSanJorge),ut+=_r(Wt.gainIsla)}return{expectedRivas:Er(ge),expectedSanJorge:Er(Xe),expectedIsla:Er(ot),grossRivas:Er(be),grossSanJorge:Er(Ge),grossIsla:Er(ut),grossTotal:Er(be+Ge+ut),expectedTotal:Er(ge+Xe+ot)}},[ie]),Pt=v.useMemo(()=>{const ge={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const Xe of yt){const ot=Xe.branch;ot&&(ge[ot].sales+=_r(Xe.amount),ge[ot].packages+=_r(Xe.packages))}return{RIVAS:{sales:Er(ge.RIVAS.sales),packages:wo(ge.RIVAS.packages)},SAN_JORGE:{sales:Er(ge.SAN_JORGE.sales),packages:wo(ge.SAN_JORGE.packages)},ISLA:{sales:Er(ge.ISLA.sales),packages:wo(ge.ISLA.packages)}}},[yt]),fe=v.useMemo(()=>({RIVAS:Er(Pt.RIVAS.sales-Ot.expectedRivas),SAN_JORGE:Er(Pt.SAN_JORGE.sales-Ot.expectedSanJorge),ISLA:Er(Pt.ISLA.sales-Ot.expectedIsla)}),[Pt,Ot]),Ke=v.useMemo(()=>{const ge={},Xe={};for(const Ge of yt){const ut=(Ge.vendorId||"").trim();if(!ut)continue;const bt=de.find(mt=>mt.id===ut),Rt=(bt==null?void 0:bt.name)||Ge.vendorName||"(sin vendedor)",Wt=_r(Ge.commission);Ge.type==="CREDITO"?(Xe[ut]||(Xe[ut]={vendorId:ut,name:Rt,total:0}),Xe[ut].total=Er(Xe[ut].total+Wt)):(ge[ut]||(ge[ut]={vendorId:ut,name:Rt,total:0}),ge[ut].total=Er(ge[ut].total+Wt))}const ot=Object.values(ge).sort((Ge,ut)=>ut.total-Ge.total),be=Object.values(Xe).sort((Ge,ut)=>ut.total-Ge.total);return{cashArr:ot,creditArr:be}},[yt,de]),ve=v.useMemo(()=>{const ge=(ue,Be)=>ue.reduce((Oe,We)=>Oe+Number((We==null?void 0:We[Be])??0),0),Xe=ue=>{const Be=Number(ue);return Number.isFinite(Be)?Math.floor(Be):0},ot=ue=>{const Be=Number((ue==null?void 0:ue.totalPackages)??0);if(Be>0)return Be;const Oe=Array.isArray(ue==null?void 0:ue.items)?ue.items:[];return ge(Oe,"packages")};let be=0,Ge=0;for(const ue of ie){const Be=Array.isArray(ue.items)?ue.items:[];if(Be.length)for(const Oe of Be)be+=Number((Oe==null?void 0:Oe.subtotal)??0);else be+=Number(ue.subtotal??0);Ge+=ot(ue)}let ut=0,bt=0,Rt=0;const Wt=ue=>{const Be=Number(ue==null?void 0:ue.remainingPackages);if(Number.isFinite(Be)&&Be>0)return Math.floor(Be);const Oe=Math.max(1,Xe((ue==null?void 0:ue.unitsPerPackage)??1)),We=Xe((ue==null?void 0:ue.remainingUnits)??(ue==null?void 0:ue.remaining)??0);return We>0?Math.max(0,Math.floor(We/Oe)):0};for(const ue of J)ut+=Number(ue.subtotal??0),bt+=Number(ue.packages??0),Rt+=Wt(ue);const mt=new Set(ie.filter(ue=>String(ue.date||"")>=n&&String(ue.date||"")<=s).map(ue=>ue.id));let ne=0;for(const ue of le){const Be=String(ue.orderId||"").trim();Be&&mt.has(Be)&&(ne+=Number(ue.remainingPackages??0))}const ae=z.reduce((ue,Be)=>ue+_r(Be.remainingPackages),0),me=G.reduce((ue,Be)=>ue+_r(Be.remainingPackages),0);return{providerTotalMaster:Er(be),providerTotalVendor:Er(ut),orderedPacksMaster:wo(Ge),remainingPacksMaster:wo(ne),orderedPacksVendor:wo(bt),remainingPacksVendor:wo(Rt),globalRemainingMaster:wo(ae),globalRemainingVendor:wo(me)}},[ie,J,le,n,s,z,G]),he=v.useMemo(()=>{const ge={};let Xe=0;for(const ot of M){const be=String(ot.date||"").trim();if(!be)continue;const Ge=Math.max(0,_r(ot.amount));Xe+=Ge,ge[be]=Er((ge[be]||0)+Ge)}return{total:Er(Xe),byDay:ge}},[M]),oe=v.useMemo(()=>{let ge=0;for(const Xe of ie){const ot=Array.isArray(Xe.items)?Xe.items:[];if(ot.length)for(const be of ot)ge+=_r(be==null?void 0:be.subtotal);else ge+=_r(Xe.subtotal)}return Er(ge)},[ie]),je=v.useMemo(()=>{let ge=0,Xe=0;for(const be of J){const Ge=String(be.sellerId||"").trim(),ut=Ge?st[Ge]:void 0,bt=lS(ut==null?void 0:ut.branch)||"ISLA",Rt=_r(be.totalVendor)||_r(bt==="ISLA"?be.totalIsla:bt==="RIVAS"?be.totalRivas:be.totalSanJorge);ge+=Rt,bt==="ISLA"&&(Xe+=Rt)}const ot=Er(_r(Ot.expectedIsla)-Xe);return{dispersedTotal:Er(ge),dispersedIsla:Er(Xe),totalExistenteIsla:ot}},[J,st,Ot.expectedIsla]),Qe=v.useMemo(()=>{var Rt,Wt;const ge=mt=>{const ne=Math.max(1,Math.floor(_r(mt.unitsPerPackage||1))),ae=_r(mt.totalUnits)>0?_r(mt.totalUnits):_r(mt.packages)*ne;let me=0;_r(mt.remainingUnits)>0?me=_r(mt.remainingUnits):_r(mt.remainingPackages)>0?me=_r(mt.remainingPackages)*ne:me=0;const ue=Math.max(0,ae-me);return{orderedUnits:ae,remainingUnits:me,soldUnits:ue,upp:ne}},Xe=mt=>{const ne=st[mt];return lS(ne==null?void 0:ne.branch)},ot=(mt,ne)=>{const ae=_r(mt.totalVendor)||(ne==="ISLA"?_r(mt.totalIsla):ne==="RIVAS"?_r(mt.totalRivas):ne==="SAN_JORGE"?_r(mt.totalSanJorge):0);if(ae>0)return ae;const me=_r(mt.unitPriceVendor);if(me>0){const{orderedUnits:ue}=ge(mt);return me*ue}return 0},be=(mt,ne)=>{const ae=_r(mt.unitPriceVendor);if(ae>0)return ae;const me=ot(mt,ne),{orderedUnits:ue}=ge(mt);return me>0&&ue>0?me/ue:0},Ge=new Map;for(const mt of J){const ne=String(mt.orderId||"").trim(),ae=ne||`DOC:${mt.id}`,me=String(mt.sellerId||"").trim(),ue=String(mt.sellerName||"").trim()||me&&((Rt=st[me])==null?void 0:Rt.name)||""||"(sin vendedor)",Be=String(mt.date||"").trim(),Oe=me?Xe(me):"",{orderedUnits:We,remainingUnits:it,soldUnits:gt}=ge(mt),xt=ot(mt,Oe),_t=be(mt,Oe),Ce=_t>0?_t*gt:We>0?xt*gt/We:0,at=_t>0?_t*it:We>0?xt*it/We:0;Ge.has(ae)||Ge.set(ae,{orderKey:ae,orderId:ne||ae,date:Be,sellerId:me,sellerName:ue,branch:Oe,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const wt=Ge.get(ae);wt.lines.push({...mt,orderedUnits:We,soldUnits:gt,remainingUnits:it,lineTotal:Er(xt),lineSoldValue:Er(Ce),lineRemainingValue:Er(at)}),wt.totalOrden+=xt,wt.vendido+=Ce,wt.restante+=at}for(const mt of Ge.values()){const ne=mt.sellerId?_r((Wt=st[mt.sellerId])==null?void 0:Wt.commissionPercent):0;mt.comision=Er(mt.totalOrden*ne/100),mt.totalEsperado=Er(mt.totalOrden-mt.comision),mt.totalOrden=Er(mt.totalOrden),mt.vendido=Er(mt.vendido),mt.restante=Er(mt.restante)}const ut=Array.from(Ge.values()).sort((mt,ne)=>mt.date&&ne.date?mt.date<ne.date?1:-1:ne.totalOrden-mt.totalOrden),bt=ut.reduce((mt,ne)=>(mt.totalOrden+=_r(ne.totalOrden),mt.vendido+=_r(ne.vendido),mt.restante+=_r(ne.restante),mt.comision+=_r(ne.comision),mt.totalEsperado+=_r(ne.totalEsperado),mt),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Er(bt.totalOrden),vendido:Er(bt.vendido),restante:Er(bt.restante),comision:Er(bt.comision),totalEsperado:Er(bt.totalEsperado)},orders:ut}},[J,st]),tt=v.useMemo(()=>{if(!xe)return null;const ge=Qe.orders.find(be=>be.orderKey===xe);if(!ge)return null;const Xe={};for(const be of ge.lines){const Ge=String(be.productName||"(sin nombre)");Xe[Ge]||(Xe[Ge]={productName:Ge,asociados:0,vendidos:0,restantes:0}),Xe[Ge].asociados+=_r(be.orderedUnits),Xe[Ge].vendidos+=_r(be.soldUnits),Xe[Ge].restantes+=_r(be.remainingUnits)}const ot=Object.values(Xe).map(be=>({...be,asociados:Math.floor(be.asociados),vendidos:Math.floor(be.vendidos),restantes:Math.floor(be.restantes)})).sort((be,Ge)=>Ge.asociados-be.asociados);return{...ge,products:ot}},[xe,Qe.orders]),rt=v.useMemo(()=>{const ge=z.reduce((ot,be)=>ot+_r(be.remainingPackages),0),Xe=G.reduce((ot,be)=>ot+_r(be.remainingPackages),0);return{masterRemainingPackages:wo(ge),vendorRemainingPackages:wo(Xe)}},[z,G]),Te=v.useMemo(()=>{const ge=new Map,Xe=be=>C==="DIA"?{key:be.date,label:be.date}:C==="VENDEDOR"?{key:be.vendorId||"",label:be.vendorName||""}:C==="PRODUCTO"?{key:be.productName||"",label:be.productName||""}:{key:be.branch||"",label:be.branch||""};for(const be of yt){const{key:Ge,label:ut}=Xe(be);ge.has(Ge)||ge.set(Ge,{key:Ge,label:ut,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const bt=ge.get(Ge);bt.rows.push(be),be.type==="CREDITO"?(bt.packsCredit+=_r(be.packages),bt.salesCredit+=_r(be.amount),bt.commCredit+=_r(be.commission)):(bt.packsCash+=_r(be.packages),bt.salesCash+=_r(be.amount),bt.commCash+=_r(be.commission))}const ot=Array.from(ge.values()).map(be=>({...be,packsCash:wo(be.packsCash),packsCredit:wo(be.packsCredit),salesCash:Er(be.salesCash),salesCredit:Er(be.salesCredit),commCash:Er(be.commCash),commCredit:Er(be.commCredit)}));return C==="DIA"?ot.sort((be,Ge)=>be.key<Ge.key?1:-1):ot.sort((be,Ge)=>Ge.salesCash+Ge.salesCredit-(be.salesCash+be.salesCredit)),ot},[yt,C]),Ee=v.useMemo(()=>{if(!te)return[];const ge=Te.find(Xe=>Xe.key===te);return(ge==null?void 0:ge.rows)||[]},[te,Te]),V=v.useMemo(()=>{const ge={};for(const Xe of Ee){const ot=Xe.productName||"(sin nombre)";ge[ot]||(ge[ot]={productName:ot,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),Xe.type==="CREDITO"?(ge[ot].packsCredit+=_r(Xe.packages),ge[ot].salesCredit+=_r(Xe.amount),ge[ot].commCredit+=_r(Xe.commission)):(ge[ot].packsCash+=_r(Xe.packages),ge[ot].salesCash+=_r(Xe.amount),ge[ot].commCash+=_r(Xe.commission))}return Object.values(ge).map(Xe=>({...Xe,packsCash:wo(Xe.packsCash),packsCredit:wo(Xe.packsCredit),salesCash:Er(Xe.salesCash),salesCredit:Er(Xe.salesCredit),commCash:Er(Xe.commCash),commCredit:Er(Xe.commCredit)})).sort((Xe,ot)=>ot.salesCash+ot.salesCredit-(Xe.salesCash+Xe.salesCredit))},[Ee]),Ae=v.useMemo(()=>{const ge={},Xe=Ge=>(nt[Ge]||"").trim()||Ge;for(const Ge of F){const ut=String(Ge.customerId||"").trim();if(!ut)continue;const bt=String(Ge.date||"");if(bt&&bt>s)continue;ge[ut]||(ge[ut]={customerId:ut,name:Xe(ut),balance:0,lastPayment:""});const Rt=_r(Ge.amount);Ge.type==="CARGO"&&(ge[ut].balance+=Rt),Ge.type==="ABONO"&&(ge[ut].balance-=Rt,(!ge[ut].lastPayment||bt>ge[ut].lastPayment)&&(ge[ut].lastPayment=bt))}const ot=Object.values(ge).map(Ge=>({...Ge,balance:Er(Ge.balance)})).filter(Ge=>Ge.balance>0).sort((Ge,ut)=>ut.balance-Ge.balance),be=Er(ot.reduce((Ge,ut)=>Ge+ut.balance,0));return{count:ot.length,totalPending:be,list:ot.slice(0,20)}},[F,nt,s]),Ne=v.useMemo(()=>{const ge=Er(Ct.salesTotal),Xe=Er(Ct.commTotal),ot=Er(he.total),be=Er(ge-Xe-ot),Ge=new Set;for(const ne of yt)ne.date&&Ge.add(ne.date);const ut=Math.max(1,Ge.size),bt=Er(ge/ut),Rt=Er(Xe/ut),Wt=Er(ot/ut),mt=Er(be/ut);return{ingreso:ge,comision:Xe,gastos:ot,gananciaNeta:be,daysCount:ut,ingresoDia:bt,comisionDia:Rt,gastosDia:Wt,netaDia:mt}},[Ct,he.total,yt]),Re=v.useMemo(()=>{const ge={};for(const Ge of yt){const ut=Ge.date;ut&&(ge[ut]||(ge[ut]={date:ut,ingreso:0,comision:0}),ge[ut].ingreso+=_r(Ge.amount),ge[ut].comision+=_r(Ge.commission))}const Xe=Object.keys(ge).sort((Ge,ut)=>Ge<ut?-1:1),ot=Xe.map(Ge=>({label:Ge.slice(5),value:Er(ge[Ge].ingreso)})),be=Xe.map(Ge=>{var mt,ne;const ut=_r((mt=ge[Ge])==null?void 0:mt.ingreso),bt=_r((ne=ge[Ge])==null?void 0:ne.comision),Rt=_r(he.byDay[Ge]||0),Wt=ut-bt-Rt;return{label:Ge.slice(5),value:Er(Wt)}});return{seriesIngreso:ot,seriesNeta:be,datesCount:Xe.length}},[yt,he.byDay]),ze=v.useMemo(()=>[{label:"Rivas",value:_r(Pt.RIVAS.sales)},{label:"San Jorge",value:_r(Pt.SAN_JORGE.sales)},{label:"Isla",value:_r(Pt.ISLA.sales)}].map(ge=>({...ge,value:Er(ge.value)})),[Pt]),Ye=async()=>{if(W.current){W.current.classList.add("force-pdf-colors");try{const Xe=(await G0(W.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ot=new Br;ot.addImage(Xe,"PNG",10,10,190,0),ot.save(`data_center_dulces_${n}_a_${s}.pdf`)}finally{W.current.classList.remove("force-pdf-colors")}}},Ze=()=>{const Xe=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...yt.map(ut=>[ut.date,ut.processedDate||"",ut.status,ut.type,ut.vendorId,`"${String(ut.vendorName||"").replace(/"/g,'""')}"`,ut.branch||"",`"${String(ut.productName||"").replace(/"/g,'""')}"`,bs(ut.packages),fr(ut.amount),fr(ut.commission),ut.customerId||"",`"${String(Et(ut)||"").replace(/"/g,'""')}"`].join(","))],ot=new Blob([Xe.join(`
`)],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(ot),Ge=document.createElement("a");Ge.href=be,Ge.download=`data_center_dulces_${n}_a_${s}.csv`,Ge.click(),URL.revokeObjectURL(be)};return e?o.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:o.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[o.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[o.jsx("button",{onClick:Ye,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),o.jsx("button",{onClick:Ze,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),o.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:n,onChange:ge=>a(ge.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:ge=>i(ge.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:ge=>c(ge.target.value),children:[o.jsx("option",{value:"TODAS",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:ge=>d(ge.target.value),children:[o.jsx("option",{value:"AMBAS",children:"Ambas"}),o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:ge=>h(ge.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),de.map(ge=>o.jsx("option",{value:ge.id,children:ge.name||ge.id},ge.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:ge=>m(ge.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"RIVAS",children:"Rivas"}),o.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),o.jsx("option",{value:"ISLA",children:"Isla"})]})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:ge=>g(ge.target.value),placeholder:"Ej: Conitos"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:ge=>y(ge.target.value),placeholder:"Ej: Javier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:ge=>w(ge.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:I,onChange:ge=>T(ge.target.value),placeholder:"999999"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:C,onChange:ge=>{Q(""),E(ge.target.value)},children:[o.jsx("option",{value:"DIA",children:"Da"}),o.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),o.jsx("option",{value:"PRODUCTO",children:"Producto"}),o.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{Y(""),qe("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Le==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),o.jsx("button",{onClick:()=>{Y(""),qe("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Le==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",o.jsxs("strong",{children:["C$",fr(he.total)]})]})]}),o.jsxs("div",{ref:W,children:[Le==="MACRO"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ne.ingreso)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",fr(Ne.comision)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",fr(Ct.commCash),"  Crdito: C$",fr(Ct.commCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",fr(Ne.gastos)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ne.gananciaNeta)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ne.netaDia)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",o.jsx("strong",{children:Ne.daysCount})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[o.jsx(RH,{title:"Ventas por da (Ingreso)",series:Re.seriesIngreso,valuePrefix:"C$"}),o.jsx(RH,{title:"Ganancia neta por da (real)",series:Re.seriesNeta,valuePrefix:"C$"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(lUe,{title:"Distribucin de ventas por sucursal",items:ze})})]}),Le==="DETALLE"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(Ct.packsCash)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(Ct.packsCredit)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ct.salesTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",fr(Ct.salesCash),"  Crdito: C$",fr(Ct.salesCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ct.commTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",fr(Ct.commCash),"  Crdito: C$",fr(Ct.commCredit)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(Ot.grossTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",fr(Ot.grossRivas),"  SJ:"," ",fr(Ot.grossSanJorge),"  I:"," ",fr(Ot.grossIsla)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",fr(Ot.expectedRivas)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",fr(Ot.expectedSanJorge)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",fr(Ot.expectedIsla)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",fr(Pt.RIVAS.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",fr(Pt.SAN_JORGE.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",fr(Pt.ISLA.sales)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",fr(fe.RIVAS)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",fr(fe.SAN_JORGE)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",fr(fe.ISLA)]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(ve.providerTotalVendor)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(ve.orderedPacksMaster)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:bs(ve.remainingPacksMaster)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:bs(rt.masterRemainingPackages)})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(ve.orderedPacksVendor)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:bs(ve.remainingPacksVendor)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:bs(rt.vendorRemainingPackages)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(oe)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(je.dispersedTotal)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(je.dispersedIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",fr(je.totalExistenteIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",o.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",fr(Qe.global.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",fr(Qe.global.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",fr(Qe.global.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",fr(Qe.global.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",fr(Qe.global.totalEsperado)]})]})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),Qe.orders.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:Qe.orders.map(ge=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:ge.orderId}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[ge.sellerName," ",ge.branch?` ${ge.branch}`:""," ",ge.date?` ${ge.date}`:""]})]}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Y(ge.orderKey),children:"Ver"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.totalOrden)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.vendido)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.restante)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.comision)]})]})]})]},ge.orderKey))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Orden"}),o.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total orden"}),o.jsx("th",{className:"border p-2",children:"Vendido"}),o.jsx("th",{className:"border p-2",children:"Restante"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Total esperado"}),o.jsx("th",{className:"border p-2",children:"Accin"})]})}),o.jsx("tbody",{children:Qe.orders.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:ge.orderId}),o.jsx("td",{className:"border p-2 text-left",children:ge.sellerName}),o.jsx("td",{className:"border p-2",children:ge.branch||""}),o.jsx("td",{className:"border p-2",children:ge.date||""}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.totalOrden)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.vendido)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.restante)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.comision)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.totalEsperado)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Y(ge.orderKey),children:"Ver detalle"})})]},ge.orderKey))})]})}),tt&&o.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",tt.orderId]}),o.jsx("button",{onClick:()=>Y(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",fr(tt.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",fr(tt.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",fr(tt.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",fr(tt.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",fr(tt.totalEsperado)]})]})]}),o.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),o.jsx("div",{className:"md:hidden space-y-2",children:tt.products.map(ge=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:ge.productName}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),o.jsx("div",{className:"font-bold",children:ge.asociados})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),o.jsx("div",{className:"font-bold",children:ge.vendidos})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-bold",children:ge.restantes})]})]})]},ge.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),o.jsx("th",{className:"border p-2",children:"Asociados"}),o.jsx("th",{className:"border p-2",children:"Vendidos"}),o.jsx("th",{className:"border p-2",children:"Restantes"})]})}),o.jsxs("tbody",{children:[tt.products.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:ge.productName}),o.jsx("td",{className:"border p-2",children:ge.asociados}),o.jsx("td",{className:"border p-2",children:ge.vendidos}),o.jsx("td",{className:"border p-2",children:ge.restantes})]},ge.productName)),tt.products.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(rt.masterRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:bs(rt.vendorRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Ke.cashArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ke.cashArr.map(ge=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ge.name}),o.jsxs("strong",{className:"ml-2",children:["C$",fr(ge.total)]})]},ge.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Ke.creditArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ke.creditArr.map(ge=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ge.name}),o.jsxs("strong",{className:"ml-2",children:["C$",fr(ge.total)]})]},ge.vendorId))})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",s,")"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:["Clientes con saldo: ",o.jsx("strong",{children:Ae.count})]}),o.jsxs("div",{children:["Saldo total pendiente:"," ",o.jsxs("strong",{children:["C$",fr(Ae.totalPending)]})]}),o.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Ae.list.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:Ae.list.map(ge=>o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:ge.name}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",fr(ge.balance)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:ge.lastPayment||""})]})]},ge.customerId))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Saldo"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),o.jsx("tbody",{children:Ae.list.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:ge.name}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.balance)]}),o.jsx("td",{className:"border p-2",children:ge.lastPayment||""})]},ge.customerId))})]})})]})]}),o.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",C,")"]}),o.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),S?o.jsx("p",{className:"text-sm",children:"Cargando..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:Te.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):Te.map(ge=>o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:ge.label}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Q(ge.key),children:"Ver detalle"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"font-bold",children:bs(ge.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"font-bold",children:bs(ge.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.commCredit)]})]})]})]},ge.key))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:C==="DIA"?"Da":C==="VENDEDOR"?"Vendedor":C==="PRODUCTO"?"Producto":"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsxs("tbody",{children:[Te.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:ge.label}),o.jsx("td",{className:"border p-2",children:bs(ge.packsCash)}),o.jsx("td",{className:"border p-2",children:bs(ge.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.commCredit)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Q(ge.key),children:"Ver detalle"})})]},ge.key)),Te.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),te&&o.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((dt=Te.find(ge=>ge.key===te))==null?void 0:dt.label)||te]}),o.jsx("button",{onClick:()=>Q(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",fr(Ee.filter(ge=>ge.type==="CONTADO").reduce((ge,Xe)=>ge+_r(Xe.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",fr(Ee.filter(ge=>ge.type==="CREDITO").reduce((ge,Xe)=>ge+_r(Xe.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",o.jsx("strong",{children:bs(Ee.filter(ge=>ge.type==="CONTADO").reduce((ge,Xe)=>ge+_r(Xe.packages),0))})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",o.jsx("strong",{children:bs(Ee.filter(ge=>ge.type==="CREDITO").reduce((ge,Xe)=>ge+_r(Xe.packages),0))})]})]}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),o.jsx("div",{className:"md:hidden space-y-2 mb-4",children:Ee.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):Ee.map(ge=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:ge.productName}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",fr(ge.amount)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:ge.vendorName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),o.jsx("div",{className:"font-bold",children:ge.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),o.jsx("div",{className:"font-bold",children:ge.branch||""})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-bold",children:bs(ge.packages)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.commission)]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",ge.date]})]},ge.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsxs("tbody",{children:[Ee.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:ge.vendorName}),o.jsx("td",{className:"border p-2",children:ge.productName}),o.jsx("td",{className:"border p-2",children:ge.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-2",children:ge.branch||""}),o.jsx("td",{className:"border p-2",children:bs(ge.packages)}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.amount)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.commission)]}),o.jsx("td",{className:"border p-2",children:ge.date})]},ge.id)),Ee.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),o.jsx("div",{className:"md:hidden space-y-2",children:V.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):V.map(ge=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:ge.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),o.jsx("div",{className:"font-bold",children:bs(ge.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),o.jsx("div",{className:"font-bold",children:bs(ge.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",fr(ge.commCredit)]})]})]})]},ge.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsxs("tbody",{children:[V.map(ge=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:ge.productName}),o.jsx("td",{className:"border p-2",children:bs(ge.packsCash)}),o.jsx("td",{className:"border p-2",children:bs(ge.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",fr(ge.commCredit)]})]},ge.productName)),V.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),B&&o.jsx("p",{className:"mt-3 text-sm",children:B})]})}):o.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function wne(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=wne(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=wne(t))&&(n&&(n+=" "),n+=e);return n}var dUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yD(t){if(typeof t!="string")return!1;var e=dUe;return e.includes(t)}var AUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fUe=new Set(AUe);function Nne(t){return typeof t!="string"?!1:fUe.has(t)}function _ne(t){return typeof t=="string"&&t.startsWith("data-")}function mA(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Nne(r)||_ne(r))&&(e[r]=t[r]);return e}function ob(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return mA(e)}return typeof t=="object"&&!Array.isArray(t)?mA(t):null}function Lu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Nne(r)||_ne(r)||yD(r))&&(e[r]=t[r]);return e}var hUe=["children","width","height","viewBox","className","style","title","desc"];function ok(){return ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ok.apply(null,arguments)}function mUe(t,e){if(t==null)return{};var r,n,a=pUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bD=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=t,d=mUe(t,hUe),A=s||{width:n,height:a,x:0,y:0},h=wa("recharts-surface",i);return v.createElement("svg",ok({},Lu(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),gUe=["children","className"];function lk(){return lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lk.apply(null,arguments)}function xUe(t,e){if(t==null)return{};var r,n,a=vUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ul=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=xUe(t,gUe),s=wa("recharts-layer",n);return v.createElement("g",lk({className:s},Lu(a),{ref:e}),r)}),Cne=v.createContext(null),yUe=()=>v.useContext(Cne);function Ma(t){return function(){return t}}const Ene=Math.cos,cS=Math.sin,Od=Math.sqrt,uS=Math.PI,w4=2*uS,ck=Math.PI,uk=2*ck,bm=1e-6,bUe=uk-bm;function Sne(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function wUe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Sne;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class NUe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Sne:wUe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-e,u=a-r,d=i-e,A=l-r,h=d*d+A*A;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>bm)if(!(Math.abs(A*c-u*d)>bm)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let f=n-i,m=a-l,p=c*c+u*u,g=f*f+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((ck-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,I=b/x;Math.abs(w-1)>bm&&this._append`L${e+w*d},${r+w*A}`,this._append`A${s},${s},0,0,${+(A*f>d*m)},${this._x1=e+I*c},${this._y1=r+I*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,A=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>bm||Math.abs(this._y1-d)>bm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%uk+uk),h>bUe?this._append`A${n},${n},0,1,${A},${e-l},${r-c}A${n},${n},0,1,${A},${this._x1=u},${this._y1=d}`:h>bm&&this._append`A${n},${n},0,${+(h>=ck)},${A},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function wD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new NUe(e)}function ND(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ine(t){this._context=t}Ine.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function N4(t){return new Ine(t)}function Bne(t){return t[0]}function Tne(t){return t[1]}function Pne(t,e){var r=Ma(!0),n=null,a=N4,s=null,i=wD(l);t=typeof t=="function"?t:t===void 0?Bne:Ma(t),e=typeof e=="function"?e:e===void 0?Tne:Ma(e);function l(c){var u,d=(c=ND(c)).length,A,h=!1,f;for(n==null&&(s=a(f=i())),u=0;u<=d;++u)!(u<d&&r(A=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(A,u,c),+e(A,u,c));if(f)return s=null,f+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ma(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ma(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ma(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function __(t,e,r){var n=null,a=Ma(!0),s=null,i=N4,l=null,c=wD(u);t=typeof t=="function"?t:t===void 0?Bne:Ma(+t),e=typeof e=="function"?e:Ma(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Tne:Ma(+r);function u(A){var h,f,m,p=(A=ND(A)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=A[h],h,A))===x)if(x=!x)f=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=f;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(g,h,A),w[h]=+e(g,h,A),l.point(n?+n(g,h,A):b[h],r?+r(g,h,A):w[h]))}if(y)return l=null,y+""||null}function d(){return Pne().defined(a).curve(i).context(s)}return u.x=function(A){return arguments.length?(t=typeof A=="function"?A:Ma(+A),n=null,u):t},u.x0=function(A){return arguments.length?(t=typeof A=="function"?A:Ma(+A),u):t},u.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Ma(+A),u):n},u.y=function(A){return arguments.length?(e=typeof A=="function"?A:Ma(+A),r=null,u):e},u.y0=function(A){return arguments.length?(e=typeof A=="function"?A:Ma(+A),u):e},u.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Ma(+A),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(A){return arguments.length?(a=typeof A=="function"?A:Ma(!!A),u):a},u.curve=function(A){return arguments.length?(i=A,s!=null&&(l=i(s)),u):i},u.context=function(A){return arguments.length?(A==null?s=l=null:l=i(s=A),u):s},u}class jne{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function _Ue(t){return new jne(t,!0)}function CUe(t){return new jne(t,!1)}const _D={draw(t,e){const r=Od(e/uS);t.moveTo(r,0),t.arc(0,0,r,0,w4)}},EUe={draw(t,e){const r=Od(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},kne=Od(1/3),SUe=kne*2,IUe={draw(t,e){const r=Od(e/SUe),n=r*kne;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},BUe={draw(t,e){const r=Od(e),n=-r/2;t.rect(n,n,r,r)}},TUe=.8908130915292852,Fne=cS(uS/10)/cS(7*uS/10),PUe=cS(w4/10)*Fne,jUe=-Ene(w4/10)*Fne,kUe={draw(t,e){const r=Od(e*TUe),n=PUe*r,a=jUe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=w4*s/5,l=Ene(i),c=cS(i);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},iT=Od(3),FUe={draw(t,e){const r=-Od(e/(iT*3));t.moveTo(0,r*2),t.lineTo(-iT*r,-r),t.lineTo(iT*r,-r),t.closePath()}},uu=-.5,du=Od(3)/2,dk=1/Od(12),OUe=(dk/2+1)*3,DUe={draw(t,e){const r=Od(e/OUe),n=r/2,a=r*dk,s=n,i=r*dk+r,l=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(l,c),t.lineTo(uu*n-du*a,du*n+uu*a),t.lineTo(uu*s-du*i,du*s+uu*i),t.lineTo(uu*l-du*c,du*l+uu*c),t.lineTo(uu*n+du*a,uu*a-du*n),t.lineTo(uu*s+du*i,uu*i-du*s),t.lineTo(uu*l+du*c,uu*c-du*l),t.closePath()}};function RUe(t,e){let r=null,n=wD(a);t=typeof t=="function"?t:Ma(t||_D),e=typeof e=="function"?e:Ma(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ma(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ma(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function dS(){}function AS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function One(t){this._context=t}One.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:AS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function MUe(t){return new One(t)}function Dne(t){this._context=t}Dne.prototype={areaStart:dS,areaEnd:dS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function LUe(t){return new Dne(t)}function Rne(t){this._context=t}Rne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:AS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function UUe(t){return new Rne(t)}function Mne(t){this._context=t}Mne.prototype={areaStart:dS,areaEnd:dS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function QUe(t){return new Mne(t)}function MH(t){return t<0?-1:1}function LH(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(MH(s)+MH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function UH(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function oT(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,i-l*r,s,i)}function fS(t){this._context=t}fS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oT(this,this._t0,UH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,oT(this,UH(this,r=LH(this,t,e)),r);break;default:oT(this,this._t0,r=LH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Lne(t){this._context=new Une(t)}(Lne.prototype=Object.create(fS.prototype)).point=function(t,e){fS.prototype.point.call(this,e,t)};function Une(t){this._context=t}Une.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function VUe(t){return new fS(t)}function HUe(t){return new Lne(t)}function Qne(t){this._context=t}Qne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=QH(t),a=QH(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function QH(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function $Ue(t){return new Qne(t)}function _4(t,e){this._context=t,this._t=e}_4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function KUe(t){return new _4(t,.5)}function GUe(t){return new _4(t,0)}function qUe(t){return new _4(t,1)}function Ip(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,l=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Ak(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function zUe(t,e){return t[e]}function WUe(t){const e=[];return e.key=t,e}function XUe(){var t=Ma([]),e=Ak,r=Ip,n=zUe;function a(s){var i=Array.from(t.apply(this,arguments),WUe),l,c=i.length,u=-1,d;for(const A of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(A,i[l].key,u,s)]).data=A;for(l=0,d=ND(e(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ma(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ma(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?Ak:typeof s=="function"?s:Ma(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Ip,a):r},a}function YUe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}Ip(t,e)}}function JUe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=t[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}Ip(t,e)}}function ZUe(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=t[e[l]],A=d[n][1]||0,h=d[n-1][1]||0,f=(A-h)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;f+=g-x}c+=A,u+=f*A}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Ip(t,e)}}var C4={},Vne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Vne);var CD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(CD);var E4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(E4);var S4={},Hne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Hne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hne,r=E4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<i;){const A=a[l];u?A==="\\"&&l+1<i?(l++,c+=a[l]):A===u?u="":c+=A:d?A==='"'||A==="'"?u=A:A==="]"?(d=!1,s.push(c),c=""):c+=A:A==="["?(d=!0,c&&(s.push(c),c="")):A==="."?c&&(s.push(c),c=""):c+=A,l++}return c&&s.push(c),s}t.toPath=n})(S4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vne,r=CD,n=E4,a=S4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let A=0;A<c.length;A++){if(d==null||e.isUnsafeProperty(c[A]))return u;d=d[c[A]]}return d===void 0?u:d}t.get=s})(C4);var e7e=C4.get;const Bp=Ff(e7e);var t7e=4;function t0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t7e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function Ds(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var l=r[i-1];return typeof l=="string"?a+l+s:l!==void 0?a+t0(l)+s:a+s},"")}var Lo=t=>t===0?0:t>0?1:-1,pA=t=>typeof t=="number"&&t!=+t,Sf=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Kr=t=>(typeof t=="number"||t instanceof Number)&&!pA(t),gA=t=>Kr(t)||typeof t=="string",r7e=0,lb=t=>{var e=++r7e;return"".concat(t||"").concat(e)},fl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Kr(e)&&typeof e!="string")return n;var s;if(Sf(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return pA(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},$ne=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function Bi(t,e,r){return Kr(t)&&Kr(e)?t0(t+r*(e-t)):e}function n7e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Bp(n,e))===r)}var ho=t=>t===null||typeof t>"u",iw=t=>ho(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function a7e(t){return t!=null}function ow(){}var s7e=["type","size","sizeType"];function fk(){return fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fk.apply(null,arguments)}function VH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VH(Object(r),!0).forEach(function(n){i7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i7e(t,e,r){return(e=o7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o7e(t){var e=l7e(t,"string");return typeof e=="symbol"?e:e+""}function l7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c7e(t,e){if(t==null)return{};var r,n,a=u7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function u7e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Kne={symbolCircle:_D,symbolCross:EUe,symbolDiamond:IUe,symbolSquare:BUe,symbolStar:kUe,symbolTriangle:FUe,symbolWye:DUe},d7e=Math.PI/180,A7e=t=>{var e="symbol".concat(iw(t));return Kne[e]||_D},f7e=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*d7e;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},h7e=(t,e)=>{Kne["symbol".concat(iw(t))]=e},ED=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=c7e(t,s7e),s=HH(HH({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var l=()=>{var h=A7e(i),f=RUe().type(h).size(f7e(r,n,i)),m=f();if(m!==null)return m},{className:c,cx:u,cy:d}=s,A=Lu(s);return Kr(u)&&Kr(d)&&Kr(r)?v.createElement("path",fk({},A,{className:wa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};ED.registerSymbol=h7e;var Gne=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,m7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{yD(a)&&(n[a]=s=>r[a](r,s))}),n},p7e=(t,e,r)=>n=>(t(e,r,n),null),lw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];yD(a)&&typeof s=="function"&&(n||(n={}),n[a]=p7e(s,e,r))}),n};function $H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function g7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$H(Object(r),!0).forEach(function(n){x7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$H(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x7e(t,e,r){return(e=v7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v7e(t){var e=y7e(t,"string");return typeof e=="symbol"?e:e+""}function y7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vo(t,e){var r=g7e({},t),n=e,a=Object.keys(e),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hS.apply(null,arguments)}function KH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(r),!0).forEach(function(n){w7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w7e(t,e,r){return(e=N7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N7e(t){var e=_7e(t,"string");return typeof e=="symbol"?e:e+""}function _7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xu=32,C7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function E7e(t){var{data:e,iconType:r,inactiveColor:n}=t,a=xu/2,s=xu/6,i=xu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:xu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(xu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(xu/8,"h").concat(xu,"v").concat(xu*3/4,"h").concat(-xu,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=b7e({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(ED,{fill:l,cx:a,cy:a,size:xu,sizeType:"diameter",type:c})}function S7e(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,l={x:0,y:0,width:xu,height:xu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,A)=>{var h=d.formatter||a,f=wa({"recharts-legend-item":!0,["legend-item-".concat(A)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,A):d.value;return v.createElement("li",hS({className:f,style:c,key:"legend-item-".concat(A)},lw(t,d,A)),v.createElement(bD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(E7e,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var I7e=t=>{var e=Vo(t,C7e),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(S7e,hS({},e,{payload:r})))},qne={},zne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}t.uniqBy=e})(zne);var SD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(SD);var Wne={},I4={},Xne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Xne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xne;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(I4);var Yne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Yne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I4,r=Yne;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Wne);var Jne={},Zne={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Zne);var eae={},ID={},tae={},BD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(BD);var TD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(TD);var PD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(PD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BD,r=TD,n=PD;function a(d,A,h){return typeof h!="function"?a(d,A,()=>{}):s(d,A,function f(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,f,b)},new Map)}function s(d,A,h,f){if(A===d)return!0;switch(typeof A){case"object":return i(d,A,h,f);case"function":return Object.keys(A).length>0?s(d,{...A},h,f):n.eq(d,A);default:return e.isObject(d)?typeof A=="string"?A==="":!0:n.eq(d,A)}}function i(d,A,h,f){if(A==null)return!0;if(Array.isArray(A))return c(d,A,h,f);if(A instanceof Map)return l(d,A,h,f);if(A instanceof Set)return u(d,A,h,f);const m=Object.keys(A);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(f!=null&&f.has(A))return f.get(A)===d;f==null||f.set(A,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||A[g]===void 0&&d[g]!==void 0||A[g]===null&&d[g]!==null||!h(d[g],A[g],g,d,A,f))return!1}return!0}finally{f==null||f.delete(A)}}function l(d,A,h,f){if(A.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of A.entries()){const g=d.get(m);if(h(g,p,m,d,A,f)===!1)return!1}return!0}function c(d,A,h,f){if(A.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<A.length;p++){const g=A[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,A,f)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,A,h,f){return A.size===0?!0:d instanceof Set?c([...d],[...A],h,f):!1}t.isMatchWith=a,t.isSetMatch=u})(tae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tae;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(ID);var rae={},jD={},nae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(nae);var kD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(kD);var FD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",A="[object Function]",h="[object ArrayBuffer]",f="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",I="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",E="[object BigInt64Array]",S="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=S,t.float64ArrayTag=O,t.functionTag=A,t.int16ArrayTag=T,t.int32ArrayTag=C,t.int8ArrayTag=I,t.mapTag=c,t.numberTag=n,t.objectTag=f,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(FD);var aae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nae,r=kD,n=FD,a=TD,s=aae;function i(d,A){return l(d,void 0,d,new Map,A)}function l(d,A,h,f=new Map,m=void 0){const p=m==null?void 0:m(d,A,h,f);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(f.has(d))return f.get(d);if(Array.isArray(d)){const g=new Array(d.length);f.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,f,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;f.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,h,f,m));return g}if(d instanceof Set){const g=new Set;f.set(d,g);for(const x of d)g.add(l(x,void 0,h,f,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);f.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,f,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return f.set(d,g),c(g,d,h,f,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return f.set(d,g),c(g,d,h,f,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof Error){const g=new d.constructor;return f.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,f,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(d instanceof String){const g=new String(d.valueOf());return f.set(d,g),c(g,d,h,f,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return f.set(d,g),c(g,d,h,f,m),g}return d}function c(d,A,h=d,f,m){const p=[...Object.keys(A),...e.getSymbols(A)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(A[x],x,h,f,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=l,t.copyProperties=c})(jD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(rae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID,r=rae;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(eae);var sae={},iae={},oae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jD,r=FD;function n(a,s){return e.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(A,a),A}case r.argumentsTag:{const A={};return e.copyProperties(A,a),A.length=a.length,A[Symbol.iterator]=a[Symbol.iterator],A}default:return}})}t.cloneDeepWith=n})(oae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oae;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(iae);var lae={},OD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(OD);var cae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(cae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CD,r=OD,n=cae,a=S4;function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const A=c[d];if((u==null||!Object.hasOwn(u,A))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(A)&&A<u.length))return!1;u=u[A]}return!0}t.has=s})(lae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID,r=E4,n=iae,a=C4,s=lae;function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(sae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SD,r=Zne,n=eae,a=sae;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(Jne);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zne,r=SD,n=Wne,a=Jne;function s(i,l=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(l)):[]}t.uniqBy=s})(qne);var B7e=qne.uniqBy;const GH=Ff(B7e);function uae(t,e,r){return e===!0?GH(t,r):typeof e=="function"?GH(t,e):t}var dae={exports:{}},Aae={},fae={exports:{}},hae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av=v;function T7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var P7e=typeof Object.is=="function"?Object.is:T7e,j7e=av.useState,k7e=av.useEffect,F7e=av.useLayoutEffect,O7e=av.useDebugValue;function D7e(t,e){var r=e(),n=j7e({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return F7e(function(){a.value=r,a.getSnapshot=e,lT(a)&&s({inst:a})},[t,r,e]),k7e(function(){return lT(a)&&s({inst:a}),t(function(){lT(a)&&s({inst:a})})},[t]),O7e(r),r}function lT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!P7e(t,r)}catch{return!0}}function R7e(t,e){return e()}var M7e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?R7e:D7e;hae.useSyncExternalStore=av.useSyncExternalStore!==void 0?av.useSyncExternalStore:M7e;fae.exports=hae;var L7e=fae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4=v,U7e=L7e;function Q7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var V7e=typeof Object.is=="function"?Object.is:Q7e,H7e=U7e.useSyncExternalStore,$7e=B4.useRef,K7e=B4.useEffect,G7e=B4.useMemo,q7e=B4.useDebugValue;Aae.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=$7e(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=G7e(function(){function c(f){if(!u){if(u=!0,d=f,f=n(f),a!==void 0&&i.hasValue){var m=i.value;if(a(m,f))return A=m}return A=f}if(m=A,V7e(d,f))return m;var p=n(f);return a!==void 0&&a(m,p)?(d=f,m):(d=f,A=p)}var u=!1,d,A,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=H7e(t,s[0],s[1]);return K7e(function(){i.hasValue=!0,i.value=l},[l]),q7e(l),l};dae.exports=Aae;var z7e=dae.exports,DD=v.createContext(null),W7e=t=>t,Ha=()=>{var t=v.useContext(DD);return t?t.store.dispatch:W7e},TC=()=>{},X7e=()=>TC,Y7e=(t,e)=>t===e;function Qr(t){var e=v.useContext(DD);return z7e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:X7e,e?e.store.getState:TC,e?e.store.getState:TC,e?t:TC,Y7e)}function J7e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Z7e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function e9e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var qH=t=>Array.isArray(t)?t:[t];function t9e(t){const e=Array.isArray(t[0])?t[0]:t;return e9e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function r9e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var n9e=class{constructor(t){this.value=t}deref(){return this.value}},a9e=typeof WeakRef<"u"?WeakRef:n9e,s9e=0,zH=1;function C_(){return{s:s9e,v:void 0,o:null,p:null}}function mae(t,e={}){let r=C_();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var A;let l=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=C_(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=C_(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===zH)d=l.v;else if(d=t.apply(null,arguments),s++,n){const h=((A=a==null?void 0:a.deref)==null?void 0:A.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new a9e(d):d}return u.s=zH,u.v=d,d}return i.clearCache=()=>{r=C_(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function i9e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),J7e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:A,memoizeOptions:h=[],argsMemoize:f=mae,argsMemoizeOptions:m=[]}=d,p=qH(h),g=qH(m),x=t9e(a),y=A(function(){return s++,u.apply(null,arguments)},...p),b=f(function(){i++;const I=r9e(x,arguments);return l=y.apply(null,I),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:A,argsMemoize:f})};return Object.assign(n,{withTypes:()=>n}),n}var jt=i9e(mae),o9e=Object.assign((t,e=jt)=>{Z7e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>o9e}),pae={},gae={},xae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),l=e(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};t.compareValues=r})(xae);var vae={},RD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(RD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(vae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xae,r=vae,n=S4;function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(f=>String(f));const u=(f,m)=>{let p=f;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(f,m)=>m==null||f==null?m:typeof f=="object"&&"key"in f?Object.hasOwn(m,f.key)?m[f.key]:u(m,f.path):typeof f=="function"?f(m):Array.isArray(f)?u(m,f):typeof m=="object"?m[f]:m,A=i.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||r.isKey(f)?f:{key:f,path:n.toPath(f)}));return s.map(f=>({original:f,criteria:A.map(m=>d(m,f))})).slice().sort((f,m)=>{for(let p=0;p<A.length;p++){const g=e.compareValues(f.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(f=>f.original)}t.orderBy=a})(gae);var yae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(yae);var MD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OD,r=I4,n=BD,a=PD;function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}t.isIterateeCall=s})(MD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gae,r=yae,n=MD;function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(pae);var l9e=pae.sortBy;const T4=Ff(l9e);var bae=t=>t.legend.settings,c9e=t=>t.legend.size,u9e=t=>t.legend.payload,d9e=jt([u9e,bae],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?T4(n,r):n});function A9e(){return Qr(d9e)}var E_=1;function wae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>E_||Math.abs(i.left-e.left)>E_||Math.abs(i.top-e.top)>E_||Math.abs(i.width-e.width)>E_)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function So(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var f9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",WH=f9e,cT=()=>Math.random().toString(36).substring(7).split("").join("."),h9e={INIT:`@@redux/INIT${cT()}`,REPLACE:`@@redux/REPLACE${cT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cT()}`},mS=h9e;function LD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Nae(t,e,r){if(typeof t!="function")throw new Error(So(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(So(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(So(1));return r(Nae)(t,e)}let n=t,a=e,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(So(3));return a}function A(g){if(typeof g!="function")throw new Error(So(4));if(c)throw new Error(So(5));let x=!0;u();const y=l++;return i.set(y,g),function(){if(x){if(c)throw new Error(So(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!LD(g))throw new Error(So(7));if(typeof g.type>"u")throw new Error(So(8));if(typeof g.type!="string")throw new Error(So(17));if(c)throw new Error(So(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function f(g){if(typeof g!="function")throw new Error(So(10));n=g,h({type:mS.REPLACE})}function m(){const g=A;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(So(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[WH](){return this}}}return h({type:mS.INIT}),{dispatch:h,subscribe:A,getState:d,replaceReducer:f,[WH]:m}}function m9e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:mS.INIT})>"u")throw new Error(So(12));if(typeof r(void 0,{type:mS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(So(13))})}function _ae(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{m9e(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const A=n[d],h=r[A],f=i[A],m=h(f,l);if(typeof m>"u")throw l&&l.type,new Error(So(14));u[A]=m,c=c||m!==f}return c=c||n.length!==Object.keys(i).length,c?u:i}}function pS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function p9e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(So(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(i));return s=pS(...l)(a.dispatch),{...a,dispatch:s}}}function Cae(t){return LD(t)&&"type"in t&&typeof t.type=="string"}var Eae=Symbol.for("immer-nothing"),XH=Symbol.for("immer-draftable"),Ql=Symbol.for("immer-state");function ud(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Uc=Object,sv=Uc.getPrototypeOf,gS="constructor",P4="prototype",hk="configurable",xS="enumerable",PC="writable",cb="value",If=t=>!!t&&!!t[Ql];function Sd(t){var e;return t?Sae(t)||k4(t)||!!t[XH]||!!((e=t[gS])!=null&&e[XH])||F4(t)||O4(t):!1}var g9e=Uc[P4][gS].toString(),YH=new WeakMap;function Sae(t){if(!t||!UD(t))return!1;const e=sv(t);if(e===null||e===Uc[P4])return!0;const r=Uc.hasOwnProperty.call(e,gS)&&e[gS];if(r===Object)return!0;if(!Yg(r))return!1;let n=YH.get(r);return n===void 0&&(n=Function.toString.call(r),YH.set(r,n)),n===g9e}function j4(t,e,r=!0){cw(t)===0?(r?Reflect.ownKeys(t):Uc.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function cw(t){const e=t[Ql];return e?e.type_:k4(t)?1:F4(t)?2:O4(t)?3:0}var JH=(t,e,r=cw(t))=>r===2?t.has(e):Uc[P4].hasOwnProperty.call(t,e),mk=(t,e,r=cw(t))=>r===2?t.get(e):t[e],vS=(t,e,r,n=cw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function x9e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var k4=Array.isArray,F4=t=>t instanceof Map,O4=t=>t instanceof Set,UD=t=>typeof t=="object",Yg=t=>typeof t=="function",uT=t=>typeof t=="boolean";function v9e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var qA=t=>t.copy_||t.base_,QD=t=>t.modified_?t.copy_:t.base_;function pk(t,e){if(F4(t))return new Map(t);if(O4(t))return new Set(t);if(k4(t))return Array[P4].slice.call(t);const r=Sae(t);if(e===!0||e==="class_only"&&!r){const n=Uc.getOwnPropertyDescriptors(t);delete n[Ql];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l[PC]===!1&&(l[PC]=!0,l[hk]=!0),(l.get||l.set)&&(n[i]={[hk]:!0,[PC]:!0,[xS]:l[xS],[cb]:t[i]})}return Uc.create(sv(t),n)}else{const n=sv(t);if(n!==null&&r)return{...t};const a=Uc.create(n);return Uc.assign(a,t)}}function VD(t,e=!1){return D4(t)||If(t)||!Sd(t)||(cw(t)>1&&Uc.defineProperties(t,{set:S_,add:S_,clear:S_,delete:S_}),Uc.freeze(t),e&&j4(t,(r,n)=>{VD(n,!0)},!1)),t}function y9e(){ud(2)}var S_={[cb]:y9e};function D4(t){return t===null||!UD(t)?!0:Uc.isFrozen(t)}var yS="MapSet",gk="Patches",ZH="ArrayMethods",Iae={};function Tp(t){const e=Iae[t];return e||ud(0,t),e}var e$=t=>!!Iae[t],ub,Bae=()=>ub,b9e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:e$(yS)?Tp(yS):void 0,arrayMethodsPlugin_:e$(ZH)?Tp(ZH):void 0});function t$(t,e){e&&(t.patchPlugin_=Tp(gk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xk(t){vk(t),t.drafts_.forEach(w9e),t.drafts_=null}function vk(t){t===ub&&(ub=t.parent_)}var r$=t=>ub=b9e(ub,t);function w9e(t){const e=t[Ql];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function n$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[Ql].modified_&&(xk(e),ud(4)),Sd(t)&&(t=a$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[Ql].base_,t,e)}else t=a$(e,r);return N9e(e,t,!0),xk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Eae?t:void 0}function a$(t,e){if(D4(e))return e;const r=e[Ql];if(!r)return bS(e,t.handledSet_,t);if(!R4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);jae(r,t)}return r.copy_}function N9e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&VD(e,r)}function Tae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var R4=(t,e)=>t.scope_===e,_9e=[];function Pae(t,e,r,n){const a=qA(t),s=t.type_;if(n!==void 0&&mk(a,n,s)===e){vS(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;j4(a,(c,u)=>{if(If(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const i=t.draftLocations_.get(e)??_9e;for(const l of i)vS(a,l,r,s)}function C9e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!R4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const i=QD(s);Pae(t,s.draft_??s,i,r),jae(s,a)})}function jae(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Tae(t)}}function E9e(t,e,r){const{scope_:n}=t;if(If(r)){const a=r[Ql];R4(a,n)&&a.callbacks_.push(function(){jC(t);const i=QD(a);Pae(t,r,i,e)})}else Sd(r)&&t.callbacks_.push(function(){const s=qA(t);t.type_===3?s.has(r)&&bS(r,n.handledSet_,n):mk(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&bS(mk(t.copy_,e,t.type_),n.handledSet_,n)})}function bS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||If(t)||e.has(t)||!Sd(t)||D4(t)||(e.add(t),j4(t,(n,a)=>{if(If(a)){const s=a[Ql];if(R4(s,r)){const i=QD(s);vS(t,n,i,t.type_),Tae(s)}}else Sd(a)&&bS(a,e,r)})),t}function S9e(t,e){const r=k4(t),n={type_:r?1:0,scope_:e?e.scope_:Bae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=wS;r&&(a=[n],s=db);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,[l,n]}var wS={get(t,e){if(e===Ql)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=qA(t);if(!JH(a,e,t.type_))return I9e(t,a,e);const s=a[e];if(t.finalized_||!Sd(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&v9e(e))return s;if(s===dT(t.base_,e)){jC(t);const i=t.type_===1?+e:e,l=bk(t.scope_,s,t,i);return t.copy_[i]=l}return s},has(t,e){return e in qA(t)},ownKeys(t){return Reflect.ownKeys(qA(t))},set(t,e,r){const n=kae(qA(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=dT(qA(t),e),s=a==null?void 0:a[Ql];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(x9e(r,a)&&(r!==void 0||JH(t.base_,e,t.type_)))return!0;jC(t),yk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),E9e(t,e,r)),!0},deleteProperty(t,e){return jC(t),dT(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),yk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=qA(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[PC]:!0,[hk]:t.type_!==1||e!=="length",[xS]:n[xS],[cb]:r[e]}},defineProperty(){ud(11)},getPrototypeOf(t){return sv(t.base_)},setPrototypeOf(){ud(12)}},db={};for(let t in wS){let e=wS[t];db[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}db.deleteProperty=function(t,e){return db.set.call(this,t,e,void 0)};db.set=function(t,e,r){return wS.set.call(this,t[0],e,r,t[0])};function dT(t,e){const r=t[Ql];return(r?qA(r):t)[e]}function I9e(t,e,r){var a;const n=kae(e,r);return n?cb in n?n[cb]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function kae(t,e){if(!(e in t))return;let r=sv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=sv(r)}}function yk(t){t.modified_||(t.modified_=!0,t.parent_&&yk(t.parent_))}function jC(t){t.copy_||(t.assigned_=new Map,t.copy_=pk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var B9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Yg(r)&&!Yg(n)){const i=n;n=r;const l=this;return function(u=i,...d){return l.produce(u,A=>n.call(this,A,...d))}}Yg(n)||ud(6),a!==void 0&&!Yg(a)&&ud(7);let s;if(Sd(r)){const i=r$(this),l=bk(i,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?xk(i):vk(i)}return t$(i,a),n$(s,i)}else if(!r||!UD(r)){if(s=n(r),s===void 0&&(s=r),s===Eae&&(s=void 0),this.autoFreeze_&&VD(s,!0),a){const i=[],l=[];Tp(gk).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:l}),a(i,l)}return s}else ud(1,r)},this.produceWithPatches=(r,n)=>{if(Yg(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},uT(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),uT(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),uT(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Sd(e)||ud(8),If(e)&&(e=bd(e));const r=r$(this),n=bk(r,e,void 0);return n[Ql].isManual_=!0,vk(r),n}finishDraft(e,r){const n=e&&e[Ql];(!n||!n.isManual_)&&ud(9);const{scope_:a}=n;return t$(a,r),n$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Tp(gk).applyPatches_;return If(e)?a(e,r):this.produce(e,s=>a(s,r))}};function bk(t,e,r,n){const[a,s]=F4(e)?Tp(yS).proxyMap_(e,r):O4(e)?Tp(yS).proxySet_(e,r):S9e(e,r);return((r==null?void 0:r.scope_)??Bae()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?C9e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function bd(t){return If(t)||ud(10,t),Fae(t)}function Fae(t){if(!Sd(t)||D4(t))return t;const e=t[Ql];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=pk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=pk(t,!0);return j4(r,(a,s)=>{vS(r,a,Fae(s))},n),e&&(e.finalized_=!1),r}var T9e=new B9e,Oae=T9e.produce;function Dae(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var P9e=Dae(),j9e=Dae,k9e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pS:pS.apply(null,arguments)};function Uu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Vc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Cae(n)&&n.type===t,r}var Rae=class vy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,vy.prototype)}static get[Symbol.species](){return vy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new vy(...e[0].concat(this)):new vy(...e.concat(this))}};function s$(t){return Sd(t)?Oae(t,()=>{}):t}function I_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function F9e(t){return typeof t=="boolean"}var O9e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new Rae;return r&&(F9e(r)?i.push(P9e):i.push(j9e(r.extraArgument))),i},Mae="RTK_autoBatch",ss=()=>t=>({payload:t,meta:{[Mae]:!0}}),i$=t=>e=>{setTimeout(e,t)},Lae=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i$(10):t.type==="callback"?t.queueNotification:i$(t.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const A=()=>a&&d(),h=n.subscribe(A);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var A;try{return a=!((A=d==null?void 0:d.meta)!=null&&A[Mae]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},D9e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Rae(t);return n&&a.push(Lae(typeof n=="object"?n:void 0)),a};function R9e(t){const e=O9e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(LD(r))l=_ae(r);else throw new Error(Vc(1));let c;typeof n=="function"?c=n(e):c=e();let u=pS;a&&(u=k9e({trace:!1,...typeof a=="object"&&a}));const d=p9e(...c),A=D9e(d);let h=typeof i=="function"?i(A):A();const f=u(...h);return Nae(l,s,f)}function Uae(t){const e={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Vc(28));if(l in e)throw new Error(Vc(29));return e[l]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function M9e(t){return typeof t=="function"}function L9e(t,e){let[r,n,a]=Uae(e),s;if(M9e(t))s=()=>s$(t());else{const l=s$(t);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,A)=>{if(A)if(If(d)){const f=A(d,c);return f===void 0?d:f}else{if(Sd(d))return Oae(d,h=>A(h,c));{const h=A(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var U9e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Q9e=(t=21)=>{let e="",r=t;for(;r--;)e+=U9e[Math.random()*64|0];return e},V9e=Symbol.for("rtk-slice-createasyncthunk");function H9e(t,e){return`${t}/${e}`}function $9e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[V9e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Vc(11));const l=(typeof a.reducers=="function"?a.reducers(G9e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,I){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Vc(12));if(T in u.sliceCaseReducersByType)throw new Error(Vc(13));return u.sliceCaseReducersByType[T]=I,d},addMatcher(w,I){return u.sliceMatchers.push({matcher:w,reducer:I}),d},exposeAction(w,I){return u.actionCreators[w]=I,d},exposeCaseReducer(w,I){return u.sliceCaseReducersByName[w]=I,d}};c.forEach(w=>{const I=l[w],T={reducerName:w,type:H9e(s,w),createNotation:typeof a.reducers=="function"};z9e(I)?X9e(T,I,d,e):q9e(T,I,d)});function A(){const[w={},I=[],T=void 0]=typeof a.extraReducers=="function"?Uae(a.extraReducers):[a.extraReducers],C={...w,...u.sliceCaseReducersByType};return L9e(a.initialState,E=>{for(let S in C)E.addCase(S,C[S]);for(let S of u.sliceMatchers)E.addMatcher(S.matcher,S.reducer);for(let S of I)E.addMatcher(S.matcher,S.reducer);T&&E.addDefaultCase(T)})}const h=w=>w,f=new Map,m=new WeakMap;let p;function g(w,I){return p||(p=A()),p(w,I)}function x(){return p||(p=A()),p.getInitialState()}function y(w,I=!1){function T(E){let S=E[w];return typeof S>"u"&&I&&(S=I_(m,T,x)),S}function C(E=h){const S=I_(f,I,()=>new WeakMap);return I_(S,E,()=>{const O={};for(const[B,P]of Object.entries(a.selectors??{}))O[B]=K9e(P,E,()=>I_(m,E,x),I);return O})}return{reducerPath:w,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:I,...T}={}){const C=I??i;return w.inject({reducerPath:C,reducer:g},T),{...b,...y(C,!0)}}};return b}}function K9e(t,e,r,n){function a(s,...i){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return a.unwrapped=t,a}var mc=$9e();function G9e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function q9e({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!W9e(n))throw new Error(Vc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?Uu(t,i):Uu(t))}function z9e(t){return t._reducerDefinitionType==="asyncThunk"}function W9e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function X9e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Vc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,A=a(t,s,d);n.exposeAction(e,A),i&&n.addCase(A.fulfilled,i),l&&n.addCase(A.pending,l),c&&n.addCase(A.rejected,c),u&&n.addMatcher(A.settled,u),n.exposeCaseReducer(e,{fulfilled:i||B_,pending:l||B_,rejected:c||B_,settled:u||B_})}function B_(){}var Y9e="task",Qae="listener",Vae="completed",HD="cancelled",J9e=`task-${HD}`,Z9e=`task-${Vae}`,wk=`${Qae}-${HD}`,eQe=`${Qae}-${Vae}`,M4=class{constructor(t){ta(this,"name","TaskAbortError");ta(this,"message");this.code=t,this.message=`${Y9e} ${HD} (reason: ${t})`}},$D=(t,e)=>{if(typeof t!="function")throw new TypeError(Vc(32))},NS=()=>{},Hae=(t,e=NS)=>(t.catch(e),t),$ae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),tp=t=>{if(t.aborted)throw new M4(t.reason)};function Kae(t,e){let r=NS;return new Promise((n,a)=>{const s=()=>a(new M4(t.reason));if(t.aborted){s();return}r=$ae(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=NS})}var tQe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof M4?"cancelled":"rejected",error:r}}finally{e==null||e()}},_S=t=>e=>Hae(Kae(t,e).then(r=>(tp(t),r))),Gae=t=>{const e=_S(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Fx}=Object,o$={},L4="listenerMiddleware",rQe=(t,e)=>{const r=n=>$ae(t,()=>n.abort(t.reason));return(n,a)=>{$D(n);const s=new AbortController;r(s);const i=tQe(async()=>{tp(t),tp(s.signal);const l=await n({pause:_S(s.signal),delay:Gae(s.signal),signal:s.signal});return tp(s.signal),l},()=>s.abort(Z9e));return a!=null&&a.autoJoin&&e.push(i.catch(NS)),{result:_S(t)(i),cancel(){s.abort(J9e)}}}},nQe=(t,e)=>{const r=async(n,a)=>{tp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(A,h)=>{h.unsubscribe(),c([A,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Kae(e,Promise.race(l));return tp(e),c}finally{s()}};return(n,a)=>Hae(r(n,a))},qae=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Uu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Vc(21));return $D(s),{predicate:a,type:e,effect:s}},zae=Fx(t=>{const{type:e,predicate:r,effect:n}=qae(t);return{id:Q9e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Vc(22))}}},{withTypes:()=>zae}),l$=(t,e)=>{const{type:r,effect:n,predicate:a}=qae(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Nk=t=>{t.pending.forEach(e=>{e.abort(wk)})},aQe=(t,e)=>()=>{for(const r of e.keys())Nk(r);t.clear()},c$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Wae=Fx(Uu(`${L4}/add`),{withTypes:()=>Wae}),sQe=Uu(`${L4}/removeAll`),Xae=Fx(Uu(`${L4}/remove`),{withTypes:()=>Xae}),iQe=(...t)=>{console.error(`${L4}/error`,...t)},uw=(t={})=>{const e=new Map,r=new Map,n=f=>{const m=r.get(f)??0;r.set(f,m+1)},a=f=>{const m=r.get(f)??1;m===1?r.delete(f):r.set(f,m-1)},{extra:s,onError:i=iQe}=t;$D(i);const l=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&Nk(f)}),c=f=>{const m=l$(e,f)??zae(f);return l(m)};Fx(c,{withTypes:()=>c});const u=f=>{const m=l$(e,f);return m&&(m.unsubscribe(),f.cancelActive&&Nk(m)),!!m};Fx(u,{withTypes:()=>u});const d=async(f,m,p,g)=>{const x=new AbortController,y=nQe(c,x.signal),b=[];try{f.pending.add(x),n(f),await Promise.resolve(f.effect(m,Fx({},p,{getOriginalState:g,condition:(w,I)=>y(w,I).then(Boolean),take:y,delay:Gae(x.signal),pause:_S(x.signal),extra:s,signal:x.signal,fork:rQe(x.signal,b),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((w,I,T)=>{w!==x&&(w.abort(wk),T.delete(w))})},cancel:()=>{x.abort(wk),f.pending.delete(x)},throwIfCancelled:()=>{tp(x.signal)}})))}catch(w){w instanceof M4||c$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(eQe),a(f),f.pending.delete(x)}},A=aQe(e,r);return{middleware:f=>m=>p=>{if(!Cae(p))return m(p);if(Wae.match(p))return c(p.payload);if(sQe.match(p)){A();return}if(Xae.match(p))return u(p.payload);let g=f.getState();const x=()=>{if(g===o$)throw new Error(Vc(23));return g};let y;try{if(y=m(p),e.size>0){const b=f.getState(),w=Array.from(e.values());for(const I of w){let T=!1;try{T=I.predicate(p,b,g)}catch(C){T=!1,c$(i,C,{raisedBy:"predicate"})}T&&d(I,p,f,x)}}}finally{g=o$}return y},startListening:c,stopListening:u,clearListeners:A}};function Vc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var oQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Yae=mc({name:"chartLayout",initialState:oQe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:lQe,setLayout:cQe,setChartSize:uQe,setScale:dQe}=Yae.actions,AQe=Yae.reducer;function Jae(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Bs(t){return Number.isFinite(t)}function O0(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function u$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(r),!0).forEach(function(n){fQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fQe(t,e,r){return(e=hQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hQe(t){var e=mQe(t,"string");return typeof e=="symbol"?e:e+""}function mQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Za(t,e,r){return ho(t)||ho(e)?r:gA(e)?Bp(t,e,r):typeof e=="function"?e(t):r}var pQe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=e;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&Kr(t[s]))return gx(gx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&Kr(t[i]))return gx(gx({},t),{},{[i]:t[i]+(a||0)})}return t},Zp=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",d$=1e-4,gQe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-d$,s=Math.max(n[0],n[1])+d$,i=t(e[0]),l=t(e[r-1]);(i<a||i>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},xQe=(t,e)=>{if(!e||e.length!==2||!Kr(e[0])||!Kr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Kr(t[0])||t[0]<r)&&(a[0]=r),(!Kr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},vQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],A=u[0],h=pA(d)?A:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},yQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var l=t[i],c=l==null?void 0:l[a];if(c!=null){var u=pA(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},bQe={sign:vQe,expand:YUe,none:Ip,silhouette:JUe,wiggle:ZUe,positive:yQe},wQe=(t,e,r)=>{var n,a=(n=bQe[r])!==null&&n!==void 0?n:Ip,s=XUe().keys(e).value((l,c)=>Number(Za(l,c,0))).order(Ak).offset(a),i=s(t);return i.forEach((l,c)=>{l.forEach((u,d)=>{var A=Za(t[d],e[c],0);Array.isArray(A)&&A.length===2&&Kr(A[0])&&Kr(A[1])&&(u[0]=A[0],u[1]=A[1])})}),i};function NQe(t){return t==null?void 0:String(t)}var A$=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var l=Za(s,e.dataKey,e.scale.domain()[i]);return ho(l)?null:e.scale(l)-a/2+n},_Qe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},CQe=t=>{var e=t.flat(2).filter(Kr);return[Math.min(...e),Math.max(...e)]},EQe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],SQe=(t,e,r)=>{if(t!=null)return EQe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,l=i.reduce((c,u)=>{var d=Jae(u,e,r),A=CQe(d);return!Bs(A[0])||!Bs(A[1])?c:[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},f$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CS=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=T4(e,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function m$(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return gx(gx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function U4(t,e){if(t)return String(t);if(typeof e=="string")return e}var IQe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},BQe=(t,e)=>e==="centric"?t.angle:t.radius,Vf=t=>t.layout.width,Hf=t=>t.layout.height,TQe=t=>t.layout.scale,Zae=t=>t.layout.margin,Q4=jt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),V4=jt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),ese="data-recharts-item-index",tse="data-recharts-item-id",dw=60;function p$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(r),!0).forEach(function(n){PQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PQe(t,e,r){return(e=jQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jQe(t){var e=kQe(t,"string");return typeof e=="symbol"?e:e+""}function kQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FQe=t=>t.brush.height;function OQe(t){var e=V4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:dw;return r+a}return r},0)}function DQe(t){var e=V4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:dw;return r+a}return r},0)}function RQe(t){var e=Q4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function MQe(t){var e=Q4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Qi=jt([Vf,Hf,Zae,FQe,OQe,DQe,RQe,MQe,bae,c9e],(t,e,r,n,a,s,i,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},A={top:(r.top||0)+i,bottom:(r.bottom||0)+l},h=T_(T_({},A),d),f=h.bottom;h.bottom+=n,h=pQe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return T_(T_({brushBottom:f},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),LQe=jt(Qi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),KD=jt(Vf,Hf,(t,e)=>({x:0,y:0,width:t,height:e})),UQe=v.createContext(null),Yc=()=>v.useContext(UQe)!=null,H4=t=>t.brush,$4=jt([H4,Qi,Zae],(t,e,r)=>({height:t.height,x:Kr(t.x)?t.x:e.left,y:Kr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Kr(t.width)?t.width:e.width})),rse={},nse={},ase={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},A=()=>{u&&d(),p()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,A()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,l=y;const b=h==null;f(),c&&b&&d()};return x.schedule=f,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(ase);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ase;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,A=null;const h=e.debounce(function(...p){d=n.apply(this,p),A=null},a,{edges:u}),f=function(...p){return c!=null&&(A===null&&(A=Date.now()),Date.now()-A>=c)?(d=n.apply(this,p),A=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return f.cancel=h.cancel,f.flush=m,f}t.debounce=r})(nse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nse;function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:l})}t.throttle=r})(rse);var QQe=rse.throttle;const VQe=Ff(QQe);var g$=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},sse=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,l=Sf(n)?t:Number(n),c=Sf(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:l,calculatedHeight:c}},HQe={width:0,height:0,overflow:"visible"},$Qe={width:0,overflowX:"visible"},KQe={height:0,overflowY:"visible"},GQe={},qQe=t=>{var{width:e,height:r}=t,n=Sf(e),a=Sf(r);return n&&a?HQe:n?$Qe:a?KQe:GQe};function zQe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function _k(){return _k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_k.apply(null,arguments)}function x$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(r),!0).forEach(function(n){WQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WQe(t,e,r){return(e=XQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XQe(t){var e=YQe(t,"string");return typeof e=="symbol"?e:e+""}function YQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ise=v.createContext({width:-1,height:-1});function JQe(t){return O0(t.width)&&O0(t.height)}function ose(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return JQe(a)?v.createElement(ise.Provider,{value:a},e):null}var GD=()=>v.useContext(ise),ZQe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:A,className:h,onResize:f,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=f,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((E,S)=>{y(O=>{var B=Math.round(E),P=Math.round(S);return O.containerWidth===B&&O.containerHeight===P?O:{containerWidth:B,containerHeight:P}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return ow;var E=P=>{var D,{width:X,height:de}=P[0].contentRect;b(X,de),(D=g.current)===null||D===void 0||D.call(g,X,de)};d>0&&(E=VQe(E,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(E),{width:O,height:B}=p.current.getBoundingClientRect();return b(O,B),S.observe(p.current),()=>{S.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:I}=x;g$(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:C}=sse(w,I,{width:a,height:s,aspect:r,maxHeight:c});return g$(T!=null&&T>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,C,a,s,i,l,r),v.createElement("div",{id:A?"".concat(A):void 0,className:wa("recharts-responsive-container",h),style:v$(v$({},m),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:qQe({width:a,height:s})},v.createElement(ose,{width:T,height:C},u)))}),y$=v.forwardRef((t,e)=>{var r=GD();if(O0(r.width)&&O0(r.height))return t.children;var{width:n,height:a}=zQe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=sse(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Kr(s)&&Kr(i)?v.createElement(ose,{width:s,height:i},t.children):v.createElement(ZQe,_k({},t,{width:n,height:a,ref:e}))});function lse(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var K4=()=>{var t,e=Yc(),r=Qr(LQe),n=Qr($4),a=(t=Qr(H4))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},eVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},tVe=()=>{var t;return(t=Qr(Qi))!==null&&t!==void 0?t:eVe},cse=()=>Qr(Vf),use=()=>Qr(Hf),rVe=()=>Qr(t=>t.layout.margin),Zn=t=>t.layout.layoutType,Aw=()=>Qr(Zn),nVe=()=>{var t=Aw();return t!==void 0},G4=t=>{var e=Ha(),r=Yc(),{width:n,height:a}=t,s=GD(),i=n,l=a;return s&&(i=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&O0(i)&&O0(l)&&e(uQe({width:i,height:l}))},[e,r,i,l]),null},dse=Symbol.for("immer-nothing"),b$=Symbol.for("immer-draftable"),qc=Symbol.for("immer-state");function dd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ab=Object.getPrototypeOf;function iv(t){return!!t&&!!t[qc]}function Pp(t){var e;return t?Ase(t)||Array.isArray(t)||!!t[b$]||!!((e=t.constructor)!=null&&e[b$])||fw(t)||z4(t):!1}var aVe=Object.prototype.constructor.toString(),w$=new WeakMap;function Ase(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=w$.get(r);return n===void 0&&(n=Function.toString.call(r),w$.set(r,n)),n===aVe}function ES(t,e,r=!0){q4(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function q4(t){const e=t[qc];return e?e.type_:Array.isArray(t)?1:fw(t)?2:z4(t)?3:0}function Ck(t,e){return q4(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function fse(t,e,r){const n=q4(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function sVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function fw(t){return t instanceof Map}function z4(t){return t instanceof Set}function wm(t){return t.copy_||t.base_}function Ek(t,e){if(fw(t))return new Map(t);if(z4(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Ase(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[qc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(Ab(t),n)}else{const n=Ab(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function qD(t,e=!1){return W4(t)||iv(t)||!Pp(t)||(q4(t)>1&&Object.defineProperties(t,{set:P_,add:P_,clear:P_,delete:P_}),Object.freeze(t),e&&Object.values(t).forEach(r=>qD(r,!0))),t}function iVe(){dd(2)}var P_={value:iVe};function W4(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var oVe={};function jp(t){const e=oVe[t];return e||dd(0,t),e}var fb;function hse(){return fb}function lVe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function N$(t,e){e&&(jp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Sk(t){Ik(t),t.drafts_.forEach(cVe),t.drafts_=null}function Ik(t){t===fb&&(fb=t.parent_)}function _$(t){return fb=lVe(fb,t)}function cVe(t){const e=t[qc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function C$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[qc].modified_&&(Sk(e),dd(4)),Pp(t)&&(t=SS(e,t),e.parent_||IS(e,t)),e.patches_&&jp("Patches").generateReplacementPatches_(r[qc].base_,t,e.patches_,e.inversePatches_)):t=SS(e,r,[]),Sk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==dse?t:void 0}function SS(t,e,r){if(W4(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[qc];if(!a)return ES(e,(s,i)=>E$(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return IS(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),ES(i,(c,u)=>E$(t,a,s,c,u,r,l),n),IS(t,s,!1),r&&t.patches_&&jp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function E$(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const l=W4(a);if(!(l&&!i)){if(iv(a)){const c=s&&e&&e.type_!==3&&!Ck(e.assigned_,n)?s.concat(n):void 0,u=SS(t,a,c);if(fse(r,n,u),iv(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Pp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;SS(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(fw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&IS(t,a)}}}function IS(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qD(e,r)}function uVe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:hse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=zD;r&&(a=[n],s=hb);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var zD={get(t,e){if(e===qc)return t;const r=wm(t);if(!Ck(r,e))return dVe(t,r,e);const n=r[e];return t.finalized_||!Pp(n)?n:n===AT(t.base_,e)?(fT(t),t.copy_[e]=Tk(n,t)):n},has(t,e){return e in wm(t)},ownKeys(t){return Reflect.ownKeys(wm(t))},set(t,e,r){const n=mse(wm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=AT(wm(t),e),s=a==null?void 0:a[qc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(sVe(r,a)&&(r!==void 0||Ck(t.base_,e)))return!0;fT(t),Bk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return AT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,fT(t),Bk(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=wm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){dd(11)},getPrototypeOf(t){return Ab(t.base_)},setPrototypeOf(){dd(12)}},hb={};ES(zD,(t,e)=>{hb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});hb.deleteProperty=function(t,e){return hb.set.call(this,t,e,void 0)};hb.set=function(t,e,r){return zD.set.call(this,t[0],e,r,t[0])};function AT(t,e){const r=t[qc];return(r?wm(r):t)[e]}function dVe(t,e,r){var a;const n=mse(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function mse(t,e){if(!(e in t))return;let r=Ab(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ab(r)}}function Bk(t){t.modified_||(t.modified_=!0,t.parent_&&Bk(t.parent_))}function fT(t){t.copy_||(t.copy_=Ek(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var AVe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&dd(6),n!==void 0&&typeof n!="function"&&dd(7);let a;if(Pp(e)){const s=_$(this),i=Tk(e,void 0);let l=!0;try{a=r(i),l=!1}finally{l?Sk(s):Ik(s)}return N$(s,n),C$(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===dse&&(a=void 0),this.autoFreeze_&&qD(a,!0),n){const s=[],i=[];jp("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else dd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,c=>e(c,...l));let n,a;return[this.produce(e,r,(i,l)=>{n=i,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Pp(t)||dd(8),iv(t)&&(t=fVe(t));const e=_$(this),r=Tk(t,void 0);return r[qc].isManual_=!0,Ik(e),r}finishDraft(t,e){const r=t&&t[qc];(!r||!r.isManual_)&&dd(9);const{scope_:n}=r;return N$(n,e),C$(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=jp("Patches").applyPatches_;return iv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function Tk(t,e){const r=fw(t)?jp("MapSet").proxyMap_(t,e):z4(t)?jp("MapSet").proxySet_(t,e):uVe(t,e);return(e?e.scope_:hse()).drafts_.push(r),r}function fVe(t){return iv(t)||dd(10,t),pse(t)}function pse(t){if(!Pp(t)||W4(t))return t;const e=t[qc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ek(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Ek(t,!0);return ES(r,(a,s)=>{fse(r,a,pse(s))},n),e&&(e.finalized_=!1),r}var hVe=new AVe;hVe.produce;var mVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gse=mc({name:"legend",initialState:mVe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:ss()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=bd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:ss()},removeLegendPayload:{reducer(t,e){var r=bd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:ss()}}}),{setLegendSize:S$,setLegendSettings:pVe,addLegendPayload:xse,replaceLegendPayload:vse,removeLegendPayload:yse}=gse.actions,gVe=gse.reducer,xVe=["contextPayload"];function Pk(){return Pk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pk.apply(null,arguments)}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ov(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){vVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vVe(t,e,r){return(e=yVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yVe(t){var e=bVe(t,"string");return typeof e=="symbol"?e:e+""}function bVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wVe(t,e){if(t==null)return{};var r,n,a=NVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function _Ve(t){return t.value}function CVe(t){var{contextPayload:e}=t,r=wVe(t,xVe),n=uae(e,t.payloadUniqBy,_Ve),a=ov(ov({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(I7e,a)}function EVe(t,e,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ov(ov({},u),d)}function SVe(t){var e=Ha();return v.useEffect(()=>{e(pVe(t))},[e,t]),null}function IVe(t){var e=Ha();return v.useEffect(()=>(e(S$(t)),()=>{e(S$({width:0,height:0}))}),[e,t]),null}function BVe(t,e,r,n){return t==="vertical"&&Kr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var TVe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function jk(t){var e=Vo(t,TVe),r=A9e(),n=yUe(),a=rVe(),{width:s,height:i,wrapperStyle:l,portal:c}=e,[u,d]=wae([r]),A=cse(),h=use();if(A==null||h==null)return null;var f=A-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=BVe(e.layout,i,s,f),p=c?l:ov(ov({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},EVe(l,e,a,A,h,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(SVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(IVe,{width:u.width,height:u.height}),v.createElement(CVe,Pk({},e,m,{margin:a,chartWidth:A,chartHeight:h,contextPayload:r})));return gd.createPortal(x,g)}jk.displayName="Legend";function kk(){return kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kk.apply(null,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){PVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PVe(t,e,r){return(e=jVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jVe(t){var e=kVe(t,"string");return typeof e=="symbol"?e:e+""}function kVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FVe(t){return Array.isArray(t)&&gA(t[0])&&gA(t[1])?t.join(" ~ "):t}var OVe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:A,accessibilityLayer:h=!1}=t,f=()=>{if(s&&s.length){var I={padding:0,margin:0},T=(l?T4(s,l):s).map((C,E)=>{if(C.type==="none")return null;var S=C.formatter||i||FVe,{value:O,name:B}=C,P=O,D=B;if(S){var X=S(O,B,C,E,s);if(Array.isArray(X))[P,D]=X;else if(X!=null)P=X;else return null}var de=hT({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:de},gA(D)?v.createElement("span",{className:"recharts-tooltip-item-name"},D):null,gA(D)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},P),v.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},m=hT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=hT({margin:0},a),g=!ho(d),x=g?d:"",y=wa("recharts-default-tooltip",c),b=wa("recharts-tooltip-label",u);g&&A&&s!==void 0&&s!==null&&(x=A(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",kk({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),f())},Q1="recharts-tooltip-wrapper",DVe={visibility:"hidden"};function RVe(t){var{coordinate:e,translateX:r,translateY:n}=t;return wa(Q1,{["".concat(Q1,"-right")]:Kr(r)&&e&&Kr(e.x)&&r>=e.x,["".concat(Q1,"-left")]:Kr(r)&&e&&Kr(e.x)&&r<e.x,["".concat(Q1,"-bottom")]:Kr(n)&&e&&Kr(e.y)&&n>=e.y,["".concat(Q1,"-top")]:Kr(n)&&e&&Kr(e.y)&&n<e.y})}function T$(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Kr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),A=r[n]+a;if(e[n])return i[n]?d:A;var h=c[n];if(h==null)return 0;if(i[n]){var f=d,m=h;return f<m?Math.max(A,h):Math.max(d,h)}if(u==null)return 0;var p=A+l,g=h+u;return p>g?Math.max(d,h):Math.max(A,h)}function MVe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function LVe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=t,u,d,A;return i.height>0&&i.width>0&&r?(d=T$({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),A=T$({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=MVe({translateX:d,translateY:A,useTranslate3d:l})):u=DVe,{cssProperties:u,cssClasses:RVe({translateX:d,translateY:A,coordinate:r})}}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function j_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){Fk(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fk(t,e,r){return(e=UVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UVe(t){var e=QVe(t,"string");return typeof e=="symbol"?e:e+""}function QVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class VVe extends v.PureComponent{constructor(){super(...arguments),Fk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:A,useTranslate3d:h,viewBox:f,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=LVe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:A,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:f}),w=x?{}:j_(j_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),I=j_(j_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:I,ref:g},s)}}var bse=()=>{var t;return(t=Qr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Ok(){return Ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ok.apply(null,arguments)}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){HVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HVe(t,e,r){return(e=$Ve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ve(t){var e=KVe(t,"string");return typeof e=="symbol"?e:e+""}function KVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F$={curveBasisClosed:LUe,curveBasisOpen:UUe,curveBasis:MUe,curveBumpX:_Ue,curveBumpY:CUe,curveLinearClosed:QUe,curveLinear:N4,curveMonotoneX:VUe,curveMonotoneY:HUe,curveNatural:$Ue,curveStep:KUe,curveStepAfter:qUe,curveStepBefore:GUe},BS=t=>Bs(t.x)&&Bs(t.y),O$=t=>t.base!=null&&BS(t.base)&&BS(t),V1=t=>t.x,H1=t=>t.y,GVe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(iw(t));return(r==="curveMonotone"||r==="curveBump")&&e?F$["".concat(r).concat(e==="vertical"?"Y":"X")]:F$[r]||N4},qVe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=GVe(e,a),l=s?r.filter(BS):r,c;if(Array.isArray(n)){var u=r.map((f,m)=>k$(k$({},f),{},{base:n[m]}));a==="vertical"?c=__().y(H1).x1(V1).x0(f=>f.base.x):c=__().x(V1).y1(H1).y0(f=>f.base.y);var d=c.defined(O$).curve(i),A=s?u.filter(O$):u;return d(A)}a==="vertical"&&Kr(n)?c=__().y(H1).x1(V1).x0(n):Kr(n)?c=__().x(V1).y1(H1).y0(n):c=Pne().x(V1).y(H1);var h=c.defined(BS).curve(i);return h(l)},WD=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=Aw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?qVe(i):n;return v.createElement("path",Ok({},mA(t),m7e(t),{className:wa("recharts-curve",e),d:l===null?void 0:l,ref:a}))},zVe=["x","y","top","left","width","height","className"];function Dk(){return Dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dk.apply(null,arguments)}function D$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WVe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(r),!0).forEach(function(n){XVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XVe(t,e,r){return(e=YVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YVe(t){var e=JVe(t,"string");return typeof e=="symbol"?e:e+""}function JVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZVe(t,e){if(t==null)return{};var r,n,a=eHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var tHe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),rHe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=t,c=ZVe(t,zVe),u=WVe({x:e,y:r,top:n,left:a,width:s,height:i},c);return!Kr(e)||!Kr(r)||!Kr(s)||!Kr(i)||!Kr(n)||!Kr(a)?null:v.createElement("path",Dk({},Lu(u),{className:wa("recharts-cross",l),d:tHe(e,r,s,i,n,a)}))};function nHe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){aHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aHe(t,e,r){return(e=sHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sHe(t){var e=iHe(t,"string");return typeof e=="symbol"?e:e+""}function iHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oHe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),wse=(t,e,r)=>t.map(n=>"".concat(oHe(n)," ").concat(e,"ms ").concat(r)).join(","),lHe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),mb=(t,e)=>Object.keys(e).reduce((r,n)=>M$(M$({},r),{},{[n]:t(n,e[n])}),{});function L$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(r),!0).forEach(function(n){cHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cHe(t,e,r){return(e=uHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uHe(t){var e=dHe(t,"string");return typeof e=="symbol"?e:e+""}function dHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TS=(t,e,r)=>t+(e-t)*r,Rk=t=>{var{from:e,to:r}=t;return e!==r},Nse=(t,e,r)=>{var n=mb((a,s)=>{if(Rk(s)){var[i,l]=t(s.from,s.to,s.velocity);return Ti(Ti({},s),{},{from:i,velocity:l})}return s},e);return r<1?mb((a,s)=>Rk(s)&&n[a]!=null?Ti(Ti({},s),{},{velocity:TS(s.velocity,n[a].velocity,r),from:TS(s.from,n[a].from,r)}):s,e):Nse(t,n,r-1)};function AHe(t,e,r,n,a,s){var i,l=n.reduce((h,f)=>Ti(Ti({},h),{},{[f]:{from:t[f],velocity:0,to:e[f]}}),{}),c=()=>mb((h,f)=>f.from,l),u=()=>!Object.values(l).filter(Rk).length,d=null,A=h=>{i||(i=h);var f=h-i,m=f/r.dt;l=Nse(r,l,m),a(Ti(Ti(Ti({},t),e),c())),i=h,u()||(d=s.setTimeout(A))};return()=>(d=s.setTimeout(A),()=>{var h;(h=d)===null||h===void 0||h()})}function fHe(t,e,r,n,a,s,i){var l=null,c=a.reduce((A,h)=>{var f=t[h],m=e[h];return f==null||m==null?A:Ti(Ti({},A),{},{[h]:[f,m]})},{}),u,d=A=>{u||(u=A);var h=(A-u)/n,f=mb((p,g)=>TS(...g,r(h)),c);if(s(Ti(Ti(Ti({},t),e),f)),h<1)l=i.setTimeout(d);else{var m=mb((p,g)=>TS(...g,r(1)),c);s(Ti(Ti(Ti({},t),e),m))}};return()=>(l=i.setTimeout(d),()=>{var A;(A=l)===null||A===void 0||A()})}const hHe=(t,e,r,n,a,s)=>{var i=lHe(t,e);return r==null?()=>(a(Ti(Ti({},t),e)),()=>{}):r.isStepper===!0?AHe(t,e,r,i,a,s):fHe(t,e,r,n,i,a,s)};var PS=1e-4,_se=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Cse=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),U$=(t,e)=>r=>{var n=_se(t,e);return Cse(n,r)},mHe=(t,e)=>r=>{var n=_se(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return Cse(a,r)},pHe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},gHe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=pHe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},xHe=(t,e,r,n)=>{var a=U$(t,r),s=U$(e,n),i=mHe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,A=d,h=0;h<8;++h){var f=a(A)-d,m=i(A);if(Math.abs(f-d)<PS||m<PS)return s(A);A=l(A-f/m)}return s(A)};return c.isStepper=!1,c},Q$=function(){return xHe(...gHe(...arguments))},vHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,A=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<PS&&Math.abs(A)<PS?[l,0]:[h,A]};return s.isStepper=!0,s.dt=a,s},yHe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q$(t);case"spring":return vHe();default:if(t.split("(")[0]==="cubic-bezier")return Q$(t)}return typeof t=="function"?t:null};function bHe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class wHe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function NHe(){return bHe(new wHe)}var _He=v.createContext(NHe);function CHe(t,e){var r=v.useContext(_He);return v.useMemo(()=>e??r(t),[t,e,r])}var EHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),X4={isSsr:EHe()},SHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},V$={t:0},mT={t:1};function Y4(t){var e=Vo(t,SHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!X4.isSsr:r,A=CHe(e.animationId,e.animationManager),[h,f]=v.useState(d?V$:mT),m=v.useRef(null);return v.useEffect(()=>{d||f(mT)},[d]),v.useEffect(()=>{if(!d||!n)return ow;var p=hHe(V$,mT,yHe(s),a,f,A.getTimeoutController()),g=()=>{m.current=p()};return A.start([c,i,g,a,l]),()=>{A.stop(),m.current&&m.current(),l()}},[d,n,a,s,i,c,l,A]),u(h.t)}function J4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(lb(e)),n=v.useRef(t);return n.current!==t&&(r.current=lb(e),n.current=t),r.current}var IHe=["radius"],BHe=["radius"],H$,$$,K$,G$,q$,z$,W$,X$,Y$,J$;function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){THe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function THe(t,e,r){return(e=PHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PHe(t){var e=jHe(t,"string");return typeof e=="symbol"?e:e+""}function jHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jS(){return jS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jS.apply(null,arguments)}function tK(t,e){if(t==null)return{};var r,n,a=kHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function kHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function zd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var rK=(t,e,r,n,a)=>{var s=t0(r),i=t0(n),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,A;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>l?l:a[f];A=Ds(H$||(H$=zd(["M",",",""])),t,e+c*h[0]),h[0]>0&&(A+=Ds($$||($$=zd(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),A+=Ds(K$||(K$=zd(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(A+=Ds(G$||(G$=zd(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),A+=Ds(q$||(q$=zd(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(A+=Ds(z$||(z$=zd(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),A+=Ds(W$||(W$=zd(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(A+=Ds(X$||(X$=zd(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),A+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);A=Ds(Y$||(Y$=zd(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else A=Ds(J$||(J$=zd(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return A},nK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ese=t=>{var e=Vo(t,nK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ie=r.current.getTotalLength();ie&&a(ie)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=e,{animationEasing:A,animationDuration:h,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),I=J4(w,"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var T=wa("recharts-rectangle",d);if(!p){var C=Lu(e),{radius:E}=C,S=tK(C,IHe);return v.createElement("path",jS({},S,{x:t0(s),y:t0(i),width:t0(l),height:t0(c),radius:typeof u=="number"?u:void 0,className:T,d:rK(s,i,l,c,u)}))}var O=g.current,B=x.current,P=y.current,D=b.current,X="0px ".concat(n===-1?1:n,"px"),de="".concat(n,"px 0px"),re=wse(["strokeDasharray"],h,typeof A=="string"?A:nK.animationEasing);return v.createElement(Y4,{animationId:I,key:I,canBegin:n>0,duration:h,easing:A,isActive:p,begin:f},ie=>{var ce=Bi(O,l,ie),J=Bi(B,c,ie),pe=Bi(P,s,ie),Se=Bi(D,i,ie);r.current&&(g.current=ce,x.current=J,y.current=pe,b.current=Se);var k;m?ie>0?k={transition:re,strokeDasharray:de}:k={strokeDasharray:X}:k={strokeDasharray:de};var F=Lu(e),{radius:H}=F,M=tK(F,BHe);return v.createElement("path",jS({},M,{radius:typeof u=="number"?u:void 0,className:T,d:rK(pe,Se,ce,J,u),ref:r,style:eK(eK({},k),e.style)}))})};function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(r),!0).forEach(function(n){FHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FHe(t,e,r){return(e=OHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OHe(t){var e=DHe(t,"string");return typeof e=="symbol"?e:e+""}function DHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kS=Math.PI/180,RHe=t=>t*180/Math.PI,hi=(t,e,r,n)=>({x:t+Math.cos(-kS*n)*r,y:e+Math.sin(-kS*n)*r}),Sse=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},MHe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},LHe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=MHe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:RHe(c),angleInRadian:c}},UHe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},QHe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},VHe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=LHe({x:r,y:n},e),{innerRadius:i,outerRadius:l}=e;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=UHe(e),d=s,A;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;A=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;A=d>=u&&d<=c}return A?sK(sK({},e),{},{radius:a,angle:QHe(d,e)}):null};function Ise(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=hi(e,r,n,a),l=hi(e,r,n,s);return{points:[i,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var iK,oK,lK,cK,uK,dK,AK;function Mk(){return Mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mk.apply(null,arguments)}function Mm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var HHe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},k_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=t,u=l*(i?1:-1)+n,d=Math.asin(l/u)/kS,A=c?a:a+s*d,h=hi(e,r,u,A),f=hi(e,r,n,A),m=c?a-s*d:a,p=hi(e,r,u*Math.cos(d*kS),m);return{center:h,circleTangency:f,lineTangency:p,theta:d}},Bse=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,l=HHe(s,i),c=s+l,u=hi(e,r,a,s),d=hi(e,r,a,c),A=Ds(iK||(iK=Mm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var h=hi(e,r,n,s),f=hi(e,r,n,c);A+=Ds(oK||(oK=Mm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),f.x,f.y,n,n,+(Math.abs(l)>180),+(s<=c),h.x,h.y)}else A+=Ds(lK||(lK=Mm(["L ",","," Z"])),e,r);return A},$He=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Lo(u-c),{circleTangency:A,lineTangency:h,theta:f}=k_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=k_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-f-g;if(x<0)return i?Ds(cK||(cK=Mm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):Bse({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Ds(uK||(uK=Mm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),A.x,A.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:I}=k_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:T,lineTangency:C,theta:E}=k_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-I-E;if(S<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=Ds(dK||(dK=Mm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,s,s,+(d<0),T.x,T.y,n,n,+(S>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=Ds(AK||(AK=Mm(["L",",","Z"])),e,r);return y},KHe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Tse=t=>{var e=Vo(t,KHe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:A}=e;if(s<a||u===d)return null;var h=wa("recharts-sector",A),f=s-a,m=fl(i,f,0,!0),p;return m>0&&Math.abs(u-d)<360?p=$He({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=Bse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",Mk({},Lu(e),{className:h,d:p}))};function GHe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Gne(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:l}=e,c=hi(n,a,s,l),u=hi(n,a,i,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Ise(e)}}var Pse={},jse={},kse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(kse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kse;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(jse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=jse;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}t.range=n})(Pse);var qHe=Pse.range;const Fse=Ff(qHe);function v0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zHe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XD(t){let e,r,n;t.length!==2?(e=v0,r=(l,c)=>v0(t(l),c),n=(l,c)=>t(l)-c):(e=t===v0||t===zHe?t:WHe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<0?u=A+1:d=A}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<=0?u=A+1:d=A}while(u<d)}return u}function i(l,c,u=0,d=l.length){const A=a(l,c,u,d-1);return A>u&&n(l[A-1],c)>-n(l[A],c)?A-1:A}return{left:a,center:i,right:s}}function WHe(){return 0}function Ose(t){return t===null?NaN:+t}function*XHe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const YHe=XD(v0),hw=YHe.right;XD(Ose).center;class fK extends Map{constructor(e,r=e$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(hK(this,e))}has(e){return super.has(hK(this,e))}set(e,r){return super.set(JHe(this,e),r)}delete(e){return super.delete(ZHe(this,e))}}function hK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function JHe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ZHe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function e$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function t$e(t=v0){if(t===v0)return Dse;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Dse(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const r$e=Math.sqrt(50),n$e=Math.sqrt(10),a$e=Math.sqrt(2);function FS(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=r$e?10:s>=n$e?5:s>=a$e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?FS(t,e,r*2):[l,c,u]}function Lk(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?FS(e,t,r):FS(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function Uk(t,e,r){return e=+e,t=+t,r=+r,FS(t,e,r)[2]}function Qk(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Uk(e,t,r):Uk(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function mK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function pK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Rse(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Dse:t$e(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),A=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*A*(c-A)/c)*(u-c/2<0?-1:1),f=Math.max(r,Math.floor(e-u*A/c+h)),m=Math.min(n,Math.floor(e+(c-u)*A/c+h));Rse(t,e,f,m,a)}const s=t[e];let i=r,l=n;for($1(t,r,e),a(t[n],s)>0&&$1(t,r,n);i<l;){for($1(t,i,l),++i,--l;a(t[i],s)<0;)++i;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?$1(t,r,l):(++l,$1(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function $1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function s$e(t,e,r){if(t=Float64Array.from(XHe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return pK(t);if(e>=1)return mK(t);var n,a=(n-1)*e,s=Math.floor(a),i=mK(Rse(t,s).subarray(0,s+1)),l=pK(t.subarray(s+1));return i+(l-i)*(a-s)}}function i$e(t,e,r=Ose){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return i+(l-i)*(a-s)}}function o$e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Hu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $f(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Vk=Symbol("implicit");function YD(){var t=new fK,e=[],r=[],n=Vk;function a(s){let i=t.get(s);if(i===void 0){if(n!==Vk)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new fK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return YD(e,r).unknown(n)},Hu.apply(a,arguments),a}function JD(){var t=YD().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete t.unknown;function A(){var h=e().length,f=a<n,m=f?a:n,p=f?n:a;s=(p-m)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),l&&(m=Math.round(m),i=Math.round(i));var g=o$e(h).map(function(x){return m+s*x});return r(f?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),A()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,A()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,A()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,A()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),A()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),A()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,A()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),A()):d},t.copy=function(){return JD(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Hu.apply(A(),arguments)}function Mse(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Mse(e())},t}function l$e(){return Mse(JD.apply(null,arguments).paddingInner(1))}function ZD(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Lse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function mw(){}var pb=.7,OS=1/pb,Ox="\\s*([+-]?\\d+)\\s*",gb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",AA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c$e=/^#([0-9a-f]{3,8})$/,u$e=new RegExp(`^rgb\\(${Ox},${Ox},${Ox}\\)$`),d$e=new RegExp(`^rgb\\(${AA},${AA},${AA}\\)$`),A$e=new RegExp(`^rgba\\(${Ox},${Ox},${Ox},${gb}\\)$`),f$e=new RegExp(`^rgba\\(${AA},${AA},${AA},${gb}\\)$`),h$e=new RegExp(`^hsl\\(${gb},${AA},${AA}\\)$`),m$e=new RegExp(`^hsla\\(${gb},${AA},${AA},${gb}\\)$`),gK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZD(mw,xb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xK,formatHex:xK,formatHex8:p$e,formatHsl:g$e,formatRgb:vK,toString:vK});function xK(){return this.rgb().formatHex()}function p$e(){return this.rgb().formatHex8()}function g$e(){return Use(this).formatHsl()}function vK(){return this.rgb().formatRgb()}function xb(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=c$e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?yK(e):r===3?new ic(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?F_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?F_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=u$e.exec(t))?new ic(e[1],e[2],e[3],1):(e=d$e.exec(t))?new ic(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=A$e.exec(t))?F_(e[1],e[2],e[3],e[4]):(e=f$e.exec(t))?F_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h$e.exec(t))?NK(e[1],e[2]/100,e[3]/100,1):(e=m$e.exec(t))?NK(e[1],e[2]/100,e[3]/100,e[4]):gK.hasOwnProperty(t)?yK(gK[t]):t==="transparent"?new ic(NaN,NaN,NaN,0):null}function yK(t){return new ic(t>>16&255,t>>8&255,t&255,1)}function F_(t,e,r,n){return n<=0&&(t=e=r=NaN),new ic(t,e,r,n)}function x$e(t){return t instanceof mw||(t=xb(t)),t?(t=t.rgb(),new ic(t.r,t.g,t.b,t.opacity)):new ic}function Hk(t,e,r,n){return arguments.length===1?x$e(t):new ic(t,e,r,n??1)}function ic(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}ZD(ic,Hk,Lse(mw,{brighter(t){return t=t==null?OS:Math.pow(OS,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pb:Math.pow(pb,t),new ic(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ic(rp(this.r),rp(this.g),rp(this.b),DS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bK,formatHex:bK,formatHex8:v$e,formatRgb:wK,toString:wK}));function bK(){return`#${Lm(this.r)}${Lm(this.g)}${Lm(this.b)}`}function v$e(){return`#${Lm(this.r)}${Lm(this.g)}${Lm(this.b)}${Lm((isNaN(this.opacity)?1:this.opacity)*255)}`}function wK(){const t=DS(this.opacity);return`${t===1?"rgb(":"rgba("}${rp(this.r)}, ${rp(this.g)}, ${rp(this.b)}${t===1?")":`, ${t})`}`}function DS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lm(t){return t=rp(t),(t<16?"0":"")+t.toString(16)}function NK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ad(t,e,r,n)}function Use(t){if(t instanceof Ad)return new Ad(t.h,t.s,t.l,t.opacity);if(t instanceof mw||(t=xb(t)),!t)return new Ad;if(t instanceof Ad)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(e===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-e)/l+2:i=(e-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new Ad(i,l,c,t.opacity)}function y$e(t,e,r,n){return arguments.length===1?Use(t):new Ad(t,e,r,n??1)}function Ad(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}ZD(Ad,y$e,Lse(mw,{brighter(t){return t=t==null?OS:Math.pow(OS,t),new Ad(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pb:Math.pow(pb,t),new Ad(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ic(pT(t>=240?t-240:t+120,a,n),pT(t,a,n),pT(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ad(_K(this.h),O_(this.s),O_(this.l),DS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=DS(this.opacity);return`${t===1?"hsl(":"hsla("}${_K(this.h)}, ${O_(this.s)*100}%, ${O_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _K(t){return t=(t||0)%360,t<0?t+360:t}function O_(t){return Math.max(0,Math.min(1,t||0))}function pT(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const eR=t=>()=>t;function b$e(t,e){return function(r){return t+r*e}}function w$e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function N$e(t){return(t=+t)==1?Qse:function(e,r){return r-e?w$e(e,r,t):eR(isNaN(e)?r:e)}}function Qse(t,e){var r=e-t;return r?b$e(t,r):eR(isNaN(t)?e:t)}const CK=function t(e){var r=N$e(e);function n(a,s){var i=r((a=Hk(a)).r,(s=Hk(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Qse(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function _$e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function C$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function E$e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Dv(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function S$e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function RS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function I$e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Dv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var $k=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gT=new RegExp($k.source,"g");function B$e(t){return function(){return t}}function T$e(t){return function(e){return t(e)+""}}function P$e(t,e){var r=$k.lastIndex=gT.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(t=t+"",e=e+"";(n=$k.exec(t))&&(a=gT.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:RS(n,a)})),r=gT.lastIndex;return r<e.length&&(s=e.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?T$e(c[0].x):B$e(e):(e=c.length,function(u){for(var d=0,A;d<e;++d)l[(A=c[d]).i]=A.x(u);return l.join("")})}function Dv(t,e){var r=typeof e,n;return e==null||r==="boolean"?eR(e):(r==="number"?RS:r==="string"?(n=xb(e))?(e=n,CK):P$e:e instanceof xb?CK:e instanceof Date?S$e:C$e(e)?_$e:Array.isArray(e)?E$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?I$e:RS)(t,e)}function tR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function j$e(t,e){e===void 0&&(e=t,t=Dv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function k$e(t){return function(){return t}}function MS(t){return+t}var EK=[0,1];function Dl(t){return t}function Kk(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:k$e(isNaN(e)?NaN:.5)}function F$e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function O$e(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=Kk(a,n),s=r(i,s)):(n=Kk(n,a),s=r(s,i)),function(l){return s(n(l))}}function D$e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Kk(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(l){var c=hw(t,l,1,n)-1;return s[c](a[c](l))}}function pw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Z4(){var t=EK,e=EK,r=Dv,n,a,s,i=Dl,l,c,u;function d(){var h=Math.min(t.length,e.length);return i!==Dl&&(i=F$e(t[0],t[h-1])),l=h>2?D$e:O$e,c=u=null,A}function A(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(n),e,r)))(n(i(h)))}return A.invert=function(h){return i(a((u||(u=l(e,t.map(n),RS)))(h)))},A.domain=function(h){return arguments.length?(t=Array.from(h,MS),d()):t.slice()},A.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},A.rangeRound=function(h){return e=Array.from(h),r=tR,d()},A.clamp=function(h){return arguments.length?(i=h?!0:Dl,d()):i!==Dl},A.interpolate=function(h){return arguments.length?(r=h,d()):r},A.unknown=function(h){return arguments.length?(s=h,A):s},function(h,f){return n=h,a=f,d()}}function rR(){return Z4()(Dl,Dl)}function R$e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function LS(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function lv(t){return t=LS(Math.abs(t)),t?t[1]:NaN}function M$e(t,e){return function(r,n){for(var a=r.length,s=[],i=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[i=(i+1)%t.length];return s.reverse().join(e)}}function L$e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var U$e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vb(t){if(!(e=U$e.exec(t)))throw new Error("invalid format: "+t);var e;return new nR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vb.prototype=nR.prototype;function nR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Q$e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var US;function V$e(t,e){var r=LS(t,e);if(!r)return US=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(US=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+LS(t,Math.max(0,e+s-1))[0]}function SK(t,e){var r=LS(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const IK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:R$e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SK(t*100,e),r:SK,s:V$e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function BK(t){return t}var TK=Array.prototype.map,PK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function H$e(t){var e=t.grouping===void 0||t.thousands===void 0?BK:M$e(TK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?BK:L$e(TK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(A,h){A=vb(A);var f=A.fill,m=A.align,p=A.sign,g=A.symbol,x=A.zero,y=A.width,b=A.comma,w=A.precision,I=A.trim,T=A.type;T==="n"?(b=!0,T="g"):IK[T]||(w===void 0&&(w=12),I=!0,T="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),E=(g==="$"?n:/[%p]/.test(T)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),S=IK[T],O=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function B(P){var D=C,X=E,de,re,ie;if(T==="c")X=S(P)+X,P="";else{P=+P;var ce=P<0||1/P<0;if(P=isNaN(P)?c:S(Math.abs(P),w),I&&(P=Q$e(P)),ce&&+P==0&&p!=="+"&&(ce=!1),D=(ce?p==="("?p:l:p==="-"||p==="("?"":p)+D,X=(T==="s"&&!isNaN(P)&&US!==void 0?PK[8+US/3]:"")+X+(ce&&p==="("?")":""),O){for(de=-1,re=P.length;++de<re;)if(ie=P.charCodeAt(de),48>ie||ie>57){X=(ie===46?a+P.slice(de+1):P.slice(de))+X,P=P.slice(0,de);break}}}b&&!x&&(P=e(P,1/0));var J=D.length+P.length+X.length,pe=J<y?new Array(y-J+1).join(f):"";switch(b&&x&&(P=e(pe+P,pe.length?y-X.length:1/0),pe=""),m){case"<":P=D+P+X+pe;break;case"=":P=D+pe+P+X;break;case"^":P=pe.slice(0,J=pe.length>>1)+D+P+X+pe.slice(J);break;default:P=pe+D+P+X;break}return s(P)}return B.toString=function(){return A+""},B}function d(A,h){var f=Math.max(-8,Math.min(8,Math.floor(lv(h)/3)))*3,m=Math.pow(10,-f),p=u((A=vb(A),A.type="f",A),{suffix:PK[8+f/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var D_,aR,Vse;$$e({thousands:",",grouping:[3],currency:["$",""]});function $$e(t){return D_=H$e(t),aR=D_.format,Vse=D_.formatPrefix,D_}function K$e(t){return Math.max(0,-lv(Math.abs(t)))}function G$e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lv(e)/3)))*3-lv(Math.abs(t)))}function q$e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,lv(e)-lv(t))+1}function Hse(t,e,r,n){var a=Qk(t,e,r),s;switch(n=vb(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=G$e(a,i))&&(n.precision=s),Vse(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=q$e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=K$e(a))&&(n.precision=s-(n.type==="%")*2);break}}return aR(n)}function X0(t){var e=t.domain;return t.ticks=function(r){var n=e();return Lk(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Hse(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=Uk(i,l,r),u===c)return n[a]=i,n[s]=l,e(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function $se(){var t=rR();return t.copy=function(){return pw(t,$se())},Hu.apply(t,arguments),X0(t)}function Kse(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,MS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Kse(t).unknown(e)},t=arguments.length?Array.from(t,MS):[0,1],X0(r)}function Gse(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function jK(t){return Math.log(t)}function kK(t){return Math.exp(t)}function z$e(t){return-Math.log(-t)}function W$e(t){return-Math.exp(-t)}function X$e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Y$e(t){return t===10?X$e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function J$e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FK(t){return(e,r)=>-t(-e,r)}function sR(t){const e=t(jK,kK),r=e.domain;let n=10,a,s;function i(){return a=J$e(n),s=Y$e(n),r()[0]<0?(a=FK(a),s=FK(s),t(z$e,W$e)):t(jK,kK),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(r(l),i()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const A=d<u;A&&([u,d]=[d,u]);let h=a(u),f=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&f-h<g){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=f;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=Lk(u,d,g))}else x=Lk(h,f,Math.min(f-h,g)).map(s);return A?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=vb(c)).precision==null&&(c.trim=!0),c=aR(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let A=d/s(Math.round(a(d)));return A*n<n-.5&&(A*=n),A<=u?c(d):""}},e.nice=()=>r(Gse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function qse(){const t=sR(Z4()).domain([1,10]);return t.copy=()=>pw(t,qse()).base(t.base()),Hu.apply(t,arguments),t}function OK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function iR(t){var e=1,r=t(OK(e),DK(e));return r.constant=function(n){return arguments.length?t(OK(e=+n),DK(e)):e},X0(r)}function zse(){var t=iR(Z4());return t.copy=function(){return pw(t,zse()).constant(t.constant())},Hu.apply(t,arguments)}function RK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Z$e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function eKe(t){return t<0?-t*t:t*t}function oR(t){var e=t(Dl,Dl),r=1;function n(){return r===1?t(Dl,Dl):r===.5?t(Z$e,eKe):t(RK(r),RK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},X0(e)}function lR(){var t=oR(Z4());return t.copy=function(){return pw(t,lR()).exponent(t.exponent())},Hu.apply(t,arguments),t}function tKe(){return lR.apply(null,arguments).exponent(.5)}function MK(t){return Math.sign(t)*t*t}function rKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Wse(){var t=rR(),e=[0,1],r=!1,n;function a(s){var i=rKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(MK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,MS)).map(MK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Wse(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Hu.apply(a,arguments),X0(a)}function Xse(){var t=[],e=[],r=[],n;function a(){var i=0,l=Math.max(1,e.length);for(r=new Array(l-1);++i<l;)r[i-1]=i$e(t,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:e[hw(r,i)]}return s.invertExtent=function(i){var l=e.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(v0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Xse().domain(t).range(e).unknown(n)},Hu.apply(s,arguments)}function Yse(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[hw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Yse().domain([t,e]).range(a).unknown(s)},Hu.apply(X0(i),arguments)}function Jse(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[hw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Jse().domain(t).range(e).unknown(r)},Hu.apply(a,arguments)}const xT=new Date,vT=new Date;function Vi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<i);return c},a.filter=s=>Vi(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;e(i,-1),!s(i););else for(;--l>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>(xT.setTime(+s),vT.setTime(+i),t(xT),t(vT),Math.floor(r(xT,vT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const QS=Vi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);QS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):QS);QS.range;const nf=1e3,Tu=nf*60,af=Tu*60,Bf=af*24,cR=Bf*7,LK=Bf*30,yT=Bf*365,Um=Vi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*nf)},(t,e)=>(e-t)/nf,t=>t.getUTCSeconds());Um.range;const uR=Vi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nf)},(t,e)=>{t.setTime(+t+e*Tu)},(t,e)=>(e-t)/Tu,t=>t.getMinutes());uR.range;const dR=Vi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Tu)},(t,e)=>(e-t)/Tu,t=>t.getUTCMinutes());dR.range;const AR=Vi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nf-t.getMinutes()*Tu)},(t,e)=>{t.setTime(+t+e*af)},(t,e)=>(e-t)/af,t=>t.getHours());AR.range;const fR=Vi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*af)},(t,e)=>(e-t)/af,t=>t.getUTCHours());fR.range;const gw=Vi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Tu)/Bf,t=>t.getDate()-1);gw.range;const e3=Vi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bf,t=>t.getUTCDate()-1);e3.range;const Zse=Vi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bf,t=>Math.floor(t/Bf));Zse.range;function eg(t){return Vi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Tu)/cR)}const t3=eg(0),VS=eg(1),nKe=eg(2),aKe=eg(3),cv=eg(4),sKe=eg(5),iKe=eg(6);t3.range;VS.range;nKe.range;aKe.range;cv.range;sKe.range;iKe.range;function tg(t){return Vi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/cR)}const r3=tg(0),HS=tg(1),oKe=tg(2),lKe=tg(3),uv=tg(4),cKe=tg(5),uKe=tg(6);r3.range;HS.range;oKe.range;lKe.range;uv.range;cKe.range;uKe.range;const hR=Vi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());hR.range;const mR=Vi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());mR.range;const Tf=Vi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Tf.range;const Pf=Vi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Pf.range;function eie(t,e,r,n,a,s){const i=[[Um,1,nf],[Um,5,5*nf],[Um,15,15*nf],[Um,30,30*nf],[s,1,Tu],[s,5,5*Tu],[s,15,15*Tu],[s,30,30*Tu],[a,1,af],[a,3,3*af],[a,6,6*af],[a,12,12*af],[n,1,Bf],[n,2,2*Bf],[r,1,cR],[e,1,LK],[e,3,3*LK],[t,1,yT]];function l(u,d,A){const h=d<u;h&&([u,d]=[d,u]);const f=A&&typeof A.range=="function"?A:c(u,d,A),m=f?f.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,A){const h=Math.abs(d-u)/A,f=XD(([,,g])=>g).right(i,h);if(f===i.length)return t.every(Qk(u/yT,d/yT,A));if(f===0)return QS.every(Math.max(Qk(u,d,A),1));const[m,p]=i[h/i[f-1][2]<i[f][2]/h?f-1:f];return m.every(p)}return[l,c]}const[dKe,AKe]=eie(Pf,mR,r3,Zse,fR,dR),[fKe,hKe]=eie(Tf,hR,t3,gw,AR,uR);function bT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function K1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function mKe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,u=G1(a),d=q1(a),A=G1(s),h=q1(s),f=G1(i),m=q1(i),p=G1(l),g=q1(l),x=G1(c),y=q1(c),b={a:ie,A:ce,b:J,B:pe,c:null,d:KK,e:KK,f:MKe,g:zKe,G:XKe,H:OKe,I:DKe,j:RKe,L:tie,m:LKe,M:UKe,p:Se,q:k,Q:zK,s:WK,S:QKe,u:VKe,U:HKe,V:$Ke,w:KKe,W:GKe,x:null,X:null,y:qKe,Y:WKe,Z:YKe,"%":qK},w={a:F,A:H,b:M,B:L,c:null,d:GK,e:GK,f:tGe,g:dGe,G:fGe,H:JKe,I:ZKe,j:eGe,L:nie,m:rGe,M:nGe,p:z,q:R,Q:zK,s:WK,S:aGe,u:sGe,U:iGe,V:oGe,w:lGe,W:cGe,x:null,X:null,y:uGe,Y:AGe,Z:hGe,"%":qK},I={a:O,A:B,b:P,B:D,c:X,d:HK,e:HK,f:PKe,g:VK,G:QK,H:$K,I:$K,j:SKe,L:TKe,m:EKe,M:IKe,p:S,q:CKe,Q:kKe,s:FKe,S:BKe,u:yKe,U:bKe,V:wKe,w:vKe,W:NKe,x:de,X:re,y:VK,Y:QK,Z:_Ke,"%":jKe};b.x=T(r,b),b.X=T(n,b),b.c=T(e,b),w.x=T(r,w),w.X=T(n,w),w.c=T(e,w);function T(G,ee){return function(te){var Q=[],xe=-1,Y=0,W=G.length,le,Pe,Le;for(te instanceof Date||(te=new Date(+te));++xe<W;)G.charCodeAt(xe)===37&&(Q.push(G.slice(Y,xe)),(Pe=UK[le=G.charAt(++xe)])!=null?le=G.charAt(++xe):Pe=le==="e"?" ":"0",(Le=ee[le])&&(le=Le(te,Pe)),Q.push(le),Y=xe+1);return Q.push(G.slice(Y,xe)),Q.join("")}}function C(G,ee){return function(te){var Q=K1(1900,void 0,1),xe=E(Q,G,te+="",0),Y,W;if(xe!=te.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ee&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Y=wT(K1(Q.y,0,1)),W=Y.getUTCDay(),Y=W>4||W===0?HS.ceil(Y):HS(Y),Y=e3.offset(Y,(Q.V-1)*7),Q.y=Y.getUTCFullYear(),Q.m=Y.getUTCMonth(),Q.d=Y.getUTCDate()+(Q.w+6)%7):(Y=bT(K1(Q.y,0,1)),W=Y.getDay(),Y=W>4||W===0?VS.ceil(Y):VS(Y),Y=gw.offset(Y,(Q.V-1)*7),Q.y=Y.getFullYear(),Q.m=Y.getMonth(),Q.d=Y.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),W="Z"in Q?wT(K1(Q.y,0,1)).getUTCDay():bT(K1(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(W+5)%7:Q.w+Q.U*7-(W+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,wT(Q)):bT(Q)}}function E(G,ee,te,Q){for(var xe=0,Y=ee.length,W=te.length,le,Pe;xe<Y;){if(Q>=W)return-1;if(le=ee.charCodeAt(xe++),le===37){if(le=ee.charAt(xe++),Pe=I[le in UK?ee.charAt(xe++):le],!Pe||(Q=Pe(G,te,Q))<0)return-1}else if(le!=te.charCodeAt(Q++))return-1}return Q}function S(G,ee,te){var Q=u.exec(ee.slice(te));return Q?(G.p=d.get(Q[0].toLowerCase()),te+Q[0].length):-1}function O(G,ee,te){var Q=f.exec(ee.slice(te));return Q?(G.w=m.get(Q[0].toLowerCase()),te+Q[0].length):-1}function B(G,ee,te){var Q=A.exec(ee.slice(te));return Q?(G.w=h.get(Q[0].toLowerCase()),te+Q[0].length):-1}function P(G,ee,te){var Q=x.exec(ee.slice(te));return Q?(G.m=y.get(Q[0].toLowerCase()),te+Q[0].length):-1}function D(G,ee,te){var Q=p.exec(ee.slice(te));return Q?(G.m=g.get(Q[0].toLowerCase()),te+Q[0].length):-1}function X(G,ee,te){return E(G,e,ee,te)}function de(G,ee,te){return E(G,r,ee,te)}function re(G,ee,te){return E(G,n,ee,te)}function ie(G){return i[G.getDay()]}function ce(G){return s[G.getDay()]}function J(G){return c[G.getMonth()]}function pe(G){return l[G.getMonth()]}function Se(G){return a[+(G.getHours()>=12)]}function k(G){return 1+~~(G.getMonth()/3)}function F(G){return i[G.getUTCDay()]}function H(G){return s[G.getUTCDay()]}function M(G){return c[G.getUTCMonth()]}function L(G){return l[G.getUTCMonth()]}function z(G){return a[+(G.getUTCHours()>=12)]}function R(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ee=T(G+="",b);return ee.toString=function(){return G},ee},parse:function(G){var ee=C(G+="",!1);return ee.toString=function(){return G},ee},utcFormat:function(G){var ee=T(G+="",w);return ee.toString=function(){return G},ee},utcParse:function(G){var ee=C(G+="",!0);return ee.toString=function(){return G},ee}}}var UK={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,pKe=/^%/,gKe=/[\\^$*+?|[\]().{}]/g;function Jn(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function xKe(t){return t.replace(gKe,"\\$&")}function G1(t){return new RegExp("^(?:"+t.map(xKe).join("|")+")","i")}function q1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function vKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function yKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function bKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function wKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function NKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function QK(t,e,r){var n=mo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function VK(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _Ke(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CKe(t,e,r){var n=mo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function EKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function HK(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function SKe(t,e,r){var n=mo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function $K(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function IKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function BKe(t,e,r){var n=mo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function TKe(t,e,r){var n=mo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function PKe(t,e,r){var n=mo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jKe(t,e,r){var n=pKe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function kKe(t,e,r){var n=mo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function FKe(t,e,r){var n=mo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function KK(t,e){return Jn(t.getDate(),e,2)}function OKe(t,e){return Jn(t.getHours(),e,2)}function DKe(t,e){return Jn(t.getHours()%12||12,e,2)}function RKe(t,e){return Jn(1+gw.count(Tf(t),t),e,3)}function tie(t,e){return Jn(t.getMilliseconds(),e,3)}function MKe(t,e){return tie(t,e)+"000"}function LKe(t,e){return Jn(t.getMonth()+1,e,2)}function UKe(t,e){return Jn(t.getMinutes(),e,2)}function QKe(t,e){return Jn(t.getSeconds(),e,2)}function VKe(t){var e=t.getDay();return e===0?7:e}function HKe(t,e){return Jn(t3.count(Tf(t)-1,t),e,2)}function rie(t){var e=t.getDay();return e>=4||e===0?cv(t):cv.ceil(t)}function $Ke(t,e){return t=rie(t),Jn(cv.count(Tf(t),t)+(Tf(t).getDay()===4),e,2)}function KKe(t){return t.getDay()}function GKe(t,e){return Jn(VS.count(Tf(t)-1,t),e,2)}function qKe(t,e){return Jn(t.getFullYear()%100,e,2)}function zKe(t,e){return t=rie(t),Jn(t.getFullYear()%100,e,2)}function WKe(t,e){return Jn(t.getFullYear()%1e4,e,4)}function XKe(t,e){var r=t.getDay();return t=r>=4||r===0?cv(t):cv.ceil(t),Jn(t.getFullYear()%1e4,e,4)}function YKe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jn(e/60|0,"0",2)+Jn(e%60,"0",2)}function GK(t,e){return Jn(t.getUTCDate(),e,2)}function JKe(t,e){return Jn(t.getUTCHours(),e,2)}function ZKe(t,e){return Jn(t.getUTCHours()%12||12,e,2)}function eGe(t,e){return Jn(1+e3.count(Pf(t),t),e,3)}function nie(t,e){return Jn(t.getUTCMilliseconds(),e,3)}function tGe(t,e){return nie(t,e)+"000"}function rGe(t,e){return Jn(t.getUTCMonth()+1,e,2)}function nGe(t,e){return Jn(t.getUTCMinutes(),e,2)}function aGe(t,e){return Jn(t.getUTCSeconds(),e,2)}function sGe(t){var e=t.getUTCDay();return e===0?7:e}function iGe(t,e){return Jn(r3.count(Pf(t)-1,t),e,2)}function aie(t){var e=t.getUTCDay();return e>=4||e===0?uv(t):uv.ceil(t)}function oGe(t,e){return t=aie(t),Jn(uv.count(Pf(t),t)+(Pf(t).getUTCDay()===4),e,2)}function lGe(t){return t.getUTCDay()}function cGe(t,e){return Jn(HS.count(Pf(t)-1,t),e,2)}function uGe(t,e){return Jn(t.getUTCFullYear()%100,e,2)}function dGe(t,e){return t=aie(t),Jn(t.getUTCFullYear()%100,e,2)}function AGe(t,e){return Jn(t.getUTCFullYear()%1e4,e,4)}function fGe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?uv(t):uv.ceil(t),Jn(t.getUTCFullYear()%1e4,e,4)}function hGe(){return"+0000"}function qK(){return"%"}function zK(t){return+t}function WK(t){return Math.floor(+t/1e3)}var Rg,sie,iie;mGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mGe(t){return Rg=mKe(t),sie=Rg.format,Rg.parse,iie=Rg.utcFormat,Rg.utcParse,Rg}function pGe(t){return new Date(t)}function gGe(t){return t instanceof Date?+t:+new Date(+t)}function pR(t,e,r,n,a,s,i,l,c,u){var d=rR(),A=d.invert,h=d.domain,f=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function I(T){return(c(T)<T?f:l(T)<T?m:i(T)<T?p:s(T)<T?g:n(T)<T?a(T)<T?x:y:r(T)<T?b:w)(T)}return d.invert=function(T){return new Date(A(T))},d.domain=function(T){return arguments.length?h(Array.from(T,gGe)):h().map(pGe)},d.ticks=function(T){var C=h();return t(C[0],C[C.length-1],T??10)},d.tickFormat=function(T,C){return C==null?I:u(C)},d.nice=function(T){var C=h();return(!T||typeof T.range!="function")&&(T=e(C[0],C[C.length-1],T??10)),T?h(Gse(C,T)):d},d.copy=function(){return pw(d,pR(t,e,r,n,a,s,i,l,c,u))},d}function xGe(){return Hu.apply(pR(fKe,hKe,Tf,hR,t3,gw,AR,uR,Um,sie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vGe(){return Hu.apply(pR(dKe,AKe,Pf,mR,r3,e3,fR,dR,Um,iie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function n3(){var t=0,e=1,r,n,a,s,i=Dl,l=!1,c;function u(A){return A==null||isNaN(A=+A)?c:i(a===0?.5:(A=(s(A)-r)*a,l?Math.max(0,Math.min(1,A)):A))}u.domain=function(A){return arguments.length?([t,e]=A,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(A){return arguments.length?(l=!!A,u):l},u.interpolator=function(A){return arguments.length?(i=A,u):i};function d(A){return function(h){var f,m;return arguments.length?([f,m]=h,i=A(f,m),u):[i(0),i(1)]}}return u.range=d(Dv),u.rangeRound=d(tR),u.unknown=function(A){return arguments.length?(c=A,u):c},function(A){return s=A,r=A(t),n=A(e),a=r===n?0:1/(n-r),u}}function Y0(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oie(){var t=X0(n3()(Dl));return t.copy=function(){return Y0(t,oie())},$f.apply(t,arguments)}function lie(){var t=sR(n3()).domain([1,10]);return t.copy=function(){return Y0(t,lie()).base(t.base())},$f.apply(t,arguments)}function cie(){var t=iR(n3());return t.copy=function(){return Y0(t,cie()).constant(t.constant())},$f.apply(t,arguments)}function gR(){var t=oR(n3());return t.copy=function(){return Y0(t,gR()).exponent(t.exponent())},$f.apply(t,arguments)}function yGe(){return gR.apply(null,arguments).exponent(.5)}function uie(){var t=[],e=Dl;function r(n){if(n!=null&&!isNaN(n=+n))return e((hw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(v0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>s$e(t,s/n))},r.copy=function(){return uie(e).domain(t)},$f.apply(r,arguments)}function a3(){var t=0,e=.5,r=1,n=1,a,s,i,l,c,u=Dl,d,A=!1,h;function f(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(A?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,f):[t,e,r]},f.clamp=function(p){return arguments.length?(A=!!p,f):A},f.interpolator=function(p){return arguments.length?(u=p,f):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=j$e(p,[x,y,b]),f):[u(0),u(.5),u(1)]}}return f.range=m(Dv),f.rangeRound=m(tR),f.unknown=function(p){return arguments.length?(h=p,f):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,f}}function die(){var t=X0(a3()(Dl));return t.copy=function(){return Y0(t,die())},$f.apply(t,arguments)}function Aie(){var t=sR(a3()).domain([.1,1,10]);return t.copy=function(){return Y0(t,Aie()).base(t.base())},$f.apply(t,arguments)}function fie(){var t=iR(a3());return t.copy=function(){return Y0(t,fie()).constant(t.constant())},$f.apply(t,arguments)}function xR(){var t=oR(a3());return t.copy=function(){return Y0(t,xR()).exponent(t.exponent())},$f.apply(t,arguments)}function bGe(){return xR.apply(null,arguments).exponent(.5)}const yy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:JD,scaleDiverging:die,scaleDivergingLog:Aie,scaleDivergingPow:xR,scaleDivergingSqrt:bGe,scaleDivergingSymlog:fie,scaleIdentity:Kse,scaleImplicit:Vk,scaleLinear:$se,scaleLog:qse,scaleOrdinal:YD,scalePoint:l$e,scalePow:lR,scaleQuantile:Xse,scaleQuantize:Yse,scaleRadial:Wse,scaleSequential:oie,scaleSequentialLog:lie,scaleSequentialPow:gR,scaleSequentialQuantile:uie,scaleSequentialSqrt:yGe,scaleSequentialSymlog:cie,scaleSqrt:tKe,scaleSymlog:zse,scaleThreshold:Jse,scaleTime:xGe,scaleUtc:vGe,tickFormat:Hse},Symbol.toStringTag,{value:"Module"}));var Kf=t=>t.chartData,s3=jt([Kf],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),hie=(t,e,r,n)=>n?s3(t):Kf(t),wGe=(t,e,r)=>r?s3(t):Kf(t);function D0(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Bs(e)&&Bs(r))return!0}return!1}function XK(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function mie(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Bs(r))a=r;else if(typeof r=="function")return;if(Bs(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(D0(i))return i}}function NGe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(D0(n))return XK(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,l;if(a==="auto")e!=null&&(i=Math.min(...e));else if(Kr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&f$.test(a)){var c=f$.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Kr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&h$.test(s)){var d=h$.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var A=+d[1];l=e[1]+A}}else l=e==null?void 0:e[1];var h=[i,l];if(D0(h))return e==null?h:XK(h,e,r)}}}var Rv=1e9,_Ge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yR,ds=!0,Qu="[DecimalError] ",np=Qu+"Invalid argument: ",vR=Qu+"Exponent out of range: ",Mv=Math.floor,Nm=Math.pow,CGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dc,ro=1e7,Wa=7,pie=9007199254740991,$S=Mv(pie/Wa),Pr={};Pr.absoluteValue=Pr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pr.comparedTo=Pr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Pr.decimalPlaces=Pr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Wa;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Pr.dividedBy=Pr.div=function(t){return pf(this,new this.constructor(t))};Pr.dividedToIntegerBy=Pr.idiv=function(t){var e=this,r=e.constructor;return ka(pf(e,new r(t),0,1),r.precision)};Pr.equals=Pr.eq=function(t){return!this.cmp(t)};Pr.exponent=function(){return mi(this)};Pr.greaterThan=Pr.gt=function(t){return this.cmp(t)>0};Pr.greaterThanOrEqualTo=Pr.gte=function(t){return this.cmp(t)>=0};Pr.isInteger=Pr.isint=function(){return this.e>this.d.length-2};Pr.isNegative=Pr.isneg=function(){return this.s<0};Pr.isPositive=Pr.ispos=function(){return this.s>0};Pr.isZero=function(){return this.s===0};Pr.lessThan=Pr.lt=function(t){return this.cmp(t)<0};Pr.lessThanOrEqualTo=Pr.lte=function(t){return this.cmp(t)<1};Pr.logarithm=Pr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Dc))throw Error(Qu+"NaN");if(r.s<1)throw Error(Qu+(r.s?"NaN":"-Infinity"));return r.eq(Dc)?new n(0):(ds=!1,e=pf(yb(r,s),yb(t,s),s),ds=!0,ka(e,a))};Pr.minus=Pr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vie(e,t):gie(e,(t.s=-t.s,t))};Pr.modulo=Pr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Qu+"NaN");return r.s?(ds=!1,e=pf(r,t,0,1).times(t),ds=!0,r.minus(e)):ka(new n(r),a)};Pr.naturalExponential=Pr.exp=function(){return xie(this)};Pr.naturalLogarithm=Pr.ln=function(){return yb(this)};Pr.negated=Pr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pr.plus=Pr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gie(e,t):vie(e,(t.s=-t.s,t))};Pr.precision=Pr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(np+t);if(e=mi(a)+1,n=a.d.length-1,r=n*Wa+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Pr.squareRoot=Pr.sqrt=function(){var t,e,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Qu+"NaN")}for(t=mi(l),ds=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=oA(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Mv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(pf(l,s,i+2)).times(.5),oA(s.d).slice(0,i)===(e=oA(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(ka(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;i+=4}return ds=!0,ka(n,r)};Pr.times=Pr.mul=function(t){var e,r,n,a,s,i,l,c,u,d=this,A=d.constructor,h=d.d,f=(t=new A(t)).d;if(!d.s||!t.s)return new A(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=f.length,c<u&&(s=h,h=f,f=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+f[n]*h[a-n-1]+e,s[a--]=l%ro|0,e=l/ro|0;s[a]=(s[a]+e)%ro|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,ds?ka(t,A.precision):t};Pr.toDecimalPlaces=Pr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(xA(t,0,Rv),e===void 0?e=n.rounding:xA(e,0,8),ka(r,t+mi(r)+1,e))};Pr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=kp(n,!0):(xA(t,0,Rv),e===void 0?e=a.rounding:xA(e,0,8),n=ka(new a(n),t+1,e),r=kp(n,!0,t+1)),r};Pr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?kp(a):(xA(t,0,Rv),e===void 0?e=s.rounding:xA(e,0,8),n=ka(new s(a),t+mi(a)+1,e),r=kp(n.abs(),!1,t+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Pr.toInteger=Pr.toint=function(){var t=this,e=t.constructor;return ka(new e(t),mi(t)+1,e.rounding)};Pr.toNumber=function(){return+this};Pr.toPower=Pr.pow=function(t){var e,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Dc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Qu+"Infinity");return l}if(l.eq(Dc))return l;if(n=c.precision,t.eq(Dc))return ka(l,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=l.s,i){if((r=d<0?-d:d)<=pie){for(a=new c(Dc),e=Math.ceil(n/Wa+4),ds=!1;r%2&&(a=a.times(l),JK(a.d,e)),r=Mv(r/2),r!==0;)l=l.times(l),JK(l.d,e);return ds=!0,t.s<0?new c(Dc).div(a):ka(a,n)}}else if(s<0)throw Error(Qu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ds=!1,a=t.times(yb(l,n+u)),ds=!0,a=xie(a),a.s=s,a};Pr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=mi(a),n=kp(a,r<=s.toExpNeg||r>=s.toExpPos)):(xA(t,1,Rv),e===void 0?e=s.rounding:xA(e,0,8),a=ka(new s(a),t,e),r=mi(a),n=kp(a,t<=r||r<=s.toExpNeg,t)),n};Pr.toSignificantDigits=Pr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(xA(t,1,Rv),e===void 0?e=n.rounding:xA(e,0,8)),ka(new n(r),t,e)};Pr.toString=Pr.valueOf=Pr.val=Pr.toJSON=Pr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mi(t),r=t.constructor;return kp(t,e<=r.toExpNeg||e>=r.toExpPos)};function gie(t,e){var r,n,a,s,i,l,c,u,d=t.constructor,A=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),ds?ka(e,A):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(A/Wa),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/ro|0,c[s]%=ro;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,ds?ka(e,A):e}function xA(t,e,r){if(t!==~~t||t<e||t>r)throw Error(np+t)}function oA(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=Wa-n.length,r&&(s+=Fh(r)),s+=n;i=t[e],n=i+"",r=Wa-n.length,r&&(s+=Fh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var pf=function(){function t(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%ro|0,i=s/ro|0;return i&&n.unshift(i),n}function e(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*ro+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,A,h,f,m,p,g,x,y,b,w,I,T,C,E,S=n.constructor,O=n.s==a.s?1:-1,B=n.d,P=a.d;if(!n.s)return new S(n);if(!a.s)throw Error(Qu+"Division by zero");for(c=n.e-a.e,C=P.length,I=B.length,f=new S(O),m=f.d=[],u=0;P[u]==(B[u]||0);)++u;if(P[u]>(B[u]||0)&&--c,s==null?y=s=S.precision:i?y=s+(mi(n)-mi(a))+1:y=s,y<0)return new S(0);if(y=y/Wa+2|0,u=0,C==1)for(d=0,P=P[0],y++;(u<I||d)&&y--;u++)b=d*ro+(B[u]||0),m[u]=b/P|0,d=b%P|0;else{for(d=ro/(P[0]+1)|0,d>1&&(P=t(P,d),B=t(B,d),C=P.length,I=B.length),w=C,p=B.slice(0,C),g=p.length;g<C;)p[g++]=0;E=P.slice(),E.unshift(0),T=P[0],P[1]>=ro/2&&++T;do d=0,l=e(P,p,C,g),l<0?(x=p[0],C!=g&&(x=x*ro+(p[1]||0)),d=x/T|0,d>1?(d>=ro&&(d=ro-1),A=t(P,d),h=A.length,g=p.length,l=e(A,p,h,g),l==1&&(d--,r(A,C<h?E:P,h))):(d==0&&(l=d=1),A=P.slice()),h=A.length,h<g&&A.unshift(0),r(p,A,g),l==-1&&(g=p.length,l=e(P,p,C,g),l<1&&(d++,r(p,C<g?E:P,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=B[w]||0:(p=[B[w]],g=1);while((w++<I||p[0]!==void 0)&&y--)}return m[0]||m.shift(),f.e=c,ka(f,i?s+mi(f)+1:s)}}();function xie(t,e){var r,n,a,s,i,l,c=0,u=0,d=t.constructor,A=d.precision;if(mi(t)>16)throw Error(vR+mi(t));if(!t.s)return new d(Dc);for(ds=!1,l=A,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(Nm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Dc),d.precision=l;;){if(a=ka(a.times(t),l),r=r.times(++c),i=s.plus(pf(a,r,l)),oA(i.d).slice(0,l)===oA(s.d).slice(0,l)){for(;u--;)s=ka(s.times(s),l);return d.precision=A,e==null?(ds=!0,ka(s,A)):s}s=i}}function mi(t){for(var e=t.e*Wa,r=t.d[0];r>=10;r/=10)e++;return e}function NT(t,e,r){if(e>t.LN10.sd())throw ds=!0,r&&(t.precision=r),Error(Qu+"LN10 precision limit exceeded");return ka(new t(t.LN10),e)}function Fh(t){for(var e="";t--;)e+="0";return e}function yb(t,e){var r,n,a,s,i,l,c,u,d,A=1,h=10,f=t,m=f.d,p=f.constructor,g=p.precision;if(f.s<1)throw Error(Qu+(f.s?"NaN":"-Infinity"));if(f.eq(Dc))return new p(0);if(e==null?(ds=!1,u=g):u=e,f.eq(10))return e==null&&(ds=!0),NT(p,u);if(u+=h,p.precision=u,r=oA(m),n=r.charAt(0),s=mi(f),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)f=f.times(t),r=oA(f.d),n=r.charAt(0),A++;s=mi(f),n>1?(f=new p("0."+r),s++):f=new p(n+"."+r.slice(1))}else return c=NT(p,u+2,g).times(s+""),f=yb(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(ds=!0,ka(f,g)):f;for(l=i=f=pf(f.minus(Dc),f.plus(Dc),u),d=ka(f.times(f),u),a=3;;){if(i=ka(i.times(d),u),c=l.plus(pf(i,new p(a),u)),oA(c.d).slice(0,u)===oA(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(NT(p,u+2,g).times(s+""))),l=pf(l,new p(A),u),p.precision=g,e==null?(ds=!0,ka(l,g)):l;l=c,a+=2}}function YK(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Mv(r/Wa),t.d=[],n=(r+1)%Wa,r<0&&(n+=Wa),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Wa;n<a;)t.d.push(+e.slice(n,n+=Wa));e=e.slice(n),n=Wa-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),ds&&(t.e>$S||t.e<-$S))throw Error(vR+r)}else t.s=0,t.e=0,t.d=[0];return t}function ka(t,e,r){var n,a,s,i,l,c,u,d,A=t.d;for(i=1,s=A[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=Wa,a=e,u=A[d=0];else{if(d=Math.ceil((n+1)/Wa),s=A.length,d>=s)return t;for(u=s=A[d],i=1;s>=10;s/=10)i++;n%=Wa,a=n-Wa+i}if(r!==void 0&&(s=Nm(10,i-a-1),l=u/s%10|0,c=e<0||A[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Nm(10,i-a):0:A[d-1])%10&1||r==(t.s<0?8:7))),e<1||!A[0])return c?(s=mi(t),A.length=1,e=e-s-1,A[0]=Nm(10,(Wa-e%Wa)%Wa),t.e=Mv(-e/Wa)||0):(A.length=1,A[0]=t.e=t.s=0),t;if(n==0?(A.length=d,s=1,d--):(A.length=d+1,s=Nm(10,Wa-n),A[d]=a>0?(u/Nm(10,i-a)%Nm(10,a)|0)*s:0),c)for(;;)if(d==0){(A[0]+=s)==ro&&(A[0]=1,++t.e);break}else{if(A[d]+=s,A[d]!=ro)break;A[d--]=0,s=1}for(n=A.length;A[--n]===0;)A.pop();if(ds&&(t.e>$S||t.e<-$S))throw Error(vR+mi(t));return t}function vie(t,e){var r,n,a,s,i,l,c,u,d,A,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),ds?ka(e,f):e;if(c=t.d,A=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=A.length):(r=A,n=u,l=c.length),a=Math.max(Math.ceil(f/Wa),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=A.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=A[a]){d=c[a]<A[a];break}i=0}for(d&&(r=c,c=A,A=r,e.s=-e.s),l=c.length,a=A.length-l;a>0;--a)c[l++]=0;for(a=A.length;a>i;){if(c[--a]<A[a]){for(s=a;s&&c[--s]===0;)c[s]=ro-1;--c[s],c[a]+=ro}c[a]-=A[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,ds?ka(e,f):e):new h(0)}function kp(t,e,r){var n,a=mi(t),s=oA(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+Fh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Fh(-a-1)+s,r&&(n=r-i)>0&&(s+=Fh(n))):a>=i?(s+=Fh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+Fh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=Fh(n))),t.s<0?"-"+s:s}function JK(t,e){if(t.length>e)return t.length=e,!0}function yie(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(np+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return YK(i,s.toString())}else if(typeof s!="string")throw Error(np+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,CGe.test(s))YK(i,s);else throw Error(np+s)}if(a.prototype=Pr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=yie,a.config=a.set=EGe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function EGe(t){if(!t||typeof t!="object")throw Error(Qu+"Object expected");var e,r,n,a=["precision",1,Rv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Mv(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(np+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(np+r+": "+n);return this}var yR=yie(_Ge);Dc=new yR(1);const ga=yR;var SGe=t=>t,bie={},wie=t=>t===bie,ZK=t=>function e(){return arguments.length===0||arguments.length===1&&wie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Nie=(t,e)=>t===1?e:ZK(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==bie).length;return s>=t?e(...n):Nie(t-s,ZK(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>wie(d)?l.shift():d);return e(...u,...l)}))}),IGe=t=>Nie(t.length,t),Gk=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},BGe=IGe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),TGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return SGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}};function _ie(t){var e;return t===0?e=1:e=Math.floor(new ga(t).abs().log(10).toNumber())+1,e}function Cie(t,e,r){for(var n=new ga(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Eie=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Sie=(t,e,r)=>{if(t.lte(0))return new ga(0);var n=_ie(t.toNumber()),a=new ga(10).pow(n),s=t.div(a),i=n!==1?.05:.1,l=new ga(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return e?new ga(c.toNumber()):new ga(Math.ceil(c.toNumber()))},PGe=(t,e,r)=>{var n=new ga(1),a=new ga(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new ga(10).pow(_ie(t)-1),a=new ga(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ga(Math.floor(t)))}else t===0?a=new ga(Math.floor((e-1)/2)):r||(a=new ga(Math.floor(t)));var i=Math.floor((e-1)/2),l=TGe(BGe(c=>a.add(new ga(c-i).mul(n)).toNumber()),Gk);return l(0,e)},Iie=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new ga(0),tickMin:new ga(0),tickMax:new ga(0)};var i=Sie(new ga(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new ga(0):(l=new ga(e).add(r).div(2),l=l.sub(new ga(l).mod(i)));var c=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new ga(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Iie(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ga(c).mul(i)),tickMax:l.add(new ga(u).mul(i))})},jGe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,c]=Eie([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...Gk(0,a-1).map(()=>1/0)]:[...Gk(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return PGe(l,a,s);var{step:d,tickMin:A,tickMax:h}=Iie(l,c,i,s,0),f=Cie(A,h.add(new ga(.1).mul(d)),d);return r>n?f.reverse():f},kGe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=Eie([n,a]);if(i===-1/0||l===1/0)return[n,a];if(i===l)return[i];var c=Math.max(r,2),u=Sie(new ga(l).sub(i).div(c-1),s,0),d=[...Cie(new ga(i),new ga(l),u),l];return s===!1&&(d=d.map(A=>Math.round(A))),n>a?d.reverse():d},Bie=t=>t.rootProps.maxBarSize,FGe=t=>t.rootProps.barGap,Tie=t=>t.rootProps.barCategoryGap,OGe=t=>t.rootProps.barSize,xw=t=>t.rootProps.stackOffset,Pie=t=>t.rootProps.reverseStackOrder,bR=t=>t.options.chartName,wR=t=>t.rootProps.syncId,jie=t=>t.rootProps.syncMethod,NR=t=>t.options.eventEmitter,dl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},zA={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Pc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},i3=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},DGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:zA.angleAxisId,includeHidden:!1,name:void 0,reversed:zA.reversed,scale:zA.scale,tick:zA.tick,tickCount:void 0,ticks:void 0,type:zA.type,unit:void 0},RGe={allowDataOverflow:Pc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pc.scale,tick:Pc.tick,tickCount:Pc.tickCount,ticks:void 0,type:Pc.type,unit:void 0},MGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:zA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zA.scale,tick:zA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},LGe={allowDataOverflow:Pc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pc.scale,tick:Pc.tick,tickCount:Pc.tickCount,ticks:void 0,type:"category",unit:void 0},_R=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?MGe:DGe,CR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?LGe:RGe,o3=t=>t.polarOptions,ER=jt([Vf,Hf,Qi],Sse),kie=jt([o3,ER],(t,e)=>{if(t!=null)return fl(t.innerRadius,e,0)}),Fie=jt([o3,ER],(t,e)=>{if(t!=null)return fl(t.outerRadius,e,e*.8)}),UGe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Oie=jt([o3],UGe);jt([_R,Oie],i3);var Die=jt([ER,kie,Fie],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});jt([CR,Die],i3);var Rie=jt([Zn,o3,kie,Fie,Vf,Hf],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=e;return{cx:fl(i,a,a/2),cy:fl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),hs=(t,e)=>e,vw=(t,e,r)=>r;function SR(t){return t==null?void 0:t.id}function Mie(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=SR(l);u.forEach((A,h)=>{var f=s==null||a?h:String(Za(A,s,null)),m=Za(A,l.dataKey,0),p;i.has(f)?p=i.get(f):p={},Object.assign(p,{[d]:m}),i.set(f,p)})}}),Array.from(i.values())}function l3(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var c3=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function u3(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function QGe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Hi=t=>{var e=Zn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Lv=t=>t.tooltip.settings.axisId;function eG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eG(Object(r),!0).forEach(function(n){VGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VGe(t,e,r){return(e=HGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HGe(t){var e=$Ge(t,"string");return typeof e=="symbol"?e:e+""}function $Ge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qk=[0,"auto"],Yi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Lie=(t,e)=>t.cartesianAxis.xAxis[e],Gf=(t,e)=>{var r=Lie(t,e);return r??Yi},Ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:dw},Uie=(t,e)=>t.cartesianAxis.yAxis[e],qf=(t,e)=>{var r=Uie(t,e);return r??Ji},KGe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},IR=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??KGe},Ts=(t,e,r)=>{switch(e){case"xAxis":return Gf(t,r);case"yAxis":return qf(t,r);case"zAxis":return IR(t,r);case"angleAxis":return _R(t,r);case"radiusAxis":return CR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},GGe=(t,e,r)=>{switch(e){case"xAxis":return Gf(t,r);case"yAxis":return qf(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},yw=(t,e,r)=>{switch(e){case"xAxis":return Gf(t,r);case"yAxis":return qf(t,r);case"angleAxis":return _R(t,r);case"radiusAxis":return CR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Qie=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function BR(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var TR=t=>t.graphicalItems.cartesianItems,qGe=jt([hs,vw],BR),PR=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),bw=jt([TR,Ts,qGe],PR,{memoizeOptions:{resultEqualityCheck:u3}}),Vie=jt([bw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(l3)),Hie=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),zGe=jt([bw],Hie),jR=t=>t.map(e=>e.data).filter(Boolean).flat(1),WGe=jt([bw],jR,{memoizeOptions:{resultEqualityCheck:u3}}),kR=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},FR=jt([WGe,hie],kR),OR=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Za(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:Za(a,n)}))):t.map(n=>({value:n})),d3=jt([FR,Ts,bw],OR);function $ie(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function kC(t){if(gA(t)||t instanceof Date){var e=Number(t);if(Bs(e))return e}}function tG(t){if(Array.isArray(t)){var e=[kC(t[0]),kC(t[1])];return D0(e)?e:void 0}var r=kC(t);if(r!=null)return[r,r]}function jf(t){return t.map(kC).filter(a7e)}function XGe(t,e,r){return!r||typeof e!="number"||pA(e)?[]:r.length?jf(r.flatMap(n=>{var a=Za(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Bs(s)||!Bs(i)))return[e-s,e+i]})):[]}var $i=t=>{var e=Hi(t),r=Lv(t);return yw(t,e,r)},ww=jt([$i],t=>t==null?void 0:t.dataKey),YGe=jt([Vie,hie,$i],Mie),Kie=(t,e,r,n)=>{var a={},s=e.reduce((i,l)=>{if(l.stackId==null)return i;var c=i[l.stackId];return c==null&&(c=[]),c.push(l),i[l.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,c]=i,u=n?[...c].reverse():c,d=u.map(SR);return[l,{stackedData:wQe(t,d,r),graphicalItems:u}]}))},zk=jt([YGe,Vie,xw,Pie],Kie),Gie=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=SQe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},JGe=jt([Ts],t=>t.allowDataOverflow),DR=t=>{var e;if(t==null||!("domain"in t))return qk;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=jf(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:qk},RR=jt([Ts],DR),MR=jt([RR,JGe],mie),ZGe=jt([zk,Kf,hs,MR],Gie,{memoizeOptions:{resultEqualityCheck:c3}}),A3=t=>t.errorBars,eqe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>$ie(r,n)),GS=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},LR=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,A=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>$ie(a,x)),h=Za(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),f=XGe(l,h,A);if(f.length>=2){var m=Math.min(...f),p=Math.max(...f);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=tG(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=tG(Za(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),Bs(s)&&Bs(i))return[s,i]},tqe=jt([FR,Ts,zGe,A3,hs],LR,{memoizeOptions:{resultEqualityCheck:c3}});function rqe(t){var{value:e}=t;if(gA(e)||e instanceof Date)return e}var nqe=(t,e,r)=>{var n=t.map(rqe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&$ne(n))?Fse(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},qie=t=>t.referenceElements.dots,Uv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),aqe=jt([qie,hs,vw],Uv),zie=t=>t.referenceElements.areas,sqe=jt([zie,hs,vw],Uv),Wie=t=>t.referenceElements.lines,iqe=jt([Wie,hs,vw],Uv),Xie=(t,e)=>{if(t!=null){var r=jf(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},oqe=jt(aqe,hs,Xie),Yie=(t,e)=>{if(t!=null){var r=jf(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},lqe=jt([sqe,hs],Yie);function cqe(t){var e;if(t.x!=null)return jf([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:jf(r)}function uqe(t){var e;if(t.y!=null)return jf([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:jf(r)}var Jie=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?cqe(n):uqe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},dqe=jt([iqe,hs],Jie),Aqe=jt(oqe,dqe,lqe,(t,e,r)=>GS(t,r,e)),UR=(t,e,r,n,a,s,i,l)=>{if(r!=null)return r;var c=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",u=c?GS(n,s,a):GS(s,a);return NGe(e,u,t.allowDataOverflow)},fqe=jt([Ts,RR,MR,ZGe,tqe,Aqe,Zn,hs],UR,{memoizeOptions:{resultEqualityCheck:c3}}),hqe=[0,1],QR=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=t,u=Zp(e,s);if(u&&l==null){var d;return Fse(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?nqe(n,t,u):a==="expand"?hqe:i}},VR=jt([Ts,Zn,FR,d3,xw,hs,fqe],QR),Zie=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(iw(s));return l in yy?l:"point"}}},Qv=jt([Ts,Zn,Qie,bR,hs],Zie);function mqe(t){if(t!=null){if(t in yy)return yy[t]();var e="scale".concat(iw(t));if(e in yy)return yy[e]()}}function HR(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=mqe(e);if(a!=null){var s=a.domain(r).range(n);return gQe(s),s}}}var $R=(t,e,r)=>{var n=DR(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&D0(t))return jGe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&D0(t))return kGe(t,e.tickCount,e.allowDecimals)}},KR=jt([VR,yw,Qv],$R),GR=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&D0(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return e},pqe=jt([Ts,VR,KR,hs],GR),gqe=jt(d3,Ts,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(jf(t.map(A=>A.value))).sort((A,h)=>A-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),eoe=jt(gqe,Zn,Tie,Qi,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Bs(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=fl(r,t*s),l=t*s/2;return l-i-(l-i)/s*i}return 0}),xqe=(t,e,r)=>{var n=Gf(t,e);return n==null||typeof n.padding!="string"?0:eoe(t,"xAxis",e,r,n.padding)},vqe=(t,e,r)=>{var n=qf(t,e);return n==null||typeof n.padding!="string"?0:eoe(t,"yAxis",e,r,n.padding)},yqe=jt(Gf,xqe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),bqe=jt(qf,vqe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),wqe=jt([Qi,yqe,$4,H4,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Nqe=jt([Qi,Zn,bqe,$4,H4,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),Nw=(t,e,r,n)=>{var a;switch(e){case"xAxis":return wqe(t,r,n);case"yAxis":return Nqe(t,r,n);case"zAxis":return(a=IR(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Oie(t);case"radiusAxis":return Die(t,r);default:return}},toe=jt([Ts,Nw],i3),f3=jt([Ts,Qv,pqe,toe],HR);jt([bw,A3,hs],eqe);function roe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var h3=(t,e)=>e,m3=(t,e,r)=>r,_qe=jt(Q4,h3,m3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(roe)),Cqe=jt(V4,h3,m3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(roe)),noe=(t,e)=>({width:t.width,height:e.height}),Eqe=(t,e)=>{var r=typeof e.width=="number"?e.width:dw;return{width:r,height:t.height}},aoe=jt(Qi,Gf,noe),Sqe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Iqe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Bqe=jt(Hf,Qi,_qe,h3,m3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=noe(e,l);i==null&&(i=Sqe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),Tqe=jt(Vf,Qi,Cqe,h3,m3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=Eqe(e,l);i==null&&(i=Iqe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),Pqe=(t,e)=>{var r=Gf(t,e);if(r!=null)return Bqe(t,r.orientation,r.mirror)},jqe=jt([Qi,Gf,Pqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),kqe=(t,e)=>{var r=qf(t,e);if(r!=null)return Tqe(t,r.orientation,r.mirror)},Fqe=jt([Qi,qf,kqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),soe=jt(Qi,qf,(t,e)=>{var r=typeof e.width=="number"?e.width:dw;return{width:r,height:t.height}}),rG=(t,e,r)=>{switch(e){case"xAxis":return aoe(t,r).width;case"yAxis":return soe(t,r).height;default:return}},ioe=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=Zp(t,n),c=e.map(u=>u.value);if(i&&l&&s==="category"&&a&&$ne(c))return c}},qR=jt([Zn,d3,Ts,hs],ioe),ooe=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Zp(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},zR=jt([Zn,d3,yw,hs],ooe);jt([Zn,GGe,Qv,f3,qR,zR,Nw,KR,hs],(t,e,r,n,a,s,i,l,c)=>{if(e!=null){var u=Zp(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}});var Oqe=(t,e,r,n,a,s,i,l,c)=>{if(!(e==null||n==null)){var u=Zp(t,c),{type:d,ticks:A,tickCount:h}=e,f=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/f:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Lo(s[0]-s[1])*2*m:m;var p=A||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>Bs(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>Bs(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},loe=jt([Zn,yw,Qv,f3,KR,Nw,qR,zR,hs],Oqe),Dqe=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Zp(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Lo(n[0]-n[1])*2*u:u,l&&s?s.map((d,A)=>({coordinate:r(d)+u,value:d,index:A,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,A)=>({coordinate:r(d)+u,value:a?a[d]:d,index:A,offset:u}))}},dv=jt([Zn,yw,f3,Nw,qR,zR,hs],Dqe),Av=jt(Ts,f3,(t,e)=>{if(!(t==null||e==null))return KS(KS({},t),{},{scale:e})}),Rqe=jt([Ts,Qv,VR,toe],HR);jt((t,e,r)=>IR(t,r),Rqe,(t,e)=>{if(!(t==null||e==null))return KS(KS({},t),{},{scale:e})});var Mqe=jt([Zn,Q4,V4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),coe=t=>t.options.defaultTooltipEventType,uoe=t=>t.options.validateTooltipEventTypes;function doe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function WR(t,e){var r=coe(t),n=uoe(t);return doe(e,r,n)}function Lqe(t){return Qr(e=>WR(e,t))}var Aoe=(t,e)=>{var r,n=Number(e);if(!(pA(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Uqe=t=>t.tooltip.settings,Kh={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Qqe={itemInteraction:{click:Kh,hover:Kh},axisInteraction:{click:Kh,hover:Kh},keyboardInteraction:Kh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},foe=mc({name:"tooltip",initialState:Qqe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:ss()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=bd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:ss()},removeTooltipEntrySettings:{reducer(t,e){var r=bd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:ss()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Vqe,replaceTooltipEntrySettings:Hqe,removeTooltipEntrySettings:$qe,setTooltipSettingsState:Kqe,setActiveMouseOverItemIndex:hoe,mouseLeaveItem:Gqe,mouseLeaveChart:moe,setActiveClickItemIndex:qqe,setMouseOverAxisIndex:poe,setMouseClickAxisIndex:zqe,setSyncInteraction:Wk,setKeyboardInteraction:Xk}=foe.actions,Wqe=foe.reducer;function nG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function R_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(r),!0).forEach(function(n){Xqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xqe(t,e,r){return(e=Yqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yqe(t){var e=Jqe(t,"string");return typeof e=="symbol"?e:e+""}function Jqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zqe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function eze(t){return t.index!=null}var goe=(t,e,r,n)=>{if(e==null)return Kh;var a=Zqe(t,e,r);if(a==null)return Kh;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(eze(a)){if(s)return R_(R_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return R_(R_({},Kh),{},{coordinate:a.coordinate})};function tze(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function rze(t,e){var r=tze(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function nze(t,e,r){if(r==null||e==null)return!0;var n=Za(t,e);return n==null||!D0(r)?!0:rze(n,r)}var XR=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Bs(s))return a;var i=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(i,Math.min(s,l)),u=e[c];return u==null||nze(u,r,n)?String(c):null},xoe=(t,e,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},voe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},_w=t=>t.options.tooltipPayloadSearcher,Vv=t=>t.tooltip;function aG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aG(Object(r),!0).forEach(function(n){aze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aze(t,e,r){return(e=sze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sze(t){var e=ize(t,"string");return typeof e=="symbol"?e:e+""}function ize(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oze(t,e){return t??e}var yoe=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,A=[];return t.reduce((h,f)=>{var m,{dataDefinedOnItem:p,settings:g}=f,x=oze(p,l),y=Array.isArray(x)?Jae(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,I;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?I=n7e(y,n,a):I=s(y,e,c,w),Array.isArray(I))I.forEach(C=>{var E=sG(sG({},g),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});h.push(m$({tooltipEntrySettings:E,dataKey:C.dataKey,payload:C.payload,value:Za(C.payload,C.dataKey),name:C.name}))});else{var T;h.push(m$({tooltipEntrySettings:g,dataKey:b,payload:I,value:Za(I,b),name:(T=Za(I,w))!==null&&T!==void 0?T:g==null?void 0:g.name}))}return h},A)}},YR=jt([$i,Zn,Qie,bR,Hi],Zie),lze=jt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),cze=jt([Hi,Lv],BR),Hv=jt([lze,$i,cze],PR,{memoizeOptions:{resultEqualityCheck:u3}}),uze=jt([Hv],t=>t.filter(l3)),dze=jt([Hv],jR,{memoizeOptions:{resultEqualityCheck:u3}}),$v=jt([dze,Kf],kR),Aze=jt([uze,Kf,$i],Mie),JR=jt([$v,$i,Hv],OR),boe=jt([$i],DR),fze=jt([$i],t=>t.allowDataOverflow),woe=jt([boe,fze],mie),hze=jt([Hv],t=>t.filter(l3)),mze=jt([Aze,hze,xw,Pie],Kie),pze=jt([mze,Kf,Hi,woe],Gie),gze=jt([Hv],Hie),xze=jt([$v,$i,gze,A3,Hi],LR,{memoizeOptions:{resultEqualityCheck:c3}}),vze=jt([qie,Hi,Lv],Uv),yze=jt([vze,Hi],Xie),bze=jt([zie,Hi,Lv],Uv),wze=jt([bze,Hi],Yie),Nze=jt([Wie,Hi,Lv],Uv),_ze=jt([Nze,Hi],Jie),Cze=jt([yze,_ze,wze],GS),Eze=jt([$i,boe,woe,pze,xze,Cze,Zn,Hi],UR),Cw=jt([$i,Zn,$v,JR,xw,Hi,Eze],QR),Sze=jt([Cw,$i,YR],$R),Ize=jt([$i,Cw,Sze,Hi],GR),Noe=t=>{var e=Hi(t),r=Lv(t),n=!1;return Nw(t,e,r,n)},_oe=jt([$i,Noe],i3),Coe=jt([$i,YR,Ize,_oe],HR),Bze=jt([Zn,JR,$i,Hi],ioe),Tze=jt([Zn,JR,$i,Hi],ooe),Pze=(t,e,r,n,a,s,i,l)=>{if(e){var{type:c}=e,u=Zp(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,A=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return A=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Lo(a[0]-a[1])*2*A:A,u&&i?i.map((h,f)=>({coordinate:n(h)+A,value:h,index:f,offset:A})):n.domain().map((h,f)=>({coordinate:n(h)+A,value:s?s[h]:h,index:f,offset:A}))}}},zf=jt([Zn,$i,YR,Coe,Noe,Bze,Tze,Hi],Pze),ZR=jt([coe,uoe,Uqe],(t,e,r)=>doe(r.shared,t,e)),Eoe=t=>t.tooltip.settings.trigger,e8=t=>t.tooltip.settings.defaultIndex,Ew=jt([Vv,ZR,Eoe,e8],goe),Fp=jt([Ew,$v,ww,Cw],XR),Soe=jt([zf,Fp],Aoe),t8=jt([Ew],t=>{if(t)return t.dataKey}),jze=jt([Ew],t=>{if(t)return t.graphicalItemId}),Ioe=jt([Vv,ZR,Eoe,e8],voe),kze=jt([Vf,Hf,Zn,Qi,zf,e8,Ioe,_w],xoe),Fze=jt([Ew,kze],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Oze=jt([Ew],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Dze=jt([Ioe,Fp,Kf,ww,Soe,_w,ZR],yoe);jt([Dze],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function iG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iG(Object(r),!0).forEach(function(n){Rze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rze(t,e,r){return(e=Mze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mze(t){var e=Lze(t,"string");return typeof e=="symbol"?e:e+""}function Lze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uze=()=>Qr($i),Qze=()=>{var t=Uze(),e=Qr(zf),r=Qr(Coe);return CS(!t||!r?void 0:oG(oG({},t),{},{scale:r}),e)};function lG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(r),!0).forEach(function(n){Vze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vze(t,e,r){return(e=Hze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hze(t){var e=$ze(t,"string");return typeof e=="symbol"?e:e+""}function $ze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kze=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Gze=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return Mg(Mg(Mg({},n),hi(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return Mg(Mg(Mg({},n),hi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function qze(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var Boe=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<i;l++){var c,u,d,A,h,f=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=i-1?(A=r[0])===null||A===void 0?void 0:A.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(f==null||m==null||p==null))if(Lo(m-f)!==Lo(p-m)){var x=[];if(Lo(p-m)===Lo(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+f)/2),x[1]=Math.max(y,(y+f)/2)}else{g=f;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var I;return(I=r[l])===null||I===void 0?void 0:I.index}}else{var T=Math.min(f,p),C=Math.max(f,p);if(t>(T+m)/2&&t<=(C+m)/2){var E;return(E=r[l])===null||E===void 0?void 0:E.index}}}else if(e)for(var S=0;S<i;S++){var O=e[S];if(O!=null){var B=e[S+1],P=e[S-1];if(S===0&&B!=null&&t<=(O.coordinate+B.coordinate)/2||S===i-1&&P!=null&&t>(O.coordinate+P.coordinate)/2||S>0&&S<i-1&&P!=null&&B!=null&&t>(O.coordinate+P.coordinate)/2&&t<=(O.coordinate+B.coordinate)/2)return O.index}}return-1},zze=()=>Qr(bR),r8=(t,e)=>e,Toe=(t,e,r)=>r,n8=(t,e,r,n)=>n,Wze=jt(zf,t=>T4(t,e=>e.coordinate)),a8=jt([Vv,r8,Toe,n8],goe),s8=jt([a8,$v,ww,Cw],XR),Xze=(t,e,r)=>{if(e!=null){var n=Vv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Poe=jt([Vv,r8,Toe,n8],voe),qS=jt([Vf,Hf,Zn,Qi,zf,n8,Poe,_w],xoe),Yze=jt([a8,qS],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),joe=jt([zf,s8],Aoe),Jze=jt([Poe,s8,Kf,ww,joe,_w,r8],yoe),Zze=jt([a8,s8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),eWe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&qze(t,i)){var l=IQe(t,e),c=Boe(l,s,a,r,n),u=Kze(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},tWe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var l=VHe(t,r);if(l){var c=BQe(l,e),u=Boe(c,i,s,n,a),d=Gze(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},rWe=(t,e,r,n,a,s,i,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?eWe(t,e,n,a,s,i,l):tWe(t,e,r,n,a,s,i)},nWe=jt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),aWe=jt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(dl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:QGe}});function cG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cG(Object(r),!0).forEach(function(n){sWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sWe(t,e,r){return(e=iWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iWe(t){var e=oWe(t,"string");return typeof e=="symbol"?e:e+""}function oWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lWe={},cWe={zIndexMap:Object.values(dl).reduce((t,e)=>uG(uG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),lWe)},uWe=new Set(Object.values(dl));function dWe(t){return uWe.has(t)}var koe=mc({name:"zIndex",initialState:cWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ss()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!dWe(r)&&delete t.zIndexMap[r])},prepare:ss()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:ss()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:ss()}}}),{registerZIndexPortal:AWe,unregisterZIndexPortal:fWe,registerZIndexPortalElement:hWe,unregisterZIndexPortalElement:mWe}=koe.actions,pWe=koe.reducer;function CA(t){var{zIndex:e,children:r}=t,n=nVe(),a=n&&e!==void 0&&e!==0,s=Yc(),i=Ha();v.useLayoutEffect(()=>a?(i(AWe({zIndex:e})),()=>{i(fWe({zIndex:e}))}):ow,[i,e,a]);var l=Qr(c=>nWe(c,e,s));return a?l?gd.createPortal(r,l):null:r}function Yk(){return Yk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yk.apply(null,arguments)}function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){gWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gWe(t,e,r){return(e=xWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xWe(t){var e=vWe(t,"string");return typeof e=="symbol"?e:e+""}function vWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yWe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function bWe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,A=r,h=n,f=a;if(!c||!A||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=A,p=rHe,g=dl.cursorLine;else if(d==="BarChart")m=nHe(l,A,s,i),p=Ese,g=dl.cursorRectangle;else if(l==="radial"&&Gne(A)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:I}=Ise(A);m={cx:x,cy:y,startAngle:w,endAngle:I,innerRadius:b,outerRadius:b},p=Tse,g=dl.cursorLine}else m={points:GHe(l,A,s)},p=WD,g=dl.cursorLine;var T=typeof c=="object"&&"className"in c?c.className:void 0,C=M_(M_(M_(M_({stroke:"#ccc",pointerEvents:"none"},s),m),ob(c)),{},{payload:h,payloadIndex:f,className:wa("recharts-tooltip-cursor",T)});return v.createElement(CA,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(yWe,{cursor:c,cursorComp:p,cursorProps:C}))}function wWe(t){var e=Qze(),r=tVe(),n=Aw(),a=zze();return e==null||r==null||n==null||a==null?null:v.createElement(bWe,Yk({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Foe=v.createContext(null),NWe=()=>v.useContext(Foe),Ooe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,A,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new a(d,A||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],f]:c._events[m].push(f):(c._events[m]=f,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)e.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var h=0,f=A.length,m=new Array(f);h<f;h++)m[h]=A[h].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},l.prototype.emit=function(u,d,A,h,f,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,A),!0;case 4:return g.fn.call(g.context,d,A,h),!0;case 5:return g.fn.call(g.context,d,A,h,f),!0;case 6:return g.fn.call(g.context,d,A,h,f,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,I;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,A);break;case 4:g[b].fn.call(g[b].context,d,A,h);break;default:if(!y)for(I=1,y=new Array(x-1);I<x;I++)y[I-1]=arguments[I];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},l.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},l.prototype.removeListener=function(u,d,A,h){var f=r?r+u:u;if(!this._events[f])return this;if(!d)return i(this,f),this;var m=this._events[f];if(m.fn)m.fn===d&&(!h||m.once)&&(!A||m.context===A)&&i(this,f);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||A&&m[p].context!==A)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:i(this,f)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Ooe);var _We=Ooe.exports;const CWe=Ff(_We);var bb=new CWe,Jk="recharts.syncEvent.tooltip",AG="recharts.syncEvent.brush";function Doe(t,e){if(e){var r=Number.parseInt(e,10);if(!pA(r))return t==null?void 0:t[r]}}var EWe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Roe=mc({name:"options",initialState:EWe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),SWe=Roe.reducer,{createEventEmitter:IWe}=Roe.actions;function BWe(t){return t.tooltip.syncInteraction}var TWe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Moe=mc({name:"chartData",initialState:TWe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:fG,setDataStartEndIndexes:PWe,setComputedData:Prt}=Moe.actions,jWe=Moe.reducer,kWe=["x","y"];function hG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hG(Object(r),!0).forEach(function(n){FWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FWe(t,e,r){return(e=OWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OWe(t){var e=DWe(t,"string");return typeof e=="symbol"?e:e+""}function DWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RWe(t,e){if(t==null)return{};var r,n,a=MWe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function MWe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function LWe(){var t=Qr(wR),e=Qr(NR),r=Ha(),n=Qr(jie),a=Qr(zf),s=Aw(),i=K4(),l=Qr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return ow;var c=(u,d,A)=>{if(e!==A&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var f=d.payload.coordinate,{x:m,y:p}=f,g=RWe(f,kWe),{x,y,width:b,height:w}=d.payload.sourceViewBox,I=Lg(Lg({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(Lg(Lg({},d),{},{payload:Lg(Lg({},d.payload),{},{coordinate:I})}))}else r(d);return}if(a!=null){var T;if(typeof n=="function"){var C={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(a,C);T=a[E]}else n==="value"&&(T=a.find(re=>String(re.value)===d.payload.label));var{coordinate:S}=d.payload;if(T==null||d.payload.active===!1||S==null||i==null){r(Wk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:B}=S,P=Math.min(O,i.x+i.width),D=Math.min(B,i.y+i.height),X={x:s==="horizontal"?T.coordinate:P,y:s==="horizontal"?D:T.coordinate},de=Wk({active:d.payload.active,coordinate:X,dataKey:d.payload.dataKey,index:String(T.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(de)}}};return bb.on(Jk,c),()=>{bb.off(Jk,c)}},[l,r,e,t,n,a,s,i])}function UWe(){var t=Qr(wR),e=Qr(NR),r=Ha();v.useEffect(()=>{if(t==null)return ow;var n=(a,s,i)=>{e!==i&&t===a&&r(PWe(s))};return bb.on(AG,n),()=>{bb.off(AG,n)}},[r,e,t])}function QWe(){var t=Ha();v.useEffect(()=>{t(IWe())},[t]),LWe(),UWe()}function VWe(t,e,r,n,a,s){var i=Qr(f=>Xze(f,t,e)),l=Qr(NR),c=Qr(wR),u=Qr(jie),d=Qr(BWe),A=d==null?void 0:d.active,h=K4();v.useEffect(()=>{if(!A&&c!=null&&l!=null){var f=Wk({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});bb.emit(Jk,c,f,l)}},[A,r,i,a,n,l,c,u,s,h])}function mG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mG(Object(r),!0).forEach(function(n){HWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HWe(t,e,r){return(e=$We(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $We(t){var e=KWe(t,"string");return typeof e=="symbol"?e:e+""}function KWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GWe(t){return t.dataKey}function qWe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(OVe,e)}var gG=[],zWe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xG(t){var e,r,n=Vo(t,zWe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:A,payloadUniqBy:h,position:f,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:I,axisId:T}=n,C=Ha(),E=typeof w=="number"?String(w):w;v.useEffect(()=>{C(Kqe({shared:y,trigger:b,axisId:T,active:a,defaultIndex:E}))},[C,y,b,T,a,E]);var S=K4(),O=bse(),B=Lqe(y),{activeIndex:P,isActive:D}=(e=Qr(z=>Zze(z,B,b,E)))!==null&&e!==void 0?e:{},X=Qr(z=>Jze(z,B,b,E)),de=Qr(z=>joe(z,B,b,E)),re=Qr(z=>Yze(z,B,b,E)),ie=X,ce=NWe(),J=(r=a??D)!==null&&r!==void 0?r:!1,[pe,Se]=wae([ie,J]),k=B==="axis"?de:void 0;VWe(B,b,re,k,P,J);var F=I??ce;if(F==null||S==null||B==null)return null;var H=ie??gG;J||(H=gG),u&&H.length&&(H=uae(H.filter(z=>z.value!=null&&(z.hide!==!0||n.includeHidden)),h,GWe));var M=H.length>0,L=v.createElement(VVe,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:J,coordinate:re,hasPayload:M,offset:A,position:f,reverseDirection:m,useTranslate3d:p,viewBox:S,wrapperStyle:g,lastBoundingBox:pe,innerRef:Se,hasPortalFromProps:!!I},qWe(c,pG(pG({},n),{},{payload:H,label:k,active:J,activeIndex:P,coordinate:re,accessibilityLayer:O})));return v.createElement(v.Fragment,null,gd.createPortal(L,F),J&&v.createElement(wWe,{cursor:x,tooltipEventType:B,coordinate:re,payload:H,index:P}))}var Sw=t=>null;Sw.displayName="Cell";function WWe(t,e,r){return(e=XWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XWe(t){var e=YWe(t,"string");return typeof e=="symbol"?e:e+""}function YWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class JWe{constructor(e){WWe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function vG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZWe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(r),!0).forEach(function(n){eXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eXe(t,e,r){return(e=tXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tXe(t){var e=rXe(t,"string");return typeof e=="symbol"?e:e+""}function rXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nXe={cacheSize:2e3,enableCache:!0},Loe=ZWe({},nXe),yG=new JWe(Loe.cacheSize),aXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bG="recharts_measurement_span";function sXe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var wG=(t,e)=>{try{var r=document.getElementById(bG);r||(r=document.createElement("span"),r.setAttribute("id",bG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,aXe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},n2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||X4.isSsr)return{width:0,height:0};if(!Loe.enableCache)return wG(e,r);var n=sXe(e,r),a=yG.get(n);if(a)return a;var s=wG(e,r);return yG.set(n,s),s},Uoe;function iXe(t,e,r){return(e=oXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oXe(t){var e=lXe(t,"string");return typeof e=="symbol"?e:e+""}function lXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_G=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uXe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dXe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},AXe=["cm","mm","pt","pc","in","Q","px"];function fXe(t){return AXe.includes(t)}var xx="NaN";function hXe(t,e){return t*dXe[e]}class Bo{static parse(e){var r,[,n,a]=(r=uXe.exec(e))!==null&&r!==void 0?r:[];return n==null?Bo.NaN:new Bo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,pA(e)&&(this.unit=""),r!==""&&!cXe.test(r)&&(this.num=NaN,this.unit=""),fXe(r)&&(this.num=hXe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Bo(NaN,""):new Bo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return pA(this.num)}}Uoe=Bo;iXe(Bo,"NaN",new Uoe(NaN,""));function Qoe(t){if(t==null||t.includes(xx))return xx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=NG.exec(e))!==null&&r!==void 0?r:[],i=Bo.parse(n??""),l=Bo.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return xx;e=e.replace(NG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,A,h]=(u=_G.exec(e))!==null&&u!==void 0?u:[],f=Bo.parse(d??""),m=Bo.parse(h??""),p=A==="+"?f.add(m):f.subtract(m);if(p.isNaN())return xx;e=e.replace(_G,p.toString())}return e}var CG=/\(([^()]*)\)/;function mXe(t){for(var e=t,r;(r=CG.exec(e))!=null;){var[,n]=r;e=e.replace(CG,Qoe(n))}return e}function pXe(t){var e=t.replace(/\s+/g,"");return e=mXe(e),e=Qoe(e),e}function gXe(t){try{return pXe(t)}catch{return xx}}function _T(t){var e=gXe(t.slice(5,-1));return e===xx?"":e}var xXe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],vXe=["dx","dy","angle","className","breakAll"];function Zk(){return Zk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zk.apply(null,arguments)}function EG(t,e){if(t==null)return{};var r,n,a=yXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function yXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Voe=/[ \f\n\r\t\v\u2028\u2029]+/,Hoe=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];ho(e)||(r?a=e.toString().split(""):a=e.toString().split(Voe));var s=a.map(l=>({word:l,width:n2(l,n).width})),i=r?0:n2("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function bXe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var $oe=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(i),c.width+=l+r;else{var u={words:[i],width:l};a.push(u)}return a},[]),Koe=t=>t.reduce((e,r)=>e.width>r.width?e:r),wXe="",SG=(t,e,r,n,a,s,i,l)=>{var c=t.slice(0,e),u=Hoe({breakAll:r,style:n,children:c+wXe});if(!u)return[!1,[]];var d=$oe(u.wordsWithComputedWidth,s,i,l),A=d.length>a||Koe(d).width>Number(s);return[A,d]},NXe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=t,u=Kr(s),d=String(i),A=$oe(e,n,r,a);if(!u||a)return A;var h=A.length>s||Koe(A).width>Number(n);if(!h)return A;for(var f=0,m=d.length-1,p=0,g;f<=m&&p<=d.length-1;){var x=Math.floor((f+m)/2),y=x-1,[b,w]=SG(d,y,c,l,s,n,r,a),[I]=SG(d,x,c,l,s,n,r,a);if(!b&&!I&&(f=x+1),b&&I&&(m=x-1),!b&&I){g=w;break}p++}return g||A},IG=t=>{var e=ho(t)?[]:t.toString().split(Voe);return[{words:e,width:void 0}]},_Xe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!X4.isSsr){var l,c,u=Hoe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:A}=u;l=d,c=A}else return IG(n);return NXe({breakAll:s,children:n,maxLines:i,style:a},l,c,e,!!r)}return IG(n)},Goe="#808080",CXe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Goe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},p3=v.forwardRef((t,e)=>{var r=Vo(t,CXe),{x:n,y:a,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,A=EG(r,xXe),h=v.useMemo(()=>_Xe({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:c,style:A.style,width:A.width}),[A.breakAll,A.children,A.maxLines,c,A.style,A.width]),{dx:f,dy:m,angle:p,className:g,breakAll:x}=A,y=EG(A,vXe);if(!gA(n)||!gA(a)||h.length===0)return null;var b=Number(n)+(Kr(f)?f:0),w=Number(a)+(Kr(m)?m:0);if(!Bs(b)||!Bs(w))return null;var I;switch(d){case"start":I=_T("calc(".concat(i,")"));break;case"middle":I=_T("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:I=_T("calc(".concat(h.length-1," * -").concat(s,")"));break}var T=[];if(c){var C=h[0].width,{width:E}=A;T.push("scale(".concat(Kr(E)&&Kr(C)?E/C:1,")"))}return p&&T.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),T.length&&(y.transform=T.join(" ")),v.createElement("text",Zk({},Lu(y),{ref:e,x:b,y:w,className:wa("recharts-text",g),textAnchor:u,fill:l.includes("url")?Goe:l}),h.map((S,O)=>{var B=S.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:O===0?I:s,key:"".concat(B,"-").concat(O)},B)}))});p3.displayName="Text";var EXe=["labelRef"],SXe=["content"];function BG(t,e){if(t==null)return{};var r,n,a=IXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function IXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function TG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(r),!0).forEach(function(n){BXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BXe(t,e,r){return(e=TXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TXe(t){var e=PXe(t,"string");return typeof e=="symbol"?e:e+""}function PXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WA.apply(null,arguments)}var qoe=v.createContext(null),jXe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(qoe.Provider,{value:c},l)},zoe=()=>{var t=v.useContext(qoe),e=K4();return t||lse(e)},kXe=v.createContext(null),FXe=()=>{var t=v.useContext(kXe),e=Qr(Rie);return t||e},OXe=t=>{var{value:e,formatter:r}=t,n=ho(t.children)?e:t.children;return typeof r=="function"?r(n):n},i8=t=>t!=null&&typeof t=="function",DXe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),360);return r*n},RXe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:A,endAngle:h,clockWise:f}=a,m=(u+d)/2,p=DXe(A,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=A+g*s,y=f;break;case"insideEnd":x=h-g*s,y=!f;break;case"end":x=h+g*s,y=f;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=hi(l,c,m,x),w=hi(l,c,m,x+(y?1:-1)*359),I="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),T=ho(t.id)?lb("recharts-radial-line-"):t.id;return v.createElement("text",WA({},n,{dominantBaseline:"central",className:wa("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:T,d:I})),v.createElement("textPath",{xlinkHref:"#".concat(T)},r))},MXe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:A}=hi(n,a,i+e,u);return{x:d,y:A,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:f,y:m}=hi(n,a,h,u);return{x:f,y:m,textAnchor:"middle",verticalAnchor:"middle"}},eF=t=>"cx"in t&&Kr(t.cx),LXe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!eF(r)&&(s=r);var{x:i,y:l,upperWidth:c,lowerWidth:u,height:d}=e,A=i,h=i+(c-u)/2,f=(A+h)/2,m=(c+u)/2,p=A+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,I=w*n,T=w>0?"end":"start",C=w>0?"start":"end";if(a==="top"){var E={x:A+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return Ws(Ws({},E),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var S={x:h+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return Ws(Ws({},S),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var O={x:f-I,y:l+d/2,textAnchor:T,verticalAnchor:"middle"};return Ws(Ws({},O),s?{width:Math.max(O.x-s.x,0),height:d}:{})}if(a==="right"){var B={x:f+m+I,y:l+d/2,textAnchor:C,verticalAnchor:"middle"};return Ws(Ws({},B),s?{width:Math.max(s.x+s.width-B.x,0),height:d}:{})}var P=s?{width:m,height:d}:{};return a==="insideLeft"?Ws({x:f+I,y:l+d/2,textAnchor:C,verticalAnchor:"middle"},P):a==="insideRight"?Ws({x:f+m-I,y:l+d/2,textAnchor:T,verticalAnchor:"middle"},P):a==="insideTop"?Ws({x:A+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},P):a==="insideBottom"?Ws({x:h+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},P):a==="insideTopLeft"?Ws({x:A+I,y:l+x,textAnchor:C,verticalAnchor:b},P):a==="insideTopRight"?Ws({x:A+c-I,y:l+x,textAnchor:T,verticalAnchor:b},P):a==="insideBottomLeft"?Ws({x:h+I,y:l+d-x,textAnchor:C,verticalAnchor:y},P):a==="insideBottomRight"?Ws({x:h+u-I,y:l+d-x,textAnchor:T,verticalAnchor:y},P):a&&typeof a=="object"&&(Kr(a.x)||Sf(a.x))&&(Kr(a.y)||Sf(a.y))?Ws({x:i+fl(a.x,m),y:l+fl(a.y,d),textAnchor:"end",verticalAnchor:"end"},P):Ws({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},UXe={angle:0,offset:5,zIndex:dl.label,position:"middle",textBreakAll:!1};function Oh(t){var e=Vo(t,UXe),{viewBox:r,position:n,value:a,children:s,content:i,className:l="",textBreakAll:c,labelRef:u}=e,d=FXe(),A=zoe(),h=n==="center"?A:d??A,f,m,p;if(r==null?f=h:eF(r)?f=r:f=lse(r),!f||ho(a)&&ho(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=Ws(Ws({},e),{},{viewBox:f});if(v.isValidElement(i)){var{labelRef:x}=g,y=BG(g,EXe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=BG(g,SXe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=OXe(e);var I=Lu(e);if(eF(f)){if(n==="insideStart"||n==="insideEnd"||n==="end")return RXe(e,n,m,I,f);p=MXe(f,e.offset,e.position)}else p=LXe(e,f);return v.createElement(CA,{zIndex:e.zIndex},v.createElement(p3,WA({ref:u,className:wa("recharts-label",l)},I,p,{textAnchor:bXe(I.textAnchor)?I.textAnchor:p.textAnchor,breakAll:c}),m))}Oh.displayName="Label";var QXe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(Oh,WA({key:"label-implicit"},n)):gA(t)?v.createElement(Oh,WA({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===Oh?v.cloneElement(t,Ws({key:"label-implicit"},n)):v.createElement(Oh,WA({key:"label-implicit",content:t},n)):i8(t)?v.createElement(Oh,WA({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(Oh,WA({},t,{key:"label-implicit"},n)):null};function VXe(t){var{label:e,labelRef:r}=t,n=zoe();return QXe(e,n,r)||null}var Woe={},Xoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Xoe);var Yoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Yoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xoe,r=Yoe,n=I4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Woe);var HXe=Woe.last;const $Xe=Ff(HXe);var KXe=["valueAccessor"],GXe=["dataKey","clockWise","id","textBreakAll","zIndex"];function zS(){return zS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zS.apply(null,arguments)}function PG(t,e){if(t==null)return{};var r,n,a=qXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var zXe=t=>Array.isArray(t.value)?$Xe(t.value):t.value,Joe=v.createContext(void 0),WXe=Joe.Provider,Zoe=v.createContext(void 0),XXe=Zoe.Provider;function YXe(){return v.useContext(Joe)}function JXe(){return v.useContext(Zoe)}function FC(t){var{valueAccessor:e=zXe}=t,r=PG(t,KXe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:l}=r,c=PG(r,GXe),u=YXe(),d=JXe(),A=u||d;return!A||!A.length?null:v.createElement(CA,{zIndex:l??dl.label},v.createElement(Ul,{className:"recharts-label-list"},A.map((h,f)=>{var m,p=ho(n)?e(h,f):Za(h&&h.payload,n),g=ho(s)?{}:{id:"".concat(s,"-").concat(f)};return v.createElement(Oh,zS({key:"label-".concat(f)},Lu(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:f,zIndex:0}))})))}FC.displayName="LabelList";function ele(t){var{label:e}=t;return e?e===!0?v.createElement(FC,{key:"labelList-implicit"}):v.isValidElement(e)||i8(e)?v.createElement(FC,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(FC,zS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var tle=t=>t.graphicalItems.polarItems,ZXe=jt([hs,vw],BR),g3=jt([tle,Ts,ZXe],PR),eYe=jt([g3],jR),x3=jt([eYe,s3],kR),tYe=jt([x3,Ts,g3],OR);jt([x3,Ts,g3],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=Za(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Za(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var jG=()=>{},rYe=jt([x3,Ts,g3,A3,hs],LR),nYe=jt([Ts,RR,MR,jG,rYe,jG,Zn,hs],UR),rle=jt([Ts,Zn,x3,tYe,xw,hs,nYe],QR),aYe=jt([rle,Ts,Qv],$R);jt([Ts,rle,aYe,hs],GR);var sYe={radiusAxis:{},angleAxis:{}},nle=mc({name:"polarAxis",initialState:sYe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:jrt,removeRadiusAxis:krt,addAngleAxis:Frt,removeAngleAxis:Ort}=nle.actions,iYe=nle.reducer;function kG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(r),!0).forEach(function(n){oYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oYe(t,e,r){return(e=lYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lYe(t){var e=cYe(t,"string");return typeof e=="symbol"?e:e+""}function cYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uYe=(t,e)=>e,o8=jt([tle,uYe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),dYe=[],l8=(t,e,r)=>(r==null?void 0:r.length)===0?dYe:r,ale=jt([s3,o8,l8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>FG(FG({},e.presentationProps),s.props))),a!=null)return a}}),AYe=jt([ale,o8,l8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=Za(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:U4(i,e.dataKey),color:l,payload:n,type:e.legendType}})}),fYe=jt([ale,o8,l8,Qi],(t,e,r,n)=>{if(!(e==null||t==null))return mJe({offset:n,pieSettings:e,displayedData:t,cells:r})}),sle={exports:{}},Fa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c8=Symbol.for("react.transitional.element"),u8=Symbol.for("react.portal"),v3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),b3=Symbol.for("react.profiler"),w3=Symbol.for("react.consumer"),N3=Symbol.for("react.context"),_3=Symbol.for("react.forward_ref"),C3=Symbol.for("react.suspense"),E3=Symbol.for("react.suspense_list"),S3=Symbol.for("react.memo"),I3=Symbol.for("react.lazy"),hYe=Symbol.for("react.view_transition"),mYe=Symbol.for("react.client.reference");function $u(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case c8:switch(t=t.type,t){case v3:case b3:case y3:case C3:case E3:case hYe:return t;default:switch(t=t&&t.$$typeof,t){case N3:case _3:case I3:case S3:return t;case w3:return t;default:return e}}case u8:return e}}}Fa.ContextConsumer=w3;Fa.ContextProvider=N3;Fa.Element=c8;Fa.ForwardRef=_3;Fa.Fragment=v3;Fa.Lazy=I3;Fa.Memo=S3;Fa.Portal=u8;Fa.Profiler=b3;Fa.StrictMode=y3;Fa.Suspense=C3;Fa.SuspenseList=E3;Fa.isContextConsumer=function(t){return $u(t)===w3};Fa.isContextProvider=function(t){return $u(t)===N3};Fa.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===c8};Fa.isForwardRef=function(t){return $u(t)===_3};Fa.isFragment=function(t){return $u(t)===v3};Fa.isLazy=function(t){return $u(t)===I3};Fa.isMemo=function(t){return $u(t)===S3};Fa.isPortal=function(t){return $u(t)===u8};Fa.isProfiler=function(t){return $u(t)===b3};Fa.isStrictMode=function(t){return $u(t)===y3};Fa.isSuspense=function(t){return $u(t)===C3};Fa.isSuspenseList=function(t){return $u(t)===E3};Fa.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===v3||t===b3||t===y3||t===C3||t===E3||typeof t=="object"&&t!==null&&(t.$$typeof===I3||t.$$typeof===S3||t.$$typeof===N3||t.$$typeof===w3||t.$$typeof===_3||t.$$typeof===mYe||t.getModuleId!==void 0)};Fa.typeOf=$u;sle.exports=Fa;var pYe=sle.exports,OG=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",DG=null,CT=null,ile=t=>{if(t===DG&&Array.isArray(CT))return CT;var e=[];return v.Children.forEach(t,r=>{ho(r)||(pYe.isFragment(r)?e=e.concat(ile(r.props.children)):e.push(r))}),CT=e,DG=t,e};function d8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>OG(a)):n=[OG(e)],ile(t).forEach(a=>{var s=Bp(a,"type.displayName")||Bp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var ole={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(ole);var gYe=ole.isPlainObject;const xYe=Ff(gYe);var RG,MG,LG,UG,QG;function VG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(r),!0).forEach(function(n){vYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vYe(t,e,r){return(e=yYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yYe(t){var e=bYe(t,"string");return typeof e=="symbol"?e:e+""}function bYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WS.apply(null,arguments)}function z1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $G=(t,e,r,n,a)=>{var s=r-n,i;return i=Ds(RG||(RG=z1(["M ",",",""])),t,e),i+=Ds(MG||(MG=z1(["L ",",",""])),t+r,e),i+=Ds(LG||(LG=z1(["L ",",",""])),t+r-s/2,e+a),i+=Ds(UG||(UG=z1(["L ",",",""])),t+r-s/2-n,e+a),i+=Ds(QG||(QG=z1(["L ",","," Z"])),t,e),i},wYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NYe=t=>{var e=Vo(t,wYe),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:A}=e,h=v.useRef(null),[f,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=J4(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var X=h.current.getTotalLength();X&&m(X)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var I=wa("recharts-trapezoid",l);if(!A)return v.createElement("g",null,v.createElement("path",WS({},Lu(e),{className:I,d:$G(r,n,a,s,i)})));var T=p.current,C=g.current,E=x.current,S=y.current,O=b.current,B="0px ".concat(f===-1?1:f,"px"),P="".concat(f,"px 0px"),D=wse(["strokeDasharray"],u,c);return v.createElement(Y4,{animationId:w,key:w,canBegin:f>0,duration:u,easing:c,isActive:A,begin:d},X=>{var de=Bi(T,a,X),re=Bi(C,s,X),ie=Bi(E,i,X),ce=Bi(S,r,X),J=Bi(O,n,X);h.current&&(p.current=de,g.current=re,x.current=ie,y.current=ce,b.current=J);var pe=X>0?{transition:D,strokeDasharray:P}:{strokeDasharray:B};return v.createElement("path",WS({},Lu(e),{className:I,d:$G(ce,J,de,re,ie),ref:h,style:HG(HG({},pe),e.style)}))})},_Ye=["option","shapeType","activeClassName"];function CYe(t,e){if(t==null)return{};var r,n,a=EYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function EYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function KG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KG(Object(r),!0).forEach(function(n){SYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SYe(t,e,r){return(e=IYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IYe(t){var e=BYe(t,"string");return typeof e=="symbol"?e:e+""}function BYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TYe(t,e){return XS(XS({},e),t)}function PYe(t,e){return t==="symbols"}function GG(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(Ese,r);case"trapezoid":return v.createElement(NYe,r);case"sector":return v.createElement(Tse,r);case"symbols":if(PYe(e))return v.createElement(ED,r);break;case"curve":return v.createElement(WD,r);default:return null}}function jYe(t){return v.isValidElement(t)?t.props:t}function lle(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=CYe(t,_Ye),s;if(v.isValidElement(e))s=v.cloneElement(e,XS(XS({},a),jYe(e)));else if(typeof e=="function")s=e(a,a.index);else if(xYe(e)&&typeof e!="boolean"){var i=TYe(e,a);s=v.createElement(GG,{shapeType:r,elementProps:i})}else{var l=a;s=v.createElement(GG,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(Ul,{className:n},s):s}var A8=(t,e,r)=>{var n=Ha();return(a,s)=>i=>{t==null||t(a,s,i),n(hoe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},f8=t=>{var e=Ha();return(r,n)=>a=>{t==null||t(r,n,a),e(Gqe())}},h8=(t,e,r)=>{var n=Ha();return(a,s)=>i=>{t==null||t(a,s,i),n(qqe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function cle(t){var{tooltipEntrySettings:e}=t,r=Ha(),n=Yc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(Vqe(e)):a.current!==e&&r(Hqe({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r($qe(a.current)),a.current=null)},[r]),null}function kYe(t){var{legendPayload:e}=t,r=Ha(),n=Yc(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(xse(e)):a.current!==e&&r(vse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(yse(a.current)),a.current=null)},[r]),null}function FYe(t){var{legendPayload:e}=t,r=Ha(),n=Qr(Zn),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(xse(e)):a.current!==e&&r(vse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(yse(a.current)),a.current=null)},[r]),null}var ET,OYe=()=>{var[t]=v.useState(()=>lb("uid-"));return t},DYe=(ET=Kce.useId)!==null&&ET!==void 0?ET:OYe;function RYe(t,e){var r=DYe();return e||(t?"".concat(t,"-").concat(r):r)}var MYe=v.createContext(void 0),ule=t=>{var{id:e,type:r,children:n}=t,a=RYe("recharts-".concat(r),e);return v.createElement(MYe.Provider,{value:a},n(a))},LYe={cartesianItems:[],polarItems:[]},dle=mc({name:"graphicalItems",initialState:LYe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:ss()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=bd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:ss()},removeCartesianGraphicalItem:{reducer(t,e){var r=bd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:ss()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:ss()},removePolarGraphicalItem:{reducer(t,e){var r=bd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:ss()}}}),{addCartesianGraphicalItem:UYe,replaceCartesianGraphicalItem:QYe,removeCartesianGraphicalItem:VYe,addPolarGraphicalItem:HYe,removePolarGraphicalItem:$Ye}=dle.actions,KYe=dle.reducer,GYe=t=>{var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(UYe(t)):r.current!==t&&e(QYe({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(VYe(r.current)),r.current=null)},[e]),null},qYe=v.memo(GYe);function zYe(t){var e=Ha();return v.useLayoutEffect(()=>(e(HYe(t)),()=>{e($Ye(t))}),[e,t]),null}var WYe=["key"],XYe=["onMouseEnter","onClick","onMouseLeave"],YYe=["id"],JYe=["id"];function qG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(r),!0).forEach(function(n){ZYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZYe(t,e,r){return(e=eJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eJe(t){var e=tJe(t,"string");return typeof e=="symbol"?e:e+""}function tJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R0.apply(null,arguments)}function B3(t,e){if(t==null)return{};var r,n,a=rJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function nJe(t){var e=v.useMemo(()=>d8(t.children,Sw),[t.children]),r=Qr(n=>AYe(n,t.id,e));return r==null?null:v.createElement(FYe,{legendPayload:r})}var aJe=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=t,A={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:U4(l,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(cle,{tooltipEntrySettings:A})}),sJe=(t,e)=>t>e?"start":t<e?"end":"middle",iJe=(t,e,r)=>fl(typeof e=="function"?e(t):e,r,r*.8),oJe=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,l=Sse(s,i),c=a+fl(t.cx,s,s/2),u=n+fl(t.cy,i,i/2),d=fl(t.innerRadius,l,0),A=iJe(r,t.outerRadius,l),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:A,maxRadius:h}},lJe=(t,e)=>{var r=Lo(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function cJe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var uJe=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=wa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=B3(e,WYe);return v.createElement(WD,R0({},a,{type:"linear",className:r}))},dJe=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=wa("recharts-pie-label-text",cJe(t));return v.createElement(p3,R0({},e,{alignmentBaseline:"middle",className:a}),n)};function AJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var l=mA(r),c=ob(a),u=ob(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,A=e.map((h,f)=>{var m=(h.startAngle+h.endAngle)/2,p=hi(h.cx,h.cy,h.outerRadius+d,m),g=Ls(Ls(Ls(Ls({},l),h),{},{stroke:"none"},c),{},{index:f,textAnchor:sJe(p.x,h.cx)},p),x=Ls(Ls(Ls(Ls({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:f,points:[hi(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(CA,{zIndex:dl.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(f)},v.createElement(Ul,null,s&&uJe(s,x),dJe(a,g,Za(h,i))))});return v.createElement(Ul,{className:"recharts-pie-labels"},A)}function fJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(ele,{label:a}):v.createElement(AJe,{sectors:e,props:r,showLabels:n})}function hJe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,l=Qr(Fp),c=Qr(t8),u=Qr(jze),{onMouseEnter:d,onClick:A,onMouseLeave:h}=a,f=B3(a,XYe),m=A8(d,a.dataKey,i),p=f8(h),g=h8(A,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===l&&(c==null||a.dataKey===c)&&b,I=l?n:null,T=r&&w?r:I,C=Ls(Ls({},x),{},{stroke:x.stroke,tabIndex:-1,[ese]:y,[tse]:i});return v.createElement(Ul,R0({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},lw(f,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(lle,R0({option:s??T,index:y,shapeType:"sector",isActive:w},C)))}))}function mJe(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:A}=r,h=Math.abs(r.minAngle),f=lJe(l,c),m=Math.abs(f),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(T=>Za(T,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((T,C)=>{var E=Za(C,u,0);return T+(Kr(E)?E:0)},0),w;if(b>0){var I;w=n.map((T,C)=>{var E=Za(T,u,0),S=Za(T,d,C),O=oJe(r,s,T),B=(Kr(E)?E:0)/b,P,D=Ls(Ls({},T),a&&a[C]&&a[C].props);C?P=I.endAngle+Lo(f)*p*(E!==0?1:0):P=l;var X=P+Lo(f)*((E!==0?h:0)+B*y),de=(P+X)/2,re=(O.innerRadius+O.outerRadius)/2,ie=[{name:S,value:E,payload:D,dataKey:u,type:A,graphicalItemId:r.id}],ce=hi(O.cx,O.cy,re,de);return I=Ls(Ls(Ls(Ls({},r.presentationProps),{},{percent:B,cornerRadius:typeof i=="string"?parseFloat(i):i,name:S,tooltipPayload:ie,midAngle:de,middleRadius:re,tooltipPosition:ce},D),O),{},{value:E,dataKey:u,startAngle:P,endAngle:X,payload:D,paddingAngle:Lo(f)*p}),I})}return w}function pJe(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(XXe,{value:e?a:void 0},n)}function gJe(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:A,onAnimationEnd:h}=e,f=J4(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof A=="function"&&A(),g(!0)},[A]);return v.createElement(pJe,{showLabels:!p,sectors:a},v.createElement(Y4,{animationId:f,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:f},b=>{var w=[],I=a&&a[0],T=I==null?void 0:I.startAngle;return a==null||a.forEach((C,E)=>{var S=m&&m[E],O=E>0?Bp(C,"paddingAngle",0):0;if(S){var B=Bi(S.endAngle-S.startAngle,C.endAngle-C.startAngle,b),P=Ls(Ls({},C),{},{startAngle:T+O,endAngle:T+B+O});w.push(P),T=P.endAngle}else{var{endAngle:D,startAngle:X}=C,de=Bi(0,D-X,b),re=Ls(Ls({},C),{},{startAngle:T+O,endAngle:T+de+O});w.push(re),T=re.endAngle}}),r.current=w,v.createElement(Ul,null,v.createElement(hJe,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(fJe,{showLabels:!p,sectors:a,props:e}),e.children)}var xJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:dl.area};function vJe(t){var{id:e}=t,r=B3(t,YYe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>d8(t.children,Sw),[t.children]),l=Qr(d=>fYe(d,e,i)),c=v.useRef(null),u=wa("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(Ul,{tabIndex:s,className:u})):v.createElement(CA,{zIndex:t.zIndex},v.createElement(aJe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(Ul,{tabIndex:s,className:u},v.createElement(gJe,{props:Ls(Ls({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Ale(t){var e=Vo(t,xJe),{id:r}=e,n=B3(e,JYe),a=mA(n);return v.createElement(ule,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(zYe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(nJe,R0({},n,{id:s})),v.createElement(vJe,R0({},n,{id:s}))))}Ale.displayName="Pie";function zG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(r),!0).forEach(function(n){yJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yJe(t,e,r){return(e=bJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bJe(t){var e=wJe(t,"string");return typeof e=="symbol"?e:e+""}function wJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fle=0,NJe={xAxis:{},yAxis:{},zAxis:{}},hle=mc({name:"cartesianAxis",initialState:NJe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:ss()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:ss()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:ss()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:ss()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:ss()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:ss()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:ss()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:ss()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:ss()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=WG(WG({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:_Je,replaceXAxis:CJe,removeXAxis:EJe,addYAxis:SJe,replaceYAxis:IJe,removeYAxis:BJe,addZAxis:Drt,replaceZAxis:Rrt,removeZAxis:Mrt,updateYAxisWidth:TJe}=hle.actions,PJe=hle.reducer,jJe=jt([Qi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),kJe=jt([jJe,Vf,Hf],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),mle=()=>Qr(kJe),XG=(t,e,r)=>{var n=r??t;if(!ho(n))return fl(n,e,0)},FJe=(t,e,r)=>{var n={},a=t.filter(l3),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,A]=u,h=A.map(m=>m.dataKey),f=XG(e,r,A[0].barSize);return{stackId:d,dataKeys:h,barSize:f}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),A=XG(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:A}});return[...l,...c]};function YG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function L_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(r),!0).forEach(function(n){OJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OJe(t,e,r){return(e=DJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DJe(t){var e=RJe(t,"string");return typeof e=="symbol"?e:e+""}function RJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MJe(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=fl(t,r,0,!0),l,c=[];if(Bs(n[0].barSize)){var u=!1,d=r/s,A=n.reduce((x,y)=>x+(y.barSize||0),0);A+=(s-1)*i,A>=r&&(A-=(s-1)*i,i=0),A>=r&&d>0&&(u=!0,d*=.9,A=s*d);var h=(r-A)/2>>0,f={offset:h-i,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:f.offset+f.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},I=[...x,w];return f=I[I.length-1].position,I},c)}else{var m=fl(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=Bs(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return l}}var LJe=(t,e,r,n,a,s,i)=>{var l=ho(i)?e:i,c=MJe(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>L_(L_({},u),{},{position:L_(L_({},u.position),{},{offset:u.position.offset-a/2})}))),c},UJe=(t,e)=>{var r=SR(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function QJe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Bs(t.zIndex)?t.zIndex:e}var ple=t=>{var{chartData:e}=t,r=Ha(),n=Yc();return v.useEffect(()=>n?()=>{}:(r(fG(e)),()=>{r(fG(void 0))}),[e,r,n]),null},JG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gle=mc({name:"brush",initialState:JG,reducers:{setBrushSettings(t,e){return e.payload==null?JG:e.payload}}}),{setBrushSettings:Lrt}=gle.actions,VJe=gle.reducer;function HJe(t,e,r){return(e=$Je(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Je(t){var e=KJe(t,"string");return typeof e=="symbol"?e:e+""}function KJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class m8{static create(e){return new m8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}HJe(m8,"EPS",1e-4);function GJe(t){return(t%180+180)%180}var qJe=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=GJe(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},zJe={dots:[],areas:[],lines:[]},xle=mc({name:"referenceElements",initialState:zJe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=bd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=bd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=bd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Urt,removeDot:Qrt,addArea:Vrt,removeArea:Hrt,addLine:$rt,removeLine:Krt}=xle.actions,WJe=xle.reducer,XJe=v.createContext(void 0),YJe=t=>{var{children:e}=t,[r]=v.useState("".concat(lb("recharts"),"-clip")),n=mle();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return v.createElement(XJe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:i}))),e)};function vle(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function JJe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return qJe(n,r)}function ZJe(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:l}=t;return e===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function wb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function eZe(t,e){return vle(t,e+1)}function tZe(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=e,c=0,u=1,d=i,A=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:vle(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||wb(t,y,x,d,l);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=A(),h)return h.v;return[]}function rZe(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:l,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,A=l,h=!0,f=function(){var y=n[m],b=m,w,I=()=>(w===void 0&&(w=r(y,b)),w),T=y.coordinate,C=m===d||wb(t,T,I,A,c);if(!C)return h=!1,1;C&&(A=T+t*(I()/2+a))},m=d;m<i&&!f();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function ZG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function al(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(r),!0).forEach(function(n){nZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nZe(t,e,r){return(e=aZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aZe(t){var e=sZe(t,"string");return typeof e=="symbol"?e:e+""}function sZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iZe(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=e,{end:c}=e,u=function(h){var f=s[h],m,p=()=>(m===void 0&&(m=r(f,h)),m);if(h===i-1){var g=t*(f.coordinate+t*p()/2-c);s[h]=f=al(al({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate})}else s[h]=f=al(al({},f),{},{tickCoord:f.coordinate});if(f.tickCoord!=null){var x=wb(t,f.tickCoord,p,l,c);x&&(c=f.tickCoord-t*(p()/2+a),s[h]=al(al({},f),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function oZe(t,e,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=e;if(s){var d=n[l-1],A=r(d,l-1),h=t*(d.coordinate+t*A/2-u);if(i[l-1]=d=al(al({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var f=wb(t,d.tickCoord,()=>A,c,u);f&&(u=d.tickCoord-t*(A/2+a),i[l-1]=al(al({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=i[y],w,I=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var T=t*(b.coordinate-t*I()/2-c);i[y]=b=al(al({},b),{},{tickCoord:T<0?b.coordinate-T*t:b.coordinate})}else i[y]=b=al(al({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var C=wb(t,b.tickCoord,I,c,u);C&&(c=b.tickCoord+t*(I()/2+a),i[y]=al(al({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function lZe(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:A}=t;if(!a||!a.length||!n)return[];if(Kr(c)||X4.isSsr){var h;return(h=eZe(a,Kr(c)?c:0))!==null&&h!==void 0?h:[]}var f=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?n2(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var I=typeof u=="function"?u(b.value,w):b.value;return m==="width"?JJe(n2(I,{fontSize:e,letterSpacing:r}),p,A):n2(I,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?Lo(a[1].coordinate-a[0].coordinate):1,y=ZJe(s,x,m);return c==="equidistantPreserveStart"?tZe(x,y,g,a,i):c==="equidistantPreserveEnd"?rZe(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?f=oZe(x,y,g,a,i,c==="preserveStartEnd"):f=iZe(x,y,g,a,i),f.filter(b=>b.isShow))}var cZe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var A=d.getBoundingClientRect();A.width>i&&(i=A.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},uZe=["axisLine","width","height","className","hide","ticks","axisType"];function dZe(t,e){if(t==null)return{};var r,n,a=AZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function AZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Op(){return Op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Op.apply(null,arguments)}function eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ui(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eq(Object(r),!0).forEach(function(n){fZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fZe(t,e,r){return(e=hZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hZe(t){var e=mZe(t,"string");return typeof e=="symbol"?e:e+""}function mZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ap={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:dl.axis};function pZe(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=ui(ui(ui({},c),mA(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=ui(ui({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var A=+(s==="left"&&!i||s==="right"&&i);u=ui(ui({},u),{},{x1:e+A*n,y1:r,x2:e+A*n,y2:r+a})}return v.createElement("line",Op({},u,{className:wa("recharts-cartesian-axis-line",Bp(l,"className"))}))}function gZe(t,e,r,n,a,s,i,l,c){var u,d,A,h,f,m,p=l?-1:1,g=t.tickSize||i,x=Kr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!l*a,A=h-p*g,m=A-p*c,f=x;break;case"left":A=h=t.coordinate,d=e+ +!l*n,u=d-p*g,f=u-p*c,m=x;break;case"right":A=h=t.coordinate,d=e+ +l*n,u=d+p*g,f=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +l*a,A=h+p*g,m=A+p*c,f=x;break}return{line:{x1:u,y1:A,x2:d,y2:h},tick:{x:f,y:m}}}function xZe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function vZe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function yZe(t){var{option:e,tickProps:r,value:n}=t,a,s=wa(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,ui(ui({},r),{},{className:s}));else if(typeof e=="function")a=e(ui(ui({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=wa(i,e==null?void 0:e.className)),a=v.createElement(p3,Op({},r,{className:i}),n)}return a}var bZe=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:A,x:h,y:f,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:I,axisType:T}=t,C=lZe(ui(ui({},w),{},{ticks:r}),y,b),E=xZe(d,A),S=vZe(d,A),O=mA(w),B=ob(n),P={};typeof a=="object"&&(P=a);var D=ui(ui({},O),{},{fill:"none"},P),X=C.map(ie=>ui({entry:ie},gZe(ie,h,f,m,p,d,g,A,x))),de=X.map(ie=>{var{entry:ce,line:J}=ie;return v.createElement(Ul,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},a&&v.createElement("line",Op({},D,J,{className:wa("recharts-cartesian-axis-tick-line",Bp(a,"className"))})))}),re=X.map((ie,ce)=>{var{entry:J,tick:pe}=ie,Se=ui(ui(ui(ui({textAnchor:E,verticalAnchor:S},O),{},{stroke:"none",fill:s},B),pe),{},{index:ce,payload:J,visibleTicksCount:C.length,tickFormatter:i,padding:c},u);return v.createElement(Ul,Op({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},lw(I,J,ce)),n&&v.createElement(yZe,{option:n,tickProps:Se,value:"".concat(typeof i=="function"?i(J.value,ce):J.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},re.length>0&&v.createElement(CA,{zIndex:dl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:e},re)),de.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},de))}),wZe=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:l,axisType:c}=t,u=dZe(t,uZe),[d,A]=v.useState(""),[h,f]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return cZe({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,I=b.letterSpacing;(w!==d||I!==h)&&(A(w),f(I))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(CA,{zIndex:t.zIndex},v.createElement(Ul,{className:wa("recharts-cartesian-axis",s)},v.createElement(pZe,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:mA(t)}),v.createElement(bZe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(jXe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(VXe,{label:t.label,labelRef:t.labelRef}),t.children)))}),p8=v.forwardRef((t,e)=>{var r=Vo(t,ap);return v.createElement(wZe,Op({},r,{ref:e}))});p8.displayName="CartesianAxis";var NZe={},yle=mc({name:"errorBars",initialState:NZe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Grt,replaceErrorBar:qrt,removeErrorBar:zrt}=yle.actions,_Ze=yle.reducer,CZe=["children"];function EZe(t,e){if(t==null)return{};var r,n,a=SZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function SZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var IZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},BZe=v.createContext(IZe);function TZe(t){var{children:e}=t,r=EZe(t,CZe);return v.createElement(BZe.Provider,{value:r},e)}function ble(t,e){var r,n,a=Qr(u=>Gf(u,t)),s=Qr(u=>qf(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Yi.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Ji.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function PZe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=mle(),{needClipX:s,needClipY:i,needClip:l}=ble(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:A}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-A/2,width:s?d:d*2,height:i?A:A*2}))}var jZe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw=v;function kZe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FZe=typeof Object.is=="function"?Object.is:kZe,OZe=Iw.useSyncExternalStore,DZe=Iw.useRef,RZe=Iw.useEffect,MZe=Iw.useMemo,LZe=Iw.useDebugValue;jZe.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=DZe(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=MZe(function(){function c(f){if(!u){if(u=!0,d=f,f=n(f),a!==void 0&&i.hasValue){var m=i.value;if(a(m,f))return A=m}return A=f}if(m=A,FZe(d,f))return m;var p=n(f);return a!==void 0&&a(m,p)?(d=f,m):(d=f,A=p)}var u=!1,d,A,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=OZe(t,s[0],s[1]);return RZe(function(){i.hasValue=!0,i.value=l},[l]),LZe(l),l};function UZe(t){t()}function QZe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){UZe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var tq={notify(){},get:()=>[]};function VZe(t,e){let r,n=tq,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),A())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=QZe())}function A(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=tq)}function h(){s||(s=!0,d())}function f(){s&&(s=!1,A())}const m={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>n};return m}var HZe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$Ze=HZe(),KZe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GZe=KZe(),qZe=()=>$Ze||GZe?v.useLayoutEffect:v.useEffect,zZe=qZe();function rq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function WZe(t,e){if(rq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!rq(t[r[a]],e[r[a]]))return!1;return!0}var ST=Symbol.for("react-redux-context"),IT=typeof globalThis<"u"?globalThis:{};function XZe(){if(!v.createContext)return{};const t=IT[ST]??(IT[ST]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var YZe=XZe();function JZe(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=VZe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);zZe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||YZe;return v.createElement(l.Provider,{value:s},e)}var ZZe=JZe,eet=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function tet(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function g8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(eet.has(n)){if(t[n]==null&&e[n]==null)continue;if(!WZe(t[n],e[n]))return!1}else if(!tet(t[n],e[n]))return!1;return!0}function rg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:fle}function ng(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:fle}var ret="Invariant failed";function net(t,e){throw new Error(ret)}function tF(){return tF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tF.apply(null,arguments)}function YS(t){return v.createElement(lle,tF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var aet=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Kr(e))return e;var s=Kr(n)||ho(n);return s?e(n,a):(s||net(),r)}},set=(t,e,r)=>r,iet=(t,e)=>e,Bw=jt([TR,iet],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),oet=jt([Bw],t=>t==null?void 0:t.maxBarSize),cet=(t,e,r,n)=>n,uet=jt([Zn,TR,rg,ng,set],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),det=(t,e,r)=>{var n=Zn(t),a=rg(t,e),s=ng(t,e);if(!(a==null||s==null))return n==="horizontal"?zk(t,"yAxis",s,r):zk(t,"xAxis",a,r)},Aet=(t,e)=>{var r=Zn(t),n=rg(t,e),a=ng(t,e);if(!(n==null||a==null))return r==="horizontal"?rG(t,"xAxis",n):rG(t,"yAxis",a)},fet=jt([uet,OGe,Aet],FJe),het=(t,e,r)=>{var n,a,s=Bw(t,e);if(s!=null){var i=rg(t,e),l=ng(t,e);if(!(i==null||l==null)){var c=Zn(t),u=Bie(t),{maxBarSize:d}=s,A=ho(d)?u:d,h,f;return c==="horizontal"?(h=Av(t,"xAxis",i,r),f=dv(t,"xAxis",i,r)):(h=Av(t,"yAxis",l,r),f=dv(t,"yAxis",l,r)),(n=(a=CS(h,f,!0))!==null&&a!==void 0?a:A)!==null&&n!==void 0?n:0}}},wle=(t,e,r)=>{var n=Zn(t),a=rg(t,e),s=ng(t,e);if(!(a==null||s==null)){var i,l;return n==="horizontal"?(i=Av(t,"xAxis",a,r),l=dv(t,"xAxis",a,r)):(i=Av(t,"yAxis",s,r),l=dv(t,"yAxis",s,r)),CS(i,l)}},met=jt([fet,Bie,FGe,Tie,het,wle,oet],LJe),pet=(t,e,r)=>{var n=rg(t,e);if(n!=null)return Av(t,"xAxis",n,r)},get=(t,e,r)=>{var n=ng(t,e);if(n!=null)return Av(t,"yAxis",n,r)},xet=(t,e,r)=>{var n=rg(t,e);if(n!=null)return dv(t,"xAxis",n,r)},vet=(t,e,r)=>{var n=ng(t,e);if(n!=null)return dv(t,"yAxis",n,r)},yet=jt([met,Bw],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),bet=jt([det,Bw],UJe),wet=jt([Qi,KD,pet,get,xet,vet,yet,Zn,wGe,wle,bet,Bw,cet],(t,e,r,n,a,s,i,l,c,u,d,A,h)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:p}=c;if(!(A==null||i==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=A,x;if(g!=null&&g.length>0?x=g:x=f==null?void 0:f.slice(m,p+1),x!=null)return Jet({layout:l,barSettings:A,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),Net=["index"];function rF(){return rF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rF.apply(null,arguments)}function _et(t,e){if(t==null)return{};var r,n,a=Cet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Cet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Nle=v.createContext(void 0),Eet=t=>{var e=v.useContext(Nle);if(e!=null)return e.stackId;if(t!=null)return NQe(t)},Iet=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Bet=t=>{var e=v.useContext(Nle);if(e!=null){var{stackId:r}=e;return"url(#".concat(Iet(r,t),")")}},Tet=t=>{var{index:e}=t,r=_et(t,Net),n=Bet(e);return v.createElement(Ul,rF({className:"recharts-bar-stack-layer",clipPath:n},r))},Pet=["onMouseEnter","onMouseLeave","onClick"],jet=["value","background","tooltipPosition"],ket=["id"],Fet=["onMouseEnter","onClick","onMouseLeave"];function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kf.apply(null,arguments)}function nq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(r),!0).forEach(function(n){Oet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oet(t,e,r){return(e=Det(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Det(t){var e=Ret(t,"string");return typeof e=="symbol"?e:e+""}function Ret(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JS(t,e){if(t==null)return{};var r,n,a=Met(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Met(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Let=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:U4(r,e),payload:t}]},Uet=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:U4(s,e),hide:i,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(cle,{tooltipEntrySettings:d})});function Qet(t){var e=Qr(Fp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=JS(s,Pet),d=A8(i,n,s.id),A=f8(l),h=h8(c,n,s.id);if(!a||r==null)return null;var f=ob(a);return v.createElement(CA,{zIndex:QJe(a,dl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=JS(m,jet);if(!x)return null;var w=d(m,p),I=A(m,p),T=h(m,p),C=Fl(Fl(Fl(Fl(Fl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),f),lw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:I,onClick:T,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(YS,kf({key:"background-bar-".concat(p)},C))}))}function Vet(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Fl(Fl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(WXe,{value:e?a:void 0},r)}function Het(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,l=Qr(Fp),c=Qr(t8),u=r&&String(s)===l&&(c==null||i===c),d=u?r:e;return u?v.createElement(CA,{zIndex:dl.activeBar},v.createElement(YS,kf({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(YS,kf({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function $et(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(YS,kf({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Ket(t){var e,{data:r,props:n}=t,a=(e=mA(n))!==null&&e!==void 0?e:{},{id:s}=a,i=JS(a,ket),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:A,onMouseLeave:h}=n,f=JS(n,Fet),m=A8(d,c,s),p=f8(h),g=h8(A,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(Tet,kf({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},lw(f,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(Het,{shape:l,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement($et,{shape:l,baseProps:i,entry:x,index:y,dataKey:c})))):null}function Get(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,A=r.current,h=J4(e,"recharts-bar-"),[f,m]=v.useState(!1),p=!f,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(Vet,{showLabels:p,rects:n},v.createElement(Y4,{animationId:h,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,I)=>{var T=A&&A[I];if(T)return Fl(Fl({},w),{},{x:Bi(T.x,w.x,y),y:Bi(T.y,w.y,y),width:Bi(T.width,w.width,y),height:Bi(T.height,w.height,y)});if(a==="horizontal"){var C=Bi(0,w.height,y),E=Bi(w.stackedBarStart,w.y,y);return Fl(Fl({},w),{},{y:E,height:C})}var S=Bi(0,w.width,y),O=Bi(w.stackedBarStart,w.x,y);return Fl(Fl({},w),{},{width:S,x:O})});return y>0&&(r.current=b??null),b==null?null:v.createElement(Ul,null,v.createElement(Ket,{props:e,data:b}))}),v.createElement(ele,{label:e.label}),e.children)}function qet(t){var e=v.useRef(null);return v.createElement(Get,{previousRectanglesRef:e,props:t})}var _le=0,zet=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Za(t,e)}};class Wet extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=wa("recharts-bar",a),A=u;return v.createElement(Ul,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(PZe,{clipPathId:A,xAxisId:s,yAxisId:i})),v.createElement(Ul,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(A,")"):void 0},v.createElement(Qet,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(qet,this.props)))}}var Xet={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:_le,xAxisId:0,yAxisId:0,zIndex:dl.bar};function Yet(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:A}=ble(e,r),h=Aw(),f=Yc(),m=d8(t.children,Sw),p=Qr(y=>wet(y,t.id,f,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(TZe,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:zet,errorBarOffset:g},v.createElement(Wet,kf({},t,{layout:h,needClip:A,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Jet(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:A,offset:h,cells:f,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:i,x=d?g.scale.domain():null,y=_Qe({numericAxis:g}),b=g.scale(y);return A.map((w,I)=>{var T,C,E,S,O,B;if(d){var P=d[I+p];if(P==null)return null;T=xQe(P,x)}else T=Za(w,r),Array.isArray(T)||(T=[y,T]);var D=aet(n,_le)(T[1],I);if(e==="horizontal"){var X,[de,re]=[l.scale(T[0]),l.scale(T[1])];C=A$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:I}),E=(X=re??de)!==null&&X!==void 0?X:void 0,S=a.size;var ie=de-re;if(O=pA(ie)?0:ie,B={x:C,y:h.top,width:S,height:h.height},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var ce=Lo(O||D)*(Math.abs(D)-Math.abs(O));E-=ce,O+=ce}}else{var[J,pe]=[i.scale(T[0]),i.scale(T[1])];if(C=J,E=A$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:I}),S=pe-J,O=a.size,B={x:h.left,y:E,width:h.width,height:O},Math.abs(D)>0&&Math.abs(S)<Math.abs(D)){var Se=Lo(S||D)*(Math.abs(D)-Math.abs(S));S+=Se}}if(C==null||E==null||S==null||O==null)return null;var k=Fl(Fl({},w),{},{stackedBarStart:b,x:C,y:E,width:S,height:O,value:d?T:T[1],payload:w,background:B,tooltipPosition:{x:C+S/2,y:E+O/2},parentViewBox:m},f&&f[I]&&f[I].props);return k}).filter(Boolean)}function Zet(t){var e=Vo(t,Xet),r=Eet(e.stackId),n=Yc();return v.createElement(ule,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(kYe,{legendPayload:Let(e)}),v.createElement(Uet,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(qYe,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(CA,{zIndex:e.zIndex},v.createElement(Yet,kf({},e,{id:a})))))}var nF=v.memo(Zet,g8);nF.displayName="Bar";var ett=["domain","range"],ttt=["domain","range"];function aq(t,e){if(t==null)return{};var r,n,a=rtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function sq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Cle(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=aq(t,ett),{domain:s,range:i}=e,l=aq(e,ttt);return!sq(r,s)||!sq(n,i)?!1:g8(a,l)}var ntt=["dangerouslySetInnerHTML","ticks","scale"],att=["id","scale"];function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aF.apply(null,arguments)}function iq(t,e){if(t==null)return{};var r,n,a=stt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function stt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function itt(t){var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(_Je(t)):r.current!==t&&e(CJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(EJe(r.current)),r.current=null)},[e]),null}var ott=t=>{var{xAxisId:e,className:r}=t,n=Qr(KD),a=Yc(),s="xAxis",i=Qr(x=>loe(x,s,e,a)),l=Qr(x=>aoe(x,e)),c=Qr(x=>jqe(x,e)),u=Qr(x=>Lie(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:A,scale:h}=t,f=iq(t,ntt),{id:m,scale:p}=u,g=iq(u,att);return v.createElement(p8,aF({},f,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:wa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},ltt={allowDataOverflow:Yi.allowDataOverflow,allowDecimals:Yi.allowDecimals,allowDuplicatedCategory:Yi.allowDuplicatedCategory,angle:Yi.angle,axisLine:ap.axisLine,height:Yi.height,hide:!1,includeHidden:Yi.includeHidden,interval:Yi.interval,minTickGap:Yi.minTickGap,mirror:Yi.mirror,orientation:Yi.orientation,padding:Yi.padding,reversed:Yi.reversed,scale:Yi.scale,tick:Yi.tick,tickCount:Yi.tickCount,tickLine:ap.tickLine,tickSize:ap.tickSize,type:Yi.type,xAxisId:0},ctt=t=>{var e=Vo(t,ltt);return v.createElement(v.Fragment,null,v.createElement(itt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(ott,e))},Ele=v.memo(ctt,Cle);Ele.displayName="XAxis";var utt=["dangerouslySetInnerHTML","ticks","scale"],dtt=["id","scale"];function sF(){return sF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sF.apply(null,arguments)}function oq(t,e){if(t==null)return{};var r,n,a=Att(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Att(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ftt(t){var e=Ha(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(SJe(t)):r.current!==t&&e(IJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(BJe(r.current)),r.current=null)},[e]),null}var htt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),l=Qr(KD),c=Yc(),u=Ha(),d="yAxis",A=Qr(T=>soe(T,e)),h=Qr(T=>Fqe(T,e)),f=Qr(T=>loe(T,d,e,c)),m=Qr(T=>Uie(T,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!A||i8(a)||v.isValidElement(a)||m==null)){var T=s.current;if(T){var C=T.getCalculatedWidth();Math.round(A.width)!==Math.round(C)&&u(TJe({id:e,width:C}))}}},[f,A,u,a,e,n,m]),A==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=oq(t,utt),{id:b,scale:w}=m,I=oq(m,dtt);return v.createElement(p8,sF({},y,I,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:A.width,height:A.height,className:wa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:f,axisType:d}))},mtt={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:Ji.allowDecimals,allowDuplicatedCategory:Ji.allowDuplicatedCategory,angle:Ji.angle,axisLine:ap.axisLine,hide:!1,includeHidden:Ji.includeHidden,interval:Ji.interval,minTickGap:Ji.minTickGap,mirror:Ji.mirror,orientation:Ji.orientation,padding:Ji.padding,reversed:Ji.reversed,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,tickLine:ap.tickLine,tickSize:ap.tickSize,type:Ji.type,width:Ji.width,yAxisId:0},ptt=t=>{var e=Vo(t,mtt);return v.createElement(v.Fragment,null,v.createElement(ftt,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(htt,e))},Sle=v.memo(ptt,Cle);Sle.displayName="YAxis";var gtt=(t,e)=>e,x8=jt([gtt,Zn,Rie,Hi,_oe,zf,Wze,Qi],rWe),v8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Ile=Uu("mouseClick"),Ble=uw();Ble.startListening({actionCreator:Ile,effect:(t,e)=>{var r=t.payload,n=x8(e.getState(),v8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(zqe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var iF=Uu("mouseMove"),Tle=uw(),U_=null;Tle.startListening({actionCreator:iF,effect:(t,e)=>{var r=t.payload;U_!==null&&cancelAnimationFrame(U_);var n=v8(r);U_=requestAnimationFrame(()=>{var a=e.getState(),s=WR(a,a.tooltip.settings.shared);if(s==="axis"){var i=x8(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(poe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(moe())}U_=null})}});function xtt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var lq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Ple=mc({name:"rootProps",initialState:lq,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:lq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),vtt=Ple.reducer,{updateOptions:ytt}=Ple.actions,jle=mc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:btt}=jle.actions,wtt=jle.reducer,kle=Uu("keyDown"),Fle=Uu("focus"),y8=uw();y8.startListening({actionCreator:kle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=XR(a,$v(r),ww(r),Cw(r)),l=i==null?-1:Number(i);if(!(!Number.isFinite(l)||l<0)){var c=zf(r);if(s==="Enter"){var u=qS(r,"axis","hover",String(a.index));e.dispatch(Xk({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=Mqe(r),A=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,f=l+h*A;if(!(c==null||f>=c.length||f<0)){var m=qS(r,"axis","hover",String(f));e.dispatch(Xk({active:!0,activeIndex:f.toString(),activeCoordinate:m}))}}}}}});y8.startListening({actionCreator:Fle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=qS(r,"axis","hover",String(s));e.dispatch(Xk({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var pu=Uu("externalEvent"),Ole=uw(),BT=new Map;Ole.startListening({actionCreator:pu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=BT.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Fze(l),activeDataKey:t8(l),activeIndex:Fp(l),activeLabel:Soe(l),activeTooltipIndex:Fp(l),isTooltipActive:Oze(l)};r(c,n)}finally{BT.delete(a)}});BT.set(a,i)}}});var Ntt=jt([Vv],t=>t.tooltipItemPayloads),_tt=jt([Ntt,_w,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),Dle=Uu("touchMove"),Rle=uw();Rle.startListening({actionCreator:Dle,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=WR(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=x8(n,v8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(poe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(ese),A=(l=u.getAttribute(tse))!==null&&l!==void 0?l:void 0,h=Hv(n).find(p=>p.id===A);if(d==null||h==null||A==null)return;var{dataKey:f}=h,m=_tt(n,d,A);e.dispatch(hoe({activeDataKey:f,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:A}))}}}});var Ctt=_ae({brush:VJe,cartesianAxis:PJe,chartData:jWe,errorBars:_Ze,graphicalItems:KYe,layout:AQe,legend:gVe,options:SWe,polarAxis:iYe,polarOptions:wtt,referenceElements:WJe,rootProps:vtt,tooltip:Wqe,zIndex:pWe}),Ett=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return R9e({reducer:Ctt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([Ble.middleware,Tle.middleware,y8.middleware,Ole.middleware,Rle.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Lae({type:"raf"}))},devTools:{serialize:{replacer:xtt},name:"recharts-".concat(r)}})};function Mle(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Yc(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=Ett(e,n));var i=DD;return v.createElement(ZZe,{context:i,store:s.current},r)}function Stt(t){var{layout:e,margin:r}=t,n=Ha(),a=Yc();return v.useEffect(()=>{a||(n(cQe(e)),n(lQe(r)))},[n,a,e,r]),null}var Lle=v.memo(Stt,g8);function Ule(t){var e=Ha();return v.useEffect(()=>{e(ytt(t))},[e,t]),null}function cq(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=Ha();return v.useLayoutEffect(()=>(n.current&&a(hWe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(mWe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function uq(t){var{children:e,isPanorama:r}=t,n=Qr(aWe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(cq,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(cq,{key:i,zIndex:i,isPanorama:r})))}var Itt=["children"];function Btt(t,e){if(t==null)return{};var r,n,a=Ttt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ttt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZS.apply(null,arguments)}var Ptt={width:"100%",height:"100%",display:"block"},jtt=v.forwardRef((t,e)=>{var r=cse(),n=use(),a=bse();if(!O0(r)||!O0(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(bD,ZS({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Ptt,ref:e}),s)}),ktt=t=>{var{children:e}=t,r=Qr($4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(bD,{width:n,height:a,x:i,y:s},e)},dq=v.forwardRef((t,e)=>{var{children:r}=t,n=Btt(t,Itt),a=Yc();return a?v.createElement(ktt,null,v.createElement(uq,{isPanorama:!0},r)):v.createElement(jtt,ZS({ref:e},n),v.createElement(uq,{isPanorama:!1},r))});function Ftt(){var t=Ha(),[e,r]=v.useState(null),n=Qr(TQe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Bs(s)&&s!==n&&t(dQe(s))}},[e,t,n]),r}function Aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ott(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(r),!0).forEach(function(n){Dtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dtt(t,e,r){return(e=Rtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rtt(t){var e=Mtt(t,"string");return typeof e=="symbol"?e:e+""}function Mtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dp(){return Dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dp.apply(null,arguments)}var Ltt=()=>(QWe(),null);function eI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Utt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:eI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:eI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{i(A=>{var h=Math.round(u),f=Math.round(d);return A.containerWidth===h&&A.containerHeight===f?A:{containerWidth:h,containerHeight:f}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:A}=u.getBoundingClientRect();l(d,A);var h=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},f=new ResizeObserver(h);f.observe(u),a.current=f}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(G4,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Dp({ref:c},t)))}),Qtt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:eI(r),containerHeight:eI(n)}),i=v.useCallback((c,u)=>{s(d=>{var A=Math.round(c),h=Math.round(u);return d.containerWidth===A&&d.containerHeight===h?d:{containerWidth:A,containerHeight:h}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(G4,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",Dp({ref:l},t)))}),Vtt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(G4,{width:r,height:n}),v.createElement("div",Dp({ref:e},t)))}),Htt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return Sf(r)||Sf(n)?v.createElement(Qtt,Dp({},t,{ref:e})):v.createElement(Vtt,Dp({},t,{ref:e}))});function $tt(t){return t===!0?Utt:Htt}var Ktt=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:A,onMouseUp:h,onTouchEnd:f,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),I=Ha(),[T,C]=v.useState(null),[E,S]=v.useState(null),O=Ftt(),B=GD(),P=(B==null?void 0:B.width)>0?B.width:x,D=(B==null?void 0:B.height)>0?B.height:a,X=v.useCallback(G=>{O(G),typeof e=="function"&&e(G),C(G),S(G),G!=null&&(w.current=G)},[O,e,C,S]),de=v.useCallback(G=>{I(Ile(G)),I(pu({handler:s,reactEvent:G}))},[I,s]),re=v.useCallback(G=>{I(iF(G)),I(pu({handler:u,reactEvent:G}))},[I,u]),ie=v.useCallback(G=>{I(moe()),I(pu({handler:d,reactEvent:G}))},[I,d]),ce=v.useCallback(G=>{I(iF(G)),I(pu({handler:A,reactEvent:G}))},[I,A]),J=v.useCallback(()=>{I(Fle())},[I]),pe=v.useCallback(G=>{I(kle(G.key))},[I]),Se=v.useCallback(G=>{I(pu({handler:i,reactEvent:G}))},[I,i]),k=v.useCallback(G=>{I(pu({handler:l,reactEvent:G}))},[I,l]),F=v.useCallback(G=>{I(pu({handler:c,reactEvent:G}))},[I,c]),H=v.useCallback(G=>{I(pu({handler:h,reactEvent:G}))},[I,h]),M=v.useCallback(G=>{I(pu({handler:p,reactEvent:G}))},[I,p]),L=v.useCallback(G=>{b&&I(Dle(G)),I(pu({handler:m,reactEvent:G}))},[I,b,m]),z=v.useCallback(G=>{I(pu({handler:f,reactEvent:G}))},[I,f]),R=$tt(y);return v.createElement(Foe.Provider,{value:T},v.createElement(Cne.Provider,{value:E},v.createElement(R,{width:P??(g==null?void 0:g.width),height:D??(g==null?void 0:g.height),className:wa("recharts-wrapper",n),style:Ott({position:"relative",cursor:"default",width:P,height:D},g),onClick:de,onContextMenu:Se,onDoubleClick:k,onFocus:J,onKeyDown:pe,onMouseDown:F,onMouseEnter:re,onMouseLeave:ie,onMouseMove:ce,onMouseUp:H,onTouchEnd:z,onTouchMove:L,onTouchStart:M,ref:X},v.createElement(Ltt,null),r)))}),Gtt=["width","height","responsive","children","className","style","compact","title","desc"];function qtt(t,e){if(t==null)return{};var r,n,a=ztt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ztt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Qle=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:l,compact:c,title:u,desc:d}=t,A=qtt(t,Gtt),h=mA(A);return c?v.createElement(v.Fragment,null,v.createElement(G4,{width:r,height:n}),v.createElement(dq,{otherAttributes:h,title:u,desc:d},s)):v.createElement(Ktt,{className:i,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(dq,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(YJe,null,s)))});function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}var Wtt={top:5,right:5,bottom:5,left:5},Xtt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Wtt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ytt=v.forwardRef(function(e,r){var n,a=Vo(e.categoricalChartProps,Xtt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Mle,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(ple,{chartData:u.data}),v.createElement(Lle,{layout:a.layout,margin:a.margin}),v.createElement(Ule,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Qle,oF({},a,{ref:r})))}),Jtt=["axis","item"],Ztt=v.forwardRef((t,e)=>v.createElement(Ytt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Jtt,tooltipPayloadSearcher:Doe,categoricalChartProps:t,ref:e}));function ert(t){var e=Ha();return v.useEffect(()=>{e(btt(t))},[e,t]),null}var trt=["layout"];function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lF.apply(null,arguments)}function rrt(t,e){if(t==null)return{};var r,n,a=nrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var art={top:5,right:5,bottom:5,left:5},Vle={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:art,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},srt=v.forwardRef(function(e,r){var n,a=Vo(e.categoricalChartProps,Vle),{layout:s}=a,i=rrt(a,trt),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,A={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Mle,{preloadedState:{options:A},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(ple,{chartData:a.data}),v.createElement(Lle,{layout:s,margin:a.margin}),v.createElement(Ule,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(ert,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(Qle,lF({},i,{ref:r})))});function fq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(r),!0).forEach(function(n){irt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function irt(t,e,r){return(e=ort(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ort(t){var e=lrt(t,"string");return typeof e=="symbol"?e:e+""}function lrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var crt=["item"],urt=hq(hq({},Vle),{},{layout:"centric",startAngle:0,endAngle:360}),drt=v.forwardRef((t,e)=>{var r=Vo(t,urt);return v.createElement(srt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:crt,tooltipPayloadSearcher:Doe,categoricalChartProps:r,ref:e})});const Art="sellers_candies",Q_="cash_deliveries_candies";function na(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function qs(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function V_(t,e){return t*e/100}function H_(t,e,r){return t-e-r}function mq(t){return t?wr(t.toDate(),"yyyy-MM-dd"):""}function $_(t){if(!t)return rr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return rr.fromDate(a)}function frt(){const t=new Date,[e,r]=v.useState(wr(Pd(t),"yyyy-MM-dd")),[n,a]=v.useState(wr(Td(t),"yyyy-MM-dd")),[s,i]=v.useState([]),l=v.useMemo(()=>{const R=new Map;return s.forEach(G=>R.set(G.id,G)),R},[s]),[c,u]=v.useState([]),[d,A]=v.useState(!0),[h,f]=v.useState(()=>wr(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,I]=v.useState(""),[T,C]=v.useState(null),[E,S]=v.useState({}),O=v.useRef(null);v.useEffect(()=>{const R=Yt(At(ke,Art),ln("name","asc")),G=I0(R,ee=>{const te=ee.docs.map(Q=>{const xe=Q.data();return{id:Q.id,name:String((xe==null?void 0:xe.name)??""),branch:xe!=null&&xe.branch?String(xe.branch):"",commissionPercent:na((xe==null?void 0:xe.commissionPercent)??0)}});i(te)},()=>i([]));return()=>G()},[]),v.useEffect(()=>{A(!0);const R=$_(e),G=new Date($_(n).toDate().getTime());G.setDate(G.getDate()+1);const ee=rr.fromDate(G),te=Yt(At(ke,Q_),lr("date",">=",R),lr("date","<",ee),ln("date","desc")),Q=I0(te,xe=>{const Y=xe.docs.map(W=>{const le=W.data();return{id:W.id,date:le==null?void 0:le.date,sellerId:String((le==null?void 0:le.sellerId)??""),sellerName:String((le==null?void 0:le.sellerName)??""),amountDelivered:na(le==null?void 0:le.amountDelivered),commissionPercent:na(le==null?void 0:le.commissionPercent),commissionPaid:na(le==null?void 0:le.commissionPaid),extraExpenses:na(le==null?void 0:le.extraExpenses),totalFinal:na(le==null?void 0:le.totalFinal),comment:String((le==null?void 0:le.comment)??""),createdAt:le==null?void 0:le.createdAt,updatedAt:le==null?void 0:le.updatedAt}});u(Y),A(!1)},xe=>{console.error("Firestore deliveries query error:",xe),u([]),A(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>Q()},[e,n]);const B=v.useMemo(()=>m?l.get(m):void 0,[m,l]),P=na((B==null?void 0:B.commissionPercent)??0),D=na(g),X=na(y),de=V_(D,P),re=H_(D,de,X),ie=v.useMemo(()=>{var G;const R=new Map;for(const ee of c){const te=ee.sellerId||ee.sellerName||"UNKNOWN",Q=R.get(te)??{sellerId:ee.sellerId,sellerName:ee.sellerName||((G=l.get(ee.sellerId))==null?void 0:G.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};Q.delivered+=na(ee.amountDelivered),Q.commission+=na(ee.commissionPaid),Q.totalFinal+=na(ee.totalFinal),R.set(te,Q)}return Array.from(R.values()).sort((ee,te)=>ee.sellerName.localeCompare(te.sellerName))},[c,l]),ce=v.useMemo(()=>{let R=0,G=0,ee=0,te=0;for(const Q of c)R+=na(Q.amountDelivered),G+=na(Q.commissionPaid),ee+=na(Q.extraExpenses),te+=na(Q.totalFinal);return{delivered:R,commission:G,expenses:ee,totalFinal:te}},[c]),J=v.useMemo(()=>ie.map(R=>({name:R.sellerName,Entregado:Number(R.delivered.toFixed(2)),Comision:Number(R.commission.toFixed(2))})),[ie]),pe=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ce.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ce.commission.toFixed(2))},{name:"Total Gastos",value:Number(ce.expenses.toFixed(2))}].filter(R=>R.value>0),[ce]),Se=["#3B82F6","#F59E0B","#EF4444"];async function k(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const R=l.get(m),G=(R==null?void 0:R.name)??"Sin nombre",ee=na((R==null?void 0:R.commissionPercent)??0),te=V_(D,ee),Q=H_(D,te,X);await En(At(ke,Q_),{date:$_(h),sellerId:m,sellerName:G,amountDelivered:D,commissionPercent:ee,commissionPaid:te,extraExpenses:X,totalFinal:Q,comment:w??"",createdAt:rr.now()}),x(""),b("0"),I("")}function F(R){C(R.id),S({...R,dateInput:mq(R.date)})}function H(){C(null),S({})}async function M(R){const G=E,ee=String(G.sellerId??""),te=l.get(ee),Q=String(G.sellerName??(te==null?void 0:te.name)??"Sin nombre"),xe=na(G.amountDelivered),Y=na(G.extraExpenses),W=na(G.commissionPercent??(te==null?void 0:te.commissionPercent)??0),le=V_(xe,W),Pe=H_(xe,le,Y),Le=$_(String(G.dateInput??mq(G.date)));await rn(Gt(ke,Q_,R),{date:Le,sellerId:ee,sellerName:Q,amountDelivered:xe,commissionPercent:W,commissionPaid:le,extraExpenses:Y,totalFinal:Pe,comment:String(G.comment??""),updatedAt:rr.now()}),H()}async function L(R){confirm("Eliminar este registro?")&&await Qn(Gt(ke,Q_,R))}async function z(){if(!O.current)return;const R=await G0(O.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),G=R.toDataURL("image/png"),ee=new Br("p","mm","a4"),te=ee.internal.pageSize.getWidth(),Q=ee.internal.pageSize.getHeight(),xe=te,Y=R.height*xe/R.width;let W=Y,le=0;for(ee.addImage(G,"PNG",0,le,xe,Y),W-=Q;W>0;)ee.addPage(),le=-(Y-W),ee.addImage(G,"PNG",0,le,xe,Y),W-=Q;ee.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return o.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),o.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",o.jsx("span",{className:"font-bold",children:e})," "," ",o.jsx("span",{className:"font-bold",children:n})]})]}),o.jsx("button",{onClick:z,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",value:e,onChange:R=>r(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",value:n,onChange:R=>a(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),o.jsxs("div",{ref:O,className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(ce.totalFinal)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(ce.commission)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(ce.expenses)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",qs(ce.delivered)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),o.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),o.jsx("tbody",{children:ie.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):ie.map(R=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:R.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.delivered)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.commission)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(R.totalFinal)]})]},R.sellerId||R.sellerName))})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(y$,{children:o.jsxs(Ztt,{data:J,children:[o.jsx(Ele,{dataKey:"name",interval:0,angle:-12,height:70}),o.jsx(Sle,{}),o.jsx(xG,{}),o.jsx(jk,{}),o.jsx(nF,{dataKey:"Entregado"}),o.jsx(nF,{dataKey:"Comision"})]})})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(y$,{children:o.jsxs(drt,{children:[o.jsx(Ale,{data:pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:pe.map((R,G)=>o.jsx(Sw,{fill:Se[G%Se.length]},G))}),o.jsx(xG,{}),o.jsx(jk,{})]})})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:h,onChange:R=>f(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:m,onChange:R=>p(R.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>o.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:R=>x(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),o.jsx("input",{value:`${P}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),o.jsx("input",{value:`$ ${qs(de)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:R=>b(R.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),o.jsx("input",{value:`$ ${qs(re)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),o.jsxs("label",{className:"space-y-1 md:col-span-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{value:w,onChange:R=>I(R.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:k,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?o.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),o.jsx("tbody",{children:c.map(R=>{if(!(T===R.id))return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:wr(R.date.toDate(),"yyyy-MM-dd")}),o.jsx("td",{className:"p-2 font-semibold",children:R.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.amountDelivered)]}),o.jsxs("td",{className:"p-2 text-right",children:[qs(R.commissionPercent),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.commissionPaid)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",qs(R.extraExpenses)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(R.totalFinal)]}),o.jsx("td",{className:"p-2",children:R.comment}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>F(R),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>L(R.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},R.id);const ee=na(E.amountDelivered??R.amountDelivered),te=na(E.commissionPercent??R.commissionPercent),Q=na(E.extraExpenses??R.extraExpenses),xe=V_(ee,te),Y=H_(ee,xe,Q);return o.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:W=>S(le=>({...le,dateInput:W.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("select",{value:String(E.sellerId??R.sellerId),onChange:W=>{const le=W.target.value,Pe=l.get(le);S(Le=>({...Le,sellerId:le,sellerName:(Pe==null?void 0:Pe.name)??"",commissionPercent:na((Pe==null?void 0:Pe.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(W=>o.jsxs("option",{value:W.id,children:[W.name," ",W.branch?`(${W.branch})`:""]},W.id))]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(ee),onChange:W=>S(le=>({...le,amountDelivered:na(W.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(te),onChange:W=>S(le=>({...le,commissionPercent:na(W.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",qs(xe)]}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(Q),onChange:W=>S(le=>({...le,extraExpenses:na(W.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",qs(Y)]}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:String(E.comment??R.comment),onChange:W=>S(le=>({...le,comment:W.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(R.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},R.id)})})]})}),o.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(R=>o.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-black text-gray-900",children:R.sellerName}),o.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:wr(R.date.toDate(),"yyyy-MM-dd")})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),o.jsxs("div",{className:"font-extrabold",children:["$ ",qs(R.amountDelivered)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),o.jsxs("div",{className:"font-semibold",children:[qs(R.commissionPercent),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),o.jsxs("div",{className:"font-semibold",children:["$ ",qs(R.commissionPaid)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),o.jsxs("div",{className:"font-semibold",children:["$ ",qs(R.extraExpenses)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),o.jsxs("div",{className:"text-base font-black",children:["$ ",qs(R.totalFinal)]})]}),R.comment?o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),o.jsx("div",{className:"text-sm text-gray-800",children:R.comment})]}):null]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>F(R),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>L(R.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},R.id)),T?o.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[o.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:R=>S(G=>({...G,dateInput:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:String(E.sellerId??""),onChange:R=>{const G=R.target.value,ee=l.get(G);S(te=>({...te,sellerId:G,sellerName:(ee==null?void 0:ee.name)??"",commissionPercent:na((ee==null?void 0:ee.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(R=>o.jsxs("option",{value:R.id,children:[R.name," ",R.branch?`(${R.branch})`:""]},R.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",value:String(E.amountDelivered??""),onChange:R=>S(G=>({...G,amountDelivered:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",value:String(E.extraExpenses??""),onChange:R=>S(G=>({...G,extraExpenses:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),o.jsx("input",{type:"number",value:String(E.commissionPercent??""),onChange:R=>S(G=>({...G,commissionPercent:na(R.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{type:"text",value:String(E.comment??""),onChange:R=>S(G=>({...G,comment:R.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(T),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const K_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hrt(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function pq(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function mrt(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function prt(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState("ANY"),[g,x]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const I=await Dt(Yt(At(ke,"candy_main_orders"))),T=new Map;I.forEach(E=>{var X,de,re;const S=E.data(),O=mrt(S.date),B=((de=(X=S==null?void 0:S.createdAt)==null?void 0:X.toMillis)==null?void 0:de.call(X))||((re=S==null?void 0:S.createdAt)!=null&&re.seconds?S.createdAt.seconds*1e3:0)||0,P=Math.max(O,B),D=Array.isArray(S.items)?S.items:[];for(const ie of D){const ce=String((ie==null?void 0:ie.id)||(ie==null?void 0:ie.productId)||"").trim();if(!ce)continue;const J=String((ie==null?void 0:ie.name)||(ie==null?void 0:ie.productName)||"").trim(),pe=String((ie==null?void 0:ie.category)||"").trim(),Se=Number((ie==null?void 0:ie.unitPriceIsla)||0),k=Number((ie==null?void 0:ie.unitPriceRivas)||0),F=T.get(ce);(!F||P>=F._sortKey)&&T.set(ce,{productId:ce,category:pe,productName:J,priceIsla:Se,priceRivas:k,_sortKey:P})}});const C=Array.from(T.values()).sort((E,S)=>E.productName.localeCompare(S.productName,"es"));l(C)}catch(I){console.error(I),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]);const y=v.useMemo(()=>{const I=hrt(c),T=d.trim()===""?null:pq(d,NaN),C=h.trim()===""?null:pq(h,NaN);return i.filter(E=>{if(I&&!`${E.category} ${E.productName}`.toLowerCase().includes(I))return!1;const S=m==="ISLA"?[E.priceIsla]:m==="RIVAS"?[E.priceRivas]:[E.priceIsla,E.priceRivas],O=T==null||!Number.isFinite(T)?!0:S.some(P=>P>=T),B=C==null||!Number.isFinite(C)?!0:S.some(P=>P<=C);return O&&B})},[i,c,d,h,m]),b=()=>{u(""),A(""),f(""),p("ANY")},w=v.useMemo(()=>c.trim()!==""||d.trim()!==""||h.trim()!==""||m!=="ANY",[c,d,h,m]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),o.jsx("div",{className:"flex gap-2",children:o.jsx(Xc,{onClick:e,loading:r})})]}),o.jsxs("div",{className:"md:hidden mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>x(I=>!I),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${w?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold",children:"Filtros"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[w?"Activos":"Ninguno","  ","Mostrando ",o.jsx("b",{children:y.length})]})]}),o.jsx("div",{className:"text-sm font-semibold",children:g?"Cerrar":"Abrir"})]}),g&&o.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:I=>u(I.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio en"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:m,onChange:I=>p(I.target.value),children:[o.jsx("option",{value:"ANY",children:"Isla o Rivas"}),o.jsx("option",{value:"ISLA",children:"Solo Isla"}),o.jsx("option",{value:"RIVAS",children:"Solo Rivas"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:d,onChange:I=>A(I.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:h,onChange:I=>f(I.target.value),placeholder:"0"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:b,children:"Limpiar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>x(!1),children:"Aplicar"})]})]})})]}),o.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:I=>u(I.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio en"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:m,onChange:I=>p(I.target.value),children:[o.jsx("option",{value:"ANY",children:"Isla o Rivas"}),o.jsx("option",{value:"ISLA",children:"Solo Isla"}),o.jsx("option",{value:"RIVAS",children:"Solo Rivas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:d,onChange:I=>A(I.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:I=>f(I.target.value),placeholder:"0"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:b,children:"Limpiar"})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",o.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",o.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",o.jsx("b",{children:y.length})]})]})]}),o.jsxs("div",{className:"md:hidden",children:[r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):y.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):o.jsx("div",{className:"space-y-2",children:y.map(I=>o.jsx("div",{className:"bg-white rounded-xl border shadow-sm px-3 py-2",children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-tight truncate",children:I.category}),o.jsx("div",{className:"text-sm font-semibold leading-tight truncate",children:I.productName})]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"flex items-baseline gap-1 rounded-lg border bg-gray-50 px-2 py-1",children:[o.jsx("span",{className:"text-[10px] text-gray-600",children:"Isla"}),o.jsx("span",{className:"text-sm font-bold tabular-nums",children:K_(I.priceIsla)})]}),o.jsxs("div",{className:"flex items-baseline gap-1 rounded-lg border bg-gray-50 px-2 py-1",children:[o.jsx("span",{className:"text-[10px] text-gray-600",children:"Rivas"}),o.jsx("span",{className:"text-sm font-bold tabular-nums",children:K_(I.priceRivas)})]})]})]})},I.productId))}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]}),o.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin resultados."})}):y.map(I=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:I.category}),o.jsx("td",{className:"p-2 border",children:I.productName}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:K_(I.priceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:K_(I.priceRivas)})]},I.productId))})]})}),a&&o.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const G_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],TT=["Hombre","Mujer","Variado","NA"],grt=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],tl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ci(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Bl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function OC(t,e=1){const r=Math.floor(Bl(t,e));return r>0?r:e}function Hle(t){return!Number.isFinite(t)||t<=0?0:t}function PT(t){const e=String(t??"").trim();return e||""}function Wd(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ci(a),a));for(const a of e){const s=n.get(Ci(a));if(s!=null)return t[s]}}function xrt(t){return Object.values(t||{}).every(r=>Ci(r)==="")}function Ug(t){const e=Math.max(0,Bl(t.providerPrice,0)),r=Math.max(1,OC(t.quantity,1)),n=Hle(Bl(t.margin,0)),a=Math.max(0,Bl(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,l=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:l,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function vrt(){const{refreshKey:t,refresh:e}=fc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,A]=v.useState(""),[h,f]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,I]=v.useState(null),[T,C]=v.useState(!1),[E,S]=v.useState(null),[O,B]=v.useState(G_[0]),[P,D]=v.useState(""),[X,de]=v.useState(0),[re,ie]=v.useState(1),[ce,J]=v.useState(.7),[pe,Se]=v.useState(0),[k,F]=v.useState("NA"),[H,M]=v.useState(""),[L,z]=v.useState(""),[R,G]=v.useState(!1),[ee,te]=v.useState(""),[Q,xe]=v.useState([]),[Y,W]=v.useState([]),[le,Pe]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const Te=await Dt(Yt(At(ke,"products_stationery"))),Ee=[];Te.forEach(V=>{const Ae=V.data();Ee.push({id:V.id,category:Ae.category||"",name:Ae.name||"",providerPrice:Number(Ae.providerPrice||0),quantity:Number(Ae.quantity||1),facturado:Number(Ae.facturado||0),margin:Number(Ae.margin||0),salePrice:Number(Ae.salePrice||0),gain:Number(Ae.gain||0),gender:Ae.gender||"NA",typeProduct:Ae.typeProduct||"",code:Ae.code??"",createdAt:Ae.createdAt,updatedAt:Ae.updatedAt,totalEsperado:Number(Ae.totalEsperado||Number(Ae.salePrice||0)*Number(Ae.quantity||1))})}),l(Ee)}catch(Te){console.error(Te),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const Le=v.useMemo(()=>{const Te=Ci(d),Ee=Ci(h),V=m.trim()===""?null:Bl(m,NaN),Ae=g.trim()===""?null:Bl(g,NaN);return i.filter(Ne=>!(Te&&!`${Ne.category} ${Ne.name}`.toLowerCase().includes(Te)||Ee&&!String(Ne.code||"").toLowerCase().includes(Ee)||V!=null&&Number.isFinite(V)&&Ne.salePrice<V||Ae!=null&&Number.isFinite(Ae)&&Ne.salePrice>Ae))},[i,d,h,m,g]),qe=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),nt=v.useMemo(()=>{const Te=i.length,Ee=i.reduce((Ne,Re)=>Ne+(Re.facturado||0),0),V=i.reduce((Ne,Re)=>Ne+Number(Re.totalEsperado||Number(Re.salePrice||0)*Number(Re.quantity||1)),0),Ae=i.reduce((Ne,Re)=>Ne+(Re.gain||0),0);return{count:Te,sumFact:Ee,sumEsperado:V,sumGain:Ae}},[i]),st=()=>{B(G_[0]),D(""),de(0),ie(1),J(.7),Se(0),F("NA"),M(""),z(""),I(null)},Et=()=>{st(),b(!0)},yt=Te=>{I(Te),B(Te.category||G_[0]),D(Te.name||""),de(Number(Te.providerPrice||0)),ie(Number(Te.quantity||1)),J(Number(Te.margin||.7)),Se(Number(Te.salePrice||0)),F(Te.gender||"NA"),M(Te.typeProduct||""),z(String(Te.code||"")),b(!0)},Ct=async()=>{s("");const Te=String(O||"").trim(),Ee=String(P||"").trim(),{providerPrice:V,quantity:Ae,margin:Ne,salePrice:Re,facturado:ze,totalEsperado:Ye,gain:Ze}=Ug({providerPrice:X,quantity:re,margin:ce,salePrice:pe});if(!Te)return s(" Categora requerida.");if(!Ee)return s(" Producto requerido.");if(V<=0)return s(" Precio proveedor debe ser > 0.");if(Ae<=0)return s(" Cantidad debe ser > 0.");if(Re<=0)return s(" Precio venta invlido.");if(Ne<=0)return s(" Margen invlido.");const dt={category:Te,name:Ee,providerPrice:V,quantity:Ae,facturado:ze,margin:Ne,salePrice:Re,gain:Ze,gender:k||"NA",typeProduct:String(H||"").trim(),code:PT(L)||null,updatedAt:rr.now(),totalEsperado:Ye};try{n(!0),w?(await rn(Gt(ke,"products_stationery",w.id),dt),s(" Producto actualizado.")):(await En(At(ke,"products_stationery"),{...dt,createdAt:rr.now()}),s(" Producto creado.")),b(!1),I(null),st(),e()}catch(ge){console.error(ge),s(" Error guardando producto.")}finally{n(!1)}},Ot=async()=>{var Te;try{const Ee=new Wj,V=await Wj.listVideoInputDevices(),Ae=(Te=V[V.length-1])==null?void 0:Te.deviceId;if(!Ae)return null;const Ne=document.createElement("div");Ne.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Re=document.createElement("div");Re.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const ze=document.createElement("div");ze.className="p-3 flex items-center justify-between border-b",ze.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const Ye=document.createElement("button");Ye.textContent="Cerrar",Ye.className="px-3 py-1 rounded bg-gray-200";const Ze=document.createElement("div");Ze.className="p-3";const dt=document.createElement("video");return dt.style.width="100%",dt.style.borderRadius="12px",Ze.appendChild(dt),ze.appendChild(Ye),Re.appendChild(ze),Re.appendChild(Ze),Ne.appendChild(Re),document.body.appendChild(Ne),await new Promise(async ge=>{const Xe=()=>{Ne.remove(),ge(null)};Ye.onclick=Xe;const ot=await Ee.decodeFromVideoDevice(Ae,dt,be=>{if(be){const Ge=be.getText();try{ot.stop()}catch{}Ne.remove(),ge(Ge)}})})}catch(Ee){return console.error(Ee),null}},Pt=async()=>{const Te=await Ot();Te&&z(Te)},fe=async()=>{const Te=await Ot();if(!Te)return;const Ee=i.find(V=>String(V.code||"")===String(Te));Ee?(S(Ee),C(!0),s("")):(S(null),C(!0),s(""))},Ke=(Te,Ee)=>{const V=Te.map(Re=>({Id:Re.id,Categoria:Re.category,Producto:Re.name,PrecioProveedor:Re.providerPrice,Cantidad:Re.quantity,Facturado:Re.facturado,TotalEsperado:Re.totalEsperado||Re.salePrice*Re.quantity,Margen:Re.margin,PrecioVenta:Re.salePrice,Ganancia:Re.gain,Genero:Re.gender,TipoProducto:Re.typeProduct,Codigo:Re.code||""})),Ae=kl.json_to_sheet(V),Ne=kl.book_new();kl.book_append_sheet(Ne,Ae,"Productos"),gne(Ne,Ee)},ve=()=>{const Te=[{Id:"",Categoria:"Cuaderno",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],Ee=kl.json_to_sheet(Te),V=kl.book_new();kl.book_append_sheet(V,Ee,"Productos");const Ae=b4(V,{type:"array",bookType:"xlsx"}),Ne=new Blob([Ae],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Re=URL.createObjectURL(Ne),ze=document.createElement("a");ze.href=Re,ze.download="template_products_stationery.xlsx",document.body.appendChild(ze),ze.click(),ze.remove(),URL.revokeObjectURL(Re)},he=Te=>{const Ee=[],V=[];Te.forEach((Ne,Re)=>{if(!Ne||typeof Ne!="object"||xrt(Ne))return;const ze=Re+2,Ye=String(Wd(Ne,["Id","ID","docId","DocId"])??"").trim(),Ze=String(Wd(Ne,["Categoria","Categora","Category","category"])??"").trim(),dt=String(Wd(Ne,["Producto","Product","Nombre","Name","name"])??"").trim(),ge=Wd(Ne,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),Xe=Wd(Ne,["Cantidad","Qty","quantity","cantidad"]),ot=Wd(Ne,["Margen","Margin","margen","margin"]),be=Wd(Ne,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Ge=String(Wd(Ne,["Genero","Gnero","Gender","gender"])??"NA").trim(),ut=String(Wd(Ne,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),bt=Wd(Ne,["Codigo","Cdigo","Code","Barcode","code"]),Rt=PT(bt),Wt=Math.max(0,Bl(ge,0)),mt=Math.max(1,OC(Xe,1)),ne=Hle(Bl(ot,0)),ae=Math.max(0,Bl(be,0));Ze||V.push(`Fila ${ze}: falta Categoria.`),dt||V.push(`Fila ${ze}: falta Producto.`),Wt<=0&&V.push(`Fila ${ze}: PrecioProveedor debe ser > 0.`),mt<=0&&V.push(`Fila ${ze}: Cantidad debe ser > 0.`),ne<=0&&ae<=0&&V.push(`Fila ${ze}: Margen debe ser > 0 (o enviar PrecioVenta).`);const ue=TT.includes(Ge||"NA")?Ge:"NA";Ze&&dt&&Wt>0&&mt>0&&(ne>0||ae>0)&&Ee.push({id:Ye||void 0,category:Ze,name:dt,providerPrice:Wt,quantity:mt,margin:ne>0?ne:.7,salePrice:ae>0?ae:void 0,gender:ue,typeProduct:ut,code:Rt||"",_raw:Ne})});const Ae=new Map;for(const Ne of Ee){const Re=Ne.id?`id::${Ne.id}`:`${Ci(Ne.category)}::${Ci(Ne.name)}`;Ae.set(Re,Ne)}return{rows:Array.from(Ae.values()),errors:V}},oe=async Te=>{if(s(""),W([]),xe([]),te((Te==null?void 0:Te.name)||""),!Te)return;const Ee=Te.name.toLowerCase(),V=Ee.endsWith(".xlsx")||Ee.endsWith(".xls"),Ae=Ee.endsWith(".csv");if(!V&&!Ae){W(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Pe(!0);const Ne=new FileReader,Re=await new Promise((ot,be)=>{Ne.onerror=()=>be(new Error("No se pudo leer el archivo.")),Ne.onload=()=>ot(Ne.result),Ne.readAsArrayBuffer(Te)}),ze=ab(new Uint8Array(Re),{type:"array"}),Ye=ze.SheetNames[0],Ze=ze.Sheets[Ye],dt=kl.sheet_to_json(Ze,{defval:""}),{rows:ge,errors:Xe}=he(dt);xe(ge),W(Xe),ge.length===0&&Xe.length===0&&W(["No se encontraron filas vlidas para importar."])}catch(Ne){console.error(Ne),W(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Pe(!1)}},je=(Te,Ee)=>{xe(V=>{const Ae=[...V],Ne=Ae[Te];return Ne?(Ae[Te]={...Ne,...Ee},Ae):V})},Qe=v.useMemo(()=>{const Te=new Set(i.map(Ne=>Ne.id)),Ee=new Set(i.map(Ne=>`${Ci(Ne.category)}::${Ci(Ne.name)}`));let V=0,Ae=0;for(const Ne of Q){if(Ne.id&&Te.has(Ne.id)){V+=1;continue}const Re=`${Ci(Ne.category)}::${Ci(Ne.name)}`;Ee.has(Re)?V+=1:Ae+=1}return{total:Q.length,willCreate:Ae,willUpdate:V}},[Q,i]),tt=async()=>{if(s(""),Y.length>0){s(" Correg los errores antes de importar.");return}if(Q.length===0){s(" No hay filas para importar.");return}try{Pe(!0);const Te={},Ee={};i.forEach(Re=>{Te[Re.id]=Re,Ee[`${Ci(Re.category)}::${Ci(Re.name)}`]=Re});const V=K0(ke);let Ae=0,Ne=0;for(const Re of Q){const ze=String(Re.category||"").trim(),Ye=String(Re.name||"").trim(),{providerPrice:Ze,quantity:dt,margin:ge,salePrice:Xe,facturado:ot,totalEsperado:be,gain:Ge}=Ug({providerPrice:Re.providerPrice,quantity:Re.quantity,margin:Re.margin,salePrice:Re.salePrice});if(!ze||!Ye||Ze<=0||dt<=0||Xe<=0||ge<=0)continue;const ut={category:ze,name:Ye,providerPrice:Ze,quantity:dt,facturado:ot,totalEsperado:be,margin:ge,salePrice:Xe,gain:Ge,gender:Re.gender||"NA",typeProduct:String(Re.typeProduct||"").trim(),code:PT(Re.code)||null,updatedAt:rr.now()};let bt;if(Re.id&&Te[Re.id])bt=Te[Re.id];else{const Rt=`${Ci(ze)}::${Ci(Ye)}`;bt=Ee[Rt]}if(bt)V.update(Gt(ke,"products_stationery",bt.id),ut),Ne+=1;else{const Rt=Gt(At(ke,"products_stationery"));V.set(Rt,{...ut,createdAt:rr.now()}),Ae+=1}}await V.commit(),s(` Importacin lista. Creados: ${Ae}, Actualizados: ${Ne}`),G(!1),xe([]),W([]),te(""),e()}catch(Te){console.error(Te),s(" Error importando productos a Firestore.")}finally{Pe(!1)}},rt=()=>{A(""),f(""),p(""),x("")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:fe,type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:Et,type:"button",children:"+ Nuevo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{G(!0),xe([]),W([]),te("")},type:"button",children:"Importar (.xlsx)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ke(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ke(Le,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),o.jsx(Xc,{onClick:e,loading:r||le})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[o.jsx(q_,{label:"Productos",value:nt.count}),o.jsx(q_,{label:"Facturado",value:tl(nt.sumFact)}),o.jsx(q_,{label:"Esperado",value:tl(nt.sumEsperado)}),o.jsx(q_,{label:"Ganancia",value:tl(nt.sumGain)})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${qe?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(Te=>!Te),children:[c?"Cerrar filtros":"Abrir filtros"," ",qe?"(activos)":""]}),c&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:Te=>A(Te.target.value),placeholder:"Ej: Cuaderno Norma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:Te=>f(Te.target.value),placeholder:"Barcode"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:Te=>p(Te.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:Te=>x(Te.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:rt,children:"Limpiar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("div",{children:["Mostrando: ",o.jsx("b",{children:Le.length})]}),o.jsxs("div",{children:["Coleccin: ",o.jsx("b",{children:"products_stationery"})]})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Le.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):Le.map(Te=>o.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:Te.category}),o.jsx("div",{className:"text-base font-bold leading-tight",children:Te.name}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(Te.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",o.jsx("b",{children:tl(Te.totalEsperado||Te.salePrice*Te.quantity)})]}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(Te.gain)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",o.jsx("b",{children:Te.code||""})]}),o.jsx("div",{className:"mt-2 flex gap-2",children:o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>yt(Te),children:"Editar"})})]},Te.id))}),o.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),o.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"Venta"}),o.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):Le.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):Le.map(Te=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:Te.category}),o.jsx("td",{className:"p-2 border",children:Te.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(Te.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Te.quantity}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(Te.facturado)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(Te.totalEsperado||Te.salePrice*Te.quantity)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(Te.margin||0).toFixed(2)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(Te.salePrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:tl(Te.gain)}),o.jsx("td",{className:"p-2 border",children:Te.gender}),o.jsx("td",{className:"p-2 border",children:Te.typeProduct}),o.jsx("td",{className:"p-2 border",children:Te.code||""}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>yt(Te),children:"Editar"})})]},Te.id))})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),y&&o.jsxs(gq,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:O,onChange:Te=>B(Te.target.value),children:G_.map(Te=>o.jsx("option",{value:Te,children:Te},Te))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:P,onChange:Te=>D(Te.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(X)?"":X,onChange:Te=>de(Math.max(0,Bl(Te.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cantidad"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:re,onChange:Te=>ie(OC(Te.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:tl(Ug({providerPrice:X,quantity:re,margin:ce,salePrice:pe}).facturado)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Margen"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(ce)?"":ce,onChange:Te=>J(Math.max(0,Bl(Te.target.value,0)))}),o.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Ug({providerPrice:X,quantity:re,margin:ce,salePrice:pe}).salePrice)?"":Ug({providerPrice:X,quantity:re,margin:ce,salePrice:pe}).salePrice,onChange:Te=>{Se(Math.max(0,Bl(Te.target.value,0)))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:tl(Ug({providerPrice:X,quantity:re,margin:ce,salePrice:pe}).gain)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:k,onChange:Te=>F(Te.target.value),children:TT.map(Te=>o.jsx("option",{value:Te,children:Te},Te))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:H,onChange:Te=>M(Te.target.value),children:[o.jsx("option",{value:"",children:""}),grt.map(Te=>o.jsx("option",{value:Te,children:Te},Te))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:L,onChange:Te=>z(Te.target.value),placeholder:"Escane o peg el cdigo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Pt,children:"Escanear"})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),I(null)},children:"Cancelar"}),o.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:Ct,disabled:r,children:"Guardar"})]})]}),T&&o.jsx(gq,{onClose:()=>C(!1),title:"Resultado de escaneo",children:E?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:E.category}),o.jsx("div",{className:"text-lg font-bold",children:E.name}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(E.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:tl(E.gain)})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),o.jsx("div",{className:"font-semibold tabular-nums",children:tl(E.providerPrice)})]}),o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.quantity})]}),o.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.code||""})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{C(!1),yt(E)},children:"Editar"})})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:"No encontrado"}),o.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",o.jsx("b",{children:"products_stationery"}),"."]})]})}),R&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ve,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:Te=>{var Ee;return oe(((Ee=Te.target.files)==null?void 0:Ee[0])||null)}}),ee&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:ee})]}),le&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Y.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Y.slice(0,60).map((Te,Ee)=>o.jsx("li",{children:Te},Ee))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Qe.total," filas (Crear:"," ",Qe.willCreate," / Actualizar:"," ",Qe.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:tt,disabled:le||Q.length===0||Y.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:Q.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Q.slice(0,300).map((Te,Ee)=>{const V=Te.id?i.some(Re=>Re.id===Te.id):!1,Ae=i.some(Re=>`${Ci(Re.category)}::${Ci(Re.name)}`==`${Ci(Te.category)}::${Ci(Te.name)}`),Ne=V||Ae;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Te.id||"",onChange:Re=>je(Ee,{id:Re.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:Te.category,onChange:Re=>je(Ee,{category:Re.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:Te.name,onChange:Re=>je(Ee,{name:Re.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:Te.providerPrice,onChange:Re=>je(Ee,{providerPrice:Math.max(0,Bl(Re.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:Te.quantity,onChange:Re=>je(Ee,{quantity:OC(Re.target.value,1)})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:Te.margin,onChange:Re=>je(Ee,{margin:Math.max(0,Bl(Re.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:Te.salePrice??"",onChange:Re=>je(Ee,{salePrice:Math.max(0,Bl(Re.target.value,0))||void 0}),placeholder:"Opcional"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("select",{className:"w-28 border rounded px-2 py-1",value:Te.gender,onChange:Re=>je(Ee,{gender:Re.target.value}),children:TT.map(Re=>o.jsx("option",{value:Re,children:Re},Re))})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Te.typeProduct,onChange:Re=>je(Ee,{typeProduct:Re.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Te.code||"",onChange:Re=>je(Ee,{code:Re.target.value})})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ne?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ne?"ACTUALIZA":"CREA"})})]},`${Te.id||""}-${Ee}`)})})]}),Q.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Q.length," filas (importa todas)."]})]})]})]})})]})}function q_({label:t,value:e}){return o.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function gq({title:t,children:e,onClose:r}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:t}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}function yrt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function brt(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!0),c=yrt(),u=v.useMemo(()=>c?o.jsx(kve,{role:r}):o.jsx(jve,{role:r}),[c,r]),d=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const h=IX(vp,async f=>{l(!0);try{const m="POSYS_LOGIN_AT";if(f){const g=localStorage.getItem(m),x=g?Number(g):NaN;if(!Number.isFinite(x))localStorage.setItem(m,String(Date.now()));else if(Date.now()-x>1296e6){await bI(vp),localStorage.removeItem(m),localStorage.removeItem("role"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),e(null),n(""),s(""),l(!1);return}}}catch{}if(f){e(f);try{const m=Gt(ke,"users",f.uid),p=await fo(m);if(p.exists()){const g=p.data(),x=g.role||"",y=g.sellerCandyId||"";n(x||""),s(y||"")}else n(""),s("")}catch{n(""),s("")}}else e(null),n(""),s("");l(!1)});return()=>h()},[]),i)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>r==="admin"?o.jsx(mm,{to:"financialDashboard",replace:!0}):r==="vendedor_pollo"?o.jsx(mm,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?o.jsx(mm,{to:"salesClothes",replace:!0}):r==="vendedor_dulces"?o.jsx(mm,{to:"salesCandies",replace:!0}):o.jsx(mm,{to:"/",replace:!0});return o.jsx(pfe,{children:o.jsxs(qAe,{children:[o.jsx(cn,{path:"/",element:o.jsx(Pve,{})}),o.jsxs(cn,{path:"/admin",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"],children:u}),children:[o.jsx(cn,{index:!0,element:o.jsx(A,{})}),o.jsx(cn,{path:"bills",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(iSe,{})})}),o.jsx(cn,{path:"salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(SQ,{user:t})})}),o.jsx(cn,{path:"financialDashboard",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(PSe,{})})}),o.jsx(cn,{path:"expenses",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(kSe,{})})}),o.jsx(cn,{path:"billing",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(MSe,{})})}),o.jsx(cn,{path:"batches",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(ISe,{role:r})})}),o.jsx(cn,{path:"paidBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(VSe,{})})}),o.jsx(cn,{path:"fix",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(DSe,{})})}),o.jsx(cn,{path:"transactionclose",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(BSe,{})})}),o.jsx(cn,{path:"billhistoric",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(oSe,{})})}),o.jsx(cn,{path:"users",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(lSe,{})})}),o.jsx(cn,{path:"products",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(uSe,{})})}),o.jsx(cn,{path:"datacenter",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(uUe,{})})}),o.jsx(cn,{path:"productsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(hLe,{})})}),o.jsx(cn,{path:"mainordersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(zLe,{})})}),o.jsx(cn,{path:"productsPricesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(prt,{})})}),o.jsx(cn,{path:"inventoryMainOrderCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(WLe,{})})}),o.jsx(cn,{path:"inventoryCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(wLe,{})})}),o.jsx(cn,{path:"billingsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(aUe,{})})}),o.jsx(cn,{path:"cashDeliveries",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(frt,{})})}),o.jsx(cn,{path:"customersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(NLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"salesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(ILe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"expensesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(BLe,{})})}),o.jsx(cn,{path:"dashboardCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(MLe,{})})}),o.jsx(cn,{path:"transactionCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(kLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"vendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(LLe,{})})}),o.jsx(cn,{path:"productsVendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(KLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"cierreVentasCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(YLe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"reporteCierresCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(iUe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),o.jsx(cn,{path:"consolidatedVendors",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(rUe,{})})}),o.jsx(cn,{path:"salesClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(lIe,{})})}),o.jsx(cn,{path:"notebooksInventory",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(vrt,{})})}),o.jsx(cn,{path:"TransactionsReportClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(xIe,{})})}),o.jsx(cn,{path:"financialDashboardClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(dIe,{})})}),o.jsx(cn,{path:"ExpensesClothes",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(AIe,{})})}),o.jsx(cn,{path:"inventoryClothesBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(GSe,{})})}),o.jsx(cn,{path:"productsClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(nIe,{})})}),o.jsx(cn,{path:"CustomersClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(sIe,{})})})]}),o.jsx(cn,{path:"/salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(SQ,{user:t})})}),o.jsx(cn,{path:"*",element:o.jsx(mm,{to:"/"})})]})})}jT.createRoot(document.getElementById("root")).render(o.jsx(ao.StrictMode,{children:o.jsx(brt,{})}));export{xa as _,Nrt as c,Ff as g};
